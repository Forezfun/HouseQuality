var QW=Object.create;var vC=Object.defineProperty,e6=Object.defineProperties,t6=Object.getOwnPropertyDescriptor,n6=Object.getOwnPropertyDescriptors,i6=Object.getOwnPropertyNames,M0=Object.getOwnPropertySymbols,r6=Object.getPrototypeOf,yC=Object.prototype.hasOwnProperty,cP=Object.prototype.propertyIsEnumerable;var lP=(n,e,t)=>e in n?vC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ne=(n,e)=>{for(var t in e||={})yC.call(e,t)&&lP(n,t,e[t]);if(M0)for(var t of M0(e))cP.call(e,t)&&lP(n,t,e[t]);return n},Ct=(n,e)=>e6(n,n6(e));var Rd=(n,e)=>{var t={};for(var i in n)yC.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&M0)for(var i of M0(n))e.indexOf(i)<0&&cP.call(n,i)&&(t[i]=n[i]);return t};var uP=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var o6=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of i6(e))!yC.call(n,r)&&r!==t&&vC(n,r,{get:()=>e[r],enumerable:!(i=t6(e,r))||i.enumerable});return n};var _C=(n,e,t)=>(t=n!=null?QW(r6(n)):{},o6(e||!n||!n.__esModule?vC(t,"default",{value:n,enumerable:!0}):t,n));var dt=(n,e,t)=>new Promise((i,r)=>{var o=l=>{try{a(t.next(l))}catch(u){r(u)}},s=l=>{try{a(t.throw(l))}catch(u){r(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var w1=uP((jf,Om)=>{"use strict";(function(){var n,e="4.17.21",t=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",u=1,f=2,h=4,p=1,g=2,v=1,w=2,y=4,_=8,T=16,C=32,E=64,V=128,F=256,L=512,W=30,O="...",R=800,j=16,pe=1,ae=2,Ie=3,be=1/0,X=9007199254740991,ie=17976931348623157e292,q=NaN,ve=4294967295,Ve=ve-1,tt=ve>>>1,ge=[["ary",V],["bind",v],["bindKey",w],["curry",_],["curryRight",T],["flip",L],["partial",C],["partialRight",E],["rearg",F]],re="[object Arguments]",U="[object Array]",J="[object AsyncFunction]",_e="[object Boolean]",se="[object Date]",He="[object DOMException]",je="[object Error]",Le="[object Function]",rt="[object GeneratorFunction]",pt="[object Map]",ct="[object Number]",z="[object Null]",qt="[object Object]",Ge="[object Promise]",At="[object Proxy]",Xe="[object RegExp]",Vt="[object Set]",ht="[object String]",N="[object Symbol]",M="[object Undefined]",oe="[object WeakMap]",we="[object WeakSet]",De="[object ArrayBuffer]",he="[object DataView]",$e="[object Float32Array]",qe="[object Float64Array]",yt="[object Int8Array]",_t="[object Int16Array]",Fe="[object Int32Array]",nt="[object Uint8Array]",xt="[object Uint8ClampedArray]",Mt="[object Uint16Array]",it="[object Uint32Array]",sn=/\b__p \+= '';/g,Ht=/\b(__p \+=) '' \+/g,Ln=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,Ze=/[&<>"']/g,me=RegExp(Y.source),Se=RegExp(Ze.source),et=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,Nt=/<%=([\s\S]+?)%>/g,Yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Di=/^\w*$/,wn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tr=/[\\^$.*+?()[\]{}|]/g,$r=RegExp(tr.source),Wc=/^\s+/,ya=/\s/,Wo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xl=/\{\n\/\* \[wrapped with (.+)\] \*/,As=/,? & /,Yl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$o=/[()=,{}\[\]\/\s]/,Ug=/\\(\\)?/g,gd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bh=/\w*$/,Bg=/^[-+]0x[0-9a-f]+$/i,sb=/^0b[01]+$/i,ab=/^\[object .+?Constructor\]$/,lb=/^0o[0-7]+$/i,cb=/^(?:0|[1-9]\d*)$/,ub=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vd=/($^)/,A=/['\n\r\u2028\u2029\\]/g,ee="\\ud800-\\udfff",ce="\\u0300-\\u036f",de="\\ufe20-\\ufe2f",ne="\\u20d0-\\u20ff",Be=ce+de+ne,Ke="\\u2700-\\u27bf",ot="a-z\\xdf-\\xf6\\xf8-\\xff",ut="\\xac\\xb1\\xd7\\xf7",kt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ft="\\u2000-\\u206f",wt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pn="A-Z\\xc0-\\xd6\\xd8-\\xde",Mn="\\ufe0e\\ufe0f",vi=ut+kt+Ft+wt,ei="['\u2019]",bn="["+ee+"]",bt="["+vi+"]",Ei="["+Be+"]",Sn="\\d+",xo="["+Ke+"]",Ya="["+ot+"]",_r="[^"+ee+vi+Sn+Ke+ot+pn+"]",Za="\\ud83c[\\udffb-\\udfff]",ti="(?:"+Ei+"|"+Za+")",Pr="[^"+ee+"]",xr="(?:\\ud83c[\\udde6-\\uddff]){2}",ji="[\\ud800-\\udbff][\\udc00-\\udfff]",Ai="["+pn+"]",yd="\\u200d",_a="(?:"+Ya+"|"+_r+")",nH="(?:"+Ai+"|"+_r+")",ZD="(?:"+ei+"(?:d|ll|m|re|s|t|ve))?",KD="(?:"+ei+"(?:D|LL|M|RE|S|T|VE))?",JD=ti+"?",QD="["+Mn+"]?",iH="(?:"+yd+"(?:"+[Pr,xr,ji].join("|")+")"+QD+JD+")*",rH="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oH="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",eA=QD+JD+iH,sH="(?:"+[xo,xr,ji].join("|")+")"+eA,aH="(?:"+[Pr+Ei+"?",Ei,xr,ji,bn].join("|")+")",lH=RegExp(ei,"g"),cH=RegExp(Ei,"g"),db=RegExp(Za+"(?="+Za+")|"+aH+eA,"g"),uH=RegExp([Ai+"?"+Ya+"+"+ZD+"(?="+[bt,Ai,"$"].join("|")+")",nH+"+"+KD+"(?="+[bt,Ai+_a,"$"].join("|")+")",Ai+"?"+_a+"+"+ZD,Ai+"+"+KD,oH,rH,Sn,sH].join("|"),"g"),dH=RegExp("["+yd+ee+Be+Mn+"]"),fH=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hH=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pH=-1,li={};li[$e]=li[qe]=li[yt]=li[_t]=li[Fe]=li[nt]=li[xt]=li[Mt]=li[it]=!0,li[re]=li[U]=li[De]=li[_e]=li[he]=li[se]=li[je]=li[Le]=li[pt]=li[ct]=li[qt]=li[Xe]=li[Vt]=li[ht]=li[oe]=!1;var ni={};ni[re]=ni[U]=ni[De]=ni[he]=ni[_e]=ni[se]=ni[$e]=ni[qe]=ni[yt]=ni[_t]=ni[Fe]=ni[pt]=ni[ct]=ni[qt]=ni[Xe]=ni[Vt]=ni[ht]=ni[N]=ni[nt]=ni[xt]=ni[Mt]=ni[it]=!0,ni[je]=ni[Le]=ni[oe]=!1;var mH={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},gH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vH={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yH={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_H=parseFloat,xH=parseInt,tA=typeof global=="object"&&global&&global.Object===Object&&global,wH=typeof self=="object"&&self&&self.Object===Object&&self,nr=tA||wH||Function("return this")(),fb=typeof jf=="object"&&jf&&!jf.nodeType&&jf,$c=fb&&typeof Om=="object"&&Om&&!Om.nodeType&&Om,nA=$c&&$c.exports===fb,hb=nA&&tA.process,qo=function(){try{var K=$c&&$c.require&&$c.require("util").types;return K||hb&&hb.binding&&hb.binding("util")}catch{}}(),iA=qo&&qo.isArrayBuffer,rA=qo&&qo.isDate,oA=qo&&qo.isMap,sA=qo&&qo.isRegExp,aA=qo&&qo.isSet,lA=qo&&qo.isTypedArray;function wo(K,xe,fe){switch(fe.length){case 0:return K.call(xe);case 1:return K.call(xe,fe[0]);case 2:return K.call(xe,fe[0],fe[1]);case 3:return K.call(xe,fe[0],fe[1],fe[2])}return K.apply(xe,fe)}function bH(K,xe,fe,st){for(var zt=-1,Pn=K==null?0:K.length;++zt<Pn;){var Gi=K[zt];xe(st,Gi,fe(Gi),K)}return st}function Xo(K,xe){for(var fe=-1,st=K==null?0:K.length;++fe<st&&xe(K[fe],fe,K)!==!1;);return K}function CH(K,xe){for(var fe=K==null?0:K.length;fe--&&xe(K[fe],fe,K)!==!1;);return K}function cA(K,xe){for(var fe=-1,st=K==null?0:K.length;++fe<st;)if(!xe(K[fe],fe,K))return!1;return!0}function Zl(K,xe){for(var fe=-1,st=K==null?0:K.length,zt=0,Pn=[];++fe<st;){var Gi=K[fe];xe(Gi,fe,K)&&(Pn[zt++]=Gi)}return Pn}function Vg(K,xe){var fe=K==null?0:K.length;return!!fe&&_d(K,xe,0)>-1}function pb(K,xe,fe){for(var st=-1,zt=K==null?0:K.length;++st<zt;)if(fe(xe,K[st]))return!0;return!1}function ui(K,xe){for(var fe=-1,st=K==null?0:K.length,zt=Array(st);++fe<st;)zt[fe]=xe(K[fe],fe,K);return zt}function Kl(K,xe){for(var fe=-1,st=xe.length,zt=K.length;++fe<st;)K[zt+fe]=xe[fe];return K}function mb(K,xe,fe,st){var zt=-1,Pn=K==null?0:K.length;for(st&&Pn&&(fe=K[++zt]);++zt<Pn;)fe=xe(fe,K[zt],zt,K);return fe}function EH(K,xe,fe,st){var zt=K==null?0:K.length;for(st&&zt&&(fe=K[--zt]);zt--;)fe=xe(fe,K[zt],zt,K);return fe}function gb(K,xe){for(var fe=-1,st=K==null?0:K.length;++fe<st;)if(xe(K[fe],fe,K))return!0;return!1}var MH=vb("length");function SH(K){return K.split("")}function TH(K){return K.match(Yl)||[]}function uA(K,xe,fe){var st;return fe(K,function(zt,Pn,Gi){if(xe(zt,Pn,Gi))return st=Pn,!1}),st}function Hg(K,xe,fe,st){for(var zt=K.length,Pn=fe+(st?1:-1);st?Pn--:++Pn<zt;)if(xe(K[Pn],Pn,K))return Pn;return-1}function _d(K,xe,fe){return xe===xe?BH(K,xe,fe):Hg(K,dA,fe)}function IH(K,xe,fe,st){for(var zt=fe-1,Pn=K.length;++zt<Pn;)if(st(K[zt],xe))return zt;return-1}function dA(K){return K!==K}function fA(K,xe){var fe=K==null?0:K.length;return fe?_b(K,xe)/fe:q}function vb(K){return function(xe){return xe==null?n:xe[K]}}function yb(K){return function(xe){return K==null?n:K[xe]}}function hA(K,xe,fe,st,zt){return zt(K,function(Pn,Gi,Zn){fe=st?(st=!1,Pn):xe(fe,Pn,Gi,Zn)}),fe}function DH(K,xe){var fe=K.length;for(K.sort(xe);fe--;)K[fe]=K[fe].value;return K}function _b(K,xe){for(var fe,st=-1,zt=K.length;++st<zt;){var Pn=xe(K[st]);Pn!==n&&(fe=fe===n?Pn:fe+Pn)}return fe}function xb(K,xe){for(var fe=-1,st=Array(K);++fe<K;)st[fe]=xe(fe);return st}function AH(K,xe){return ui(xe,function(fe){return[fe,K[fe]]})}function pA(K){return K&&K.slice(0,yA(K)+1).replace(Wc,"")}function bo(K){return function(xe){return K(xe)}}function wb(K,xe){return ui(xe,function(fe){return K[fe]})}function Vh(K,xe){return K.has(xe)}function mA(K,xe){for(var fe=-1,st=K.length;++fe<st&&_d(xe,K[fe],0)>-1;);return fe}function gA(K,xe){for(var fe=K.length;fe--&&_d(xe,K[fe],0)>-1;);return fe}function RH(K,xe){for(var fe=K.length,st=0;fe--;)K[fe]===xe&&++st;return st}var PH=yb(mH),OH=yb(gH);function NH(K){return"\\"+yH[K]}function FH(K,xe){return K==null?n:K[xe]}function xd(K){return dH.test(K)}function LH(K){return fH.test(K)}function kH(K){for(var xe,fe=[];!(xe=K.next()).done;)fe.push(xe.value);return fe}function bb(K){var xe=-1,fe=Array(K.size);return K.forEach(function(st,zt){fe[++xe]=[zt,st]}),fe}function vA(K,xe){return function(fe){return K(xe(fe))}}function Jl(K,xe){for(var fe=-1,st=K.length,zt=0,Pn=[];++fe<st;){var Gi=K[fe];(Gi===xe||Gi===l)&&(K[fe]=l,Pn[zt++]=fe)}return Pn}function zg(K){var xe=-1,fe=Array(K.size);return K.forEach(function(st){fe[++xe]=st}),fe}function UH(K){var xe=-1,fe=Array(K.size);return K.forEach(function(st){fe[++xe]=[st,st]}),fe}function BH(K,xe,fe){for(var st=fe-1,zt=K.length;++st<zt;)if(K[st]===xe)return st;return-1}function VH(K,xe,fe){for(var st=fe+1;st--;)if(K[st]===xe)return st;return st}function wd(K){return xd(K)?zH(K):MH(K)}function Rs(K){return xd(K)?jH(K):SH(K)}function yA(K){for(var xe=K.length;xe--&&ya.test(K.charAt(xe)););return xe}var HH=yb(vH);function zH(K){for(var xe=db.lastIndex=0;db.test(K);)++xe;return xe}function jH(K){return K.match(db)||[]}function GH(K){return K.match(uH)||[]}var WH=function K(xe){xe=xe==null?nr:Ql.defaults(nr.Object(),xe,Ql.pick(nr,hH));var fe=xe.Array,st=xe.Date,zt=xe.Error,Pn=xe.Function,Gi=xe.Math,Zn=xe.Object,Cb=xe.RegExp,$H=xe.String,Yo=xe.TypeError,jg=fe.prototype,qH=Pn.prototype,bd=Zn.prototype,Gg=xe["__core-js_shared__"],Wg=qH.toString,Vn=bd.hasOwnProperty,XH=0,_A=function(){var c=/[^.]+$/.exec(Gg&&Gg.keys&&Gg.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),$g=bd.toString,YH=Wg.call(Zn),ZH=nr._,KH=Cb("^"+Wg.call(Vn).replace(tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qg=nA?xe.Buffer:n,ec=xe.Symbol,Xg=xe.Uint8Array,xA=qg?qg.allocUnsafe:n,Yg=vA(Zn.getPrototypeOf,Zn),wA=Zn.create,bA=bd.propertyIsEnumerable,Zg=jg.splice,CA=ec?ec.isConcatSpreadable:n,Hh=ec?ec.iterator:n,qc=ec?ec.toStringTag:n,Kg=function(){try{var c=Jc(Zn,"defineProperty");return c({},"",{}),c}catch{}}(),JH=xe.clearTimeout!==nr.clearTimeout&&xe.clearTimeout,QH=st&&st.now!==nr.Date.now&&st.now,ez=xe.setTimeout!==nr.setTimeout&&xe.setTimeout,Jg=Gi.ceil,Qg=Gi.floor,Eb=Zn.getOwnPropertySymbols,tz=qg?qg.isBuffer:n,EA=xe.isFinite,nz=jg.join,iz=vA(Zn.keys,Zn),Wi=Gi.max,wr=Gi.min,rz=st.now,oz=xe.parseInt,MA=Gi.random,sz=jg.reverse,Mb=Jc(xe,"DataView"),zh=Jc(xe,"Map"),Sb=Jc(xe,"Promise"),Cd=Jc(xe,"Set"),jh=Jc(xe,"WeakMap"),Gh=Jc(Zn,"create"),e0=jh&&new jh,Ed={},az=Qc(Mb),lz=Qc(zh),cz=Qc(Sb),uz=Qc(Cd),dz=Qc(jh),t0=ec?ec.prototype:n,Wh=t0?t0.valueOf:n,SA=t0?t0.toString:n;function S(c){if(Mi(c)&&!Wt(c)&&!(c instanceof mn)){if(c instanceof Zo)return c;if(Vn.call(c,"__wrapped__"))return TR(c)}return new Zo(c)}var Md=function(){function c(){}return function(d){if(!yi(d))return{};if(wA)return wA(d);c.prototype=d;var m=new c;return c.prototype=n,m}}();function n0(){}function Zo(c,d){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}S.templateSettings={escape:et,evaluate:Ye,interpolate:Nt,variable:"",imports:{_:S}},S.prototype=n0.prototype,S.prototype.constructor=S,Zo.prototype=Md(n0.prototype),Zo.prototype.constructor=Zo;function mn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ve,this.__views__=[]}function fz(){var c=new mn(this.__wrapped__);return c.__actions__=qr(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=qr(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=qr(this.__views__),c}function hz(){if(this.__filtered__){var c=new mn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function pz(){var c=this.__wrapped__.value(),d=this.__dir__,m=Wt(c),x=d<0,b=m?c.length:0,P=S5(0,b,this.__views__),k=P.start,G=P.end,te=G-k,Ce=x?G:k-1,Ee=this.__iteratees__,Oe=Ee.length,Je=0,mt=wr(te,this.__takeCount__);if(!m||!x&&b==te&&mt==te)return ZA(c,this.__actions__);var Rt=[];e:for(;te--&&Je<mt;){Ce+=d;for(var nn=-1,Pt=c[Ce];++nn<Oe;){var cn=Ee[nn],yn=cn.iteratee,Mo=cn.type,Fr=yn(Pt);if(Mo==ae)Pt=Fr;else if(!Fr){if(Mo==pe)continue e;break e}}Rt[Je++]=Pt}return Rt}mn.prototype=Md(n0.prototype),mn.prototype.constructor=mn;function Xc(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var x=c[d];this.set(x[0],x[1])}}function mz(){this.__data__=Gh?Gh(null):{},this.size=0}function gz(c){var d=this.has(c)&&delete this.__data__[c];return this.size-=d?1:0,d}function vz(c){var d=this.__data__;if(Gh){var m=d[c];return m===s?n:m}return Vn.call(d,c)?d[c]:n}function yz(c){var d=this.__data__;return Gh?d[c]!==n:Vn.call(d,c)}function _z(c,d){var m=this.__data__;return this.size+=this.has(c)?0:1,m[c]=Gh&&d===n?s:d,this}Xc.prototype.clear=mz,Xc.prototype.delete=gz,Xc.prototype.get=vz,Xc.prototype.has=yz,Xc.prototype.set=_z;function Ka(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var x=c[d];this.set(x[0],x[1])}}function xz(){this.__data__=[],this.size=0}function wz(c){var d=this.__data__,m=i0(d,c);if(m<0)return!1;var x=d.length-1;return m==x?d.pop():Zg.call(d,m,1),--this.size,!0}function bz(c){var d=this.__data__,m=i0(d,c);return m<0?n:d[m][1]}function Cz(c){return i0(this.__data__,c)>-1}function Ez(c,d){var m=this.__data__,x=i0(m,c);return x<0?(++this.size,m.push([c,d])):m[x][1]=d,this}Ka.prototype.clear=xz,Ka.prototype.delete=wz,Ka.prototype.get=bz,Ka.prototype.has=Cz,Ka.prototype.set=Ez;function Ja(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var x=c[d];this.set(x[0],x[1])}}function Mz(){this.size=0,this.__data__={hash:new Xc,map:new(zh||Ka),string:new Xc}}function Sz(c){var d=m0(this,c).delete(c);return this.size-=d?1:0,d}function Tz(c){return m0(this,c).get(c)}function Iz(c){return m0(this,c).has(c)}function Dz(c,d){var m=m0(this,c),x=m.size;return m.set(c,d),this.size+=m.size==x?0:1,this}Ja.prototype.clear=Mz,Ja.prototype.delete=Sz,Ja.prototype.get=Tz,Ja.prototype.has=Iz,Ja.prototype.set=Dz;function Yc(c){var d=-1,m=c==null?0:c.length;for(this.__data__=new Ja;++d<m;)this.add(c[d])}function Az(c){return this.__data__.set(c,s),this}function Rz(c){return this.__data__.has(c)}Yc.prototype.add=Yc.prototype.push=Az,Yc.prototype.has=Rz;function Ps(c){var d=this.__data__=new Ka(c);this.size=d.size}function Pz(){this.__data__=new Ka,this.size=0}function Oz(c){var d=this.__data__,m=d.delete(c);return this.size=d.size,m}function Nz(c){return this.__data__.get(c)}function Fz(c){return this.__data__.has(c)}function Lz(c,d){var m=this.__data__;if(m instanceof Ka){var x=m.__data__;if(!zh||x.length<t-1)return x.push([c,d]),this.size=++m.size,this;m=this.__data__=new Ja(x)}return m.set(c,d),this.size=m.size,this}Ps.prototype.clear=Pz,Ps.prototype.delete=Oz,Ps.prototype.get=Nz,Ps.prototype.has=Fz,Ps.prototype.set=Lz;function TA(c,d){var m=Wt(c),x=!m&&eu(c),b=!m&&!x&&oc(c),P=!m&&!x&&!b&&Dd(c),k=m||x||b||P,G=k?xb(c.length,$H):[],te=G.length;for(var Ce in c)(d||Vn.call(c,Ce))&&!(k&&(Ce=="length"||b&&(Ce=="offset"||Ce=="parent")||P&&(Ce=="buffer"||Ce=="byteLength"||Ce=="byteOffset")||nl(Ce,te)))&&G.push(Ce);return G}function IA(c){var d=c.length;return d?c[kb(0,d-1)]:n}function kz(c,d){return g0(qr(c),Zc(d,0,c.length))}function Uz(c){return g0(qr(c))}function Tb(c,d,m){(m!==n&&!Os(c[d],m)||m===n&&!(d in c))&&Qa(c,d,m)}function $h(c,d,m){var x=c[d];(!(Vn.call(c,d)&&Os(x,m))||m===n&&!(d in c))&&Qa(c,d,m)}function i0(c,d){for(var m=c.length;m--;)if(Os(c[m][0],d))return m;return-1}function Bz(c,d,m,x){return tc(c,function(b,P,k){d(x,b,m(b),k)}),x}function DA(c,d){return c&&wa(d,ir(d),c)}function Vz(c,d){return c&&wa(d,Yr(d),c)}function Qa(c,d,m){d=="__proto__"&&Kg?Kg(c,d,{configurable:!0,enumerable:!0,value:m,writable:!0}):c[d]=m}function Ib(c,d){for(var m=-1,x=d.length,b=fe(x),P=c==null;++m<x;)b[m]=P?n:lC(c,d[m]);return b}function Zc(c,d,m){return c===c&&(m!==n&&(c=c<=m?c:m),d!==n&&(c=c>=d?c:d)),c}function Ko(c,d,m,x,b,P){var k,G=d&u,te=d&f,Ce=d&h;if(m&&(k=b?m(c,x,b,P):m(c)),k!==n)return k;if(!yi(c))return c;var Ee=Wt(c);if(Ee){if(k=I5(c),!G)return qr(c,k)}else{var Oe=br(c),Je=Oe==Le||Oe==rt;if(oc(c))return QA(c,G);if(Oe==qt||Oe==re||Je&&!b){if(k=te||Je?{}:yR(c),!G)return te?v5(c,Vz(k,c)):g5(c,DA(k,c))}else{if(!ni[Oe])return b?c:{};k=D5(c,Oe,G)}}P||(P=new Ps);var mt=P.get(c);if(mt)return mt;P.set(c,k),qR(c)?c.forEach(function(Pt){k.add(Ko(Pt,d,m,Pt,c,P))}):WR(c)&&c.forEach(function(Pt,cn){k.set(cn,Ko(Pt,d,m,cn,c,P))});var Rt=Ce?te?Xb:qb:te?Yr:ir,nn=Ee?n:Rt(c);return Xo(nn||c,function(Pt,cn){nn&&(cn=Pt,Pt=c[cn]),$h(k,cn,Ko(Pt,d,m,cn,c,P))}),k}function Hz(c){var d=ir(c);return function(m){return AA(m,c,d)}}function AA(c,d,m){var x=m.length;if(c==null)return!x;for(c=Zn(c);x--;){var b=m[x],P=d[b],k=c[b];if(k===n&&!(b in c)||!P(k))return!1}return!0}function RA(c,d,m){if(typeof c!="function")throw new Yo(r);return Qh(function(){c.apply(n,m)},d)}function qh(c,d,m,x){var b=-1,P=Vg,k=!0,G=c.length,te=[],Ce=d.length;if(!G)return te;m&&(d=ui(d,bo(m))),x?(P=pb,k=!1):d.length>=t&&(P=Vh,k=!1,d=new Yc(d));e:for(;++b<G;){var Ee=c[b],Oe=m==null?Ee:m(Ee);if(Ee=x||Ee!==0?Ee:0,k&&Oe===Oe){for(var Je=Ce;Je--;)if(d[Je]===Oe)continue e;te.push(Ee)}else P(d,Oe,x)||te.push(Ee)}return te}var tc=rR(xa),PA=rR(Ab,!0);function zz(c,d){var m=!0;return tc(c,function(x,b,P){return m=!!d(x,b,P),m}),m}function r0(c,d,m){for(var x=-1,b=c.length;++x<b;){var P=c[x],k=d(P);if(k!=null&&(G===n?k===k&&!Eo(k):m(k,G)))var G=k,te=P}return te}function jz(c,d,m,x){var b=c.length;for(m=Kt(m),m<0&&(m=-m>b?0:b+m),x=x===n||x>b?b:Kt(x),x<0&&(x+=b),x=m>x?0:YR(x);m<x;)c[m++]=d;return c}function OA(c,d){var m=[];return tc(c,function(x,b,P){d(x,b,P)&&m.push(x)}),m}function cr(c,d,m,x,b){var P=-1,k=c.length;for(m||(m=R5),b||(b=[]);++P<k;){var G=c[P];d>0&&m(G)?d>1?cr(G,d-1,m,x,b):Kl(b,G):x||(b[b.length]=G)}return b}var Db=oR(),NA=oR(!0);function xa(c,d){return c&&Db(c,d,ir)}function Ab(c,d){return c&&NA(c,d,ir)}function o0(c,d){return Zl(d,function(m){return il(c[m])})}function Kc(c,d){d=ic(d,c);for(var m=0,x=d.length;c!=null&&m<x;)c=c[ba(d[m++])];return m&&m==x?c:n}function FA(c,d,m){var x=d(c);return Wt(c)?x:Kl(x,m(c))}function Or(c){return c==null?c===n?M:z:qc&&qc in Zn(c)?M5(c):U5(c)}function Rb(c,d){return c>d}function Gz(c,d){return c!=null&&Vn.call(c,d)}function Wz(c,d){return c!=null&&d in Zn(c)}function $z(c,d,m){return c>=wr(d,m)&&c<Wi(d,m)}function Pb(c,d,m){for(var x=m?pb:Vg,b=c[0].length,P=c.length,k=P,G=fe(P),te=1/0,Ce=[];k--;){var Ee=c[k];k&&d&&(Ee=ui(Ee,bo(d))),te=wr(Ee.length,te),G[k]=!m&&(d||b>=120&&Ee.length>=120)?new Yc(k&&Ee):n}Ee=c[0];var Oe=-1,Je=G[0];e:for(;++Oe<b&&Ce.length<te;){var mt=Ee[Oe],Rt=d?d(mt):mt;if(mt=m||mt!==0?mt:0,!(Je?Vh(Je,Rt):x(Ce,Rt,m))){for(k=P;--k;){var nn=G[k];if(!(nn?Vh(nn,Rt):x(c[k],Rt,m)))continue e}Je&&Je.push(Rt),Ce.push(mt)}}return Ce}function qz(c,d,m,x){return xa(c,function(b,P,k){d(x,m(b),P,k)}),x}function Xh(c,d,m){d=ic(d,c),c=bR(c,d);var x=c==null?c:c[ba(Qo(d))];return x==null?n:wo(x,c,m)}function LA(c){return Mi(c)&&Or(c)==re}function Xz(c){return Mi(c)&&Or(c)==De}function Yz(c){return Mi(c)&&Or(c)==se}function Yh(c,d,m,x,b){return c===d?!0:c==null||d==null||!Mi(c)&&!Mi(d)?c!==c&&d!==d:Zz(c,d,m,x,Yh,b)}function Zz(c,d,m,x,b,P){var k=Wt(c),G=Wt(d),te=k?U:br(c),Ce=G?U:br(d);te=te==re?qt:te,Ce=Ce==re?qt:Ce;var Ee=te==qt,Oe=Ce==qt,Je=te==Ce;if(Je&&oc(c)){if(!oc(d))return!1;k=!0,Ee=!1}if(Je&&!Ee)return P||(P=new Ps),k||Dd(c)?mR(c,d,m,x,b,P):C5(c,d,te,m,x,b,P);if(!(m&p)){var mt=Ee&&Vn.call(c,"__wrapped__"),Rt=Oe&&Vn.call(d,"__wrapped__");if(mt||Rt){var nn=mt?c.value():c,Pt=Rt?d.value():d;return P||(P=new Ps),b(nn,Pt,m,x,P)}}return Je?(P||(P=new Ps),E5(c,d,m,x,b,P)):!1}function Kz(c){return Mi(c)&&br(c)==pt}function Ob(c,d,m,x){var b=m.length,P=b,k=!x;if(c==null)return!P;for(c=Zn(c);b--;){var G=m[b];if(k&&G[2]?G[1]!==c[G[0]]:!(G[0]in c))return!1}for(;++b<P;){G=m[b];var te=G[0],Ce=c[te],Ee=G[1];if(k&&G[2]){if(Ce===n&&!(te in c))return!1}else{var Oe=new Ps;if(x)var Je=x(Ce,Ee,te,c,d,Oe);if(!(Je===n?Yh(Ee,Ce,p|g,x,Oe):Je))return!1}}return!0}function kA(c){if(!yi(c)||O5(c))return!1;var d=il(c)?KH:ab;return d.test(Qc(c))}function Jz(c){return Mi(c)&&Or(c)==Xe}function Qz(c){return Mi(c)&&br(c)==Vt}function e5(c){return Mi(c)&&b0(c.length)&&!!li[Or(c)]}function UA(c){return typeof c=="function"?c:c==null?Zr:typeof c=="object"?Wt(c)?HA(c[0],c[1]):VA(c):sP(c)}function Nb(c){if(!Jh(c))return iz(c);var d=[];for(var m in Zn(c))Vn.call(c,m)&&m!="constructor"&&d.push(m);return d}function t5(c){if(!yi(c))return k5(c);var d=Jh(c),m=[];for(var x in c)x=="constructor"&&(d||!Vn.call(c,x))||m.push(x);return m}function Fb(c,d){return c<d}function BA(c,d){var m=-1,x=Xr(c)?fe(c.length):[];return tc(c,function(b,P,k){x[++m]=d(b,P,k)}),x}function VA(c){var d=Zb(c);return d.length==1&&d[0][2]?xR(d[0][0],d[0][1]):function(m){return m===c||Ob(m,c,d)}}function HA(c,d){return Jb(c)&&_R(d)?xR(ba(c),d):function(m){var x=lC(m,c);return x===n&&x===d?cC(m,c):Yh(d,x,p|g)}}function s0(c,d,m,x,b){c!==d&&Db(d,function(P,k){if(b||(b=new Ps),yi(P))n5(c,d,k,m,s0,x,b);else{var G=x?x(eC(c,k),P,k+"",c,d,b):n;G===n&&(G=P),Tb(c,k,G)}},Yr)}function n5(c,d,m,x,b,P,k){var G=eC(c,m),te=eC(d,m),Ce=k.get(te);if(Ce){Tb(c,m,Ce);return}var Ee=P?P(G,te,m+"",c,d,k):n,Oe=Ee===n;if(Oe){var Je=Wt(te),mt=!Je&&oc(te),Rt=!Je&&!mt&&Dd(te);Ee=te,Je||mt||Rt?Wt(G)?Ee=G:Ri(G)?Ee=qr(G):mt?(Oe=!1,Ee=QA(te,!0)):Rt?(Oe=!1,Ee=eR(te,!0)):Ee=[]:ep(te)||eu(te)?(Ee=G,eu(G)?Ee=ZR(G):(!yi(G)||il(G))&&(Ee=yR(te))):Oe=!1}Oe&&(k.set(te,Ee),b(Ee,te,x,P,k),k.delete(te)),Tb(c,m,Ee)}function zA(c,d){var m=c.length;if(m)return d+=d<0?m:0,nl(d,m)?c[d]:n}function jA(c,d,m){d.length?d=ui(d,function(P){return Wt(P)?function(k){return Kc(k,P.length===1?P[0]:P)}:P}):d=[Zr];var x=-1;d=ui(d,bo(Tt()));var b=BA(c,function(P,k,G){var te=ui(d,function(Ce){return Ce(P)});return{criteria:te,index:++x,value:P}});return DH(b,function(P,k){return m5(P,k,m)})}function i5(c,d){return GA(c,d,function(m,x){return cC(c,x)})}function GA(c,d,m){for(var x=-1,b=d.length,P={};++x<b;){var k=d[x],G=Kc(c,k);m(G,k)&&Zh(P,ic(k,c),G)}return P}function r5(c){return function(d){return Kc(d,c)}}function Lb(c,d,m,x){var b=x?IH:_d,P=-1,k=d.length,G=c;for(c===d&&(d=qr(d)),m&&(G=ui(c,bo(m)));++P<k;)for(var te=0,Ce=d[P],Ee=m?m(Ce):Ce;(te=b(G,Ee,te,x))>-1;)G!==c&&Zg.call(G,te,1),Zg.call(c,te,1);return c}function WA(c,d){for(var m=c?d.length:0,x=m-1;m--;){var b=d[m];if(m==x||b!==P){var P=b;nl(b)?Zg.call(c,b,1):Vb(c,b)}}return c}function kb(c,d){return c+Qg(MA()*(d-c+1))}function o5(c,d,m,x){for(var b=-1,P=Wi(Jg((d-c)/(m||1)),0),k=fe(P);P--;)k[x?P:++b]=c,c+=m;return k}function Ub(c,d){var m="";if(!c||d<1||d>X)return m;do d%2&&(m+=c),d=Qg(d/2),d&&(c+=c);while(d);return m}function an(c,d){return tC(wR(c,d,Zr),c+"")}function s5(c){return IA(Ad(c))}function a5(c,d){var m=Ad(c);return g0(m,Zc(d,0,m.length))}function Zh(c,d,m,x){if(!yi(c))return c;d=ic(d,c);for(var b=-1,P=d.length,k=P-1,G=c;G!=null&&++b<P;){var te=ba(d[b]),Ce=m;if(te==="__proto__"||te==="constructor"||te==="prototype")return c;if(b!=k){var Ee=G[te];Ce=x?x(Ee,te,G):n,Ce===n&&(Ce=yi(Ee)?Ee:nl(d[b+1])?[]:{})}$h(G,te,Ce),G=G[te]}return c}var $A=e0?function(c,d){return e0.set(c,d),c}:Zr,l5=Kg?function(c,d){return Kg(c,"toString",{configurable:!0,enumerable:!1,value:dC(d),writable:!0})}:Zr;function c5(c){return g0(Ad(c))}function Jo(c,d,m){var x=-1,b=c.length;d<0&&(d=-d>b?0:b+d),m=m>b?b:m,m<0&&(m+=b),b=d>m?0:m-d>>>0,d>>>=0;for(var P=fe(b);++x<b;)P[x]=c[x+d];return P}function u5(c,d){var m;return tc(c,function(x,b,P){return m=d(x,b,P),!m}),!!m}function a0(c,d,m){var x=0,b=c==null?x:c.length;if(typeof d=="number"&&d===d&&b<=tt){for(;x<b;){var P=x+b>>>1,k=c[P];k!==null&&!Eo(k)&&(m?k<=d:k<d)?x=P+1:b=P}return b}return Bb(c,d,Zr,m)}function Bb(c,d,m,x){var b=0,P=c==null?0:c.length;if(P===0)return 0;d=m(d);for(var k=d!==d,G=d===null,te=Eo(d),Ce=d===n;b<P;){var Ee=Qg((b+P)/2),Oe=m(c[Ee]),Je=Oe!==n,mt=Oe===null,Rt=Oe===Oe,nn=Eo(Oe);if(k)var Pt=x||Rt;else Ce?Pt=Rt&&(x||Je):G?Pt=Rt&&Je&&(x||!mt):te?Pt=Rt&&Je&&!mt&&(x||!nn):mt||nn?Pt=!1:Pt=x?Oe<=d:Oe<d;Pt?b=Ee+1:P=Ee}return wr(P,Ve)}function qA(c,d){for(var m=-1,x=c.length,b=0,P=[];++m<x;){var k=c[m],G=d?d(k):k;if(!m||!Os(G,te)){var te=G;P[b++]=k===0?0:k}}return P}function XA(c){return typeof c=="number"?c:Eo(c)?q:+c}function Co(c){if(typeof c=="string")return c;if(Wt(c))return ui(c,Co)+"";if(Eo(c))return SA?SA.call(c):"";var d=c+"";return d=="0"&&1/c==-be?"-0":d}function nc(c,d,m){var x=-1,b=Vg,P=c.length,k=!0,G=[],te=G;if(m)k=!1,b=pb;else if(P>=t){var Ce=d?null:w5(c);if(Ce)return zg(Ce);k=!1,b=Vh,te=new Yc}else te=d?[]:G;e:for(;++x<P;){var Ee=c[x],Oe=d?d(Ee):Ee;if(Ee=m||Ee!==0?Ee:0,k&&Oe===Oe){for(var Je=te.length;Je--;)if(te[Je]===Oe)continue e;d&&te.push(Oe),G.push(Ee)}else b(te,Oe,m)||(te!==G&&te.push(Oe),G.push(Ee))}return G}function Vb(c,d){return d=ic(d,c),c=bR(c,d),c==null||delete c[ba(Qo(d))]}function YA(c,d,m,x){return Zh(c,d,m(Kc(c,d)),x)}function l0(c,d,m,x){for(var b=c.length,P=x?b:-1;(x?P--:++P<b)&&d(c[P],P,c););return m?Jo(c,x?0:P,x?P+1:b):Jo(c,x?P+1:0,x?b:P)}function ZA(c,d){var m=c;return m instanceof mn&&(m=m.value()),mb(d,function(x,b){return b.func.apply(b.thisArg,Kl([x],b.args))},m)}function Hb(c,d,m){var x=c.length;if(x<2)return x?nc(c[0]):[];for(var b=-1,P=fe(x);++b<x;)for(var k=c[b],G=-1;++G<x;)G!=b&&(P[b]=qh(P[b]||k,c[G],d,m));return nc(cr(P,1),d,m)}function KA(c,d,m){for(var x=-1,b=c.length,P=d.length,k={};++x<b;){var G=x<P?d[x]:n;m(k,c[x],G)}return k}function zb(c){return Ri(c)?c:[]}function jb(c){return typeof c=="function"?c:Zr}function ic(c,d){return Wt(c)?c:Jb(c,d)?[c]:SR(kn(c))}var d5=an;function rc(c,d,m){var x=c.length;return m=m===n?x:m,!d&&m>=x?c:Jo(c,d,m)}var JA=JH||function(c){return nr.clearTimeout(c)};function QA(c,d){if(d)return c.slice();var m=c.length,x=xA?xA(m):new c.constructor(m);return c.copy(x),x}function Gb(c){var d=new c.constructor(c.byteLength);return new Xg(d).set(new Xg(c)),d}function f5(c,d){var m=d?Gb(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.byteLength)}function h5(c){var d=new c.constructor(c.source,Bh.exec(c));return d.lastIndex=c.lastIndex,d}function p5(c){return Wh?Zn(Wh.call(c)):{}}function eR(c,d){var m=d?Gb(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.length)}function tR(c,d){if(c!==d){var m=c!==n,x=c===null,b=c===c,P=Eo(c),k=d!==n,G=d===null,te=d===d,Ce=Eo(d);if(!G&&!Ce&&!P&&c>d||P&&k&&te&&!G&&!Ce||x&&k&&te||!m&&te||!b)return 1;if(!x&&!P&&!Ce&&c<d||Ce&&m&&b&&!x&&!P||G&&m&&b||!k&&b||!te)return-1}return 0}function m5(c,d,m){for(var x=-1,b=c.criteria,P=d.criteria,k=b.length,G=m.length;++x<k;){var te=tR(b[x],P[x]);if(te){if(x>=G)return te;var Ce=m[x];return te*(Ce=="desc"?-1:1)}}return c.index-d.index}function nR(c,d,m,x){for(var b=-1,P=c.length,k=m.length,G=-1,te=d.length,Ce=Wi(P-k,0),Ee=fe(te+Ce),Oe=!x;++G<te;)Ee[G]=d[G];for(;++b<k;)(Oe||b<P)&&(Ee[m[b]]=c[b]);for(;Ce--;)Ee[G++]=c[b++];return Ee}function iR(c,d,m,x){for(var b=-1,P=c.length,k=-1,G=m.length,te=-1,Ce=d.length,Ee=Wi(P-G,0),Oe=fe(Ee+Ce),Je=!x;++b<Ee;)Oe[b]=c[b];for(var mt=b;++te<Ce;)Oe[mt+te]=d[te];for(;++k<G;)(Je||b<P)&&(Oe[mt+m[k]]=c[b++]);return Oe}function qr(c,d){var m=-1,x=c.length;for(d||(d=fe(x));++m<x;)d[m]=c[m];return d}function wa(c,d,m,x){var b=!m;m||(m={});for(var P=-1,k=d.length;++P<k;){var G=d[P],te=x?x(m[G],c[G],G,m,c):n;te===n&&(te=c[G]),b?Qa(m,G,te):$h(m,G,te)}return m}function g5(c,d){return wa(c,Kb(c),d)}function v5(c,d){return wa(c,gR(c),d)}function c0(c,d){return function(m,x){var b=Wt(m)?bH:Bz,P=d?d():{};return b(m,c,Tt(x,2),P)}}function Sd(c){return an(function(d,m){var x=-1,b=m.length,P=b>1?m[b-1]:n,k=b>2?m[2]:n;for(P=c.length>3&&typeof P=="function"?(b--,P):n,k&&Nr(m[0],m[1],k)&&(P=b<3?n:P,b=1),d=Zn(d);++x<b;){var G=m[x];G&&c(d,G,x,P)}return d})}function rR(c,d){return function(m,x){if(m==null)return m;if(!Xr(m))return c(m,x);for(var b=m.length,P=d?b:-1,k=Zn(m);(d?P--:++P<b)&&x(k[P],P,k)!==!1;);return m}}function oR(c){return function(d,m,x){for(var b=-1,P=Zn(d),k=x(d),G=k.length;G--;){var te=k[c?G:++b];if(m(P[te],te,P)===!1)break}return d}}function y5(c,d,m){var x=d&v,b=Kh(c);function P(){var k=this&&this!==nr&&this instanceof P?b:c;return k.apply(x?m:this,arguments)}return P}function sR(c){return function(d){d=kn(d);var m=xd(d)?Rs(d):n,x=m?m[0]:d.charAt(0),b=m?rc(m,1).join(""):d.slice(1);return x[c]()+b}}function Td(c){return function(d){return mb(rP(iP(d).replace(lH,"")),c,"")}}function Kh(c){return function(){var d=arguments;switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3]);case 5:return new c(d[0],d[1],d[2],d[3],d[4]);case 6:return new c(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new c(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var m=Md(c.prototype),x=c.apply(m,d);return yi(x)?x:m}}function _5(c,d,m){var x=Kh(c);function b(){for(var P=arguments.length,k=fe(P),G=P,te=Id(b);G--;)k[G]=arguments[G];var Ce=P<3&&k[0]!==te&&k[P-1]!==te?[]:Jl(k,te);if(P-=Ce.length,P<m)return dR(c,d,u0,b.placeholder,n,k,Ce,n,n,m-P);var Ee=this&&this!==nr&&this instanceof b?x:c;return wo(Ee,this,k)}return b}function aR(c){return function(d,m,x){var b=Zn(d);if(!Xr(d)){var P=Tt(m,3);d=ir(d),m=function(G){return P(b[G],G,b)}}var k=c(d,m,x);return k>-1?b[P?d[k]:k]:n}}function lR(c){return tl(function(d){var m=d.length,x=m,b=Zo.prototype.thru;for(c&&d.reverse();x--;){var P=d[x];if(typeof P!="function")throw new Yo(r);if(b&&!k&&p0(P)=="wrapper")var k=new Zo([],!0)}for(x=k?x:m;++x<m;){P=d[x];var G=p0(P),te=G=="wrapper"?Yb(P):n;te&&Qb(te[0])&&te[1]==(V|_|C|F)&&!te[4].length&&te[9]==1?k=k[p0(te[0])].apply(k,te[3]):k=P.length==1&&Qb(P)?k[G]():k.thru(P)}return function(){var Ce=arguments,Ee=Ce[0];if(k&&Ce.length==1&&Wt(Ee))return k.plant(Ee).value();for(var Oe=0,Je=m?d[Oe].apply(this,Ce):Ee;++Oe<m;)Je=d[Oe].call(this,Je);return Je}})}function u0(c,d,m,x,b,P,k,G,te,Ce){var Ee=d&V,Oe=d&v,Je=d&w,mt=d&(_|T),Rt=d&L,nn=Je?n:Kh(c);function Pt(){for(var cn=arguments.length,yn=fe(cn),Mo=cn;Mo--;)yn[Mo]=arguments[Mo];if(mt)var Fr=Id(Pt),So=RH(yn,Fr);if(x&&(yn=nR(yn,x,b,mt)),P&&(yn=iR(yn,P,k,mt)),cn-=So,mt&&cn<Ce){var Pi=Jl(yn,Fr);return dR(c,d,u0,Pt.placeholder,m,yn,Pi,G,te,Ce-cn)}var Ns=Oe?m:this,ol=Je?Ns[c]:c;return cn=yn.length,G?yn=B5(yn,G):Rt&&cn>1&&yn.reverse(),Ee&&te<cn&&(yn.length=te),this&&this!==nr&&this instanceof Pt&&(ol=nn||Kh(ol)),ol.apply(Ns,yn)}return Pt}function cR(c,d){return function(m,x){return qz(m,c,d(x),{})}}function d0(c,d){return function(m,x){var b;if(m===n&&x===n)return d;if(m!==n&&(b=m),x!==n){if(b===n)return x;typeof m=="string"||typeof x=="string"?(m=Co(m),x=Co(x)):(m=XA(m),x=XA(x)),b=c(m,x)}return b}}function Wb(c){return tl(function(d){return d=ui(d,bo(Tt())),an(function(m){var x=this;return c(d,function(b){return wo(b,x,m)})})})}function f0(c,d){d=d===n?" ":Co(d);var m=d.length;if(m<2)return m?Ub(d,c):d;var x=Ub(d,Jg(c/wd(d)));return xd(d)?rc(Rs(x),0,c).join(""):x.slice(0,c)}function x5(c,d,m,x){var b=d&v,P=Kh(c);function k(){for(var G=-1,te=arguments.length,Ce=-1,Ee=x.length,Oe=fe(Ee+te),Je=this&&this!==nr&&this instanceof k?P:c;++Ce<Ee;)Oe[Ce]=x[Ce];for(;te--;)Oe[Ce++]=arguments[++G];return wo(Je,b?m:this,Oe)}return k}function uR(c){return function(d,m,x){return x&&typeof x!="number"&&Nr(d,m,x)&&(m=x=n),d=rl(d),m===n?(m=d,d=0):m=rl(m),x=x===n?d<m?1:-1:rl(x),o5(d,m,x,c)}}function h0(c){return function(d,m){return typeof d=="string"&&typeof m=="string"||(d=es(d),m=es(m)),c(d,m)}}function dR(c,d,m,x,b,P,k,G,te,Ce){var Ee=d&_,Oe=Ee?k:n,Je=Ee?n:k,mt=Ee?P:n,Rt=Ee?n:P;d|=Ee?C:E,d&=~(Ee?E:C),d&y||(d&=~(v|w));var nn=[c,d,b,mt,Oe,Rt,Je,G,te,Ce],Pt=m.apply(n,nn);return Qb(c)&&CR(Pt,nn),Pt.placeholder=x,ER(Pt,c,d)}function $b(c){var d=Gi[c];return function(m,x){if(m=es(m),x=x==null?0:wr(Kt(x),292),x&&EA(m)){var b=(kn(m)+"e").split("e"),P=d(b[0]+"e"+(+b[1]+x));return b=(kn(P)+"e").split("e"),+(b[0]+"e"+(+b[1]-x))}return d(m)}}var w5=Cd&&1/zg(new Cd([,-0]))[1]==be?function(c){return new Cd(c)}:pC;function fR(c){return function(d){var m=br(d);return m==pt?bb(d):m==Vt?UH(d):AH(d,c(d))}}function el(c,d,m,x,b,P,k,G){var te=d&w;if(!te&&typeof c!="function")throw new Yo(r);var Ce=x?x.length:0;if(Ce||(d&=~(C|E),x=b=n),k=k===n?k:Wi(Kt(k),0),G=G===n?G:Kt(G),Ce-=b?b.length:0,d&E){var Ee=x,Oe=b;x=b=n}var Je=te?n:Yb(c),mt=[c,d,m,x,b,Ee,Oe,P,k,G];if(Je&&L5(mt,Je),c=mt[0],d=mt[1],m=mt[2],x=mt[3],b=mt[4],G=mt[9]=mt[9]===n?te?0:c.length:Wi(mt[9]-Ce,0),!G&&d&(_|T)&&(d&=~(_|T)),!d||d==v)var Rt=y5(c,d,m);else d==_||d==T?Rt=_5(c,d,G):(d==C||d==(v|C))&&!b.length?Rt=x5(c,d,m,x):Rt=u0.apply(n,mt);var nn=Je?$A:CR;return ER(nn(Rt,mt),c,d)}function hR(c,d,m,x){return c===n||Os(c,bd[m])&&!Vn.call(x,m)?d:c}function pR(c,d,m,x,b,P){return yi(c)&&yi(d)&&(P.set(d,c),s0(c,d,n,pR,P),P.delete(d)),c}function b5(c){return ep(c)?n:c}function mR(c,d,m,x,b,P){var k=m&p,G=c.length,te=d.length;if(G!=te&&!(k&&te>G))return!1;var Ce=P.get(c),Ee=P.get(d);if(Ce&&Ee)return Ce==d&&Ee==c;var Oe=-1,Je=!0,mt=m&g?new Yc:n;for(P.set(c,d),P.set(d,c);++Oe<G;){var Rt=c[Oe],nn=d[Oe];if(x)var Pt=k?x(nn,Rt,Oe,d,c,P):x(Rt,nn,Oe,c,d,P);if(Pt!==n){if(Pt)continue;Je=!1;break}if(mt){if(!gb(d,function(cn,yn){if(!Vh(mt,yn)&&(Rt===cn||b(Rt,cn,m,x,P)))return mt.push(yn)})){Je=!1;break}}else if(!(Rt===nn||b(Rt,nn,m,x,P))){Je=!1;break}}return P.delete(c),P.delete(d),Je}function C5(c,d,m,x,b,P,k){switch(m){case he:if(c.byteLength!=d.byteLength||c.byteOffset!=d.byteOffset)return!1;c=c.buffer,d=d.buffer;case De:return!(c.byteLength!=d.byteLength||!P(new Xg(c),new Xg(d)));case _e:case se:case ct:return Os(+c,+d);case je:return c.name==d.name&&c.message==d.message;case Xe:case ht:return c==d+"";case pt:var G=bb;case Vt:var te=x&p;if(G||(G=zg),c.size!=d.size&&!te)return!1;var Ce=k.get(c);if(Ce)return Ce==d;x|=g,k.set(c,d);var Ee=mR(G(c),G(d),x,b,P,k);return k.delete(c),Ee;case N:if(Wh)return Wh.call(c)==Wh.call(d)}return!1}function E5(c,d,m,x,b,P){var k=m&p,G=qb(c),te=G.length,Ce=qb(d),Ee=Ce.length;if(te!=Ee&&!k)return!1;for(var Oe=te;Oe--;){var Je=G[Oe];if(!(k?Je in d:Vn.call(d,Je)))return!1}var mt=P.get(c),Rt=P.get(d);if(mt&&Rt)return mt==d&&Rt==c;var nn=!0;P.set(c,d),P.set(d,c);for(var Pt=k;++Oe<te;){Je=G[Oe];var cn=c[Je],yn=d[Je];if(x)var Mo=k?x(yn,cn,Je,d,c,P):x(cn,yn,Je,c,d,P);if(!(Mo===n?cn===yn||b(cn,yn,m,x,P):Mo)){nn=!1;break}Pt||(Pt=Je=="constructor")}if(nn&&!Pt){var Fr=c.constructor,So=d.constructor;Fr!=So&&"constructor"in c&&"constructor"in d&&!(typeof Fr=="function"&&Fr instanceof Fr&&typeof So=="function"&&So instanceof So)&&(nn=!1)}return P.delete(c),P.delete(d),nn}function tl(c){return tC(wR(c,n,AR),c+"")}function qb(c){return FA(c,ir,Kb)}function Xb(c){return FA(c,Yr,gR)}var Yb=e0?function(c){return e0.get(c)}:pC;function p0(c){for(var d=c.name+"",m=Ed[d],x=Vn.call(Ed,d)?m.length:0;x--;){var b=m[x],P=b.func;if(P==null||P==c)return b.name}return d}function Id(c){var d=Vn.call(S,"placeholder")?S:c;return d.placeholder}function Tt(){var c=S.iteratee||fC;return c=c===fC?UA:c,arguments.length?c(arguments[0],arguments[1]):c}function m0(c,d){var m=c.__data__;return P5(d)?m[typeof d=="string"?"string":"hash"]:m.map}function Zb(c){for(var d=ir(c),m=d.length;m--;){var x=d[m],b=c[x];d[m]=[x,b,_R(b)]}return d}function Jc(c,d){var m=FH(c,d);return kA(m)?m:n}function M5(c){var d=Vn.call(c,qc),m=c[qc];try{c[qc]=n;var x=!0}catch{}var b=$g.call(c);return x&&(d?c[qc]=m:delete c[qc]),b}var Kb=Eb?function(c){return c==null?[]:(c=Zn(c),Zl(Eb(c),function(d){return bA.call(c,d)}))}:mC,gR=Eb?function(c){for(var d=[];c;)Kl(d,Kb(c)),c=Yg(c);return d}:mC,br=Or;(Mb&&br(new Mb(new ArrayBuffer(1)))!=he||zh&&br(new zh)!=pt||Sb&&br(Sb.resolve())!=Ge||Cd&&br(new Cd)!=Vt||jh&&br(new jh)!=oe)&&(br=function(c){var d=Or(c),m=d==qt?c.constructor:n,x=m?Qc(m):"";if(x)switch(x){case az:return he;case lz:return pt;case cz:return Ge;case uz:return Vt;case dz:return oe}return d});function S5(c,d,m){for(var x=-1,b=m.length;++x<b;){var P=m[x],k=P.size;switch(P.type){case"drop":c+=k;break;case"dropRight":d-=k;break;case"take":d=wr(d,c+k);break;case"takeRight":c=Wi(c,d-k);break}}return{start:c,end:d}}function T5(c){var d=c.match(Xl);return d?d[1].split(As):[]}function vR(c,d,m){d=ic(d,c);for(var x=-1,b=d.length,P=!1;++x<b;){var k=ba(d[x]);if(!(P=c!=null&&m(c,k)))break;c=c[k]}return P||++x!=b?P:(b=c==null?0:c.length,!!b&&b0(b)&&nl(k,b)&&(Wt(c)||eu(c)))}function I5(c){var d=c.length,m=new c.constructor(d);return d&&typeof c[0]=="string"&&Vn.call(c,"index")&&(m.index=c.index,m.input=c.input),m}function yR(c){return typeof c.constructor=="function"&&!Jh(c)?Md(Yg(c)):{}}function D5(c,d,m){var x=c.constructor;switch(d){case De:return Gb(c);case _e:case se:return new x(+c);case he:return f5(c,m);case $e:case qe:case yt:case _t:case Fe:case nt:case xt:case Mt:case it:return eR(c,m);case pt:return new x;case ct:case ht:return new x(c);case Xe:return h5(c);case Vt:return new x;case N:return p5(c)}}function A5(c,d){var m=d.length;if(!m)return c;var x=m-1;return d[x]=(m>1?"& ":"")+d[x],d=d.join(m>2?", ":" "),c.replace(Wo,`{
/* [wrapped with `+d+`] */
`)}function R5(c){return Wt(c)||eu(c)||!!(CA&&c&&c[CA])}function nl(c,d){var m=typeof c;return d=d??X,!!d&&(m=="number"||m!="symbol"&&cb.test(c))&&c>-1&&c%1==0&&c<d}function Nr(c,d,m){if(!yi(m))return!1;var x=typeof d;return(x=="number"?Xr(m)&&nl(d,m.length):x=="string"&&d in m)?Os(m[d],c):!1}function Jb(c,d){if(Wt(c))return!1;var m=typeof c;return m=="number"||m=="symbol"||m=="boolean"||c==null||Eo(c)?!0:Di.test(c)||!Yn.test(c)||d!=null&&c in Zn(d)}function P5(c){var d=typeof c;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?c!=="__proto__":c===null}function Qb(c){var d=p0(c),m=S[d];if(typeof m!="function"||!(d in mn.prototype))return!1;if(c===m)return!0;var x=Yb(m);return!!x&&c===x[0]}function O5(c){return!!_A&&_A in c}var N5=Gg?il:gC;function Jh(c){var d=c&&c.constructor,m=typeof d=="function"&&d.prototype||bd;return c===m}function _R(c){return c===c&&!yi(c)}function xR(c,d){return function(m){return m==null?!1:m[c]===d&&(d!==n||c in Zn(m))}}function F5(c){var d=x0(c,function(x){return m.size===a&&m.clear(),x}),m=d.cache;return d}function L5(c,d){var m=c[1],x=d[1],b=m|x,P=b<(v|w|V),k=x==V&&m==_||x==V&&m==F&&c[7].length<=d[8]||x==(V|F)&&d[7].length<=d[8]&&m==_;if(!(P||k))return c;x&v&&(c[2]=d[2],b|=m&v?0:y);var G=d[3];if(G){var te=c[3];c[3]=te?nR(te,G,d[4]):G,c[4]=te?Jl(c[3],l):d[4]}return G=d[5],G&&(te=c[5],c[5]=te?iR(te,G,d[6]):G,c[6]=te?Jl(c[5],l):d[6]),G=d[7],G&&(c[7]=G),x&V&&(c[8]=c[8]==null?d[8]:wr(c[8],d[8])),c[9]==null&&(c[9]=d[9]),c[0]=d[0],c[1]=b,c}function k5(c){var d=[];if(c!=null)for(var m in Zn(c))d.push(m);return d}function U5(c){return $g.call(c)}function wR(c,d,m){return d=Wi(d===n?c.length-1:d,0),function(){for(var x=arguments,b=-1,P=Wi(x.length-d,0),k=fe(P);++b<P;)k[b]=x[d+b];b=-1;for(var G=fe(d+1);++b<d;)G[b]=x[b];return G[d]=m(k),wo(c,this,G)}}function bR(c,d){return d.length<2?c:Kc(c,Jo(d,0,-1))}function B5(c,d){for(var m=c.length,x=wr(d.length,m),b=qr(c);x--;){var P=d[x];c[x]=nl(P,m)?b[P]:n}return c}function eC(c,d){if(!(d==="constructor"&&typeof c[d]=="function")&&d!="__proto__")return c[d]}var CR=MR($A),Qh=ez||function(c,d){return nr.setTimeout(c,d)},tC=MR(l5);function ER(c,d,m){var x=d+"";return tC(c,A5(x,V5(T5(x),m)))}function MR(c){var d=0,m=0;return function(){var x=rz(),b=j-(x-m);if(m=x,b>0){if(++d>=R)return arguments[0]}else d=0;return c.apply(n,arguments)}}function g0(c,d){var m=-1,x=c.length,b=x-1;for(d=d===n?x:d;++m<d;){var P=kb(m,b),k=c[P];c[P]=c[m],c[m]=k}return c.length=d,c}var SR=F5(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(wn,function(m,x,b,P){d.push(b?P.replace(Ug,"$1"):x||m)}),d});function ba(c){if(typeof c=="string"||Eo(c))return c;var d=c+"";return d=="0"&&1/c==-be?"-0":d}function Qc(c){if(c!=null){try{return Wg.call(c)}catch{}try{return c+""}catch{}}return""}function V5(c,d){return Xo(ge,function(m){var x="_."+m[0];d&m[1]&&!Vg(c,x)&&c.push(x)}),c.sort()}function TR(c){if(c instanceof mn)return c.clone();var d=new Zo(c.__wrapped__,c.__chain__);return d.__actions__=qr(c.__actions__),d.__index__=c.__index__,d.__values__=c.__values__,d}function H5(c,d,m){(m?Nr(c,d,m):d===n)?d=1:d=Wi(Kt(d),0);var x=c==null?0:c.length;if(!x||d<1)return[];for(var b=0,P=0,k=fe(Jg(x/d));b<x;)k[P++]=Jo(c,b,b+=d);return k}function z5(c){for(var d=-1,m=c==null?0:c.length,x=0,b=[];++d<m;){var P=c[d];P&&(b[x++]=P)}return b}function j5(){var c=arguments.length;if(!c)return[];for(var d=fe(c-1),m=arguments[0],x=c;x--;)d[x-1]=arguments[x];return Kl(Wt(m)?qr(m):[m],cr(d,1))}var G5=an(function(c,d){return Ri(c)?qh(c,cr(d,1,Ri,!0)):[]}),W5=an(function(c,d){var m=Qo(d);return Ri(m)&&(m=n),Ri(c)?qh(c,cr(d,1,Ri,!0),Tt(m,2)):[]}),$5=an(function(c,d){var m=Qo(d);return Ri(m)&&(m=n),Ri(c)?qh(c,cr(d,1,Ri,!0),n,m):[]});function q5(c,d,m){var x=c==null?0:c.length;return x?(d=m||d===n?1:Kt(d),Jo(c,d<0?0:d,x)):[]}function X5(c,d,m){var x=c==null?0:c.length;return x?(d=m||d===n?1:Kt(d),d=x-d,Jo(c,0,d<0?0:d)):[]}function Y5(c,d){return c&&c.length?l0(c,Tt(d,3),!0,!0):[]}function Z5(c,d){return c&&c.length?l0(c,Tt(d,3),!0):[]}function K5(c,d,m,x){var b=c==null?0:c.length;return b?(m&&typeof m!="number"&&Nr(c,d,m)&&(m=0,x=b),jz(c,d,m,x)):[]}function IR(c,d,m){var x=c==null?0:c.length;if(!x)return-1;var b=m==null?0:Kt(m);return b<0&&(b=Wi(x+b,0)),Hg(c,Tt(d,3),b)}function DR(c,d,m){var x=c==null?0:c.length;if(!x)return-1;var b=x-1;return m!==n&&(b=Kt(m),b=m<0?Wi(x+b,0):wr(b,x-1)),Hg(c,Tt(d,3),b,!0)}function AR(c){var d=c==null?0:c.length;return d?cr(c,1):[]}function J5(c){var d=c==null?0:c.length;return d?cr(c,be):[]}function Q5(c,d){var m=c==null?0:c.length;return m?(d=d===n?1:Kt(d),cr(c,d)):[]}function ej(c){for(var d=-1,m=c==null?0:c.length,x={};++d<m;){var b=c[d];x[b[0]]=b[1]}return x}function RR(c){return c&&c.length?c[0]:n}function tj(c,d,m){var x=c==null?0:c.length;if(!x)return-1;var b=m==null?0:Kt(m);return b<0&&(b=Wi(x+b,0)),_d(c,d,b)}function nj(c){var d=c==null?0:c.length;return d?Jo(c,0,-1):[]}var ij=an(function(c){var d=ui(c,zb);return d.length&&d[0]===c[0]?Pb(d):[]}),rj=an(function(c){var d=Qo(c),m=ui(c,zb);return d===Qo(m)?d=n:m.pop(),m.length&&m[0]===c[0]?Pb(m,Tt(d,2)):[]}),oj=an(function(c){var d=Qo(c),m=ui(c,zb);return d=typeof d=="function"?d:n,d&&m.pop(),m.length&&m[0]===c[0]?Pb(m,n,d):[]});function sj(c,d){return c==null?"":nz.call(c,d)}function Qo(c){var d=c==null?0:c.length;return d?c[d-1]:n}function aj(c,d,m){var x=c==null?0:c.length;if(!x)return-1;var b=x;return m!==n&&(b=Kt(m),b=b<0?Wi(x+b,0):wr(b,x-1)),d===d?VH(c,d,b):Hg(c,dA,b,!0)}function lj(c,d){return c&&c.length?zA(c,Kt(d)):n}var cj=an(PR);function PR(c,d){return c&&c.length&&d&&d.length?Lb(c,d):c}function uj(c,d,m){return c&&c.length&&d&&d.length?Lb(c,d,Tt(m,2)):c}function dj(c,d,m){return c&&c.length&&d&&d.length?Lb(c,d,n,m):c}var fj=tl(function(c,d){var m=c==null?0:c.length,x=Ib(c,d);return WA(c,ui(d,function(b){return nl(b,m)?+b:b}).sort(tR)),x});function hj(c,d){var m=[];if(!(c&&c.length))return m;var x=-1,b=[],P=c.length;for(d=Tt(d,3);++x<P;){var k=c[x];d(k,x,c)&&(m.push(k),b.push(x))}return WA(c,b),m}function nC(c){return c==null?c:sz.call(c)}function pj(c,d,m){var x=c==null?0:c.length;return x?(m&&typeof m!="number"&&Nr(c,d,m)?(d=0,m=x):(d=d==null?0:Kt(d),m=m===n?x:Kt(m)),Jo(c,d,m)):[]}function mj(c,d){return a0(c,d)}function gj(c,d,m){return Bb(c,d,Tt(m,2))}function vj(c,d){var m=c==null?0:c.length;if(m){var x=a0(c,d);if(x<m&&Os(c[x],d))return x}return-1}function yj(c,d){return a0(c,d,!0)}function _j(c,d,m){return Bb(c,d,Tt(m,2),!0)}function xj(c,d){var m=c==null?0:c.length;if(m){var x=a0(c,d,!0)-1;if(Os(c[x],d))return x}return-1}function wj(c){return c&&c.length?qA(c):[]}function bj(c,d){return c&&c.length?qA(c,Tt(d,2)):[]}function Cj(c){var d=c==null?0:c.length;return d?Jo(c,1,d):[]}function Ej(c,d,m){return c&&c.length?(d=m||d===n?1:Kt(d),Jo(c,0,d<0?0:d)):[]}function Mj(c,d,m){var x=c==null?0:c.length;return x?(d=m||d===n?1:Kt(d),d=x-d,Jo(c,d<0?0:d,x)):[]}function Sj(c,d){return c&&c.length?l0(c,Tt(d,3),!1,!0):[]}function Tj(c,d){return c&&c.length?l0(c,Tt(d,3)):[]}var Ij=an(function(c){return nc(cr(c,1,Ri,!0))}),Dj=an(function(c){var d=Qo(c);return Ri(d)&&(d=n),nc(cr(c,1,Ri,!0),Tt(d,2))}),Aj=an(function(c){var d=Qo(c);return d=typeof d=="function"?d:n,nc(cr(c,1,Ri,!0),n,d)});function Rj(c){return c&&c.length?nc(c):[]}function Pj(c,d){return c&&c.length?nc(c,Tt(d,2)):[]}function Oj(c,d){return d=typeof d=="function"?d:n,c&&c.length?nc(c,n,d):[]}function iC(c){if(!(c&&c.length))return[];var d=0;return c=Zl(c,function(m){if(Ri(m))return d=Wi(m.length,d),!0}),xb(d,function(m){return ui(c,vb(m))})}function OR(c,d){if(!(c&&c.length))return[];var m=iC(c);return d==null?m:ui(m,function(x){return wo(d,n,x)})}var Nj=an(function(c,d){return Ri(c)?qh(c,d):[]}),Fj=an(function(c){return Hb(Zl(c,Ri))}),Lj=an(function(c){var d=Qo(c);return Ri(d)&&(d=n),Hb(Zl(c,Ri),Tt(d,2))}),kj=an(function(c){var d=Qo(c);return d=typeof d=="function"?d:n,Hb(Zl(c,Ri),n,d)}),Uj=an(iC);function Bj(c,d){return KA(c||[],d||[],$h)}function Vj(c,d){return KA(c||[],d||[],Zh)}var Hj=an(function(c){var d=c.length,m=d>1?c[d-1]:n;return m=typeof m=="function"?(c.pop(),m):n,OR(c,m)});function NR(c){var d=S(c);return d.__chain__=!0,d}function zj(c,d){return d(c),c}function v0(c,d){return d(c)}var jj=tl(function(c){var d=c.length,m=d?c[0]:0,x=this.__wrapped__,b=function(P){return Ib(P,c)};return d>1||this.__actions__.length||!(x instanceof mn)||!nl(m)?this.thru(b):(x=x.slice(m,+m+(d?1:0)),x.__actions__.push({func:v0,args:[b],thisArg:n}),new Zo(x,this.__chain__).thru(function(P){return d&&!P.length&&P.push(n),P}))});function Gj(){return NR(this)}function Wj(){return new Zo(this.value(),this.__chain__)}function $j(){this.__values__===n&&(this.__values__=XR(this.value()));var c=this.__index__>=this.__values__.length,d=c?n:this.__values__[this.__index__++];return{done:c,value:d}}function qj(){return this}function Xj(c){for(var d,m=this;m instanceof n0;){var x=TR(m);x.__index__=0,x.__values__=n,d?b.__wrapped__=x:d=x;var b=x;m=m.__wrapped__}return b.__wrapped__=c,d}function Yj(){var c=this.__wrapped__;if(c instanceof mn){var d=c;return this.__actions__.length&&(d=new mn(this)),d=d.reverse(),d.__actions__.push({func:v0,args:[nC],thisArg:n}),new Zo(d,this.__chain__)}return this.thru(nC)}function Zj(){return ZA(this.__wrapped__,this.__actions__)}var Kj=c0(function(c,d,m){Vn.call(c,m)?++c[m]:Qa(c,m,1)});function Jj(c,d,m){var x=Wt(c)?cA:zz;return m&&Nr(c,d,m)&&(d=n),x(c,Tt(d,3))}function Qj(c,d){var m=Wt(c)?Zl:OA;return m(c,Tt(d,3))}var e8=aR(IR),t8=aR(DR);function n8(c,d){return cr(y0(c,d),1)}function i8(c,d){return cr(y0(c,d),be)}function r8(c,d,m){return m=m===n?1:Kt(m),cr(y0(c,d),m)}function FR(c,d){var m=Wt(c)?Xo:tc;return m(c,Tt(d,3))}function LR(c,d){var m=Wt(c)?CH:PA;return m(c,Tt(d,3))}var o8=c0(function(c,d,m){Vn.call(c,m)?c[m].push(d):Qa(c,m,[d])});function s8(c,d,m,x){c=Xr(c)?c:Ad(c),m=m&&!x?Kt(m):0;var b=c.length;return m<0&&(m=Wi(b+m,0)),C0(c)?m<=b&&c.indexOf(d,m)>-1:!!b&&_d(c,d,m)>-1}var a8=an(function(c,d,m){var x=-1,b=typeof d=="function",P=Xr(c)?fe(c.length):[];return tc(c,function(k){P[++x]=b?wo(d,k,m):Xh(k,d,m)}),P}),l8=c0(function(c,d,m){Qa(c,m,d)});function y0(c,d){var m=Wt(c)?ui:BA;return m(c,Tt(d,3))}function c8(c,d,m,x){return c==null?[]:(Wt(d)||(d=d==null?[]:[d]),m=x?n:m,Wt(m)||(m=m==null?[]:[m]),jA(c,d,m))}var u8=c0(function(c,d,m){c[m?0:1].push(d)},function(){return[[],[]]});function d8(c,d,m){var x=Wt(c)?mb:hA,b=arguments.length<3;return x(c,Tt(d,4),m,b,tc)}function f8(c,d,m){var x=Wt(c)?EH:hA,b=arguments.length<3;return x(c,Tt(d,4),m,b,PA)}function h8(c,d){var m=Wt(c)?Zl:OA;return m(c,w0(Tt(d,3)))}function p8(c){var d=Wt(c)?IA:s5;return d(c)}function m8(c,d,m){(m?Nr(c,d,m):d===n)?d=1:d=Kt(d);var x=Wt(c)?kz:a5;return x(c,d)}function g8(c){var d=Wt(c)?Uz:c5;return d(c)}function v8(c){if(c==null)return 0;if(Xr(c))return C0(c)?wd(c):c.length;var d=br(c);return d==pt||d==Vt?c.size:Nb(c).length}function y8(c,d,m){var x=Wt(c)?gb:u5;return m&&Nr(c,d,m)&&(d=n),x(c,Tt(d,3))}var _8=an(function(c,d){if(c==null)return[];var m=d.length;return m>1&&Nr(c,d[0],d[1])?d=[]:m>2&&Nr(d[0],d[1],d[2])&&(d=[d[0]]),jA(c,cr(d,1),[])}),_0=QH||function(){return nr.Date.now()};function x8(c,d){if(typeof d!="function")throw new Yo(r);return c=Kt(c),function(){if(--c<1)return d.apply(this,arguments)}}function kR(c,d,m){return d=m?n:d,d=c&&d==null?c.length:d,el(c,V,n,n,n,n,d)}function UR(c,d){var m;if(typeof d!="function")throw new Yo(r);return c=Kt(c),function(){return--c>0&&(m=d.apply(this,arguments)),c<=1&&(d=n),m}}var rC=an(function(c,d,m){var x=v;if(m.length){var b=Jl(m,Id(rC));x|=C}return el(c,x,d,m,b)}),BR=an(function(c,d,m){var x=v|w;if(m.length){var b=Jl(m,Id(BR));x|=C}return el(d,x,c,m,b)});function VR(c,d,m){d=m?n:d;var x=el(c,_,n,n,n,n,n,d);return x.placeholder=VR.placeholder,x}function HR(c,d,m){d=m?n:d;var x=el(c,T,n,n,n,n,n,d);return x.placeholder=HR.placeholder,x}function zR(c,d,m){var x,b,P,k,G,te,Ce=0,Ee=!1,Oe=!1,Je=!0;if(typeof c!="function")throw new Yo(r);d=es(d)||0,yi(m)&&(Ee=!!m.leading,Oe="maxWait"in m,P=Oe?Wi(es(m.maxWait)||0,d):P,Je="trailing"in m?!!m.trailing:Je);function mt(Pi){var Ns=x,ol=b;return x=b=n,Ce=Pi,k=c.apply(ol,Ns),k}function Rt(Pi){return Ce=Pi,G=Qh(cn,d),Ee?mt(Pi):k}function nn(Pi){var Ns=Pi-te,ol=Pi-Ce,aP=d-Ns;return Oe?wr(aP,P-ol):aP}function Pt(Pi){var Ns=Pi-te,ol=Pi-Ce;return te===n||Ns>=d||Ns<0||Oe&&ol>=P}function cn(){var Pi=_0();if(Pt(Pi))return yn(Pi);G=Qh(cn,nn(Pi))}function yn(Pi){return G=n,Je&&x?mt(Pi):(x=b=n,k)}function Mo(){G!==n&&JA(G),Ce=0,x=te=b=G=n}function Fr(){return G===n?k:yn(_0())}function So(){var Pi=_0(),Ns=Pt(Pi);if(x=arguments,b=this,te=Pi,Ns){if(G===n)return Rt(te);if(Oe)return JA(G),G=Qh(cn,d),mt(te)}return G===n&&(G=Qh(cn,d)),k}return So.cancel=Mo,So.flush=Fr,So}var w8=an(function(c,d){return RA(c,1,d)}),b8=an(function(c,d,m){return RA(c,es(d)||0,m)});function C8(c){return el(c,L)}function x0(c,d){if(typeof c!="function"||d!=null&&typeof d!="function")throw new Yo(r);var m=function(){var x=arguments,b=d?d.apply(this,x):x[0],P=m.cache;if(P.has(b))return P.get(b);var k=c.apply(this,x);return m.cache=P.set(b,k)||P,k};return m.cache=new(x0.Cache||Ja),m}x0.Cache=Ja;function w0(c){if(typeof c!="function")throw new Yo(r);return function(){var d=arguments;switch(d.length){case 0:return!c.call(this);case 1:return!c.call(this,d[0]);case 2:return!c.call(this,d[0],d[1]);case 3:return!c.call(this,d[0],d[1],d[2])}return!c.apply(this,d)}}function E8(c){return UR(2,c)}var M8=d5(function(c,d){d=d.length==1&&Wt(d[0])?ui(d[0],bo(Tt())):ui(cr(d,1),bo(Tt()));var m=d.length;return an(function(x){for(var b=-1,P=wr(x.length,m);++b<P;)x[b]=d[b].call(this,x[b]);return wo(c,this,x)})}),oC=an(function(c,d){var m=Jl(d,Id(oC));return el(c,C,n,d,m)}),jR=an(function(c,d){var m=Jl(d,Id(jR));return el(c,E,n,d,m)}),S8=tl(function(c,d){return el(c,F,n,n,n,d)});function T8(c,d){if(typeof c!="function")throw new Yo(r);return d=d===n?d:Kt(d),an(c,d)}function I8(c,d){if(typeof c!="function")throw new Yo(r);return d=d==null?0:Wi(Kt(d),0),an(function(m){var x=m[d],b=rc(m,0,d);return x&&Kl(b,x),wo(c,this,b)})}function D8(c,d,m){var x=!0,b=!0;if(typeof c!="function")throw new Yo(r);return yi(m)&&(x="leading"in m?!!m.leading:x,b="trailing"in m?!!m.trailing:b),zR(c,d,{leading:x,maxWait:d,trailing:b})}function A8(c){return kR(c,1)}function R8(c,d){return oC(jb(d),c)}function P8(){if(!arguments.length)return[];var c=arguments[0];return Wt(c)?c:[c]}function O8(c){return Ko(c,h)}function N8(c,d){return d=typeof d=="function"?d:n,Ko(c,h,d)}function F8(c){return Ko(c,u|h)}function L8(c,d){return d=typeof d=="function"?d:n,Ko(c,u|h,d)}function k8(c,d){return d==null||AA(c,d,ir(d))}function Os(c,d){return c===d||c!==c&&d!==d}var U8=h0(Rb),B8=h0(function(c,d){return c>=d}),eu=LA(function(){return arguments}())?LA:function(c){return Mi(c)&&Vn.call(c,"callee")&&!bA.call(c,"callee")},Wt=fe.isArray,V8=iA?bo(iA):Xz;function Xr(c){return c!=null&&b0(c.length)&&!il(c)}function Ri(c){return Mi(c)&&Xr(c)}function H8(c){return c===!0||c===!1||Mi(c)&&Or(c)==_e}var oc=tz||gC,z8=rA?bo(rA):Yz;function j8(c){return Mi(c)&&c.nodeType===1&&!ep(c)}function G8(c){if(c==null)return!0;if(Xr(c)&&(Wt(c)||typeof c=="string"||typeof c.splice=="function"||oc(c)||Dd(c)||eu(c)))return!c.length;var d=br(c);if(d==pt||d==Vt)return!c.size;if(Jh(c))return!Nb(c).length;for(var m in c)if(Vn.call(c,m))return!1;return!0}function W8(c,d){return Yh(c,d)}function $8(c,d,m){m=typeof m=="function"?m:n;var x=m?m(c,d):n;return x===n?Yh(c,d,n,m):!!x}function sC(c){if(!Mi(c))return!1;var d=Or(c);return d==je||d==He||typeof c.message=="string"&&typeof c.name=="string"&&!ep(c)}function q8(c){return typeof c=="number"&&EA(c)}function il(c){if(!yi(c))return!1;var d=Or(c);return d==Le||d==rt||d==J||d==At}function GR(c){return typeof c=="number"&&c==Kt(c)}function b0(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=X}function yi(c){var d=typeof c;return c!=null&&(d=="object"||d=="function")}function Mi(c){return c!=null&&typeof c=="object"}var WR=oA?bo(oA):Kz;function X8(c,d){return c===d||Ob(c,d,Zb(d))}function Y8(c,d,m){return m=typeof m=="function"?m:n,Ob(c,d,Zb(d),m)}function Z8(c){return $R(c)&&c!=+c}function K8(c){if(N5(c))throw new zt(i);return kA(c)}function J8(c){return c===null}function Q8(c){return c==null}function $R(c){return typeof c=="number"||Mi(c)&&Or(c)==ct}function ep(c){if(!Mi(c)||Or(c)!=qt)return!1;var d=Yg(c);if(d===null)return!0;var m=Vn.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&Wg.call(m)==YH}var aC=sA?bo(sA):Jz;function eG(c){return GR(c)&&c>=-X&&c<=X}var qR=aA?bo(aA):Qz;function C0(c){return typeof c=="string"||!Wt(c)&&Mi(c)&&Or(c)==ht}function Eo(c){return typeof c=="symbol"||Mi(c)&&Or(c)==N}var Dd=lA?bo(lA):e5;function tG(c){return c===n}function nG(c){return Mi(c)&&br(c)==oe}function iG(c){return Mi(c)&&Or(c)==we}var rG=h0(Fb),oG=h0(function(c,d){return c<=d});function XR(c){if(!c)return[];if(Xr(c))return C0(c)?Rs(c):qr(c);if(Hh&&c[Hh])return kH(c[Hh]());var d=br(c),m=d==pt?bb:d==Vt?zg:Ad;return m(c)}function rl(c){if(!c)return c===0?c:0;if(c=es(c),c===be||c===-be){var d=c<0?-1:1;return d*ie}return c===c?c:0}function Kt(c){var d=rl(c),m=d%1;return d===d?m?d-m:d:0}function YR(c){return c?Zc(Kt(c),0,ve):0}function es(c){if(typeof c=="number")return c;if(Eo(c))return q;if(yi(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=yi(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=pA(c);var m=sb.test(c);return m||lb.test(c)?xH(c.slice(2),m?2:8):Bg.test(c)?q:+c}function ZR(c){return wa(c,Yr(c))}function sG(c){return c?Zc(Kt(c),-X,X):c===0?c:0}function kn(c){return c==null?"":Co(c)}var aG=Sd(function(c,d){if(Jh(d)||Xr(d)){wa(d,ir(d),c);return}for(var m in d)Vn.call(d,m)&&$h(c,m,d[m])}),KR=Sd(function(c,d){wa(d,Yr(d),c)}),E0=Sd(function(c,d,m,x){wa(d,Yr(d),c,x)}),lG=Sd(function(c,d,m,x){wa(d,ir(d),c,x)}),cG=tl(Ib);function uG(c,d){var m=Md(c);return d==null?m:DA(m,d)}var dG=an(function(c,d){c=Zn(c);var m=-1,x=d.length,b=x>2?d[2]:n;for(b&&Nr(d[0],d[1],b)&&(x=1);++m<x;)for(var P=d[m],k=Yr(P),G=-1,te=k.length;++G<te;){var Ce=k[G],Ee=c[Ce];(Ee===n||Os(Ee,bd[Ce])&&!Vn.call(c,Ce))&&(c[Ce]=P[Ce])}return c}),fG=an(function(c){return c.push(n,pR),wo(JR,n,c)});function hG(c,d){return uA(c,Tt(d,3),xa)}function pG(c,d){return uA(c,Tt(d,3),Ab)}function mG(c,d){return c==null?c:Db(c,Tt(d,3),Yr)}function gG(c,d){return c==null?c:NA(c,Tt(d,3),Yr)}function vG(c,d){return c&&xa(c,Tt(d,3))}function yG(c,d){return c&&Ab(c,Tt(d,3))}function _G(c){return c==null?[]:o0(c,ir(c))}function xG(c){return c==null?[]:o0(c,Yr(c))}function lC(c,d,m){var x=c==null?n:Kc(c,d);return x===n?m:x}function wG(c,d){return c!=null&&vR(c,d,Gz)}function cC(c,d){return c!=null&&vR(c,d,Wz)}var bG=cR(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=$g.call(d)),c[d]=m},dC(Zr)),CG=cR(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=$g.call(d)),Vn.call(c,d)?c[d].push(m):c[d]=[m]},Tt),EG=an(Xh);function ir(c){return Xr(c)?TA(c):Nb(c)}function Yr(c){return Xr(c)?TA(c,!0):t5(c)}function MG(c,d){var m={};return d=Tt(d,3),xa(c,function(x,b,P){Qa(m,d(x,b,P),x)}),m}function SG(c,d){var m={};return d=Tt(d,3),xa(c,function(x,b,P){Qa(m,b,d(x,b,P))}),m}var TG=Sd(function(c,d,m){s0(c,d,m)}),JR=Sd(function(c,d,m,x){s0(c,d,m,x)}),IG=tl(function(c,d){var m={};if(c==null)return m;var x=!1;d=ui(d,function(P){return P=ic(P,c),x||(x=P.length>1),P}),wa(c,Xb(c),m),x&&(m=Ko(m,u|f|h,b5));for(var b=d.length;b--;)Vb(m,d[b]);return m});function DG(c,d){return QR(c,w0(Tt(d)))}var AG=tl(function(c,d){return c==null?{}:i5(c,d)});function QR(c,d){if(c==null)return{};var m=ui(Xb(c),function(x){return[x]});return d=Tt(d),GA(c,m,function(x,b){return d(x,b[0])})}function RG(c,d,m){d=ic(d,c);var x=-1,b=d.length;for(b||(b=1,c=n);++x<b;){var P=c==null?n:c[ba(d[x])];P===n&&(x=b,P=m),c=il(P)?P.call(c):P}return c}function PG(c,d,m){return c==null?c:Zh(c,d,m)}function OG(c,d,m,x){return x=typeof x=="function"?x:n,c==null?c:Zh(c,d,m,x)}var eP=fR(ir),tP=fR(Yr);function NG(c,d,m){var x=Wt(c),b=x||oc(c)||Dd(c);if(d=Tt(d,4),m==null){var P=c&&c.constructor;b?m=x?new P:[]:yi(c)?m=il(P)?Md(Yg(c)):{}:m={}}return(b?Xo:xa)(c,function(k,G,te){return d(m,k,G,te)}),m}function FG(c,d){return c==null?!0:Vb(c,d)}function LG(c,d,m){return c==null?c:YA(c,d,jb(m))}function kG(c,d,m,x){return x=typeof x=="function"?x:n,c==null?c:YA(c,d,jb(m),x)}function Ad(c){return c==null?[]:wb(c,ir(c))}function UG(c){return c==null?[]:wb(c,Yr(c))}function BG(c,d,m){return m===n&&(m=d,d=n),m!==n&&(m=es(m),m=m===m?m:0),d!==n&&(d=es(d),d=d===d?d:0),Zc(es(c),d,m)}function VG(c,d,m){return d=rl(d),m===n?(m=d,d=0):m=rl(m),c=es(c),$z(c,d,m)}function HG(c,d,m){if(m&&typeof m!="boolean"&&Nr(c,d,m)&&(d=m=n),m===n&&(typeof d=="boolean"?(m=d,d=n):typeof c=="boolean"&&(m=c,c=n)),c===n&&d===n?(c=0,d=1):(c=rl(c),d===n?(d=c,c=0):d=rl(d)),c>d){var x=c;c=d,d=x}if(m||c%1||d%1){var b=MA();return wr(c+b*(d-c+_H("1e-"+((b+"").length-1))),d)}return kb(c,d)}var zG=Td(function(c,d,m){return d=d.toLowerCase(),c+(m?nP(d):d)});function nP(c){return uC(kn(c).toLowerCase())}function iP(c){return c=kn(c),c&&c.replace(ub,PH).replace(cH,"")}function jG(c,d,m){c=kn(c),d=Co(d);var x=c.length;m=m===n?x:Zc(Kt(m),0,x);var b=m;return m-=d.length,m>=0&&c.slice(m,b)==d}function GG(c){return c=kn(c),c&&Se.test(c)?c.replace(Ze,OH):c}function WG(c){return c=kn(c),c&&$r.test(c)?c.replace(tr,"\\$&"):c}var $G=Td(function(c,d,m){return c+(m?"-":"")+d.toLowerCase()}),qG=Td(function(c,d,m){return c+(m?" ":"")+d.toLowerCase()}),XG=sR("toLowerCase");function YG(c,d,m){c=kn(c),d=Kt(d);var x=d?wd(c):0;if(!d||x>=d)return c;var b=(d-x)/2;return f0(Qg(b),m)+c+f0(Jg(b),m)}function ZG(c,d,m){c=kn(c),d=Kt(d);var x=d?wd(c):0;return d&&x<d?c+f0(d-x,m):c}function KG(c,d,m){c=kn(c),d=Kt(d);var x=d?wd(c):0;return d&&x<d?f0(d-x,m)+c:c}function JG(c,d,m){return m||d==null?d=0:d&&(d=+d),oz(kn(c).replace(Wc,""),d||0)}function QG(c,d,m){return(m?Nr(c,d,m):d===n)?d=1:d=Kt(d),Ub(kn(c),d)}function eW(){var c=arguments,d=kn(c[0]);return c.length<3?d:d.replace(c[1],c[2])}var tW=Td(function(c,d,m){return c+(m?"_":"")+d.toLowerCase()});function nW(c,d,m){return m&&typeof m!="number"&&Nr(c,d,m)&&(d=m=n),m=m===n?ve:m>>>0,m?(c=kn(c),c&&(typeof d=="string"||d!=null&&!aC(d))&&(d=Co(d),!d&&xd(c))?rc(Rs(c),0,m):c.split(d,m)):[]}var iW=Td(function(c,d,m){return c+(m?" ":"")+uC(d)});function rW(c,d,m){return c=kn(c),m=m==null?0:Zc(Kt(m),0,c.length),d=Co(d),c.slice(m,m+d.length)==d}function oW(c,d,m){var x=S.templateSettings;m&&Nr(c,d,m)&&(d=n),c=kn(c),d=E0({},d,x,hR);var b=E0({},d.imports,x.imports,hR),P=ir(b),k=wb(b,P),G,te,Ce=0,Ee=d.interpolate||vd,Oe="__p += '",Je=Cb((d.escape||vd).source+"|"+Ee.source+"|"+(Ee===Nt?gd:vd).source+"|"+(d.evaluate||vd).source+"|$","g"),mt="//# sourceURL="+(Vn.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pH+"]")+`
`;c.replace(Je,function(Pt,cn,yn,Mo,Fr,So){return yn||(yn=Mo),Oe+=c.slice(Ce,So).replace(A,NH),cn&&(G=!0,Oe+=`' +
__e(`+cn+`) +
'`),Fr&&(te=!0,Oe+=`';
`+Fr+`;
__p += '`),yn&&(Oe+=`' +
((__t = (`+yn+`)) == null ? '' : __t) +
'`),Ce=So+Pt.length,Pt}),Oe+=`';
`;var Rt=Vn.call(d,"variable")&&d.variable;if(!Rt)Oe=`with (obj) {
`+Oe+`
}
`;else if($o.test(Rt))throw new zt(o);Oe=(te?Oe.replace(sn,""):Oe).replace(Ht,"$1").replace(Ln,"$1;"),Oe="function("+(Rt||"obj")+`) {
`+(Rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Oe+`return __p
}`;var nn=oP(function(){return Pn(P,mt+"return "+Oe).apply(n,k)});if(nn.source=Oe,sC(nn))throw nn;return nn}function sW(c){return kn(c).toLowerCase()}function aW(c){return kn(c).toUpperCase()}function lW(c,d,m){if(c=kn(c),c&&(m||d===n))return pA(c);if(!c||!(d=Co(d)))return c;var x=Rs(c),b=Rs(d),P=mA(x,b),k=gA(x,b)+1;return rc(x,P,k).join("")}function cW(c,d,m){if(c=kn(c),c&&(m||d===n))return c.slice(0,yA(c)+1);if(!c||!(d=Co(d)))return c;var x=Rs(c),b=gA(x,Rs(d))+1;return rc(x,0,b).join("")}function uW(c,d,m){if(c=kn(c),c&&(m||d===n))return c.replace(Wc,"");if(!c||!(d=Co(d)))return c;var x=Rs(c),b=mA(x,Rs(d));return rc(x,b).join("")}function dW(c,d){var m=W,x=O;if(yi(d)){var b="separator"in d?d.separator:b;m="length"in d?Kt(d.length):m,x="omission"in d?Co(d.omission):x}c=kn(c);var P=c.length;if(xd(c)){var k=Rs(c);P=k.length}if(m>=P)return c;var G=m-wd(x);if(G<1)return x;var te=k?rc(k,0,G).join(""):c.slice(0,G);if(b===n)return te+x;if(k&&(G+=te.length-G),aC(b)){if(c.slice(G).search(b)){var Ce,Ee=te;for(b.global||(b=Cb(b.source,kn(Bh.exec(b))+"g")),b.lastIndex=0;Ce=b.exec(Ee);)var Oe=Ce.index;te=te.slice(0,Oe===n?G:Oe)}}else if(c.indexOf(Co(b),G)!=G){var Je=te.lastIndexOf(b);Je>-1&&(te=te.slice(0,Je))}return te+x}function fW(c){return c=kn(c),c&&me.test(c)?c.replace(Y,HH):c}var hW=Td(function(c,d,m){return c+(m?" ":"")+d.toUpperCase()}),uC=sR("toUpperCase");function rP(c,d,m){return c=kn(c),d=m?n:d,d===n?LH(c)?GH(c):TH(c):c.match(d)||[]}var oP=an(function(c,d){try{return wo(c,n,d)}catch(m){return sC(m)?m:new zt(m)}}),pW=tl(function(c,d){return Xo(d,function(m){m=ba(m),Qa(c,m,rC(c[m],c))}),c});function mW(c){var d=c==null?0:c.length,m=Tt();return c=d?ui(c,function(x){if(typeof x[1]!="function")throw new Yo(r);return[m(x[0]),x[1]]}):[],an(function(x){for(var b=-1;++b<d;){var P=c[b];if(wo(P[0],this,x))return wo(P[1],this,x)}})}function gW(c){return Hz(Ko(c,u))}function dC(c){return function(){return c}}function vW(c,d){return c==null||c!==c?d:c}var yW=lR(),_W=lR(!0);function Zr(c){return c}function fC(c){return UA(typeof c=="function"?c:Ko(c,u))}function xW(c){return VA(Ko(c,u))}function wW(c,d){return HA(c,Ko(d,u))}var bW=an(function(c,d){return function(m){return Xh(m,c,d)}}),CW=an(function(c,d){return function(m){return Xh(c,m,d)}});function hC(c,d,m){var x=ir(d),b=o0(d,x);m==null&&!(yi(d)&&(b.length||!x.length))&&(m=d,d=c,c=this,b=o0(d,ir(d)));var P=!(yi(m)&&"chain"in m)||!!m.chain,k=il(c);return Xo(b,function(G){var te=d[G];c[G]=te,k&&(c.prototype[G]=function(){var Ce=this.__chain__;if(P||Ce){var Ee=c(this.__wrapped__),Oe=Ee.__actions__=qr(this.__actions__);return Oe.push({func:te,args:arguments,thisArg:c}),Ee.__chain__=Ce,Ee}return te.apply(c,Kl([this.value()],arguments))})}),c}function EW(){return nr._===this&&(nr._=ZH),this}function pC(){}function MW(c){return c=Kt(c),an(function(d){return zA(d,c)})}var SW=Wb(ui),TW=Wb(cA),IW=Wb(gb);function sP(c){return Jb(c)?vb(ba(c)):r5(c)}function DW(c){return function(d){return c==null?n:Kc(c,d)}}var AW=uR(),RW=uR(!0);function mC(){return[]}function gC(){return!1}function PW(){return{}}function OW(){return""}function NW(){return!0}function FW(c,d){if(c=Kt(c),c<1||c>X)return[];var m=ve,x=wr(c,ve);d=Tt(d),c-=ve;for(var b=xb(x,d);++m<c;)d(m);return b}function LW(c){return Wt(c)?ui(c,ba):Eo(c)?[c]:qr(SR(kn(c)))}function kW(c){var d=++XH;return kn(c)+d}var UW=d0(function(c,d){return c+d},0),BW=$b("ceil"),VW=d0(function(c,d){return c/d},1),HW=$b("floor");function zW(c){return c&&c.length?r0(c,Zr,Rb):n}function jW(c,d){return c&&c.length?r0(c,Tt(d,2),Rb):n}function GW(c){return fA(c,Zr)}function WW(c,d){return fA(c,Tt(d,2))}function $W(c){return c&&c.length?r0(c,Zr,Fb):n}function qW(c,d){return c&&c.length?r0(c,Tt(d,2),Fb):n}var XW=d0(function(c,d){return c*d},1),YW=$b("round"),ZW=d0(function(c,d){return c-d},0);function KW(c){return c&&c.length?_b(c,Zr):0}function JW(c,d){return c&&c.length?_b(c,Tt(d,2)):0}return S.after=x8,S.ary=kR,S.assign=aG,S.assignIn=KR,S.assignInWith=E0,S.assignWith=lG,S.at=cG,S.before=UR,S.bind=rC,S.bindAll=pW,S.bindKey=BR,S.castArray=P8,S.chain=NR,S.chunk=H5,S.compact=z5,S.concat=j5,S.cond=mW,S.conforms=gW,S.constant=dC,S.countBy=Kj,S.create=uG,S.curry=VR,S.curryRight=HR,S.debounce=zR,S.defaults=dG,S.defaultsDeep=fG,S.defer=w8,S.delay=b8,S.difference=G5,S.differenceBy=W5,S.differenceWith=$5,S.drop=q5,S.dropRight=X5,S.dropRightWhile=Y5,S.dropWhile=Z5,S.fill=K5,S.filter=Qj,S.flatMap=n8,S.flatMapDeep=i8,S.flatMapDepth=r8,S.flatten=AR,S.flattenDeep=J5,S.flattenDepth=Q5,S.flip=C8,S.flow=yW,S.flowRight=_W,S.fromPairs=ej,S.functions=_G,S.functionsIn=xG,S.groupBy=o8,S.initial=nj,S.intersection=ij,S.intersectionBy=rj,S.intersectionWith=oj,S.invert=bG,S.invertBy=CG,S.invokeMap=a8,S.iteratee=fC,S.keyBy=l8,S.keys=ir,S.keysIn=Yr,S.map=y0,S.mapKeys=MG,S.mapValues=SG,S.matches=xW,S.matchesProperty=wW,S.memoize=x0,S.merge=TG,S.mergeWith=JR,S.method=bW,S.methodOf=CW,S.mixin=hC,S.negate=w0,S.nthArg=MW,S.omit=IG,S.omitBy=DG,S.once=E8,S.orderBy=c8,S.over=SW,S.overArgs=M8,S.overEvery=TW,S.overSome=IW,S.partial=oC,S.partialRight=jR,S.partition=u8,S.pick=AG,S.pickBy=QR,S.property=sP,S.propertyOf=DW,S.pull=cj,S.pullAll=PR,S.pullAllBy=uj,S.pullAllWith=dj,S.pullAt=fj,S.range=AW,S.rangeRight=RW,S.rearg=S8,S.reject=h8,S.remove=hj,S.rest=T8,S.reverse=nC,S.sampleSize=m8,S.set=PG,S.setWith=OG,S.shuffle=g8,S.slice=pj,S.sortBy=_8,S.sortedUniq=wj,S.sortedUniqBy=bj,S.split=nW,S.spread=I8,S.tail=Cj,S.take=Ej,S.takeRight=Mj,S.takeRightWhile=Sj,S.takeWhile=Tj,S.tap=zj,S.throttle=D8,S.thru=v0,S.toArray=XR,S.toPairs=eP,S.toPairsIn=tP,S.toPath=LW,S.toPlainObject=ZR,S.transform=NG,S.unary=A8,S.union=Ij,S.unionBy=Dj,S.unionWith=Aj,S.uniq=Rj,S.uniqBy=Pj,S.uniqWith=Oj,S.unset=FG,S.unzip=iC,S.unzipWith=OR,S.update=LG,S.updateWith=kG,S.values=Ad,S.valuesIn=UG,S.without=Nj,S.words=rP,S.wrap=R8,S.xor=Fj,S.xorBy=Lj,S.xorWith=kj,S.zip=Uj,S.zipObject=Bj,S.zipObjectDeep=Vj,S.zipWith=Hj,S.entries=eP,S.entriesIn=tP,S.extend=KR,S.extendWith=E0,hC(S,S),S.add=UW,S.attempt=oP,S.camelCase=zG,S.capitalize=nP,S.ceil=BW,S.clamp=BG,S.clone=O8,S.cloneDeep=F8,S.cloneDeepWith=L8,S.cloneWith=N8,S.conformsTo=k8,S.deburr=iP,S.defaultTo=vW,S.divide=VW,S.endsWith=jG,S.eq=Os,S.escape=GG,S.escapeRegExp=WG,S.every=Jj,S.find=e8,S.findIndex=IR,S.findKey=hG,S.findLast=t8,S.findLastIndex=DR,S.findLastKey=pG,S.floor=HW,S.forEach=FR,S.forEachRight=LR,S.forIn=mG,S.forInRight=gG,S.forOwn=vG,S.forOwnRight=yG,S.get=lC,S.gt=U8,S.gte=B8,S.has=wG,S.hasIn=cC,S.head=RR,S.identity=Zr,S.includes=s8,S.indexOf=tj,S.inRange=VG,S.invoke=EG,S.isArguments=eu,S.isArray=Wt,S.isArrayBuffer=V8,S.isArrayLike=Xr,S.isArrayLikeObject=Ri,S.isBoolean=H8,S.isBuffer=oc,S.isDate=z8,S.isElement=j8,S.isEmpty=G8,S.isEqual=W8,S.isEqualWith=$8,S.isError=sC,S.isFinite=q8,S.isFunction=il,S.isInteger=GR,S.isLength=b0,S.isMap=WR,S.isMatch=X8,S.isMatchWith=Y8,S.isNaN=Z8,S.isNative=K8,S.isNil=Q8,S.isNull=J8,S.isNumber=$R,S.isObject=yi,S.isObjectLike=Mi,S.isPlainObject=ep,S.isRegExp=aC,S.isSafeInteger=eG,S.isSet=qR,S.isString=C0,S.isSymbol=Eo,S.isTypedArray=Dd,S.isUndefined=tG,S.isWeakMap=nG,S.isWeakSet=iG,S.join=sj,S.kebabCase=$G,S.last=Qo,S.lastIndexOf=aj,S.lowerCase=qG,S.lowerFirst=XG,S.lt=rG,S.lte=oG,S.max=zW,S.maxBy=jW,S.mean=GW,S.meanBy=WW,S.min=$W,S.minBy=qW,S.stubArray=mC,S.stubFalse=gC,S.stubObject=PW,S.stubString=OW,S.stubTrue=NW,S.multiply=XW,S.nth=lj,S.noConflict=EW,S.noop=pC,S.now=_0,S.pad=YG,S.padEnd=ZG,S.padStart=KG,S.parseInt=JG,S.random=HG,S.reduce=d8,S.reduceRight=f8,S.repeat=QG,S.replace=eW,S.result=RG,S.round=YW,S.runInContext=K,S.sample=p8,S.size=v8,S.snakeCase=tW,S.some=y8,S.sortedIndex=mj,S.sortedIndexBy=gj,S.sortedIndexOf=vj,S.sortedLastIndex=yj,S.sortedLastIndexBy=_j,S.sortedLastIndexOf=xj,S.startCase=iW,S.startsWith=rW,S.subtract=ZW,S.sum=KW,S.sumBy=JW,S.template=oW,S.times=FW,S.toFinite=rl,S.toInteger=Kt,S.toLength=YR,S.toLower=sW,S.toNumber=es,S.toSafeInteger=sG,S.toString=kn,S.toUpper=aW,S.trim=lW,S.trimEnd=cW,S.trimStart=uW,S.truncate=dW,S.unescape=fW,S.uniqueId=kW,S.upperCase=hW,S.upperFirst=uC,S.each=FR,S.eachRight=LR,S.first=RR,hC(S,function(){var c={};return xa(S,function(d,m){Vn.call(S.prototype,m)||(c[m]=d)}),c}(),{chain:!1}),S.VERSION=e,Xo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){S[c].placeholder=S}),Xo(["drop","take"],function(c,d){mn.prototype[c]=function(m){m=m===n?1:Wi(Kt(m),0);var x=this.__filtered__&&!d?new mn(this):this.clone();return x.__filtered__?x.__takeCount__=wr(m,x.__takeCount__):x.__views__.push({size:wr(m,ve),type:c+(x.__dir__<0?"Right":"")}),x},mn.prototype[c+"Right"]=function(m){return this.reverse()[c](m).reverse()}}),Xo(["filter","map","takeWhile"],function(c,d){var m=d+1,x=m==pe||m==Ie;mn.prototype[c]=function(b){var P=this.clone();return P.__iteratees__.push({iteratee:Tt(b,3),type:m}),P.__filtered__=P.__filtered__||x,P}}),Xo(["head","last"],function(c,d){var m="take"+(d?"Right":"");mn.prototype[c]=function(){return this[m](1).value()[0]}}),Xo(["initial","tail"],function(c,d){var m="drop"+(d?"":"Right");mn.prototype[c]=function(){return this.__filtered__?new mn(this):this[m](1)}}),mn.prototype.compact=function(){return this.filter(Zr)},mn.prototype.find=function(c){return this.filter(c).head()},mn.prototype.findLast=function(c){return this.reverse().find(c)},mn.prototype.invokeMap=an(function(c,d){return typeof c=="function"?new mn(this):this.map(function(m){return Xh(m,c,d)})}),mn.prototype.reject=function(c){return this.filter(w0(Tt(c)))},mn.prototype.slice=function(c,d){c=Kt(c);var m=this;return m.__filtered__&&(c>0||d<0)?new mn(m):(c<0?m=m.takeRight(-c):c&&(m=m.drop(c)),d!==n&&(d=Kt(d),m=d<0?m.dropRight(-d):m.take(d-c)),m)},mn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},mn.prototype.toArray=function(){return this.take(ve)},xa(mn.prototype,function(c,d){var m=/^(?:filter|find|map|reject)|While$/.test(d),x=/^(?:head|last)$/.test(d),b=S[x?"take"+(d=="last"?"Right":""):d],P=x||/^find/.test(d);b&&(S.prototype[d]=function(){var k=this.__wrapped__,G=x?[1]:arguments,te=k instanceof mn,Ce=G[0],Ee=te||Wt(k),Oe=function(cn){var yn=b.apply(S,Kl([cn],G));return x&&Je?yn[0]:yn};Ee&&m&&typeof Ce=="function"&&Ce.length!=1&&(te=Ee=!1);var Je=this.__chain__,mt=!!this.__actions__.length,Rt=P&&!Je,nn=te&&!mt;if(!P&&Ee){k=nn?k:new mn(this);var Pt=c.apply(k,G);return Pt.__actions__.push({func:v0,args:[Oe],thisArg:n}),new Zo(Pt,Je)}return Rt&&nn?c.apply(this,G):(Pt=this.thru(Oe),Rt?x?Pt.value()[0]:Pt.value():Pt)})}),Xo(["pop","push","shift","sort","splice","unshift"],function(c){var d=jg[c],m=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",x=/^(?:pop|shift)$/.test(c);S.prototype[c]=function(){var b=arguments;if(x&&!this.__chain__){var P=this.value();return d.apply(Wt(P)?P:[],b)}return this[m](function(k){return d.apply(Wt(k)?k:[],b)})}}),xa(mn.prototype,function(c,d){var m=S[d];if(m){var x=m.name+"";Vn.call(Ed,x)||(Ed[x]=[]),Ed[x].push({name:d,func:m})}}),Ed[u0(n,w).name]=[{name:"wrapper",func:n}],mn.prototype.clone=fz,mn.prototype.reverse=hz,mn.prototype.value=pz,S.prototype.at=jj,S.prototype.chain=Gj,S.prototype.commit=Wj,S.prototype.next=$j,S.prototype.plant=Xj,S.prototype.reverse=Yj,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=Zj,S.prototype.first=S.prototype.head,Hh&&(S.prototype[Hh]=qj),S},Ql=WH();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(nr._=Ql,define(function(){return Ql})):$c?(($c.exports=Ql)._=Ql,fb._=Ql):nr._=Ql}).call(jf)});var Fk=uP((b1,C1)=>{"use strict";(function(n,e){typeof b1=="object"&&typeof C1<"u"?C1.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Compressor=e())})(b1,function(){"use strict";function n(ge,re){var U=Object.keys(ge);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(ge);re&&(J=J.filter(function(_e){return Object.getOwnPropertyDescriptor(ge,_e).enumerable})),U.push.apply(U,J)}return U}function e(ge){for(var re=1;re<arguments.length;re++){var U=arguments[re]!=null?arguments[re]:{};re%2?n(Object(U),!0).forEach(function(J){o(ge,J,U[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ge,Object.getOwnPropertyDescriptors(U)):n(Object(U)).forEach(function(J){Object.defineProperty(ge,J,Object.getOwnPropertyDescriptor(U,J))})}return ge}function t(ge,re){if(!(ge instanceof re))throw new TypeError("Cannot call a class as a function")}function i(ge,re){for(var U=0;U<re.length;U++){var J=re[U];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(ge,l(J.key),J)}}function r(ge,re,U){return re&&i(ge.prototype,re),U&&i(ge,U),Object.defineProperty(ge,"prototype",{writable:!1}),ge}function o(ge,re,U){return re=l(re),re in ge?Object.defineProperty(ge,re,{value:U,enumerable:!0,configurable:!0,writable:!0}):ge[re]=U,ge}function s(){return s=Object.assign?Object.assign.bind():function(ge){for(var re=1;re<arguments.length;re++){var U=arguments[re];for(var J in U)Object.prototype.hasOwnProperty.call(U,J)&&(ge[J]=U[J])}return ge},s.apply(this,arguments)}function a(ge,re){if(typeof ge!="object"||ge===null)return ge;var U=ge[Symbol.toPrimitive];if(U!==void 0){var J=U.call(ge,re||"default");if(typeof J!="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(re==="string"?String:Number)(ge)}function l(ge){var re=a(ge,"string");return typeof re=="symbol"?re:String(re)}var u={exports:{}};(function(ge){typeof window>"u"||function(re){var U=re.HTMLCanvasElement&&re.HTMLCanvasElement.prototype,J=re.Blob&&function(){try{return!!new Blob}catch{return!1}}(),_e=J&&re.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),se=re.BlobBuilder||re.WebKitBlobBuilder||re.MozBlobBuilder||re.MSBlobBuilder,He=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,je=(J||se)&&re.atob&&re.ArrayBuffer&&re.Uint8Array&&function(Le){var rt,pt,ct,z,qt,Ge,At,Xe,Vt;if(rt=Le.match(He),!rt)throw new Error("invalid data URI");for(pt=rt[2]?rt[1]:"text/plain"+(rt[3]||";charset=US-ASCII"),ct=!!rt[4],z=Le.slice(rt[0].length),ct?qt=atob(z):qt=decodeURIComponent(z),Ge=new ArrayBuffer(qt.length),At=new Uint8Array(Ge),Xe=0;Xe<qt.length;Xe+=1)At[Xe]=qt.charCodeAt(Xe);return J?new Blob([_e?At:Ge],{type:pt}):(Vt=new se,Vt.append(Ge),Vt.getBlob(pt))};re.HTMLCanvasElement&&!U.toBlob&&(U.mozGetAsFile?U.toBlob=function(Le,rt,pt){var ct=this;setTimeout(function(){pt&&U.toDataURL&&je?Le(je(ct.toDataURL(rt,pt))):Le(ct.mozGetAsFile("blob",rt))})}:U.toDataURL&&je&&(U.msToBlob?U.toBlob=function(Le,rt,pt){var ct=this;setTimeout(function(){(rt&&rt!=="image/png"||pt)&&U.toDataURL&&je?Le(je(ct.toDataURL(rt,pt))):Le(ct.msToBlob(rt))})}:U.toBlob=function(Le,rt,pt){var ct=this;setTimeout(function(){Le(je(ct.toDataURL(rt,pt)))})})),ge.exports?ge.exports=je:re.dataURLtoBlob=je}(window)})(u);var f=u.exports,h=function(re){return typeof Blob>"u"?!1:re instanceof Blob||Object.prototype.toString.call(re)==="[object Blob]"},p={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},g=typeof window<"u"&&typeof window.document<"u",v=g?window:{},w=function(re){return re>0&&re<1/0},y=Array.prototype.slice;function _(ge){return Array.from?Array.from(ge):y.call(ge)}var T=/^image\/.+$/;function C(ge){return T.test(ge)}function E(ge){var re=C(ge)?ge.substr(6):"";return re==="jpeg"&&(re="jpg"),".".concat(re)}var V=String.fromCharCode;function F(ge,re,U){var J="",_e;for(U+=re,_e=re;_e<U;_e+=1)J+=V(ge.getUint8(_e));return J}var L=v.btoa;function W(ge,re){for(var U=[],J=8192,_e=new Uint8Array(ge);_e.length>0;)U.push(V.apply(null,_(_e.subarray(0,J)))),_e=_e.subarray(J);return"data:".concat(re,";base64,").concat(L(U.join("")))}function O(ge){var re=new DataView(ge),U;try{var J,_e,se;if(re.getUint8(0)===255&&re.getUint8(1)===216)for(var He=re.byteLength,je=2;je+1<He;){if(re.getUint8(je)===255&&re.getUint8(je+1)===225){_e=je;break}je+=1}if(_e){var Le=_e+4,rt=_e+10;if(F(re,Le,4)==="Exif"){var pt=re.getUint16(rt);if(J=pt===18761,(J||pt===19789)&&re.getUint16(rt+2,J)===42){var ct=re.getUint32(rt+4,J);ct>=8&&(se=rt+ct)}}}if(se){var z=re.getUint16(se,J),qt,Ge;for(Ge=0;Ge<z;Ge+=1)if(qt=se+Ge*12+2,re.getUint16(qt,J)===274){qt+=8,U=re.getUint16(qt,J),re.setUint16(qt,1,J);break}}}catch{U=1}return U}function R(ge){var re=0,U=1,J=1;switch(ge){case 2:U=-1;break;case 3:re=-180;break;case 4:J=-1;break;case 5:re=90,J=-1;break;case 6:re=90;break;case 7:re=90,U=-1;break;case 8:re=-90;break}return{rotate:re,scaleX:U,scaleY:J}}var j=/\.\d*(?:0|9){12}\d*$/;function pe(ge){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return j.test(ge)?Math.round(ge*re)/re:ge}function ae(ge){var re=ge.aspectRatio,U=ge.height,J=ge.width,_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",se=w(J),He=w(U);if(se&&He){var je=U*re;(_e==="contain"||_e==="none")&&je>J||_e==="cover"&&je<J?U=J/re:J=U*re}else se?U=J/re:He&&(J=U*re);return{width:J,height:U}}function Ie(ge){for(var re=_(new Uint8Array(ge)),U=re.length,J=[],_e=0;_e+3<U;){var se=re[_e],He=re[_e+1];if(se===255&&He===218)break;if(se===255&&He===216)_e+=2;else{var je=re[_e+2]*256+re[_e+3],Le=_e+je+2,rt=re.slice(_e,Le);J.push(rt),_e=Le}}return J.reduce(function(pt,ct){return ct[0]===255&&ct[1]===225?pt.concat(ct):pt},[])}function be(ge,re){var U=_(new Uint8Array(ge));if(U[2]!==255||U[3]!==224)return ge;var J=U[4]*256+U[5],_e=[255,216].concat(re,U.slice(4+J));return new Uint8Array(_e)}var X=v.ArrayBuffer,ie=v.FileReader,q=v.URL||v.webkitURL,ve=/\.\w+$/,Ve=v.Compressor,tt=function(){function ge(re,U){t(this,ge),this.file=re,this.exif=[],this.image=new Image,this.options=e(e({},p),U),this.aborted=!1,this.result=null,this.init()}return r(ge,[{key:"init",value:function(){var U=this,J=this.file,_e=this.options;if(!h(J)){this.fail(new Error("The first argument must be a File or Blob object."));return}var se=J.type;if(!C(se)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!q||!ie){this.fail(new Error("The current browser does not support image compression."));return}X||(_e.checkOrientation=!1,_e.retainExif=!1);var He=se==="image/jpeg",je=He&&_e.checkOrientation,Le=He&&_e.retainExif;if(q&&!je&&!Le)this.load({url:q.createObjectURL(J)});else{var rt=new ie;this.reader=rt,rt.onload=function(pt){var ct=pt.target,z=ct.result,qt={},Ge=1;je&&(Ge=O(z),Ge>1&&s(qt,R(Ge))),Le&&(U.exif=Ie(z)),je||Le?!q||Ge>1?qt.url=W(z,se):qt.url=q.createObjectURL(J):qt.url=z,U.load(qt)},rt.onabort=function(){U.fail(new Error("Aborted to read the image with FileReader."))},rt.onerror=function(){U.fail(new Error("Failed to read the image with FileReader."))},rt.onloadend=function(){U.reader=null},je||Le?rt.readAsArrayBuffer(J):rt.readAsDataURL(J)}}},{key:"load",value:function(U){var J=this,_e=this.file,se=this.image;se.onload=function(){J.draw(e(e({},U),{},{naturalWidth:se.naturalWidth,naturalHeight:se.naturalHeight}))},se.onabort=function(){J.fail(new Error("Aborted to load the image."))},se.onerror=function(){J.fail(new Error("Failed to load the image."))},v.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(v.navigator.userAgent)&&(se.crossOrigin="anonymous"),se.alt=_e.name,se.src=U.url}},{key:"draw",value:function(U){var J=this,_e=U.naturalWidth,se=U.naturalHeight,He=U.rotate,je=He===void 0?0:He,Le=U.scaleX,rt=Le===void 0?1:Le,pt=U.scaleY,ct=pt===void 0?1:pt,z=this.file,qt=this.image,Ge=this.options,At=document.createElement("canvas"),Xe=At.getContext("2d"),Vt=Math.abs(je)%180===90,ht=(Ge.resize==="contain"||Ge.resize==="cover")&&w(Ge.width)&&w(Ge.height),N=Math.max(Ge.maxWidth,0)||1/0,M=Math.max(Ge.maxHeight,0)||1/0,oe=Math.max(Ge.minWidth,0)||0,we=Math.max(Ge.minHeight,0)||0,De=_e/se,he=Ge.width,$e=Ge.height;if(Vt){var qe=[M,N];N=qe[0],M=qe[1];var yt=[we,oe];oe=yt[0],we=yt[1];var _t=[$e,he];he=_t[0],$e=_t[1]}ht&&(De=he/$e);var Fe=ae({aspectRatio:De,width:N,height:M},"contain");N=Fe.width,M=Fe.height;var nt=ae({aspectRatio:De,width:oe,height:we},"cover");if(oe=nt.width,we=nt.height,ht){var xt=ae({aspectRatio:De,width:he,height:$e},Ge.resize);he=xt.width,$e=xt.height}else{var Mt=ae({aspectRatio:De,width:he,height:$e}),it=Mt.width;he=it===void 0?_e:it;var sn=Mt.height;$e=sn===void 0?se:sn}he=Math.floor(pe(Math.min(Math.max(he,oe),N))),$e=Math.floor(pe(Math.min(Math.max($e,we),M)));var Ht=-he/2,Ln=-$e/2,Y=he,Ze=$e,me=[];if(ht){var Se=0,et=0,Ye=_e,Nt=se,Yn=ae({aspectRatio:De,width:_e,height:se},{contain:"cover",cover:"contain"}[Ge.resize]);Ye=Yn.width,Nt=Yn.height,Se=(_e-Ye)/2,et=(se-Nt)/2,me.push(Se,et,Ye,Nt)}if(me.push(Ht,Ln,Y,Ze),Vt){var Di=[$e,he];he=Di[0],$e=Di[1]}At.width=he,At.height=$e,C(Ge.mimeType)||(Ge.mimeType=z.type);var wn="transparent";z.size>Ge.convertSize&&Ge.convertTypes.indexOf(Ge.mimeType)>=0&&(Ge.mimeType="image/jpeg");var tr=Ge.mimeType==="image/jpeg";if(tr&&(wn="#fff"),Xe.fillStyle=wn,Xe.fillRect(0,0,he,$e),Ge.beforeDraw&&Ge.beforeDraw.call(this,Xe,At),!this.aborted&&(Xe.save(),Xe.translate(he/2,$e/2),Xe.rotate(je*Math.PI/180),Xe.scale(rt,ct),Xe.drawImage.apply(Xe,[qt].concat(me)),Xe.restore(),Ge.drew&&Ge.drew.call(this,Xe,At),!this.aborted)){var $r=function(ya){if(!J.aborted){var Wo=function($o){return J.done({naturalWidth:_e,naturalHeight:se,result:$o})};if(ya&&tr&&Ge.retainExif&&J.exif&&J.exif.length>0){var Xl=function($o){return Wo(f(W(be($o,J.exif),Ge.mimeType)))};if(ya.arrayBuffer)ya.arrayBuffer().then(Xl).catch(function(){J.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var As=new ie;J.reader=As,As.onload=function(Yl){var $o=Yl.target;Xl($o.result)},As.onabort=function(){J.fail(new Error("Aborted to read the compressed image with FileReader."))},As.onerror=function(){J.fail(new Error("Failed to read the compressed image with FileReader."))},As.onloadend=function(){J.reader=null},As.readAsArrayBuffer(ya)}}else Wo(ya)}};At.toBlob?At.toBlob($r,Ge.mimeType,Ge.quality):$r(f(At.toDataURL(Ge.mimeType,Ge.quality)))}}},{key:"done",value:function(U){var J=U.naturalWidth,_e=U.naturalHeight,se=U.result,He=this.file,je=this.image,Le=this.options;if(q&&je.src.indexOf("blob:")===0&&q.revokeObjectURL(je.src),se)if(Le.strict&&!Le.retainExif&&se.size>He.size&&Le.mimeType===He.type&&!(Le.width>J||Le.height>_e||Le.minWidth>J||Le.minHeight>_e||Le.maxWidth<J||Le.maxHeight<_e))se=He;else{var rt=new Date;se.lastModified=rt.getTime(),se.lastModifiedDate=rt,se.name=He.name,se.name&&se.type!==He.type&&(se.name=se.name.replace(ve,E(se.type)))}else se=He;this.result=se,Le.success&&Le.success.call(this,se)}},{key:"fail",value:function(U){var J=this.options;if(J.error)J.error.call(this,U);else throw U}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Ve,ge}},{key:"setDefaults",value:function(U){s(p,U)}}]),ge}();return tt})});function CC(n,e){return Object.is(n,e)}var $i=null,S0=!1,EC=1,ts=Symbol("SIGNAL");function gn(n){let e=$i;return $i=n,e}function MC(){return $i}var np={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ip(n){if(S0)throw new Error("");if($i===null)return;$i.consumerOnSignalRead(n);let e=$i.nextProducerIndex++;if(A0($i),e<$i.producerNode.length&&$i.producerNode[e]!==n&&tp($i)){let t=$i.producerNode[e];D0(t,$i.producerIndexOfThis[e])}$i.producerNode[e]!==n&&($i.producerNode[e]=n,$i.producerIndexOfThis[e]=tp($i)?fP(n,$i,e):0),$i.producerLastReadVersion[e]=n.version}function dP(){EC++}function SC(n){if(!(tp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===EC)){if(!n.producerMustRecompute(n)&&!AC(n)){bC(n);return}n.producerRecomputeValue(n),bC(n)}}function TC(n){if(n.liveConsumerNode===void 0)return;let e=S0;S0=!0;try{for(let t of n.liveConsumerNode)t.dirty||s6(t)}finally{S0=e}}function IC(){return $i?.consumerAllowSignalWrites!==!1}function s6(n){n.dirty=!0,TC(n),n.consumerMarkedDirty?.(n)}function bC(n){n.dirty=!1,n.lastCleanEpoch=EC}function I0(n){return n&&(n.nextProducerIndex=0),gn(n)}function DC(n,e){if(gn(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(tp(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)D0(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function AC(n){A0(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(SC(t),i!==t.version))return!0}return!1}function RC(n){if(A0(n),tp(n))for(let e=0;e<n.producerNode.length;e++)D0(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fP(n,e,t){if(hP(n),n.liveConsumerNode.length===0&&pP(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=fP(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function D0(n,e){if(hP(n),n.liveConsumerNode.length===1&&pP(n))for(let i=0;i<n.producerNode.length;i++)D0(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];A0(r),r.producerIndexOfThis[i]=e}}function tp(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function A0(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function hP(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function pP(n){return n.producerNode!==void 0}function PC(n,e){let t=Object.create(a6);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(SC(t),ip(t),t.value===T0)throw t.error;return t.value};return i[ts]=t,i}var xC=Symbol("UNSET"),wC=Symbol("COMPUTING"),T0=Symbol("ERRORED"),a6=Ct(Ne({},np),{value:xC,dirty:!0,error:null,equal:CC,kind:"computed",producerMustRecompute(n){return n.value===xC||n.value===wC},producerRecomputeValue(n){if(n.value===wC)throw new Error("Detected cycle in computations.");let e=n.value;n.value=wC;let t=I0(n),i,r=!1;try{i=n.computation(),gn(null),r=e!==xC&&e!==T0&&i!==T0&&n.equal(e,i)}catch(o){i=T0,n.error=o}finally{DC(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function l6(){throw new Error}var mP=l6;function gP(n){mP(n)}function OC(n){mP=n}var c6=null;function NC(n,e){let t=Object.create(R0);t.value=n,e!==void 0&&(t.equal=e);let i=()=>(ip(t),t.value);return i[ts]=t,i}function rp(n,e){IC()||gP(n),n.equal(n.value,e)||(n.value=e,u6(n))}function FC(n,e){IC()||gP(n),rp(n,e(n.value))}var R0=Ct(Ne({},np),{equal:CC,value:void 0,kind:"signal"});function u6(n){n.version++,dP(),TC(n),c6?.()}function LC(n){let e=gn(null);try{return n()}finally{gn(e)}}var kC;function op(){return kC}function sl(n){let e=kC;return kC=n,e}var P0=Symbol("NotFound");function It(n){return typeof n=="function"}function Pd(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var O0=Pd(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function tu(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var di=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(It(i))try{i()}catch(o){e=o instanceof O0?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{vP(o)}catch(s){e=e??[],s instanceof O0?e=[...e,...s.errors]:e.push(s)}}if(e)throw new O0(e)}}add(e){var t;if(e&&e!==this)if(this.closed)vP(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&tu(t,e)}remove(e){let{_finalizers:t}=this;t&&tu(t,e),e instanceof n&&e._removeParent(this)}};di.EMPTY=(()=>{let n=new di;return n.closed=!0,n})();var UC=di.EMPTY;function N0(n){return n instanceof di||n&&"closed"in n&&It(n.remove)&&It(n.add)&&It(n.unsubscribe)}function vP(n){It(n)?n():n.unsubscribe()}var Fs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Od={setTimeout(n,e,...t){let{delegate:i}=Od;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Od;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function F0(n){Od.setTimeout(()=>{let{onUnhandledError:e}=Fs;if(e)e(n);else throw n})}function nu(){}var yP=BC("C",void 0,void 0);function _P(n){return BC("E",void 0,n)}function xP(n){return BC("N",n,void 0)}function BC(n,e,t){return{kind:n,value:e,error:t}}var iu=null;function Nd(n){if(Fs.useDeprecatedSynchronousErrorHandling){let e=!iu;if(e&&(iu={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=iu;if(iu=null,t)throw i}}else n()}function wP(n){Fs.useDeprecatedSynchronousErrorHandling&&iu&&(iu.errorThrown=!0,iu.error=n)}var ru=class extends di{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,N0(e)&&e.add(this)):this.destination=g6}static create(e,t,i){return new Ls(e,t,i)}next(e){this.isStopped?HC(xP(e),this):this._next(e)}error(e){this.isStopped?HC(_P(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?HC(yP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},p6=Function.prototype.bind;function VC(n,e){return p6.call(n,e)}var zC=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){L0(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){L0(i)}else L0(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){L0(t)}}},Ls=class extends ru{constructor(e,t,i){super();let r;if(It(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Fs.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&VC(e.next,o),error:e.error&&VC(e.error,o),complete:e.complete&&VC(e.complete,o)}):r=e}this.destination=new zC(r)}};function L0(n){Fs.useDeprecatedSynchronousErrorHandling?wP(n):F0(n)}function m6(n){throw n}function HC(n,e){let{onStoppedNotification:t}=Fs;t&&Od.setTimeout(()=>t(n,e))}var g6={closed:!0,next:nu,error:m6,complete:nu};var Fd=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ur(n){return n}function sp(...n){return jC(n)}function jC(n){return n.length===0?ur:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Lt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=y6(t)?t:new Ls(t,i,r);return Nd(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=bP(i),new i((r,o)=>{let s=new Ls({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Fd](){return this}pipe(...t){return jC(t)(this)}toPromise(t){return t=bP(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function bP(n){var e;return(e=n??Fs.Promise)!==null&&e!==void 0?e:Promise}function v6(n){return n&&It(n.next)&&It(n.error)&&It(n.complete)}function y6(n){return n&&n instanceof ru||v6(n)&&N0(n)}function GC(n){return It(n?.lift)}function Ut(n){return e=>{if(GC(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ot(n,e,t,i,r){return new WC(n,e,t,i,r)}var WC=class extends ru{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ld(){return Ut((n,e)=>{let t=null;n._refCount++;let i=Ot(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var kd=class extends Lt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,GC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new di;let t=this.getSubject();e.add(this.source.subscribe(Ot(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=di.EMPTY)}return e}refCount(){return Ld()(this)}};var CP=Pd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var On=(()=>{class n extends Lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new k0(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new CP}next(t){Nd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Nd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Nd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?UC:(this.currentObservers=null,o.push(t),new di(()=>{this.currentObservers=null,tu(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Lt;return t.source=this,t}}return n.create=(e,t)=>new k0(e,t),n})(),k0=class extends On{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:UC}};var Wn=class extends On{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var ap={now(){return(ap.delegate||Date).now()},delegate:void 0};var U0=class extends On{constructor(e=1/0,t=1/0,i=ap){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var B0=class extends di{constructor(e,t){super()}schedule(e,t=0){return this}};var lp={setInterval(n,e,...t){let{delegate:i}=lp;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=lp;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ud=class extends B0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return lp.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&lp.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,tu(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Bd=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Bd.now=ap.now;var Vd=class extends Bd{constructor(e,t=Bd.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var al=new Vd(Ud),$C=al;var V0=class extends Ud{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var H0=class extends Vd{};var cp=new H0(V0);var _i=new Lt(n=>n.complete());function z0(n){return n&&It(n.schedule)}function qC(n){return n[n.length-1]}function Hd(n){return It(qC(n))?n.pop():void 0}function Ca(n){return z0(qC(n))?n.pop():void 0}function EP(n,e){return typeof qC(n)=="number"?n.pop():e}function SP(n,e,t,i){var r=arguments.length,o=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}function TP(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(i.next(f))}catch(h){s(h)}}function l(f){try{u(i.throw(f))}catch(h){s(h)}}function u(f){f.done?o(f.value):r(f.value).then(a,l)}u((i=i.apply(n,e||[])).next())})}function MP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ou(n){return this instanceof ou?(this.v=n,this):new ou(n)}function IP(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){i[g]&&(r[g]=function(w){return new Promise(function(y,_){o.push([g,w,y,_])>1||l(g,w)})},v&&(r[g]=v(r[g])))}function l(g,v){try{u(i[g](v))}catch(w){p(o[0][3],w)}}function u(g){g.value instanceof ou?Promise.resolve(g.value.v).then(f,h):p(o[0][2],g)}function f(g){l("next",g)}function h(g){l("throw",g)}function p(g,v){g(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}function DP(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof MP=="function"?MP(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var zd=n=>n&&typeof n.length=="number"&&typeof n!="function";function j0(n){return It(n?.then)}function G0(n){return It(n[Fd])}function W0(n){return Symbol.asyncIterator&&It(n?.[Symbol.asyncIterator])}function $0(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var q0=_6();function X0(n){return It(n?.[q0])}function Y0(n){return IP(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield ou(t.read());if(r)return yield ou(void 0);yield yield ou(i)}}finally{t.releaseLock()}})}function Z0(n){return It(n?.getReader)}function Tn(n){if(n instanceof Lt)return n;if(n!=null){if(G0(n))return x6(n);if(zd(n))return w6(n);if(j0(n))return b6(n);if(W0(n))return AP(n);if(X0(n))return C6(n);if(Z0(n))return E6(n)}throw $0(n)}function x6(n){return new Lt(e=>{let t=n[Fd]();if(It(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function w6(n){return new Lt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function b6(n){return new Lt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,F0)})}function C6(n){return new Lt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function AP(n){return new Lt(e=>{M6(n,e).catch(t=>e.error(t))})}function E6(n){return AP(Y0(n))}function M6(n,e){var t,i,r,o;return TP(this,void 0,void 0,function*(){try{for(t=DP(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Kr(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function K0(n,e=0){return Ut((t,i)=>{t.subscribe(Ot(i,r=>Kr(i,n,()=>i.next(r),e),()=>Kr(i,n,()=>i.complete(),e),r=>Kr(i,n,()=>i.error(r),e)))})}function J0(n,e=0){return Ut((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function RP(n,e){return Tn(n).pipe(J0(e),K0(e))}function PP(n,e){return Tn(n).pipe(J0(e),K0(e))}function OP(n,e){return new Lt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function NP(n,e){return new Lt(t=>{let i;return Kr(t,e,()=>{i=n[q0](),Kr(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>It(i?.return)&&i.return()})}function Q0(n,e){if(!n)throw new Error("Iterable cannot be null");return new Lt(t=>{Kr(t,e,()=>{let i=n[Symbol.asyncIterator]();Kr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function FP(n,e){return Q0(Y0(n),e)}function LP(n,e){if(n!=null){if(G0(n))return RP(n,e);if(zd(n))return OP(n,e);if(j0(n))return PP(n,e);if(W0(n))return Q0(n,e);if(X0(n))return NP(n,e);if(Z0(n))return FP(n,e)}throw $0(n)}function ii(n,e){return e?LP(n,e):Tn(n)}function Dt(...n){let e=Ca(n);return ii(n,e)}function sc(n,e){let t=It(n)?n:()=>n,i=r=>r.error(t());return new Lt(e?r=>e.schedule(i,0,r):i)}function XC(n){return!!n&&(n instanceof Lt||It(n.lift)&&It(n.subscribe))}var ks=Pd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function un(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new Ls({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new ks)}});n.subscribe(o)})}function kP(n){return n instanceof Date&&!isNaN(n)}function at(n,e){return Ut((t,i)=>{let r=0;t.subscribe(Ot(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:S6}=Array;function T6(n,e){return S6(e)?n(...e):n(e)}function jd(n){return at(e=>T6(n,e))}var{isArray:I6}=Array,{getPrototypeOf:D6,prototype:A6,keys:R6}=Object;function ev(n){if(n.length===1){let e=n[0];if(I6(e))return{args:e,keys:null};if(P6(e)){let t=R6(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function P6(n){return n&&typeof n=="object"&&D6(n)===A6}function tv(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Gd(...n){let e=Ca(n),t=Hd(n),{args:i,keys:r}=ev(n);if(i.length===0)return ii([],e);let o=new Lt(O6(i,e,r?s=>tv(r,s):ur));return t?o.pipe(jd(t)):o}function O6(n,e,t=ur){return i=>{UP(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)UP(e,()=>{let u=ii(n[l],e),f=!1;u.subscribe(Ot(i,h=>{o[l]=h,f||(f=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function UP(n,e,t){n?Kr(t,n,e):e()}function BP(n,e,t,i,r,o,s,a){let l=[],u=0,f=0,h=!1,p=()=>{h&&!l.length&&!u&&e.complete()},g=w=>u<i?v(w):l.push(w),v=w=>{o&&e.next(w),u++;let y=!1;Tn(t(w,f++)).subscribe(Ot(e,_=>{r?.(_),o?g(_):e.next(_)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;l.length&&u<i;){let _=l.shift();s?Kr(e,s,()=>v(_)):v(_)}p()}catch(_){e.error(_)}}))};return n.subscribe(Ot(e,g,()=>{h=!0,p()})),()=>{a?.()}}function Oi(n,e,t=1/0){return It(e)?Oi((i,r)=>at((o,s)=>e(i,o,r,s))(Tn(n(i,r))),t):(typeof e=="number"&&(t=e),Ut((i,r)=>BP(i,r,n,t)))}function nv(n=1/0){return Oi(ur,n)}function VP(){return nv(1)}function su(...n){return VP()(ii(n,Ca(n)))}function iv(n){return new Lt(e=>{Tn(n()).subscribe(e)})}function YC(...n){let e=Hd(n),{args:t,keys:i}=ev(n),r=new Lt(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let h=!1;Tn(t[f]).subscribe(Ot(o,p=>{h||(h=!0,u--),a[f]=p},()=>l--,void 0,()=>{(!l||!h)&&(u||o.next(i?tv(i,a):a),o.complete())}))}});return e?r.pipe(jd(e)):r}var N6=["addListener","removeListener"],F6=["addEventListener","removeEventListener"],L6=["on","off"];function Us(n,e,t,i){if(It(t)&&(i=t,t=void 0),i)return Us(n,e,t).pipe(jd(i));let[r,o]=B6(n)?F6.map(s=>a=>n[s](e,a,t)):k6(n)?N6.map(HP(n,e)):U6(n)?L6.map(HP(n,e)):[];if(!r&&zd(n))return Oi(s=>Us(s,e,t))(Tn(n));if(!r)throw new TypeError("Invalid event target");return new Lt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function HP(n,e){return t=>i=>n[t](e,i)}function k6(n){return It(n.addListener)&&It(n.removeListener)}function U6(n){return It(n.on)&&It(n.off)}function B6(n){return It(n.addEventListener)&&It(n.removeEventListener)}function Ea(n=0,e,t=$C){let i=-1;return e!=null&&(z0(e)?t=e:i=e),new Lt(r=>{let o=kP(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function ZC(n=0,e=al){return n<0&&(n=0),Ea(n,n,e)}function Jr(...n){let e=Ca(n),t=EP(n,1/0),i=n;return i.length?i.length===1?Tn(i[0]):nv(t)(ii(i,e)):_i}function $n(n,e){return Ut((t,i)=>{let r=0;t.subscribe(Ot(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Bs(n){return Ut((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Ot(t,void 0,void 0,s=>{o=Tn(n(s,Bs(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function zP(n,e,t,i,r){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(Ot(s,f=>{let h=u++;l=a?n(l,f,h):(a=!0,f),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function ac(n,e){return It(e)?Oi(n,e,1):Oi(n,1)}function ll(n){return Ut((e,t)=>{let i=!1;e.subscribe(Ot(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function To(n){return n<=0?()=>_i:Ut((e,t)=>{let i=0;e.subscribe(Ot(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Wd(n,e=ur){return n=n??V6,Ut((t,i)=>{let r,o=!0;t.subscribe(Ot(i,s=>{let a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function V6(n,e){return n===e}function rv(n=H6){return Ut((e,t)=>{let i=!1;e.subscribe(Ot(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function H6(){return new ks}function lc(n){return Ut((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function cl(n,e){let t=arguments.length>=2;return i=>i.pipe(n?$n((r,o)=>n(r,o,i)):ur,To(1),t?ll(e):rv(()=>new ks))}function $d(n){return n<=0?()=>_i:Ut((e,t)=>{let i=[];e.subscribe(Ot(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function KC(n,e){let t=arguments.length>=2;return i=>i.pipe(n?$n((r,o)=>n(r,o,i)):ur,$d(1),t?ll(e):rv(()=>new ks))}function up(){return Ut((n,e)=>{let t,i=!1;n.subscribe(Ot(e,r=>{let o=t;t=r,i&&e.next([o,r]),i=!0}))})}function qd(n){let e=1/0,t;return n!=null&&(typeof n=="object"?{count:e=1/0,delay:t}=n:e=n),e<=0?()=>_i:Ut((i,r)=>{let o=0,s,a=()=>{if(s?.unsubscribe(),s=null,t!=null){let u=typeof t=="number"?Ea(t):Tn(t(o)),f=Ot(r,()=>{f.unsubscribe(),l()});u.subscribe(f)}else l()},l=()=>{let u=!1;s=i.subscribe(Ot(r,void 0,()=>{++o<e?s?a():u=!0:r.complete()})),u&&a()};l()})}function JC(n,e){return Ut(zP(n,e,arguments.length>=2,!0))}function Ma(n={}){let{connector:e=()=>new On,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,u=0,f=!1,h=!1,p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=l=void 0,f=h=!1},v=()=>{let w=s;g(),w?.unsubscribe()};return Ut((w,y)=>{u++,!h&&!f&&p();let _=l=l??e();y.add(()=>{u--,u===0&&!h&&!f&&(a=QC(v,r))}),_.subscribe(y),!s&&u>0&&(s=new Ls({next:T=>_.next(T),error:T=>{h=!0,p(),a=QC(g,t,T),_.error(T)},complete:()=>{f=!0,p(),a=QC(g,i),_.complete()}}),Tn(w).subscribe(s))})(o)}}function QC(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Ls({next:()=>{i.unsubscribe(),n()}});return Tn(e(...t)).subscribe(i)}function dp(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,Ma({connector:()=>new U0(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function ns(...n){let e=Ca(n);return Ut((t,i)=>{(e?su(n,t,e):su(n,t)).subscribe(i)})}function xi(n,e){return Ut((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(Ot(i,l=>{r?.unsubscribe();let u=0,f=o++;Tn(n(l,f)).subscribe(r=Ot(i,h=>i.next(e?e(l,h,f,u++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function is(n){return Ut((e,t)=>{Tn(n).subscribe(Ot(t,()=>t.complete(),nu)),!t.closed&&e.subscribe(t)})}function wi(n,e,t){let i=It(n)||e||t?{next:n,error:e,complete:t}:n;return i?Ut((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Ot(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):ur}function jP(n,e){return Ut((t,i)=>{let{leading:r=!0,trailing:o=!1}=e??{},s=!1,a=null,l=null,u=!1,f=()=>{l?.unsubscribe(),l=null,o&&(g(),u&&i.complete())},h=()=>{l=null,u&&i.complete()},p=v=>l=Tn(n(v)).subscribe(Ot(i,f,h)),g=()=>{if(s){s=!1;let v=a;a=null,i.next(v),!u&&p(v)}};t.subscribe(Ot(i,v=>{s=!0,a=v,!(l&&!l.closed)&&(r?g():p(v))},()=>{u=!0,!(o&&s&&l&&!l.closed)&&i.complete()}))})}function eE(n,e=al,t){let i=Ea(n,e);return jP(()=>i,t)}function tE(...n){let e=Hd(n);return Ut((t,i)=>{let r=n.length,o=new Array(r),s=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)Tn(n[l]).subscribe(Ot(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(ur))&&(s=null))},nu));t.subscribe(Ot(i,l=>{if(a){let u=[l,...o];i.next(e?e(...u):u)}}))})}var U4="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Te=class extends Error{code;constructor(e,t){super(MM(e,t)),this.code=e}};function z6(n){return`NG0${Math.abs(n)}`}function MM(n,e){return`${z6(n)}${e?": "+e:""}`}var B4=Symbol("InputSignalNode#UNSET"),j6=Ct(Ne({},R0),{transformFn:void 0,applyValueToInputSignal(n,e){rp(n,e)}});function V4(n,e){let t=Object.create(j6);t.value=n,t.transformFn=e?.transform;function i(){if(ip(t),t.value===B4){let r=null;throw new Te(-950,r)}return t.value}return i[ts]=t,i}function Tp(n){return{toString:n}.toString()}var ov="__parameters__";function G6(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function H4(n,e,t){return Tp(()=>{let i=G6(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,f){let h=l.hasOwnProperty(ov)?l[ov]:Object.defineProperty(l,ov,{value:[]})[ov];for(;h.length<=f;)h.push(null);return(h[f]=h[f]||[]).push(s),l}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Jd=globalThis;function Jn(n){for(let e in n)if(n[e]===Jn)return e;throw Error("Could not find renamed property on target object.")}function W6(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function to(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(to).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function _E(n,e){return n?e?`${n} ${e}`:n:e||""}var $6=Jn({__forward_ref__:Jn});function oo(n){return n.__forward_ref__=oo,n.toString=function(){return to(this())},n}function dr(n){return z4(n)?n():n}function z4(n){return typeof n=="function"&&n.hasOwnProperty($6)&&n.__forward_ref__===oo}function Re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function hr(n){return{providers:n.providers||[],imports:n.imports||[]}}function zv(n){return GP(n,G4)||GP(n,W4)}function j4(n){return zv(n)!==null}function GP(n,e){return n.hasOwnProperty(e)?n[e]:null}function q6(n){let e=n&&(n[G4]||n[W4]);return e||null}function WP(n){return n&&(n.hasOwnProperty($P)||n.hasOwnProperty(X6))?n[$P]:null}var G4=Jn({\u0275prov:Jn}),$P=Jn({\u0275inj:Jn}),W4=Jn({ngInjectableDef:Jn}),X6=Jn({ngInjectorDef:Jn}),Ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $4(n){return n&&!!n.\u0275providers}var Y6=Jn({\u0275cmp:Jn}),Z6=Jn({\u0275dir:Jn}),K6=Jn({\u0275pipe:Jn}),J6=Jn({\u0275mod:Jn}),vv=Jn({\u0275fac:Jn}),mp=Jn({__NG_ELEMENT_ID__:Jn}),qP=Jn({__NG_ENV_ID__:Jn});function Ip(n){return typeof n=="string"?n:n==null?"":String(n)}function Q6(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ip(n)}function q4(n,e){throw new Te(-200,n)}function SM(n,e){throw new Te(-201,!1)}var Jt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Jt||{}),xE;function X4(){return xE}function Qr(n){let e=xE;return xE=n,e}function Y4(n,e,t){let i=zv(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Jt.Optional)return null;if(e!==void 0)return e;SM(n,"Injector")}var e$={},au=e$,wE="__NG_DI_FLAG__",yv=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=t;return this.injector.get(e,i.optional?P0:au,i)}},_v="ngTempTokenPath",t$="ngTokenPath",n$=/\n/gm,i$="\u0275",XP="__source";function r$(n,e=Jt.Default){if(op()===void 0)throw new Te(-203,!1);if(op()===null)return Y4(n,void 0,e);{let t=op(),i;return t instanceof yv?i=t.injector:i=t,i.get(n,e&Jt.Optional?null:void 0,e)}}function ze(n,e=Jt.Default){return(X4()||r$)(dr(n),e)}function Q(n,e=Jt.Default){return ze(n,jv(e))}function jv(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bE(n){let e=[];for(let t=0;t<n.length;t++){let i=dr(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Te(900,!1);let r,o=Jt.Default;for(let s=0;s<i.length;s++){let a=i[s],l=o$(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(ze(r,o))}else e.push(ze(i))}return e}function Z4(n,e){return n[wE]=e,n.prototype[wE]=e,n}function o$(n){return n[wE]}function s$(n,e,t,i){let r=n[_v];throw e[XP]&&r.unshift(e[XP]),n.message=a$(`
`+n.message,r,t,i),n[t$]=r,n[_v]=null,n}function a$(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==i$?n.slice(2):n;let r=to(e);if(Array.isArray(e))r=e.map(to).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):to(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(n$,`
  `)}`}var K4=Z4(H4("Optional"),8);var l$=Z4(H4("SkipSelf"),4);function cu(n,e){let t=n.hasOwnProperty(vv);return t?n[vv]:null}function c$(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function u$(n){return n.flat(Number.POSITIVE_INFINITY)}function TM(n,e){n.forEach(t=>Array.isArray(t)?TM(t,e):e(t))}function J4(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function xv(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function d$(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function f$(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Gv(n,e,t){let i=Dp(n,e);return i>=0?n[i|1]=t:(i=~i,f$(n,i,e,t)),i}function nE(n,e){let t=Dp(n,e);if(t>=0)return n[t|1]}function Dp(n,e){return h$(n,e,1)}function h$(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var Ta={},eo=[],uu=new Ae(""),Q4=new Ae("",-1),e3=new Ae(""),wv=class{get(e,t=au){if(t===au){let i=new Error(`NullInjectorError: No provider for ${to(e)}!`);throw i.name="NullInjectorError",i}return t}};function t3(n,e){let t=n[J6]||null;if(!t&&e===!0)throw new Error(`Type ${to(n)} does not have '\u0275mod' property.`);return t}function Qd(n){return n[Y6]||null}function n3(n){return n[Z6]||null}function p$(n){return n[K6]||null}function dc(n){return{\u0275providers:n}}function m$(...n){return{\u0275providers:i3(!0,n),\u0275fromNgModule:!0}}function i3(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return TM(e,s=>{let a=s;CE(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&r3(r,o),t}function r3(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];IM(r,o=>{e(o,i)})}}function CE(n,e,t,i){if(n=dr(n),!n)return!1;let r=null,o=WP(n),s=!o&&Qd(n);if(!o&&!s){let l=n.ngModule;if(o=WP(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)CE(u,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{TM(o.imports,f=>{CE(f,e,t,i)&&(u||=[],u.push(f))})}finally{}u!==void 0&&r3(u,e)}if(!a){let u=cu(r)||(()=>new r);e({provide:r,useFactory:u,deps:eo},r),e({provide:e3,useValue:r,multi:!0},r),e({provide:uu,useValue:()=>ze(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=n;IM(l,f=>{e(f,u)})}}else return!1;return r!==n&&n.providers!==void 0}function IM(n,e){for(let t of n)$4(t)&&(t=t.\u0275providers),Array.isArray(t)?IM(t,e):e(t)}var g$=Jn({provide:String,useValue:Jn});function o3(n){return n!==null&&typeof n=="object"&&g$ in n}function v$(n){return!!(n&&n.useExisting)}function y$(n){return!!(n&&n.useFactory)}function ef(n){return typeof n=="function"}function _$(n){return!!n.useClass}var Wv=new Ae(""),dv={},YP={},iE;function DM(){return iE===void 0&&(iE=new wv),iE}var Cr=class{},gp=class extends Cr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,ME(e,s=>this.processProvider(s)),this.records.set(Q4,Xd(void 0,this)),r.has("environment")&&this.records.set(Cr,Xd(void 0,this));let o=this.records.get(Wv);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(e3,eo,Jt.Self))}retrieve(e,t){let i=t;return this.get(e,i.optional?P0:au,i)}destroy(){hp(this),this._destroyed=!0;let e=gn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),gn(e)}}onDestroy(e){return hp(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){hp(this);let t=sl(this),i=Qr(void 0),r;try{return e()}finally{sl(t),Qr(i)}}get(e,t=au,i=Jt.Default){if(hp(this),e.hasOwnProperty(qP))return e[qP](this);i=jv(i);let r,o=sl(this),s=Qr(void 0);try{if(!(i&Jt.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=E$(e)&&zv(e);u&&this.injectableDefInScope(u)?l=Xd(EE(e),dv):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let a=i&Jt.Self?DM():this.parent;return t=i&Jt.Optional&&t===au?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[_v]=a[_v]||[]).unshift(to(e)),o)throw a;return s$(a,e,"R3InjectorError",this.source)}else throw a}finally{Qr(s),sl(o)}}resolveInjectorInitializers(){let e=gn(null),t=sl(this),i=Qr(void 0),r;try{let o=this.get(uu,eo,Jt.Self);for(let s of o)s()}finally{sl(t),Qr(i),gn(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(to(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=dr(e);let t=ef(e)?e:dr(e&&e.provide),i=w$(e);if(!ef(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Xd(void 0,dv,!0),r.factory=()=>bE(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=gn(null);try{return t.value===YP?q4(to(e)):t.value===dv&&(t.value=YP,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&C$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{gn(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=dr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function EE(n){let e=zv(n),t=e!==null?e.factory:cu(n);if(t!==null)return t;if(n instanceof Ae)throw new Te(204,!1);if(n instanceof Function)return x$(n);throw new Te(204,!1)}function x$(n){if(n.length>0)throw new Te(204,!1);let t=q6(n);return t!==null?()=>t.factory(n):()=>new n}function w$(n){if(o3(n))return Xd(void 0,n.useValue);{let e=s3(n);return Xd(e,dv)}}function s3(n,e,t){let i;if(ef(n)){let r=dr(n);return cu(r)||EE(r)}else if(o3(n))i=()=>dr(n.useValue);else if(y$(n))i=()=>n.useFactory(...bE(n.deps||[]));else if(v$(n))i=(r,o)=>ze(dr(n.useExisting),o!==void 0&&o&Jt.Optional?Jt.Optional:void 0);else{let r=dr(n&&(n.useClass||n.provide));if(b$(n))i=()=>new r(...bE(n.deps));else return cu(r)||EE(r)}return i}function hp(n){if(n.destroyed)throw new Te(205,!1)}function Xd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function b$(n){return!!n.deps}function C$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function E$(n){return typeof n=="function"||typeof n=="object"&&n instanceof Ae}function ME(n,e){for(let t of n)Array.isArray(t)?ME(t,e):t&&$4(t)?ME(t.\u0275providers,e):e(t)}function Do(n,e){let t;n instanceof gp?(hp(n),t=n):t=new yv(n);let i,r=sl(t),o=Qr(void 0);try{return e()}finally{sl(r),Qr(o)}}function a3(){return X4()!==void 0||op()!=null}function AM(n){if(!a3())throw new Te(-203,!1)}function M$(n){return typeof n=="function"}var Io=0,Qt=1,$t=2,fr=3,Hs=4,so=5,js=6,bv=7,io=8,du=9,ul=10,oi=11,vp=12,ZP=13,lf=14,ro=15,fu=16,Yd=17,dl=18,$v=19,l3=20,cc=21,rE=22,Cv=23,rs=24,oE=25,Ni=26,c3=1,yp=6,fl=7,Ev=8,tf=9,no=10;function zs(n){return Array.isArray(n)&&typeof n[c3]=="object"}function Ra(n){return Array.isArray(n)&&n[c3]===!0}function RM(n){return(n.flags&4)!==0}function vu(n){return n.componentOffset>-1}function qv(n){return(n.flags&1)===1}function Ia(n){return!!n.template}function _p(n){return(n[$t]&512)!==0}function cf(n){return(n[$t]&256)===256}var SE=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function u3(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var Xi=(()=>{let n=()=>d3;return n.ngInherit=!0,n})();function d3(n){return n.type.prototype.ngOnChanges&&(n.setInput=T$),S$}function S$(){let n=h3(this),e=n?.current;if(e){let t=n.previous;if(t===Ta)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function T$(n,e,t,i,r){let o=this.declaredInputs[i],s=h3(n)||I$(n,{previous:Ta,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new SE(u&&u.currentValue,t,l===Ta),u3(n,e,r,t)}var f3="__ngSimpleChanges__";function h3(n){return n[f3]||null}function I$(n,e){return n[f3]=e}var KP=null;var ri=function(n,e=null,t){KP?.(n,e,t)},p3="svg",D$="math";function Gs(n){for(;Array.isArray(n);)n=n[Io];return n}function m3(n,e){return Gs(e[n])}function $s(n,e){return Gs(e[n.index])}function g3(n,e){return n.data[e]}function v3(n,e){return n[e]}function Da(n,e){let t=e[n];return zs(t)?t:t[Io]}function A$(n){return(n[$t]&4)===4}function PM(n){return(n[$t]&128)===128}function R$(n){return Ra(n[fr])}function nf(n,e){return e==null?null:n[e]}function y3(n){n[Yd]=0}function _3(n){n[$t]&1024||(n[$t]|=1024,PM(n)&&Yv(n))}function P$(n,e){for(;n>0;)e=e[lf],n--;return e}function Xv(n){return!!(n[$t]&9216||n[rs]?.dirty)}function TE(n){n[ul].changeDetectionScheduler?.notify(8),n[$t]&64&&(n[$t]|=1024),Xv(n)&&Yv(n)}function Yv(n){n[ul].changeDetectionScheduler?.notify(0);let e=hu(n);for(;e!==null&&!(e[$t]&8192||(e[$t]|=8192,!PM(e)));)e=hu(e)}function x3(n,e){if(cf(n))throw new Te(911,!1);n[cc]===null&&(n[cc]=[]),n[cc].push(e)}function O$(n,e){if(n[cc]===null)return;let t=n[cc].indexOf(e);t!==-1&&n[cc].splice(t,1)}function hu(n){let e=n[fr];return Ra(e)?e[fr]:e}function OM(n){return n[bv]??=[]}function NM(n){return n.cleanup??=[]}function N$(n,e,t,i){let r=OM(e);r.push(t),n.firstCreatePass&&NM(n).push(i,r.length-1)}var Xt={lFrame:T3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var IE=!1;function F$(){return Xt.lFrame.elementDepthCount}function L$(){Xt.lFrame.elementDepthCount++}function k$(){Xt.lFrame.elementDepthCount--}function FM(){return Xt.bindingsEnabled}function uf(){return Xt.skipHydrationRootTNode!==null}function U$(n){return Xt.skipHydrationRootTNode===n}function B$(n){Xt.skipHydrationRootTNode=n}function V$(){Xt.skipHydrationRootTNode=null}function dn(){return Xt.lFrame.lView}function Fi(){return Xt.lFrame.tView}function ke(n){return Xt.lFrame.contextLView=n,n[io]}function Ue(n){return Xt.lFrame.contextLView=null,n}function Lr(){let n=w3();for(;n!==null&&n.type===64;)n=n.parent;return n}function w3(){return Xt.lFrame.currentTNode}function H$(){let n=Xt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function yu(n,e){let t=Xt.lFrame;t.currentTNode=n,t.isParent=e}function LM(){return Xt.lFrame.isParent}function kM(){Xt.lFrame.isParent=!1}function z$(){return Xt.lFrame.contextLView}function b3(){return IE}function JP(n){let e=IE;return IE=n,e}function Zv(){let n=Xt.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function j$(n){return Xt.lFrame.bindingIndex=n}function Kv(){return Xt.lFrame.bindingIndex++}function C3(n){let e=Xt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function G$(){return Xt.lFrame.inI18n}function W$(n,e){let t=Xt.lFrame;t.bindingIndex=t.bindingRootIndex=n,DE(e)}function $$(){return Xt.lFrame.currentDirectiveIndex}function DE(n){Xt.lFrame.currentDirectiveIndex=n}function q$(n){let e=Xt.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function E3(){return Xt.lFrame.currentQueryIndex}function UM(n){Xt.lFrame.currentQueryIndex=n}function X$(n){let e=n[Qt];return e.type===2?e.declTNode:e.type===1?n[so]:null}function M3(n,e,t){if(t&Jt.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&Jt.Host);)if(r=X$(o),r===null||(o=o[lf],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Xt.lFrame=S3();return i.currentTNode=e,i.lView=n,!0}function BM(n){let e=S3(),t=n[Qt];Xt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function S3(){let n=Xt.lFrame,e=n===null?null:n.child;return e===null?T3(n):e}function T3(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function I3(){let n=Xt.lFrame;return Xt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var D3=I3;function VM(){let n=I3();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Y$(n){return(Xt.lFrame.contextLView=P$(n,Xt.lFrame.contextLView))[io]}function _u(){return Xt.lFrame.selectedIndex}function pu(n){Xt.lFrame.selectedIndex=n}function HM(){let n=Xt.lFrame;return g3(n.tView,n.selectedIndex)}function zM(){Xt.lFrame.currentNamespace=p3}function jM(){Z$()}function Z$(){Xt.lFrame.currentNamespace=null}function A3(){return Xt.lFrame.currentNamespace}var R3=!0;function Jv(){return R3}function fc(n){R3=n}function K$(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=d3(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function GM(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function fv(n,e,t){P3(n,e,3,t)}function hv(n,e,t,i){(n[$t]&3)===t&&P3(n,e,t,i)}function sE(n,e){let t=n[$t];(t&3)===e&&(t&=16383,t+=1,n[$t]=t)}function P3(n,e,t,i){let r=i!==void 0?n[Yd]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[Yd]+=65536),(a<o||o==-1)&&(J$(n,t,e,l),n[Yd]=(n[Yd]&4294901760)+l+2),l++}function QP(n,e){ri(4,n,e);let t=gn(null);try{e.call(n)}finally{gn(t),ri(5,n,e)}}function J$(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[$t]>>14<n[Yd]>>16&&(n[$t]&3)===e&&(n[$t]+=16384,QP(a,o)):QP(a,o)}var Kd=-1,mu=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function Q$(n){return(n.flags&8)!==0}function e7(n){return(n.flags&16)!==0}function t7(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];n7(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function O3(n){return n===3||n===4||n===6}function n7(n){return n.charCodeAt(0)===64}function rf(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?e4(n,t,r,null,e[++i]):e4(n,t,r,null,null))}}return n}function e4(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function N3(n){return n!==Kd}function Mv(n){return n&32767}function i7(n){return n>>16}function Sv(n,e){let t=i7(n),i=e;for(;t>0;)i=i[lf],t--;return i}var AE=!0;function Tv(n){let e=AE;return AE=n,e}var r7=256,F3=r7-1,L3=5,o7=0,Sa={};function s7(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(mp)&&(i=t[mp]),i==null&&(i=t[mp]=o7++);let r=i&F3,o=1<<r;e.data[n+(r>>L3)]|=o}function Iv(n,e){let t=k3(n,e);if(t!==-1)return t;let i=e[Qt];i.firstCreatePass&&(n.injectorIndex=e.length,aE(i.data,n),aE(e,null),aE(i.blueprint,null));let r=WM(n,e),o=n.injectorIndex;if(N3(r)){let s=Mv(r),a=Sv(r,e),l=a[Qt].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=r,o}function aE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function k3(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function WM(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=z3(r),i===null)return Kd;if(t++,r=r[lf],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Kd}function RE(n,e,t){s7(n,e,t)}function a7(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(O3(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function U3(n,e,t){if(t&Jt.Optional||n!==void 0)return n;SM(e,"NodeInjector")}function B3(n,e,t,i){if(t&Jt.Optional&&i===void 0&&(i=null),(t&(Jt.Self|Jt.Host))===0){let r=n[du],o=Qr(void 0);try{return r?r.get(e,i,t&Jt.Optional):Y4(e,i,t&Jt.Optional)}finally{Qr(o)}}return U3(i,e,t)}function V3(n,e,t,i=Jt.Default,r){if(n!==null){if(e[$t]&2048&&!(i&Jt.Self)){let s=d7(n,e,t,i,Sa);if(s!==Sa)return s}let o=H3(n,e,t,i,Sa);if(o!==Sa)return o}return B3(e,t,i,r)}function H3(n,e,t,i,r){let o=c7(t);if(typeof o=="function"){if(!M3(e,n,i))return i&Jt.Host?U3(r,t,i):B3(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&Jt.Optional))SM(t);else return s}finally{D3()}}else if(typeof o=="number"){let s=null,a=k3(n,e),l=Kd,u=i&Jt.Host?e[ro][so]:null;for((a===-1||i&Jt.SkipSelf)&&(l=a===-1?WM(n,e):e[a+8],l===Kd||!n4(i,!1)?a=-1:(s=e[Qt],a=Mv(l),e=Sv(l,e)));a!==-1;){let f=e[Qt];if(t4(o,a,f.data)){let h=l7(a,e,t,s,i,u);if(h!==Sa)return h}l=e[a+8],l!==Kd&&n4(i,e[Qt].data[a+8]===u)&&t4(o,a,e)?(s=f,a=Mv(l),e=Sv(l,e)):a=-1}}return r}function l7(n,e,t,i,r,o){let s=e[Qt],a=s.data[n+8],l=i==null?vu(a)&&AE:i!=s&&(a.type&3)!==0,u=r&Jt.Host&&o===a,f=pv(a,s,t,l,u);return f!==null?xp(e,s,f,a,r):Sa}function pv(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,h=i?a:a+f,p=r?a+f:u;for(let g=h;g<p;g++){let v=s[g];if(g<l&&t===v||g>=l&&v.type===t)return g}if(r){let g=s[l];if(g&&Ia(g)&&g.type===t)return l}return null}function xp(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof mu){let a=o;a.resolving&&q4(Q6(s[t]));let l=Tv(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?Qr(a.injectImpl):null,h=M3(n,i,Jt.Default);try{o=n[t]=a.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&K$(t,s[t],e)}finally{f!==null&&Qr(f),Tv(l),a.resolving=!1,D3()}}return o}function c7(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(mp)?n[mp]:void 0;return typeof e=="number"?e>=0?e&F3:u7:e}function t4(n,e,t){let i=1<<n;return!!(t[e+(n>>L3)]&i)}function n4(n,e){return!(n&Jt.Self)&&!(n&Jt.Host&&e)}var lu=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return V3(this._tNode,this._lView,e,jv(i),t)}};function u7(){return new lu(Lr(),dn())}function An(n){return Tp(()=>{let e=n.prototype.constructor,t=e[vv]||PE(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[vv]||PE(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function PE(n){return z4(n)?()=>{let e=PE(dr(n));return e&&e()}:cu(n)}function d7(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[$t]&2048&&!_p(s);){let a=H3(o,s,t,i|Jt.Self,Sa);if(a!==Sa)return a;let l=o.parent;if(!l){let u=s[l3];if(u){let f=u.get(t,Sa,i);if(f!==Sa)return f}l=z3(s),s=s[lf]}o=l}return r}function z3(n){let e=n[Qt],t=e.type;return t===2?e.declTNode:t===1?n[so]:null}function $M(n){return a7(Lr(),n)}function i4(n,e=null,t=null,i){let r=j3(n,e,t,i);return r.resolveInjectorInitializers(),r}function j3(n,e=null,t=null,i,r=new Set){let o=[t||eo,m$(n)];return i=i||(typeof n=="object"?void 0:to(n)),new gp(o,e||DM(),i||null,r)}var os=class n{static THROW_IF_NOT_FOUND=au;static NULL=new wv;static create(e,t){if(Array.isArray(e))return i4({name:""},t,e,"");{let i=e.name??"";return i4({name:i},e.parent,e.providers,i)}}static \u0275prov=Re({token:n,providedIn:"any",factory:()=>ze(Q4)});static __NG_ELEMENT_ID__=-1};var f7=new Ae("");f7.__NG_ELEMENT_ID__=n=>{let e=Lr();if(e===null)throw new Te(204,!1);if(e.type&2)return e.value;if(n&Jt.Optional)return null;throw new Te(204,!1)};var G3=!1,vl=(()=>{class n{static __NG_ELEMENT_ID__=h7;static __NG_ENV_ID__=t=>t}return n})(),OE=class extends vl{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return cf(t)?(e(),()=>{}):(x3(t,e),()=>O$(t,e))}};function h7(){return new OE(dn())}var wp=class{},qM=new Ae("",{providedIn:"root",factory:()=>!1});var W3=new Ae(""),$3=new Ae(""),yl=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Wn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Re({token:n,providedIn:"root",factory:()=>new n})}return n})();var NE=class extends On{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,a3()&&(this.destroyRef=Q(vl,{optional:!0})??void 0,this.pendingTasks=Q(yl,{optional:!0})??void 0)}emit(e){let t=gn(null);try{super.next(e)}finally{gn(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof di&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Un=NE;function Dv(...n){}function q3(n){let e,t;function i(){n=Dv;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function r4(n){return queueMicrotask(()=>n()),()=>{n=Dv}}var XM="isAngularZone",Av=XM+"_ID",p7=0,Kn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Un(!1);onMicrotaskEmpty=new Un(!1);onStable=new Un(!1);onError=new Un(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=G3}=e;if(typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,v7(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(XM)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Te(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,m7,Dv,Dv);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},m7={};function YM(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function g7(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){q3(()=>{n.callbackScheduled=!1,FE(n),n.isCheckStableRunning=!0,YM(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),FE(n)}function v7(n){let e=()=>{g7(n)},t=p7++;n._inner=n._inner.fork({name:"angular",properties:{[XM]:!0,[Av]:t,[Av+t]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(y7(l))return i.invokeTask(o,s,a,l);try{return o4(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),s4(n)}},onInvoke:(i,r,o,s,a,l,u)=>{try{return o4(n),i.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!_7(l)&&e(),s4(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,FE(n),YM(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function FE(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function o4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function s4(n){n._nesting--,YM(n)}var LE=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Un;onMicrotaskEmpty=new Un;onStable=new Un;onError=new Un;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function y7(n){return X3(n,"__ignore_ng_zone__")}function _7(n){return X3(n,"__scheduler_tick__")}function X3(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var hl=class{_console=console;handleError(e){this._console.error("ERROR",e)}},x7=new Ae("",{providedIn:"root",factory:()=>{let n=Q(Kn),e=Q(hl);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function a4(n,e){return V4(n,e)}function w7(n){return V4(B4,n)}var Y3=(a4.required=w7,a4);function b7(){return df(Lr(),dn())}function df(n,e){return new Yt($s(n,e))}var Yt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=b7}return n})();function C7(n){return n instanceof Yt?n.nativeElement:n}function Z3(n){return typeof n=="function"&&n[ts]!==void 0}function ss(n,e){let t=NC(n,e?.equal),i=t[ts];return t.set=r=>rp(i,r),t.update=r=>FC(i,r),t.asReadonly=E7.bind(t),t}function E7(){let n=this[ts];if(n.readonlyFn===void 0){let e=()=>this();e[ts]=n,n.readonlyFn=e}return n.readonlyFn}function K3(n){return Z3(n)&&typeof n.set=="function"}function M7(){return this._results[Symbol.iterator]()}var bp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new On}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=u$(e);(this._changesDetected=!c$(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=M7},S7="ngSkipHydration",T7="ngskiphydration";function J3(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let i=e[t];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===T7)return!0}return!1}function Q3(n){return n.hasAttribute(S7)}function Rv(n){return(n.flags&128)===128}function I7(n){if(Rv(n))return!0;let e=n.parent;for(;e;){if(Rv(n)||J3(e))return!0;e=e.parent}return!1}var eO=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(eO||{}),tO=new Map,D7=0;function A7(){return D7++}function R7(n){tO.set(n[$v],n)}function kE(n){tO.delete(n[$v])}var l4="__ngContext__";function ff(n,e){zs(e)?(n[l4]=e[$v],R7(e)):n[l4]=e}function nO(n){return rO(n[vp])}function iO(n){return rO(n[Hs])}function rO(n){for(;n!==null&&!Ra(n);)n=n[Hs];return n}var UE;function oO(n){UE=n}function Ap(){if(UE!==void 0)return UE;if(typeof document<"u")return document;throw new Te(210,!1)}var Rp=new Ae("",{providedIn:"root",factory:()=>P7}),P7="ng",ZM=new Ae(""),qs=new Ae("",{providedIn:"platform",factory:()=>"unknown"});var KM=new Ae(""),JM=new Ae("",{providedIn:"root",factory:()=>Ap().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function O7(){let n=new Pp;return n.store=N7(Ap(),Q(Rp)),n}var Pp=(()=>{class n{static \u0275prov=Re({token:n,providedIn:"root",factory:O7});store={};onSerializeCallbacks={};get(t,i){return this.store[t]!==void 0?this.store[t]:i}set(t,i){this.store[t]=i}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,i){this.onSerializeCallbacks[t]=i}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function N7(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var sO="h",aO="b",F7="f",L7="n",k7="e",U7="t",QM="c",lO="x",Pv="r",B7="i",V7="n",cO="d";var H7="di";var sv=new Ae(""),uO=!1,dO=new Ae("",{providedIn:"root",factory:()=>uO});var fO=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(fO||{}),Qv=new Ae(""),c4=new Set;function xu(n){c4.has(n)||(c4.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var z7=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Re({token:n,providedIn:"root",factory:()=>new n})}return n})();var j7="__nghData__",hO=j7;var lE="ngh",G7="nghm",pO=()=>null;function W7(n,e,t=!1){let i=n.getAttribute(lE);if(i==null)return null;let[r,o]=i.split("|");if(i=t?o:r,!i)return null;let s=o?`|${o}`:"",a=t?r:s,l={};if(i!==""){let f=e.get(Pp,null,{optional:!0});f!==null&&(l=f.get(hO,[])[Number(i)])}let u={data:l,firstChild:n.firstChild??null};return t&&(u.firstChild=n,ey(u,0,n.nextSibling)),a?n.setAttribute(lE,a):n.removeAttribute(lE),u}function $7(){pO=W7}function mO(n,e,t=!1){return pO(n,e,t)}function q7(n){let e=n._lView;return e[Qt].type===2?null:(_p(e)&&(e=e[Ni]),e)}function X7(n){return n.textContent?.replace(/\s/gm,"")}function Y7(n){let e=Ap(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=X7(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=t.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function ey(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function BE(n,e){return n.segmentHeads?.[e]??null}function Z7(n,e){let t=n.data,i=t[k7]?.[e]??null;return i===null&&t[QM]?.[e]&&(i=eS(n,e)),i}function gO(n,e){return n.data[QM]?.[e]??null}function eS(n,e){let t=gO(n,e)??[],i=0;for(let r of t)i+=r[Pv]*(r[lO]??1);return i}function K7(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[cO];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Op(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[cO];n.disconnectedNodes=t?new Set(t):null}return!!K7(n)?.has(e)}function cE(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===G7}function u4(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function J7(n){for(let i of n.body.childNodes)if(cE(i))return;let e=u4(n.body.previousSibling);if(cE(e))return;let t=u4(n.head.lastChild);if(!cE(t))throw new Te(-507,!1)}function vO(n,e){let t=n.contentQueries;if(t!==null){let i=gn(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];UM(o),a.contentQueries(2,e[s],s)}}}finally{gn(i)}}}function VE(n,e,t){UM(0);let i=gn(null);try{e(n,t)}finally{gn(i)}}function tS(n,e,t){if(RM(e)){let i=gn(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{gn(i)}}}var Aa=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Aa||{}),av;function Q7(){if(av===void 0&&(av=null,Jd.trustedTypes))try{av=Jd.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return av}function ty(n){return Q7()?.createHTML(n)||n}var lv;function yO(){if(lv===void 0&&(lv=null,Jd.trustedTypes))try{lv=Jd.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return lv}function d4(n){return yO()?.createHTML(n)||n}function f4(n){return yO()?.createScriptURL(n)||n}var pl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${U4})`}},HE=class extends pl{getTypeName(){return"HTML"}},zE=class extends pl{getTypeName(){return"Style"}},jE=class extends pl{getTypeName(){return"Script"}},GE=class extends pl{getTypeName(){return"URL"}},WE=class extends pl{getTypeName(){return"ResourceURL"}};function as(n){return n instanceof pl?n.changingThisBreaksApplicationSecurity:n}function _l(n,e){let t=e9(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${U4})`)}return t===e}function e9(n){return n instanceof pl&&n.getTypeName()||null}function _O(n){return new HE(n)}function xO(n){return new zE(n)}function wO(n){return new jE(n)}function bO(n){return new GE(n)}function CO(n){return new WE(n)}function t9(n){let e=new qE(n);return n9()?new $E(e):e}var $E=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(ty(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},qE=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=ty(e),t}};function n9(){try{return!!new window.DOMParser().parseFromString(ty(""),"text/html")}catch{return!1}}var i9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ny(n){return n=String(n),n.match(i9)?n:"unsafe:"+n}function xl(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Np(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var EO=xl("area,br,col,hr,img,wbr"),MO=xl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),SO=xl("rp,rt"),r9=Np(SO,MO),o9=Np(MO,xl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),s9=Np(SO,xl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),h4=Np(EO,o9,s9,r9),TO=xl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),a9=xl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),l9=xl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),c9=Np(TO,a9,l9),u9=xl("script,style,template"),XE=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=h9(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=f9(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=p4(e).toLowerCase();if(!h4.hasOwnProperty(t))return this.sanitizedSomething=!0,!u9.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!c9.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;TO[a]&&(l=ny(l)),this.buf.push(" ",s,'="',m4(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=p4(e).toLowerCase();h4.hasOwnProperty(t)&&!EO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(m4(e))}};function d9(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function f9(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw IO(e);return e}function h9(n){let e=n.firstChild;if(e&&d9(n,e))throw IO(e);return e}function p4(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function IO(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var p9=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m9=/([^\#-~ |!])/g;function m4(n){return n.replace(/&/g,"&amp;").replace(p9,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(m9,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var cv;function nS(n,e){let t=null;try{cv=cv||t9(n);let i=e?String(e):"";t=cv.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=cv.getInertBodyElement(i)}while(i!==o);let a=new XE().sanitizeChildren(g4(t)||t);return ty(a)}finally{if(t){let i=g4(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function g4(n){return"content"in n&&g9(n)?n.content:null}function g9(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Xs=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Xs||{});function DO(n){let e=iS();return e?d4(e.sanitize(Xs.HTML,n)||""):_l(n,"HTML")?d4(as(n)):nS(Ap(),Ip(n))}function Mr(n){let e=iS();return e?e.sanitize(Xs.URL,n)||"":_l(n,"URL")?as(n):ny(Ip(n))}function v9(n){let e=iS();if(e)return f4(e.sanitize(Xs.RESOURCE_URL,n)||"");if(_l(n,"ResourceURL"))return f4(as(n));throw new Te(904,!1)}function y9(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?v9:Mr}function AO(n,e,t){return y9(e,t)(n)}function iS(){let n=dn();return n&&n[ul].sanitizer}var _9=/^>|^->|<!--|-->|--!>|<!-$/g,x9=/(<|>)/g,w9="\u200B$1\u200B";function b9(n){return n.replace(_9,e=>e.replace(x9,w9))}function Ao(n){return n.ownerDocument.defaultView}function kr(n){return n.ownerDocument}function C9(n){return n.ownerDocument.body}function RO(n){return n instanceof Function?n():n}function E9(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var PO="ng-template";function M9(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&E9(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(rS(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function rS(n){return n.type===4&&n.value!==PO}function S9(n,e,t){let i=n.type===4&&!t?PO:n.value;return e===i}function T9(n,e,t){let i=4,r=n.attrs,o=r!==null?A9(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Vs(i)&&!Vs(l))return!1;if(s&&Vs(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!S9(n,l,t)||l===""&&e.length===1){if(Vs(i))return!1;s=!0}}else if(i&8){if(r===null||!M9(n,r,l,t)){if(Vs(i))return!1;s=!0}}else{let u=e[++a],f=I9(l,r,rS(n),t);if(f===-1){if(Vs(i))return!1;s=!0;continue}if(u!==""){let h;if(f>o?h="":h=r[f+1].toLowerCase(),i&2&&u!==h){if(Vs(i))return!1;s=!0}}}}return Vs(i)||s}function Vs(n){return(n&1)===0}function I9(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return R9(e,n)}function OO(n,e,t=!1){for(let i=0;i<e.length;i++)if(T9(n,e[i],t))return!0;return!1}function D9(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function A9(n){for(let e=0;e<n.length;e++){let t=n[e];if(O3(t))return e}return n.length}function R9(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function P9(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function v4(n,e){return n?":not("+e.trim()+")":e}function O9(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Vs(s)&&(e+=v4(o,r),r=""),i=s,o=o||!Vs(i);t++}return r!==""&&(e+=v4(o,r)),e}function N9(n){return n.map(O9).join(",")}function F9(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!Vs(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var Pa={};function NO(n,e){return n.createText(e)}function L9(n,e,t){n.setValue(e,t)}function FO(n,e){return n.createComment(b9(e))}function oS(n,e,t){return n.createElement(e,t)}function Ov(n,e,t,i,r){n.insertBefore(e,t,i,r)}function LO(n,e,t){n.appendChild(e,t)}function y4(n,e,t,i,r){i!==null?Ov(n,e,t,i,r):LO(n,e,t)}function sS(n,e,t){n.removeChild(null,e,t)}function kO(n){n.textContent=""}function k9(n,e,t){n.setAttribute(e,"style",t)}function U9(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function UO(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&t7(n,e,i),r!==null&&U9(n,e,r),o!==null&&k9(n,e,o)}function aS(n,e,t,i,r,o,s,a,l,u,f){let h=Ni+i,p=h+r,g=B9(h,p),v=typeof u=="function"?u():u;return g[Qt]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:f}}function B9(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Pa);return t}function V9(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=aS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function lS(n,e,t,i,r,o,s,a,l,u,f){let h=e.blueprint.slice();return h[Io]=r,h[$t]=i|4|128|8|64|1024,(u!==null||n&&n[$t]&2048)&&(h[$t]|=2048),y3(h),h[fr]=h[lf]=n,h[io]=t,h[ul]=s||n&&n[ul],h[oi]=a||n&&n[oi],h[du]=l||n&&n[du]||null,h[so]=o,h[$v]=A7(),h[js]=f,h[l3]=u,h[ro]=e.type==2?n[ro]:h,h}function H9(n,e,t){let i=$s(e,n),r=V9(t),o=n[ul].rendererFactory,s=cS(n,lS(n,r,null,BO(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function BO(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function VO(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function cS(n,e){return n[vp]?n[ZP][Hs]=e:n[vp]=e,n[ZP]=e,e}function H(n=1){HO(Fi(),dn(),_u()+n,!1)}function HO(n,e,t,i){if(!i)if((e[$t]&3)===3){let o=n.preOrderCheckHooks;o!==null&&fv(e,o,t)}else{let o=n.preOrderHooks;o!==null&&hv(e,o,0,t)}pu(t)}var iy=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(iy||{});function YE(n,e,t,i){let r=gn(null);try{let[o,s,a]=n.inputs[t],l=null;(s&iy.SignalBased)!==0&&(l=e[o][ts]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,o):u3(e,l,o,i)}finally{gn(r)}}function zO(n,e,t,i,r){let o=_u(),s=i&2;try{pu(-1),s&&e.length>Ni&&HO(n,e,Ni,!1),ri(s?2:0,r),t(i,r)}finally{pu(o),ri(s?3:1,r)}}function ry(n,e,t){X9(n,e,t),(t.flags&64)===64&&Y9(n,e,t)}function uS(n,e,t=$s){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function z9(n,e,t,i){let o=i.get(dO,uO)||t===Aa.ShadowDom,s=n.selectRootElement(e,o);return j9(s),s}function j9(n){jO(n)}var jO=()=>null;function G9(n){Q3(n)?kO(n):Y7(n)}function W9(){jO=G9}function $9(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function GO(n,e,t,i,r,o,s,a){if(!a&&fS(e,n,t,i,r)){vu(e)&&q9(t,e.index);return}if(e.type&3){let l=$s(e,t);i=$9(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(l,i,r)}else e.type&12}function q9(n,e){let t=Da(e,n);t[$t]&16||(t[$t]|=64)}function X9(n,e,t){let i=t.directiveStart,r=t.directiveEnd;vu(t)&&H9(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Iv(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],l=xp(e,n,s,t);if(ff(l,e),o!==null&&Q9(e,s-i,l,a,t,o),Ia(a)){let u=Da(t.index,e);u[io]=xp(e,n,s,t)}}}function Y9(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=$$();try{pu(o);for(let a=i;a<r;a++){let l=n.data[a],u=e[a];DE(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Z9(l,u)}}finally{pu(-1),DE(s)}}function Z9(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function dS(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];OO(e,o.selectors,!1)&&(i??=[],Ia(o)?i.unshift(o):i.push(o))}return i}function K9(n,e,t,i,r,o){let s=$s(n,e);J9(e[oi],s,o,n.value,t,i,r)}function J9(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?Ip(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function Q9(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];YE(i,t,l,u)}}function eq(n,e){let t=n[du],i=t?t.get(hl,null):null;i&&i.handleError(e)}function fS(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],h=e.data[u];YE(h,t[u],f,r),a=!0}if(o)for(let l of o){let u=t[l],f=e.data[l];YE(f,u,i,r),a=!0}return a}function tq(n,e){let t=Da(e,n),i=t[Qt];nq(i,t);let r=t[Io];r!==null&&t[js]===null&&(t[js]=mO(r,t[du])),ri(18),hS(i,t,t[io]),ri(19,t[io])}function nq(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function hS(n,e,t){BM(e);try{let i=n.viewQuery;i!==null&&VE(1,i,t);let r=n.template;r!==null&&zO(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[dl]?.finishViewCreation(n),n.staticContentQueries&&vO(n,e),n.staticViewQueries&&VE(2,n.viewQuery,t);let o=n.components;o!==null&&iq(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[$t]&=-5,VM()}}function iq(n,e){for(let t=0;t<e.length;t++)tq(n,e[t])}function WO(n,e,t,i){let r=gn(null);try{let o=e.tView,a=n[$t]&4096?4096:16,l=lS(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[e.index];l[fu]=u;let f=n[dl];return f!==null&&(l[dl]=f.createEmbeddedView(o)),hS(o,l,t),l}finally{gn(r)}}function ZE(n,e){return!e||e.firstChild===null||Rv(n)}var rq;function pS(n,e){return rq(n,e)}var ml=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ml||{});function wu(n){return(n.flags&32)===32}function Zd(n,e,t,i,r){if(i!=null){let o,s=!1;Ra(i)?o=i:zs(i)&&(s=!0,i=i[Io]);let a=Gs(i);n===0&&t!==null?r==null?LO(e,t,a):Ov(e,t,a,r||null,!0):n===1&&t!==null?Ov(e,t,a,r||null,!0):n===2?sS(e,a,s):n===3&&e.destroyNode(a),o!=null&&pq(e,n,o,t,r)}}function oq(n,e){$O(n,e),e[Io]=null,e[so]=null}function sq(n,e,t,i,r,o){i[Io]=r,i[so]=e,sy(n,i,t,1,r,o)}function $O(n,e){e[ul].changeDetectionScheduler?.notify(9),sy(n,e,e[oi],2,null,null)}function aq(n){let e=n[vp];if(!e)return uE(n[Qt],n);for(;e;){let t=null;if(zs(e))t=e[vp];else{let i=e[no];i&&(t=i)}if(!t){for(;e&&!e[Hs]&&e!==n;)zs(e)&&uE(e[Qt],e),e=e[fr];e===null&&(e=n),zs(e)&&uE(e[Qt],e),t=e&&e[Hs]}e=t}}function mS(n,e){let t=n[tf],i=t.indexOf(e);t.splice(i,1)}function qO(n,e){if(cf(e))return;let t=e[oi];t.destroyNode&&sy(n,e,t,3,null,null),aq(e)}function uE(n,e){if(cf(e))return;let t=gn(null);try{e[$t]&=-129,e[$t]|=256,e[rs]&&RC(e[rs]),cq(n,e),lq(n,e),e[Qt].type===1&&e[oi].destroy();let i=e[fu];if(i!==null&&Ra(e[fr])){i!==e[fr]&&mS(i,e);let r=e[dl];r!==null&&r.detachView(n)}kE(e)}finally{gn(t)}}function lq(n,e){let t=n.cleanup,i=e[bv];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[bv]=null);let r=e[cc];if(r!==null){e[cc]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[Cv];if(o!==null){e[Cv]=null;for(let s of o)s.destroy()}}function cq(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof mu)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];ri(4,a,l);try{l.call(a)}finally{ri(5,a,l)}}else{ri(4,r,o);try{o.call(r)}finally{ri(5,r,o)}}}}}function XO(n,e,t){return uq(n,e.parent,t)}function uq(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Io];if(vu(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Aa.None||r===Aa.Emulated)return null}return $s(i,t)}function YO(n,e,t){return fq(n,e,t)}function dq(n,e,t){return n.type&40?$s(n,t):null}var fq=dq,_4;function oy(n,e,t,i){let r=XO(n,i,e),o=e[oi],s=i.parent||e[so],a=YO(s,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)y4(o,r,t[l],a,!1);else y4(o,r,t,a,!1);_4!==void 0&&_4(o,i,e,t,r)}function pp(n,e){if(e!==null){let t=e.type;if(t&3)return $s(e,n);if(t&4)return KE(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return pp(n,i);{let r=n[e.index];return Ra(r)?KE(-1,r):Gs(r)}}else{if(t&128)return pp(n,e.next);if(t&32)return pS(e,n)()||Gs(n[e.index]);{let i=ZO(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=hu(n[ro]);return pp(r,i)}else return pp(n,e.next)}}}return null}function ZO(n,e){if(e!==null){let i=n[ro][so],r=e.projection;return i.projection[r]}return null}function KE(n,e){let t=no+n+1;if(t<e.length){let i=e[t],r=i[Qt].firstChild;if(r!==null)return pp(i,r)}return e[fl]}function gS(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(s&&e===0&&(a&&ff(Gs(a),i),t.flags|=2),!wu(t))if(l&8)gS(n,e,t.child,i,r,o,!1),Zd(e,n,r,a,o);else if(l&32){let u=pS(t,i),f;for(;f=u();)Zd(e,n,r,f,o);Zd(e,n,r,a,o)}else l&16?KO(n,e,i,t,r,o):Zd(e,n,r,a,o);t=s?t.projectionNext:t.next}}function sy(n,e,t,i,r,o){gS(t,i,n.firstChild,e,r,o,!1)}function hq(n,e,t){let i=e[oi],r=XO(n,t,e),o=t.parent||e[so],s=YO(o,t,e);KO(i,0,e,t,r,s)}function KO(n,e,t,i,r,o){let s=t[ro],l=s[so].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];Zd(e,n,r,f,o)}else{let u=l,f=s[fr];Rv(i)&&(u.flags|=128),gS(n,e,u,f,r,o,!0)}}function pq(n,e,t,i,r){let o=t[fl],s=Gs(t);o!==s&&Zd(e,n,i,o,r);for(let a=no;a<t.length;a++){let l=t[a];sy(l[Qt],l,n,e,i,o)}}function mq(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:ml.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ml.Important),n.setStyle(t,i,r,o))}}function Nv(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(Gs(o)),Ra(o)&&gq(o,i);let s=t.type;if(s&8)Nv(n,e,t.child,i);else if(s&32){let a=pS(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=ZO(e,t);if(Array.isArray(a))i.push(...a);else{let l=hu(e[ro]);Nv(l[Qt],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function gq(n,e){for(let t=no;t<n.length;t++){let i=n[t],r=i[Qt].firstChild;r!==null&&Nv(i[Qt],i,r,e)}n[fl]!==n[Io]&&e.push(n[fl])}function JO(n){if(n[oE]!==null){for(let e of n[oE])e.impl.addSequence(e);n[oE].length=0}}var QO=[];function vq(n){return n[rs]??yq(n)}function yq(n){let e=QO.pop()??Object.create(xq);return e.lView=n,e}function _q(n){n.lView[rs]!==n&&(n.lView=null,QO.push(n))}var xq=Ct(Ne({},np),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Yv(n.lView)},consumerOnSignalRead(){this.lView[rs]=this}});function wq(n){let e=n[rs]??Object.create(bq);return e.lView=n,e}var bq=Ct(Ne({},np),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=hu(n.lView);for(;e&&!eN(e[Qt]);)e=hu(e);e&&_3(e)},consumerOnSignalRead(){this.lView[rs]=this}});function eN(n){return n.type!==2}function tN(n){if(n[Cv]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Cv])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[$t]&8192)}}var Cq=100;function nN(n,e=!0,t=0){let r=n[ul].rendererFactory,o=!1;o||r.begin?.();try{Eq(n,t)}catch(s){throw e&&eq(n,s),s}finally{o||r.end?.()}}function Eq(n,e){let t=b3();try{JP(!0),JE(n,e);let i=0;for(;Xv(n);){if(i===Cq)throw new Te(103,!1);i++,JE(n,1)}}finally{JP(t)}}function Mq(n,e,t,i){if(cf(e))return;let r=e[$t],o=!1,s=!1;BM(e);let a=!0,l=null,u=null;o||(eN(n)?(u=vq(e),l=I0(u)):MC()===null?(a=!1,u=wq(e),l=I0(u)):e[rs]&&(RC(e[rs]),e[rs]=null));try{y3(e),j$(n.bindingStartIndex),t!==null&&zO(n,e,t,2,i);let f=(r&3)===3;if(!o)if(f){let g=n.preOrderCheckHooks;g!==null&&fv(e,g,null)}else{let g=n.preOrderHooks;g!==null&&hv(e,g,0,null),sE(e,0)}if(s||Sq(e),tN(e),iN(e,0),n.contentQueries!==null&&vO(n,e),!o)if(f){let g=n.contentCheckHooks;g!==null&&fv(e,g)}else{let g=n.contentHooks;g!==null&&hv(e,g,1),sE(e,1)}Iq(n,e);let h=n.components;h!==null&&oN(e,h,0);let p=n.viewQuery;if(p!==null&&VE(2,p,i),!o)if(f){let g=n.viewCheckHooks;g!==null&&fv(e,g)}else{let g=n.viewHooks;g!==null&&hv(e,g,2),sE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[rE]){for(let g of e[rE])g();e[rE]=null}o||(JO(e),e[$t]&=-73)}catch(f){throw o||Yv(e),f}finally{u!==null&&(DC(u,l),a&&_q(u)),VM()}}function iN(n,e){for(let t=nO(n);t!==null;t=iO(t))for(let i=no;i<t.length;i++){let r=t[i];rN(r,e)}}function Sq(n){for(let e=nO(n);e!==null;e=iO(e)){if(!(e[$t]&2))continue;let t=e[tf];for(let i=0;i<t.length;i++){let r=t[i];_3(r)}}}function Tq(n,e,t){ri(18);let i=Da(e,n);rN(i,t),ri(19,i[io])}function rN(n,e){PM(n)&&JE(n,e)}function JE(n,e){let i=n[Qt],r=n[$t],o=n[rs],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&AC(o)),s||=!1,o&&(o.dirty=!1),n[$t]&=-9217,s)Mq(i,n,i.template,n[io]);else if(r&8192){tN(n),iN(n,1);let a=i.components;a!==null&&oN(n,a,1),JO(n)}}function oN(n,e,t){for(let i=0;i<e.length;i++)Tq(n,e[i],t)}function Iq(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)pu(~r);else{let o=r,s=t[++i],a=t[++i];W$(s,o);let l=e[o];ri(24,l),a(2,l),ri(25,l)}}}finally{pu(-1)}}function vS(n,e){let t=b3()?64:1088;for(n[ul].changeDetectionScheduler?.notify(e);n;){n[$t]|=t;let i=hu(n);if(_p(n)&&!i)return n;n=i}return null}function sN(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function aN(n,e,t,i=!0){let r=e[Qt];if(Dq(r,e,n,t),i){let s=KE(t,n),a=e[oi],l=a.parentNode(n[fl]);l!==null&&sq(r,n[so],a,e,l,s)}let o=e[js];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function QE(n,e){if(n.length<=no)return;let t=no+e,i=n[t];if(i){let r=i[fu];r!==null&&r!==n&&mS(r,i),e>0&&(n[t-1][Hs]=i[Hs]);let o=xv(n,no+e);oq(i[Qt],i);let s=o[dl];s!==null&&s.detachView(o[Qt]),i[fr]=null,i[Hs]=null,i[$t]&=-129}return i}function Dq(n,e,t,i){let r=no+i,o=t.length;i>0&&(t[r-1][Hs]=e),i<o-no?(e[Hs]=t[r],J4(t,no+i,e)):(t.push(e),e[Hs]=null),e[fr]=t;let s=e[fu];s!==null&&t!==s&&lN(s,e);let a=e[dl];a!==null&&a.insertView(n),TE(e),e[$t]|=128}function lN(n,e){let t=n[tf],i=e[fr];if(zs(i))n[$t]|=2;else{let r=i[fr][ro];e[ro]!==r&&(n[$t]|=2)}t===null?n[tf]=[e]:t.push(e)}var Cp=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Qt];return Nv(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[io]}set context(e){this._lView[io]=e}get destroyed(){return cf(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[fr];if(Ra(e)){let t=e[Ev],i=t?t.indexOf(this):-1;i>-1&&(QE(e,i),xv(t,i))}this._attachedToViewContainer=!1}qO(this._lView[Qt],this._lView)}onDestroy(e){x3(this._lView,e)}markForCheck(){vS(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$t]&=-129}reattach(){TE(this._lView),this._lView[$t]|=128}detectChanges(){this._lView[$t]|=1024,nN(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=_p(this._lView),t=this._lView[fu];t!==null&&!e&&mS(t,this._lView),$O(this._lView[Qt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=e;let t=_p(this._lView),i=this._lView[fu];i!==null&&!t&&lN(i,this._lView),TE(this._lView)}};var Er=(()=>{class n{static __NG_ELEMENT_ID__=Pq}return n})(),Aq=Er,Rq=class extends Aq{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=WO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Cp(r)}};function Pq(){return ay(Lr(),dn())}function ay(n,e){return n.type&4?new Rq(e,n,df(n,e)):null}function Fp(n,e,t,i,r){let o=n.data[e];if(o===null)o=Oq(n,e,t,i,r),G$()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=H$();o.injectorIndex=s===null?-1:s.injectorIndex}return yu(o,!0),o}function Oq(n,e,t,i,r){let o=w3(),s=LM(),a=s?o:o&&o.parent,l=n.data[e]=Fq(n,a,t,e,i,r);return Nq(n,l,o,s),l}function Nq(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Fq(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return uf()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Lq=new RegExp(`^(\\d+)*(${aO}|${sO})*(.*)`);function kq(n){let e=n.match(Lq),[t,i,r,o]=e,s=i?parseInt(i,10):r,a=[];for(let[l,u,f]of o.matchAll(/(f|n)(\d*)/g)){let h=parseInt(f,10)||1;a.push(u,h)}return[s,...a]}function Uq(n){return!n.prev&&n.parent?.type===8}function dE(n){return n.index-Ni}function Bq(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function ly(n,e,t,i){let r=dE(i),o=Bq(n,r);if(o===void 0){let s=n.data[V7];if(s?.[r])o=Hq(s[r],t);else if(e.firstChild===i)o=n.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(Uq(i)){let u=dE(i.parent);o=BE(n,u)}else{let u=$s(l,t);if(a)o=u.firstChild;else{let f=dE(l),h=BE(n,f);if(l.type===2&&h){let g=eS(n,f)+1;o=cy(g,h)}else o=u.nextSibling}}}}return o}function cy(n,e){let t=e;for(let i=0;i<n;i++)t=t.nextSibling;return t}function Vq(n,e){let t=n;for(let i=0;i<e.length;i+=2){let r=e[i],o=e[i+1];for(let s=0;s<o;s++)switch(r){case F7:t=t.firstChild;break;case L7:t=t.nextSibling;break}}return t}function Hq(n,e){let[t,...i]=kq(n),r;if(t===sO)r=e[ro][Io];else if(t===aO)r=C9(e[ro][Io]);else{let o=Number(t);r=Gs(e[o+Ni])}return Vq(r,i)}var zq=!1;function jq(n){zq=n}function Gq(n){let e=n[js];if(e){let{i18nNodes:t,dehydratedIcuData:i}=e;if(t&&i){let r=n[oi];for(let o of i.values())Wq(r,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function Wq(n,e,t){for(let i of t.node.cases[t.case]){let r=e.get(i.index-Ni);r&&sS(n,r,!1)}}function cN(n){let e=n[yp]??[],i=n[fr][oi],r=[];for(let o of e)o.data[H7]!==void 0?r.push(o):$q(o,i);n[yp]=r}function $q(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[Pv];for(;t<r;){let o=i.nextSibling;sS(e,i,!1),i=o,t++}}}function uN(n){cN(n);let e=n[Io];zs(e)&&Fv(e);for(let t=no;t<n.length;t++)Fv(n[t])}function Fv(n){Gq(n);let e=n[Qt];for(let t=Ni;t<e.bindingStartIndex;t++)if(Ra(n[t])){let i=n[t];uN(i)}else zs(n[t])&&Fv(n[t])}function qq(n){let e=n._views;for(let t of e){let i=q7(t);i!==null&&i[Io]!==null&&(zs(i)?Fv(i):uN(i))}}function Xq(n,e){let t=[];for(let i of e)for(let r=0;r<(i[lO]??1);r++){let o={data:i,firstChild:null};i[Pv]>0&&(o.firstChild=n,n=cy(i[Pv],n)),t.push(o)}return[n,t]}var dN=()=>null;function Yq(n,e){let t=n[yp];return!e||t===null||t.length===0?null:t[0].data[B7]===e?t.shift():(cN(n),null)}function Zq(){dN=Yq}function eM(n,e){return dN(n,e)}var Kq=class{},fN=class{},tM=class{resolveComponentFactory(e){throw Error(`No component factory found for ${to(e)}.`)}},uy=class{static NULL=new tM},uc=class{},Sr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Jq()}return n})();function Jq(){let n=dn(),e=Lr(),t=Da(e.index,n);return(zs(t)?t:n)[oi]}var Qq=(()=>{class n{static \u0275prov=Re({token:n,providedIn:"root",factory:()=>null})}return n})();var fE={},nM=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=jv(i);let r=this.injector.get(e,fE,i);return r!==fE||t===fE?r:this.parentInjector.get(e,t,i)}};function iM(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=_E(r,a);else if(o==2){let l=a,u=e[++s];i=_E(i,l+": "+u+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function ue(n,e=Jt.Default){let t=dn();if(t===null)return ze(n,e);let i=Lr();return V3(i,t,dr(n),e)}function yS(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a,l=null,u=null,f=tX(s);f===null?a=s:[a,l,u]=f,rX(n,e,t,a,o,l,u)}o!==null&&i!==null&&eX(t,i,o)}function eX(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new Te(-301,!1);i.push(e[r],o)}}function tX(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Ia(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let i=null,r=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,nX(s,i,o,r)),s===e&&(i??=[],i.push(s));return i!==null?(i.push(...e===null?n:n.slice(1)),[i,r,o]):null}function nX(n,e,t,i){let r=e.length;n.findHostDirectiveDefs(n,e,i),t.set(n,[r,e.length-1])}function iX(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function rX(n,e,t,i,r,o,s){let a=i.length,l=!1;for(let p=0;p<a;p++){let g=i[p];!l&&Ia(g)&&(l=!0,iX(n,t,p)),RE(Iv(t,e),n,g.type)}uX(t,n.data.length,a);for(let p=0;p<a;p++){let g=i[p];g.providersResolver&&g.providersResolver(g)}let u=!1,f=!1,h=VO(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let g=i[p];if(t.mergedAttrs=rf(t.mergedAttrs,g.hostAttrs),sX(n,t,e,h,g),cX(h,g,r),s!==null&&s.has(g)){let[w,y]=s.get(g);t.directiveToIndex.set(g.type,[h,w+t.directiveStart,y+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let v=g.type.prototype;!u&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),h++}oX(n,t,o)}function oX(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))x4(0,e,r,i),x4(1,e,r,i),b4(e,i,!1);else{let o=t.get(r);w4(0,e,o,i),w4(1,e,o,i),b4(e,i,!0)}}}function x4(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),hN(e,o)}}function w4(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),hN(e,s)}}function hN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function b4(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||rS(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let u=r[l];for(let f of u)if(f===e){s??=[],s.push(l,i[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function sX(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=cu(r.type,!0)),s=new mu(o,Ia(r),ue);n.blueprint[i]=s,t[i]=s,aX(n,e,i,VO(n,t,r.hostVars,Pa),r)}function aX(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;lX(s)!=a&&s.push(a),s.push(t,i,o)}}function lX(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function cX(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ia(e)&&(t[""]=n)}}function uX(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function pN(n,e,t,i,r,o,s,a){let l=e.consts,u=nf(l,s),f=Fp(e,n,2,i,u);return o&&yS(e,t,f,nf(l,a),r),f.mergedAttrs=rf(f.mergedAttrs,f.attrs),f.attrs!==null&&iM(f,f.attrs,!1),f.mergedAttrs!==null&&iM(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function mN(n,e){GM(n,e),RM(e)&&n.queries.elementEnd(e)}var Lv=class extends uy{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Qd(e);return new Ep(t,this.ngModule)}};function dX(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&iy.SignalBased)!==0};return r&&(o.transform=r),o})}function fX(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function hX(n,e,t){let i=e instanceof Cr?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new nM(t,i):t}function pX(n){let e=n.get(uc,null);if(e===null)throw new Te(407,!1);let t=n.get(Qq,null),i=n.get(wp,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i}}function mX(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return oS(e,t,t==="svg"?p3:t==="math"?D$:null)}var Ep=class extends fN{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=dX(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=fX(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=N9(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){ri(22);let o=gn(null);try{let s=this.componentDef,a=i?["ng-version","19.2.10"]:F9(this.componentDef.selectors[0]),l=aS(0,null,null,1,0,null,null,null,null,[a],null),u=hX(s,r||this.ngModule,e),f=pX(u),h=f.rendererFactory.createRenderer(null,s),p=i?z9(h,i,s.encapsulation,u):mX(s,h),g=lS(null,l,null,512|BO(s),null,null,f,h,u,null,mO(p,u,!0));g[Ni]=p,BM(g);let v=null;try{let w=pN(Ni,l,g,"#host",()=>[this.componentDef],!0,0);p&&(UO(h,p,w),ff(p,g)),ry(l,g,w),tS(l,w,g),mN(l,w),t!==void 0&&gX(w,this.ngContentSelectors,t),v=Da(w.index,g),g[io]=v[io],hS(l,g,null)}catch(w){throw v!==null&&kE(v),kE(g),w}finally{ri(23),VM()}return new rM(this.componentType,g)}finally{gn(o)}}},rM=class extends Kq{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=g3(t[Qt],Ni),this.location=df(this._tNode,t),this.instance=Da(this._tNode.index,t)[io],this.hostView=this.changeDetectorRef=new Cp(t,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=fS(i,r[Qt],r,e,t);this.previousInputValues.set(e,t);let s=Da(i.index,r);vS(s,1)}get injector(){return new lu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function gX(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Oa=(()=>{class n{static __NG_ELEMENT_ID__=vX}return n})();function vX(){let n=Lr();return vN(n,dn())}var yX=Oa,gN=class extends yX{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return df(this._hostTNode,this._hostLView)}get injector(){return new lu(this._hostTNode,this._hostLView)}get parentInjector(){let e=WM(this._hostTNode,this._hostLView);if(N3(e)){let t=Sv(e,this._hostLView),i=Mv(e),r=t[Qt].data[i+8];return new lu(r,t)}else return new lu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=C4(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-no}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=eM(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,ZE(this._hostTNode,s)),a}createComponent(e,t,i,r,o){let s=e&&!M$(e),a;if(s)a=t;else{let v=t||{};a=v.index,i=v.injector,r=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let l=s?e:new Ep(Qd(e)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let w=(s?u:this.parentInjector).get(Cr,null);w&&(o=w)}let f=Qd(l.componentType??{}),h=eM(this._lContainer,f?.id??null),p=h?.firstChild??null,g=l.create(u,r,p,o);return this.insertImpl(g.hostView,a,ZE(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(R$(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[fr],u=new gN(l,l[so],l[fr]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return aN(s,r,o,i),e.attachToViewContainerRef(),J4(hE(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=C4(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=QE(this._lContainer,t);i&&(xv(hE(this._lContainer),t),qO(i[Qt],i))}detach(e){let t=this._adjustIndex(e,-1),i=QE(this._lContainer,t);return i&&xv(hE(this._lContainer),t)!=null?new Cp(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function C4(n){return n[Ev]}function hE(n){return n[Ev]||(n[Ev]=[])}function vN(n,e){let t,i=e[n.index];return Ra(i)?t=i:(t=sN(i,e,null,n),e[n.index]=t,cS(e,t)),yN(t,e,n,i),new gN(t,n,e)}function _X(n,e){let t=n[oi],i=t.createComment(""),r=$s(e,n),o=t.parentNode(r);return Ov(t,o,i,t.nextSibling(r),!1),i}var yN=_N,_S=()=>!1;function xX(n,e,t){return _S(n,e,t)}function _N(n,e,t,i){if(n[fl])return;let r;t.type&8?r=Gs(i):r=_X(e,t),n[fl]=r}function wX(n,e,t){if(n[fl]&&n[yp])return!0;let i=t[js],r=e.index-Ni;if(!i||I7(e)||Op(i,r))return!1;let s=BE(i,r),a=i.data[QM]?.[r],[l,u]=Xq(s,a);return n[fl]=l,n[yp]=u,!0}function bX(n,e,t,i){_S(n,t,e)||_N(n,e,t,i)}function CX(){yN=bX,_S=wX}var oM=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},sM=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)xS(e,t).matches!==null&&this.queries[t].setDirty()}},kv=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=RX(e):this.predicate=e}},aM=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},lM=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,EX(t,o)),this.matchTNodeWithReadOption(e,t,pv(t,e,o,!1,!1))}else i===Er?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,pv(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Yt||r===Oa||r===Er&&t.type&4)this.addMatch(t.index,-2);else{let o=pv(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function EX(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function MX(n,e){return n.type&11?df(n,e):n.type&4?ay(n,e):null}function SX(n,e,t,i){return t===-1?MX(e,n):t===-2?TX(n,e,i):xp(n,n[Qt],t,e)}function TX(n,e,t){if(t===Yt)return df(e,n);if(t===Er)return ay(e,n);if(t===Oa)return vN(e,n)}function xN(n,e,t,i){let r=e[dl].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(SX(e,f,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function cM(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=xN(n,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],f=e[-l];for(let h=no;h<f.length;h++){let p=f[h];p[fu]===p[fr]&&cM(p[Qt],p,u,i)}if(f[tf]!==null){let h=f[tf];for(let p=0;p<h.length;p++){let g=h[p];cM(g[Qt],g,u,i)}}}}}return i}function IX(n,e){return n[dl].queries[e].queryList}function wN(n,e,t){let i=new bp((t&4)===4);return N$(n,e,i,i.destroy),(e[dl]??=new sM).queries.push(new oM(i))-1}function DX(n,e,t){let i=Fi();return i.firstCreatePass&&(bN(i,new kv(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),wN(i,dn(),e)}function AX(n,e,t,i){let r=Fi();if(r.firstCreatePass){let o=Lr();bN(r,new kv(e,t,i),o.index),PX(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return wN(r,dn(),t)}function RX(n){return n.split(",").map(e=>e.trim())}function bN(n,e,t){n.queries===null&&(n.queries=new aM),n.queries.track(new lM(e,t))}function PX(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function xS(n,e){return n.queries.getByIndex(e)}function OX(n,e){let t=n[Qt],i=xS(t,e);return i.crossesNgTemplate?cM(t,n,e,[]):xN(t,n,i,e)}var of=class{},wS=class{};var uM=class extends of{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Lv(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=t3(e);this._bootstrapComponents=RO(o.bootstrap),this._r3Injector=j3(e,t,[{provide:of,useValue:this},{provide:uy,useValue:this.componentFactoryResolver},...i],to(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},dM=class extends wS{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new uM(this.moduleType,e,[])}};var Uv=class extends of{injector;componentFactoryResolver=new Lv(this);instance=null;constructor(e){super();let t=new gp([...e.providers,{provide:of,useValue:this},{provide:uy,useValue:this.componentFactoryResolver}],e.parent||DM(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function dy(n,e,t=null){return new Uv({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var NX=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=i3(!1,t.type),r=i.length>0?dy([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Re({token:n,providedIn:"environment",factory:()=>new n(ze(Cr))})}return n})();function vn(n){return Tp(()=>{let e=CN(n),t=Ct(Ne({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===eO.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(NX).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Aa.Emulated,styles:n.styles||eo,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&xu("NgStandalone"),EN(t);let i=n.dependencies;return t.directiveDefs=E4(i,!1),t.pipeDefs=E4(i,!0),t.id=BX(t),t})}function FX(n){return Qd(n)||n3(n)}function LX(n){return n!==null}function pr(n){return Tp(()=>({type:n.type,bootstrap:n.bootstrap||eo,declarations:n.declarations||eo,imports:n.imports||eo,exports:n.exports||eo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function kX(n,e){if(n==null)return Ta;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=iy.None,l=null),t[o]=[i,a,l],e[o]=s}return t}function UX(n){if(n==null)return Ta;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function gt(n){return Tp(()=>{let e=CN(n);return EN(e),e})}function hf(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function CN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ta,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||eo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kX(n.inputs,e),outputs:UX(n.outputs),debugInfo:null}}function EN(n){n.features?.forEach(e=>e(n))}function E4(n,e){if(!n)return null;let t=e?p$:FX;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(LX)}function BX(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function VX(n){return Object.getPrototypeOf(n.prototype).constructor}function Rn(n){let e=VX(n.type),t=!0,i=[n];for(;e;){let r;if(Ia(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Te(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=pE(n.inputs),s.declaredInputs=pE(n.declaredInputs),s.outputs=pE(n.outputs);let a=r.hostBindings;a&&WX(n,a);let l=r.viewQuery,u=r.contentQueries;if(l&&jX(n,l),u&&GX(n,u),HX(n,r),W6(n.outputs,r.outputs),Ia(r)&&r.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Rn&&(t=!1)}}e=Object.getPrototypeOf(e)}zX(i)}function HX(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function zX(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=rf(r.hostAttrs,t=rf(t,r.hostAttrs))}}function pE(n){return n===Ta?{}:n===eo?[]:n}function jX(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function GX(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function WX(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function MN(n){let e=t=>{let i=Array.isArray(n);t.hostDirectives===null?(t.findHostDirectiveDefs=SN,t.hostDirectives=i?n.map(fM):[n]):i?t.hostDirectives.unshift(...n.map(fM)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function SN(n,e,t){if(n.hostDirectives!==null)for(let i of n.hostDirectives)if(typeof i=="function"){let r=i();for(let o of r)M4(fM(o),e,t)}else M4(i,e,t)}function M4(n,e,t){let i=n3(n.directive);$X(i.declaredInputs,n.inputs),SN(i,e,t),t.set(i,n),e.push(i)}function fM(n){return typeof n=="function"?{directive:dr(n),inputs:Ta,outputs:Ta}:{directive:dr(n.directive),inputs:S4(n.inputs),outputs:S4(n.outputs)}}function S4(n){if(n===void 0||n.length===0)return Ta;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function $X(n,e){for(let t in e)if(e.hasOwnProperty(t)){let i=e[t],r=n[t];n[i]=r}}function TN(n){return XX(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function qX(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function XX(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function bS(n,e,t){return n[e]=t}function YX(n,e){return n[e]}function gl(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function ZX(n,e,t,i){let r=gl(n,e,t);return gl(n,e+1,i)||r}function KX(n,e,t,i,r,o,s,a,l){let u=e.consts,f=Fp(e,n,4,s||null,a||null);FM()&&yS(e,t,f,nf(u,l),dS),f.mergedAttrs=rf(f.mergedAttrs,f.attrs),GM(e,f);let h=f.tView=aS(2,f,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,f),h.queries=e.queries.embeddedTView(f)),f}function IN(n,e,t,i,r,o,s,a,l,u){let f=t+Ni,h=e.firstCreatePass?KX(f,e,n,i,r,o,s,a,l):e.data[f];yu(h,!1);let p=DN(e,n,h,t);Jv()&&oy(e,n,p,h),ff(p,n);let g=sN(p,n,p,h);return n[f]=g,cS(n,g),xX(g,h,n),qv(h)&&ry(e,n,h),l!=null&&uS(n,h,u),h}function Pe(n,e,t,i,r,o,s,a){let l=dn(),u=Fi(),f=nf(u.consts,o);return IN(l,u,n,e,t,i,r,f,s,a),Pe}var DN=AN;function AN(n,e,t,i){return fc(!0),e[oi].createComment("")}function JX(n,e,t,i){let r=e[js],o=!r||uf()||wu(t)||Op(r,i);if(fc(o),o)return AN(n,e);let s=r.data[U7]?.[i]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=ly(r,n,e,t);ey(r,i,a);let l=eS(r,i);return cy(l,a)}function QX(){DN=JX}var CS=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var RN=new Ae("");var eY=(()=>{class n{static \u0275prov=Re({token:n,providedIn:"root",factory:()=>new hM})}return n})(),hM=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function hc(n){return!!n&&typeof n.then=="function"}function ES(n){return!!n&&typeof n.subscribe=="function"}var tY=new Ae("");var PN=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=Q(tY,{optional:!0})??[];injector=Q(os);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=Do(this.injector,r);if(hc(o))t.push(o);else if(ES(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pf=new Ae("");function nY(){OC(()=>{throw new Te(600,!1)})}function iY(n){return n.isBoundToModule}var rY=10;var Ws=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Q(x7);afterRenderManager=Q(z7);zonelessEnabled=Q(qM);rootEffectScheduler=Q(eY);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new On;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=Q(yl).hasPendingTasks.pipe(at(t=>!t));constructor(){Q(Qv,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=Q(Cr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=os.NULL){ri(10);let o=t instanceof fN;if(!this._injector.get(PN).done){let g="";throw new Te(405,g)}let a;o?a=t:a=this._injector.get(uy).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=iY(a)?void 0:this._injector.get(of),u=i||a.selector,f=a.create(r,[],u,l),h=f.location.nativeElement,p=f.injector.get(RN,null);return p?.registerApplication(h),f.onDestroy(()=>{this.detachView(f.hostView),mv(this.components,f),p?.unregisterApplication(h)}),this._loadComponent(f),ri(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ri(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(fO.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Te(101,!1);let t=gn(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,gn(t),this.afterTick.next(),ri(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(uc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<rY;)ri(14),this.synchronizeOnce(),ri(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)oY(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Xv(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;mv(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(pf,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>mv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function oY(n,e,t,i){if(!t&&!Xv(n))return;nN(n,e,t&&!i?0:1)}function Tr(n,e,t,i){let r=dn(),o=Kv();if(gl(r,o,e)){let s=Fi(),a=HM();K9(a,r,n,e,t,i)}return Tr}function sY(n,e,t,i){return gl(n,Kv(),t)?e+Ip(t)+i:Pa}function uv(n,e){return n<<17|e<<2}function gu(n){return n>>17&32767}function aY(n){return(n&2)==2}function lY(n,e){return n&131071|e<<17}function pM(n){return n|2}function sf(n){return(n&131068)>>2}function mE(n,e){return n&-131069|e<<2}function cY(n){return(n&1)===1}function mM(n){return n|1}function uY(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=gu(s),l=sf(s);n[i]=t;let u=!1,f;if(Array.isArray(t)){let h=t;f=h[1],(f===null||Dp(h,f)>0)&&(u=!0)}else f=t;if(r)if(l!==0){let p=gu(n[a+1]);n[i+1]=uv(p,a),p!==0&&(n[p+1]=mE(n[p+1],i)),n[a+1]=lY(n[a+1],i)}else n[i+1]=uv(a,0),a!==0&&(n[a+1]=mE(n[a+1],i)),a=i;else n[i+1]=uv(l,0),a===0?a=i:n[l+1]=mE(n[l+1],i),l=i;u&&(n[i+1]=pM(n[i+1])),T4(n,f,i,!0),T4(n,f,i,!1),dY(e,f,n,i,o),s=uv(a,l),o?e.classBindings=s:e.styleBindings=s}function dY(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Dp(o,e)>=0&&(t[i+1]=mM(t[i+1]))}function T4(n,e,t,i){let r=n[t+1],o=e===null,s=i?gu(r):sf(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];fY(l,e)&&(a=!0,n[s+1]=i?mM(u):pM(u)),s=i?gu(u):sf(u)}a&&(n[t+1]=i?pM(r):mM(r))}function fY(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Dp(n,e)>=0:!1}var qi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ON(n){return n.substring(qi.key,qi.keyEnd)}function hY(n){return n.substring(qi.value,qi.valueEnd)}function pY(n){return LN(n),NN(n,af(n,0,qi.textEnd))}function NN(n,e){let t=qi.textEnd;return t===e?-1:(e=qi.keyEnd=gY(n,qi.key=e,t),af(n,e,t))}function mY(n){return LN(n),FN(n,af(n,0,qi.textEnd))}function FN(n,e){let t=qi.textEnd,i=qi.key=af(n,e,t);return t===i?-1:(i=qi.keyEnd=vY(n,i,t),i=I4(n,i,t,58),i=qi.value=af(n,i,t),i=qi.valueEnd=yY(n,i,t),I4(n,i,t,59))}function LN(n){qi.key=0,qi.keyEnd=0,qi.value=0,qi.valueEnd=0,qi.textEnd=n.length}function af(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function gY(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function vY(n,e,t){let i;for(;e<t&&((i=n.charCodeAt(e))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)e++;return e}function I4(n,e,t,i){return e=af(n,e,t),e<t&&e++,e}function yY(n,e,t){let i=-1,r=-1,o=-1,s=e,a=s;for(;s<t;){let l=n.charCodeAt(s++);if(l===59)return a;l===34||l===39?a=s=D4(n,l,s,t):e===s-4&&o===85&&r===82&&i===76&&l===40?a=s=D4(n,41,s,t):l>32&&(a=s),o=r,r=i,i=l&-33}return a}function D4(n,e,t,i){let r=-1,o=t;for(;o<i;){let s=n.charCodeAt(o++);if(s==e&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function $(n,e,t){let i=dn(),r=Kv();if(gl(i,r,e)){let o=Fi(),s=HM();GO(o,s,i,n,e,i[oi],t,!1)}return $}function gM(n,e,t,i,r){fS(e,n,t,r?"class":"style",i)}function Hn(n,e,t){return BN(n,e,t,!1),Hn}function In(n,e){return BN(n,e,null,!0),In}function kN(n){VN(jN,_Y,n,!1)}function _Y(n,e){for(let t=mY(e);t>=0;t=FN(e,t))jN(n,ON(e),hY(e))}function UN(n){VN(SY,xY,n,!0)}function xY(n,e){for(let t=pY(e);t>=0;t=NN(e,t))Gv(n,ON(e),!0)}function BN(n,e,t,i){let r=dn(),o=Fi(),s=C3(2);if(o.firstUpdatePass&&zN(o,n,s,i),e!==Pa&&gl(r,s,e)){let a=o.data[_u()];GN(o,a,r,r[oi],n,r[s+1]=IY(e,t),i,s)}}function VN(n,e,t,i){let r=Fi(),o=C3(2);r.firstUpdatePass&&zN(r,null,o,i);let s=dn();if(t!==Pa&&gl(s,o,t)){let a=r.data[_u()];if(WN(a,i)&&!HN(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=_E(l,t||"")),gM(r,a,s,t,i)}else TY(r,a,s,s[oi],s[o+1],s[o+1]=MY(n,e,t),i,o)}}function HN(n,e){return e>=n.expandoStartIndex}function zN(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[_u()],s=HN(n,t);WN(o,i)&&e===null&&!s&&(e=!1),e=wY(r,o,e,i),uY(r,o,e,t,s,i)}}function wY(n,e,t,i){let r=q$(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=gE(null,n,e,t,i),t=Mp(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=gE(r,n,e,t,i),o===null){let l=bY(n,e,i);l!==void 0&&Array.isArray(l)&&(l=gE(null,n,e,l[1],i),l=Mp(l,e.attrs,i),CY(n,e,i,l))}else o=EY(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function bY(n,e,t){let i=t?e.classBindings:e.styleBindings;if(sf(i)!==0)return n[gu(i)]}function CY(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[gu(r)]=i}function EY(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=Mp(i,s,t)}return Mp(i,e.attrs,t)}function gE(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=Mp(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Mp(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Gv(n,s,t?!0:e[++o]))}return n===void 0?null:n}function MY(n,e,t){if(t==null||t==="")return eo;let i=[],r=as(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function jN(n,e,t){Gv(n,e,as(t))}function SY(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Gv(n,i,t)}function TY(n,e,t,i,r,o,s,a){r===Pa&&(r=eo);let l=0,u=0,f=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;f!==null||h!==null;){let p=l<r.length?r[l+1]:void 0,g=u<o.length?o[u+1]:void 0,v=null,w;f===h?(l+=2,u+=2,p!==g&&(v=h,w=g)):h===null||f!==null&&f<h?(l+=2,v=f):(u+=2,v=h,w=g),v!==null&&GN(n,e,t,i,v,w,s,a),f=l<r.length?r[l]:null,h=u<o.length?o[u]:null}}function GN(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],f=cY(u)?A4(l,e,t,r,sf(u),s):void 0;if(!Bv(f)){Bv(o)||aY(u)&&(o=A4(l,null,t,r,a,s));let h=m3(_u(),t);mq(i,s,h,r,o)}}function A4(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let l=n[r],u=Array.isArray(l),f=u?l[1]:l,h=f===null,p=t[r+1];p===Pa&&(p=h?eo:void 0);let g=h?nE(p,i):f===i?p:void 0;if(u&&!Bv(g)&&(g=nE(l,i)),Bv(g)&&(a=g,s))return a;let v=n[r+1];r=s?gu(v):sf(v)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=nE(l,i))}return a}function Bv(n){return n!==void 0}function IY(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=to(as(n)))),n}function WN(n,e){return(n.flags&(e?8:16))!==0}function I(n,e,t,i){let r=dn(),o=Fi(),s=Ni+n,a=r[oi],l=o.firstCreatePass?pN(s,o,r,e,dS,FM(),t,i):o.data[s],u=$N(o,r,l,a,e,n);r[s]=u;let f=qv(l);return yu(l,!0),UO(a,u,l),!wu(l)&&Jv()&&oy(o,r,u,l),(F$()===0||f)&&ff(u,r),L$(),f&&(ry(o,r,l),tS(o,l,r)),i!==null&&uS(r,l),I}function D(){let n=Lr();LM()?kM():(n=n.parent,yu(n,!1));let e=n;U$(e)&&V$(),k$();let t=Fi();return t.firstCreatePass&&mN(t,e),e.classesWithoutHost!=null&&Q$(e)&&gM(t,e,dn(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&e7(e)&&gM(t,e,dn(),e.stylesWithoutHost,!1),D}function ye(n,e,t,i){return I(n,e,t,i),D(),ye}var $N=(n,e,t,i,r,o)=>(fc(!0),oS(i,r,A3()));function DY(n,e,t,i,r,o){let s=e[js],a=!s||uf()||wu(t)||Op(s,o);if(fc(a),a)return oS(i,r,A3());let l=ly(s,n,e,t);return gO(s,o)&&ey(s,o,l.nextSibling),s&&(J3(t)||Q3(l))&&vu(t)&&(B$(t),kO(l)),l}function AY(){$N=DY}function RY(n,e,t,i,r){let o=e.consts,s=nf(o,i),a=Fp(e,n,8,"ng-container",s);s!==null&&iM(a,s,!0);let l=nf(o,r);return FM()&&yS(e,t,a,l,dS),a.mergedAttrs=rf(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Ys(n,e,t){let i=dn(),r=Fi(),o=n+Ni,s=r.firstCreatePass?RY(o,r,i,e,t):r.data[o];yu(s,!0);let a=qN(r,i,s,n);return i[o]=a,Jv()&&oy(r,i,a,s),ff(a,i),qv(s)&&(ry(r,i,s),tS(r,s,i)),t!=null&&uS(i,s),Ys}function Zs(){let n=Lr(),e=Fi();return LM()?kM():(n=n.parent,yu(n,!1)),e.firstCreatePass&&(GM(e,n),RM(n)&&e.queries.elementEnd(n)),Zs}function Ks(n,e,t){return Ys(n,e,t),Zs(),Ks}var qN=(n,e,t,i)=>(fc(!0),FO(e[oi],""));function PY(n,e,t,i){let r,o=e[js],s=!o||uf()||Op(o,i)||wu(t);if(fc(s),s)return FO(e[oi],"");let a=ly(o,n,e,t),l=Z7(o,i);return ey(o,i,a),r=cy(l,a),r}function OY(){qN=PY}function vt(){return dn()}var Vv="en-US";var NY=Vv;function FY(n){typeof n=="string"&&(NY=n.toLowerCase().replace(/_/g,"-"))}function R4(n,e,t){return function i(r){if(r===Function)return t;let o=vu(n)?Da(n.index,e):e;vS(o,5);let s=e[io],a=P4(e,s,t,r),l=i.__ngNextListenerFn__;for(;l;)a=P4(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function P4(n,e,t,i){let r=gn(null);try{return ri(6,e,t),t(i)!==!1}catch(o){return LY(n,o),!1}finally{ri(7,e,t),gn(r)}}function LY(n,e){let t=n[du],i=t?t.get(hl,null):null;i&&i.handleError(e)}function O4(n,e,t,i,r,o){let s=e[t],a=e[Qt],u=a.data[t].outputs[i],f=s[u],h=a.firstCreatePass?NM(a):null,p=OM(e),g=f.subscribe(o),v=p.length;p.push(o,g),h&&h.push(r,n.index,v,-(v+1))}var kY=new Map;function Me(n,e,t,i){let r=dn(),o=Fi(),s=Lr();return XN(o,r,r[oi],s,n,e,i),Me}function UY(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[bv],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function XN(n,e,t,i,r,o,s){let a=qv(i),u=n.firstCreatePass?NM(n):null,f=OM(e),h=!0;if(i.type&3||s){let p=$s(i,e),g=s?s(p):p,v=f.length,w=s?_=>s(Gs(_[i.index])):i.index,y=null;if(!s&&a&&(y=UY(n,e,r,i.index)),y!==null){let _=y.__ngLastListenerFn__||y;_.__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,h=!1}else{o=R4(i,e,o);let _=e[du].get(Rp);kY.get(_)?.(g,r,o);let C=t.listen(g,r,o);f.push(o,C),u&&u.push(r,w,v,v+1)}}else o=R4(i,e,o);if(h){let p=i.outputs?.[r],g=i.hostDirectiveOutputs?.[r];if(g&&g.length)for(let v=0;v<g.length;v+=2){let w=g[v],y=g[v+1];O4(i,e,w,y,r,o)}if(p&&p.length)for(let v of p)O4(i,e,v,r,r,o)}}function le(n=1){return Y$(n)}function BY(n,e){let t=null,i=D9(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(i===null?OO(n,o,!0):P9(i,o))return r}return t}function YN(n){let e=dn()[ro][so];if(!e.projection){let t=n?n.length:1,i=e.projection=d$(t,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?BY(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function ZN(n,e=0,t,i,r,o){let s=dn(),a=Fi(),l=i?n+1:null;l!==null&&IN(s,a,l,i,r,o,null,t);let u=Fp(a,Ni+n,16,null,t||null);u.projection===null&&(u.projection=e),kM();let h=!s[js]||uf();s[ro][so].projection[u.projection]===null&&l!==null?VY(s,a,l):h&&!wu(u)&&hq(a,s,u)}function VY(n,e,t){let i=Ni+t,r=e.data[i],o=n[i],s=eM(o,r.tView.ssrId),a=WO(n,r,void 0,{dehydratedView:s});aN(o,a,0,ZE(r,s))}function MS(n,e,t,i){AX(n,e,t,i)}function bi(n,e,t){DX(n,e,t)}function si(n){let e=dn(),t=Fi(),i=E3();UM(i+1);let r=xS(t,i);if(n.dirty&&A$(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=OX(e,i);n.reset(o,C7),n.notifyOnChanges()}return!0}return!1}function ai(){return IX(dn(),E3())}function HY(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Li(n){let e=z$();return v3(e,Ni+n)}function Z(n,e=""){let t=dn(),i=Fi(),r=n+Ni,o=i.firstCreatePass?Fp(i,r,1,e,null):i.data[r],s=KN(i,t,o,e,n);t[r]=s,Jv()&&oy(i,t,s,o),yu(o,!1)}var KN=(n,e,t,i,r)=>(fc(!0),NO(e[oi],i));function zY(n,e,t,i,r){let o=e[js],s=!o||uf()||wu(t)||Op(o,r);return fc(s),s?NO(e[oi],i):ly(o,n,e,t)}function jY(){KN=zY}function Cn(n){return rr("",n,""),Cn}function rr(n,e,t){let i=dn(),r=sY(i,n,e,t);return r!==Pa&&GY(i,_u(),r),rr}function GY(n,e,t){let i=m3(e,n);L9(n[oi],i,t)}function ao(n,e,t){K3(e)&&(e=e());let i=dn(),r=Kv();if(gl(i,r,e)){let o=Fi(),s=HM();GO(o,s,i,n,e,i[oi],t,!1)}return ao}function Ro(n,e){let t=K3(n);return t&&n.set(e),t}function lo(n,e){let t=dn(),i=Fi(),r=Lr();return XN(i,t,t[oi],r,n,e),lo}function WY(n,e,t){let i=Fi();if(i.firstCreatePass){let r=Ia(n);vM(t,i.data,i.blueprint,r,!0),vM(e,i.data,i.blueprint,r,!1)}}function vM(n,e,t,i,r){if(n=dr(n),Array.isArray(n))for(let o=0;o<n.length;o++)vM(n[o],e,t,i,r);else{let o=Fi(),s=dn(),a=Lr(),l=ef(n)?n:dr(n.provide),u=s3(n),f=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(ef(n)||!n.multi){let g=new mu(u,r,ue),v=yE(l,e,r?f:f+p,h);v===-1?(RE(Iv(a,s),o,l),vE(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[v]=g,s[v]=g)}else{let g=yE(l,e,f+p,h),v=yE(l,e,f,f+p),w=g>=0&&t[g],y=v>=0&&t[v];if(r&&!y||!r&&!w){RE(Iv(a,s),o,l);let _=XY(r?qY:$Y,t.length,r,i,u);!r&&y&&(t[v].providerFactory=_),vE(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),s.push(_)}else{let _=JN(t[r?v:g],u,!r&&i);vE(o,n,g>-1?g:v,_)}!r&&i&&y&&t[v].componentProviders++}}}function vE(n,e,t,i){let r=ef(e),o=_$(e);if(r||o){let l=(o?dr(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[i,l]):u[f+1].push(i,l)}else u.push(t,l)}}}function JN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function yE(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function $Y(n,e,t,i,r){return yM(this.multi,[])}function qY(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=xp(i,i[Qt],this.providerFactory.index,r);s=l.slice(0,a),yM(o,s);for(let u=a;u<l.length;u++)s.push(l[u])}else s=[],yM(o,s);return s}function yM(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function XY(n,e,t,i,r){let o=new mu(n,t,ue);return o.multi=[],o.index=e,o.componentProviders=0,JN(o,r,i&&!t),o}function _n(n,e=[]){return t=>{t.providersResolver=(i,r)=>WY(i,r?r(n):n,e)}}function bu(n,e,t){let i=Zv()+n,r=dn();return r[i]===Pa?bS(r,i,t?e.call(t):e()):YX(r,i)}function mr(n,e,t,i){return eF(dn(),Zv(),n,e,t,i)}function fy(n,e,t,i,r){return YY(dn(),Zv(),n,e,t,i,r)}function QN(n,e){let t=n[e];return t===Pa?void 0:t}function eF(n,e,t,i,r,o){let s=e+t;return gl(n,s,r)?bS(n,s+1,o?i.call(o,r):i(r)):QN(n,s+1)}function YY(n,e,t,i,r,o,s){let a=e+t;return ZX(n,a,r,o)?bS(n,a+2,s?i.call(s,r,o):i(r,o)):QN(n,a+2)}function ls(n,e){let t=Fi(),i,r=n+Ni;t.firstCreatePass?(i=ZY(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=cu(i.type,!0)),s,a=Qr(ue);try{let l=Tv(!1),u=o();return Tv(l),HY(t,dn(),r,u),u}finally{Qr(a)}}function ZY(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function cs(n,e,t){let i=n+Ni,r=dn(),o=v3(r,i);return KY(r,i)?eF(r,Zv(),e,o.transform,t,o):o.transform(t)}function KY(n,e){return n[Qt].data[e].pure}function Yi(n,e){return ay(n,e)}var Sp=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},tF=new Sp("19.2.10"),_M=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},nF=(()=>{class n{compileModuleSync(t){return new dM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=t3(t),o=RO(r.declarations).reduce((s,a)=>{let l=Qd(a);return l&&s.push(new Ep(l)),s},[]);return new _M(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var JY=(()=>{class n{zone=Q(Kn);changeDetectionScheduler=Q(wp);applicationRef=Q(Ws);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QY({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Kn(Ct(Ne({},eZ()),{scheduleInRootZone:t})),[{provide:Kn,useFactory:n},{provide:uu,multi:!0,useFactory:()=>{let i=Q(JY,{optional:!0});return()=>i.initialize()}},{provide:uu,multi:!0,useFactory:()=>{let i=Q(tZ);return()=>{i.initialize()}}},e===!0?{provide:W3,useValue:!0}:[],{provide:$3,useValue:t??G3}]}function eZ(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var tZ=(()=>{class n{subscription=new di;initialized=!1;zone=Q(Kn);pendingTasks=Q(yl);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Kn.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Kn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nZ=(()=>{class n{appRef=Q(Ws);taskService=Q(yl);ngZone=Q(Kn);zonelessEnabled=Q(qM);tracing=Q(Qv,{optional:!0});disableScheduling=Q(W3,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new di;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Av):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Q($3,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof LE||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?r4:q3;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Av+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,r4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iZ(){return typeof $localize<"u"&&$localize.locale||Vv}var SS=new Ae("",{providedIn:"root",factory:()=>Q(SS,Jt.Optional|Jt.SkipSelf)||iZ()});var xM=new Ae(""),rZ=new Ae("");function fp(n){return!n.moduleRef}function oZ(n){let e=fp(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Kn);return t.run(()=>{fp(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(hl,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),fp(n)){let o=()=>e.destroy(),s=n.platformInjector.get(xM);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(xM);s.add(o),n.moduleRef.onDestroy(()=>{mv(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return aZ(i,t,()=>{let o=e.get(PN);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(SS,Vv);if(FY(s||Vv),!e.get(rZ,!0))return fp(n)?e.get(Ws):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(fp(n)){let l=e.get(Ws);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return sZ(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function sZ(n,e){let t=n.injector.get(Ws);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Te(-403,!1);e.push(n)}function aZ(n,e,t){try{let i=t();return hc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var gv=null;function lZ(n=[],e){return os.create({name:e,providers:[{provide:Wv,useValue:"platform"},{provide:xM,useValue:new Set([()=>gv=null])},...n]})}function cZ(n=[]){if(gv)return gv;let e=lZ(n);return gv=e,nY(),uZ(e),e}function uZ(n){let e=n.get(ZM,null);Do(n,()=>{e?.forEach(t=>t())})}var or=(()=>{class n{static __NG_ELEMENT_ID__=dZ}return n})();function dZ(n){return fZ(Lr(),dn(),(n&16)===16)}function fZ(n,e,t){if(vu(n)&&!t){let i=Da(n.index,e);return new Cp(i,i)}else if(n.type&175){let i=e[ro];return new Cp(i,e)}return null}var wM=class{constructor(){}supports(e){return TN(e)}create(e){return new bM(e)}},hZ=(n,e)=>e,bM=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||hZ}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<N4(i,r,o)?t:i,a=N4(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,f=l-r;if(u!=f){for(let p=0;p<u;p++){let g=p<o.length?o[p]:o[p]=0,v=g+p;f<=v&&v<u&&(o[p]=g+1)}let h=s.previousIndex;o[h]=f-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!TN(e))throw new Te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,qX(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new CM(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Hv),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Hv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},CM=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},EM=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Hv=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new EM,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function N4(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function F4(){return new TS([new wM])}var TS=(()=>{class n{factories;static \u0275prov=Re({token:n,providedIn:"root",factory:F4});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||F4()),deps:[[n,new l$,new K4]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new Te(901,!1)}}return n})();function iF(n){ri(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=cZ(i),o=[QY({}),{provide:wp,useExisting:nZ},...t||[]],s=new Uv({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return oZ({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ri(9)}}var L4=!1;function pZ(){L4||(L4=!0,$7(),AY(),jY(),OY(),QX(),CX(),Zq(),W9())}function mZ(n){return n.whenStable()}function rF(){let n=[{provide:sv,useFactory:()=>{let e=!0;return e=!!Q(Pp,{optional:!0})?.get(hO,null),e&&xu("NgHydration"),e}},{provide:uu,useValue:()=>{jq(!1),Q(sv)&&(J7(Ap()),pZ())},multi:!0}];return n.push({provide:dO,useFactory:()=>Q(sv)},{provide:pf,useFactory:()=>{if(Q(sv)){let e=Q(Ws);return()=>{mZ(e).then(()=>{e.destroyed||qq(e)})}}return()=>{}},multi:!0}),dc(n)}function mf(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ur(n){return LC(n)}function wl(n,e){return PC(n,e?.equal)}var k4=class{[ts];constructor(e){this[ts]=e}destroy(){this[ts].destroy()}};var fn=new Ae("");var aF=null;function us(){return aF}function IS(n){aF??=n}var Lp=class{},DS=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:()=>Q(lF),providedIn:"platform"})}return n})();var lF=(()=>{class n extends DS{_location;_history;_doc=Q(fn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return us().getBaseHref(this._doc)}onPopState(t){let i=us().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=us().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function cF(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function oF(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function pc(n){return n&&n[0]!=="?"?`?${n}`:n}var gf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:()=>Q(dF),providedIn:"root"})}return n})(),uF=new Ae(""),dF=(()=>{class n extends gf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Q(fn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cF(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+pc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+pc(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+pc(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(ze(DS),ze(uF,8))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),co=(()=>{class n{_subject=new On;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=yZ(oF(sF(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+pc(i))}normalize(t){return n.stripTrailingSlash(vZ(this._basePath,sF(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pc(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=pc;static joinWithSlash=cF;static stripTrailingSlash=oF;static \u0275fac=function(i){return new(i||n)(ze(gf))};static \u0275prov=Re({token:n,factory:()=>gZ(),providedIn:"root"})}return n})();function gZ(){return new co(ze(gf))}function vZ(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function sF(n){return n.replace(/\/index.html$/,"")}function yZ(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var AS=/\s+/,fF=[],Po=(()=>{class n{_ngEl;_renderer;initialClasses=fF;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(AS):fF}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(AS):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(AS).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(ue(Yt),ue(Sr))};static \u0275dir=gt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var hy=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Si=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new hy(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),hF(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);hF(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(ue(Oa),ue(Er),ue(TS))};static \u0275dir=gt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function hF(n,e){n.context.$implicit=e.item}var Dn=(()=>{class n{_viewContainer;_context=new py;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pF(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pF(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(ue(Oa),ue(Er))};static \u0275dir=gt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),py=class{$implicit=null;ngIf=null};function pF(n,e){if(n&&!n.createEmbeddedView)throw new Te(2020,!1)}var Js=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(ue(Oa))};static \u0275dir=gt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Xi]})}return n})();function _Z(n,e){return new Te(2100,!1)}var RS=class{createSubscription(e,t){return Ur(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){Ur(()=>e.unsubscribe())}},PS=class{createSubscription(e,t){return e.then(i=>t?.(i),i=>{throw i}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},xZ=new PS,wZ=new RS,OS=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(hc(t))return xZ;if(ES(t))return wZ;throw _Z(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(ue(or,16))};static \u0275pipe=hf({name:"async",type:n,pure:!1})}return n})();var kp=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=pr({type:n});static \u0275inj=hr({})}return n})();function Up(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var my="browser",mF="server";function Bp(n){return n===my}function vf(n){return n===mF}var Cu=class{};var Eu=new Ae(""),kS=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Te(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(ze(Eu),ze(Kn))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),yf=class{_doc;constructor(e){this._doc=e}manager},gy="ng-app-id";function gF(n){for(let e of n)e.remove()}function vF(n,e){let t=e.createElement("style");return t.textContent=n,t}function bZ(n,e,t,i){let r=n.head?.querySelectorAll(`style[${gy}="${e}"],link[${gy}="${e}"]`);if(r)for(let o of r)o.removeAttribute(gy),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function FS(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var US=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=vf(o),bZ(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,vF);i?.forEach(r=>this.addUsage(r,this.external,FS))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(gF(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])gF(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,vF(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,FS(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(gy,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(ze(fn),ze(Rp),ze(JM,8),ze(qs))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),NS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},BS=/%COMP%/g;var _F="%COMP%",CZ=`_nghost-${_F}`,EZ=`_ngcontent-${_F}`,MZ=!0,SZ=new Ae("",{providedIn:"root",factory:()=>MZ});function TZ(n){return EZ.replace(BS,n)}function IZ(n){return CZ.replace(BS,n)}function xF(n,e){return e.map(t=>t.replace(BS,n))}var jp=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=vf(a),this.defaultRenderer=new Hp(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Aa.ShadowDom&&(i=Ct(Ne({},i),{encapsulation:Aa.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof vy?r.applyToHost(t):r instanceof zp&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(i.encapsulation){case Aa.Emulated:o=new vy(l,u,i,this.appId,f,s,a,h,p);break;case Aa.ShadowDom:return new LS(l,u,t,i,s,a,this.nonce,h,p);default:o=new zp(l,u,i,f,s,a,h,p);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(ze(kS),ze(US),ze(Rp),ze(SZ),ze(fn),ze(qs),ze(Kn),ze(JM),ze(Qv,8))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),Hp=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(NS[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yF(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(yF(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Te(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=NS[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=NS[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ml.DashCase|ml.Important)?e.style.setProperty(t,i,r&ml.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ml.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=us().getGlobalEventTarget(this.doc,e),!e))throw new Te(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function yF(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var LS=class extends Hp{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=xF(r.id,f);for(let p of f){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=FS(p,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},zp=class extends Hp{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let f=i.styles;this.styles=u?xF(u,f):f,this.styleUrls=i.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},vy=class extends zp{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,l,u){let f=r+"-"+i.id;super(e,t,i,o,s,a,l,u,f),this.contentAttr=TZ(f),this.hostAttr=IZ(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var yy=class n extends Lp{supportsDOMEvents=!0;static makeCurrent(){IS(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=DZ();return t==null?null:AZ(t)}resetBaseElement(){Gp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Up(document.cookie,e)}},Gp=null;function DZ(){return Gp=Gp||document.querySelector("base"),Gp?Gp.getAttribute("href"):null}function AZ(n){return new URL(n,document.baseURI).pathname}var RZ=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),bF=(()=>{class n extends yf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(ze(fn))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),wF=["alt","control","meta","shift"],PZ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OZ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},CF=(()=>{class n extends yf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>us().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),wF.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=PZ[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),wF.forEach(s=>{if(s!==r){let a=OZ[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(ze(fn))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();function Wp(n,e){return iF(Ne({rootComponent:n},NZ(e)))}function NZ(n){return{appProviders:[...BZ,...n?.providers??[]],platformProviders:UZ}}function FZ(){yy.makeCurrent()}function LZ(){return new hl}function kZ(){return oO(document),document}var UZ=[{provide:qs,useValue:my},{provide:ZM,useValue:FZ,multi:!0},{provide:fn,useFactory:kZ}];var BZ=[{provide:Wv,useValue:"root"},{provide:hl,useFactory:LZ},{provide:Eu,useClass:bF,multi:!0,deps:[fn]},{provide:Eu,useClass:CF,multi:!0,deps:[fn]},jp,US,kS,{provide:uc,useExisting:jp},{provide:Cu,useClass:RZ},[]];var xf=class{},$p=class{},bl=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var xy=class{encodeKey(e){return EF(e)}encodeValue(e){return EF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function VZ(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var HZ=/%(\d[a-f0-9])/gi,zZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function EF(n){return encodeURIComponent(n).replace(HZ,(e,t)=>zZ[t]??e)}function _y(n){return`${n}`}var en=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new xy,e.fromString){if(e.fromObject)throw new Te(2805,!1);this.map=VZ(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(_y):[_y(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(_y(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(_y(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var wy=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function jZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function MF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function SF(n){return typeof Blob<"u"&&n instanceof Blob}function TF(n){return typeof FormData<"u"&&n instanceof FormData}function GZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var IF="Content-Type",DF="Accept",RF="X-Request-URL",PF="text/plain",OF="application/json",WZ=`${OF}, ${PF}, */*`,_f=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(jZ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new bl,this.context??=new wy,!this.params)this.params=new en,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||MF(this.body)||SF(this.body)||TF(this.body)||GZ(this.body)?this.body:this.body instanceof en?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||TF(this.body)?null:SF(this.body)?this.body.type||null:MF(this.body)?null:typeof this.body=="string"?PF:this.body instanceof en?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?OF:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,f=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),u)),e.setParams&&(f=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),f)),new n(t,i,s,{params:f,headers:u,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Mu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Mu||{}),wf=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new bl,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},by=class n extends wf{constructor(e={}){super(e)}type=Mu.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Su=class n extends wf{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Mu.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},qp=class extends wf{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},$Z=200,qZ=204;function VS(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Bi=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof _f)o=t;else{let l;r.headers instanceof bl?l=r.headers:l=new bl(r.headers);let u;r.params&&(r.params instanceof en?u=r.params:u=new en({fromObject:r.params})),o=new _f(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Dt(o).pipe(ac(l=>this.handler.handle(l)));if(t instanceof _f||r.observe==="events")return s;let a=s.pipe($n(l=>l instanceof Su));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(at(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Te(2806,!1);return l.body}));case"blob":return a.pipe(at(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Te(2807,!1);return l.body}));case"text":return a.pipe(at(l=>{if(l.body!==null&&typeof l.body!="string")throw new Te(2808,!1);return l.body}));case"json":default:return a.pipe(at(l=>l.body))}case"response":return a;default:throw new Te(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new en().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,VS(r,i))}post(t,i,r={}){return this.request("POST",t,VS(r,i))}put(t,i,r={}){return this.request("PUT",t,VS(r,i))}static \u0275fac=function(i){return new(i||n)(ze(xf))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();var XZ=new Ae("");function NF(n,e){return e(n)}function YZ(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function ZZ(n,e,t){return(i,r)=>Do(t,()=>e(i,o=>n(o,r)))}var Ey=new Ae(""),zS=new Ae(""),jS=new Ae(""),GS=new Ae("",{providedIn:"root",factory:()=>!0});function KZ(){let n=null;return(e,t)=>{n===null&&(n=(Q(Ey,{optional:!0})??[]).reduceRight(YZ,NF));let i=Q(yl);if(Q(GS)){let o=i.add();return n(e,t).pipe(lc(()=>i.remove(o)))}else return n(e,t)}}var Cy=(()=>{class n extends xf{backend;injector;chain=null;pendingTasks=Q(yl);contributeToStability=Q(GS);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(zS),...this.injector.get(jS,[])]));this.chain=i.reduceRight((r,o)=>ZZ(r,o,this.injector),NF)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(lc(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(ze($p),ze(Cr))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();var JZ=/^\)\]\}',?\n/,QZ=RegExp(`^${RF}:`,"m");function eK(n){return"responseURL"in n&&n.responseURL?n.responseURL:QZ.test(n.getAllResponseHeaders())?n.getResponseHeader(RF):null}var HS=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Te(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ii(i.\u0275loadImpl()):Dt(null)).pipe(xi(()=>new Lt(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((w,y)=>s.setRequestHeader(w,y.join(","))),t.headers.has(DF)||s.setRequestHeader(DF,WZ),!t.headers.has(IF)){let w=t.detectContentTypeHeader();w!==null&&s.setRequestHeader(IF,w)}if(t.responseType){let w=t.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let w=s.statusText||"OK",y=new bl(s.getAllResponseHeaders()),_=eK(s)||t.url;return l=new by({headers:y,status:s.status,statusText:w,url:_}),l},f=()=>{let{headers:w,status:y,statusText:_,url:T}=u(),C=null;y!==qZ&&(C=typeof s.response>"u"?s.responseText:s.response),y===0&&(y=C?$Z:0);let E=y>=200&&y<300;if(t.responseType==="json"&&typeof C=="string"){let V=C;C=C.replace(JZ,"");try{C=C!==""?JSON.parse(C):null}catch(F){C=V,E&&(E=!1,C={error:F,text:C})}}E?(o.next(new Su({body:C,headers:w,status:y,statusText:_,url:T||void 0})),o.complete()):o.error(new qp({error:C,headers:w,status:y,statusText:_,url:T||void 0}))},h=w=>{let{url:y}=u(),_=new qp({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});o.error(_)},p=!1,g=w=>{p||(o.next(u()),p=!0);let y={type:Mu.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(y.total=w.total),t.responseType==="text"&&s.responseText&&(y.partialText=s.responseText),o.next(y)},v=w=>{let y={type:Mu.UploadProgress,loaded:w.loaded};w.lengthComputable&&(y.total=w.total),o.next(y)};return s.addEventListener("load",f),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:Mu.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",f),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(ze(Cu))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),FF=new Ae(""),tK="XSRF-TOKEN",nK=new Ae("",{providedIn:"root",factory:()=>tK}),iK="X-XSRF-TOKEN",rK=new Ae("",{providedIn:"root",factory:()=>iK}),Xp=class{},oK=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i){this.doc=t,this.cookieName=i}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Up(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(ze(fn),ze(nK))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();function sK(n,e){let t=n.url.toLowerCase();if(!Q(FF)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=Q(Xp).getToken(),r=Q(rK);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var WS=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(WS||{});function aK(n,e){return{\u0275kind:n,\u0275providers:e}}function $S(...n){let e=[Bi,HS,Cy,{provide:xf,useExisting:Cy},{provide:$p,useFactory:()=>Q(XZ,{optional:!0})??Q(HS)},{provide:zS,useValue:sK,multi:!0},{provide:FF,useValue:!0},{provide:Xp,useClass:oK}];for(let t of n)e.push(...t.\u0275providers);return dc(e)}var AF=new Ae("");function qS(){return aK(WS.LegacyInterceptors,[{provide:AF,useFactory:KZ},{provide:zS,useExisting:AF,multi:!0}])}var lK=new Ae(""),cK="b",uK="h",dK="s",fK="st",hK="u",pK="rt",XS=new Ae(""),mK=["GET","HEAD"];function gK(n,e){let p=Q(XS),{isCacheActive:t}=p,i=Rd(p,["isCacheActive"]),{transferCache:r,method:o}=n;if(!t||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!mK.includes(o)||!i.includeRequestsWithAuthHeaders&&vK(n)||i.filter?.(n)===!1)return e(n);let s=Q(Pp);if(Q(lK,{optional:!0}))throw new Te(2803,!1);let l=n.url,u=yK(n,l),f=s.get(u,null),h=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(h=r.includeHeaders),f){let{[cK]:g,[pK]:v,[uK]:w,[dK]:y,[fK]:_,[hK]:T}=f,C=g;switch(v){case"arraybuffer":C=new TextEncoder().encode(g).buffer;break;case"blob":C=new Blob([g]);break}let E=new bl(w);return Dt(new Su({body:C,headers:E,status:y,statusText:_,url:T}))}return e(n).pipe(wi(g=>{g instanceof Su}))}function vK(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function LF(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function yK(n,e){let{params:t,method:i,responseType:r}=n,o=LF(t),s=n.serializeBody();s instanceof URLSearchParams?s=LF(s):typeof s!="string"&&(s="");let a=[i,r,e,s,o].join("|"),l=_K(a);return l}function _K(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function kF(n){return[{provide:XS,useFactory:()=>(xu("NgHttpTransferCache"),Ne({isCacheActive:!0},n))},{provide:jS,useValue:gK,multi:!0},{provide:pf,multi:!0,useFactory:()=>{let e=Q(Ws),t=Q(XS);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var UF=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(ze(fn))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ZS=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=ze(xK),r},providedIn:"root"})}return n})(),xK=(()=>{class n extends ZS{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Xs.NONE:return i;case Xs.HTML:return _l(i,"HTML")?as(i):nS(this._doc,String(i)).toString();case Xs.STYLE:return _l(i,"Style")?as(i):i;case Xs.SCRIPT:if(_l(i,"Script"))return as(i);throw new Te(5200,!1);case Xs.URL:return _l(i,"URL")?as(i):ny(String(i));case Xs.RESOURCE_URL:if(_l(i,"ResourceURL"))return as(i);throw new Te(5201,!1);default:throw new Te(5202,!1)}}bypassSecurityTrustHtml(t){return _O(t)}bypassSecurityTrustStyle(t){return xO(t)}bypassSecurityTrustScript(t){return wO(t)}bypassSecurityTrustUrl(t){return bO(t)}bypassSecurityTrustResourceUrl(t){return CO(t)}static \u0275fac=function(i){return new(i||n)(ze(fn))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YS=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(YS||{});function BF(...n){let e=[],t=new Set;for(let{\u0275providers:r,\u0275kind:o}of n)t.add(o),r.length&&e.push(r);let i=t.has(YS.HttpTransferCacheOptions);return dc([[],rF(),t.has(YS.NoHttpTransferCache)||i?[]:kF({}),e])}var KS=class extends CustomEvent{constructor(e,o){var s=o,{clientX:t,clientY:i}=s,r=Rd(s,["clientX","clientY"]);super(e,Ct(Ne({},r),{detail:{clientX:t,clientY:i}}))}},wK=({userAgent:n,maxTouchPoints:e})=>/ipad|iphone|ipod/i.test(n)||/^((?!chrome|android).)*safari/i.test(n)&&e>1,bK=700,HF=typeof navigator>"u"?null:navigator,CK=15,JS=class{constructor(){this.isIOS=!!HF&&wK(HF)}addEventListener(e,t,i){let r=this.isIOS?this.listenTouchEvents(e):this.listenContextmenuEvent(e);return e.addEventListener("longtap",i),()=>{r(),e.removeEventListener("longtap",i)}}supports(e){return e==="longtap"}listenContextmenuEvent(e){return this.manager.addEventListener(e,"contextmenu.prevent.stop",({clientX:t,clientY:i})=>{this.dispatchLongtapEvent(e,t,i)})}listenTouchEvents(e){let t=null,i=null,r=()=>{clearTimeout(t),i=null,t=null},o=this.manager.addEventListener(e,"touchstart.zoneless.passive",({touches:u})=>{let f=u[0];if(!f)return;let{clientX:h,clientY:p}=f;i={clientX:h,clientY:p},t=setTimeout(()=>{this.dispatchLongtapEvent(e,h,p),r()},bK)}),s=this.manager.addEventListener(e,"touchmove.zoneless.passive",({touches:u})=>{let f=u[0];if(!f||!i)return;let{clientX:h,clientY:p}=f;Math.hypot(h-i.clientX,p-i.clientY)<=CK||r()}),a=this.manager.addEventListener(e,"touchcancel.zoneless.passive",r),l=this.manager.addEventListener(e,"touchend.zoneless.passive",r);return()=>{o(),s(),a(),l()}}dispatchLongtapEvent(e,t,i){e.dispatchEvent(new KS("longtap",{clientX:t,clientY:i,bubbles:!1,cancelable:!1,composed:!1}))}},My=class{supports(e){return this.regExp.test(e)}getDelay(e){let t=this.regExp.exec(e);if(!t?.groups)throw new Error(`Invalid event: ${e}`);let{time:i,units:r}=t.groups;switch(r){case"ms":return Number(i);case"s":return Number(i)*1e3;default:throw new Error(`Invalid event: ${e}`)}}unwrap(e){return e.replace(this.regExp,"")}},QS=class extends My{constructor(){super(...arguments),this.regExp=/\.debounce~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,i){let r,o=this.manager.addEventListener(e,this.unwrap(t),s=>{clearTimeout(r),r=setTimeout(()=>{i(s)},this.getDelay(t))});return()=>{clearTimeout(r),o()}}},El=class{supports(e){return e.includes(this.modifier)}unwrap(e){return e.split(".").filter(t=>!this.modifier.includes(t)).join(".")}},EK=new Ae("",{factory:()=>{let n=Q(fn);return e=>e==="body"?n.body:n.defaultView[e]||n.createElement("div")}}),MK=(()=>{class n extends El{constructor(){super(...arguments),this.handler=Q(EK),this.modifier=">"}addEventListener(t,i,r){return this.manager.addEventListener(this.handler(i.split(">")[0]),i.split(">")?.[1]??"",r)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),SK=(()=>{class n extends El{constructor(){super(...arguments),this.modifier="capture.once.passive"}supports(t){return t.includes(".")&&!this.unwrap(t).includes(".")}addEventListener(t,i,r){let o=this.unwrap(i),s=i.includes(".capture");return t.addEventListener(o,r,{capture:s,once:i.includes(".once"),passive:i.includes(".passive")}),()=>t.removeEventListener(o,r,{capture:s})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),TK=(()=>{class n extends El{constructor(){super(...arguments),this.modifier=".prevent"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.preventDefault(),r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),IK=(()=>{class n extends El{constructor(){super(...arguments),this.modifier="resize"}supports(t){return t==="resize"}addEventListener(t,i,r){if(typeof ResizeObserver>"u"||!(t instanceof Element))return t.addEventListener(i,r),()=>t.removeEventListener(i,r);let o=new ResizeObserver(r);return o.observe(t),()=>o.disconnect()}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),DK=(()=>{class n extends El{constructor(){super(...arguments),this.modifier=".self"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.target===o.currentTarget&&r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),zF=(()=>{class n extends El{constructor(){super(...arguments),this.modifier=".silent"}addEventListener(t,i,r){return n.ngZone=this.manager.getZone(),n.ngZone.runOutsideAngular(()=>this.manager.addEventListener(t,this.unwrap(i),r))}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),AK=(()=>{class n extends El{constructor(){super(...arguments),this.modifier=".stop"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.stopPropagation(),r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),eT=class extends My{constructor(){super(...arguments),this.regExp=/\.throttle~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,i){let r,o=this.manager.addEventListener(e,this.unwrap(t),s=>{r===void 0&&(i(s),r=setTimeout(()=>{r=void 0},this.getDelay(t)))});return()=>{clearTimeout(r),o()}}},RK=(()=>{class n extends zF{constructor(){super(...arguments),this.modifier=".zoneless"}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),PK=[zF,RK,MK,SK,TK,IK,DK,AK,JS,QS,eT],OK=PK.map(n=>({provide:Eu,multi:!0,useClass:n}));function jF(){return OK}var Zt="primary",lm=Symbol("RouteTitle"),oT=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Du(n){return new oT(n)}function KF(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function NK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Na(n[t],e[t]))return!1;return!0}function Na(n,e){let t=n?sT(n):void 0,i=e?sT(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!JF(n[r],e[r]))return!1;return!0}function sT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function JF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function QF(n){return n.length>0?n[n.length-1]:null}function vc(n){return XC(n)?n:hc(n)?ii(Promise.resolve(n)):Dt(n)}var FK={exact:t2,subset:n2},e2={exact:LK,subset:kK,ignored:()=>!0};function GF(n,e,t){return FK[t.paths](n.root,e.root,t.matrixParams)&&e2[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function LK(n,e){return Na(n,e)}function t2(n,e,t){if(!Tu(n.segments,e.segments)||!Iy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!t2(n.children[i],e.children[i],t))return!1;return!0}function kK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JF(n[t],e[t]))}function n2(n,e,t){return i2(n,e,e.segments,t)}function i2(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Tu(r,t)||e.hasChildren()||!Iy(r,t,i))}else if(n.segments.length===t.length){if(!Tu(n.segments,t)||!Iy(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!n2(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Tu(n.segments,r)||!Iy(n.segments,r,i)||!n.children[Zt]?!1:i2(n.children[Zt],e,o,i)}}function Iy(n,e,t){return e.every((i,r)=>e2[t](n[r].parameters,i.parameters))}var La=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Nn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Du(this.queryParams),this._queryParamMap}toString(){return VK.serialize(this)}},Nn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dy(this)}},mc=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Du(this.parameters),this._parameterMap}toString(){return o2(this)}};function UK(n,e){return Tu(n,e)&&n.every((t,i)=>Na(t.parameters,e[i].parameters))}function Tu(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function BK(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Zt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}var cm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:()=>new Au,providedIn:"root"})}return n})(),Au=class{parse(e){let t=new lT(e);return new La(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Yp(e.root,!0)}`,i=jK(e.queryParams),r=typeof e.fragment=="string"?`#${HK(e.fragment)}`:"";return`${t}${i}${r}`}},VK=new Au;function Dy(n){return n.segments.map(e=>o2(e)).join("/")}function Yp(n,e){if(!n.hasChildren())return Dy(n);if(e){let t=n.children[Zt]?Yp(n.children[Zt],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Zt&&i.push(`${r}:${Yp(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=BK(n,(i,r)=>r===Zt?[Yp(n.children[Zt],!1)]:[`${r}:${Yp(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Zt]!=null?`${Dy(n)}/${t[0]}`:`${Dy(n)}/(${t.join("//")})`}}function r2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sy(n){return r2(n).replace(/%3B/gi,";")}function HK(n){return encodeURI(n)}function aT(n){return r2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ay(n){return decodeURIComponent(n)}function WF(n){return Ay(n.replace(/\+/g,"%20"))}function o2(n){return`${aT(n.path)}${zK(n.parameters)}`}function zK(n){return Object.entries(n).map(([e,t])=>`;${aT(e)}=${aT(t)}`).join("")}function jK(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Sy(t)}=${Sy(r)}`).join("&"):`${Sy(t)}=${Sy(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var GK=/^[^\/()?;#]+/;function tT(n){let e=n.match(GK);return e?e[0]:""}var WK=/^[^\/()?;=#]+/;function $K(n){let e=n.match(WK);return e?e[0]:""}var qK=/^[^=?&#]+/;function XK(n){let e=n.match(qK);return e?e[0]:""}var YK=/^[^&#]+/;function ZK(n){let e=n.match(YK);return e?e[0]:""}var lT=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nn([],{}):new Nn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Zt]=new Nn(e,t)),i}parseSegment(){let e=tT(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Te(4009,!1);return this.capture(e),new mc(Ay(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=$K(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=tT(this.remaining);r&&(i=r,this.capture(i))}e[Ay(t)]=Ay(i)}parseQueryParam(e){let t=XK(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=ZK(this.remaining);s&&(i=s,this.capture(i))}let r=WF(t),o=WF(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=tT(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Te(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Zt);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Zt]:new Nn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Te(4011,!1)}};function s2(n){return n.segments.length>0?new Nn([],{[Zt]:n}):n}function a2(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=a2(r);if(i===Zt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Nn(n.segments,e);return KK(t)}function KK(n){if(n.numberOfChildren===1&&n.children[Zt]){let e=n.children[Zt];return new Nn(n.segments.concat(e.segments),e.children)}return n}function gc(n){return n instanceof La}function l2(n,e,t=null,i=null){let r=c2(n);return u2(r,e,t,i)}function c2(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new Nn(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=s2(i);return e??r}function u2(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return nT(r,r,r,t,i);let o=JK(e);if(o.toRoot())return nT(r,r,new Nn([],{}),t,i);let s=QK(o,r,n),a=s.processChildren?Kp(s.segmentGroup,s.index,o.commands):f2(s.segmentGroup,s.index,o.commands);return nT(r,s.segmentGroup,a,t,i)}function Py(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Qp(n){return typeof n=="object"&&n!=null&&n.outlets}function nT(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===e?s=t:s=d2(n,e,t);let a=s2(a2(s));return new La(a,o,r)}function d2(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=d2(o,e,t)}),new Nn(n.segments,i)}var Oy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Py(i[0]))throw new Te(4003,!1);let r=i.find(Qp);if(r&&r!==QF(i))throw new Te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function JK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Oy(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Oy(t,e,i)}var Ef=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function QK(n,e,t){if(n.isAbsolute)return new Ef(e,!0,0);if(!t)return new Ef(e,!1,NaN);if(t.parent===null)return new Ef(t,!0,0);let i=Py(n.commands[0])?0:1,r=t.segments.length-1+i;return eJ(t,r,n.numberOfDoubleDots)}function eJ(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Te(4005,!1);r=i.segments.length}return new Ef(i,!1,r-o)}function tJ(n){return Qp(n[0])?n[0].outlets:{[Zt]:n}}function f2(n,e,t){if(n??=new Nn([],{}),n.segments.length===0&&n.hasChildren())return Kp(n,e,t);let i=nJ(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Nn(n.segments.slice(0,i.pathIndex),{});return o.children[Zt]=new Nn(n.segments.slice(i.pathIndex),n.children),Kp(o,0,r)}else return i.match&&r.length===0?new Nn(n.segments,{}):i.match&&!n.hasChildren()?cT(n,e,t):i.match?Kp(n,0,r):cT(n,e,t)}function Kp(n,e,t){if(t.length===0)return new Nn(n.segments,{});{let i=tJ(t),r={};if(Object.keys(i).some(o=>o!==Zt)&&n.children[Zt]&&n.numberOfChildren===1&&n.children[Zt].segments.length===0){let o=Kp(n.children[Zt],e,t);return new Nn(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=f2(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Nn(n.segments,r)}}function nJ(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(Qp(a))break;let l=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!qF(l,u,s))return o;i+=2}else{if(!qF(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function cT(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Qp(o)){let l=iJ(o.outlets);return new Nn(i,l)}if(r===0&&Py(t[0])){let l=n.segments[e];i.push(new mc(l.path,$F(t[0]))),r++;continue}let s=Qp(o)?o.outlets[Zt]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&Py(a)?(i.push(new mc(s,$F(a))),r+=2):(i.push(new mc(s,{})),r++)}return new Nn(i,{})}function iJ(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=cT(new Nn([],{}),0,i))}),e}function $F(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function qF(n,e,t){return n==t.path&&Na(e,t.parameters)}var Ry="imperative",sr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(sr||{}),No=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ru=class extends No{type=sr.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ka=class extends No{urlAfterRedirects;type=sr.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},uo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(uo||{}),em=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(em||{}),Fa=class extends No{reason;code;type=sr.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ml=class extends No{reason;code;type=sr.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Sf=class extends No{error;target;type=sr.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tm=class extends No{urlAfterRedirects;state;type=sr.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ny=class extends No{urlAfterRedirects;state;type=sr.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fy=class extends No{urlAfterRedirects;state;shouldActivate;type=sr.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ly=class extends No{urlAfterRedirects;state;type=sr.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class extends No{urlAfterRedirects;state;type=sr.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uy=class{route;type=sr.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},By=class{route;type=sr.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vy=class{snapshot;type=sr.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{snapshot;type=sr.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zy=class{snapshot;type=sr.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jy=class{snapshot;type=sr.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var nm=class{},Tf=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function rJ(n,e){return n.providers&&!n._injector&&(n._injector=dy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Qs(n){return n.outlet||Zt}function oJ(n,e){let t=n.filter(i=>Qs(i)===e);return t.push(...n.filter(i=>Qs(i)!==e)),t}function um(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Gy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return um(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Af(this.rootInjector)}},Af=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Gy(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(ze(Cr))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=uT(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=uT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=dT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return dT(e,this._root).map(t=>t.value)}};function uT(n,e){if(n===e.value)return e;for(let t of e.children){let i=uT(n,t);if(i)return i}return null}function dT(n,e){if(n===e.value)return[e];for(let t of e.children){let i=dT(n,t);if(i.length)return i.unshift(e),i}return[]}var Oo=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Cf(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var im=class extends Wy{snapshot;constructor(e,t){super(e),this.snapshot=t,_T(this,e)}toString(){return this.snapshot.toString()}};function h2(n){let e=sJ(n),t=new Wn([new mc("",{})]),i=new Wn({}),r=new Wn({}),o=new Wn({}),s=new Wn(""),a=new Zi(t,i,o,s,r,Zt,n,e.root);return a.snapshot=e.root,new im(new Oo(a,[]),e)}function sJ(n){let e={},t={},i={},r="",o=new Iu([],e,i,r,t,Zt,n,null,{});return new rm("",new Oo(o,[]))}var Zi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(at(u=>u[lm]))??Dt(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(at(e=>Du(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(at(e=>Du(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $y(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:Ne(Ne({},e.params),n.params),data:Ne(Ne({},e.data),n.data),resolve:Ne(Ne(Ne(Ne({},n.data),e.data),r?.data),n._resolvedData)}:i={params:Ne({},n.params),data:Ne({},n.data),resolve:Ne(Ne({},n.data),n._resolvedData??{})},r&&m2(r)&&(i.resolve[lm]=r.title),i}var Iu=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[lm]}constructor(e,t,i,r,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Du(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Du(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},rm=class extends Wy{url;constructor(e,t){super(t),this.url=e,_T(this,t)}toString(){return p2(this._root)}};function _T(n,e){e.value._routerState=n,e.children.forEach(t=>_T(n,t))}function p2(n){let e=n.children.length>0?` { ${n.children.map(p2).join(", ")} } `:"";return`${n.value}${e}`}function iT(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Na(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Na(e.params,t.params)||n.paramsSubject.next(t.params),NK(e.url,t.url)||n.urlSubject.next(t.url),Na(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function fT(n,e){let t=Na(n.params,e.params)&&UK(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||fT(n.parent,e.parent))}function m2(n){return typeof n.title=="string"||n.title===null}var g2=new Ae(""),dm=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Zt;activateEvents=new Un;deactivateEvents=new Un;attachEvents=new Un;detachEvents=new Un;routerOutletData=Y3(void 0);parentContexts=Q(Af);location=Q(Oa);changeDetector=Q(or);inputBinder=Q(Zy,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Te(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new hT(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Xi]})}return n})(),hT=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===Zi?this.route:e===Af?this.childContexts:e===g2?this.outletData:this.parent.get(e,t)}},Zy=new Ae("");function aJ(n,e,t){let i=om(n,e._root,t?t._root:void 0);return new im(i,e)}function om(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=lJ(n,e,t);return new Oo(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>om(n,a)),s}}let i=cJ(e.value),r=e.children.map(o=>om(n,o));return new Oo(i,r)}}function lJ(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return om(n,i,r);return om(n,i)})}function cJ(n){return new Zi(new Wn(n.url),new Wn(n.params),new Wn(n.queryParams),new Wn(n.fragment),new Wn(n.data),n.outlet,n.component,n)}var If=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},v2="ngNavigationCancelingError";function qy(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=gc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=y2(!1,uo.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function y2(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[v2]=!0,t.cancellationCode=e,t}function uJ(n){return _2(n)&&gc(n.url)}function _2(n){return!!n&&n[v2]}var dJ=(n,e,t,i)=>at(r=>(new pT(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),pT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),iT(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Cf(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Cf(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Cf(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Cf(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new jy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hy(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(iT(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),iT(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},Xy=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Mf=class{component;route;constructor(e,t){this.component=e,this.route=t}};function fJ(n,e,t){let i=n._root,r=e?e._root:null;return Zp(i,r,t,[i.value])}function hJ(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Rf(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!j4(n)?n:e.get(n):i}function Zp(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Cf(e);return n.children.forEach(s=>{pJ(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Jp(a,t.getContext(s),r)),r}function pJ(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=mJ(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Xy(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Zp(n,e,a?a.children:null,i,r):Zp(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Mf(a.outlet.component,s))}else s&&Jp(e,a,r),r.canActivateChecks.push(new Xy(i)),o.component?Zp(n,null,a?a.children:null,i,r):Zp(n,null,t,i,r);return r}function mJ(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Tu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tu(n.url,e.url)||!Na(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fT(n,e)||!Na(n.queryParams,e.queryParams);case"paramsChange":default:return!fT(n,e)}}function Jp(n,e,t){let i=Cf(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Jp(s,e.children.getContext(o),t):Jp(s,null,t):Jp(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Mf(e.outlet.component,r)):t.canDeactivateChecks.push(new Mf(null,r)):t.canDeactivateChecks.push(new Mf(null,r))}function fm(n){return typeof n=="function"}function gJ(n){return typeof n=="boolean"}function vJ(n){return n&&fm(n.canLoad)}function yJ(n){return n&&fm(n.canActivate)}function _J(n){return n&&fm(n.canActivateChild)}function xJ(n){return n&&fm(n.canDeactivate)}function wJ(n){return n&&fm(n.canMatch)}function x2(n){return n instanceof ks||n?.name==="EmptyError"}var Ty=Symbol("INITIAL_VALUE");function Df(){return xi(n=>Gd(n.map(e=>e.pipe(To(1),ns(Ty)))).pipe(at(e=>{for(let t of e)if(t!==!0){if(t===Ty)return Ty;if(t===!1||bJ(t))return t}return!0}),$n(e=>e!==Ty),To(1)))}function bJ(n){return gc(n)||n instanceof If}function CJ(n,e){return Oi(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Dt(Ct(Ne({},t),{guardsResult:!0})):EJ(s,i,r,n).pipe(Oi(a=>a&&gJ(a)?MJ(i,o,n,e):Dt(a)),at(a=>Ct(Ne({},t),{guardsResult:a})))})}function EJ(n,e,t,i){return ii(n).pipe(Oi(r=>AJ(r.component,r.route,t,e,i)),cl(r=>r!==!0,!0))}function MJ(n,e,t,i){return ii(e).pipe(ac(r=>su(TJ(r.route.parent,i),SJ(r.route,i),DJ(n,r.path,t),IJ(n,r.route,t))),cl(r=>r!==!0,!0))}function SJ(n,e){return n!==null&&e&&e(new zy(n)),Dt(!0)}function TJ(n,e){return n!==null&&e&&e(new Vy(n)),Dt(!0)}function IJ(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Dt(!0);let r=i.map(o=>iv(()=>{let s=um(e)??t,a=Rf(o,s),l=yJ(a)?a.canActivate(e,n):Do(s,()=>a(e,n));return vc(l).pipe(cl())}));return Dt(r).pipe(Df())}function DJ(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>hJ(s)).filter(s=>s!==null).map(s=>iv(()=>{let a=s.guards.map(l=>{let u=um(s.node)??t,f=Rf(l,u),h=_J(f)?f.canActivateChild(i,n):Do(u,()=>f(i,n));return vc(h).pipe(cl())});return Dt(a).pipe(Df())}));return Dt(o).pipe(Df())}function AJ(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Dt(!0);let s=o.map(a=>{let l=um(e)??r,u=Rf(a,l),f=xJ(u)?u.canDeactivate(n,e,t,i):Do(l,()=>u(n,e,t,i));return vc(f).pipe(cl())});return Dt(s).pipe(Df())}function RJ(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Dt(!0);let o=r.map(s=>{let a=Rf(s,n),l=vJ(a)?a.canLoad(e,t):Do(n,()=>a(e,t));return vc(l)});return Dt(o).pipe(Df(),w2(i))}function w2(n){return sp(wi(e=>{if(typeof e!="boolean")throw qy(n,e)}),at(e=>e===!0))}function PJ(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Dt(!0);let o=r.map(s=>{let a=Rf(s,n),l=wJ(a)?a.canMatch(e,t):Do(n,()=>a(e,t));return vc(l)});return Dt(o).pipe(Df(),w2(i))}var sm=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},am=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function bf(n){return sc(new sm(n))}function OJ(n){return sc(new Te(4e3,!1))}function NJ(n){return sc(y2(!1,uo.GuardRejected))}var mT=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Dt(i);if(r.numberOfChildren>1||!r.children[Zt])return OJ(`${e.redirectTo}`);r=r.children[Zt]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let a=t,{queryParams:l,fragment:u,routeConfig:f,url:h,outlet:p,params:g,data:v,title:w}=r,y=Do(o,()=>a({params:g,data:v,queryParams:l,fragment:u,routeConfig:f,url:h,outlet:p,title:w}));if(y instanceof La)throw new am(y);t=y}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new am(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new La(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new Nn(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Te(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},gT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FJ(n,e,t,i,r){let o=b2(n,e,t);return o.matched?(i=rJ(e,i),PJ(i,e,t,r).pipe(at(s=>s===!0?o:Ne({},gT)))):Dt(o)}function b2(n,e,t){if(e.path==="**")return LJ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Ne({},gT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||KF)(t,n,e);if(!r)return Ne({},gT);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?Ne(Ne({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function LJ(n){return{matched:!0,parameters:n.length>0?QF(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function XF(n,e,t,i){return t.length>0&&BJ(n,t,i)?{segmentGroup:new Nn(e,UJ(i,new Nn(t,n.children))),slicedSegments:[]}:t.length===0&&VJ(n,t,i)?{segmentGroup:new Nn(n.segments,kJ(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Nn(n.segments,n.children),slicedSegments:t}}function kJ(n,e,t,i){let r={};for(let o of t)if(Ky(n,e,o)&&!i[Qs(o)]){let s=new Nn([],{});r[Qs(o)]=s}return Ne(Ne({},i),r)}function UJ(n,e){let t={};t[Zt]=e;for(let i of n)if(i.path===""&&Qs(i)!==Zt){let r=new Nn([],{});t[Qs(i)]=r}return t}function BJ(n,e,t){return t.some(i=>Ky(n,e,i)&&Qs(i)!==Zt)}function VJ(n,e,t){return t.some(i=>Ky(n,e,i))}function Ky(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function HJ(n,e,t){return e.length===0&&!n.children[t]}var vT=class{};function zJ(n,e,t,i,r,o,s="emptyOnly"){return new yT(n,e,t,i,r,s,o).recognize()}var jJ=31,yT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new mT(this.urlSerializer,this.urlTree)}noMatchError(e){return new Te(4002,`'${e.segmentGroup}'`)}recognize(){let e=XF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(at(({children:t,rootSnapshot:i})=>{let r=new Oo(i,t),o=new rm("",r),s=l2(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Iu([],Object.freeze({}),Object.freeze(Ne({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Zt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Zt,t).pipe(at(i=>({children:i,rootSnapshot:t})),Bs(i=>{if(i instanceof am)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof sm?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(at(s=>s instanceof Oo?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return ii(o).pipe(ac(s=>{let a=i.children[s],l=oJ(t,s);return this.processSegmentGroup(e,l,a,s,r)}),JC((s,a)=>(s.push(...a),s)),ll(null),KC(),Oi(s=>{if(s===null)return bf(i);let a=C2(s);return GJ(a),Dt(a)}))}processSegment(e,t,i,r,o,s,a){return ii(t).pipe(ac(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,o,s,a).pipe(Bs(u=>{if(u instanceof sm)return Dt(null);throw u}))),cl(l=>!!l),Bs(l=>{if(x2(l))return HJ(i,r,o)?Dt(new vT):bf(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,l){return Qs(i)!==s&&(s===Zt||!Ky(r,o,i))?bf(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,l):bf(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:h,remainingSegments:p}=b2(t,r,o);if(!l)return bf(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jJ&&(this.allowRedirects=!1));let g=new Iu(o,u,Object.freeze(Ne({},this.urlTree.queryParams)),this.urlTree.fragment,YF(r),Qs(r),r.component??r._loadedComponent??null,r,ZF(r)),v=$y(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(v.params),g.data=Object.freeze(v.data);let w=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(r,w).pipe(Oi(y=>this.processSegment(e,i,t,y.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=FJ(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(xi(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(xi(({routes:u})=>{let f=i._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=l,v=new Iu(p,h,Object.freeze(Ne({},this.urlTree.queryParams)),this.urlTree.fragment,YF(i),Qs(i),i.component??i._loadedComponent??null,i,ZF(i)),w=$y(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);let{segmentGroup:y,slicedSegments:_}=XF(t,p,g,u);if(_.length===0&&y.hasChildren())return this.processChildren(f,u,y,v).pipe(at(C=>new Oo(v,C)));if(u.length===0&&_.length===0)return Dt(new Oo(v,[]));let T=Qs(i)===o;return this.processSegment(f,u,y,_,T?Zt:o,!0,v).pipe(at(C=>new Oo(v,C instanceof Oo?[C]:[])))}))):bf(t)))}getChildConfig(e,t,i){return t.children?Dt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Dt({routes:t._loadedRoutes,injector:t._loadedInjector}):RJ(e,t,i,this.urlSerializer).pipe(Oi(r=>r?this.configLoader.loadChildren(e,t).pipe(wi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):NJ(t))):Dt({routes:[],injector:e})}};function GJ(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}function WJ(n){let e=n.value.routeConfig;return e&&e.path===""}function C2(n){let e=[],t=new Set;for(let i of n){if(!WJ(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=C2(i.children);e.push(new Oo(i.value,r))}return e.filter(i=>!t.has(i))}function YF(n){return n.data||{}}function ZF(n){return n.resolve||{}}function $J(n,e,t,i,r,o){return Oi(s=>zJ(n,e,t,i,s.extractedUrl,r,o).pipe(at(({state:a,tree:l})=>Ct(Ne({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function qJ(n,e){return Oi(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Dt(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of E2(l))s.add(u);let a=0;return ii(s).pipe(ac(l=>o.has(l)?XJ(l,i,n,e):(l.data=$y(l,l.parent,n).resolve,Dt(void 0))),wi(()=>a++),$d(1),Oi(l=>a===s.size?Dt(t):_i))})}function E2(n){let e=n.children.map(t=>E2(t)).flat();return[n,...e]}function XJ(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!m2(r)&&(o[lm]=r.title),YJ(o,n,e,i).pipe(at(s=>(n._resolvedData=s,n.data=$y(n,n.parent,t).resolve,null)))}function YJ(n,e,t,i){let r=sT(n);if(r.length===0)return Dt({});let o={};return ii(r).pipe(Oi(s=>ZJ(n[s],e,t,i).pipe(cl(),wi(a=>{if(a instanceof If)throw qy(new Au,a);o[s]=a}))),$d(1),at(()=>o),Bs(s=>x2(s)?_i:sc(s)))}function ZJ(n,e,t,i){let r=um(e)??i,o=Rf(n,r),s=o.resolve?o.resolve(e,t):Do(r,()=>o(e,t));return vc(s)}function rT(n){return xi(e=>{let t=n(e);return t?ii(t).pipe(at(()=>e)):Dt(e)})}var xT=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Zt);return i}getResolvedTitleForRoute(t){return t.data[lm]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:()=>Q(M2),providedIn:"root"})}return n})(),M2=(()=>{class n extends xT{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(ze(UF))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hm=new Ae("",{providedIn:"root",factory:()=>({})}),wT=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=vn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&ye(0,"router-outlet")},dependencies:[dm],encapsulation:2})}return n})();function bT(n){let e=n.children&&n.children.map(bT),t=e?Ct(Ne({},n),{children:e}):Ne({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=wT),t}var pm=new Ae(""),S2=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Q(nF);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=vc(t.loadComponent()).pipe(at(I2),wi(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),lc(()=>{this.componentLoaders.delete(t)})),r=new kd(i,()=>new On).pipe(Ld());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Dt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=T2(i,this.compiler,t,this.onLoadEndListener).pipe(lc(()=>{this.childrenLoaders.delete(i)})),s=new kd(o,()=>new On).pipe(Ld());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T2(n,e,t,i){return vc(n.loadChildren()).pipe(at(I2),Oi(r=>r instanceof wS||Array.isArray(r)?Dt(r):ii(e.compileModuleAsync(r))),at(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(pm,[],{optional:!0,self:!0}).flat()),{routes:s.map(bT),injector:o}}))}function KJ(n){return n&&typeof n=="object"&&"default"in n}function I2(n){return KJ(n)?n.default:n}var Jy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:()=>Q(JJ),providedIn:"root"})}return n})(),JJ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),D2=new Ae("");var A2=new Ae(""),R2=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new On;transitionAbortSubject=new On;configLoader=Q(S2);environmentInjector=Q(Cr);destroyRef=Q(vl);urlSerializer=Q(cm);rootContexts=Q(Af);location=Q(co);inputBindingEnabled=Q(Zy,{optional:!0})!==null;titleStrategy=Q(xT);options=Q(hm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Q(Jy);createViewTransition=Q(D2,{optional:!0});navigationErrorHandler=Q(A2,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Dt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new Uy(r)),i=r=>this.events.next(new By(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Ct(Ne({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(t){return this.transitions=new Wn(null),this.transitions.pipe($n(i=>i!==null),xi(i=>{let r=!1,o=!1;return Dt(i).pipe(xi(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",uo.SupersededByNewNavigation),_i;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Ct(Ne({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload"){let u="";return this.events.next(new Ml(s.id,this.urlSerializer.serialize(s.rawUrl),u,em.IgnoredSameUrlNavigation)),s.resolve(!1),_i}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Dt(s).pipe(xi(u=>(this.events.next(new Ru(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?_i:Promise.resolve(u))),$J(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),wi(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Ct(Ne({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let f=new tm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:f,source:h,restoredState:p,extras:g}=s,v=new Ru(u,this.urlSerializer.serialize(f),h,p);this.events.next(v);let w=h2(this.rootComponentType).snapshot;return this.currentTransition=i=Ct(Ne({},s),{targetSnapshot:w,urlAfterRedirects:f,extras:Ct(Ne({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Dt(i)}else{let u="";return this.events.next(new Ml(s.id,this.urlSerializer.serialize(s.extractedUrl),u,em.IgnoredByUrlHandlingStrategy)),s.resolve(!1),_i}}),wi(s=>{let a=new Ny(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),at(s=>(this.currentTransition=i=Ct(Ne({},s),{guards:fJ(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),CJ(this.environmentInjector,s=>this.events.next(s)),wi(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw qy(this.urlSerializer,s.guardsResult);let a=new Fy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),$n(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",uo.GuardRejected),!1)),rT(s=>{if(s.guards.canActivateChecks.length!==0)return Dt(s).pipe(wi(a=>{let l=new Ly(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),xi(a=>{let l=!1;return Dt(a).pipe(qJ(this.paramsInheritanceStrategy,this.environmentInjector),wi({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",uo.NoDataFromResolver)}}))}),wi(a=>{let l=new ky(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),rT(s=>{let a=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(wi(f=>{l.component=f}),at(()=>{})));for(let f of l.children)u.push(...a(f));return u};return Gd(a(s.targetSnapshot.root)).pipe(ll(null),To(1))}),rT(()=>this.afterPreactivation()),xi(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?ii(l).pipe(at(()=>i)):Dt(i)}),at(s=>{let a=aJ(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=Ct(Ne({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),wi(()=>{this.events.next(new nm)}),dJ(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),To(1),wi({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ka(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),is(this.transitionAbortSubject.pipe(wi(s=>{throw s}))),lc(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",uo.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bs(s=>{if(this.destroyed)return i.resolve(!1),_i;if(o=!0,_2(s))this.events.next(new Fa(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),uJ(s)?this.events.next(new Tf(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Sf(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let l=Do(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof If){let{message:u,cancellationCode:f}=qy(this.urlSerializer,l);this.events.next(new Fa(i.id,this.urlSerializer.serialize(i.extractedUrl),u,f)),this.events.next(new Tf(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return _i}))}))}cancelNavigationTransition(t,i,r){let o=new Fa(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QJ(n){return n!==Ry}var P2=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:()=>Q(eQ),providedIn:"root"})}return n})(),Yy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},eQ=(()=>{class n extends Yy{static \u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})();static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),O2=(()=>{class n{urlSerializer=Q(cm);options=Q(hm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Q(co);urlHandlingStrategy=Q(Jy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new La;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof La?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=h2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:()=>Q(tQ),providedIn:"root"})}return n})(),tQ=(()=>{class n extends O2{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Ru?this.updateStateMemento():t instanceof Ml?this.commitTransition(i):t instanceof tm?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof nm?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Fa&&(t.code===uo.GuardRejected||t.code===uo.NoDataFromResolver)?this.restoreHistory(i):t instanceof Sf?this.restoreHistory(i,!0):t instanceof ka&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=Ne(Ne({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",l)}else{let a=Ne(Ne({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})();static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CT(n,e){n.events.pipe($n(t=>t instanceof ka||t instanceof Fa||t instanceof Sf||t instanceof Ml),at(t=>t instanceof ka||t instanceof Ml?0:(t instanceof Fa?t.code===uo.Redirect||t.code===uo.SupersededByNewNavigation:!1)?2:1),$n(t=>t!==2),To(1)).subscribe(()=>{e()})}var nQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Q(CS);stateManager=Q(O2);options=Q(hm,{optional:!0})||{};pendingTasks=Q(yl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Q(R2);urlSerializer=Q(cm);location=Q(co);urlHandlingStrategy=Q(Jy);_events=new On;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Q(P2);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Q(pm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Q(Zy,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new di;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Fa&&i.code!==uo.Redirect&&i.code!==uo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ka)this.navigated=!0;else if(i instanceof Tf){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=Ne({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||QJ(r.source)},s);this.scheduleNavigation(a,Ry,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}oQ(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ry,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=Ne({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(bT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=Ne(Ne({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let h;try{let p=r?r.snapshot:this.routerState.snapshot.root;h=c2(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return u2(h,t,f,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=gc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Ry,null,i)}navigate(t,i={skipLocationChange:!1}){return rQ(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=Ne({},nQ):i===!1?r=Ne({},iQ):r=i,gc(t))return GF(this.currentUrlTree,t,r);let o=this.parseUrl(t);return GF(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((h,p)=>{a=h,l=p});let f=this.pendingTasks.add();return CT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rQ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Te(4008,!1)}function oQ(n){return!(n instanceof nm)&&!(n instanceof Tf)}var ds=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new On;constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof ka&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(gc(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:AO(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:gc(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(ue(gr),ue(Zi),$M("tabindex"),ue(Sr),ue(Yt),ue(gf))};static \u0275dir=gt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&Me("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Tr("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",mf],skipLocationChange:[2,"skipLocationChange","skipLocationChange",mf],replaceUrl:[2,"replaceUrl","replaceUrl",mf],routerLink:"routerLink"},features:[Xi]})}return n})();var aQ=new Ae("");function ET(n,...e){return dc([{provide:pm,multi:!0,useValue:n},[],{provide:Zi,useFactory:lQ,deps:[gr]},{provide:pf,multi:!0,useFactory:cQ},e.map(t=>t.\u0275providers)])}function lQ(n){return n.routerState.root}function cQ(){let n=Q(os);return e=>{let t=n.get(Ws);if(e!==t.components[0])return;let i=n.get(gr),r=n.get(uQ);n.get(dQ)===1&&i.initialNavigation(),n.get(fQ,null,Jt.Optional)?.setUpPreloading(),n.get(aQ,null,Jt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var uQ=new Ae("",{factory:()=>new On}),dQ=new Ae("",{providedIn:"root",factory:()=>1});var fQ=new Ae("");function mm(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&AM(mm);let i=t?e?.injector?.get(vl)??Q(vl):null,r=hQ(e?.equal),o;e?.requireSync?o=ss({kind:0},{equal:r}):o=ss({kind:1,value:e?.initialValue},{equal:r});let s=n.subscribe({next:a=>o.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;o.set({kind:2,error:a})}});if(e?.requireSync&&o().kind===0)throw new Te(601,!1);return i?.onDestroy(s.unsubscribe.bind(s)),wl(()=>{let a=o();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new Te(601,!1)}},{equal:e?.equal})}function hQ(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var fCe=parseInt(tF.major,10)>=19?{}:{allowSignalWrites:!0},F2={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},L2=new bp;var hCe=Ct(Ne({},F2),{toJSON:()=>F2}),gm=()=>!1,MT=()=>!0;var W2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(ue(Sr),ue(Yt))};static \u0275dir=gt({type:n})}return n})(),d_=(()=>{class n extends W2{static \u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})();static \u0275dir=gt({type:n,features:[Rn]})}return n})(),Nf=new Ae("");var pQ={provide:Nf,useExisting:oo(()=>fo),multi:!0};function mQ(){let n=us()?us().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var gQ=new Ae(""),fo=(()=>{class n extends W2{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!mQ())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(ue(Sr),ue(Yt),ue(gQ,8))};static \u0275dir=gt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Me("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[_n([pQ]),Rn]})}return n})();function TT(n){return n==null||IT(n)===0}function IT(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ou=new Ae(""),f_=new Ae(""),vQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,St=class{static min(e){return $2(e)}static max(e){return q2(e)}static required(e){return yQ(e)}static requiredTrue(e){return _Q(e)}static email(e){return xQ(e)}static minLength(e){return wQ(e)}static maxLength(e){return X2(e)}static pattern(e){return bQ(e)}static nullValidator(e){return e_()}static compose(e){return eL(e)}static composeAsync(e){return tL(e)}};function $2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function q2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function yQ(n){return TT(n.value)?{required:!0}:null}function _Q(n){return n.value===!0?null:{required:!0}}function xQ(n){return TT(n.value)||vQ.test(n.value)?null:{email:!0}}function wQ(n){return e=>{let t=e.value?.length??IT(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function X2(n){return e=>{let t=e.value?.length??IT(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function bQ(n){if(!n)return e_;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(TT(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function e_(n){return null}function Y2(n){return n!=null}function Z2(n){return hc(n)?ii(n):n}function K2(n){let e={};return n.forEach(t=>{e=t!=null?Ne(Ne({},e),t):e}),Object.keys(e).length===0?null:e}function J2(n,e){return e.map(t=>t(n))}function CQ(n){return!n.validate}function Q2(n){return n.map(e=>CQ(e)?e:t=>e.validate(t))}function eL(n){if(!n)return null;let e=n.filter(Y2);return e.length==0?null:function(t){return K2(J2(t,e))}}function DT(n){return n!=null?eL(Q2(n)):null}function tL(n){if(!n)return null;let e=n.filter(Y2);return e.length==0?null:function(t){let i=J2(t,e).map(Z2);return YC(i).pipe(at(K2))}}function AT(n){return n!=null?tL(Q2(n)):null}function k2(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nL(n){return n._rawValidators}function iL(n){return n._rawAsyncValidators}function ST(n){return n?Array.isArray(n)?n:[n]:[]}function t_(n,e){return Array.isArray(n)?n.includes(e):n===e}function U2(n,e){let t=ST(e);return ST(n).forEach(r=>{t_(t,r)||t.push(r)}),t}function B2(n,e){return ST(e).filter(t=>!t_(n,t))}var n_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Sl=class extends n_{name;get formDirective(){return null}get path(){return null}},Pu=class extends n_{_parent=null;name=null;valueAccessor=null},i_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},EQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},RCe=Ct(Ne({},EQ),{"[class.ng-submitted]":"isSubmitted"}),fs=(()=>{class n extends i_{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(ue(Pu,2))};static \u0275dir=gt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&In("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Rn]})}return n})(),hs=(()=>{class n extends i_{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(ue(Sl,10))};static \u0275dir=gt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&In("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Rn]})}return n})();var vm="VALID",Qy="INVALID",Pf="PENDING",ym="DISABLED",_c=class{},r_=class extends _c{value;source;constructor(e,t){super(),this.value=e,this.source=t}},xm=class extends _c{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},wm=class extends _c{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Of=class extends _c{status;source;constructor(e,t){super(),this.status=e,this.source=t}},o_=class extends _c{source;constructor(e){super(),this.source=e}},s_=class extends _c{source;constructor(e){super(),this.source=e}};function rL(n){return(h_(n)?n.validators:n)||null}function MQ(n){return Array.isArray(n)?DT(n):n||null}function oL(n,e){return(h_(e)?e.asyncValidators:n)||null}function SQ(n){return Array.isArray(n)?AT(n):n||null}function h_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function TQ(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Te(1e3,"");if(!i[t])throw new Te(1001,"")}function IQ(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Te(1002,"")})}var a_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ur(this.statusReactive)}set status(e){Ur(()=>this.statusReactive.set(e))}_status=wl(()=>this.statusReactive());statusReactive=ss(void 0);get valid(){return this.status===vm}get invalid(){return this.status===Qy}get pending(){return this.status==Pf}get disabled(){return this.status===ym}get enabled(){return this.status!==ym}errors;get pristine(){return Ur(this.pristineReactive)}set pristine(e){Ur(()=>this.pristineReactive.set(e))}_pristine=wl(()=>this.pristineReactive());pristineReactive=ss(!0);get dirty(){return!this.pristine}get touched(){return Ur(this.touchedReactive)}set touched(e){Ur(()=>this.touchedReactive.set(e))}_touched=wl(()=>this.touchedReactive());touchedReactive=ss(!1);get untouched(){return!this.touched}_events=new On;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(U2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(U2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(B2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(B2(e,this._rawAsyncValidators))}hasValidator(e){return t_(this._rawValidators,e)}hasAsyncValidator(e){return t_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ct(Ne({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new wm(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new wm(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ct(Ne({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new xm(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new xm(!0,i))}markAsPending(e={}){this.status=Pf;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Of(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ct(Ne({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ym,this.errors=null,this._forEachChild(r=>{r.disable(Ct(Ne({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new r_(this.value,i)),this._events.next(new Of(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ct(Ne({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=vm,this._forEachChild(i=>{i.enable(Ct(Ne({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ct(Ne({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vm||this.status===Pf)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new r_(this.value,t)),this._events.next(new Of(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ct(Ne({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ym:vm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Pf,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=Z2(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Of(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Un,this.statusChanges=new Un}_calculateStatus(){return this._allControlsDisabled()?ym:this.errors?Qy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pf)?Pf:this._anyControlsHaveStatus(Qy)?Qy:vm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new xm(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new wm(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){h_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=MQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=SQ(this._rawAsyncValidators)}},fi=class extends a_{constructor(e,t,i){super(rL(t),oL(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){IQ(this,!0,e),Object.keys(e).forEach(i=>{TQ(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var bm=new Ae("",{providedIn:"root",factory:()=>p_}),p_="always";function sL(n,e){return[...e.path,n]}function l_(n,e,t=p_){RT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),AQ(n,e),PQ(n,e),RQ(n,e),DQ(n,e)}function V2(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),u_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function c_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DQ(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function RT(n,e){let t=nL(n);e.validator!==null?n.setValidators(k2(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=iL(n);e.asyncValidator!==null?n.setAsyncValidators(k2(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();c_(e._rawValidators,r),c_(e._rawAsyncValidators,r)}function u_(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=nL(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=iL(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return c_(e._rawValidators,i),c_(e._rawAsyncValidators,i),t}function AQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&aL(n,e)})}function RQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&aL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function aL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function PQ(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function lL(n,e){n==null,RT(n,e)}function OQ(n,e){return u_(n,e)}function cL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function NQ(n){return Object.getPrototypeOf(n.constructor)===d_}function uL(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function dL(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===fo?t=o:NQ(o)?i=o:r=o}),r||i||t||null}function FQ(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var LQ={provide:Sl,useExisting:oo(()=>PT)},_m=Promise.resolve(),PT=(()=>{class n extends Sl{callSetDisabledState;get submitted(){return Ur(this.submittedReactive)}_submitted=wl(()=>this.submittedReactive());submittedReactive=ss(!1);_directives=new Set;form;ngSubmit=new Un;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new fi({},DT(t),AT(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){_m.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),l_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){_m.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){_m.then(()=>{let i=this._findContainer(t.path),r=new fi({});lL(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){_m.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){_m.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),uL(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new o_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new s_(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(ue(Ou,10),ue(f_,10),ue(bm,8))};static \u0275dir=gt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&Me("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_n([LQ]),Rn]})}return n})();function H2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function z2(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var En=class extends a_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(rL(t),oL(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),h_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(z2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){H2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){H2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){z2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var kQ=n=>n instanceof En;var UQ={provide:Pu,useExisting:oo(()=>Cm)},j2=Promise.resolve(),Cm=(()=>{class n extends Pu{_changeDetectorRef;callSetDisabledState;control=new En;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Un;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=dL(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),cL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){l_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){j2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&mf(i);j2.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?sL(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(ue(Sl,9),ue(Ou,10),ue(f_,10),ue(Nf,10),ue(or,8),ue(bm,8))};static \u0275dir=gt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[_n([UQ]),Rn,Xi]})}return n})();var ps=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),BQ={provide:Nf,useExisting:oo(()=>Em),multi:!0},Em=(()=>{class n extends d_{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})();static \u0275dir=gt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&Me("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[_n([BQ]),Rn]})}return n})();var fL=new Ae("");var VQ={provide:Sl,useExisting:oo(()=>Fo)},Fo=(()=>{class n extends Sl{callSetDisabledState;get submitted(){return Ur(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=wl(()=>this._submittedReactive());_submittedReactive=ss(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Un;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(u_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return l_(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){V2(t.control||null,t,!1),FQ(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),uL(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new o_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new s_(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(V2(i||null,t),kQ(r)&&(l_(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);lL(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&OQ(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){RT(this.form,this),this._oldForm&&u_(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(ue(Ou,10),ue(f_,10),ue(bm,8))};static \u0275dir=gt({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Me("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_n([VQ]),Rn,Xi]})}return n})();var HQ={provide:Pu,useExisting:oo(()=>Lo)},Lo=(()=>{class n extends Pu{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Un;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=dL(this,o)}ngOnChanges(t){this._added||this._setUpControl(),cL(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return sL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(ue(Sl,13),ue(Ou,10),ue(f_,10),ue(Nf,10),ue(fL,8))};static \u0275dir=gt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[_n([HQ]),Rn,Xi]})}return n})();var zQ={provide:Nf,useExisting:oo(()=>m_),multi:!0};function hL(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function jQ(n){return n.split(":")[0]}var m_=(()=>{class n extends d_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=hL(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=jQ(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})();static \u0275dir=gt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&Me("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[_n([zQ]),Rn]})}return n})(),pL=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(hL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ue(Yt),ue(Sr),ue(m_,9))};static \u0275dir=gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),GQ={provide:Nf,useExisting:oo(()=>mL),multi:!0};function G2(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function WQ(n){return n.split(":")[0]}var mL=(()=>{class n extends d_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);r.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=WQ(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})();static \u0275dir=gt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&Me("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[_n([GQ]),Rn]})}return n})(),gL=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(G2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(G2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ue(Yt),ue(Sr),ue(mL,9))};static \u0275dir=gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function $Q(n){return typeof n=="number"?n:parseInt(n,10)}function vL(n){return typeof n=="number"?n:parseFloat(n)}var OT=(()=>{class n{_validator=e_;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):e_,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,features:[Xi]})}return n})(),qQ={provide:Ou,useExisting:oo(()=>NT),multi:!0},NT=(()=>{class n extends OT{max;inputName="max";normalizeInput=t=>vL(t);createValidator=t=>q2(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})();static \u0275dir=gt({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Tr("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[_n([qQ]),Rn]})}return n})(),XQ={provide:Ou,useExisting:oo(()=>Mm),multi:!0},Mm=(()=>{class n extends OT{min;inputName="min";normalizeInput=t=>vL(t);createValidator=t=>$2(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})();static \u0275dir=gt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Tr("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[_n([XQ]),Rn]})}return n})();var YQ={provide:Ou,useExisting:oo(()=>FT),multi:!0},FT=(()=>{class n extends OT{maxlength;inputName="maxlength";normalizeInput=t=>$Q(t);createValidator=t=>X2(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})();static \u0275dir=gt({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Tr("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[_n([YQ]),Rn]})}return n})();var yL=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=pr({type:n});static \u0275inj=hr({})}return n})();var Ff=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bm,useValue:t.callSetDisabledState??p_}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=pr({type:n});static \u0275inj=hr({imports:[yL]})}return n})(),ho=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:bm,useValue:t.callSetDisabledState??p_}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=pr({type:n});static \u0275inj=hr({imports:[yL]})}return n})();function LT(n,e,t){return Math.min(t,Math.max(e,n))}function Nu(n){return n===void 0?new Ae(""):qn(()=>n)}function qn(n){return n?new Ae("",{factory:n}):new Ae("")}function xL(n){return n!=null}function ea(n,e,t=!1){return{provide:n,useExisting:e,multi:t}}function ZQ(n){let e=[],t=!1,i;return function(...o){return t&&e.length===o.length&&o.every((a,l)=>a===e[l])||(e=o,i=n.apply(this,o),t=!0),i}}function _L(n,e,t=!0){return function(){let r=n.call(this);return Object.defineProperty(this,e,{enumerable:t,value:r}),r}}function wL(n,e,t){if(typeof n=="function"){let l=e;if(l.kind==="getter")return _L(n,l.name);if(l.kind==="method")return ZQ(n);throw new g_}let{get:i,enumerable:r,value:o}=t,s=e;if(i)return{configurable:!0,enumerable:r,get:_L(i,s,r)};if(typeof o!="function")throw new g_;let a=o;return{configurable:!0,enumerable:r,get(){let l=[],u=!1,f,h=(...p)=>(u&&l.length===p.length&&p.every((v,w)=>v===l[w])||(l=p,f=a.apply(this,p),u=!0),f);return Object.defineProperty(this,s,{configurable:!0,value:h}),h}}}var g_=class extends Error{constructor(){super("")}};var kCe=qn(()=>{let n=new Map;return Q(vl).onDestroy(()=>n.forEach(e=>e.destroy())),n});function ci(n,e,t={}){return Us(n,e,t)}function bL(n,e=Boolean){return sp(xi(t=>e(t)?n(t):_i))}var WCe={now:cp.now.bind(cp),schedule(n,e,t){return cp.schedule(function(i){return Ur(()=>n.call(this,i))},e,t)}};var kT=class{constructor(e,t=al){this.zoneConditionFn=e,this.scheduler=t}now(){return this.scheduler.now()}schedule(...e){return this.zoneConditionFn(()=>this.scheduler.schedule(...e))}};function v_(n=Q(Kn),e=al){return new kT(n.runOutsideAngular.bind(n),e)}var jt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(jt||{}),ms="*";function UT(n,e){return{type:jt.Trigger,name:n,definitions:e,options:{}}}function y_(n,e=null){return{type:jt.Animate,styles:e,timings:n}}function CL(n,e=null){return{type:jt.Sequence,steps:n,options:e}}function xc(n){return{type:jt.Style,styles:n,offset:null}}function BT(n,e,t){return{type:jt.State,name:n,styles:e,options:t}}function __(n,e,t=null){return{type:jt.Transition,expr:n,animation:e,options:t}}var Ua=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Fu=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},kf="!";var gs=new Ae("[WA_WINDOW]",{factory:()=>{let{defaultView:n}=Q(fn);if(!n)throw new Error("Window is not available");return n}}),ko=gs,sEe=new Ae("[WA_ANIMATION_FRAME]",{factory:()=>{let{requestAnimationFrame:n,cancelAnimationFrame:e}=Q(ko);return new Lt(i=>{let r=NaN,o=s=>{i.next(s),r=n(o)};return r=n(o),()=>{e(r)}}).pipe(Ma())}});var aEe=new Ae("[WA_CACHES]",{factory:()=>Q(ko).caches});var lEe=new Ae("[WA_CRYPTO]",{factory:()=>Q(ko).crypto});var cEe=new Ae("[WA_CSS]",{factory:()=>Q(ko).CSS??{escape:n=>n,supports:()=>!1}});var uEe=new Ae("[WA_HISTORY]",{factory:()=>Q(ko).history});var dEe=new Ae("[WA_LOCAL_STORAGE]",{factory:()=>Q(ko).localStorage});var fEe=new Ae("[WA_LOCATION]",{factory:()=>Q(ko).location});var Uf=new Ae("[WA_NAVIGATOR]",{factory:()=>Q(ko).navigator}),EL=Uf,hEe=new Ae("[WA_MEDIA_DEVICES]",{factory:()=>Q(EL).mediaDevices});var pEe=new Ae("[WA_NETWORK_INFORMATION]",{factory:()=>Q(Uf).connection||null});var ML=new Ae("[WA_PAGE_VISIBILITY]",{factory:()=>{let n=Q(fn);return Us(n,"visibilitychange").pipe(ns(0),at(()=>n.visibilityState!=="hidden"),Wd(),dp({refCount:!1,bufferSize:1}))}});var mEe=new Ae("[WA_PERFORMANCE]",{factory:()=>Q(ko).performance});var gEe=new Ae("[WA_SCREEN]",{factory:()=>Q(ko).screen});var vEe=new Ae("[WA_SESSION_STORAGE]",{factory:()=>Q(ko).sessionStorage});var yEe=new Ae("[WA_SPEECH_RECOGNITION]: [SPEECH_RECOGNITION]",{factory:()=>{let n=Q(ko);return n.speechRecognition||n.webkitSpeechRecognition||null}});var _Ee=new Ae("[WA_SPEECH_SYNTHESIS]",{factory:()=>Q(ko).speechSynthesis});var Bf=new Ae("[WA_USER_AGENT]",{factory:()=>Q(EL).userAgent});var KQ=/^((?!chrome|android).)*safari/i,JQ=/ipad|iphone|ipod/i;function VT({userAgent:n,maxTouchPoints:e}){return JQ.test(n)||KQ.test(n)&&e>1}var QQ=new Ae("",{factory:()=>VT(Q(Uf))}),eee=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/,tee=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/,nee=new Ae("",{factory:()=>eee.test(Q(Bf).toLowerCase())||tee.test(Q(Bf).slice(0,4).toLowerCase())}),MEe=new Ae("",{factory:()=>Q(nee)&&!Q(QQ)});var SEe=new Ae("",{factory:()=>{let n=Q(gs).matchMedia("(pointer: coarse)");return mm(Us(n,"change").pipe(at(()=>n.matches)),{initialValue:n.matches})}}),TEe=new Ae("",{factory:()=>!!Q(gs)?.webkitConvertPointFromNodeToPage});function SL(n){let e=n?.ownerDocument.defaultView;return!!n&&!!e&&n instanceof e.HTMLElement}function x_(n){return n.composedPath()[0]}function HT(n){return"getRootNode"in n&&n.isConnected?n.getRootNode():n.ownerDocument}function wc(){return Q(Yt).nativeElement}function iee(n){if(n.hasAttribute("disabled")||n.getAttribute("tabIndex")==="-1")return!1;if(SL(n)&&n.isContentEditable||n.getAttribute("tabIndex")==="0")return!0;switch(n.tagName){case"A":case"LINK":return n.hasAttribute("href");case"AUDIO":case"VIDEO":return n.hasAttribute("controls");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;case"INPUT":return n.getAttribute("type")!=="hidden";default:return!1}}function TL(n){return!n.hasAttribute("disabled")&&(n.getAttribute("tabIndex")==="-1"||iee(n))}function IL(n){return new Te(3e3,!1)}function ree(){return new Te(3100,!1)}function oee(){return new Te(3101,!1)}function see(n){return new Te(3001,!1)}function aee(n){return new Te(3003,!1)}function lee(n){return new Te(3004,!1)}function AL(n,e){return new Te(3005,!1)}function RL(){return new Te(3006,!1)}function PL(){return new Te(3007,!1)}function OL(n,e){return new Te(3008,!1)}function NL(n){return new Te(3002,!1)}function FL(n,e,t,i,r){return new Te(3010,!1)}function LL(){return new Te(3011,!1)}function kL(){return new Te(3012,!1)}function UL(){return new Te(3200,!1)}function BL(){return new Te(3202,!1)}function VL(){return new Te(3013,!1)}function HL(n){return new Te(3014,!1)}function zL(n){return new Te(3015,!1)}function jL(n){return new Te(3016,!1)}function GL(n,e){return new Te(3404,!1)}function cee(n){return new Te(3502,!1)}function WL(n){return new Te(3503,!1)}function $L(){return new Te(3300,!1)}function qL(n){return new Te(3504,!1)}function XL(n){return new Te(3301,!1)}function YL(n,e){return new Te(3302,!1)}function ZL(n){return new Te(3303,!1)}function KL(n,e){return new Te(3400,!1)}function JL(n){return new Te(3401,!1)}function QL(n){return new Te(3402,!1)}function ek(n,e){return new Te(3505,!1)}function Tl(n){switch(n.length){case 0:return new Ua;case 1:return n[0];default:return new Fu(n)}}function WT(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let u=l.get("offset"),f=u==s,h=f&&a||new Map;l.forEach((p,g)=>{let v=g,w=p;if(g!=="offset")switch(v=n.normalizePropertyName(v,r),w){case kf:w=t.get(g);break;case ms:w=i.get(g);break;default:w=n.normalizeStyleValue(g,v,w,r);break}h.set(v,w)}),f||o.push(h),a=h,s=u}),r.length)throw cee(r);return o}function w_(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&zT(t,"start",n)));break;case"done":n.onDone(()=>i(t&&zT(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&zT(t,"destroy",n)));break}}function zT(n,e,t){let i=t.totalTime,r=!!t.disabled,o=b_(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function b_(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function po(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function $T(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var uee=typeof document>"u"?null:document.documentElement;function C_(n){let e=n.parentNode||n.host||null;return e===uee?null:e}function dee(n){return n.substring(1,6)=="ebkit"}var Lu=null,DL=!1;function tk(n){Lu||(Lu=fee()||{},DL=Lu.style?"WebkitAppearance"in Lu.style:!1);let e=!0;return Lu.style&&!dee(n)&&(e=n in Lu.style,!e&&DL&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Lu.style)),e}function fee(){return typeof document<"u"?document.body:null}function qT(n,e){for(;e;){if(e===n)return!0;e=C_(e)}return!1}function XT(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var hee=1e3,YT="{{",pee="}}",ZT="ng-enter",E_="ng-leave",Sm="ng-trigger",Tm=".ng-trigger",KT="ng-animating",M_=".ng-animating";function Ba(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:jT(parseFloat(e[1]),e[2])}function jT(n,e){switch(e){case"s":return n*hee;default:return n}}function Im(n,e,t){return n.hasOwnProperty("duration")?n:mee(n,e,t)}function mee(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(IL(n)),{duration:0,delay:0,easing:""};r=jT(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=jT(parseFloat(l),a[4]));let u=a[5];u&&(s=u)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(ree()),a=!0),o<0&&(e.push(oee()),a=!0),a&&e.splice(l,0,IL(n))}return{duration:r,delay:o,easing:s}}function nk(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function ta(n,e,t){e.forEach((i,r)=>{let o=S_(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function bc(n,e){e.forEach((t,i)=>{let r=S_(i);n.style[r]=""})}function Vf(n){return Array.isArray(n)?n.length==1?n[0]:CL(n):n}function ik(n,e,t){let i=e.params||{},r=JT(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(see(o))})}var GT=new RegExp(`${YT}\\s*(.+?)\\s*${pee}`,"g");function JT(n){let e=[];if(typeof n=="string"){let t;for(;t=GT.exec(n);)e.push(t[1]);GT.lastIndex=0}return e}function Hf(n,e,t){let i=`${n}`,r=i.replace(GT,(o,s)=>{let a=e[s];return a==null&&(t.push(aee(s)),a=""),a.toString()});return r==i?n:r}var gee=/-+([a-z0-9])/g;function S_(n){return n.replace(gee,(...e)=>e[1].toUpperCase())}function rk(n,e){return n===0||e===0}function ok(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,T_(n,a)))}}return e}function mo(n,e,t){switch(e.type){case jt.Trigger:return n.visitTrigger(e,t);case jt.State:return n.visitState(e,t);case jt.Transition:return n.visitTransition(e,t);case jt.Sequence:return n.visitSequence(e,t);case jt.Group:return n.visitGroup(e,t);case jt.Animate:return n.visitAnimate(e,t);case jt.Keyframes:return n.visitKeyframes(e,t);case jt.Style:return n.visitStyle(e,t);case jt.Reference:return n.visitReference(e,t);case jt.AnimateChild:return n.visitAnimateChild(e,t);case jt.AnimateRef:return n.visitAnimateRef(e,t);case jt.Query:return n.visitQuery(e,t);case jt.Stagger:return n.visitStagger(e,t);default:throw lee(e.type)}}function T_(n,e){return window.getComputedStyle(n)[e]}var m1=(()=>{class n{validateStyleProperty(t){return tk(t)}containsElement(t,i){return qT(t,i)}getParentElement(t){return C_(t)}query(t,i,r){return XT(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new Ua(r,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),Uu=class{static NOOP=new m1},Bu=class{};var vee=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),P_=class extends Bu{normalizePropertyName(e,t){return S_(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(vee.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(AL(e,i))}return s+o}};var O_="*";function yee(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>_ee(i,t,e)):t.push(n),t}function _ee(n,e,t){if(n[0]==":"){let l=xee(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(zL(n)),e;let r=i[1],o=i[2],s=i[3];e.push(sk(r,s));let a=r==O_&&s==O_;o[0]=="<"&&!a&&e.push(sk(s,r))}function xee(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(jL(n)),"* => *"}}var I_=new Set(["true","1"]),D_=new Set(["false","0"]);function sk(n,e){let t=I_.has(n)||D_.has(n),i=I_.has(e)||D_.has(e);return(r,o)=>{let s=n==O_||n==r,a=e==O_||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?I_.has(n):D_.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?I_.has(e):D_.has(e)),s&&a}}var gk=":self",wee=new RegExp(`s*${gk}s*,?`,"g");function vk(n,e,t,i){return new r1(n).build(e,t,i)}var ak="",r1=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new o1(t);return this._resetContextStyleTimingState(r),mo(this,Vf(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=ak,e.collectedStyles=new Map,e.collectedStyles.set(ak,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(RL()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==jt.State){let l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(f=>{l.name=f,o.push(this.visitState(l,t))}),l.name=u}else if(a.type==jt.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(PL())}),{type:jt.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{JT(l).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(OL(e.name,[...o.values()]))}return{type:jt.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=mo(this,Vf(e.animation),t),r=yee(e.expr,t.errors);return{type:jt.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:ku(e.options)}}visitSequence(e,t){return{type:jt.Sequence,steps:e.steps.map(i=>mo(this,i,t)),options:ku(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=mo(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:jt.Group,steps:o,options:ku(e.options)}}visitAnimate(e,t){let i=Mee(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:xc({});if(o.type==jt.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};i.easing&&(u.easing=i.easing),s=xc(u)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:jt.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===ms?i.push(a):t.errors.push(NL(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(YT)>=0){o=!0;break}}}),{type:jt.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(l),h=!0;f&&(o!=r&&o>=f.startTime&&r<=f.endTime&&(t.errors.push(FL(l,f.startTime,f.endTime,o,r)),h=!1),o=f.startTime),h&&u.set(l,{startTime:o,endTime:r}),t.options&&ik(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:jt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(LL()),i;let r=1,o=0,s=[],a=!1,l=!1,u=0,f=e.steps.map(_=>{let T=this._makeStyleAst(_,t),C=T.offset!=null?T.offset:Eee(T.styles),E=0;return C!=null&&(o++,E=T.offset=C),l=l||E<0||E>1,a=a||E<u,u=E,s.push(E),T});l&&t.errors.push(kL()),a&&t.errors.push(UL());let h=e.steps.length,p=0;o>0&&o<h?t.errors.push(BL()):o==0&&(p=r/(h-1));let g=h-1,v=t.currentTime,w=t.currentAnimateTimings,y=w.duration;return f.forEach((_,T)=>{let C=p>0?T==g?1:p*T:s[T],E=C*y;t.currentTime=v+w.delay+E,w.duration=E,this._validateStyleAst(_,t),_.offset=C,i.styles.push(_)}),i}visitReference(e,t){return{type:jt.Reference,animation:mo(this,Vf(e.animation),t),options:ku(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:jt.AnimateChild,options:ku(e.options)}}visitAnimateRef(e,t){return{type:jt.AnimateRef,animation:this.visitReference(e.animation,t),options:ku(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=bee(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,po(t.collectedStyles,t.currentQuerySelector,new Map);let a=mo(this,Vf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:jt.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:ku(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(VL());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Im(e.timings,t.errors,!0);return{type:jt.Stagger,animation:mo(this,Vf(e.animation),t),timings:i,options:null}}};function bee(n){let e=!!n.split(/\s*,\s*/).find(t=>t==gk);return e&&(n=n.replace(wee,"")),n=n.replace(/@\*/g,Tm).replace(/@\w+/g,t=>Tm+"-"+t.slice(1)).replace(/:animating/g,M_),[n,e]}function Cee(n){return n?Ne({},n):null}var o1=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Eee(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Mee(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Im(n,e).duration;return QT(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=QT(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=Im(t,e);return QT(r.duration,r.delay,r.easing)}function ku(n){return n?(n=Ne({},n),n.params&&(n.params=Cee(n.params))):n={},n}function QT(n,e,t){return{duration:n,delay:e,easing:t}}function g1(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Am=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},See=1,Tee=":enter",Iee=new RegExp(Tee,"g"),Dee=":leave",Aee=new RegExp(Dee,"g");function yk(n,e,t,i,r,o=new Map,s=new Map,a,l,u=[]){return new s1().buildKeyframes(n,e,t,i,r,o,s,a,l,u)}var s1=class{buildKeyframes(e,t,i,r,o,s,a,l,u,f=[]){u=u||new Am;let h=new a1(e,t,u,r,o,f,[]);h.options=l;let p=l.delay?Ba(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,l),mo(this,i,h);let g=h.timelines.filter(v=>v.containsAnimation());if(g.length&&a.size){let v;for(let w=g.length-1;w>=0;w--){let y=g[w];if(y.element===t){v=y;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,h.errors,l)}return g.length?g.map(v=>v.buildKeyframes()):[g1(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:Ba(Hf(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?Ba(i.duration):null,a=i.delay!=null?Ba(i.delay):null;return s!==0&&e.forEach(l=>{let u=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),mo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==jt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=N_);let s=Ba(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>mo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Ba(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),mo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Hf(i,t.params,t.errors):i;return Im(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==jt.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let u=l.offset||0;a.forwardTime(u*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Ba(r.delay):0;o&&(t.previousNode.type===jt.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=N_);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,f)=>{t.currentQueryIndex=f;let h=t.createSubContext(e.options,u);o&&h.delayNextStep(o),u===t.element&&(l=h.currentTimeline),mo(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let p=h.currentTimeline.currentTime;s=Math.max(s,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let f=t.currentTimeline;l&&f.delayNextStep(l);let h=f.currentTime;mo(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}},N_={},a1=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=N_;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new F_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Ba(i.duration)),i.delay!=null&&(r.delay=Ba(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Hf(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=N_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new l1(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(Iee,"."+this._enterClassName),e=e.replace(Aee,"."+this._leaveClassName);let l=i!=1,u=this._driver.query(this.element,e,l);i!==0&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!o&&a.length==0&&s.push(HL(t)),a}},F_=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=See,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||ms),this._currentKeyframe.set(t,ms);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=Ree(e,this._globalTimelineStyles);for(let[a,l]of s){let u=Hf(l,o,i);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ms),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let u=new Map([...this._backFill,...a]);u.forEach((f,h)=>{f===kf?e.add(h):f===ms&&t.add(h)}),i||u.set("offset",l/this.duration),r.push(u)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return g1(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},l1=class extends F_{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let u=new Map(e[0]);u.set("offset",lk(a)),o.push(u);let f=e.length-1;for(let h=1;h<=f;h++){let p=new Map(e[h]),g=p.get("offset"),v=t+g*i;p.set("offset",lk(v/s)),o.push(p)}i=s,t=0,r="",e=o}return g1(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function lk(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Ree(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,ms)}else for(let[o,s]of r)t.set(o,s)}),t}function ck(n,e,t,i,r,o,s,a,l,u,f,h,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:f,totalTime:h,errors:p}}var e1={},L_=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return Pee(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,u,f){let h=[],p=this.ast.options&&this.ast.options.params||e1,g=a&&a.params||e1,v=this.buildStyles(i,g,h),w=l&&l.params||e1,y=this.buildStyles(r,w,h),_=new Set,T=new Map,C=new Map,E=r==="void",V={params:_k(w,p),delay:this.ast.options?.delay},F=f?[]:yk(e,t,this.ast.animation,o,s,v,y,V,u,h),L=0;return F.forEach(W=>{L=Math.max(W.duration+W.delay,L)}),h.length?ck(t,this._triggerName,i,r,E,v,y,[],[],T,C,L,h):(F.forEach(W=>{let O=W.element,R=po(T,O,new Set);W.preStyleProps.forEach(pe=>R.add(pe));let j=po(C,O,new Set);W.postStyleProps.forEach(pe=>j.add(pe)),O!==t&&_.add(O)}),ck(t,this._triggerName,i,r,E,v,y,F,[..._.values()],T,C,L))}};function Pee(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function _k(n,e){let t=Ne({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var c1=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=_k(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Hf(s,r,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}};function Oee(n,e,t){return new u1(n,e,t)}var u1=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new c1(r.style,o,i))}),uk(this.states,"true","1"),uk(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new L_(e,r,this.states))}),this.fallbackTransition=Nee(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function Nee(n,e,t){let i=[(s,a)=>!0],r={type:jt.Sequence,steps:[],options:null},o={type:jt.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new L_(n,o,e)}function uk(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var Fee=new Am,d1=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],o=vk(this._driver,t,i,r);if(i.length)throw WL(i);this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=WT(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=yk(this._driver,t,o,ZT,E_,new Map,new Map,i,Fee,r),s.forEach(f=>{let h=po(a,f.element,new Map);f.postStyleProps.forEach(p=>h.set(p,null))})):(r.push($L()),s=[]),r.length)throw qL(r);a.forEach((f,h)=>{f.forEach((p,g)=>{f.set(g,this._driver.computeStyle(h,g,ms))})});let l=s.map(f=>{let h=a.get(f.element);return this._buildPlayer(f,new Map,h)}),u=Tl(l);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw XL(e);return t}listen(e,t,i,r){let o=b_(t,"","","");return w_(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},dk="ng-animate-queued",Lee=".ng-animate-queued",t1="ng-animate-disabled",kee=".ng-animate-disabled",Uee="ng-star-inserted",Bee=".ng-star-inserted",Vee=[],xk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Hee={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},na="__ng_removed",Rm=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=jee(r),i){let o=e,{value:s}=o,a=Rd(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},Dm="void",n1=new Rm(Dm),f1=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,vs(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw YL(i,t);if(i==null||i.length==0)throw ZL(t);if(!Gee(i))throw KL(i,t);let o=po(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=po(this._engine.statesByElement,e,new Map);return a.has(t)||(vs(e,Sm),vs(e,Sm+"-"+t),a.set(t,n1)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw JL(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new Pm(this.id,t,e),a=this._engine.statesByElement.get(e);a||(vs(e,Sm),vs(e,Sm+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),u=new Rm(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=n1),!(u.value===Dm)&&l.value===u.value){if(!qee(l.params,u.params)){let w=[],y=o.matchStyles(l.value,l.params,w),_=o.matchStyles(u.value,u.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{bc(e,y),ta(e,_)})}return}let p=po(this._engine.playersByElement,e,[]);p.forEach(w=>{w.namespaceId==this.id&&w.triggerName==t&&w.queued&&w.destroy()});let g=o.matchTransition(l.value,u.value,e,u.params),v=!1;if(!g){if(!r)return;g=o.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:u,player:s,isFallbackTransition:v}),v||(vs(e,dk),s.onStart(()=>{zf(e,dk)})),s.onDone(()=>{let w=this.players.indexOf(s);w>=0&&this.players.splice(w,1);let y=this._engine.playersByElement.get(e);if(y){let _=y.indexOf(s);_>=0&&y.splice(_,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,Tm,!0);i.forEach(r=>{if(r[na])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,u)=>{if(s.set(u,l.value),this._triggers.has(u)){let f=this.trigger(e,u,Dm,r);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&Tl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,u=i.get(s)||n1,f=new Rm(Dm),h=new Pm(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:u,toState:f,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[na];(!o||o===xk)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){vs(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=b_(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,w_(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},h1=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new f1(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let u=i.indexOf(l);i.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(A_(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!A_(t))return;let o=t[na];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),vs(e,t1)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),zf(e,t1))}removeNode(e,t,i){if(A_(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[na]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return A_(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Tm,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,M_,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Tl(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[na];if(t&&t.setForRemoval){if(e[na]=xk,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(t1)&&this.markElementAsDisabled(e,!1),this.driver.query(e,kee,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];vs(r,Uee)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Tl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw QL(e)}_flushAnimations(e,t){let i=new Am,r=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(X=>{f.add(X);let ie=this.driver.query(X,Lee,!0);for(let q=0;q<ie.length;q++)f.add(ie[q])});let h=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=pk(p,this.collectedEnterElements),v=new Map,w=0;g.forEach((X,ie)=>{let q=ZT+w++;v.set(ie,q),X.forEach(ve=>vs(ve,q))});let y=[],_=new Set,T=new Set;for(let X=0;X<this.collectedLeaveElements.length;X++){let ie=this.collectedLeaveElements[X],q=ie[na];q&&q.setForRemoval&&(y.push(ie),_.add(ie),q.hasAnimation?this.driver.query(ie,Bee,!0).forEach(ve=>_.add(ve)):T.add(ie))}let C=new Map,E=pk(p,Array.from(_));E.forEach((X,ie)=>{let q=E_+w++;C.set(ie,q),X.forEach(ve=>vs(ve,q))}),e.push(()=>{g.forEach((X,ie)=>{let q=v.get(ie);X.forEach(ve=>zf(ve,q))}),E.forEach((X,ie)=>{let q=C.get(ie);X.forEach(ve=>zf(ve,q))}),y.forEach(X=>{this.processLeaveNode(X)})});let V=[],F=[];for(let X=this._namespaceList.length-1;X>=0;X--)this._namespaceList[X].drainQueuedTransitions(t).forEach(q=>{let ve=q.player,Ve=q.element;if(V.push(ve),this.collectedEnterElements.length){let se=Ve[na];if(se&&se.setForMove){if(se.previousTriggersValues&&se.previousTriggersValues.has(q.triggerName)){let He=se.previousTriggersValues.get(q.triggerName),je=this.statesByElement.get(q.element);if(je&&je.has(q.triggerName)){let Le=je.get(q.triggerName);Le.value=He,je.set(q.triggerName,Le)}}ve.destroy();return}}let tt=!h||!this.driver.containsElement(h,Ve),ge=C.get(Ve),re=v.get(Ve),U=this._buildInstruction(q,i,re,ge,tt);if(U.errors&&U.errors.length){F.push(U);return}if(tt){ve.onStart(()=>bc(Ve,U.fromStyles)),ve.onDestroy(()=>ta(Ve,U.toStyles)),r.push(ve);return}if(q.isFallbackTransition){ve.onStart(()=>bc(Ve,U.fromStyles)),ve.onDestroy(()=>ta(Ve,U.toStyles)),r.push(ve);return}let J=[];U.timelines.forEach(se=>{se.stretchStartingKeyframe=!0,this.disabledNodes.has(se.element)||J.push(se)}),U.timelines=J,i.append(Ve,U.timelines);let _e={instruction:U,player:ve,element:Ve};s.push(_e),U.queriedElements.forEach(se=>po(a,se,[]).push(ve)),U.preStyleProps.forEach((se,He)=>{if(se.size){let je=l.get(He);je||l.set(He,je=new Set),se.forEach((Le,rt)=>je.add(rt))}}),U.postStyleProps.forEach((se,He)=>{let je=u.get(He);je||u.set(He,je=new Set),se.forEach((Le,rt)=>je.add(rt))})});if(F.length){let X=[];F.forEach(ie=>{X.push(ek(ie.triggerName,ie.errors))}),V.forEach(ie=>ie.destroy()),this.reportError(X)}let L=new Map,W=new Map;s.forEach(X=>{let ie=X.element;i.has(ie)&&(W.set(ie,ie),this._beforeAnimationBuild(X.player.namespaceId,X.instruction,L))}),r.forEach(X=>{let ie=X.element;this._getPreviousPlayers(ie,!1,X.namespaceId,X.triggerName,null).forEach(ve=>{po(L,ie,[]).push(ve),ve.destroy()})});let O=y.filter(X=>mk(X,l,u)),R=new Map;hk(R,this.driver,T,u,ms).forEach(X=>{mk(X,l,u)&&O.push(X)});let pe=new Map;g.forEach((X,ie)=>{hk(pe,this.driver,new Set(X),l,kf)}),O.forEach(X=>{let ie=R.get(X),q=pe.get(X);R.set(X,new Map([...ie?.entries()??[],...q?.entries()??[]]))});let ae=[],Ie=[],be={};s.forEach(X=>{let{element:ie,player:q,instruction:ve}=X;if(i.has(ie)){if(f.has(ie)){q.onDestroy(()=>ta(ie,ve.toStyles)),q.disabled=!0,q.overrideTotalTime(ve.totalTime),r.push(q);return}let Ve=be;if(W.size>1){let ge=ie,re=[];for(;ge=ge.parentNode;){let U=W.get(ge);if(U){Ve=U;break}re.push(ge)}re.forEach(U=>W.set(U,Ve))}let tt=this._buildAnimation(q.namespaceId,ve,L,o,pe,R);if(q.setRealPlayer(tt),Ve===be)ae.push(q);else{let ge=this.playersByElement.get(Ve);ge&&ge.length&&(q.parentPlayer=Tl(ge)),r.push(q)}}else bc(ie,ve.fromStyles),q.onDestroy(()=>ta(ie,ve.toStyles)),Ie.push(q),f.has(ie)&&r.push(q)}),Ie.forEach(X=>{let ie=o.get(X.element);if(ie&&ie.length){let q=Tl(ie);X.setRealPlayer(q)}}),r.forEach(X=>{X.parentPlayer?X.syncPlayerEvents(X.parentPlayer):X.destroy()});for(let X=0;X<y.length;X++){let ie=y[X],q=ie[na];if(zf(ie,E_),q&&q.hasAnimation)continue;let ve=[];if(a.size){let tt=a.get(ie);tt&&tt.length&&ve.push(...tt);let ge=this.driver.query(ie,M_,!0);for(let re=0;re<ge.length;re++){let U=a.get(ge[re]);U&&U.length&&ve.push(...U)}}let Ve=ve.filter(tt=>!tt.destroyed);Ve.length?Wee(this,ie,Ve):this.processLeaveNode(ie)}return y.length=0,ae.forEach(X=>{this.players.push(X),X.onDone(()=>{X.destroy();let ie=this.players.indexOf(X);this.players.splice(ie,1)}),X.play()}),ae}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==Dm;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||s.push(u)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let u=l.element,f=u!==o,h=po(i,u,[]);this._getPreviousPlayers(u,f,s,a,t.toState).forEach(g=>{let v=g.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),g.destroy(),h.push(g)})}bc(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,l=t.element,u=[],f=new Set,h=new Set,p=t.timelines.map(v=>{let w=v.element;f.add(w);let y=w[na];if(y&&y.removedBeforeQueried)return new Ua(v.duration,v.delay);let _=w!==l,T=$ee((i.get(w)||Vee).map(L=>L.getRealPlayer())).filter(L=>{let W=L;return W.element?W.element===w:!1}),C=o.get(w),E=s.get(w),V=WT(this._normalizer,v.keyframes,C,E),F=this._buildPlayer(v,V,T);if(v.subTimeline&&r&&h.add(w),_){let L=new Pm(e,a,w);L.setRealPlayer(F),u.push(L)}return F});u.forEach(v=>{po(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>zee(this.playersByQueriedElement,v.element,v))}),f.forEach(v=>vs(v,KT));let g=Tl(p);return g.onDestroy(()=>{f.forEach(v=>zf(v,KT)),ta(l,t.toStyles)}),h.forEach(v=>{po(r,v,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Ua(e.duration,e.delay)}},Pm=class{namespaceId;triggerName;element;_player=new Ua;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>w_(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){po(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function zee(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function jee(n){return n??null}function A_(n){return n&&n.nodeType===1}function Gee(n){return n=="start"||n=="done"}function fk(n,e){let t=n.style.display;return n.style.display=e??"none",t}function hk(n,e,t,i,r){let o=[];t.forEach(l=>o.push(fk(l)));let s=[];i.forEach((l,u)=>{let f=new Map;l.forEach(h=>{let p=e.computeStyle(u,h,r);f.set(h,p),(!p||p.length==0)&&(u[na]=Hee,s.push(u))}),n.set(u,f)});let a=0;return t.forEach(l=>fk(l,o[a++])),s}function pk(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let u=a.parentNode;return t.has(u)?l=u:r.has(u)?l=i:l=s(u),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==i&&t.get(l).push(a)}),t}function vs(n,e){n.classList?.add(e)}function zf(n,e){n.classList?.remove(e)}function Wee(n,e,t){Tl(t).onDone(()=>n.processLeaveNode(e))}function $ee(n){let e=[];return wk(n,e),e}function wk(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Fu?wk(i.players,e):e.push(i)}}function qee(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function mk(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var Cc=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new h1(e.body,t,i),this._timelineEngine=new d1(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],u=[],f=vk(this._driver,o,l,u);if(l.length)throw GL(r,l);a=Oee(r,f,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=$T(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=$T(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Xee(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=i1(e[0]),e.length>1&&(i=i1(e[e.length-1]))):e instanceof Map&&(t=i1(e)),t||i?new Yee(n,t,i):null}var Yee=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&ta(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ta(this._element,this._initialStyles),this._endStyles&&(ta(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(bc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bc(this._element,this._endStyles),this._endStyles=null),ta(this._element,this._initialStyles),this._state=3)}}return n})();function i1(n){let e=null;return n.forEach((t,i)=>{Zee(i)&&(e=e||new Map,e.set(i,t))}),e}function Zee(n){return n==="display"||n==="position"}var k_=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:T_(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},U_=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return qT(e,t)}getParentElement(e){return C_(e)}query(e,t,i){return XT(e,t,i)}computeStyle(e,t,i){return T_(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let u=new Map,f=s.filter(g=>g instanceof k_);rk(i,r)&&f.forEach(g=>{g.currentSnapshot.forEach((v,w)=>u.set(w,v))});let h=nk(t).map(g=>new Map(g));h=ok(e,h,u);let p=Xee(e,h);return new k_(e,h,l,p)}};var R_="@",bk="@.disabled",B_=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==R_&&t==bk?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},p1=class extends B_{factory;constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==R_?t.charAt(1)=="."&&t==bk?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==R_){let o=Kee(e),s=t.slice(1),a="";return s.charAt(0)!=R_&&([s,a]=Jee(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,i,l)})}return this.delegate.listen(e,t,i,r)}};function Kee(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Jee(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var V_=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,f=u.get(r);if(!f){let h=()=>u.delete(r);f=new B_(i,r,this.engine,h),u.set(r,f)}return f}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new p1(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var ete=qn(()=>{let n={onRemovalComplete:()=>{}},e=new Wn(null),t=Q(Cc,{optional:!0})||n,{onRemovalComplete:i=n.onRemovalComplete}=t;return t.onRemovalComplete=(r,o)=>{e.next(r),i.call(t,r,o)},e.pipe(xi(r=>Ea(0).pipe(at(()=>null),ns(r))),Ma())});function Ck(n,e=null){return HT(n).activeElement!==n&&!n.matches(":disabled")&&!e?.contains(n)&&TL(n)}function tte(n){return Jr(ci(n,"focusin").pipe(at(({target:e})=>e)),ci(n,"focusout").pipe($n(({target:e,relatedTarget:t})=>!!t&&Ck(e)),at(({relatedTarget:e})=>e)))}var nMe=qn(()=>{let n=Q(ete),e=Q(gs),t=Q(fn),i=Q(Kn),r=ci(e,"focusout",{capture:!0}),o=ci(e,"focusin",{capture:!0}),s=ci(e,"blur"),a=ci(e,"mousedown"),l=ci(e,"mouseup");return Jr(r.pipe(is(a),qd({delay:()=>l}),tE(n),$n(([u,f])=>Ck(x_(u),f)),at(([{relatedTarget:u}])=>u)),s.pipe(at(()=>t.activeElement),$n(u=>!!u?.matches("iframe"))),o.pipe(xi(u=>{let f=x_(u),h=HT(f)||t;return h===t?Dt(f):tte(h).pipe(ns(f))})),a.pipe(xi(u=>{let f=x_(u);return!t.activeElement||t.activeElement===t.body?Dt(f):r.pipe(To(1),at(()=>f),is(Ea(0,v_(i))))}))).pipe(Wd(),Ma())}),iMe=qn(()=>Q(fn).querySelector("base")?.href??""),nte=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/,ite=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/,v1=qn(()=>nte.test(Q(Bf).toLowerCase())||ite.test(Q(Bf).slice(0,4).toLowerCase())),Ek=qn(()=>VT(Q(Uf))),rte=qn(()=>Q(v1)&&!Q(Ek)),rMe=qn(()=>!!Q(gs)?.webkitConvertPointFromNodeToPage),oMe=qn(()=>Q(Ek)?"ios":Q(rte)?"android":"web"),sMe=qn(()=>{let n=Q(gs).matchMedia("(pointer: coarse)");return mm(Us(n,"change").pipe(at(()=>n.matches)),{initialValue:n.matches})}),ote=qn(()=>!!Q(gs).Cypress),ste=qn(gm),aMe=qn(()=>Q(ote)||Q(ste)),lMe=Nu(null);var cMe=qn(()=>Bp(Q(qs))?new Range:{}),uMe=qn(()=>{let n=Q(gs);return ci(n,"resize").pipe(ns(null),at(()=>{let e=Math.max(n.document.documentElement.clientWidth||0,n.innerWidth||0,n.visualViewport?.width||0),t=Math.max(n.document.documentElement.clientHeight||0,n.innerHeight||0,n.visualViewport?.height||0),i={width:e,height:t,top:0,left:0,right:e,bottom:t,x:0,y:0};return Ct(Ne({},i),{toJSON:()=>JSON.stringify(i)})}),dp({bufferSize:1,refCount:!0}))});var ate=typeof IntersectionObserver<"u"?IntersectionObserver:class{root=null;rootMargin="";thresholds=[];observe(){}unobserve(){}disconnect(){}takeRecords(){return[]}},lte=new Ae("[WA_INTERSECTION_ROOT]"),cte=lte,ute="0px 0px 0px 0px",Sk=ute,_Me=new Ae("[WA_INTERSECTION_ROOT_MARGIN]",{providedIn:"root",factory:()=>Sk});function dte(){return Q(Yt).nativeElement.getAttribute("waIntersectionRootMargin")||Sk}var fte=0,Tk=fte,xMe=new Ae("[WA_INTERSECTION_THRESHOLD]",{providedIn:"root",factory:()=>Tk});function hte(){return Q(Yt).nativeElement.getAttribute("waIntersectionThreshold")?.split(",").map(parseFloat)||Tk}var y1=(()=>{class n extends ate{callbacks=new Map;margin="";threshold="";constructor(){let t=Q(cte,{optional:!0});super(i=>{this.callbacks.forEach((r,o)=>{let s=i.filter(({target:a})=>a===o);return s.length&&r(s,this)})},{root:t?.nativeElement,rootMargin:dte(),threshold:hte()})}observe(t,i=()=>{}){super.observe(t),this.callbacks.set(t,i)}unobserve(t){super.unobserve(t),this.callbacks.delete(t)}ngOnDestroy(){this.disconnect()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["","waIntersectionObserver",""]],inputs:{margin:[0,"waIntersectionRootMargin","margin"],threshold:[0,"waIntersectionThreshold","threshold"]},exportAs:["IntersectionObserver"],features:[Rn]})}return n})();var Mk=(()=>{class n extends Lt{constructor(){let t=Q(Yt).nativeElement,i=Q(y1);return super(r=>(i.observe(t,o=>{r.next(o)}),()=>{i.unobserve(t)})),this.pipe(Ma())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),Ik=(()=>{class n{waIntersectionObservee=Q(Mk);static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["","waIntersectionObservee",""]],outputs:{waIntersectionObservee:"waIntersectionObservee"},features:[_n([Mk])]})}return n})();var wMe=new Ae("[WA_INTERSECTION_OBSERVER_SUPPORT]: [INTERSECTION_OBSERVER_SUPPORT]",{providedIn:"root",factory:()=>!!Q(gs).IntersectionObserver});var H_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=gt({type:n,selectors:[["","tuiItem",""]]})}}return n})();var Dk=(()=>{class n extends Lt{constructor(){let t=wc(),i=Q(fn);super(r=>Jr(ci(t,"touchstart",{passive:!0}),ci(t,"mousedown")).pipe(xi(()=>Jr(ci(i,"touchmove",{passive:!0}).pipe($n(({touches:o})=>o.length<2),at(({touches:o})=>o[0])),ci(i,"mousemove"))),up(),at(([o,s])=>{let a=(s?.clientX??0)-(o?.clientX??0),l=(s?.clientY??0)-(o?.clientY??0);return[a,l]}),is(Jr(ci(i,"touchend"),ci(i,"mouseup"))),qd()).subscribe(r))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),Ak=(()=>{class n{constructor(){this.tuiPan=Q(Dk)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=gt({type:n,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},features:[_n([Dk])]})}}return n})();var _1=Nu({timeout:500,threshold:30}),Rk=(()=>{class n extends Lt{constructor(){let t=Q(fn),i=wc(),{timeout:r,threshold:o}=Q(_1);super(s=>Jr(ci(i,"touchstart",{passive:!0}),ci(t,"touchend")).pipe(up(),$n(([a,l])=>!!a.touches.length&&a.touches[0]?.identifier===l.changedTouches[0]?.identifier),at(([a,l])=>{let u=a.touches[0]?.clientX??0,f=a.touches[0]?.clientY??0,h=l.changedTouches[0]?.clientX??0,p=l.changedTouches[0]?.clientY??0,g=u-h,v=f-p,w=l.timeStamp-a.timeStamp;return(Math.abs(g)>o||Math.abs(v)>o)&&w<r?{direction:gte(g,v),events:[a,l]}:null}),$n(xL)).subscribe(s))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();function gte(n,e){return Math.abs(e)>Math.abs(n)?e>0?"top":"bottom":n>0?"left":"right"}var Pk=(()=>{class n{constructor(){this.tuiSwipe=Q(Rk)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=gt({type:n,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[_n([Rk])]})}}return n})();function vte(n,e){n&1&&Ks(0)}function yte(n,e){if(n&1){let t=vt();I(0,"fieldset",5),Me("waIntersectionObservee",function(r){let o=ke(t).index,s=le();return Ue(r[0]&&s.onIntersection(r[0],o))}),Ks(1,6),D()}if(n&2){let t=e.$implicit,i=e.index,r=le();kN(r.getStyle(r.itemsCount)),$("disabled",r.isDisabled(i)),H(),$("ngTemplateOutlet",t)}}var x1=(()=>{class n extends Lt{constructor(){super(t=>this.output$.subscribe(t)),this.el=wc(),this.platform=Q(qs),this.visible$=Q(ML),this.duration$=new Wn(0),this.running$=Jr(ci(this.el,"mouseenter").pipe(at(gm)),ci(this.el,"touchstart").pipe(at(gm)),ci(this.el,"touchend").pipe(at(MT)),ci(this.el,"mouseleave").pipe(at(MT)),this.visible$),this.output$=vf(this.platform)?_i:Gd([this.duration$,this.running$]).pipe(bL(([t])=>ZC(t),t=>t.every(Boolean)))}set duration(t){this.duration$.next(Number.isNaN(t)?this.duration$.value:t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=gt({type:n,inputs:{duration:"duration"},features:[Rn]})}}return n})(),_te=(()=>{class n{constructor(){this.tuiCarouselAutoscroll=Q(x1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=gt({type:n,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}})}}return n})(),xte=(()=>{class n{constructor(){this.el=wc(),this.tuiCarouselScroll=ci(this.el,"wheel").pipe($n(({deltaX:t})=>Math.abs(t)>20),eE(500,v_()),at(({deltaX:t})=>Math.sign(t)),wi(()=>{this.el.scrollLeft=10}))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=gt({type:n,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}})}}return n})(),Ok=(()=>{class n{constructor(){this.el=wc(),this.cdr=Q(or),this.isMobile=Q(v1),this.directive=Q(x1),this.translate=0,this.items=L2,this.transitioned=!0,this.index=0,this.draggable=!1,this.itemsCount=1,this.indexChange=new Un,this.shift=new Un}set indexSetter(t){this.index=t,this.directive.duration=NaN}next(){this.items&&this.index===this.items.length-this.itemsCount||this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}get transform(){return`translateX(${100*this.x}%)`}getStyle(t){let i=`${100/t}%`;return{flexBasis:i,minWidth:i,maxWidth:i}}onTransitioned(t){this.transitioned=t,t||(this.translate=this.computedTranslate),this.onShift()}isDisabled(t){return t<this.index||t>=this.index+this.itemsCount}onIntersection({intersectionRatio:t},i){t&&t>=.5&&!this.transitioned&&this.updateIndex(this.index<i?i-this.itemsCount+1:i)}onScroll(t){this.isMobile||(t>0?this.next():this.prev())}onPan(t){if(!this.computedDraggable)return;let i=1-this.items.length/this.itemsCount;this.translate=LT(t/this.el.clientWidth+this.translate,i,0),this.onShift()}onSwipe(t){t==="left"?this.next():t==="right"&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}onShift(){this.shift.emit(Math.abs(this.x%1+.5)*2)}get x(){return this.transitioned?this.computedTranslate:this.translate}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(t){this.index=LT(t,0,this.items.length-1),this.indexChange.emit(this.index),this.cdr.markForCheck()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=vn({type:n,selectors:[["tui-carousel"]],contentQueries:function(i,r,o){if(i&1&&MS(o,H_,4,Er),i&2){let s;si(s=ai())&&(r.items=s)}},hostVars:4,hostBindings:function(i,r){i&1&&Me("touchstart",function(){return r.onTransitioned(!1)})("touchend",function(){return r.onTransitioned(!0)})("mousedown",function(){return r.onTransitioned(!1)})("mouseup.zoneless",function(){return r.onTransitioned(!0)},!1,kr),i&2&&In("_transitioned",r.transitioned)("_draggable",r.draggable)},inputs:{draggable:"draggable",itemsCount:"itemsCount",indexSetter:[0,"index","indexSetter"]},outputs:{indexChange:"indexChange",shift:"shift"},features:[_n([{provide:_1,useValue:{timeout:200,threshold:30}}]),MN([{directive:x1,inputs:["duration","duration"]}])],decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionObserver","","waIntersectionThreshold","0.5",1,"t-wrapper"],[1,"t-items",3,"tuiCarouselAutoscroll","tuiPan","tuiSwipe"],["class","t-item",3,"disabled","style","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"waIntersectionObservee","disabled"],[3,"ngTemplateOutlet"]],template:function(i,r){i&1&&(Pe(0,vte,1,0,"ng-container",0),ls(1,"async"),I(2,"div",1),Me("tuiCarouselScroll",function(s){return r.onScroll(s)}),I(3,"div",2)(4,"div",3),Me("tuiCarouselAutoscroll",function(){return r.onAutoscroll()})("tuiPan",function(s){return r.onPan(s[0])})("tuiSwipe",function(s){return r.onSwipe(s.direction)}),Pe(5,yte,2,4,"fieldset",4),D()()()),i&2&&($("ngIf",cs(1,4,r.items.changes)),H(4),Hn("transform",r.transform),H(),$("ngForOf",r.items))},dependencies:[OS,Si,Dn,Js,_te,xte,Ak,Pk,y1,Ik],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}  [tuiCarouselButtons] [tuiIconButton]{border-radius:100%}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-inline-size:100%;max-inline-size:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:sticky;left:0;right:0;min-inline-size:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;touch-action:pan-y}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{display:none}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-inline-size:1rem}'],changeDetection:0})}}return SP([wL],n.prototype,"getStyle",null),n})();function wte(n,e){if(n&1){let t=vt();I(0,"button",7),Me("click",function(){ke(t);let r=le(2).index,o=le(2);return Ue(o.changeMainImage(r))}),Z(1),D()}if(n&2){let t=le(2).index,i=le(2);H(),Cn(i.imagesData.idMainImage===t?"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F":"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439")}}function bte(n,e){if(n&1&&(I(0,"div",4),ye(1,"img",5),Pe(2,wte,2,1,"button",6),D()),n&2){let t=le(),i=t.$implicit,r=t.index,o=le(2);In("active",r===o.index+1),H(),$("src",i,Mr),H(),$("ngIf",o.changeModeSlider)}}function Cte(n,e){n&1&&(Ys(0),Pe(1,bte,3,4,"div",3),Zs())}function Ete(n,e){if(n&1){let t=vt();I(0,"tui-carousel",1),lo("indexChange",function(r){ke(t);let o=le();return Ro(o.index,r)||(o.index=r),Ue(r)}),Pe(1,Cte,2,0,"ng-container",2),D()}if(n&2){let t=le();$("draggable",!0)("itemsCount",t.getItemsCount()),ao("index",t.index),H(),$("ngForOf",t.imagesData.images)}}var z_=(()=>{class n{index=0;isMobileView=!1;imagesData;changeModeSlider=!1;ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=768}changeMainImage(t){this.imagesData.idMainImage=t}getItemsCount(){return this.imagesData.images.length<3?this.imagesData.images.length:this.isMobileView?1:3}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=vn({type:n,selectors:[["app-image-slider"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,Ao)},inputs:{imagesData:"imagesData",changeModeSlider:"changeModeSlider"},decls:1,vars:1,consts:[[3,"draggable","itemsCount","index","indexChange",4,"ngIf"],[3,"indexChange","draggable","itemsCount","index"],[4,"ngFor","ngForOf"],["alt","","draggable","false","class","item",3,"active",4,"tuiItem"],["alt","","draggable","false",1,"item"],[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(i,r){i&1&&Pe(0,Ete,2,4,"tui-carousel",0),i&2&&$("ngIf",r.imagesData)},dependencies:[Dn,Si,H_,Ok],styles:["tui-carousel[_ngcontent-%COMP%]{width:100%;max-width:90vw}.item[_ngcontent-%COMP%]{transition:box-shadow .3s,transform .3s;margin:2rem auto;width:100%;max-height:350px;max-width:350px;aspect-ratio:1;border-radius:20px;background-color:#fff;display:grid;place-items:center;outline:none;border:none}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:90%;pointer-events:none}.item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{grid-area:1/1/2/2;align-self:flex-end;margin-bottom:10px;background:none;outline:none;border:none;font-family:Courier New,Courier,monospace;cursor:pointer;padding:5px;background-color:#fff;border-radius:5px;transition:all .3s ease-in-out}.item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px #fff}"]})}return n})();var Nk=_C(w1());var j_=(()=>{class n{el=Q(Yt);mobileView=!1;constructor(){}ngOnInit(){this.mobileView&&this.el.nativeElement.addEventListener("input",this.onInput.bind(this.el.nativeElement))}onInput(t){let i=t.target;(0,Nk.throttle)(()=>{i.style.height="auto",i.style.height=i.scrollHeight+"px"},250)()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["","appAutoHeight",""]],inputs:{mobileView:"mobileView"}})}return n})();var Ec=(()=>{class n{transform(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")+" \u20BD"}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=hf({name:"costFormat",type:n,pure:!0})}return n})();var Lk=_C(Fk());var G_=(()=>{class n{compressImage(t){return new Promise((i,r)=>{new Lk.default(t,{quality:.6,success:o=>{i(o)},error:o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0436\u0430\u0442\u0438\u044F:",o.message),r(o)}})})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var W_="https://housequality.site/",hi=W_+"api/";var Gf=(()=>{class n{httpModule;baseServiceUrl=hi+"category";constructor(t){this.httpModule=t}GETgetAllCategories(){return un(this.httpModule.get(this.baseServiceUrl))}static \u0275fac=function(i){return new(i||n)(ze(Bi))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ti=(()=>{class n{errorSubject=new Wn("");successSubject=new Wn("");error$=this.errorSubject.asObservable();success$=this.successSubject.asObservable();setError(t,i){this.errorSubject.next(t),setTimeout(()=>this.clearError(),i)}setSuccess(t,i){this.successSubject.next(t),setTimeout(()=>this.clearError(),i)}clearError(){this.errorSubject.next(""),this.successSubject.next("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mte=["colorModule"],Ste=["shopsModule"],Tte=["additionalModule"],Ite=()=>({standalone:!0}),M1=n=>({invalid:n}),Dte=n=>({filterData:n});function Ate(n,e){if(n&1){let t=vt();I(0,"button",31),Me("click",function(){ke(t);let r=le();return Ue(r.removeImages())}),ye(1,"img",32),D()}}function Rte(n,e){if(n&1&&ye(0,"app-image-slider",33),n&2){let t=le();$("imagesData",t.furnitureData.colors[t.currentColorId].imagesData)("changeModeSlider",!0)}}function Pte(n,e){if(n&1){let t=vt();I(0,"div",34)(1,"input",35),Me("input",function(r){ke(t);let o=le();return Ue(o.onInputImages(r))}),D(),ye(2,"img",36),D()}}function Ote(n,e){if(n&1){let t=vt();I(0,"button",39),Me("click",function(){let r=ke(t).index,o=le(2);return Ue(o.openFurnitureVariant(r))}),D()}if(n&2){let t=e.$implicit,i=e.index;Hn("background-color",t.color),Tr("data-idColor",i)}}function Nte(n,e){if(n&1&&(I(0,"span",37),Pe(1,Ote,1,3,"button",38),D()),n&2){let t=le();Hn("--total-items",t.furnitureData.colors.length.toString()),H(),$("ngForOf",t.furnitureData.colors)}}function Fte(n,e){if(n&1){let t=vt();I(0,"button",40),Me("click",function(){let r=ke(t).index,o=le();return Ue(o.openShopsModule(r))}),I(1,"div",41),Z(2),ls(3,"costFormat"),D(),I(4,"div",42),ye(5,"img",43),D()()}if(n&2){let t=e.$implicit;H(2),Cn(cs(3,1,t.cost))}}function Lte(n,e){n&1&&Ks(0)}function kte(n,e){n&1&&(I(0,"span",54),Z(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 "),D())}function Ute(n,e){if(n&1){let t=vt();I(0,"form",44),Me("ngSubmit",function(){ke(t);let r=le();return Ue(r.addColor())}),I(1,"button",45),Me("click",function(){ke(t);let r=le();return Ue(r.closeAddModule())}),ye(2,"img",46),D(),I(3,"span",47)(4,"h2",48),Z(5,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043C\u0435\u0431\u0435\u043B\u0438"),D(),I(6,"span",49)(7,"label",50),Z(8,"\u0426\u0432\u0435\u0442"),D(),ye(9,"input",51),Pe(10,kte,2,0,"span",52),D(),I(11,"button",53),Z(12,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),D()()()}if(n&2){let t,i=le();$("formGroup",i.colorForm),H(10),$("ngIf",((t=i.colorForm.get("color"))==null?null:t.invalid)&&(((t=i.colorForm.get("color"))==null?null:t.dirty)||((t=i.colorForm.get("color"))==null?null:t.touched))),H(),$("disabled",!i.colorForm.valid)}}function Bte(n,e){n&1&&(I(0,"span",54),Z(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0443\u044E \u0446\u0435\u043D\u0443 "),D())}function Vte(n,e){n&1&&(I(0,"span",54),Z(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 "),D())}function Hte(n,e){if(n&1){let t=vt();I(0,"button",62),Me("click",function(){ke(t);let r=le(2);return Ue(r.deleteShop())}),ye(1,"img",63),D()}}function zte(n,e){if(n&1){let t=vt();I(0,"form",44),Me("ngSubmit",function(){ke(t);let r=le();return Ue(r.addShop())}),I(1,"button",45),Me("click",function(){ke(t);let r=le();return Ue(r.closeAddModule())}),ye(2,"img",46),D(),I(3,"span",47)(4,"h2",48),Z(5,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430"),D(),I(6,"span",49)(7,"label",55),Z(8,"\u0426\u0435\u043D\u0430"),D(),ye(9,"input",56),Pe(10,Bte,2,0,"span",52),D(),I(11,"span",49)(12,"label",57),Z(13,"\u0421\u0441\u044B\u043B\u043A\u0430"),D(),ye(14,"input",58),Pe(15,Vte,2,0,"span",52),D(),I(16,"span",59)(17,"button",60),Z(18,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),D(),Pe(19,Hte,2,0,"button",61),D()()()}if(n&2){let t,i,r=le();$("formGroup",r.shopForm),H(10),$("ngIf",((t=r.shopForm.get("cost"))==null?null:t.invalid)&&(((t=r.shopForm.get("cost"))==null?null:t.dirty)||((t=r.shopForm.get("cost"))==null?null:t.touched))),H(5),$("ngIf",((i=r.shopForm.get("url"))==null?null:i.invalid)&&(((i=r.shopForm.get("url"))==null?null:i.dirty)||((i=r.shopForm.get("url"))==null?null:i.touched))),H(2),$("disabled",!r.shopForm.valid),H(2),$("ngIf",r.lastClickedShop!==void 0)}}function jte(n,e){if(n&1&&(I(0,"option",77),Z(1),D()),n&2){let t=e.$implicit;$("value",t.name),H(),rr("",t.translateOne," ")}}function Gte(n,e){n&1&&(I(0,"span",54),Z(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443 "),D())}function Wte(n,e){n&1&&(I(0,"span",54),Z(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443 "),D())}function $te(n,e){n&1&&(I(0,"span",54),Z(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443 "),D())}function qte(n,e){n&1&&Ks(0)}function Xte(n,e){if(n&1&&(Ys(0),Pe(1,qte,1,0,"ng-container",79),Zs()),n&2){let t=e.$implicit;le(4);let i=Li(37),r=Li(39);H(),$("ngTemplateOutlet",t.type==="select"?i:r)("ngTemplateOutletContext",mr(2,Dte,t))}}function Yte(n,e){if(n&1&&(Ys(0),Pe(1,Xte,2,4,"ng-container",78),Zs()),n&2){let t=le(3);H(),$("ngForOf",t.getfilterData())}}function Zte(n,e){if(n&1){let t=vt();I(0,"span",49)(1,"label",67),Z(2,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F"),D(),I(3,"select",68),lo("ngModelChange",function(r){ke(t);let o=le(2);return Ro(o.furnitureData.additionalData.category,r)||(o.furnitureData.additionalData.category=r),Ue(r)}),Pe(4,jte,2,2,"option",69),D(),I(5,"label",70),Z(6,"\u0428\u0438\u0440\u0438\u043D\u0430(\u0441\u043C)"),D(),ye(7,"input",71),Pe(8,Gte,2,0,"span",52),I(9,"label",72),Z(10,"\u0414\u043B\u0438\u043D\u0430(\u0441\u043C)"),D(),ye(11,"input",73),Pe(12,Wte,2,0,"span",52),I(13,"label",74),Z(14,"\u0412\u044B\u0441\u043E\u0442\u0430(\u0441\u043C)"),D(),ye(15,"input",75),Pe(16,$te,2,0,"span",52)(17,Yte,2,1,"ng-container",76),D()}if(n&2){let t,i,r,o,s,a,l=le(2);H(3),$("ngModelOptions",bu(10,Ite)),ao("ngModel",l.furnitureData.additionalData.category),H(),$("ngForOf",l.categoryArray),H(3),$("ngClass",mr(11,M1,((t=l.proportionsForm.get("width"))==null?null:t.invalid)&&(((t=l.proportionsForm.get("width"))==null?null:t.dirty)||((t=l.proportionsForm.get("width"))==null?null:t.touched)))),H(),$("ngIf",((i=l.proportionsForm.get("width"))==null?null:i.invalid)&&(((i=l.proportionsForm.get("width"))==null?null:i.dirty)||((i=l.proportionsForm.get("width"))==null?null:i.touched))),H(3),$("ngClass",mr(13,M1,((r=l.proportionsForm.get("length"))==null?null:r.invalid)&&(((r=l.proportionsForm.get("length"))==null?null:r.dirty)||((r=l.proportionsForm.get("length"))==null?null:r.touched)))),H(),$("ngIf",((o=l.proportionsForm.get("length"))==null?null:o.invalid)&&(((o=l.proportionsForm.get("length"))==null?null:o.dirty)||((o=l.proportionsForm.get("length"))==null?null:o.touched))),H(3),$("ngClass",mr(15,M1,((s=l.proportionsForm.get("height"))==null?null:s.invalid)&&(((s=l.proportionsForm.get("height"))==null?null:s.dirty)||((s=l.proportionsForm.get("height"))==null?null:s.touched)))),H(),$("ngIf",((a=l.proportionsForm.get("height"))==null?null:a.invalid)&&(((a=l.proportionsForm.get("height"))==null?null:a.dirty)||((a=l.proportionsForm.get("height"))==null?null:a.touched))),H(),$("ngIf",l.furnitureData.additionalData.category)}}function Kte(n,e){if(n&1){let t=vt();I(0,"form",44),Me("ngSubmit",function(){ke(t);let r=le();return Ue(r.saveAdditional())}),I(1,"button",45),Me("click",function(){ke(t);let r=le();return Ue(r.closeAddModule())}),ye(2,"img",46),D(),I(3,"span",47)(4,"h2",48),Z(5,"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"),D(),I(6,"span",64),Pe(7,Zte,18,17,"span",65),D(),I(8,"button",66),Z(9,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),D()()()}if(n&2){let t=le();$("formGroup",t.proportionsForm),H(7),$("ngIf",t.categoryArray!==void 0),H(),$("disabled",t.proportionsForm.invalid)}}function Jte(n,e){if(n&1&&(I(0,"option",77),Z(1),D()),n&2){let t=e.$implicit;$("value",t.queryValue),H(),Cn(t.name)}}function Qte(n,e){if(n&1){let t=vt();I(0,"span",80)(1,"label",81),Z(2),D(),I(3,"select",82),lo("ngModelChange",function(r){let o=ke(t).filterData,s=le();return Ro(s.furnitureData.additionalData[o.field],r)||(s.furnitureData.additionalData[o.field]=r),Ue(r)}),Pe(4,Jte,2,2,"option",69),D()()}if(n&2){let t=e.filterData,i=le();H(),$("for",t.field),H(),Cn(t.name),H(),$("id",t.field),ao("ngModel",i.furnitureData.additionalData[t.field]),H(),$("ngForOf",t.options)}}function ene(n,e){if(n&1){let t=vt();I(0,"span",80)(1,"label",81),Z(2),D(),I(3,"input",83),lo("ngModelChange",function(r){let o=ke(t).filterData,s=le();return Ro(s.furnitureData.additionalData[o.field],r)||(s.furnitureData.additionalData[o.field]=r),Ue(r)}),D()()}if(n&2){let t=e.filterData,i=le();H(),$("for",t.field),H(),Cn(t.name),H(),$("id",t.field),ao("ngModel",i.furnitureData.additionalData[t.field])}}var Wf=(()=>{class n{elementRef;changeDetectorRef;clientImageControl;categoryService;notification;constructor(t,i,r,o,s){this.elementRef=t,this.changeDetectorRef=i,this.clientImageControl=r,this.categoryService=o,this.notification=s}addModule;isMobileView=!1;lastClickedShop=void 0;lastClickedColor=void 0;addModuleTemplate;addColorVisible=!1;categoryArray=[];currentColorId=void 0;furnitureModelInput;furnitureData;colorModuleTemplate;shopsModuleTemplate;additionalModuleTemplate;ngOnInit(){this.initCategories(),this.checkViewport()}ngAfterViewInit(){this.addModule=this.elementRef.nativeElement.querySelector(".addModule"),this.furnitureModelInput=this.elementRef.nativeElement.querySelector(".furnitureModelInput")}initCategories(){return dt(this,null,function*(){try{this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray}catch{this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439",5e3)}})}onInputImages(t){return dt(this,null,function*(){let r=t.target.files;if(!(!r||this.currentColorId===void 0))try{let o=[];for(let s=0;s<r.length;s++){let a=yield this.clientImageControl.compressImage(r[s]);a&&o.push(URL.createObjectURL(a))}this.furnitureData.colors[this.currentColorId].imagesData.images=o}catch{this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439",5e3)}})}checkViewport(){this.isMobileView=window.innerWidth<=600}numberValidator(t){let i=t.value;return i!==null&&isNaN(i)?{notANumber:!0}:null}removeImages(){this.currentColorId===void 0||!this.furnitureData.colors[this.currentColorId].imagesData.images||(this.furnitureData.colors[this.currentColorId].imagesData.images.length=0)}saveAdditional(){if(this.proportionsForm.invalid){this.proportionsForm.markAllAsTouched(),this.notification.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B",5e3);return}let{width:t,length:i,height:r}=this.proportionsForm.value;t&&i&&r&&(this.furnitureData.proportions={width:t,length:i,height:r}),this.closeAddModule()}openFurnitureVariant(t){let i=this.elementRef.nativeElement.querySelector(".colors"),r=i.querySelector(`[data-idColor="${t}"]`),o=i.querySelectorAll(".colorVariant"),s=[],a=[];o.forEach((l,u)=>{u>+t?a=[...a,l]:u<+t&&(s=[...s,l])}),[r,...a,...s].forEach((l,u)=>{l.style.setProperty("--index",(u+1).toString())}),setTimeout(()=>{r.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+t,r.style.setProperty("margin-right","0")},1250)}getfilterData(){if(!this.furnitureData.additionalData.category)return[];let t=this.categoryArray.findIndex(i=>i.name===this.furnitureData.additionalData.category);return this.categoryArray[t].filters??[]}addColor(){let t=this.colorForm.value.color;if(!t){this.notification.setError("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0446\u0432\u0435\u0442",5e3);return}for(let r of this.furnitureData.colors)if(r.color===t){this.closeAddModule(),this.notification.setError("\u0422\u0430\u043A\u043E\u0439 \u0446\u0432\u0435\u0442 \u0443\u0436\u0435 \u0435\u0441\u0442\u044C",5e3);return}let i={color:t,imagesData:{images:[],idMainImage:0}};this.furnitureData.colors.push(i),this.colorForm.patchValue({color:""}),this.currentColorId=this.furnitureData.colors.length-1,setTimeout(()=>{this.closeAddModule(),this.openFurnitureVariant(this.currentColorId)},0)}closeAddModule(){this.addModule.classList.add("disabled")}addShop(){if(this.lastClickedShop!==void 0){this.furnitureData.shops[this.lastClickedShop]={cost:this.shopForm.value.cost,url:this.shopForm.value.url};return}this.furnitureData.shops.push({cost:this.shopForm.value.cost,url:this.shopForm.value.url}),this.closeAddModule()}deleteShop(){this.lastClickedShop!=null&&this.lastClickedShop>=0&&this.lastClickedShop<this.furnitureData.shops.length&&(this.furnitureData.shops.splice(this.lastClickedShop,1),this.changeDetectorRef.detectChanges(),this.lastClickedShop=void 0)}openColorModule(t){t&&t.preventDefault(),this.addModuleTemplate=this.colorModuleTemplate,this.addModule.classList.remove("disabled"),setTimeout(()=>{this.elementRef.nativeElement.querySelector(".addModuleInput").focus()},10)}deleteColor(){let t=this.currentColorId;this.currentColorId=0,this.furnitureData.colors=this.furnitureData.colors.filter((i,r)=>r!==t)}openShopsModule(t){t!==void 0?(this.lastClickedShop=t,this.shopForm.patchValue({cost:this.furnitureData.shops[t].cost,url:this.furnitureData.shops[t].url})):(this.lastClickedShop=void 0,this.shopForm.patchValue({cost:null,url:""})),this.addModuleTemplate=this.shopsModuleTemplate,this.addModule.classList.remove("disabled")}openAdditional(){this.proportionsForm.patchValue({width:this.furnitureData.proportions.width,length:this.furnitureData.proportions.length,height:this.furnitureData.proportions.height}),this.furnitureData.proportions.width===null&&this.proportionsForm.get("width")?.markAsTouched(),this.furnitureData.proportions.length===null&&this.proportionsForm.get("length")?.markAsTouched(),this.furnitureData.proportions.height===null&&this.proportionsForm.get("height")?.markAsTouched(),this.addModuleTemplate=this.additionalModuleTemplate,this.addModule.classList.remove("disabled")}colorForm=new fi({color:new En("",[St.required])});shopForm=new fi({cost:new En(null,[St.required,this.numberValidator]),url:new En("",[St.required])});proportionsForm=new fi({width:new En(null,[St.required,St.min(0)]),length:new En(null,[St.required,St.min(0)]),height:new En(null,[St.required,St.min(0)])});static \u0275fac=function(i){return new(i||n)(ue(Yt),ue(or),ue(G_),ue(Gf),ue(Ti))};static \u0275cmp=vn({type:n,selectors:[["app-create-furniture"]],viewQuery:function(i,r){if(i&1&&(bi(Mte,5),bi(Ste,5),bi(Tte,5)),i&2){let o;si(o=ai())&&(r.colorModuleTemplate=o.first),si(o=ai())&&(r.shopsModuleTemplate=o.first),si(o=ai())&&(r.additionalModuleTemplate=o.first)}},hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,Ao)},inputs:{furnitureData:"furnitureData"},decls:40,vars:9,consts:[["colorModule",""],["shopsModule",""],["additionalModule",""],["selectFilter",""],["rangeFilter",""],[1,"body",3,"click"],["placeholder","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle",3,"ngModelChange","ngModel"],[1,"imageSlideSpan"],["class","editImagesBtn",3,"click",4,"ngIf"],[3,"imagesData","changeModeSlider",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"leftPiece"],[1,"colorSlider"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0446\u0432\u0435\u0442",1,"addColorBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"],["class","colors",3,"--total-items",4,"ngIf"],["type","file","accept",".obj","id","furnitureModel","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C 3D \u043C\u043E\u0434\u0435\u043B\u044C",1,"furnitureModelInput"],[1,"informationSpan"],[1,"descriptionSpan"],[1,"descriptionTitle"],["appAutoHeight","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435...","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"descriptionInformation",3,"ngModelChange","mobileView","ngModel"],[1,"rightFunctionalSection"],[1,"shopsTitle"],[1,"shopsSpan"],[1,"shopsListSpan"],["class","shopFunctions","title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",3,"click",4,"ngFor","ngForOf"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"addShopButton",3,"click"],["title","\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",1,"additionalFunctions",3,"click"],[1,"addModule","disabled"],[4,"ngTemplateOutlet"],[1,"editImagesBtn",3,"click"],["loading","lazy","alt","edit","src","/assets/images/editIcon.svg","alt",""],[3,"imagesData","changeModeSlider"],[1,"uploadImagesDiv"],["multiple","","type","file","accept",".png,.jpeg,.jpg","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"uploadImagesInput",3,"input"],["loading","lazy","src","/assets/images/uploadIcon.png","alt","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",1,"uploadImagesIcon"],[1,"colors"],["class","colorVariant","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",3,"background-color","click",4,"ngFor","ngForOf"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",1,"colorVariant",3,"click"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"shopFunctions",3,"click"],[1,"furnitureCost"],[1,"linkShop"],["loading","lazy","src","/assets/images/linkIcon.svg","alt","\u0421\u0441\u044B\u043B\u043A\u0430"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","colorVariant",1,"inputLabel"],["formControlName","color","placeholder","\u041D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C \u0438\u043B\u0438 #hex","id","colorVariant","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 #hex \u0438\u043B\u0438 \u043D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C",1,"addModuleInput"],["class","error-message",4,"ngIf"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0446\u0432\u0435\u0442",1,"submitAddModuleFormBtn",3,"disabled"],[1,"error-message"],["for","cost",1,"inputLabel"],["formControlName","cost","id","cost","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0435\u043D\u0443",1,"addModuleInput"],["for","url",1,"inputLabel"],["formControlName","url","id","url","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"submitAddModuleFormBtn",3,"disabled"],["class","deleteItemAddModuleBtn","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",3,"click",4,"ngIf"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt","\u0423\u0434\u0430\u043B\u0438\u0442\u044C"],[1,"params"],["class","addModuleInputSpan",4,"ngIf"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E",1,"submitAddModuleFormBtn","additionalBtn",3,"disabled"],["for","category",1,"inputLabel"],["aria-placeholder","\u0414\u0438\u0432\u0430\u043D","name","category","id","category","title","\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",1,"categorySelect",3,"ngModelChange","ngModelOptions","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","width",1,"inputLabel"],["formControlName","width","placeholder","170","id","width","type","number","min","1","step","1","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443",1,"addModuleInput",3,"ngClass"],["for","length",1,"inputLabel"],["formControlName","length","placeholder","150","id","length","type","number","min","1","step","1","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443",1,"addModuleInput",3,"ngClass"],["for","height",1,"inputLabel"],["formControlName","height","placeholder","100","id","height","type","number","min","1","step","1","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443",1,"addModuleInput",3,"ngClass"],[4,"ngIf"],[3,"value"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"filterSpan"],[1,"inputLabel",3,"for"],["type","number",1,"categorySelect",3,"ngModelChange","id","ngModel"],["type","number",1,"addModuleInput",3,"ngModelChange","id","ngModel"]],template:function(i,r){if(i&1){let o=vt();I(0,"span",5),Me("click",function(a){let l;return ke(o),Ue((l=r.currentColorId)!==null&&l!==void 0?l:r.openColorModule(a))}),I(1,"input",6),lo("ngModelChange",function(a){return ke(o),Ro(r.furnitureData.name,a)||(r.furnitureData.name=a),Ue(a)}),D(),I(2,"span",7),Pe(3,Ate,2,0,"button",8)(4,Rte,1,2,"app-image-slider",9),D(),Pe(5,Pte,3,0,"div",10),I(6,"span",11)(7,"span",12)(8,"span",13)(9,"button",14),Me("click",function(a){return ke(o),Ue(r.openColorModule(a))}),ye(10,"img",15),D(),Pe(11,Nte,2,3,"span",16),D(),ye(12,"input",17),D(),I(13,"span",18)(14,"span",19)(15,"div",20),Z(16,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),D(),I(17,"textarea",21),lo("ngModelChange",function(a){return ke(o),Ro(r.furnitureData.description,a)||(r.furnitureData.description=a),Ue(a)}),D()(),I(18,"span",22)(19,"div",23),Z(20,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),D(),I(21,"span",24)(22,"span",25),Pe(23,Fte,6,3,"button",26),D(),I(24,"button",27),Me("click",function(){return ke(o),Ue(r.openShopsModule())}),ye(25,"img",15),D()(),I(26,"button",28),Me("click",function(){return ke(o),Ue(r.openAdditional())}),Z(27," \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F "),D()()()()(),I(28,"div",29),Pe(29,Lte,1,0,"ng-container",30),D(),Pe(30,Ute,13,3,"ng-template",null,0,Yi)(32,zte,20,5,"ng-template",null,1,Yi)(34,Kte,10,3,"ng-template",null,2,Yi)(36,Qte,5,5,"ng-template",null,3,Yi)(38,ene,4,4,"ng-template",null,4,Yi)}i&2&&(H(),ao("ngModel",r.furnitureData.name),H(2),$("ngIf",r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length>0),H(),$("ngIf",r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length>0),H(),$("ngIf",r.currentColorId===void 0||r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length<=0),H(6),$("ngIf",r.furnitureData.colors!==void 0),H(6),$("mobileView",r.isMobileView),ao("ngModel",r.furnitureData.description),H(6),$("ngForOf",r.furnitureData.shops),H(6),$("ngTemplateOutlet",r.addModuleTemplate))},dependencies:[ho,ps,pL,gL,fo,Em,m_,fs,hs,Mm,Fo,Lo,Po,j_,z_,Si,Dn,Js,Ff,Cm,Ec],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}button[_ngcontent-%COMP%]:not(.colorVariant), .furnitureModelInput[_ngcontent-%COMP%]{transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:not(.colorVariant):hover, .furnitureModelInput[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.body[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;gap:30px;margin:60px auto 0}.imageSlideSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.editImagesBtn[_ngcontent-%COMP%]{aspect-ratio:1;border:none;background:none;grid-area:1/1/2/2;align-self:start;z-index:4;justify-self:end;margin-top:-10px;margin-right:-10px}@media (max-width: 768px){.editImagesBtn[_ngcontent-%COMP%]{margin:0}}.editImagesBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;cursor:pointer}app-image-slider[_ngcontent-%COMP%]{width:100%;display:block;grid-area:1/1/2/2}.leftPiece[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0 auto;width:fit-content;background:none;border:none;outline:none;font-size:1.5vw}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:300px;aspect-ratio:1;position:relative;--radius: 60px}.colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out;box-shadow:0 0 3px #fff}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:40px;aspect-ratio:1;z-index:3;background-color:#000;border:none;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.addColorBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:75%}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;min-width:350px;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleFormContent[_ngcontent-%COMP%]   .params[_ngcontent-%COMP%]{max-height:40vh;overflow-y:scroll;overflow-x:hidden}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;padding-right:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd;cursor:pointer;width:100%}.categorySelect[_ngcontent-%COMP%]{width:100%;background:none;border:1px solid #888888;border-radius:10px;padding:10px;background-color:#000;color:#fff;cursor:pointer}.addModuleInput[_ngcontent-%COMP%]{width:calc(100% - 20px);border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center;font-size:28px}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:10px;padding:15px;width:100%;border:none;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px;min-height:300px;background:none;border:none;outline:none;resize:vertical}.rightFunctionalSection[_ngcontent-%COMP%]{width:40%;display:flex;height:100%;flex-direction:column;gap:20px}.additionalFunctions[_ngcontent-%COMP%]{width:100%;background-color:#a3b18a;border-radius:10px;border:none;color:#fff;font-size:115%;line-height:50px;height:50px;cursor:pointer}.shopsSpan[_ngcontent-%COMP%]{width:100%;height:calc(100% - 60px);display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#000;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;border:2px solid rgba(163,177,138,.3)}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#000;border-radius:0 10px 10px 0;place-content:center;display:flex;border:2px solid rgba(163,177,138,.3)}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.addShopButton[_ngcontent-%COMP%]{background-color:#000;border:2px solid rgba(163,177,138,.3);display:flex;place-content:center;border-radius:10px;height:45px;cursor:pointer}.addShopButton[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px}.functionShopsModuleBtns[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{border-radius:10px;background-color:#a3b18a;height:50px;width:20%;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:50%}.furnitureModelInput[_ngcontent-%COMP%]{color:#fff;cursor:pointer;border-radius:10px;box-shadow:0 0 5px #fff;height:30px;padding:10px;align-content:center;justify-content:center;display:flex}.furnitureModelInput[_ngcontent-%COMP%]::file-selector-button{color:transparent;border-radius:50%;height:100%;aspect-ratio:1;border:none;background-color:transparent;background-image:url(/assets/images/addIcon.svg);background-repeat:no-repeat}.furnitureModelLabel[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1200px){.furnitureTitle[_ngcontent-%COMP%]{font-size:2vw}}@media (max-width: 1000px){app-create-furniture[_ngcontent-%COMP%]{width:calc(100% - 10px)}.leftPiece[_ngcontent-%COMP%]{gap:30px}.colorSlider[_ngcontent-%COMP%]{height:150px}.furnitureModelInput[_ngcontent-%COMP%]{height:25px}.furnitureTitle[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){.rightFunctionalSection[_ngcontent-%COMP%]{gap:10px}.furnitureTitle[_ngcontent-%COMP%]{font-size:3vw}.leftPiece[_ngcontent-%COMP%]{gap:0}.shopsTitle[_ngcontent-%COMP%], .descriptionTitle[_ngcontent-%COMP%]{border-radius:10px}.body[_ngcontent-%COMP%]{max-width:400px;margin-top:30px;gap:15px}.furnitureTitle[_ngcontent-%COMP%]{font-size:1.5rem;width:90%}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.colorSlider[_ngcontent-%COMP%]{width:100%;height:200px;margin-bottom:20px}.informationSpan[_ngcontent-%COMP%]{width:100%;flex-direction:column}.descriptionSpan[_ngcontent-%COMP%], .rightFunctionalSection[_ngcontent-%COMP%]{width:100%}.addModuleFormContent[_ngcontent-%COMP%]{width:calc(85vw - 40px);min-width:none;padding:20px}.shopsSpan[_ngcontent-%COMP%]{height:auto}.furnitureModelInput[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-top:10px}}.error-message[_ngcontent-%COMP%]{color:#f44;font-size:.8rem;margin-top:5px}.invalid[_ngcontent-%COMP%]{border-color:#f44!important;box-shadow:0 0 5px #ff444480}.addModuleInput.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#f44}']})}return n})();var Uk=new Ae("WindowToken",typeof window<"u"&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var Bk=(()=>{class n{constructor(t,i,r){this.ngZone=t,this.document=i,this.window=r,this.copySubject=new On,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(t){this.config=t}copy(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});let i=this.copyFromContent(t);return i?this.pushCopyResponse({content:t,isSuccess:i}):this.pushCopyResponse({isSuccess:!1,content:t})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(t,i=!0){try{this.selectTarget(t);let r=this.copyText();return this.clearSelection(i?t:void 0,this.window),r&&this.isCopySuccessInIE11()}catch{return!1}}isCopySuccessInIE11(){let t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}copyFromContent(t,i=this.document.body){if(this.tempTextArea&&!i.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{i.appendChild(this.tempTextArea)}catch{throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;let r=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),r}destroy(t=this.document.body){this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(t,i){t&&t.focus(),i.getSelection()?.removeAllRanges()}createTempTextArea(t,i){let r=t.documentElement.getAttribute("dir")==="rtl",o;o=t.createElement("textarea"),o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[r?"right":"left"]="-9999px";let s=i.pageYOffset||t.documentElement.scrollTop;return o.style.top=s+"px",o.setAttribute("readonly",""),o}pushCopyResponse(t){this.copySubject.observers.length>0&&this.ngZone.run(()=>{this.copySubject.next(t)})}pushCopyReponse(t){this.pushCopyResponse(t)}}return n.\u0275fac=function(t){return new(t||n)(ze(Kn),ze(fn),ze(Uk,8))},n.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Mc=(()=>{class n{httpModule;baseServiceUrl=hi+"furniture/card";constructor(t){this.httpModule=t}GETfurnitureCard(t,i){return dt(this,null,function*(){let r=new en().set("furnitureCardId",t);i!==void 0&&(r=r.set("jwt",i));try{let o=yield un(this.httpModule.get(this.baseServiceUrl,{params:r}));if(!o?.furnitureCard)throw new Error("Invalid response structure: furnitureCard missing");return{furnitureCard:Ct(Ne({},o.furnitureCard),{colors:o.furnitureCard.colors.map(a=>({color:a.color,imagesData:{idMainImage:a.imagesData.idMainImage,images:a.imagesData.images.map(l=>hi+l)}}))}),authorMatched:o.authorMatched}}catch(o){throw console.error("Error in GETfurnitureCard:",o),o}})}POSTcreateFurnitureCard(t,i){let r=new en().set("jwt",i);return un(this.httpModule.post(this.baseServiceUrl,t,{params:r}))}PUTupdateFurnitureCard(t,i,r){let o=new en().set("jwt",r).set("furnitureCardId",i);return un(this.httpModule.put(this.baseServiceUrl,t,{params:o}))}DELETEfurnitureCard(t,i){let r=new en().set("jwt",t).set("furnitureCardId",i);return un(this.httpModule.delete(this.baseServiceUrl,{params:r}))}static \u0275fac=function(i){return new(i||n)(ze(Bi))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nne(n,e){if(n&1&&ye(0,"app-image-slider",18),n&2){let t=le(2);$("imagesData",t.furnitureData.colors[t.currentColorId].imagesData)}}function ine(n,e){n&1&&(I(0,"div",19),ye(1,"input",20)(2,"img",21),D())}function rne(n,e){if(n&1){let t=vt();I(0,"button",22),Me("click",function(r){ke(t);let o=le(2);return Ue(o.openFurnitureVariant(r.target))}),D()}if(n&2){let t=e.$implicit,i=e.index;Hn("background-color",t.color),Tr("data-idColor",i)}}function one(n,e){if(n&1){let t=vt();I(0,"span",23)(1,"a",24),Z(2),ls(3,"costFormat"),D(),I(4,"button",25),Me("click",function(){let r=ke(t).$implicit,o=le(2);return Ue(o.copyShopLink(r.url))}),ye(5,"img",26),D()()}if(n&2){let t=e.$implicit;H(),$("href",t.url,Mr),H(),Cn(cs(3,3,t.cost)),H(2),$("title","\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443: "+t.url)}}function sne(n,e){if(n&1&&(I(0,"span",1)(1,"h1",2),Z(2),D(),Pe(3,nne,1,1,"app-image-slider",3)(4,ine,3,0,"div",4),I(5,"span",5)(6,"span",6),ye(7,"img",7),I(8,"span",8),Pe(9,rne,1,3,"button",9),D()(),I(10,"span",10)(11,"span",11)(12,"div",12),Z(13,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),D(),I(14,"div",13),Z(15),D()(),I(16,"span",14)(17,"div",15),Z(18,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),D(),I(19,"span",16),Pe(20,one,6,5,"span",17),D()()()()()),n&2){let t=le();H(2),Cn(t.furnitureData.name),H(),$("ngIf",t.furnitureData.colors[t.currentColorId].imagesData),H(),$("ngIf",!t.furnitureData.colors[t.currentColorId].imagesData),H(4),Hn("--total-items",t.furnitureData.colors.length.toString()),H(),$("ngForOf",t.furnitureData.colors),H(6),Cn(t.proccessDescription(t.furnitureData.description,t.furnitureData.proportions)),H(5),$("ngForOf",t.furnitureData.shops)}}var $_=(()=>{class n{elementRef;clipboardService;furnitureCardService;notification;constructor(t,i,r,o){this.elementRef=t,this.clipboardService=i,this.furnitureCardService=r,this.notification=o}currentColorId=0;furnitureCardId;furnitureData;ngOnChanges(){return dt(this,null,function*(){if(this.furnitureCardId!==void 0)try{this.furnitureData=(yield this.furnitureCardService.GETfurnitureCard(this.furnitureCardId)).furnitureCard}catch(t){console.log(t)}})}openFurnitureVariant(t){let i=t,r=this.elementRef.nativeElement.querySelector(".colors"),o=i.getAttribute("data-idcolor");if(!o)return;let s=r.querySelectorAll(".colorVariant"),a=[],l=[];s.forEach((u,f)=>{f>+o?l=[...l,u]:f<+o&&(a=[...a,u])}),[i,...l,...a].forEach((u,f)=>{u.style.setProperty("--index",(f+1).toString())}),setTimeout(()=>{i.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+o,i.style.setProperty("margin-right","0")},1250)}proccessDescription(t,i){return`\u0428\u0438\u0440\u0438\u043D\u0430: ${i.width} \u0441\u043C
\u0414\u043B\u0438\u043D\u0430: ${i.length} \u0441\u043C
\u0412\u044B\u0441\u043E\u0442\u0430: ${i.height} \u0441\u043C
${t}`}copyShopLink(t){this.clipboardService.copyFromContent(t)}static \u0275fac=function(i){return new(i||n)(ue(Yt),ue(Bk),ue(Mc),ue(Ti))};static \u0275cmp=vn({type:n,selectors:[["app-view-furniture"]],inputs:{furnitureCardId:"furnitureCardId",furnitureData:"furnitureData"},features:[Xi],decls:1,vars:1,consts:[["class","body",4,"ngIf"],[1,"body"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle"],[3,"imagesData",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"colorSlider"],["loading","lazy","src","assets/images/paletteIcon.svg","alt","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0432\u0435\u0442","title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0432\u0435\u0442",1,"addColorBtn"],[1,"colors"],["class","colorVariant","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",3,"background-color","click",4,"ngFor","ngForOf"],[1,"informationSpan"],[1,"descriptionSpan"],["title","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",1,"descriptionTitle"],["title","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"descriptionInformation"],[1,"shopsSpan"],["title","\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",1,"shopsTitle"],[1,"shopsListSpan"],["class","shopFunctions",4,"ngFor","ngForOf"],[3,"imagesData"],[1,"uploadImagesDiv"],["type","file","accept",".png,.jpeg","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"uploadImagesInput"],["loading","lazy","src","assets/images/uploadIcon.png","alt","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",1,"uploadImagesIcon"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",1,"colorVariant",3,"click"],[1,"shopFunctions"],["title","\u0426\u0435\u043D\u0430",1,"furnitureCost",3,"href"],[1,"linkShop",3,"click","title"],["loading","lazy","src","assets/images/linkIcon.svg","alt","\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443"]],template:function(i,r){i&1&&Pe(0,sne,21,8,"span",0),i&2&&$("ngIf",r.furnitureData)},dependencies:[z_,Si,Dn,ho,Ec],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;gap:30px;margin-bottom:15px;position:relative}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:200px;aspect-ratio:1;position:relative;--radius: 60px}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;box-shadow:0 0 10px #fff;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:30px;aspect-ratio:1;z-index:3;padding:5px;background-color:#000;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px;white-space:pre-line;font-size:16px}.shopsSpan[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#a3b18a;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;box-shadow:0 0 10px #fff;border:none;text-decoration:none}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#a3b18a;border-radius:0 10px 10px 0;border:none;place-content:center;display:flex;box-shadow:0 0 10px #fff;transition:all .5s ease-in-out;cursor:copy}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}@media (max-width: 1200px){.furnitureTitle[_ngcontent-%COMP%]{font-size:2vw}}@media (max-width: 1000px){app-view-furniture[_ngcontent-%COMP%]{width:calc(100% - 10px)}.colorSlider[_ngcontent-%COMP%]{height:200px}.furnitureTitle[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){.body[_ngcontent-%COMP%]{max-width:400px;margin:30px auto;gap:15px}.furnitureTitle[_ngcontent-%COMP%]{font-size:1.5rem;width:90%}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.colorSlider[_ngcontent-%COMP%]{width:100%;height:200px;margin-bottom:20px}.informationSpan[_ngcontent-%COMP%]{width:100%;flex-direction:column}.descriptionSpan[_ngcontent-%COMP%], .shopsSpan[_ngcontent-%COMP%]{width:100%}.descriptionTitle[_ngcontent-%COMP%], .shopsTitle[_ngcontent-%COMP%]{border-radius:10px}.descriptionInformation[_ngcontent-%COMP%]{padding:0 10px}}']})}return n})();var $x="176",Bc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Vc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},DU=0,vI=1,AU=2;var yI=1,RU=2,$a=3,la=0,jr=1,Es=2,zl=0,Wu=1,_I=2,xI=3,wI=4,PU=5,Nc=100,OU=101,NU=102,FU=103,LU=104,kU=200,UU=201,BU=202,VU=203,wx=204,bx=205,HU=206,zU=207,jU=208,GU=209,WU=210,$U=211,qU=212,XU=213,YU=214,qx=0,Xx=1,Yx=2,$u=3,Zx=4,Kx=5,Jx=6,Qx=7,bg=0,ZU=1,KU=2,jl=0,JU=1,QU=2,eB=3,tB=4,nB=5,iB=6,rB=7,tI="attached",oB="detached",nI=300,sd=301,ad=302,xh=303,ew=304,Cg=306,ca=1e3,Vo=1001,sh=1002,vr=1003,tw=1004;var ld=1005;var Vr=1006,wh=1007;var ha=1008;var pa=1009,bI=1010,CI=1011,bh=1012,nw=1013,Hc=1014,Ms=1015,Ch=1016,iw=1017,rw=1018,Eh=1020,EI=35902,MI=1021,SI=1022,jo=1023,ah=1026,Mh=1027,ow=1028,sw=1029,TI=1030,aw=1031;var lw=1033,Eg=33776,Mg=33777,Sg=33778,Tg=33779,cw=35840,uw=35841,dw=35842,fw=35843,hw=36196,pw=37492,mw=37496,gw=37808,vw=37809,yw=37810,_w=37811,xw=37812,ww=37813,bw=37814,Cw=37815,Ew=37816,Mw=37817,Sw=37818,Tw=37819,Iw=37820,Dw=37821,Ig=36492,Aw=36494,Rw=36495,II=36283,Pw=36284,Ow=36285,Nw=36286;var qu=2300,Xu=2301,xx=2302,iI=2400,rI=2401,oI=2402,sB=2500;var DI=0,Dg=1,Sh=2,aB=3200,lB=3201;var Ag=0,cB=1,Gl="",xn="srgb",yr="srgb-linear",qm="linear",Gn="srgb";var Gu=7680;var sI=519,uB=512,dB=513,fB=514,AI=515,hB=516,pB=517,mB=518,gB=519,Cx=35044;var RI="300 es",Va=2e3,Xm=2001;var Ha=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},Ir=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Vk=1234567,jm=Math.PI/180,Yu=180/Math.PI;function xs(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ir[n&255]+Ir[n>>8&255]+Ir[n>>16&255]+Ir[n>>24&255]+"-"+Ir[e&255]+Ir[e>>8&255]+"-"+Ir[e>>16&15|64]+Ir[e>>24&255]+"-"+Ir[t&63|128]+Ir[t>>8&255]+"-"+Ir[t>>16&255]+Ir[t>>24&255]+Ir[i&255]+Ir[i>>8&255]+Ir[i>>16&255]+Ir[i>>24&255]).toLowerCase()}function tn(n,e,t){return Math.max(e,Math.min(t,n))}function PI(n,e){return(n%e+e)%e}function ane(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function lne(n,e,t){return n!==e?(t-n)/(e-n):0}function Gm(n,e,t){return(1-t)*n+t*e}function cne(n,e,t,i){return Gm(n,e,1-Math.exp(-t*i))}function une(n,e=1){return e-Math.abs(PI(n,e*2)-e)}function dne(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function fne(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function hne(n,e){return n+Math.floor(Math.random()*(e-n+1))}function pne(n,e){return n+Math.random()*(e-n)}function mne(n){return n*(.5-Math.random())}function gne(n){n!==void 0&&(Vk=n);let e=Vk+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function vne(n){return n*jm}function yne(n){return n*Yu}function _ne(n){return(n&n-1)===0&&n!==0}function xne(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function wne(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function bne(n,e,t,i,r){let o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),u=o((e+i)/2),f=s((e+i)/2),h=o((e-i)/2),p=s((e-i)/2),g=o((i-e)/2),v=s((i-e)/2);switch(r){case"XYX":n.set(a*f,l*h,l*p,a*u);break;case"YZY":n.set(l*p,a*f,l*h,a*u);break;case"ZXZ":n.set(l*h,l*p,a*f,a*u);break;case"XZX":n.set(a*f,l*v,l*g,a*u);break;case"YXY":n.set(l*g,a*f,l*v,a*u);break;case"ZYZ":n.set(l*v,l*g,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function aa(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function zn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Qn={DEG2RAD:jm,RAD2DEG:Yu,generateUUID:xs,clamp:tn,euclideanModulo:PI,mapLinear:ane,inverseLerp:lne,lerp:Gm,damp:cne,pingpong:une,smoothstep:dne,smootherstep:fne,randInt:hne,randFloat:pne,randFloatSpread:mne,seededRandom:gne,degToRad:vne,radToDeg:yne,isPowerOfTwo:_ne,ceilPowerOfTwo:xne,floorPowerOfTwo:wne,setQuaternionFromProperEuler:bne,normalize:zn,denormalize:aa},We=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=tn(this.x,e.x,t.x),this.y=tn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=tn(this.x,e,t),this.y=tn(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(tn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(tn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Gt=class n{constructor(e,t,i,r,o,s,a,l,u){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,u)}set(e,t,i,r,o,s,a,l,u){let f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=o,f[5]=l,f[6]=i,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],u=i[1],f=i[4],h=i[7],p=i[2],g=i[5],v=i[8],w=r[0],y=r[3],_=r[6],T=r[1],C=r[4],E=r[7],V=r[2],F=r[5],L=r[8];return o[0]=s*w+a*T+l*V,o[3]=s*y+a*C+l*F,o[6]=s*_+a*E+l*L,o[1]=u*w+f*T+h*V,o[4]=u*y+f*C+h*F,o[7]=u*_+f*E+h*L,o[2]=p*w+g*T+v*V,o[5]=p*y+g*C+v*F,o[8]=p*_+g*E+v*L,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8];return t*s*f-t*a*u-i*o*f+i*a*l+r*o*u-r*s*l}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=f*s-a*u,p=a*l-f*o,g=u*o-s*l,v=t*h+i*p+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);let w=1/v;return e[0]=h*w,e[1]=(r*u-f*i)*w,e[2]=(a*i-r*s)*w,e[3]=p*w,e[4]=(f*t-r*l)*w,e[5]=(r*o-a*t)*w,e[6]=g*w,e[7]=(i*l-u*t)*w,e[8]=(s*t-i*o)*w,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){let l=Math.cos(o),u=Math.sin(o);return this.set(i*l,i*u,-i*(l*s+u*a)+s+e,-r*u,r*l,-r*(-u*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(T1.makeScale(e,t)),this}rotate(e){return this.premultiply(T1.makeRotation(-e)),this}translate(e,t){return this.premultiply(T1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},T1=new Gt;function OI(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function lh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function vB(){let n=lh("canvas");return n.style.display="block",n}var Hk={};function Rg(n){n in Hk||(Hk[n]=!0,console.warn(n))}function yB(n,e,t){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}}setTimeout(o,t)})}function _B(n){let e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function xB(n){let e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var zk=new Gt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),jk=new Gt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Cne(){let n={enabled:!0,workingColorSpace:yr,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===Gn&&(r.r=Fl(r.r),r.g=Fl(r.g),r.b=Fl(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Gn&&(r.r=oh(r.r),r.g=oh(r.g),r.b=oh(r.b))),r},fromWorkingColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},toWorkingColorSpace:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Gl?qm:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[yr]:{primaries:e,whitePoint:i,transfer:qm,toXYZ:zk,fromXYZ:jk,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:xn},outputColorSpaceConfig:{drawingBufferColorSpace:xn}},[xn]:{primaries:e,whitePoint:i,transfer:Gn,toXYZ:zk,fromXYZ:jk,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:xn}}}),n}var Bt=Cne();function Fl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function oh(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var $f,Ex=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{$f===void 0&&($f=lh("canvas")),$f.width=e.width,$f.height=e.height;let r=$f.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=$f}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=lh("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Fl(o[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Fl(t[i]/255)*255):t[i]=Fl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Ene=0,ch=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ene++}),this.uuid=xs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(I1(r[s].image)):o.push(I1(r[s]))}else o=I1(r);i.url=o}return t||(e.images[this.uuid]=i),i}};function I1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Ex.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Mne=0,Gr=(()=>{class n extends Ha{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Vo,o=Vo,s=Vr,a=ha,l=jo,u=pa,f=n.DEFAULT_ANISOTROPY,h=Gl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Mne++}),this.uuid=xs(),this.name="",this.source=new ch(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new We(0,0),this.repeat=new We(1,1),this.center=new We(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==nI)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ca:t.x=t.x-Math.floor(t.x);break;case Vo:t.x=t.x<0?0:1;break;case sh:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ca:t.y=t.y-Math.floor(t.y);break;case Vo:t.y=t.y<0?0:1;break;case sh:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=nI,n.DEFAULT_ANISOTROPY=1,n})(),rn=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o,l=e.elements,u=l[0],f=l[4],h=l[8],p=l[1],g=l[5],v=l[9],w=l[2],y=l[6],_=l[10];if(Math.abs(f-p)<.01&&Math.abs(h-w)<.01&&Math.abs(v-y)<.01){if(Math.abs(f+p)<.1&&Math.abs(h+w)<.1&&Math.abs(v+y)<.1&&Math.abs(u+g+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let C=(u+1)/2,E=(g+1)/2,V=(_+1)/2,F=(f+p)/4,L=(h+w)/4,W=(v+y)/4;return C>E&&C>V?C<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(C),r=F/i,o=L/i):E>V?E<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(E),i=F/r,o=W/r):V<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(V),i=L/o,r=W/o),this.set(i,r,o,t),this}let T=Math.sqrt((y-v)*(y-v)+(h-w)*(h-w)+(p-f)*(p-f));return Math.abs(T)<.001&&(T=1),this.x=(y-v)/T,this.y=(h-w)/T,this.z=(p-f)/T,this.w=Math.acos((u+g+_-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=tn(this.x,e.x,t.x),this.y=tn(this.y,e.y,t.y),this.z=tn(this.z,e.z,t.z),this.w=tn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=tn(this.x,e,t),this.y=tn(this.y,e,t),this.z=tn(this.z,e,t),this.w=tn(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(tn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Mx=class extends Ha{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new rn(0,0,e,t),this.scissorTest=!1,this.viewport=new rn(0,0,e,t);let r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Vr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);let o=new Gr(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new ch(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},za=class extends Mx{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},Ym=class extends Gr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=vr,this.minFilter=vr,this.wrapR=Vo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var Sx=class extends Gr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=vr,this.minFilter=vr,this.wrapR=Vo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var pi=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],u=i[r+1],f=i[r+2],h=i[r+3],p=o[s+0],g=o[s+1],v=o[s+2],w=o[s+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=g,e[t+2]=v,e[t+3]=w;return}if(h!==w||l!==p||u!==g||f!==v){let y=1-a,_=l*p+u*g+f*v+h*w,T=_>=0?1:-1,C=1-_*_;if(C>Number.EPSILON){let V=Math.sqrt(C),F=Math.atan2(V,_*T);y=Math.sin(y*F)/V,a=Math.sin(a*F)/V}let E=a*T;if(l=l*y+p*E,u=u*y+g*E,f=f*y+v*E,h=h*y+w*E,y===1-a){let V=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=V,u*=V,f*=V,h*=V}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,o,s){let a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],h=o[s],p=o[s+1],g=o[s+2],v=o[s+3];return e[t]=a*v+f*h+l*g-u*p,e[t+1]=l*v+f*p+u*h-a*g,e[t+2]=u*v+f*g+a*p-l*h,e[t+3]=f*v-a*h-l*p-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),h=a(o/2),p=l(i/2),g=l(r/2),v=l(o/2);switch(s){case"XYZ":this._x=p*f*h+u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h-p*g*v;break;case"YXZ":this._x=p*f*h+u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h+p*g*v;break;case"ZXY":this._x=p*f*h-u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h-p*g*v;break;case"ZYX":this._x=p*f*h-u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h+p*g*v;break;case"YZX":this._x=p*f*h+u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h-p*g*v;break;case"XZY":this._x=p*f*h-u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],u=t[2],f=t[6],h=t[10],p=i+a+h;if(p>0){let g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-l)*g,this._y=(o-u)*g,this._z=(s-r)*g}else if(i>a&&i>h){let g=2*Math.sqrt(1+i-a-h);this._w=(f-l)/g,this._x=.25*g,this._y=(r+s)/g,this._z=(o+u)/g}else if(a>h){let g=2*Math.sqrt(1+a-i-h);this._w=(o-u)/g,this._x=(r+s)/g,this._y=.25*g,this._z=(l+f)/g}else{let g=2*Math.sqrt(1+h-i-a);this._w=(s-r)/g,this._x=(o+u)/g,this._y=(l+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(tn(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,u=t._z,f=t._w;return this._x=i*f+s*a+r*u-o*l,this._y=r*f+s*l+o*a-i*u,this._z=o*f+s*u+i*l-r*a,this._w=s*f-i*a-r*l-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let g=1-t;return this._w=g*s+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*o+t*this._z,this.normalize(),this}let u=Math.sqrt(l),f=Math.atan2(u,a),h=Math.sin((1-t)*f)/u,p=Math.sin(t*f)/u;return this._w=s*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=o*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},B=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Gk.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Gk.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,u=2*(s*r-a*i),f=2*(a*t-o*r),h=2*(o*i-s*t);return this.x=t+l*u+s*h-a*f,this.y=i+l*f+a*u-o*h,this.z=r+l*h+o*f-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=tn(this.x,e.x,t.x),this.y=tn(this.y,e.y,t.y),this.z=tn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=tn(this.x,e,t),this.y=tn(this.y,e,t),this.z=tn(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(tn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return D1.copy(this).projectOnVector(e),this.sub(D1)}reflect(e){return this.sub(D1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(tn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},D1=new B,Gk=new pi,Hr=class{constructor(e=new B(1/0,1/0,1/0),t=new B(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ra.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ra.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=ra.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,ra):ra.fromBufferAttribute(o,s),ra.applyMatrix4(e.matrixWorld),this.expandByPoint(ra);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),q_.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),q_.copy(i.boundingBox)),q_.applyMatrix4(e.matrixWorld),this.union(q_)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ra),ra.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Nm),X_.subVectors(this.max,Nm),qf.subVectors(e.a,Nm),Xf.subVectors(e.b,Nm),Yf.subVectors(e.c,Nm),Sc.subVectors(Xf,qf),Tc.subVectors(Yf,Xf),Vu.subVectors(qf,Yf);let t=[0,-Sc.z,Sc.y,0,-Tc.z,Tc.y,0,-Vu.z,Vu.y,Sc.z,0,-Sc.x,Tc.z,0,-Tc.x,Vu.z,0,-Vu.x,-Sc.y,Sc.x,0,-Tc.y,Tc.x,0,-Vu.y,Vu.x,0];return!A1(t,qf,Xf,Yf,X_)||(t=[1,0,0,0,1,0,0,0,1],!A1(t,qf,Xf,Yf,X_))?!1:(Y_.crossVectors(Sc,Tc),t=[Y_.x,Y_.y,Y_.z],A1(t,qf,Xf,Yf,X_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ra).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ra).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Il[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Il[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Il[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Il[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Il[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Il[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Il[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Il[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Il),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Il=[new B,new B,new B,new B,new B,new B,new B,new B],ra=new B,q_=new Hr,qf=new B,Xf=new B,Yf=new B,Sc=new B,Tc=new B,Vu=new B,Nm=new B,X_=new B,Y_=new B,Hu=new B;function A1(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Hu.fromArray(n,o);let a=r.x*Math.abs(Hu.x)+r.y*Math.abs(Hu.y)+r.z*Math.abs(Hu.z),l=e.dot(Hu),u=t.dot(Hu),f=i.dot(Hu);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}var Sne=new Hr,Fm=new B,R1=new B,go=class{constructor(e=new B,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):Sne.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Fm.subVectors(e,this.center);let t=Fm.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Fm,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(R1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Fm.copy(e.center).add(R1)),this.expandByPoint(Fm.copy(e.center).sub(R1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Dl=new B,P1=new B,Z_=new B,Ic=new B,O1=new B,K_=new B,N1=new B,ja=class{constructor(e=new B,t=new B(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Dl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Dl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Dl.copy(this.origin).addScaledVector(this.direction,t),Dl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){P1.copy(e).add(t).multiplyScalar(.5),Z_.copy(t).sub(e).normalize(),Ic.copy(this.origin).sub(P1);let o=e.distanceTo(t)*.5,s=-this.direction.dot(Z_),a=Ic.dot(this.direction),l=-Ic.dot(Z_),u=Ic.lengthSq(),f=Math.abs(1-s*s),h,p,g,v;if(f>0)if(h=s*l-a,p=s*a-l,v=o*f,h>=0)if(p>=-v)if(p<=v){let w=1/f;h*=w,p*=w,g=h*(h+s*p+2*a)+p*(s*h+p+2*l)+u}else p=o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;else p=-o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;else p<=-v?(h=Math.max(0,-(-s*o+a)),p=h>0?-o:Math.min(Math.max(-o,-l),o),g=-h*h+p*(p+2*l)+u):p<=v?(h=0,p=Math.min(Math.max(-o,-l),o),g=p*(p+2*l)+u):(h=Math.max(0,-(s*o+a)),p=h>0?o:Math.min(Math.max(-o,-l),o),g=-h*h+p*(p+2*l)+u);else p=s>0?-o:o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(P1).addScaledVector(Z_,p),g}intersectSphere(e,t){Dl.subVectors(e.center,this.origin);let i=Dl.dot(this.direction),r=Dl.dot(Dl)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l,u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),f>=0?(o=(e.min.y-p.y)*f,s=(e.max.y-p.y)*f):(o=(e.max.y-p.y)*f,s=(e.min.y-p.y)*f),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Dl)!==null}intersectTriangle(e,t,i,r,o){O1.subVectors(t,e),K_.subVectors(i,e),N1.crossVectors(O1,K_);let s=this.direction.dot(N1),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Ic.subVectors(this.origin,e);let l=a*this.direction.dot(K_.crossVectors(Ic,K_));if(l<0)return null;let u=a*this.direction.dot(O1.cross(Ic));if(u<0||l+u>s)return null;let f=-a*Ic.dot(N1);return f<0?null:this.at(f/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},lt=class n{constructor(e,t,i,r,o,s,a,l,u,f,h,p,g,v,w,y){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,u,f,h,p,g,v,w,y)}set(e,t,i,r,o,s,a,l,u,f,h,p,g,v,w,y){let _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=o,_[5]=s,_[9]=a,_[13]=l,_[2]=u,_[6]=f,_[10]=h,_[14]=p,_[3]=g,_[7]=v,_[11]=w,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Zf.setFromMatrixColumn(e,0).length(),o=1/Zf.setFromMatrixColumn(e,1).length(),s=1/Zf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(o),h=Math.sin(o);if(e.order==="XYZ"){let p=s*f,g=s*h,v=a*f,w=a*h;t[0]=l*f,t[4]=-l*h,t[8]=u,t[1]=g+v*u,t[5]=p-w*u,t[9]=-a*l,t[2]=w-p*u,t[6]=v+g*u,t[10]=s*l}else if(e.order==="YXZ"){let p=l*f,g=l*h,v=u*f,w=u*h;t[0]=p+w*a,t[4]=v*a-g,t[8]=s*u,t[1]=s*h,t[5]=s*f,t[9]=-a,t[2]=g*a-v,t[6]=w+p*a,t[10]=s*l}else if(e.order==="ZXY"){let p=l*f,g=l*h,v=u*f,w=u*h;t[0]=p-w*a,t[4]=-s*h,t[8]=v+g*a,t[1]=g+v*a,t[5]=s*f,t[9]=w-p*a,t[2]=-s*u,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){let p=s*f,g=s*h,v=a*f,w=a*h;t[0]=l*f,t[4]=v*u-g,t[8]=p*u+w,t[1]=l*h,t[5]=w*u+p,t[9]=g*u-v,t[2]=-u,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){let p=s*l,g=s*u,v=a*l,w=a*u;t[0]=l*f,t[4]=w-p*h,t[8]=v*h+g,t[1]=h,t[5]=s*f,t[9]=-a*f,t[2]=-u*f,t[6]=g*h+v,t[10]=p-w*h}else if(e.order==="XZY"){let p=s*l,g=s*u,v=a*l,w=a*u;t[0]=l*f,t[4]=-h,t[8]=u*f,t[1]=p*h+w,t[5]=s*f,t[9]=g*h-v,t[2]=v*h-g,t[6]=a*f,t[10]=w*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Tne,e,Ine)}lookAt(e,t,i){let r=this.elements;return Uo.subVectors(e,t),Uo.lengthSq()===0&&(Uo.z=1),Uo.normalize(),Dc.crossVectors(i,Uo),Dc.lengthSq()===0&&(Math.abs(i.z)===1?Uo.x+=1e-4:Uo.z+=1e-4,Uo.normalize(),Dc.crossVectors(i,Uo)),Dc.normalize(),J_.crossVectors(Uo,Dc),r[0]=Dc.x,r[4]=J_.x,r[8]=Uo.x,r[1]=Dc.y,r[5]=J_.y,r[9]=Uo.y,r[2]=Dc.z,r[6]=J_.z,r[10]=Uo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],u=i[12],f=i[1],h=i[5],p=i[9],g=i[13],v=i[2],w=i[6],y=i[10],_=i[14],T=i[3],C=i[7],E=i[11],V=i[15],F=r[0],L=r[4],W=r[8],O=r[12],R=r[1],j=r[5],pe=r[9],ae=r[13],Ie=r[2],be=r[6],X=r[10],ie=r[14],q=r[3],ve=r[7],Ve=r[11],tt=r[15];return o[0]=s*F+a*R+l*Ie+u*q,o[4]=s*L+a*j+l*be+u*ve,o[8]=s*W+a*pe+l*X+u*Ve,o[12]=s*O+a*ae+l*ie+u*tt,o[1]=f*F+h*R+p*Ie+g*q,o[5]=f*L+h*j+p*be+g*ve,o[9]=f*W+h*pe+p*X+g*Ve,o[13]=f*O+h*ae+p*ie+g*tt,o[2]=v*F+w*R+y*Ie+_*q,o[6]=v*L+w*j+y*be+_*ve,o[10]=v*W+w*pe+y*X+_*Ve,o[14]=v*O+w*ae+y*ie+_*tt,o[3]=T*F+C*R+E*Ie+V*q,o[7]=T*L+C*j+E*be+V*ve,o[11]=T*W+C*pe+E*X+V*Ve,o[15]=T*O+C*ae+E*ie+V*tt,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],u=e[13],f=e[2],h=e[6],p=e[10],g=e[14],v=e[3],w=e[7],y=e[11],_=e[15];return v*(+o*l*h-r*u*h-o*a*p+i*u*p+r*a*g-i*l*g)+w*(+t*l*g-t*u*p+o*s*p-r*s*g+r*u*f-o*l*f)+y*(+t*u*h-t*a*g-o*s*h+i*s*g+o*a*f-i*u*f)+_*(-r*a*f-t*l*h+t*a*p+r*s*h-i*s*p+i*l*f)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=e[9],p=e[10],g=e[11],v=e[12],w=e[13],y=e[14],_=e[15],T=h*y*u-w*p*u+w*l*g-a*y*g-h*l*_+a*p*_,C=v*p*u-f*y*u-v*l*g+s*y*g+f*l*_-s*p*_,E=f*w*u-v*h*u+v*a*g-s*w*g-f*a*_+s*h*_,V=v*h*l-f*w*l-v*a*p+s*w*p+f*a*y-s*h*y,F=t*T+i*C+r*E+o*V;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let L=1/F;return e[0]=T*L,e[1]=(w*p*o-h*y*o-w*r*g+i*y*g+h*r*_-i*p*_)*L,e[2]=(a*y*o-w*l*o+w*r*u-i*y*u-a*r*_+i*l*_)*L,e[3]=(h*l*o-a*p*o-h*r*u+i*p*u+a*r*g-i*l*g)*L,e[4]=C*L,e[5]=(f*y*o-v*p*o+v*r*g-t*y*g-f*r*_+t*p*_)*L,e[6]=(v*l*o-s*y*o-v*r*u+t*y*u+s*r*_-t*l*_)*L,e[7]=(s*p*o-f*l*o+f*r*u-t*p*u-s*r*g+t*l*g)*L,e[8]=E*L,e[9]=(v*h*o-f*w*o-v*i*g+t*w*g+f*i*_-t*h*_)*L,e[10]=(s*w*o-v*a*o+v*i*u-t*w*u-s*i*_+t*a*_)*L,e[11]=(f*a*o-s*h*o-f*i*u+t*h*u+s*i*g-t*a*g)*L,e[12]=V*L,e[13]=(f*w*r-v*h*r+v*i*p-t*w*p-f*i*y+t*h*y)*L,e[14]=(v*a*r-s*w*r-v*i*l+t*w*l+s*i*y-t*a*y)*L,e[15]=(s*h*r-f*a*r+f*i*l-t*h*l-s*i*p+t*a*p)*L,this}scale(e){let t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,u=o*s,f=o*a;return this.set(u*s+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*s,0,u*l-r*a,f*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,u=o+o,f=s+s,h=a+a,p=o*u,g=o*f,v=o*h,w=s*f,y=s*h,_=a*h,T=l*u,C=l*f,E=l*h,V=i.x,F=i.y,L=i.z;return r[0]=(1-(w+_))*V,r[1]=(g+E)*V,r[2]=(v-C)*V,r[3]=0,r[4]=(g-E)*F,r[5]=(1-(p+_))*F,r[6]=(y+T)*F,r[7]=0,r[8]=(v+C)*L,r[9]=(y-T)*L,r[10]=(1-(p+w))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,o=Zf.set(r[0],r[1],r[2]).length(),s=Zf.set(r[4],r[5],r[6]).length(),a=Zf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],oa.copy(this);let u=1/o,f=1/s,h=1/a;return oa.elements[0]*=u,oa.elements[1]*=u,oa.elements[2]*=u,oa.elements[4]*=f,oa.elements[5]*=f,oa.elements[6]*=f,oa.elements[8]*=h,oa.elements[9]*=h,oa.elements[10]*=h,t.setFromRotationMatrix(oa),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=Va){let l=this.elements,u=2*o/(t-e),f=2*o/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r),g,v;if(a===Va)g=-(s+o)/(s-o),v=-2*s*o/(s-o);else if(a===Xm)g=-s/(s-o),v=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=Va){let l=this.elements,u=1/(t-e),f=1/(i-r),h=1/(s-o),p=(t+e)*u,g=(i+r)*f,v,w;if(a===Va)v=(s+o)*h,w=-2*h;else if(a===Xm)v=o*h,w=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=w,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Zf=new B,oa=new lt,Tne=new B(0,0,0),Ine=new B(1,1,1),Dc=new B,J_=new B,Uo=new B,Wk=new lt,$k=new pi,lr=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let o=t.elements,s=o[0],a=o[4],l=o[8],u=o[1],f=o[5],h=o[9],p=o[2],g=o[6],v=o[10];switch(i){case"XYZ":this._y=Math.asin(tn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(g,f),this._z=0);break;case"YXZ":this._x=Math.asin(-tn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(tn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-tn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(tn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-tn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return Wk.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Wk,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return $k.setFromEuler(this),this.setFromQuaternion($k,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),uh=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Dne=0,qk=new B,Kf=new pi,Al=new lt,Q_=new B,Lm=new B,Ane=new B,Rne=new pi,Xk=new B(1,0,0),Yk=new B(0,1,0),Zk=new B(0,0,1),Kk={type:"added"},Pne={type:"removed"},Jf={type:"childadded",child:null},F1={type:"childremoved",child:null},mi=(()=>{class n extends Ha{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Dne++}),this.uuid=xs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new B,i=new lr,r=new pi,o=new B(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new lt},normalMatrix:{value:new Gt}}),this.matrix=new lt,this.matrixWorld=new lt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new uh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Kf.setFromAxisAngle(t,i),this.quaternion.multiply(Kf),this}rotateOnWorldAxis(t,i){return Kf.setFromAxisAngle(t,i),this.quaternion.premultiply(Kf),this}rotateX(t){return this.rotateOnAxis(Xk,t)}rotateY(t){return this.rotateOnAxis(Yk,t)}rotateZ(t){return this.rotateOnAxis(Zk,t)}translateOnAxis(t,i){return qk.copy(t).applyQuaternion(this.quaternion),this.position.add(qk.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Xk,t)}translateY(t){return this.translateOnAxis(Yk,t)}translateZ(t){return this.translateOnAxis(Zk,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Al.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Q_.copy(t):Q_.set(t,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),Lm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Al.lookAt(Lm,Q_,this.up):Al.lookAt(Q_,Lm,this.up),this.quaternion.setFromRotationMatrix(Al),o&&(Al.extractRotation(o.matrixWorld),Kf.setFromRotationMatrix(Al),this.quaternion.premultiply(Kf.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Kk),Jf.child=t,this.dispatchEvent(Jf),Jf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Pne),F1.child=t,this.dispatchEvent(F1),F1.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Al.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Al.multiply(t.parent.matrixWorld)),t.applyMatrix4(Al),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Kk),Jf.child=t,this.dispatchEvent(Jf),Jf.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lm,t,Ane),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lm,Rne,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(l=>Ct(Ne({},l),{boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),o.instanceInfo=this._instanceInfo.map(l=>Ne({},l)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(t),o.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(o.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let u=l.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){let p=u[f];s(t.shapes,p)}else s(t.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(t.materials,this.material[u]));o.material=l}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let u=this.animations[l];o.animations.push(s(t.animations,u))}}if(i){let l=a(t.geometries),u=a(t.materials),f=a(t.textures),h=a(t.images),p=a(t.shapes),g=a(t.skeletons),v=a(t.animations),w=a(t.nodes);l.length>0&&(r.geometries=l),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),w.length>0&&(r.nodes=w)}return r.object=o,r;function a(l){let u=[];for(let f in l){let h=l[f];delete h.metadata,u.push(h)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let o=t.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new B(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),sa=new B,Rl=new B,L1=new B,Pl=new B,Qf=new B,eh=new B,Jk=new B,k1=new B,U1=new B,B1=new B,V1=new rn,H1=new rn,z1=new rn,Pc=class n{constructor(e=new B,t=new B,i=new B){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),sa.subVectors(e,t),r.cross(sa);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){sa.subVectors(r,t),Rl.subVectors(i,t),L1.subVectors(e,t);let s=sa.dot(sa),a=sa.dot(Rl),l=sa.dot(L1),u=Rl.dot(Rl),f=Rl.dot(L1),h=s*u-a*a;if(h===0)return o.set(0,0,0),null;let p=1/h,g=(u*l-a*f)*p,v=(s*f-a*l)*p;return o.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Pl)===null?!1:Pl.x>=0&&Pl.y>=0&&Pl.x+Pl.y<=1}static getInterpolation(e,t,i,r,o,s,a,l){return this.getBarycoord(e,t,i,r,Pl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Pl.x),l.addScaledVector(s,Pl.y),l.addScaledVector(a,Pl.z),l)}static getInterpolatedAttribute(e,t,i,r,o,s){return V1.setScalar(0),H1.setScalar(0),z1.setScalar(0),V1.fromBufferAttribute(e,t),H1.fromBufferAttribute(e,i),z1.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(V1,o.x),s.addScaledVector(H1,o.y),s.addScaledVector(z1,o.z),s}static isFrontFacing(e,t,i,r){return sa.subVectors(i,t),Rl.subVectors(e,t),sa.cross(Rl).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return sa.subVectors(this.c,this.b),Rl.subVectors(this.a,this.b),sa.cross(Rl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,o=this.c,s,a;Qf.subVectors(r,i),eh.subVectors(o,i),k1.subVectors(e,i);let l=Qf.dot(k1),u=eh.dot(k1);if(l<=0&&u<=0)return t.copy(i);U1.subVectors(e,r);let f=Qf.dot(U1),h=eh.dot(U1);if(f>=0&&h<=f)return t.copy(r);let p=l*h-f*u;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(i).addScaledVector(Qf,s);B1.subVectors(e,o);let g=Qf.dot(B1),v=eh.dot(B1);if(v>=0&&g<=v)return t.copy(o);let w=g*u-l*v;if(w<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(i).addScaledVector(eh,a);let y=f*v-g*h;if(y<=0&&h-f>=0&&g-v>=0)return Jk.subVectors(o,r),a=(h-f)/(h-f+(g-v)),t.copy(r).addScaledVector(Jk,a);let _=1/(y+w+p);return s=w*_,a=p*_,t.copy(i).addScaledVector(Qf,s).addScaledVector(eh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},wB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ac={h:0,s:0,l:0},ex={h:0,s:0,l:0};function j1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var ft=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=xn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Bt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Bt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Bt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Bt.workingColorSpace){if(e=PI(e,1),t=tn(t,0,1),i=tn(i,0,1),t===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=j1(s,o,e+1/3),this.g=j1(s,o,e),this.b=j1(s,o,e-1/3)}return Bt.toWorkingColorSpace(this,r),this}setStyle(e,t=xn){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=xn){let i=wB[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fl(e.r),this.g=Fl(e.g),this.b=Fl(e.b),this}copyLinearToSRGB(e){return this.r=oh(e.r),this.g=oh(e.g),this.b=oh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=xn){return Bt.fromWorkingColorSpace(Dr.copy(this),e),Math.round(tn(Dr.r*255,0,255))*65536+Math.round(tn(Dr.g*255,0,255))*256+Math.round(tn(Dr.b*255,0,255))}getHexString(e=xn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Bt.workingColorSpace){Bt.fromWorkingColorSpace(Dr.copy(this),t);let i=Dr.r,r=Dr.g,o=Dr.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,u,f=(a+s)/2;if(a===s)l=0,u=0;else{let h=s-a;switch(u=f<=.5?h/(s+a):h/(2-s-a),s){case i:l=(r-o)/h+(r<o?6:0);break;case r:l=(o-i)/h+2;break;case o:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=Bt.workingColorSpace){return Bt.fromWorkingColorSpace(Dr.copy(this),t),e.r=Dr.r,e.g=Dr.g,e.b=Dr.b,e}getStyle(e=xn){Bt.fromWorkingColorSpace(Dr.copy(this),e);let t=Dr.r,i=Dr.g,r=Dr.b;return e!==xn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ac),this.setHSL(Ac.h+e,Ac.s+t,Ac.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ac),e.getHSL(ex);let i=Gm(Ac.h,ex.h,t),r=Gm(Ac.s,ex.s,t),o=Gm(Ac.l,ex.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Dr=new ft;ft.NAMES=wB;var One=0,Ki=class extends Ha{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:One++}),this.uuid=xs(),this.name="",this.type="Material",this.blending=Wu,this.side=la,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=wx,this.blendDst=bx,this.blendEquation=Nc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ft(0,0,0),this.blendAlpha=0,this.depthFunc=$u,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gu,this.stencilZFail=Gu,this.stencilZPass=Gu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Wu&&(i.blending=this.blending),this.side!==la&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==wx&&(i.blendSrc=this.blendSrc),this.blendDst!==bx&&(i.blendDst=this.blendDst),this.blendEquation!==Nc&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==$u&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==sI&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Gu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Gu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Gu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(t){let o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Ho=class extends Ki{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lr,this.combine=bg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var Vi=new B,tx=new We,Nne=0,Hi=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Nne++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Cx,this.updateRanges=[],this.gpuType=Ms,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)tx.fromBufferAttribute(this,t),tx.applyMatrix3(e),this.setXY(t,tx.x,tx.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Vi.fromBufferAttribute(this,t),Vi.applyMatrix3(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Vi.fromBufferAttribute(this,t),Vi.applyMatrix4(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Vi.fromBufferAttribute(this,t),Vi.applyNormalMatrix(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Vi.fromBufferAttribute(this,t),Vi.transformDirection(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=aa(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=zn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=aa(t,this.array)),t}setX(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=aa(t,this.array)),t}setY(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=aa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=aa(t,this.array)),t}setW(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),i=zn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),i=zn(i,this.array),r=zn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),i=zn(i,this.array),r=zn(r,this.array),o=zn(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Cx&&(e.usage=this.usage),e}};var Zu=class extends Hi{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var Zm=class extends Hi{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var Bn=class extends Hi{constructor(e,t,i){super(new Float32Array(e),t,i)}},Fne=0,ys=new lt,G1=new mi,th=new B,Bo=new Hr,km=new Hr,ar=new B,ki=class n extends Ha{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Fne++}),this.uuid=xs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(OI(e)?Zm:Zu)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new Gt().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ys.makeRotationFromQuaternion(e),this.applyMatrix4(ys),this}rotateX(e){return ys.makeRotationX(e),this.applyMatrix4(ys),this}rotateY(e){return ys.makeRotationY(e),this.applyMatrix4(ys),this}rotateZ(e){return ys.makeRotationZ(e),this.applyMatrix4(ys),this}translate(e,t,i){return ys.makeTranslation(e,t,i),this.applyMatrix4(ys),this}scale(e,t,i){return ys.makeScale(e,t,i),this.applyMatrix4(ys),this}lookAt(e){return G1.lookAt(e),G1.updateMatrix(),this.applyMatrix4(G1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(th).negate(),this.translate(th.x,th.y,th.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Bn(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new B(-1/0,-1/0,-1/0),new B(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let o=t[i];Bo.setFromBufferAttribute(o),this.morphTargetsRelative?(ar.addVectors(this.boundingBox.min,Bo.min),this.boundingBox.expandByPoint(ar),ar.addVectors(this.boundingBox.max,Bo.max),this.boundingBox.expandByPoint(ar)):(this.boundingBox.expandByPoint(Bo.min),this.boundingBox.expandByPoint(Bo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new go);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new B,1/0);return}if(e){let i=this.boundingSphere.center;if(Bo.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];km.setFromBufferAttribute(a),this.morphTargetsRelative?(ar.addVectors(Bo.min,km.min),Bo.expandByPoint(ar),ar.addVectors(Bo.max,km.max),Bo.expandByPoint(ar)):(Bo.expandByPoint(km.min),Bo.expandByPoint(km.max))}Bo.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)ar.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(ar));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)ar.fromBufferAttribute(a,u),l&&(th.fromBufferAttribute(e,u),ar.add(th)),r=Math.max(r,i.distanceToSquared(ar))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Hi(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let W=0;W<i.count;W++)a[W]=new B,l[W]=new B;let u=new B,f=new B,h=new B,p=new We,g=new We,v=new We,w=new B,y=new B;function _(W,O,R){u.fromBufferAttribute(i,W),f.fromBufferAttribute(i,O),h.fromBufferAttribute(i,R),p.fromBufferAttribute(o,W),g.fromBufferAttribute(o,O),v.fromBufferAttribute(o,R),f.sub(u),h.sub(u),g.sub(p),v.sub(p);let j=1/(g.x*v.y-v.x*g.y);isFinite(j)&&(w.copy(f).multiplyScalar(v.y).addScaledVector(h,-g.y).multiplyScalar(j),y.copy(h).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(j),a[W].add(w),a[O].add(w),a[R].add(w),l[W].add(y),l[O].add(y),l[R].add(y))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let W=0,O=T.length;W<O;++W){let R=T[W],j=R.start,pe=R.count;for(let ae=j,Ie=j+pe;ae<Ie;ae+=3)_(e.getX(ae+0),e.getX(ae+1),e.getX(ae+2))}let C=new B,E=new B,V=new B,F=new B;function L(W){V.fromBufferAttribute(r,W),F.copy(V);let O=a[W];C.copy(O),C.sub(V.multiplyScalar(V.dot(O))).normalize(),E.crossVectors(F,O);let j=E.dot(l[W])<0?-1:1;s.setXYZW(W,C.x,C.y,C.z,j)}for(let W=0,O=T.length;W<O;++W){let R=T[W],j=R.start,pe=R.count;for(let ae=j,Ie=j+pe;ae<Ie;ae+=3)L(e.getX(ae+0)),L(e.getX(ae+1)),L(e.getX(ae+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Hi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);let r=new B,o=new B,s=new B,a=new B,l=new B,u=new B,f=new B,h=new B;if(e)for(let p=0,g=e.count;p<g;p+=3){let v=e.getX(p+0),w=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,v),o.fromBufferAttribute(t,w),s.fromBufferAttribute(t,y),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,w),u.fromBufferAttribute(i,y),a.add(f),l.add(f),u.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(w,l.x,l.y,l.z),i.setXYZ(y,u.x,u.y,u.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),o.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ar.fromBufferAttribute(e,t),ar.normalize(),e.setXYZ(t,ar.x,ar.y,ar.z)}toNonIndexed(){function e(a,l){let u=a.array,f=a.itemSize,h=a.normalized,p=new u.constructor(l.length*f),g=0,v=0;for(let w=0,y=l.length;w<y;w++){a.isInterleavedBufferAttribute?g=l[w]*a.data.stride+a.offset:g=l[w]*f;for(let _=0;_<f;_++)p[v++]=u[g++]}return new Hi(p,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],u=e(l,i);t.setAttribute(a,u)}let o=this.morphAttributes;for(let a in o){let l=[],u=o[a];for(let f=0,h=u.length;f<h;f++){let p=u[f],g=e(p,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let u=s[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let l in i){let u=i[l];e.data.attributes[l]=u.toJSON(e.data)}let r={},o=!1;for(let l in this.morphAttributes){let u=this.morphAttributes[l],f=[];for(let h=0,p=u.length;h<p;h++){let g=u[h];f.push(g.toJSON(e.data))}f.length>0&&(r[l]=f,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let u in r){let f=r[u];this.setAttribute(u,f.clone(t))}let o=e.morphAttributes;for(let u in o){let f=[],h=o[u];for(let p=0,g=h.length;p<g;p++)f.push(h[p].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let u=0,f=s.length;u<f;u++){let h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},Qk=new lt,zu=new ja,nx=new go,eU=new B,ix=new B,rx=new B,ox=new B,W1=new B,sx=new B,tU=new B,ax=new B,gi=class extends mi{constructor(e=new ki,t=new Ho){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){sx.set(0,0,0);for(let l=0,u=o.length;l<u;l++){let f=a[l],h=o[l];f!==0&&(W1.fromBufferAttribute(h,e),s?sx.addScaledVector(W1,f):sx.addScaledVector(W1.sub(t),f))}t.add(sx)}return t}raycast(e,t){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),nx.copy(i.boundingSphere),nx.applyMatrix4(o),zu.copy(e.ray).recast(e.near),!(nx.containsPoint(zu.origin)===!1&&(zu.intersectSphere(nx,eU)===null||zu.origin.distanceToSquared(eU)>(e.far-e.near)**2))&&(Qk.copy(o).invert(),zu.copy(e.ray).applyMatrix4(Qk),!(i.boundingBox!==null&&zu.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,zu)))}_computeIntersections(e,t,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,f=o.attributes.uv1,h=o.attributes.normal,p=o.groups,g=o.drawRange;if(a!==null)if(Array.isArray(s))for(let v=0,w=p.length;v<w;v++){let y=p[v],_=s[y.materialIndex],T=Math.max(y.start,g.start),C=Math.min(a.count,Math.min(y.start+y.count,g.start+g.count));for(let E=T,V=C;E<V;E+=3){let F=a.getX(E),L=a.getX(E+1),W=a.getX(E+2);r=lx(this,_,e,i,u,f,h,F,L,W),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{let v=Math.max(0,g.start),w=Math.min(a.count,g.start+g.count);for(let y=v,_=w;y<_;y+=3){let T=a.getX(y),C=a.getX(y+1),E=a.getX(y+2);r=lx(this,s,e,i,u,f,h,T,C,E),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let v=0,w=p.length;v<w;v++){let y=p[v],_=s[y.materialIndex],T=Math.max(y.start,g.start),C=Math.min(l.count,Math.min(y.start+y.count,g.start+g.count));for(let E=T,V=C;E<V;E+=3){let F=E,L=E+1,W=E+2;r=lx(this,_,e,i,u,f,h,F,L,W),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{let v=Math.max(0,g.start),w=Math.min(l.count,g.start+g.count);for(let y=v,_=w;y<_;y+=3){let T=y,C=y+1,E=y+2;r=lx(this,s,e,i,u,f,h,T,C,E),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}};function Lne(n,e,t,i,r,o,s,a){let l;if(e.side===jr?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,e.side===la,a),l===null)return null;ax.copy(a),ax.applyMatrix4(n.matrixWorld);let u=t.ray.origin.distanceTo(ax);return u<t.near||u>t.far?null:{distance:u,point:ax.clone(),object:n}}function lx(n,e,t,i,r,o,s,a,l,u){n.getVertexPosition(a,ix),n.getVertexPosition(l,rx),n.getVertexPosition(u,ox);let f=Lne(n,e,t,i,ix,rx,ox,tU);if(f){let h=new B;Pc.getBarycoord(tU,ix,rx,ox,h),r&&(f.uv=Pc.getInterpolatedAttribute(r,a,l,u,h,new We)),o&&(f.uv1=Pc.getInterpolatedAttribute(o,a,l,u,h,new We)),s&&(f.normal=Pc.getInterpolatedAttribute(s,a,l,u,h,new B),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));let p={a,b:l,c:u,normal:new B,materialIndex:0};Pc.getNormal(ix,rx,ox,p.normal),f.face=p,f.barycoord=h}return f}var dh=class n extends ki{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],u=[],f=[],h=[],p=0,g=0;v("z","y","x",-1,-1,i,t,e,s,o,0),v("z","y","x",1,-1,i,t,-e,s,o,1),v("x","z","y",1,1,e,i,t,r,s,2),v("x","z","y",1,-1,e,i,-t,r,s,3),v("x","y","z",1,-1,e,t,i,r,o,4),v("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new Bn(u,3)),this.setAttribute("normal",new Bn(f,3)),this.setAttribute("uv",new Bn(h,2));function v(w,y,_,T,C,E,V,F,L,W,O){let R=E/L,j=V/W,pe=E/2,ae=V/2,Ie=F/2,be=L+1,X=W+1,ie=0,q=0,ve=new B;for(let Ve=0;Ve<X;Ve++){let tt=Ve*j-ae;for(let ge=0;ge<be;ge++){let re=ge*R-pe;ve[w]=re*T,ve[y]=tt*C,ve[_]=Ie,u.push(ve.x,ve.y,ve.z),ve[w]=0,ve[y]=0,ve[_]=F>0?1:-1,f.push(ve.x,ve.y,ve.z),h.push(ge/L),h.push(1-Ve/W),ie+=1}}for(let Ve=0;Ve<W;Ve++)for(let tt=0;tt<L;tt++){let ge=p+tt+be*Ve,re=p+tt+be*(Ve+1),U=p+(tt+1)+be*(Ve+1),J=p+(tt+1)+be*Ve;l.push(ge,re,J),l.push(re,U,J),q+=6}a.addGroup(g,q,O),g+=q,p+=ie}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function cd(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Rr(n){let e={};for(let t=0;t<n.length;t++){let i=cd(n[t]);for(let r in i)e[r]=i[r]}return e}function kne(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function NI(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Bt.workingColorSpace}var bB={clone:cd,merge:Rr},Une=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Bne=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,ua=class extends Ki{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Une,this.fragmentShader=Bne,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cd(e.uniforms),this.uniformsGroups=kne(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Km=class extends mi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new lt,this.projectionMatrix=new lt,this.projectionMatrixInverse=new lt,this.coordinateSystem=Va}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Rc=new B,nU=new We,iU=new We,Ii=class extends Km{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Yu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(jm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Yu*2*Math.atan(Math.tan(jm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Rc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Rc.x,Rc.y).multiplyScalar(-e/Rc.z),Rc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Rc.x,Rc.y).multiplyScalar(-e/Rc.z)}getViewSize(e,t){return this.getViewBounds(e,nU,iU),t.subVectors(iU,nU)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(jm*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},nh=-90,ih=1,Tx=class extends mi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Ii(nh,ih,e,t);r.layers=this.layers,this.add(r);let o=new Ii(nh,ih,e,t);o.layers=this.layers,this.add(o);let s=new Ii(nh,ih,e,t);s.layers=this.layers,this.add(s);let a=new Ii(nh,ih,e,t);a.layers=this.layers,this.add(a);let l=new Ii(nh,ih,e,t);l.layers=this.layers,this.add(l);let u=new Ii(nh,ih,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,l]=t;for(let u of t)this.remove(u);if(e===Va)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Xm)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,u,f]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;let w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(h,p,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}},Jm=class extends Gr{constructor(e=[],t=sd,i,r,o,s,a,l,u,f){super(e,t,i,r,o,s,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Ix=class extends za{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Jm(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Vr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new dh(5,5,5),o=new ua({name:"CubemapFromEquirect",uniforms:cd(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:jr,blending:zl});o.uniforms.tEquirect.value=t;let s=new gi(r,o),a=t.minFilter;return t.minFilter===ha&&(t.minFilter=Vr),new Tx(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}},Ar=class extends mi{constructor(){super(),this.isGroup=!0,this.type="Group"}},Vne={type:"move"},fh=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ar,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ar,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new B,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new B),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ar,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new B,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new B),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(let w of e.hand.values()){let y=t.getJointPose(w,i),_=this._getHandJoint(u,w);y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=y.radius),_.visible=y!==null}let f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=f.position.distanceTo(h.position),g=.02,v=.005;u.inputState.pinching&&p>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Vne)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Ar;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var Qm=class extends mi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new lr,this.environmentIntensity=1,this.environmentRotation=new lr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},hh=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Cx,this.updateRanges=[],this.version=0,this.uuid=xs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Br=new B,ph=class n{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Br.fromBufferAttribute(this,t),Br.applyMatrix4(e),this.setXYZ(t,Br.x,Br.y,Br.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Br.fromBufferAttribute(this,t),Br.applyNormalMatrix(e),this.setXYZ(t,Br.x,Br.y,Br.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Br.fromBufferAttribute(this,t),Br.transformDirection(e),this.setXYZ(t,Br.x,Br.y,Br.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=aa(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=zn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=aa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=aa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=aa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=aa(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=zn(t,this.array),i=zn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=zn(t,this.array),i=zn(i,this.array),r=zn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=zn(t,this.array),i=zn(i,this.array),r=zn(r,this.array),o=zn(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new Hi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var rU=new B,oU=new rn,sU=new rn,Hne=new B,aU=new lt,cx=new B,$1=new go,lU=new lt,q1=new ja,Ku=class extends gi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=tI,this.bindMatrix=new lt,this.bindMatrixInverse=new lt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Hr),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,cx),this.boundingBox.expandByPoint(cx)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new go),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,cx),this.boundingSphere.expandByPoint(cx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$1.copy(this.boundingSphere),$1.applyMatrix4(r),e.ray.intersectsSphere($1)!==!1&&(lU.copy(r).invert(),q1.copy(e.ray).applyMatrix4(lU),!(this.boundingBox!==null&&q1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,q1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new rn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===tI?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===oB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let i=this.skeleton,r=this.geometry;oU.fromBufferAttribute(r.attributes.skinIndex,e),sU.fromBufferAttribute(r.attributes.skinWeight,e),rU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){let s=sU.getComponent(o);if(s!==0){let a=oU.getComponent(o);aU.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Hne.copy(rU).applyMatrix4(aU),s)}}return t.applyMatrix4(this.bindMatrixInverse)}},Ll=class extends mi{constructor(){super(),this.isBone=!0,this.type="Bone"}},eg=class extends Gr{constructor(e=null,t=1,i=1,r,o,s,a,l,u=vr,f=vr,h,p){super(null,s,a,l,u,f,r,o,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},cU=new lt,zne=new lt,Ju=class n{constructor(e=[],t=[]){this.uuid=xs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new lt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new lt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:zne;cU.multiplyMatrices(a,t[o]),cU.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new eg(t,e,e,jo,Ms);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let o=e.bones[i],s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Ll),this.bones.push(s),this.boneInverses.push(new lt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,o=t.length;r<o;r++){let s=t[r];e.bones.push(s.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},Fc=class extends Hi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},rh=new lt,uU=new lt,ux=[],dU=new Hr,jne=new lt,Um=new gi,Bm=new go,tg=class extends gi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Fc(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,jne)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Hr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,rh),dU.copy(e.boundingBox).applyMatrix4(rh),this.boundingBox.union(dU)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new go),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,rh),Bm.copy(e.boundingSphere).applyMatrix4(rh),this.boundingSphere.union(Bm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=e*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(e,t){let i=this.matrixWorld,r=this.count;if(Um.geometry=this.geometry,Um.material=this.material,Um.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Bm.copy(this.boundingSphere),Bm.applyMatrix4(i),e.ray.intersectsSphere(Bm)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,rh),uU.multiplyMatrices(i,rh),Um.matrixWorld=uU,Um.raycast(e,ux);for(let s=0,a=ux.length;s<a;s++){let l=ux[s];l.instanceId=o,l.object=this,t.push(l)}ux.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Fc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new eg(new Float32Array(r*this.count),r,this.count,ow,Ms));let o=this.morphTexture.source.data.data,s=0;for(let u=0;u<i.length;u++)s+=i[u];let a=this.geometry.morphTargetsRelative?1:1-s,l=r*e;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}},X1=new B,Gne=new B,Wne=new Gt,_s=class{constructor(e=new B(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=X1.subVectors(i,t).cross(Gne.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(X1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||Wne.getNormalMatrix(e),r=this.coplanarPoint(X1).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},ju=new go,dx=new B,mh=class{constructor(e=new _s,t=new _s,i=new _s,r=new _s,o=new _s,s=new _s){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Va){let i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],u=r[4],f=r[5],h=r[6],p=r[7],g=r[8],v=r[9],w=r[10],y=r[11],_=r[12],T=r[13],C=r[14],E=r[15];if(i[0].setComponents(l-o,p-u,y-g,E-_).normalize(),i[1].setComponents(l+o,p+u,y+g,E+_).normalize(),i[2].setComponents(l+s,p+f,y+v,E+T).normalize(),i[3].setComponents(l-s,p-f,y-v,E-T).normalize(),i[4].setComponents(l-a,p-h,y-w,E-C).normalize(),t===Va)i[5].setComponents(l+a,p+h,y+w,E+C).normalize();else if(t===Xm)i[5].setComponents(a,h,w,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ju.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ju.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ju)}intersectsSprite(e){return ju.center.set(0,0,0),ju.radius=.7071067811865476,ju.applyMatrix4(e.matrixWorld),this.intersectsSphere(ju)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(dx.x=r.normal.x>0?e.max.x:e.min.x,dx.y=r.normal.y>0?e.max.y:e.min.y,dx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(dx)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var ws=class extends Ki{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ft(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Dx=new B,Ax=new B,fU=new lt,Vm=new ja,fx=new go,Y1=new B,hU=new B,kl=class extends mi{constructor(e=new ki,t=new ws){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)Dx.fromBufferAttribute(t,r-1),Ax.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Dx.distanceTo(Ax);e.setAttribute("lineDistance",new Bn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),fx.copy(i.boundingSphere),fx.applyMatrix4(r),fx.radius+=o,e.ray.intersectsSphere(fx)===!1)return;fU.copy(r).invert(),Vm.copy(e.ray).applyMatrix4(fU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){let g=Math.max(0,s.start),v=Math.min(f.count,s.start+s.count);for(let w=g,y=v-1;w<y;w+=u){let _=f.getX(w),T=f.getX(w+1),C=hx(this,e,Vm,l,_,T,w);C&&t.push(C)}if(this.isLineLoop){let w=f.getX(v-1),y=f.getX(g),_=hx(this,e,Vm,l,w,y,v-1);_&&t.push(_)}}else{let g=Math.max(0,s.start),v=Math.min(p.count,s.start+s.count);for(let w=g,y=v-1;w<y;w+=u){let _=hx(this,e,Vm,l,w,w+1,w);_&&t.push(_)}if(this.isLineLoop){let w=hx(this,e,Vm,l,v-1,g,v-1);w&&t.push(w)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function hx(n,e,t,i,r,o,s){let a=n.geometry.attributes.position;if(Dx.fromBufferAttribute(a,r),Ax.fromBufferAttribute(a,o),t.distanceSqToSegment(Dx,Ax,Y1,hU)>i)return;Y1.applyMatrix4(n.matrixWorld);let u=e.ray.origin.distanceTo(Y1);if(!(u<e.near||u>e.far))return{distance:u,point:hU.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}var pU=new B,mU=new B,Lc=class extends kl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)pU.fromBufferAttribute(t,r),mU.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+pU.distanceTo(mU);e.setAttribute("lineDistance",new Bn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},ng=class extends kl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},da=class extends Ki{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},gU=new lt,aI=new ja,px=new go,mx=new B,Ul=class extends mi{constructor(e=new ki,t=new da){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),px.copy(i.boundingSphere),px.applyMatrix4(r),px.radius+=o,e.ray.intersectsSphere(px)===!1)return;gU.copy(r).invert(),aI.copy(e.ray).applyMatrix4(gU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){let p=Math.max(0,s.start),g=Math.min(u.count,s.start+s.count);for(let v=p,w=g;v<w;v++){let y=u.getX(v);mx.fromBufferAttribute(h,y),vU(mx,y,l,r,e,t,this)}}else{let p=Math.max(0,s.start),g=Math.min(h.count,s.start+s.count);for(let v=p,w=g;v<w;v++)mx.fromBufferAttribute(h,v),vU(mx,v,l,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function vU(n,e,t,i,r,o,s){let a=aI.distanceSqToPoint(n);if(a<t){let l=new B;aI.closestPointToPoint(n,l),l.applyMatrix4(i);let u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}var ig=class extends Gr{constructor(e,t,i=Hc,r,o,s,a=vr,l=vr,u,f=ah){if(f!==ah&&f!==Mh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,o,s,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ch(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};var zr=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(r),t.push(o),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let i=this.getLengths(),r=0,o=i.length,s;t?s=t:s=e*i[o-1];let a=0,l=o-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-s,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(o-1);let f=i[r],p=i[r+1]-f,g=(s-f)/p;return(r+g)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),l=t||(s.isVector2?new We:new B);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){let i=new B,r=[],o=[],s=[],a=new B,l=new lt;for(let g=0;g<=e;g++){let v=g/e;r[g]=this.getTangentAt(v,new B)}o[0]=new B,s[0]=new B;let u=Number.MAX_VALUE,f=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=u&&(u=f,i.set(1,0,0)),h<=u&&(u=h,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let g=1;g<=e;g++){if(o[g]=o[g-1].clone(),s[g]=s[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();let v=Math.acos(tn(r[g-1].dot(r[g]),-1,1));o[g].applyMatrix4(l.makeRotationAxis(a,v))}s[g].crossVectors(r[g],o[g])}if(t===!0){let g=Math.acos(tn(o[0].dot(o[e]),-1,1));g/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(g=-g);for(let v=1;v<=e;v++)o[v].applyMatrix4(l.makeRotationAxis(r[v],g*v)),s[v].crossVectors(r[v],o[v])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},gh=class extends zr{constructor(e=0,t=0,i=1,r=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new We){let i=t,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let f=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,g=u-this.aY;l=p*f-g*h+this.aX,u=p*h+g*f+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Rx=class extends gh{constructor(e,t,i,r,o,s){super(e,t,i,i,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function FI(){let n=0,e=0,t=0,i=0;function r(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){r(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,f,h){let p=(s-o)/u-(a-o)/(u+f)+(a-s)/f,g=(a-s)/f-(l-s)/(f+h)+(l-a)/h;p*=f,g*=f,r(s,a,p,g)},calc:function(o){let s=o*o,a=s*o;return n+e*o+t*s+i*a}}}var gx=new B,Z1=new FI,K1=new FI,J1=new FI,Px=class extends zr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new B){let i=t,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let u,f;this.closed||a>0?u=r[(a-1)%o]:(gx.subVectors(r[0],r[1]).add(r[0]),u=gx);let h=r[a%o],p=r[(a+1)%o];if(this.closed||a+2<o?f=r[(a+2)%o]:(gx.subVectors(r[o-1],r[o-2]).add(r[o-1]),f=gx),this.curveType==="centripetal"||this.curveType==="chordal"){let g=this.curveType==="chordal"?.5:.25,v=Math.pow(u.distanceToSquared(h),g),w=Math.pow(h.distanceToSquared(p),g),y=Math.pow(p.distanceToSquared(f),g);w<1e-4&&(w=1),v<1e-4&&(v=w),y<1e-4&&(y=w),Z1.initNonuniformCatmullRom(u.x,h.x,p.x,f.x,v,w,y),K1.initNonuniformCatmullRom(u.y,h.y,p.y,f.y,v,w,y),J1.initNonuniformCatmullRom(u.z,h.z,p.z,f.z,v,w,y)}else this.curveType==="catmullrom"&&(Z1.initCatmullRom(u.x,h.x,p.x,f.x,this.tension),K1.initCatmullRom(u.y,h.y,p.y,f.y,this.tension),J1.initCatmullRom(u.z,h.z,p.z,f.z,this.tension));return i.set(Z1.calc(l),K1.calc(l),J1.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new B().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function yU(n,e,t,i,r){let o=(i-e)*.5,s=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+o+s)*l+(-3*t+3*i-2*o-s)*a+o*n+t}function $ne(n,e){let t=1-n;return t*t*e}function qne(n,e){return 2*(1-n)*n*e}function Xne(n,e){return n*n*e}function Wm(n,e,t,i){return $ne(n,e)+qne(n,t)+Xne(n,i)}function Yne(n,e){let t=1-n;return t*t*t*e}function Zne(n,e){let t=1-n;return 3*t*t*n*e}function Kne(n,e){return 3*(1-n)*n*n*e}function Jne(n,e){return n*n*n*e}function $m(n,e,t,i,r){return Yne(n,e)+Zne(n,t)+Kne(n,i)+Jne(n,r)}var rg=class extends zr{constructor(e=new We,t=new We,i=new We,r=new We){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new We){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set($m(e,r.x,o.x,s.x,a.x),$m(e,r.y,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ox=class extends zr{constructor(e=new B,t=new B,i=new B,r=new B){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new B){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set($m(e,r.x,o.x,s.x,a.x),$m(e,r.y,o.y,s.y,a.y),$m(e,r.z,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},og=class extends zr{constructor(e=new We,t=new We){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new We){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new We){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Nx=class extends zr{constructor(e=new B,t=new B){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new B){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new B){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},sg=class extends zr{constructor(e=new We,t=new We,i=new We){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new We){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(Wm(e,r.x,o.x,s.x),Wm(e,r.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Fx=class extends zr{constructor(e=new B,t=new B,i=new B){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new B){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(Wm(e,r.x,o.x,s.x),Wm(e,r.y,o.y,s.y),Wm(e,r.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},ag=class extends zr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new We){let i=t,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[s===0?s:s-1],u=r[s],f=r[s>r.length-2?r.length-1:s+1],h=r[s>r.length-3?r.length-1:s+2];return i.set(yU(a,l.x,u.x,f.x,h.x),yU(a,l.y,u.y,f.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new We().fromArray(r))}return this}},_U=Object.freeze({__proto__:null,ArcCurve:Rx,CatmullRomCurve3:Px,CubicBezierCurve:rg,CubicBezierCurve3:Ox,EllipseCurve:gh,LineCurve:og,LineCurve3:Nx,QuadraticBezierCurve:sg,QuadraticBezierCurve3:Fx,SplineCurve:ag}),Lx=class extends zr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new _U[i](t,e))}return this}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=i){let s=r[o]-i,a=this.curves[o],l=a.getLength(),u=l===0?0:1-s/l;return a.getPointAt(u,t)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let u=0;u<l.length;u++){let f=l[u];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new _U[r.type]().fromJSON(r))}return this}},lg=class extends Lx{constructor(e){super(),this.type="Path",this.currentPoint=new We,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new og(this.currentPoint.clone(),new We(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let o=new sg(this.currentPoint.clone(),new We(e,t),new We(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,o,s){let a=new rg(this.currentPoint.clone(),new We(e,t),new We(i,r),new We(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new ag(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,o,s){let a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,o,s),this}absarc(e,t,i,r,o,s){return this.absellipse(e,t,i,i,r,o,s),this}ellipse(e,t,i,r,o,s,a,l){let u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,i,r,o,s,a,l),this}absellipse(e,t,i,r,o,s,a,l){let u=new gh(e,t,i,r,o,s,a,l);if(this.curves.length>0){let h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);let f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},vh=class extends lg{constructor(e){super(e),this.uuid=xs(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new lg().fromJSON(r))}return this}};function Qne(n,e,t=2){let i=e&&e.length,r=i?e[0]*t:n.length,o=CB(n,0,r,t,!0),s=[];if(!o||o.next===o.prev)return s;let a,l,u;if(i&&(o=rie(n,e,o,t)),n.length>80*t){a=1/0,l=1/0;let f=-1/0,h=-1/0;for(let p=t;p<r;p+=t){let g=n[p],v=n[p+1];g<a&&(a=g),v<l&&(l=v),g>f&&(f=g),v>h&&(h=v)}u=Math.max(f-a,h-l),u=u!==0?32767/u:0}return cg(o,s,t,a,l,u,0),s}function CB(n,e,t,i,r){let o;if(r===mie(n,e,t,i)>0)for(let s=e;s<t;s+=i)o=xU(s/i|0,n[s],n[s+1],o);else for(let s=t-i;s>=e;s-=i)o=xU(s/i|0,n[s],n[s+1],o);return o&&yh(o,o.next)&&(dg(o),o=o.next),o}function Qu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(yh(t,t.next)||Ci(t.prev,t,t.next)===0)){if(dg(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function cg(n,e,t,i,r,o,s){if(!n)return;!s&&o&&cie(n,i,r,o);let a=n;for(;n.prev!==n.next;){let l=n.prev,u=n.next;if(o?tie(n,i,r,o):eie(n)){e.push(l.i,n.i,u.i),dg(n),n=u.next,a=u.next;continue}if(n=u,n===a){s?s===1?(n=nie(Qu(n),e),cg(n,e,t,i,r,o,2)):s===2&&iie(n,e,t,i,r,o):cg(Qu(n),e,t,i,r,o,1);break}}}function eie(n){let e=n.prev,t=n,i=n.next;if(Ci(e,t,i)>=0)return!1;let r=e.x,o=t.x,s=i.x,a=e.y,l=t.y,u=i.y,f=Math.min(r,o,s),h=Math.min(a,l,u),p=Math.max(r,o,s),g=Math.max(a,l,u),v=i.next;for(;v!==e;){if(v.x>=f&&v.x<=p&&v.y>=h&&v.y<=g&&zm(r,a,o,l,s,u,v.x,v.y)&&Ci(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function tie(n,e,t,i){let r=n.prev,o=n,s=n.next;if(Ci(r,o,s)>=0)return!1;let a=r.x,l=o.x,u=s.x,f=r.y,h=o.y,p=s.y,g=Math.min(a,l,u),v=Math.min(f,h,p),w=Math.max(a,l,u),y=Math.max(f,h,p),_=lI(g,v,e,t,i),T=lI(w,y,e,t,i),C=n.prevZ,E=n.nextZ;for(;C&&C.z>=_&&E&&E.z<=T;){if(C.x>=g&&C.x<=w&&C.y>=v&&C.y<=y&&C!==r&&C!==s&&zm(a,f,l,h,u,p,C.x,C.y)&&Ci(C.prev,C,C.next)>=0||(C=C.prevZ,E.x>=g&&E.x<=w&&E.y>=v&&E.y<=y&&E!==r&&E!==s&&zm(a,f,l,h,u,p,E.x,E.y)&&Ci(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;C&&C.z>=_;){if(C.x>=g&&C.x<=w&&C.y>=v&&C.y<=y&&C!==r&&C!==s&&zm(a,f,l,h,u,p,C.x,C.y)&&Ci(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;E&&E.z<=T;){if(E.x>=g&&E.x<=w&&E.y>=v&&E.y<=y&&E!==r&&E!==s&&zm(a,f,l,h,u,p,E.x,E.y)&&Ci(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function nie(n,e){let t=n;do{let i=t.prev,r=t.next.next;!yh(i,r)&&MB(i,t,t.next,r)&&ug(i,r)&&ug(r,i)&&(e.push(i.i,t.i,r.i),dg(t),dg(t.next),t=n=r),t=t.next}while(t!==n);return Qu(t)}function iie(n,e,t,i,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&fie(s,a)){let l=SB(s,a);s=Qu(s,s.next),l=Qu(l,l.next),cg(s,e,t,i,r,o,0),cg(l,e,t,i,r,o,0);return}a=a.next}s=s.next}while(s!==n)}function rie(n,e,t,i){let r=[];for(let o=0,s=e.length;o<s;o++){let a=e[o]*i,l=o<s-1?e[o+1]*i:n.length,u=CB(n,a,l,i,!1);u===u.next&&(u.steiner=!0),r.push(die(u))}r.sort(oie);for(let o=0;o<r.length;o++)t=sie(r[o],t);return t}function oie(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){let i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function sie(n,e){let t=aie(n,e);if(!t)return e;let i=SB(t,n);return Qu(i,i.next),Qu(t,t.next)}function aie(n,e){let t=e,i=n.x,r=n.y,o=-1/0,s;if(yh(n,t))return t;do{if(yh(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){let h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>o&&(o=h,s=t.x<t.next.x?t:t.next,h===i))return s}t=t.next}while(t!==e);if(!s)return null;let a=s,l=s.x,u=s.y,f=1/0;t=s;do{if(i>=t.x&&t.x>=l&&i!==t.x&&EB(r<u?i:o,r,l,u,r<u?o:i,r,t.x,t.y)){let h=Math.abs(r-t.y)/(i-t.x);ug(t,n)&&(h<f||h===f&&(t.x>s.x||t.x===s.x&&lie(s,t)))&&(s=t,f=h)}t=t.next}while(t!==a);return s}function lie(n,e){return Ci(n.prev,n,e.prev)<0&&Ci(e.next,n,n.next)<0}function cie(n,e,t,i){let r=n;do r.z===0&&(r.z=lI(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,uie(r)}function uie(n){let e,t=1;do{let i=n,r;n=null;let o=null;for(e=0;i;){e++;let s=i,a=0;for(let u=0;u<t&&(a++,s=s.nextZ,!!s);u++);let l=t;for(;a>0||l>0&&s;)a!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,l--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;i=s}o.nextZ=null,t*=2}while(e>1);return n}function lI(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function die(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function EB(n,e,t,i,r,o,s,a){return(r-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(i-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(r-s)*(i-a)}function zm(n,e,t,i,r,o,s,a){return!(n===s&&e===a)&&EB(n,e,t,i,r,o,s,a)}function fie(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!hie(n,e)&&(ug(n,e)&&ug(e,n)&&pie(n,e)&&(Ci(n.prev,n,e.prev)||Ci(n,e.prev,e))||yh(n,e)&&Ci(n.prev,n,n.next)>0&&Ci(e.prev,e,e.next)>0)}function Ci(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function yh(n,e){return n.x===e.x&&n.y===e.y}function MB(n,e,t,i){let r=yx(Ci(n,e,t)),o=yx(Ci(n,e,i)),s=yx(Ci(t,i,n)),a=yx(Ci(t,i,e));return!!(r!==o&&s!==a||r===0&&vx(n,t,e)||o===0&&vx(n,i,e)||s===0&&vx(t,n,i)||a===0&&vx(t,e,i))}function vx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function yx(n){return n>0?1:n<0?-1:0}function hie(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&MB(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ug(n,e){return Ci(n.prev,n,n.next)<0?Ci(n,e,n.next)>=0&&Ci(n,n.prev,e)>=0:Ci(n,e,n.prev)<0||Ci(n,n.next,e)<0}function pie(n,e){let t=n,i=!1,r=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function SB(n,e){let t=cI(n.i,n.x,n.y),i=cI(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function xU(n,e,t,i){let r=cI(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function dg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function cI(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function mie(n,e,t,i){let r=0;for(let o=e,s=t-i;o<t;o+=i)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var uI=class{static triangulate(e,t,i=2){return Qne(e,t,i)}},Oc=class n{static area(e){let t=e.length,i=0;for(let r=t-1,o=0;o<t;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],r=[],o=[];wU(e),bU(i,e);let s=e.length;t.forEach(wU);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,bU(i,t[l]);let a=uI.triangulate(i,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}};function wU(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function bU(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var fg=class n extends ki{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,h=e/a,p=t/l,g=[],v=[],w=[],y=[];for(let _=0;_<f;_++){let T=_*p-s;for(let C=0;C<u;C++){let E=C*h-o;v.push(E,-T,0),w.push(0,0,1),y.push(C/a),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let T=0;T<a;T++){let C=T+u*_,E=T+u*(_+1),V=T+1+u*(_+1),F=T+1+u*_;g.push(C,E,F),g.push(E,V,F)}this.setIndex(g),this.setAttribute("position",new Bn(v,3)),this.setAttribute("normal",new Bn(w,3)),this.setAttribute("uv",new Bn(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var hg=class n extends ki{constructor(e=new vh([new We(0,.5),new We(-.5,-.5),new We(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let i=[],r=[],o=[],s=[],a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Bn(r,3)),this.setAttribute("normal",new Bn(o,3)),this.setAttribute("uv",new Bn(s,2));function u(f){let h=r.length/3,p=f.extractPoints(t),g=p.shape,v=p.holes;Oc.isClockWise(g)===!1&&(g=g.reverse());for(let y=0,_=v.length;y<_;y++){let T=v[y];Oc.isClockWise(T)===!0&&(v[y]=T.reverse())}let w=Oc.triangulateShape(g,v);for(let y=0,_=v.length;y<_;y++){let T=v[y];g=g.concat(T)}for(let y=0,_=g.length;y<_;y++){let T=g[y];r.push(T.x,T.y,0),o.push(0,0,1),s.push(T.x,T.y)}for(let y=0,_=w.length;y<_;y++){let T=w[y],C=T[0]+h,E=T[1]+h,V=T[2]+h;i.push(C,E,V),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return gie(t,e)}static fromJSON(e,t){let i=[];for(let r=0,o=e.shapes.length;r<o;r++){let s=t[e.shapes[r]];i.push(s)}return new n(i,e.curveSegments)}};function gie(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){let r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}var ed=class extends Ki{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ft(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ag,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},vo=class extends ed{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new We(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return tn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ft(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ft(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ft(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},Ga=class extends Ki{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ft(16777215),this.specular=new ft(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ag,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lr,this.combine=bg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var pg=class extends Ki{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ag,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lr,this.combine=bg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},kx=class extends Ki{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=aB,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Ux=class extends Ki{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function _x(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function vie(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function yie(n){function e(r,o){return n[r]-n[o]}let t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function CU(n,e,t){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=t[o]*e;for(let l=0;l!==e;++l)r[s++]=n[a+l]}return r}function TB(n,e,t,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(e.push(o.time),t.push(...s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(e.push(o.time),t.push(s)),o=n[r++];while(o!==void 0)}var Bl=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=o)){let a=t[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Bx=class extends Bl{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:iI,endingEnd:iI}}intervalChanged_(e,t,i){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case rI:o=e,a=2*t-i;break;case oI:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case rI:s=e,l=2*i-t;break;case oI:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}let u=(i-t)*.5,f=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),w=v*v,y=w*v,_=-p*y+2*p*w-p*v,T=(1+p)*y+(-1.5-2*p)*w+(-.5+p)*v+1,C=(-1-g)*y+(1.5+g)*w+.5*v,E=g*y-g*w;for(let V=0;V!==a;++V)o[V]=_*s[f+V]+T*s[u+V]+C*s[l+V]+E*s[h+V];return o}},Vx=class extends Bl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=(i-t)/(r-t),h=1-f;for(let p=0;p!==a;++p)o[p]=s[u+p]*h+s[l+p]*f;return o}},Hx=class extends Bl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},yo=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_x(t,this.TimeBufferType),this.values=_x(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:_x(e.times,Array),values:_x(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Hx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Vx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Bx(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case qu:t=this.InterpolantFactoryMethodDiscrete;break;case Xu:t=this.InterpolantFactoryMethodLinear;break;case xx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qu;case this.InterpolantFactoryMethodLinear:return Xu;case this.InterpolantFactoryMethodSmooth:return xx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(r!==void 0&&vie(r))for(let a=0,l=r.length;a!==l;++a){let u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===xx,o=e.length-1,s=1;for(let a=1;a<o;++a){let l=!1,u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)l=!0;else{let h=a*i,p=h-i,g=h+i;for(let v=0;v!==i;++v){let w=t[h+v];if(w!==t[p+v]||w!==t[g+v]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];let h=a*i,p=s*i;for(let g=0;g!==i;++g)t[p+g]=t[h+g]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,u=0;u!==i;++u)t[l+u]=t[a+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};yo.prototype.ValueTypeName="";yo.prototype.TimeBufferType=Float32Array;yo.prototype.ValueBufferType=Float32Array;yo.prototype.DefaultInterpolation=Xu;var Vl=class extends yo{constructor(e,t,i){super(e,t,i)}};Vl.prototype.ValueTypeName="bool";Vl.prototype.ValueBufferType=Array;Vl.prototype.DefaultInterpolation=qu;Vl.prototype.InterpolantFactoryMethodLinear=void 0;Vl.prototype.InterpolantFactoryMethodSmooth=void 0;var mg=class extends yo{constructor(e,t,i,r){super(e,t,i,r)}};mg.prototype.ValueTypeName="color";var bs=class extends yo{constructor(e,t,i,r){super(e,t,i,r)}};bs.prototype.ValueTypeName="number";var zx=class extends Bl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t),u=e*a;for(let f=u+a;u!==f;u+=4)pi.slerpFlat(o,0,s,u-a,s,u,l);return o}},zo=class extends yo{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new zx(this.times,this.values,this.getValueSize(),e)}};zo.prototype.ValueTypeName="quaternion";zo.prototype.InterpolantFactoryMethodSmooth=void 0;var Hl=class extends yo{constructor(e,t,i){super(e,t,i)}};Hl.prototype.ValueTypeName="string";Hl.prototype.ValueBufferType=Array;Hl.prototype.DefaultInterpolation=qu;Hl.prototype.InterpolantFactoryMethodLinear=void 0;Hl.prototype.InterpolantFactoryMethodSmooth=void 0;var Cs=class extends yo{constructor(e,t,i,r){super(e,t,i,r)}};Cs.prototype.ValueTypeName="vector";var td=class{constructor(e="",t=-1,i=[],r=sB){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=xs(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(xie(i[s]).scale(r));let o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)t.push(yo.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let o=t.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);let f=yie(l);l=CU(l,1,f),u=CU(u,1,f),!r&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new bs(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){let u=e[a],f=u.name.match(o);if(f&&f.length>1){let h=f[1],p=r[h];p||(r[h]=p=[]),p.push(u)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(h,p,g,v,w){if(g.length!==0){let y=[],_=[];TB(g,y,_,v),y.length!==0&&w.push(new h(p,y,_))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,l=e.length||-1,u=e.hierarchy||[];for(let h=0;h<u.length;h++){let p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){let g={},v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let w=0;w<p[v].morphTargets.length;w++)g[p[v].morphTargets[w]]=-1;for(let w in g){let y=[],_=[];for(let T=0;T!==p[v].morphTargets.length;++T){let C=p[v];y.push(C.time),_.push(C.morphTarget===w?1:0)}r.push(new bs(".morphTargetInfluence["+w+"]",y,_))}l=g.length*s}else{let g=".bones["+t[h].name+"]";i(Cs,g+".position",p,"pos",r),i(zo,g+".quaternion",p,"rot",r),i(Cs,g+".scale",p,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function _ie(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bs;case"vector":case"vector2":case"vector3":case"vector4":return Cs;case"color":return mg;case"quaternion":return zo;case"bool":case"boolean":return Vl;case"string":return Hl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function xie(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=_ie(n.type);if(n.times===void 0){let t=[],i=[];TB(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var Nl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},jx=class{constructor(e,t,i){let r=this,o=!1,s=0,a=0,l,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,o===!1&&r.onStart!==void 0&&r.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,r.onProgress!==void 0&&r.onProgress(f,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){let h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,p=u.length;h<p;h+=2){let g=u[h],v=u[h+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null}}},IB=new jx,Go=(()=>{class n{constructor(t){this.manager=t!==void 0?t:IB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Ol={},dI=class extends Error{constructor(e,t){super(e),this.response=t}},Wa=class extends Go{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=Nl.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Ol[e]!==void 0){Ol[e].push({onLoad:t,onProgress:i,onError:r});return}Ol[e]=[],Ol[e].push({onLoad:t,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let f=Ol[e],h=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),g=p?parseInt(p):0,v=g!==0,w=0,y=new ReadableStream({start(_){T();function T(){h.read().then(({done:C,value:E})=>{if(C)_.close();else{w+=E.byteLength;let V=new ProgressEvent("progress",{lengthComputable:v,loaded:w,total:g});for(let F=0,L=f.length;F<L;F++){let W=f[F];W.onProgress&&W.onProgress(V)}_.enqueue(E),T()}},C=>{_.error(C)})}}});return new Response(y)}else throw new dI(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a==="")return u.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,g=new TextDecoder(p);return u.arrayBuffer().then(v=>g.decode(v))}}}).then(u=>{Nl.add(e,u);let f=Ol[e];delete Ol[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onLoad&&g.onLoad(u)}}).catch(u=>{let f=Ol[e];if(f===void 0)throw this.manager.itemError(e),u;delete Ol[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var Gx=class extends Go{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Nl.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;let a=lh("img");function l(){f(),Nl.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(h){f(),r&&r(h),o.manager.itemError(e),o.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}};var nd=class extends Go{constructor(e){super(e)}load(e,t,i,r){let o=new Gr,s=new Gx(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},i,r),o}},kc=class extends mi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ft(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}},gg=class extends kc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(mi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ft(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},Q1=new lt,EU=new B,MU=new B,vg=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new We(512,512),this.mapType=pa,this.map=null,this.mapPass=null,this.matrix=new lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mh,this._frameExtents=new We(1,1),this._viewportCount=1,this._viewports=[new rn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;EU.setFromMatrixPosition(e.matrixWorld),t.position.copy(EU),MU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(MU),t.updateMatrixWorld(),Q1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Q1),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Q1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},fI=class extends vg{constructor(){super(new Ii(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=Yu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},id=class extends kc{constructor(e,t,i=0,r=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(mi.DEFAULT_UP),this.updateMatrix(),this.target=new mi,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new fI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},SU=new lt,Hm=new B,eI=new B,hI=class extends vg{constructor(){super(new Ii(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new We(4,2),this._viewportCount=6,this._viewports=[new rn(2,1,1,1),new rn(0,1,1,1),new rn(3,1,1,1),new rn(1,1,1,1),new rn(3,0,1,1),new rn(1,0,1,1)],this._cubeDirections=[new B(1,0,0),new B(-1,0,0),new B(0,0,1),new B(0,0,-1),new B(0,1,0),new B(0,-1,0)],this._cubeUps=[new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,0,1),new B(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Hm.setFromMatrixPosition(e.matrixWorld),i.position.copy(Hm),eI.copy(i.position),eI.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(eI),i.updateMatrixWorld(),r.makeTranslation(-Hm.x,-Hm.y,-Hm.z),SU.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(SU)}},Uc=class extends kc{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new hI}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},rd=class extends Km{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-e,s=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},pI=class extends vg{constructor(){super(new rd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},od=class extends kc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(mi.DEFAULT_UP),this.updateMatrix(),this.target=new mi,this.shadow=new pI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},yg=class extends kc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var fa=class{static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var _g=class extends Go{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Nl.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(u=>{t&&t(u),o.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Nl.add(e,u),t&&t(u),o.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Nl.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Nl.add(e,l),o.manager.itemStart(e)}};var Wx=class extends Ii{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var LI="\\[\\]\\.:\\/",wie=new RegExp("["+LI+"]","g"),kI="[^"+LI+"]",bie="[^"+LI.replace("\\.","")+"]",Cie=/((?:WC+[\/:])*)/.source.replace("WC",kI),Eie=/(WCOD+)?/.source.replace("WCOD",bie),Mie=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",kI),Sie=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",kI),Tie=new RegExp("^"+Cie+Eie+Mie+Sie+"$"),Iie=["material","materials","bones","map"],mI=class{constructor(e,t,i){let r=i||jn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},jn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(wie,"")}static parseTrackName(t){let i=Tie.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);Iie.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let u=r(l.children);if(u)return u}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===f){f=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}let a=t[o];if(a===void 0){let f=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+o+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=mI,n})();jn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};jn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};jn.prototype.GetterByBindingType=[jn.prototype._getValue_direct,jn.prototype._getValue_array,jn.prototype._getValue_arrayElement,jn.prototype._getValue_toArray];jn.prototype.SetterByBindingTypeAndVersioning=[[jn.prototype._setValue_direct,jn.prototype._setValue_direct_setNeedsUpdate,jn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jn.prototype._setValue_array,jn.prototype._setValue_array_setNeedsUpdate,jn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jn.prototype._setValue_arrayElement,jn.prototype._setValue_arrayElement_setNeedsUpdate,jn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jn.prototype._setValue_fromArray,jn.prototype._setValue_fromArray_setNeedsUpdate,jn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var GSe=new Float32Array(1);var TU=new lt,xg=class{constructor(e,t,i=0,r=1/0){this.ray=new ja(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new uh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return TU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(TU),this}intersectObject(e,t=!0,i=[]){return gI(e,this,i,t),i.sort(IU),i}intersectObjects(e,t=!0,i=[]){for(let r=0,o=e.length;r<o;r++)gI(e[r],this,i,t);return i.sort(IU),i}};function IU(n,e){return n.distance-e.distance}function gI(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)gI(o[s],e,t,!0)}}var _h=class{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=tn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(tn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var wg=class extends Ha{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function UI(n,e,t,i){let r=Die(i);switch(t){case MI:return n*e;case ow:return n*e/r.components*r.byteLength;case sw:return n*e/r.components*r.byteLength;case TI:return n*e*2/r.components*r.byteLength;case aw:return n*e*2/r.components*r.byteLength;case SI:return n*e*3/r.components*r.byteLength;case jo:return n*e*4/r.components*r.byteLength;case lw:return n*e*4/r.components*r.byteLength;case Eg:case Mg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Sg:case Tg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case uw:case fw:return Math.max(n,16)*Math.max(e,8)/4;case cw:case dw:return Math.max(n,8)*Math.max(e,8)/2;case hw:case pw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case mw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case gw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case vw:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case yw:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case _w:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case xw:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case ww:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case bw:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Cw:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Ew:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Mw:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Sw:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Tw:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Iw:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Dw:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Ig:case Aw:case Rw:return Math.ceil(n/4)*Math.ceil(e/4)*16;case II:case Pw:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Ow:case Nw:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Die(n){switch(n){case pa:case bI:return{byteLength:1,components:1};case bh:case CI:case Ch:return{byteLength:2,components:1};case iw:case rw:return{byteLength:2,components:4};case Hc:case nw:case Ms:return{byteLength:4,components:1};case EI:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$x}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=$x);function JB(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function Aie(n){let e=new WeakMap;function t(a,l){let u=a.array,f=a.usage,h=u.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,u,f),a.onUploadCallback();let g;if(u instanceof Float32Array)g=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=n.SHORT;else if(u instanceof Uint32Array)g=n.UNSIGNED_INT;else if(u instanceof Int32Array)g=n.INT;else if(u instanceof Int8Array)g=n.BYTE;else if(u instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,u){let f=l.array,h=l.updateRanges;if(n.bindBuffer(u,a),h.length===0)n.bufferSubData(u,0,f);else{h.sort((g,v)=>g.start-v.start);let p=0;for(let g=1;g<h.length;g++){let v=h[p],w=h[g];w.start<=v.start+v.count+1?v.count=Math.max(v.count,w.start+w.count-v.start):(++p,h[p]=w)}h.length=p+1;for(let g=0,v=h.length;g<v;g++){let w=h[g];n.bufferSubData(u,w.start*f.BYTES_PER_ELEMENT,f,w.start,w.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:o,update:s}}var Rie=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Pie=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Oie=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Nie=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Fie=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Lie=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,kie=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Uie=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Bie=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Vie=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Hie=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,zie=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jie=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Gie=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Wie=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$ie=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,qie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Xie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Yie=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Zie=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Kie=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Jie=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Qie=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,ere=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,tre=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nre=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ire=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rre=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,ore=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,sre=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,are="gl_FragColor = linearToOutputTexel( gl_FragColor );",lre=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,cre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ure=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dre=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,fre=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,hre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,pre=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,mre=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,gre=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,vre=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,yre=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_re=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,xre=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wre=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,bre=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Cre=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ere=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Mre=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Sre=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Tre=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ire=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Dre=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Are=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Rre=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Pre=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Ore=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Nre=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Fre=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Lre=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,kre=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Ure=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Bre=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Vre=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Hre=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,zre=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jre=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Gre=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Wre=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,$re=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,qre=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Xre=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Yre=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Zre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Kre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Jre=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Qre=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,eoe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,toe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,noe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ioe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,roe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ooe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,soe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,aoe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,loe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,coe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,uoe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,doe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,foe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,hoe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,poe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,moe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,goe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,voe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,yoe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_oe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,xoe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,woe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,boe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Coe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Eoe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Moe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Soe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Toe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ioe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Doe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Aoe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Roe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Poe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ooe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Noe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Foe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Loe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,koe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Uoe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Boe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Voe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Hoe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zoe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,joe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Goe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Woe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$oe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qoe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xoe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Yoe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zoe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Koe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Joe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qoe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ese=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,tse=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nse=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ise=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rse=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ose=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,sse=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ase=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,lse=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cse=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,on={alphahash_fragment:Rie,alphahash_pars_fragment:Pie,alphamap_fragment:Oie,alphamap_pars_fragment:Nie,alphatest_fragment:Fie,alphatest_pars_fragment:Lie,aomap_fragment:kie,aomap_pars_fragment:Uie,batching_pars_vertex:Bie,batching_vertex:Vie,begin_vertex:Hie,beginnormal_vertex:zie,bsdfs:jie,iridescence_fragment:Gie,bumpmap_pars_fragment:Wie,clipping_planes_fragment:$ie,clipping_planes_pars_fragment:qie,clipping_planes_pars_vertex:Xie,clipping_planes_vertex:Yie,color_fragment:Zie,color_pars_fragment:Kie,color_pars_vertex:Jie,color_vertex:Qie,common:ere,cube_uv_reflection_fragment:tre,defaultnormal_vertex:nre,displacementmap_pars_vertex:ire,displacementmap_vertex:rre,emissivemap_fragment:ore,emissivemap_pars_fragment:sre,colorspace_fragment:are,colorspace_pars_fragment:lre,envmap_fragment:cre,envmap_common_pars_fragment:ure,envmap_pars_fragment:dre,envmap_pars_vertex:fre,envmap_physical_pars_fragment:Cre,envmap_vertex:hre,fog_vertex:pre,fog_pars_vertex:mre,fog_fragment:gre,fog_pars_fragment:vre,gradientmap_pars_fragment:yre,lightmap_pars_fragment:_re,lights_lambert_fragment:xre,lights_lambert_pars_fragment:wre,lights_pars_begin:bre,lights_toon_fragment:Ere,lights_toon_pars_fragment:Mre,lights_phong_fragment:Sre,lights_phong_pars_fragment:Tre,lights_physical_fragment:Ire,lights_physical_pars_fragment:Dre,lights_fragment_begin:Are,lights_fragment_maps:Rre,lights_fragment_end:Pre,logdepthbuf_fragment:Ore,logdepthbuf_pars_fragment:Nre,logdepthbuf_pars_vertex:Fre,logdepthbuf_vertex:Lre,map_fragment:kre,map_pars_fragment:Ure,map_particle_fragment:Bre,map_particle_pars_fragment:Vre,metalnessmap_fragment:Hre,metalnessmap_pars_fragment:zre,morphinstance_vertex:jre,morphcolor_vertex:Gre,morphnormal_vertex:Wre,morphtarget_pars_vertex:$re,morphtarget_vertex:qre,normal_fragment_begin:Xre,normal_fragment_maps:Yre,normal_pars_fragment:Zre,normal_pars_vertex:Kre,normal_vertex:Jre,normalmap_pars_fragment:Qre,clearcoat_normal_fragment_begin:eoe,clearcoat_normal_fragment_maps:toe,clearcoat_pars_fragment:noe,iridescence_pars_fragment:ioe,opaque_fragment:roe,packing:ooe,premultiplied_alpha_fragment:soe,project_vertex:aoe,dithering_fragment:loe,dithering_pars_fragment:coe,roughnessmap_fragment:uoe,roughnessmap_pars_fragment:doe,shadowmap_pars_fragment:foe,shadowmap_pars_vertex:hoe,shadowmap_vertex:poe,shadowmask_pars_fragment:moe,skinbase_vertex:goe,skinning_pars_vertex:voe,skinning_vertex:yoe,skinnormal_vertex:_oe,specularmap_fragment:xoe,specularmap_pars_fragment:woe,tonemapping_fragment:boe,tonemapping_pars_fragment:Coe,transmission_fragment:Eoe,transmission_pars_fragment:Moe,uv_pars_fragment:Soe,uv_pars_vertex:Toe,uv_vertex:Ioe,worldpos_vertex:Doe,background_vert:Aoe,background_frag:Roe,backgroundCube_vert:Poe,backgroundCube_frag:Ooe,cube_vert:Noe,cube_frag:Foe,depth_vert:Loe,depth_frag:koe,distanceRGBA_vert:Uoe,distanceRGBA_frag:Boe,equirect_vert:Voe,equirect_frag:Hoe,linedashed_vert:zoe,linedashed_frag:joe,meshbasic_vert:Goe,meshbasic_frag:Woe,meshlambert_vert:$oe,meshlambert_frag:qoe,meshmatcap_vert:Xoe,meshmatcap_frag:Yoe,meshnormal_vert:Zoe,meshnormal_frag:Koe,meshphong_vert:Joe,meshphong_frag:Qoe,meshphysical_vert:ese,meshphysical_frag:tse,meshtoon_vert:nse,meshtoon_frag:ise,points_vert:rse,points_frag:ose,shadow_vert:sse,shadow_frag:ase,sprite_vert:lse,sprite_frag:cse},Qe={common:{diffuse:{value:new ft(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Gt},alphaMap:{value:null},alphaMapTransform:{value:new Gt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Gt}},envmap:{envMap:{value:null},envMapRotation:{value:new Gt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Gt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Gt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Gt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Gt},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Gt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Gt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Gt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Gt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ft(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ft(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Gt},alphaTest:{value:0},uvTransform:{value:new Gt}},sprite:{diffuse:{value:new ft(16777215)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Gt},alphaMap:{value:null},alphaMapTransform:{value:new Gt},alphaTest:{value:0}}},qa={basic:{uniforms:Rr([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.fog]),vertexShader:on.meshbasic_vert,fragmentShader:on.meshbasic_frag},lambert:{uniforms:Rr([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,Qe.lights,{emissive:{value:new ft(0)}}]),vertexShader:on.meshlambert_vert,fragmentShader:on.meshlambert_frag},phong:{uniforms:Rr([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,Qe.lights,{emissive:{value:new ft(0)},specular:{value:new ft(1118481)},shininess:{value:30}}]),vertexShader:on.meshphong_vert,fragmentShader:on.meshphong_frag},standard:{uniforms:Rr([Qe.common,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.roughnessmap,Qe.metalnessmap,Qe.fog,Qe.lights,{emissive:{value:new ft(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag},toon:{uniforms:Rr([Qe.common,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.gradientmap,Qe.fog,Qe.lights,{emissive:{value:new ft(0)}}]),vertexShader:on.meshtoon_vert,fragmentShader:on.meshtoon_frag},matcap:{uniforms:Rr([Qe.common,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,{matcap:{value:null}}]),vertexShader:on.meshmatcap_vert,fragmentShader:on.meshmatcap_frag},points:{uniforms:Rr([Qe.points,Qe.fog]),vertexShader:on.points_vert,fragmentShader:on.points_frag},dashed:{uniforms:Rr([Qe.common,Qe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:on.linedashed_vert,fragmentShader:on.linedashed_frag},depth:{uniforms:Rr([Qe.common,Qe.displacementmap]),vertexShader:on.depth_vert,fragmentShader:on.depth_frag},normal:{uniforms:Rr([Qe.common,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,{opacity:{value:1}}]),vertexShader:on.meshnormal_vert,fragmentShader:on.meshnormal_frag},sprite:{uniforms:Rr([Qe.sprite,Qe.fog]),vertexShader:on.sprite_vert,fragmentShader:on.sprite_frag},background:{uniforms:{uvTransform:{value:new Gt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:on.background_vert,fragmentShader:on.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Gt}},vertexShader:on.backgroundCube_vert,fragmentShader:on.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:on.cube_vert,fragmentShader:on.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:on.equirect_vert,fragmentShader:on.equirect_frag},distanceRGBA:{uniforms:Rr([Qe.common,Qe.displacementmap,{referencePosition:{value:new B},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:on.distanceRGBA_vert,fragmentShader:on.distanceRGBA_frag},shadow:{uniforms:Rr([Qe.lights,Qe.fog,{color:{value:new ft(0)},opacity:{value:1}}]),vertexShader:on.shadow_vert,fragmentShader:on.shadow_frag}};qa.physical={uniforms:Rr([qa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Gt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Gt},clearcoatNormalScale:{value:new We(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Gt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Gt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Gt},sheen:{value:0},sheenColor:{value:new ft(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Gt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Gt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Gt},transmissionSamplerSize:{value:new We},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Gt},attenuationDistance:{value:0},attenuationColor:{value:new ft(0)},specularColor:{value:new ft(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Gt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Gt},anisotropyVector:{value:new We},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Gt}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag};var Fw={r:0,b:0,g:0},ud=new lr,use=new lt;function dse(n,e,t,i,r,o,s){let a=new ft(0),l=o===!0?0:1,u,f,h=null,p=0,g=null;function v(C){let E=C.isScene===!0?C.background:null;return E&&E.isTexture&&(E=(C.backgroundBlurriness>0?t:e).get(E)),E}function w(C){let E=!1,V=v(C);V===null?_(a,l):V&&V.isColor&&(_(V,1),E=!0);let F=n.xr.getEnvironmentBlendMode();F==="additive"?i.buffers.color.setClear(0,0,0,1,s):F==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||E)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(C,E){let V=v(E);V&&(V.isCubeTexture||V.mapping===Cg)?(f===void 0&&(f=new gi(new dh(1,1,1),new ua({name:"BackgroundCubeMaterial",uniforms:cd(qa.backgroundCube.uniforms),vertexShader:qa.backgroundCube.vertexShader,fragmentShader:qa.backgroundCube.fragmentShader,side:jr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(F,L,W){this.matrixWorld.copyPosition(W.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),ud.copy(E.backgroundRotation),ud.x*=-1,ud.y*=-1,ud.z*=-1,V.isCubeTexture&&V.isRenderTargetTexture===!1&&(ud.y*=-1,ud.z*=-1),f.material.uniforms.envMap.value=V,f.material.uniforms.flipEnvMap.value=V.isCubeTexture&&V.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(use.makeRotationFromEuler(ud)),f.material.toneMapped=Bt.getTransfer(V.colorSpace)!==Gn,(h!==V||p!==V.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,h=V,p=V.version,g=n.toneMapping),f.layers.enableAll(),C.unshift(f,f.geometry,f.material,0,0,null)):V&&V.isTexture&&(u===void 0&&(u=new gi(new fg(2,2),new ua({name:"BackgroundMaterial",uniforms:cd(qa.background.uniforms),vertexShader:qa.background.vertexShader,fragmentShader:qa.background.fragmentShader,side:la,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=V,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.toneMapped=Bt.getTransfer(V.colorSpace)!==Gn,V.matrixAutoUpdate===!0&&V.updateMatrix(),u.material.uniforms.uvTransform.value.copy(V.matrix),(h!==V||p!==V.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,h=V,p=V.version,g=n.toneMapping),u.layers.enableAll(),C.unshift(u,u.geometry,u.material,0,0,null))}function _(C,E){C.getRGB(Fw,NI(n)),i.buffers.color.setClear(Fw.r,Fw.g,Fw.b,E,s)}function T(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(C,E=1){a.set(C),l=E,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(C){l=C,_(a,l)},render:w,addToRenderList:y,dispose:T}}function fse(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null),o=r,s=!1;function a(R,j,pe,ae,Ie){let be=!1,X=h(ae,pe,j);o!==X&&(o=X,u(o.object)),be=g(R,ae,pe,Ie),be&&v(R,ae,pe,Ie),Ie!==null&&e.update(Ie,n.ELEMENT_ARRAY_BUFFER),(be||s)&&(s=!1,E(R,j,pe,ae),Ie!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Ie).buffer))}function l(){return n.createVertexArray()}function u(R){return n.bindVertexArray(R)}function f(R){return n.deleteVertexArray(R)}function h(R,j,pe){let ae=pe.wireframe===!0,Ie=i[R.id];Ie===void 0&&(Ie={},i[R.id]=Ie);let be=Ie[j.id];be===void 0&&(be={},Ie[j.id]=be);let X=be[ae];return X===void 0&&(X=p(l()),be[ae]=X),X}function p(R){let j=[],pe=[],ae=[];for(let Ie=0;Ie<t;Ie++)j[Ie]=0,pe[Ie]=0,ae[Ie]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:pe,attributeDivisors:ae,object:R,attributes:{},index:null}}function g(R,j,pe,ae){let Ie=o.attributes,be=j.attributes,X=0,ie=pe.getAttributes();for(let q in ie)if(ie[q].location>=0){let Ve=Ie[q],tt=be[q];if(tt===void 0&&(q==="instanceMatrix"&&R.instanceMatrix&&(tt=R.instanceMatrix),q==="instanceColor"&&R.instanceColor&&(tt=R.instanceColor)),Ve===void 0||Ve.attribute!==tt||tt&&Ve.data!==tt.data)return!0;X++}return o.attributesNum!==X||o.index!==ae}function v(R,j,pe,ae){let Ie={},be=j.attributes,X=0,ie=pe.getAttributes();for(let q in ie)if(ie[q].location>=0){let Ve=be[q];Ve===void 0&&(q==="instanceMatrix"&&R.instanceMatrix&&(Ve=R.instanceMatrix),q==="instanceColor"&&R.instanceColor&&(Ve=R.instanceColor));let tt={};tt.attribute=Ve,Ve&&Ve.data&&(tt.data=Ve.data),Ie[q]=tt,X++}o.attributes=Ie,o.attributesNum=X,o.index=ae}function w(){let R=o.newAttributes;for(let j=0,pe=R.length;j<pe;j++)R[j]=0}function y(R){_(R,0)}function _(R,j){let pe=o.newAttributes,ae=o.enabledAttributes,Ie=o.attributeDivisors;pe[R]=1,ae[R]===0&&(n.enableVertexAttribArray(R),ae[R]=1),Ie[R]!==j&&(n.vertexAttribDivisor(R,j),Ie[R]=j)}function T(){let R=o.newAttributes,j=o.enabledAttributes;for(let pe=0,ae=j.length;pe<ae;pe++)j[pe]!==R[pe]&&(n.disableVertexAttribArray(pe),j[pe]=0)}function C(R,j,pe,ae,Ie,be,X){X===!0?n.vertexAttribIPointer(R,j,pe,Ie,be):n.vertexAttribPointer(R,j,pe,ae,Ie,be)}function E(R,j,pe,ae){w();let Ie=ae.attributes,be=pe.getAttributes(),X=j.defaultAttributeValues;for(let ie in be){let q=be[ie];if(q.location>=0){let ve=Ie[ie];if(ve===void 0&&(ie==="instanceMatrix"&&R.instanceMatrix&&(ve=R.instanceMatrix),ie==="instanceColor"&&R.instanceColor&&(ve=R.instanceColor)),ve!==void 0){let Ve=ve.normalized,tt=ve.itemSize,ge=e.get(ve);if(ge===void 0)continue;let re=ge.buffer,U=ge.type,J=ge.bytesPerElement,_e=U===n.INT||U===n.UNSIGNED_INT||ve.gpuType===nw;if(ve.isInterleavedBufferAttribute){let se=ve.data,He=se.stride,je=ve.offset;if(se.isInstancedInterleavedBuffer){for(let Le=0;Le<q.locationSize;Le++)_(q.location+Le,se.meshPerAttribute);R.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Le=0;Le<q.locationSize;Le++)y(q.location+Le);n.bindBuffer(n.ARRAY_BUFFER,re);for(let Le=0;Le<q.locationSize;Le++)C(q.location+Le,tt/q.locationSize,U,Ve,He*J,(je+tt/q.locationSize*Le)*J,_e)}else{if(ve.isInstancedBufferAttribute){for(let se=0;se<q.locationSize;se++)_(q.location+se,ve.meshPerAttribute);R.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let se=0;se<q.locationSize;se++)y(q.location+se);n.bindBuffer(n.ARRAY_BUFFER,re);for(let se=0;se<q.locationSize;se++)C(q.location+se,tt/q.locationSize,U,Ve,tt*J,tt/q.locationSize*se*J,_e)}}else if(X!==void 0){let Ve=X[ie];if(Ve!==void 0)switch(Ve.length){case 2:n.vertexAttrib2fv(q.location,Ve);break;case 3:n.vertexAttrib3fv(q.location,Ve);break;case 4:n.vertexAttrib4fv(q.location,Ve);break;default:n.vertexAttrib1fv(q.location,Ve)}}}}T()}function V(){W();for(let R in i){let j=i[R];for(let pe in j){let ae=j[pe];for(let Ie in ae)f(ae[Ie].object),delete ae[Ie];delete j[pe]}delete i[R]}}function F(R){if(i[R.id]===void 0)return;let j=i[R.id];for(let pe in j){let ae=j[pe];for(let Ie in ae)f(ae[Ie].object),delete ae[Ie];delete j[pe]}delete i[R.id]}function L(R){for(let j in i){let pe=i[j];if(pe[R.id]===void 0)continue;let ae=pe[R.id];for(let Ie in ae)f(ae[Ie].object),delete ae[Ie];delete pe[R.id]}}function W(){O(),s=!0,o!==r&&(o=r,u(o.object))}function O(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:W,resetDefaultState:O,dispose:V,releaseStatesOfGeometry:F,releaseStatesOfProgram:L,initAttributes:w,enableAttribute:y,disableUnusedAttributes:T}}function hse(n,e,t){let i;function r(u){i=u}function o(u,f){n.drawArrays(i,u,f),t.update(f,i,1)}function s(u,f,h){h!==0&&(n.drawArraysInstanced(i,u,f,h),t.update(f,i,h))}function a(u,f,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,f,0,h);let g=0;for(let v=0;v<h;v++)g+=f[v];t.update(g,i,1)}function l(u,f,h,p){if(h===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<u.length;v++)s(u[v],f[v],p[v]);else{g.multiDrawArraysInstancedWEBGL(i,u,0,f,0,p,0,h);let v=0;for(let w=0;w<h;w++)v+=f[w]*p[w];t.update(v,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function pse(n,e,t,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(L){return!(L!==jo&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(L){let W=L===Ch&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==pa&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==Ms&&!W)}function l(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp",f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);let h=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),C=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),V=v>0,F=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:p,maxTextures:g,maxVertexTextures:v,maxTextureSize:w,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:T,maxVaryings:C,maxFragmentUniforms:E,vertexTextures:V,maxSamples:F}}function mse(n){let e=this,t=null,i=0,r=!1,o=!1,s=new _s,a=new Gt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){let g=h.length!==0||p||i!==0||r;return r=p,i=h.length,g},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,p){t=f(h,p,0)},this.setState=function(h,p,g){let v=h.clippingPlanes,w=h.clipIntersection,y=h.clipShadows,_=n.get(h);if(!r||v===null||v.length===0||o&&!y)o?f(null):u();else{let T=o?0:i,C=T*4,E=_.clippingState||null;l.value=E,E=f(v,p,C,g);for(let V=0;V!==C;++V)E[V]=t[V];_.clippingState=E,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=T}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(h,p,g,v){let w=h!==null?h.length:0,y=null;if(w!==0){if(y=l.value,v!==!0||y===null){let _=g+w*4,T=p.matrixWorldInverse;a.getNormalMatrix(T),(y===null||y.length<_)&&(y=new Float32Array(_));for(let C=0,E=g;C!==w;++C,E+=4)s.copy(h[C]).applyMatrix4(T,a),s.normal.toArray(y,E),y[E+3]=s.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,y}}function gse(n){let e=new WeakMap;function t(s,a){return a===xh?s.mapping=sd:a===ew&&(s.mapping=ad),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===xh||a===ew)if(e.has(s)){let l=e.get(s).texture;return t(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new Ix(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",r),t(u.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}var Ih=4,DB=[.125,.215,.35,.446,.526,.582],hd=20,BI=new rd,AB=new ft,VI=null,HI=0,zI=0,jI=!1,fd=(1+Math.sqrt(5))/2,Th=1/fd,RB=[new B(-fd,Th,0),new B(fd,Th,0),new B(-Th,0,fd),new B(Th,0,fd),new B(0,fd,-Th),new B(0,fd,Th),new B(-1,1,-1),new B(1,1,-1),new B(-1,1,1),new B(1,1,1)],vse=new B,Uw=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,o={}){let{size:s=256,position:a=vse}=o;VI=this._renderer.getRenderTarget(),HI=this._renderer.getActiveCubeFace(),zI=this._renderer.getActiveMipmapLevel(),jI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=NB(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=OB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(VI,HI,zI),this._renderer.xr.enabled=jI,e.scissorTest=!1,Lw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===sd||e.mapping===ad?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),VI=this._renderer.getRenderTarget(),HI=this._renderer.getActiveCubeFace(),zI=this._renderer.getActiveMipmapLevel(),jI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Vr,minFilter:Vr,generateMipmaps:!1,type:Ch,format:jo,colorSpace:yr,depthBuffer:!1},r=PB(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=PB(e,t,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=yse(o)),this._blurMaterial=_se(o,e,t)}return r}_compileMaterial(e){let t=new gi(this._lodPlanes[0],e);this._renderer.compile(t,BI)}_sceneToCubeUV(e,t,i,r,o){let l=new Ii(90,1,t,i),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,g=h.toneMapping;h.getClearColor(AB),h.toneMapping=jl,h.autoClear=!1;let v=new Ho({name:"PMREM.Background",side:jr,depthWrite:!1,depthTest:!1}),w=new gi(new dh,v),y=!1,_=e.background;_?_.isColor&&(v.color.copy(_),e.background=null,y=!0):(v.color.copy(AB),y=!0);for(let T=0;T<6;T++){let C=T%3;C===0?(l.up.set(0,u[T],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+f[T],o.y,o.z)):C===1?(l.up.set(0,0,u[T]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+f[T],o.z)):(l.up.set(0,u[T],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+f[T]));let E=this._cubeSize;Lw(r,C*E,T>2?E:0,E,E),h.setRenderTarget(r),y&&h.render(w,l),h.render(e,l)}w.geometry.dispose(),w.material.dispose(),h.toneMapping=g,h.autoClear=p,e.background=_}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===sd||e.mapping===ad;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=NB()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=OB());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new gi(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let l=this._cubeSize;Lw(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,BI)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=RB[(r-o-1)%RB.length];this._blur(e,o-1,o,s,a)}t.autoClear=i}_blur(e,t,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){let l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,h=new gi(this._lodPlanes[r],u),p=u.uniforms,g=this._sizeLods[i]-1,v=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*hd-1),w=o/v,y=isFinite(o)?1+Math.floor(f*w):hd;y>hd&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${hd}`);let _=[],T=0;for(let L=0;L<hd;++L){let W=L/w,O=Math.exp(-W*W/2);_.push(O),L===0?T+=O:L<y&&(T+=2*O)}for(let L=0;L<_.length;L++)_[L]=_[L]/T;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=_,p.latitudinal.value=s==="latitudinal",a&&(p.poleAxis.value=a);let{_lodMax:C}=this;p.dTheta.value=v,p.mipInt.value=C-i;let E=this._sizeLods[r],V=3*E*(r>C-Ih?r-C+Ih:0),F=4*(this._cubeSize-E);Lw(t,V,F,3*E,2*E),l.setRenderTarget(t),l.render(h,BI)}};function yse(n){let e=[],t=[],i=[],r=n,o=n-Ih+1+DB.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);t.push(a);let l=1/a;s>n-Ih?l=DB[s-n+Ih-1]:s===0&&(l=0),i.push(l);let u=1/(a-2),f=-u,h=1+u,p=[f,f,h,f,h,h,f,f,h,h,f,h],g=6,v=6,w=3,y=2,_=1,T=new Float32Array(w*v*g),C=new Float32Array(y*v*g),E=new Float32Array(_*v*g);for(let F=0;F<g;F++){let L=F%3*2/3-1,W=F>2?0:-1,O=[L,W,0,L+2/3,W,0,L+2/3,W+1,0,L,W,0,L+2/3,W+1,0,L,W+1,0];T.set(O,w*v*F),C.set(p,y*v*F);let R=[F,F,F,F,F,F];E.set(R,_*v*F)}let V=new ki;V.setAttribute("position",new Hi(T,w)),V.setAttribute("uv",new Hi(C,y)),V.setAttribute("faceIndex",new Hi(E,_)),e.push(V),r>Ih&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function PB(n,e,t){let i=new za(n,e,t);return i.texture.mapping=Cg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Lw(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function _se(n,e,t){let i=new Float32Array(hd),r=new B(0,1,0);return new ua({name:"SphericalGaussianBlur",defines:{n:hd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:QI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:zl,depthTest:!1,depthWrite:!1})}function OB(){return new ua({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:QI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:zl,depthTest:!1,depthWrite:!1})}function NB(){return new ua({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:QI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:zl,depthTest:!1,depthWrite:!1})}function QI(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function xse(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let l=a.mapping,u=l===xh||l===ew,f=l===sd||l===ad;if(u||f){let h=e.get(a),p=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new Uw(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{let g=a.image;return u&&g&&g.height>0||f&&g&&r(g)?(t===null&&(t=new Uw(n)),h=u?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let l=0,u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function o(a){let l=a.target;l.removeEventListener("dispose",o);let u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function wse(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&Rg("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function bse(n,e,t,i){let r={},o=new WeakMap;function s(h){let p=h.target;p.index!==null&&e.remove(p.index);for(let v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",s),delete r[p.id];let g=o.get(p);g&&(e.remove(g),o.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",s),r[p.id]=!0,t.memory.geometries++),p}function l(h){let p=h.attributes;for(let g in p)e.update(p[g],n.ARRAY_BUFFER)}function u(h){let p=[],g=h.index,v=h.attributes.position,w=0;if(g!==null){let T=g.array;w=g.version;for(let C=0,E=T.length;C<E;C+=3){let V=T[C+0],F=T[C+1],L=T[C+2];p.push(V,F,F,L,L,V)}}else if(v!==void 0){let T=v.array;w=v.version;for(let C=0,E=T.length/3-1;C<E;C+=3){let V=C+0,F=C+1,L=C+2;p.push(V,F,F,L,L,V)}}else return;let y=new(OI(p)?Zm:Zu)(p,1);y.version=w;let _=o.get(h);_&&e.remove(_),o.set(h,y)}function f(h){let p=o.get(h);if(p){let g=h.index;g!==null&&p.version<g.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:f}}function Cse(n,e,t){let i;function r(p){i=p}let o,s;function a(p){o=p.type,s=p.bytesPerElement}function l(p,g){n.drawElements(i,g,o,p*s),t.update(g,i,1)}function u(p,g,v){v!==0&&(n.drawElementsInstanced(i,g,o,p*s,v),t.update(g,i,v))}function f(p,g,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,o,p,0,v);let y=0;for(let _=0;_<v;_++)y+=g[_];t.update(y,i,1)}function h(p,g,v,w){if(v===0)return;let y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<p.length;_++)u(p[_]/s,g[_],w[_]);else{y.multiDrawElementsInstancedWEBGL(i,g,0,o,p,0,w,0,v);let _=0;for(let T=0;T<v;T++)_+=g[T]*w[T];t.update(_,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function Ese(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Mse(n,e,t){let i=new WeakMap,r=new rn;function o(s,a,l){let u=s.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0,p=i.get(a);if(p===void 0||p.count!==h){let R=function(){W.dispose(),i.delete(a),a.removeEventListener("dispose",R)};var g=R;p!==void 0&&p.texture.dispose();let v=a.morphAttributes.position!==void 0,w=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],T=a.morphAttributes.normal||[],C=a.morphAttributes.color||[],E=0;v===!0&&(E=1),w===!0&&(E=2),y===!0&&(E=3);let V=a.attributes.position.count*E,F=1;V>e.maxTextureSize&&(F=Math.ceil(V/e.maxTextureSize),V=e.maxTextureSize);let L=new Float32Array(V*F*4*h),W=new Ym(L,V,F,h);W.type=Ms,W.needsUpdate=!0;let O=E*4;for(let j=0;j<h;j++){let pe=_[j],ae=T[j],Ie=C[j],be=V*F*4*j;for(let X=0;X<pe.count;X++){let ie=X*O;v===!0&&(r.fromBufferAttribute(pe,X),L[be+ie+0]=r.x,L[be+ie+1]=r.y,L[be+ie+2]=r.z,L[be+ie+3]=0),w===!0&&(r.fromBufferAttribute(ae,X),L[be+ie+4]=r.x,L[be+ie+5]=r.y,L[be+ie+6]=r.z,L[be+ie+7]=0),y===!0&&(r.fromBufferAttribute(Ie,X),L[be+ie+8]=r.x,L[be+ie+9]=r.y,L[be+ie+10]=r.z,L[be+ie+11]=Ie.itemSize===4?r.w:1)}}p={count:h,texture:W,size:new We(V,F)},i.set(a,p),a.addEventListener("dispose",R)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let v=0;for(let y=0;y<u.length;y++)v+=u[y];let w=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",w),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:o}}function Sse(n,e,t,i){let r=new WeakMap;function o(l){let u=i.render.frame,f=l.geometry,h=e.get(l,f);if(r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){let p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return h}function s(){r=new WeakMap}function a(l){let u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:o,dispose:s}}var QB=new Gr,FB=new ig(1,1),eV=new Ym,tV=new Sx,nV=new Jm,LB=[],kB=[],UB=new Float32Array(16),BB=new Float32Array(9),VB=new Float32Array(4);function Ah(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,o=LB[r];if(o===void 0&&(o=new Float32Array(r),LB[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function Ji(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Qi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Vw(n,e){let t=kB[e];t===void 0&&(t=new Int32Array(e),kB[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Tse(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Ise(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;n.uniform2fv(this.addr,e),Qi(t,e)}}function Dse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ji(t,e))return;n.uniform3fv(this.addr,e),Qi(t,e)}}function Ase(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;n.uniform4fv(this.addr,e),Qi(t,e)}}function Rse(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Ji(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Qi(t,e)}else{if(Ji(t,i))return;VB.set(i),n.uniformMatrix2fv(this.addr,!1,VB),Qi(t,i)}}function Pse(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Ji(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Qi(t,e)}else{if(Ji(t,i))return;BB.set(i),n.uniformMatrix3fv(this.addr,!1,BB),Qi(t,i)}}function Ose(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Ji(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Qi(t,e)}else{if(Ji(t,i))return;UB.set(i),n.uniformMatrix4fv(this.addr,!1,UB),Qi(t,i)}}function Nse(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Fse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;n.uniform2iv(this.addr,e),Qi(t,e)}}function Lse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ji(t,e))return;n.uniform3iv(this.addr,e),Qi(t,e)}}function kse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;n.uniform4iv(this.addr,e),Qi(t,e)}}function Use(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Bse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;n.uniform2uiv(this.addr,e),Qi(t,e)}}function Vse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ji(t,e))return;n.uniform3uiv(this.addr,e),Qi(t,e)}}function Hse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;n.uniform4uiv(this.addr,e),Qi(t,e)}}function zse(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(FB.compareFunction=AI,o=FB):o=QB,t.setTexture2D(e||o,r)}function jse(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||tV,r)}function Gse(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||nV,r)}function Wse(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||eV,r)}function $se(n){switch(n){case 5126:return Tse;case 35664:return Ise;case 35665:return Dse;case 35666:return Ase;case 35674:return Rse;case 35675:return Pse;case 35676:return Ose;case 5124:case 35670:return Nse;case 35667:case 35671:return Fse;case 35668:case 35672:return Lse;case 35669:case 35673:return kse;case 5125:return Use;case 36294:return Bse;case 36295:return Vse;case 36296:return Hse;case 35678:case 36198:case 36298:case 36306:case 35682:return zse;case 35679:case 36299:case 36307:return jse;case 35680:case 36300:case 36308:case 36293:return Gse;case 36289:case 36303:case 36311:case 36292:return Wse}}function qse(n,e){n.uniform1fv(this.addr,e)}function Xse(n,e){let t=Ah(e,this.size,2);n.uniform2fv(this.addr,t)}function Yse(n,e){let t=Ah(e,this.size,3);n.uniform3fv(this.addr,t)}function Zse(n,e){let t=Ah(e,this.size,4);n.uniform4fv(this.addr,t)}function Kse(n,e){let t=Ah(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Jse(n,e){let t=Ah(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Qse(n,e){let t=Ah(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function eae(n,e){n.uniform1iv(this.addr,e)}function tae(n,e){n.uniform2iv(this.addr,e)}function nae(n,e){n.uniform3iv(this.addr,e)}function iae(n,e){n.uniform4iv(this.addr,e)}function rae(n,e){n.uniform1uiv(this.addr,e)}function oae(n,e){n.uniform2uiv(this.addr,e)}function sae(n,e){n.uniform3uiv(this.addr,e)}function aae(n,e){n.uniform4uiv(this.addr,e)}function lae(n,e,t){let i=this.cache,r=e.length,o=Vw(t,r);Ji(i,o)||(n.uniform1iv(this.addr,o),Qi(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||QB,o[s])}function cae(n,e,t){let i=this.cache,r=e.length,o=Vw(t,r);Ji(i,o)||(n.uniform1iv(this.addr,o),Qi(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||tV,o[s])}function uae(n,e,t){let i=this.cache,r=e.length,o=Vw(t,r);Ji(i,o)||(n.uniform1iv(this.addr,o),Qi(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||nV,o[s])}function dae(n,e,t){let i=this.cache,r=e.length,o=Vw(t,r);Ji(i,o)||(n.uniform1iv(this.addr,o),Qi(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||eV,o[s])}function fae(n){switch(n){case 5126:return qse;case 35664:return Xse;case 35665:return Yse;case 35666:return Zse;case 35674:return Kse;case 35675:return Jse;case 35676:return Qse;case 5124:case 35670:return eae;case 35667:case 35671:return tae;case 35668:case 35672:return nae;case 35669:case 35673:return iae;case 5125:return rae;case 36294:return oae;case 36295:return sae;case 36296:return aae;case 35678:case 36198:case 36298:case 36306:case 35682:return lae;case 35679:case 36299:case 36307:return cae;case 35680:case 36300:case 36308:case 36293:return uae;case 36289:case 36303:case 36311:case 36292:return dae}}var WI=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=$se(t.type)}},$I=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=fae(t.type)}},qI=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,t[a.id],i)}}},GI=/(\w+)(\])?(\[|\.)?/g;function HB(n,e){n.seq.push(e),n.map[e.id]=e}function hae(n,e,t){let i=n.name,r=i.length;for(GI.lastIndex=0;;){let o=GI.exec(i),s=GI.lastIndex,a=o[1],l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===r){HB(t,u===void 0?new WI(a,n,e):new $I(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new qI(a),HB(t,h)),t=h}}}var Dh=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=e.getActiveUniform(t,r),s=e.getUniformLocation(t,o.name);hae(o,s,this)}}setValue(e,t,i,r){let o=this.map[t];o!==void 0&&o.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){let a=t[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function zB(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var pae=37297,mae=0;function gae(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join(`
`)}var jB=new Gt;function vae(n){Bt._getMatrix(jB,Bt.workingColorSpace,n);let e=`mat3( ${jB.elements.map(t=>t.toFixed(4))} )`;switch(Bt.getTransfer(n)){case qm:return[e,"LinearTransferOETF"];case Gn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function GB(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+gae(n.getShaderSource(e),s)}else return r}function yae(n,e){let t=vae(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function _ae(n,e){let t;switch(e){case JU:t="Linear";break;case QU:t="Reinhard";break;case eB:t="Cineon";break;case tB:t="ACESFilmic";break;case iB:t="AgX";break;case rB:t="Neutral";break;case nB:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var kw=new B;function xae(){Bt.getLuminanceCoefficients(kw);let n=kw.x.toFixed(4),e=kw.y.toFixed(4),t=kw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function wae(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Pg).join(`
`)}function bae(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Cae(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function Pg(n){return n!==""}function WB(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function $B(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Eae=/^[ \t]*#include +<([\w\d./]+)>/gm;function XI(n){return n.replace(Eae,Sae)}var Mae=new Map;function Sae(n,e){let t=on[e];if(t===void 0){let i=Mae.get(e);if(i!==void 0)t=on[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return XI(t)}var Tae=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qB(n){return n.replace(Tae,Iae)}function Iae(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function XB(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Dae(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===yI?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===RU?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===$a&&(e="SHADOWMAP_TYPE_VSM"),e}function Aae(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case sd:case ad:e="ENVMAP_TYPE_CUBE";break;case Cg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Rae(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ad:e="ENVMAP_MODE_REFRACTION";break}return e}function Pae(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case bg:e="ENVMAP_BLENDING_MULTIPLY";break;case ZU:e="ENVMAP_BLENDING_MIX";break;case KU:e="ENVMAP_BLENDING_ADD";break}return e}function Oae(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Nae(n,e,t,i){let r=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,l=Dae(t),u=Aae(t),f=Rae(t),h=Pae(t),p=Oae(t),g=wae(t),v=bae(o),w=r.createProgram(),y,_,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Pg).join(`
`),y.length>0&&(y+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Pg).join(`
`),_.length>0&&(_+=`
`)):(y=[XB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Pg).join(`
`),_=[XB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==jl?"#define TONE_MAPPING":"",t.toneMapping!==jl?on.tonemapping_pars_fragment:"",t.toneMapping!==jl?_ae("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",on.colorspace_pars_fragment,yae("linearToOutputTexel",t.outputColorSpace),xae(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Pg).join(`
`)),s=XI(s),s=WB(s,t),s=$B(s,t),a=XI(a),a=WB(a,t),a=$B(a,t),s=qB(s),a=qB(a),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,y=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===RI?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===RI?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);let C=T+y+s,E=T+_+a,V=zB(r,r.VERTEX_SHADER,C),F=zB(r,r.FRAGMENT_SHADER,E);r.attachShader(w,V),r.attachShader(w,F),t.index0AttributeName!==void 0?r.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function L(j){if(n.debug.checkShaderErrors){let pe=r.getProgramInfoLog(w).trim(),ae=r.getShaderInfoLog(V).trim(),Ie=r.getShaderInfoLog(F).trim(),be=!0,X=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(be=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,w,V,F);else{let ie=GB(r,V,"vertex"),q=GB(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+pe+`
`+ie+`
`+q)}else pe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",pe):(ae===""||Ie==="")&&(X=!1);X&&(j.diagnostics={runnable:be,programLog:pe,vertexShader:{log:ae,prefix:y},fragmentShader:{log:Ie,prefix:_}})}r.deleteShader(V),r.deleteShader(F),W=new Dh(r,w),O=Cae(r,w)}let W;this.getUniforms=function(){return W===void 0&&L(this),W};let O;this.getAttributes=function(){return O===void 0&&L(this),O};let R=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=r.getProgramParameter(w,pae)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=mae++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=V,this.fragmentShader=F,this}var Fae=0,YI=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new ZI(e),t.set(e,i)),i}},ZI=class{constructor(e){this.id=Fae++,this.code=e,this.usedTimes=0}};function Lae(n,e,t,i,r,o,s){let a=new uh,l=new YI,u=new Set,f=[],h=r.logarithmicDepthBuffer,p=r.vertexTextures,g=r.precision,v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(O){return u.add(O),O===0?"uv":`uv${O}`}function y(O,R,j,pe,ae){let Ie=pe.fog,be=ae.geometry,X=O.isMeshStandardMaterial?pe.environment:null,ie=(O.isMeshStandardMaterial?t:e).get(O.envMap||X),q=ie&&ie.mapping===Cg?ie.image.height:null,ve=v[O.type];O.precision!==null&&(g=r.getMaxPrecision(O.precision),g!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",g,"instead."));let Ve=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,tt=Ve!==void 0?Ve.length:0,ge=0;be.morphAttributes.position!==void 0&&(ge=1),be.morphAttributes.normal!==void 0&&(ge=2),be.morphAttributes.color!==void 0&&(ge=3);let re,U,J,_e;if(ve){let wn=qa[ve];re=wn.vertexShader,U=wn.fragmentShader}else re=O.vertexShader,U=O.fragmentShader,l.update(O),J=l.getVertexShaderID(O),_e=l.getFragmentShaderID(O);let se=n.getRenderTarget(),He=n.state.buffers.depth.getReversed(),je=ae.isInstancedMesh===!0,Le=ae.isBatchedMesh===!0,rt=!!O.map,pt=!!O.matcap,ct=!!ie,z=!!O.aoMap,qt=!!O.lightMap,Ge=!!O.bumpMap,At=!!O.normalMap,Xe=!!O.displacementMap,Vt=!!O.emissiveMap,ht=!!O.metalnessMap,N=!!O.roughnessMap,M=O.anisotropy>0,oe=O.clearcoat>0,we=O.dispersion>0,De=O.iridescence>0,he=O.sheen>0,$e=O.transmission>0,qe=M&&!!O.anisotropyMap,yt=oe&&!!O.clearcoatMap,_t=oe&&!!O.clearcoatNormalMap,Fe=oe&&!!O.clearcoatRoughnessMap,nt=De&&!!O.iridescenceMap,xt=De&&!!O.iridescenceThicknessMap,Mt=he&&!!O.sheenColorMap,it=he&&!!O.sheenRoughnessMap,sn=!!O.specularMap,Ht=!!O.specularColorMap,Ln=!!O.specularIntensityMap,Y=$e&&!!O.transmissionMap,Ze=$e&&!!O.thicknessMap,me=!!O.gradientMap,Se=!!O.alphaMap,et=O.alphaTest>0,Ye=!!O.alphaHash,Nt=!!O.extensions,Yn=jl;O.toneMapped&&(se===null||se.isXRRenderTarget===!0)&&(Yn=n.toneMapping);let Di={shaderID:ve,shaderType:O.type,shaderName:O.name,vertexShader:re,fragmentShader:U,defines:O.defines,customVertexShaderID:J,customFragmentShaderID:_e,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:g,batching:Le,batchingColor:Le&&ae._colorsTexture!==null,instancing:je,instancingColor:je&&ae.instanceColor!==null,instancingMorph:je&&ae.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:se===null?n.outputColorSpace:se.isXRRenderTarget===!0?se.texture.colorSpace:yr,alphaToCoverage:!!O.alphaToCoverage,map:rt,matcap:pt,envMap:ct,envMapMode:ct&&ie.mapping,envMapCubeUVHeight:q,aoMap:z,lightMap:qt,bumpMap:Ge,normalMap:At,displacementMap:p&&Xe,emissiveMap:Vt,normalMapObjectSpace:At&&O.normalMapType===cB,normalMapTangentSpace:At&&O.normalMapType===Ag,metalnessMap:ht,roughnessMap:N,anisotropy:M,anisotropyMap:qe,clearcoat:oe,clearcoatMap:yt,clearcoatNormalMap:_t,clearcoatRoughnessMap:Fe,dispersion:we,iridescence:De,iridescenceMap:nt,iridescenceThicknessMap:xt,sheen:he,sheenColorMap:Mt,sheenRoughnessMap:it,specularMap:sn,specularColorMap:Ht,specularIntensityMap:Ln,transmission:$e,transmissionMap:Y,thicknessMap:Ze,gradientMap:me,opaque:O.transparent===!1&&O.blending===Wu&&O.alphaToCoverage===!1,alphaMap:Se,alphaTest:et,alphaHash:Ye,combine:O.combine,mapUv:rt&&w(O.map.channel),aoMapUv:z&&w(O.aoMap.channel),lightMapUv:qt&&w(O.lightMap.channel),bumpMapUv:Ge&&w(O.bumpMap.channel),normalMapUv:At&&w(O.normalMap.channel),displacementMapUv:Xe&&w(O.displacementMap.channel),emissiveMapUv:Vt&&w(O.emissiveMap.channel),metalnessMapUv:ht&&w(O.metalnessMap.channel),roughnessMapUv:N&&w(O.roughnessMap.channel),anisotropyMapUv:qe&&w(O.anisotropyMap.channel),clearcoatMapUv:yt&&w(O.clearcoatMap.channel),clearcoatNormalMapUv:_t&&w(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&w(O.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&w(O.iridescenceMap.channel),iridescenceThicknessMapUv:xt&&w(O.iridescenceThicknessMap.channel),sheenColorMapUv:Mt&&w(O.sheenColorMap.channel),sheenRoughnessMapUv:it&&w(O.sheenRoughnessMap.channel),specularMapUv:sn&&w(O.specularMap.channel),specularColorMapUv:Ht&&w(O.specularColorMap.channel),specularIntensityMapUv:Ln&&w(O.specularIntensityMap.channel),transmissionMapUv:Y&&w(O.transmissionMap.channel),thicknessMapUv:Ze&&w(O.thicknessMap.channel),alphaMapUv:Se&&w(O.alphaMap.channel),vertexTangents:!!be.attributes.tangent&&(At||M),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,pointsUvs:ae.isPoints===!0&&!!be.attributes.uv&&(rt||Se),fog:!!Ie,useFog:O.fog===!0,fogExp2:!!Ie&&Ie.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:He,skinning:ae.isSkinnedMesh===!0,morphTargets:be.morphAttributes.position!==void 0,morphNormals:be.morphAttributes.normal!==void 0,morphColors:be.morphAttributes.color!==void 0,morphTargetsCount:tt,morphTextureStride:ge,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&j.length>0,shadowMapType:n.shadowMap.type,toneMapping:Yn,decodeVideoTexture:rt&&O.map.isVideoTexture===!0&&Bt.getTransfer(O.map.colorSpace)===Gn,decodeVideoTextureEmissive:Vt&&O.emissiveMap.isVideoTexture===!0&&Bt.getTransfer(O.emissiveMap.colorSpace)===Gn,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===Es,flipSided:O.side===jr,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Nt&&O.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Nt&&O.extensions.multiDraw===!0||Le)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return Di.vertexUv1s=u.has(1),Di.vertexUv2s=u.has(2),Di.vertexUv3s=u.has(3),u.clear(),Di}function _(O){let R=[];if(O.shaderID?R.push(O.shaderID):(R.push(O.customVertexShaderID),R.push(O.customFragmentShaderID)),O.defines!==void 0)for(let j in O.defines)R.push(j),R.push(O.defines[j]);return O.isRawShaderMaterial===!1&&(T(R,O),C(R,O),R.push(n.outputColorSpace)),R.push(O.customProgramCacheKey),R.join()}function T(O,R){O.push(R.precision),O.push(R.outputColorSpace),O.push(R.envMapMode),O.push(R.envMapCubeUVHeight),O.push(R.mapUv),O.push(R.alphaMapUv),O.push(R.lightMapUv),O.push(R.aoMapUv),O.push(R.bumpMapUv),O.push(R.normalMapUv),O.push(R.displacementMapUv),O.push(R.emissiveMapUv),O.push(R.metalnessMapUv),O.push(R.roughnessMapUv),O.push(R.anisotropyMapUv),O.push(R.clearcoatMapUv),O.push(R.clearcoatNormalMapUv),O.push(R.clearcoatRoughnessMapUv),O.push(R.iridescenceMapUv),O.push(R.iridescenceThicknessMapUv),O.push(R.sheenColorMapUv),O.push(R.sheenRoughnessMapUv),O.push(R.specularMapUv),O.push(R.specularColorMapUv),O.push(R.specularIntensityMapUv),O.push(R.transmissionMapUv),O.push(R.thicknessMapUv),O.push(R.combine),O.push(R.fogExp2),O.push(R.sizeAttenuation),O.push(R.morphTargetsCount),O.push(R.morphAttributeCount),O.push(R.numDirLights),O.push(R.numPointLights),O.push(R.numSpotLights),O.push(R.numSpotLightMaps),O.push(R.numHemiLights),O.push(R.numRectAreaLights),O.push(R.numDirLightShadows),O.push(R.numPointLightShadows),O.push(R.numSpotLightShadows),O.push(R.numSpotLightShadowsWithMaps),O.push(R.numLightProbes),O.push(R.shadowMapType),O.push(R.toneMapping),O.push(R.numClippingPlanes),O.push(R.numClipIntersection),O.push(R.depthPacking)}function C(O,R){a.disableAll(),R.supportsVertexTextures&&a.enable(0),R.instancing&&a.enable(1),R.instancingColor&&a.enable(2),R.instancingMorph&&a.enable(3),R.matcap&&a.enable(4),R.envMap&&a.enable(5),R.normalMapObjectSpace&&a.enable(6),R.normalMapTangentSpace&&a.enable(7),R.clearcoat&&a.enable(8),R.iridescence&&a.enable(9),R.alphaTest&&a.enable(10),R.vertexColors&&a.enable(11),R.vertexAlphas&&a.enable(12),R.vertexUv1s&&a.enable(13),R.vertexUv2s&&a.enable(14),R.vertexUv3s&&a.enable(15),R.vertexTangents&&a.enable(16),R.anisotropy&&a.enable(17),R.alphaHash&&a.enable(18),R.batching&&a.enable(19),R.dispersion&&a.enable(20),R.batchingColor&&a.enable(21),O.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.reverseDepthBuffer&&a.enable(4),R.skinning&&a.enable(5),R.morphTargets&&a.enable(6),R.morphNormals&&a.enable(7),R.morphColors&&a.enable(8),R.premultipliedAlpha&&a.enable(9),R.shadowMapEnabled&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),R.decodeVideoTextureEmissive&&a.enable(20),R.alphaToCoverage&&a.enable(21),O.push(a.mask)}function E(O){let R=v[O.type],j;if(R){let pe=qa[R];j=bB.clone(pe.uniforms)}else j=O.uniforms;return j}function V(O,R){let j;for(let pe=0,ae=f.length;pe<ae;pe++){let Ie=f[pe];if(Ie.cacheKey===R){j=Ie,++j.usedTimes;break}}return j===void 0&&(j=new Nae(n,R,O,o),f.push(j)),j}function F(O){if(--O.usedTimes===0){let R=f.indexOf(O);f[R]=f[f.length-1],f.pop(),O.destroy()}}function L(O){l.remove(O)}function W(){l.dispose()}return{getParameters:y,getProgramCacheKey:_,getUniforms:E,acquireProgram:V,releaseProgram:F,releaseShaderCache:L,programs:f,dispose:W}}function kae(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,l){n.get(s)[a]=l}function o(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:o}}function Uae(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function YB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function ZB(){let n=[],e=0,t=[],i=[],r=[];function o(){e=0,t.length=0,i.length=0,r.length=0}function s(h,p,g,v,w,y){let _=n[e];return _===void 0?(_={id:h.id,object:h,geometry:p,material:g,groupOrder:v,renderOrder:h.renderOrder,z:w,group:y},n[e]=_):(_.id=h.id,_.object=h,_.geometry=p,_.material=g,_.groupOrder=v,_.renderOrder=h.renderOrder,_.z=w,_.group=y),e++,_}function a(h,p,g,v,w,y){let _=s(h,p,g,v,w,y);g.transmission>0?i.push(_):g.transparent===!0?r.push(_):t.push(_)}function l(h,p,g,v,w,y){let _=s(h,p,g,v,w,y);g.transmission>0?i.unshift(_):g.transparent===!0?r.unshift(_):t.unshift(_)}function u(h,p){t.length>1&&t.sort(h||Uae),i.length>1&&i.sort(p||YB),r.length>1&&r.sort(p||YB)}function f(){for(let h=e,p=n.length;h<p;h++){let g=n[h];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:f,sort:u}}function Bae(){let n=new WeakMap;function e(i,r){let o=n.get(i),s;return o===void 0?(s=new ZB,n.set(i,[s])):r>=o.length?(s=new ZB,o.push(s)):s=o[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Vae(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new B,color:new ft};break;case"SpotLight":t={position:new B,direction:new B,color:new ft,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new B,color:new ft,distance:0,decay:0};break;case"HemisphereLight":t={direction:new B,skyColor:new ft,groundColor:new ft};break;case"RectAreaLight":t={color:new ft,position:new B,halfWidth:new B,halfHeight:new B};break}return n[e.id]=t,t}}}function Hae(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var zae=0;function jae(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Gae(n){let e=new Vae,t=Hae(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new B);let r=new B,o=new lt,s=new lt;function a(u){let f=0,h=0,p=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let g=0,v=0,w=0,y=0,_=0,T=0,C=0,E=0,V=0,F=0,L=0;u.sort(jae);for(let O=0,R=u.length;O<R;O++){let j=u[O],pe=j.color,ae=j.intensity,Ie=j.distance,be=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)f+=pe.r*ae,h+=pe.g*ae,p+=pe.b*ae;else if(j.isLightProbe){for(let X=0;X<9;X++)i.probe[X].addScaledVector(j.sh.coefficients[X],ae);L++}else if(j.isDirectionalLight){let X=e.get(j);if(X.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){let ie=j.shadow,q=t.get(j);q.shadowIntensity=ie.intensity,q.shadowBias=ie.bias,q.shadowNormalBias=ie.normalBias,q.shadowRadius=ie.radius,q.shadowMapSize=ie.mapSize,i.directionalShadow[g]=q,i.directionalShadowMap[g]=be,i.directionalShadowMatrix[g]=j.shadow.matrix,T++}i.directional[g]=X,g++}else if(j.isSpotLight){let X=e.get(j);X.position.setFromMatrixPosition(j.matrixWorld),X.color.copy(pe).multiplyScalar(ae),X.distance=Ie,X.coneCos=Math.cos(j.angle),X.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),X.decay=j.decay,i.spot[w]=X;let ie=j.shadow;if(j.map&&(i.spotLightMap[V]=j.map,V++,ie.updateMatrices(j),j.castShadow&&F++),i.spotLightMatrix[w]=ie.matrix,j.castShadow){let q=t.get(j);q.shadowIntensity=ie.intensity,q.shadowBias=ie.bias,q.shadowNormalBias=ie.normalBias,q.shadowRadius=ie.radius,q.shadowMapSize=ie.mapSize,i.spotShadow[w]=q,i.spotShadowMap[w]=be,E++}w++}else if(j.isRectAreaLight){let X=e.get(j);X.color.copy(pe).multiplyScalar(ae),X.halfWidth.set(j.width*.5,0,0),X.halfHeight.set(0,j.height*.5,0),i.rectArea[y]=X,y++}else if(j.isPointLight){let X=e.get(j);if(X.color.copy(j.color).multiplyScalar(j.intensity),X.distance=j.distance,X.decay=j.decay,j.castShadow){let ie=j.shadow,q=t.get(j);q.shadowIntensity=ie.intensity,q.shadowBias=ie.bias,q.shadowNormalBias=ie.normalBias,q.shadowRadius=ie.radius,q.shadowMapSize=ie.mapSize,q.shadowCameraNear=ie.camera.near,q.shadowCameraFar=ie.camera.far,i.pointShadow[v]=q,i.pointShadowMap[v]=be,i.pointShadowMatrix[v]=j.shadow.matrix,C++}i.point[v]=X,v++}else if(j.isHemisphereLight){let X=e.get(j);X.skyColor.copy(j.color).multiplyScalar(ae),X.groundColor.copy(j.groundColor).multiplyScalar(ae),i.hemi[_]=X,_++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Qe.LTC_FLOAT_1,i.rectAreaLTC2=Qe.LTC_FLOAT_2):(i.rectAreaLTC1=Qe.LTC_HALF_1,i.rectAreaLTC2=Qe.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;let W=i.hash;(W.directionalLength!==g||W.pointLength!==v||W.spotLength!==w||W.rectAreaLength!==y||W.hemiLength!==_||W.numDirectionalShadows!==T||W.numPointShadows!==C||W.numSpotShadows!==E||W.numSpotMaps!==V||W.numLightProbes!==L)&&(i.directional.length=g,i.spot.length=w,i.rectArea.length=y,i.point.length=v,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=E+V-F,i.spotLightMap.length=V,i.numSpotLightShadowsWithMaps=F,i.numLightProbes=L,W.directionalLength=g,W.pointLength=v,W.spotLength=w,W.rectAreaLength=y,W.hemiLength=_,W.numDirectionalShadows=T,W.numPointShadows=C,W.numSpotShadows=E,W.numSpotMaps=V,W.numLightProbes=L,i.version=zae++)}function l(u,f){let h=0,p=0,g=0,v=0,w=0,y=f.matrixWorldInverse;for(let _=0,T=u.length;_<T;_++){let C=u[_];if(C.isDirectionalLight){let E=i.directional[h];E.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(y),h++}else if(C.isSpotLight){let E=i.spot[g];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(y),E.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(y),g++}else if(C.isRectAreaLight){let E=i.rectArea[v];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(y),s.identity(),o.copy(C.matrixWorld),o.premultiply(y),s.extractRotation(o),E.halfWidth.set(C.width*.5,0,0),E.halfHeight.set(0,C.height*.5,0),E.halfWidth.applyMatrix4(s),E.halfHeight.applyMatrix4(s),v++}else if(C.isPointLight){let E=i.point[p];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(y),p++}else if(C.isHemisphereLight){let E=i.hemi[w];E.direction.setFromMatrixPosition(C.matrixWorld),E.direction.transformDirection(y),w++}}}return{setup:a,setupView:l,state:i}}function KB(n){let e=new Gae(n),t=[],i=[];function r(f){u.camera=f,t.length=0,i.length=0}function o(f){t.push(f)}function s(f){i.push(f)}function a(){e.setup(t)}function l(f){e.setupView(t,f)}let u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function Wae(n){let e=new WeakMap;function t(r,o=0){let s=e.get(r),a;return s===void 0?(a=new KB(n),e.set(r,[a])):o>=s.length?(a=new KB(n),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var $ae=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,qae=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Xae(n,e,t){let i=new mh,r=new We,o=new We,s=new rn,a=new kx({depthPacking:lB}),l=new Ux,u={},f=t.maxTextureSize,h={[la]:jr,[jr]:la,[Es]:Es},p=new ua({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:$ae,fragmentShader:qae}),g=p.clone();g.defines.HORIZONTAL_PASS=1;let v=new ki;v.setAttribute("position",new Hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let w=new gi(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=yI;let _=this.type;this.render=function(F,L,W){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||F.length===0)return;let O=n.getRenderTarget(),R=n.getActiveCubeFace(),j=n.getActiveMipmapLevel(),pe=n.state;pe.setBlending(zl),pe.buffers.color.setClear(1,1,1,1),pe.buffers.depth.setTest(!0),pe.setScissorTest(!1);let ae=_!==$a&&this.type===$a,Ie=_===$a&&this.type!==$a;for(let be=0,X=F.length;be<X;be++){let ie=F[be],q=ie.shadow;if(q===void 0){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if(q.autoUpdate===!1&&q.needsUpdate===!1)continue;r.copy(q.mapSize);let ve=q.getFrameExtents();if(r.multiply(ve),o.copy(q.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(o.x=Math.floor(f/ve.x),r.x=o.x*ve.x,q.mapSize.x=o.x),r.y>f&&(o.y=Math.floor(f/ve.y),r.y=o.y*ve.y,q.mapSize.y=o.y)),q.map===null||ae===!0||Ie===!0){let tt=this.type!==$a?{minFilter:vr,magFilter:vr}:{};q.map!==null&&q.map.dispose(),q.map=new za(r.x,r.y,tt),q.map.texture.name=ie.name+".shadowMap",q.camera.updateProjectionMatrix()}n.setRenderTarget(q.map),n.clear();let Ve=q.getViewportCount();for(let tt=0;tt<Ve;tt++){let ge=q.getViewport(tt);s.set(o.x*ge.x,o.y*ge.y,o.x*ge.z,o.y*ge.w),pe.viewport(s),q.updateMatrices(ie,tt),i=q.getFrustum(),E(L,W,q.camera,ie,this.type)}q.isPointLightShadow!==!0&&this.type===$a&&T(q,W),q.needsUpdate=!1}_=this.type,y.needsUpdate=!1,n.setRenderTarget(O,R,j)};function T(F,L){let W=e.update(w);p.defines.VSM_SAMPLES!==F.blurSamples&&(p.defines.VSM_SAMPLES=F.blurSamples,g.defines.VSM_SAMPLES=F.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new za(r.x,r.y)),p.uniforms.shadow_pass.value=F.map.texture,p.uniforms.resolution.value=F.mapSize,p.uniforms.radius.value=F.radius,n.setRenderTarget(F.mapPass),n.clear(),n.renderBufferDirect(L,null,W,p,w,null),g.uniforms.shadow_pass.value=F.mapPass.texture,g.uniforms.resolution.value=F.mapSize,g.uniforms.radius.value=F.radius,n.setRenderTarget(F.map),n.clear(),n.renderBufferDirect(L,null,W,g,w,null)}function C(F,L,W,O){let R=null,j=W.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(j!==void 0)R=j;else if(R=W.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){let pe=R.uuid,ae=L.uuid,Ie=u[pe];Ie===void 0&&(Ie={},u[pe]=Ie);let be=Ie[ae];be===void 0&&(be=R.clone(),Ie[ae]=be,L.addEventListener("dispose",V)),R=be}if(R.visible=L.visible,R.wireframe=L.wireframe,O===$a?R.side=L.shadowSide!==null?L.shadowSide:L.side:R.side=L.shadowSide!==null?L.shadowSide:h[L.side],R.alphaMap=L.alphaMap,R.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,R.map=L.map,R.clipShadows=L.clipShadows,R.clippingPlanes=L.clippingPlanes,R.clipIntersection=L.clipIntersection,R.displacementMap=L.displacementMap,R.displacementScale=L.displacementScale,R.displacementBias=L.displacementBias,R.wireframeLinewidth=L.wireframeLinewidth,R.linewidth=L.linewidth,W.isPointLight===!0&&R.isMeshDistanceMaterial===!0){let pe=n.properties.get(R);pe.light=W}return R}function E(F,L,W,O,R){if(F.visible===!1)return;if(F.layers.test(L.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&R===$a)&&(!F.frustumCulled||i.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,F.matrixWorld);let ae=e.update(F),Ie=F.material;if(Array.isArray(Ie)){let be=ae.groups;for(let X=0,ie=be.length;X<ie;X++){let q=be[X],ve=Ie[q.materialIndex];if(ve&&ve.visible){let Ve=C(F,ve,O,R);F.onBeforeShadow(n,F,L,W,ae,Ve,q),n.renderBufferDirect(W,null,ae,Ve,F,q),F.onAfterShadow(n,F,L,W,ae,Ve,q)}}}else if(Ie.visible){let be=C(F,Ie,O,R);F.onBeforeShadow(n,F,L,W,ae,be,null),n.renderBufferDirect(W,null,ae,be,F,null),F.onAfterShadow(n,F,L,W,ae,be,null)}}let pe=F.children;for(let ae=0,Ie=pe.length;ae<Ie;ae++)E(pe[ae],L,W,O,R)}function V(F){F.target.removeEventListener("dispose",V);for(let W in u){let O=u[W],R=F.target.uuid;R in O&&(O[R].dispose(),delete O[R])}}}var Yae={[qx]:Xx,[Yx]:Jx,[Zx]:Qx,[$u]:Kx,[Xx]:qx,[Jx]:Yx,[Qx]:Zx,[Kx]:$u};function Zae(n,e){function t(){let Y=!1,Ze=new rn,me=null,Se=new rn(0,0,0,0);return{setMask:function(et){me!==et&&!Y&&(n.colorMask(et,et,et,et),me=et)},setLocked:function(et){Y=et},setClear:function(et,Ye,Nt,Yn,Di){Di===!0&&(et*=Yn,Ye*=Yn,Nt*=Yn),Ze.set(et,Ye,Nt,Yn),Se.equals(Ze)===!1&&(n.clearColor(et,Ye,Nt,Yn),Se.copy(Ze))},reset:function(){Y=!1,me=null,Se.set(-1,0,0,0)}}}function i(){let Y=!1,Ze=!1,me=null,Se=null,et=null;return{setReversed:function(Ye){if(Ze!==Ye){let Nt=e.get("EXT_clip_control");Ye?Nt.clipControlEXT(Nt.LOWER_LEFT_EXT,Nt.ZERO_TO_ONE_EXT):Nt.clipControlEXT(Nt.LOWER_LEFT_EXT,Nt.NEGATIVE_ONE_TO_ONE_EXT),Ze=Ye;let Yn=et;et=null,this.setClear(Yn)}},getReversed:function(){return Ze},setTest:function(Ye){Ye?se(n.DEPTH_TEST):He(n.DEPTH_TEST)},setMask:function(Ye){me!==Ye&&!Y&&(n.depthMask(Ye),me=Ye)},setFunc:function(Ye){if(Ze&&(Ye=Yae[Ye]),Se!==Ye){switch(Ye){case qx:n.depthFunc(n.NEVER);break;case Xx:n.depthFunc(n.ALWAYS);break;case Yx:n.depthFunc(n.LESS);break;case $u:n.depthFunc(n.LEQUAL);break;case Zx:n.depthFunc(n.EQUAL);break;case Kx:n.depthFunc(n.GEQUAL);break;case Jx:n.depthFunc(n.GREATER);break;case Qx:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Se=Ye}},setLocked:function(Ye){Y=Ye},setClear:function(Ye){et!==Ye&&(Ze&&(Ye=1-Ye),n.clearDepth(Ye),et=Ye)},reset:function(){Y=!1,me=null,Se=null,et=null,Ze=!1}}}function r(){let Y=!1,Ze=null,me=null,Se=null,et=null,Ye=null,Nt=null,Yn=null,Di=null;return{setTest:function(wn){Y||(wn?se(n.STENCIL_TEST):He(n.STENCIL_TEST))},setMask:function(wn){Ze!==wn&&!Y&&(n.stencilMask(wn),Ze=wn)},setFunc:function(wn,tr,$r){(me!==wn||Se!==tr||et!==$r)&&(n.stencilFunc(wn,tr,$r),me=wn,Se=tr,et=$r)},setOp:function(wn,tr,$r){(Ye!==wn||Nt!==tr||Yn!==$r)&&(n.stencilOp(wn,tr,$r),Ye=wn,Nt=tr,Yn=$r)},setLocked:function(wn){Y=wn},setClear:function(wn){Di!==wn&&(n.clearStencil(wn),Di=wn)},reset:function(){Y=!1,Ze=null,me=null,Se=null,et=null,Ye=null,Nt=null,Yn=null,Di=null}}}let o=new t,s=new i,a=new r,l=new WeakMap,u=new WeakMap,f={},h={},p=new WeakMap,g=[],v=null,w=!1,y=null,_=null,T=null,C=null,E=null,V=null,F=null,L=new ft(0,0,0),W=0,O=!1,R=null,j=null,pe=null,ae=null,Ie=null,be=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),X=!1,ie=0,q=n.getParameter(n.VERSION);q.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec(q)[1]),X=ie>=1):q.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),X=ie>=2);let ve=null,Ve={},tt=n.getParameter(n.SCISSOR_BOX),ge=n.getParameter(n.VIEWPORT),re=new rn().fromArray(tt),U=new rn().fromArray(ge);function J(Y,Ze,me,Se){let et=new Uint8Array(4),Ye=n.createTexture();n.bindTexture(Y,Ye),n.texParameteri(Y,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Y,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Nt=0;Nt<me;Nt++)Y===n.TEXTURE_3D||Y===n.TEXTURE_2D_ARRAY?n.texImage3D(Ze,0,n.RGBA,1,1,Se,0,n.RGBA,n.UNSIGNED_BYTE,et):n.texImage2D(Ze+Nt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,et);return Ye}let _e={};_e[n.TEXTURE_2D]=J(n.TEXTURE_2D,n.TEXTURE_2D,1),_e[n.TEXTURE_CUBE_MAP]=J(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),_e[n.TEXTURE_2D_ARRAY]=J(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),_e[n.TEXTURE_3D]=J(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),se(n.DEPTH_TEST),s.setFunc($u),Ge(!1),At(vI),se(n.CULL_FACE),z(zl);function se(Y){f[Y]!==!0&&(n.enable(Y),f[Y]=!0)}function He(Y){f[Y]!==!1&&(n.disable(Y),f[Y]=!1)}function je(Y,Ze){return h[Y]!==Ze?(n.bindFramebuffer(Y,Ze),h[Y]=Ze,Y===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Ze),Y===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Ze),!0):!1}function Le(Y,Ze){let me=g,Se=!1;if(Y){me=p.get(Ze),me===void 0&&(me=[],p.set(Ze,me));let et=Y.textures;if(me.length!==et.length||me[0]!==n.COLOR_ATTACHMENT0){for(let Ye=0,Nt=et.length;Ye<Nt;Ye++)me[Ye]=n.COLOR_ATTACHMENT0+Ye;me.length=et.length,Se=!0}}else me[0]!==n.BACK&&(me[0]=n.BACK,Se=!0);Se&&n.drawBuffers(me)}function rt(Y){return v!==Y?(n.useProgram(Y),v=Y,!0):!1}let pt={[Nc]:n.FUNC_ADD,[OU]:n.FUNC_SUBTRACT,[NU]:n.FUNC_REVERSE_SUBTRACT};pt[FU]=n.MIN,pt[LU]=n.MAX;let ct={[kU]:n.ZERO,[UU]:n.ONE,[BU]:n.SRC_COLOR,[wx]:n.SRC_ALPHA,[WU]:n.SRC_ALPHA_SATURATE,[jU]:n.DST_COLOR,[HU]:n.DST_ALPHA,[VU]:n.ONE_MINUS_SRC_COLOR,[bx]:n.ONE_MINUS_SRC_ALPHA,[GU]:n.ONE_MINUS_DST_COLOR,[zU]:n.ONE_MINUS_DST_ALPHA,[$U]:n.CONSTANT_COLOR,[qU]:n.ONE_MINUS_CONSTANT_COLOR,[XU]:n.CONSTANT_ALPHA,[YU]:n.ONE_MINUS_CONSTANT_ALPHA};function z(Y,Ze,me,Se,et,Ye,Nt,Yn,Di,wn){if(Y===zl){w===!0&&(He(n.BLEND),w=!1);return}if(w===!1&&(se(n.BLEND),w=!0),Y!==PU){if(Y!==y||wn!==O){if((_!==Nc||E!==Nc)&&(n.blendEquation(n.FUNC_ADD),_=Nc,E=Nc),wn)switch(Y){case Wu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case _I:n.blendFunc(n.ONE,n.ONE);break;case xI:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case wI:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}else switch(Y){case Wu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case _I:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case xI:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case wI:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}T=null,C=null,V=null,F=null,L.set(0,0,0),W=0,y=Y,O=wn}return}et=et||Ze,Ye=Ye||me,Nt=Nt||Se,(Ze!==_||et!==E)&&(n.blendEquationSeparate(pt[Ze],pt[et]),_=Ze,E=et),(me!==T||Se!==C||Ye!==V||Nt!==F)&&(n.blendFuncSeparate(ct[me],ct[Se],ct[Ye],ct[Nt]),T=me,C=Se,V=Ye,F=Nt),(Yn.equals(L)===!1||Di!==W)&&(n.blendColor(Yn.r,Yn.g,Yn.b,Di),L.copy(Yn),W=Di),y=Y,O=!1}function qt(Y,Ze){Y.side===Es?He(n.CULL_FACE):se(n.CULL_FACE);let me=Y.side===jr;Ze&&(me=!me),Ge(me),Y.blending===Wu&&Y.transparent===!1?z(zl):z(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.blendColor,Y.blendAlpha,Y.premultipliedAlpha),s.setFunc(Y.depthFunc),s.setTest(Y.depthTest),s.setMask(Y.depthWrite),o.setMask(Y.colorWrite);let Se=Y.stencilWrite;a.setTest(Se),Se&&(a.setMask(Y.stencilWriteMask),a.setFunc(Y.stencilFunc,Y.stencilRef,Y.stencilFuncMask),a.setOp(Y.stencilFail,Y.stencilZFail,Y.stencilZPass)),Vt(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits),Y.alphaToCoverage===!0?se(n.SAMPLE_ALPHA_TO_COVERAGE):He(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ge(Y){R!==Y&&(Y?n.frontFace(n.CW):n.frontFace(n.CCW),R=Y)}function At(Y){Y!==DU?(se(n.CULL_FACE),Y!==j&&(Y===vI?n.cullFace(n.BACK):Y===AU?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):He(n.CULL_FACE),j=Y}function Xe(Y){Y!==pe&&(X&&n.lineWidth(Y),pe=Y)}function Vt(Y,Ze,me){Y?(se(n.POLYGON_OFFSET_FILL),(ae!==Ze||Ie!==me)&&(n.polygonOffset(Ze,me),ae=Ze,Ie=me)):He(n.POLYGON_OFFSET_FILL)}function ht(Y){Y?se(n.SCISSOR_TEST):He(n.SCISSOR_TEST)}function N(Y){Y===void 0&&(Y=n.TEXTURE0+be-1),ve!==Y&&(n.activeTexture(Y),ve=Y)}function M(Y,Ze,me){me===void 0&&(ve===null?me=n.TEXTURE0+be-1:me=ve);let Se=Ve[me];Se===void 0&&(Se={type:void 0,texture:void 0},Ve[me]=Se),(Se.type!==Y||Se.texture!==Ze)&&(ve!==me&&(n.activeTexture(me),ve=me),n.bindTexture(Y,Ze||_e[Y]),Se.type=Y,Se.texture=Ze)}function oe(){let Y=Ve[ve];Y!==void 0&&Y.type!==void 0&&(n.bindTexture(Y.type,null),Y.type=void 0,Y.texture=void 0)}function we(){try{n.compressedTexImage2D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function De(){try{n.compressedTexImage3D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function he(){try{n.texSubImage2D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function $e(){try{n.texSubImage3D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function qe(){try{n.compressedTexSubImage2D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function yt(){try{n.compressedTexSubImage3D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function _t(){try{n.texStorage2D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Fe(){try{n.texStorage3D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function nt(){try{n.texImage2D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function xt(){try{n.texImage3D(...arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Mt(Y){re.equals(Y)===!1&&(n.scissor(Y.x,Y.y,Y.z,Y.w),re.copy(Y))}function it(Y){U.equals(Y)===!1&&(n.viewport(Y.x,Y.y,Y.z,Y.w),U.copy(Y))}function sn(Y,Ze){let me=u.get(Ze);me===void 0&&(me=new WeakMap,u.set(Ze,me));let Se=me.get(Y);Se===void 0&&(Se=n.getUniformBlockIndex(Ze,Y.name),me.set(Y,Se))}function Ht(Y,Ze){let Se=u.get(Ze).get(Y);l.get(Ze)!==Se&&(n.uniformBlockBinding(Ze,Se,Y.__bindingPointIndex),l.set(Ze,Se))}function Ln(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},ve=null,Ve={},h={},p=new WeakMap,g=[],v=null,w=!1,y=null,_=null,T=null,C=null,E=null,V=null,F=null,L=new ft(0,0,0),W=0,O=!1,R=null,j=null,pe=null,ae=null,Ie=null,re.set(0,0,n.canvas.width,n.canvas.height),U.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:se,disable:He,bindFramebuffer:je,drawBuffers:Le,useProgram:rt,setBlending:z,setMaterial:qt,setFlipSided:Ge,setCullFace:At,setLineWidth:Xe,setPolygonOffset:Vt,setScissorTest:ht,activeTexture:N,bindTexture:M,unbindTexture:oe,compressedTexImage2D:we,compressedTexImage3D:De,texImage2D:nt,texImage3D:xt,updateUBOMapping:sn,uniformBlockBinding:Ht,texStorage2D:_t,texStorage3D:Fe,texSubImage2D:he,texSubImage3D:$e,compressedTexSubImage2D:qe,compressedTexSubImage3D:yt,scissor:Mt,viewport:it,reset:Ln}}function Kae(n,e,t,i,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new We,f=new WeakMap,h,p=new WeakMap,g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(N,M){return g?new OffscreenCanvas(N,M):lh("canvas")}function w(N,M,oe){let we=1,De=ht(N);if((De.width>oe||De.height>oe)&&(we=oe/Math.max(De.width,De.height)),we<1)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){let he=Math.floor(we*De.width),$e=Math.floor(we*De.height);h===void 0&&(h=v(he,$e));let qe=M?v(he,$e):h;return qe.width=he,qe.height=$e,qe.getContext("2d").drawImage(N,0,0,he,$e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+he+"x"+$e+")."),qe}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),N;return N}function y(N){return N.generateMipmaps}function _(N){n.generateMipmap(N)}function T(N){return N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:N.isWebGL3DRenderTarget?n.TEXTURE_3D:N.isWebGLArrayRenderTarget||N.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function C(N,M,oe,we,De=!1){if(N!==null){if(n[N]!==void 0)return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let he=M;if(M===n.RED&&(oe===n.FLOAT&&(he=n.R32F),oe===n.HALF_FLOAT&&(he=n.R16F),oe===n.UNSIGNED_BYTE&&(he=n.R8)),M===n.RED_INTEGER&&(oe===n.UNSIGNED_BYTE&&(he=n.R8UI),oe===n.UNSIGNED_SHORT&&(he=n.R16UI),oe===n.UNSIGNED_INT&&(he=n.R32UI),oe===n.BYTE&&(he=n.R8I),oe===n.SHORT&&(he=n.R16I),oe===n.INT&&(he=n.R32I)),M===n.RG&&(oe===n.FLOAT&&(he=n.RG32F),oe===n.HALF_FLOAT&&(he=n.RG16F),oe===n.UNSIGNED_BYTE&&(he=n.RG8)),M===n.RG_INTEGER&&(oe===n.UNSIGNED_BYTE&&(he=n.RG8UI),oe===n.UNSIGNED_SHORT&&(he=n.RG16UI),oe===n.UNSIGNED_INT&&(he=n.RG32UI),oe===n.BYTE&&(he=n.RG8I),oe===n.SHORT&&(he=n.RG16I),oe===n.INT&&(he=n.RG32I)),M===n.RGB_INTEGER&&(oe===n.UNSIGNED_BYTE&&(he=n.RGB8UI),oe===n.UNSIGNED_SHORT&&(he=n.RGB16UI),oe===n.UNSIGNED_INT&&(he=n.RGB32UI),oe===n.BYTE&&(he=n.RGB8I),oe===n.SHORT&&(he=n.RGB16I),oe===n.INT&&(he=n.RGB32I)),M===n.RGBA_INTEGER&&(oe===n.UNSIGNED_BYTE&&(he=n.RGBA8UI),oe===n.UNSIGNED_SHORT&&(he=n.RGBA16UI),oe===n.UNSIGNED_INT&&(he=n.RGBA32UI),oe===n.BYTE&&(he=n.RGBA8I),oe===n.SHORT&&(he=n.RGBA16I),oe===n.INT&&(he=n.RGBA32I)),M===n.RGB&&oe===n.UNSIGNED_INT_5_9_9_9_REV&&(he=n.RGB9_E5),M===n.RGBA){let $e=De?qm:Bt.getTransfer(we);oe===n.FLOAT&&(he=n.RGBA32F),oe===n.HALF_FLOAT&&(he=n.RGBA16F),oe===n.UNSIGNED_BYTE&&(he=$e===Gn?n.SRGB8_ALPHA8:n.RGBA8),oe===n.UNSIGNED_SHORT_4_4_4_4&&(he=n.RGBA4),oe===n.UNSIGNED_SHORT_5_5_5_1&&(he=n.RGB5_A1)}return(he===n.R16F||he===n.R32F||he===n.RG16F||he===n.RG32F||he===n.RGBA16F||he===n.RGBA32F)&&e.get("EXT_color_buffer_float"),he}function E(N,M){let oe;return N?M===null||M===Hc||M===Eh?oe=n.DEPTH24_STENCIL8:M===Ms?oe=n.DEPTH32F_STENCIL8:M===bh&&(oe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):M===null||M===Hc||M===Eh?oe=n.DEPTH_COMPONENT24:M===Ms?oe=n.DEPTH_COMPONENT32F:M===bh&&(oe=n.DEPTH_COMPONENT16),oe}function V(N,M){return y(N)===!0||N.isFramebufferTexture&&N.minFilter!==vr&&N.minFilter!==Vr?Math.log2(Math.max(M.width,M.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?M.mipmaps.length:1}function F(N){let M=N.target;M.removeEventListener("dispose",F),W(M),M.isVideoTexture&&f.delete(M)}function L(N){let M=N.target;M.removeEventListener("dispose",L),R(M)}function W(N){let M=i.get(N);if(M.__webglInit===void 0)return;let oe=N.source,we=p.get(oe);if(we){let De=we[M.__cacheKey];De.usedTimes--,De.usedTimes===0&&O(N),Object.keys(we).length===0&&p.delete(oe)}i.remove(N)}function O(N){let M=i.get(N);n.deleteTexture(M.__webglTexture);let oe=N.source,we=p.get(oe);delete we[M.__cacheKey],s.memory.textures--}function R(N){let M=i.get(N);if(N.depthTexture&&(N.depthTexture.dispose(),i.remove(N.depthTexture)),N.isWebGLCubeRenderTarget)for(let we=0;we<6;we++){if(Array.isArray(M.__webglFramebuffer[we]))for(let De=0;De<M.__webglFramebuffer[we].length;De++)n.deleteFramebuffer(M.__webglFramebuffer[we][De]);else n.deleteFramebuffer(M.__webglFramebuffer[we]);M.__webglDepthbuffer&&n.deleteRenderbuffer(M.__webglDepthbuffer[we])}else{if(Array.isArray(M.__webglFramebuffer))for(let we=0;we<M.__webglFramebuffer.length;we++)n.deleteFramebuffer(M.__webglFramebuffer[we]);else n.deleteFramebuffer(M.__webglFramebuffer);if(M.__webglDepthbuffer&&n.deleteRenderbuffer(M.__webglDepthbuffer),M.__webglMultisampledFramebuffer&&n.deleteFramebuffer(M.__webglMultisampledFramebuffer),M.__webglColorRenderbuffer)for(let we=0;we<M.__webglColorRenderbuffer.length;we++)M.__webglColorRenderbuffer[we]&&n.deleteRenderbuffer(M.__webglColorRenderbuffer[we]);M.__webglDepthRenderbuffer&&n.deleteRenderbuffer(M.__webglDepthRenderbuffer)}let oe=N.textures;for(let we=0,De=oe.length;we<De;we++){let he=i.get(oe[we]);he.__webglTexture&&(n.deleteTexture(he.__webglTexture),s.memory.textures--),i.remove(oe[we])}i.remove(N)}let j=0;function pe(){j=0}function ae(){let N=j;return N>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+r.maxTextures),j+=1,N}function Ie(N){let M=[];return M.push(N.wrapS),M.push(N.wrapT),M.push(N.wrapR||0),M.push(N.magFilter),M.push(N.minFilter),M.push(N.anisotropy),M.push(N.internalFormat),M.push(N.format),M.push(N.type),M.push(N.generateMipmaps),M.push(N.premultiplyAlpha),M.push(N.flipY),M.push(N.unpackAlignment),M.push(N.colorSpace),M.join()}function be(N,M){let oe=i.get(N);if(N.isVideoTexture&&Xe(N),N.isRenderTargetTexture===!1&&N.version>0&&oe.__version!==N.version){let we=N.image;if(we===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(we.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{U(oe,N,M);return}}t.bindTexture(n.TEXTURE_2D,oe.__webglTexture,n.TEXTURE0+M)}function X(N,M){let oe=i.get(N);if(N.version>0&&oe.__version!==N.version){U(oe,N,M);return}t.bindTexture(n.TEXTURE_2D_ARRAY,oe.__webglTexture,n.TEXTURE0+M)}function ie(N,M){let oe=i.get(N);if(N.version>0&&oe.__version!==N.version){U(oe,N,M);return}t.bindTexture(n.TEXTURE_3D,oe.__webglTexture,n.TEXTURE0+M)}function q(N,M){let oe=i.get(N);if(N.version>0&&oe.__version!==N.version){J(oe,N,M);return}t.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture,n.TEXTURE0+M)}let ve={[ca]:n.REPEAT,[Vo]:n.CLAMP_TO_EDGE,[sh]:n.MIRRORED_REPEAT},Ve={[vr]:n.NEAREST,[tw]:n.NEAREST_MIPMAP_NEAREST,[ld]:n.NEAREST_MIPMAP_LINEAR,[Vr]:n.LINEAR,[wh]:n.LINEAR_MIPMAP_NEAREST,[ha]:n.LINEAR_MIPMAP_LINEAR},tt={[uB]:n.NEVER,[gB]:n.ALWAYS,[dB]:n.LESS,[AI]:n.LEQUAL,[fB]:n.EQUAL,[mB]:n.GEQUAL,[hB]:n.GREATER,[pB]:n.NOTEQUAL};function ge(N,M){if(M.type===Ms&&e.has("OES_texture_float_linear")===!1&&(M.magFilter===Vr||M.magFilter===wh||M.magFilter===ld||M.magFilter===ha||M.minFilter===Vr||M.minFilter===wh||M.minFilter===ld||M.minFilter===ha)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(N,n.TEXTURE_WRAP_S,ve[M.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,ve[M.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,ve[M.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,Ve[M.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,Ve[M.minFilter]),M.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,tt[M.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(M.magFilter===vr||M.minFilter!==ld&&M.minFilter!==ha||M.type===Ms&&e.has("OES_texture_float_linear")===!1)return;if(M.anisotropy>1||i.get(M).__currentAnisotropy){let oe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(N,oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(M.anisotropy,r.getMaxAnisotropy())),i.get(M).__currentAnisotropy=M.anisotropy}}}function re(N,M){let oe=!1;N.__webglInit===void 0&&(N.__webglInit=!0,M.addEventListener("dispose",F));let we=M.source,De=p.get(we);De===void 0&&(De={},p.set(we,De));let he=Ie(M);if(he!==N.__cacheKey){De[he]===void 0&&(De[he]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,oe=!0),De[he].usedTimes++;let $e=De[N.__cacheKey];$e!==void 0&&(De[N.__cacheKey].usedTimes--,$e.usedTimes===0&&O(M)),N.__cacheKey=he,N.__webglTexture=De[he].texture}return oe}function U(N,M,oe){let we=n.TEXTURE_2D;(M.isDataArrayTexture||M.isCompressedArrayTexture)&&(we=n.TEXTURE_2D_ARRAY),M.isData3DTexture&&(we=n.TEXTURE_3D);let De=re(N,M),he=M.source;t.bindTexture(we,N.__webglTexture,n.TEXTURE0+oe);let $e=i.get(he);if(he.version!==$e.__version||De===!0){t.activeTexture(n.TEXTURE0+oe);let qe=Bt.getPrimaries(Bt.workingColorSpace),yt=M.colorSpace===Gl?null:Bt.getPrimaries(M.colorSpace),_t=M.colorSpace===Gl||qe===yt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,M.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,M.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,_t);let Fe=w(M.image,!1,r.maxTextureSize);Fe=Vt(M,Fe);let nt=o.convert(M.format,M.colorSpace),xt=o.convert(M.type),Mt=C(M.internalFormat,nt,xt,M.colorSpace,M.isVideoTexture);ge(we,M);let it,sn=M.mipmaps,Ht=M.isVideoTexture!==!0,Ln=$e.__version===void 0||De===!0,Y=he.dataReady,Ze=V(M,Fe);if(M.isDepthTexture)Mt=E(M.format===Mh,M.type),Ln&&(Ht?t.texStorage2D(n.TEXTURE_2D,1,Mt,Fe.width,Fe.height):t.texImage2D(n.TEXTURE_2D,0,Mt,Fe.width,Fe.height,0,nt,xt,null));else if(M.isDataTexture)if(sn.length>0){Ht&&Ln&&t.texStorage2D(n.TEXTURE_2D,Ze,Mt,sn[0].width,sn[0].height);for(let me=0,Se=sn.length;me<Se;me++)it=sn[me],Ht?Y&&t.texSubImage2D(n.TEXTURE_2D,me,0,0,it.width,it.height,nt,xt,it.data):t.texImage2D(n.TEXTURE_2D,me,Mt,it.width,it.height,0,nt,xt,it.data);M.generateMipmaps=!1}else Ht?(Ln&&t.texStorage2D(n.TEXTURE_2D,Ze,Mt,Fe.width,Fe.height),Y&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe.width,Fe.height,nt,xt,Fe.data)):t.texImage2D(n.TEXTURE_2D,0,Mt,Fe.width,Fe.height,0,nt,xt,Fe.data);else if(M.isCompressedTexture)if(M.isCompressedArrayTexture){Ht&&Ln&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,Mt,sn[0].width,sn[0].height,Fe.depth);for(let me=0,Se=sn.length;me<Se;me++)if(it=sn[me],M.format!==jo)if(nt!==null)if(Ht){if(Y)if(M.layerUpdates.size>0){let et=UI(it.width,it.height,M.format,M.type);for(let Ye of M.layerUpdates){let Nt=it.data.subarray(Ye*et/it.data.BYTES_PER_ELEMENT,(Ye+1)*et/it.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,me,0,0,Ye,it.width,it.height,1,nt,Nt)}M.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,me,0,0,0,it.width,it.height,Fe.depth,nt,it.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,me,Mt,it.width,it.height,Fe.depth,0,it.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ht?Y&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,me,0,0,0,it.width,it.height,Fe.depth,nt,xt,it.data):t.texImage3D(n.TEXTURE_2D_ARRAY,me,Mt,it.width,it.height,Fe.depth,0,nt,xt,it.data)}else{Ht&&Ln&&t.texStorage2D(n.TEXTURE_2D,Ze,Mt,sn[0].width,sn[0].height);for(let me=0,Se=sn.length;me<Se;me++)it=sn[me],M.format!==jo?nt!==null?Ht?Y&&t.compressedTexSubImage2D(n.TEXTURE_2D,me,0,0,it.width,it.height,nt,it.data):t.compressedTexImage2D(n.TEXTURE_2D,me,Mt,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ht?Y&&t.texSubImage2D(n.TEXTURE_2D,me,0,0,it.width,it.height,nt,xt,it.data):t.texImage2D(n.TEXTURE_2D,me,Mt,it.width,it.height,0,nt,xt,it.data)}else if(M.isDataArrayTexture)if(Ht){if(Ln&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,Mt,Fe.width,Fe.height,Fe.depth),Y)if(M.layerUpdates.size>0){let me=UI(Fe.width,Fe.height,M.format,M.type);for(let Se of M.layerUpdates){let et=Fe.data.subarray(Se*me/Fe.data.BYTES_PER_ELEMENT,(Se+1)*me/Fe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Se,Fe.width,Fe.height,1,nt,xt,et)}M.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,nt,xt,Fe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Mt,Fe.width,Fe.height,Fe.depth,0,nt,xt,Fe.data);else if(M.isData3DTexture)Ht?(Ln&&t.texStorage3D(n.TEXTURE_3D,Ze,Mt,Fe.width,Fe.height,Fe.depth),Y&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,nt,xt,Fe.data)):t.texImage3D(n.TEXTURE_3D,0,Mt,Fe.width,Fe.height,Fe.depth,0,nt,xt,Fe.data);else if(M.isFramebufferTexture){if(Ln)if(Ht)t.texStorage2D(n.TEXTURE_2D,Ze,Mt,Fe.width,Fe.height);else{let me=Fe.width,Se=Fe.height;for(let et=0;et<Ze;et++)t.texImage2D(n.TEXTURE_2D,et,Mt,me,Se,0,nt,xt,null),me>>=1,Se>>=1}}else if(sn.length>0){if(Ht&&Ln){let me=ht(sn[0]);t.texStorage2D(n.TEXTURE_2D,Ze,Mt,me.width,me.height)}for(let me=0,Se=sn.length;me<Se;me++)it=sn[me],Ht?Y&&t.texSubImage2D(n.TEXTURE_2D,me,0,0,nt,xt,it):t.texImage2D(n.TEXTURE_2D,me,Mt,nt,xt,it);M.generateMipmaps=!1}else if(Ht){if(Ln){let me=ht(Fe);t.texStorage2D(n.TEXTURE_2D,Ze,Mt,me.width,me.height)}Y&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,nt,xt,Fe)}else t.texImage2D(n.TEXTURE_2D,0,Mt,nt,xt,Fe);y(M)&&_(we),$e.__version=he.version,M.onUpdate&&M.onUpdate(M)}N.__version=M.version}function J(N,M,oe){if(M.image.length!==6)return;let we=re(N,M),De=M.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+oe);let he=i.get(De);if(De.version!==he.__version||we===!0){t.activeTexture(n.TEXTURE0+oe);let $e=Bt.getPrimaries(Bt.workingColorSpace),qe=M.colorSpace===Gl?null:Bt.getPrimaries(M.colorSpace),yt=M.colorSpace===Gl||$e===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,M.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,M.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);let _t=M.isCompressedTexture||M.image[0].isCompressedTexture,Fe=M.image[0]&&M.image[0].isDataTexture,nt=[];for(let Se=0;Se<6;Se++)!_t&&!Fe?nt[Se]=w(M.image[Se],!0,r.maxCubemapSize):nt[Se]=Fe?M.image[Se].image:M.image[Se],nt[Se]=Vt(M,nt[Se]);let xt=nt[0],Mt=o.convert(M.format,M.colorSpace),it=o.convert(M.type),sn=C(M.internalFormat,Mt,it,M.colorSpace),Ht=M.isVideoTexture!==!0,Ln=he.__version===void 0||we===!0,Y=De.dataReady,Ze=V(M,xt);ge(n.TEXTURE_CUBE_MAP,M);let me;if(_t){Ht&&Ln&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,sn,xt.width,xt.height);for(let Se=0;Se<6;Se++){me=nt[Se].mipmaps;for(let et=0;et<me.length;et++){let Ye=me[et];M.format!==jo?Mt!==null?Ht?Y&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et,0,0,Ye.width,Ye.height,Mt,Ye.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et,sn,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ht?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et,0,0,Ye.width,Ye.height,Mt,it,Ye.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et,sn,Ye.width,Ye.height,0,Mt,it,Ye.data)}}}else{if(me=M.mipmaps,Ht&&Ln){me.length>0&&Ze++;let Se=ht(nt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,sn,Se.width,Se.height)}for(let Se=0;Se<6;Se++)if(Fe){Ht?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,nt[Se].width,nt[Se].height,Mt,it,nt[Se].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,sn,nt[Se].width,nt[Se].height,0,Mt,it,nt[Se].data);for(let et=0;et<me.length;et++){let Nt=me[et].image[Se].image;Ht?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et+1,0,0,Nt.width,Nt.height,Mt,it,Nt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et+1,sn,Nt.width,Nt.height,0,Mt,it,Nt.data)}}else{Ht?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,Mt,it,nt[Se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,sn,Mt,it,nt[Se]);for(let et=0;et<me.length;et++){let Ye=me[et];Ht?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et+1,0,0,Mt,it,Ye.image[Se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et+1,sn,Mt,it,Ye.image[Se])}}}y(M)&&_(n.TEXTURE_CUBE_MAP),he.__version=De.version,M.onUpdate&&M.onUpdate(M)}N.__version=M.version}function _e(N,M,oe,we,De,he){let $e=o.convert(oe.format,oe.colorSpace),qe=o.convert(oe.type),yt=C(oe.internalFormat,$e,qe,oe.colorSpace),_t=i.get(M),Fe=i.get(oe);if(Fe.__renderTarget=M,!_t.__hasExternalTextures){let nt=Math.max(1,M.width>>he),xt=Math.max(1,M.height>>he);De===n.TEXTURE_3D||De===n.TEXTURE_2D_ARRAY?t.texImage3D(De,he,yt,nt,xt,M.depth,0,$e,qe,null):t.texImage2D(De,he,yt,nt,xt,0,$e,qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,N),At(M)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,we,De,Fe.__webglTexture,0,Ge(M)):(De===n.TEXTURE_2D||De>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,we,De,Fe.__webglTexture,he),t.bindFramebuffer(n.FRAMEBUFFER,null)}function se(N,M,oe){if(n.bindRenderbuffer(n.RENDERBUFFER,N),M.depthBuffer){let we=M.depthTexture,De=we&&we.isDepthTexture?we.type:null,he=E(M.stencilBuffer,De),$e=M.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=Ge(M);At(M)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,he,M.width,M.height):oe?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,he,M.width,M.height):n.renderbufferStorage(n.RENDERBUFFER,he,M.width,M.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,$e,n.RENDERBUFFER,N)}else{let we=M.textures;for(let De=0;De<we.length;De++){let he=we[De],$e=o.convert(he.format,he.colorSpace),qe=o.convert(he.type),yt=C(he.internalFormat,$e,qe,he.colorSpace),_t=Ge(M);oe&&At(M)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_t,yt,M.width,M.height):At(M)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_t,yt,M.width,M.height):n.renderbufferStorage(n.RENDERBUFFER,yt,M.width,M.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function He(N,M){if(M&&M.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!(M.depthTexture&&M.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let we=i.get(M.depthTexture);we.__renderTarget=M,(!we.__webglTexture||M.depthTexture.image.width!==M.width||M.depthTexture.image.height!==M.height)&&(M.depthTexture.image.width=M.width,M.depthTexture.image.height=M.height,M.depthTexture.needsUpdate=!0),be(M.depthTexture,0);let De=we.__webglTexture,he=Ge(M);if(M.depthTexture.format===ah)At(M)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,De,0,he):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,De,0);else if(M.depthTexture.format===Mh)At(M)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,De,0,he):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,De,0);else throw new Error("Unknown depthTexture format")}function je(N){let M=i.get(N),oe=N.isWebGLCubeRenderTarget===!0;if(M.__boundDepthTexture!==N.depthTexture){let we=N.depthTexture;if(M.__depthDisposeCallback&&M.__depthDisposeCallback(),we){let De=()=>{delete M.__boundDepthTexture,delete M.__depthDisposeCallback,we.removeEventListener("dispose",De)};we.addEventListener("dispose",De),M.__depthDisposeCallback=De}M.__boundDepthTexture=we}if(N.depthTexture&&!M.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");let we=N.texture.mipmaps;we&&we.length>0?He(M.__webglFramebuffer[0],N):He(M.__webglFramebuffer,N)}else if(oe){M.__webglDepthbuffer=[];for(let we=0;we<6;we++)if(t.bindFramebuffer(n.FRAMEBUFFER,M.__webglFramebuffer[we]),M.__webglDepthbuffer[we]===void 0)M.__webglDepthbuffer[we]=n.createRenderbuffer(),se(M.__webglDepthbuffer[we],N,!1);else{let De=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,he=M.__webglDepthbuffer[we];n.bindRenderbuffer(n.RENDERBUFFER,he),n.framebufferRenderbuffer(n.FRAMEBUFFER,De,n.RENDERBUFFER,he)}}else{let we=N.texture.mipmaps;if(we&&we.length>0?t.bindFramebuffer(n.FRAMEBUFFER,M.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,M.__webglFramebuffer),M.__webglDepthbuffer===void 0)M.__webglDepthbuffer=n.createRenderbuffer(),se(M.__webglDepthbuffer,N,!1);else{let De=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,he=M.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,he),n.framebufferRenderbuffer(n.FRAMEBUFFER,De,n.RENDERBUFFER,he)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Le(N,M,oe){let we=i.get(N);M!==void 0&&_e(we.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),oe!==void 0&&je(N)}function rt(N){let M=N.texture,oe=i.get(N),we=i.get(M);N.addEventListener("dispose",L);let De=N.textures,he=N.isWebGLCubeRenderTarget===!0,$e=De.length>1;if($e||(we.__webglTexture===void 0&&(we.__webglTexture=n.createTexture()),we.__version=M.version,s.memory.textures++),he){oe.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)if(M.mipmaps&&M.mipmaps.length>0){oe.__webglFramebuffer[qe]=[];for(let yt=0;yt<M.mipmaps.length;yt++)oe.__webglFramebuffer[qe][yt]=n.createFramebuffer()}else oe.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(M.mipmaps&&M.mipmaps.length>0){oe.__webglFramebuffer=[];for(let qe=0;qe<M.mipmaps.length;qe++)oe.__webglFramebuffer[qe]=n.createFramebuffer()}else oe.__webglFramebuffer=n.createFramebuffer();if($e)for(let qe=0,yt=De.length;qe<yt;qe++){let _t=i.get(De[qe]);_t.__webglTexture===void 0&&(_t.__webglTexture=n.createTexture(),s.memory.textures++)}if(N.samples>0&&At(N)===!1){oe.__webglMultisampledFramebuffer=n.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let qe=0;qe<De.length;qe++){let yt=De[qe];oe.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,oe.__webglColorRenderbuffer[qe]);let _t=o.convert(yt.format,yt.colorSpace),Fe=o.convert(yt.type),nt=C(yt.internalFormat,_t,Fe,yt.colorSpace,N.isXRRenderTarget===!0),xt=Ge(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,nt,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,oe.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(oe.__webglDepthRenderbuffer=n.createRenderbuffer(),se(oe.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(he){t.bindTexture(n.TEXTURE_CUBE_MAP,we.__webglTexture),ge(n.TEXTURE_CUBE_MAP,M);for(let qe=0;qe<6;qe++)if(M.mipmaps&&M.mipmaps.length>0)for(let yt=0;yt<M.mipmaps.length;yt++)_e(oe.__webglFramebuffer[qe][yt],N,M,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,yt);else _e(oe.__webglFramebuffer[qe],N,M,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);y(M)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if($e){for(let qe=0,yt=De.length;qe<yt;qe++){let _t=De[qe],Fe=i.get(_t);t.bindTexture(n.TEXTURE_2D,Fe.__webglTexture),ge(n.TEXTURE_2D,_t),_e(oe.__webglFramebuffer,N,_t,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),y(_t)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(qe=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,we.__webglTexture),ge(qe,M),M.mipmaps&&M.mipmaps.length>0)for(let yt=0;yt<M.mipmaps.length;yt++)_e(oe.__webglFramebuffer[yt],N,M,n.COLOR_ATTACHMENT0,qe,yt);else _e(oe.__webglFramebuffer,N,M,n.COLOR_ATTACHMENT0,qe,0);y(M)&&_(qe),t.unbindTexture()}N.depthBuffer&&je(N)}function pt(N){let M=N.textures;for(let oe=0,we=M.length;oe<we;oe++){let De=M[oe];if(y(De)){let he=T(N),$e=i.get(De).__webglTexture;t.bindTexture(he,$e),_(he),t.unbindTexture()}}}let ct=[],z=[];function qt(N){if(N.samples>0){if(At(N)===!1){let M=N.textures,oe=N.width,we=N.height,De=n.COLOR_BUFFER_BIT,he=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,$e=i.get(N),qe=M.length>1;if(qe)for(let _t=0;_t<M.length;_t++)t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+_t,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+_t,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,$e.__webglMultisampledFramebuffer);let yt=N.texture.mipmaps;yt&&yt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglFramebuffer);for(let _t=0;_t<M.length;_t++){if(N.resolveDepthBuffer&&(N.depthBuffer&&(De|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&N.resolveStencilBuffer&&(De|=n.STENCIL_BUFFER_BIT)),qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,$e.__webglColorRenderbuffer[_t]);let Fe=i.get(M[_t]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Fe,0)}n.blitFramebuffer(0,0,oe,we,0,0,oe,we,De,n.NEAREST),l===!0&&(ct.length=0,z.length=0,ct.push(n.COLOR_ATTACHMENT0+_t),N.depthBuffer&&N.resolveDepthBuffer===!1&&(ct.push(he),z.push(he),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,z)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ct))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let _t=0;_t<M.length;_t++){t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+_t,n.RENDERBUFFER,$e.__webglColorRenderbuffer[_t]);let Fe=i.get(M[_t]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+_t,n.TEXTURE_2D,Fe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglMultisampledFramebuffer)}else if(N.depthBuffer&&N.resolveDepthBuffer===!1&&l){let M=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[M])}}}function Ge(N){return Math.min(r.maxSamples,N.samples)}function At(N){let M=i.get(N);return N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&M.__useRenderToTexture!==!1}function Xe(N){let M=s.render.frame;f.get(N)!==M&&(f.set(N,M),N.update())}function Vt(N,M){let oe=N.colorSpace,we=N.format,De=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||oe!==yr&&oe!==Gl&&(Bt.getTransfer(oe)===Gn?(we!==jo||De!==pa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),M}function ht(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(u.width=N.naturalWidth||N.width,u.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(u.width=N.displayWidth,u.height=N.displayHeight):(u.width=N.width,u.height=N.height),u}this.allocateTextureUnit=ae,this.resetTextureUnits=pe,this.setTexture2D=be,this.setTexture2DArray=X,this.setTexture3D=ie,this.setTextureCube=q,this.rebindTextures=Le,this.setupRenderTarget=rt,this.updateRenderTargetMipmap=pt,this.updateMultisampleRenderTarget=qt,this.setupDepthRenderbuffer=je,this.setupFrameBufferTexture=_e,this.useMultisampledRTT=At}function Jae(n,e){function t(i,r=Gl){let o,s=Bt.getTransfer(r);if(i===pa)return n.UNSIGNED_BYTE;if(i===iw)return n.UNSIGNED_SHORT_4_4_4_4;if(i===rw)return n.UNSIGNED_SHORT_5_5_5_1;if(i===EI)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===bI)return n.BYTE;if(i===CI)return n.SHORT;if(i===bh)return n.UNSIGNED_SHORT;if(i===nw)return n.INT;if(i===Hc)return n.UNSIGNED_INT;if(i===Ms)return n.FLOAT;if(i===Ch)return n.HALF_FLOAT;if(i===MI)return n.ALPHA;if(i===SI)return n.RGB;if(i===jo)return n.RGBA;if(i===ah)return n.DEPTH_COMPONENT;if(i===Mh)return n.DEPTH_STENCIL;if(i===ow)return n.RED;if(i===sw)return n.RED_INTEGER;if(i===TI)return n.RG;if(i===aw)return n.RG_INTEGER;if(i===lw)return n.RGBA_INTEGER;if(i===Eg||i===Mg||i===Sg||i===Tg)if(s===Gn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===Eg)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Mg)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Sg)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Tg)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===Eg)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Mg)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Sg)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Tg)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===cw||i===uw||i===dw||i===fw)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===cw)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===uw)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===dw)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===fw)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===hw||i===pw||i===mw)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===hw||i===pw)return s===Gn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===mw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===gw||i===vw||i===yw||i===_w||i===xw||i===ww||i===bw||i===Cw||i===Ew||i===Mw||i===Sw||i===Tw||i===Iw||i===Dw)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===gw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===vw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===yw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===_w)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===xw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===ww)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===bw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Cw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Ew)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Mw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Sw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Tw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Iw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Dw)return s===Gn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Ig||i===Aw||i===Rw)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===Ig)return s===Gn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Aw)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Rw)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===II||i===Pw||i===Ow||i===Nw)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===Ig)return o.COMPRESSED_RED_RGTC1_EXT;if(i===Pw)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Ow)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Nw)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Eh?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var Qae=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ele=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,KI=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){let r=new Gr,o=e.properties.get(r);o.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new ua({vertexShader:Qae,fragmentShader:ele,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new gi(new fg(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},JI=class extends Ha{constructor(e,t){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,u=null,f=null,h=null,p=null,g=null,v=null,w=new KI,y=t.getContextAttributes(),_=null,T=null,C=[],E=[],V=new We,F=null,L=new Ii;L.viewport=new rn;let W=new Ii;W.viewport=new rn;let O=[L,W],R=new Wx,j=null,pe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(U){let J=C[U];return J===void 0&&(J=new fh,C[U]=J),J.getTargetRaySpace()},this.getControllerGrip=function(U){let J=C[U];return J===void 0&&(J=new fh,C[U]=J),J.getGripSpace()},this.getHand=function(U){let J=C[U];return J===void 0&&(J=new fh,C[U]=J),J.getHandSpace()};function ae(U){let J=E.indexOf(U.inputSource);if(J===-1)return;let _e=C[J];_e!==void 0&&(_e.update(U.inputSource,U.frame,u||s),_e.dispatchEvent({type:U.type,data:U.inputSource}))}function Ie(){r.removeEventListener("select",ae),r.removeEventListener("selectstart",ae),r.removeEventListener("selectend",ae),r.removeEventListener("squeeze",ae),r.removeEventListener("squeezestart",ae),r.removeEventListener("squeezeend",ae),r.removeEventListener("end",Ie),r.removeEventListener("inputsourceschange",be);for(let U=0;U<C.length;U++){let J=E[U];J!==null&&(E[U]=null,C[U].disconnect(J))}j=null,pe=null,w.reset(),e.setRenderTarget(_),g=null,p=null,h=null,r=null,T=null,re.stop(),i.isPresenting=!1,e.setPixelRatio(F),e.setSize(V.width,V.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(U){o=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(U){a=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(U){u=U},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=function(U){return dt(this,null,function*(){if(r=U,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",ae),r.addEventListener("selectstart",ae),r.addEventListener("selectend",ae),r.addEventListener("squeeze",ae),r.addEventListener("squeezestart",ae),r.addEventListener("squeezeend",ae),r.addEventListener("end",Ie),r.addEventListener("inputsourceschange",be),y.xrCompatible!==!0&&(yield t.makeXRCompatible()),F=e.getPixelRatio(),e.getSize(V),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let _e=null,se=null,He=null;y.depth&&(He=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,_e=y.stencil?Mh:ah,se=y.stencil?Eh:Hc);let je={colorFormat:t.RGBA8,depthFormat:He,scaleFactor:o};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer(je),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),T=new za(p.textureWidth,p.textureHeight,{format:jo,type:pa,depthTexture:new ig(p.textureWidth,p.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,_e),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{let _e={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};g=new XRWebGLLayer(r,t,_e),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),T=new za(g.framebufferWidth,g.framebufferHeight,{format:jo,type:pa,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=yield r.requestReferenceSpace(a),re.setContext(r),re.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function be(U){for(let J=0;J<U.removed.length;J++){let _e=U.removed[J],se=E.indexOf(_e);se>=0&&(E[se]=null,C[se].disconnect(_e))}for(let J=0;J<U.added.length;J++){let _e=U.added[J],se=E.indexOf(_e);if(se===-1){for(let je=0;je<C.length;je++)if(je>=E.length){E.push(_e),se=je;break}else if(E[je]===null){E[je]=_e,se=je;break}if(se===-1)break}let He=C[se];He&&He.connect(_e)}}let X=new B,ie=new B;function q(U,J,_e){X.setFromMatrixPosition(J.matrixWorld),ie.setFromMatrixPosition(_e.matrixWorld);let se=X.distanceTo(ie),He=J.projectionMatrix.elements,je=_e.projectionMatrix.elements,Le=He[14]/(He[10]-1),rt=He[14]/(He[10]+1),pt=(He[9]+1)/He[5],ct=(He[9]-1)/He[5],z=(He[8]-1)/He[0],qt=(je[8]+1)/je[0],Ge=Le*z,At=Le*qt,Xe=se/(-z+qt),Vt=Xe*-z;if(J.matrixWorld.decompose(U.position,U.quaternion,U.scale),U.translateX(Vt),U.translateZ(Xe),U.matrixWorld.compose(U.position,U.quaternion,U.scale),U.matrixWorldInverse.copy(U.matrixWorld).invert(),He[10]===-1)U.projectionMatrix.copy(J.projectionMatrix),U.projectionMatrixInverse.copy(J.projectionMatrixInverse);else{let ht=Le+Xe,N=rt+Xe,M=Ge-Vt,oe=At+(se-Vt),we=pt*rt/N*ht,De=ct*rt/N*ht;U.projectionMatrix.makePerspective(M,oe,we,De,ht,N),U.projectionMatrixInverse.copy(U.projectionMatrix).invert()}}function ve(U,J){J===null?U.matrixWorld.copy(U.matrix):U.matrixWorld.multiplyMatrices(J.matrixWorld,U.matrix),U.matrixWorldInverse.copy(U.matrixWorld).invert()}this.updateCamera=function(U){if(r===null)return;let J=U.near,_e=U.far;w.texture!==null&&(w.depthNear>0&&(J=w.depthNear),w.depthFar>0&&(_e=w.depthFar)),R.near=W.near=L.near=J,R.far=W.far=L.far=_e,(j!==R.near||pe!==R.far)&&(r.updateRenderState({depthNear:R.near,depthFar:R.far}),j=R.near,pe=R.far),L.layers.mask=U.layers.mask|2,W.layers.mask=U.layers.mask|4,R.layers.mask=L.layers.mask|W.layers.mask;let se=U.parent,He=R.cameras;ve(R,se);for(let je=0;je<He.length;je++)ve(He[je],se);He.length===2?q(R,L,W):R.projectionMatrix.copy(L.projectionMatrix),Ve(U,R,se)};function Ve(U,J,_e){_e===null?U.matrix.copy(J.matrixWorld):(U.matrix.copy(_e.matrixWorld),U.matrix.invert(),U.matrix.multiply(J.matrixWorld)),U.matrix.decompose(U.position,U.quaternion,U.scale),U.updateMatrixWorld(!0),U.projectionMatrix.copy(J.projectionMatrix),U.projectionMatrixInverse.copy(J.projectionMatrixInverse),U.isPerspectiveCamera&&(U.fov=Yu*2*Math.atan(1/U.projectionMatrix.elements[5]),U.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(U){l=U,p!==null&&(p.fixedFoveation=U),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=U)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(R)};let tt=null;function ge(U,J){if(f=J.getViewerPose(u||s),v=J,f!==null){let _e=f.views;g!==null&&(e.setRenderTargetFramebuffer(T,g.framebuffer),e.setRenderTarget(T));let se=!1;_e.length!==R.cameras.length&&(R.cameras.length=0,se=!0);for(let Le=0;Le<_e.length;Le++){let rt=_e[Le],pt=null;if(g!==null)pt=g.getViewport(rt);else{let z=h.getViewSubImage(p,rt);pt=z.viewport,Le===0&&(e.setRenderTargetTextures(T,z.colorTexture,z.depthStencilTexture),e.setRenderTarget(T))}let ct=O[Le];ct===void 0&&(ct=new Ii,ct.layers.enable(Le),ct.viewport=new rn,O[Le]=ct),ct.matrix.fromArray(rt.transform.matrix),ct.matrix.decompose(ct.position,ct.quaternion,ct.scale),ct.projectionMatrix.fromArray(rt.projectionMatrix),ct.projectionMatrixInverse.copy(ct.projectionMatrix).invert(),ct.viewport.set(pt.x,pt.y,pt.width,pt.height),Le===0&&(R.matrix.copy(ct.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),se===!0&&R.cameras.push(ct)}let He=r.enabledFeatures;if(He&&He.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&h){let Le=h.getDepthInformation(_e[0]);Le&&Le.isValid&&Le.texture&&w.init(e,Le,r.renderState)}}for(let _e=0;_e<C.length;_e++){let se=E[_e],He=C[_e];se!==null&&He!==void 0&&He.update(se,J,u||s)}tt&&tt(U,J),J.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:J}),v=null}let re=new JB;re.setAnimationLoop(ge),this.setAnimationLoop=function(U){tt=U},this.dispose=function(){}}},dd=new lr,tle=new lt;function nle(n,e){function t(y,_){y.matrixAutoUpdate===!0&&y.updateMatrix(),_.value.copy(y.matrix)}function i(y,_){_.color.getRGB(y.fogColor.value,NI(n)),_.isFog?(y.fogNear.value=_.near,y.fogFar.value=_.far):_.isFogExp2&&(y.fogDensity.value=_.density)}function r(y,_,T,C,E){_.isMeshBasicMaterial||_.isMeshLambertMaterial?o(y,_):_.isMeshToonMaterial?(o(y,_),h(y,_)):_.isMeshPhongMaterial?(o(y,_),f(y,_)):_.isMeshStandardMaterial?(o(y,_),p(y,_),_.isMeshPhysicalMaterial&&g(y,_,E)):_.isMeshMatcapMaterial?(o(y,_),v(y,_)):_.isMeshDepthMaterial?o(y,_):_.isMeshDistanceMaterial?(o(y,_),w(y,_)):_.isMeshNormalMaterial?o(y,_):_.isLineBasicMaterial?(s(y,_),_.isLineDashedMaterial&&a(y,_)):_.isPointsMaterial?l(y,_,T,C):_.isSpriteMaterial?u(y,_):_.isShadowMaterial?(y.color.value.copy(_.color),y.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function o(y,_){y.opacity.value=_.opacity,_.color&&y.diffuse.value.copy(_.color),_.emissive&&y.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.bumpMap&&(y.bumpMap.value=_.bumpMap,t(_.bumpMap,y.bumpMapTransform),y.bumpScale.value=_.bumpScale,_.side===jr&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,t(_.normalMap,y.normalMapTransform),y.normalScale.value.copy(_.normalScale),_.side===jr&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,t(_.displacementMap,y.displacementMapTransform),y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,y.emissiveMapTransform)),_.specularMap&&(y.specularMap.value=_.specularMap,t(_.specularMap,y.specularMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);let T=e.get(_),C=T.envMap,E=T.envMapRotation;C&&(y.envMap.value=C,dd.copy(E),dd.x*=-1,dd.y*=-1,dd.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(dd.y*=-1,dd.z*=-1),y.envMapRotation.value.setFromMatrix4(tle.makeRotationFromEuler(dd)),y.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=_.reflectivity,y.ior.value=_.ior,y.refractionRatio.value=_.refractionRatio),_.lightMap&&(y.lightMap.value=_.lightMap,y.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,y.lightMapTransform)),_.aoMap&&(y.aoMap.value=_.aoMap,y.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,y.aoMapTransform))}function s(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform))}function a(y,_){y.dashSize.value=_.dashSize,y.totalSize.value=_.dashSize+_.gapSize,y.scale.value=_.scale}function l(y,_,T,C){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.size.value=_.size*T,y.scale.value=C*.5,_.map&&(y.map.value=_.map,t(_.map,y.uvTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function u(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.rotation.value=_.rotation,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function f(y,_){y.specular.value.copy(_.specular),y.shininess.value=Math.max(_.shininess,1e-4)}function h(y,_){_.gradientMap&&(y.gradientMap.value=_.gradientMap)}function p(y,_){y.metalness.value=_.metalness,_.metalnessMap&&(y.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,y.metalnessMapTransform)),y.roughness.value=_.roughness,_.roughnessMap&&(y.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,y.roughnessMapTransform)),_.envMap&&(y.envMapIntensity.value=_.envMapIntensity)}function g(y,_,T){y.ior.value=_.ior,_.sheen>0&&(y.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),y.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(y.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,y.sheenColorMapTransform)),_.sheenRoughnessMap&&(y.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,y.sheenRoughnessMapTransform))),_.clearcoat>0&&(y.clearcoat.value=_.clearcoat,y.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(y.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,y.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(y.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===jr&&y.clearcoatNormalScale.value.negate())),_.dispersion>0&&(y.dispersion.value=_.dispersion),_.iridescence>0&&(y.iridescence.value=_.iridescence,y.iridescenceIOR.value=_.iridescenceIOR,y.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(y.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,y.iridescenceMapTransform)),_.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),_.transmission>0&&(y.transmission.value=_.transmission,y.transmissionSamplerMap.value=T.texture,y.transmissionSamplerSize.value.set(T.width,T.height),_.transmissionMap&&(y.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,y.transmissionMapTransform)),y.thickness.value=_.thickness,_.thicknessMap&&(y.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=_.attenuationDistance,y.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(y.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(y.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=_.specularIntensity,y.specularColor.value.copy(_.specularColor),_.specularColorMap&&(y.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,y.specularColorMapTransform)),_.specularIntensityMap&&(y.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,_){_.matcap&&(y.matcap.value=_.matcap)}function w(y,_){let T=e.get(_).light;y.referencePosition.value.setFromMatrixPosition(T.matrixWorld),y.nearDistance.value=T.shadow.camera.near,y.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function ile(n,e,t,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(T,C){let E=C.program;i.uniformBlockBinding(T,E)}function u(T,C){let E=r[T.id];E===void 0&&(v(T),E=f(T),r[T.id]=E,T.addEventListener("dispose",y));let V=C.program;i.updateUBOMapping(T,V);let F=e.render.frame;o[T.id]!==F&&(p(T),o[T.id]=F)}function f(T){let C=h();T.__bindingPointIndex=C;let E=n.createBuffer(),V=T.__size,F=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,V,F),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,C,E),E}function h(){for(let T=0;T<a;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(T){let C=r[T.id],E=T.uniforms,V=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,C);for(let F=0,L=E.length;F<L;F++){let W=Array.isArray(E[F])?E[F]:[E[F]];for(let O=0,R=W.length;O<R;O++){let j=W[O];if(g(j,F,O,V)===!0){let pe=j.__offset,ae=Array.isArray(j.value)?j.value:[j.value],Ie=0;for(let be=0;be<ae.length;be++){let X=ae[be],ie=w(X);typeof X=="number"||typeof X=="boolean"?(j.__data[0]=X,n.bufferSubData(n.UNIFORM_BUFFER,pe+Ie,j.__data)):X.isMatrix3?(j.__data[0]=X.elements[0],j.__data[1]=X.elements[1],j.__data[2]=X.elements[2],j.__data[3]=0,j.__data[4]=X.elements[3],j.__data[5]=X.elements[4],j.__data[6]=X.elements[5],j.__data[7]=0,j.__data[8]=X.elements[6],j.__data[9]=X.elements[7],j.__data[10]=X.elements[8],j.__data[11]=0):(X.toArray(j.__data,Ie),Ie+=ie.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,pe,j.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(T,C,E,V){let F=T.value,L=C+"_"+E;if(V[L]===void 0)return typeof F=="number"||typeof F=="boolean"?V[L]=F:V[L]=F.clone(),!0;{let W=V[L];if(typeof F=="number"||typeof F=="boolean"){if(W!==F)return V[L]=F,!0}else if(W.equals(F)===!1)return W.copy(F),!0}return!1}function v(T){let C=T.uniforms,E=0,V=16;for(let L=0,W=C.length;L<W;L++){let O=Array.isArray(C[L])?C[L]:[C[L]];for(let R=0,j=O.length;R<j;R++){let pe=O[R],ae=Array.isArray(pe.value)?pe.value:[pe.value];for(let Ie=0,be=ae.length;Ie<be;Ie++){let X=ae[Ie],ie=w(X),q=E%V,ve=q%ie.boundary,Ve=q+ve;E+=ve,Ve!==0&&V-Ve<ie.storage&&(E+=V-Ve),pe.__data=new Float32Array(ie.storage/Float32Array.BYTES_PER_ELEMENT),pe.__offset=E,E+=ie.storage}}}let F=E%V;return F>0&&(E+=V-F),T.__size=E,T.__cache={},this}function w(T){let C={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(C.boundary=4,C.storage=4):T.isVector2?(C.boundary=8,C.storage=8):T.isVector3||T.isColor?(C.boundary=16,C.storage=12):T.isVector4?(C.boundary=16,C.storage=16):T.isMatrix3?(C.boundary=48,C.storage=48):T.isMatrix4?(C.boundary=64,C.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),C}function y(T){let C=T.target;C.removeEventListener("dispose",y);let E=s.indexOf(C.__bindingPointIndex);s.splice(E,1),n.deleteBuffer(r[C.id]),delete r[C.id],delete o[C.id]}function _(){for(let T in r)n.deleteBuffer(r[T]);s=[],r={},o={}}return{bind:l,update:u,dispose:_}}var Bw=class{constructor(e={}){let{canvas:t=vB(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=s;let v=new Uint32Array(4),w=new Int32Array(4),y=null,_=null,T=[],C=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=jl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let E=this,V=!1;this._outputColorSpace=xn;let F=0,L=0,W=null,O=-1,R=null,j=new rn,pe=new rn,ae=null,Ie=new ft(0),be=0,X=t.width,ie=t.height,q=1,ve=null,Ve=null,tt=new rn(0,0,X,ie),ge=new rn(0,0,X,ie),re=!1,U=new mh,J=!1,_e=!1,se=new lt,He=new lt,je=new B,Le=new rn,rt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},pt=!1;function ct(){return W===null?q:1}let z=i;function qt(A,ee){return t.getContext(A,ee)}try{let A={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${$x}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",et,!1),t.addEventListener("webglcontextcreationerror",Ye,!1),z===null){let ee="webgl2";if(z=qt(ee,A),z===null)throw qt(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(A){throw console.error("THREE.WebGLRenderer: "+A.message),A}let Ge,At,Xe,Vt,ht,N,M,oe,we,De,he,$e,qe,yt,_t,Fe,nt,xt,Mt,it,sn,Ht,Ln,Y;function Ze(){Ge=new wse(z),Ge.init(),Ht=new Jae(z,Ge),At=new pse(z,Ge,e,Ht),Xe=new Zae(z,Ge),At.reverseDepthBuffer&&p&&Xe.buffers.depth.setReversed(!0),Vt=new Ese(z),ht=new kae,N=new Kae(z,Ge,Xe,ht,At,Ht,Vt),M=new gse(E),oe=new xse(E),we=new Aie(z),Ln=new fse(z,we),De=new bse(z,we,Vt,Ln),he=new Sse(z,De,we,Vt),Mt=new Mse(z,At,N),Fe=new mse(ht),$e=new Lae(E,M,oe,Ge,At,Ln,Fe),qe=new nle(E,ht),yt=new Bae,_t=new Wae(Ge),xt=new dse(E,M,oe,Xe,he,g,l),nt=new Xae(E,he,At),Y=new ile(z,Vt,At,Xe),it=new hse(z,Ge,Vt),sn=new Cse(z,Ge,Vt),Vt.programs=$e.programs,E.capabilities=At,E.extensions=Ge,E.properties=ht,E.renderLists=yt,E.shadowMap=nt,E.state=Xe,E.info=Vt}Ze();let me=new JI(E,z);this.xr=me,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){let A=Ge.get("WEBGL_lose_context");A&&A.loseContext()},this.forceContextRestore=function(){let A=Ge.get("WEBGL_lose_context");A&&A.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(A){A!==void 0&&(q=A,this.setSize(X,ie,!1))},this.getSize=function(A){return A.set(X,ie)},this.setSize=function(A,ee,ce=!0){if(me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=A,ie=ee,t.width=Math.floor(A*q),t.height=Math.floor(ee*q),ce===!0&&(t.style.width=A+"px",t.style.height=ee+"px"),this.setViewport(0,0,A,ee)},this.getDrawingBufferSize=function(A){return A.set(X*q,ie*q).floor()},this.setDrawingBufferSize=function(A,ee,ce){X=A,ie=ee,q=ce,t.width=Math.floor(A*ce),t.height=Math.floor(ee*ce),this.setViewport(0,0,A,ee)},this.getCurrentViewport=function(A){return A.copy(j)},this.getViewport=function(A){return A.copy(tt)},this.setViewport=function(A,ee,ce,de){A.isVector4?tt.set(A.x,A.y,A.z,A.w):tt.set(A,ee,ce,de),Xe.viewport(j.copy(tt).multiplyScalar(q).round())},this.getScissor=function(A){return A.copy(ge)},this.setScissor=function(A,ee,ce,de){A.isVector4?ge.set(A.x,A.y,A.z,A.w):ge.set(A,ee,ce,de),Xe.scissor(pe.copy(ge).multiplyScalar(q).round())},this.getScissorTest=function(){return re},this.setScissorTest=function(A){Xe.setScissorTest(re=A)},this.setOpaqueSort=function(A){ve=A},this.setTransparentSort=function(A){Ve=A},this.getClearColor=function(A){return A.copy(xt.getClearColor())},this.setClearColor=function(){xt.setClearColor(...arguments)},this.getClearAlpha=function(){return xt.getClearAlpha()},this.setClearAlpha=function(){xt.setClearAlpha(...arguments)},this.clear=function(A=!0,ee=!0,ce=!0){let de=0;if(A){let ne=!1;if(W!==null){let Be=W.texture.format;ne=Be===lw||Be===aw||Be===sw}if(ne){let Be=W.texture.type,Ke=Be===pa||Be===Hc||Be===bh||Be===Eh||Be===iw||Be===rw,ot=xt.getClearColor(),ut=xt.getClearAlpha(),kt=ot.r,Ft=ot.g,wt=ot.b;Ke?(v[0]=kt,v[1]=Ft,v[2]=wt,v[3]=ut,z.clearBufferuiv(z.COLOR,0,v)):(w[0]=kt,w[1]=Ft,w[2]=wt,w[3]=ut,z.clearBufferiv(z.COLOR,0,w))}else de|=z.COLOR_BUFFER_BIT}ee&&(de|=z.DEPTH_BUFFER_BIT),ce&&(de|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",et,!1),t.removeEventListener("webglcontextcreationerror",Ye,!1),xt.dispose(),yt.dispose(),_t.dispose(),ht.dispose(),M.dispose(),oe.dispose(),he.dispose(),Ln.dispose(),Y.dispose(),$e.dispose(),me.dispose(),me.removeEventListener("sessionstart",Wc),me.removeEventListener("sessionend",ya),Wo.stop()};function Se(A){A.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),V=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),V=!1;let A=Vt.autoReset,ee=nt.enabled,ce=nt.autoUpdate,de=nt.needsUpdate,ne=nt.type;Ze(),Vt.autoReset=A,nt.enabled=ee,nt.autoUpdate=ce,nt.needsUpdate=de,nt.type=ne}function Ye(A){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",A.statusMessage)}function Nt(A){let ee=A.target;ee.removeEventListener("dispose",Nt),Yn(ee)}function Yn(A){Di(A),ht.remove(A)}function Di(A){let ee=ht.get(A).programs;ee!==void 0&&(ee.forEach(function(ce){$e.releaseProgram(ce)}),A.isShaderMaterial&&$e.releaseShaderCache(A))}this.renderBufferDirect=function(A,ee,ce,de,ne,Be){ee===null&&(ee=rt);let Ke=ne.isMesh&&ne.matrixWorld.determinant()<0,ot=sb(A,ee,ce,de,ne);Xe.setMaterial(de,Ke);let ut=ce.index,kt=1;if(de.wireframe===!0){if(ut=De.getWireframeAttribute(ce),ut===void 0)return;kt=2}let Ft=ce.drawRange,wt=ce.attributes.position,pn=Ft.start*kt,Mn=(Ft.start+Ft.count)*kt;Be!==null&&(pn=Math.max(pn,Be.start*kt),Mn=Math.min(Mn,(Be.start+Be.count)*kt)),ut!==null?(pn=Math.max(pn,0),Mn=Math.min(Mn,ut.count)):wt!=null&&(pn=Math.max(pn,0),Mn=Math.min(Mn,wt.count));let vi=Mn-pn;if(vi<0||vi===1/0)return;Ln.setup(ne,de,ot,ce,ut);let ei,bn=it;if(ut!==null&&(ei=we.get(ut),bn=sn,bn.setIndex(ei)),ne.isMesh)de.wireframe===!0?(Xe.setLineWidth(de.wireframeLinewidth*ct()),bn.setMode(z.LINES)):bn.setMode(z.TRIANGLES);else if(ne.isLine){let bt=de.linewidth;bt===void 0&&(bt=1),Xe.setLineWidth(bt*ct()),ne.isLineSegments?bn.setMode(z.LINES):ne.isLineLoop?bn.setMode(z.LINE_LOOP):bn.setMode(z.LINE_STRIP)}else ne.isPoints?bn.setMode(z.POINTS):ne.isSprite&&bn.setMode(z.TRIANGLES);if(ne.isBatchedMesh)if(ne._multiDrawInstances!==null)Rg("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),bn.renderMultiDrawInstances(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount,ne._multiDrawInstances);else if(Ge.get("WEBGL_multi_draw"))bn.renderMultiDraw(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount);else{let bt=ne._multiDrawStarts,Ei=ne._multiDrawCounts,Sn=ne._multiDrawCount,xo=ut?we.get(ut).bytesPerElement:1,Ya=ht.get(de).currentProgram.getUniforms();for(let _r=0;_r<Sn;_r++)Ya.setValue(z,"_gl_DrawID",_r),bn.render(bt[_r]/xo,Ei[_r])}else if(ne.isInstancedMesh)bn.renderInstances(pn,vi,ne.count);else if(ce.isInstancedBufferGeometry){let bt=ce._maxInstanceCount!==void 0?ce._maxInstanceCount:1/0,Ei=Math.min(ce.instanceCount,bt);bn.renderInstances(pn,vi,Ei)}else bn.render(pn,vi)};function wn(A,ee,ce){A.transparent===!0&&A.side===Es&&A.forceSinglePass===!1?(A.side=jr,A.needsUpdate=!0,gd(A,ee,ce),A.side=la,A.needsUpdate=!0,gd(A,ee,ce),A.side=Es):gd(A,ee,ce)}this.compile=function(A,ee,ce=null){ce===null&&(ce=A),_=_t.get(ce),_.init(ee),C.push(_),ce.traverseVisible(function(ne){ne.isLight&&ne.layers.test(ee.layers)&&(_.pushLight(ne),ne.castShadow&&_.pushShadow(ne))}),A!==ce&&A.traverseVisible(function(ne){ne.isLight&&ne.layers.test(ee.layers)&&(_.pushLight(ne),ne.castShadow&&_.pushShadow(ne))}),_.setupLights();let de=new Set;return A.traverse(function(ne){if(!(ne.isMesh||ne.isPoints||ne.isLine||ne.isSprite))return;let Be=ne.material;if(Be)if(Array.isArray(Be))for(let Ke=0;Ke<Be.length;Ke++){let ot=Be[Ke];wn(ot,ce,ne),de.add(ot)}else wn(Be,ce,ne),de.add(Be)}),_=C.pop(),de},this.compileAsync=function(A,ee,ce=null){let de=this.compile(A,ee,ce);return new Promise(ne=>{function Be(){if(de.forEach(function(Ke){ht.get(Ke).currentProgram.isReady()&&de.delete(Ke)}),de.size===0){ne(A);return}setTimeout(Be,10)}Ge.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let tr=null;function $r(A){tr&&tr(A)}function Wc(){Wo.stop()}function ya(){Wo.start()}let Wo=new JB;Wo.setAnimationLoop($r),typeof self<"u"&&Wo.setContext(self),this.setAnimationLoop=function(A){tr=A,me.setAnimationLoop(A),A===null?Wo.stop():Wo.start()},me.addEventListener("sessionstart",Wc),me.addEventListener("sessionend",ya),this.render=function(A,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(V===!0)return;if(A.matrixWorldAutoUpdate===!0&&A.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),me.enabled===!0&&me.isPresenting===!0&&(me.cameraAutoUpdate===!0&&me.updateCamera(ee),ee=me.getCamera()),A.isScene===!0&&A.onBeforeRender(E,A,ee,W),_=_t.get(A,C.length),_.init(ee),C.push(_),He.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),U.setFromProjectionMatrix(He),_e=this.localClippingEnabled,J=Fe.init(this.clippingPlanes,_e),y=yt.get(A,T.length),y.init(),T.push(y),me.enabled===!0&&me.isPresenting===!0){let Be=E.xr.getDepthSensingMesh();Be!==null&&Xl(Be,ee,-1/0,E.sortObjects)}Xl(A,ee,0,E.sortObjects),y.finish(),E.sortObjects===!0&&y.sort(ve,Ve),pt=me.enabled===!1||me.isPresenting===!1||me.hasDepthSensing()===!1,pt&&xt.addToRenderList(y,A),this.info.render.frame++,J===!0&&Fe.beginShadows();let ce=_.state.shadowsArray;nt.render(ce,A,ee),J===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();let de=y.opaque,ne=y.transmissive;if(_.setupLights(),ee.isArrayCamera){let Be=ee.cameras;if(ne.length>0)for(let Ke=0,ot=Be.length;Ke<ot;Ke++){let ut=Be[Ke];Yl(de,ne,A,ut)}pt&&xt.render(A);for(let Ke=0,ot=Be.length;Ke<ot;Ke++){let ut=Be[Ke];As(y,A,ut,ut.viewport)}}else ne.length>0&&Yl(de,ne,A,ee),pt&&xt.render(A),As(y,A,ee);W!==null&&L===0&&(N.updateMultisampleRenderTarget(W),N.updateRenderTargetMipmap(W)),A.isScene===!0&&A.onAfterRender(E,A,ee),Ln.resetDefaultState(),O=-1,R=null,C.pop(),C.length>0?(_=C[C.length-1],J===!0&&Fe.setGlobalState(E.clippingPlanes,_.state.camera)):_=null,T.pop(),T.length>0?y=T[T.length-1]:y=null};function Xl(A,ee,ce,de){if(A.visible===!1)return;if(A.layers.test(ee.layers)){if(A.isGroup)ce=A.renderOrder;else if(A.isLOD)A.autoUpdate===!0&&A.update(ee);else if(A.isLight)_.pushLight(A),A.castShadow&&_.pushShadow(A);else if(A.isSprite){if(!A.frustumCulled||U.intersectsSprite(A)){de&&Le.setFromMatrixPosition(A.matrixWorld).applyMatrix4(He);let Ke=he.update(A),ot=A.material;ot.visible&&y.push(A,Ke,ot,ce,Le.z,null)}}else if((A.isMesh||A.isLine||A.isPoints)&&(!A.frustumCulled||U.intersectsObject(A))){let Ke=he.update(A),ot=A.material;if(de&&(A.boundingSphere!==void 0?(A.boundingSphere===null&&A.computeBoundingSphere(),Le.copy(A.boundingSphere.center)):(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),Le.copy(Ke.boundingSphere.center)),Le.applyMatrix4(A.matrixWorld).applyMatrix4(He)),Array.isArray(ot)){let ut=Ke.groups;for(let kt=0,Ft=ut.length;kt<Ft;kt++){let wt=ut[kt],pn=ot[wt.materialIndex];pn&&pn.visible&&y.push(A,Ke,pn,ce,Le.z,wt)}}else ot.visible&&y.push(A,Ke,ot,ce,Le.z,null)}}let Be=A.children;for(let Ke=0,ot=Be.length;Ke<ot;Ke++)Xl(Be[Ke],ee,ce,de)}function As(A,ee,ce,de){let ne=A.opaque,Be=A.transmissive,Ke=A.transparent;_.setupLightsView(ce),J===!0&&Fe.setGlobalState(E.clippingPlanes,ce),de&&Xe.viewport(j.copy(de)),ne.length>0&&$o(ne,ee,ce),Be.length>0&&$o(Be,ee,ce),Ke.length>0&&$o(Ke,ee,ce),Xe.buffers.depth.setTest(!0),Xe.buffers.depth.setMask(!0),Xe.buffers.color.setMask(!0),Xe.setPolygonOffset(!1)}function Yl(A,ee,ce,de){if((ce.isScene===!0?ce.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[de.id]===void 0&&(_.state.transmissionRenderTarget[de.id]=new za(1,1,{generateMipmaps:!0,type:Ge.has("EXT_color_buffer_half_float")||Ge.has("EXT_color_buffer_float")?Ch:pa,minFilter:ha,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Bt.workingColorSpace}));let Be=_.state.transmissionRenderTarget[de.id],Ke=de.viewport||j;Be.setSize(Ke.z*E.transmissionResolutionScale,Ke.w*E.transmissionResolutionScale);let ot=E.getRenderTarget();E.setRenderTarget(Be),E.getClearColor(Ie),be=E.getClearAlpha(),be<1&&E.setClearColor(16777215,.5),E.clear(),pt&&xt.render(ce);let ut=E.toneMapping;E.toneMapping=jl;let kt=de.viewport;if(de.viewport!==void 0&&(de.viewport=void 0),_.setupLightsView(de),J===!0&&Fe.setGlobalState(E.clippingPlanes,de),$o(A,ce,de),N.updateMultisampleRenderTarget(Be),N.updateRenderTargetMipmap(Be),Ge.has("WEBGL_multisampled_render_to_texture")===!1){let Ft=!1;for(let wt=0,pn=ee.length;wt<pn;wt++){let Mn=ee[wt],vi=Mn.object,ei=Mn.geometry,bn=Mn.material,bt=Mn.group;if(bn.side===Es&&vi.layers.test(de.layers)){let Ei=bn.side;bn.side=jr,bn.needsUpdate=!0,Ug(vi,ce,de,ei,bn,bt),bn.side=Ei,bn.needsUpdate=!0,Ft=!0}}Ft===!0&&(N.updateMultisampleRenderTarget(Be),N.updateRenderTargetMipmap(Be))}E.setRenderTarget(ot),E.setClearColor(Ie,be),kt!==void 0&&(de.viewport=kt),E.toneMapping=ut}function $o(A,ee,ce){let de=ee.isScene===!0?ee.overrideMaterial:null;for(let ne=0,Be=A.length;ne<Be;ne++){let Ke=A[ne],ot=Ke.object,ut=Ke.geometry,kt=Ke.group,Ft=Ke.material;Ft.allowOverride===!0&&de!==null&&(Ft=de),ot.layers.test(ce.layers)&&Ug(ot,ee,ce,ut,Ft,kt)}}function Ug(A,ee,ce,de,ne,Be){A.onBeforeRender(E,ee,ce,de,ne,Be),A.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,A.matrixWorld),A.normalMatrix.getNormalMatrix(A.modelViewMatrix),ne.onBeforeRender(E,ee,ce,de,A,Be),ne.transparent===!0&&ne.side===Es&&ne.forceSinglePass===!1?(ne.side=jr,ne.needsUpdate=!0,E.renderBufferDirect(ce,ee,de,ne,A,Be),ne.side=la,ne.needsUpdate=!0,E.renderBufferDirect(ce,ee,de,ne,A,Be),ne.side=Es):E.renderBufferDirect(ce,ee,de,ne,A,Be),A.onAfterRender(E,ee,ce,de,ne,Be)}function gd(A,ee,ce){ee.isScene!==!0&&(ee=rt);let de=ht.get(A),ne=_.state.lights,Be=_.state.shadowsArray,Ke=ne.state.version,ot=$e.getParameters(A,ne.state,Be,ee,ce),ut=$e.getProgramCacheKey(ot),kt=de.programs;de.environment=A.isMeshStandardMaterial?ee.environment:null,de.fog=ee.fog,de.envMap=(A.isMeshStandardMaterial?oe:M).get(A.envMap||de.environment),de.envMapRotation=de.environment!==null&&A.envMap===null?ee.environmentRotation:A.envMapRotation,kt===void 0&&(A.addEventListener("dispose",Nt),kt=new Map,de.programs=kt);let Ft=kt.get(ut);if(Ft!==void 0){if(de.currentProgram===Ft&&de.lightsStateVersion===Ke)return Bg(A,ot),Ft}else ot.uniforms=$e.getUniforms(A),A.onBeforeCompile(ot,E),Ft=$e.acquireProgram(ot,ut),kt.set(ut,Ft),de.uniforms=ot.uniforms;let wt=de.uniforms;return(!A.isShaderMaterial&&!A.isRawShaderMaterial||A.clipping===!0)&&(wt.clippingPlanes=Fe.uniform),Bg(A,ot),de.needsLights=lb(A),de.lightsStateVersion=Ke,de.needsLights&&(wt.ambientLightColor.value=ne.state.ambient,wt.lightProbe.value=ne.state.probe,wt.directionalLights.value=ne.state.directional,wt.directionalLightShadows.value=ne.state.directionalShadow,wt.spotLights.value=ne.state.spot,wt.spotLightShadows.value=ne.state.spotShadow,wt.rectAreaLights.value=ne.state.rectArea,wt.ltc_1.value=ne.state.rectAreaLTC1,wt.ltc_2.value=ne.state.rectAreaLTC2,wt.pointLights.value=ne.state.point,wt.pointLightShadows.value=ne.state.pointShadow,wt.hemisphereLights.value=ne.state.hemi,wt.directionalShadowMap.value=ne.state.directionalShadowMap,wt.directionalShadowMatrix.value=ne.state.directionalShadowMatrix,wt.spotShadowMap.value=ne.state.spotShadowMap,wt.spotLightMatrix.value=ne.state.spotLightMatrix,wt.spotLightMap.value=ne.state.spotLightMap,wt.pointShadowMap.value=ne.state.pointShadowMap,wt.pointShadowMatrix.value=ne.state.pointShadowMatrix),de.currentProgram=Ft,de.uniformsList=null,Ft}function Bh(A){if(A.uniformsList===null){let ee=A.currentProgram.getUniforms();A.uniformsList=Dh.seqWithValue(ee.seq,A.uniforms)}return A.uniformsList}function Bg(A,ee){let ce=ht.get(A);ce.outputColorSpace=ee.outputColorSpace,ce.batching=ee.batching,ce.batchingColor=ee.batchingColor,ce.instancing=ee.instancing,ce.instancingColor=ee.instancingColor,ce.instancingMorph=ee.instancingMorph,ce.skinning=ee.skinning,ce.morphTargets=ee.morphTargets,ce.morphNormals=ee.morphNormals,ce.morphColors=ee.morphColors,ce.morphTargetsCount=ee.morphTargetsCount,ce.numClippingPlanes=ee.numClippingPlanes,ce.numIntersection=ee.numClipIntersection,ce.vertexAlphas=ee.vertexAlphas,ce.vertexTangents=ee.vertexTangents,ce.toneMapping=ee.toneMapping}function sb(A,ee,ce,de,ne){ee.isScene!==!0&&(ee=rt),N.resetTextureUnits();let Be=ee.fog,Ke=de.isMeshStandardMaterial?ee.environment:null,ot=W===null?E.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:yr,ut=(de.isMeshStandardMaterial?oe:M).get(de.envMap||Ke),kt=de.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,Ft=!!ce.attributes.tangent&&(!!de.normalMap||de.anisotropy>0),wt=!!ce.morphAttributes.position,pn=!!ce.morphAttributes.normal,Mn=!!ce.morphAttributes.color,vi=jl;de.toneMapped&&(W===null||W.isXRRenderTarget===!0)&&(vi=E.toneMapping);let ei=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,bn=ei!==void 0?ei.length:0,bt=ht.get(de),Ei=_.state.lights;if(J===!0&&(_e===!0||A!==R)){let ji=A===R&&de.id===O;Fe.setState(de,A,ji)}let Sn=!1;de.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==Ei.state.version||bt.outputColorSpace!==ot||ne.isBatchedMesh&&bt.batching===!1||!ne.isBatchedMesh&&bt.batching===!0||ne.isBatchedMesh&&bt.batchingColor===!0&&ne.colorTexture===null||ne.isBatchedMesh&&bt.batchingColor===!1&&ne.colorTexture!==null||ne.isInstancedMesh&&bt.instancing===!1||!ne.isInstancedMesh&&bt.instancing===!0||ne.isSkinnedMesh&&bt.skinning===!1||!ne.isSkinnedMesh&&bt.skinning===!0||ne.isInstancedMesh&&bt.instancingColor===!0&&ne.instanceColor===null||ne.isInstancedMesh&&bt.instancingColor===!1&&ne.instanceColor!==null||ne.isInstancedMesh&&bt.instancingMorph===!0&&ne.morphTexture===null||ne.isInstancedMesh&&bt.instancingMorph===!1&&ne.morphTexture!==null||bt.envMap!==ut||de.fog===!0&&bt.fog!==Be||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==Fe.numPlanes||bt.numIntersection!==Fe.numIntersection)||bt.vertexAlphas!==kt||bt.vertexTangents!==Ft||bt.morphTargets!==wt||bt.morphNormals!==pn||bt.morphColors!==Mn||bt.toneMapping!==vi||bt.morphTargetsCount!==bn)&&(Sn=!0):(Sn=!0,bt.__version=de.version);let xo=bt.currentProgram;Sn===!0&&(xo=gd(de,ee,ne));let Ya=!1,_r=!1,Za=!1,ti=xo.getUniforms(),Pr=bt.uniforms;if(Xe.useProgram(xo.program)&&(Ya=!0,_r=!0,Za=!0),de.id!==O&&(O=de.id,_r=!0),Ya||R!==A){Xe.buffers.depth.getReversed()?(se.copy(A.projectionMatrix),_B(se),xB(se),ti.setValue(z,"projectionMatrix",se)):ti.setValue(z,"projectionMatrix",A.projectionMatrix),ti.setValue(z,"viewMatrix",A.matrixWorldInverse);let Ai=ti.map.cameraPosition;Ai!==void 0&&Ai.setValue(z,je.setFromMatrixPosition(A.matrixWorld)),At.logarithmicDepthBuffer&&ti.setValue(z,"logDepthBufFC",2/(Math.log(A.far+1)/Math.LN2)),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&ti.setValue(z,"isOrthographic",A.isOrthographicCamera===!0),R!==A&&(R=A,_r=!0,Za=!0)}if(ne.isSkinnedMesh){ti.setOptional(z,ne,"bindMatrix"),ti.setOptional(z,ne,"bindMatrixInverse");let ji=ne.skeleton;ji&&(ji.boneTexture===null&&ji.computeBoneTexture(),ti.setValue(z,"boneTexture",ji.boneTexture,N))}ne.isBatchedMesh&&(ti.setOptional(z,ne,"batchingTexture"),ti.setValue(z,"batchingTexture",ne._matricesTexture,N),ti.setOptional(z,ne,"batchingIdTexture"),ti.setValue(z,"batchingIdTexture",ne._indirectTexture,N),ti.setOptional(z,ne,"batchingColorTexture"),ne._colorsTexture!==null&&ti.setValue(z,"batchingColorTexture",ne._colorsTexture,N));let xr=ce.morphAttributes;if((xr.position!==void 0||xr.normal!==void 0||xr.color!==void 0)&&Mt.update(ne,ce,xo),(_r||bt.receiveShadow!==ne.receiveShadow)&&(bt.receiveShadow=ne.receiveShadow,ti.setValue(z,"receiveShadow",ne.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(Pr.envMap.value=ut,Pr.flipEnvMap.value=ut.isCubeTexture&&ut.isRenderTargetTexture===!1?-1:1),de.isMeshStandardMaterial&&de.envMap===null&&ee.environment!==null&&(Pr.envMapIntensity.value=ee.environmentIntensity),_r&&(ti.setValue(z,"toneMappingExposure",E.toneMappingExposure),bt.needsLights&&ab(Pr,Za),Be&&de.fog===!0&&qe.refreshFogUniforms(Pr,Be),qe.refreshMaterialUniforms(Pr,de,q,ie,_.state.transmissionRenderTarget[A.id]),Dh.upload(z,Bh(bt),Pr,N)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(Dh.upload(z,Bh(bt),Pr,N),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&ti.setValue(z,"center",ne.center),ti.setValue(z,"modelViewMatrix",ne.modelViewMatrix),ti.setValue(z,"normalMatrix",ne.normalMatrix),ti.setValue(z,"modelMatrix",ne.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){let ji=de.uniformsGroups;for(let Ai=0,yd=ji.length;Ai<yd;Ai++){let _a=ji[Ai];Y.update(_a,xo),Y.bind(_a,xo)}}return xo}function ab(A,ee){A.ambientLightColor.needsUpdate=ee,A.lightProbe.needsUpdate=ee,A.directionalLights.needsUpdate=ee,A.directionalLightShadows.needsUpdate=ee,A.pointLights.needsUpdate=ee,A.pointLightShadows.needsUpdate=ee,A.spotLights.needsUpdate=ee,A.spotLightShadows.needsUpdate=ee,A.rectAreaLights.needsUpdate=ee,A.hemisphereLights.needsUpdate=ee}function lb(A){return A.isMeshLambertMaterial||A.isMeshToonMaterial||A.isMeshPhongMaterial||A.isMeshStandardMaterial||A.isShadowMaterial||A.isShaderMaterial&&A.lights===!0}this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return W},this.setRenderTargetTextures=function(A,ee,ce){let de=ht.get(A);de.__autoAllocateDepthBuffer=A.resolveDepthBuffer===!1,de.__autoAllocateDepthBuffer===!1&&(de.__useRenderToTexture=!1),ht.get(A.texture).__webglTexture=ee,ht.get(A.depthTexture).__webglTexture=de.__autoAllocateDepthBuffer?void 0:ce,de.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(A,ee){let ce=ht.get(A);ce.__webglFramebuffer=ee,ce.__useDefaultFramebuffer=ee===void 0};let cb=z.createFramebuffer();this.setRenderTarget=function(A,ee=0,ce=0){W=A,F=ee,L=ce;let de=!0,ne=null,Be=!1,Ke=!1;if(A){let ut=ht.get(A);if(ut.__useDefaultFramebuffer!==void 0)Xe.bindFramebuffer(z.FRAMEBUFFER,null),de=!1;else if(ut.__webglFramebuffer===void 0)N.setupRenderTarget(A);else if(ut.__hasExternalTextures)N.rebindTextures(A,ht.get(A.texture).__webglTexture,ht.get(A.depthTexture).__webglTexture);else if(A.depthBuffer){let wt=A.depthTexture;if(ut.__boundDepthTexture!==wt){if(wt!==null&&ht.has(wt)&&(A.width!==wt.image.width||A.height!==wt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");N.setupDepthRenderbuffer(A)}}let kt=A.texture;(kt.isData3DTexture||kt.isDataArrayTexture||kt.isCompressedArrayTexture)&&(Ke=!0);let Ft=ht.get(A).__webglFramebuffer;A.isWebGLCubeRenderTarget?(Array.isArray(Ft[ee])?ne=Ft[ee][ce]:ne=Ft[ee],Be=!0):A.samples>0&&N.useMultisampledRTT(A)===!1?ne=ht.get(A).__webglMultisampledFramebuffer:Array.isArray(Ft)?ne=Ft[ce]:ne=Ft,j.copy(A.viewport),pe.copy(A.scissor),ae=A.scissorTest}else j.copy(tt).multiplyScalar(q).floor(),pe.copy(ge).multiplyScalar(q).floor(),ae=re;if(ce!==0&&(ne=cb),Xe.bindFramebuffer(z.FRAMEBUFFER,ne)&&de&&Xe.drawBuffers(A,ne),Xe.viewport(j),Xe.scissor(pe),Xe.setScissorTest(ae),Be){let ut=ht.get(A.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+ee,ut.__webglTexture,ce)}else if(Ke){let ut=ht.get(A.texture),kt=ee;z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,ut.__webglTexture,ce,kt)}else if(A!==null&&ce!==0){let ut=ht.get(A.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,ut.__webglTexture,ce)}O=-1},this.readRenderTargetPixels=function(A,ee,ce,de,ne,Be,Ke){if(!(A&&A.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=ht.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&Ke!==void 0&&(ot=ot[Ke]),ot){Xe.bindFramebuffer(z.FRAMEBUFFER,ot);try{let ut=A.texture,kt=ut.format,Ft=ut.type;if(!At.textureFormatReadable(kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!At.textureTypeReadable(Ft)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=A.width-de&&ce>=0&&ce<=A.height-ne&&z.readPixels(ee,ce,de,ne,Ht.convert(kt),Ht.convert(Ft),Be)}finally{let ut=W!==null?ht.get(W).__webglFramebuffer:null;Xe.bindFramebuffer(z.FRAMEBUFFER,ut)}}},this.readRenderTargetPixelsAsync=function(A,ee,ce,de,ne,Be,Ke){return dt(this,null,function*(){if(!(A&&A.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ot=ht.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&Ke!==void 0&&(ot=ot[Ke]),ot)if(ee>=0&&ee<=A.width-de&&ce>=0&&ce<=A.height-ne){Xe.bindFramebuffer(z.FRAMEBUFFER,ot);let ut=A.texture,kt=ut.format,Ft=ut.type;if(!At.textureFormatReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!At.textureTypeReadable(Ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let wt=z.createBuffer();z.bindBuffer(z.PIXEL_PACK_BUFFER,wt),z.bufferData(z.PIXEL_PACK_BUFFER,Be.byteLength,z.STREAM_READ),z.readPixels(ee,ce,de,ne,Ht.convert(kt),Ht.convert(Ft),0);let pn=W!==null?ht.get(W).__webglFramebuffer:null;Xe.bindFramebuffer(z.FRAMEBUFFER,pn);let Mn=z.fenceSync(z.SYNC_GPU_COMMANDS_COMPLETE,0);return z.flush(),yield yB(z,Mn,4),z.bindBuffer(z.PIXEL_PACK_BUFFER,wt),z.getBufferSubData(z.PIXEL_PACK_BUFFER,0,Be),z.deleteBuffer(wt),z.deleteSync(Mn),Be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(A,ee=null,ce=0){let de=Math.pow(2,-ce),ne=Math.floor(A.image.width*de),Be=Math.floor(A.image.height*de),Ke=ee!==null?ee.x:0,ot=ee!==null?ee.y:0;N.setTexture2D(A,0),z.copyTexSubImage2D(z.TEXTURE_2D,ce,0,0,Ke,ot,ne,Be),Xe.unbindTexture()};let ub=z.createFramebuffer(),vd=z.createFramebuffer();this.copyTextureToTexture=function(A,ee,ce=null,de=null,ne=0,Be=null){Be===null&&(ne!==0?(Rg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Be=ne,ne=0):Be=0);let Ke,ot,ut,kt,Ft,wt,pn,Mn,vi,ei=A.isCompressedTexture?A.mipmaps[Be]:A.image;if(ce!==null)Ke=ce.max.x-ce.min.x,ot=ce.max.y-ce.min.y,ut=ce.isBox3?ce.max.z-ce.min.z:1,kt=ce.min.x,Ft=ce.min.y,wt=ce.isBox3?ce.min.z:0;else{let xr=Math.pow(2,-ne);Ke=Math.floor(ei.width*xr),ot=Math.floor(ei.height*xr),A.isDataArrayTexture?ut=ei.depth:A.isData3DTexture?ut=Math.floor(ei.depth*xr):ut=1,kt=0,Ft=0,wt=0}de!==null?(pn=de.x,Mn=de.y,vi=de.z):(pn=0,Mn=0,vi=0);let bn=Ht.convert(ee.format),bt=Ht.convert(ee.type),Ei;ee.isData3DTexture?(N.setTexture3D(ee,0),Ei=z.TEXTURE_3D):ee.isDataArrayTexture||ee.isCompressedArrayTexture?(N.setTexture2DArray(ee,0),Ei=z.TEXTURE_2D_ARRAY):(N.setTexture2D(ee,0),Ei=z.TEXTURE_2D),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,ee.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,ee.unpackAlignment);let Sn=z.getParameter(z.UNPACK_ROW_LENGTH),xo=z.getParameter(z.UNPACK_IMAGE_HEIGHT),Ya=z.getParameter(z.UNPACK_SKIP_PIXELS),_r=z.getParameter(z.UNPACK_SKIP_ROWS),Za=z.getParameter(z.UNPACK_SKIP_IMAGES);z.pixelStorei(z.UNPACK_ROW_LENGTH,ei.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,ei.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,kt),z.pixelStorei(z.UNPACK_SKIP_ROWS,Ft),z.pixelStorei(z.UNPACK_SKIP_IMAGES,wt);let ti=A.isDataArrayTexture||A.isData3DTexture,Pr=ee.isDataArrayTexture||ee.isData3DTexture;if(A.isDepthTexture){let xr=ht.get(A),ji=ht.get(ee),Ai=ht.get(xr.__renderTarget),yd=ht.get(ji.__renderTarget);Xe.bindFramebuffer(z.READ_FRAMEBUFFER,Ai.__webglFramebuffer),Xe.bindFramebuffer(z.DRAW_FRAMEBUFFER,yd.__webglFramebuffer);for(let _a=0;_a<ut;_a++)ti&&(z.framebufferTextureLayer(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,ht.get(A).__webglTexture,ne,wt+_a),z.framebufferTextureLayer(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,ht.get(ee).__webglTexture,Be,vi+_a)),z.blitFramebuffer(kt,Ft,Ke,ot,pn,Mn,Ke,ot,z.DEPTH_BUFFER_BIT,z.NEAREST);Xe.bindFramebuffer(z.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(z.DRAW_FRAMEBUFFER,null)}else if(ne!==0||A.isRenderTargetTexture||ht.has(A)){let xr=ht.get(A),ji=ht.get(ee);Xe.bindFramebuffer(z.READ_FRAMEBUFFER,ub),Xe.bindFramebuffer(z.DRAW_FRAMEBUFFER,vd);for(let Ai=0;Ai<ut;Ai++)ti?z.framebufferTextureLayer(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,xr.__webglTexture,ne,wt+Ai):z.framebufferTexture2D(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,xr.__webglTexture,ne),Pr?z.framebufferTextureLayer(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,ji.__webglTexture,Be,vi+Ai):z.framebufferTexture2D(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,ji.__webglTexture,Be),ne!==0?z.blitFramebuffer(kt,Ft,Ke,ot,pn,Mn,Ke,ot,z.COLOR_BUFFER_BIT,z.NEAREST):Pr?z.copyTexSubImage3D(Ei,Be,pn,Mn,vi+Ai,kt,Ft,Ke,ot):z.copyTexSubImage2D(Ei,Be,pn,Mn,kt,Ft,Ke,ot);Xe.bindFramebuffer(z.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(z.DRAW_FRAMEBUFFER,null)}else Pr?A.isDataTexture||A.isData3DTexture?z.texSubImage3D(Ei,Be,pn,Mn,vi,Ke,ot,ut,bn,bt,ei.data):ee.isCompressedArrayTexture?z.compressedTexSubImage3D(Ei,Be,pn,Mn,vi,Ke,ot,ut,bn,ei.data):z.texSubImage3D(Ei,Be,pn,Mn,vi,Ke,ot,ut,bn,bt,ei):A.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,Be,pn,Mn,Ke,ot,bn,bt,ei.data):A.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,Be,pn,Mn,ei.width,ei.height,bn,ei.data):z.texSubImage2D(z.TEXTURE_2D,Be,pn,Mn,Ke,ot,bn,bt,ei);z.pixelStorei(z.UNPACK_ROW_LENGTH,Sn),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,xo),z.pixelStorei(z.UNPACK_SKIP_PIXELS,Ya),z.pixelStorei(z.UNPACK_SKIP_ROWS,_r),z.pixelStorei(z.UNPACK_SKIP_IMAGES,Za),Be===0&&ee.generateMipmaps&&z.generateMipmap(Ei),Xe.unbindTexture()},this.copyTextureToTexture3D=function(A,ee,ce=null,de=null,ne=0){return Rg('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(A,ee,ce,de,ne)},this.initRenderTarget=function(A){ht.get(A).__webglFramebuffer===void 0&&N.setupRenderTarget(A)},this.initTexture=function(A){A.isCubeTexture?N.setTextureCube(A,0):A.isData3DTexture?N.setTexture3D(A,0):A.isDataArrayTexture||A.isCompressedArrayTexture?N.setTexture2DArray(A,0):N.setTexture2D(A,0),Xe.unbindTexture()},this.resetState=function(){F=0,L=0,W=null,Xe.reset(),Ln.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Va}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=Bt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Bt._getUnpackColorSpace()}};var iV={type:"change"},tD={type:"start"},oV={type:"end"},Hw=new ja,rV=new _s,ole=Math.cos(70*Qn.DEG2RAD),er=new B,_o=2*Math.PI,Xn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},eD=1e-6,zw=class extends wg{constructor(e,t=null){super(e,t),this.state=Xn.NONE,this.target=new B,this.cursor=new B,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Bc.ROTATE,MIDDLE:Bc.DOLLY,RIGHT:Bc.PAN},this.touches={ONE:Vc.ROTATE,TWO:Vc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new B,this._lastQuaternion=new pi,this._lastTargetPosition=new B,this._quat=new pi().setFromUnitVectors(e.up,new B(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new _h,this._sphericalDelta=new _h,this._scale=1,this._panOffset=new B,this._rotateStart=new We,this._rotateEnd=new We,this._rotateDelta=new We,this._panStart=new We,this._panEnd=new We,this._panDelta=new We,this._dollyStart=new We,this._dollyEnd=new We,this._dollyDelta=new We,this._dollyDirection=new B,this._mouse=new We,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=ale.bind(this),this._onPointerDown=sle.bind(this),this._onPointerUp=lle.bind(this),this._onContextMenu=mle.bind(this),this._onMouseWheel=dle.bind(this),this._onKeyDown=fle.bind(this),this._onTouchStart=hle.bind(this),this._onTouchMove=ple.bind(this),this._onMouseDown=cle.bind(this),this._onMouseMove=ule.bind(this),this._interceptControlDown=gle.bind(this),this._interceptControlUp=vle.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(iV),this.update(),this.state=Xn.NONE}update(e=null){let t=this.object.position;er.copy(t).sub(this.target),er.applyQuaternion(this._quat),this._spherical.setFromVector3(er),this.autoRotate&&this.state===Xn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=_o:i>Math.PI&&(i-=_o),r<-Math.PI?r+=_o:r>Math.PI&&(r-=_o),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(er.setFromSpherical(this._spherical),er.applyQuaternion(this._quatInverse),t.copy(this.target).add(er),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){let a=er.length();s=this._clampDistance(a*this._scale);let l=a-s;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),o=!!l}else if(this.object.isOrthographicCamera){let a=new B(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=l!==this.object.zoom;let u=new B(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),s=er.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(Hw.origin.copy(this.object.position),Hw.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Hw.direction))<ole?this.object.lookAt(this.target):(rV.setFromNormalAndCoplanarPoint(this.object.up,this.target),Hw.intersectPlane(rV,this.target))))}else if(this.object.isOrthographicCamera){let s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>eD||8*(1-this._lastQuaternion.dot(this.object.quaternion))>eD||this._lastTargetPosition.distanceToSquared(this.target)>eD?(this.dispatchEvent(iV),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?_o/60*this.autoRotateSpeed*e:_o/60/60*this.autoRotateSpeed}_getZoomScale(e){let t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){er.setFromMatrixColumn(t,0),er.multiplyScalar(-e),this._panOffset.add(er)}_panUp(e,t){this.screenSpacePanning===!0?er.setFromMatrixColumn(t,1):(er.setFromMatrixColumn(t,0),er.crossVectors(this.object.up,er)),er.multiplyScalar(e),this._panOffset.add(er)}_pan(e,t){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;er.copy(r).sub(this.target);let o=er.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/i.clientHeight,this.object.matrix),this._panUp(2*t*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=e-i.left,o=t-i.top,s=i.width,a=i.height;this._mouse.x=r/s*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(_o*this._rotateDelta.x/t.clientHeight),this._rotateUp(_o*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(_o*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-_o*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(_o*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-_o*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{let i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),o=.5*(e.pageY+i.y);this._rotateEnd.set(r,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(_o*this._rotateDelta.x/t.clientHeight),this._rotateUp(_o*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let s=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new We,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){let t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function sle(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function ale(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function lle(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(oV),this.state=Xn.NONE;break;case 1:let e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function cle(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Bc.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Xn.DOLLY;break;case Bc.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Xn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Xn.ROTATE}break;case Bc.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Xn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Xn.PAN}break;default:this.state=Xn.NONE}this.state!==Xn.NONE&&this.dispatchEvent(tD)}function ule(n){switch(this.state){case Xn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Xn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Xn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function dle(n){this.enabled===!1||this.enableZoom===!1||this.state!==Xn.NONE||(n.preventDefault(),this.dispatchEvent(tD),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(oV))}function fle(n){this.enabled!==!1&&this._handleKeyDown(n)}function hle(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Vc.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Xn.TOUCH_ROTATE;break;case Vc.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Xn.TOUCH_PAN;break;default:this.state=Xn.NONE}break;case 2:switch(this.touches.TWO){case Vc.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Xn.TOUCH_DOLLY_PAN;break;case Vc.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Xn.TOUCH_DOLLY_ROTATE;break;default:this.state=Xn.NONE}break;default:this.state=Xn.NONE}this.state!==Xn.NONE&&this.dispatchEvent(tD)}function ple(n){switch(this._trackPointer(n),this.state){case Xn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Xn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Xn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Xn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Xn.NONE}}function mle(n){this.enabled!==!1&&n.preventDefault()}function gle(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function vle(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var yle=["overlay"],_le=["*"];function xle(n,e){n&1&&ye(0,"div")}function wle(n,e){if(n&1&&(I(0,"div"),Pe(1,xle,1,0,"div",6),D()),n&2){let t=le(2);UN(t.spinner.class),Hn("color",t.spinner.color),H(),$("ngForOf",t.spinner.divArray)}}function ble(n,e){if(n&1&&(ye(0,"div",7),ls(1,"safeHtml")),n&2){let t=le(2);$("innerHTML",cs(1,1,t.template),DO)}}function Cle(n,e){if(n&1&&(I(0,"div",2,0),Pe(2,wle,2,5,"div",3)(3,ble,2,3,"div",4),I(4,"div",5),ZN(5),D()()),n&2){let t=le();Hn("background-color",t.spinner.bdColor)("z-index",t.spinner.zIndex)("position",t.spinner.fullScreen?"fixed":"absolute"),$("@.disabled",t.disableAnimation)("@fadeIn","in"),H(2),$("ngIf",!t.template),H(),$("ngIf",t.template),H(),Hn("z-index",t.spinner.zIndex)}}var Ele={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},nD={BD_COLOR:"rgba(51,51,51,0.8)",SPINNER_COLOR:"#fff",Z_INDEX:99999},iD="primary",pd=class n{constructor(e){Object.assign(this,e)}static create(e){return!e?.template&&!e?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new n(e)}},rD=(()=>{class n{constructor(){this.spinnerObservable=new Wn(null)}getSpinner(t){return this.spinnerObservable.asObservable().pipe($n(i=>i&&i.name===t))}show(t=iD,i){return new Promise((r,o)=>{setTimeout(()=>{i&&Object.keys(i).length?(i.name=t,this.spinnerObservable.next(new pd(Ct(Ne({},i),{show:!0}))),r(!0)):(this.spinnerObservable.next(new pd({name:t,show:!0})),r(!0))},10)})}hide(t=iD,i=10){return new Promise((r,o)=>{setTimeout(()=>{this.spinnerObservable.next(new pd({name:t,show:!1})),r(!0)},i)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sV=new Ae("NGX_SPINNER_CONFIG"),Mle=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return t?this.sanitizer.bypassSecurityTrustHtml(t):""}static{this.\u0275fac=function(i){return new(i||n)(ue(ZS,16))}}static{this.\u0275pipe=hf({name:"safeHtml",type:n,pure:!0})}}return n})(),aV=(()=>{class n{constructor(t,i,r,o){this.spinnerService=t,this.changeDetector=i,this.elementRef=r,this.globalConfig=o,this.disableAnimation=!1,this.spinner=new pd,this.ngUnsubscribe=new On,this.setDefaultOptions=()=>{let{type:s}=this.globalConfig??{};this.spinner=pd.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??s,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor=nD.BD_COLOR,this.zIndex=nD.Z_INDEX,this.color=nD.SPINNER_COLOR,this.size="large",this.fullScreen=!0,this.name=iD,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(is(this.ngUnsubscribe)).subscribe(t=>{this.setDefaultOptions(),Object.assign(this.spinner,t),t.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(t){return t===this.elementRef.nativeElement.parentElement?!0:t.parentNode&&this.isSpinnerZone(t.parentNode)}ngOnChanges(t){for(let i in t)if(i){let r=t[i];if(r.isFirstChange())return;typeof r.currentValue<"u"&&r.currentValue!==r.previousValue&&r.currentValue!==""&&(this.spinner[i]=r.currentValue,i==="showSpinner"&&(r.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),i==="name"&&this.initObservable())}}getClass(t,i){this.spinner.divCount=Ele[t],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((o,s)=>s);let r="";switch(i.toLowerCase()){case"small":r="la-sm";break;case"medium":r="la-2x";break;case"large":r="la-3x";break;default:break}return"la-"+t+" "+r}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static{this.\u0275fac=function(i){return new(i||n)(ue(rD),ue(or),ue(Yt),ue(sV,8))}}static{this.\u0275cmp=vn({type:n,selectors:[["ngx-spinner"]],viewQuery:function(i,r){if(i&1&&bi(yle,5),i&2){let o;si(o=ai())&&(r.spinnerDOM=o.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[Xi],ngContentSelectors:_le,decls:1,vars:1,consts:[["overlay",""],["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(i,r){i&1&&(YN(),Pe(0,Cle,6,12,"div",1)),i&2&&$("ngIf",r.spinner.show)},dependencies:[Mle,Dn,Si],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[UT("fadeIn",[BT("in",xc({opacity:1})),__(":enter",[xc({opacity:0}),y_(300)]),__(":leave",y_(200,xc({opacity:0})))])]},changeDetection:0})}}return n})(),lV=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:sV,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=hr({})}}return n})();function oD(n,e){if(e===DI)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Sh||e===Dg){let t=n.getIndex();if(t===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);n.setIndex(s),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=t.count-2,r=[];if(e===Sh)for(let s=1;s<=i;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var jw=class extends Go{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new fD(t)}),this.register(function(t){return new hD(t)}),this.register(function(t){return new bD(t)}),this.register(function(t){return new CD(t)}),this.register(function(t){return new ED(t)}),this.register(function(t){return new mD(t)}),this.register(function(t){return new gD(t)}),this.register(function(t){return new vD(t)}),this.register(function(t){return new yD(t)}),this.register(function(t){return new dD(t)}),this.register(function(t){return new _D(t)}),this.register(function(t){return new pD(t)}),this.register(function(t){return new wD(t)}),this.register(function(t){return new xD(t)}),this.register(function(t){return new cD(t)}),this.register(function(t){return new MD(t)}),this.register(function(t){return new SD(t)})}load(e,t,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let u=fa.extractUrlBase(e);s=fa.resolveURL(u,this.path)}else s=fa.extractUrlBase(e);this.manager.itemStart(e);let a=function(u){r?r(u):console.error(u),o.manager.itemError(e),o.manager.itemEnd(e)},l=new Wa(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{o.parse(u,s,function(f){t(f),o.manager.itemEnd(e)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let o,s={},a={},l=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===hV){try{s[hn.KHR_BINARY_GLTF]=new TD(e)}catch(h){r&&r(h);return}o=JSON.parse(s[hn.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new ND(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){let h=this.pluginCallbacks[f](u);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){let h=o.extensionsUsed[f],p=o.extensionsRequired||[];switch(h){case hn.KHR_MATERIALS_UNLIT:s[h]=new uD;break;case hn.KHR_DRACO_MESH_COMPRESSION:s[h]=new ID(o,this.dracoLoader);break;case hn.KHR_TEXTURE_TRANSFORM:s[h]=new DD;break;case hn.KHR_MESH_QUANTIZATION:s[h]=new AD;break;default:p.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(i,r)}parseAsync(e,t){let i=this;return new Promise(function(r,o){i.parse(e,t,r,o)})}};function Tle(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var hn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},cD=class{constructor(e){this.parser=e,this.name=hn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){let o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let t=this.parser,i="light:"+e,r=t.cache.get(i);if(r)return r;let o=t.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],u,f=new ft(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],yr);let h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new od(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Uc(f),u.distance=h;break;case"spot":u=new id(f),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),Wl(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,o=i.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},uD=class{constructor(){this.name=hn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ho}extendParams(e,t,i){let r=[];e.color=new ft(1,1,1),e.opacity=1;let o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],yr),e.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",o.baseColorTexture,xn))}return Promise.all(r)}},dD=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}},fD=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new We(a,a)}return Promise.all(o)}},hD=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_DISPERSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},pD=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},mD=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_SHEEN}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];t.sheenColor=new ft(0,0,0),t.sheenRoughness=0,t.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],yr)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,xn)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},gD=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},vD=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_VOLUME}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return t.attenuationColor=new ft().setRGB(a[0],a[1],a[2],yr),Promise.all(o)}},yD=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_IOR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},_D=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_SPECULAR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return t.specularColor=new ft().setRGB(a[0],a[1],a[2],yr),s.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,xn)),Promise.all(o)}},xD=class{constructor(e){this.parser=e,this.name=hn.EXT_MATERIALS_BUMP}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(o)}},wD=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:vo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},bD=class{constructor(e){this.parser=e,this.name=hn.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,s)}},CD=class{constructor(e){this.parser=e,this.name=hn.EXT_TEXTURE_WEBP}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return i.loadTextureImage(e,s.source,l)}},ED=class{constructor(e){this.parser=e,this.name=hn.EXT_TEXTURE_AVIF}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return i.loadTextureImage(e,s.source,l)}},MD=class{constructor(e){this.name=hn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let l=r.byteOffset||0,u=r.byteLength||0,f=r.count,h=r.byteStride,p=new Uint8Array(a,l,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,h,p,r.mode,r.filter).then(function(g){return g.buffer}):s.ready.then(function(){let g=new ArrayBuffer(f*h);return s.decodeGltfBuffer(new Uint8Array(g),f,h,p,r.mode,r.filter),g})})}else return null}},SD=class{constructor(e){this.name=hn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=t.meshes[i.mesh];for(let u of r.primitives)if(u.mode!==Ss.TRIANGLES&&u.mode!==Ss.TRIANGLE_STRIP&&u.mode!==Ss.TRIANGLE_FAN&&u.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],l={};for(let u in s)a.push(this.parser.getDependency("accessor",s[u]).then(f=>(l[u]=f,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{let f=u.pop(),h=f.isGroup?f.children:[f],p=u[0].count,g=[];for(let v of h){let w=new lt,y=new B,_=new pi,T=new B(1,1,1),C=new tg(v.geometry,v.material,p);for(let E=0;E<p;E++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,E),l.SCALE&&T.fromBufferAttribute(l.SCALE,E),C.setMatrixAt(E,w.compose(y,_,T));for(let E in l)if(E==="_COLOR_0"){let V=l[E];C.instanceColor=new Fc(V.array,V.itemSize,V.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&v.geometry.setAttribute(E,l[E]);mi.prototype.copy.call(C,v),this.parser.assignFinalMaterial(C),g.push(C)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}},hV="glTF",Og=12,cV={JSON:1313821514,BIN:5130562},TD=class{constructor(e){this.name=hn.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,Og),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==hV)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-Og,o=new DataView(e,Og),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let l=o.getUint32(s,!0);if(s+=4,l===cV.JSON){let u=new Uint8Array(e,Og+s,a);this.content=i.decode(u)}else if(l===cV.BIN){let u=Og+s;this.body=e.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},ID=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=hn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},l={},u={};for(let f in s){let h=PD[f]||f.toLowerCase();a[h]=s[f]}for(let f in e.attributes){let h=PD[f]||f.toLowerCase();if(s[f]!==void 0){let p=i.accessors[e.attributes[f]],g=Rh[p.componentType];u[h]=g.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",o).then(function(f){return new Promise(function(h,p){r.decodeDracoFile(f,function(g){for(let v in g.attributes){let w=g.attributes[v],y=l[v];y!==void 0&&(w.normalized=y)}h(g)},a,u,yr,p)})})}},DD=class{constructor(){this.name=hn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},AD=class{constructor(){this.name=hn.KHR_MESH_QUANTIZATION}},Gw=class extends Bl{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)t[s]=i[o+s];return t}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,f=r-t,h=(i-t)/f,p=h*h,g=p*h,v=e*u,w=v-u,y=-2*g+3*p,_=g-p,T=1-y,C=_-p+h;for(let E=0;E!==a;E++){let V=s[w+E+a],F=s[w+E+l]*f,L=s[v+E+a],W=s[v+E]*f;o[E]=T*V+C*F+y*L+_*W}return o}},Ile=new pi,RD=class extends Gw{interpolate_(e,t,i,r){let o=super.interpolate_(e,t,i,r);return Ile.fromArray(o).normalize().toArray(o),o}},Ss={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Rh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},uV={9728:vr,9729:Vr,9984:tw,9985:wh,9986:ld,9987:ha},dV={33071:Vo,33648:sh,10497:ca},sD={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},PD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},zc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Dle={CUBICSPLINE:void 0,LINEAR:Xu,STEP:qu},aD={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ale(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new ed({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:la})),n.DefaultMaterial}function md(n,e,t){for(let i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Wl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Rle(n,e,t){let i=!1,r=!1,o=!1;for(let u=0,f=e.length;u<f;u++){let h=e[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],l=[];for(let u=0,f=e.length;u<f;u++){let h=e[u];if(i){let p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;s.push(p)}if(r){let p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(o){let p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(u){let f=u[0],h=u[1],p=u[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=h),o&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function Ple(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ole(n){let e,t=n.extensions&&n.extensions[hn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+lD(t.attributes):e=n.indices+":"+lD(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+lD(n.targets[i]);return e}function lD(n){let e="",t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function OD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Nle(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var Fle=new lt,ND=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Tle,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new nd(this.options.manager):this.textureLoader=new _g(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Wa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return md(o,a,r),Wl(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(let l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){let s=t[r].joints;for(let a=0,l=s.length;a<l;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){let s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let r=i.clone(),o=(s,a)=>{let l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(let[u,f]of s.children.entries())o(f,a.children[u])};return o(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let r=e(t[i]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let r=0;r<t.length;r++){let o=e(t[r]);o&&i.push(o)}return i}getDependency(e,t){let i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[hn.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(fa.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){let r=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(e){let t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let s=sD[r.type],a=Rh[r.componentType],l=r.normalized===!0,u=new a(r.count*s);return Promise.resolve(new Hi(u,s,l))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],l=sD[r.type],u=Rh[r.componentType],f=u.BYTES_PER_ELEMENT,h=f*l,p=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0,w,y;if(g&&g!==h){let _=Math.floor(p/g),T="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count,C=t.cache.get(T);C||(w=new u(a,_*g,r.count*g/f),C=new hh(w,g/f),t.cache.add(T,C)),y=new ph(C,l,p%g/f,v)}else a===null?w=new u(r.count*l):w=new u(a,p,r.count*l),y=new Hi(w,l,v);if(r.sparse!==void 0){let _=sD.SCALAR,T=Rh[r.sparse.indices.componentType],C=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,V=new T(s[1],C,r.sparse.count*_),F=new u(s[2],E,r.sparse.count*l);a!==null&&(y=new Hi(y.array.slice(),y.itemSize,y.normalized)),y.normalized=!1;for(let L=0,W=V.length;L<W;L++){let O=V[L];if(y.setX(O,F[L*l]),l>=2&&y.setY(O,F[L*l+1]),l>=3&&y.setZ(O,F[L*l+2]),l>=4&&y.setW(O,F[L*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}y.normalized=v}return y})}loadTexture(e){let t=this.json,i=this.options,o=t.textures[e].source,s=t.images[o],a=this.textureLoader;if(s.uri){let l=i.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,i){let r=this,o=this.json,s=o.textures[e],a=o.images[t],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=s.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);let p=(o.samplers||{})[s.sampler]||{};return f.magFilter=uV[p.magFilter]||Vr,f.minFilter=uV[p.minFilter]||ha,f.wrapS=dV[p.wrapS]||ca,f.wrapT=dV[p.wrapT]||ca,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==vr&&f.minFilter!==Vr,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){let i=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());let s=r.images[e],a=self.URL||self.webkitURL,l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=i.getDependency("bufferView",s.bufferView).then(function(h){u=!0;let p=new Blob([h],{type:s.mimeType});return l=a.createObjectURL(p),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let f=Promise.resolve(l).then(function(h){return new Promise(function(p,g){let v=p;t.isImageBitmapLoader===!0&&(v=function(w){let y=new Gr(w);y.needsUpdate=!0,p(y)}),t.load(fa.resolveURL(h,o.path),v,void 0,g)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),Wl(h,s),h.userData.mimeType=s.mimeType||Nle(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[hn.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[hn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let l=o.associations.get(s);s=o.extensions[hn.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return r!==void 0&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){let t=e.geometry,i=e.material,r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new da,Ki.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){let a="LineBasicMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new ws,Ki.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return ed}loadMaterial(e){let t=this,i=this.json,r=this.extensions,o=i.materials[e],s,a={},l=o.extensions||{},u=[];if(l[hn.KHR_MATERIALS_UNLIT]){let h=r[hn.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),u.push(h.extendParams(a,o,t))}else{let h=o.pbrMetallicRoughness||{};if(a.color=new ft(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){let p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],yr),a.opacity=p[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,xn)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=Es);let f=o.alphaMode||aD.OPAQUE;if(f===aD.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===aD.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Ho&&(u.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new We(1,1),o.normalTexture.scale!==void 0)){let h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==Ho&&(u.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Ho){let h=o.emissiveFactor;a.emissive=new ft().setRGB(h[0],h[1],h[2],yr)}return o.emissiveTexture!==void 0&&s!==Ho&&u.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,xn)),Promise.all(u).then(function(){let h=new s(a);return o.name&&(h.name=o.name),Wl(h,o),t.associations.set(h,{materials:e}),o.extensions&&md(r,h,o),h})}createUniqueName(e){let t=jn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[hn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return fV(l,a,t)})}let s=[];for(let a=0,l=e.length;a<l;a++){let u=e[a],f=Ole(u),h=r[f];if(h)s.push(h.promise);else{let p;u.extensions&&u.extensions[hn.KHR_DRACO_MESH_COMPRESSION]?p=o(u):p=fV(new ki,u,t),r[f]={primitive:u,promise:p},s.push(p)}}return Promise.all(s)}loadMesh(e){let t=this,i=this.json,r=this.extensions,o=i.meshes[e],s=o.primitives,a=[];for(let l=0,u=s.length;l<u;l++){let f=s[l].material===void 0?Ale(this.cache):this.getDependency("material",s[l].material);a.push(f)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(l){let u=l.slice(0,l.length-1),f=l[l.length-1],h=[];for(let g=0,v=f.length;g<v;g++){let w=f[g],y=s[g],_,T=u[g];if(y.mode===Ss.TRIANGLES||y.mode===Ss.TRIANGLE_STRIP||y.mode===Ss.TRIANGLE_FAN||y.mode===void 0)_=o.isSkinnedMesh===!0?new Ku(w,T):new gi(w,T),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),y.mode===Ss.TRIANGLE_STRIP?_.geometry=oD(_.geometry,Dg):y.mode===Ss.TRIANGLE_FAN&&(_.geometry=oD(_.geometry,Sh));else if(y.mode===Ss.LINES)_=new Lc(w,T);else if(y.mode===Ss.LINE_STRIP)_=new kl(w,T);else if(y.mode===Ss.LINE_LOOP)_=new ng(w,T);else if(y.mode===Ss.POINTS)_=new Ul(w,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(_.geometry.morphAttributes).length>0&&Ple(_,o),_.name=t.createUniqueName(o.name||"mesh_"+e),Wl(_,o),y.extensions&&md(r,_,y),t.assignFinalMaterial(_),h.push(_)}for(let g=0,v=h.length;g<v;g++)t.associations.set(h[g],{meshes:e,primitives:g});if(h.length===1)return o.extensions&&md(r,h[0],o),h[0];let p=new Ar;o.extensions&&md(r,p,o),t.associations.set(p,{meshes:e});for(let g=0,v=h.length;g<v;g++)p.add(h[g]);return p})}loadCamera(e){let t,i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Ii(Qn.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new rd(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Wl(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let r=0,o=t.joints.length;r<o;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],l=[];for(let u=0,f=s.length;u<f;u++){let h=s[u];if(h){a.push(h);let p=new lt;o!==null&&p.fromArray(o.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Ju(a,l)})}loadAnimation(e){let t=this.json,i=this,r=t.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],l=[],u=[],f=[];for(let h=0,p=r.channels.length;h<p;h++){let g=r.channels[h],v=r.samplers[g.sampler],w=g.target,y=w.node,_=r.parameters!==void 0?r.parameters[v.input]:v.input,T=r.parameters!==void 0?r.parameters[v.output]:v.output;w.node!==void 0&&(s.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",T)),u.push(v),f.push(w))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f)]).then(function(h){let p=h[0],g=h[1],v=h[2],w=h[3],y=h[4],_=[];for(let T=0,C=p.length;T<C;T++){let E=p[T],V=g[T],F=v[T],L=w[T],W=y[T];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();let O=i._createAnimationTracks(E,V,F,L,W);if(O)for(let R=0;R<O.length;R++)_.push(O[R])}return new td(o,void 0,_)})}createNodeMesh(e){let t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(e){let t=this.json,i=this,r=t.nodes[e],o=i._loadNodeShallow(e),s=[],a=r.children||[];for(let u=0,f=a.length;u<f;u++)s.push(i.getDependency("node",a[u]));let l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),l]).then(function(u){let f=u[0],h=u[1],p=u[2];p!==null&&f.traverse(function(g){g.isSkinnedMesh&&g.bind(p,Fle)});for(let g=0,v=h.length;g<v;g++)f.add(h[g]);return f})}_loadNodeShallow(e){let t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=t.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(u){return r._getNodeRef(r.cameraCache,o.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let f;if(o.isBone===!0?f=new Ll:u.length>1?f=new Ar:u.length===1?f=u[0]:f=new mi,f!==u[0])for(let h=0,p=u.length;h<p;h++)f.add(u[h]);if(o.name&&(f.userData.name=o.name,f.name=s),Wl(f,o),o.extensions&&md(i,f,o),o.matrix!==void 0){let h=new lt;h.fromArray(o.matrix),f.applyMatrix4(h)}else o.translation!==void 0&&f.position.fromArray(o.translation),o.rotation!==void 0&&f.quaternion.fromArray(o.rotation),o.scale!==void 0&&f.scale.fromArray(o.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],r=this,o=new Ar;i.name&&(o.name=r.createUniqueName(i.name)),Wl(o,i),i.extensions&&md(t,o,i);let s=i.nodes||[],a=[];for(let l=0,u=s.length;l<u;l++)a.push(r.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let f=0,h=l.length;f<h;f++)o.add(l[f]);let u=f=>{let h=new Map;for(let[p,g]of r.associations)(p instanceof Ki||p instanceof Gr)&&h.set(p,g);return f.traverse(p=>{let g=r.associations.get(p);g!=null&&h.set(p,g)}),h};return r.associations=u(o),o})}_createAnimationTracks(e,t,i,r,o){let s=[],a=e.name?e.name:e.uuid,l=[];zc[o.path]===zc.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let u;switch(zc[o.path]){case zc.weights:u=bs;break;case zc.rotation:u=zo;break;case zc.translation:case zc.scale:u=Cs;break;default:switch(i.itemSize){case 1:u=bs;break;case 2:case 3:default:u=Cs;break}break}let f=r.interpolation!==void 0?Dle[r.interpolation]:Xu,h=this._getArrayFromAccessor(i);for(let p=0,g=l.length;p<g;p++){let v=new u(l[p]+"."+zc[o.path],t.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),s.push(v)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let i=OD(t.constructor),r=new Float32Array(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=t[o]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){let r=this instanceof zo?RD:Gw;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function Lle(n,e,t){let i=e.attributes,r=new Hr;if(i.POSITION!==void 0){let a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new B(l[0],l[1],l[2]),new B(u[0],u[1],u[2])),a.normalized){let f=OD(Rh[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let a=new B,l=new B;for(let u=0,f=o.length;u<f;u++){let h=o[u];if(h.POSITION!==void 0){let p=t.json.accessors[h.POSITION],g=p.min,v=p.max;if(g!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),p.normalized){let w=OD(Rh[p.componentType]);l.multiplyScalar(w)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new go;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function fV(n,e,t){let i=e.attributes,r=[];function o(s,a){return t.getDependency("accessor",s).then(function(l){n.setAttribute(a,l)})}for(let s in i){let a=PD[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(e.indices!==void 0&&!n.index){let s=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return Bt.workingColorSpace!==yr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Bt.workingColorSpace}" not supported.`),Wl(n,e),Lle(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Rle(n,e.targets,t):n})}function pV(n,e){let t=new jw(e);return new Promise((i,r)=>{t.load(n,o=>{i(o.scene)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var Ts=Uint8Array,Ph=Uint16Array,kle=Int32Array,mV=new Ts([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gV=new Ts([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ule=new Ts([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vV=function(n,e){for(var t=new Ph(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new kle(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},yV=vV(mV,2),_V=yV.b,Ble=yV.r;_V[28]=258,Ble[258]=28;var xV=vV(gV,0),Vle=xV.b,XIe=xV.r,kD=new Ph(32768);for(Fn=0;Fn<32768;++Fn)$l=(Fn&43690)>>1|(Fn&21845)<<1,$l=($l&52428)>>2|($l&13107)<<2,$l=($l&61680)>>4|($l&3855)<<4,kD[Fn]=(($l&65280)>>8|($l&255)<<8)>>1;var $l,Fn,Ng=function(n,e,t){for(var i=n.length,r=0,o=new Ph(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new Ph(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new Ph(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],f=e-n[r],h=s[n[r]-1]++<<f,p=h|(1<<f)-1;h<=p;++h)a[kD[h]>>l]=u}else for(a=new Ph(i),r=0;r<i;++r)n[r]&&(a[r]=kD[s[n[r]-1]++]>>15-n[r]);return a},Fg=new Ts(288);for(Fn=0;Fn<144;++Fn)Fg[Fn]=8;var Fn;for(Fn=144;Fn<256;++Fn)Fg[Fn]=9;var Fn;for(Fn=256;Fn<280;++Fn)Fg[Fn]=7;var Fn;for(Fn=280;Fn<288;++Fn)Fg[Fn]=8;var Fn,wV=new Ts(32);for(Fn=0;Fn<32;++Fn)wV[Fn]=5;var Fn;var Hle=Ng(Fg,9,1);var zle=Ng(wV,5,1),FD=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ma=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},LD=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},jle=function(n){return(n+7)/8|0},Gle=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new Ts(n.subarray(e,t))};var Wle=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ga=function(n,e,t){var i=new Error(e||Wle[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,ga),!t)throw i;return i},$le=function(n,e,t,i){var r=n.length,o=i?i.length:0;if(!r||e.f&&!e.l)return t||new Ts(0);var s=!t,a=s||e.i!=2,l=e.i;s&&(t=new Ts(r*3));var u=function(rt){var pt=t.length;if(rt>pt){var ct=new Ts(Math.max(pt*2,rt));ct.set(t),t=ct}},f=e.f||0,h=e.p||0,p=e.b||0,g=e.l,v=e.d,w=e.m,y=e.n,_=r*8;do{if(!g){f=ma(n,h,1);var T=ma(n,h+1,3);if(h+=3,T)if(T==1)g=Hle,v=zle,w=9,y=5;else if(T==2){var F=ma(n,h,31)+257,L=ma(n,h+10,15)+4,W=F+ma(n,h+5,31)+1;h+=14;for(var O=new Ts(W),R=new Ts(19),j=0;j<L;++j)R[Ule[j]]=ma(n,h+j*3,7);h+=L*3;for(var pe=FD(R),ae=(1<<pe)-1,Ie=Ng(R,pe,1),j=0;j<W;){var be=Ie[ma(n,h,ae)];h+=be&15;var C=be>>4;if(C<16)O[j++]=C;else{var X=0,ie=0;for(C==16?(ie=3+ma(n,h,3),h+=2,X=O[j-1]):C==17?(ie=3+ma(n,h,7),h+=3):C==18&&(ie=11+ma(n,h,127),h+=7);ie--;)O[j++]=X}}var q=O.subarray(0,F),ve=O.subarray(F);w=FD(q),y=FD(ve),g=Ng(q,w,1),v=Ng(ve,y,1)}else ga(1);else{var C=jle(h)+4,E=n[C-4]|n[C-3]<<8,V=C+E;if(V>r){l&&ga(0);break}a&&u(p+E),t.set(n.subarray(C,V),p),e.b=p+=E,e.p=h=V*8,e.f=f;continue}if(h>_){l&&ga(0);break}}a&&u(p+131072);for(var Ve=(1<<w)-1,tt=(1<<y)-1,ge=h;;ge=h){var X=g[LD(n,h)&Ve],re=X>>4;if(h+=X&15,h>_){l&&ga(0);break}if(X||ga(2),re<256)t[p++]=re;else if(re==256){ge=h,g=null;break}else{var U=re-254;if(re>264){var j=re-257,J=mV[j];U=ma(n,h,(1<<J)-1)+_V[j],h+=J}var _e=v[LD(n,h)&tt],se=_e>>4;_e||ga(3),h+=_e&15;var ve=Vle[se];if(se>3){var J=gV[se];ve+=LD(n,h)&(1<<J)-1,h+=J}if(h>_){l&&ga(0);break}a&&u(p+131072);var He=p+U;if(p<ve){var je=o-ve,Le=Math.min(ve,He);for(je+p<0&&ga(3);p<Le;++p)t[p]=i[je+p]}for(;p<He;++p)t[p]=t[p-ve]}}e.l=g,e.p=ge,e.b=p,e.f=f,g&&(f=1,e.m=w,e.d=v,e.n=y)}while(!f);return p!=t.length&&s?Gle(t,0,p):t.subarray(0,p)};var qle=new Ts(0);var Xle=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&ga(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&ga(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function bV(n,e){return $le(n.subarray(Xle(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var Yle=typeof TextDecoder<"u"&&new TextDecoder,Zle=0;try{Yle.decode(qle,{stream:!0}),Zle=1}catch{}function CV(n,e,t){let i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,o=i,s=Math.floor((r+o)/2);for(;e<t[s]||e>=t[s+1];)e<t[s]?o=s:r=s,s=Math.floor((r+o)/2);return s}function Jle(n,e,t,i){let r=[],o=[],s=[];r[0]=1;for(let a=1;a<=t;++a){o[a]=e-i[n+1-a],s[a]=i[n+a]-e;let l=0;for(let u=0;u<a;++u){let f=s[u+1],h=o[a-u],p=r[u]/(f+h);r[u]=l+f*p,l=h*p}r[a]=l}return r}function EV(n,e,t,i){let r=CV(n,i,e),o=Jle(r,i,n,e),s=new rn(0,0,0,0);for(let a=0;a<=n;++a){let l=t[r-n+a],u=o[a],f=l.w*u;s.x+=l.x*f,s.y+=l.y*f,s.z+=l.z*f,s.w+=l.w*u}return s}function Qle(n,e,t,i,r){let o=[];for(let h=0;h<=t;++h)o[h]=0;let s=[];for(let h=0;h<=i;++h)s[h]=o.slice(0);let a=[];for(let h=0;h<=t;++h)a[h]=o.slice(0);a[0][0]=1;let l=o.slice(0),u=o.slice(0);for(let h=1;h<=t;++h){l[h]=e-r[n+1-h],u[h]=r[n+h]-e;let p=0;for(let g=0;g<h;++g){let v=u[g+1],w=l[h-g];a[h][g]=v+w;let y=a[g][h-1]/a[h][g];a[g][h]=p+v*y,p=w*y}a[h][h]=p}for(let h=0;h<=t;++h)s[0][h]=a[h][t];for(let h=0;h<=t;++h){let p=0,g=1,v=[];for(let w=0;w<=t;++w)v[w]=o.slice(0);v[0][0]=1;for(let w=1;w<=i;++w){let y=0,_=h-w,T=t-w;h>=w&&(v[g][0]=v[p][0]/a[T+1][_],y=v[g][0]*a[_][T]);let C=_>=-1?1:-_,E=h-1<=T?w-1:t-h;for(let F=C;F<=E;++F)v[g][F]=(v[p][F]-v[p][F-1])/a[T+1][_+F],y+=v[g][F]*a[_+F][T];h<=T&&(v[g][w]=-v[p][w-1]/a[T+1][h],y+=v[g][w]*a[h][T]),s[w][h]=y;let V=p;p=g,g=V}}let f=t;for(let h=1;h<=i;++h){for(let p=0;p<=t;++p)s[h][p]*=f;f*=t-h}return s}function ece(n,e,t,i,r){let o=r<n?r:n,s=[],a=CV(n,i,e),l=Qle(a,i,n,o,e),u=[];for(let f=0;f<t.length;++f){let h=t[f].clone(),p=h.w;h.x*=p,h.y*=p,h.z*=p,u[f]=h}for(let f=0;f<=o;++f){let h=u[a-n].clone().multiplyScalar(l[f][0]);for(let p=1;p<=n;++p)h.add(u[a-n+p].clone().multiplyScalar(l[f][p]));s[f]=h}for(let f=o+1;f<=r+1;++f)s[f]=new rn(0,0,0);return s}function tce(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function nce(n){let e=n.length,t=[],i=[];for(let o=0;o<e;++o){let s=n[o];t[o]=new B(s.x,s.y,s.z),i[o]=s.w}let r=[];for(let o=0;o<e;++o){let s=t[o].clone();for(let a=1;a<=o;++a)s.sub(r[o-a].clone().multiplyScalar(tce(o,a)*i[a]));r[o]=s.divideScalar(i[0])}return r}function MV(n,e,t,i,r){let o=ece(n,e,t,i,r);return nce(o)}var Ww=class extends zr{constructor(e,t,i,r,o){super();let s=t?t.length-1:0,a=i?i.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=o||s;for(let l=0;l<a;++l){let u=i[l];this.controlPoints[l]=new rn(u.x,u.y,u.z,u.w)}}getPoint(e,t=new B){let i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=EV(this.degree,this.knots,this.controlPoints,r);return o.w!==1&&o.divideScalar(o.w),i.set(o.x,o.y,o.z)}getTangent(e,t=new B){let i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=MV(this.degree,this.knots,this.controlPoints,r,1);return i.copy(o[1]).normalize(),i}toJSON(){let e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(t=>t.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(t=>new rn(t[0],t[1],t[2],t[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}};var ln,Ui,Wr,qw=class extends Go{constructor(e){super(e)}load(e,t,i,r){let o=this,s=o.path===""?fa.extractUrlBase(e):o.path,a=new Wa(this.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(l){try{t(o.parse(l,s))}catch(u){r?r(u):console.error(u),o.manager.itemError(e)}},i,r)}parse(e,t){if(rce(e))ln=new GD().parse(e);else{let r=IV(e);if(!oce(r))throw new Error("THREE.FBXLoader: Unknown format.");if(SV(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+SV(r));ln=new jD().parse(r)}let i=new nd(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new VD(i,this.manager).parse(ln)}},VD=class{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Ui=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),o=new HD().parse(r);return this.parseScene(r,o,i),Wr}parseConnections(){let e=new Map;return"Connections"in ln&&ln.Connections.connections.forEach(function(i){let r=i[0],o=i[1],s=i[2];e.has(r)||e.set(r,{parents:[],children:[]});let a={ID:o,relationship:s};e.get(r).parents.push(a),e.has(o)||e.set(o,{parents:[],children:[]});let l={ID:r,relationship:s};e.get(o).children.push(l)}),e}parseImages(){let e={},t={};if("Video"in ln.Objects){let i=ln.Objects.Video;for(let r in i){let o=i[r],s=parseInt(r);if(e[s]=o.RelativeFilename||o.Filename,"Content"in o){let a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,l=typeof o.Content=="string"&&o.Content!=="";if(a||l){let u=this.parseImage(i[r]);t[o.RelativeFilename||o.Filename]=u}}}}for(let i in e){let r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){let t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase(),o;switch(r){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+o+";base64,"+t;{let s=new Uint8Array(t);return window.URL.createObjectURL(new Blob([s],{type:o}))}}parseTextures(e){let t=new Map;if("Texture"in ln.Objects){let i=ln.Objects.Texture;for(let r in i){let o=this.parseTexture(i[r],e);t.set(parseInt(r),o)}}return t}parseTexture(e,t){let i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;let r=e.WrapModeU,o=e.WrapModeV,s=r!==void 0?r.value:0,a=o!==void 0?o.value:0;if(i.wrapS=s===0?ca:Vo,i.wrapT=a===0?ca:Vo,"Scaling"in e){let l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){let l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){let i=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),r=e.FileName.split(".").pop().toLowerCase(),o=i.has(r)?this.manager.getHandler(`.${r}`):this.textureLoader;if(!o)return console.warn(`FBXLoader: ${r.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Gr;let s=o.path;s||o.setPath(this.textureLoader.path);let a=Ui.get(e.id).children,l;a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(l=t[a[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&o.setPath(void 0));let u=o.load(l);return o.setPath(s),u}parseMaterials(e){let t=new Map;if("Material"in ln.Objects){let i=ln.Objects.Material;for(let r in i){let o=this.parseMaterial(i[r],e);o!==null&&t.set(parseInt(r),o)}}return t}parseMaterial(e,t){let i=e.id,r=e.attrName,o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!Ui.has(i))return null;let s=this.parseParameters(e,t,i),a;switch(o.toLowerCase()){case"phong":a=new Ga;break;case"lambert":a=new pg;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),a=new Ga;break}return a.setValues(s),a.name=r,a}parseParameters(e,t,i){let r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=Bt.toWorkingColorSpace(new ft().fromArray(e.Diffuse.value),xn):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=Bt.toWorkingColorSpace(new ft().fromArray(e.DiffuseColor.value),xn)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=Bt.toWorkingColorSpace(new ft().fromArray(e.Emissive.value),xn):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=Bt.toWorkingColorSpace(new ft().fromArray(e.EmissiveColor.value),xn)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),r.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),(r.opacity===1||r.opacity===0)&&(r.opacity=e.Opacity?parseFloat(e.Opacity.value):null,r.opacity===null&&(r.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=Bt.toWorkingColorSpace(new ft().fromArray(e.Specular.value),xn):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=Bt.toWorkingColorSpace(new ft().fromArray(e.SpecularColor.value),xn));let o=this;return Ui.get(i).children.forEach(function(s){let a=s.relationship;switch(a){case"Bump":r.bumpMap=o.getTexture(t,s.ID);break;case"Maya|TEX_ao_map":r.aoMap=o.getTexture(t,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=o.getTexture(t,s.ID),r.map!==void 0&&(r.map.colorSpace=xn);break;case"DisplacementColor":r.displacementMap=o.getTexture(t,s.ID);break;case"EmissiveColor":r.emissiveMap=o.getTexture(t,s.ID),r.emissiveMap!==void 0&&(r.emissiveMap.colorSpace=xn);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=o.getTexture(t,s.ID);break;case"ReflectionColor":r.envMap=o.getTexture(t,s.ID),r.envMap!==void 0&&(r.envMap.mapping=xh,r.envMap.colorSpace=xn);break;case"SpecularColor":r.specularMap=o.getTexture(t,s.ID),r.specularMap!==void 0&&(r.specularMap.colorSpace=xn);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=o.getTexture(t,s.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in ln.Objects&&t in ln.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Ui.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in ln.Objects){let i=ln.Objects.Deformer;for(let r in i){let o=i[r],s=Ui.get(parseInt(r));if(o.attrType==="Skin"){let a=this.parseSkeleton(s,i);a.ID=r,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=s.parents[0].ID,e[r]=a}else if(o.attrType==="BlendShape"){let a={id:r};a.rawTargets=this.parseMorphTargets(s,i),a.id=r,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let i=[];return e.children.forEach(function(r){let o=t[r.ID];if(o.attrType!=="Cluster")return;let s={ID:r.ID,indices:[],weights:[],transformLink:new lt().fromArray(o.TransformLink.a)};"Indexes"in o&&(s.indices=o.Indexes.a,s.weights=o.Weights.a),i.push(s)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){let i=[];for(let r=0;r<e.children.length;r++){let o=e.children[r],s=t[o.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;a.geoID=Ui.get(parseInt(o.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){Wr=new Ar;let r=this.parseModels(e.skeletons,t,i),o=ln.Objects.Model,s=this;r.forEach(function(l){let u=o[l.ID];s.setLookAtProperties(l,u),Ui.get(l.ID).parents.forEach(function(h){let p=r.get(h.ID);p!==void 0&&p.add(l)}),l.parent===null&&Wr.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.addGlobalSceneSettings(),Wr.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);let u=TV(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});let a=new zD().parse();Wr.children.length===1&&Wr.children[0].isGroup&&(Wr.children[0].animations=a,Wr=Wr.children[0]),Wr.animations=a}parseModels(e,t,i){let r=new Map,o=ln.Objects.Model;for(let s in o){let a=parseInt(s),l=o[s],u=Ui.get(a),f=this.buildSkeleton(u,e,a,l.attrName);if(!f){switch(l.attrType){case"Camera":f=this.createCamera(u);break;case"Light":f=this.createLight(u);break;case"Mesh":f=this.createMesh(u,t,i);break;case"NurbsCurve":f=this.createCurve(u,t);break;case"LimbNode":case"Root":f=new Ll;break;case"Null":default:f=new Ar;break}f.name=l.attrName?jn.sanitizeNodeName(l.attrName):"",f.userData.originalName=l.attrName,f.ID=a}this.getTransformData(f,l),r.set(a,f)}return r}buildSkeleton(e,t,i,r){let o=null;return e.parents.forEach(function(s){for(let a in t){let l=t[a];l.rawBones.forEach(function(u,f){if(u.ID===s.ID){let h=o;o=new Ll,o.matrixWorld.copy(u.transformLink),o.name=r?jn.sanitizeNodeName(r):"",o.userData.originalName=r,o.ID=i,l.bones[f]=o,h!==null&&o.add(h)}})}}),o}createCamera(e){let t,i;if(e.children.forEach(function(r){let o=ln.Objects.NodeAttribute[r.ID];o!==void 0&&(i=o)}),i===void 0)t=new mi;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let o=1;i.NearPlane!==void 0&&(o=i.NearPlane.value/1e3);let s=1e3;i.FarPlane!==void 0&&(s=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);let u=a/l,f=45;i.FieldOfView!==void 0&&(f=i.FieldOfView.value);let h=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new Ii(f,u,o,s),h!==null&&t.setFocalLength(h);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new mi;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new mi;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){let o=ln.Objects.NodeAttribute[r.ID];o!==void 0&&(i=o)}),i===void 0)t=new mi;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let o=16777215;i.Color!==void 0&&(o=Bt.toWorkingColorSpace(new ft().fromArray(i.Color.value),xn));let s=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(s=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);let l=1;switch(r){case 0:t=new Uc(o,s,a,l);break;case 1:t=new od(o,s);break;case 2:let u=Math.PI/3;i.InnerAngle!==void 0&&(u=Qn.degToRad(i.InnerAngle.value));let f=0;i.OuterAngle!==void 0&&(f=Qn.degToRad(i.OuterAngle.value),f=Math.max(f,1)),t=new id(o,s,a,u,f,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Uc(o,s);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,o=null,s=null,a=[];if(e.children.forEach(function(l){t.has(l.ID)&&(o=t.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?s=a:a.length>0?s=a[0]:(s=new Ga({name:Go.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(s)),"color"in o.attributes&&a.forEach(function(l){l.vertexColors=!0}),o.groups.length>0){let l=!1;for(let u=0,f=o.groups.length;u<f;u++){let h=o.groups[u];(h.materialIndex<0||h.materialIndex>=a.length)&&(h.materialIndex=a.length,l=!0)}if(l){let u=new Ga;a.push(u)}}return o.FBX_Deformer?(r=new Ku(o,s),r.normalizeSkinWeights()):r=new gi(o,s),r}createCurve(e,t){let i=e.children.reduce(function(o,s){return t.has(s.ID)&&(o=t.get(s.ID)),o},null),r=new ws({name:Go.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new kl(i,r)}getTransformData(e,t){let i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=Lg(t.RotationOrder.value):i.eulerOrder=Lg(0),"Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Ui.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){let o=ln.Objects.Model[r.ID];if("Lcl_Translation"in o){let s=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),Wr.add(e.target)):e.lookAt(new B().fromArray(s))}}})}bindSkeleton(e,t,i){let r=this.parsePoseNodes();for(let o in e){let s=e[o];Ui.get(parseInt(s.ID)).parents.forEach(function(l){if(t.has(l.ID)){let u=l.ID;Ui.get(u).parents.forEach(function(h){i.has(h.ID)&&i.get(h.ID).bind(new Ju(s.bones),r[h.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in ln.Objects){let t=ln.Objects.Pose;for(let i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){let r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(o){e[o.Node]=new lt().fromArray(o.Matrix.a)}):e[r.Node]=new lt().fromArray(r.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in ln){if("AmbientColor"in ln.GlobalSettings){let e=ln.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){let o=new ft().setRGB(t,i,r,xn);Wr.add(new yg(o,1))}}"UnitScaleFactor"in ln.GlobalSettings&&(Wr.userData.unitScaleFactor=ln.GlobalSettings.UnitScaleFactor.value)}}},HD=class{constructor(){this.negativeMaterialIndices=!1}parse(e){let t=new Map;if("Geometry"in ln.Objects){let i=ln.Objects.Geometry;for(let r in i){let o=Ui.get(parseInt(r)),s=this.parseGeometry(o,i[r],e);t.set(parseInt(r),s)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){let r=i.skeletons,o=[],s=e.parents.map(function(h){return ln.Objects.Model[h.ID]});if(s.length===0)return;let a=e.children.reduce(function(h,p){return r[p.ID]!==void 0&&(h=r[p.ID]),h},null);e.children.forEach(function(h){i.morphTargets[h.ID]!==void 0&&o.push(i.morphTargets[h.ID])});let l=s[0],u={};"RotationOrder"in l&&(u.eulerOrder=Lg(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);let f=TV(u);return this.genGeometry(t,a,o,f)}genGeometry(e,t,i,r){let o=new ki;e.attrName&&(o.name=e.attrName);let s=this.parseGeoNode(e,t),a=this.genBuffers(s),l=new Bn(a.vertex,3);if(l.applyMatrix4(r),o.setAttribute("position",l),a.colors.length>0&&o.setAttribute("color",new Bn(a.colors,3)),t&&(o.setAttribute("skinIndex",new Zu(a.weightsIndices,4)),o.setAttribute("skinWeight",new Bn(a.vertexWeights,4)),o.FBX_Deformer=t),a.normal.length>0){let u=new Gt().getNormalMatrix(r),f=new Bn(a.normal,3);f.applyNormalMatrix(u),o.setAttribute("normal",f)}if(a.uvs.forEach(function(u,f){let h=f===0?"uv":`uv${f}`;o.setAttribute(h,new Bn(a.uvs[f],2))}),s.material&&s.material.mappingType!=="AllSame"){let u=a.materialIndex[0],f=0;if(a.materialIndex.forEach(function(h,p){h!==u&&(o.addGroup(f,p-f,u),u=h,f=p)}),o.groups.length>0){let h=o.groups[o.groups.length-1],p=h.start+h.count;p!==a.materialIndex.length&&o.addGroup(p,a.materialIndex.length-p,u)}o.groups.length===0&&o.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(o,e,i,r),o}parseGeoNode(e,t){let i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,o){r.indices.forEach(function(s,a){i.weightTable[s]===void 0&&(i.weightTable[s]=[]),i.weightTable[s].push({id:o,weight:r.weights[a]})})})),i}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,r=0,o=!1,s=[],a=[],l=[],u=[],f=[],h=[],p=this;return e.vertexIndices.forEach(function(g,v){let w,y=!1;g<0&&(g=g^-1,y=!0);let _=[],T=[];if(s.push(g*3,g*3+1,g*3+2),e.color){let C=$w(v,i,g,e.color);l.push(C[0],C[1],C[2])}if(e.skeleton){if(e.weightTable[g]!==void 0&&e.weightTable[g].forEach(function(C){T.push(C.weight),_.push(C.id)}),T.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);let C=[0,0,0,0],E=[0,0,0,0];T.forEach(function(V,F){let L=V,W=_[F];E.forEach(function(O,R,j){if(L>O){j[R]=L,L=O;let pe=C[R];C[R]=W,W=pe}})}),_=C,T=E}for(;T.length<4;)T.push(0),_.push(0);for(let C=0;C<4;++C)f.push(T[C]),h.push(_[C])}if(e.normal){let C=$w(v,i,g,e.normal);a.push(C[0],C[1],C[2])}e.material&&e.material.mappingType!=="AllSame"&&(w=$w(v,i,g,e.material)[0],w<0&&(p.negativeMaterialIndices=!0,w=0)),e.uv&&e.uv.forEach(function(C,E){let V=$w(v,i,g,C);u[E]===void 0&&(u[E]=[]),u[E].push(V[0]),u[E].push(V[1])}),r++,y&&(p.genFace(t,e,s,w,a,l,u,f,h,r),i++,r=0,s=[],a=[],l=[],u=[],f=[],h=[])}),t}getNormalNewell(e){let t=new B(0,0,0);for(let i=0;i<e.length;i++){let r=e[i],o=e[(i+1)%e.length];t.x+=(r.y-o.y)*(r.z+o.z),t.y+=(r.z-o.z)*(r.x+o.x),t.z+=(r.x-o.x)*(r.y+o.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){let t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new B(0,1,0):new B(0,0,1)).cross(t).normalize(),o=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:o}}flattenVertex(e,t,i){return new We(e.dot(t),e.dot(i))}genFace(e,t,i,r,o,s,a,l,u,f){let h;if(f>3){let p=[],g=t.baseVertexPositions||t.vertexPositions;for(let _=0;_<i.length;_+=3)p.push(new B(g[i[_]],g[i[_+1]],g[i[_+2]]));let{tangent:v,bitangent:w}=this.getNormalTangentAndBitangent(p),y=[];for(let _ of p)y.push(this.flattenVertex(_,v,w));h=Oc.triangulateShape(y,[])}else h=[[0,1,2]];for(let[p,g,v]of h)e.vertex.push(t.vertexPositions[i[p*3]]),e.vertex.push(t.vertexPositions[i[p*3+1]]),e.vertex.push(t.vertexPositions[i[p*3+2]]),e.vertex.push(t.vertexPositions[i[g*3]]),e.vertex.push(t.vertexPositions[i[g*3+1]]),e.vertex.push(t.vertexPositions[i[g*3+2]]),e.vertex.push(t.vertexPositions[i[v*3]]),e.vertex.push(t.vertexPositions[i[v*3+1]]),e.vertex.push(t.vertexPositions[i[v*3+2]]),t.skeleton&&(e.vertexWeights.push(l[p*4]),e.vertexWeights.push(l[p*4+1]),e.vertexWeights.push(l[p*4+2]),e.vertexWeights.push(l[p*4+3]),e.vertexWeights.push(l[g*4]),e.vertexWeights.push(l[g*4+1]),e.vertexWeights.push(l[g*4+2]),e.vertexWeights.push(l[g*4+3]),e.vertexWeights.push(l[v*4]),e.vertexWeights.push(l[v*4+1]),e.vertexWeights.push(l[v*4+2]),e.vertexWeights.push(l[v*4+3]),e.weightsIndices.push(u[p*4]),e.weightsIndices.push(u[p*4+1]),e.weightsIndices.push(u[p*4+2]),e.weightsIndices.push(u[p*4+3]),e.weightsIndices.push(u[g*4]),e.weightsIndices.push(u[g*4+1]),e.weightsIndices.push(u[g*4+2]),e.weightsIndices.push(u[g*4+3]),e.weightsIndices.push(u[v*4]),e.weightsIndices.push(u[v*4+1]),e.weightsIndices.push(u[v*4+2]),e.weightsIndices.push(u[v*4+3])),t.color&&(e.colors.push(s[p*3]),e.colors.push(s[p*3+1]),e.colors.push(s[p*3+2]),e.colors.push(s[g*3]),e.colors.push(s[g*3+1]),e.colors.push(s[g*3+2]),e.colors.push(s[v*3]),e.colors.push(s[v*3+1]),e.colors.push(s[v*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(o[p*3]),e.normal.push(o[p*3+1]),e.normal.push(o[p*3+2]),e.normal.push(o[g*3]),e.normal.push(o[g*3+1]),e.normal.push(o[g*3+2]),e.normal.push(o[v*3]),e.normal.push(o[v*3+1]),e.normal.push(o[v*3+2])),t.uv&&t.uv.forEach(function(w,y){e.uvs[y]===void 0&&(e.uvs[y]=[]),e.uvs[y].push(a[y][p*2]),e.uvs[y].push(a[y][p*2+1]),e.uvs[y].push(a[y][g*2]),e.uvs[y].push(a[y][g*2+1]),e.uvs[y].push(a[y][v*2]),e.uvs[y].push(a[y][v*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let o=this;i.forEach(function(s){s.rawTargets.forEach(function(a){let l=ln.Objects.Geometry[a.geoID];l!==void 0&&o.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,i,r,o){let s=t.Vertices!==void 0?t.Vertices.a:[],a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=i.Vertices!==void 0?i.Vertices.a:[],u=i.Indexes!==void 0?i.Indexes.a:[],f=e.attributes.position.count*3,h=new Float32Array(f);for(let w=0;w<u.length;w++){let y=u[w]*3;h[y]=l[w*3],h[y+1]=l[w*3+1],h[y+2]=l[w*3+2]}let p={vertexIndices:a,vertexPositions:h,baseVertexPositions:s},g=this.genBuffers(p),v=new Bn(g.vertex,3);v.name=o||i.attrName,v.applyMatrix4(r),e.morphAttributes.position.push(v)}parseNormals(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a,o=[];return i==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:o,mappingType:t,referenceType:i}}parseUVs(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a,o=[];return i==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:r,indices:o,mappingType:t,referenceType:i}}parseVertexColors(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a,o=[];i==="IndexToDirect"&&(o=e.ColorIndex.a);for(let s=0,a=new ft;s<r.length;s+=4)a.fromArray(r,s),Bt.toWorkingColorSpace(a,xn),a.toArray(r,s);return{dataSize:4,buffer:r,indices:o,mappingType:t,referenceType:i}}parseMaterialIndices(e){let t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};let r=e.Materials.a,o=[];for(let s=0;s<r.length;++s)o.push(s);return{dataSize:1,buffer:r,indices:o,mappingType:t,referenceType:i}}parseNurbsGeometry(e){let t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ki;let i=t-1,r=e.KnotVector.a,o=[],s=e.Points.a;for(let h=0,p=s.length;h<p;h+=4)o.push(new rn().fromArray(s,h));let a,l;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let h=0;h<i;++h)o.push(o[h])}let f=new Ww(i,r,o,a,l).getPoints(o.length*12);return new ki().setFromPoints(f)}},zD=class{parse(){let e=[],t=this.parseClips();if(t!==void 0)for(let i in t){let r=t[i],o=this.addClip(r);e.push(o)}return e}parseClips(){if(ln.Objects.AnimationCurve===void 0)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=ln.Objects.AnimationCurveNode,t=new Map;for(let i in e){let r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){let o={id:r.id,attr:r.attrName,curves:{}};t.set(o.id,o)}}return t}parseAnimationCurves(e){let t=ln.Objects.AnimationCurve;for(let i in t){let r={id:t[i].id,times:t[i].KeyTime.a.map(sce),values:t[i].KeyValueFloat.a},o=Ui.get(r.id);if(o!==void 0){let s=o.parents[0].ID,a=o.parents[0].relationship;a.match(/X/)?e.get(s).curves.x=r:a.match(/Y/)?e.get(s).curves.y=r:a.match(/Z/)?e.get(s).curves.z=r:a.match(/DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=r)}}}parseAnimationLayers(e){let t=ln.Objects.AnimationLayer,i=new Map;for(let r in t){let o=[],s=Ui.get(parseInt(r));s!==void 0&&(s.children.forEach(function(l,u){if(e.has(l.ID)){let f=e.get(l.ID);if(f.curves.x!==void 0||f.curves.y!==void 0||f.curves.z!==void 0){if(o[u]===void 0){let h=Ui.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(h!==void 0){let p=ln.Objects.Model[h.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}let g={modelName:p.attrName?jn.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Wr.traverse(function(v){v.ID===p.id&&(g.transform=v.matrix,v.userData.transformData&&(g.eulerOrder=v.userData.transformData.eulerOrder))}),g.transform||(g.transform=new lt),"PreRotation"in p&&(g.preRotation=p.PreRotation.value),"PostRotation"in p&&(g.postRotation=p.PostRotation.value),o[u]=g}}o[u]&&(o[u][f.attr]=f)}else if(f.curves.morph!==void 0){if(o[u]===void 0){let h=Ui.get(l.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID,p=Ui.get(h).parents[0].ID,g=Ui.get(p).parents[0].ID,v=Ui.get(g).parents[0].ID,w=ln.Objects.Model[v],y={modelName:w.attrName?jn.sanitizeNodeName(w.attrName):"",morphName:ln.Objects.Deformer[h].attrName};o[u]=y}o[u][f.attr]=f}}}),i.set(parseInt(r),o))}return i}parseAnimStacks(e){let t=ln.Objects.AnimationStack,i={};for(let r in t){let o=Ui.get(parseInt(r)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=e.get(o[0].ID);i[r]={name:t[r].attrName,layer:s}}return i}addClip(e){let t=[],i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new td(e.name,-1,t)}generateTracks(e){let t=[],i=new B,r=new B;if(e.transform&&e.transform.decompose(i,new pi,r),i=i.toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){let o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){let o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,r){let o=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(o,t,i);return new Cs(e+"."+r,o,s)}generateRotationTrack(e,t,i,r,o){let s,a;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){let p=this.interpolateRotations(t.x,t.y,t.z,o);s=p[0],a=p[1]}let l=Lg(0);i!==void 0&&(i=i.map(Qn.degToRad),i.push(l),i=new lr().fromArray(i),i=new pi().setFromEuler(i)),r!==void 0&&(r=r.map(Qn.degToRad),r.push(l),r=new lr().fromArray(r),r=new pi().setFromEuler(r).invert());let u=new pi,f=new lr,h=[];if(!a||!s)return new zo(e+".quaternion",[0],[0]);for(let p=0;p<a.length;p+=3)f.set(a[p],a[p+1],a[p+2],o),u.setFromEuler(f),i!==void 0&&u.premultiply(i),r!==void 0&&u.multiply(r),p>2&&new pi().fromArray(h,(p-3)/3*4).dot(u)<0&&u.set(-u.x,-u.y,-u.z,-u.w),u.toArray(h,p/3*4);return new zo(e+".quaternion",s,h)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,i=t.values.map(function(o){return o/100}),r=Wr.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new bs(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let o=1;o<t.length;o++){let s=t[o];s!==r&&(t[i]=s,r=s,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){let r=i,o=[],s=-1,a=-1,l=-1;return e.forEach(function(u){if(t.x&&(s=t.x.times.indexOf(u)),t.y&&(a=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),s!==-1){let f=t.x.values[s];o.push(f),r[0]=f}else o.push(r[0]);if(a!==-1){let f=t.y.values[a];o.push(f),r[1]=f}else o.push(r[1]);if(l!==-1){let f=t.z.values[l];o.push(f),r[2]=f}else o.push(r[2])}),o}interpolateRotations(e,t,i,r){let o=[],s=[];o.push(e.times[0]),s.push(Qn.degToRad(e.values[0])),s.push(Qn.degToRad(t.values[0])),s.push(Qn.degToRad(i.values[0]));for(let a=1;a<e.values.length;a++){let l=[e.values[a-1],t.values[a-1],i.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;let u=l.map(Qn.degToRad),f=[e.values[a],t.values[a],i.values[a]];if(isNaN(f[0])||isNaN(f[1])||isNaN(f[2]))continue;let h=f.map(Qn.degToRad),p=[f[0]-l[0],f[1]-l[1],f[2]-l[2]],g=[Math.abs(p[0]),Math.abs(p[1]),Math.abs(p[2])];if(g[0]>=180||g[1]>=180||g[2]>=180){let w=Math.max(...g)/180,y=new lr(...u,r),_=new lr(...h,r),T=new pi().setFromEuler(y),C=new pi().setFromEuler(_);T.dot(C)&&C.set(-C.x,-C.y,-C.z,-C.w);let E=e.times[a-1],V=e.times[a]-E,F=new pi,L=new lr;for(let W=0;W<1;W+=1/w)F.copy(T.clone().slerp(C.clone(),W)),o.push(E+W*V),L.setFromQuaternion(F,r),s.push(L.x),s.push(L.y),s.push(L.z)}else o.push(e.times[a]),s.push(Qn.degToRad(e.values[a])),s.push(Qn.degToRad(t.values[a])),s.push(Qn.degToRad(i.values[a]))}return[o,s]}},jD=class{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Yw,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,o){let s=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(s||a)return;let l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),f=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):u?t.parseNodeProperty(r,u,i[++o]):f?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){let i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:i},s=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,o):i in a?(i==="PoseNode"?a.PoseNode.push(o):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),s.id!==""&&(a[i][s.id]=o)):typeof s.id=="number"?(a[i]={},a[i][s.id]=o):i!=="Properties70"&&(i==="PoseNode"?a[i]=[o]:a[i]=o),typeof s.id=="number"&&(o.id=s.id),s.name!==""&&(o.attrName=s.name),s.type!==""&&(o.attrType=s.type),this.pushStack(o)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),o=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&o===","&&(o=i.replace(/"/g,"").replace(/,$/,"").trim());let s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,r,o);return}if(r==="C"){let l=o.split(",").slice(1),u=parseInt(l[0]),f=parseInt(l[1]),h=o.split(",").slice(3);h=h.map(function(p){return p.trim().replace(/^"/,"")}),r="connections",o=[u,f],lce(o,h),s[r]===void 0&&(s[r]=[])}r==="Node"&&(s.id=o),r in s&&Array.isArray(s[r])?s[r].push(o):r!=="a"?s[r]=o:s.a=o,this.setCurrentProp(s,r),r==="a"&&o.slice(-1)!==","&&(s.a=BD(o))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=BD(t.a))}parseNodeSpecialProperty(e,t,i){let r=i.split('",').map(function(f){return f.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=r[0],s=r[1],a=r[2],l=r[3],u=r[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=BD(u);break}this.getPrevNode()[o]={type:s,type2:a,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),o)}},GD=class{parse(e){let t=new Xw(e);t.skip(23);let i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);let r=new Yw;for(;!this.endOfContent(t);){let o=this.parseNode(t,i);o!==null&&r.add(o.name,o)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let i={},r=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let s=e.getUint8(),a=e.getString(s);if(r===0)return null;let l=[];for(let p=0;p<o;p++)l.push(this.parseProperty(e));let u=l.length>0?l[0]:"",f=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(i.singleProperty=o===1&&e.getOffset()===r;r>e.getOffset();){let p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,i,p)}return i.propertyList=l,typeof u=="number"&&(i.id=u),f!==""&&(i.attrName=f),h!==""&&(i.attrType=h),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){let r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){let r=[];i.propertyList.forEach(function(o,s){s!==0&&r.push(o)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(o){t[o]=i[o]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],o=i.propertyList[1],s=i.propertyList[2],a=i.propertyList[3],l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:o,type2:s,flag:a,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){let t=e.getString(1),i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":let r=e.getUint32(),o=e.getUint32(),s=e.getUint32();if(o===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}let a=bV(new Uint8Array(e.getArrayBuffer(s))),l=new Xw(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},Xw=class{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){let t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let r=i.indexOf(0);return r>=0&&(i=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(i)}},Yw=class{add(e,t){this[e]=t}};function rce(n){let e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===IV(n,0,e.length)}function oce(n){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],t=0;function i(r){let o=n[r-1];return n=n.slice(t+r),t++,o}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function SV(n){let e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function sce(n){return n/46186158e3}var ace=[];function $w(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);let o=r*i.dataSize,s=o+i.dataSize;return cce(ace,i.buffer,o,s)}var UD=new lr,Oh=new B;function TV(n){let e=new lt,t=new lt,i=new lt,r=new lt,o=new lt,s=new lt,a=new lt,l=new lt,u=new lt,f=new lt,h=new lt,p=new lt,g=n.inheritType?n.inheritType:0;n.translation&&e.setPosition(Oh.fromArray(n.translation));let v=Lg(0);if(n.preRotation){let j=n.preRotation.map(Qn.degToRad);j.push(v),t.makeRotationFromEuler(UD.fromArray(j))}if(n.rotation){let j=n.rotation.map(Qn.degToRad);j.push(n.eulerOrder||v),i.makeRotationFromEuler(UD.fromArray(j))}if(n.postRotation){let j=n.postRotation.map(Qn.degToRad);j.push(v),r.makeRotationFromEuler(UD.fromArray(j)),r.invert()}n.scale&&o.scale(Oh.fromArray(n.scale)),n.scalingOffset&&a.setPosition(Oh.fromArray(n.scalingOffset)),n.scalingPivot&&s.setPosition(Oh.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Oh.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(Oh.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(h.copy(n.parentMatrix),f.copy(n.parentMatrixWorld));let w=t.clone().multiply(i).multiply(r),y=new lt;y.extractRotation(f);let _=new lt;_.copyPosition(f);let T=_.clone().invert().multiply(f),C=y.clone().invert().multiply(T),E=o,V=new lt;if(g===0)V.copy(y).multiply(w).multiply(C).multiply(E);else if(g===1)V.copy(y).multiply(C).multiply(w).multiply(E);else{let pe=new lt().scale(new B().setFromMatrixScale(h)).clone().invert(),ae=C.clone().multiply(pe);V.copy(y).multiply(w).multiply(ae).multiply(E)}let F=u.clone().invert(),L=s.clone().invert(),W=e.clone().multiply(l).multiply(u).multiply(t).multiply(i).multiply(r).multiply(F).multiply(a).multiply(s).multiply(o).multiply(L),O=new lt().copyPosition(W),R=f.clone().multiply(O);return p.copyPosition(R),W=p.clone().multiply(V),W.premultiply(f.invert()),W}function Lg(n){n=n||0;let e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function BD(n){return n.split(",").map(function(t){return parseFloat(t)})}function IV(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function lce(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function cce(n,e,t,i){for(let r=t,o=0;r<i;r++,o++)n[o]=e[r];return n}function DV(n,e){let t=new qw(e);return new Promise((i,r)=>{t.load(n,o=>{i(o)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var uce=/^[og]\s*(.+)?/,dce=/^mtllib /,fce=/^usemtl /,hce=/^usemap /,AV=/\s+/,RV=new B,WD=new B,PV=new B,OV=new B,Is=new B,Zw=new ft;function pce(){let n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}let i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,o){let s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);let a={index:this.materials.length,name:r||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:s!==void 0?s.smooth:this.smooth,groupStart:s!==void 0?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){let u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){let o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),r&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},i&&i.name&&typeof i.clone=="function"){let r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){let r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){let r=this.normals,o=this.object.geometry.normals;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){let r=this.vertices,o=this.object.geometry.normals;RV.fromArray(r,e),WD.fromArray(r,t),PV.fromArray(r,i),Is.subVectors(PV,WD),OV.subVectors(RV,WD),Is.cross(OV),Is.normalize(),o.push(Is.x,Is.y,Is.z),o.push(Is.x,Is.y,Is.z),o.push(Is.x,Is.y,Is.z)},addColor:function(e,t,i){let r=this.colors,o=this.object.geometry.colors;r[e]!==void 0&&o.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&o.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&o.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){let r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0],r[e+1]),o.push(r[t+0],r[t+1]),o.push(r[i+0],r[i+1])},addDefaultUV:function(){let e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){let t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,o,s,a,l,u){let f=this.vertices.length,h=this.parseVertexIndex(e,f),p=this.parseVertexIndex(t,f),g=this.parseVertexIndex(i,f);if(this.addVertex(h,p,g),this.addColor(h,p,g),a!==void 0&&a!==""){let v=this.normals.length;h=this.parseNormalIndex(a,v),p=this.parseNormalIndex(l,v),g=this.parseNormalIndex(u,v),this.addNormal(h,p,g)}else this.addFaceNormal(h,p,g);if(r!==void 0&&r!==""){let v=this.uvs.length;h=this.parseUVIndex(r,v),p=this.parseUVIndex(o,v),g=this.parseUVIndex(s,v),this.addUV(h,p,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";let t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){let o=this.parseVertexIndex(e[i],t);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";let i=this.vertices.length,r=this.uvs.length;for(let o=0,s=e.length;o<s;o++)this.addVertexLine(this.parseVertexIndex(e[o],i));for(let o=0,s=t.length;o<s;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return n.startObject("",!1),n}var Kw=class extends Go{constructor(e){super(e),this.materials=null}load(e,t,i,r){let o=this,s=new Wa(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){let t=new pce;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));let i=e.split(`
`),r=[];for(let a=0,l=i.length;a<l;a++){let u=i[a].trimStart();if(u.length===0)continue;let f=u.charAt(0);if(f!=="#")if(f==="v"){let h=u.split(AV);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(Zw.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]),xn),t.colors.push(Zw.r,Zw.g,Zw.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(f==="f"){let p=u.slice(1).trim().split(AV),g=[];for(let w=0,y=p.length;w<y;w++){let _=p[w];if(_.length>0){let T=_.split("/");g.push(T)}}let v=g[0];for(let w=1,y=g.length-1;w<y;w++){let _=g[w],T=g[w+1];t.addFace(v[0],_[0],T[0],v[1],_[1],T[1],v[2],_[2],T[2])}}else if(f==="l"){let h=u.substring(1).trim().split(" "),p=[],g=[];if(u.indexOf("/")===-1)p=h;else for(let v=0,w=h.length;v<w;v++){let y=h[v].split("/");y[0]!==""&&p.push(y[0]),y[1]!==""&&g.push(y[1])}t.addLineGeometry(p,g)}else if(f==="p"){let p=u.slice(1).trim().split(" ");t.addPointGeometry(p)}else if((r=uce.exec(u))!==null){let h=(" "+r[0].slice(1).trim()).slice(1);t.startObject(h)}else if(fce.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(dce.test(u))t.materialLibraries.push(u.substring(7).trim());else if(hce.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(f==="s"){if(r=u.split(" "),r.length>1){let p=r[1].trim().toLowerCase();t.object.smooth=p!=="0"&&p!=="off"}else t.object.smooth=!0;let h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();let o=new Ar;if(o.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let a=0,l=t.objects.length;a<l;a++){let u=t.objects[a],f=u.geometry,h=u.materials,p=f.type==="Line",g=f.type==="Points",v=!1;if(f.vertices.length===0)continue;let w=new ki;w.setAttribute("position",new Bn(f.vertices,3)),f.normals.length>0&&w.setAttribute("normal",new Bn(f.normals,3)),f.colors.length>0&&(v=!0,w.setAttribute("color",new Bn(f.colors,3))),f.hasUVIndices===!0&&w.setAttribute("uv",new Bn(f.uvs,2));let y=[];for(let T=0,C=h.length;T<C;T++){let E=h[T],V=E.name+"_"+E.smooth+"_"+v,F=t.materials[V];if(this.materials!==null){if(F=this.materials.create(E.name),p&&F&&!(F instanceof ws)){let L=new ws;Ki.prototype.copy.call(L,F),L.color.copy(F.color),F=L}else if(g&&F&&!(F instanceof da)){let L=new da({size:10,sizeAttenuation:!1});Ki.prototype.copy.call(L,F),L.color.copy(F.color),L.map=F.map,F=L}}F===void 0&&(p?F=new ws:g?F=new da({size:1,sizeAttenuation:!1}):F=new Ga,F.name=E.name,F.flatShading=!E.smooth,F.vertexColors=v,t.materials[V]=F),y.push(F)}let _;if(y.length>1){for(let T=0,C=h.length;T<C;T++){let E=h[T];w.addGroup(E.groupStart,E.groupCount,T)}p?_=new Lc(w,y):g?_=new Ul(w,y):_=new gi(w,y)}else p?_=new Lc(w,y[0]):g?_=new Ul(w,y[0]):_=new gi(w,y[0]);_.name=u.name,o.add(_)}else if(t.vertices.length>0){let a=new da({size:1,sizeAttenuation:!1}),l=new ki;l.setAttribute("position",new Bn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new Bn(t.colors,3)),a.vertexColors=!0);let u=new Ul(l,a);o.add(u)}return o}};function NV(n,e){return dt(this,null,function*(){let t=new Kw(e);try{return yield new Promise((r,o)=>{t.load(n,s=>{r(s)},void 0,s=>{s instanceof Error?o(s):o(new Error("An unknown error occurred"))})})}catch(i){throw console.error("Error loading OBJ model:",i),i}})}function FV(n,e){return dt(this,null,function*(){let t=n.type,i;if(t.includes("gltf")||t.includes("glb")?i="gltf":t.includes("fbx")?i="fbx":t.includes("obj")&&(i="obj"),!i)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0442\u0438\u043F \u043C\u043E\u0434\u0435\u043B\u0438 \u043F\u043E MIME-\u0442\u0438\u043F\u0443.");let r=URL.createObjectURL(n),o;try{switch(i){case"gltf":case"glb":o=pV(r,e);break;case"fbx":o=DV(r,e);break;case"obj":o=NV(r,e);break;default:throw new Error("\u041D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043C\u043E\u0434\u0435\u043B\u0438: "+i)}return yield o}finally{URL.revokeObjectURL(r)}})}var Nh=(()=>{class n{httpModule;baseServiceUrl=hi+"furniture/model";constructor(t){this.httpModule=t}GETfurnitureModel(t,i){let r=new en().set("jwt",t).set("furnitureCardId",i);return un(this.httpModule.get(this.baseServiceUrl,{params:r,responseType:"blob"}))}POSTuploadFurnitureModel(t,i,r){let o=new FormData;o.append("model",t);let s=new en().set("jwt",i).set("furnitureCardId",r).set("fileName",t.name);return un(this.httpModule.post(this.baseServiceUrl,o,{params:s}))}DELETEfurnitureModel(t,i){let r=new en().set("jwt",t).set("furnitureCardId",i);return un(this.httpModule.delete(this.baseServiceUrl,{params:r}))}static \u0275fac=function(i){return new(i||n)(ze(Bi))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kV=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=Bp(this.platformId)}static getCookieRegExp(t){let i=t.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return this.documentIsAccessible?(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie)):!1}get(t){if(this.check(t)){t=encodeURIComponent(t);let r=n.getCookieRegExp(t).exec(this.document.cookie);return r&&r[1]?n.safeDecodeURIComponent(r[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let t={},i=this.document;return i.cookie&&i.cookie!==""&&i.cookie.split(";").forEach(r=>{let[o,s]=r.split("=");t[n.safeDecodeURIComponent(o.replace(/^ /,""))]=n.safeDecodeURIComponent(s)}),t}set(t,i,r,o,s,a,l,u){if(!this.documentIsAccessible)return;if(typeof r=="number"||r instanceof Date||o||s||a||l){let p={expires:r,path:o,domain:s,secure:a,sameSite:l||"Lax",partitioned:u};this.set(t,i,p);return}let f=encodeURIComponent(t)+"="+encodeURIComponent(i)+";",h=r||{};if(h.expires)if(typeof h.expires=="number"){let p=new Date(new Date().getTime()+h.expires*1e3*60*60*24);f+="expires="+p.toUTCString()+";"}else f+="expires="+h.expires.toUTCString()+";";h.path&&(f+="path="+h.path+";"),h.domain&&(f+="domain="+h.domain+";"),h.secure===!1&&h.sameSite==="None"&&(h.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),h.secure&&(f+="secure;"),h.sameSite||(h.sameSite="Lax"),f+="sameSite="+h.sameSite+";",h.partitioned&&(f+="Partitioned;"),this.document.cookie=f}delete(t,i,r,o,s="Lax"){if(!this.documentIsAccessible)return;let a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:r,secure:o,sameSite:s})}deleteAll(t,i,r,o="Lax"){if(!this.documentIsAccessible)return;let s=this.getAll();for(let a in s)s.hasOwnProperty(a)&&this.delete(a,t,i,r,o)}static{this.\u0275fac=function(i){return new(i||n)(ze(fn),ze(qs))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var zi=(()=>{class n{cookieService;constructor(t){this.cookieService=t}setJwt(t,i){let r=new Date;i==="long"?r.setDate(r.getDate()+7):r.setMinutes(r.getMinutes()+10),this.cookieService.set("jwt",t,{expires:r,path:"/",sameSite:"Strict"})}deleteJwt(){this.cookieService.delete("jwt","/")}setGuideRule(){let t=new Date;t.setDate(t.getDate()+7),this.cookieService.set("guideInclude","false",{expires:t,path:"/",sameSite:"Strict"})}getGuideRule(){return this.cookieService.get("guideInclude")}deleteGuideRule(){this.cookieService.delete("guideInclude","/")}getJwt(){return this.cookieService.get("jwt")}setUserType(t){let i=new Date;i.setDate(i.getDate()+7),this.cookieService.set("accountType",t,{expires:i,path:"/",sameSite:"Strict"})}getUserType(){return this.cookieService.get("accountType")}deleteAccountType(){this.cookieService.delete("accountType","/")}static \u0275fac=function(i){return new(i||n)(ze(kV))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UV=(()=>{class n{constructor(){}createReport(t,i){this.createReportHTML(t,i)}createReportHTML(t,i){let r=new FileReader;r.onload=()=>{let o=r.result,s=this.generateHtmlContent(t,o);this.openHtmlInNewTab(t.name,s)},r.readAsDataURL(i)}generateHtmlContent(t,i){return`
      <!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>\u041E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435 ${t.name}</title>
    <style>
        @font-face {
            font-family: 'Calypso';
            src: url('http://localhost:4200/assets/fonts/Calypso.ttf') format('truetype');
        }

        @font-face {
            font-family: 'Courier New';
            src: url('http://localhost:4200/assets/fonts/Courier New.ttf') format('truetype');
        }

        body {
            margin: 0;
            padding: 40px;
            background-color: black;
            color: #DAD7CD;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
        }

        .title {
            font-family: 'Calypso', sans-serif;
            text-align: center;
            font-size: 3rem;
            margin-bottom: 40px;
            color: #A3B18A;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .renderTitle {
            font-family: 'Courier New', monospace;
            font-weight: 400;
            font-size: 1.5rem;
            margin: 30px 0 15px;
            color: #A3B18A;
            border-bottom: 2px solid #A3B18A;
            padding-bottom: 8px;
            width:fit-content;
            align-self: center;
        }

        .furnituresSpanTitle {
            font-family: 'Calypso', sans-serif;
            font-size: 2rem;
            margin: 40px 0 20px;
            color: #A3B18A;
            display: block;
            text-align: center;
        }

        .furniture {
            display: flex;
            flex-direction: column;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }

        .furnitureTitle {
            font-family: 'Courier New', monospace;
            font-weight: 400;
            margin: 0 auto 15px;
            font-size: 1.3rem;
            color: #DAD7CD;
        }

        .furnitureImage {
            margin: 0 auto;
            max-width: 100%;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .furnitureFooter {
            display: flex;
            gap: 30px;
            flex-direction: row;
            justify-content: center;
            flex-wrap: wrap;
        }

        .paramsTitle,
        .shopsTitle {
            font-family: 'Calypso', sans-serif;
            font-size: 1.2rem;
            color: #A3B18A;
            margin-bottom: 15px;
        }

        .paramsSpan {
            width: fit-content;
            min-width: 200px;
        }

        .paramsList {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .paramsItem {
            margin-bottom: 8px;
            position: relative;
            padding-left: 20px;
        }

        .shopsSpan {
            min-width: 200px;
        }

        a {
            display: inline-block;
            background-color: white;
            color: black;
            text-decoration: none;
            padding: 5px 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            width:250px;
            max-width: 250px;
            text-align: center;
            font-family: 'Courier New';
            font-weight: 400;
            font-size: 0.8rem
        }

        a:hover {
            background-color: transparent;
            color: white;
            border-color: white;
        }

        img {
            width: 100%;
            max-height: 500px;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
        }

        .openLink {
            width:250px;
            max-width: 250px;
            margin: 0 auto;
            margin-top: 20px;
        }
        .furnitureLink{
            background-color: #A3B18A;
            color:white;
            &:hover{
                background-color: #344E41;
                border: 2px solid #344E41;
            }
        }

        @media (max-width: 768px) {
            .furnitureFooter {
                flex-direction: column;
                align-items: center;
                gap: 20px;
                width: 100%;
            }

            .paramsSpan,
            .shopsSpan {
                width: 90%;
            }

            .openLink,.shopLink {
                box-sizing: border-box;
                width: 100%;
            }

            .title {
                font-size: 2rem;
            }

            body {
                padding: 20px;
            }
        }
    </style>
</head>
<h1 class="title">\u041E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435<br>${t.name}</h1>
<h2 class="renderTitle">\u0412\u0438\u0434 \u0441\u0432\u0435\u0440\u0445\u0443</h2>
<img src="${i}"
    alt="Room render">

<h2 style="display:${t.furnitures.length===0?"none":"block"}" class="furnituresSpanTitle">\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043D\u0430\u044F \u043C\u0435\u0431\u0435\u043B\u044C</h2>
${t.furnitures.map(r=>`
    <span class="furniture">
    <h3 class="furnitureTitle">${r.name}</h3>
    <img class= "furnitureImage"
        src = "${r.previewUrl}"
        alt = "preview" loading = "lazy">
    <span class="furnitureFooter" >
    <span class="paramsSpan" >
    <p class="paramsTitle"> \u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B </p>
    <ul class= "paramsList">
    <li class="paramsItem"> \u0428\u0438\u0440\u0438\u043D\u0430: ${r.proportions.width}c\u043C </li>
    <li class= "paramsItem"> \u0412\u044B\u0441\u043E\u0442\u0430: ${r.proportions.height}c\u043C </li>
    <li class= "paramsItem"> \u0414\u043B\u0438\u043D\u0430: ${r.proportions.length}c\u043C </li>
    </ul>
    </span>
    <span class= "shopsSpan" >
    ${r.shops.map(o=>`
        <p class="shopsTitle"> \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B </p>
        <span >
      <a class="shopLink" href = "${o.url}">
      ${this.costPipe(o.cost)}
      </a>
      </span>
      `).join("")}
    </span>
    </span>
    <a class= "openLink furnitureLink" href = "${W_}shop/${r.category}/${r.furnitureCardId}"> \u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C </a>
    </span>
    `).join("")}
<a class="openLink planLink" href="${W_}plan">\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043F\u0440\u043E\u0435\u043A\u0442</a>

</html>
    `}costPipe(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}openHtmlInNewTab(t,i){let r=new Blob([i],{type:"text/html"}),o=URL.createObjectURL(r);window.open(o,"_blank"),this.downloadHtml(t,o)}downloadHtml(t,i){let r=document.createElement("a");r.href=i,r.download=`${t}-report.html`,r.click(),URL.revokeObjectURL(i)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Fh=(()=>{class n{httpModule;reportService;baseServiceUrl=hi+"project";constructor(t,i){this.httpModule=t,this.reportService=i}POSTcreateProject(t,i){let r=new en().set("jwt",t).set("name",i);return un(this.httpModule.post(this.baseServiceUrl,r))}DELETEdeleteProject(t,i){let r=new en().set("jwt",t).set("projectId",i);return un(this.httpModule.delete(this.baseServiceUrl,{params:r}))}GETgetProject(t,i){let r=new en().set("jwt",t).set("projectId",i);return un(this.httpModule.get(this.baseServiceUrl,{params:r}))}PUTupdateProject(t,i,r){let o=new en().set("jwt",t).set("projectId",i);return un(this.httpModule.put(this.baseServiceUrl,r,{params:o}))}GETgetReportOfRoom(t,i,r){return dt(this,null,function*(){let o=new en().set("jwt",t).set("roomId",i),s=yield un(this.httpModule.get(this.baseServiceUrl+"/room",{params:o}));s.furnitures=s.furnitures.map(a=>(a.previewUrl=hi+a.previewUrl,a)),this.reportService.createReport(s,r)})}static \u0275fac=function(i){return new(i||n)(ze(Bi),ze(UV))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vce(n,e){if(n&1){let t=vt();I(0,"button",9),Me("click",function(){ke(t);let r=le();return Ue(r.deleteModel())}),I(1,"p"),Z(2,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),D(),ye(3,"img",10),D()}}function yce(n,e){if(n&1){let t=vt();I(0,"button",11),Me("click",function(){ke(t);let r=le();return Ue(r.getReport())}),I(1,"p"),Z(2,"\u041E\u0442\u0447\u0435\u0442"),D(),ye(3,"img",12),D()}}var Jw=(()=>{class n{elementRef;spinner;furnitureModelService;furnitureCardService;accountCookieService;projectService;route;notification;location;planHouseComponent;constructor(t,i,r,o,s,a,l,u,f,h){this.elementRef=t,this.spinner=i,this.furnitureModelService=r,this.furnitureCardService=o,this.accountCookieService=s,this.projectService=a,this.route=l,this.notification=u,this.location=f,this.planHouseComponent=h}roomData;saveObjectsEmitter=new Un;renderer;camera;scene;controls;animationFrameId=null;canvasRatioOfWindow=1.5;roomProportions;raycaster=new xg;mouse=new We;rectangleMesh;targetobject=void 0;ngAfterViewInit(){this.initThreeJs()}ngOnChanges(t){if(this.roomData=t.roomData.currentValue,!this.roomData||this.scene===void 0||this.roomData===t.roomData.previousValue||(t.roomData.previousValue!==void 0&&this.clearRoom(),this.camera.position.set(0,5,0),this.camera.rotation.set(Qn.degToRad(-90),0,0),this.roomProportions=this.roomData.roomProportions,this.createRoom(),this.rectangleMesh.rotation.x=Qn.degToRad(-90),this.getObjectSize(this.rectangleMesh).width===0)||!this.planHouseComponent.sceneOpenToggle)return;this.loadRoom();let i=this.route.snapshot.params.furnitureCardId;!i||t.roomData.previousValue||(this.fixPath(),this.addModel(i,!0))}loadFurnitureModel(t,i,r,o,s){return dt(this,null,function*(){try{let a=yield FV(t);s?this.addObjectToScene(a,i,r,s):this.addObjectToScene(a,i,r),o&&this.saveRoom()}catch{}})}addModel(t,i,r){return dt(this,null,function*(){let o=this.accountCookieService.getJwt();if(o)try{i&&this.spinner.show();let s=(yield this.furnitureCardService.GETfurnitureCard(t)).furnitureCard.proportions,a=yield this.furnitureModelService.GETfurnitureModel(o,t);yield this.loadFurnitureModel(a,s,t,i,r),this.spinner.hide()}catch(s){this.spinner.hide(),this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043C\u043E\u0434\u0435\u043B\u0438",5e3),console.log(s)}})}fixPath(){let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t)}initThreeJs(){this.scene=new Qm,this.camera=new Ii(75,window.innerWidth/window.innerHeight,.1,1e3);let t=new gg(11184810,0,2);this.scene.add(t),this.renderer=new Bw({antialias:!0,alpha:!1});let i=this.elementRef.nativeElement.querySelector("#canvasContainer");this.camera.position.z=5,this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),i.appendChild(this.renderer.domElement),this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}createRoundedRectangleGeometry(t,i,r,o){let s=new vh;return s.moveTo(-t/2+r,-i/2),s.lineTo(t/2-r,-i/2),s.quadraticCurveTo(t/2,-i/2,t/2,-i/2+r),s.lineTo(t/2,i/2-r),s.quadraticCurveTo(t/2,i/2,t/2-r,i/2),s.lineTo(-t/2+r,i/2),s.quadraticCurveTo(-t/2,i/2,-t/2,i/2-r),s.lineTo(-t/2,-i/2+r),s.quadraticCurveTo(-t/2,-i/2,-t/2+r,-i/2),new hg(s,o)}createRoom(){if(!this.roomData)return;let t=this.roomData.roomProportions,i=.1;this.controls=new zw(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.15,this.controls.enableZoom=!0,this.controls.minDistance=1,this.controls.maxDistance=10;let r=5;this.controls.maxPolarAngle=Qn.degToRad(90-r),this.createRoomShape(t.width,t.length,i),this.rectangleMesh.name="roomFloorBase",this.rectangleMesh}calculateObjectSaveData(t){let i=this.getObjectSize(this.rectangleMesh),r=t.position;return{objectId:t.userData.id,xMetersDistance:r.x/i.width*this.roomProportions.width,zMetersDistance:r.z/i.length*this.roomProportions.length,yRotate:t.rotation.y}}calculateMoveObjectData(t){let i=this.getObjectSize(this.rectangleMesh);return{xDistance:t.xMetersDistance*i.width/this.roomProportions.width,zDistance:t.zMetersDistance*i.length/this.roomProportions.length,yRotate:t.yRotate}}createRoomShape(t,i,r){let o=this.calculateFrustumBounds(),s=t/i,a,l;s<=1?(a=o.height*s,l=o.height):(a=o.width,l=o.width/s);let f=this.createRoundedRectangleGeometry(a*.9,l*.9,r,10),h=new Ho({color:3427905});this.rectangleMesh=new gi(f,h),this.scene.add(this.rectangleMesh),this.renderer.render(this.scene,this.camera),this.rectangleMesh.updateMatrixWorld(!0)}calculateFrustumBounds(){let t=this.camera.position.y,i=Qn.degToRad(this.camera.fov),r=2*Math.tan(i/2)*Math.abs(t);return{width:r*this.camera.aspect,height:r}}addObjectToScene(t,i,r,o){t.userData={id:r},this.scaleImportModel(t,i),this.scene.add(t),this.renderer.render(this.scene,this.camera),o&&(t.position.set(o.xDistance,0,o.zDistance),t.rotation.y=o.yRotate)}getObjectSize(t){let r=new Hr().setFromObject(t).getSize(new B);return{width:r.x,length:r.z,height:r.y}}scaleImportModel(t,i){let{width:r,length:o}=i;r=r/100,o=o/100;let s=this.getObjectSize(t),a=this.getObjectSize(this.rectangleMesh),l=s.width>s.length?a.width/s.width:a.length/s.length,f=(s.width>s.length?r/this.roomProportions.width:o/o)*l;t.scale.set(f,f,f)}loadRoom(){return dt(this,null,function*(){if(!this.accountCookieService.getJwt()||!this.roomData)return;let i=Ne({objects:this.roomData.objects},this.roomData.roomProportions);this.spinner.show();for(let r of i.objects)yield this.addModel(r.objectId,!1,this.calculateMoveObjectData(r));this.spinner.hide()})}clearRoom(){for(let t=this.scene.children.length-1;t>=0;t--){let i=this.scene.children[t];i.type!=="Scene"&&i.type!=="HemisphereLight"&&this.scene.remove(i)}}onResize(t){this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.render(this.scene,this.camera)}onMouseClick(t){if(this.targetobject){this.targetobject=void 0;return}let i=t.target.getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1,o=-(t.clientY-i.top)/i.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let a=this.raycaster.intersectObjects(this.scene.children).find(l=>l.object.name!=="roomFloorBase"&&l.object.type!=="Scene"&&l.object.type!=="HemisphereLight")?.object;a&&(this.targetobject=a.parent?a.parent:a)}rotateTargetObject(t){if(!this.targetobject)return;let i=-.05;switch(t.key){case"q":case"\u0439":this.targetobject.rotation.y-=i;break;case"e":case"\u0443":this.targetobject.rotation.y+=i}}onMousemove(t){if(!this.targetobject)return;let i=t.target.getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1,o=-(t.clientY-i.top)/i.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let s=this.raycaster.intersectObject(this.rectangleMesh);if(s.length===0)return;let a=s[0].point.x,l=s[0].point.z,u=this.getObjectSize(this.rectangleMesh),f=this.getObjectSize(this.targetobject),h=-u.width/2+f.width/2,p=u.width/2-f.width/2,g=a;g<h?g=h:g>p&&(g=p);let v=-u.length/2+f.length/2,w=u.length/2-f.length/2,y=l;y<v?y=v:y>w&&(y=w),this.targetobject.position.set(g,0,y)}getReport(){return dt(this,null,function*(){let t=this.accountCookieService.getJwt();if(!t||!this.roomData?._id)return;let i=this.camera.position.clone(),r=this.camera.rotation.clone();this.camera.position.set(0,7,0),this.camera.rotation.set(Qn.degToRad(-90),0,0),this.renderer.render(this.scene,this.camera);let o=this.renderer.domElement.toDataURL("image/png"),s=yield fetch(o);this.camera.position.copy(i),this.camera.rotation.copy(r),s.ok||this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0440\u0435\u043D\u0434\u0435\u0440\u0435",5e3);let a=yield s.blob();this.projectService.GETgetReportOfRoom(t,this.roomData?._id,a)})}deleteModel(){this.targetobject&&(this.scene.remove(this.targetobject),this.saveRoom())}saveRoom(){if(!this.roomData)return;let t=this.scene.children.filter(r=>r.name!=="roomFloorBase"&&r.type!=="Scene"&&r.type!=="HemisphereLight").map(r=>this.calculateObjectSaveData(r)),i=t;this.roomData.objects=t,this.saveObjectsEmitter.emit(i)}static \u0275fac=function(i){return new(i||n)(ue(Yt),ue(rD),ue(Nh),ue(Mc),ue(zi),ue(Fh),ue(Zi),ue(Ti),ue(co),ue(jc))};static \u0275cmp=vn({type:n,selectors:[["app-scene"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.onResize(s)},!1,Ao)("click",function(s){return r.onMouseClick(s)})("keydown",function(s){return r.rotateTargetObject(s)},!1,Ao)("mousemove",function(s){return r.onMousemove(s)})},inputs:{roomData:"roomData"},outputs:{saveObjectsEmitter:"saveObjectsEmitter"},features:[Xi],decls:12,vars:2,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","none"],[1,"Loader"],[2,"font-size","20px","color","white"],["id","canvasContainer"],[1,"functionalsBtnsTemplate"],["title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u043E\u043C\u043D\u0430\u0442\u0443",3,"click"],[1,"changeBtns"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",3,"click",4,"ngIf"],["title","\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u043E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435",3,"click",4,"ngIf"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",3,"click"],["src","/assets/images/deleteIcon.svg","alt",""],["title","\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u043E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435",3,"click"],["src","/assets/images/uploadIcon.png","alt",""]],template:function(i,r){i&1&&(I(0,"ngx-spinner",0),ye(1,"div",1),I(2,"p",2),Z(3,"Loading..."),D()(),I(4,"div",3)(5,"span",4)(6,"button",5),Me("click",function(){return r.saveRoom()}),I(7,"p"),Z(8,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),D()(),I(9,"span",6),Pe(10,vce,4,0,"button",7)(11,yce,4,0,"button",8),D()()()),i&2&&(H(10),$("ngIf",r.targetobject!==void 0),H(),$("ngIf",r.targetobject===void 0))},dependencies:[lV,aV,Dn],styles:['.Loader[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;max-width:14.6rem;margin-top:7.3rem;margin-bottom:7.3rem}.Loader[_ngcontent-%COMP%]:before, .Loader[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%;animation-duration:1.8s;animation-iteration-count:infinite;animation-timing-function:ease-in-out;filter:drop-shadow(0 0 .7555555556rem rgba(255,255,255,.75))}.Loader[_ngcontent-%COMP%]:before{width:100%;padding-bottom:100%;box-shadow:inset 0 0 0 1.7rem #fff;animation-name:_ngcontent-%COMP%_pulsA}.Loader[_ngcontent-%COMP%]:after{width:calc(100% - 3.4rem);padding-bottom:calc(100% - 3.4rem);box-shadow:0 0 #fff;animation-name:_ngcontent-%COMP%_pulsB}@keyframes _ngcontent-%COMP%_pulsA{0%{box-shadow:inset 0 0 0 1.7rem #fff;opacity:1}50%,to{box-shadow:inset 0 0 #fff;opacity:0}}@keyframes _ngcontent-%COMP%_pulsB{0%,50%{box-shadow:0 0 #fff;opacity:0}to{box-shadow:0 0 0 1.7rem #fff;opacity:1}}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}[_nghost-%COMP%]{display:block;height:100%}.funcBtnsSpan[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);bottom:50px;display:flex;gap:10px}.funcBtn[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:15px;border-radius:10px;border:none;font-family:arial;font-weight:1000;width:25vw;cursor:pointer}#canvasContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:calc(100% - 55px) 50px;gap:5px}.functionalsBtnsTemplate[_ngcontent-%COMP%]{grid-area:2/1/3/2;width:410px;height:50px;justify-self:center;overflow:hidden;display:flex;gap:10px}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;height:100%;justify-content:center;background-color:#000;border-radius:10px;border:2px solid rgba(163,177,138,.5);cursor:pointer;transition:border .3s ease-in-out;display:flex;gap:10px;align-items:center}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:27px;margin-bottom:3px}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border:2px solid rgba(163,177,138,.8)}']})}return n})();var VV=_C(w1());var xce=["scene"],wce=["roomsGuideTemplate1"],bce=["roomsGuideTemplate2"],Cce=["roomGuideTemplate"];function Ece(n,e){n&1&&(I(0,"span",30),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0.1 \u0434\u043E 10 "),D())}function Mce(n,e){n&1&&(I(0,"span",30),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0.1 \u0434\u043E 10 "),D())}function Sce(n,e){n&1&&(I(0,"span",30),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0.1 \u0434\u043E 10 "),D())}function Tce(n,e){n&1&&(I(0,"span",30),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B (\u0434\u043E 20) "),D())}function Ice(n,e){if(n&1){let t=vt();I(0,"button",31),Me("click",function(){ke(t);let r=le();return Ue(r.deleteRoom())}),ye(1,"img",32),D()}}function Dce(n,e){if(n&1){let t=vt();I(0,"button",33),Me("touchstart",function(r){let o=ke(t).index,s=le();return Ue(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("keydown.enter",function(r){let o=ke(t).index,s=le();return Ue(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("mousedown",function(r){let o=ke(t).index,s=le();return Ue(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())}),Z(1),D()}if(n&2){let t=e.$implicit,i=e.index,r=le();Hn("grid-area",t.gridArea)("display",(r.currentViewRoom===i||r.currentViewRoom===void 0)&&!r.sceneOpenToggle?"block":"none"),Tr("data-index",i),H(),rr(" ",t.name," ")}}function Ace(n,e){if(n&1&&(I(0,"a",36),Z(1),D()),n&2){let t=e.$implicit;$("href","/shop/"+t.name,Mr),H(),rr(" ",t.translateMany," ")}}function Rce(n,e){if(n&1&&(I(0,"span",34),Pe(1,Ace,2,2,"a",35),D()),n&2){let t=le();H(),$("ngForOf",t.categoryArray)}}function Pce(n,e){if(n&1){let t=vt();I(0,"div",37)(1,"div",38),ye(2,"span",39),I(3,"img",40),Me("click",function(){ke(t);let r=le();return Ue(r.closeGuide())}),D()()()}if(n&2){let t=le();H(2),$("ngTemplateOutlet",t.guideTemplate)}}function Oce(n,e){n&1&&(I(0,"div",41)(1,"div",42)(2,"p",43),Z(3,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043E\u0434\u0438\u043D \u0440\u0430\u0437 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442e \u0434\u043B\u044F \u0441\u043C\u0435\u043D\u044B \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F"),D(),I(4,"div",44),ye(5,"img",45),D()(),I(6,"div",46),ye(7,"div",47),D(),I(8,"div",42)(9,"p",43),Z(10,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0434\u0432\u0430 \u0440\u0430\u0437\u0430 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442e \u0434\u043B\u044F \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043C\u0435\u0431\u0435\u043B\u0438"),D(),I(11,"div",44),ye(12,"img",48),D()()())}function Nce(n,e){n&1&&(I(0,"div",41)(1,"div",42)(2,"p",43),Z(3,"\u0417\u0430\u0436\u043C\u0438\u0442\u0435 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442\u0435 \u0438 \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0439\u0442\u0435"),D(),I(4,"div",49),ye(5,"img",50),D()(),I(6,"div",46),ye(7,"div",47),I(8,"span",51),Z(9,"\u0418\u041B\u0418"),D(),ye(10,"div",47),D(),I(11,"div",42)(12,"p",43),Z(13,"\u041D\u0430\u0432\u0435\u0434\u0438\u0442\u0435\u0441\u044C \u043D\u0430 TAB \u0438 \u0441 \u0437\u0430\u0436\u0430\u0442\u044B\u043C ENTER \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 \u0441\u0442\u0440\u0435\u043B\u043E\u0447\u043A\u0438"),D(),I(14,"div",52),ye(15,"img",53),I(16,"div",54),ye(17,"img",55),I(18,"div",56),ye(19,"img",57)(20,"img",58)(21,"img",59),D()()()()())}function Fce(n,e){n&1&&(I(0,"div",41)(1,"div",42)(2,"p",43),Z(3,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u041B\u041A\u041C \u043D\u0430 \u043C\u0435\u0431\u0435\u043B\u0438 \u0434\u043B\u044F \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0434\u043B\u044F \u043E\u0442\u043C\u0435\u043D\u044B"),D(),I(4,"div",44),ye(5,"img",45),D()(),I(6,"div",46),ye(7,"div",47),D(),I(8,"div",42)(9,"p",43),Z(10,"\u0412 \u0440\u0435\u0436\u0438\u043C\u0435 \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 Q \u0438 E \u0434\u043B\u044F \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430 \u043C\u0435\u0431\u0435\u043B\u0438"),D(),I(11,"div",52)(12,"div",54)(13,"div",56),ye(14,"img",60)(15,"img",61),D()()()()())}var jc=(()=>{class n{renderer;elementRef;categoryService;location;notification;cdr;accountCookieService;constructor(t,i,r,o,s,a,l){this.renderer=t,this.elementRef=i,this.categoryService=r,this.location=o,this.notification=s,this.cdr=a,this.accountCookieService=l}previousGridArea;roomSpan;roomSpanSettings;isDragging=!1;isClick=!1;clickTimer;isDoubleClick=!1;toggleModuleButton;formElement;oldSizeViewRoom=void 0;lastPlanHouse=void 0;categoryArray=[];isGuideIncluded=!1;isGuideVisible=!0;currentViewRoom=void 0;sceneOpenToggle=!1;currentIdClickedRoom=void 0;guideTemplate;planHouse;sceneComponent;initialized=new Un;planHouseEmitter=new Un;callSaveEmitter=new Un;roomsGuideTemplate1;roomsGuideTemplate2;roomGuideTemplate;ngOnInit(){this.checkGuideInclude(),this.initCategories()}ngAfterViewInit(){this.elementRef.nativeElement.parentElement.classList.contains("projectPreviewSpan")&&(this.isGuideIncluded=!1),this.guideTemplate=this.roomsGuideTemplate1,this.cdr.detectChanges(),this.roomSpan=this.elementRef.nativeElement.querySelector(".roomSpan"),this.calculateRoomSpanSettings(),this.formElement=this.elementRef.nativeElement.querySelector("form"),this.toggleModuleButton=this.elementRef.nativeElement.querySelector(".addModuleBtn"),this.initialized.emit()}initCategories(){return dt(this,null,function*(){this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray})}showGuide(){this.isGuideVisible=!0}checkGuideInclude(){this.isGuideIncluded=this.accountCookieService.getGuideRule()!=="false",this.isGuideVisible=this.isGuideIncluded}emitPlanHouse(){this.planHouseEmitter.emit(this.planHouse)}saveHouse(){this.callSaveEmitter.emit()}findFreeSpace(t){let r=Array.from({length:10},()=>Array(10).fill(!1));this.planHouse.forEach(o=>{let[s,a,l,u]=o.gridArea.split("/").map(Number);for(let f=s-1;f<l-1;f++)for(let h=a-1;h<u-1;h++)r[f][h]=!0});for(let o=0;o<=10-t.length;o++)for(let s=0;s<=10-t.width;s++){let a=!0;for(let l=o;l<o+t.length;l++){for(let u=s;u<s+t.width;u++)if(r[l][u]){a=!1;break}if(!a)break}if(a){for(let l=o;l<o+t.length;l++)for(let u=s;u<s+t.width;u++)r[l][u]=!0;return`${o+1} / ${s+1} / ${o+t.length+1} / ${s+t.width+1}`}}return this.notification.setError("\u041D\u0435\u0442 \u043C\u0435\u0441\u0442\u0430",15e3),!1}calculateRoomSpanSettings(){let t=this.roomSpan.getBoundingClientRect();this.roomSpanSettings={startX:t.left,startY:t.top-document.documentElement.scrollTop,endX:t.width+t.left,endY:t.height+t.top,gap:+window.getComputedStyle(this.roomSpan).getPropertyValue("gap").slice(0,-2)}}isAreaOccupied(t,i){let[r,o,s,a]=t.split("/").map(Number);for(let l=0;l<this.planHouse.length;l++){if(l===i)continue;let[u,f,h,p]=this.planHouse[l].gridArea.split("/").map(Number);if(r<h&&s>u&&o<p&&a>f)return!0}return!1}calculateGridArea(t,i){if(this.currentIdClickedRoom===void 0)return;let r=this.planHouse[this.currentIdClickedRoom].roomProportions,o=t-this.roomSpanSettings.startX,s=i-this.roomSpanSettings.startY-document.documentElement.scrollTop,a=(this.roomSpanSettings.endX-this.roomSpanSettings.startX)/10+this.roomSpanSettings.gap,l=Math.floor(o/a)+1,u=Math.floor(s/a)+1,f=l+Math.round(r.width)-1,h=u+Math.round(r.length)-1;if(!(f>10||h>10))return`${u} / ${l} / ${h+1} / ${f+1}`}resetRoomPosition(t,i){let r=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(r){let o=this.calculateGridArea(t,i);o&&!this.isAreaOccupied(o,this.currentIdClickedRoom)?(this.renderer.setStyle(r,"grid-area",o),this.planHouse[this.currentIdClickedRoom].gridArea=o):this.renderer.setStyle(r,"grid-area",this.previousGridArea),this.renderer.removeStyle(r,"background-color"),this.renderer.removeStyle(r,"z-index"),this.currentIdClickedRoom=void 0}}onMouseLeave(t){this.isDragging&&this.currentIdClickedRoom!==void 0&&this.onMouseUp(t)}onMouseUp(t){if(this.sceneOpenToggle!==!0&&this.currentViewRoom===void 0){if(this.isDragging&&this.currentIdClickedRoom!==void 0){if(this.isDragging=!1,t instanceof MouseEvent&&this.resetRoomPosition(t.clientX,t.clientY),typeof TouchEvent<"u"&&t instanceof TouchEvent){let r=t.changedTouches[0];this.resetRoomPosition(r.clientX,r.clientY)}let i=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');i&&(this.renderer.removeStyle(i,"cursor"),this.renderer.removeStyle(i,"background-color")),this.currentIdClickedRoom=void 0,this.emitPlanHouse()}this.clickTimer=setTimeout(()=>{if(this.isClick&&!this.isDragging){if(this.currentIdClickedRoom==null)return;this.toggleOpenRoomModule(this.currentIdClickedRoom)}this.isClick=!1,this.isDoubleClick=!1,this.isDragging=!1,clearTimeout(this.clickTimer)},250)}}onMouseMove(t){if(t.preventDefault(),this.isDragging&&this.currentIdClickedRoom!==void 0){let i=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(!i)return;let r=t instanceof MouseEvent?this.calculateGridArea(t.clientX,t.clientY):this.calculateGridArea(t.changedTouches[0].clientX,t.changedTouches[0].clientY);this.renderer.setStyle(i,"z-index","4"),r&&(this.renderer.setStyle(i,"grid-area",r),this.isAreaOccupied(r,this.currentIdClickedRoom)?this.renderer.setStyle(i,"background-color","#F18DC4"):this.renderer.setStyle(i,"background-color","#A3B18A"))}}moveRoom(t){if(this.currentIdClickedRoom===void 0||!this.isDragging)return;let i=this.elementRef.nativeElement.querySelector(`[data-index="${this.currentIdClickedRoom}"]`),[r,o,s,a]=this.planHouse[this.currentIdClickedRoom].gridArea.split("/").map(Number);switch(t.key){case"ArrowUp":r-=1,s-=1;break;case"ArrowDown":r+=1,s+=1;break;case"ArrowRight":o+=1,a+=1;break;case"ArrowLeft":o-=1,a-=1;break}if(r<1||o<1||s>11||a>11)return;let l=`${r} / ${o} / ${s} / ${a}`;this.isAreaOccupied(l,this.currentIdClickedRoom)||(this.renderer.setStyle(i,"grid-area",l),this.planHouse[this.currentIdClickedRoom].gridArea=l)}onContextMenu(t){t.preventDefault()}onScroll=(0,VV.throttle)(()=>{this.currentIdClickedRoom!==void 0&&this.calculateRoomSpanSettings()},100);escapeDraggingMode(){this.isDragging=!1,this.currentIdClickedRoom=void 0;let t=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');t&&(this.renderer.removeStyle(t,"background-color"),this.renderer.removeStyle(t,"cursor"))}clickRoom(t,i){if(this.currentViewRoom!==void 0)return;this.currentIdClickedRoom=i;let r=t.target;this.previousGridArea=window.getComputedStyle(r).getPropertyValue("grid-area"),this.isClick&&!this.isDragging?(this.isDoubleClick=!0,this.isClick=!1,this.openViewRoom(this.currentIdClickedRoom)):this.isClick=!0,setTimeout(()=>{this.isDoubleClick||!this.isClick||(this.calculateRoomSpanSettings(),this.renderer.setStyle(r,"cursor","grabbing"),this.isDragging=!0,this.renderer.setStyle(r,"background-color","#A3B18A"),this.currentIdClickedRoom=i,this.isClick=!1)},350)}closeGuide(){this.accountCookieService.setGuideRule(),this.isGuideVisible=!1,this.guideTemplate==this.roomsGuideTemplate1&&(this.guideTemplate=this.roomsGuideTemplate2,this.showGuide())}turnoffGuides(t){t?(this.accountCookieService.setGuideRule(),this.sceneOpenToggle===!0&&this.currentViewRoom!==void 0&&(this.guideTemplate=this.roomGuideTemplate)):this.accountCookieService.deleteGuideRule(),this.checkGuideInclude()}updateRoomObjects(t){this.currentViewRoom!==void 0&&(this.planHouse[this.currentViewRoom].objects=t,this.emitPlanHouse(),this.saveHouse())}openScene(){this.isGuideIncluded&&(this.guideTemplate=this.roomGuideTemplate,this.showGuide());let t=this.location.path()+"/"+this.currentViewRoom;this.location.replaceState(t),this.sceneOpenToggle=!0,this.sceneComponent.loadRoom()}closeScene(){let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t),this.sceneComponent.saveRoom(),this.sceneOpenToggle=!1}closeViewRoom(){let t=this.roomSpan.querySelector(`[data-index="${this.currentViewRoom}"]`);!t||!this.oldSizeViewRoom||(this.currentViewRoom=void 0,this.currentIdClickedRoom=void 0,this.renderer.setStyle(t,"width",this.oldSizeViewRoom.width+"px"),this.renderer.setStyle(t,"height",this.oldSizeViewRoom.height+"px"),this.renderer.removeStyle(t,"border"),this.renderer.removeClass(t,"roomView"),this.renderer.setStyle(this.roomSpan,"display","grid"),setTimeout(()=>{this.renderer.removeStyle(t,"width"),this.renderer.removeStyle(t,"height")},768))}updateRoom(){if(!(this.currentIdClickedRoom===void 0||!this.roomForm.value.name)){if(this.roomForm.value.name===this.planHouse[this.currentIdClickedRoom].name){this.toggleOpenRoomModule();return}this.planHouse[this.currentIdClickedRoom].name=this.roomForm.value.name,this.roomForm.patchValue({width:null,height:null,length:null,name:""}),this.emitPlanHouse(),this.toggleOpenRoomModule(),this.saveHouse()}}addRoom(){let{width:t,length:i,height:r,name:o}=this.roomForm.value;this.toggleOpenRoomModule();let s={name:o,roomProportions:{width:+t,height:+r,length:+i},objects:[],gridArea:""},a=this.findFreeSpace(s.roomProportions);a&&(s.gridArea=a,this.planHouse=[...this.planHouse,s],this.emitPlanHouse(),this.saveHouse())}deleteRoom(){this.currentIdClickedRoom!==void 0&&(this.planHouse.splice(this.currentIdClickedRoom,1),this.currentIdClickedRoom=void 0,this.toggleOpenRoomModule(),this.emitPlanHouse(),this.saveHouse(),this.toggleControls(!0))}toggleControls(t){t?(this.roomForm.get("width")?.enable(),this.roomForm.get("height")?.enable(),this.roomForm.get("length")?.enable()):(this.roomForm.get("width")?.disable(),this.roomForm.get("height")?.disable(),this.roomForm.get("length")?.disable())}toggleOpenRoomModule(t){if(this.toggleModuleButton){if(t!==void 0){let{width:i,height:r,length:o}=this.planHouse[t].roomProportions;this.roomForm.patchValue({width:i,height:r,length:o,name:this.planHouse[t].name}),this.toggleControls(this.currentIdClickedRoom===void 0),this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg");return}this.formElement.classList.contains("openAddModule")?(this.formElement.classList.remove("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","0deg"),this.currentIdClickedRoom=void 0,this.roomForm.patchValue({width:null,height:null,length:null,name:""})):(this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg"))}}openViewRoom(t){this.formElement.classList.remove("openAddModule"),this.currentViewRoom=t,this.lastPlanHouse=this.planHouse[t];let i=this.roomSpan.querySelector(`[data-index="${t}"]`),{width:r,height:o}=i.getBoundingClientRect(),{width:s,height:a}=this.roomSpan.getBoundingClientRect();this.oldSizeViewRoom={height:o,width:r},this.renderer.setStyle(i,"width",r+"px"),this.renderer.setStyle(i,"height",o+"px"),setTimeout(()=>{let l=r>o?s/2/r:a/2/o;this.renderer.setStyle(i,"width",r*l+"px"),this.renderer.setStyle(i,"height",o*l+"px"),this.renderer.setStyle(i,"border","white 3px dashed"),this.renderer.addClass(i,"roomView"),this.renderer.setStyle(this.roomSpan,"display","flex")},0)}roomForm=new fi({width:new En(null,[St.required,St.min(.1),St.max(10),St.pattern(/^\d*\.?\d+$/)]),height:new En(null,[St.required,St.min(.1),St.max(10),St.pattern(/^\d*\.?\d+$/)]),length:new En(null,[St.required,St.min(.1),St.max(10),St.pattern(/^\d*\.?\d+$/)]),name:new En("",[St.required,St.maxLength(20)])});static \u0275fac=function(i){return new(i||n)(ue(Sr),ue(Yt),ue(Gf),ue(co),ue(Ti),ue(or),ue(zi))};static \u0275cmp=vn({type:n,selectors:[["app-plan-house"]],viewQuery:function(i,r){if(i&1&&(bi(xce,5),bi(wce,7),bi(bce,7),bi(Cce,7)),i&2){let o;si(o=ai())&&(r.sceneComponent=o.first),si(o=ai())&&(r.roomsGuideTemplate1=o.first),si(o=ai())&&(r.roomsGuideTemplate2=o.first),si(o=ai())&&(r.roomGuideTemplate=o.first)}},hostBindings:function(i,r){i&1&&Me("mouseleave",function(s){return r.onMouseLeave(s)},!1,kr)("touchend",function(s){return r.onMouseUp(s)},!1,kr)("keyup.Enter",function(s){return r.onMouseUp(s)},!1,kr)("mouseup",function(s){return r.onMouseUp(s)},!1,kr)("mousemove",function(s){return r.onMouseMove(s)},!1,kr)("touchmove",function(s){return r.onMouseMove(s)},!1,kr)("keydown.ArrowUp",function(s){return r.moveRoom(s)},!1,kr)("keydown.ArrowDown",function(s){return r.moveRoom(s)},!1,kr)("keydown.ArrowRight",function(s){return r.moveRoom(s)},!1,kr)("keydown.ArrowLeft",function(s){return r.moveRoom(s)},!1,kr)("contextmenu",function(s){return r.onContextMenu(s)},!1,kr)("scroll",function(){return r.onScroll()},!1,Ao)("keydown.Escape",function(){return r.escapeDraggingMode()},!1,kr)},inputs:{planHouse:"planHouse"},outputs:{initialized:"initialized",planHouseEmitter:"planHouseEmitter",callSaveEmitter:"callSaveEmitter"},decls:46,vars:23,consts:[["scene",""],["roomsGuideTemplate1",""],["roomsGuideTemplate2",""],["roomGuideTemplate",""],[1,"planHouseModule"],[1,"addModuleSpan"],["type","button","tabindex","0",1,"addModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","",2,"transition","all 0.5s","pointer-events","none"],[1,"addModuleFormContent",3,"ngSubmit","formGroup"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","width",1,"inputLabel"],["placeholder","5","formControlName","width","max","10","min","0.1","id","width","type","number","step","0.01",1,"addModuleInput"],["class","validation-error",4,"ngIf"],["for","length",1,"inputLabel"],["placeholder","3","formControlName","length","max","10","min","0.1","id","length","type","number","step","0.01",1,"addModuleInput"],["for","height",1,"inputLabel"],["placeholder","2.5","formControlName","height","max","10","min","0.1","id","height","type","number","step","0.01",1,"addModuleInput"],["for","name",1,"inputLabel"],["placeholder","\u0413\u043E\u0441\u0442\u0438\u043D\u0430\u044F","formControlName","name","id","name","type","text",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],["class","deleteItemAddModuleBtn",3,"click",4,"ngIf"],[1,"workArea"],[1,"guideSwitcher",3,"click","title"],[3,"saveObjectsEmitter","roomData"],[1,"roomSpan"],["class","room",3,"grid-area","display","touchstart","keydown.enter","mousedown",4,"ngFor","ngForOf"],["class","furnitureCategoriesButtonsSpan",4,"ngIf"],["class","guideOverlay",4,"ngIf"],[1,"validation-error"],[1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt",""],[1,"room",3,"touchstart","keydown.enter","mousedown"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton",3,"href",4,"ngFor","ngForOf"],[1,"furnitureCategoryButton",3,"href"],[1,"guideOverlay"],[1,"guideSpan"],[1,"guideWindow",3,"ngTemplateOutlet"],["src","assets/images/addIcon.svg","alt","Close",1,"closeIcon",3,"click"],[1,"guideContainer"],[1,"guideSection"],[1,"guideText"],[1,"animationContainer",2,"display","flex","justify-content","center"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","pressMouse"],[1,"dividerWithText"],[1,"dividerLine"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","pressMousetwice"],[1,"animationContainer"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","xMouse"],[1,"dividerText"],[1,"keyboardHint"],["src","assets/images/enter.svg","alt","Enter",1,"enterKey"],[1,"arrowsWrapper"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","top",2,"rotate","90deg"],[1,"middleArrows"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","left"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","bottom",2,"rotate","270deg"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","right",2,"rotate","180deg"],["src","assets/images/qButton.svg","alt","q",1,"arrowKey","left",2,"width","50px"],["src","assets/images/eButton.svg","alt","e",1,"arrowKey","right",2,"width","50px"]],template:function(i,r){if(i&1){let o=vt();I(0,"span",4)(1,"span",5)(2,"button",6),Me("click",function(){return ke(o),Ue(r.currentViewRoom===void 0?r.toggleOpenRoomModule():r.sceneOpenToggle===!0?r.closeScene():r.closeViewRoom())}),ye(3,"img",7),D(),I(4,"form",8),Me("ngSubmit",function(){return ke(o),Ue(r.currentIdClickedRoom===void 0?r.addRoom():r.updateRoom())}),I(5,"h2",9),Z(6,"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u043A\u043E\u043C\u043D\u0430\u0442\u044B"),D(),I(7,"span",10)(8,"label",11),Z(9,"\u0428\u0438\u0440\u0438\u043D\u0430(\u043C)"),D(),ye(10,"input",12),Pe(11,Ece,2,0,"span",13),D(),I(12,"span",10)(13,"label",14),Z(14,"\u0414\u043B\u0438\u043D\u0430(\u043C)"),D(),ye(15,"input",15),Pe(16,Mce,2,0,"span",13),D(),I(17,"span",10)(18,"label",16),Z(19,"\u0412\u044B\u0441\u043E\u0442\u0430(\u043C)"),D(),ye(20,"input",17),Pe(21,Sce,2,0,"span",13),D(),I(22,"span",10)(23,"label",18),Z(24,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),D(),ye(25,"input",19),Pe(26,Tce,2,0,"span",13),D(),I(27,"span",20)(28,"button",21),Z(29,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),D(),Pe(30,Ice,2,0,"button",22),D()()(),I(31,"span",23)(32,"button",24),Me("click",function(){return ke(o),Ue(r.turnoffGuides(!!r.isGuideIncluded))}),Z(33),D(),I(34,"app-scene",25,0),Me("saveObjectsEmitter",function(a){return ke(o),Ue(r.updateRoomObjects(a))}),D(),I(36,"span",26),Pe(37,Dce,2,6,"button",27)(38,Rce,2,1,"span",28),D()()(),Pe(39,Pce,4,1,"div",29)(40,Oce,13,0,"ng-template",null,1,Yi)(42,Nce,22,0,"ng-template",null,2,Yi)(44,Fce,16,0,"ng-template",null,3,Yi)}if(i&2){let o,s,a,l;H(2),Hn("rotate",r.currentViewRoom===void 0?"0deg":"225deg"),H(2),Hn("opacity",r.currentViewRoom===void 0?1:0),$("formGroup",r.roomForm),H(7),$("ngIf",((o=r.roomForm.get("width"))==null?null:o.invalid)&&((o=r.roomForm.get("width"))==null?null:o.touched)),H(5),$("ngIf",((s=r.roomForm.get("length"))==null?null:s.invalid)&&((s=r.roomForm.get("length"))==null?null:s.touched)),H(5),$("ngIf",((a=r.roomForm.get("height"))==null?null:a.invalid)&&((a=r.roomForm.get("height"))==null?null:a.touched)),H(5),$("ngIf",((l=r.roomForm.get("name"))==null?null:l.invalid)&&((l=r.roomForm.get("name"))==null?null:l.touched)),H(2),$("disabled",!r.roomForm.valid),H(2),$("ngIf",r.currentIdClickedRoom!==void 0),H(2),$("title",r.isGuideIncluded?"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C":"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C"),H(),rr(" \u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438 \u043F\u043E \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044E ",r.isGuideIncluded?"\u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B":"\u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u044B"," "),H(),Hn("opacity",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0)("z-index",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0),$("roomData",r.currentViewRoom!==void 0?r.planHouse[r.currentViewRoom]:r.lastPlanHouse),H(2),In("viewRoomSmallScreen",r.currentViewRoom!==void 0),H(),$("ngForOf",r.planHouse),H(),$("ngIf",!r.sceneOpenToggle&&r.currentViewRoom!==void 0),H(),$("ngIf",r.isGuideVisible&&r.isGuideIncluded)}},dependencies:[Js,Si,ho,ps,fo,Em,fs,hs,Mm,NT,Fo,Lo,Dn,Jw],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.workArea[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;grid-area:1/1/2/2}app-scene[_ngcontent-%COMP%]{grid-area:1/1/2/2}.roomSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;gap:10px;grid-template-columns:repeat(10,calc(10% - 10px));grid-template-rows:repeat(10,calc(10% - 10px));aspect-ratio:1;justify-content:space-around;z-index:0}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;cursor:pointer;z-index:3;border:none;transition:all .75s ease-in-out,background-color .4s ease-in-out;color:#dad7cd;font-size:1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.guideSwitcher[_ngcontent-%COMP%]{grid-area:1/1/2/2;height:40px;width:fit-content;padding:10px;align-self:flex-start;justify-self:center;background:none;border:none;border-bottom:1px solid transparent;cursor:pointer;color:gray;margin-top:-45px;transition:all .3s ease-in-out;position:relative}.guideSwitcher[_ngcontent-%COMP%]:hover{color:#fff!important;border-bottom-color:#fff}.guideSwitcher[_ngcontent-%COMP%]:hover:after{width:100%}.guideSwitcher[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:1px;background:#fff;transition:width .3s ease-in-out}.dividerWithText[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.dividerLine[_ngcontent-%COMP%]{flex:1;height:2px;background-color:#1f1f1f}.dividerText[_ngcontent-%COMP%]{padding:0 10px;color:#666;font-size:14px}.planHouseModule[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-template-columns:1fr}.roomView[_ngcontent-%COMP%]{margin-left:30px;align-self:start;margin-top:30px}.addModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:5;width:35px;aspect-ratio:1;margin-top:10px;justify-self:end;cursor:pointer;rotate:45deg;transition:all .4s ease-in-out}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.addModuleSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;min-width:300px;width:35%;justify-self:end;padding-right:30px;height:fit-content;margin-top:30px;margin-right:30px}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:calc(100% - 60px);padding:0 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 5px #fff;overflow:hidden;transition:all .4s ease-in-out;max-height:0;border-radius:10px;background-color:#000;z-index:4}.openAddModule[_ngcontent-%COMP%]{max-height:1000px;padding:30px 45px}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleInput.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff6b6b;background-color:#ff6b6b0d}.validation-error[_ngcontent-%COMP%]{color:#ff6b6b;font-size:12px;margin-top:4px;display:block;height:16px}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.functionShopsModuleBtns[_ngcontent-%COMP%]{display:flex;gap:10px}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:10px;padding:15px;width:100%;border:none;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{width:20%;height:50px;display:flex;align-items:center;justify-content:center;border-radius:15px;background-color:#a3b18a;border:none;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:25px}.none[_ngcontent-%COMP%]{display:none}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;height:250px;margin-top:100px;max-height:400px;padding:15px;overflow-y:scroll;overflow-x:hidden;width:30%}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;flex-shrink:0;color:#fff;cursor:pointer;border:none;text-decoration:none;transition:all .3s ease-in-out}.furnitureCategoryButton[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@media (max-width: 768px){.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{width:100%}.viewRoomSmallScreen[_ngcontent-%COMP%]{flex-direction:column}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(30% - 5px)}.addModuleSpan[_ngcontent-%COMP%]{margin-right:0;padding-right:0}.workArea[_ngcontent-%COMP%]{flex-direction:column}}.furnitureCategory[_ngcontent-%COMP%]{grid-area:1/1/2/2;background-color:#000;z-index:4;display:flex;flex-direction:column;gap:30px;height:0px;padding:0 10px;overflow:hidden;transition:all .5s ease-in-out}.furnitureCategoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.furnitureList[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.openFurniturelist[_ngcontent-%COMP%]{height:100%;padding:50px 10px 10px}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);display:flex;gap:10px;flex-direction:column;align-items:center}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}.guideContainer[_ngcontent-%COMP%]{background-color:#000;border-radius:12px;padding:1.5rem;color:#dad7cd;display:flex;flex-direction:column;gap:1.5rem;max-width:100%;box-sizing:border-box}.guideSection[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;flex:1}.guideText[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,1.3rem);margin:0;color:#a3b18a;text-align:center;line-height:1.4}.animationContainer[_ngcontent-%COMP%]{position:relative;width:140px;aspect-ratio:1;margin:.5rem 0}.mouse[_ngcontent-%COMP%]{position:absolute;width:40px}.xMouse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_crossAnimation 3s infinite ease-in-out}.pressMouse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pressAnimation 1.5s infinite ease-in-out}.pressMousetwice[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pressAnimationTwice 1.5s infinite ease-in-out}@keyframes _ngcontent-%COMP%_pressAnimation{0%,40%{transform:translateY(0)}20%{transform:translateY(10px)}}@keyframes _ngcontent-%COMP%_pressAnimationTwice{0%,30%,60%{transform:translateY(0)}15%,45%{transform:translateY(10px)}}.keyboardHint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;width:100%;max-width:300px;justify-content:center}.enterKey[_ngcontent-%COMP%]{width:100px;aspect-ratio:2}.middleArrows[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.arrowsWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.arrowKey[_ngcontent-%COMP%]{width:40px;aspect-ratio:1;opacity:.5;transition:opacity .3s}.arrowKey.top[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 0s}.arrowKey.right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite .5s}.arrowKey.bottom[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 1s}.arrowKey.left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 1.5s}@keyframes _ngcontent-%COMP%_crossAnimation{0%,to{transform:translateY(50%)}25%{transform:translate(100px,50%)}50%{transform:translate(50px)}75%{transform:translate(50px,100%)}}@keyframes _ngcontent-%COMP%_pulseArrow{0%,to{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}.guideOverlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background-color:#000000b3;z-index:10}.guideOverlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.guideSpan[_ngcontent-%COMP%]{position:relative;background-color:#000;border-radius:12px;padding:2rem;max-width:90%;width:50%;max-height:90vh;overflow-y:auto;box-shadow:0 0 20px #a3b18a4d}.closeIcon[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;width:1.5rem;height:1.5rem;cursor:pointer;rotate:45deg;transition:transform .2s}.closeIcon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@media (max-width: 768px){.guideContainer[_ngcontent-%COMP%]{padding:1rem;gap:1rem}.animationContainer[_ngcontent-%COMP%]{max-width:150px}.keyboardHint[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.arrowsWrapper[_ngcontent-%COMP%]{width:60%}.guideSpan[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width: 480px){.guideText[_ngcontent-%COMP%]{font-size:.9rem}.animationContainer[_ngcontent-%COMP%]{max-width:120px}}']})}return n})();function Lh(){return/windows nt|macintosh|x11|linux/.test(navigator.userAgent.toLowerCase())}var kh=(()=>{class n{httpModule;baseServiceUrl=hi+"find?q=";inputFurnitureNameSubject=new Wn("");furnitureName$=this.inputFurnitureNameSubject.asObservable();constructor(t){this.httpModule=t}setFurnitureName(t){this.inputFurnitureNameSubject.next(t)}GETfindFurnitures(t){return un(this.httpModule.get(this.baseServiceUrl+t))}static \u0275fac=function(i){return new(i||n)(ze(Bi))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Gc=(()=>{class n{httpModule;baseServiceUrl=hi+"furniture/images/";constructor(t){this.httpModule=t}GETaccountAvatar(t){return`${hi}account/avatar?jwt=${t}`}POSTuploadUserAvatar(t,i){let r=new FormData;r.append("image",t);let o=new en().set("jwt",i);return un(this.httpModule.post(`${hi}account/avatar`,r,{params:o}))}POSTuploadProjectImages(t,i,r,o){let s=new FormData;i.images.forEach(l=>s.append("images",l));let a=new en().set("furnitureCardId",o).set("color",t).set("idMainImage",i.idMainImage).set("jwt",r);return un(this.httpModule.post(this.baseServiceUrl+"upload",s,{params:a}))}DELETEprojectColor(t,i,r){let o=new en().set("jwt",t).set("furnitureCardId",i).set("color",r);return un(this.httpModule.delete(this.baseServiceUrl+"delete/color",{params:o}))}DELETEproject(t,i){let r=new en().set("jwt",t).set("furnitureCardId",i);return un(this.httpModule.delete(this.baseServiceUrl+"delete/project",{params:r}))}GETallProjectImages(t,i){let r=new en().set("furnitureCardId",t).set("color",i);return un(this.httpModule.get(this.baseServiceUrl+"all",{params:r}))}GETmainImage(t,i){return`${this.baseServiceUrl}main?furnitureCardId=${t}&color=${i}`}static \u0275fac=function(i){return new(i||n)(ze(Bi))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Lce=(n,e)=>({variantCardDesktop:n,variantCardMobile:e});function kce(n,e){n&1&&(I(0,"h3"),Z(1,"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E :("),D())}function Uce(n,e){if(n&1&&(I(0,"span",11)(1,"div")(2,"h3",12),Z(3),D(),I(4,"a",13),Z(5),ls(6,"costFormat"),D()(),ye(7,"img",14),D()),n&2){let t=e.$implicit,i=le();$("ngClass",fy(7,Lce,i.checkDesktop(),!i.checkDesktop())),H(3),Cn(t.name),H(),$("routerLink",i.getUrl(t.id,t.category)),H(),Cn(cs(6,5,t.cost)),H(2),$("src",i.getImage(t.id,t.colorRequest),Mr)}}var Qw=(()=>{class n{finderService;elementRef;renderer;imageService;route;variantsSpan;inputElement;foundFurniture;debounceTimer=null;constructor(t,i,r,o,s){this.finderService=t,this.elementRef=i,this.renderer=r,this.imageService=o,this.route=s}ngAfterViewInit(){this.variantsSpan=this.elementRef.nativeElement.querySelector(".variantsSpan"),this.inputElement=this.elementRef.nativeElement.querySelector(".finderInput")}findFurnitures(t){return dt(this,null,function*(){let i=yield this.finderService.GETfindFurnitures(t);this.openFoundResultsList(),i.length>0?(this.closeFoundResultsList(),setTimeout(()=>{this.foundFurniture=i,this.openFoundResultsList()},400)):this.foundFurniture!==void 0?this.foundFurniture.length=0:this.foundFurniture=[]})}openFoundResultsList(){this.variantsSpan&&this.renderer.addClass(this.variantsSpan,"variantsSpanOpen")}closeFoundResultsList(){this.variantsSpan&&this.renderer.removeClass(this.variantsSpan,"variantsSpanOpen")}checkDesktop=Lh;clearInput(){this.inputElement.value="",this.inputProcess(),this.closeFoundResultsList()}checkShopPage(t){let i=this.route.root;for(;i.firstChild;)i=i.firstChild;let r=i.snapshot.routeConfig?.component;return r&&r.name==="_ShopPageComponent"?(this.finderService.setFurnitureName(t),!0):!1}inputProcess(){let t=this.inputElement.value;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{if(t.length===0){this.checkShopPage(t)&&this.closeFoundResultsList();return}this.checkShopPage(t)||this.findFurnitures(t)},300)}getImage(t,i){return this.imageService.GETmainImage(t,i)}getUrl(t,i){return`/shop/${i??"all"}/${t}`}static \u0275fac=function(i){return new(i||n)(ue(kh),ue(Yt),ue(Sr),ue(Gc),ue(Zi))};static \u0275cmp=vn({type:n,selectors:[["app-finder"]],decls:12,vars:2,consts:[[1,"finder"],[1,"finderSpan"],["routerLink","/shop","title","\u041F\u043E\u0438\u0441\u043A",1,"finderBtn","btn"],["loading","lazy","src","/assets/images/searchIcon.svg","alt","search"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438","type","text",1,"finderInput",3,"input"],["title","\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043F\u043E\u043B\u0435",1,"closeBtn","btn",3,"click"],["src","/assets/images/cancelIcon.svg","alt",""],[1,"variantsSpan"],[4,"ngIf"],["class","variantCard",3,"ngClass",4,"ngFor","ngForOf"],["routerLink","/shop",1,"openShopBtn"],[1,"variantCard",3,"ngClass"],[1,"cardName"],[1,"cardCost",3,"routerLink"],["alt","",1,"cardImage",3,"src"]],template:function(i,r){i&1&&(I(0,"span",0)(1,"span",1)(2,"button",2),ye(3,"img",3),D(),I(4,"input",4),Me("input",function(){return r.inputProcess()}),D(),I(5,"button",5),Me("click",function(){return r.clearInput()}),ye(6,"img",6),D()(),I(7,"span",7),Pe(8,kce,2,0,"h3",8)(9,Uce,8,10,"span",9),I(10,"button",10),Z(11,"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043C\u0430\u0433\u0430\u0437\u0438\u043D"),D()()()),i&2&&(H(8),$("ngIf",r.foundFurniture!==void 0&&r.foundFurniture.length===0),H(),$("ngForOf",r.foundFurniture))},dependencies:[Po,Si,Dn,ds,Ec],styles:['@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.finder[_ngcontent-%COMP%]{width:100%;min-height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto 1fr}.finderSpan[_ngcontent-%COMP%]{width:100%;height:48px;display:flex;gap:10px;border-radius:15px;background-color:#fff;padding:0 10px;z-index:3;grid-area:1/1/2/2;align-items:center;justify-content:space-around}.btn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{aspect-ratio:1;background:none;border:none;cursor:pointer}.finderBtn[_ngcontent-%COMP%]{height:90%}.closeBtn[_ngcontent-%COMP%]{height:50%;align-self:center;filter:opacity(.75)}.finderInput[_ngcontent-%COMP%]{width:75%;background:none;border:none;outline:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.variantsSpan[_ngcontent-%COMP%]{transition:all .5s ease-in-out;overflow:hidden;max-height:0;grid-area:1/1/2/2;background-color:#000;border-radius:15px;box-shadow:0 0 5px #fff;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:10px;box-sizing:border-box;width:calc(100% + 20px);z-index:2}.variantsSpanOpen[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.variantsSpanOpen[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;padding:60px 10px 10px;overflow-y:scroll;max-height:400px}.variantCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;height:80%;transition:all .5s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}.cardCost[_ngcontent-%COMP%]{border-radius:5px;color:gray;transition:all .5s ease-in-out;cursor:pointer;text-decoration:none;font-variant-numeric:tabular-nums}.variantCardDesktop[_ngcontent-%COMP%]:hover{height:90%}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardCost[_ngcontent-%COMP%]{padding:15px 45px;color:#000;background-color:#fff}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardName[_ngcontent-%COMP%]{margin-bottom:25px}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardImage[_ngcontent-%COMP%]{height:65%}.variantCardMobile[_ngcontent-%COMP%]{height:90%}.variantCardMobile[_ngcontent-%COMP%]   .cardCost[_ngcontent-%COMP%]{margin-top:10px;display:block;padding:0 45px;height:50px;line-height:50px;color:#000;background-color:#fff;font-size:18px}.variantCardMobile[_ngcontent-%COMP%]   .cardName[_ngcontent-%COMP%]{font-size:23px;margin-bottom:50px}.variantCardMobile[_ngcontent-%COMP%]   .cardImage[_ngcontent-%COMP%]{height:65%}.cardImage[_ngcontent-%COMP%]{height:60%;width:fit-content;transition:all .5s ease-in-out}.cardName[_ngcontent-%COMP%]{color:#fff;transition:all .5s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin:5px 0}.variantsSpan[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff}.openShopBtn[_ngcontent-%COMP%]{width:200px;border-radius:10px;background-color:#fff;padding:20px;border:none;margin-bottom:10px;transition:transform .2s ease-in-out;cursor:pointer}.openShopBtn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}']})}return n})();function Bce(n,e){if(n&1){let t=vt();I(0,"button",5),Me("click",function(){ke(t);let r=le();return Ue(r.toggleMenu())}),ye(1,"img",6),D()}if(n&2){let t=le();In("active",t.menuOpen)}}function Vce(n,e){n&1&&(I(0,"div",7),ye(1,"app-finder"),I(2,"span",8)(3,"a",9),ye(4,"img",10),D(),I(5,"a",11),zM(),I(6,"svg",12),ye(7,"path",13),D()(),jM(),I(8,"a",14),ye(9,"img",15),D(),I(10,"a",16),ye(11,"img",17),D()()())}function Hce(n,e){n&1&&(I(0,"div",18),ye(1,"app-finder"),I(2,"a",19),ye(3,"img",10),I(4,"div"),Z(5,"\u0410\u043A\u043A\u0430\u0443\u043D\u0442"),D()(),I(6,"a",20),zM(),I(7,"svg",12),ye(8,"path",13),D(),jM(),I(9,"div"),Z(10,"\u041F\u043B\u0430\u043D"),D()(),I(11,"a",21),ye(12,"img",15),I(13,"div"),Z(14,"\u041C\u0435\u0431\u0435\u043B\u044C"),D()(),I(15,"a",22),ye(16,"img",17),I(17,"div"),Z(18,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D"),D()()())}var Ds=(()=>{class n{menuOpen=!1;isMobileView=!1;ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=768,this.isMobileView||(this.menuOpen=!1)}toggleMenu(){this.menuOpen=!this.menuOpen}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=vn({type:n,selectors:[["app-navigation-panel"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,Ao)},decls:6,vars:3,consts:[[1,"navigationSpan"],["routerLink","/",1,"homeBtn","navigationBtn"],["class","hamburger-menu",3,"active","click",4,"ngIf"],["class","desktop-content",4,"ngIf"],["class","mobile-menu",4,"ngIf"],[1,"hamburger-menu",3,"click"],["ng","","loading","lazy","src","/assets/images/hamburgerMenuIcon.svg","alt","menu"],[1,"desktop-content"],[1,"mainBtns"],["routerLink","/account",1,"accountBtn","navigationBtn"],["loading","lazy","src","/assets/images/accountIcon.svg","alt","account"],["routerLink","/plan",1,"createBtn","navigationBtn"],["viewBox","0 0 32 32"],["d","M28,14H18V4c0-1.104-0.896-2-2-2s-2,0.896-2,2v10H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h10v10c0,1.104,0.896,2,2,2 s2-0.896,2-2V18h10c1.104,0,2-0.896,2-2S29.104,14,28,14z","fill","#DAD7CD"],["routerLink","/create/new",1,"navigationBtn"],["loading","lazy","src","/assets/images/furnitureIcon.svg","alt","furniture"],["routerLink","/shop",1,"navigationBtn"],["loading","lazy","src","/assets/images/shopIcon.svg","alt","shop"],[1,"mobile-menu"],["routerLink","/account",1,"mobile-menu-item"],["routerLink","/plan",1,"mobile-menu-item"],["routerLink","/create/new",1,"mobile-menu-item"],["routerLink","/shop",1,"mobile-menu-item"]],template:function(i,r){i&1&&(I(0,"nav",0)(1,"a",1),Z(2,"HQ"),D(),Pe(3,Bce,2,2,"button",2)(4,Vce,12,0,"div",3)(5,Hce,19,0,"div",4),D()),i&2&&(H(3),$("ngIf",r.isMobileView),H(),$("ngIf",!r.isMobileView),H(),$("ngIf",r.isMobileView&&r.menuOpen))},dependencies:[ds,Qw,Dn],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.desktop-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:80%;height:100%}.navigationBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{height:100%}app-finder[_ngcontent-%COMP%]{height:80%;width:60%}.homeBtn[_ngcontent-%COMP%]{color:#dad7cd;font-family:Gloock;font-size:27.5px;text-decoration:none;align-content:center}.navigationSpan[_ngcontent-%COMP%]{display:flex;background-color:#000;border-radius:10px;gap:5px;justify-content:space-around;width:calc(90vw - 30px);min-width:550px;margin:0 auto;height:60px;align-items:center;border:1px solid rgba(163,177,138,.3);position:relative}@media (max-width: 768px){.navigationSpan[_ngcontent-%COMP%]{justify-content:space-between;padding:0 15px;width:calc(90vw - 30px);min-width:auto}}.navigationBtn[_ngcontent-%COMP%]{height:80%;background:none;border:none;cursor:pointer}.mainBtns[_ngcontent-%COMP%]{height:75%;display:flex;gap:15px;align-items:center}.createBtn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:sepia(4%)}.hamburger-menu[_ngcontent-%COMP%]{display:none;background:none;border:none;cursor:pointer;padding:0;height:30px;width:30px;transition:all .5s ease-in-out}.hamburger-menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.hamburger-menu.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(64%) sepia(11%) saturate(1233%) hue-rotate(71deg) brightness(92%) contrast(86%)}@media (max-width: 768px){.hamburger-menu[_ngcontent-%COMP%]{display:block}}.mobile-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:100%;margin-top:10px;left:0;right:0;background-color:#000;border-radius:10px;padding:15px;flex-direction:column;gap:15px;z-index:100;border:1px solid rgba(163,177,138,.3)}.mobile-menu[_ngcontent-%COMP%]   app-finder[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-bottom:10px;height:40px}.mobile-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#dad7cd;text-decoration:none;padding:8px}.mobile-menu-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .mobile-menu-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.mobile-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.desktop-content[_ngcontent-%COMP%]{display:none}.mobile-menu[_ngcontent-%COMP%]{display:flex}}']})}return n})();var zce={images:["/assets/images/sofaSliderPhotos/1.png","/assets/images/sofaSliderPhotos/2.png","/assets/images/sofaSliderPhotos/3.png","/assets/images/sofaSliderPhotos/4.png"],idMainImage:0},zV={name:"Onte Bucle White",colors:[{color:"#FFC2CC",imagesData:zce}],description:`\u041C\u0435\u0445\u0430\u043D\u0438\u0437\u043C: \u043F\u0430\u043D\u0442\u043E\u0433\u0440\u0430\u0444
\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442 \u043F\u043E\u043B\u0430: 12 \u0441\u043C
\u042F\u0449\u0438\u043A \u0434\u043B\u044F \u0431\u0435\u043B\u044C\u044F: \u0434\u0430
\u041C\u0430\u043A\u0441. \u043D\u0430\u0433\u0440\u0443\u0437\u043A\u0430: 100 \u043A\u0433`,shops:[{cost:125990,url:"https://www.divan.ru/blagoveshchensk/product/divan-uglovoj-onte-bucle-white"},{cost:84990,url:"https://avtorm.ru/catalog/product-divan-uglovoy-onte-bucle-white"}],additionalData:{category:"sofa"},proportions:{width:1,height:1,length:1}},jV=[{name:"\u041F\u0440\u0438\u0445\u043E\u0436\u0430\u044F",objects:[],gridArea:"1 / 1 / 3 / 4",roomProportions:{width:3,length:2,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:"3 / 1 / 4 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:" 4 / 1 / 5 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0413\u043E\u0441\u0442\u0438\u043D\u043D\u0430\u044F",objects:[],gridArea:"5 / 1 / 8 / 5",roomProportions:{width:4,length:3,height:3}},{name:"\u0421\u043F\u0430\u043B\u044C\u043D\u044F",objects:[],gridArea:" 3 / 2 / 5 / 4",roomProportions:{width:2,length:2,height:3}}];var GV=n=>({activeChapterBtn:n}),WV=n=>({opacityDisable:n});function jce(n,e){n&1&&(I(0,"span",24)(1,"div",25)(2,"span",26),ye(3,"div")(4,"div")(5,"div")(6,"div"),D()(),I(7,"span",27)(8,"span",28),ye(9,"div",29)(10,"div",30)(11,"div",31)(12,"div",32),D(),I(13,"h1",33),Z(14,"HOUSEQUALITY"),D(),I(15,"span",34)(16,"button",35),Z(17,"Shop"),D(),I(18,"button",36),Z(19,"Furniture"),D(),I(20,"button",37),Z(21,"Project"),D(),I(22,"button",38),Z(23,"Profile"),D()()()())}function Gce(n,e){n&1&&(I(0,"a",39),Z(1,"\u041F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u043A\u0430"),D())}var $V=(()=>{class n{elementRef;router;constructor(t,i){this.elementRef=t,this.router=i}furnitureTemplate="create";furnitureExampleData=zV;planHouseExampleData=jV;isMobileView=!1;ngAfterViewInit(){this.elementRef.nativeElement.querySelectorAll("app-create-furniture,app-plan-house").forEach(t=>{t.querySelectorAll("*").forEach(i=>{i.setAttribute("tabindex","-1"),i.style.pointerEvents="none"})})}ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=600}focusFinder(){let t=this.elementRef.nativeElement.querySelector(".finderInput");t&&t.focus()}openViewFurniture(){this.furnitureTemplate="view"}openCreateFurniture(){this.furnitureTemplate="create"}navigateToPage(t){this.router.navigateByUrl(t)}static \u0275fac=function(i){return new(i||n)(ue(Yt),ue(gr))};static \u0275cmp=vn({type:n,selectors:[["app-main-page"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,Ao)},decls:60,vars:17,consts:[["class","startScreenSpan",4,"ngIf"],[1,"mainInformation"],[1,"projectPreviewSpan"],[1,"someSpan"],[1,"chapterTitle",2,"margin-bottom","0"],[1,"descriptionText"],[1,"exampleFunctions"],[1,"quarter-circle","figureFunction"],[1,"exampleFunctionTitle"],[1,"exampleFunctionDescription"],[1,"square","figureFunction",2,"border-radius","20px"],[1,"chapterTitle"],[1,"chapterChangeBtnsSpan"],[1,"changeChapterBtn",3,"click","ngClass"],[1,"furnitureModule"],[1,"furnitureModuleVariant",3,"click","furnitureData","ngClass"],[3,"click","planHouse"],[1,"footerColumnsSpan"],[1,"footerColumn"],[1,"footerMenuBtn",2,"color","#DAD7CD",3,"click"],["routerLink","/account",1,"footerMenuBtn"],["routerLink","/create/new",1,"footerMenuBtn",2,"color","#DAD7CD"],["routerLink","/plan","class","footerMenuBtn",4,"ngIf"],[1,"projectFooterTitle"],[1,"startScreenSpan"],[1,"circleDecoration"],[1,"circleDecorationSpan"],[1,"startInformationSpan"],[1,"decorationFigures"],[1,"quarter-circle"],[1,"square"],[1,"parallelogram"],[1,"circle"],[1,"projectTitle"],[1,"navigationStartMenu"],["routerLink","/shop",1,"startNavigationBtn"],["routerLink","/create/new",1,"startNavigationBtn"],["routerLink","/plan",1,"startNavigationBtn"],["routerLink","/account",1,"startNavigationBtn"],["routerLink","/plan",1,"footerMenuBtn"]],template:function(i,r){i&1&&(Pe(0,jce,24,0,"span",0),I(1,"span",1),ye(2,"app-navigation-panel"),I(3,"span",2)(4,"span",3)(5,"h2",4),Z(6,"\u0412\u0430\u0448 \u0438\u0434\u0435\u0430\u043B\u044C\u043D\u044B\u0439 \u0434\u043E\u043C"),D(),I(7,"h3",5),Z(8,"HouseQuality - \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u0430 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0438\u0434\u0435\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u0434\u043E\u043C\u0430. \u0417\u0430\u0439\u0434\u0438\u0442\u0435 \u0432 \u043D\u0430\u0448 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0446\u0438\u0444\u0440\u043E\u0432\u043E\u0433\u043E \u0434\u0438\u0437\u0430\u0439\u043D\u0430 \u0438 \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0441\u0432\u043E\u0435 \u043F\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435!"),D(),I(9,"span",6)(10,"div",7)(11,"h2",8),Z(12,"\u0421\u0442\u0438\u043B\u044C"),D(),I(13,"h3",9),Z(14,"\u0412\u0430\u0448\u0430 \u0438\u0434\u0435\u044F"),D()(),I(15,"div",10)(16,"h2",8),Z(17,"\u0414\u043E\u043C"),D(),I(18,"h3",9),Z(19,"\u0412\u0430\u0448\u0430 \u0437\u043E\u043D\u0430"),D()(),I(20,"div",7)(21,"h2",8),Z(22,"\u041F\u043B\u0430\u043D"),D(),I(23,"h3",9),Z(24,"\u041D\u043E\u0432\u044B\u0439 \u0432\u0438\u0434"),D()(),I(25,"div",10)(26,"h2",8),Z(27,"\u041C\u0435\u0431\u0435\u043B\u044C"),D(),I(28,"h3",9),Z(29,"\u0411\u043E\u043B\u044C\u0448\u043E\u0439 \u0432\u044B\u0431\u043E\u0440"),D()()()(),I(30,"span",3)(31,"h2",11),Z(32,"\u0421\u043E\u0437\u0434\u0430\u0435\u043C \u0438 \u0432\u043E\u043F\u043B\u043E\u0449\u0430\u0435\u043C \u0432\u0430\u0448\u0438 \u043C\u0435\u0447\u0442\u044B"),D(),I(33,"span",12)(34,"button",13),Me("click",function(){return r.openCreateFurniture()}),Z(35,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),D(),I(36,"button",13),Me("click",function(){return r.openViewFurniture()}),Z(37,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),D()()(),I(38,"span",14)(39,"app-create-furniture",15),Me("click",function(){return r.navigateToPage("/create/new")}),D(),I(40,"app-view-furniture",15),Me("click",function(){return r.navigateToPage("/shop")}),D()(),I(41,"span",3)(42,"h2",11),Z(43,"\u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u0441\u0432\u043E\u0439 \u0434\u043E\u043C"),D(),I(44,"h3",5),Z(45,"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B \u0438 \u043F\u0435\u0440\u0435\u0434\u0432\u0438\u043D\u044C\u0442\u0435 \u0438\u0445"),D()(),I(46,"app-plan-house",16),Me("click",function(){return r.navigateToPage("/plan")}),D()()(),I(47,"footer")(48,"span",17)(49,"span",18)(50,"a",19),Me("click",function(){return r.focusFinder()}),Z(51,"\u041D\u0430\u0439\u0442\u0438 \u043C\u0435\u0431\u0435\u043B\u044C"),D(),I(52,"a",20),Z(53,"\u0410\u043A\u043A\u0430\u0443\u043D\u0442"),D()(),I(54,"span",18)(55,"a",21),Z(56,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),D(),Pe(57,Gce,2,0,"a",22),D()(),I(58,"h2",23),Z(59,"HouseQuality 2025"),D()()),i&2&&($("ngIf",!r.isMobileView),H(34),$("ngClass",mr(9,GV,r.furnitureTemplate==="create")),H(2),$("ngClass",mr(11,GV,r.furnitureTemplate==="view")),H(3),$("furnitureData",r.furnitureExampleData)("ngClass",mr(13,WV,r.furnitureTemplate==="view")),H(),$("furnitureData",r.furnitureExampleData)("ngClass",mr(15,WV,r.furnitureTemplate==="create")),H(6),$("planHouse",r.planHouseExampleData),H(11),$("ngIf",!r.isMobileView))},dependencies:[Wf,$_,jc,Po,Ds,ds,Dn],styles:['@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.startScreenSpan[_ngcontent-%COMP%]{width:100vw;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;padding-top:5vh;overflow:hidden;background:#a3b18a;background:linear-gradient(0deg,#a3b18a,#dad7cd)}@media (max-width: 600px){.startScreenSpan[_ngcontent-%COMP%]{padding-top:3vh}}.circleDecoration[_ngcontent-%COMP%]{grid-area:1/1/2/2}.circleDecorationSpan[_ngcontent-%COMP%]{clip-path:inset(0 0 50% 0);margin-bottom:-50%;display:grid;aspect-ratio:1;place-items:center;content-visibility:auto}.circleDecorationSpan[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#3a5a40;border-radius:50%;grid-area:1/1/2/2;aspect-ratio:1;animation:_ngcontent-%COMP%_wave 2s infinite ease-in-out}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){opacity:1;width:50%;animation-delay:0s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){opacity:.8;width:65%;animation-delay:.3s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){opacity:.6;width:80%;animation-delay:.6s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){opacity:.4;width:95%;animation-delay:.9s}@keyframes _ngcontent-%COMP%_wave{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.decorationFigures[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:30px;height:45px;width:350px;grid-area:1/1/2/2;z-index:1;justify-content:center}@media (max-width: 600px){.decorationFigures[_ngcontent-%COMP%]{width:280px;gap:15px;height:35px}}.parallelogram[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1/2;transform:skew(-20deg);background-color:#344e41;height:100%}.quarter-circle[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:100% 10px 10px;background-color:#344e41;height:100%}.square[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1;background-color:#344e41;height:100%}.circle[_ngcontent-%COMP%]{width:39px;height:39px;position:relative;border:3px solid #344E41;border-radius:50%}.circle[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:#344e41;border-radius:50%;clip-path:inset(0 50% 0 0)}.circle[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:transparent;border-radius:50%}.startInformationSpan[_ngcontent-%COMP%]{display:flex;gap:20px;flex-direction:column;align-items:center;grid-area:1/1/2/2;z-index:1;margin-top:10px}@media (max-width: 600px){.startInformationSpan[_ngcontent-%COMP%]{gap:15px;margin-top:5px}}.projectTitle[_ngcontent-%COMP%]{font-family:Gloock;font-size:8vw;font-weight:400;color:#000}@media (max-width: 600px){.projectTitle[_ngcontent-%COMP%]{font-size:12vw}}.navigationStartMenu[_ngcontent-%COMP%]{display:flex;gap:10px}@media (max-width: 768px){.navigationStartMenu[_ngcontent-%COMP%]{display:none}}.startNavigationBtn[_ngcontent-%COMP%]{padding:5px;background:none;border:none;font-size:1.75vw;cursor:pointer;text-decoration:none;color:#000}.mainInformation[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;align-items:center;gap:50px;padding:50px;width:calc(100vw - 100px)}@media (max-width: 600px){.mainInformation[_ngcontent-%COMP%]{padding:30px 15px;width:calc(100vw - 30px);gap:30px}}.someSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;justify-content:start}@media (max-width: 600px){.someSpan[_ngcontent-%COMP%]{width:100%;align-items:center;text-align:center}}.chapterTitle[_ngcontent-%COMP%]{font-family:Calypso;font-weight:700;font:3.5vw/1 Calypso;color:#dad7cd;width:60%}@media (max-width: 1024px){.chapterTitle[_ngcontent-%COMP%]{font-size:5vw}}@media (max-width: 768px){.chapterTitle[_ngcontent-%COMP%]{font-size:6vw}}@media (max-width: 600px){.chapterTitle[_ngcontent-%COMP%]{font-size:7vw;width:90%}}.descriptionText[_ngcontent-%COMP%]{color:#a3b18a;width:50%;font-size:20px}@media (max-width: 768px){.descriptionText[_ngcontent-%COMP%]{width:65%}}@media (max-width: 600px){.descriptionText[_ngcontent-%COMP%]{width:90%;font-size:4vw}}.exampleFunctions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:50px;font-size:15px}@media (max-width: 768px){.exampleFunctions[_ngcontent-%COMP%]{width:350px}}@media (max-width: 600px){.exampleFunctions[_ngcontent-%COMP%]{height:auto;flex-wrap:wrap;gap:20px;justify-content:center}}.figureFunction[_ngcontent-%COMP%]{display:flex;height:150px;flex-direction:column;justify-content:center;gap:5px;background-color:#344e41b3}.figureFunction[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:left;margin-left:-10px}@media (max-width: 600px){.figureFunction[_ngcontent-%COMP%]{width:40%;height:120px}}.exampleFunctionTitle[_ngcontent-%COMP%]{font-family:Calypso;font-weight:700;font-size:25px;color:#dad7cd;margin:0 0 0 -10px;cursor:default}@media (max-width: 600px){.exampleFunctionTitle[_ngcontent-%COMP%]{font-size:5vw}}.exampleFunctionDescription[_ngcontent-%COMP%]{color:#a3b18a}@media (max-width: 600px){.exampleFunctionDescription[_ngcontent-%COMP%]{font-size:3.5vw}}.chapterChangeBtnsSpan[_ngcontent-%COMP%]{display:flex;gap:30px;width:450px}@media (max-width: 600px){.chapterChangeBtnsSpan[_ngcontent-%COMP%]{justify-content:center;width:100%;gap:15px}}.changeChapterBtn[_ngcontent-%COMP%]{line-height:50px;cursor:pointer;background-color:#344e41;color:#fff;border:none;border-radius:10px;width:50%;aspect-ratio:4;font-size:1.15rem;transition:all .5s ease-in-out}@media (max-width: 600px){.changeChapterBtn[_ngcontent-%COMP%]{font-size:15px;padding:10px;width:calc(50% - 20px);height:50px;line-height:normal}}.projectPreviewSpan[_ngcontent-%COMP%]{width:80%;min-width:550px}@media (max-width: 1100px){.projectPreviewSpan[_ngcontent-%COMP%]{width:100%}}@media (max-width: 600px){.projectPreviewSpan[_ngcontent-%COMP%]{min-width:auto}}.activeChapterBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#000}.furnitureModule[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center}.furnitureModuleVariant[_ngcontent-%COMP%]{display:block;grid-area:1/1/2/2;transition:all .5s ease-in-out;width:100%;z-index:1}.opacityDisable[_ngcontent-%COMP%]{opacity:0;z-index:-1}app-plan-house[_ngcontent-%COMP%]{margin-top:50px;width:calc(100vw - 100px)}@media (max-width: 600px){app-plan-house[_ngcontent-%COMP%]{width:100%}}footer[_ngcontent-%COMP%]{width:calc(100vw - 200px);background-color:#000;padding:100px;display:flex;flex-direction:column;gap:50px}@media (max-width: 600px){footer[_ngcontent-%COMP%]{width:calc(100vw - 40px);padding:50px 20px;gap:30px}}.footerColumnsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}@media (max-width: 600px){.footerColumnsSpan[_ngcontent-%COMP%]{flex-direction:column;gap:30px}}.footerColumn[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}@media (max-width: 600px){.footerColumn[_ngcontent-%COMP%]{align-items:center}}.footerColumn[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none}.footerMenuBtn[_ngcontent-%COMP%]{background:none;color:#a3b18a;font-size:18px;border:none;text-align:start;cursor:pointer}@media (max-width: 600px){.footerMenuBtn[_ngcontent-%COMP%]{font-size:4.5vw;text-align:center}}.projectFooterTitle[_ngcontent-%COMP%]{color:#a3b18a;color:1.15vw;font-weight:400;text-align:center;cursor:default}@media (max-width: 600px){.projectFooterTitle[_ngcontent-%COMP%]{font-size:4.5vw}}app-navigation-panel[_ngcontent-%COMP%]{margin-left:calc(-50vw + 50%);position:sticky;top:30px;z-index:6;width:100%}@media (max-width: 600px){app-navigation-panel[_ngcontent-%COMP%]{top:15px}}app-view-furniture[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%], app-plan-house[_ngcontent-%COMP%]{display:block;cursor:pointer;width:100%}']})}return n})();function eb(n){return n.accountType==="email"}var Xa=(()=>{class n{httpModule;accountCookieService;baseServiceUrl=hi+"account";constructor(t,i){this.httpModule=t,this.accountCookieService=i}POSTcreateAccount(t){let i=new en().set("accountType",t.accountType).set("nickname",t.nickname);return eb(t)&&(i=i.set("email",t.email).set("password",t.password)),un(this.httpModule.post(this.baseServiceUrl,i))}DELETEaccountJwt(t){let i=new en().set("jwt",t);return un(this.httpModule.delete(this.baseServiceUrl+"/jwt/delete",{params:i}))}PUTupdateSecondaryAccountData(t){console.log("changeData",t);let i=new en({fromObject:{nickname:t.nickname,jwt:t.jwt}});return console.log(i.toString()),un(this.httpModule.put(this.baseServiceUrl,null,{params:i}))}DELETEaccount(t){let i=new en().set("jwt",t);return un(this.httpModule.delete(this.baseServiceUrl,{params:i}))}GETaccount(t){return dt(this,null,function*(){let i=new en().set("jwt",t);try{let{accountData:r}=yield un(this.httpModule.get(this.baseServiceUrl,{params:i}));return r.furnitures=r.furnitures.map(o=>Ct(Ne({},o),{previewUrl:hi+o.previewUrl})),{accountData:r}}catch(r){throw console.error("Error in GETfurnitureCard:",r),r}})}checkJwt(){return!!this.accountCookieService.getJwt()}static \u0275fac=function(i){return new(i||n)(ze(Bi),ze(zi))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Uh=(()=>{class n{httpModule;baseServiceUrl=hi+"auth/";constructor(t){this.httpModule=t}POSTcreateLongJWT(t){let i=new en().set("accountType",t.accountType);return eb(t)&&(i=i.set("email",t.email).set("password",t.password)),un(this.httpModule.post(this.baseServiceUrl+"jwt/long",i))}POSTcreateShortJWT(t){let i=new en().set("email",t);return un(this.httpModule.post(this.baseServiceUrl+"jwt/temporary",null,{params:i}))}PUTupdateBaseData(t){let i={accountType:t.accountType,jwt:t.jwt};eb(t)&&(i.password=t.password);let r=new en({fromObject:i});return console.log(r.toString()),un(this.httpModule.put(this.baseServiceUrl+"account",t))}GETrequestPasswordCode(t){let i=new en().set("email",t);return un(this.httpModule.get(this.baseServiceUrl+"account/code",{params:i}))}static \u0275fac=function(i){return new(i||n)(ze(Bi))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wce(n,e){if(n&1&&ye(0,"div",43),n&2){let t=e.$implicit;Hn("grid-area",t.gridArea)}}function $ce(n,e){if(n&1){let t=vt();I(0,"div",39),Me("click",function(){let r=ke(t).index,o=le(2);return Ue(o.openProject(r))}),I(1,"h4",40),Z(2),D(),I(3,"div",41),Pe(4,Wce,1,2,"div",42),D()()}if(n&2){let t=e.$implicit;H(2),Cn(t.name),H(2),$("ngForOf",t.rooms)}}function qce(n,e){if(n&1&&(I(0,"a",44)(1,"h4",45),Z(2),D(),ye(3,"img",46),D()),n&2){let t=e.$implicit;$("routerLink","/create/"+t._id),H(2),Cn(t.name),H(),$("src",t.previewUrl,Mr)}}function Xce(n,e){if(n&1){let t=vt();I(0,"div",14)(1,"div",15)(2,"div",16),ye(3,"img",17),I(4,"label",18)(5,"input",19),Me("change",function(r){ke(t);let o=le();return Ue(o.uploadAvatar(r))}),D(),ye(6,"img",20),D()(),I(7,"div",21)(8,"h2",22),Z(9),D(),I(10,"div",23)(11,"div",24)(12,"span",25),Z(13,"\u041F\u0440\u043E\u0435\u043A\u0442\u044B:"),D(),I(14,"span",26),Z(15),D()(),I(16,"div",24)(17,"span",25),Z(18,"\u041C\u0435\u0431\u0435\u043B\u044C:"),D(),I(19,"span",26),Z(20),D()(),I(21,"div",24)(22,"span",25),Z(23,"Email:"),D(),I(24,"span",26),Z(25),D()()()(),I(26,"div",27)(27,"button",28),Me("click",function(){ke(t);let r=le();return Ue(r.openEditForm())}),ye(28,"img",29),D(),I(29,"button",30),Me("click",function(){ke(t);let r=le();return Ue(r.logout())}),ye(30,"img",31),D()()(),I(31,"div",32)(32,"h3",33),Z(33,"\u041C\u043E\u0438 \u043F\u0440\u043E\u0435\u043A\u0442\u044B"),D(),I(34,"div",34),Pe(35,$ce,5,2,"div",35),D()(),I(36,"div",36)(37,"h3",33),Z(38,"\u041C\u043E\u044F \u043C\u0435\u0431\u0435\u043B\u044C"),D(),I(39,"div",37),Pe(40,qce,4,3,"a",38),D()()()}if(n&2){let t=le();H(3),$("src",t.accountData.avatarUrl,Mr),H(6),Cn(t.accountData.nickname),H(6),Cn(t.accountData.projects.length),H(5),Cn(t.accountData.furnitures.length),H(5),Cn(t.accountData.email),H(10),$("ngForOf",t.accountData.projects),H(5),$("ngForOf",t.accountData.furnitures)}}function Yce(n,e){n&1&&(I(0,"div",47),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),D())}function Zce(n,e){n&1&&(I(0,"div",47),Z(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),D())}function Kce(n,e){if(n&1&&(I(0,"div",8)(1,"label",48),Z(2,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),D(),ye(3,"input",49),Pe(4,Zce,2,0,"div",11),D()),n&2){let t,i,r=le();H(3),In("invalid",((t=r.editForm.get("password"))==null?null:t.invalid)&&((t=r.editForm.get("password"))==null?null:t.touched)),H(),$("ngIf",((i=r.editForm.get("password"))==null?null:i.invalid)&&((i=r.editForm.get("password"))==null?null:i.touched))}}var XV=(()=>{class n{accountService;router;accountCookieService;imageServerControlService;imageClientControlService;authService;notification;accountData;isEditFormOpen=!1;editForm;constructor(t,i,r,o,s,a,l){this.accountService=t,this.router=i,this.accountCookieService=r,this.imageServerControlService=o,this.imageClientControlService=s,this.authService=a,this.notification=l}ngOnInit(){this.checkAuthAndLoadData(),this.initEditForm()}updateSecondaryAccountData(t){return dt(this,null,function*(){if(!this.accountData)return;let i={jwt:t,nickname:this.editForm.value.nickname};try{yield this.accountService.PUTupdateSecondaryAccountData(i),this.accountData.nickname=this.editForm.value.nickname,this.notification.setSuccess("\u0414\u0430\u043D\u043D\u044B\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B",5e3)}catch(r){throw this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043D\u0438\u043A\u043D\u0435\u0439\u043C\u0430",5e3),console.error(r),r}})}saveChanges(){return dt(this,null,function*(){if(!this.accountData||!this.editForm.valid){this.notification.setError("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u044B",5e3);return}let t=this.accountCookieService.getJwt(),i=this.accountCookieService.getUserType();if(!t||!i){this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0443\u0442\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438",5e3);return}try{yield this.updateSecondaryAccountData(t),yield this.updateBaseDataIfNeeded(t,i),this.closeEditForm(),this.notification.setSuccess("\u0414\u0430\u043D\u043D\u044B\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B",5e3)}catch(r){this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445",5e3),console.error(r)}})}updateBaseDataIfNeeded(t,i){return dt(this,null,function*(){if(this.accountData?.password===void 0||!this.editForm.value.password||i==="google")return;let r={jwt:t,accountType:i,password:this.editForm.value.password};try{yield this.authService.PUTupdateBaseData(r),this.accountData.password=this.editForm.value.password}catch(o){throw this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0430\u0440\u043E\u043B\u044F",5e3),console.error(o),o}})}loadUserData(t){return dt(this,null,function*(){try{let i=(yield this.accountService.GETaccount(t)).accountData;this.accountData={email:i.email,nickname:i.nickname,projects:i.projects,avatarUrl:this.imageServerControlService.GETaccountAvatar(t),furnitures:i.furnitures},i.password!==void 0&&(this.accountData.password=i.password)}catch(i){console.error(i)}})}uploadAvatar(t){return dt(this,null,function*(){let i=this.accountCookieService.getJwt();if(!i||!this.accountData)return;let o=t.target.files?.[0];if(!o){this.notification.setError("\u0424\u0430\u0439\u043B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D",5e3);return}try{let s=yield this.imageClientControlService.compressImage(o);if(!s){this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0436\u0430\u0442\u0438\u044F \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",5e3);return}yield this.imageServerControlService.POSTuploadUserAvatar(s,i),this.accountData.avatarUrl=URL.createObjectURL(s),this.notification.setSuccess("\u0410\u0432\u0430\u0442\u0430\u0440 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",5e3)}catch(s){this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430",5e3),console.error(s)}})}checkAuthAndLoadData(){let t=this.accountCookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.loadUserData(t)}initEditForm(){this.editForm=new fi({nickname:new En(this.accountData?.nickname,[St.required,St.minLength(3),St.maxLength(30)])}),this.accountCookieService.getUserType()==="email"&&this.editForm.addControl("password",new En(this.accountData?.password,[St.required,St.minLength(6)]))}openEditForm(){if(!this.accountData){this.notification.setError("\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B",5e3);return}this.isEditFormOpen=!0}closeEditForm(){this.isEditFormOpen=!1,this.accountData&&(this.accountData.nickname!=this.editForm.value.nickname,this.accountData.password&&this.accountData.password!=this.editForm.value.password),this.editForm.reset()}openProject(t){this.router.navigateByUrl("/plan/"+t)}logout(){let t=this.accountCookieService.getJwt();t&&this.accountService.DELETEaccountJwt(t),this.accountCookieService.deleteJwt(),this.accountCookieService.deleteAccountType(),this.router.navigateByUrl("/")}static \u0275fac=function(i){return new(i||n)(ue(Xa),ue(gr),ue(zi),ue(Gc),ue(G_),ue(Uh),ue(Ti))};static \u0275cmp=vn({type:n,selectors:[["app-account-page"]],decls:18,vars:9,consts:[[1,"account-page"],["class","account-container",4,"ngIf"],[1,"edit-modal"],[1,"modal-content"],[1,"close-btn",3,"click"],["src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"edit-form",3,"ngSubmit","formGroup"],[1,"form-title"],[1,"form-group"],["for","nickname"],["id","nickname","formControlName","nickname"],["class","error-message",4,"ngIf"],["class","form-group",4,"ngIf"],["type","submit",1,"save-btn",3,"disabled"],[1,"account-container"],[1,"profile-card"],[1,"avatar-container"],["alt","\u0410\u0432\u0430\u0442\u0430\u0440",1,"avatar-image",3,"src"],[1,"avatar-edit-btn"],["type","file","id","avatarInput","accept",".png,.jpeg,.jpg",3,"change"],["src","/assets/images/editIcon.svg","alt","\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0430\u0432\u0430\u0442\u0430\u0440"],[1,"profile-info"],[1,"profile-name"],[1,"profile-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"profile-actions"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C",1,"edit-btn",2,"width","27px",3,"click"],["src","/assets/images/editIcon.svg","alt","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"],["title","\u0412\u044B\u0439\u0442\u0438",1,"logout-btn",2,"width","35px",3,"click"],["src","/assets/images/logoutIcon.svg","alt","\u0412\u044B\u0439\u0442\u0438"],[1,"projects-section"],[1,"section-title"],[1,"projects-grid"],["class","project-card",3,"click",4,"ngFor","ngForOf"],[1,"furniture-section"],[1,"furniture-grid"],["class","furniture-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"project-card",3,"click"],[1,"project-name"],[1,"project-scheme"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"room"],[1,"furniture-card",3,"routerLink"],[1,"furniture-name"],["alt","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438",1,"furniture-image",3,"src"],[1,"error-message"],["for","password"],["id","password","type","password","formControlName","password"]],template:function(i,r){if(i&1&&(I(0,"div",0),ye(1,"app-navigation-panel"),Pe(2,Xce,41,7,"div",1),I(3,"div",2)(4,"div",3)(5,"button",4),Me("click",function(){return r.closeEditForm()}),ye(6,"img",5),D(),I(7,"form",6),Me("ngSubmit",function(){return r.saveChanges()}),I(8,"h3",7),Z(9,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"),D(),I(10,"div",8)(11,"label",9),Z(12,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),D(),ye(13,"input",10),Pe(14,Yce,2,0,"div",11),D(),Pe(15,Kce,5,3,"div",12),I(16,"button",13),Z(17," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),D()()()()()),i&2){let o,s;H(2),$("ngIf",r.accountData),H(),In("active",r.isEditFormOpen),H(4),$("formGroup",r.editForm),H(6),In("invalid",((o=r.editForm.get("nickname"))==null?null:o.invalid)&&((o=r.editForm.get("nickname"))==null?null:o.touched)),H(),$("ngIf",((s=r.editForm.get("nickname"))==null?null:s.invalid)&&((s=r.editForm.get("nickname"))==null?null:s.touched)),H(),$("ngIf",r.editForm.get("password")),H(),$("disabled",!r.editForm.valid)}},dependencies:[Ds,Si,Dn,ho,ps,fo,fs,hs,Fo,Lo,kp,ds],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.account-page[_ngcontent-%COMP%]{background:#000;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:30px 20px;font-family:Courier New,Courier,monospace;color:#dad7cd}.account-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin-top:30px}.profile-card[_ngcontent-%COMP%]{background:#000000b3;border-radius:15px;padding:30px;display:flex;align-items:flex-start;gap:30px;margin-bottom:30px;border:1px solid rgba(163,177,138,.3);position:relative}.avatar-container[_ngcontent-%COMP%]{position:relative;width:250px;aspect-ratio:1;flex-shrink:0}.avatar-container[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:50%;object-fit:cover}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;background:#344e41;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;border:2px solid black;transition:all .3s}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#436554}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;padding:10px;aspect-ratio:1}.profile-info[_ngcontent-%COMP%]{flex-grow:1}.profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;font-size:2rem;margin-bottom:15px;color:#a3b18a;text-shadow:0 0 10px rgba(163,177,138,.3)}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:fit-content;flex-wrap:wrap;gap:20px}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{background:#a3b18a1a;padding:8px 15px;border-radius:20px;border:1px solid rgba(163,177,138,.3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#a3b18a}.stat-item[_ngcontent-%COMP%]{max-width:min(768px,100vw - 500px)}.profile-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;transition:all .3s}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);opacity:.8}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1}.section-title[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;font-size:1.8rem;margin-bottom:20px;color:#a3b18a;text-shadow:0 0 5px rgba(163,177,138,.3);padding-bottom:10px;border-bottom:1px solid rgba(163,177,138,.3)}.projects-section[_ngcontent-%COMP%], .furniture-section[_ngcontent-%COMP%]{background:#000000b3;border-radius:15px;padding:25px;margin-bottom:30px;box-shadow:0 5px 15px #0000004d;border:1px solid rgba(163,177,138,.3)}.projects-grid[_ngcontent-%COMP%], .furniture-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.project-card[_ngcontent-%COMP%]{background:#a3b18a1a;border-radius:10px;padding:15px;cursor:pointer;transition:all .3s;border:1px solid rgba(163,177,138,.2)}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #a3b18a33;border-color:#a3b18a}.project-card[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:15px;color:#dad7cd;text-align:center}.project-card[_ngcontent-%COMP%]   .project-scheme[_ngcontent-%COMP%]{display:grid;width:100%;aspect-ratio:1;gap:5px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.project-card[_ngcontent-%COMP%]   .project-scheme[_ngcontent-%COMP%]   .room[_ngcontent-%COMP%]{background:#344e41;border-radius:3px;transition:all .3s}.furniture-card[_ngcontent-%COMP%]{background:#a3b18a1a;border-radius:10px;padding:15px;text-decoration:none;transition:all .3s;border:1px solid rgba(163,177,138,.2);display:flex;flex-direction:column;align-items:center}.furniture-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #a3b18a33;border-color:#a3b18a}.furniture-card[_ngcontent-%COMP%]   .furniture-name[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:15px;color:#dad7cd;text-align:center}.furniture-card[_ngcontent-%COMP%]   .furniture-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:5px}.edit-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:all .3s;z-index:1000}.edit-modal.active[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#000;border-radius:15px;padding:30px;width:90%;max-width:500px;position:relative;box-shadow:0 0 20px #a3b18a4d;border:1px solid #A3B18A;box-sizing:border-box}.edit-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:none;border:none;cursor:pointer}.edit-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;rotate:45deg;transition:all .3s}.edit-modal[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;color:#a3b18a;text-align:center;margin-bottom:25px;font-size:1.8rem}.edit-modal[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:#dad7cd}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(163,177,138,.5);border-radius:5px;padding:12px 15px;color:#dad7cd;font-family:Courier New,Courier,monospace;transition:all .3s}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#a3b18a;box-shadow:0 0 0 2px #a3b18a33}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background:#ff6b6b1a;animation:_ngcontent-%COMP%_shake .5s ease}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.8rem;margin-top:3px}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:#a3b18a;color:#000;border:none;border-radius:5px;padding:15px;font-family:Courier New,Courier,monospace;font-size:1.1rem;cursor:pointer;transition:all .3s;margin-top:10px}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #a3b18a66}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:disabled{background:#344e41;color:#00000080;cursor:not-allowed}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}20%,60%{transform:translate(-5px)}40%,80%{transform:translate(5px)}}@media (max-width: 900px){.stat-item[_ngcontent-%COMP%]{max-width:calc(100vw - 150px)}.profile-card[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{width:100%}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]{margin:0 auto}.profile-card[_ngcontent-%COMP%]   .profile-actions[_ngcontent-%COMP%]{flex-direction:row;width:100%;justify-content:center}.projects-grid[_ngcontent-%COMP%], .furniture-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}}@media (max-width: 600px){.account-page[_ngcontent-%COMP%]{padding:20px}.avatar-container[_ngcontent-%COMP%]{width:200px}.stat-item[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}.profile-card[_ngcontent-%COMP%]{padding:20px 0}.projects-section[_ngcontent-%COMP%], .furniture-section[_ngcontent-%COMP%]{padding:20px}.profile-name[_ngcontent-%COMP%], .section-title[_ngcontent-%COMP%]{font-size:1.5rem!important}.modal-content[_ngcontent-%COMP%]{width:95%!important;padding:20px!important}}']})}return n})();var Jce=["signup"],Qce=["signin"],eue=["code"],tue=["changePassword"],nue=["requestPasswordChange"],nb=()=>({standalone:!0});function iue(n,e){n&1&&Ks(0)}function rue(n,e){n&1&&(I(0,"div",23),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 4-\u0437\u043D\u0430\u0447\u043D\u044B\u0439 \u043A\u043E\u0434 "),D())}function oue(n,e){if(n&1){let t=vt();I(0,"form",13),Me("ngSubmit",function(){ke(t);let r=le();return Ue(r.checkMatchCodes())}),I(1,"h2",14),Z(2,"\u0421\u043C\u0435\u043D\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"),D(),I(3,"span",15)(4,"label",16),Z(5,"\u041A\u043E\u0434 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F"),D(),I(6,"span",17)(7,"input",18,5),Me("input",function(){ke(t);let r=Li(8),o=Li(10),s=le();return Ue(s.onInput(r,o))})("keyup.backspace",function(){ke(t);let r=Li(8),o=le();return Ue(o.onBackspace(r,r))}),lo("ngModelChange",function(r){ke(t);let o=le();return Ro(o.inputValues[0],r)||(o.inputValues[0]=r),Ue(r)}),D(),I(9,"input",18,6),Me("input",function(){ke(t);let r=Li(10),o=Li(12),s=le();return Ue(s.onInput(r,o))})("keyup.backspace",function(){ke(t);let r=Li(8),o=Li(10),s=le();return Ue(s.onBackspace(o,r))}),lo("ngModelChange",function(r){ke(t);let o=le();return Ro(o.inputValues[1],r)||(o.inputValues[1]=r),Ue(r)}),D(),I(11,"input",18,7),Me("input",function(){ke(t);let r=Li(12),o=Li(14),s=le();return Ue(s.onInput(r,o))})("keyup.backspace",function(){ke(t);let r=Li(10),o=Li(12),s=le();return Ue(s.onBackspace(o,r))}),lo("ngModelChange",function(r){ke(t);let o=le();return Ro(o.inputValues[2],r)||(o.inputValues[2]=r),Ue(r)}),D(),I(13,"input",18,8),Me("input",function(){ke(t);let r=Li(14),o=le();return Ue(o.onInput(r,null))})("keyup.backspace",function(){ke(t);let r=Li(12),o=Li(14),s=le();return Ue(s.onBackspace(o,r))}),lo("ngModelChange",function(r){ke(t);let o=le();return Ro(o.inputValues[3],r)||(o.inputValues[3]=r),Ue(r)}),D()(),Pe(15,rue,2,0,"div",19),D(),I(16,"span",20)(17,"button",21),Me("click",function(){ke(t);let r=le();return Ue(r.changeTemplate("signin"))}),Z(18,"\u042F \u0432\u0441\u043F\u043E\u043C\u043D\u0438\u043B \u043F\u0430\u0440\u043E\u043B\u044C"),D()(),I(19,"button",22),Z(20),D()()}if(n&2){let t,i,r,o,s,a=le();H(7),In("invalid",((t=a.codeForm.get("code"))==null?null:t.invalid)&&((t=a.codeForm.get("code"))==null?null:t.touched)),ao("ngModel",a.inputValues[0]),$("ngModelOptions",bu(19,nb)),H(2),In("invalid",((i=a.codeForm.get("code"))==null?null:i.invalid)&&((i=a.codeForm.get("code"))==null?null:i.touched)),ao("ngModel",a.inputValues[1]),$("ngModelOptions",bu(20,nb)),H(2),In("invalid",((r=a.codeForm.get("code"))==null?null:r.invalid)&&((r=a.codeForm.get("code"))==null?null:r.touched)),ao("ngModel",a.inputValues[2]),$("ngModelOptions",bu(21,nb)),H(2),In("invalid",((o=a.codeForm.get("code"))==null?null:o.invalid)&&((o=a.codeForm.get("code"))==null?null:o.touched)),ao("ngModel",a.inputValues[3]),$("ngModelOptions",bu(22,nb)),H(2),$("ngIf",((s=a.codeForm.get("code"))==null?null:s.invalid)&&((s=a.codeForm.get("code"))==null?null:s.touched)),H(4),$("disabled",!a.codeForm.valid),H(),rr(" ",a.codeForm.valid?"\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C":"\u041D\u0435\u043F\u043E\u043B\u043D\u044B\u0439 \u043A\u043E\u0434"," ")}}function sue(n,e){n&1&&(I(0,"div",23),Z(1," Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D "),D())}function aue(n,e){n&1&&(I(0,"div",23),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),D())}function lue(n,e){n&1&&(I(0,"div",23),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C "),D())}function cue(n,e){if(n&1){let t=vt();I(0,"form",24),Me("ngSubmit",function(){ke(t);let r=le();return Ue(r.signinUser())}),I(1,"h2",14),Z(2,"\u0412\u0445\u043E\u0434"),D(),I(3,"span",25)(4,"label",26),Z(5,"Email"),D(),ye(6,"input",27),Pe(7,sue,2,0,"div",19)(8,aue,2,0,"div",19),D(),I(9,"span",25)(10,"label",28),Z(11,"\u041F\u0430\u0440\u043E\u043B\u044C"),D(),ye(12,"input",29),Pe(13,lue,2,0,"div",19),D(),I(14,"span",20)(15,"button",21),Me("click",function(){ke(t);let r=le();return Ue(r.changeTemplate("signup"))}),Z(16,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),D(),I(17,"button",21),Me("click",function(){ke(t);let r=le();return Ue(r.changeTemplate("requestChange"))}),Z(18,"\u0417\u0430\u0431\u044B\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?"),D()(),I(19,"button",22),Z(20),D()()}if(n&2){let t,i,r,o,s,a=le();$("formGroup",a.signinForm),H(6),In("invalid",((t=a.signinForm.get("email"))==null?null:t.invalid)&&((t=a.signinForm.get("email"))==null?null:t.touched)),H(),$("ngIf",((i=a.signinForm.get("email"))==null||i.errors==null?null:i.errors.required)&&((i=a.signinForm.get("email"))==null?null:i.touched)),H(),$("ngIf",((r=a.signinForm.get("email"))==null||r.errors==null?null:r.errors.email)&&((r=a.signinForm.get("email"))==null?null:r.touched)),H(4),In("invalid",((o=a.signinForm.get("password"))==null?null:o.invalid)&&((o=a.signinForm.get("password"))==null?null:o.touched)),H(),$("ngIf",((s=a.signinForm.get("password"))==null?null:s.invalid)&&((s=a.signinForm.get("password"))==null?null:s.touched)),H(6),$("disabled",!a.signinForm.valid),H(),rr(" ",a.signinForm.valid?"\u0412\u043E\u0439\u0442\u0438":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}function uue(n,e){n&1&&(I(0,"div",23),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),D())}function due(n,e){if(n&1){let t=vt();I(0,"form",24),Me("ngSubmit",function(){ke(t);let r=le();return Ue(r.requestChangeCode())}),I(1,"h2",14),Z(2,"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F"),D(),I(3,"div",25)(4,"label",30),Z(5,"Email"),D(),ye(6,"input",31),Pe(7,uue,2,0,"div",19),D(),I(8,"div",20)(9,"button",21),Me("click",function(){ke(t);let r=le();return Ue(r.changeTemplate("signin"))}),Z(10,"\u041D\u0430\u0437\u0430\u0434 \u043A \u0432\u0445\u043E\u0434\u0443"),D()(),I(11,"button",22),Z(12," \u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u043A\u043E\u0434 "),D()()}if(n&2){let t,i,r=le();$("formGroup",r.requestChangeForm),H(6),In("invalid",((t=r.requestChangeForm.get("email"))==null?null:t.invalid)&&((t=r.requestChangeForm.get("email"))==null?null:t.touched)),H(),$("ngIf",((i=r.requestChangeForm.get("email"))==null?null:i.invalid)&&((i=r.requestChangeForm.get("email"))==null?null:i.touched)),H(4),$("disabled",r.requestChangeForm.invalid)}}function fue(n,e){n&1&&(I(0,"div",23),Z(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),D())}function hue(n,e){n&1&&(I(0,"div",23),Z(1," \u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442 "),D())}function pue(n,e){if(n&1){let t=vt();I(0,"form",24),Me("ngSubmit",function(){ke(t);let r=le();return Ue(r.changePasswordUser())}),I(1,"h2",14),Z(2,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),D(),I(3,"span",25)(4,"label",32),Z(5,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),D(),ye(6,"input",33),Pe(7,fue,2,0,"div",19),D(),I(8,"span",25)(9,"label",34),Z(10,"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C"),D(),ye(11,"input",35),Pe(12,hue,2,0,"div",19),D(),I(13,"button",22),Z(14),D()()}if(n&2){let t,i,r,o,s=le();$("formGroup",s.changePasswordForm),H(6),In("invalid",((t=s.changePasswordForm.get("newPassword"))==null?null:t.invalid)&&((t=s.changePasswordForm.get("newPassword"))==null?null:t.touched)),H(),$("ngIf",((i=s.changePasswordForm.get("newPassword"))==null?null:i.invalid)&&((i=s.changePasswordForm.get("newPassword"))==null?null:i.touched)),H(4),In("invalid",(((r=s.changePasswordForm.get("repeatPassword"))==null?null:r.invalid)||(s.changePasswordForm.errors==null?null:s.changePasswordForm.errors.mismatch))&&((r=s.changePasswordForm.get("repeatPassword"))==null?null:r.touched)),H(),$("ngIf",(s.changePasswordForm.errors==null?null:s.changePasswordForm.errors.mismatch)&&((o=s.changePasswordForm.get("repeatPassword"))==null?null:o.touched)),H(),$("disabled",!s.changePasswordForm.valid),H(),rr(" ",s.changePasswordForm.valid?"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}function mue(n,e){n&1&&(I(0,"div",23),Z(1," Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D "),D())}function gue(n,e){n&1&&(I(0,"div",23),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),D())}function vue(n,e){n&1&&(I(0,"div",23),Z(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),D())}function yue(n,e){n&1&&(I(0,"div",23),Z(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),D())}function _ue(n,e){if(n&1){let t=vt();I(0,"form",24),Me("ngSubmit",function(){ke(t);let r=le();return Ue(r.signUpUser())}),I(1,"h2",14),Z(2,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),D(),I(3,"span",25)(4,"label",26),Z(5,"Email"),D(),ye(6,"input",27),Pe(7,mue,2,0,"div",19)(8,gue,2,0,"div",19),D(),I(9,"span",25)(10,"label",36),Z(11,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),D(),ye(12,"input",37),Pe(13,vue,2,0,"div",19),D(),I(14,"span",25)(15,"label",28),Z(16,"\u041F\u0430\u0440\u043E\u043B\u044C"),D(),ye(17,"input",29),Pe(18,yue,2,0,"div",19),D(),I(19,"span",20)(20,"button",21),Me("click",function(){ke(t);let r=le();return Ue(r.changeTemplate("signin"))}),Z(21,"\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442?"),D()(),I(22,"button",22),Z(23),D()()}if(n&2){let t,i,r,o,s,a,l,u=le();$("formGroup",u.signupForm),H(6),In("invalid",((t=u.signupForm.get("email"))==null?null:t.invalid)&&((t=u.signupForm.get("email"))==null?null:t.touched)),H(),$("ngIf",((i=u.signupForm.get("email"))==null||i.errors==null?null:i.errors.required)&&((i=u.signupForm.get("email"))==null?null:i.touched)),H(),$("ngIf",((r=u.signupForm.get("email"))==null||r.errors==null?null:r.errors.email)&&((r=u.signupForm.get("email"))==null?null:r.touched)),H(4),In("invalid",((o=u.signupForm.get("nickname"))==null?null:o.invalid)&&((o=u.signupForm.get("nickname"))==null?null:o.touched)),H(),$("ngIf",((s=u.signupForm.get("nickname"))==null?null:s.invalid)&&((s=u.signupForm.get("nickname"))==null?null:s.touched)),H(4),In("invalid",((a=u.signupForm.get("password"))==null?null:a.invalid)&&((a=u.signupForm.get("password"))==null?null:a.touched)),H(),$("ngIf",((l=u.signupForm.get("password"))==null?null:l.invalid)&&((l=u.signupForm.get("password"))==null?null:l.touched)),H(4),$("disabled",!u.signupForm.valid),H(),rr(" ",u.signupForm.valid?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}var YV=(()=>{class n{accountService;authService;router;notification;accountCookieService;cdr;constructor(t,i,r,o,s,a){this.accountService=t,this.authService=i,this.router=r,this.notification=o,this.accountCookieService=s,this.cdr=a}currentFormTemplate;inputValues=new Array(4).fill("");currentChangeCode;currentJwtToken;signupTemplate;signinTemplate;codeTemplate;changePasswordTemplate;requestPasswordChangeTemplate;ngAfterViewInit(){this.currentFormTemplate=this.signinTemplate,this.cdr.detectChanges()}requestChangeCode(){return dt(this,null,function*(){if(!this.requestChangeForm.invalid)try{this.currentChangeCode=(yield this.authService.GETrequestPasswordCode(this.requestChangeForm.value.email)).resetCode,this.changeTemplate("code")}catch(t){console.log(t)}})}signinUser(){return dt(this,null,function*(){if(this.signinForm.invalid)return;let t={email:this.signinForm.value.email,password:this.signinForm.value.password,accountType:"email"};try{let i=(yield this.authService.POSTcreateLongJWT(t)).jwt;this.accountCookieService.setJwt(i,"long"),this.accountCookieService.setUserType("email"),this.router.navigateByUrl("/account")}catch(i){console.log(i)}})}signUpUser(){return dt(this,null,function*(){if(!this.signupForm.invalid)try{let t={email:this.signupForm.value.email,password:this.signupForm.value.password,nickname:this.signupForm.value.nickname,accountType:"email"};yield this.accountService.POSTcreateAccount(t);let i=(yield this.authService.POSTcreateLongJWT(t)).jwt;this.accountCookieService.setJwt(i,"long"),this.accountCookieService.setUserType("email"),this.router.navigateByUrl("/account")}catch(t){console.log(t)}})}changePasswordUser(){return dt(this,null,function*(){if(this.changePasswordForm.invalid||!this.currentJwtToken)return;let t={password:this.changePasswordForm.value.newPassword,accountType:"email",jwt:this.currentJwtToken};try{yield this.authService.PUTupdateBaseData(t),this.changeTemplate("signin")}catch(i){console.log(i)}})}checkMatchCodes(){return dt(this,null,function*(){if(this.codeForm.value.code===this.currentChangeCode)try{this.currentJwtToken=(yield this.authService.POSTcreateShortJWT(this.requestChangeForm.value.email)).jwt,this.changeTemplate("changePassword")}catch(t){console.log(t)}else this.notification.setError("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043E\u0434",2500)})}passwordMatchValidator=t=>{let i=t;return i.get("newPassword")?.value===i.get("repeatPassword")?.value?null:{mismatch:!0}};onInput(t,i){this.codeForm.patchValue({code:this.inputValues.join("")}),i&&t.value&&i.focus()}onBackspace(t,i){!t.value&&i&&i.focus(),this.codeForm.patchValue({code:this.inputValues.join("")})}changeTemplate(t){let i={requestChange:this.requestPasswordChangeTemplate,code:this.codeTemplate,signin:this.signinTemplate,signup:this.signupTemplate,changePassword:this.changePasswordTemplate};this.currentFormTemplate=i[t]||this.signinTemplate}signupForm=new fi({email:new En("",[St.required,St.email]),nickname:new En("",[St.required]),password:new En("",[St.required,St.minLength(6)])});codeForm=new fi({code:new En("",[St.required,St.minLength(4)])});changePasswordForm=new fi({newPassword:new En("",[St.required,St.minLength(6)]),repeatPassword:new En("",[St.required,St.minLength(6)])},{validators:this.passwordMatchValidator});signinForm=new fi({email:new En("",[St.required,St.email]),password:new En("",[St.required])});requestChangeForm=new fi({email:new En("",[St.required,St.email])});static \u0275fac=function(i){return new(i||n)(ue(Xa),ue(Uh),ue(gr),ue(Ti),ue(zi),ue(or))};static \u0275cmp=vn({type:n,selectors:[["app-login-page"]],viewQuery:function(i,r){if(i&1&&(bi(Jce,5,Er),bi(Qce,5,Er),bi(eue,5,Er),bi(tue,5,Er),bi(nue,5,Er)),i&2){let o;si(o=ai())&&(r.signupTemplate=o.first),si(o=ai())&&(r.signinTemplate=o.first),si(o=ai())&&(r.codeTemplate=o.first),si(o=ai())&&(r.changePasswordTemplate=o.first),si(o=ai())&&(r.requestPasswordChangeTemplate=o.first)}},decls:15,vars:1,consts:[["code",""],["signin",""],["requestPasswordChange",""],["changePassword",""],["signup",""],["input1",""],["input2",""],["input3",""],["input4",""],[1,"body"],[1,"login-container"],[1,"formModule"],[4,"ngTemplateOutlet"],[1,"addModuleSpan",3,"ngSubmit"],[1,"addModuleTitle"],[1,"addModuleInputSpan",2,"align-items","center"],["for","#input1",1,"inputLabel"],[1,"input-group"],["type","text","maxlength","1",3,"input","keyup.backspace","ngModelChange","ngModel","ngModelOptions"],["class","error-message",4,"ngIf"],[1,"additionalFuntions"],["type","button",3,"click"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],[1,"error-message"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],[1,"addModuleInputSpan"],["for","email",1,"inputLabel"],["formControlName","email","id","email","type","email",1,"addModuleInput"],["for","password",1,"inputLabel"],["formControlName","password","id","password","type","password",1,"addModuleInput"],[1,"inputLabel"],["formControlName","email","type","email",1,"addModuleInput"],["for","newPassword",1,"inputLabel"],["formControlName","newPassword","id","newPassword","type","password",1,"addModuleInput"],["for","repeatPassword",1,"inputLabel"],["formControlName","repeatPassword","id","repeatPassword","type","password",1,"addModuleInput"],["for","nickname",1,"inputLabel"],["formControlName","nickname","id","nickname","type","text",1,"addModuleInput"]],template:function(i,r){i&1&&(I(0,"span",9),ye(1,"app-navigation-panel"),I(2,"div",10)(3,"div",11),Pe(4,iue,1,0,"ng-container",12),D()()(),Pe(5,oue,21,23,"ng-template",null,0,Yi)(7,cue,21,10,"ng-template",null,1,Yi)(9,due,13,5,"ng-template",null,2,Yi)(11,pue,15,9,"ng-template",null,3,Yi)(13,_ue,24,13,"ng-template",null,4,Yi)),i&2&&(H(4),$("ngTemplateOutlet",r.currentFormTemplate))},dependencies:[Ds,ho,ps,fo,fs,hs,FT,Fo,Lo,Js,Ff,Cm,PT,Dn],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.body[_ngcontent-%COMP%]{padding:0;margin:0;min-height:100vh;display:flex;flex-direction:column;align-items:center;background-color:#000;background-size:cover;position:relative}.login-container[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:auto;padding:20px}.formModule[_ngcontent-%COMP%]{background-color:#000;border-radius:10px;padding:30px;width:calc(100% - 60px);box-shadow:0 0 5px #fff;border:1px solid rgba(255,255,255,.1)}.addModuleTitle[_ngcontent-%COMP%]{color:#dad7cd;text-align:center;font-size:2rem;margin-bottom:30px;font-weight:400}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;position:relative}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd;margin-bottom:8px;font-size:.9rem}.addModuleInput[_ngcontent-%COMP%]{background-color:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:5px;padding:12px 15px;color:#dad7cd;font-size:1rem;transition:all .3s ease}.addModuleInput[_ngcontent-%COMP%]:focus{outline:none;border-color:#a3b18a;box-shadow:0 0 0 2px #a3b18a33}.addModuleInput.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background-color:#ff6b6b1a}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.8rem;margin-top:5px}.input-group[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:20px}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;aspect-ratio:1;text-align:center;font-size:24px;font-family:Courier New,monospace;background:#ffffff1a;border:2px solid #A3B18A;border-radius:12px;color:#dad7cd;transition:all .3s ease;outline:none}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#b1bd9c;box-shadow:0 0 0 3px #a3b18a33;transform:translateY(-2px)}.input-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background:#ff6b6b1a;animation:_ngcontent-%COMP%_shake .5s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}20%,60%{transform:translate(-5px)}40%,80%{transform:translate(5px)}}.submitAddModuleFormBtn[_ngcontent-%COMP%]{width:100%;padding:15px;background-color:#a3b18a;color:#000;border:none;border-radius:5px;font-size:1rem;cursor:pointer;transition:all .3s ease;margin-top:10px}.submitAddModuleFormBtn[_ngcontent-%COMP%]:hover{background-color:#acb996}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#a3b18a80;cursor:not-allowed}.additionalFuntions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:20px 0}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#dad7cd;cursor:pointer;font-size:.9rem;padding:5px 0;position:relative}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:1px;background:#dad7cd;transition:width .3s}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:after{width:100%}@media (max-width: 768px){.formModule[_ngcontent-%COMP%]{padding:20px}.addModuleTitle[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:10px}.additionalFuntions[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}']})}return n})();var xue=["planHouse"],qD=n=>({disabled:n});function wue(n,e){n&1&&(I(0,"p",6),Z(1,"\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u044D\u0442\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0441 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0445 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u0435\u043D. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440."),D())}function bue(n,e){if(n&1&&ye(0,"div",23),n&2){let t=e.$implicit;Hn("grid-area",t.gridArea)}}function Cue(n,e){if(n&1){let t=vt();I(0,"button",16),Me("click",function(){let r=ke(t).index,o=le(3);return Ue(o.openProject(r))}),I(1,"span",17)(2,"h3",18),Z(3),D(),I(4,"div",19),Pe(5,bue,1,2,"div",20),D()(),I(6,"button",21),Me("click",function(){let r=ke(t).index,o=le(3);return Ue(o.deleteProject(r))}),ye(7,"img",22),D()()}if(n&2){let t=e.$implicit;H(3),Cn(t.name),H(2),$("ngForOf",t.rooms)}}function Eue(n,e){if(n&1){let t=vt();I(0,"span",12),Pe(1,Cue,8,2,"button",13),I(2,"button",14),Me("click",function(){ke(t);let r=le(2);return Ue(r.openAddModule())}),I(3,"h3"),Z(4,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C"),D(),ye(5,"img",15),D()()}if(n&2){let t=le(2);$("ngClass",mr(2,qD,t.currentProjectId!==void 0)),H(),$("ngForOf",t.accountData.projects)}}function Mue(n,e){if(n&1){let t=vt();I(0,"button",24),Me("click",function(){ke(t);let r=le(2);return Ue(r.closeProject())}),ye(1,"img",15),D()}}function Sue(n,e){if(n&1){let t=vt();I(0,"app-plan-house",25,0),Me("callSaveEmitter",function(){ke(t);let r=le(2);return Ue(r.saveProject())})("planHouseEmitter",function(r){ke(t);let o=le(2);return Ue(o.updatePlanData(r))}),D()}if(n&2){let t=le(2);$("ngClass",mr(2,qD,t.currentProjectId===void 0))("planHouse",t.accountData.projects[t.currentProjectId].rooms)}}function Tue(n,e){if(n&1&&(I(0,"span",7),Pe(1,Eue,6,4,"span",8),I(2,"span",9),Pe(3,Mue,2,0,"button",10)(4,Sue,2,4,"app-plan-house",11),D()()),n&2){let t=le();H(),$("ngIf",t.accountData!==void 0),H(),$("ngClass",mr(4,qD,t.currentProjectId===void 0)),H(),$("ngIf",t.getCurrentViewRoom()==null),H(),$("ngIf",t.currentProjectId!==void 0)}}function Iue(n,e){if(n&1){let t=vt();I(0,"form",26),Me("ngSubmit",function(){ke(t);let r=le();return Ue(r.createProject())}),I(1,"button",27),Me("click",function(){ke(t);let r=le();return Ue(r.closeAddModule())}),ye(2,"img",28),D(),I(3,"span",29)(4,"h2",30),Z(5,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043B\u0430\u043D\u0430"),D(),I(6,"span",31)(7,"label",32),Z(8,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),D(),ye(9,"input",33),D(),I(10,"button",34),Z(11,"Continue"),D()()()}if(n&2){let t=le();$("formGroup",t.projectNameForm),H(10),$("disabled",!t.projectNameForm.valid)}}var kg=(()=>{class n{accountService;accountCookieService;router;route;elemenetRef;renderer;projectService;notification;location;constructor(t,i,r,o,s,a,l,u,f){this.accountService=t,this.accountCookieService=i,this.router=r,this.route=o,this.elemenetRef=s,this.renderer=a,this.projectService=l,this.notification=u,this.location=f}hasRoomIdBeenProcessed=!1;addModule;currentPlanHouse;accountData;currentProjectId=void 0;planHouse;ngOnInit(){let t=this.accountCookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.pageInit(t)}ngAfterViewInit(){this.addModule=this.elemenetRef.nativeElement.querySelector(".addModule")}ngAfterViewChecked(){if(this.hasRoomIdBeenProcessed||!this.planHouse||!this.route.snapshot.params.roomId)return;let t=parseInt(this.route.snapshot.params.roomId);setTimeout(()=>{typeof t=="number"&&(this.planHouse.currentViewRoom=t,this.planHouse.currentIdClickedRoom=t,this.planHouse.openViewRoom(t),this.planHouse.sceneOpenToggle=!0,this.planHouse.guideTemplate=this.planHouse.roomGuideTemplate,this.hasRoomIdBeenProcessed=!0)},0)}pageInit(t){return dt(this,null,function*(){try{this.accountData=(yield this.accountService.GETaccount(t)).accountData,this.route.paramMap.subscribe(i=>{if(i.get("planId")===null)return;let r=parseInt(i.get("planId"));this.accountData.projects.length>=r&&r>=0&&(this.currentProjectId=r)})}catch(i){console.log(i)}})}createProject(){return dt(this,null,function*(){this.closeAddModule();let t=this.accountCookieService.getJwt();if(!(!this.projectNameForm.value||!this.projectNameForm.value.name||!t))try{let i=yield this.projectService.POSTcreateProject(t,this.projectNameForm.value.name);this.accountData.projects=[...this.accountData.projects,i.projectData],this.notification.setSuccess("\u041F\u0440\u043E\u0435\u043A\u0442 \u0441\u043E\u0437\u0434\u0430\u043D",5e3)}catch(i){console.log(i)}})}saveProject(){return dt(this,null,function*(){if(this.currentProjectId===void 0)return;let t=this.accountData.projects[this.currentProjectId]._id,i=this.currentPlanHouse;if(i===void 0)return;let r=this.accountCookieService.getJwt();if(!r)return;let o={rooms:i,name:this.accountData.projects[this.currentProjectId].name};try{yield this.projectService.PUTupdateProject(r,t,o),this.notification.setSuccess("\u041F\u0440\u043E\u0435\u043A\u0442 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",5e3)}catch(s){console.log(s)}})}deleteProject(t){return dt(this,null,function*(){let i=this.accountCookieService.getJwt(),r=this.accountData.projects[t]._id;!i||!r||(yield this.projectService.DELETEdeleteProject(i,r),this.notification.setSuccess("\u041F\u0440\u043E\u0435\u043A\u0442 \u0443\u0434\u0430\u043B\u0435\u043D",5e3),this.accountData.projects.splice(t,1))})}checkDesktop=Lh;getCurrentViewRoom(){if(this.planHouse!==void 0)return this.planHouse.currentViewRoom}updatePlanData(t){this.currentPlanHouse=t,this.accountData.projects[this.currentProjectId].rooms=t}closeAddModule(){this.addModule&&this.renderer.addClass(this.addModule,"disabled")}openAddModule(){this.addModule&&this.renderer.removeClass(this.addModule,"disabled")}closeProject(){this.saveProject(),this.currentProjectId=void 0;let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t)}openProject(t){let i=this.location.path()+"/"+t;this.location.replaceState(i),this.currentProjectId=t}projectNameForm=new fi({name:new En("",[St.required])});static \u0275fac=function(i){return new(i||n)(ue(Xa),ue(zi),ue(gr),ue(Zi),ue(Yt),ue(Sr),ue(Fh),ue(Ti),ue(co))};static \u0275cmp=vn({type:n,selectors:[["app-plan-house-page"]],viewQuery:function(i,r){if(i&1&&bi(xue,5),i&2){let o;si(o=ai())&&(r.planHouse=o.first)}},decls:6,vars:3,consts:[["planHouse",""],[1,"body"],["class","mobileAlert",4,"ngIf"],["class","functionalModule",4,"ngIf"],[1,"addModule","disabled"],["class","addModuleSpan",3,"formGroup","ngSubmit",4,"ngIf"],[1,"mobileAlert"],[1,"functionalModule"],["class","chooseProjectSpan",3,"ngClass",4,"ngIf"],[1,"planModule",3,"ngClass"],[3,"click",4,"ngIf"],[3,"ngClass","planHouse","callSaveEmitter","planHouseEmitter",4,"ngIf"],[1,"chooseProjectSpan",3,"ngClass"],["class","projectCard",3,"click",4,"ngFor","ngForOf"],[1,"addProjectCard","projectCard",3,"click"],["src","/assets/images/addIcon.svg","alt",""],[1,"projectCard",3,"click"],[1,"mainProjectInformation"],[1,"projectTitle"],[1,"projectSchem"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"deleteProjectBtn",3,"click"],["src","/assets/images/deleteIcon.svg","alt",""],[1,"room"],[3,"click"],[3,"callSaveEmitter","planHouseEmitter","ngClass","planHouse"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt",""],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","name",1,"inputLabel"],["formControlName","name","id","name","type","text",1,"addModuleInput"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"]],template:function(i,r){i&1&&(I(0,"span",1),ye(1,"app-navigation-panel"),Pe(2,wue,2,0,"p",2)(3,Tue,5,6,"span",3),D(),I(4,"span",4),Pe(5,Iue,12,2,"form",5),D()),i&2&&(H(2),$("ngIf",!r.checkDesktop()),H(),$("ngIf",r.checkDesktop()),H(2),$("ngIf",r.accountData))},dependencies:[Ds,jc,Si,Dn,ho,ps,fo,fs,hs,Fo,Lo,Po],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.planModule[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;flex-direction:row;gap:10px;width:100%;transition:all .5s ease-in-out}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:35px;height:35px;background:none;border:none;cursor:pointer}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}app-plan-house[_ngcontent-%COMP%]{width:90%}.body[_ngcontent-%COMP%]{background-color:#000;gap:60px;display:flex;flex-direction:column;align-items:center;min-height:100vh}.chooseProjectSpan[_ngcontent-%COMP%]{width:calc(100% - 60px);z-index:0;gap:10px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;transition:all .5s ease-in-out;grid-area:1/1/2/2}@media (max-width: 1024px){.chooseProjectSpan[_ngcontent-%COMP%]{justify-content:center}}.projectCard[_ngcontent-%COMP%]{width:45%;position:relative;aspect-ratio:4/3;display:flex;justify-content:space-between;align-items:center;flex-direction:column;gap:10px;border-radius:10px;border:none;box-shadow:0 0 10px #fff;background-color:#000;cursor:pointer;overflow:hidden}@media (max-width: 1024px){.projectCard[_ngcontent-%COMP%]{width:clamp(450px,70%,700px)}}.deleteProjectBtn[_ngcontent-%COMP%]{height:35px;align-self:flex-end;margin:10px;background:none;border:none;aspect-ratio:1;cursor:pointer}.mainProjectInformation[_ngcontent-%COMP%]{display:flex;height:90%;width:100%;flex-direction:column;align-items:center}.addProjectCard[_ngcontent-%COMP%]{justify-content:center;background-color:#344e41;box-shadow:none}.projectCard[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-size:2em;color:#fff}.addProjectCard[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.projectTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;font-weight:700;font-size:20px}.projectSchem[_ngcontent-%COMP%]{display:grid;height:80%;aspect-ratio:1;gap:7px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:5px}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.functionalModule[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;align-items:flex-start;justify-items:center;width:90vw}@media (max-width: 768px){.functionalModule[_ngcontent-%COMP%]{width:calc(100vw - 10px)}}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.dividerWithText[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.dividerLine[_ngcontent-%COMP%]{flex:1;height:2px;background-color:#1f1f1f}.dividerText[_ngcontent-%COMP%]{padding:0 10px;color:#666;font-size:14px;text-transform:uppercase}.mobileAlert[_ngcontent-%COMP%]{color:#fff;width:300px;font-size:20px}']})}return n})();function Due(n,e){if(n&1){let t=vt();I(0,"button",7),Me("click",function(){ke(t);let r=le();return Ue(r.deleteColor())}),ye(1,"img",8),D()}if(n&2){let t=le();Hn("background-color",t.deleteColorCalculate())}}var ZV=(()=>{class n{route;cookieService;furnitureCardService;serverImageControl;router;furnitureModelService;notification;routeSub=new di;idPage;createFurnitureComponent;createFurnitureComponentRef;furnitureData={name:"",description:"",colors:[],shops:[],additionalData:{},proportions:{width:null,height:null,length:null}};constructor(t,i,r,o,s,a,l){this.route=t,this.cookieService=i,this.furnitureCardService=r,this.serverImageControl=o,this.router=s,this.furnitureModelService=a,this.notification=l}ngOnInit(){let t=this.cookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}console.log("routeSub init"),this.routeSub=this.route.paramMap.subscribe(i=>{this.idPage=i.get("id")??"new",this.clearFurnitureCard(),this.idPage!=="new"&&this.pageInit(t)})}ngOnDestroy(){console.log("routeSub destroy"),this.routeSub.unsubscribe()}pageInit(t){return dt(this,null,function*(){try{let i=yield this.furnitureCardService.GETfurnitureCard(this.idPage,t);if(i.authorMatched===!1){this.router.navigateByUrl("/create/new");return}this.furnitureData=i.furnitureCard,this.createFurnitureComponent.currentColorId=0}catch(i){console.error(i)}})}transformUrlArrayToBlob(t){return dt(this,null,function*(){return yield Promise.all(t.map(r=>dt(null,null,function*(){return yield(yield fetch(r.toString())).blob()})))})}deleteFurnitureCard(){return dt(this,null,function*(){let t=this.cookieService.getJwt();if(t)try{yield this.furnitureModelService.DELETEfurnitureModel(t,this.idPage),yield this.serverImageControl.DELETEproject(t,this.idPage),yield this.furnitureCardService.DELETEfurnitureCard(t,this.idPage),this.router.navigateByUrl("/account")}catch(i){console.error(i)}})}createFurnitureCard(){return dt(this,null,function*(){let t=this.cookieService.getJwt();if(!(!this.checkValid("create")||!t))try{let i=this.createFurnitureComponent.furnitureData,r=(yield this.furnitureCardService.POSTcreateFurnitureCard(i,t)).furnitureData._id;i.colors.forEach(s=>dt(this,null,function*(){let l={images:yield this.transformUrlArrayToBlob(s.imagesData.images),idMainImage:s.imagesData.idMainImage};yield this.serverImageControl.POSTuploadProjectImages(s.color,l,t,r)}));let o=this.createFurnitureComponent.furnitureModelInput.files[0];yield this.furnitureModelService.POSTuploadFurnitureModel(o,t,r),this.notification.setSuccess("\u041C\u0435\u0431\u0435\u043B\u044C \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430",5e3),this.router.navigateByUrl("/account")}catch(i){console.error(i)}})}updateFurnitureCard(){return dt(this,null,function*(){let t=this.cookieService.getJwt();if(!(!this.checkValid("update")||!t))try{let i=this.createFurnitureComponent.furnitureData;yield this.furnitureCardService.PUTupdateFurnitureCard(i,this.idPage,t),i.colors.forEach(o=>dt(this,null,function*(){if(o.imagesData.images.length===0)return;let a={images:yield this.transformUrlArrayToBlob(o.imagesData.images),idMainImage:o.imagesData.idMainImage};yield this.serverImageControl.POSTuploadProjectImages(o.color,a,t,this.idPage)}));let r=this.createFurnitureComponent.furnitureModelInput.files;r[0]&&(yield this.furnitureModelService.POSTuploadFurnitureModel(r[0],t,this.idPage)),this.notification.setSuccess("\u041C\u0435\u0431\u0435\u043B\u044C \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430",5e3)}catch(i){console.error(i)}})}checkValid(t){let{colors:i,shops:r,proportions:o,name:s}=this.furnitureData,a=this.createFurnitureComponent.furnitureModelInput.files[0];if(i.length==0)return this.createFurnitureComponent.openColorModule(),!1;if(s.length==0){let l=this.createFurnitureComponentRef.nativeElement.querySelector(".furnitureTitle");return l&&l.focus(),this.notification.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",5e3),!1}if(!o.height||!o.width||!o.length)return this.createFurnitureComponent.openAdditional(),this.notification.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B",5e3),!1;if(!a&&t==="create"){let l=this.createFurnitureComponentRef.nativeElement.querySelector(".furnitureModelInput");return l&&l.click(),this.notification.setError("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 3D \u043C\u043E\u0434\u0435\u043B\u044C",5e3),!1}if(r.length==0)return this.createFurnitureComponent.openShopsModule(),this.notification.setError("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",5e3),!1;for(let l of i)if(l.imagesData.images.length==0&&t==="create"){let u=this.createFurnitureComponentRef.nativeElement.querySelector(".uploadImagesInput");return u&&u.click(),this.notification.setError("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",5e3),!1}return!0}clearFurnitureCard(){this.createFurnitureComponent&&(this.createFurnitureComponent.currentColorId=void 0),this.furnitureData={name:"",description:"",colors:[],shops:[],additionalData:{},proportions:{width:null,height:null,length:null}}}deleteColorCalculate(){if(!(!this.createFurnitureComponent||this.createFurnitureComponent.currentColorId===void 0))return this.createFurnitureComponent.furnitureData.colors[this.createFurnitureComponent.currentColorId].color}deleteColor(){if(this.createFurnitureComponent.furnitureData.colors.length<=1){this.notification.setError("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0435\u0449\u0435 \u0446\u0432\u0435\u0442",500);return}this.createFurnitureComponent.deleteColor()}getCurrentColorId(){if(this.createFurnitureComponent)return this.createFurnitureComponent.currentColorId}static \u0275fac=function(i){return new(i||n)(ue(Zi),ue(zi),ue(Mc),ue(Gc),ue(gr),ue(Nh),ue(Ti))};static \u0275cmp=vn({type:n,selectors:[["app-create-furniture-page"]],viewQuery:function(i,r){if(i&1&&(bi(Wf,5),bi(Wf,5,Yt)),i&2){let o;si(o=ai())&&(r.createFurnitureComponent=o.first),si(o=ai())&&(r.createFurnitureComponentRef=o.first)}},decls:9,vars:7,consts:[[1,"body"],[3,"furnitureData"],[1,"functionalBtns"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0446\u0432\u0435\u0442","class","functionalBtn deleteBtn deleteColorBtn colorCircle",3,"background-color","click",4,"ngIf"],[1,"functionalBtn","confirmBtn",3,"click"],[1,"functionalBtn","deleteBtn",3,"title"],["alt","",3,"click","src"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0446\u0432\u0435\u0442",1,"functionalBtn","deleteBtn","deleteColorBtn","colorCircle",3,"click"],["src","/assets/images/cancelIcon.svg","alt","x","srcset",""]],template:function(i,r){i&1&&(I(0,"span",0),ye(1,"app-navigation-panel")(2,"app-create-furniture",1),I(3,"span",2),Pe(4,Due,2,2,"button",3),I(5,"button",4),Me("click",function(){return r.idPage==="new"?r.createFurnitureCard():r.updateFurnitureCard()}),Z(6),D(),I(7,"button",5)(8,"img",6),Me("click",function(){return r.idPage==="new"?r.clearFurnitureCard():r.deleteFurnitureCard()}),D()()()()),i&2&&(H(2),$("furnitureData",r.furnitureData),H(2),$("ngIf",r.getCurrentColorId()!==void 0),H(2),rr(" ",r.idPage==="new"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C":"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"," "),H(),$("title",r.idPage==="new"?"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u043E\u0440\u043C\u0443":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443 \u043C\u0435\u0431\u0435\u043B\u0438"),H(),Hn("rotate",r.idPage==="new"?"45deg":"0deg"),$("src","assets/images/"+(r.idPage==="new"?"addIcon.svg":"deleteIcon.svg"),Mr))},dependencies:[Ds,Wf,Dn],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}button[_ngcontent-%COMP%]{transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.body[_ngcontent-%COMP%]{min-height:100vh;background-color:#000;width:100vw;display:flex;flex-direction:column;align-items:center}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}app-navigation-panel[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%]{width:80%}.functionalBtns[_ngcontent-%COMP%]{margin-top:20px;width:clamp(300px,30vw,400px);display:flex;height:50px;gap:10px;justify-content:center;margin-bottom:30px;z-index:1}.functionalBtn[_ngcontent-%COMP%]{height:100%;border-radius:10px;background-color:#344e41;border:none;cursor:pointer}.confirmBtn[_ngcontent-%COMP%]{width:75%;color:#fff;background-color:#344e41;padding:15px}.deleteBtn[_ngcontent-%COMP%]{aspect-ratio:1;padding:1em;display:flex;align-items:center;justify-content:center}.colorCircle[_ngcontent-%COMP%]{border-radius:100%;height:100%;aspect-ratio:1;display:flex;align-items:center;justify-content:center;transition:all .3s ease-in-out;box-shadow:0 0 5px #fff}.colorCircle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;height:50%}.deleteColorBtn[_ngcontent-%COMP%]{padding:5px;background-color:transparent}@media (max-width: 1440px){app-create-furniture[_ngcontent-%COMP%]{width:90%}}@media (max-width: 600px){.body[_ngcontent-%COMP%]{width:100vw;padding:0 10px;box-sizing:border-box}app-navigation-panel[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%]{width:100%}.functionalBtns[_ngcontent-%COMP%]{width:100%;max-width:400px;gap:5px}.confirmBtn[_ngcontent-%COMP%]{width:100%;padding:10px}}']})}return n})();var va=(()=>{class n{constructor(){this.change$=new On}ngOnChanges(){this.change$.next()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=gt({type:n,standalone:!1,features:[Xi]})}}return n})();var Aue={iconCleaner:"@tui.x",hintOnDisabled:!1},lRe=Nu(Aue);var Rue=qn(()=>new Pue),Pue=(()=>{class n extends va{constructor(){super(...arguments),this.appearance=""}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldAppearance",""]],inputs:{appearance:[0,"tuiTextfieldAppearance","appearance"]},standalone:!1,features:[_n([ea(Rue,n)]),Rn]})}}return n})(),Oue=qn(()=>new Nue),Nue=(()=>{class n extends va{constructor(){super(...arguments),this.cleaner=!1}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldCleaner",""]],inputs:{cleaner:[0,"tuiTextfieldCleaner","cleaner"]},standalone:!1,features:[_n([ea(Oue,n)]),Rn]})}}return n})(),Fue=qn(()=>new Lue),Lue=(()=>{class n extends va{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldCustomContent",""]],inputs:{customContent:[0,"tuiTextfieldCustomContent","customContent"]},standalone:!1,features:[_n([ea(Fue,n)]),Rn]})}}return n})(),kue=qn(()=>new Uue),Uue=(()=>{class n extends va{constructor(){super(...arguments),this.filler=""}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldFiller",""]],inputs:{filler:[0,"tuiTextfieldFiller","filler"]},standalone:!1,features:[_n([ea(kue,n)]),Rn]})}}return n})(),Bue=qn(()=>new Vue),Vue=(()=>{class n extends va{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldIcon",""]],inputs:{icon:[0,"tuiTextfieldIcon","icon"]},standalone:!1,features:[_n([ea(Bue,n)]),Rn]})}}return n})(),Hue=qn(()=>new zue),zue=(()=>{class n extends va{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldIconLeft",""]],inputs:{iconStart:[0,"tuiTextfieldIconLeft","iconStart"]},standalone:!1,features:[_n([ea(Hue,n)]),Rn]})}}return n})(),jue=qn(()=>new Gue),Gue=(()=>{class n extends va{constructor(){super(...arguments),this.labelOutside=!1}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldLabelOutside",""]],inputs:{labelOutside:[0,"tuiTextfieldLabelOutside","labelOutside"]},standalone:!1,features:[_n([ea(jue,n)]),Rn]})}}return n})(),Wue=qn(()=>new $ue),$ue=(()=>{class n extends va{constructor(){super(...arguments),this.postfix=""}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldPostfix",""]],inputs:{postfix:[0,"tuiTextfieldPostfix","postfix"]},standalone:!1,features:[_n([ea(Wue,n)]),Rn]})}}return n})(),que=qn(()=>new Xue),Xue=(()=>{class n extends va{constructor(){super(...arguments),this.prefix=""}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldPrefix",""]],inputs:{prefix:[0,"tuiTextfieldPrefix","prefix"]},standalone:!1,features:[_n([ea(que,n)]),Rn]})}}return n})(),Yue=qn(()=>new Zue),Zue=(()=>{class n extends va{constructor(){super(...arguments),this.size="l"}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=An(n)))(r||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","tuiTextfieldSize",""]],inputs:{size:[0,"tuiTextfieldSize","size"]},standalone:!1,features:[_n([ea(Yue,n)]),Rn]})}}return n})(),KV=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=hr({})}}return n})(),cRe=Nu();var ib=(()=>{class n{httpModule;baseServiceUrl=hi+"shop";abortController=null;constructor(t){this.httpModule=t}GETgetCategoryData(t,i,r){return dt(this,null,function*(){this.abortController&&this.abortController.abort(),this.abortController=new AbortController;try{let o=`${this.baseServiceUrl}?category=${t}&startRange=${i}`;if(r&&Object.keys(r).length>0){let f=new URLSearchParams;f.append("filters",JSON.stringify(r)),o+=`&${new URLSearchParams(f).toString()}`}let s=yield fetch(o,{signal:this.abortController.signal});if(!s.ok){let f=yield s.text();throw new Error(`\u041E\u0448\u0438\u0431\u043A\u0430: ${s.status} \u2014 ${f}`)}let u=(yield s.json()).resultsArray.map(f=>Ct(Ne({},f),{previewUrl:hi+f.previewUrl}));return{resultsArray:u,resultsClientFiltersData:this.getFindOptionsByResult(u)}}catch(o){throw o.name==="AbortError"||console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0440\u043E\u0441\u0430:",o),o}})}getFindOptionsByResult(t){let i={colors:[],minCost:1/0,maxCost:-1/0};return t.forEach(r=>{r.cost<i.minCost&&(i.minCost=r.cost),r.cost>i.maxCost&&(i.maxCost=r.cost),i.colors.push(...r.colors)}),i.minCost=i.minCost!==1/0?i.minCost:0,i.maxCost=i.maxCost!==-1/0?i.maxCost:0,i.colors=[...new Set(i.colors)],i}static \u0275fac=function(i){return new(i||n)(ze(Bi))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Jue=n=>({disabled:n}),Que=n=>({fieldData:n});function ede(n,e){if(n&1&&(I(0,"h1",10),Z(1),D()),n&2){let t=le();H(),rr(" ",t.currentCategoryId!==void 0?t.categoryArray[t.currentCategoryId].translateMany:"\u0412\u0441\u0435","")}}function tde(n,e){if(n&1){let t=vt();I(0,"span",14)(1,"button",15),Me("click",function(){ke(t);let r=le(2);return Ue(r.closeFurniture())}),ye(2,"img",16),D(),I(3,"span",17),ye(4,"app-view-furniture",18),I(5,"button",19),Me("click",function(){ke(t);let r=le(2);return Ue(r.openAddModule())}),Z(6,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),D()()()}if(n&2){let t=le(2);H(4),$("furnitureCardId",t.furnitureCardId)}}function nde(n,e){n&1&&ye(0,"app-finder")}function ide(n,e){if(n&1){let t=vt();I(0,"button",37),Me("click",function(){let r=ke(t).index,o=le(3);return Ue(o.changeCategory(r))}),Z(1),D()}if(n&2){let t=e.$implicit,i=e.index,r=le(3);In("active",r.currentCategoryId===i),H(),rr(" ",t.translateOne," ")}}function rde(n,e){n&1&&(I(0,"strong",38),Z(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u0430"),D())}function ode(n,e){n&1&&ye(0,"img",41)}function sde(n,e){if(n&1){let t=vt();I(0,"button",39),Me("click",function(){let r=ke(t).$implicit,o=le(3);return Ue(o.selectedColors.includes(r)?o.deleteSelectedColor(r):o.addSelectedColor(r))}),Pe(1,ode,1,0,"img",40),D()}if(n&2){let t=e.$implicit,i=le(3);Hn("background-color",t),H(),$("ngIf",i.selectedColors.includes(t))}}function ade(n,e){n&1&&Ks(0)}function lde(n,e){if(n&1&&(I(0,"span",43)(1,"strong",23),Z(2),D(),Pe(3,ade,1,0,"ng-container",44),D()),n&2){let t=e.$implicit;le(4);let i=Li(10),r=Li(12);H(2),Cn(t.name),H(),$("ngTemplateOutlet",t.type==="select"?i:r)("ngTemplateOutletContext",mr(3,Que,t))}}function cde(n,e){if(n&1&&(Ys(0),Pe(1,lde,4,5,"span",42),Zs()),n&2){let t=le(3);H(),$("ngForOf",t.categoryArray[t.currentCategoryId].filters)}}function ude(n,e){if(n&1){let t=vt();I(0,"button",45),Me("click",function(){ke(t);let r=le(3);return Ue(r.requestWithFilters())}),Z(1," \u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B "),D()}}function dde(n,e){if(n&1&&(I(0,"div",46)(1,"h2",47),Z(2),D(),ye(3,"img",48),I(4,"a",49),Z(5),ls(6,"costFormat"),D()()),n&2){let t,i=e.$implicit,r=le(3);H(2),Cn(i.name),H(),$("src",i.previewUrl,Mr),H(),$("routerLink",r.checkDesktop()?"/shop/"+((t=r.categoryName)!==null&&t!==void 0?t:"all")+"/"+i.furnitureCardId:"/plan"),H(),Cn(cs(6,4,i.cost))}}function fde(n,e){n&1&&(I(0,"span",50)(1,"strong"),Z(2,"\u041C\u0435\u0431\u0435\u043B\u044C \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"),D(),ye(3,"img",51),D())}function hde(n,e){if(n&1){let t=vt();I(0,"span",20)(1,"span",21),Pe(2,nde,1,0,"app-finder",22),I(3,"strong",23),Z(4,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F"),D(),I(5,"span",24),Pe(6,ide,2,3,"button",25),I(7,"button",26),Me("click",function(){ke(t);let r=le(2);return Ue(r.changeCategory(void 0))}),Z(8," \u0412\u0441\u0435 "),D()(),I(9,"strong",23),Z(10,"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C"),D(),I(11,"form",27),ye(12,"input",28)(13,"hr")(14,"input",29),D(),Pe(15,rde,2,0,"strong",30),I(16,"strong",23),Z(17,"\u0426\u0432\u0435\u0442"),D(),I(18,"span",31),Pe(19,sde,2,3,"button",32),D(),Pe(20,cde,2,1,"ng-container",22)(21,ude,2,0,"button",33),D(),I(22,"span",34),Pe(23,dde,7,6,"div",35)(24,fde,4,0,"span",36),D()()}if(n&2){let t=le(2);H(2),$("ngIf",t.checkViewport()),H(4),$("ngForOf",t.categoryArray),H(),In("active",t.currentCategoryId==null),H(4),$("formGroup",t.costForm),H(),$("placeholder","\u043E\u0442 "+t.clientFiltersObject.minCost),H(2),$("placeholder","\u0434\u043E "+t.clientFiltersObject.maxCost),H(),$("ngIf",!t.costForm.valid),H(4),$("ngForOf",t.clientFiltersObject.colors),H(),$("ngIf",t.currentCategoryId!==void 0),H(),$("ngIf",t.currentCategoryId!==void 0),H(2),$("ngForOf",t.getClientFilteredFurnitures())("ngForTrackBy",t.trackByFn),H(),$("ngIf",t.getClientFilteredFurnitures().length===0)}}function pde(n,e){if(n&1&&(I(0,"span",11),Pe(1,tde,7,1,"span",12)(2,hde,25,14,"span",13),D()),n&2){let t=le();H(),$("ngIf",t.furnitureCardId),H(),$("ngIf",!t.furnitureCardId)}}function mde(n,e){if(n&1&&(I(0,"a",58),Z(1),D()),n&2){let t=e.$implicit,i=e.index,r=le().index,o=le(2);$("routerLink",o.getPlanUrl(r,i)),H(),Cn(t.name)}}function gde(n,e){if(n&1&&(I(0,"span")(1,"h3",56),Z(2),D(),Pe(3,mde,2,2,"a",57),D()),n&2){let t=e.$implicit;H(2),Cn(t.name),H(),$("ngForOf",t.rooms)}}function vde(n,e){n&1&&(I(0,"a",59),Z(1,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D"),D())}function yde(n,e){if(n&1&&(I(0,"span",52)(1,"h2",53),Z(2,"\u041F\u0440\u043E\u0435\u043A\u0442\u044B"),D(),Pe(3,gde,4,2,"span",54)(4,vde,2,0,"a",55),D()),n&2){let t=le();H(3),$("ngForOf",t.accountProjects),H(),$("ngIf",t.accountProjects.length==0)}}function _de(n,e){n&1&&ye(0,"img",41)}function xde(n,e){if(n&1){let t=vt();I(0,"button",62),Me("click",function(){let r=ke(t).$implicit,o=le(2).fieldData,s=le();return Ue(s.queryGroup[o.field].includes(r.queryValue)?s.deleteSelectedOption(r.queryValue,o.field):s.addSelectedOption(r.queryValue,o.field))}),Pe(1,_de,1,0,"img",40),I(2,"p"),Z(3),D()()}if(n&2){let t=e.$implicit,i=le(2).fieldData,r=le();H(),$("ngIf",r.queryGroup[i.field].includes(t.queryValue)),H(2),Cn(t.name)}}function wde(n,e){if(n&1&&(Ys(0),I(1,"span",60),Pe(2,xde,4,2,"button",61),D(),Zs()),n&2){let t=le().fieldData;H(2),$("ngForOf",t.options)}}function bde(n,e){if(n&1&&Pe(0,wde,3,1,"ng-container",22),n&2){let t=e.fieldData,i=le();$("ngIf",i.queryGroup[t.field])}}function Cde(n,e){if(n&1&&(Ys(0),I(1,"form",27),ye(2,"input",63)(3,"hr")(4,"input",64),D(),Zs()),n&2){let t=le().fieldData,i=le();H(),$("formGroup",i.queryGroup[t.field])}}function Ede(n,e){if(n&1&&Pe(0,Cde,5,1,"ng-container",22),n&2){let t=e.fieldData,i=le();$("ngIf",i.queryGroup[t.field])}}var rb=(()=>{class n{route;shopService;router;accountService;accountCookieService;notification;categoryService;location;elementRef;finderService;furnitureNameSubscription;funritureName="";queryGroup={};furnitureCardId;categoryName;accountProjects;currentCategoryId;furnituresArray=[];openAddModuleToggle=!1;categoryArray=[];clientFiltersObject;selectedColors=[];constructor(t,i,r,o,s,a,l,u,f,h){this.route=t,this.shopService=i,this.router=r,this.accountService=o,this.accountCookieService=s,this.notification=a,this.categoryService=l,this.location=u,this.elementRef=f,this.finderService=h}ngOnInit(){return dt(this,null,function*(){this.clearClientFilters(),this.processRouteParams(),this.furnitureNameSubscription=this.finderService.furnitureName$.subscribe(i=>{this.furnituresArray=[],this.funritureName=i,this.requestFurnitures(this.categoryName??"all",0,this.handleQueryData())});let t=this.accountCookieService.getJwt();if(t)try{this.accountProjects=(yield this.accountService.GETaccount(t)).accountData.projects}catch(i){console.log(i)}})}ngOnDestroy(){this.furnitureNameSubscription.unsubscribe()}initCategories(){return dt(this,null,function*(){try{this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray,this.categoryArray.forEach((t,i)=>{this.categoryName===t.name&&(this.currentCategoryId=i,this.initQueryGroup())})}catch(t){console.log(t)}})}furnituresInit(){return dt(this,null,function*(){this.categoryName!==void 0?yield this.requestFurnitures(this.categoryName,0):yield this.requestFurnitures("all",0),this.setScrollObserver()})}requestFurnitures(t,i,r){return dt(this,null,function*(){let o=yield this.shopService.GETgetCategoryData(t,i,r);console.log(o),this.furnituresArray=[...this.furnituresArray,...o.resultsArray],this.clientFiltersObject=o.resultsClientFiltersData})}clearClientFilters(){this.clientFiltersObject={colors:[],minCost:0,maxCost:0}}initQueryGroup(){this.currentCategoryId!==void 0&&(this.queryGroup={},this.categoryArray[this.currentCategoryId].filters.forEach(t=>{t&&t.type==="select"?this.queryGroup[t.field]=[]:this.queryGroup[t.field]=new fi({min:new En(null,[this.numberOrEmptyValidator]),max:new En(null,[this.numberOrEmptyValidator])})}))}numberOrEmptyValidator(t){let i=t.value;return i==null||i===""?null:isNaN(i)||i<0?{notNumber:!0}:null}processRouteParams(){let t=this.route.snapshot.params;this.furnitureCardId=t.furnitureCardId,this.categoryName=t.category,console.log("route"),this.initCategories()}setScrollObserver(){let t=this.elementRef.nativeElement.querySelector(".category"),i=t.querySelectorAll(".furnitureItem"),r=0,o={root:t,rootMargin:"0px",threshold:.5},s=(l,u)=>{l.forEach(f=>dt(this,null,function*(){if(f.isIntersecting){let h=f.target;(Array.from(i).indexOf(h)+1)%8===0&&!h.dataset.observed&&(h.dataset.observed="true",r++,this.categoryName!==void 0?yield this.requestFurnitures(this.categoryName,this.furnituresArray.length,this.handleQueryData()):yield this.requestFurnitures("all",this.furnituresArray.length,this.handleQueryData()))}}))},a=new IntersectionObserver(s,o);i.forEach(l=>a.observe(l))}checkViewport(){return window.innerWidth<=768}requestWithFilters(){this.furnituresArray.length=0,this.requestFurnitures(this.categoryName??"all",0,this.handleQueryData())}handleQueryData(){let t={};return this.funritureName.length>0&&(t.name=this.funritureName),Object.keys(this.queryGroup).forEach(i=>{if(this.queryGroup[i]instanceof fi){if(!this.queryGroup[i].valid)return;let{min:r,max:o}=this.queryGroup[i].value;(+r>0||+o>0)&&(t[i]={min:+r,max:+o})}else this.queryGroup[i].length>0&&(t[i]=this.queryGroup[i])}),console.log(t),t}addSelectedColor(t){this.selectedColors.push(t)}deleteSelectedColor(t){let i=this.selectedColors.findIndex(r=>r===t);this.selectedColors.splice(i,1)}addSelectedOption(t,i){this.queryGroup[i]&&this.queryGroup[i].push(t)}deleteSelectedOption(t,i){if(!this.queryGroup[i])return;let r=this.queryGroup[i].findIndex(o=>o===t);this.queryGroup[i].splice(r,1)}openAddModule(){this.openAddModuleToggle=!0}closeAddModule(){this.openAddModuleToggle=!1}checkDesktop=Lh;changeCategory(t){this.furnituresArray.length=0,this.currentCategoryId=t;let i="/shop";t!==void 0?(this.categoryName=this.categoryArray[t].name,i+="/"+this.categoryArray[t].name):this.categoryName=void 0,this.location.replaceState(i),this.furnituresInit(),this.initQueryGroup()}closeFurniture(){this.router.navigateByUrl("/shop"+(this.categoryName==="all"?"":"/"+this.categoryName))}getPlanUrl(t,i){return`/plan/${t}/${i}/${this.furnitureCardId}`}trackByFn(t,i){return i.id}getClientFilteredFurnitures(){return this.costForm.valid?this.furnituresArray.filter(t=>{let i=this.selectedColors.length===0||[...new Set([...t.colors,...this.selectedColors])].length<t.colors.length+this.selectedColors.length,{minCost:r,maxCost:o}=this.costForm.value,s=+(r||-1/0)<=t.cost&&t.cost<=+(o||1/0);return i&&s}):[]}costForm=new fi({minCost:new En(null,[this.numberOrEmptyValidator]),maxCost:new En(null,[this.numberOrEmptyValidator])});static \u0275fac=function(i){return new(i||n)(ue(Zi),ue(ib),ue(gr),ue(Xa),ue(zi),ue(Ti),ue(Gf),ue(co),ue(Yt),ue(kh))};static \u0275cmp=vn({type:n,selectors:[["app-shop-page"]],features:[_n([])],decls:13,vars:6,consts:[["selectFilter",""],["rangeFilter",""],[1,"body"],["class","categoryTitle","title","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",4,"ngIf"],["class","shopModule",4,"ngIf"],[1,"addModule",3,"ngClass"],[1,"addModuleSpan"],["type","button","title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],["class","addModuleFormContent",4,"ngIf"],["title","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",1,"categoryTitle"],[1,"shopModule"],["class","viewFurnitureSpan",4,"ngIf"],["class","mainArea",4,"ngIf"],[1,"viewFurnitureSpan"],["title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"closeFurniture",3,"click"],["src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"furnitureCard"],[3,"furnitureCardId"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",1,"chooseAddProjectBtn",3,"click"],[1,"mainArea"],[1,"params"],[4,"ngIf"],[1,"paramsChapterTitle"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",3,"active","click",4,"ngFor","ngForOf"],["title","\u0412\u0441\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",1,"furnitureCategoryButton",3,"click"],[1,"rangeInputsSpan",3,"formGroup"],["formControlName","minCost","type","text",1,"rangeInput",3,"placeholder"],["formControlName","maxCost","type","text",1,"rangeInput",3,"placeholder"],["class","paramsError",4,"ngIf"],[1,"colorsChooseSpan"],["class","colorItem",3,"background-color","click",4,"ngFor","ngForOf"],["class","useFiltersBtn",3,"click",4,"ngIf"],[1,"category"],["class","furnitureItem",4,"ngFor","ngForOf","ngForTrackBy"],["class","noItemsMsgSpan",4,"ngIf"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",1,"furnitureCategoryButton",3,"click"],[1,"paramsError"],[1,"colorItem",3,"click"],["src","/assets/images/cancelIcon.svg","alt","x","srcset","",4,"ngIf"],["src","/assets/images/cancelIcon.svg","alt","x","srcset",""],["class","categoryFilter",4,"ngFor","ngForOf"],[1,"categoryFilter"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"useFiltersBtn",3,"click"],[1,"furnitureItem"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle"],["loading","lazy","alt","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438","title","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438",1,"furniturePreview",3,"src"],["title","\u0426\u0435\u043D\u0430 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureLink",3,"routerLink"],[1,"noItemsMsgSpan"],["src","/assets/images/furnitureIcon.svg","alt","","srcset",""],[1,"addModuleFormContent"],["title","\u041F\u0440\u043E\u0435\u043A\u0442\u044B",1,"addModuleTitle"],[4,"ngFor","ngForOf"],["routerLink","/plan","class","noProjectsBtn","title","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D",4,"ngIf"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B",3,"routerLink",4,"ngFor","ngForOf"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B",3,"routerLink"],["routerLink","/plan","title","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D",1,"noProjectsBtn"],[1,"selectFilterOptionsSpan"],["class","selectFilterOption",3,"click",4,"ngFor","ngForOf"],[1,"selectFilterOption",3,"click"],["placeholder","\u043E\u0442","formControlName","min","type","text",1,"rangeInput"],["placeholder","\u0434\u043E","formControlName","max","type","text",1,"rangeInput"]],template:function(i,r){if(i&1){let o=vt();I(0,"span",2),ye(1,"app-navigation-panel"),Pe(2,ede,2,1,"h1",3)(3,pde,3,2,"span",4),D(),I(4,"span",5)(5,"span",6)(6,"button",7),Me("click",function(){return ke(o),Ue(r.closeAddModule())}),ye(7,"img",8),D(),Pe(8,yde,5,2,"span",9),D()(),Pe(9,bde,1,1,"ng-template",null,0,Yi)(11,Ede,1,1,"ng-template",null,1,Yi)}i&2&&(H(2),$("ngIf",!r.furnitureCardId),H(),$("ngIf",r.furnituresArray),H(),$("ngClass",mr(4,Jue,!r.openAddModuleToggle)),H(4),$("ngIf",r.accountProjects))},dependencies:[Qw,ho,ps,fo,fs,hs,Fo,Lo,Js,Ff,Ds,Si,Dn,$_,ds,Po,Ec,KV],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.furnitureLink[_ngcontent-%COMP%], .furnitureCategoryButton[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.furnitureLink[_ngcontent-%COMP%]:hover, .furnitureCategoryButton[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px;z-index:10}app-finder[_ngcontent-%COMP%]{width:calc(100% - 20px)}.body[_ngcontent-%COMP%]{min-height:calc(100vh - 30px);background-color:#000;display:flex;align-items:center;flex-direction:column;gap:30px;padding-bottom:30px}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;color:#fff;cursor:pointer;border:none}.shopModule[_ngcontent-%COMP%]{width:90%;margin:0 auto;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;z-index:1}.category[_ngcontent-%COMP%]{width:75%;height:60vh;transition:all .5s ease-in-out;overflow-y:scroll;display:flex;flex-wrap:wrap;justify-content:space-around;z-index:1}.categoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.params[_ngcontent-%COMP%]{width:20%;min-width:230px;display:flex;flex-direction:column;gap:10px}.params[_ngcontent-%COMP%]   .paramsChapterTitle[_ngcontent-%COMP%]{color:#fff}.params[_ngcontent-%COMP%]   .paramsError[_ngcontent-%COMP%]{color:red}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);max-width:60%;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:space-between}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%;border-radius:10px}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:100%;justify-content:start;padding-top:5px;padding-right:5px;max-height:300px;overflow-y:scroll;margin-bottom:10px}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#a3b18a;color:#000}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;flex-shrink:0;color:#fff;cursor:pointer;border:none}.closeFurniture[_ngcontent-%COMP%]{background:none;border:none;width:35px;aspect-ratio:1;align-self:flex-start;cursor:pointer;grid-area:1/1/2/2;z-index:2}.closeFurniture[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}.viewFurnitureSpan[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;gap:10px;grid-area:1/1/2/2}.mainArea[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex}app-view-furniture[_ngcontent-%COMP%]{width:95%}.furnitureCard[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%;display:flex;flex-direction:column;align-items:center;z-index:1}.chooseAddProjectBtn[_ngcontent-%COMP%]{width:clamp(250px,35%,320px);padding:15px;background-color:#a3b18a;color:#dad7cd;border-radius:10px;border:none;cursor:pointer}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;align-items:center;gap:15px;box-shadow:0 0 10px #fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.disabled[_ngcontent-%COMP%]{opacity:0;z-index:0}.addModuleFormContent[_ngcontent-%COMP%]{padding-top:20px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px;color:#dad7cd;border-radius:10px;text-decoration:none;text-align:center}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{background-color:#a3b18a;width:calc(100% - 20px);margin-bottom:0;cursor:default}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background-color:#344e41;width:calc(80% - 20px);align-self:end;margin-top:5px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.noProjectsBtn[_ngcontent-%COMP%]{color:#dad7cd;text-align:center;width:50%;padding:15px 10px;background-color:#344e41;border-radius:10px;text-decoration:none;transition:background-color .3s ease-in-out}.noProjectsBtn[_ngcontent-%COMP%]:hover{background-color:#a3b18a}.rangeInputsSpan[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;flex-direction:row;color:#fff;align-items:center}.rangeInputsSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:10px;height:2px;background-color:#fff;border:none}.rangeInputsSpan[_ngcontent-%COMP%]   .rangeInput[_ngcontent-%COMP%]{width:45%;border-radius:10px;padding:10px;border:2px solid #A3B18A;outline:none;background-color:#fff}.useFiltersBtn[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:10px;border:none;background-color:#344e41;color:#fff;cursor:pointer;transition:transform .2s ease-in-out}.useFiltersBtn[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.categoryFilter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:100%}.noItemsMsgSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;height:fit-content;align-self:center;align-items:center}.noItemsMsgSpan[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#dad7cd;font-size:30px}.noItemsMsgSpan[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.selectFilterOptionsSpan[_ngcontent-%COMP%]{display:flex;width:100%;gap:5px;flex-wrap:wrap}.selectFilterOptionsSpan[_ngcontent-%COMP%]   .selectFilterOption[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;width:fit-content;padding:10px;border-radius:50px;border:none;outline:none;background-color:#dad7cd;cursor:pointer;transition:transform .2s ease-in-out}.selectFilterOptionsSpan[_ngcontent-%COMP%]   .selectFilterOption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.selectFilterOptionsSpan[_ngcontent-%COMP%]   .selectFilterOption[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:17px;aspect-ratio:1}.selectFilterOptionsSpan[_ngcontent-%COMP%]   .selectFilterOption[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.colorsChooseSpan[_ngcontent-%COMP%]{display:flex;width:100%;flex-wrap:wrap;gap:5px}.colorsChooseSpan[_ngcontent-%COMP%]   .colorItem[_ngcontent-%COMP%]{width:35px;aspect-ratio:1;outline:none;border:none;display:flex;align-items:center;justify-content:center;border-radius:50%;cursor:pointer;transition:transform .2s ease-in-out}.colorsChooseSpan[_ngcontent-%COMP%]   .colorItem[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.colorsChooseSpan[_ngcontent-%COMP%]   .colorItem[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;aspect-ratio:1}@media (max-width: 768px){.category[_ngcontent-%COMP%], .params[_ngcontent-%COMP%], .furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{width:100%}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(20% - 5px)}.mainArea[_ngcontent-%COMP%]{flex-direction:column}.furnitureItem[_ngcontent-%COMP%]{flex:auto;width:100%;max-width:none}}@media (max-width: 600px){.category[_ngcontent-%COMP%]{max-height:50vh;margin-top:15px}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(25% - 5px)}.chooseAddProjectBtn[_ngcontent-%COMP%]{width:calc(100% - 20px);max-width:400px}}@media (max-width: 500px){.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(33% - 5px)}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{max-height:250px}}@media (max-width: 370px){.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(50% - 5px)}}']})}return n})();var JV=[{component:$V,path:""},{component:XV,path:"account"},{component:YV,path:"login"},{component:kg,path:"plan"},{component:kg,path:"plan/:planId"},{component:kg,path:"plan/:planId/:roomId"},{component:kg,path:"plan/:planId/:roomId/:furnitureCardId"},{component:ZV,path:"create/:id"},{component:rb,path:"shop"},{component:rb,path:"shop/:category"},{component:rb,path:"shop/:category/:furnitureCardId"}];var Mde=(()=>{class n extends Cc{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(ze(fn),ze(Uu),ze(Bu))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();function Sde(){return new P_}function Tde(n,e,t){return new V_(n,e,t)}var QV=[{provide:Bu,useFactory:Sde},{provide:Cc,useClass:Mde},{provide:uc,useFactory:Tde,deps:[jp,Cc,Kn]}],URe=[{provide:Uu,useClass:m1},{provide:KM,useValue:"NoopAnimations"},...QV],Ide=[{provide:Uu,useFactory:()=>new U_},{provide:KM,useFactory:()=>"BrowserAnimations"},...QV];function eH(){return xu("NgEagerAnimations"),[...Ide]}var Dde=(n,e)=>({appearBody:n,disappearBody:e});function Ade(n,e){n&1&&ye(0,"img",6)}function Rde(n,e){if(n&1){let t=vt();I(0,"span",7)(1,"button",8),Me("click",function(){ke(t);let r=le();return Ue(r.reloadPage())}),ye(2,"img",9),D(),I(3,"button",8),Me("click",function(){ke(t);let r=le();return Ue(r.logout())}),ye(4,"img",10),D()()}}var XD=(()=>{class n{notificationService;cookieService;constructor(t,i){this.notificationService=t,this.cookieService=i}errorMessage;successMessage;ngOnInit(){this.notificationService.error$.subscribe(t=>{this.errorMessage=t}),this.notificationService.success$.subscribe(t=>{this.successMessage=t})}reloadPage(){window.location.reload()}logout(){this.cookieService.deleteJwt(),this.cookieService.deleteAccountType(),this.reloadPage()}static \u0275fac=function(i){return new(i||n)(ue(Ti),ue(zi))};static \u0275cmp=vn({type:n,selectors:[["app-notification"]],decls:8,vars:11,consts:[[1,"body",3,"ngClass"],["loading","lazy","style","width: 30px; height: 30px","src","/assets/images/successIcon.svg","alt","",4,"ngIf"],[1,"textSpan"],[1,"title"],[1,"errorMessage"],["class","btnsSpan",4,"ngIf"],["loading","lazy","src","/assets/images/successIcon.svg","alt","",2,"width","30px","height","30px"],[1,"btnsSpan"],[1,"solutionBtn",3,"click"],["loading","lazy","src","/assets/images/reloadIcon.svg","alt",""],["loading","lazy","src","/assets/images/logoutIcon.svg","alt",""]],template:function(i,r){i&1&&(I(0,"span",0),Pe(1,Ade,1,0,"img",1),I(2,"span",2)(3,"h2",3),Z(4),D(),I(5,"h3",4),Z(6),D()(),Pe(7,Rde,5,0,"span",5),D()),i&2&&($("ngClass",fy(8,Dde,r.errorMessage||r.successMessage,!r.errorMessage&&!r.successMessage)),Tr("tab-index",r.errorMessage||r.successMessage?1:-1),H(),$("ngIf",r.successMessage),H(3),Cn(r.errorMessage?"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A":"\u0423\u0441\u043F\u0435\u0448\u043D\u043E"),H(),Hn("color",r.errorMessage?"red":"green"),H(),Cn(r.errorMessage||r.successMessage),H(),$("ngIf",r.errorMessage))},dependencies:[Po,Dn],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{border-radius:10px;border:1px solid rgba(163,177,138,.3);background-color:#000;width:350px;display:flex;flex-direction:row;padding:0 10px;justify-content:space-around;align-items:center;position:fixed;bottom:-100px;opacity:0;left:50%;transform:translate(-50%);transition:all .5s ease-in-out;z-index:10}.appearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_appearHandler .5s forwards}.disappearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_disappearHandler .5s forwards;z-index:-10}.textSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;padding:10px 0;font-size:105%;width:60%;justify-content:center}.title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:17px}.errorMessage[_ngcontent-%COMP%]{margin:0;width:100%;font-weight:400;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.solutionBtn[_ngcontent-%COMP%]{width:100%;height:100%;background:none;margin:0;border:none;cursor:pointer}.solutionBtn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}.btnsSpan[_ngcontent-%COMP%]{display:flex;justify-self:flex-end;width:26%}@keyframes _ngcontent-%COMP%_appearHandler{0%{opacity:0;bottom:-100px}to{opacity:1;bottom:50px}}@keyframes _ngcontent-%COMP%_disappearHandler{0%{opacity:1;bottom:50px}to{opacity:0;bottom:-100px}}']})}return n})();var ob=(()=>{class n{title="HouseQuality";static \u0275fac=function(i){return new(i||n)};static \u0275cmp=vn({type:n,selectors:[["app-root"]],features:[_n([j_,XD,Xa,Uh,zi,Gc,Fh,jc,Jw,Mc,Nh,ib,kh,Location])],decls:2,vars:0,template:function(i,r){i&1&&ye(0,"router-outlet")(1,"app-notification")},dependencies:[dm,XD],encapsulation:2})}return n})();var tH=(()=>{class n{notification;constructor(t){this.notification=t}intercept(t,i){return i.handle(t).pipe(Bs(r=>(this.notification.setError(r.error.message,5e3),sc(()=>r))))}static \u0275fac=function(i){return new(i||n)(ze(Ti))};static \u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();var YD={providers:[ET(JV),BF(),eH(),$S(qS()),jF(),{provide:Ey,useClass:tH,multi:!0}]};Wp(ob,YD).catch(n=>console.error(n));Wp(ob,YD).then(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/model-scw.js",{scope:"/"}).then(n=>{}).catch(n=>{})}).catch(n=>console.error(n));
