var o7=Object.create;var WS=Object.defineProperty,s7=Object.defineProperties,a7=Object.getOwnPropertyDescriptor,l7=Object.getOwnPropertyDescriptors,c7=Object.getOwnPropertyNames,kv=Object.getOwnPropertySymbols,u7=Object.getPrototypeOf,$S=Object.prototype.hasOwnProperty,tO=Object.prototype.propertyIsEnumerable;var eO=(n,e,t)=>e in n?WS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,q=(n,e)=>{for(var t in e||={})$S.call(e,t)&&eO(n,t,e[t]);if(kv)for(var t of kv(e))tO.call(e,t)&&eO(n,t,e[t]);return n},Ve=(n,e)=>s7(n,l7(e));var gf=(n,e)=>{var t={};for(var i in n)$S.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&kv)for(var i of kv(n))e.indexOf(i)<0&&tO.call(n,i)&&(t[i]=n[i]);return t};var ki=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var d7=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of c7(e))!$S.call(n,r)&&r!==t&&WS(n,r,{get:()=>e[r],enumerable:!(i=a7(e,r))||i.enumerable});return n};var Iu=(n,e,t)=>(t=n!=null?o7(u7(n)):{},d7(e||!n||!n.__esModule?WS(t,"default",{value:n,enumerable:!0}):t,n));var Ge=(n,e,t)=>new Promise((i,r)=>{var o=l=>{try{a(t.next(l))}catch(u){r(u)}},s=l=>{try{a(t.throw(l))}catch(u){r(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var WI=ki((Th,Cg)=>{"use strict";(function(){var n,e="4.17.21",t=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",u=1,f=2,h=4,p=1,g=2,v=1,x=2,y=4,_=8,E=16,S=32,C=64,k=128,F=256,L=512,W=30,O="...",R=800,j=16,me=1,ue=2,De=3,Ce=1/0,Y=9007199254740991,re=17976931348623157e292,X=NaN,_e=4294967295,ze=_e-1,rt=_e>>>1,ve=[["ary",k],["bind",v],["bindKey",x],["curry",_],["curryRight",E],["flip",L],["partial",S],["partialRight",C],["rearg",F]],oe="[object Arguments]",B="[object Array]",Q="[object AsyncFunction]",xe="[object Boolean]",le="[object Date]",je="[object DOMException]",We="[object Error]",Ue="[object Function]",at="[object GeneratorFunction]",gt="[object Map]",ft="[object Number]",H="[object Null]",Yt="[object Object]",$e="[object Promise]",Rt="[object Proxy]",Ke="[object RegExp]",Ht="[object Set]",mt="[object String]",N="[object Symbol]",M="[object Undefined]",se="[object WeakMap]",be="[object WeakSet]",Re="[object ArrayBuffer]",pe="[object DataView]",Ye="[object Float32Array]",Ze="[object Float64Array]",xt="[object Int8Array]",bt="[object Int16Array]",Ne="[object Int32Array]",ot="[object Uint8Array]",Ct="[object Uint8ClampedArray]",Mt="[object Uint16Array]",st="[object Uint32Array]",ln=/\b__p \+= '';/g,jt=/\b(__p \+=) '' \+/g,Bn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,Qe=/[&<>"']/g,ge=RegExp(Z.source),Te=RegExp(Qe.source),it=/<%-([\s\S]+?)%>/g,Je=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oi=/^\w*$/,Sn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,or=/[\\^$.*+?()[\]{}|]/g,to=RegExp(or.source),yu=/^\s+/,Fa=/\s/,as=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bc=/\{\n\/\* \[wrapped with (.+)\] \*/,Ws=/,? & /,Cc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ls=/[()=,{}\[\]\/\s]/,Z0=/\\(\\)?/g,ef=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Mp=/\w*$/,K0=/^[-+]0x[0-9a-f]+$/i,FC=/^0b[01]+$/i,NC=/^\[object .+?Constructor\]$/,LC=/^0o[0-7]+$/i,kC=/^(?:0|[1-9]\d*)$/,UC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tf=/($^)/,D=/['\n\r\u2028\u2029\\]/g,te="\\ud800-\\udfff",de="\\u0300-\\u036f",fe="\\ufe20-\\ufe2f",ie="\\u20d0-\\u20ff",Be=de+fe+ie,et="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",ht="\\xac\\xb1\\xd7\\xf7",Bt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kt="\\u2000-\\u206f",St=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vn="A-Z\\xc0-\\xd6\\xd8-\\xde",Tn="\\ufe0e\\ufe0f",wi=ht+Bt+kt+St,ii="['\u2019]",En="["+te+"]",Et="["+wi+"]",Ii="["+Be+"]",In="\\d+",Oo="["+et+"]",pl="["+lt+"]",Mr="[^"+te+wi+In+et+lt+vn+"]",ml="\\ud83c[\\udffb-\\udfff]",ri="(?:"+Ii+"|"+ml+")",Ur="[^"+te+"]",Tr="(?:\\ud83c[\\udde6-\\uddff]){2}",qi="[\\ud800-\\udbff][\\udc00-\\udfff]",Fi="["+vn+"]",nf="\\u200d",Na="(?:"+pl+"|"+Mr+")",lj="(?:"+Fi+"|"+Mr+")",HR="(?:"+ii+"(?:d|ll|m|re|s|t|ve))?",jR="(?:"+ii+"(?:D|LL|M|RE|S|T|VE))?",GR=ri+"?",WR="["+Tn+"]?",cj="(?:"+nf+"(?:"+[Ur,Tr,qi].join("|")+")"+WR+GR+")*",uj="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",dj="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$R=WR+GR+cj,fj="(?:"+[Oo,Tr,qi].join("|")+")"+$R,hj="(?:"+[Ur+Ii+"?",Ii,Tr,qi,En].join("|")+")",pj=RegExp(ii,"g"),mj=RegExp(Ii,"g"),BC=RegExp(ml+"(?="+ml+")|"+hj+$R,"g"),gj=RegExp([Fi+"?"+pl+"+"+HR+"(?="+[Et,Fi,"$"].join("|")+")",lj+"+"+jR+"(?="+[Et,Fi+Na,"$"].join("|")+")",Fi+"?"+Na+"+"+HR,Fi+"+"+jR,dj,uj,In,fj].join("|"),"g"),vj=RegExp("["+nf+te+Be+Tn+"]"),yj=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_j=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xj=-1,fi={};fi[Ye]=fi[Ze]=fi[xt]=fi[bt]=fi[Ne]=fi[ot]=fi[Ct]=fi[Mt]=fi[st]=!0,fi[oe]=fi[B]=fi[Re]=fi[xe]=fi[pe]=fi[le]=fi[We]=fi[Ue]=fi[gt]=fi[ft]=fi[Yt]=fi[Ke]=fi[Ht]=fi[mt]=fi[se]=!1;var oi={};oi[oe]=oi[B]=oi[Re]=oi[pe]=oi[xe]=oi[le]=oi[Ye]=oi[Ze]=oi[xt]=oi[bt]=oi[Ne]=oi[gt]=oi[ft]=oi[Yt]=oi[Ke]=oi[Ht]=oi[mt]=oi[N]=oi[ot]=oi[Ct]=oi[Mt]=oi[st]=!0,oi[We]=oi[Ue]=oi[se]=!1;var wj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},bj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cj={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Sj={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ej=parseFloat,Mj=parseInt,qR=typeof global=="object"&&global&&global.Object===Object&&global,Tj=typeof self=="object"&&self&&self.Object===Object&&self,sr=qR||Tj||Function("return this")(),VC=typeof Th=="object"&&Th&&!Th.nodeType&&Th,_u=VC&&typeof Cg=="object"&&Cg&&!Cg.nodeType&&Cg,XR=_u&&_u.exports===VC,zC=XR&&qR.process,cs=function(){try{var J=_u&&_u.require&&_u.require("util").types;return J||zC&&zC.binding&&zC.binding("util")}catch{}}(),YR=cs&&cs.isArrayBuffer,ZR=cs&&cs.isDate,KR=cs&&cs.isMap,JR=cs&&cs.isRegExp,QR=cs&&cs.isSet,eP=cs&&cs.isTypedArray;function Fo(J,we,he){switch(he.length){case 0:return J.call(we);case 1:return J.call(we,he[0]);case 2:return J.call(we,he[0],he[1]);case 3:return J.call(we,he[0],he[1],he[2])}return J.apply(we,he)}function Ij(J,we,he,ct){for(var Gt=-1,Nn=J==null?0:J.length;++Gt<Nn;){var Xi=J[Gt];we(ct,Xi,he(Xi),J)}return ct}function us(J,we){for(var he=-1,ct=J==null?0:J.length;++he<ct&&we(J[he],he,J)!==!1;);return J}function Aj(J,we){for(var he=J==null?0:J.length;he--&&we(J[he],he,J)!==!1;);return J}function tP(J,we){for(var he=-1,ct=J==null?0:J.length;++he<ct;)if(!we(J[he],he,J))return!1;return!0}function Sc(J,we){for(var he=-1,ct=J==null?0:J.length,Gt=0,Nn=[];++he<ct;){var Xi=J[he];we(Xi,he,J)&&(Nn[Gt++]=Xi)}return Nn}function J0(J,we){var he=J==null?0:J.length;return!!he&&rf(J,we,0)>-1}function HC(J,we,he){for(var ct=-1,Gt=J==null?0:J.length;++ct<Gt;)if(he(we,J[ct]))return!0;return!1}function pi(J,we){for(var he=-1,ct=J==null?0:J.length,Gt=Array(ct);++he<ct;)Gt[he]=we(J[he],he,J);return Gt}function Ec(J,we){for(var he=-1,ct=we.length,Gt=J.length;++he<ct;)J[Gt+he]=we[he];return J}function jC(J,we,he,ct){var Gt=-1,Nn=J==null?0:J.length;for(ct&&Nn&&(he=J[++Gt]);++Gt<Nn;)he=we(he,J[Gt],Gt,J);return he}function Dj(J,we,he,ct){var Gt=J==null?0:J.length;for(ct&&Gt&&(he=J[--Gt]);Gt--;)he=we(he,J[Gt],Gt,J);return he}function GC(J,we){for(var he=-1,ct=J==null?0:J.length;++he<ct;)if(we(J[he],he,J))return!0;return!1}var Rj=WC("length");function Pj(J){return J.split("")}function Oj(J){return J.match(Cc)||[]}function nP(J,we,he){var ct;return he(J,function(Gt,Nn,Xi){if(we(Gt,Nn,Xi))return ct=Nn,!1}),ct}function Q0(J,we,he,ct){for(var Gt=J.length,Nn=he+(ct?1:-1);ct?Nn--:++Nn<Gt;)if(we(J[Nn],Nn,J))return Nn;return-1}function rf(J,we,he){return we===we?Wj(J,we,he):Q0(J,iP,he)}function Fj(J,we,he,ct){for(var Gt=he-1,Nn=J.length;++Gt<Nn;)if(ct(J[Gt],we))return Gt;return-1}function iP(J){return J!==J}function rP(J,we){var he=J==null?0:J.length;return he?qC(J,we)/he:X}function WC(J){return function(we){return we==null?n:we[J]}}function $C(J){return function(we){return J==null?n:J[we]}}function oP(J,we,he,ct,Gt){return Gt(J,function(Nn,Xi,Jn){he=ct?(ct=!1,Nn):we(he,Nn,Xi,Jn)}),he}function Nj(J,we){var he=J.length;for(J.sort(we);he--;)J[he]=J[he].value;return J}function qC(J,we){for(var he,ct=-1,Gt=J.length;++ct<Gt;){var Nn=we(J[ct]);Nn!==n&&(he=he===n?Nn:he+Nn)}return he}function XC(J,we){for(var he=-1,ct=Array(J);++he<J;)ct[he]=we(he);return ct}function Lj(J,we){return pi(we,function(he){return[he,J[he]]})}function sP(J){return J&&J.slice(0,uP(J)+1).replace(yu,"")}function No(J){return function(we){return J(we)}}function YC(J,we){return pi(we,function(he){return J[he]})}function Tp(J,we){return J.has(we)}function aP(J,we){for(var he=-1,ct=J.length;++he<ct&&rf(we,J[he],0)>-1;);return he}function lP(J,we){for(var he=J.length;he--&&rf(we,J[he],0)>-1;);return he}function kj(J,we){for(var he=J.length,ct=0;he--;)J[he]===we&&++ct;return ct}var Uj=$C(wj),Bj=$C(bj);function Vj(J){return"\\"+Sj[J]}function zj(J,we){return J==null?n:J[we]}function of(J){return vj.test(J)}function Hj(J){return yj.test(J)}function jj(J){for(var we,he=[];!(we=J.next()).done;)he.push(we.value);return he}function ZC(J){var we=-1,he=Array(J.size);return J.forEach(function(ct,Gt){he[++we]=[Gt,ct]}),he}function cP(J,we){return function(he){return J(we(he))}}function Mc(J,we){for(var he=-1,ct=J.length,Gt=0,Nn=[];++he<ct;){var Xi=J[he];(Xi===we||Xi===l)&&(J[he]=l,Nn[Gt++]=he)}return Nn}function ev(J){var we=-1,he=Array(J.size);return J.forEach(function(ct){he[++we]=ct}),he}function Gj(J){var we=-1,he=Array(J.size);return J.forEach(function(ct){he[++we]=[ct,ct]}),he}function Wj(J,we,he){for(var ct=he-1,Gt=J.length;++ct<Gt;)if(J[ct]===we)return ct;return-1}function $j(J,we,he){for(var ct=he+1;ct--;)if(J[ct]===we)return ct;return ct}function sf(J){return of(J)?Xj(J):Rj(J)}function $s(J){return of(J)?Yj(J):Pj(J)}function uP(J){for(var we=J.length;we--&&Fa.test(J.charAt(we)););return we}var qj=$C(Cj);function Xj(J){for(var we=BC.lastIndex=0;BC.test(J);)++we;return we}function Yj(J){return J.match(BC)||[]}function Zj(J){return J.match(gj)||[]}var Kj=function J(we){we=we==null?sr:Tc.defaults(sr.Object(),we,Tc.pick(sr,_j));var he=we.Array,ct=we.Date,Gt=we.Error,Nn=we.Function,Xi=we.Math,Jn=we.Object,KC=we.RegExp,Jj=we.String,ds=we.TypeError,tv=he.prototype,Qj=Nn.prototype,af=Jn.prototype,nv=we["__core-js_shared__"],iv=Qj.toString,Gn=af.hasOwnProperty,e8=0,dP=function(){var c=/[^.]+$/.exec(nv&&nv.keys&&nv.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),rv=af.toString,t8=iv.call(Jn),n8=sr._,i8=KC("^"+iv.call(Gn).replace(or,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ov=XR?we.Buffer:n,Ic=we.Symbol,sv=we.Uint8Array,fP=ov?ov.allocUnsafe:n,av=cP(Jn.getPrototypeOf,Jn),hP=Jn.create,pP=af.propertyIsEnumerable,lv=tv.splice,mP=Ic?Ic.isConcatSpreadable:n,Ip=Ic?Ic.iterator:n,xu=Ic?Ic.toStringTag:n,cv=function(){try{var c=Eu(Jn,"defineProperty");return c({},"",{}),c}catch{}}(),r8=we.clearTimeout!==sr.clearTimeout&&we.clearTimeout,o8=ct&&ct.now!==sr.Date.now&&ct.now,s8=we.setTimeout!==sr.setTimeout&&we.setTimeout,uv=Xi.ceil,dv=Xi.floor,JC=Jn.getOwnPropertySymbols,a8=ov?ov.isBuffer:n,gP=we.isFinite,l8=tv.join,c8=cP(Jn.keys,Jn),Yi=Xi.max,Ir=Xi.min,u8=ct.now,d8=we.parseInt,vP=Xi.random,f8=tv.reverse,QC=Eu(we,"DataView"),Ap=Eu(we,"Map"),eS=Eu(we,"Promise"),lf=Eu(we,"Set"),Dp=Eu(we,"WeakMap"),Rp=Eu(Jn,"create"),fv=Dp&&new Dp,cf={},h8=Mu(QC),p8=Mu(Ap),m8=Mu(eS),g8=Mu(lf),v8=Mu(Dp),hv=Ic?Ic.prototype:n,Pp=hv?hv.valueOf:n,yP=hv?hv.toString:n;function T(c){if(Ai(c)&&!qt(c)&&!(c instanceof yn)){if(c instanceof fs)return c;if(Gn.call(c,"__wrapped__"))return _4(c)}return new fs(c)}var uf=function(){function c(){}return function(d){if(!bi(d))return{};if(hP)return hP(d);c.prototype=d;var m=new c;return c.prototype=n,m}}();function pv(){}function fs(c,d){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}T.templateSettings={escape:it,evaluate:Je,interpolate:Lt,variable:"",imports:{_:T}},T.prototype=pv.prototype,T.prototype.constructor=T,fs.prototype=uf(pv.prototype),fs.prototype.constructor=fs;function yn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function y8(){var c=new yn(this.__wrapped__);return c.__actions__=no(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=no(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=no(this.__views__),c}function _8(){if(this.__filtered__){var c=new yn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function x8(){var c=this.__wrapped__.value(),d=this.__dir__,m=qt(c),w=d<0,b=m?c.length:0,P=PG(0,b,this.__views__),U=P.start,G=P.end,ne=G-U,Se=w?G:U-1,Ee=this.__iteratees__,Fe=Ee.length,tt=0,vt=Ir(ne,this.__takeCount__);if(!m||!w&&b==ne&&vt==ne)return HP(c,this.__actions__);var Pt=[];e:for(;ne--&&tt<vt;){Se+=d;for(var rn=-1,Ot=c[Se];++rn<Fe;){var fn=Ee[rn],wn=fn.iteratee,Uo=fn.type,zr=wn(Ot);if(Uo==ue)Ot=zr;else if(!zr){if(Uo==me)continue e;break e}}Pt[tt++]=Ot}return Pt}yn.prototype=uf(pv.prototype),yn.prototype.constructor=yn;function wu(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var w=c[d];this.set(w[0],w[1])}}function w8(){this.__data__=Rp?Rp(null):{},this.size=0}function b8(c){var d=this.has(c)&&delete this.__data__[c];return this.size-=d?1:0,d}function C8(c){var d=this.__data__;if(Rp){var m=d[c];return m===s?n:m}return Gn.call(d,c)?d[c]:n}function S8(c){var d=this.__data__;return Rp?d[c]!==n:Gn.call(d,c)}function E8(c,d){var m=this.__data__;return this.size+=this.has(c)?0:1,m[c]=Rp&&d===n?s:d,this}wu.prototype.clear=w8,wu.prototype.delete=b8,wu.prototype.get=C8,wu.prototype.has=S8,wu.prototype.set=E8;function gl(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var w=c[d];this.set(w[0],w[1])}}function M8(){this.__data__=[],this.size=0}function T8(c){var d=this.__data__,m=mv(d,c);if(m<0)return!1;var w=d.length-1;return m==w?d.pop():lv.call(d,m,1),--this.size,!0}function I8(c){var d=this.__data__,m=mv(d,c);return m<0?n:d[m][1]}function A8(c){return mv(this.__data__,c)>-1}function D8(c,d){var m=this.__data__,w=mv(m,c);return w<0?(++this.size,m.push([c,d])):m[w][1]=d,this}gl.prototype.clear=M8,gl.prototype.delete=T8,gl.prototype.get=I8,gl.prototype.has=A8,gl.prototype.set=D8;function vl(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var w=c[d];this.set(w[0],w[1])}}function R8(){this.size=0,this.__data__={hash:new wu,map:new(Ap||gl),string:new wu}}function P8(c){var d=Tv(this,c).delete(c);return this.size-=d?1:0,d}function O8(c){return Tv(this,c).get(c)}function F8(c){return Tv(this,c).has(c)}function N8(c,d){var m=Tv(this,c),w=m.size;return m.set(c,d),this.size+=m.size==w?0:1,this}vl.prototype.clear=R8,vl.prototype.delete=P8,vl.prototype.get=O8,vl.prototype.has=F8,vl.prototype.set=N8;function bu(c){var d=-1,m=c==null?0:c.length;for(this.__data__=new vl;++d<m;)this.add(c[d])}function L8(c){return this.__data__.set(c,s),this}function k8(c){return this.__data__.has(c)}bu.prototype.add=bu.prototype.push=L8,bu.prototype.has=k8;function qs(c){var d=this.__data__=new gl(c);this.size=d.size}function U8(){this.__data__=new gl,this.size=0}function B8(c){var d=this.__data__,m=d.delete(c);return this.size=d.size,m}function V8(c){return this.__data__.get(c)}function z8(c){return this.__data__.has(c)}function H8(c,d){var m=this.__data__;if(m instanceof gl){var w=m.__data__;if(!Ap||w.length<t-1)return w.push([c,d]),this.size=++m.size,this;m=this.__data__=new vl(w)}return m.set(c,d),this.size=m.size,this}qs.prototype.clear=U8,qs.prototype.delete=B8,qs.prototype.get=V8,qs.prototype.has=z8,qs.prototype.set=H8;function _P(c,d){var m=qt(c),w=!m&&Tu(c),b=!m&&!w&&Oc(c),P=!m&&!w&&!b&&pf(c),U=m||w||b||P,G=U?XC(c.length,Jj):[],ne=G.length;for(var Se in c)(d||Gn.call(c,Se))&&!(U&&(Se=="length"||b&&(Se=="offset"||Se=="parent")||P&&(Se=="buffer"||Se=="byteLength"||Se=="byteOffset")||wl(Se,ne)))&&G.push(Se);return G}function xP(c){var d=c.length;return d?c[dS(0,d-1)]:n}function j8(c,d){return Iv(no(c),Cu(d,0,c.length))}function G8(c){return Iv(no(c))}function tS(c,d,m){(m!==n&&!Xs(c[d],m)||m===n&&!(d in c))&&yl(c,d,m)}function Op(c,d,m){var w=c[d];(!(Gn.call(c,d)&&Xs(w,m))||m===n&&!(d in c))&&yl(c,d,m)}function mv(c,d){for(var m=c.length;m--;)if(Xs(c[m][0],d))return m;return-1}function W8(c,d,m,w){return Ac(c,function(b,P,U){d(w,b,m(b),U)}),w}function wP(c,d){return c&&ka(d,ar(d),c)}function $8(c,d){return c&&ka(d,ro(d),c)}function yl(c,d,m){d=="__proto__"&&cv?cv(c,d,{configurable:!0,enumerable:!0,value:m,writable:!0}):c[d]=m}function nS(c,d){for(var m=-1,w=d.length,b=he(w),P=c==null;++m<w;)b[m]=P?n:LS(c,d[m]);return b}function Cu(c,d,m){return c===c&&(m!==n&&(c=c<=m?c:m),d!==n&&(c=c>=d?c:d)),c}function hs(c,d,m,w,b,P){var U,G=d&u,ne=d&f,Se=d&h;if(m&&(U=b?m(c,w,b,P):m(c)),U!==n)return U;if(!bi(c))return c;var Ee=qt(c);if(Ee){if(U=FG(c),!G)return no(c,U)}else{var Fe=Ar(c),tt=Fe==Ue||Fe==at;if(Oc(c))return WP(c,G);if(Fe==Yt||Fe==oe||tt&&!b){if(U=ne||tt?{}:u4(c),!G)return ne?CG(c,$8(U,c)):bG(c,wP(U,c))}else{if(!oi[Fe])return b?c:{};U=NG(c,Fe,G)}}P||(P=new qs);var vt=P.get(c);if(vt)return vt;P.set(c,U),B4(c)?c.forEach(function(Ot){U.add(hs(Ot,d,m,Ot,c,P))}):k4(c)&&c.forEach(function(Ot,fn){U.set(fn,hs(Ot,d,m,fn,c,P))});var Pt=Se?ne?bS:wS:ne?ro:ar,rn=Ee?n:Pt(c);return us(rn||c,function(Ot,fn){rn&&(fn=Ot,Ot=c[fn]),Op(U,fn,hs(Ot,d,m,fn,c,P))}),U}function q8(c){var d=ar(c);return function(m){return bP(m,c,d)}}function bP(c,d,m){var w=m.length;if(c==null)return!w;for(c=Jn(c);w--;){var b=m[w],P=d[b],U=c[b];if(U===n&&!(b in c)||!P(U))return!1}return!0}function CP(c,d,m){if(typeof c!="function")throw new ds(r);return Vp(function(){c.apply(n,m)},d)}function Fp(c,d,m,w){var b=-1,P=J0,U=!0,G=c.length,ne=[],Se=d.length;if(!G)return ne;m&&(d=pi(d,No(m))),w?(P=HC,U=!1):d.length>=t&&(P=Tp,U=!1,d=new bu(d));e:for(;++b<G;){var Ee=c[b],Fe=m==null?Ee:m(Ee);if(Ee=w||Ee!==0?Ee:0,U&&Fe===Fe){for(var tt=Se;tt--;)if(d[tt]===Fe)continue e;ne.push(Ee)}else P(d,Fe,w)||ne.push(Ee)}return ne}var Ac=ZP(La),SP=ZP(rS,!0);function X8(c,d){var m=!0;return Ac(c,function(w,b,P){return m=!!d(w,b,P),m}),m}function gv(c,d,m){for(var w=-1,b=c.length;++w<b;){var P=c[w],U=d(P);if(U!=null&&(G===n?U===U&&!ko(U):m(U,G)))var G=U,ne=P}return ne}function Y8(c,d,m,w){var b=c.length;for(m=Qt(m),m<0&&(m=-m>b?0:b+m),w=w===n||w>b?b:Qt(w),w<0&&(w+=b),w=m>w?0:z4(w);m<w;)c[m++]=d;return c}function EP(c,d){var m=[];return Ac(c,function(w,b,P){d(w,b,P)&&m.push(w)}),m}function pr(c,d,m,w,b){var P=-1,U=c.length;for(m||(m=kG),b||(b=[]);++P<U;){var G=c[P];d>0&&m(G)?d>1?pr(G,d-1,m,w,b):Ec(b,G):w||(b[b.length]=G)}return b}var iS=KP(),MP=KP(!0);function La(c,d){return c&&iS(c,d,ar)}function rS(c,d){return c&&MP(c,d,ar)}function vv(c,d){return Sc(d,function(m){return bl(c[m])})}function Su(c,d){d=Rc(d,c);for(var m=0,w=d.length;c!=null&&m<w;)c=c[Ua(d[m++])];return m&&m==w?c:n}function TP(c,d,m){var w=d(c);return qt(c)?w:Ec(w,m(c))}function Br(c){return c==null?c===n?M:H:xu&&xu in Jn(c)?RG(c):GG(c)}function oS(c,d){return c>d}function Z8(c,d){return c!=null&&Gn.call(c,d)}function K8(c,d){return c!=null&&d in Jn(c)}function J8(c,d,m){return c>=Ir(d,m)&&c<Yi(d,m)}function sS(c,d,m){for(var w=m?HC:J0,b=c[0].length,P=c.length,U=P,G=he(P),ne=1/0,Se=[];U--;){var Ee=c[U];U&&d&&(Ee=pi(Ee,No(d))),ne=Ir(Ee.length,ne),G[U]=!m&&(d||b>=120&&Ee.length>=120)?new bu(U&&Ee):n}Ee=c[0];var Fe=-1,tt=G[0];e:for(;++Fe<b&&Se.length<ne;){var vt=Ee[Fe],Pt=d?d(vt):vt;if(vt=m||vt!==0?vt:0,!(tt?Tp(tt,Pt):w(Se,Pt,m))){for(U=P;--U;){var rn=G[U];if(!(rn?Tp(rn,Pt):w(c[U],Pt,m)))continue e}tt&&tt.push(Pt),Se.push(vt)}}return Se}function Q8(c,d,m,w){return La(c,function(b,P,U){d(w,m(b),P,U)}),w}function Np(c,d,m){d=Rc(d,c),c=p4(c,d);var w=c==null?c:c[Ua(ms(d))];return w==null?n:Fo(w,c,m)}function IP(c){return Ai(c)&&Br(c)==oe}function eG(c){return Ai(c)&&Br(c)==Re}function tG(c){return Ai(c)&&Br(c)==le}function Lp(c,d,m,w,b){return c===d?!0:c==null||d==null||!Ai(c)&&!Ai(d)?c!==c&&d!==d:nG(c,d,m,w,Lp,b)}function nG(c,d,m,w,b,P){var U=qt(c),G=qt(d),ne=U?B:Ar(c),Se=G?B:Ar(d);ne=ne==oe?Yt:ne,Se=Se==oe?Yt:Se;var Ee=ne==Yt,Fe=Se==Yt,tt=ne==Se;if(tt&&Oc(c)){if(!Oc(d))return!1;U=!0,Ee=!1}if(tt&&!Ee)return P||(P=new qs),U||pf(c)?a4(c,d,m,w,b,P):AG(c,d,ne,m,w,b,P);if(!(m&p)){var vt=Ee&&Gn.call(c,"__wrapped__"),Pt=Fe&&Gn.call(d,"__wrapped__");if(vt||Pt){var rn=vt?c.value():c,Ot=Pt?d.value():d;return P||(P=new qs),b(rn,Ot,m,w,P)}}return tt?(P||(P=new qs),DG(c,d,m,w,b,P)):!1}function iG(c){return Ai(c)&&Ar(c)==gt}function aS(c,d,m,w){var b=m.length,P=b,U=!w;if(c==null)return!P;for(c=Jn(c);b--;){var G=m[b];if(U&&G[2]?G[1]!==c[G[0]]:!(G[0]in c))return!1}for(;++b<P;){G=m[b];var ne=G[0],Se=c[ne],Ee=G[1];if(U&&G[2]){if(Se===n&&!(ne in c))return!1}else{var Fe=new qs;if(w)var tt=w(Se,Ee,ne,c,d,Fe);if(!(tt===n?Lp(Ee,Se,p|g,w,Fe):tt))return!1}}return!0}function AP(c){if(!bi(c)||BG(c))return!1;var d=bl(c)?i8:NC;return d.test(Mu(c))}function rG(c){return Ai(c)&&Br(c)==Ke}function oG(c){return Ai(c)&&Ar(c)==Ht}function sG(c){return Ai(c)&&Fv(c.length)&&!!fi[Br(c)]}function DP(c){return typeof c=="function"?c:c==null?oo:typeof c=="object"?qt(c)?OP(c[0],c[1]):PP(c):J4(c)}function lS(c){if(!Bp(c))return c8(c);var d=[];for(var m in Jn(c))Gn.call(c,m)&&m!="constructor"&&d.push(m);return d}function aG(c){if(!bi(c))return jG(c);var d=Bp(c),m=[];for(var w in c)w=="constructor"&&(d||!Gn.call(c,w))||m.push(w);return m}function cS(c,d){return c<d}function RP(c,d){var m=-1,w=io(c)?he(c.length):[];return Ac(c,function(b,P,U){w[++m]=d(b,P,U)}),w}function PP(c){var d=SS(c);return d.length==1&&d[0][2]?f4(d[0][0],d[0][1]):function(m){return m===c||aS(m,c,d)}}function OP(c,d){return MS(c)&&d4(d)?f4(Ua(c),d):function(m){var w=LS(m,c);return w===n&&w===d?kS(m,c):Lp(d,w,p|g)}}function yv(c,d,m,w,b){c!==d&&iS(d,function(P,U){if(b||(b=new qs),bi(P))lG(c,d,U,m,yv,w,b);else{var G=w?w(IS(c,U),P,U+"",c,d,b):n;G===n&&(G=P),tS(c,U,G)}},ro)}function lG(c,d,m,w,b,P,U){var G=IS(c,m),ne=IS(d,m),Se=U.get(ne);if(Se){tS(c,m,Se);return}var Ee=P?P(G,ne,m+"",c,d,U):n,Fe=Ee===n;if(Fe){var tt=qt(ne),vt=!tt&&Oc(ne),Pt=!tt&&!vt&&pf(ne);Ee=ne,tt||vt||Pt?qt(G)?Ee=G:Ni(G)?Ee=no(G):vt?(Fe=!1,Ee=WP(ne,!0)):Pt?(Fe=!1,Ee=$P(ne,!0)):Ee=[]:zp(ne)||Tu(ne)?(Ee=G,Tu(G)?Ee=H4(G):(!bi(G)||bl(G))&&(Ee=u4(ne))):Fe=!1}Fe&&(U.set(ne,Ee),b(Ee,ne,w,P,U),U.delete(ne)),tS(c,m,Ee)}function FP(c,d){var m=c.length;if(m)return d+=d<0?m:0,wl(d,m)?c[d]:n}function NP(c,d,m){d.length?d=pi(d,function(P){return qt(P)?function(U){return Su(U,P.length===1?P[0]:P)}:P}):d=[oo];var w=-1;d=pi(d,No(It()));var b=RP(c,function(P,U,G){var ne=pi(d,function(Se){return Se(P)});return{criteria:ne,index:++w,value:P}});return Nj(b,function(P,U){return wG(P,U,m)})}function cG(c,d){return LP(c,d,function(m,w){return kS(c,w)})}function LP(c,d,m){for(var w=-1,b=d.length,P={};++w<b;){var U=d[w],G=Su(c,U);m(G,U)&&kp(P,Rc(U,c),G)}return P}function uG(c){return function(d){return Su(d,c)}}function uS(c,d,m,w){var b=w?Fj:rf,P=-1,U=d.length,G=c;for(c===d&&(d=no(d)),m&&(G=pi(c,No(m)));++P<U;)for(var ne=0,Se=d[P],Ee=m?m(Se):Se;(ne=b(G,Ee,ne,w))>-1;)G!==c&&lv.call(G,ne,1),lv.call(c,ne,1);return c}function kP(c,d){for(var m=c?d.length:0,w=m-1;m--;){var b=d[m];if(m==w||b!==P){var P=b;wl(b)?lv.call(c,b,1):pS(c,b)}}return c}function dS(c,d){return c+dv(vP()*(d-c+1))}function dG(c,d,m,w){for(var b=-1,P=Yi(uv((d-c)/(m||1)),0),U=he(P);P--;)U[w?P:++b]=c,c+=m;return U}function fS(c,d){var m="";if(!c||d<1||d>Y)return m;do d%2&&(m+=c),d=dv(d/2),d&&(c+=c);while(d);return m}function cn(c,d){return AS(h4(c,d,oo),c+"")}function fG(c){return xP(mf(c))}function hG(c,d){var m=mf(c);return Iv(m,Cu(d,0,m.length))}function kp(c,d,m,w){if(!bi(c))return c;d=Rc(d,c);for(var b=-1,P=d.length,U=P-1,G=c;G!=null&&++b<P;){var ne=Ua(d[b]),Se=m;if(ne==="__proto__"||ne==="constructor"||ne==="prototype")return c;if(b!=U){var Ee=G[ne];Se=w?w(Ee,ne,G):n,Se===n&&(Se=bi(Ee)?Ee:wl(d[b+1])?[]:{})}Op(G,ne,Se),G=G[ne]}return c}var UP=fv?function(c,d){return fv.set(c,d),c}:oo,pG=cv?function(c,d){return cv(c,"toString",{configurable:!0,enumerable:!1,value:BS(d),writable:!0})}:oo;function mG(c){return Iv(mf(c))}function ps(c,d,m){var w=-1,b=c.length;d<0&&(d=-d>b?0:b+d),m=m>b?b:m,m<0&&(m+=b),b=d>m?0:m-d>>>0,d>>>=0;for(var P=he(b);++w<b;)P[w]=c[w+d];return P}function gG(c,d){var m;return Ac(c,function(w,b,P){return m=d(w,b,P),!m}),!!m}function _v(c,d,m){var w=0,b=c==null?w:c.length;if(typeof d=="number"&&d===d&&b<=rt){for(;w<b;){var P=w+b>>>1,U=c[P];U!==null&&!ko(U)&&(m?U<=d:U<d)?w=P+1:b=P}return b}return hS(c,d,oo,m)}function hS(c,d,m,w){var b=0,P=c==null?0:c.length;if(P===0)return 0;d=m(d);for(var U=d!==d,G=d===null,ne=ko(d),Se=d===n;b<P;){var Ee=dv((b+P)/2),Fe=m(c[Ee]),tt=Fe!==n,vt=Fe===null,Pt=Fe===Fe,rn=ko(Fe);if(U)var Ot=w||Pt;else Se?Ot=Pt&&(w||tt):G?Ot=Pt&&tt&&(w||!vt):ne?Ot=Pt&&tt&&!vt&&(w||!rn):vt||rn?Ot=!1:Ot=w?Fe<=d:Fe<d;Ot?b=Ee+1:P=Ee}return Ir(P,ze)}function BP(c,d){for(var m=-1,w=c.length,b=0,P=[];++m<w;){var U=c[m],G=d?d(U):U;if(!m||!Xs(G,ne)){var ne=G;P[b++]=U===0?0:U}}return P}function VP(c){return typeof c=="number"?c:ko(c)?X:+c}function Lo(c){if(typeof c=="string")return c;if(qt(c))return pi(c,Lo)+"";if(ko(c))return yP?yP.call(c):"";var d=c+"";return d=="0"&&1/c==-Ce?"-0":d}function Dc(c,d,m){var w=-1,b=J0,P=c.length,U=!0,G=[],ne=G;if(m)U=!1,b=HC;else if(P>=t){var Se=d?null:TG(c);if(Se)return ev(Se);U=!1,b=Tp,ne=new bu}else ne=d?[]:G;e:for(;++w<P;){var Ee=c[w],Fe=d?d(Ee):Ee;if(Ee=m||Ee!==0?Ee:0,U&&Fe===Fe){for(var tt=ne.length;tt--;)if(ne[tt]===Fe)continue e;d&&ne.push(Fe),G.push(Ee)}else b(ne,Fe,m)||(ne!==G&&ne.push(Fe),G.push(Ee))}return G}function pS(c,d){return d=Rc(d,c),c=p4(c,d),c==null||delete c[Ua(ms(d))]}function zP(c,d,m,w){return kp(c,d,m(Su(c,d)),w)}function xv(c,d,m,w){for(var b=c.length,P=w?b:-1;(w?P--:++P<b)&&d(c[P],P,c););return m?ps(c,w?0:P,w?P+1:b):ps(c,w?P+1:0,w?b:P)}function HP(c,d){var m=c;return m instanceof yn&&(m=m.value()),jC(d,function(w,b){return b.func.apply(b.thisArg,Ec([w],b.args))},m)}function mS(c,d,m){var w=c.length;if(w<2)return w?Dc(c[0]):[];for(var b=-1,P=he(w);++b<w;)for(var U=c[b],G=-1;++G<w;)G!=b&&(P[b]=Fp(P[b]||U,c[G],d,m));return Dc(pr(P,1),d,m)}function jP(c,d,m){for(var w=-1,b=c.length,P=d.length,U={};++w<b;){var G=w<P?d[w]:n;m(U,c[w],G)}return U}function gS(c){return Ni(c)?c:[]}function vS(c){return typeof c=="function"?c:oo}function Rc(c,d){return qt(c)?c:MS(c,d)?[c]:y4(Vn(c))}var vG=cn;function Pc(c,d,m){var w=c.length;return m=m===n?w:m,!d&&m>=w?c:ps(c,d,m)}var GP=r8||function(c){return sr.clearTimeout(c)};function WP(c,d){if(d)return c.slice();var m=c.length,w=fP?fP(m):new c.constructor(m);return c.copy(w),w}function yS(c){var d=new c.constructor(c.byteLength);return new sv(d).set(new sv(c)),d}function yG(c,d){var m=d?yS(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.byteLength)}function _G(c){var d=new c.constructor(c.source,Mp.exec(c));return d.lastIndex=c.lastIndex,d}function xG(c){return Pp?Jn(Pp.call(c)):{}}function $P(c,d){var m=d?yS(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.length)}function qP(c,d){if(c!==d){var m=c!==n,w=c===null,b=c===c,P=ko(c),U=d!==n,G=d===null,ne=d===d,Se=ko(d);if(!G&&!Se&&!P&&c>d||P&&U&&ne&&!G&&!Se||w&&U&&ne||!m&&ne||!b)return 1;if(!w&&!P&&!Se&&c<d||Se&&m&&b&&!w&&!P||G&&m&&b||!U&&b||!ne)return-1}return 0}function wG(c,d,m){for(var w=-1,b=c.criteria,P=d.criteria,U=b.length,G=m.length;++w<U;){var ne=qP(b[w],P[w]);if(ne){if(w>=G)return ne;var Se=m[w];return ne*(Se=="desc"?-1:1)}}return c.index-d.index}function XP(c,d,m,w){for(var b=-1,P=c.length,U=m.length,G=-1,ne=d.length,Se=Yi(P-U,0),Ee=he(ne+Se),Fe=!w;++G<ne;)Ee[G]=d[G];for(;++b<U;)(Fe||b<P)&&(Ee[m[b]]=c[b]);for(;Se--;)Ee[G++]=c[b++];return Ee}function YP(c,d,m,w){for(var b=-1,P=c.length,U=-1,G=m.length,ne=-1,Se=d.length,Ee=Yi(P-G,0),Fe=he(Ee+Se),tt=!w;++b<Ee;)Fe[b]=c[b];for(var vt=b;++ne<Se;)Fe[vt+ne]=d[ne];for(;++U<G;)(tt||b<P)&&(Fe[vt+m[U]]=c[b++]);return Fe}function no(c,d){var m=-1,w=c.length;for(d||(d=he(w));++m<w;)d[m]=c[m];return d}function ka(c,d,m,w){var b=!m;m||(m={});for(var P=-1,U=d.length;++P<U;){var G=d[P],ne=w?w(m[G],c[G],G,m,c):n;ne===n&&(ne=c[G]),b?yl(m,G,ne):Op(m,G,ne)}return m}function bG(c,d){return ka(c,ES(c),d)}function CG(c,d){return ka(c,l4(c),d)}function wv(c,d){return function(m,w){var b=qt(m)?Ij:W8,P=d?d():{};return b(m,c,It(w,2),P)}}function df(c){return cn(function(d,m){var w=-1,b=m.length,P=b>1?m[b-1]:n,U=b>2?m[2]:n;for(P=c.length>3&&typeof P=="function"?(b--,P):n,U&&Vr(m[0],m[1],U)&&(P=b<3?n:P,b=1),d=Jn(d);++w<b;){var G=m[w];G&&c(d,G,w,P)}return d})}function ZP(c,d){return function(m,w){if(m==null)return m;if(!io(m))return c(m,w);for(var b=m.length,P=d?b:-1,U=Jn(m);(d?P--:++P<b)&&w(U[P],P,U)!==!1;);return m}}function KP(c){return function(d,m,w){for(var b=-1,P=Jn(d),U=w(d),G=U.length;G--;){var ne=U[c?G:++b];if(m(P[ne],ne,P)===!1)break}return d}}function SG(c,d,m){var w=d&v,b=Up(c);function P(){var U=this&&this!==sr&&this instanceof P?b:c;return U.apply(w?m:this,arguments)}return P}function JP(c){return function(d){d=Vn(d);var m=of(d)?$s(d):n,w=m?m[0]:d.charAt(0),b=m?Pc(m,1).join(""):d.slice(1);return w[c]()+b}}function ff(c){return function(d){return jC(Z4(Y4(d).replace(pj,"")),c,"")}}function Up(c){return function(){var d=arguments;switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3]);case 5:return new c(d[0],d[1],d[2],d[3],d[4]);case 6:return new c(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new c(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var m=uf(c.prototype),w=c.apply(m,d);return bi(w)?w:m}}function EG(c,d,m){var w=Up(c);function b(){for(var P=arguments.length,U=he(P),G=P,ne=hf(b);G--;)U[G]=arguments[G];var Se=P<3&&U[0]!==ne&&U[P-1]!==ne?[]:Mc(U,ne);if(P-=Se.length,P<m)return i4(c,d,bv,b.placeholder,n,U,Se,n,n,m-P);var Ee=this&&this!==sr&&this instanceof b?w:c;return Fo(Ee,this,U)}return b}function QP(c){return function(d,m,w){var b=Jn(d);if(!io(d)){var P=It(m,3);d=ar(d),m=function(G){return P(b[G],G,b)}}var U=c(d,m,w);return U>-1?b[P?d[U]:U]:n}}function e4(c){return xl(function(d){var m=d.length,w=m,b=fs.prototype.thru;for(c&&d.reverse();w--;){var P=d[w];if(typeof P!="function")throw new ds(r);if(b&&!U&&Mv(P)=="wrapper")var U=new fs([],!0)}for(w=U?w:m;++w<m;){P=d[w];var G=Mv(P),ne=G=="wrapper"?CS(P):n;ne&&TS(ne[0])&&ne[1]==(k|_|S|F)&&!ne[4].length&&ne[9]==1?U=U[Mv(ne[0])].apply(U,ne[3]):U=P.length==1&&TS(P)?U[G]():U.thru(P)}return function(){var Se=arguments,Ee=Se[0];if(U&&Se.length==1&&qt(Ee))return U.plant(Ee).value();for(var Fe=0,tt=m?d[Fe].apply(this,Se):Ee;++Fe<m;)tt=d[Fe].call(this,tt);return tt}})}function bv(c,d,m,w,b,P,U,G,ne,Se){var Ee=d&k,Fe=d&v,tt=d&x,vt=d&(_|E),Pt=d&L,rn=tt?n:Up(c);function Ot(){for(var fn=arguments.length,wn=he(fn),Uo=fn;Uo--;)wn[Uo]=arguments[Uo];if(vt)var zr=hf(Ot),Bo=kj(wn,zr);if(w&&(wn=XP(wn,w,b,vt)),P&&(wn=YP(wn,P,U,vt)),fn-=Bo,vt&&fn<Se){var Li=Mc(wn,zr);return i4(c,d,bv,Ot.placeholder,m,wn,Li,G,ne,Se-fn)}var Ys=Fe?m:this,Sl=tt?Ys[c]:c;return fn=wn.length,G?wn=WG(wn,G):Pt&&fn>1&&wn.reverse(),Ee&&ne<fn&&(wn.length=ne),this&&this!==sr&&this instanceof Ot&&(Sl=rn||Up(Sl)),Sl.apply(Ys,wn)}return Ot}function t4(c,d){return function(m,w){return Q8(m,c,d(w),{})}}function Cv(c,d){return function(m,w){var b;if(m===n&&w===n)return d;if(m!==n&&(b=m),w!==n){if(b===n)return w;typeof m=="string"||typeof w=="string"?(m=Lo(m),w=Lo(w)):(m=VP(m),w=VP(w)),b=c(m,w)}return b}}function _S(c){return xl(function(d){return d=pi(d,No(It())),cn(function(m){var w=this;return c(d,function(b){return Fo(b,w,m)})})})}function Sv(c,d){d=d===n?" ":Lo(d);var m=d.length;if(m<2)return m?fS(d,c):d;var w=fS(d,uv(c/sf(d)));return of(d)?Pc($s(w),0,c).join(""):w.slice(0,c)}function MG(c,d,m,w){var b=d&v,P=Up(c);function U(){for(var G=-1,ne=arguments.length,Se=-1,Ee=w.length,Fe=he(Ee+ne),tt=this&&this!==sr&&this instanceof U?P:c;++Se<Ee;)Fe[Se]=w[Se];for(;ne--;)Fe[Se++]=arguments[++G];return Fo(tt,b?m:this,Fe)}return U}function n4(c){return function(d,m,w){return w&&typeof w!="number"&&Vr(d,m,w)&&(m=w=n),d=Cl(d),m===n?(m=d,d=0):m=Cl(m),w=w===n?d<m?1:-1:Cl(w),dG(d,m,w,c)}}function Ev(c){return function(d,m){return typeof d=="string"&&typeof m=="string"||(d=gs(d),m=gs(m)),c(d,m)}}function i4(c,d,m,w,b,P,U,G,ne,Se){var Ee=d&_,Fe=Ee?U:n,tt=Ee?n:U,vt=Ee?P:n,Pt=Ee?n:P;d|=Ee?S:C,d&=~(Ee?C:S),d&y||(d&=~(v|x));var rn=[c,d,b,vt,Fe,Pt,tt,G,ne,Se],Ot=m.apply(n,rn);return TS(c)&&m4(Ot,rn),Ot.placeholder=w,g4(Ot,c,d)}function xS(c){var d=Xi[c];return function(m,w){if(m=gs(m),w=w==null?0:Ir(Qt(w),292),w&&gP(m)){var b=(Vn(m)+"e").split("e"),P=d(b[0]+"e"+(+b[1]+w));return b=(Vn(P)+"e").split("e"),+(b[0]+"e"+(+b[1]-w))}return d(m)}}var TG=lf&&1/ev(new lf([,-0]))[1]==Ce?function(c){return new lf(c)}:HS;function r4(c){return function(d){var m=Ar(d);return m==gt?ZC(d):m==Ht?Gj(d):Lj(d,c(d))}}function _l(c,d,m,w,b,P,U,G){var ne=d&x;if(!ne&&typeof c!="function")throw new ds(r);var Se=w?w.length:0;if(Se||(d&=~(S|C),w=b=n),U=U===n?U:Yi(Qt(U),0),G=G===n?G:Qt(G),Se-=b?b.length:0,d&C){var Ee=w,Fe=b;w=b=n}var tt=ne?n:CS(c),vt=[c,d,m,w,b,Ee,Fe,P,U,G];if(tt&&HG(vt,tt),c=vt[0],d=vt[1],m=vt[2],w=vt[3],b=vt[4],G=vt[9]=vt[9]===n?ne?0:c.length:Yi(vt[9]-Se,0),!G&&d&(_|E)&&(d&=~(_|E)),!d||d==v)var Pt=SG(c,d,m);else d==_||d==E?Pt=EG(c,d,G):(d==S||d==(v|S))&&!b.length?Pt=MG(c,d,m,w):Pt=bv.apply(n,vt);var rn=tt?UP:m4;return g4(rn(Pt,vt),c,d)}function o4(c,d,m,w){return c===n||Xs(c,af[m])&&!Gn.call(w,m)?d:c}function s4(c,d,m,w,b,P){return bi(c)&&bi(d)&&(P.set(d,c),yv(c,d,n,s4,P),P.delete(d)),c}function IG(c){return zp(c)?n:c}function a4(c,d,m,w,b,P){var U=m&p,G=c.length,ne=d.length;if(G!=ne&&!(U&&ne>G))return!1;var Se=P.get(c),Ee=P.get(d);if(Se&&Ee)return Se==d&&Ee==c;var Fe=-1,tt=!0,vt=m&g?new bu:n;for(P.set(c,d),P.set(d,c);++Fe<G;){var Pt=c[Fe],rn=d[Fe];if(w)var Ot=U?w(rn,Pt,Fe,d,c,P):w(Pt,rn,Fe,c,d,P);if(Ot!==n){if(Ot)continue;tt=!1;break}if(vt){if(!GC(d,function(fn,wn){if(!Tp(vt,wn)&&(Pt===fn||b(Pt,fn,m,w,P)))return vt.push(wn)})){tt=!1;break}}else if(!(Pt===rn||b(Pt,rn,m,w,P))){tt=!1;break}}return P.delete(c),P.delete(d),tt}function AG(c,d,m,w,b,P,U){switch(m){case pe:if(c.byteLength!=d.byteLength||c.byteOffset!=d.byteOffset)return!1;c=c.buffer,d=d.buffer;case Re:return!(c.byteLength!=d.byteLength||!P(new sv(c),new sv(d)));case xe:case le:case ft:return Xs(+c,+d);case We:return c.name==d.name&&c.message==d.message;case Ke:case mt:return c==d+"";case gt:var G=ZC;case Ht:var ne=w&p;if(G||(G=ev),c.size!=d.size&&!ne)return!1;var Se=U.get(c);if(Se)return Se==d;w|=g,U.set(c,d);var Ee=a4(G(c),G(d),w,b,P,U);return U.delete(c),Ee;case N:if(Pp)return Pp.call(c)==Pp.call(d)}return!1}function DG(c,d,m,w,b,P){var U=m&p,G=wS(c),ne=G.length,Se=wS(d),Ee=Se.length;if(ne!=Ee&&!U)return!1;for(var Fe=ne;Fe--;){var tt=G[Fe];if(!(U?tt in d:Gn.call(d,tt)))return!1}var vt=P.get(c),Pt=P.get(d);if(vt&&Pt)return vt==d&&Pt==c;var rn=!0;P.set(c,d),P.set(d,c);for(var Ot=U;++Fe<ne;){tt=G[Fe];var fn=c[tt],wn=d[tt];if(w)var Uo=U?w(wn,fn,tt,d,c,P):w(fn,wn,tt,c,d,P);if(!(Uo===n?fn===wn||b(fn,wn,m,w,P):Uo)){rn=!1;break}Ot||(Ot=tt=="constructor")}if(rn&&!Ot){var zr=c.constructor,Bo=d.constructor;zr!=Bo&&"constructor"in c&&"constructor"in d&&!(typeof zr=="function"&&zr instanceof zr&&typeof Bo=="function"&&Bo instanceof Bo)&&(rn=!1)}return P.delete(c),P.delete(d),rn}function xl(c){return AS(h4(c,n,b4),c+"")}function wS(c){return TP(c,ar,ES)}function bS(c){return TP(c,ro,l4)}var CS=fv?function(c){return fv.get(c)}:HS;function Mv(c){for(var d=c.name+"",m=cf[d],w=Gn.call(cf,d)?m.length:0;w--;){var b=m[w],P=b.func;if(P==null||P==c)return b.name}return d}function hf(c){var d=Gn.call(T,"placeholder")?T:c;return d.placeholder}function It(){var c=T.iteratee||VS;return c=c===VS?DP:c,arguments.length?c(arguments[0],arguments[1]):c}function Tv(c,d){var m=c.__data__;return UG(d)?m[typeof d=="string"?"string":"hash"]:m.map}function SS(c){for(var d=ar(c),m=d.length;m--;){var w=d[m],b=c[w];d[m]=[w,b,d4(b)]}return d}function Eu(c,d){var m=zj(c,d);return AP(m)?m:n}function RG(c){var d=Gn.call(c,xu),m=c[xu];try{c[xu]=n;var w=!0}catch{}var b=rv.call(c);return w&&(d?c[xu]=m:delete c[xu]),b}var ES=JC?function(c){return c==null?[]:(c=Jn(c),Sc(JC(c),function(d){return pP.call(c,d)}))}:jS,l4=JC?function(c){for(var d=[];c;)Ec(d,ES(c)),c=av(c);return d}:jS,Ar=Br;(QC&&Ar(new QC(new ArrayBuffer(1)))!=pe||Ap&&Ar(new Ap)!=gt||eS&&Ar(eS.resolve())!=$e||lf&&Ar(new lf)!=Ht||Dp&&Ar(new Dp)!=se)&&(Ar=function(c){var d=Br(c),m=d==Yt?c.constructor:n,w=m?Mu(m):"";if(w)switch(w){case h8:return pe;case p8:return gt;case m8:return $e;case g8:return Ht;case v8:return se}return d});function PG(c,d,m){for(var w=-1,b=m.length;++w<b;){var P=m[w],U=P.size;switch(P.type){case"drop":c+=U;break;case"dropRight":d-=U;break;case"take":d=Ir(d,c+U);break;case"takeRight":c=Yi(c,d-U);break}}return{start:c,end:d}}function OG(c){var d=c.match(bc);return d?d[1].split(Ws):[]}function c4(c,d,m){d=Rc(d,c);for(var w=-1,b=d.length,P=!1;++w<b;){var U=Ua(d[w]);if(!(P=c!=null&&m(c,U)))break;c=c[U]}return P||++w!=b?P:(b=c==null?0:c.length,!!b&&Fv(b)&&wl(U,b)&&(qt(c)||Tu(c)))}function FG(c){var d=c.length,m=new c.constructor(d);return d&&typeof c[0]=="string"&&Gn.call(c,"index")&&(m.index=c.index,m.input=c.input),m}function u4(c){return typeof c.constructor=="function"&&!Bp(c)?uf(av(c)):{}}function NG(c,d,m){var w=c.constructor;switch(d){case Re:return yS(c);case xe:case le:return new w(+c);case pe:return yG(c,m);case Ye:case Ze:case xt:case bt:case Ne:case ot:case Ct:case Mt:case st:return $P(c,m);case gt:return new w;case ft:case mt:return new w(c);case Ke:return _G(c);case Ht:return new w;case N:return xG(c)}}function LG(c,d){var m=d.length;if(!m)return c;var w=m-1;return d[w]=(m>1?"& ":"")+d[w],d=d.join(m>2?", ":" "),c.replace(as,`{
/* [wrapped with `+d+`] */
`)}function kG(c){return qt(c)||Tu(c)||!!(mP&&c&&c[mP])}function wl(c,d){var m=typeof c;return d=d??Y,!!d&&(m=="number"||m!="symbol"&&kC.test(c))&&c>-1&&c%1==0&&c<d}function Vr(c,d,m){if(!bi(m))return!1;var w=typeof d;return(w=="number"?io(m)&&wl(d,m.length):w=="string"&&d in m)?Xs(m[d],c):!1}function MS(c,d){if(qt(c))return!1;var m=typeof c;return m=="number"||m=="symbol"||m=="boolean"||c==null||ko(c)?!0:Oi.test(c)||!Kn.test(c)||d!=null&&c in Jn(d)}function UG(c){var d=typeof c;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?c!=="__proto__":c===null}function TS(c){var d=Mv(c),m=T[d];if(typeof m!="function"||!(d in yn.prototype))return!1;if(c===m)return!0;var w=CS(m);return!!w&&c===w[0]}function BG(c){return!!dP&&dP in c}var VG=nv?bl:GS;function Bp(c){var d=c&&c.constructor,m=typeof d=="function"&&d.prototype||af;return c===m}function d4(c){return c===c&&!bi(c)}function f4(c,d){return function(m){return m==null?!1:m[c]===d&&(d!==n||c in Jn(m))}}function zG(c){var d=Pv(c,function(w){return m.size===a&&m.clear(),w}),m=d.cache;return d}function HG(c,d){var m=c[1],w=d[1],b=m|w,P=b<(v|x|k),U=w==k&&m==_||w==k&&m==F&&c[7].length<=d[8]||w==(k|F)&&d[7].length<=d[8]&&m==_;if(!(P||U))return c;w&v&&(c[2]=d[2],b|=m&v?0:y);var G=d[3];if(G){var ne=c[3];c[3]=ne?XP(ne,G,d[4]):G,c[4]=ne?Mc(c[3],l):d[4]}return G=d[5],G&&(ne=c[5],c[5]=ne?YP(ne,G,d[6]):G,c[6]=ne?Mc(c[5],l):d[6]),G=d[7],G&&(c[7]=G),w&k&&(c[8]=c[8]==null?d[8]:Ir(c[8],d[8])),c[9]==null&&(c[9]=d[9]),c[0]=d[0],c[1]=b,c}function jG(c){var d=[];if(c!=null)for(var m in Jn(c))d.push(m);return d}function GG(c){return rv.call(c)}function h4(c,d,m){return d=Yi(d===n?c.length-1:d,0),function(){for(var w=arguments,b=-1,P=Yi(w.length-d,0),U=he(P);++b<P;)U[b]=w[d+b];b=-1;for(var G=he(d+1);++b<d;)G[b]=w[b];return G[d]=m(U),Fo(c,this,G)}}function p4(c,d){return d.length<2?c:Su(c,ps(d,0,-1))}function WG(c,d){for(var m=c.length,w=Ir(d.length,m),b=no(c);w--;){var P=d[w];c[w]=wl(P,m)?b[P]:n}return c}function IS(c,d){if(!(d==="constructor"&&typeof c[d]=="function")&&d!="__proto__")return c[d]}var m4=v4(UP),Vp=s8||function(c,d){return sr.setTimeout(c,d)},AS=v4(pG);function g4(c,d,m){var w=d+"";return AS(c,LG(w,$G(OG(w),m)))}function v4(c){var d=0,m=0;return function(){var w=u8(),b=j-(w-m);if(m=w,b>0){if(++d>=R)return arguments[0]}else d=0;return c.apply(n,arguments)}}function Iv(c,d){var m=-1,w=c.length,b=w-1;for(d=d===n?w:d;++m<d;){var P=dS(m,b),U=c[P];c[P]=c[m],c[m]=U}return c.length=d,c}var y4=zG(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(Sn,function(m,w,b,P){d.push(b?P.replace(Z0,"$1"):w||m)}),d});function Ua(c){if(typeof c=="string"||ko(c))return c;var d=c+"";return d=="0"&&1/c==-Ce?"-0":d}function Mu(c){if(c!=null){try{return iv.call(c)}catch{}try{return c+""}catch{}}return""}function $G(c,d){return us(ve,function(m){var w="_."+m[0];d&m[1]&&!J0(c,w)&&c.push(w)}),c.sort()}function _4(c){if(c instanceof yn)return c.clone();var d=new fs(c.__wrapped__,c.__chain__);return d.__actions__=no(c.__actions__),d.__index__=c.__index__,d.__values__=c.__values__,d}function qG(c,d,m){(m?Vr(c,d,m):d===n)?d=1:d=Yi(Qt(d),0);var w=c==null?0:c.length;if(!w||d<1)return[];for(var b=0,P=0,U=he(uv(w/d));b<w;)U[P++]=ps(c,b,b+=d);return U}function XG(c){for(var d=-1,m=c==null?0:c.length,w=0,b=[];++d<m;){var P=c[d];P&&(b[w++]=P)}return b}function YG(){var c=arguments.length;if(!c)return[];for(var d=he(c-1),m=arguments[0],w=c;w--;)d[w-1]=arguments[w];return Ec(qt(m)?no(m):[m],pr(d,1))}var ZG=cn(function(c,d){return Ni(c)?Fp(c,pr(d,1,Ni,!0)):[]}),KG=cn(function(c,d){var m=ms(d);return Ni(m)&&(m=n),Ni(c)?Fp(c,pr(d,1,Ni,!0),It(m,2)):[]}),JG=cn(function(c,d){var m=ms(d);return Ni(m)&&(m=n),Ni(c)?Fp(c,pr(d,1,Ni,!0),n,m):[]});function QG(c,d,m){var w=c==null?0:c.length;return w?(d=m||d===n?1:Qt(d),ps(c,d<0?0:d,w)):[]}function eW(c,d,m){var w=c==null?0:c.length;return w?(d=m||d===n?1:Qt(d),d=w-d,ps(c,0,d<0?0:d)):[]}function tW(c,d){return c&&c.length?xv(c,It(d,3),!0,!0):[]}function nW(c,d){return c&&c.length?xv(c,It(d,3),!0):[]}function iW(c,d,m,w){var b=c==null?0:c.length;return b?(m&&typeof m!="number"&&Vr(c,d,m)&&(m=0,w=b),Y8(c,d,m,w)):[]}function x4(c,d,m){var w=c==null?0:c.length;if(!w)return-1;var b=m==null?0:Qt(m);return b<0&&(b=Yi(w+b,0)),Q0(c,It(d,3),b)}function w4(c,d,m){var w=c==null?0:c.length;if(!w)return-1;var b=w-1;return m!==n&&(b=Qt(m),b=m<0?Yi(w+b,0):Ir(b,w-1)),Q0(c,It(d,3),b,!0)}function b4(c){var d=c==null?0:c.length;return d?pr(c,1):[]}function rW(c){var d=c==null?0:c.length;return d?pr(c,Ce):[]}function oW(c,d){var m=c==null?0:c.length;return m?(d=d===n?1:Qt(d),pr(c,d)):[]}function sW(c){for(var d=-1,m=c==null?0:c.length,w={};++d<m;){var b=c[d];w[b[0]]=b[1]}return w}function C4(c){return c&&c.length?c[0]:n}function aW(c,d,m){var w=c==null?0:c.length;if(!w)return-1;var b=m==null?0:Qt(m);return b<0&&(b=Yi(w+b,0)),rf(c,d,b)}function lW(c){var d=c==null?0:c.length;return d?ps(c,0,-1):[]}var cW=cn(function(c){var d=pi(c,gS);return d.length&&d[0]===c[0]?sS(d):[]}),uW=cn(function(c){var d=ms(c),m=pi(c,gS);return d===ms(m)?d=n:m.pop(),m.length&&m[0]===c[0]?sS(m,It(d,2)):[]}),dW=cn(function(c){var d=ms(c),m=pi(c,gS);return d=typeof d=="function"?d:n,d&&m.pop(),m.length&&m[0]===c[0]?sS(m,n,d):[]});function fW(c,d){return c==null?"":l8.call(c,d)}function ms(c){var d=c==null?0:c.length;return d?c[d-1]:n}function hW(c,d,m){var w=c==null?0:c.length;if(!w)return-1;var b=w;return m!==n&&(b=Qt(m),b=b<0?Yi(w+b,0):Ir(b,w-1)),d===d?$j(c,d,b):Q0(c,iP,b,!0)}function pW(c,d){return c&&c.length?FP(c,Qt(d)):n}var mW=cn(S4);function S4(c,d){return c&&c.length&&d&&d.length?uS(c,d):c}function gW(c,d,m){return c&&c.length&&d&&d.length?uS(c,d,It(m,2)):c}function vW(c,d,m){return c&&c.length&&d&&d.length?uS(c,d,n,m):c}var yW=xl(function(c,d){var m=c==null?0:c.length,w=nS(c,d);return kP(c,pi(d,function(b){return wl(b,m)?+b:b}).sort(qP)),w});function _W(c,d){var m=[];if(!(c&&c.length))return m;var w=-1,b=[],P=c.length;for(d=It(d,3);++w<P;){var U=c[w];d(U,w,c)&&(m.push(U),b.push(w))}return kP(c,b),m}function DS(c){return c==null?c:f8.call(c)}function xW(c,d,m){var w=c==null?0:c.length;return w?(m&&typeof m!="number"&&Vr(c,d,m)?(d=0,m=w):(d=d==null?0:Qt(d),m=m===n?w:Qt(m)),ps(c,d,m)):[]}function wW(c,d){return _v(c,d)}function bW(c,d,m){return hS(c,d,It(m,2))}function CW(c,d){var m=c==null?0:c.length;if(m){var w=_v(c,d);if(w<m&&Xs(c[w],d))return w}return-1}function SW(c,d){return _v(c,d,!0)}function EW(c,d,m){return hS(c,d,It(m,2),!0)}function MW(c,d){var m=c==null?0:c.length;if(m){var w=_v(c,d,!0)-1;if(Xs(c[w],d))return w}return-1}function TW(c){return c&&c.length?BP(c):[]}function IW(c,d){return c&&c.length?BP(c,It(d,2)):[]}function AW(c){var d=c==null?0:c.length;return d?ps(c,1,d):[]}function DW(c,d,m){return c&&c.length?(d=m||d===n?1:Qt(d),ps(c,0,d<0?0:d)):[]}function RW(c,d,m){var w=c==null?0:c.length;return w?(d=m||d===n?1:Qt(d),d=w-d,ps(c,d<0?0:d,w)):[]}function PW(c,d){return c&&c.length?xv(c,It(d,3),!1,!0):[]}function OW(c,d){return c&&c.length?xv(c,It(d,3)):[]}var FW=cn(function(c){return Dc(pr(c,1,Ni,!0))}),NW=cn(function(c){var d=ms(c);return Ni(d)&&(d=n),Dc(pr(c,1,Ni,!0),It(d,2))}),LW=cn(function(c){var d=ms(c);return d=typeof d=="function"?d:n,Dc(pr(c,1,Ni,!0),n,d)});function kW(c){return c&&c.length?Dc(c):[]}function UW(c,d){return c&&c.length?Dc(c,It(d,2)):[]}function BW(c,d){return d=typeof d=="function"?d:n,c&&c.length?Dc(c,n,d):[]}function RS(c){if(!(c&&c.length))return[];var d=0;return c=Sc(c,function(m){if(Ni(m))return d=Yi(m.length,d),!0}),XC(d,function(m){return pi(c,WC(m))})}function E4(c,d){if(!(c&&c.length))return[];var m=RS(c);return d==null?m:pi(m,function(w){return Fo(d,n,w)})}var VW=cn(function(c,d){return Ni(c)?Fp(c,d):[]}),zW=cn(function(c){return mS(Sc(c,Ni))}),HW=cn(function(c){var d=ms(c);return Ni(d)&&(d=n),mS(Sc(c,Ni),It(d,2))}),jW=cn(function(c){var d=ms(c);return d=typeof d=="function"?d:n,mS(Sc(c,Ni),n,d)}),GW=cn(RS);function WW(c,d){return jP(c||[],d||[],Op)}function $W(c,d){return jP(c||[],d||[],kp)}var qW=cn(function(c){var d=c.length,m=d>1?c[d-1]:n;return m=typeof m=="function"?(c.pop(),m):n,E4(c,m)});function M4(c){var d=T(c);return d.__chain__=!0,d}function XW(c,d){return d(c),c}function Av(c,d){return d(c)}var YW=xl(function(c){var d=c.length,m=d?c[0]:0,w=this.__wrapped__,b=function(P){return nS(P,c)};return d>1||this.__actions__.length||!(w instanceof yn)||!wl(m)?this.thru(b):(w=w.slice(m,+m+(d?1:0)),w.__actions__.push({func:Av,args:[b],thisArg:n}),new fs(w,this.__chain__).thru(function(P){return d&&!P.length&&P.push(n),P}))});function ZW(){return M4(this)}function KW(){return new fs(this.value(),this.__chain__)}function JW(){this.__values__===n&&(this.__values__=V4(this.value()));var c=this.__index__>=this.__values__.length,d=c?n:this.__values__[this.__index__++];return{done:c,value:d}}function QW(){return this}function e6(c){for(var d,m=this;m instanceof pv;){var w=_4(m);w.__index__=0,w.__values__=n,d?b.__wrapped__=w:d=w;var b=w;m=m.__wrapped__}return b.__wrapped__=c,d}function t6(){var c=this.__wrapped__;if(c instanceof yn){var d=c;return this.__actions__.length&&(d=new yn(this)),d=d.reverse(),d.__actions__.push({func:Av,args:[DS],thisArg:n}),new fs(d,this.__chain__)}return this.thru(DS)}function n6(){return HP(this.__wrapped__,this.__actions__)}var i6=wv(function(c,d,m){Gn.call(c,m)?++c[m]:yl(c,m,1)});function r6(c,d,m){var w=qt(c)?tP:X8;return m&&Vr(c,d,m)&&(d=n),w(c,It(d,3))}function o6(c,d){var m=qt(c)?Sc:EP;return m(c,It(d,3))}var s6=QP(x4),a6=QP(w4);function l6(c,d){return pr(Dv(c,d),1)}function c6(c,d){return pr(Dv(c,d),Ce)}function u6(c,d,m){return m=m===n?1:Qt(m),pr(Dv(c,d),m)}function T4(c,d){var m=qt(c)?us:Ac;return m(c,It(d,3))}function I4(c,d){var m=qt(c)?Aj:SP;return m(c,It(d,3))}var d6=wv(function(c,d,m){Gn.call(c,m)?c[m].push(d):yl(c,m,[d])});function f6(c,d,m,w){c=io(c)?c:mf(c),m=m&&!w?Qt(m):0;var b=c.length;return m<0&&(m=Yi(b+m,0)),Nv(c)?m<=b&&c.indexOf(d,m)>-1:!!b&&rf(c,d,m)>-1}var h6=cn(function(c,d,m){var w=-1,b=typeof d=="function",P=io(c)?he(c.length):[];return Ac(c,function(U){P[++w]=b?Fo(d,U,m):Np(U,d,m)}),P}),p6=wv(function(c,d,m){yl(c,m,d)});function Dv(c,d){var m=qt(c)?pi:RP;return m(c,It(d,3))}function m6(c,d,m,w){return c==null?[]:(qt(d)||(d=d==null?[]:[d]),m=w?n:m,qt(m)||(m=m==null?[]:[m]),NP(c,d,m))}var g6=wv(function(c,d,m){c[m?0:1].push(d)},function(){return[[],[]]});function v6(c,d,m){var w=qt(c)?jC:oP,b=arguments.length<3;return w(c,It(d,4),m,b,Ac)}function y6(c,d,m){var w=qt(c)?Dj:oP,b=arguments.length<3;return w(c,It(d,4),m,b,SP)}function _6(c,d){var m=qt(c)?Sc:EP;return m(c,Ov(It(d,3)))}function x6(c){var d=qt(c)?xP:fG;return d(c)}function w6(c,d,m){(m?Vr(c,d,m):d===n)?d=1:d=Qt(d);var w=qt(c)?j8:hG;return w(c,d)}function b6(c){var d=qt(c)?G8:mG;return d(c)}function C6(c){if(c==null)return 0;if(io(c))return Nv(c)?sf(c):c.length;var d=Ar(c);return d==gt||d==Ht?c.size:lS(c).length}function S6(c,d,m){var w=qt(c)?GC:gG;return m&&Vr(c,d,m)&&(d=n),w(c,It(d,3))}var E6=cn(function(c,d){if(c==null)return[];var m=d.length;return m>1&&Vr(c,d[0],d[1])?d=[]:m>2&&Vr(d[0],d[1],d[2])&&(d=[d[0]]),NP(c,pr(d,1),[])}),Rv=o8||function(){return sr.Date.now()};function M6(c,d){if(typeof d!="function")throw new ds(r);return c=Qt(c),function(){if(--c<1)return d.apply(this,arguments)}}function A4(c,d,m){return d=m?n:d,d=c&&d==null?c.length:d,_l(c,k,n,n,n,n,d)}function D4(c,d){var m;if(typeof d!="function")throw new ds(r);return c=Qt(c),function(){return--c>0&&(m=d.apply(this,arguments)),c<=1&&(d=n),m}}var PS=cn(function(c,d,m){var w=v;if(m.length){var b=Mc(m,hf(PS));w|=S}return _l(c,w,d,m,b)}),R4=cn(function(c,d,m){var w=v|x;if(m.length){var b=Mc(m,hf(R4));w|=S}return _l(d,w,c,m,b)});function P4(c,d,m){d=m?n:d;var w=_l(c,_,n,n,n,n,n,d);return w.placeholder=P4.placeholder,w}function O4(c,d,m){d=m?n:d;var w=_l(c,E,n,n,n,n,n,d);return w.placeholder=O4.placeholder,w}function F4(c,d,m){var w,b,P,U,G,ne,Se=0,Ee=!1,Fe=!1,tt=!0;if(typeof c!="function")throw new ds(r);d=gs(d)||0,bi(m)&&(Ee=!!m.leading,Fe="maxWait"in m,P=Fe?Yi(gs(m.maxWait)||0,d):P,tt="trailing"in m?!!m.trailing:tt);function vt(Li){var Ys=w,Sl=b;return w=b=n,Se=Li,U=c.apply(Sl,Ys),U}function Pt(Li){return Se=Li,G=Vp(fn,d),Ee?vt(Li):U}function rn(Li){var Ys=Li-ne,Sl=Li-Se,Q4=d-Ys;return Fe?Ir(Q4,P-Sl):Q4}function Ot(Li){var Ys=Li-ne,Sl=Li-Se;return ne===n||Ys>=d||Ys<0||Fe&&Sl>=P}function fn(){var Li=Rv();if(Ot(Li))return wn(Li);G=Vp(fn,rn(Li))}function wn(Li){return G=n,tt&&w?vt(Li):(w=b=n,U)}function Uo(){G!==n&&GP(G),Se=0,w=ne=b=G=n}function zr(){return G===n?U:wn(Rv())}function Bo(){var Li=Rv(),Ys=Ot(Li);if(w=arguments,b=this,ne=Li,Ys){if(G===n)return Pt(ne);if(Fe)return GP(G),G=Vp(fn,d),vt(ne)}return G===n&&(G=Vp(fn,d)),U}return Bo.cancel=Uo,Bo.flush=zr,Bo}var T6=cn(function(c,d){return CP(c,1,d)}),I6=cn(function(c,d,m){return CP(c,gs(d)||0,m)});function A6(c){return _l(c,L)}function Pv(c,d){if(typeof c!="function"||d!=null&&typeof d!="function")throw new ds(r);var m=function(){var w=arguments,b=d?d.apply(this,w):w[0],P=m.cache;if(P.has(b))return P.get(b);var U=c.apply(this,w);return m.cache=P.set(b,U)||P,U};return m.cache=new(Pv.Cache||vl),m}Pv.Cache=vl;function Ov(c){if(typeof c!="function")throw new ds(r);return function(){var d=arguments;switch(d.length){case 0:return!c.call(this);case 1:return!c.call(this,d[0]);case 2:return!c.call(this,d[0],d[1]);case 3:return!c.call(this,d[0],d[1],d[2])}return!c.apply(this,d)}}function D6(c){return D4(2,c)}var R6=vG(function(c,d){d=d.length==1&&qt(d[0])?pi(d[0],No(It())):pi(pr(d,1),No(It()));var m=d.length;return cn(function(w){for(var b=-1,P=Ir(w.length,m);++b<P;)w[b]=d[b].call(this,w[b]);return Fo(c,this,w)})}),OS=cn(function(c,d){var m=Mc(d,hf(OS));return _l(c,S,n,d,m)}),N4=cn(function(c,d){var m=Mc(d,hf(N4));return _l(c,C,n,d,m)}),P6=xl(function(c,d){return _l(c,F,n,n,n,d)});function O6(c,d){if(typeof c!="function")throw new ds(r);return d=d===n?d:Qt(d),cn(c,d)}function F6(c,d){if(typeof c!="function")throw new ds(r);return d=d==null?0:Yi(Qt(d),0),cn(function(m){var w=m[d],b=Pc(m,0,d);return w&&Ec(b,w),Fo(c,this,b)})}function N6(c,d,m){var w=!0,b=!0;if(typeof c!="function")throw new ds(r);return bi(m)&&(w="leading"in m?!!m.leading:w,b="trailing"in m?!!m.trailing:b),F4(c,d,{leading:w,maxWait:d,trailing:b})}function L6(c){return A4(c,1)}function k6(c,d){return OS(vS(d),c)}function U6(){if(!arguments.length)return[];var c=arguments[0];return qt(c)?c:[c]}function B6(c){return hs(c,h)}function V6(c,d){return d=typeof d=="function"?d:n,hs(c,h,d)}function z6(c){return hs(c,u|h)}function H6(c,d){return d=typeof d=="function"?d:n,hs(c,u|h,d)}function j6(c,d){return d==null||bP(c,d,ar(d))}function Xs(c,d){return c===d||c!==c&&d!==d}var G6=Ev(oS),W6=Ev(function(c,d){return c>=d}),Tu=IP(function(){return arguments}())?IP:function(c){return Ai(c)&&Gn.call(c,"callee")&&!pP.call(c,"callee")},qt=he.isArray,$6=YR?No(YR):eG;function io(c){return c!=null&&Fv(c.length)&&!bl(c)}function Ni(c){return Ai(c)&&io(c)}function q6(c){return c===!0||c===!1||Ai(c)&&Br(c)==xe}var Oc=a8||GS,X6=ZR?No(ZR):tG;function Y6(c){return Ai(c)&&c.nodeType===1&&!zp(c)}function Z6(c){if(c==null)return!0;if(io(c)&&(qt(c)||typeof c=="string"||typeof c.splice=="function"||Oc(c)||pf(c)||Tu(c)))return!c.length;var d=Ar(c);if(d==gt||d==Ht)return!c.size;if(Bp(c))return!lS(c).length;for(var m in c)if(Gn.call(c,m))return!1;return!0}function K6(c,d){return Lp(c,d)}function J6(c,d,m){m=typeof m=="function"?m:n;var w=m?m(c,d):n;return w===n?Lp(c,d,n,m):!!w}function FS(c){if(!Ai(c))return!1;var d=Br(c);return d==We||d==je||typeof c.message=="string"&&typeof c.name=="string"&&!zp(c)}function Q6(c){return typeof c=="number"&&gP(c)}function bl(c){if(!bi(c))return!1;var d=Br(c);return d==Ue||d==at||d==Q||d==Rt}function L4(c){return typeof c=="number"&&c==Qt(c)}function Fv(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=Y}function bi(c){var d=typeof c;return c!=null&&(d=="object"||d=="function")}function Ai(c){return c!=null&&typeof c=="object"}var k4=KR?No(KR):iG;function e$(c,d){return c===d||aS(c,d,SS(d))}function t$(c,d,m){return m=typeof m=="function"?m:n,aS(c,d,SS(d),m)}function n$(c){return U4(c)&&c!=+c}function i$(c){if(VG(c))throw new Gt(i);return AP(c)}function r$(c){return c===null}function o$(c){return c==null}function U4(c){return typeof c=="number"||Ai(c)&&Br(c)==ft}function zp(c){if(!Ai(c)||Br(c)!=Yt)return!1;var d=av(c);if(d===null)return!0;var m=Gn.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&iv.call(m)==t8}var NS=JR?No(JR):rG;function s$(c){return L4(c)&&c>=-Y&&c<=Y}var B4=QR?No(QR):oG;function Nv(c){return typeof c=="string"||!qt(c)&&Ai(c)&&Br(c)==mt}function ko(c){return typeof c=="symbol"||Ai(c)&&Br(c)==N}var pf=eP?No(eP):sG;function a$(c){return c===n}function l$(c){return Ai(c)&&Ar(c)==se}function c$(c){return Ai(c)&&Br(c)==be}var u$=Ev(cS),d$=Ev(function(c,d){return c<=d});function V4(c){if(!c)return[];if(io(c))return Nv(c)?$s(c):no(c);if(Ip&&c[Ip])return jj(c[Ip]());var d=Ar(c),m=d==gt?ZC:d==Ht?ev:mf;return m(c)}function Cl(c){if(!c)return c===0?c:0;if(c=gs(c),c===Ce||c===-Ce){var d=c<0?-1:1;return d*re}return c===c?c:0}function Qt(c){var d=Cl(c),m=d%1;return d===d?m?d-m:d:0}function z4(c){return c?Cu(Qt(c),0,_e):0}function gs(c){if(typeof c=="number")return c;if(ko(c))return X;if(bi(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=bi(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=sP(c);var m=FC.test(c);return m||LC.test(c)?Mj(c.slice(2),m?2:8):K0.test(c)?X:+c}function H4(c){return ka(c,ro(c))}function f$(c){return c?Cu(Qt(c),-Y,Y):c===0?c:0}function Vn(c){return c==null?"":Lo(c)}var h$=df(function(c,d){if(Bp(d)||io(d)){ka(d,ar(d),c);return}for(var m in d)Gn.call(d,m)&&Op(c,m,d[m])}),j4=df(function(c,d){ka(d,ro(d),c)}),Lv=df(function(c,d,m,w){ka(d,ro(d),c,w)}),p$=df(function(c,d,m,w){ka(d,ar(d),c,w)}),m$=xl(nS);function g$(c,d){var m=uf(c);return d==null?m:wP(m,d)}var v$=cn(function(c,d){c=Jn(c);var m=-1,w=d.length,b=w>2?d[2]:n;for(b&&Vr(d[0],d[1],b)&&(w=1);++m<w;)for(var P=d[m],U=ro(P),G=-1,ne=U.length;++G<ne;){var Se=U[G],Ee=c[Se];(Ee===n||Xs(Ee,af[Se])&&!Gn.call(c,Se))&&(c[Se]=P[Se])}return c}),y$=cn(function(c){return c.push(n,s4),Fo(G4,n,c)});function _$(c,d){return nP(c,It(d,3),La)}function x$(c,d){return nP(c,It(d,3),rS)}function w$(c,d){return c==null?c:iS(c,It(d,3),ro)}function b$(c,d){return c==null?c:MP(c,It(d,3),ro)}function C$(c,d){return c&&La(c,It(d,3))}function S$(c,d){return c&&rS(c,It(d,3))}function E$(c){return c==null?[]:vv(c,ar(c))}function M$(c){return c==null?[]:vv(c,ro(c))}function LS(c,d,m){var w=c==null?n:Su(c,d);return w===n?m:w}function T$(c,d){return c!=null&&c4(c,d,Z8)}function kS(c,d){return c!=null&&c4(c,d,K8)}var I$=t4(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=rv.call(d)),c[d]=m},BS(oo)),A$=t4(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=rv.call(d)),Gn.call(c,d)?c[d].push(m):c[d]=[m]},It),D$=cn(Np);function ar(c){return io(c)?_P(c):lS(c)}function ro(c){return io(c)?_P(c,!0):aG(c)}function R$(c,d){var m={};return d=It(d,3),La(c,function(w,b,P){yl(m,d(w,b,P),w)}),m}function P$(c,d){var m={};return d=It(d,3),La(c,function(w,b,P){yl(m,b,d(w,b,P))}),m}var O$=df(function(c,d,m){yv(c,d,m)}),G4=df(function(c,d,m,w){yv(c,d,m,w)}),F$=xl(function(c,d){var m={};if(c==null)return m;var w=!1;d=pi(d,function(P){return P=Rc(P,c),w||(w=P.length>1),P}),ka(c,bS(c),m),w&&(m=hs(m,u|f|h,IG));for(var b=d.length;b--;)pS(m,d[b]);return m});function N$(c,d){return W4(c,Ov(It(d)))}var L$=xl(function(c,d){return c==null?{}:cG(c,d)});function W4(c,d){if(c==null)return{};var m=pi(bS(c),function(w){return[w]});return d=It(d),LP(c,m,function(w,b){return d(w,b[0])})}function k$(c,d,m){d=Rc(d,c);var w=-1,b=d.length;for(b||(b=1,c=n);++w<b;){var P=c==null?n:c[Ua(d[w])];P===n&&(w=b,P=m),c=bl(P)?P.call(c):P}return c}function U$(c,d,m){return c==null?c:kp(c,d,m)}function B$(c,d,m,w){return w=typeof w=="function"?w:n,c==null?c:kp(c,d,m,w)}var $4=r4(ar),q4=r4(ro);function V$(c,d,m){var w=qt(c),b=w||Oc(c)||pf(c);if(d=It(d,4),m==null){var P=c&&c.constructor;b?m=w?new P:[]:bi(c)?m=bl(P)?uf(av(c)):{}:m={}}return(b?us:La)(c,function(U,G,ne){return d(m,U,G,ne)}),m}function z$(c,d){return c==null?!0:pS(c,d)}function H$(c,d,m){return c==null?c:zP(c,d,vS(m))}function j$(c,d,m,w){return w=typeof w=="function"?w:n,c==null?c:zP(c,d,vS(m),w)}function mf(c){return c==null?[]:YC(c,ar(c))}function G$(c){return c==null?[]:YC(c,ro(c))}function W$(c,d,m){return m===n&&(m=d,d=n),m!==n&&(m=gs(m),m=m===m?m:0),d!==n&&(d=gs(d),d=d===d?d:0),Cu(gs(c),d,m)}function $$(c,d,m){return d=Cl(d),m===n?(m=d,d=0):m=Cl(m),c=gs(c),J8(c,d,m)}function q$(c,d,m){if(m&&typeof m!="boolean"&&Vr(c,d,m)&&(d=m=n),m===n&&(typeof d=="boolean"?(m=d,d=n):typeof c=="boolean"&&(m=c,c=n)),c===n&&d===n?(c=0,d=1):(c=Cl(c),d===n?(d=c,c=0):d=Cl(d)),c>d){var w=c;c=d,d=w}if(m||c%1||d%1){var b=vP();return Ir(c+b*(d-c+Ej("1e-"+((b+"").length-1))),d)}return dS(c,d)}var X$=ff(function(c,d,m){return d=d.toLowerCase(),c+(m?X4(d):d)});function X4(c){return US(Vn(c).toLowerCase())}function Y4(c){return c=Vn(c),c&&c.replace(UC,Uj).replace(mj,"")}function Y$(c,d,m){c=Vn(c),d=Lo(d);var w=c.length;m=m===n?w:Cu(Qt(m),0,w);var b=m;return m-=d.length,m>=0&&c.slice(m,b)==d}function Z$(c){return c=Vn(c),c&&Te.test(c)?c.replace(Qe,Bj):c}function K$(c){return c=Vn(c),c&&to.test(c)?c.replace(or,"\\$&"):c}var J$=ff(function(c,d,m){return c+(m?"-":"")+d.toLowerCase()}),Q$=ff(function(c,d,m){return c+(m?" ":"")+d.toLowerCase()}),eq=JP("toLowerCase");function tq(c,d,m){c=Vn(c),d=Qt(d);var w=d?sf(c):0;if(!d||w>=d)return c;var b=(d-w)/2;return Sv(dv(b),m)+c+Sv(uv(b),m)}function nq(c,d,m){c=Vn(c),d=Qt(d);var w=d?sf(c):0;return d&&w<d?c+Sv(d-w,m):c}function iq(c,d,m){c=Vn(c),d=Qt(d);var w=d?sf(c):0;return d&&w<d?Sv(d-w,m)+c:c}function rq(c,d,m){return m||d==null?d=0:d&&(d=+d),d8(Vn(c).replace(yu,""),d||0)}function oq(c,d,m){return(m?Vr(c,d,m):d===n)?d=1:d=Qt(d),fS(Vn(c),d)}function sq(){var c=arguments,d=Vn(c[0]);return c.length<3?d:d.replace(c[1],c[2])}var aq=ff(function(c,d,m){return c+(m?"_":"")+d.toLowerCase()});function lq(c,d,m){return m&&typeof m!="number"&&Vr(c,d,m)&&(d=m=n),m=m===n?_e:m>>>0,m?(c=Vn(c),c&&(typeof d=="string"||d!=null&&!NS(d))&&(d=Lo(d),!d&&of(c))?Pc($s(c),0,m):c.split(d,m)):[]}var cq=ff(function(c,d,m){return c+(m?" ":"")+US(d)});function uq(c,d,m){return c=Vn(c),m=m==null?0:Cu(Qt(m),0,c.length),d=Lo(d),c.slice(m,m+d.length)==d}function dq(c,d,m){var w=T.templateSettings;m&&Vr(c,d,m)&&(d=n),c=Vn(c),d=Lv({},d,w,o4);var b=Lv({},d.imports,w.imports,o4),P=ar(b),U=YC(b,P),G,ne,Se=0,Ee=d.interpolate||tf,Fe="__p += '",tt=KC((d.escape||tf).source+"|"+Ee.source+"|"+(Ee===Lt?ef:tf).source+"|"+(d.evaluate||tf).source+"|$","g"),vt="//# sourceURL="+(Gn.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xj+"]")+`
`;c.replace(tt,function(Ot,fn,wn,Uo,zr,Bo){return wn||(wn=Uo),Fe+=c.slice(Se,Bo).replace(D,Vj),fn&&(G=!0,Fe+=`' +
__e(`+fn+`) +
'`),zr&&(ne=!0,Fe+=`';
`+zr+`;
__p += '`),wn&&(Fe+=`' +
((__t = (`+wn+`)) == null ? '' : __t) +
'`),Se=Bo+Ot.length,Ot}),Fe+=`';
`;var Pt=Gn.call(d,"variable")&&d.variable;if(!Pt)Fe=`with (obj) {
`+Fe+`
}
`;else if(ls.test(Pt))throw new Gt(o);Fe=(ne?Fe.replace(ln,""):Fe).replace(jt,"$1").replace(Bn,"$1;"),Fe="function("+(Pt||"obj")+`) {
`+(Pt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Fe+`return __p
}`;var rn=K4(function(){return Nn(P,vt+"return "+Fe).apply(n,U)});if(rn.source=Fe,FS(rn))throw rn;return rn}function fq(c){return Vn(c).toLowerCase()}function hq(c){return Vn(c).toUpperCase()}function pq(c,d,m){if(c=Vn(c),c&&(m||d===n))return sP(c);if(!c||!(d=Lo(d)))return c;var w=$s(c),b=$s(d),P=aP(w,b),U=lP(w,b)+1;return Pc(w,P,U).join("")}function mq(c,d,m){if(c=Vn(c),c&&(m||d===n))return c.slice(0,uP(c)+1);if(!c||!(d=Lo(d)))return c;var w=$s(c),b=lP(w,$s(d))+1;return Pc(w,0,b).join("")}function gq(c,d,m){if(c=Vn(c),c&&(m||d===n))return c.replace(yu,"");if(!c||!(d=Lo(d)))return c;var w=$s(c),b=aP(w,$s(d));return Pc(w,b).join("")}function vq(c,d){var m=W,w=O;if(bi(d)){var b="separator"in d?d.separator:b;m="length"in d?Qt(d.length):m,w="omission"in d?Lo(d.omission):w}c=Vn(c);var P=c.length;if(of(c)){var U=$s(c);P=U.length}if(m>=P)return c;var G=m-sf(w);if(G<1)return w;var ne=U?Pc(U,0,G).join(""):c.slice(0,G);if(b===n)return ne+w;if(U&&(G+=ne.length-G),NS(b)){if(c.slice(G).search(b)){var Se,Ee=ne;for(b.global||(b=KC(b.source,Vn(Mp.exec(b))+"g")),b.lastIndex=0;Se=b.exec(Ee);)var Fe=Se.index;ne=ne.slice(0,Fe===n?G:Fe)}}else if(c.indexOf(Lo(b),G)!=G){var tt=ne.lastIndexOf(b);tt>-1&&(ne=ne.slice(0,tt))}return ne+w}function yq(c){return c=Vn(c),c&&ge.test(c)?c.replace(Z,qj):c}var _q=ff(function(c,d,m){return c+(m?" ":"")+d.toUpperCase()}),US=JP("toUpperCase");function Z4(c,d,m){return c=Vn(c),d=m?n:d,d===n?Hj(c)?Zj(c):Oj(c):c.match(d)||[]}var K4=cn(function(c,d){try{return Fo(c,n,d)}catch(m){return FS(m)?m:new Gt(m)}}),xq=xl(function(c,d){return us(d,function(m){m=Ua(m),yl(c,m,PS(c[m],c))}),c});function wq(c){var d=c==null?0:c.length,m=It();return c=d?pi(c,function(w){if(typeof w[1]!="function")throw new ds(r);return[m(w[0]),w[1]]}):[],cn(function(w){for(var b=-1;++b<d;){var P=c[b];if(Fo(P[0],this,w))return Fo(P[1],this,w)}})}function bq(c){return q8(hs(c,u))}function BS(c){return function(){return c}}function Cq(c,d){return c==null||c!==c?d:c}var Sq=e4(),Eq=e4(!0);function oo(c){return c}function VS(c){return DP(typeof c=="function"?c:hs(c,u))}function Mq(c){return PP(hs(c,u))}function Tq(c,d){return OP(c,hs(d,u))}var Iq=cn(function(c,d){return function(m){return Np(m,c,d)}}),Aq=cn(function(c,d){return function(m){return Np(c,m,d)}});function zS(c,d,m){var w=ar(d),b=vv(d,w);m==null&&!(bi(d)&&(b.length||!w.length))&&(m=d,d=c,c=this,b=vv(d,ar(d)));var P=!(bi(m)&&"chain"in m)||!!m.chain,U=bl(c);return us(b,function(G){var ne=d[G];c[G]=ne,U&&(c.prototype[G]=function(){var Se=this.__chain__;if(P||Se){var Ee=c(this.__wrapped__),Fe=Ee.__actions__=no(this.__actions__);return Fe.push({func:ne,args:arguments,thisArg:c}),Ee.__chain__=Se,Ee}return ne.apply(c,Ec([this.value()],arguments))})}),c}function Dq(){return sr._===this&&(sr._=n8),this}function HS(){}function Rq(c){return c=Qt(c),cn(function(d){return FP(d,c)})}var Pq=_S(pi),Oq=_S(tP),Fq=_S(GC);function J4(c){return MS(c)?WC(Ua(c)):uG(c)}function Nq(c){return function(d){return c==null?n:Su(c,d)}}var Lq=n4(),kq=n4(!0);function jS(){return[]}function GS(){return!1}function Uq(){return{}}function Bq(){return""}function Vq(){return!0}function zq(c,d){if(c=Qt(c),c<1||c>Y)return[];var m=_e,w=Ir(c,_e);d=It(d),c-=_e;for(var b=XC(w,d);++m<c;)d(m);return b}function Hq(c){return qt(c)?pi(c,Ua):ko(c)?[c]:no(y4(Vn(c)))}function jq(c){var d=++e8;return Vn(c)+d}var Gq=Cv(function(c,d){return c+d},0),Wq=xS("ceil"),$q=Cv(function(c,d){return c/d},1),qq=xS("floor");function Xq(c){return c&&c.length?gv(c,oo,oS):n}function Yq(c,d){return c&&c.length?gv(c,It(d,2),oS):n}function Zq(c){return rP(c,oo)}function Kq(c,d){return rP(c,It(d,2))}function Jq(c){return c&&c.length?gv(c,oo,cS):n}function Qq(c,d){return c&&c.length?gv(c,It(d,2),cS):n}var e7=Cv(function(c,d){return c*d},1),t7=xS("round"),n7=Cv(function(c,d){return c-d},0);function i7(c){return c&&c.length?qC(c,oo):0}function r7(c,d){return c&&c.length?qC(c,It(d,2)):0}return T.after=M6,T.ary=A4,T.assign=h$,T.assignIn=j4,T.assignInWith=Lv,T.assignWith=p$,T.at=m$,T.before=D4,T.bind=PS,T.bindAll=xq,T.bindKey=R4,T.castArray=U6,T.chain=M4,T.chunk=qG,T.compact=XG,T.concat=YG,T.cond=wq,T.conforms=bq,T.constant=BS,T.countBy=i6,T.create=g$,T.curry=P4,T.curryRight=O4,T.debounce=F4,T.defaults=v$,T.defaultsDeep=y$,T.defer=T6,T.delay=I6,T.difference=ZG,T.differenceBy=KG,T.differenceWith=JG,T.drop=QG,T.dropRight=eW,T.dropRightWhile=tW,T.dropWhile=nW,T.fill=iW,T.filter=o6,T.flatMap=l6,T.flatMapDeep=c6,T.flatMapDepth=u6,T.flatten=b4,T.flattenDeep=rW,T.flattenDepth=oW,T.flip=A6,T.flow=Sq,T.flowRight=Eq,T.fromPairs=sW,T.functions=E$,T.functionsIn=M$,T.groupBy=d6,T.initial=lW,T.intersection=cW,T.intersectionBy=uW,T.intersectionWith=dW,T.invert=I$,T.invertBy=A$,T.invokeMap=h6,T.iteratee=VS,T.keyBy=p6,T.keys=ar,T.keysIn=ro,T.map=Dv,T.mapKeys=R$,T.mapValues=P$,T.matches=Mq,T.matchesProperty=Tq,T.memoize=Pv,T.merge=O$,T.mergeWith=G4,T.method=Iq,T.methodOf=Aq,T.mixin=zS,T.negate=Ov,T.nthArg=Rq,T.omit=F$,T.omitBy=N$,T.once=D6,T.orderBy=m6,T.over=Pq,T.overArgs=R6,T.overEvery=Oq,T.overSome=Fq,T.partial=OS,T.partialRight=N4,T.partition=g6,T.pick=L$,T.pickBy=W4,T.property=J4,T.propertyOf=Nq,T.pull=mW,T.pullAll=S4,T.pullAllBy=gW,T.pullAllWith=vW,T.pullAt=yW,T.range=Lq,T.rangeRight=kq,T.rearg=P6,T.reject=_6,T.remove=_W,T.rest=O6,T.reverse=DS,T.sampleSize=w6,T.set=U$,T.setWith=B$,T.shuffle=b6,T.slice=xW,T.sortBy=E6,T.sortedUniq=TW,T.sortedUniqBy=IW,T.split=lq,T.spread=F6,T.tail=AW,T.take=DW,T.takeRight=RW,T.takeRightWhile=PW,T.takeWhile=OW,T.tap=XW,T.throttle=N6,T.thru=Av,T.toArray=V4,T.toPairs=$4,T.toPairsIn=q4,T.toPath=Hq,T.toPlainObject=H4,T.transform=V$,T.unary=L6,T.union=FW,T.unionBy=NW,T.unionWith=LW,T.uniq=kW,T.uniqBy=UW,T.uniqWith=BW,T.unset=z$,T.unzip=RS,T.unzipWith=E4,T.update=H$,T.updateWith=j$,T.values=mf,T.valuesIn=G$,T.without=VW,T.words=Z4,T.wrap=k6,T.xor=zW,T.xorBy=HW,T.xorWith=jW,T.zip=GW,T.zipObject=WW,T.zipObjectDeep=$W,T.zipWith=qW,T.entries=$4,T.entriesIn=q4,T.extend=j4,T.extendWith=Lv,zS(T,T),T.add=Gq,T.attempt=K4,T.camelCase=X$,T.capitalize=X4,T.ceil=Wq,T.clamp=W$,T.clone=B6,T.cloneDeep=z6,T.cloneDeepWith=H6,T.cloneWith=V6,T.conformsTo=j6,T.deburr=Y4,T.defaultTo=Cq,T.divide=$q,T.endsWith=Y$,T.eq=Xs,T.escape=Z$,T.escapeRegExp=K$,T.every=r6,T.find=s6,T.findIndex=x4,T.findKey=_$,T.findLast=a6,T.findLastIndex=w4,T.findLastKey=x$,T.floor=qq,T.forEach=T4,T.forEachRight=I4,T.forIn=w$,T.forInRight=b$,T.forOwn=C$,T.forOwnRight=S$,T.get=LS,T.gt=G6,T.gte=W6,T.has=T$,T.hasIn=kS,T.head=C4,T.identity=oo,T.includes=f6,T.indexOf=aW,T.inRange=$$,T.invoke=D$,T.isArguments=Tu,T.isArray=qt,T.isArrayBuffer=$6,T.isArrayLike=io,T.isArrayLikeObject=Ni,T.isBoolean=q6,T.isBuffer=Oc,T.isDate=X6,T.isElement=Y6,T.isEmpty=Z6,T.isEqual=K6,T.isEqualWith=J6,T.isError=FS,T.isFinite=Q6,T.isFunction=bl,T.isInteger=L4,T.isLength=Fv,T.isMap=k4,T.isMatch=e$,T.isMatchWith=t$,T.isNaN=n$,T.isNative=i$,T.isNil=o$,T.isNull=r$,T.isNumber=U4,T.isObject=bi,T.isObjectLike=Ai,T.isPlainObject=zp,T.isRegExp=NS,T.isSafeInteger=s$,T.isSet=B4,T.isString=Nv,T.isSymbol=ko,T.isTypedArray=pf,T.isUndefined=a$,T.isWeakMap=l$,T.isWeakSet=c$,T.join=fW,T.kebabCase=J$,T.last=ms,T.lastIndexOf=hW,T.lowerCase=Q$,T.lowerFirst=eq,T.lt=u$,T.lte=d$,T.max=Xq,T.maxBy=Yq,T.mean=Zq,T.meanBy=Kq,T.min=Jq,T.minBy=Qq,T.stubArray=jS,T.stubFalse=GS,T.stubObject=Uq,T.stubString=Bq,T.stubTrue=Vq,T.multiply=e7,T.nth=pW,T.noConflict=Dq,T.noop=HS,T.now=Rv,T.pad=tq,T.padEnd=nq,T.padStart=iq,T.parseInt=rq,T.random=q$,T.reduce=v6,T.reduceRight=y6,T.repeat=oq,T.replace=sq,T.result=k$,T.round=t7,T.runInContext=J,T.sample=x6,T.size=C6,T.snakeCase=aq,T.some=S6,T.sortedIndex=wW,T.sortedIndexBy=bW,T.sortedIndexOf=CW,T.sortedLastIndex=SW,T.sortedLastIndexBy=EW,T.sortedLastIndexOf=MW,T.startCase=cq,T.startsWith=uq,T.subtract=n7,T.sum=i7,T.sumBy=r7,T.template=dq,T.times=zq,T.toFinite=Cl,T.toInteger=Qt,T.toLength=z4,T.toLower=fq,T.toNumber=gs,T.toSafeInteger=f$,T.toString=Vn,T.toUpper=hq,T.trim=pq,T.trimEnd=mq,T.trimStart=gq,T.truncate=vq,T.unescape=yq,T.uniqueId=jq,T.upperCase=_q,T.upperFirst=US,T.each=T4,T.eachRight=I4,T.first=C4,zS(T,function(){var c={};return La(T,function(d,m){Gn.call(T.prototype,m)||(c[m]=d)}),c}(),{chain:!1}),T.VERSION=e,us(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){T[c].placeholder=T}),us(["drop","take"],function(c,d){yn.prototype[c]=function(m){m=m===n?1:Yi(Qt(m),0);var w=this.__filtered__&&!d?new yn(this):this.clone();return w.__filtered__?w.__takeCount__=Ir(m,w.__takeCount__):w.__views__.push({size:Ir(m,_e),type:c+(w.__dir__<0?"Right":"")}),w},yn.prototype[c+"Right"]=function(m){return this.reverse()[c](m).reverse()}}),us(["filter","map","takeWhile"],function(c,d){var m=d+1,w=m==me||m==De;yn.prototype[c]=function(b){var P=this.clone();return P.__iteratees__.push({iteratee:It(b,3),type:m}),P.__filtered__=P.__filtered__||w,P}}),us(["head","last"],function(c,d){var m="take"+(d?"Right":"");yn.prototype[c]=function(){return this[m](1).value()[0]}}),us(["initial","tail"],function(c,d){var m="drop"+(d?"":"Right");yn.prototype[c]=function(){return this.__filtered__?new yn(this):this[m](1)}}),yn.prototype.compact=function(){return this.filter(oo)},yn.prototype.find=function(c){return this.filter(c).head()},yn.prototype.findLast=function(c){return this.reverse().find(c)},yn.prototype.invokeMap=cn(function(c,d){return typeof c=="function"?new yn(this):this.map(function(m){return Np(m,c,d)})}),yn.prototype.reject=function(c){return this.filter(Ov(It(c)))},yn.prototype.slice=function(c,d){c=Qt(c);var m=this;return m.__filtered__&&(c>0||d<0)?new yn(m):(c<0?m=m.takeRight(-c):c&&(m=m.drop(c)),d!==n&&(d=Qt(d),m=d<0?m.dropRight(-d):m.take(d-c)),m)},yn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},yn.prototype.toArray=function(){return this.take(_e)},La(yn.prototype,function(c,d){var m=/^(?:filter|find|map|reject)|While$/.test(d),w=/^(?:head|last)$/.test(d),b=T[w?"take"+(d=="last"?"Right":""):d],P=w||/^find/.test(d);b&&(T.prototype[d]=function(){var U=this.__wrapped__,G=w?[1]:arguments,ne=U instanceof yn,Se=G[0],Ee=ne||qt(U),Fe=function(fn){var wn=b.apply(T,Ec([fn],G));return w&&tt?wn[0]:wn};Ee&&m&&typeof Se=="function"&&Se.length!=1&&(ne=Ee=!1);var tt=this.__chain__,vt=!!this.__actions__.length,Pt=P&&!tt,rn=ne&&!vt;if(!P&&Ee){U=rn?U:new yn(this);var Ot=c.apply(U,G);return Ot.__actions__.push({func:Av,args:[Fe],thisArg:n}),new fs(Ot,tt)}return Pt&&rn?c.apply(this,G):(Ot=this.thru(Fe),Pt?w?Ot.value()[0]:Ot.value():Ot)})}),us(["pop","push","shift","sort","splice","unshift"],function(c){var d=tv[c],m=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",w=/^(?:pop|shift)$/.test(c);T.prototype[c]=function(){var b=arguments;if(w&&!this.__chain__){var P=this.value();return d.apply(qt(P)?P:[],b)}return this[m](function(U){return d.apply(qt(U)?U:[],b)})}}),La(yn.prototype,function(c,d){var m=T[d];if(m){var w=m.name+"";Gn.call(cf,w)||(cf[w]=[]),cf[w].push({name:d,func:m})}}),cf[bv(n,x).name]=[{name:"wrapper",func:n}],yn.prototype.clone=y8,yn.prototype.reverse=_8,yn.prototype.value=x8,T.prototype.at=YW,T.prototype.chain=ZW,T.prototype.commit=KW,T.prototype.next=JW,T.prototype.plant=e6,T.prototype.reverse=t6,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=n6,T.prototype.first=T.prototype.head,Ip&&(T.prototype[Ip]=QW),T},Tc=Kj();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(sr._=Tc,define(function(){return Tc})):_u?((_u.exports=Tc)._=Tc,VC._=Tc):sr._=Tc}).call(Th)});var MB=ki(($I,qI)=>{"use strict";(function(n,e){typeof $I=="object"&&typeof qI<"u"?qI.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Compressor=e())})($I,function(){"use strict";function n(ve,oe){var B=Object.keys(ve);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(ve);oe&&(Q=Q.filter(function(xe){return Object.getOwnPropertyDescriptor(ve,xe).enumerable})),B.push.apply(B,Q)}return B}function e(ve){for(var oe=1;oe<arguments.length;oe++){var B=arguments[oe]!=null?arguments[oe]:{};oe%2?n(Object(B),!0).forEach(function(Q){o(ve,Q,B[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(B)):n(Object(B)).forEach(function(Q){Object.defineProperty(ve,Q,Object.getOwnPropertyDescriptor(B,Q))})}return ve}function t(ve,oe){if(!(ve instanceof oe))throw new TypeError("Cannot call a class as a function")}function i(ve,oe){for(var B=0;B<oe.length;B++){var Q=oe[B];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(ve,l(Q.key),Q)}}function r(ve,oe,B){return oe&&i(ve.prototype,oe),B&&i(ve,B),Object.defineProperty(ve,"prototype",{writable:!1}),ve}function o(ve,oe,B){return oe=l(oe),oe in ve?Object.defineProperty(ve,oe,{value:B,enumerable:!0,configurable:!0,writable:!0}):ve[oe]=B,ve}function s(){return s=Object.assign?Object.assign.bind():function(ve){for(var oe=1;oe<arguments.length;oe++){var B=arguments[oe];for(var Q in B)Object.prototype.hasOwnProperty.call(B,Q)&&(ve[Q]=B[Q])}return ve},s.apply(this,arguments)}function a(ve,oe){if(typeof ve!="object"||ve===null)return ve;var B=ve[Symbol.toPrimitive];if(B!==void 0){var Q=B.call(ve,oe||"default");if(typeof Q!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(oe==="string"?String:Number)(ve)}function l(ve){var oe=a(ve,"string");return typeof oe=="symbol"?oe:String(oe)}var u={exports:{}};(function(ve){typeof window>"u"||function(oe){var B=oe.HTMLCanvasElement&&oe.HTMLCanvasElement.prototype,Q=oe.Blob&&function(){try{return!!new Blob}catch{return!1}}(),xe=Q&&oe.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),le=oe.BlobBuilder||oe.WebKitBlobBuilder||oe.MozBlobBuilder||oe.MSBlobBuilder,je=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,We=(Q||le)&&oe.atob&&oe.ArrayBuffer&&oe.Uint8Array&&function(Ue){var at,gt,ft,H,Yt,$e,Rt,Ke,Ht;if(at=Ue.match(je),!at)throw new Error("invalid data URI");for(gt=at[2]?at[1]:"text/plain"+(at[3]||";charset=US-ASCII"),ft=!!at[4],H=Ue.slice(at[0].length),ft?Yt=atob(H):Yt=decodeURIComponent(H),$e=new ArrayBuffer(Yt.length),Rt=new Uint8Array($e),Ke=0;Ke<Yt.length;Ke+=1)Rt[Ke]=Yt.charCodeAt(Ke);return Q?new Blob([xe?Rt:$e],{type:gt}):(Ht=new le,Ht.append($e),Ht.getBlob(gt))};oe.HTMLCanvasElement&&!B.toBlob&&(B.mozGetAsFile?B.toBlob=function(Ue,at,gt){var ft=this;setTimeout(function(){gt&&B.toDataURL&&We?Ue(We(ft.toDataURL(at,gt))):Ue(ft.mozGetAsFile("blob",at))})}:B.toDataURL&&We&&(B.msToBlob?B.toBlob=function(Ue,at,gt){var ft=this;setTimeout(function(){(at&&at!=="image/png"||gt)&&B.toDataURL&&We?Ue(We(ft.toDataURL(at,gt))):Ue(ft.msToBlob(at))})}:B.toBlob=function(Ue,at,gt){var ft=this;setTimeout(function(){Ue(We(ft.toDataURL(at,gt)))})})),ve.exports?ve.exports=We:oe.dataURLtoBlob=We}(window)})(u);var f=u.exports,h=function(oe){return typeof Blob>"u"?!1:oe instanceof Blob||Object.prototype.toString.call(oe)==="[object Blob]"},p={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},g=typeof window<"u"&&typeof window.document<"u",v=g?window:{},x=function(oe){return oe>0&&oe<1/0},y=Array.prototype.slice;function _(ve){return Array.from?Array.from(ve):y.call(ve)}var E=/^image\/.+$/;function S(ve){return E.test(ve)}function C(ve){var oe=S(ve)?ve.substr(6):"";return oe==="jpeg"&&(oe="jpg"),".".concat(oe)}var k=String.fromCharCode;function F(ve,oe,B){var Q="",xe;for(B+=oe,xe=oe;xe<B;xe+=1)Q+=k(ve.getUint8(xe));return Q}var L=v.btoa;function W(ve,oe){for(var B=[],Q=8192,xe=new Uint8Array(ve);xe.length>0;)B.push(k.apply(null,_(xe.subarray(0,Q)))),xe=xe.subarray(Q);return"data:".concat(oe,";base64,").concat(L(B.join("")))}function O(ve){var oe=new DataView(ve),B;try{var Q,xe,le;if(oe.getUint8(0)===255&&oe.getUint8(1)===216)for(var je=oe.byteLength,We=2;We+1<je;){if(oe.getUint8(We)===255&&oe.getUint8(We+1)===225){xe=We;break}We+=1}if(xe){var Ue=xe+4,at=xe+10;if(F(oe,Ue,4)==="Exif"){var gt=oe.getUint16(at);if(Q=gt===18761,(Q||gt===19789)&&oe.getUint16(at+2,Q)===42){var ft=oe.getUint32(at+4,Q);ft>=8&&(le=at+ft)}}}if(le){var H=oe.getUint16(le,Q),Yt,$e;for($e=0;$e<H;$e+=1)if(Yt=le+$e*12+2,oe.getUint16(Yt,Q)===274){Yt+=8,B=oe.getUint16(Yt,Q),oe.setUint16(Yt,1,Q);break}}}catch{B=1}return B}function R(ve){var oe=0,B=1,Q=1;switch(ve){case 2:B=-1;break;case 3:oe=-180;break;case 4:Q=-1;break;case 5:oe=90,Q=-1;break;case 6:oe=90;break;case 7:oe=90,B=-1;break;case 8:oe=-90;break}return{rotate:oe,scaleX:B,scaleY:Q}}var j=/\.\d*(?:0|9){12}\d*$/;function me(ve){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return j.test(ve)?Math.round(ve*oe)/oe:ve}function ue(ve){var oe=ve.aspectRatio,B=ve.height,Q=ve.width,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",le=x(Q),je=x(B);if(le&&je){var We=B*oe;(xe==="contain"||xe==="none")&&We>Q||xe==="cover"&&We<Q?B=Q/oe:Q=B*oe}else le?B=Q/oe:je&&(Q=B*oe);return{width:Q,height:B}}function De(ve){for(var oe=_(new Uint8Array(ve)),B=oe.length,Q=[],xe=0;xe+3<B;){var le=oe[xe],je=oe[xe+1];if(le===255&&je===218)break;if(le===255&&je===216)xe+=2;else{var We=oe[xe+2]*256+oe[xe+3],Ue=xe+We+2,at=oe.slice(xe,Ue);Q.push(at),xe=Ue}}return Q.reduce(function(gt,ft){return ft[0]===255&&ft[1]===225?gt.concat(ft):gt},[])}function Ce(ve,oe){var B=_(new Uint8Array(ve));if(B[2]!==255||B[3]!==224)return ve;var Q=B[4]*256+B[5],xe=[255,216].concat(oe,B.slice(4+Q));return new Uint8Array(xe)}var Y=v.ArrayBuffer,re=v.FileReader,X=v.URL||v.webkitURL,_e=/\.\w+$/,ze=v.Compressor,rt=function(){function ve(oe,B){t(this,ve),this.file=oe,this.exif=[],this.image=new Image,this.options=e(e({},p),B),this.aborted=!1,this.result=null,this.init()}return r(ve,[{key:"init",value:function(){var B=this,Q=this.file,xe=this.options;if(!h(Q)){this.fail(new Error("The first argument must be a File or Blob object."));return}var le=Q.type;if(!S(le)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!X||!re){this.fail(new Error("The current browser does not support image compression."));return}Y||(xe.checkOrientation=!1,xe.retainExif=!1);var je=le==="image/jpeg",We=je&&xe.checkOrientation,Ue=je&&xe.retainExif;if(X&&!We&&!Ue)this.load({url:X.createObjectURL(Q)});else{var at=new re;this.reader=at,at.onload=function(gt){var ft=gt.target,H=ft.result,Yt={},$e=1;We&&($e=O(H),$e>1&&s(Yt,R($e))),Ue&&(B.exif=De(H)),We||Ue?!X||$e>1?Yt.url=W(H,le):Yt.url=X.createObjectURL(Q):Yt.url=H,B.load(Yt)},at.onabort=function(){B.fail(new Error("Aborted to read the image with FileReader."))},at.onerror=function(){B.fail(new Error("Failed to read the image with FileReader."))},at.onloadend=function(){B.reader=null},We||Ue?at.readAsArrayBuffer(Q):at.readAsDataURL(Q)}}},{key:"load",value:function(B){var Q=this,xe=this.file,le=this.image;le.onload=function(){Q.draw(e(e({},B),{},{naturalWidth:le.naturalWidth,naturalHeight:le.naturalHeight}))},le.onabort=function(){Q.fail(new Error("Aborted to load the image."))},le.onerror=function(){Q.fail(new Error("Failed to load the image."))},v.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(v.navigator.userAgent)&&(le.crossOrigin="anonymous"),le.alt=xe.name,le.src=B.url}},{key:"draw",value:function(B){var Q=this,xe=B.naturalWidth,le=B.naturalHeight,je=B.rotate,We=je===void 0?0:je,Ue=B.scaleX,at=Ue===void 0?1:Ue,gt=B.scaleY,ft=gt===void 0?1:gt,H=this.file,Yt=this.image,$e=this.options,Rt=document.createElement("canvas"),Ke=Rt.getContext("2d"),Ht=Math.abs(We)%180===90,mt=($e.resize==="contain"||$e.resize==="cover")&&x($e.width)&&x($e.height),N=Math.max($e.maxWidth,0)||1/0,M=Math.max($e.maxHeight,0)||1/0,se=Math.max($e.minWidth,0)||0,be=Math.max($e.minHeight,0)||0,Re=xe/le,pe=$e.width,Ye=$e.height;if(Ht){var Ze=[M,N];N=Ze[0],M=Ze[1];var xt=[be,se];se=xt[0],be=xt[1];var bt=[Ye,pe];pe=bt[0],Ye=bt[1]}mt&&(Re=pe/Ye);var Ne=ue({aspectRatio:Re,width:N,height:M},"contain");N=Ne.width,M=Ne.height;var ot=ue({aspectRatio:Re,width:se,height:be},"cover");if(se=ot.width,be=ot.height,mt){var Ct=ue({aspectRatio:Re,width:pe,height:Ye},$e.resize);pe=Ct.width,Ye=Ct.height}else{var Mt=ue({aspectRatio:Re,width:pe,height:Ye}),st=Mt.width;pe=st===void 0?xe:st;var ln=Mt.height;Ye=ln===void 0?le:ln}pe=Math.floor(me(Math.min(Math.max(pe,se),N))),Ye=Math.floor(me(Math.min(Math.max(Ye,be),M)));var jt=-pe/2,Bn=-Ye/2,Z=pe,Qe=Ye,ge=[];if(mt){var Te=0,it=0,Je=xe,Lt=le,Kn=ue({aspectRatio:Re,width:xe,height:le},{contain:"cover",cover:"contain"}[$e.resize]);Je=Kn.width,Lt=Kn.height,Te=(xe-Je)/2,it=(le-Lt)/2,ge.push(Te,it,Je,Lt)}if(ge.push(jt,Bn,Z,Qe),Ht){var Oi=[Ye,pe];pe=Oi[0],Ye=Oi[1]}Rt.width=pe,Rt.height=Ye,S($e.mimeType)||($e.mimeType=H.type);var Sn="transparent";H.size>$e.convertSize&&$e.convertTypes.indexOf($e.mimeType)>=0&&($e.mimeType="image/jpeg");var or=$e.mimeType==="image/jpeg";if(or&&(Sn="#fff"),Ke.fillStyle=Sn,Ke.fillRect(0,0,pe,Ye),$e.beforeDraw&&$e.beforeDraw.call(this,Ke,Rt),!this.aborted&&(Ke.save(),Ke.translate(pe/2,Ye/2),Ke.rotate(We*Math.PI/180),Ke.scale(at,ft),Ke.drawImage.apply(Ke,[Yt].concat(ge)),Ke.restore(),$e.drew&&$e.drew.call(this,Ke,Rt),!this.aborted)){var to=function(Fa){if(!Q.aborted){var as=function(ls){return Q.done({naturalWidth:xe,naturalHeight:le,result:ls})};if(Fa&&or&&$e.retainExif&&Q.exif&&Q.exif.length>0){var bc=function(ls){return as(f(W(Ce(ls,Q.exif),$e.mimeType)))};if(Fa.arrayBuffer)Fa.arrayBuffer().then(bc).catch(function(){Q.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var Ws=new re;Q.reader=Ws,Ws.onload=function(Cc){var ls=Cc.target;bc(ls.result)},Ws.onabort=function(){Q.fail(new Error("Aborted to read the compressed image with FileReader."))},Ws.onerror=function(){Q.fail(new Error("Failed to read the compressed image with FileReader."))},Ws.onloadend=function(){Q.reader=null},Ws.readAsArrayBuffer(Fa)}}else as(Fa)}};Rt.toBlob?Rt.toBlob(to,$e.mimeType,$e.quality):to(f(Rt.toDataURL($e.mimeType,$e.quality)))}}},{key:"done",value:function(B){var Q=B.naturalWidth,xe=B.naturalHeight,le=B.result,je=this.file,We=this.image,Ue=this.options;if(X&&We.src.indexOf("blob:")===0&&X.revokeObjectURL(We.src),le)if(Ue.strict&&!Ue.retainExif&&le.size>je.size&&Ue.mimeType===je.type&&!(Ue.width>Q||Ue.height>xe||Ue.minWidth>Q||Ue.minHeight>xe||Ue.maxWidth<Q||Ue.maxHeight<xe))le=je;else{var at=new Date;le.lastModified=at.getTime(),le.lastModifiedDate=at,le.name=je.name,le.name&&le.type!==je.type&&(le.name=le.name.replace(_e,C(le.type)))}else le=je;this.result=le,Ue.success&&Ue.success.call(this,le)}},{key:"fail",value:function(B){var Q=this.options;if(Q.error)Q.error.call(this,B);else throw B}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=ze,ve}},{key:"setDefaults",value:function(B){s(p,B)}}]),ve}();return rt})});var DH=ki((lOe,AH)=>{"use strict";AH.exports=function(){var e={},t=e._fns={};e.emit=function(s,a,l,u,f,h,p){var g=i(s);g.length&&r(s,g,[a,l,u,f,h,p])},e.on=function(s,a){t[s]||(t[s]=[]),t[s].push(a)},e.once=function(s,a){function l(){a.apply(this,arguments),e.off(s,l)}this.on(s,l)},e.off=function(s,a){var l=[];if(s&&a){var u=this._fns[s],f=0,h=u?u.length:0;for(f;f<h;f++)u[f]!==a&&l.push(u[f])}l.length?this._fns[s]=l:delete this._fns[s]};function i(o){var s=t[o]?t[o]:[],a=o.indexOf(":"),l=a===-1?[o]:[o.substring(0,a),o.substring(a+1)],u=Object.keys(t),f=0,h=u.length;for(f;f<h;f++){var p=u[f];if(p==="*"&&(s=s.concat(t[p])),l.length===2&&l[0]===p){s=s.concat(t[p]);break}}return s}function r(o,s,a){var l=0,u=s.length;for(l;l<u&&s[l];l++)s[l].event=o,s[l].apply(s[l],a)}return e}});var dC=ki((uOe,PH)=>{"use strict";function Mfe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}PH.exports=Mfe});var FH=ki((dOe,OH)=>{"use strict";var Tfe=typeof global=="object"&&global&&global.Object===Object&&global;OH.exports=Tfe});var mR=ki((fOe,NH)=>{"use strict";var Ife=FH(),Afe=typeof self=="object"&&self&&self.Object===Object&&self,Dfe=Ife||Afe||Function("return this")();NH.exports=Dfe});var kH=ki((hOe,LH)=>{"use strict";var Rfe=mR(),Pfe=function(){return Rfe.Date.now()};LH.exports=Pfe});var BH=ki((pOe,UH)=>{"use strict";var Ofe=/\s/;function Ffe(n){for(var e=n.length;e--&&Ofe.test(n.charAt(e)););return e}UH.exports=Ffe});var zH=ki((mOe,VH)=>{"use strict";var Nfe=BH(),Lfe=/^\s+/;function kfe(n){return n&&n.slice(0,Nfe(n)+1).replace(Lfe,"")}VH.exports=kfe});var gR=ki((gOe,HH)=>{"use strict";var Ufe=mR(),Bfe=Ufe.Symbol;HH.exports=Bfe});var $H=ki((vOe,WH)=>{"use strict";var jH=gR(),GH=Object.prototype,Vfe=GH.hasOwnProperty,zfe=GH.toString,A0=jH?jH.toStringTag:void 0;function Hfe(n){var e=Vfe.call(n,A0),t=n[A0];try{n[A0]=void 0;var i=!0}catch{}var r=zfe.call(n);return i&&(e?n[A0]=t:delete n[A0]),r}WH.exports=Hfe});var XH=ki((yOe,qH)=>{"use strict";var jfe=Object.prototype,Gfe=jfe.toString;function Wfe(n){return Gfe.call(n)}qH.exports=Wfe});var JH=ki((_Oe,KH)=>{"use strict";var YH=gR(),$fe=$H(),qfe=XH(),Xfe="[object Null]",Yfe="[object Undefined]",ZH=YH?YH.toStringTag:void 0;function Zfe(n){return n==null?n===void 0?Yfe:Xfe:ZH&&ZH in Object(n)?$fe(n):qfe(n)}KH.exports=Zfe});var e5=ki((xOe,QH)=>{"use strict";function Kfe(n){return n!=null&&typeof n=="object"}QH.exports=Kfe});var n5=ki((wOe,t5)=>{"use strict";var Jfe=JH(),Qfe=e5(),ehe="[object Symbol]";function the(n){return typeof n=="symbol"||Qfe(n)&&Jfe(n)==ehe}t5.exports=the});var s5=ki((bOe,o5)=>{"use strict";var nhe=zH(),i5=dC(),ihe=n5(),r5=NaN,rhe=/^[-+]0x[0-9a-f]+$/i,ohe=/^0b[01]+$/i,she=/^0o[0-7]+$/i,ahe=parseInt;function lhe(n){if(typeof n=="number")return n;if(ihe(n))return r5;if(i5(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=i5(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=nhe(n);var t=ohe.test(n);return t||she.test(n)?ahe(n.slice(2),t?2:8):rhe.test(n)?r5:+n}o5.exports=lhe});var c5=ki((COe,l5)=>{"use strict";var che=dC(),vR=kH(),a5=s5(),uhe="Expected a function",dhe=Math.max,fhe=Math.min;function hhe(n,e,t){var i,r,o,s,a,l,u=0,f=!1,h=!1,p=!0;if(typeof n!="function")throw new TypeError(uhe);e=a5(e)||0,che(t)&&(f=!!t.leading,h="maxWait"in t,o=h?dhe(a5(t.maxWait)||0,e):o,p="trailing"in t?!!t.trailing:p);function g(F){var L=i,W=r;return i=r=void 0,u=F,s=n.apply(W,L),s}function v(F){return u=F,a=setTimeout(_,e),f?g(F):s}function x(F){var L=F-l,W=F-u,O=e-L;return h?fhe(O,o-W):O}function y(F){var L=F-l,W=F-u;return l===void 0||L>=e||L<0||h&&W>=o}function _(){var F=vR();if(y(F))return E(F);a=setTimeout(_,x(F))}function E(F){return a=void 0,p&&i?g(F):(i=r=void 0,s)}function S(){a!==void 0&&clearTimeout(a),u=0,i=l=r=a=void 0}function C(){return a===void 0?s:E(vR())}function k(){var F=vR(),L=y(F);if(i=arguments,r=this,l=F,L){if(a===void 0)return v(l);if(h)return clearTimeout(a),a=setTimeout(_,e),g(l)}return a===void 0&&(a=setTimeout(_,e)),s}return k.cancel=S,k.flush=C,k}l5.exports=hhe});var d5=ki((SOe,u5)=>{"use strict";var phe=c5(),mhe=dC(),ghe="Expected a function";function vhe(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(ghe);return mhe(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),phe(n,e,{leading:i,maxWait:e,trailing:r})}u5.exports=vhe});var x5=ki((VOe,_5)=>{"use strict";_5.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let t=e<0,i=Math.abs(e);if(t&&(i=-i),i===0)return"0 B";let r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.min(Math.floor(Math.log(i)/Math.log(1024)),r.length-1),s=Number(i/1024**o),a=r[o];return`${s>=10||s%1===0?Math.round(s):s.toFixed(1)} ${a}`}});var C5=ki((zOe,b5)=>{"use strict";function w5(n,e){this.text=n=n||"",this.hasWild=~n.indexOf("*"),this.separator=e,this.parts=n.split(e)}w5.prototype.match=function(n){var e=!0,t=this.parts,i,r=t.length,o;if(typeof n=="string"||n instanceof String)if(!this.hasWild&&this.text!=n)e=!1;else{for(o=(n||"").split(this.separator),i=0;e&&i<r;i++)t[i]!=="*"&&(i<o.length?e=t[i]===o[i]:e=!1);e=e&&o}else if(typeof n.splice=="function")for(e=[],i=n.length;i--;)this.match(n[i])&&(e[e.length]=n[i]);else if(typeof n=="object"){e={};for(var s in n)this.match(s)&&(e[s]=n[s])}return e};b5.exports=function(n,e,t){var i=new w5(n,t||/[\/\.]/);return typeof e<"u"?i.match(e):i}});var E5=ki((HOe,S5)=>{"use strict";var Che=C5(),She=/[\/\+\.]/;S5.exports=function(n,e){function t(i){var r=Che(i,n,She);return r&&r.length>=2}return e?t(e.split(";")[0]):t}});function ZS(n,e){return Object.is(n,e)}var Zi=null,Uv=!1,KS=1,vs=Symbol("SIGNAL");function _n(n){let e=Zi;return Zi=n,e}function JS(){return Zi}var jp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gp(n){if(Uv)throw new Error("");if(Zi===null)return;Zi.consumerOnSignalRead(n);let e=Zi.nextProducerIndex++;if(Hv(Zi),e<Zi.producerNode.length&&Zi.producerNode[e]!==n&&Hp(Zi)){let t=Zi.producerNode[e];zv(t,Zi.producerIndexOfThis[e])}Zi.producerNode[e]!==n&&(Zi.producerNode[e]=n,Zi.producerIndexOfThis[e]=Hp(Zi)?iO(n,Zi,e):0),Zi.producerLastReadVersion[e]=n.version}function nO(){KS++}function QS(n){if(!(Hp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===KS)){if(!n.producerMustRecompute(n)&&!iE(n)){YS(n);return}n.producerRecomputeValue(n),YS(n)}}function eE(n){if(n.liveConsumerNode===void 0)return;let e=Uv;Uv=!0;try{for(let t of n.liveConsumerNode)t.dirty||f7(t)}finally{Uv=e}}function tE(){return Zi?.consumerAllowSignalWrites!==!1}function f7(n){n.dirty=!0,eE(n),n.consumerMarkedDirty?.(n)}function YS(n){n.dirty=!1,n.lastCleanEpoch=KS}function Vv(n){return n&&(n.nextProducerIndex=0),_n(n)}function nE(n,e){if(_n(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Hp(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)zv(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function iE(n){Hv(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(QS(t),i!==t.version))return!0}return!1}function rE(n){if(Hv(n),Hp(n))for(let e=0;e<n.producerNode.length;e++)zv(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function iO(n,e,t){if(rO(n),n.liveConsumerNode.length===0&&oO(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=iO(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function zv(n,e){if(rO(n),n.liveConsumerNode.length===1&&oO(n))for(let i=0;i<n.producerNode.length;i++)zv(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Hv(r),r.producerIndexOfThis[i]=e}}function Hp(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Hv(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function rO(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function oO(n){return n.producerNode!==void 0}function oE(n,e){let t=Object.create(h7);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(QS(t),Gp(t),t.value===Bv)throw t.error;return t.value};return i[vs]=t,i}var qS=Symbol("UNSET"),XS=Symbol("COMPUTING"),Bv=Symbol("ERRORED"),h7=Ve(q({},jp),{value:qS,dirty:!0,error:null,equal:ZS,kind:"computed",producerMustRecompute(n){return n.value===qS||n.value===XS},producerRecomputeValue(n){if(n.value===XS)throw new Error("Detected cycle in computations.");let e=n.value;n.value=XS;let t=Vv(n),i,r=!1;try{i=n.computation(),_n(null),r=e!==qS&&e!==Bv&&i!==Bv&&n.equal(e,i)}catch(o){i=Bv,n.error=o}finally{nE(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function p7(){throw new Error}var sO=p7;function aO(n){sO(n)}function sE(n){sO=n}var m7=null;function aE(n,e){let t=Object.create(jv);t.value=n,e!==void 0&&(t.equal=e);let i=()=>(Gp(t),t.value);return i[vs]=t,i}function Wp(n,e){tE()||aO(n),n.equal(n.value,e)||(n.value=e,g7(n))}function lE(n,e){tE()||aO(n),Wp(n,e(n.value))}var jv=Ve(q({},jp),{equal:ZS,value:void 0,kind:"signal"});function g7(n){n.version++,nO(),eE(n),m7?.()}function cE(n){let e=_n(null);try{return n()}finally{_n(e)}}var uE;function $p(){return uE}function El(n){let e=uE;return uE=n,e}var Gv=Symbol("NotFound");function At(n){return typeof n=="function"}function vf(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wv=vf(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Au(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var mi=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(At(i))try{i()}catch(o){e=o instanceof Wv?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{lO(o)}catch(s){e=e??[],s instanceof Wv?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Wv(e)}}add(e){var t;if(e&&e!==this)if(this.closed)lO(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Au(t,e)}remove(e){let{_finalizers:t}=this;t&&Au(t,e),e instanceof n&&e._removeParent(this)}};mi.EMPTY=(()=>{let n=new mi;return n.closed=!0,n})();var dE=mi.EMPTY;function $v(n){return n instanceof mi||n&&"closed"in n&&At(n.remove)&&At(n.add)&&At(n.unsubscribe)}function lO(n){At(n)?n():n.unsubscribe()}var Zs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var yf={setTimeout(n,e,...t){let{delegate:i}=yf;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=yf;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qv(n){yf.setTimeout(()=>{let{onUnhandledError:e}=Zs;if(e)e(n);else throw n})}function Du(){}var cO=fE("C",void 0,void 0);function uO(n){return fE("E",void 0,n)}function dO(n){return fE("N",n,void 0)}function fE(n,e,t){return{kind:n,value:e,error:t}}var Ru=null;function _f(n){if(Zs.useDeprecatedSynchronousErrorHandling){let e=!Ru;if(e&&(Ru={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Ru;if(Ru=null,t)throw i}}else n()}function fO(n){Zs.useDeprecatedSynchronousErrorHandling&&Ru&&(Ru.errorThrown=!0,Ru.error=n)}var Pu=class extends mi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$v(e)&&e.add(this)):this.destination=b7}static create(e,t,i){return new Ks(e,t,i)}next(e){this.isStopped?pE(dO(e),this):this._next(e)}error(e){this.isStopped?pE(uO(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pE(cO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},x7=Function.prototype.bind;function hE(n,e){return x7.call(n,e)}var mE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Xv(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Xv(i)}else Xv(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Xv(t)}}},Ks=class extends Pu{constructor(e,t,i){super();let r;if(At(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Zs.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&hE(e.next,o),error:e.error&&hE(e.error,o),complete:e.complete&&hE(e.complete,o)}):r=e}this.destination=new mE(r)}};function Xv(n){Zs.useDeprecatedSynchronousErrorHandling?fO(n):qv(n)}function w7(n){throw n}function pE(n,e){let{onStoppedNotification:t}=Zs;t&&yf.setTimeout(()=>t(n,e))}var b7={closed:!0,next:Du,error:w7,complete:Du};var xf=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mr(n){return n}function qp(...n){return gE(n)}function gE(n){return n.length===0?mr:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Ut=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=S7(t)?t:new Ks(t,i,r);return _f(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=hO(i),new i((r,o)=>{let s=new Ks({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[xf](){return this}pipe(...t){return gE(t)(this)}toPromise(t){return t=hO(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function hO(n){var e;return(e=n??Zs.Promise)!==null&&e!==void 0?e:Promise}function C7(n){return n&&At(n.next)&&At(n.error)&&At(n.complete)}function S7(n){return n&&n instanceof Pu||C7(n)&&$v(n)}function vE(n){return At(n?.lift)}function Vt(n){return e=>{if(vE(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ft(n,e,t,i,r){return new yE(n,e,t,i,r)}var yE=class extends Pu{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function wf(){return Vt((n,e)=>{let t=null;n._refCount++;let i=Ft(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var bf=class extends Ut{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,vE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mi;let t=this.getSubject();e.add(this.source.subscribe(Ft(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mi.EMPTY)}return e}refCount(){return wf()(this)}};var pO=vf(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ln=(()=>{class n extends Ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Yv(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new pO}next(t){_f(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){_f(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){_f(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?dE:(this.currentObservers=null,o.push(t),new mi(()=>{this.currentObservers=null,Au(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Ut;return t.source=this,t}}return n.create=(e,t)=>new Yv(e,t),n})(),Yv=class extends Ln{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:dE}};var zn=class extends Ln{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Xp={now(){return(Xp.delegate||Date).now()},delegate:void 0};var Zv=class extends Ln{constructor(e=1/0,t=1/0,i=Xp){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var Kv=class extends mi{constructor(e,t){super()}schedule(e,t=0){return this}};var Yp={setInterval(n,e,...t){let{delegate:i}=Yp;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Yp;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Cf=class extends Kv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Yp.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Yp.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Au(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Sf=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Sf.now=Xp.now;var Ef=class extends Sf{constructor(e,t=Sf.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Ml=new Ef(Cf),_E=Ml;var Jv=class extends Cf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var Qv=class extends Ef{};var Zp=new Qv(Jv);var Ci=new Ut(n=>n.complete());function ey(n){return n&&At(n.schedule)}function xE(n){return n[n.length-1]}function Mf(n){return At(xE(n))?n.pop():void 0}function Ba(n){return ey(xE(n))?n.pop():void 0}function mO(n,e){return typeof xE(n)=="number"?n.pop():e}function vO(n,e,t,i){var r=arguments.length,o=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}function yO(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(i.next(f))}catch(h){s(h)}}function l(f){try{u(i.throw(f))}catch(h){s(h)}}function u(f){f.done?o(f.value):r(f.value).then(a,l)}u((i=i.apply(n,e||[])).next())})}function gO(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ou(n){return this instanceof Ou?(this.v=n,this):new Ou(n)}function _O(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){i[g]&&(r[g]=function(x){return new Promise(function(y,_){o.push([g,x,y,_])>1||l(g,x)})},v&&(r[g]=v(r[g])))}function l(g,v){try{u(i[g](v))}catch(x){p(o[0][3],x)}}function u(g){g.value instanceof Ou?Promise.resolve(g.value.v).then(f,h):p(o[0][2],g)}function f(g){l("next",g)}function h(g){l("throw",g)}function p(g,v){g(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}function xO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gO=="function"?gO(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Tf=n=>n&&typeof n.length=="number"&&typeof n!="function";function ty(n){return At(n?.then)}function ny(n){return At(n[xf])}function iy(n){return Symbol.asyncIterator&&At(n?.[Symbol.asyncIterator])}function ry(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function E7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var oy=E7();function sy(n){return At(n?.[oy])}function ay(n){return _O(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Ou(t.read());if(r)return yield Ou(void 0);yield yield Ou(i)}}finally{t.releaseLock()}})}function ly(n){return At(n?.getReader)}function An(n){if(n instanceof Ut)return n;if(n!=null){if(ny(n))return M7(n);if(Tf(n))return T7(n);if(ty(n))return I7(n);if(iy(n))return wO(n);if(sy(n))return A7(n);if(ly(n))return D7(n)}throw ry(n)}function M7(n){return new Ut(e=>{let t=n[xf]();if(At(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function T7(n){return new Ut(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function I7(n){return new Ut(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,qv)})}function A7(n){return new Ut(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function wO(n){return new Ut(e=>{R7(n,e).catch(t=>e.error(t))})}function D7(n){return wO(ay(n))}function R7(n,e){var t,i,r,o;return yO(this,void 0,void 0,function*(){try{for(t=xO(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function so(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function cy(n,e=0){return Vt((t,i)=>{t.subscribe(Ft(i,r=>so(i,n,()=>i.next(r),e),()=>so(i,n,()=>i.complete(),e),r=>so(i,n,()=>i.error(r),e)))})}function uy(n,e=0){return Vt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function bO(n,e){return An(n).pipe(uy(e),cy(e))}function CO(n,e){return An(n).pipe(uy(e),cy(e))}function SO(n,e){return new Ut(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function EO(n,e){return new Ut(t=>{let i;return so(t,e,()=>{i=n[oy](),so(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>At(i?.return)&&i.return()})}function dy(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ut(t=>{so(t,e,()=>{let i=n[Symbol.asyncIterator]();so(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function MO(n,e){return dy(ay(n),e)}function TO(n,e){if(n!=null){if(ny(n))return bO(n,e);if(Tf(n))return SO(n,e);if(ty(n))return CO(n,e);if(iy(n))return dy(n,e);if(sy(n))return EO(n,e);if(ly(n))return MO(n,e)}throw ry(n)}function si(n,e){return e?TO(n,e):An(n)}function Dt(...n){let e=Ba(n);return si(n,e)}function Fc(n,e){let t=At(n)?n:()=>n,i=r=>r.error(t());return new Ut(e?r=>e.schedule(i,0,r):i)}function wE(n){return!!n&&(n instanceof Ut||At(n.lift)&&At(n.subscribe))}var Js=vf(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function xn(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new Ks({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new Js)}});n.subscribe(o)})}function IO(n){return n instanceof Date&&!isNaN(n)}function ut(n,e){return Vt((t,i)=>{let r=0;t.subscribe(Ft(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:P7}=Array;function O7(n,e){return P7(e)?n(...e):n(e)}function If(n){return ut(e=>O7(n,e))}var{isArray:F7}=Array,{getPrototypeOf:N7,prototype:L7,keys:k7}=Object;function fy(n){if(n.length===1){let e=n[0];if(F7(e))return{args:e,keys:null};if(U7(e)){let t=k7(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function U7(n){return n&&typeof n=="object"&&N7(n)===L7}function hy(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Af(...n){let e=Ba(n),t=Mf(n),{args:i,keys:r}=fy(n);if(i.length===0)return si([],e);let o=new Ut(B7(i,e,r?s=>hy(r,s):mr));return t?o.pipe(If(t)):o}function B7(n,e,t=mr){return i=>{AO(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)AO(e,()=>{let u=si(n[l],e),f=!1;u.subscribe(Ft(i,h=>{o[l]=h,f||(f=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function AO(n,e,t){n?so(t,n,e):e()}function DO(n,e,t,i,r,o,s,a){let l=[],u=0,f=0,h=!1,p=()=>{h&&!l.length&&!u&&e.complete()},g=x=>u<i?v(x):l.push(x),v=x=>{o&&e.next(x),u++;let y=!1;An(t(x,f++)).subscribe(Ft(e,_=>{r?.(_),o?g(_):e.next(_)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;l.length&&u<i;){let _=l.shift();s?so(e,s,()=>v(_)):v(_)}p()}catch(_){e.error(_)}}))};return n.subscribe(Ft(e,g,()=>{h=!0,p()})),()=>{a?.()}}function Ui(n,e,t=1/0){return At(e)?Ui((i,r)=>ut((o,s)=>e(i,o,r,s))(An(n(i,r))),t):(typeof e=="number"&&(t=e),Vt((i,r)=>DO(i,r,n,t)))}function py(n=1/0){return Ui(mr,n)}function RO(){return py(1)}function Fu(...n){return RO()(si(n,Ba(n)))}function my(n){return new Ut(e=>{An(n()).subscribe(e)})}function bE(...n){let e=Mf(n),{args:t,keys:i}=fy(n),r=new Ut(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let h=!1;An(t[f]).subscribe(Ft(o,p=>{h||(h=!0,u--),a[f]=p},()=>l--,void 0,()=>{(!l||!h)&&(u||o.next(i?hy(i,a):a),o.complete())}))}});return e?r.pipe(If(e)):r}var V7=["addListener","removeListener"],z7=["addEventListener","removeEventListener"],H7=["on","off"];function Qs(n,e,t,i){if(At(t)&&(i=t,t=void 0),i)return Qs(n,e,t).pipe(If(i));let[r,o]=W7(n)?z7.map(s=>a=>n[s](e,a,t)):j7(n)?V7.map(PO(n,e)):G7(n)?H7.map(PO(n,e)):[];if(!r&&Tf(n))return Ui(s=>Qs(s,e,t))(An(n));if(!r)throw new TypeError("Invalid event target");return new Ut(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function PO(n,e){return t=>i=>n[t](e,i)}function j7(n){return At(n.addListener)&&At(n.removeListener)}function G7(n){return At(n.on)&&At(n.off)}function W7(n){return At(n.addEventListener)&&At(n.removeEventListener)}function Va(n=0,e,t=_E){let i=-1;return e!=null&&(ey(e)?t=e:i=e),new Ut(r=>{let o=IO(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function CE(n=0,e=Ml){return n<0&&(n=0),Va(n,n,e)}function ao(...n){let e=Ba(n),t=mO(n,1/0),i=n;return i.length?i.length===1?An(i[0]):py(t)(si(i,e)):Ci}function Xn(n,e){return Vt((t,i)=>{let r=0;t.subscribe(Ft(i,o=>n.call(e,o,r++)&&i.next(o)))})}function ea(n){return Vt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Ft(t,void 0,void 0,s=>{o=An(n(s,ea(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function OO(n,e,t,i,r){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(Ft(s,f=>{let h=u++;l=a?n(l,f,h):(a=!0,f),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function Nc(n,e){return At(e)?Ui(n,e,1):Ui(n,1)}function Tl(n){return Vt((e,t)=>{let i=!1;e.subscribe(Ft(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Vo(n){return n<=0?()=>Ci:Vt((e,t)=>{let i=0;e.subscribe(Ft(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Df(n,e=mr){return n=n??$7,Vt((t,i)=>{let r,o=!0;t.subscribe(Ft(i,s=>{let a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function $7(n,e){return n===e}function gy(n=q7){return Vt((e,t)=>{let i=!1;e.subscribe(Ft(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function q7(){return new Js}function Lc(n){return Vt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Il(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Xn((r,o)=>n(r,o,i)):mr,Vo(1),t?Tl(e):gy(()=>new Js))}function Rf(n){return n<=0?()=>Ci:Vt((e,t)=>{let i=[];e.subscribe(Ft(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function SE(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Xn((r,o)=>n(r,o,i)):mr,Rf(1),t?Tl(e):gy(()=>new Js))}function Kp(){return Vt((n,e)=>{let t,i=!1;n.subscribe(Ft(e,r=>{let o=t;t=r,i&&e.next([o,r]),i=!0}))})}function Pf(n){let e=1/0,t;return n!=null&&(typeof n=="object"?{count:e=1/0,delay:t}=n:e=n),e<=0?()=>Ci:Vt((i,r)=>{let o=0,s,a=()=>{if(s?.unsubscribe(),s=null,t!=null){let u=typeof t=="number"?Va(t):An(t(o)),f=Ft(r,()=>{f.unsubscribe(),l()});u.subscribe(f)}else l()},l=()=>{let u=!1;s=i.subscribe(Ft(r,void 0,()=>{++o<e?s?a():u=!0:r.complete()})),u&&a()};l()})}function EE(n,e){return Vt(OO(n,e,arguments.length>=2,!0))}function za(n={}){let{connector:e=()=>new Ln,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,u=0,f=!1,h=!1,p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=l=void 0,f=h=!1},v=()=>{let x=s;g(),x?.unsubscribe()};return Vt((x,y)=>{u++,!h&&!f&&p();let _=l=l??e();y.add(()=>{u--,u===0&&!h&&!f&&(a=ME(v,r))}),_.subscribe(y),!s&&u>0&&(s=new Ks({next:E=>_.next(E),error:E=>{h=!0,p(),a=ME(g,t,E),_.error(E)},complete:()=>{f=!0,p(),a=ME(g,i),_.complete()}}),An(x).subscribe(s))})(o)}}function ME(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Ks({next:()=>{i.unsubscribe(),n()}});return An(e(...t)).subscribe(i)}function Jp(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,za({connector:()=>new Zv(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function ys(...n){let e=Ba(n);return Vt((t,i)=>{(e?Fu(n,t,e):Fu(n,t)).subscribe(i)})}function Si(n,e){return Vt((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(Ft(i,l=>{r?.unsubscribe();let u=0,f=o++;An(n(l,f)).subscribe(r=Ft(i,h=>i.next(e?e(l,h,f,u++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function _s(n){return Vt((e,t)=>{An(n).subscribe(Ft(t,()=>t.complete(),Du)),!t.closed&&e.subscribe(t)})}function Ei(n,e,t){let i=At(n)||e||t?{next:n,error:e,complete:t}:n;return i?Vt((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Ft(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):mr}function FO(n,e){return Vt((t,i)=>{let{leading:r=!0,trailing:o=!1}=e??{},s=!1,a=null,l=null,u=!1,f=()=>{l?.unsubscribe(),l=null,o&&(g(),u&&i.complete())},h=()=>{l=null,u&&i.complete()},p=v=>l=An(n(v)).subscribe(Ft(i,f,h)),g=()=>{if(s){s=!1;let v=a;a=null,i.next(v),!u&&p(v)}};t.subscribe(Ft(i,v=>{s=!0,a=v,!(l&&!l.closed)&&(r?g():p(v))},()=>{u=!0,!(o&&s&&l&&!l.closed)&&i.complete()}))})}function TE(n,e=Ml,t){let i=Va(n,e);return FO(()=>i,t)}function IE(...n){let e=Mf(n);return Vt((t,i)=>{let r=n.length,o=new Array(r),s=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)An(n[l]).subscribe(Ft(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(mr))&&(s=null))},Du));t.subscribe(Ft(i,l=>{if(a){let u=[l,...o];i.next(e?e(...u):u)}}))})}var A3="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Ie=class extends Error{code;constructor(e,t){super(JM(e,t)),this.code=e}};function X7(n){return`NG0${Math.abs(n)}`}function JM(n,e){return`${X7(n)}${e?": "+e:""}`}var D3=Symbol("InputSignalNode#UNSET"),Y7=Ve(q({},jv),{transformFn:void 0,applyValueToInputSignal(n,e){Wp(n,e)}});function R3(n,e){let t=Object.create(Y7);t.value=n,t.transformFn=e?.transform;function i(){if(Gp(t),t.value===D3){let r=null;throw new Ie(-950,r)}return t.value}return i[vs]=t,i}function pm(n){return{toString:n}.toString()}var vy="__parameters__";function Z7(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function P3(n,e,t){return pm(()=>{let i=Z7(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,f){let h=l.hasOwnProperty(vy)?l[vy]:Object.defineProperty(l,vy,{value:[]})[vy];for(;h.length<=f;)h.push(null);return(h[f]=h[f]||[]).push(s),l}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var kf=globalThis;function ei(n){for(let e in n)if(n[e]===ei)return e;throw Error("Could not find renamed property on target object.")}function K7(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function uo(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(uo).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function $E(n,e){return n?e?`${n} ${e}`:n:e||""}var J7=ei({__forward_ref__:ei});function mo(n){return n.__forward_ref__=mo,n.toString=function(){return uo(this())},n}function gr(n){return O3(n)?n():n}function O3(n){return typeof n=="function"&&n.hasOwnProperty(J7)&&n.__forward_ref__===mo}function Ae(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yr(n){return{providers:n.providers||[],imports:n.imports||[]}}function e_(n){return NO(n,N3)||NO(n,L3)}function F3(n){return e_(n)!==null}function NO(n,e){return n.hasOwnProperty(e)?n[e]:null}function Q7(n){let e=n&&(n[N3]||n[L3]);return e||null}function LO(n){return n&&(n.hasOwnProperty(kO)||n.hasOwnProperty(e9))?n[kO]:null}var N3=ei({\u0275prov:ei}),kO=ei({\u0275inj:ei}),L3=ei({ngInjectableDef:ei}),e9=ei({ngInjectorDef:ei}),Oe=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Ae({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function k3(n){return n&&!!n.\u0275providers}var t9=ei({\u0275cmp:ei}),n9=ei({\u0275dir:ei}),i9=ei({\u0275pipe:ei}),r9=ei({\u0275mod:ei}),Ay=ei({\u0275fac:ei}),nm=ei({__NG_ELEMENT_ID__:ei}),UO=ei({__NG_ENV_ID__:ei});function mm(n){return typeof n=="string"?n:n==null?"":String(n)}function o9(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():mm(n)}function U3(n,e){throw new Ie(-200,n)}function QM(n,e){throw new Ie(-201,!1)}var en=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(en||{}),qE;function B3(){return qE}function lo(n){let e=qE;return qE=n,e}function V3(n,e,t){let i=e_(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&en.Optional)return null;if(e!==void 0)return e;QM(n,"Injector")}var s9={},Nu=s9,XE="__NG_DI_FLAG__",Dy=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=t;return this.injector.get(e,i.optional?Gv:Nu,i)}},Ry="ngTempTokenPath",a9="ngTokenPath",l9=/\n/gm,c9="\u0275",BO="__source";function u9(n,e=en.Default){if($p()===void 0)throw new Ie(-203,!1);if($p()===null)return V3(n,void 0,e);{let t=$p(),i;return t instanceof Dy?i=t.injector:i=t,i.get(n,e&en.Optional?null:void 0,e)}}function He(n,e=en.Default){return(B3()||u9)(gr(n),e)}function ee(n,e=en.Default){return He(n,t_(e))}function t_(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function YE(n){let e=[];for(let t=0;t<n.length;t++){let i=gr(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Ie(900,!1);let r,o=en.Default;for(let s=0;s<i.length;s++){let a=i[s],l=d9(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(He(r,o))}else e.push(He(i))}return e}function z3(n,e){return n[XE]=e,n.prototype[XE]=e,n}function d9(n){return n[XE]}function f9(n,e,t,i){let r=n[Ry];throw e[BO]&&r.unshift(e[BO]),n.message=h9(`
`+n.message,r,t,i),n[a9]=r,n[Ry]=null,n}function h9(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==c9?n.slice(2):n;let r=uo(e);if(Array.isArray(e))r=e.map(uo).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):uo(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(l9,`
  `)}`}var H3=z3(P3("Optional"),8);var p9=z3(P3("SkipSelf"),4);function ku(n,e){let t=n.hasOwnProperty(Ay);return t?n[Ay]:null}function m9(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function g9(n){return n.flat(Number.POSITIVE_INFINITY)}function eT(n,e){n.forEach(t=>Array.isArray(t)?eT(t,e):e(t))}function j3(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Py(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function v9(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function y9(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function n_(n,e,t){let i=gm(n,e);return i>=0?n[i|1]=t:(i=~i,y9(n,i,e,t)),i}function AE(n,e){let t=gm(n,e);if(t>=0)return n[t|1]}function gm(n,e){return _9(n,e,1)}function _9(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var ja={},co=[],Uu=new Oe(""),G3=new Oe("",-1),W3=new Oe(""),Oy=class{get(e,t=Nu){if(t===Nu){let i=new Error(`NullInjectorError: No provider for ${uo(e)}!`);throw i.name="NullInjectorError",i}return t}};function $3(n,e){let t=n[r9]||null;if(!t&&e===!0)throw new Error(`Type ${uo(n)} does not have '\u0275mod' property.`);return t}function Uf(n){return n[t9]||null}function q3(n){return n[n9]||null}function x9(n){return n[i9]||null}function Bc(n){return{\u0275providers:n}}function w9(...n){return{\u0275providers:X3(!0,n),\u0275fromNgModule:!0}}function X3(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return eT(e,s=>{let a=s;ZE(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Y3(r,o),t}function Y3(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];tT(r,o=>{e(o,i)})}}function ZE(n,e,t,i){if(n=gr(n),!n)return!1;let r=null,o=LO(n),s=!o&&Uf(n);if(!o&&!s){let l=n.ngModule;if(o=LO(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)ZE(u,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{eT(o.imports,f=>{ZE(f,e,t,i)&&(u||=[],u.push(f))})}finally{}u!==void 0&&Y3(u,e)}if(!a){let u=ku(r)||(()=>new r);e({provide:r,useFactory:u,deps:co},r),e({provide:W3,useValue:r,multi:!0},r),e({provide:Uu,useValue:()=>He(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=n;tT(l,f=>{e(f,u)})}}else return!1;return r!==n&&n.providers!==void 0}function tT(n,e){for(let t of n)k3(t)&&(t=t.\u0275providers),Array.isArray(t)?tT(t,e):e(t)}var b9=ei({provide:String,useValue:ei});function Z3(n){return n!==null&&typeof n=="object"&&b9 in n}function C9(n){return!!(n&&n.useExisting)}function S9(n){return!!(n&&n.useFactory)}function Bf(n){return typeof n=="function"}function E9(n){return!!n.useClass}var i_=new Oe(""),Cy={},VO={},DE;function nT(){return DE===void 0&&(DE=new Oy),DE}var Dr=class{},im=class extends Dr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,JE(e,s=>this.processProvider(s)),this.records.set(G3,Of(void 0,this)),r.has("environment")&&this.records.set(Dr,Of(void 0,this));let o=this.records.get(i_);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(W3,co,en.Self))}retrieve(e,t){let i=t;return this.get(e,i.optional?Gv:Nu,i)}destroy(){em(this),this._destroyed=!0;let e=_n(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_n(e)}}onDestroy(e){return em(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){em(this);let t=El(this),i=lo(void 0),r;try{return e()}finally{El(t),lo(i)}}get(e,t=Nu,i=en.Default){if(em(this),e.hasOwnProperty(UO))return e[UO](this);i=t_(i);let r,o=El(this),s=lo(void 0);try{if(!(i&en.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=D9(e)&&e_(e);u&&this.injectableDefInScope(u)?l=Of(KE(e),Cy):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let a=i&en.Self?nT():this.parent;return t=i&en.Optional&&t===Nu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Ry]=a[Ry]||[]).unshift(uo(e)),o)throw a;return f9(a,e,"R3InjectorError",this.source)}else throw a}finally{lo(s),El(o)}}resolveInjectorInitializers(){let e=_n(null),t=El(this),i=lo(void 0),r;try{let o=this.get(Uu,co,en.Self);for(let s of o)s()}finally{El(t),lo(i),_n(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(uo(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=gr(e);let t=Bf(e)?e:gr(e&&e.provide),i=T9(e);if(!Bf(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Of(void 0,Cy,!0),r.factory=()=>YE(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=_n(null);try{return t.value===VO?U3(uo(e)):t.value===Cy&&(t.value=VO,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&A9(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_n(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=gr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function KE(n){let e=e_(n),t=e!==null?e.factory:ku(n);if(t!==null)return t;if(n instanceof Oe)throw new Ie(204,!1);if(n instanceof Function)return M9(n);throw new Ie(204,!1)}function M9(n){if(n.length>0)throw new Ie(204,!1);let t=Q7(n);return t!==null?()=>t.factory(n):()=>new n}function T9(n){if(Z3(n))return Of(void 0,n.useValue);{let e=K3(n);return Of(e,Cy)}}function K3(n,e,t){let i;if(Bf(n)){let r=gr(n);return ku(r)||KE(r)}else if(Z3(n))i=()=>gr(n.useValue);else if(S9(n))i=()=>n.useFactory(...YE(n.deps||[]));else if(C9(n))i=(r,o)=>He(gr(n.useExisting),o!==void 0&&o&en.Optional?en.Optional:void 0);else{let r=gr(n&&(n.useClass||n.provide));if(I9(n))i=()=>new r(...YE(n.deps));else return ku(r)||KE(r)}return i}function em(n){if(n.destroyed)throw new Ie(205,!1)}function Of(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function I9(n){return!!n.deps}function A9(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function D9(n){return typeof n=="function"||typeof n=="object"&&n instanceof Oe}function JE(n,e){for(let t of n)Array.isArray(t)?JE(t,e):t&&k3(t)?JE(t.\u0275providers,e):e(t)}function Ho(n,e){let t;n instanceof im?(em(n),t=n):t=new Dy(n);let i,r=El(t),o=lo(void 0);try{return e()}finally{El(r),lo(o)}}function J3(){return B3()!==void 0||$p()!=null}function iT(n){if(!J3())throw new Ie(-203,!1)}function R9(n){return typeof n=="function"}var zo=0,tn=1,Xt=2,vr=3,na=4,go=5,ra=6,Fy=7,ho=8,Bu=9,Al=10,li=11,rm=12,zO=13,$f=14,po=15,Vu=16,Ff=17,Dl=18,r_=19,Q3=20,kc=21,RE=22,Ny=23,xs=24,PE=25,Bi=26,eF=1,om=6,Rl=7,Ly=8,Vf=9,fo=10;function ia(n){return Array.isArray(n)&&typeof n[eF]=="object"}function qa(n){return Array.isArray(n)&&n[eF]===!0}function rT(n){return(n.flags&4)!==0}function Wu(n){return n.componentOffset>-1}function o_(n){return(n.flags&1)===1}function Ga(n){return!!n.template}function sm(n){return(n[Xt]&512)!==0}function qf(n){return(n[Xt]&256)===256}var QE=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function tF(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var Ji=(()=>{let n=()=>nF;return n.ngInherit=!0,n})();function nF(n){return n.type.prototype.ngOnChanges&&(n.setInput=O9),P9}function P9(){let n=rF(this),e=n?.current;if(e){let t=n.previous;if(t===ja)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function O9(n,e,t,i,r){let o=this.declaredInputs[i],s=rF(n)||F9(n,{previous:ja,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new QE(u&&u.currentValue,t,l===ja),tF(n,e,r,t)}var iF="__ngSimpleChanges__";function rF(n){return n[iF]||null}function F9(n,e){return n[iF]=e}var HO=null;var ai=function(n,e=null,t){HO?.(n,e,t)},oF="svg",N9="math";function oa(n){for(;Array.isArray(n);)n=n[zo];return n}function sF(n,e){return oa(e[n])}function aa(n,e){return oa(e[n.index])}function aF(n,e){return n.data[e]}function lF(n,e){return n[e]}function Wa(n,e){let t=e[n];return ia(t)?t:t[zo]}function L9(n){return(n[Xt]&4)===4}function oT(n){return(n[Xt]&128)===128}function k9(n){return qa(n[vr])}function zf(n,e){return e==null?null:n[e]}function cF(n){n[Ff]=0}function uF(n){n[Xt]&1024||(n[Xt]|=1024,oT(n)&&a_(n))}function U9(n,e){for(;n>0;)e=e[$f],n--;return e}function s_(n){return!!(n[Xt]&9216||n[xs]?.dirty)}function eM(n){n[Al].changeDetectionScheduler?.notify(8),n[Xt]&64&&(n[Xt]|=1024),s_(n)&&a_(n)}function a_(n){n[Al].changeDetectionScheduler?.notify(0);let e=zu(n);for(;e!==null&&!(e[Xt]&8192||(e[Xt]|=8192,!oT(e)));)e=zu(e)}function dF(n,e){if(qf(n))throw new Ie(911,!1);n[kc]===null&&(n[kc]=[]),n[kc].push(e)}function B9(n,e){if(n[kc]===null)return;let t=n[kc].indexOf(e);t!==-1&&n[kc].splice(t,1)}function zu(n){let e=n[vr];return qa(e)?e[vr]:e}function sT(n){return n[Fy]??=[]}function aT(n){return n.cleanup??=[]}function V9(n,e,t,i){let r=sT(e);r.push(t),n.firstCreatePass&&aT(n).push(i,r.length-1)}var Zt={lFrame:yF(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var tM=!1;function z9(){return Zt.lFrame.elementDepthCount}function H9(){Zt.lFrame.elementDepthCount++}function j9(){Zt.lFrame.elementDepthCount--}function lT(){return Zt.bindingsEnabled}function Xf(){return Zt.skipHydrationRootTNode!==null}function G9(n){return Zt.skipHydrationRootTNode===n}function W9(n){Zt.skipHydrationRootTNode=n}function $9(){Zt.skipHydrationRootTNode=null}function hn(){return Zt.lFrame.lView}function Vi(){return Zt.lFrame.tView}function Le(n){return Zt.lFrame.contextLView=n,n[ho]}function ke(n){return Zt.lFrame.contextLView=null,n}function Hr(){let n=fF();for(;n!==null&&n.type===64;)n=n.parent;return n}function fF(){return Zt.lFrame.currentTNode}function q9(){let n=Zt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function $u(n,e){let t=Zt.lFrame;t.currentTNode=n,t.isParent=e}function cT(){return Zt.lFrame.isParent}function uT(){Zt.lFrame.isParent=!1}function X9(){return Zt.lFrame.contextLView}function hF(){return tM}function jO(n){let e=tM;return tM=n,e}function l_(){let n=Zt.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Y9(n){return Zt.lFrame.bindingIndex=n}function c_(){return Zt.lFrame.bindingIndex++}function pF(n){let e=Zt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Z9(){return Zt.lFrame.inI18n}function K9(n,e){let t=Zt.lFrame;t.bindingIndex=t.bindingRootIndex=n,nM(e)}function J9(){return Zt.lFrame.currentDirectiveIndex}function nM(n){Zt.lFrame.currentDirectiveIndex=n}function Q9(n){let e=Zt.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function mF(){return Zt.lFrame.currentQueryIndex}function dT(n){Zt.lFrame.currentQueryIndex=n}function eX(n){let e=n[tn];return e.type===2?e.declTNode:e.type===1?n[go]:null}function gF(n,e,t){if(t&en.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&en.Host);)if(r=eX(o),r===null||(o=o[$f],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Zt.lFrame=vF();return i.currentTNode=e,i.lView=n,!0}function fT(n){let e=vF(),t=n[tn];Zt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vF(){let n=Zt.lFrame,e=n===null?null:n.child;return e===null?yF(n):e}function yF(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _F(){let n=Zt.lFrame;return Zt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var xF=_F;function hT(){let n=_F();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function tX(n){return(Zt.lFrame.contextLView=U9(n,Zt.lFrame.contextLView))[ho]}function qu(){return Zt.lFrame.selectedIndex}function Hu(n){Zt.lFrame.selectedIndex=n}function pT(){let n=Zt.lFrame;return aF(n.tView,n.selectedIndex)}function vm(){Zt.lFrame.currentNamespace=oF}function ym(){nX()}function nX(){Zt.lFrame.currentNamespace=null}function wF(){return Zt.lFrame.currentNamespace}var bF=!0;function u_(){return bF}function Vc(n){bF=n}function iX(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=nF(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function mT(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Sy(n,e,t){CF(n,e,3,t)}function Ey(n,e,t,i){(n[Xt]&3)===t&&CF(n,e,t,i)}function OE(n,e){let t=n[Xt];(t&3)===e&&(t&=16383,t+=1,n[Xt]=t)}function CF(n,e,t,i){let r=i!==void 0?n[Ff]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[Ff]+=65536),(a<o||o==-1)&&(rX(n,t,e,l),n[Ff]=(n[Ff]&4294901760)+l+2),l++}function GO(n,e){ai(4,n,e);let t=_n(null);try{e.call(n)}finally{_n(t),ai(5,n,e)}}function rX(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[Xt]>>14<n[Ff]>>16&&(n[Xt]&3)===e&&(n[Xt]+=16384,GO(a,o)):GO(a,o)}var Lf=-1,ju=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function oX(n){return(n.flags&8)!==0}function sX(n){return(n.flags&16)!==0}function aX(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];lX(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function SF(n){return n===3||n===4||n===6}function lX(n){return n.charCodeAt(0)===64}function Hf(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?WO(n,t,r,null,e[++i]):WO(n,t,r,null,null))}}return n}function WO(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function EF(n){return n!==Lf}function ky(n){return n&32767}function cX(n){return n>>16}function Uy(n,e){let t=cX(n),i=e;for(;t>0;)i=i[$f],t--;return i}var iM=!0;function By(n){let e=iM;return iM=n,e}var uX=256,MF=uX-1,TF=5,dX=0,Ha={};function fX(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(nm)&&(i=t[nm]),i==null&&(i=t[nm]=dX++);let r=i&MF,o=1<<r;e.data[n+(r>>TF)]|=o}function Vy(n,e){let t=IF(n,e);if(t!==-1)return t;let i=e[tn];i.firstCreatePass&&(n.injectorIndex=e.length,FE(i.data,n),FE(e,null),FE(i.blueprint,null));let r=gT(n,e),o=n.injectorIndex;if(EF(r)){let s=ky(r),a=Uy(r,e),l=a[tn].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=r,o}function FE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function IF(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function gT(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=OF(r),i===null)return Lf;if(t++,r=r[$f],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Lf}function rM(n,e,t){fX(n,e,t)}function hX(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(SF(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function AF(n,e,t){if(t&en.Optional||n!==void 0)return n;QM(e,"NodeInjector")}function DF(n,e,t,i){if(t&en.Optional&&i===void 0&&(i=null),(t&(en.Self|en.Host))===0){let r=n[Bu],o=lo(void 0);try{return r?r.get(e,i,t&en.Optional):V3(e,i,t&en.Optional)}finally{lo(o)}}return AF(i,e,t)}function RF(n,e,t,i=en.Default,r){if(n!==null){if(e[Xt]&2048&&!(i&en.Self)){let s=vX(n,e,t,i,Ha);if(s!==Ha)return s}let o=PF(n,e,t,i,Ha);if(o!==Ha)return o}return DF(e,t,i,r)}function PF(n,e,t,i,r){let o=mX(t);if(typeof o=="function"){if(!gF(e,n,i))return i&en.Host?AF(r,t,i):DF(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&en.Optional))QM(t);else return s}finally{xF()}}else if(typeof o=="number"){let s=null,a=IF(n,e),l=Lf,u=i&en.Host?e[po][go]:null;for((a===-1||i&en.SkipSelf)&&(l=a===-1?gT(n,e):e[a+8],l===Lf||!qO(i,!1)?a=-1:(s=e[tn],a=ky(l),e=Uy(l,e)));a!==-1;){let f=e[tn];if($O(o,a,f.data)){let h=pX(a,e,t,s,i,u);if(h!==Ha)return h}l=e[a+8],l!==Lf&&qO(i,e[tn].data[a+8]===u)&&$O(o,a,e)?(s=f,a=ky(l),e=Uy(l,e)):a=-1}}return r}function pX(n,e,t,i,r,o){let s=e[tn],a=s.data[n+8],l=i==null?Wu(a)&&iM:i!=s&&(a.type&3)!==0,u=r&en.Host&&o===a,f=My(a,s,t,l,u);return f!==null?am(e,s,f,a,r):Ha}function My(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,h=i?a:a+f,p=r?a+f:u;for(let g=h;g<p;g++){let v=s[g];if(g<l&&t===v||g>=l&&v.type===t)return g}if(r){let g=s[l];if(g&&Ga(g)&&g.type===t)return l}return null}function am(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof ju){let a=o;a.resolving&&U3(o9(s[t]));let l=By(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?lo(a.injectImpl):null,h=gF(n,i,en.Default);try{o=n[t]=a.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&iX(t,s[t],e)}finally{f!==null&&lo(f),By(l),a.resolving=!1,xF()}}return o}function mX(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(nm)?n[nm]:void 0;return typeof e=="number"?e>=0?e&MF:gX:e}function $O(n,e,t){let i=1<<n;return!!(t[e+(n>>TF)]&i)}function qO(n,e){return!(n&en.Self)&&!(n&en.Host&&e)}var Lu=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return RF(this._tNode,this._lView,e,t_(i),t)}};function gX(){return new Lu(Hr(),hn())}function Pn(n){return pm(()=>{let e=n.prototype.constructor,t=e[Ay]||oM(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Ay]||oM(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function oM(n){return O3(n)?()=>{let e=oM(gr(n));return e&&e()}:ku(n)}function vX(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[Xt]&2048&&!sm(s);){let a=PF(o,s,t,i|en.Self,Ha);if(a!==Ha)return a;let l=o.parent;if(!l){let u=s[Q3];if(u){let f=u.get(t,Ha,i);if(f!==Ha)return f}l=OF(s),s=s[$f]}o=l}return r}function OF(n){let e=n[tn],t=e.type;return t===2?e.declTNode:t===1?n[go]:null}function vT(n){return hX(Hr(),n)}function XO(n,e=null,t=null,i){let r=FF(n,e,t,i);return r.resolveInjectorInitializers(),r}function FF(n,e=null,t=null,i,r=new Set){let o=[t||co,w9(n)];return i=i||(typeof n=="object"?void 0:uo(n)),new im(o,e||nT(),i||null,r)}var ws=class n{static THROW_IF_NOT_FOUND=Nu;static NULL=new Oy;static create(e,t){if(Array.isArray(e))return XO({name:""},t,e,"");{let i=e.name??"";return XO({name:i},e.parent,e.providers,i)}}static \u0275prov=Ae({token:n,providedIn:"any",factory:()=>He(G3)});static __NG_ELEMENT_ID__=-1};var yX=new Oe("");yX.__NG_ELEMENT_ID__=n=>{let e=Hr();if(e===null)throw new Ie(204,!1);if(e.type&2)return e.value;if(n&en.Optional)return null;throw new Ie(204,!1)};var NF=!1,Ll=(()=>{class n{static __NG_ELEMENT_ID__=_X;static __NG_ENV_ID__=t=>t}return n})(),sM=class extends Ll{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return qf(t)?(e(),()=>{}):(dF(t,e),()=>B9(t,e))}};function _X(){return new sM(hn())}var lm=class{},yT=new Oe("",{providedIn:"root",factory:()=>!1});var LF=new Oe(""),kF=new Oe(""),kl=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new zn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>new n})}return n})();var aM=class extends Ln{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,J3()&&(this.destroyRef=ee(Ll,{optional:!0})??void 0,this.pendingTasks=ee(kl,{optional:!0})??void 0)}emit(e){let t=_n(null);try{super.next(e)}finally{_n(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof mi&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Hn=aM;function zy(...n){}function UF(n){let e,t;function i(){n=zy;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function YO(n){return queueMicrotask(()=>n()),()=>{n=zy}}var _T="isAngularZone",Hy=_T+"_ID",xX=0,Qn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Hn(!1);onMicrotaskEmpty=new Hn(!1);onStable=new Hn(!1);onError=new Hn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=NF}=e;if(typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,CX(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(_T)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Ie(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,wX,zy,zy);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},wX={};function xT(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bX(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){UF(()=>{n.callbackScheduled=!1,lM(n),n.isCheckStableRunning=!0,xT(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),lM(n)}function CX(n){let e=()=>{bX(n)},t=xX++;n._inner=n._inner.fork({name:"angular",properties:{[_T]:!0,[Hy]:t,[Hy+t]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(SX(l))return i.invokeTask(o,s,a,l);try{return ZO(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),KO(n)}},onInvoke:(i,r,o,s,a,l,u)=>{try{return ZO(n),i.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!EX(l)&&e(),KO(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,lM(n),xT(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function lM(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KO(n){n._nesting--,xT(n)}var cM=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Hn;onMicrotaskEmpty=new Hn;onStable=new Hn;onError=new Hn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function SX(n){return BF(n,"__ignore_ng_zone__")}function EX(n){return BF(n,"__scheduler_tick__")}function BF(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Pl=class{_console=console;handleError(e){this._console.error("ERROR",e)}},MX=new Oe("",{providedIn:"root",factory:()=>{let n=ee(Qn),e=ee(Pl);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function JO(n,e){return R3(n,e)}function TX(n){return R3(D3,n)}var VF=(JO.required=TX,JO);function IX(){return Yf(Hr(),hn())}function Yf(n,e){return new Kt(aa(n,e))}var Kt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=IX}return n})();function AX(n){return n instanceof Kt?n.nativeElement:n}function zF(n){return typeof n=="function"&&n[vs]!==void 0}function bs(n,e){let t=aE(n,e?.equal),i=t[vs];return t.set=r=>Wp(i,r),t.update=r=>lE(i,r),t.asReadonly=DX.bind(t),t}function DX(){let n=this[vs];if(n.readonlyFn===void 0){let e=()=>this();e[vs]=n,n.readonlyFn=e}return n.readonlyFn}function HF(n){return zF(n)&&typeof n.set=="function"}function RX(){return this._results[Symbol.iterator]()}var cm=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ln}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=g9(e);(this._changesDetected=!m9(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=RX},PX="ngSkipHydration",OX="ngskiphydration";function jF(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let i=e[t];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===OX)return!0}return!1}function GF(n){return n.hasAttribute(PX)}function jy(n){return(n.flags&128)===128}function FX(n){if(jy(n))return!0;let e=n.parent;for(;e;){if(jy(n)||jF(e))return!0;e=e.parent}return!1}var WF=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(WF||{}),$F=new Map,NX=0;function LX(){return NX++}function kX(n){$F.set(n[r_],n)}function uM(n){$F.delete(n[r_])}var QO="__ngContext__";function Zf(n,e){ia(e)?(n[QO]=e[r_],kX(e)):n[QO]=e}function qF(n){return YF(n[rm])}function XF(n){return YF(n[na])}function YF(n){for(;n!==null&&!qa(n);)n=n[na];return n}var dM;function ZF(n){dM=n}function _m(){if(dM!==void 0)return dM;if(typeof document<"u")return document;throw new Ie(210,!1)}var xm=new Oe("",{providedIn:"root",factory:()=>UX}),UX="ng",wT=new Oe(""),la=new Oe("",{providedIn:"platform",factory:()=>"unknown"});var bT=new Oe(""),CT=new Oe("",{providedIn:"root",factory:()=>_m().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function BX(){let n=new wm;return n.store=VX(_m(),ee(xm)),n}var wm=(()=>{class n{static \u0275prov=Ae({token:n,providedIn:"root",factory:BX});store={};onSerializeCallbacks={};get(t,i){return this.store[t]!==void 0?this.store[t]:i}set(t,i){this.store[t]=i}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,i){this.onSerializeCallbacks[t]=i}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function VX(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var KF="h",JF="b",zX="f",HX="n",jX="e",GX="t",ST="c",QF="x",Gy="r",WX="i",$X="n",eN="d";var qX="di";var yy=new Oe(""),tN=!1,nN=new Oe("",{providedIn:"root",factory:()=>tN});var iN=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(iN||{}),d_=new Oe(""),e3=new Set;function Xu(n){e3.has(n)||(e3.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var XX=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>new n})}return n})();var YX="__nghData__",rN=YX;var NE="ngh",ZX="nghm",oN=()=>null;function KX(n,e,t=!1){let i=n.getAttribute(NE);if(i==null)return null;let[r,o]=i.split("|");if(i=t?o:r,!i)return null;let s=o?`|${o}`:"",a=t?r:s,l={};if(i!==""){let f=e.get(wm,null,{optional:!0});f!==null&&(l=f.get(rN,[])[Number(i)])}let u={data:l,firstChild:n.firstChild??null};return t&&(u.firstChild=n,f_(u,0,n.nextSibling)),a?n.setAttribute(NE,a):n.removeAttribute(NE),u}function JX(){oN=KX}function sN(n,e,t=!1){return oN(n,e,t)}function QX(n){let e=n._lView;return e[tn].type===2?null:(sm(e)&&(e=e[Bi]),e)}function eY(n){return n.textContent?.replace(/\s/gm,"")}function tY(n){let e=_m(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=eY(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=t.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function f_(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function fM(n,e){return n.segmentHeads?.[e]??null}function nY(n,e){let t=n.data,i=t[jX]?.[e]??null;return i===null&&t[ST]?.[e]&&(i=ET(n,e)),i}function aN(n,e){return n.data[ST]?.[e]??null}function ET(n,e){let t=aN(n,e)??[],i=0;for(let r of t)i+=r[Gy]*(r[QF]??1);return i}function iY(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[eN];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function bm(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[eN];n.disconnectedNodes=t?new Set(t):null}return!!iY(n)?.has(e)}function LE(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===ZX}function t3(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function rY(n){for(let i of n.body.childNodes)if(LE(i))return;let e=t3(n.body.previousSibling);if(LE(e))return;let t=t3(n.head.lastChild);if(!LE(t))throw new Ie(-507,!1)}function lN(n,e){let t=n.contentQueries;if(t!==null){let i=_n(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];dT(o),a.contentQueries(2,e[s],s)}}}finally{_n(i)}}}function hM(n,e,t){dT(0);let i=_n(null);try{e(n,t)}finally{_n(i)}}function MT(n,e,t){if(rT(e)){let i=_n(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{_n(i)}}}var $a=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}($a||{}),_y;function oY(){if(_y===void 0&&(_y=null,kf.trustedTypes))try{_y=kf.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return _y}function h_(n){return oY()?.createHTML(n)||n}var xy;function cN(){if(xy===void 0&&(xy=null,kf.trustedTypes))try{xy=kf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return xy}function n3(n){return cN()?.createHTML(n)||n}function i3(n){return cN()?.createScriptURL(n)||n}var Ol=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${A3})`}},pM=class extends Ol{getTypeName(){return"HTML"}},mM=class extends Ol{getTypeName(){return"Style"}},gM=class extends Ol{getTypeName(){return"Script"}},vM=class extends Ol{getTypeName(){return"URL"}},yM=class extends Ol{getTypeName(){return"ResourceURL"}};function Cs(n){return n instanceof Ol?n.changingThisBreaksApplicationSecurity:n}function Ul(n,e){let t=sY(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${A3})`)}return t===e}function sY(n){return n instanceof Ol&&n.getTypeName()||null}function uN(n){return new pM(n)}function dN(n){return new mM(n)}function fN(n){return new gM(n)}function hN(n){return new vM(n)}function pN(n){return new yM(n)}function aY(n){let e=new xM(n);return lY()?new _M(e):e}var _M=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(h_(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},xM=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=h_(e),t}};function lY(){try{return!!new window.DOMParser().parseFromString(h_(""),"text/html")}catch{return!1}}var cY=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function p_(n){return n=String(n),n.match(cY)?n:"unsafe:"+n}function Bl(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Cm(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var mN=Bl("area,br,col,hr,img,wbr"),gN=Bl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vN=Bl("rp,rt"),uY=Cm(vN,gN),dY=Cm(gN,Bl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fY=Cm(vN,Bl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),r3=Cm(mN,dY,fY,uY),yN=Bl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hY=Bl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),pY=Bl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),mY=Cm(yN,hY,pY),gY=Bl("script,style,template"),wM=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=_Y(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=yY(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=o3(e).toLowerCase();if(!r3.hasOwnProperty(t))return this.sanitizedSomething=!0,!gY.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!mY.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;yN[a]&&(l=p_(l)),this.buf.push(" ",s,'="',s3(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=o3(e).toLowerCase();r3.hasOwnProperty(t)&&!mN.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(s3(e))}};function vY(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function yY(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw _N(e);return e}function _Y(n){let e=n.firstChild;if(e&&vY(n,e))throw _N(e);return e}function o3(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function _N(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var xY=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wY=/([^\#-~ |!])/g;function s3(n){return n.replace(/&/g,"&amp;").replace(xY,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(wY,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var wy;function TT(n,e){let t=null;try{wy=wy||aY(n);let i=e?String(e):"";t=wy.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=wy.getInertBodyElement(i)}while(i!==o);let a=new wM().sanitizeChildren(a3(t)||t);return h_(a)}finally{if(t){let i=a3(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function a3(n){return"content"in n&&bY(n)?n.content:null}function bY(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var ca=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ca||{});function xN(n){let e=IT();return e?n3(e.sanitize(ca.HTML,n)||""):Ul(n,"HTML")?n3(Cs(n)):TT(_m(),mm(n))}function Pr(n){let e=IT();return e?e.sanitize(ca.URL,n)||"":Ul(n,"URL")?Cs(n):p_(mm(n))}function CY(n){let e=IT();if(e)return i3(e.sanitize(ca.RESOURCE_URL,n)||"");if(Ul(n,"ResourceURL"))return i3(Cs(n));throw new Ie(904,!1)}function SY(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?CY:Pr}function wN(n,e,t){return SY(e,t)(n)}function IT(){let n=hn();return n&&n[Al].sanitizer}var EY=/^>|^->|<!--|-->|--!>|<!-$/g,MY=/(<|>)/g,TY="\u200B$1\u200B";function IY(n){return n.replace(EY,e=>e.replace(MY,TY))}function jo(n){return n.ownerDocument.defaultView}function jr(n){return n.ownerDocument}function AY(n){return n.ownerDocument.body}function bN(n){return n instanceof Function?n():n}function DY(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var CN="ng-template";function RY(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&DY(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(AT(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function AT(n){return n.type===4&&n.value!==CN}function PY(n,e,t){let i=n.type===4&&!t?CN:n.value;return e===i}function OY(n,e,t){let i=4,r=n.attrs,o=r!==null?LY(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!ta(i)&&!ta(l))return!1;if(s&&ta(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!PY(n,l,t)||l===""&&e.length===1){if(ta(i))return!1;s=!0}}else if(i&8){if(r===null||!RY(n,r,l,t)){if(ta(i))return!1;s=!0}}else{let u=e[++a],f=FY(l,r,AT(n),t);if(f===-1){if(ta(i))return!1;s=!0;continue}if(u!==""){let h;if(f>o?h="":h=r[f+1].toLowerCase(),i&2&&u!==h){if(ta(i))return!1;s=!0}}}}return ta(i)||s}function ta(n){return(n&1)===0}function FY(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return kY(e,n)}function SN(n,e,t=!1){for(let i=0;i<e.length;i++)if(OY(n,e[i],t))return!0;return!1}function NY(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function LY(n){for(let e=0;e<n.length;e++){let t=n[e];if(SF(t))return e}return n.length}function kY(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function UY(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function l3(n,e){return n?":not("+e.trim()+")":e}function BY(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!ta(s)&&(e+=l3(o,r),r=""),i=s,o=o||!ta(i);t++}return r!==""&&(e+=l3(o,r)),e}function VY(n){return n.map(BY).join(",")}function zY(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!ta(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var Xa={};function EN(n,e){return n.createText(e)}function HY(n,e,t){n.setValue(e,t)}function MN(n,e){return n.createComment(IY(e))}function DT(n,e,t){return n.createElement(e,t)}function Wy(n,e,t,i,r){n.insertBefore(e,t,i,r)}function TN(n,e,t){n.appendChild(e,t)}function c3(n,e,t,i,r){i!==null?Wy(n,e,t,i,r):TN(n,e,t)}function RT(n,e,t){n.removeChild(null,e,t)}function IN(n){n.textContent=""}function jY(n,e,t){n.setAttribute(e,"style",t)}function GY(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function AN(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&aX(n,e,i),r!==null&&GY(n,e,r),o!==null&&jY(n,e,o)}function PT(n,e,t,i,r,o,s,a,l,u,f){let h=Bi+i,p=h+r,g=WY(h,p),v=typeof u=="function"?u():u;return g[tn]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:f}}function WY(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Xa);return t}function $Y(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=PT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function OT(n,e,t,i,r,o,s,a,l,u,f){let h=e.blueprint.slice();return h[zo]=r,h[Xt]=i|4|128|8|64|1024,(u!==null||n&&n[Xt]&2048)&&(h[Xt]|=2048),cF(h),h[vr]=h[$f]=n,h[ho]=t,h[Al]=s||n&&n[Al],h[li]=a||n&&n[li],h[Bu]=l||n&&n[Bu]||null,h[go]=o,h[r_]=LX(),h[ra]=f,h[Q3]=u,h[po]=e.type==2?n[po]:h,h}function qY(n,e,t){let i=aa(e,n),r=$Y(t),o=n[Al].rendererFactory,s=FT(n,OT(n,r,null,DN(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function DN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function RN(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function FT(n,e){return n[rm]?n[zO][na]=e:n[rm]=e,n[zO]=e,e}function z(n=1){PN(Vi(),hn(),qu()+n,!1)}function PN(n,e,t,i){if(!i)if((e[Xt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Sy(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ey(e,o,0,t)}Hu(t)}var m_=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(m_||{});function bM(n,e,t,i){let r=_n(null);try{let[o,s,a]=n.inputs[t],l=null;(s&m_.SignalBased)!==0&&(l=e[o][vs]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,o):tF(e,l,o,i)}finally{_n(r)}}function ON(n,e,t,i,r){let o=qu(),s=i&2;try{Hu(-1),s&&e.length>Bi&&PN(n,e,Bi,!1),ai(s?2:0,r),t(i,r)}finally{Hu(o),ai(s?3:1,r)}}function g_(n,e,t){eZ(n,e,t),(t.flags&64)===64&&tZ(n,e,t)}function NT(n,e,t=aa){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function XY(n,e,t,i){let o=i.get(nN,tN)||t===$a.ShadowDom,s=n.selectRootElement(e,o);return YY(s),s}function YY(n){FN(n)}var FN=()=>null;function ZY(n){GF(n)?IN(n):tY(n)}function KY(){FN=ZY}function JY(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function NN(n,e,t,i,r,o,s,a){if(!a&&kT(e,n,t,i,r)){Wu(e)&&QY(t,e.index);return}if(e.type&3){let l=aa(e,t);i=JY(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(l,i,r)}else e.type&12}function QY(n,e){let t=Wa(e,n);t[Xt]&16||(t[Xt]|=64)}function eZ(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Wu(t)&&qY(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Vy(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],l=am(e,n,s,t);if(Zf(l,e),o!==null&&oZ(e,s-i,l,a,t,o),Ga(a)){let u=Wa(t.index,e);u[ho]=am(e,n,s,t)}}}function tZ(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=J9();try{Hu(o);for(let a=i;a<r;a++){let l=n.data[a],u=e[a];nM(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&nZ(l,u)}}finally{Hu(-1),nM(s)}}function nZ(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function LT(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];SN(e,o.selectors,!1)&&(i??=[],Ga(o)?i.unshift(o):i.push(o))}return i}function iZ(n,e,t,i,r,o){let s=aa(n,e);rZ(e[li],s,o,n.value,t,i,r)}function rZ(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?mm(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function oZ(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];bM(i,t,l,u)}}function sZ(n,e){let t=n[Bu],i=t?t.get(Pl,null):null;i&&i.handleError(e)}function kT(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],h=e.data[u];bM(h,t[u],f,r),a=!0}if(o)for(let l of o){let u=t[l],f=e.data[l];bM(f,u,i,r),a=!0}return a}function aZ(n,e){let t=Wa(e,n),i=t[tn];lZ(i,t);let r=t[zo];r!==null&&t[ra]===null&&(t[ra]=sN(r,t[Bu])),ai(18),UT(i,t,t[ho]),ai(19,t[ho])}function lZ(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function UT(n,e,t){fT(e);try{let i=n.viewQuery;i!==null&&hM(1,i,t);let r=n.template;r!==null&&ON(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Dl]?.finishViewCreation(n),n.staticContentQueries&&lN(n,e),n.staticViewQueries&&hM(2,n.viewQuery,t);let o=n.components;o!==null&&cZ(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Xt]&=-5,hT()}}function cZ(n,e){for(let t=0;t<e.length;t++)aZ(n,e[t])}function LN(n,e,t,i){let r=_n(null);try{let o=e.tView,a=n[Xt]&4096?4096:16,l=OT(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[e.index];l[Vu]=u;let f=n[Dl];return f!==null&&(l[Dl]=f.createEmbeddedView(o)),UT(o,l,t),l}finally{_n(r)}}function CM(n,e){return!e||e.firstChild===null||jy(n)}var uZ;function BT(n,e){return uZ(n,e)}var Fl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Fl||{});function Yu(n){return(n.flags&32)===32}function Nf(n,e,t,i,r){if(i!=null){let o,s=!1;qa(i)?o=i:ia(i)&&(s=!0,i=i[zo]);let a=oa(i);n===0&&t!==null?r==null?TN(e,t,a):Wy(e,t,a,r||null,!0):n===1&&t!==null?Wy(e,t,a,r||null,!0):n===2?RT(e,a,s):n===3&&e.destroyNode(a),o!=null&&xZ(e,n,o,t,r)}}function dZ(n,e){kN(n,e),e[zo]=null,e[go]=null}function fZ(n,e,t,i,r,o){i[zo]=r,i[go]=e,y_(n,i,t,1,r,o)}function kN(n,e){e[Al].changeDetectionScheduler?.notify(9),y_(n,e,e[li],2,null,null)}function hZ(n){let e=n[rm];if(!e)return kE(n[tn],n);for(;e;){let t=null;if(ia(e))t=e[rm];else{let i=e[fo];i&&(t=i)}if(!t){for(;e&&!e[na]&&e!==n;)ia(e)&&kE(e[tn],e),e=e[vr];e===null&&(e=n),ia(e)&&kE(e[tn],e),t=e&&e[na]}e=t}}function VT(n,e){let t=n[Vf],i=t.indexOf(e);t.splice(i,1)}function UN(n,e){if(qf(e))return;let t=e[li];t.destroyNode&&y_(n,e,t,3,null,null),hZ(e)}function kE(n,e){if(qf(e))return;let t=_n(null);try{e[Xt]&=-129,e[Xt]|=256,e[xs]&&rE(e[xs]),mZ(n,e),pZ(n,e),e[tn].type===1&&e[li].destroy();let i=e[Vu];if(i!==null&&qa(e[vr])){i!==e[vr]&&VT(i,e);let r=e[Dl];r!==null&&r.detachView(n)}uM(e)}finally{_n(t)}}function pZ(n,e){let t=n.cleanup,i=e[Fy];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[Fy]=null);let r=e[kc];if(r!==null){e[kc]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[Ny];if(o!==null){e[Ny]=null;for(let s of o)s.destroy()}}function mZ(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof ju)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];ai(4,a,l);try{l.call(a)}finally{ai(5,a,l)}}else{ai(4,r,o);try{o.call(r)}finally{ai(5,r,o)}}}}}function BN(n,e,t){return gZ(n,e.parent,t)}function gZ(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[zo];if(Wu(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===$a.None||r===$a.Emulated)return null}return aa(i,t)}function VN(n,e,t){return yZ(n,e,t)}function vZ(n,e,t){return n.type&40?aa(n,t):null}var yZ=vZ,u3;function v_(n,e,t,i){let r=BN(n,i,e),o=e[li],s=i.parent||e[go],a=VN(s,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)c3(o,r,t[l],a,!1);else c3(o,r,t,a,!1);u3!==void 0&&u3(o,i,e,t,r)}function tm(n,e){if(e!==null){let t=e.type;if(t&3)return aa(e,n);if(t&4)return SM(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return tm(n,i);{let r=n[e.index];return qa(r)?SM(-1,r):oa(r)}}else{if(t&128)return tm(n,e.next);if(t&32)return BT(e,n)()||oa(n[e.index]);{let i=zN(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=zu(n[po]);return tm(r,i)}else return tm(n,e.next)}}}return null}function zN(n,e){if(e!==null){let i=n[po][go],r=e.projection;return i.projection[r]}return null}function SM(n,e){let t=fo+n+1;if(t<e.length){let i=e[t],r=i[tn].firstChild;if(r!==null)return tm(i,r)}return e[Rl]}function zT(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(s&&e===0&&(a&&Zf(oa(a),i),t.flags|=2),!Yu(t))if(l&8)zT(n,e,t.child,i,r,o,!1),Nf(e,n,r,a,o);else if(l&32){let u=BT(t,i),f;for(;f=u();)Nf(e,n,r,f,o);Nf(e,n,r,a,o)}else l&16?HN(n,e,i,t,r,o):Nf(e,n,r,a,o);t=s?t.projectionNext:t.next}}function y_(n,e,t,i,r,o){zT(t,i,n.firstChild,e,r,o,!1)}function _Z(n,e,t){let i=e[li],r=BN(n,t,e),o=t.parent||e[go],s=VN(o,t,e);HN(i,0,e,t,r,s)}function HN(n,e,t,i,r,o){let s=t[po],l=s[go].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];Nf(e,n,r,f,o)}else{let u=l,f=s[vr];jy(i)&&(u.flags|=128),zT(n,e,u,f,r,o,!0)}}function xZ(n,e,t,i,r){let o=t[Rl],s=oa(t);o!==s&&Nf(e,n,i,o,r);for(let a=fo;a<t.length;a++){let l=t[a];y_(l[tn],l,n,e,i,o)}}function wZ(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:Fl.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Fl.Important),n.setStyle(t,i,r,o))}}function $y(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(oa(o)),qa(o)&&bZ(o,i);let s=t.type;if(s&8)$y(n,e,t.child,i);else if(s&32){let a=BT(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=zN(e,t);if(Array.isArray(a))i.push(...a);else{let l=zu(e[po]);$y(l[tn],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function bZ(n,e){for(let t=fo;t<n.length;t++){let i=n[t],r=i[tn].firstChild;r!==null&&$y(i[tn],i,r,e)}n[Rl]!==n[zo]&&e.push(n[Rl])}function jN(n){if(n[PE]!==null){for(let e of n[PE])e.impl.addSequence(e);n[PE].length=0}}var GN=[];function CZ(n){return n[xs]??SZ(n)}function SZ(n){let e=GN.pop()??Object.create(MZ);return e.lView=n,e}function EZ(n){n.lView[xs]!==n&&(n.lView=null,GN.push(n))}var MZ=Ve(q({},jp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{a_(n.lView)},consumerOnSignalRead(){this.lView[xs]=this}});function TZ(n){let e=n[xs]??Object.create(IZ);return e.lView=n,e}var IZ=Ve(q({},jp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=zu(n.lView);for(;e&&!WN(e[tn]);)e=zu(e);e&&uF(e)},consumerOnSignalRead(){this.lView[xs]=this}});function WN(n){return n.type!==2}function $N(n){if(n[Ny]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Ny])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Xt]&8192)}}var AZ=100;function qN(n,e=!0,t=0){let r=n[Al].rendererFactory,o=!1;o||r.begin?.();try{DZ(n,t)}catch(s){throw e&&sZ(n,s),s}finally{o||r.end?.()}}function DZ(n,e){let t=hF();try{jO(!0),EM(n,e);let i=0;for(;s_(n);){if(i===AZ)throw new Ie(103,!1);i++,EM(n,1)}}finally{jO(t)}}function RZ(n,e,t,i){if(qf(e))return;let r=e[Xt],o=!1,s=!1;fT(e);let a=!0,l=null,u=null;o||(WN(n)?(u=CZ(e),l=Vv(u)):JS()===null?(a=!1,u=TZ(e),l=Vv(u)):e[xs]&&(rE(e[xs]),e[xs]=null));try{cF(e),Y9(n.bindingStartIndex),t!==null&&ON(n,e,t,2,i);let f=(r&3)===3;if(!o)if(f){let g=n.preOrderCheckHooks;g!==null&&Sy(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Ey(e,g,0,null),OE(e,0)}if(s||PZ(e),$N(e),XN(e,0),n.contentQueries!==null&&lN(n,e),!o)if(f){let g=n.contentCheckHooks;g!==null&&Sy(e,g)}else{let g=n.contentHooks;g!==null&&Ey(e,g,1),OE(e,1)}FZ(n,e);let h=n.components;h!==null&&ZN(e,h,0);let p=n.viewQuery;if(p!==null&&hM(2,p,i),!o)if(f){let g=n.viewCheckHooks;g!==null&&Sy(e,g)}else{let g=n.viewHooks;g!==null&&Ey(e,g,2),OE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[RE]){for(let g of e[RE])g();e[RE]=null}o||(jN(e),e[Xt]&=-73)}catch(f){throw o||a_(e),f}finally{u!==null&&(nE(u,l),a&&EZ(u)),hT()}}function XN(n,e){for(let t=qF(n);t!==null;t=XF(t))for(let i=fo;i<t.length;i++){let r=t[i];YN(r,e)}}function PZ(n){for(let e=qF(n);e!==null;e=XF(e)){if(!(e[Xt]&2))continue;let t=e[Vf];for(let i=0;i<t.length;i++){let r=t[i];uF(r)}}}function OZ(n,e,t){ai(18);let i=Wa(e,n);YN(i,t),ai(19,i[ho])}function YN(n,e){oT(n)&&EM(n,e)}function EM(n,e){let i=n[tn],r=n[Xt],o=n[xs],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&iE(o)),s||=!1,o&&(o.dirty=!1),n[Xt]&=-9217,s)RZ(i,n,i.template,n[ho]);else if(r&8192){$N(n),XN(n,1);let a=i.components;a!==null&&ZN(n,a,1),jN(n)}}function ZN(n,e,t){for(let i=0;i<e.length;i++)OZ(n,e[i],t)}function FZ(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Hu(~r);else{let o=r,s=t[++i],a=t[++i];K9(s,o);let l=e[o];ai(24,l),a(2,l),ai(25,l)}}}finally{Hu(-1)}}function HT(n,e){let t=hF()?64:1088;for(n[Al].changeDetectionScheduler?.notify(e);n;){n[Xt]|=t;let i=zu(n);if(sm(n)&&!i)return n;n=i}return null}function KN(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function JN(n,e,t,i=!0){let r=e[tn];if(NZ(r,e,n,t),i){let s=SM(t,n),a=e[li],l=a.parentNode(n[Rl]);l!==null&&fZ(r,n[go],a,e,l,s)}let o=e[ra];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function MM(n,e){if(n.length<=fo)return;let t=fo+e,i=n[t];if(i){let r=i[Vu];r!==null&&r!==n&&VT(r,i),e>0&&(n[t-1][na]=i[na]);let o=Py(n,fo+e);dZ(i[tn],i);let s=o[Dl];s!==null&&s.detachView(o[tn]),i[vr]=null,i[na]=null,i[Xt]&=-129}return i}function NZ(n,e,t,i){let r=fo+i,o=t.length;i>0&&(t[r-1][na]=e),i<o-fo?(e[na]=t[r],j3(t,fo+i,e)):(t.push(e),e[na]=null),e[vr]=t;let s=e[Vu];s!==null&&t!==s&&QN(s,e);let a=e[Dl];a!==null&&a.insertView(n),eM(e),e[Xt]|=128}function QN(n,e){let t=n[Vf],i=e[vr];if(ia(i))n[Xt]|=2;else{let r=i[vr][po];e[po]!==r&&(n[Xt]|=2)}t===null?n[Vf]=[e]:t.push(e)}var um=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[tn];return $y(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[ho]}set context(e){this._lView[ho]=e}get destroyed(){return qf(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vr];if(qa(e)){let t=e[Ly],i=t?t.indexOf(this):-1;i>-1&&(MM(e,i),Py(t,i))}this._attachedToViewContainer=!1}UN(this._lView[tn],this._lView)}onDestroy(e){dF(this._lView,e)}markForCheck(){HT(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Xt]&=-129}reattach(){eM(this._lView),this._lView[Xt]|=128}detectChanges(){this._lView[Xt]|=1024,qN(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=sm(this._lView),t=this._lView[Vu];t!==null&&!e&&VT(t,this._lView),kN(this._lView[tn],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=e;let t=sm(this._lView),i=this._lView[Vu];i!==null&&!t&&QN(i,this._lView),eM(this._lView)}};var Rr=(()=>{class n{static __NG_ELEMENT_ID__=UZ}return n})(),LZ=Rr,kZ=class extends LZ{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=LN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new um(r)}};function UZ(){return __(Hr(),hn())}function __(n,e){return n.type&4?new kZ(e,n,Yf(n,e)):null}function Sm(n,e,t,i,r){let o=n.data[e];if(o===null)o=BZ(n,e,t,i,r),Z9()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=q9();o.injectorIndex=s===null?-1:s.injectorIndex}return $u(o,!0),o}function BZ(n,e,t,i,r){let o=fF(),s=cT(),a=s?o:o&&o.parent,l=n.data[e]=zZ(n,a,t,e,i,r);return VZ(n,l,o,s),l}function VZ(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function zZ(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Xf()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HZ=new RegExp(`^(\\d+)*(${JF}|${KF})*(.*)`);function jZ(n){let e=n.match(HZ),[t,i,r,o]=e,s=i?parseInt(i,10):r,a=[];for(let[l,u,f]of o.matchAll(/(f|n)(\d*)/g)){let h=parseInt(f,10)||1;a.push(u,h)}return[s,...a]}function GZ(n){return!n.prev&&n.parent?.type===8}function UE(n){return n.index-Bi}function WZ(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function x_(n,e,t,i){let r=UE(i),o=WZ(n,r);if(o===void 0){let s=n.data[$X];if(s?.[r])o=qZ(s[r],t);else if(e.firstChild===i)o=n.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(GZ(i)){let u=UE(i.parent);o=fM(n,u)}else{let u=aa(l,t);if(a)o=u.firstChild;else{let f=UE(l),h=fM(n,f);if(l.type===2&&h){let g=ET(n,f)+1;o=w_(g,h)}else o=u.nextSibling}}}}return o}function w_(n,e){let t=e;for(let i=0;i<n;i++)t=t.nextSibling;return t}function $Z(n,e){let t=n;for(let i=0;i<e.length;i+=2){let r=e[i],o=e[i+1];for(let s=0;s<o;s++)switch(r){case zX:t=t.firstChild;break;case HX:t=t.nextSibling;break}}return t}function qZ(n,e){let[t,...i]=jZ(n),r;if(t===KF)r=e[po][zo];else if(t===JF)r=AY(e[po][zo]);else{let o=Number(t);r=oa(e[o+Bi])}return $Z(r,i)}var XZ=!1;function YZ(n){XZ=n}function ZZ(n){let e=n[ra];if(e){let{i18nNodes:t,dehydratedIcuData:i}=e;if(t&&i){let r=n[li];for(let o of i.values())KZ(r,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function KZ(n,e,t){for(let i of t.node.cases[t.case]){let r=e.get(i.index-Bi);r&&RT(n,r,!1)}}function e2(n){let e=n[om]??[],i=n[vr][li],r=[];for(let o of e)o.data[qX]!==void 0?r.push(o):JZ(o,i);n[om]=r}function JZ(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[Gy];for(;t<r;){let o=i.nextSibling;RT(e,i,!1),i=o,t++}}}function t2(n){e2(n);let e=n[zo];ia(e)&&qy(e);for(let t=fo;t<n.length;t++)qy(n[t])}function qy(n){ZZ(n);let e=n[tn];for(let t=Bi;t<e.bindingStartIndex;t++)if(qa(n[t])){let i=n[t];t2(i)}else ia(n[t])&&qy(n[t])}function QZ(n){let e=n._views;for(let t of e){let i=QX(t);i!==null&&i[zo]!==null&&(ia(i)?qy(i):t2(i))}}function eK(n,e){let t=[];for(let i of e)for(let r=0;r<(i[QF]??1);r++){let o={data:i,firstChild:null};i[Gy]>0&&(o.firstChild=n,n=w_(i[Gy],n)),t.push(o)}return[n,t]}var n2=()=>null;function tK(n,e){let t=n[om];return!e||t===null||t.length===0?null:t[0].data[WX]===e?t.shift():(e2(n),null)}function nK(){n2=tK}function TM(n,e){return n2(n,e)}var iK=class{},i2=class{},IM=class{resolveComponentFactory(e){throw Error(`No component factory found for ${uo(e)}.`)}},b_=class{static NULL=new IM},Uc=class{},Or=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>rK()}return n})();function rK(){let n=hn(),e=Hr(),t=Wa(e.index,n);return(ia(t)?t:n)[li]}var oK=(()=>{class n{static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>null})}return n})();var BE={},AM=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=t_(i);let r=this.injector.get(e,BE,i);return r!==BE||t===BE?r:this.parentInjector.get(e,t,i)}};function DM(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=$E(r,a);else if(o==2){let l=a,u=e[++s];i=$E(i,l+": "+u+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function ce(n,e=en.Default){let t=hn();if(t===null)return He(n,e);let i=Hr();return RF(i,t,gr(n),e)}function jT(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a,l=null,u=null,f=aK(s);f===null?a=s:[a,l,u]=f,uK(n,e,t,a,o,l,u)}o!==null&&i!==null&&sK(t,i,o)}function sK(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new Ie(-301,!1);i.push(e[r],o)}}function aK(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Ga(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let i=null,r=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,lK(s,i,o,r)),s===e&&(i??=[],i.push(s));return i!==null?(i.push(...e===null?n:n.slice(1)),[i,r,o]):null}function lK(n,e,t,i){let r=e.length;n.findHostDirectiveDefs(n,e,i),t.set(n,[r,e.length-1])}function cK(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function uK(n,e,t,i,r,o,s){let a=i.length,l=!1;for(let p=0;p<a;p++){let g=i[p];!l&&Ga(g)&&(l=!0,cK(n,t,p)),rM(Vy(t,e),n,g.type)}gK(t,n.data.length,a);for(let p=0;p<a;p++){let g=i[p];g.providersResolver&&g.providersResolver(g)}let u=!1,f=!1,h=RN(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let g=i[p];if(t.mergedAttrs=Hf(t.mergedAttrs,g.hostAttrs),fK(n,t,e,h,g),mK(h,g,r),s!==null&&s.has(g)){let[x,y]=s.get(g);t.directiveToIndex.set(g.type,[h,x+t.directiveStart,y+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let v=g.type.prototype;!u&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),h++}dK(n,t,o)}function dK(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))d3(0,e,r,i),d3(1,e,r,i),h3(e,i,!1);else{let o=t.get(r);f3(0,e,o,i),f3(1,e,o,i),h3(e,i,!0)}}}function d3(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),r2(e,o)}}function f3(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),r2(e,s)}}function r2(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function h3(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||AT(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let u=r[l];for(let f of u)if(f===e){s??=[],s.push(l,i[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function fK(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ku(r.type,!0)),s=new ju(o,Ga(r),ce);n.blueprint[i]=s,t[i]=s,hK(n,e,i,RN(n,t,r.hostVars,Xa),r)}function hK(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;pK(s)!=a&&s.push(a),s.push(t,i,o)}}function pK(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function mK(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ga(e)&&(t[""]=n)}}function gK(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function o2(n,e,t,i,r,o,s,a){let l=e.consts,u=zf(l,s),f=Sm(e,n,2,i,u);return o&&jT(e,t,f,zf(l,a),r),f.mergedAttrs=Hf(f.mergedAttrs,f.attrs),f.attrs!==null&&DM(f,f.attrs,!1),f.mergedAttrs!==null&&DM(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function s2(n,e){mT(n,e),rT(e)&&n.queries.elementEnd(e)}var Xy=class extends b_{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Uf(e);return new dm(t,this.ngModule)}};function vK(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&m_.SignalBased)!==0};return r&&(o.transform=r),o})}function yK(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function _K(n,e,t){let i=e instanceof Dr?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new AM(t,i):t}function xK(n){let e=n.get(Uc,null);if(e===null)throw new Ie(407,!1);let t=n.get(oK,null),i=n.get(lm,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i}}function wK(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return DT(e,t,t==="svg"?oF:t==="math"?N9:null)}var dm=class extends i2{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=vK(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=yK(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=VY(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){ai(22);let o=_n(null);try{let s=this.componentDef,a=i?["ng-version","19.2.10"]:zY(this.componentDef.selectors[0]),l=PT(0,null,null,1,0,null,null,null,null,[a],null),u=_K(s,r||this.ngModule,e),f=xK(u),h=f.rendererFactory.createRenderer(null,s),p=i?XY(h,i,s.encapsulation,u):wK(s,h),g=OT(null,l,null,512|DN(s),null,null,f,h,u,null,sN(p,u,!0));g[Bi]=p,fT(g);let v=null;try{let x=o2(Bi,l,g,"#host",()=>[this.componentDef],!0,0);p&&(AN(h,p,x),Zf(p,g)),g_(l,g,x),MT(l,x,g),s2(l,x),t!==void 0&&bK(x,this.ngContentSelectors,t),v=Wa(x.index,g),g[ho]=v[ho],UT(l,g,null)}catch(x){throw v!==null&&uM(v),uM(g),x}finally{ai(23),hT()}return new RM(this.componentType,g)}finally{_n(o)}}},RM=class extends iK{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=aF(t[tn],Bi),this.location=Yf(this._tNode,t),this.instance=Wa(this._tNode.index,t)[ho],this.hostView=this.changeDetectorRef=new um(t,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=kT(i,r[tn],r,e,t);this.previousInputValues.set(e,t);let s=Wa(i.index,r);HT(s,1)}get injector(){return new Lu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bK(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Ya=(()=>{class n{static __NG_ELEMENT_ID__=CK}return n})();function CK(){let n=Hr();return l2(n,hn())}var SK=Ya,a2=class extends SK{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Yf(this._hostTNode,this._hostLView)}get injector(){return new Lu(this._hostTNode,this._hostLView)}get parentInjector(){let e=gT(this._hostTNode,this._hostLView);if(EF(e)){let t=Uy(e,this._hostLView),i=ky(e),r=t[tn].data[i+8];return new Lu(r,t)}else return new Lu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=p3(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-fo}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=TM(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,CM(this._hostTNode,s)),a}createComponent(e,t,i,r,o){let s=e&&!R9(e),a;if(s)a=t;else{let v=t||{};a=v.index,i=v.injector,r=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let l=s?e:new dm(Uf(e)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let x=(s?u:this.parentInjector).get(Dr,null);x&&(o=x)}let f=Uf(l.componentType??{}),h=TM(this._lContainer,f?.id??null),p=h?.firstChild??null,g=l.create(u,r,p,o);return this.insertImpl(g.hostView,a,CM(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(k9(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[vr],u=new a2(l,l[go],l[vr]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return JN(s,r,o,i),e.attachToViewContainerRef(),j3(VE(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=p3(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=MM(this._lContainer,t);i&&(Py(VE(this._lContainer),t),UN(i[tn],i))}detach(e){let t=this._adjustIndex(e,-1),i=MM(this._lContainer,t);return i&&Py(VE(this._lContainer),t)!=null?new um(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function p3(n){return n[Ly]}function VE(n){return n[Ly]||(n[Ly]=[])}function l2(n,e){let t,i=e[n.index];return qa(i)?t=i:(t=KN(i,e,null,n),e[n.index]=t,FT(e,t)),c2(t,e,n,i),new a2(t,n,e)}function EK(n,e){let t=n[li],i=t.createComment(""),r=aa(e,n),o=t.parentNode(r);return Wy(t,o,i,t.nextSibling(r),!1),i}var c2=u2,GT=()=>!1;function MK(n,e,t){return GT(n,e,t)}function u2(n,e,t,i){if(n[Rl])return;let r;t.type&8?r=oa(i):r=EK(e,t),n[Rl]=r}function TK(n,e,t){if(n[Rl]&&n[om])return!0;let i=t[ra],r=e.index-Bi;if(!i||FX(e)||bm(i,r))return!1;let s=fM(i,r),a=i.data[ST]?.[r],[l,u]=eK(s,a);return n[Rl]=l,n[om]=u,!0}function IK(n,e,t,i){GT(n,t,e)||u2(n,e,t,i)}function AK(){c2=IK,GT=TK}var PM=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},OM=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)WT(e,t).matches!==null&&this.queries[t].setDirty()}},Yy=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=kK(e):this.predicate=e}},FM=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},NM=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,DK(t,o)),this.matchTNodeWithReadOption(e,t,My(t,e,o,!1,!1))}else i===Rr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,My(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Kt||r===Ya||r===Rr&&t.type&4)this.addMatch(t.index,-2);else{let o=My(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function DK(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function RK(n,e){return n.type&11?Yf(n,e):n.type&4?__(n,e):null}function PK(n,e,t,i){return t===-1?RK(e,n):t===-2?OK(n,e,i):am(n,n[tn],t,e)}function OK(n,e,t){if(t===Kt)return Yf(e,n);if(t===Rr)return __(e,n);if(t===Ya)return l2(e,n)}function d2(n,e,t,i){let r=e[Dl].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(PK(e,f,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function LM(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=d2(n,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],f=e[-l];for(let h=fo;h<f.length;h++){let p=f[h];p[Vu]===p[vr]&&LM(p[tn],p,u,i)}if(f[Vf]!==null){let h=f[Vf];for(let p=0;p<h.length;p++){let g=h[p];LM(g[tn],g,u,i)}}}}}return i}function FK(n,e){return n[Dl].queries[e].queryList}function f2(n,e,t){let i=new cm((t&4)===4);return V9(n,e,i,i.destroy),(e[Dl]??=new OM).queries.push(new PM(i))-1}function NK(n,e,t){let i=Vi();return i.firstCreatePass&&(h2(i,new Yy(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),f2(i,hn(),e)}function LK(n,e,t,i){let r=Vi();if(r.firstCreatePass){let o=Hr();h2(r,new Yy(e,t,i),o.index),UK(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return f2(r,hn(),t)}function kK(n){return n.split(",").map(e=>e.trim())}function h2(n,e,t){n.queries===null&&(n.queries=new FM),n.queries.track(new NM(e,t))}function UK(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function WT(n,e){return n.queries.getByIndex(e)}function BK(n,e){let t=n[tn],i=WT(t,e);return i.crossesNgTemplate?LM(t,n,e,[]):d2(t,n,i,e)}var jf=class{},$T=class{};var kM=class extends jf{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Xy(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=$3(e);this._bootstrapComponents=bN(o.bootstrap),this._r3Injector=FF(e,t,[{provide:jf,useValue:this},{provide:b_,useValue:this.componentFactoryResolver},...i],uo(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},UM=class extends $T{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new kM(this.moduleType,e,[])}};var Zy=class extends jf{injector;componentFactoryResolver=new Xy(this);instance=null;constructor(e){super();let t=new im([...e.providers,{provide:jf,useValue:this},{provide:b_,useValue:this.componentFactoryResolver}],e.parent||nT(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function C_(n,e,t=null){return new Zy({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var VK=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=X3(!1,t.type),r=i.length>0?C_([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ae({token:n,providedIn:"environment",factory:()=>new n(He(Dr))})}return n})();function dn(n){return pm(()=>{let e=p2(n),t=Ve(q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===WF.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(VK).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$a.Emulated,styles:n.styles||co,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Xu("NgStandalone"),m2(t);let i=n.dependencies;return t.directiveDefs=m3(i,!1),t.pipeDefs=m3(i,!0),t.id=WK(t),t})}function zK(n){return Uf(n)||q3(n)}function HK(n){return n!==null}function _r(n){return pm(()=>({type:n.type,bootstrap:n.bootstrap||co,declarations:n.declarations||co,imports:n.imports||co,exports:n.exports||co,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jK(n,e){if(n==null)return ja;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=m_.None,l=null),t[o]=[i,a,l],e[o]=s}return t}function GK(n){if(n==null)return ja;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function _t(n){return pm(()=>{let e=p2(n);return m2(e),e})}function Kf(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function p2(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ja,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||co,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jK(n.inputs,e),outputs:GK(n.outputs),debugInfo:null}}function m2(n){n.features?.forEach(e=>e(n))}function m3(n,e){if(!n)return null;let t=e?x9:zK;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(HK)}function WK(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $K(n){return Object.getPrototypeOf(n.prototype).constructor}function On(n){let e=$K(n.type),t=!0,i=[n];for(;e;){let r;if(Ga(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ie(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=zE(n.inputs),s.declaredInputs=zE(n.declaredInputs),s.outputs=zE(n.outputs);let a=r.hostBindings;a&&KK(n,a);let l=r.viewQuery,u=r.contentQueries;if(l&&YK(n,l),u&&ZK(n,u),qK(n,r),K7(n.outputs,r.outputs),Ga(r)&&r.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===On&&(t=!1)}}e=Object.getPrototypeOf(e)}XK(i)}function qK(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function XK(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Hf(r.hostAttrs,t=Hf(t,r.hostAttrs))}}function zE(n){return n===ja?{}:n===co?[]:n}function YK(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function ZK(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function KK(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function g2(n){let e=t=>{let i=Array.isArray(n);t.hostDirectives===null?(t.findHostDirectiveDefs=v2,t.hostDirectives=i?n.map(BM):[n]):i?t.hostDirectives.unshift(...n.map(BM)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function v2(n,e,t){if(n.hostDirectives!==null)for(let i of n.hostDirectives)if(typeof i=="function"){let r=i();for(let o of r)g3(BM(o),e,t)}else g3(i,e,t)}function g3(n,e,t){let i=q3(n.directive);JK(i.declaredInputs,n.inputs),v2(i,e,t),t.set(i,n),e.push(i)}function BM(n){return typeof n=="function"?{directive:gr(n),inputs:ja,outputs:ja}:{directive:gr(n.directive),inputs:v3(n.inputs),outputs:v3(n.outputs)}}function v3(n){if(n===void 0||n.length===0)return ja;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function JK(n,e){for(let t in e)if(e.hasOwnProperty(t)){let i=e[t],r=n[t];n[i]=r}}function y2(n){return eJ(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function QK(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function eJ(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function qT(n,e,t){return n[e]=t}function tJ(n,e){return n[e]}function Nl(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function nJ(n,e,t,i){let r=Nl(n,e,t);return Nl(n,e+1,i)||r}function iJ(n,e,t,i,r,o,s,a,l){let u=e.consts,f=Sm(e,n,4,s||null,a||null);lT()&&jT(e,t,f,zf(u,l),LT),f.mergedAttrs=Hf(f.mergedAttrs,f.attrs),mT(e,f);let h=f.tView=PT(2,f,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,f),h.queries=e.queries.embeddedTView(f)),f}function _2(n,e,t,i,r,o,s,a,l,u){let f=t+Bi,h=e.firstCreatePass?iJ(f,e,n,i,r,o,s,a,l):e.data[f];$u(h,!1);let p=x2(e,n,h,t);u_()&&v_(e,n,p,h),Zf(p,n);let g=KN(p,n,p,h);return n[f]=g,FT(n,g),MK(g,h,n),o_(h)&&g_(e,n,h),l!=null&&NT(n,h,u),h}function Pe(n,e,t,i,r,o,s,a){let l=hn(),u=Vi(),f=zf(u.consts,o);return _2(l,u,n,e,t,i,r,f,s,a),Pe}var x2=w2;function w2(n,e,t,i){return Vc(!0),e[li].createComment("")}function rJ(n,e,t,i){let r=e[ra],o=!r||Xf()||Yu(t)||bm(r,i);if(Vc(o),o)return w2(n,e);let s=r.data[GX]?.[i]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=x_(r,n,e,t);f_(r,i,a);let l=ET(r,i);return w_(l,a)}function oJ(){x2=rJ}var XT=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var b2=new Oe("");var sJ=(()=>{class n{static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>new VM})}return n})(),VM=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function zc(n){return!!n&&typeof n.then=="function"}function YT(n){return!!n&&typeof n.subscribe=="function"}var aJ=new Oe("");var C2=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=ee(aJ,{optional:!0})??[];injector=ee(ws);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=Ho(this.injector,r);if(zc(o))t.push(o);else if(YT(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jf=new Oe("");function lJ(){sE(()=>{throw new Ie(600,!1)})}function cJ(n){return n.isBoundToModule}var uJ=10;var sa=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ee(MX);afterRenderManager=ee(XX);zonelessEnabled=ee(yT);rootEffectScheduler=ee(sJ);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ln;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=ee(kl).hasPendingTasks.pipe(ut(t=>!t));constructor(){ee(d_,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=ee(Dr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=ws.NULL){ai(10);let o=t instanceof i2;if(!this._injector.get(C2).done){let g="";throw new Ie(405,g)}let a;o?a=t:a=this._injector.get(b_).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=cJ(a)?void 0:this._injector.get(jf),u=i||a.selector,f=a.create(r,[],u,l),h=f.location.nativeElement,p=f.injector.get(b2,null);return p?.registerApplication(h),f.onDestroy(()=>{this.detachView(f.hostView),Ty(this.components,f),p?.unregisterApplication(h)}),this._loadComponent(f),ai(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ai(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(iN.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Ie(101,!1);let t=_n(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,_n(t),this.afterTick.next(),ai(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Uc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<uJ;)ai(14),this.synchronizeOnce(),ai(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)dJ(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>s_(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Ty(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Jf,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ty(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ie(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ty(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function dJ(n,e,t,i){if(!t&&!s_(n))return;qN(n,e,t&&!i?0:1)}function lr(n,e,t,i){let r=hn(),o=c_();if(Nl(r,o,e)){let s=Vi(),a=pT();iZ(a,r,n,e,t,i)}return lr}function fJ(n,e,t,i){return Nl(n,c_(),t)?e+mm(t)+i:Xa}function by(n,e){return n<<17|e<<2}function Gu(n){return n>>17&32767}function hJ(n){return(n&2)==2}function pJ(n,e){return n&131071|e<<17}function zM(n){return n|2}function Gf(n){return(n&131068)>>2}function HE(n,e){return n&-131069|e<<2}function mJ(n){return(n&1)===1}function HM(n){return n|1}function gJ(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Gu(s),l=Gf(s);n[i]=t;let u=!1,f;if(Array.isArray(t)){let h=t;f=h[1],(f===null||gm(h,f)>0)&&(u=!0)}else f=t;if(r)if(l!==0){let p=Gu(n[a+1]);n[i+1]=by(p,a),p!==0&&(n[p+1]=HE(n[p+1],i)),n[a+1]=pJ(n[a+1],i)}else n[i+1]=by(a,0),a!==0&&(n[a+1]=HE(n[a+1],i)),a=i;else n[i+1]=by(l,0),a===0?a=i:n[l+1]=HE(n[l+1],i),l=i;u&&(n[i+1]=zM(n[i+1])),y3(n,f,i,!0),y3(n,f,i,!1),vJ(e,f,n,i,o),s=by(a,l),o?e.classBindings=s:e.styleBindings=s}function vJ(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&gm(o,e)>=0&&(t[i+1]=HM(t[i+1]))}function y3(n,e,t,i){let r=n[t+1],o=e===null,s=i?Gu(r):Gf(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];yJ(l,e)&&(a=!0,n[s+1]=i?HM(u):zM(u)),s=i?Gu(u):Gf(u)}a&&(n[t+1]=i?zM(r):HM(r))}function yJ(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?gm(n,e)>=0:!1}var Ki={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function S2(n){return n.substring(Ki.key,Ki.keyEnd)}function _J(n){return n.substring(Ki.value,Ki.valueEnd)}function xJ(n){return T2(n),E2(n,Wf(n,0,Ki.textEnd))}function E2(n,e){let t=Ki.textEnd;return t===e?-1:(e=Ki.keyEnd=bJ(n,Ki.key=e,t),Wf(n,e,t))}function wJ(n){return T2(n),M2(n,Wf(n,0,Ki.textEnd))}function M2(n,e){let t=Ki.textEnd,i=Ki.key=Wf(n,e,t);return t===i?-1:(i=Ki.keyEnd=CJ(n,i,t),i=_3(n,i,t,58),i=Ki.value=Wf(n,i,t),i=Ki.valueEnd=SJ(n,i,t),_3(n,i,t,59))}function T2(n){Ki.key=0,Ki.keyEnd=0,Ki.value=0,Ki.valueEnd=0,Ki.textEnd=n.length}function Wf(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function bJ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function CJ(n,e,t){let i;for(;e<t&&((i=n.charCodeAt(e))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)e++;return e}function _3(n,e,t,i){return e=Wf(n,e,t),e<t&&e++,e}function SJ(n,e,t){let i=-1,r=-1,o=-1,s=e,a=s;for(;s<t;){let l=n.charCodeAt(s++);if(l===59)return a;l===34||l===39?a=s=x3(n,l,s,t):e===s-4&&o===85&&r===82&&i===76&&l===40?a=s=x3(n,41,s,t):l>32&&(a=s),o=r,r=i,i=l&-33}return a}function x3(n,e,t,i){let r=-1,o=t;for(;o<i;){let s=n.charCodeAt(o++);if(s==e&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function $(n,e,t){let i=hn(),r=c_();if(Nl(i,r,e)){let o=Vi(),s=pT();NN(o,s,i,n,e,i[li],t,!1)}return $}function jM(n,e,t,i,r){kT(e,n,t,r?"class":"style",i)}function Fn(n,e,t){return D2(n,e,t,!1),Fn}function Dn(n,e){return D2(n,e,null,!0),Dn}function I2(n){R2(F2,EJ,n,!1)}function EJ(n,e){for(let t=wJ(e);t>=0;t=M2(e,t))F2(n,S2(e),_J(e))}function A2(n){R2(PJ,MJ,n,!0)}function MJ(n,e){for(let t=xJ(e);t>=0;t=E2(e,t))n_(n,S2(e),!0)}function D2(n,e,t,i){let r=hn(),o=Vi(),s=pF(2);if(o.firstUpdatePass&&O2(o,n,s,i),e!==Xa&&Nl(r,s,e)){let a=o.data[qu()];N2(o,a,r,r[li],n,r[s+1]=FJ(e,t),i,s)}}function R2(n,e,t,i){let r=Vi(),o=pF(2);r.firstUpdatePass&&O2(r,null,o,i);let s=hn();if(t!==Xa&&Nl(s,o,t)){let a=r.data[qu()];if(L2(a,i)&&!P2(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=$E(l,t||"")),jM(r,a,s,t,i)}else OJ(r,a,s,s[li],s[o+1],s[o+1]=RJ(n,e,t),i,o)}}function P2(n,e){return e>=n.expandoStartIndex}function O2(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[qu()],s=P2(n,t);L2(o,i)&&e===null&&!s&&(e=!1),e=TJ(r,o,e,i),gJ(r,o,e,t,s,i)}}function TJ(n,e,t,i){let r=Q9(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=jE(null,n,e,t,i),t=fm(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=jE(r,n,e,t,i),o===null){let l=IJ(n,e,i);l!==void 0&&Array.isArray(l)&&(l=jE(null,n,e,l[1],i),l=fm(l,e.attrs,i),AJ(n,e,i,l))}else o=DJ(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function IJ(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Gf(i)!==0)return n[Gu(i)]}function AJ(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Gu(r)]=i}function DJ(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=fm(i,s,t)}return fm(i,e.attrs,t)}function jE(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=fm(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function fm(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),n_(n,s,t?!0:e[++o]))}return n===void 0?null:n}function RJ(n,e,t){if(t==null||t==="")return co;let i=[],r=Cs(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function F2(n,e,t){n_(n,e,Cs(t))}function PJ(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&n_(n,i,t)}function OJ(n,e,t,i,r,o,s,a){r===Xa&&(r=co);let l=0,u=0,f=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;f!==null||h!==null;){let p=l<r.length?r[l+1]:void 0,g=u<o.length?o[u+1]:void 0,v=null,x;f===h?(l+=2,u+=2,p!==g&&(v=h,x=g)):h===null||f!==null&&f<h?(l+=2,v=f):(u+=2,v=h,x=g),v!==null&&N2(n,e,t,i,v,x,s,a),f=l<r.length?r[l]:null,h=u<o.length?o[u]:null}}function N2(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],f=mJ(u)?w3(l,e,t,r,Gf(u),s):void 0;if(!Ky(f)){Ky(o)||hJ(u)&&(o=w3(l,null,t,r,a,s));let h=sF(qu(),t);wZ(i,s,h,r,o)}}function w3(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let l=n[r],u=Array.isArray(l),f=u?l[1]:l,h=f===null,p=t[r+1];p===Xa&&(p=h?co:void 0);let g=h?AE(p,i):f===i?p:void 0;if(u&&!Ky(g)&&(g=AE(l,i)),Ky(g)&&(a=g,s))return a;let v=n[r+1];r=s?Gu(v):Gf(v)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=AE(l,i))}return a}function Ky(n){return n!==void 0}function FJ(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=uo(Cs(n)))),n}function L2(n,e){return(n.flags&(e?8:16))!==0}function I(n,e,t,i){let r=hn(),o=Vi(),s=Bi+n,a=r[li],l=o.firstCreatePass?o2(s,o,r,e,LT,lT(),t,i):o.data[s],u=k2(o,r,l,a,e,n);r[s]=u;let f=o_(l);return $u(l,!0),AN(a,u,l),!Yu(l)&&u_()&&v_(o,r,u,l),(z9()===0||f)&&Zf(u,r),H9(),f&&(g_(o,r,l),MT(o,l,r)),i!==null&&NT(r,l),I}function A(){let n=Hr();cT()?uT():(n=n.parent,$u(n,!1));let e=n;G9(e)&&$9(),j9();let t=Vi();return t.firstCreatePass&&s2(t,e),e.classesWithoutHost!=null&&oX(e)&&jM(t,e,hn(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&sX(e)&&jM(t,e,hn(),e.stylesWithoutHost,!1),A}function ye(n,e,t,i){return I(n,e,t,i),A(),ye}var k2=(n,e,t,i,r,o)=>(Vc(!0),DT(i,r,wF()));function NJ(n,e,t,i,r,o){let s=e[ra],a=!s||Xf()||Yu(t)||bm(s,o);if(Vc(a),a)return DT(i,r,wF());let l=x_(s,n,e,t);return aN(s,o)&&f_(s,o,l.nextSibling),s&&(jF(t)||GF(l))&&Wu(t)&&(W9(t),IN(l)),l}function LJ(){k2=NJ}function kJ(n,e,t,i,r){let o=e.consts,s=zf(o,i),a=Sm(e,n,8,"ng-container",s);s!==null&&DM(a,s,!0);let l=zf(o,r);return lT()&&jT(e,t,a,l,LT),a.mergedAttrs=Hf(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function ua(n,e,t){let i=hn(),r=Vi(),o=n+Bi,s=r.firstCreatePass?kJ(o,r,i,e,t):r.data[o];$u(s,!0);let a=U2(r,i,s,n);return i[o]=a,u_()&&v_(r,i,a,s),Zf(a,i),o_(s)&&(g_(r,i,s),MT(r,s,i)),t!=null&&NT(i,s),ua}function da(){let n=Hr(),e=Vi();return cT()?uT():(n=n.parent,$u(n,!1)),e.firstCreatePass&&(mT(e,n),rT(n)&&e.queries.elementEnd(n)),da}function fa(n,e,t){return ua(n,e,t),da(),fa}var U2=(n,e,t,i)=>(Vc(!0),MN(e[li],""));function UJ(n,e,t,i){let r,o=e[ra],s=!o||Xf()||bm(o,i)||Yu(t);if(Vc(s),s)return MN(e[li],"");let a=x_(o,n,e,t),l=nY(o,i);return f_(o,i,a),r=w_(l,a),r}function BJ(){U2=UJ}function yt(){return hn()}var Jy="en-US";var VJ=Jy;function zJ(n){typeof n=="string"&&(VJ=n.toLowerCase().replace(/_/g,"-"))}function b3(n,e,t){return function i(r){if(r===Function)return t;let o=Wu(n)?Wa(n.index,e):e;HT(o,5);let s=e[ho],a=C3(e,s,t,r),l=i.__ngNextListenerFn__;for(;l;)a=C3(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function C3(n,e,t,i){let r=_n(null);try{return ai(6,e,t),t(i)!==!1}catch(o){return HJ(n,o),!1}finally{ai(7,e,t),_n(r)}}function HJ(n,e){let t=n[Bu],i=t?t.get(Pl,null):null;i&&i.handleError(e)}function S3(n,e,t,i,r,o){let s=e[t],a=e[tn],u=a.data[t].outputs[i],f=s[u],h=a.firstCreatePass?aT(a):null,p=sT(e),g=f.subscribe(o),v=p.length;p.push(o,g),h&&h.push(r,n.index,v,-(v+1))}var jJ=new Map;function Me(n,e,t,i){let r=hn(),o=Vi(),s=Hr();return B2(o,r,r[li],s,n,e,i),Me}function GJ(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[Fy],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function B2(n,e,t,i,r,o,s){let a=o_(i),u=n.firstCreatePass?aT(n):null,f=sT(e),h=!0;if(i.type&3||s){let p=aa(i,e),g=s?s(p):p,v=f.length,x=s?_=>s(oa(_[i.index])):i.index,y=null;if(!s&&a&&(y=GJ(n,e,r,i.index)),y!==null){let _=y.__ngLastListenerFn__||y;_.__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,h=!1}else{o=b3(i,e,o);let _=e[Bu].get(xm);jJ.get(_)?.(g,r,o);let S=t.listen(g,r,o);f.push(o,S),u&&u.push(r,x,v,v+1)}}else o=b3(i,e,o);if(h){let p=i.outputs?.[r],g=i.hostDirectiveOutputs?.[r];if(g&&g.length)for(let v=0;v<g.length;v+=2){let x=g[v],y=g[v+1];S3(i,e,x,y,r,o)}if(p&&p.length)for(let v of p)S3(i,e,v,r,r,o)}}function ae(n=1){return tX(n)}function WJ(n,e){let t=null,i=NY(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(i===null?SN(n,o,!0):UY(i,o))return r}return t}function V2(n){let e=hn()[po][go];if(!e.projection){let t=n?n.length:1,i=e.projection=v9(t,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?WJ(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function z2(n,e=0,t,i,r,o){let s=hn(),a=Vi(),l=i?n+1:null;l!==null&&_2(s,a,l,i,r,o,null,t);let u=Sm(a,Bi+n,16,null,t||null);u.projection===null&&(u.projection=e),uT();let h=!s[ra]||Xf();s[po][go].projection[u.projection]===null&&l!==null?$J(s,a,l):h&&!Yu(u)&&_Z(a,s,u)}function $J(n,e,t){let i=Bi+t,r=e.data[i],o=n[i],s=TM(o,r.tView.ssrId),a=LN(n,r,void 0,{dehydratedView:s});JN(o,a,0,CM(r,s))}function ZT(n,e,t,i){LK(n,e,t,i)}function Mi(n,e,t){NK(n,e,t)}function ci(n){let e=hn(),t=Vi(),i=mF();dT(i+1);let r=WT(t,i);if(n.dirty&&L9(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=BK(e,i);n.reset(o,AX),n.notifyOnChanges()}return!0}return!1}function ui(){return FK(hn(),mF())}function qJ(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function zi(n){let e=X9();return lF(e,Bi+n)}function K(n,e=""){let t=hn(),i=Vi(),r=n+Bi,o=i.firstCreatePass?Sm(i,r,1,e,null):i.data[r],s=H2(i,t,o,e,n);t[r]=s,u_()&&v_(i,t,s,o),$u(o,!1)}var H2=(n,e,t,i,r)=>(Vc(!0),EN(e[li],i));function XJ(n,e,t,i,r){let o=e[ra],s=!o||Xf()||Yu(t)||bm(o,r);return Vc(s),s?EN(e[li],i):x_(o,n,e,t)}function YJ(){H2=XJ}function pn(n){return cr("",n,""),pn}function cr(n,e,t){let i=hn(),r=fJ(i,n,e,t);return r!==Xa&&ZJ(i,qu(),r),cr}function ZJ(n,e,t){let i=sF(e,n);HY(n[li],i,t)}function vo(n,e,t){HF(e)&&(e=e());let i=hn(),r=c_();if(Nl(i,r,e)){let o=Vi(),s=pT();NN(o,s,i,n,e,i[li],t,!1)}return vo}function Go(n,e){let t=HF(n);return t&&n.set(e),t}function yo(n,e){let t=hn(),i=Vi(),r=Hr();return B2(i,t,t[li],r,n,e),yo}function KJ(n,e,t){let i=Vi();if(i.firstCreatePass){let r=Ga(n);GM(t,i.data,i.blueprint,r,!0),GM(e,i.data,i.blueprint,r,!1)}}function GM(n,e,t,i,r){if(n=gr(n),Array.isArray(n))for(let o=0;o<n.length;o++)GM(n[o],e,t,i,r);else{let o=Vi(),s=hn(),a=Hr(),l=Bf(n)?n:gr(n.provide),u=K3(n),f=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(Bf(n)||!n.multi){let g=new ju(u,r,ce),v=WE(l,e,r?f:f+p,h);v===-1?(rM(Vy(a,s),o,l),GE(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[v]=g,s[v]=g)}else{let g=WE(l,e,f+p,h),v=WE(l,e,f,f+p),x=g>=0&&t[g],y=v>=0&&t[v];if(r&&!y||!r&&!x){rM(Vy(a,s),o,l);let _=eQ(r?QJ:JJ,t.length,r,i,u);!r&&y&&(t[v].providerFactory=_),GE(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),s.push(_)}else{let _=j2(t[r?v:g],u,!r&&i);GE(o,n,g>-1?g:v,_)}!r&&i&&y&&t[v].componentProviders++}}}function GE(n,e,t,i){let r=Bf(e),o=E9(e);if(r||o){let l=(o?gr(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[i,l]):u[f+1].push(i,l)}else u.push(t,l)}}}function j2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function WE(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function JJ(n,e,t,i,r){return WM(this.multi,[])}function QJ(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=am(i,i[tn],this.providerFactory.index,r);s=l.slice(0,a),WM(o,s);for(let u=a;u<l.length;u++)s.push(l[u])}else s=[],WM(o,s);return s}function WM(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function eQ(n,e,t,i,r){let o=new ju(n,t,ce);return o.multi=[],o.index=e,o.componentProviders=0,j2(o,r,i&&!t),o}function bn(n,e=[]){return t=>{t.providersResolver=(i,r)=>KJ(i,r?r(n):n,e)}}function Zu(n,e,t){let i=l_()+n,r=hn();return r[i]===Xa?qT(r,i,t?e.call(t):e()):tJ(r,i)}function xr(n,e,t,i){return W2(hn(),l_(),n,e,t,i)}function S_(n,e,t,i,r){return tQ(hn(),l_(),n,e,t,i,r)}function G2(n,e){let t=n[e];return t===Xa?void 0:t}function W2(n,e,t,i,r,o){let s=e+t;return Nl(n,s,r)?qT(n,s+1,o?i.call(o,r):i(r)):G2(n,s+1)}function tQ(n,e,t,i,r,o,s){let a=e+t;return nJ(n,a,r,o)?qT(n,a+2,s?i.call(s,r,o):i(r,o)):G2(n,a+2)}function _o(n,e){let t=Vi(),i,r=n+Bi;t.firstCreatePass?(i=nQ(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ku(i.type,!0)),s,a=lo(ce);try{let l=By(!1),u=o();return By(l),qJ(t,hn(),r,u),u}finally{lo(a)}}function nQ(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function xo(n,e,t){let i=n+Bi,r=hn(),o=lF(r,i);return iQ(r,i)?W2(r,l_(),e,o.transform,t,o):o.transform(t)}function iQ(n,e){return n[tn].data[e].pure}function Qi(n,e){return __(n,e)}var hm=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},$2=new hm("19.2.10"),$M=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},q2=(()=>{class n{compileModuleSync(t){return new UM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=$3(t),o=bN(r.declarations).reduce((s,a)=>{let l=Uf(a);return l&&s.push(new dm(l)),s},[]);return new $M(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rQ=(()=>{class n{zone=ee(Qn);changeDetectionScheduler=ee(lm);applicationRef=ee(sa);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oQ({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Qn(Ve(q({},sQ()),{scheduleInRootZone:t})),[{provide:Qn,useFactory:n},{provide:Uu,multi:!0,useFactory:()=>{let i=ee(rQ,{optional:!0});return()=>i.initialize()}},{provide:Uu,multi:!0,useFactory:()=>{let i=ee(aQ);return()=>{i.initialize()}}},e===!0?{provide:LF,useValue:!0}:[],{provide:kF,useValue:t??NF}]}function sQ(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var aQ=(()=>{class n{subscription=new mi;initialized=!1;zone=ee(Qn);pendingTasks=ee(kl);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Qn.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Qn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lQ=(()=>{class n{appRef=ee(sa);taskService=ee(kl);ngZone=ee(Qn);zonelessEnabled=ee(yT);tracing=ee(d_,{optional:!0});disableScheduling=ee(LF,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new mi;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Hy):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ee(kF,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof cM||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?YO:UF;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Hy+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,YO(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cQ(){return typeof $localize<"u"&&$localize.locale||Jy}var KT=new Oe("",{providedIn:"root",factory:()=>ee(KT,en.Optional|en.SkipSelf)||cQ()});var qM=new Oe(""),uQ=new Oe("");function Qp(n){return!n.moduleRef}function dQ(n){let e=Qp(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Qn);return t.run(()=>{Qp(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Pl,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),Qp(n)){let o=()=>e.destroy(),s=n.platformInjector.get(qM);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(qM);s.add(o),n.moduleRef.onDestroy(()=>{Ty(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return hQ(i,t,()=>{let o=e.get(C2);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(KT,Jy);if(zJ(s||Jy),!e.get(uQ,!0))return Qp(n)?e.get(sa):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Qp(n)){let l=e.get(sa);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return fQ(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function fQ(n,e){let t=n.injector.get(sa);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Ie(-403,!1);e.push(n)}function hQ(n,e,t){try{let i=t();return zc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var Iy=null;function pQ(n=[],e){return ws.create({name:e,providers:[{provide:i_,useValue:"platform"},{provide:qM,useValue:new Set([()=>Iy=null])},...n]})}function mQ(n=[]){if(Iy)return Iy;let e=pQ(n);return Iy=e,lJ(),gQ(e),e}function gQ(n){let e=n.get(wT,null);Ho(n,()=>{e?.forEach(t=>t())})}var ur=(()=>{class n{static __NG_ELEMENT_ID__=vQ}return n})();function vQ(n){return yQ(Hr(),hn(),(n&16)===16)}function yQ(n,e,t){if(Wu(n)&&!t){let i=Wa(n.index,e);return new um(i,i)}else if(n.type&175){let i=e[po];return new um(i,e)}return null}var XM=class{constructor(){}supports(e){return y2(e)}create(e){return new YM(e)}},_Q=(n,e)=>e,YM=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||_Q}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<E3(i,r,o)?t:i,a=E3(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,f=l-r;if(u!=f){for(let p=0;p<u;p++){let g=p<o.length?o[p]:o[p]=0,v=g+p;f<=v&&v<u&&(o[p]=g+1)}let h=s.previousIndex;o[h]=f-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!y2(e))throw new Ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,QK(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new ZM(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qy),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qy),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ZM=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},KM=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Qy=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new KM,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function E3(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function M3(){return new JT([new XM])}var JT=(()=>{class n{factories;static \u0275prov=Ae({token:n,providedIn:"root",factory:M3});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||M3()),deps:[[n,new p9,new H3]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new Ie(901,!1)}}return n})();function X2(n){ai(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=mQ(i),o=[oQ({}),{provide:lm,useExisting:lQ},...t||[]],s=new Zy({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return dQ({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ai(9)}}var T3=!1;function xQ(){T3||(T3=!0,JX(),LJ(),YJ(),BJ(),oJ(),AK(),nK(),KY())}function wQ(n){return n.whenStable()}function Y2(){let n=[{provide:yy,useFactory:()=>{let e=!0;return e=!!ee(wm,{optional:!0})?.get(rN,null),e&&Xu("NgHydration"),e}},{provide:Uu,useValue:()=>{YZ(!1),ee(yy)&&(rY(_m()),xQ())},multi:!0}];return n.push({provide:nN,useFactory:()=>ee(yy)},{provide:Jf,useFactory:()=>{if(ee(yy)){let e=ee(sa);return()=>{wQ(e).then(()=>{e.destroyed||QZ(e)})}}return()=>{}},multi:!0}),Bc(n)}function Qf(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Gr(n){return cE(n)}function Vl(n,e){return oE(n,e?.equal)}var I3=class{[vs];constructor(e){this[vs]=e}destroy(){this[vs].destroy()}};var mn=new Oe("");var J2=null;function Ss(){return J2}function QT(n){J2??=n}var Em=class{},e1=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:()=>ee(Q2),providedIn:"platform"})}return n})();var Q2=(()=>{class n extends e1{_location;_history;_doc=ee(mn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ss().getBaseHref(this._doc)}onPopState(t){let i=Ss().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=Ss().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function eL(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Z2(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Hc(n){return n&&n[0]!=="?"?`?${n}`:n}var eh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:()=>ee(nL),providedIn:"root"})}return n})(),tL=new Oe(""),nL=(()=>{class n extends eh{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ee(mn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return eL(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Hc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+Hc(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+Hc(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(He(e1),He(tL,8))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wo=(()=>{class n{_subject=new Ln;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=SQ(Z2(K2(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Hc(i))}normalize(t){return n.stripTrailingSlash(CQ(this._basePath,K2(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hc(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Hc;static joinWithSlash=eL;static stripTrailingSlash=Z2;static \u0275fac=function(i){return new(i||n)(He(eh))};static \u0275prov=Ae({token:n,factory:()=>bQ(),providedIn:"root"})}return n})();function bQ(){return new wo(He(eh))}function CQ(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function K2(n){return n.replace(/\/index.html$/,"")}function SQ(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var t1=/\s+/,iL=[],Wo=(()=>{class n{_ngEl;_renderer;initialClasses=iL;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(t1):iL}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(t1):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(t1).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(ce(Kt),ce(Or))};static \u0275dir=_t({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var E_=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gi=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new E_(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),rL(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);rL(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(ce(Ya),ce(Rr),ce(JT))};static \u0275dir=_t({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function rL(n,e){n.context.$implicit=e.item}var Rn=(()=>{class n{_viewContainer;_context=new M_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oL(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oL(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(ce(Ya),ce(Rr))};static \u0275dir=_t({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),M_=class{$implicit=null;ngIf=null};function oL(n,e){if(n&&!n.createEmbeddedView)throw new Ie(2020,!1)}var ha=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(ce(Ya))};static \u0275dir=_t({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Ji]})}return n})();function EQ(n,e){return new Ie(2100,!1)}var n1=class{createSubscription(e,t){return Gr(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){Gr(()=>e.unsubscribe())}},i1=class{createSubscription(e,t){return e.then(i=>t?.(i),i=>{throw i}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},MQ=new i1,TQ=new n1,Mm=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(zc(t))return MQ;if(YT(t))return TQ;throw EQ(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(ce(ur,16))};static \u0275pipe=Kf({name:"async",type:n,pure:!1})}return n})();var Tm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_r({type:n});static \u0275inj=yr({})}return n})();function Im(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var T_="browser",sL="server";function Am(n){return n===T_}function th(n){return n===sL}var Ku=class{};var Ju=new Oe(""),a1=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Ie(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(He(Ju),He(Qn))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),nh=class{_doc;constructor(e){this._doc=e}manager},I_="ng-app-id";function aL(n){for(let e of n)e.remove()}function lL(n,e){let t=e.createElement("style");return t.textContent=n,t}function IQ(n,e,t,i){let r=n.head?.querySelectorAll(`style[${I_}="${e}"],link[${I_}="${e}"]`);if(r)for(let o of r)o.removeAttribute(I_),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function o1(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var l1=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=th(o),IQ(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,lL);i?.forEach(r=>this.addUsage(r,this.external,o1))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(aL(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])aL(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,lL(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,o1(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(I_,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(He(mn),He(xm),He(CT,8),He(la))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),r1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},c1=/%COMP%/g;var uL="%COMP%",AQ=`_nghost-${uL}`,DQ=`_ngcontent-${uL}`,RQ=!0,PQ=new Oe("",{providedIn:"root",factory:()=>RQ});function OQ(n){return DQ.replace(c1,n)}function FQ(n){return AQ.replace(c1,n)}function dL(n,e){return e.map(t=>t.replace(c1,n))}var Om=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=th(a),this.defaultRenderer=new Rm(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===$a.ShadowDom&&(i=Ve(q({},i),{encapsulation:$a.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof A_?r.applyToHost(t):r instanceof Pm&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(i.encapsulation){case $a.Emulated:o=new A_(l,u,i,this.appId,f,s,a,h,p);break;case $a.ShadowDom:return new s1(l,u,t,i,s,a,this.nonce,h,p);default:o=new Pm(l,u,i,f,s,a,h,p);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(He(a1),He(l1),He(xm),He(PQ),He(mn),He(la),He(Qn),He(CT),He(d_,8))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),Rm=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(r1[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cL(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(cL(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ie(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=r1[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=r1[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Fl.DashCase|Fl.Important)?e.style.setProperty(t,i,r&Fl.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Fl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=Ss().getGlobalEventTarget(this.doc,e),!e))throw new Ie(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function cL(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var s1=class extends Rm{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=dL(r.id,f);for(let p of f){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=o1(p,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pm=class extends Rm{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let f=i.styles;this.styles=u?dL(u,f):f,this.styleUrls=i.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},A_=class extends Pm{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,l,u){let f=r+"-"+i.id;super(e,t,i,o,s,a,l,u,f),this.contentAttr=OQ(f),this.hostAttr=FQ(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var D_=class n extends Em{supportsDOMEvents=!0;static makeCurrent(){QT(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=NQ();return t==null?null:LQ(t)}resetBaseElement(){Fm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Im(document.cookie,e)}},Fm=null;function NQ(){return Fm=Fm||document.querySelector("base"),Fm?Fm.getAttribute("href"):null}function LQ(n){return new URL(n,document.baseURI).pathname}var kQ=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),hL=(()=>{class n extends nh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(He(mn))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),fL=["alt","control","meta","shift"],UQ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BQ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},pL=(()=>{class n extends nh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ss().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),fL.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=UQ[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),fL.forEach(s=>{if(s!==r){let a=BQ[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(He(mn))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})();function Nm(n,e){return X2(q({rootComponent:n},VQ(e)))}function VQ(n){return{appProviders:[...WQ,...n?.providers??[]],platformProviders:GQ}}function zQ(){D_.makeCurrent()}function HQ(){return new Pl}function jQ(){return ZF(document),document}var GQ=[{provide:la,useValue:T_},{provide:wT,useValue:zQ,multi:!0},{provide:mn,useFactory:jQ}];var WQ=[{provide:i_,useValue:"root"},{provide:Pl,useFactory:HQ},{provide:Ju,useClass:hL,multi:!0,deps:[mn]},{provide:Ju,useClass:pL,multi:!0,deps:[mn]},Om,l1,a1,{provide:Uc,useExisting:Om},{provide:Ku,useClass:kQ},[]];var rh=class{},Lm=class{},zl=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var P_=class{encodeKey(e){return mL(e)}encodeValue(e){return mL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function $Q(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var qQ=/%(\d[a-f0-9])/gi,XQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mL(n){return encodeURIComponent(n).replace(qQ,(e,t)=>XQ[t]??e)}function R_(n){return`${n}`}var on=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new P_,e.fromString){if(e.fromObject)throw new Ie(2805,!1);this.map=$Q(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(R_):[R_(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(R_(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(R_(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var O_=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function YQ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function gL(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function vL(n){return typeof Blob<"u"&&n instanceof Blob}function yL(n){return typeof FormData<"u"&&n instanceof FormData}function ZQ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var _L="Content-Type",xL="Accept",bL="X-Request-URL",CL="text/plain",SL="application/json",KQ=`${SL}, ${CL}, */*`,ih=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(YQ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new zl,this.context??=new O_,!this.params)this.params=new on,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||gL(this.body)||vL(this.body)||yL(this.body)||ZQ(this.body)?this.body:this.body instanceof on?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||yL(this.body)?null:vL(this.body)?this.body.type||null:gL(this.body)?null:typeof this.body=="string"?CL:this.body instanceof on?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?SL:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,f=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),u)),e.setParams&&(f=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),f)),new n(t,i,s,{params:f,headers:u,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Qu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Qu||{}),oh=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new zl,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},F_=class n extends oh{constructor(e={}){super(e)}type=Qu.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ed=class n extends oh{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Qu.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},km=class extends oh{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},JQ=200,QQ=204;function u1(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Gi=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof ih)o=t;else{let l;r.headers instanceof zl?l=r.headers:l=new zl(r.headers);let u;r.params&&(r.params instanceof on?u=r.params:u=new on({fromObject:r.params})),o=new ih(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Dt(o).pipe(Nc(l=>this.handler.handle(l)));if(t instanceof ih||r.observe==="events")return s;let a=s.pipe(Xn(l=>l instanceof ed));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ut(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Ie(2806,!1);return l.body}));case"blob":return a.pipe(ut(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Ie(2807,!1);return l.body}));case"text":return a.pipe(ut(l=>{if(l.body!==null&&typeof l.body!="string")throw new Ie(2808,!1);return l.body}));case"json":default:return a.pipe(ut(l=>l.body))}case"response":return a;default:throw new Ie(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new on().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,u1(r,i))}post(t,i,r={}){return this.request("POST",t,u1(r,i))}put(t,i,r={}){return this.request("PUT",t,u1(r,i))}static \u0275fac=function(i){return new(i||n)(He(rh))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})();var eee=new Oe("");function EL(n,e){return e(n)}function tee(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function nee(n,e,t){return(i,r)=>Ho(t,()=>e(i,o=>n(o,r)))}var L_=new Oe(""),f1=new Oe(""),h1=new Oe(""),p1=new Oe("",{providedIn:"root",factory:()=>!0});function iee(){let n=null;return(e,t)=>{n===null&&(n=(ee(L_,{optional:!0})??[]).reduceRight(tee,EL));let i=ee(kl);if(ee(p1)){let o=i.add();return n(e,t).pipe(Lc(()=>i.remove(o)))}else return n(e,t)}}var N_=(()=>{class n extends rh{backend;injector;chain=null;pendingTasks=ee(kl);contributeToStability=ee(p1);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(f1),...this.injector.get(h1,[])]));this.chain=i.reduceRight((r,o)=>nee(r,o,this.injector),EL)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Lc(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(He(Lm),He(Dr))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})();var ree=/^\)\]\}',?\n/,oee=RegExp(`^${bL}:`,"m");function see(n){return"responseURL"in n&&n.responseURL?n.responseURL:oee.test(n.getAllResponseHeaders())?n.getResponseHeader(bL):null}var d1=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Ie(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?si(i.\u0275loadImpl()):Dt(null)).pipe(Si(()=>new Ut(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((x,y)=>s.setRequestHeader(x,y.join(","))),t.headers.has(xL)||s.setRequestHeader(xL,KQ),!t.headers.has(_L)){let x=t.detectContentTypeHeader();x!==null&&s.setRequestHeader(_L,x)}if(t.responseType){let x=t.responseType.toLowerCase();s.responseType=x!=="json"?x:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let x=s.statusText||"OK",y=new zl(s.getAllResponseHeaders()),_=see(s)||t.url;return l=new F_({headers:y,status:s.status,statusText:x,url:_}),l},f=()=>{let{headers:x,status:y,statusText:_,url:E}=u(),S=null;y!==QQ&&(S=typeof s.response>"u"?s.responseText:s.response),y===0&&(y=S?JQ:0);let C=y>=200&&y<300;if(t.responseType==="json"&&typeof S=="string"){let k=S;S=S.replace(ree,"");try{S=S!==""?JSON.parse(S):null}catch(F){S=k,C&&(C=!1,S={error:F,text:S})}}C?(o.next(new ed({body:S,headers:x,status:y,statusText:_,url:E||void 0})),o.complete()):o.error(new km({error:S,headers:x,status:y,statusText:_,url:E||void 0}))},h=x=>{let{url:y}=u(),_=new km({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});o.error(_)},p=!1,g=x=>{p||(o.next(u()),p=!0);let y={type:Qu.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(y.total=x.total),t.responseType==="text"&&s.responseText&&(y.partialText=s.responseText),o.next(y)},v=x=>{let y={type:Qu.UploadProgress,loaded:x.loaded};x.lengthComputable&&(y.total=x.total),o.next(y)};return s.addEventListener("load",f),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:Qu.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",f),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(He(Ku))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),ML=new Oe(""),aee="XSRF-TOKEN",lee=new Oe("",{providedIn:"root",factory:()=>aee}),cee="X-XSRF-TOKEN",uee=new Oe("",{providedIn:"root",factory:()=>cee}),Um=class{},dee=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i){this.doc=t,this.cookieName=i}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Im(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(He(mn),He(lee))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})();function fee(n,e){let t=n.url.toLowerCase();if(!ee(ML)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=ee(Um).getToken(),r=ee(uee);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var m1=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(m1||{});function hee(n,e){return{\u0275kind:n,\u0275providers:e}}function g1(...n){let e=[Gi,d1,N_,{provide:rh,useExisting:N_},{provide:Lm,useFactory:()=>ee(eee,{optional:!0})??ee(d1)},{provide:f1,useValue:fee,multi:!0},{provide:ML,useValue:!0},{provide:Um,useClass:dee}];for(let t of n)e.push(...t.\u0275providers);return Bc(e)}var wL=new Oe("");function v1(){return hee(m1.LegacyInterceptors,[{provide:wL,useFactory:iee},{provide:f1,useExisting:wL,multi:!0}])}var pee=new Oe(""),mee="b",gee="h",vee="s",yee="st",_ee="u",xee="rt",y1=new Oe(""),wee=["GET","HEAD"];function bee(n,e){let p=ee(y1),{isCacheActive:t}=p,i=gf(p,["isCacheActive"]),{transferCache:r,method:o}=n;if(!t||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!wee.includes(o)||!i.includeRequestsWithAuthHeaders&&Cee(n)||i.filter?.(n)===!1)return e(n);let s=ee(wm);if(ee(pee,{optional:!0}))throw new Ie(2803,!1);let l=n.url,u=See(n,l),f=s.get(u,null),h=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(h=r.includeHeaders),f){let{[mee]:g,[xee]:v,[gee]:x,[vee]:y,[yee]:_,[_ee]:E}=f,S=g;switch(v){case"arraybuffer":S=new TextEncoder().encode(g).buffer;break;case"blob":S=new Blob([g]);break}let C=new zl(x);return Dt(new ed({body:S,headers:C,status:y,statusText:_,url:E}))}return e(n).pipe(Ei(g=>{g instanceof ed}))}function Cee(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function TL(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function See(n,e){let{params:t,method:i,responseType:r}=n,o=TL(t),s=n.serializeBody();s instanceof URLSearchParams?s=TL(s):typeof s!="string"&&(s="");let a=[i,r,e,s,o].join("|"),l=Eee(a);return l}function Eee(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function IL(n){return[{provide:y1,useFactory:()=>(Xu("NgHttpTransferCache"),q({isCacheActive:!0},n))},{provide:h1,useValue:bee,multi:!0},{provide:Jf,multi:!0,useFactory:()=>{let e=ee(sa),t=ee(y1);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var AL=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(He(mn))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var x1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=He(Mee),r},providedIn:"root"})}return n})(),Mee=(()=>{class n extends x1{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case ca.NONE:return i;case ca.HTML:return Ul(i,"HTML")?Cs(i):TT(this._doc,String(i)).toString();case ca.STYLE:return Ul(i,"Style")?Cs(i):i;case ca.SCRIPT:if(Ul(i,"Script"))return Cs(i);throw new Ie(5200,!1);case ca.URL:return Ul(i,"URL")?Cs(i):p_(String(i));case ca.RESOURCE_URL:if(Ul(i,"ResourceURL"))return Cs(i);throw new Ie(5201,!1);default:throw new Ie(5202,!1)}}bypassSecurityTrustHtml(t){return uN(t)}bypassSecurityTrustStyle(t){return dN(t)}bypassSecurityTrustScript(t){return fN(t)}bypassSecurityTrustUrl(t){return hN(t)}bypassSecurityTrustResourceUrl(t){return pN(t)}static \u0275fac=function(i){return new(i||n)(He(mn))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_1=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(_1||{});function DL(...n){let e=[],t=new Set;for(let{\u0275providers:r,\u0275kind:o}of n)t.add(o),r.length&&e.push(r);let i=t.has(_1.HttpTransferCacheOptions);return Bc([[],Y2(),t.has(_1.NoHttpTransferCache)||i?[]:IL({}),e])}var w1=class extends CustomEvent{constructor(e,o){var s=o,{clientX:t,clientY:i}=s,r=gf(s,["clientX","clientY"]);super(e,Ve(q({},r),{detail:{clientX:t,clientY:i}}))}},Tee=({userAgent:n,maxTouchPoints:e})=>/ipad|iphone|ipod/i.test(n)||/^((?!chrome|android).)*safari/i.test(n)&&e>1,Iee=700,PL=typeof navigator>"u"?null:navigator,Aee=15,b1=class{constructor(){this.isIOS=!!PL&&Tee(PL)}addEventListener(e,t,i){let r=this.isIOS?this.listenTouchEvents(e):this.listenContextmenuEvent(e);return e.addEventListener("longtap",i),()=>{r(),e.removeEventListener("longtap",i)}}supports(e){return e==="longtap"}listenContextmenuEvent(e){return this.manager.addEventListener(e,"contextmenu.prevent.stop",({clientX:t,clientY:i})=>{this.dispatchLongtapEvent(e,t,i)})}listenTouchEvents(e){let t=null,i=null,r=()=>{clearTimeout(t),i=null,t=null},o=this.manager.addEventListener(e,"touchstart.zoneless.passive",({touches:u})=>{let f=u[0];if(!f)return;let{clientX:h,clientY:p}=f;i={clientX:h,clientY:p},t=setTimeout(()=>{this.dispatchLongtapEvent(e,h,p),r()},Iee)}),s=this.manager.addEventListener(e,"touchmove.zoneless.passive",({touches:u})=>{let f=u[0];if(!f||!i)return;let{clientX:h,clientY:p}=f;Math.hypot(h-i.clientX,p-i.clientY)<=Aee||r()}),a=this.manager.addEventListener(e,"touchcancel.zoneless.passive",r),l=this.manager.addEventListener(e,"touchend.zoneless.passive",r);return()=>{o(),s(),a(),l()}}dispatchLongtapEvent(e,t,i){e.dispatchEvent(new w1("longtap",{clientX:t,clientY:i,bubbles:!1,cancelable:!1,composed:!1}))}},k_=class{supports(e){return this.regExp.test(e)}getDelay(e){let t=this.regExp.exec(e);if(!t?.groups)throw new Error(`Invalid event: ${e}`);let{time:i,units:r}=t.groups;switch(r){case"ms":return Number(i);case"s":return Number(i)*1e3;default:throw new Error(`Invalid event: ${e}`)}}unwrap(e){return e.replace(this.regExp,"")}},C1=class extends k_{constructor(){super(...arguments),this.regExp=/\.debounce~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,i){let r,o=this.manager.addEventListener(e,this.unwrap(t),s=>{clearTimeout(r),r=setTimeout(()=>{i(s)},this.getDelay(t))});return()=>{clearTimeout(r),o()}}},jl=class{supports(e){return e.includes(this.modifier)}unwrap(e){return e.split(".").filter(t=>!this.modifier.includes(t)).join(".")}},Dee=new Oe("",{factory:()=>{let n=ee(mn);return e=>e==="body"?n.body:n.defaultView[e]||n.createElement("div")}}),Ree=(()=>{class n extends jl{constructor(){super(...arguments),this.handler=ee(Dee),this.modifier=">"}addEventListener(t,i,r){return this.manager.addEventListener(this.handler(i.split(">")[0]),i.split(">")?.[1]??"",r)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})(),Pee=(()=>{class n extends jl{constructor(){super(...arguments),this.modifier="capture.once.passive"}supports(t){return t.includes(".")&&!this.unwrap(t).includes(".")}addEventListener(t,i,r){let o=this.unwrap(i),s=i.includes(".capture");return t.addEventListener(o,r,{capture:s,once:i.includes(".once"),passive:i.includes(".passive")}),()=>t.removeEventListener(o,r,{capture:s})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})(),Oee=(()=>{class n extends jl{constructor(){super(...arguments),this.modifier=".prevent"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.preventDefault(),r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})(),Fee=(()=>{class n extends jl{constructor(){super(...arguments),this.modifier="resize"}supports(t){return t==="resize"}addEventListener(t,i,r){if(typeof ResizeObserver>"u"||!(t instanceof Element))return t.addEventListener(i,r),()=>t.removeEventListener(i,r);let o=new ResizeObserver(r);return o.observe(t),()=>o.disconnect()}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})(),Nee=(()=>{class n extends jl{constructor(){super(...arguments),this.modifier=".self"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.target===o.currentTarget&&r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})(),OL=(()=>{class n extends jl{constructor(){super(...arguments),this.modifier=".silent"}addEventListener(t,i,r){return n.ngZone=this.manager.getZone(),n.ngZone.runOutsideAngular(()=>this.manager.addEventListener(t,this.unwrap(i),r))}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})(),Lee=(()=>{class n extends jl{constructor(){super(...arguments),this.modifier=".stop"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.stopPropagation(),r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})(),S1=class extends k_{constructor(){super(...arguments),this.regExp=/\.throttle~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,i){let r,o=this.manager.addEventListener(e,this.unwrap(t),s=>{r===void 0&&(i(s),r=setTimeout(()=>{r=void 0},this.getDelay(t)))});return()=>{clearTimeout(r),o()}}},kee=(()=>{class n extends OL{constructor(){super(...arguments),this.modifier=".zoneless"}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})(),Uee=[OL,kee,Ree,Pee,Oee,Fee,Nee,Lee,b1,C1,S1],Bee=Uee.map(n=>({provide:Ju,multi:!0,useClass:n}));function FL(){return Bee}var Jt="primary",Jm=Symbol("RouteTitle"),A1=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function id(n){return new A1(n)}function HL(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Vee(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Za(n[t],e[t]))return!1;return!0}function Za(n,e){let t=n?D1(n):void 0,i=e?D1(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!jL(n[r],e[r]))return!1;return!0}function D1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function jL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function GL(n){return n.length>0?n[n.length-1]:null}function Wc(n){return wE(n)?n:zc(n)?si(Promise.resolve(n)):Dt(n)}var zee={exact:$L,subset:qL},WL={exact:Hee,subset:jee,ignored:()=>!0};function NL(n,e,t){return zee[t.paths](n.root,e.root,t.matrixParams)&&WL[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Hee(n,e){return Za(n,e)}function $L(n,e,t){if(!td(n.segments,e.segments)||!V_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!$L(n.children[i],e.children[i],t))return!1;return!0}function jee(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jL(n[t],e[t]))}function qL(n,e,t){return XL(n,e,e.segments,t)}function XL(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!td(r,t)||e.hasChildren()||!V_(r,t,i))}else if(n.segments.length===t.length){if(!td(n.segments,t)||!V_(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!qL(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!td(n.segments,r)||!V_(n.segments,r,i)||!n.children[Jt]?!1:XL(n.children[Jt],e,o,i)}}function V_(n,e,t){return e.every((i,r)=>WL[t](n[r].parameters,i.parameters))}var Ja=class{root;queryParams;fragment;_queryParamMap;constructor(e=new kn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=id(this.queryParams),this._queryParamMap}toString(){return $ee.serialize(this)}},kn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return z_(this)}},jc=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=id(this.parameters),this._parameterMap}toString(){return ZL(this)}};function Gee(n,e){return td(n,e)&&n.every((t,i)=>Za(t.parameters,e[i].parameters))}function td(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function Wee(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Jt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Jt&&(t=t.concat(e(r,i)))}),t}var Qm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:()=>new rd,providedIn:"root"})}return n})(),rd=class{parse(e){let t=new P1(e);return new Ja(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Bm(e.root,!0)}`,i=Yee(e.queryParams),r=typeof e.fragment=="string"?`#${qee(e.fragment)}`:"";return`${t}${i}${r}`}},$ee=new rd;function z_(n){return n.segments.map(e=>ZL(e)).join("/")}function Bm(n,e){if(!n.hasChildren())return z_(n);if(e){let t=n.children[Jt]?Bm(n.children[Jt],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Jt&&i.push(`${r}:${Bm(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Wee(n,(i,r)=>r===Jt?[Bm(n.children[Jt],!1)]:[`${r}:${Bm(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Jt]!=null?`${z_(n)}/${t[0]}`:`${z_(n)}/(${t.join("//")})`}}function YL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function U_(n){return YL(n).replace(/%3B/gi,";")}function qee(n){return encodeURI(n)}function R1(n){return YL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function H_(n){return decodeURIComponent(n)}function LL(n){return H_(n.replace(/\+/g,"%20"))}function ZL(n){return`${R1(n.path)}${Xee(n.parameters)}`}function Xee(n){return Object.entries(n).map(([e,t])=>`;${R1(e)}=${R1(t)}`).join("")}function Yee(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${U_(t)}=${U_(r)}`).join("&"):`${U_(t)}=${U_(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Zee=/^[^\/()?;#]+/;function E1(n){let e=n.match(Zee);return e?e[0]:""}var Kee=/^[^\/()?;=#]+/;function Jee(n){let e=n.match(Kee);return e?e[0]:""}var Qee=/^[^=?&#]+/;function ete(n){let e=n.match(Qee);return e?e[0]:""}var tte=/^[^&#]+/;function nte(n){let e=n.match(tte);return e?e[0]:""}var P1=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new kn([],{}):new kn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Jt]=new kn(e,t)),i}parseSegment(){let e=E1(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ie(4009,!1);return this.capture(e),new jc(H_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Jee(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=E1(this.remaining);r&&(i=r,this.capture(i))}e[H_(t)]=H_(i)}parseQueryParam(e){let t=ete(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=nte(this.remaining);s&&(i=s,this.capture(i))}let r=LL(t),o=LL(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=E1(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ie(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Jt);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Jt]:new kn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ie(4011,!1)}};function KL(n){return n.segments.length>0?new kn([],{[Jt]:n}):n}function JL(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=JL(r);if(i===Jt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new kn(n.segments,e);return ite(t)}function ite(n){if(n.numberOfChildren===1&&n.children[Jt]){let e=n.children[Jt];return new kn(n.segments.concat(e.segments),e.children)}return n}function Gc(n){return n instanceof Ja}function QL(n,e,t=null,i=null){let r=ek(n);return tk(r,e,t,i)}function ek(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new kn(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=KL(i);return e??r}function tk(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return M1(r,r,r,t,i);let o=rte(e);if(o.toRoot())return M1(r,r,new kn([],{}),t,i);let s=ote(o,r,n),a=s.processChildren?zm(s.segmentGroup,s.index,o.commands):ik(s.segmentGroup,s.index,o.commands);return M1(r,s.segmentGroup,a,t,i)}function G_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function jm(n){return typeof n=="object"&&n!=null&&n.outlets}function M1(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===e?s=t:s=nk(n,e,t);let a=KL(JL(s));return new Ja(a,o,r)}function nk(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=nk(o,e,t)}),new kn(n.segments,i)}var W_=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&G_(i[0]))throw new Ie(4003,!1);let r=i.find(jm);if(r&&r!==GL(i))throw new Ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rte(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new W_(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new W_(t,e,i)}var lh=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function ote(n,e,t){if(n.isAbsolute)return new lh(e,!0,0);if(!t)return new lh(e,!1,NaN);if(t.parent===null)return new lh(t,!0,0);let i=G_(n.commands[0])?0:1,r=t.segments.length-1+i;return ste(t,r,n.numberOfDoubleDots)}function ste(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ie(4005,!1);r=i.segments.length}return new lh(i,!1,r-o)}function ate(n){return jm(n[0])?n[0].outlets:{[Jt]:n}}function ik(n,e,t){if(n??=new kn([],{}),n.segments.length===0&&n.hasChildren())return zm(n,e,t);let i=lte(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new kn(n.segments.slice(0,i.pathIndex),{});return o.children[Jt]=new kn(n.segments.slice(i.pathIndex),n.children),zm(o,0,r)}else return i.match&&r.length===0?new kn(n.segments,{}):i.match&&!n.hasChildren()?O1(n,e,t):i.match?zm(n,0,r):O1(n,e,t)}function zm(n,e,t){if(t.length===0)return new kn(n.segments,{});{let i=ate(t),r={};if(Object.keys(i).some(o=>o!==Jt)&&n.children[Jt]&&n.numberOfChildren===1&&n.children[Jt].segments.length===0){let o=zm(n.children[Jt],e,t);return new kn(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=ik(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new kn(n.segments,r)}}function lte(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(jm(a))break;let l=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!UL(l,u,s))return o;i+=2}else{if(!UL(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function O1(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(jm(o)){let l=cte(o.outlets);return new kn(i,l)}if(r===0&&G_(t[0])){let l=n.segments[e];i.push(new jc(l.path,kL(t[0]))),r++;continue}let s=jm(o)?o.outlets[Jt]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&G_(a)?(i.push(new jc(s,kL(a))),r+=2):(i.push(new jc(s,{})),r++)}return new kn(i,{})}function cte(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=O1(new kn([],{}),0,i))}),e}function kL(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function UL(n,e,t){return n==t.path&&Za(e,t.parameters)}var j_="imperative",dr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dr||{}),qo=class{id;url;constructor(e,t){this.id=e,this.url=t}},od=class extends qo{type=dr.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qa=class extends qo{urlAfterRedirects;type=dr.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(bo||{}),Gm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Gm||{}),Ka=class extends qo{reason;code;type=dr.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Gl=class extends qo{reason;code;type=dr.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},uh=class extends qo{error;target;type=dr.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wm=class extends qo{urlAfterRedirects;state;type=dr.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$_=class extends qo{urlAfterRedirects;state;type=dr.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},q_=class extends qo{urlAfterRedirects;state;shouldActivate;type=dr.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},X_=class extends qo{urlAfterRedirects;state;type=dr.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Y_=class extends qo{urlAfterRedirects;state;type=dr.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Z_=class{route;type=dr.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},K_=class{route;type=dr.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},J_=class{snapshot;type=dr.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Q_=class{snapshot;type=dr.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ex=class{snapshot;type=dr.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tx=class{snapshot;type=dr.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var $m=class{},dh=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function ute(n,e){return n.providers&&!n._injector&&(n._injector=C_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pa(n){return n.outlet||Jt}function dte(n,e){let t=n.filter(i=>pa(i)===e);return t.push(...n.filter(i=>pa(i)!==e)),t}function eg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var nx=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return eg(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ph(this.rootInjector)}},ph=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new nx(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(He(Dr))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ix=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=F1(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=F1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=N1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return N1(e,this._root).map(t=>t.value)}};function F1(n,e){if(n===e.value)return e;for(let t of e.children){let i=F1(n,t);if(i)return i}return null}function N1(n,e){if(n===e.value)return[e];for(let t of e.children){let i=N1(n,t);if(i.length)return i.unshift(e),i}return[]}var $o=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ah(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var qm=class extends ix{snapshot;constructor(e,t){super(e),this.snapshot=t,j1(this,e)}toString(){return this.snapshot.toString()}};function rk(n){let e=fte(n),t=new zn([new jc("",{})]),i=new zn({}),r=new zn({}),o=new zn({}),s=new zn(""),a=new er(t,i,o,s,r,Jt,n,e.root);return a.snapshot=e.root,new qm(new $o(a,[]),e)}function fte(n){let e={},t={},i={},r="",o=new nd([],e,i,r,t,Jt,n,null,{});return new Xm("",new $o(o,[]))}var er=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ut(u=>u[Jm]))??Dt(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ut(e=>id(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ut(e=>id(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rx(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),r?.data),n._resolvedData)}:i={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},r&&sk(r)&&(i.resolve[Jm]=r.title),i}var nd=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Jm]}constructor(e,t,i,r,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=id(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=id(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Xm=class extends ix{url;constructor(e,t){super(t),this.url=e,j1(this,t)}toString(){return ok(this._root)}};function j1(n,e){e.value._routerState=n,e.children.forEach(t=>j1(n,t))}function ok(n){let e=n.children.length>0?` { ${n.children.map(ok).join(", ")} } `:"";return`${n.value}${e}`}function T1(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Za(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Za(e.params,t.params)||n.paramsSubject.next(t.params),Vee(e.url,t.url)||n.urlSubject.next(t.url),Za(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function L1(n,e){let t=Za(n.params,e.params)&&Gee(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||L1(n.parent,e.parent))}function sk(n){return typeof n.title=="string"||n.title===null}var ak=new Oe(""),tg=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Jt;activateEvents=new Hn;deactivateEvents=new Hn;attachEvents=new Hn;detachEvents=new Hn;routerOutletData=VF(void 0);parentContexts=ee(ph);location=ee(Ya);changeDetector=ee(ur);inputBinder=ee(lx,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ie(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Ie(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new k1(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=_t({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ji]})}return n})(),k1=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===er?this.route:e===ph?this.childContexts:e===ak?this.outletData:this.parent.get(e,t)}},lx=new Oe("");function hte(n,e,t){let i=Ym(n,e._root,t?t._root:void 0);return new qm(i,e)}function Ym(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=pte(n,e,t);return new $o(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ym(n,a)),s}}let i=mte(e.value),r=e.children.map(o=>Ym(n,o));return new $o(i,r)}}function pte(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ym(n,i,r);return Ym(n,i)})}function mte(n){return new er(new zn(n.url),new zn(n.params),new zn(n.queryParams),new zn(n.fragment),new zn(n.data),n.outlet,n.component,n)}var fh=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},lk="ngNavigationCancelingError";function ox(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Gc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=ck(!1,bo.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function ck(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[lk]=!0,t.cancellationCode=e,t}function gte(n){return uk(n)&&Gc(n.url)}function uk(n){return!!n&&n[lk]}var vte=(n,e,t,i)=>ut(r=>(new U1(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),U1=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),T1(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=ah(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=ah(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=ah(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=ah(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new tx(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Q_(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(T1(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),T1(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},sx=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ch=class{component;route;constructor(e,t){this.component=e,this.route=t}};function yte(n,e,t){let i=n._root,r=e?e._root:null;return Vm(i,r,t,[i.value])}function _te(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function mh(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!F3(n)?n:e.get(n):i}function Vm(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=ah(e);return n.children.forEach(s=>{xte(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Hm(a,t.getContext(s),r)),r}function xte(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=wte(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new sx(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Vm(n,e,a?a.children:null,i,r):Vm(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ch(a.outlet.component,s))}else s&&Hm(e,a,r),r.canActivateChecks.push(new sx(i)),o.component?Vm(n,null,a?a.children:null,i,r):Vm(n,null,t,i,r);return r}function wte(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!td(n.url,e.url);case"pathParamsOrQueryParamsChange":return!td(n.url,e.url)||!Za(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!L1(n,e)||!Za(n.queryParams,e.queryParams);case"paramsChange":default:return!L1(n,e)}}function Hm(n,e,t){let i=ah(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Hm(s,e.children.getContext(o),t):Hm(s,null,t):Hm(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ch(e.outlet.component,r)):t.canDeactivateChecks.push(new ch(null,r)):t.canDeactivateChecks.push(new ch(null,r))}function ng(n){return typeof n=="function"}function bte(n){return typeof n=="boolean"}function Cte(n){return n&&ng(n.canLoad)}function Ste(n){return n&&ng(n.canActivate)}function Ete(n){return n&&ng(n.canActivateChild)}function Mte(n){return n&&ng(n.canDeactivate)}function Tte(n){return n&&ng(n.canMatch)}function dk(n){return n instanceof Js||n?.name==="EmptyError"}var B_=Symbol("INITIAL_VALUE");function hh(){return Si(n=>Af(n.map(e=>e.pipe(Vo(1),ys(B_)))).pipe(ut(e=>{for(let t of e)if(t!==!0){if(t===B_)return B_;if(t===!1||Ite(t))return t}return!0}),Xn(e=>e!==B_),Vo(1)))}function Ite(n){return Gc(n)||n instanceof fh}function Ate(n,e){return Ui(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Dt(Ve(q({},t),{guardsResult:!0})):Dte(s,i,r,n).pipe(Ui(a=>a&&bte(a)?Rte(i,o,n,e):Dt(a)),ut(a=>Ve(q({},t),{guardsResult:a})))})}function Dte(n,e,t,i){return si(n).pipe(Ui(r=>Lte(r.component,r.route,t,e,i)),Il(r=>r!==!0,!0))}function Rte(n,e,t,i){return si(e).pipe(Nc(r=>Fu(Ote(r.route.parent,i),Pte(r.route,i),Nte(n,r.path,t),Fte(n,r.route,t))),Il(r=>r!==!0,!0))}function Pte(n,e){return n!==null&&e&&e(new ex(n)),Dt(!0)}function Ote(n,e){return n!==null&&e&&e(new J_(n)),Dt(!0)}function Fte(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Dt(!0);let r=i.map(o=>my(()=>{let s=eg(e)??t,a=mh(o,s),l=Ste(a)?a.canActivate(e,n):Ho(s,()=>a(e,n));return Wc(l).pipe(Il())}));return Dt(r).pipe(hh())}function Nte(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>_te(s)).filter(s=>s!==null).map(s=>my(()=>{let a=s.guards.map(l=>{let u=eg(s.node)??t,f=mh(l,u),h=Ete(f)?f.canActivateChild(i,n):Ho(u,()=>f(i,n));return Wc(h).pipe(Il())});return Dt(a).pipe(hh())}));return Dt(o).pipe(hh())}function Lte(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Dt(!0);let s=o.map(a=>{let l=eg(e)??r,u=mh(a,l),f=Mte(u)?u.canDeactivate(n,e,t,i):Ho(l,()=>u(n,e,t,i));return Wc(f).pipe(Il())});return Dt(s).pipe(hh())}function kte(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Dt(!0);let o=r.map(s=>{let a=mh(s,n),l=Cte(a)?a.canLoad(e,t):Ho(n,()=>a(e,t));return Wc(l)});return Dt(o).pipe(hh(),fk(i))}function fk(n){return qp(Ei(e=>{if(typeof e!="boolean")throw ox(n,e)}),ut(e=>e===!0))}function Ute(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Dt(!0);let o=r.map(s=>{let a=mh(s,n),l=Tte(a)?a.canMatch(e,t):Ho(n,()=>a(e,t));return Wc(l)});return Dt(o).pipe(hh(),fk(i))}var Zm=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Km=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function sh(n){return Fc(new Zm(n))}function Bte(n){return Fc(new Ie(4e3,!1))}function Vte(n){return Fc(ck(!1,bo.GuardRejected))}var B1=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Dt(i);if(r.numberOfChildren>1||!r.children[Jt])return Bte(`${e.redirectTo}`);r=r.children[Jt]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let a=t,{queryParams:l,fragment:u,routeConfig:f,url:h,outlet:p,params:g,data:v,title:x}=r,y=Ho(o,()=>a({params:g,data:v,queryParams:l,fragment:u,routeConfig:f,url:h,outlet:p,title:x}));if(y instanceof Ja)throw new Km(y);t=y}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Km(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Ja(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new kn(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ie(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},V1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zte(n,e,t,i,r){let o=hk(n,e,t);return o.matched?(i=ute(e,i),Ute(i,e,t,r).pipe(ut(s=>s===!0?o:q({},V1)))):Dt(o)}function hk(n,e,t){if(e.path==="**")return Hte(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},V1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||HL)(t,n,e);if(!r)return q({},V1);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?q(q({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Hte(n){return{matched:!0,parameters:n.length>0?GL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function BL(n,e,t,i){return t.length>0&&Wte(n,t,i)?{segmentGroup:new kn(e,Gte(i,new kn(t,n.children))),slicedSegments:[]}:t.length===0&&$te(n,t,i)?{segmentGroup:new kn(n.segments,jte(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new kn(n.segments,n.children),slicedSegments:t}}function jte(n,e,t,i){let r={};for(let o of t)if(cx(n,e,o)&&!i[pa(o)]){let s=new kn([],{});r[pa(o)]=s}return q(q({},i),r)}function Gte(n,e){let t={};t[Jt]=e;for(let i of n)if(i.path===""&&pa(i)!==Jt){let r=new kn([],{});t[pa(i)]=r}return t}function Wte(n,e,t){return t.some(i=>cx(n,e,i)&&pa(i)!==Jt)}function $te(n,e,t){return t.some(i=>cx(n,e,i))}function cx(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qte(n,e,t){return e.length===0&&!n.children[t]}var z1=class{};function Xte(n,e,t,i,r,o,s="emptyOnly"){return new H1(n,e,t,i,r,s,o).recognize()}var Yte=31,H1=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new B1(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=BL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ut(({children:t,rootSnapshot:i})=>{let r=new $o(i,t),o=new Xm("",r),s=QL(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new nd([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Jt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Jt,t).pipe(ut(i=>({children:i,rootSnapshot:t})),ea(i=>{if(i instanceof Km)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Zm?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(ut(s=>s instanceof $o?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return si(o).pipe(Nc(s=>{let a=i.children[s],l=dte(t,s);return this.processSegmentGroup(e,l,a,s,r)}),EE((s,a)=>(s.push(...a),s)),Tl(null),SE(),Ui(s=>{if(s===null)return sh(i);let a=pk(s);return Zte(a),Dt(a)}))}processSegment(e,t,i,r,o,s,a){return si(t).pipe(Nc(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,o,s,a).pipe(ea(u=>{if(u instanceof Zm)return Dt(null);throw u}))),Il(l=>!!l),ea(l=>{if(dk(l))return qte(i,r,o)?Dt(new z1):sh(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,l){return pa(i)!==s&&(s===Jt||!cx(r,o,i))?sh(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,l):sh(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:h,remainingSegments:p}=hk(t,r,o);if(!l)return sh(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Yte&&(this.allowRedirects=!1));let g=new nd(o,u,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,VL(r),pa(r),r.component??r._loadedComponent??null,r,zL(r)),v=rx(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(v.params),g.data=Object.freeze(v.data);let x=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(r,x).pipe(Ui(y=>this.processSegment(e,i,t,y.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=zte(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(Si(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Si(({routes:u})=>{let f=i._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=l,v=new nd(p,h,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,VL(i),pa(i),i.component??i._loadedComponent??null,i,zL(i)),x=rx(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(x.params),v.data=Object.freeze(x.data);let{segmentGroup:y,slicedSegments:_}=BL(t,p,g,u);if(_.length===0&&y.hasChildren())return this.processChildren(f,u,y,v).pipe(ut(S=>new $o(v,S)));if(u.length===0&&_.length===0)return Dt(new $o(v,[]));let E=pa(i)===o;return this.processSegment(f,u,y,_,E?Jt:o,!0,v).pipe(ut(S=>new $o(v,S instanceof $o?[S]:[])))}))):sh(t)))}getChildConfig(e,t,i){return t.children?Dt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Dt({routes:t._loadedRoutes,injector:t._loadedInjector}):kte(e,t,i,this.urlSerializer).pipe(Ui(r=>r?this.configLoader.loadChildren(e,t).pipe(Ei(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Vte(t))):Dt({routes:[],injector:e})}};function Zte(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}function Kte(n){let e=n.value.routeConfig;return e&&e.path===""}function pk(n){let e=[],t=new Set;for(let i of n){if(!Kte(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=pk(i.children);e.push(new $o(i.value,r))}return e.filter(i=>!t.has(i))}function VL(n){return n.data||{}}function zL(n){return n.resolve||{}}function Jte(n,e,t,i,r,o){return Ui(s=>Xte(n,e,t,i,s.extractedUrl,r,o).pipe(ut(({state:a,tree:l})=>Ve(q({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function Qte(n,e){return Ui(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Dt(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of mk(l))s.add(u);let a=0;return si(s).pipe(Nc(l=>o.has(l)?ene(l,i,n,e):(l.data=rx(l,l.parent,n).resolve,Dt(void 0))),Ei(()=>a++),Rf(1),Ui(l=>a===s.size?Dt(t):Ci))})}function mk(n){let e=n.children.map(t=>mk(t)).flat();return[n,...e]}function ene(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!sk(r)&&(o[Jm]=r.title),tne(o,n,e,i).pipe(ut(s=>(n._resolvedData=s,n.data=rx(n,n.parent,t).resolve,null)))}function tne(n,e,t,i){let r=D1(n);if(r.length===0)return Dt({});let o={};return si(r).pipe(Ui(s=>nne(n[s],e,t,i).pipe(Il(),Ei(a=>{if(a instanceof fh)throw ox(new rd,a);o[s]=a}))),Rf(1),ut(()=>o),ea(s=>dk(s)?Ci:Fc(s)))}function nne(n,e,t,i){let r=eg(e)??i,o=mh(n,r),s=o.resolve?o.resolve(e,t):Ho(r,()=>o(e,t));return Wc(s)}function I1(n){return Si(e=>{let t=n(e);return t?si(t).pipe(ut(()=>e)):Dt(e)})}var G1=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Jt);return i}getResolvedTitleForRoute(t){return t.data[Jm]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:()=>ee(gk),providedIn:"root"})}return n})(),gk=(()=>{class n extends G1{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(He(AL))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ig=new Oe("",{providedIn:"root",factory:()=>({})}),W1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=dn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&ye(0,"router-outlet")},dependencies:[tg],encapsulation:2})}return n})();function $1(n){let e=n.children&&n.children.map($1),t=e?Ve(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=W1),t}var rg=new Oe(""),vk=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=ee(q2);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Wc(t.loadComponent()).pipe(ut(_k),Ei(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Lc(()=>{this.componentLoaders.delete(t)})),r=new bf(i,()=>new Ln).pipe(wf());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Dt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=yk(i,this.compiler,t,this.onLoadEndListener).pipe(Lc(()=>{this.childrenLoaders.delete(i)})),s=new bf(o,()=>new Ln).pipe(wf());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yk(n,e,t,i){return Wc(n.loadChildren()).pipe(ut(_k),Ui(r=>r instanceof $T||Array.isArray(r)?Dt(r):si(e.compileModuleAsync(r))),ut(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(rg,[],{optional:!0,self:!0}).flat()),{routes:s.map($1),injector:o}}))}function ine(n){return n&&typeof n=="object"&&"default"in n}function _k(n){return ine(n)?n.default:n}var ux=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:()=>ee(rne),providedIn:"root"})}return n})(),rne=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xk=new Oe("");var wk=new Oe(""),bk=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ln;transitionAbortSubject=new Ln;configLoader=ee(vk);environmentInjector=ee(Dr);destroyRef=ee(Ll);urlSerializer=ee(Qm);rootContexts=ee(ph);location=ee(wo);inputBindingEnabled=ee(lx,{optional:!0})!==null;titleStrategy=ee(G1);options=ee(ig,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=ee(ux);createViewTransition=ee(xk,{optional:!0});navigationErrorHandler=ee(wk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Dt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new Z_(r)),i=r=>this.events.next(new K_(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Ve(q({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(t){return this.transitions=new zn(null),this.transitions.pipe(Xn(i=>i!==null),Si(i=>{let r=!1,o=!1;return Dt(i).pipe(Si(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",bo.SupersededByNewNavigation),Ci;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Ve(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload"){let u="";return this.events.next(new Gl(s.id,this.urlSerializer.serialize(s.rawUrl),u,Gm.IgnoredSameUrlNavigation)),s.resolve(!1),Ci}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Dt(s).pipe(Si(u=>(this.events.next(new od(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Ci:Promise.resolve(u))),Jte(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ei(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Ve(q({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let f=new Wm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:f,source:h,restoredState:p,extras:g}=s,v=new od(u,this.urlSerializer.serialize(f),h,p);this.events.next(v);let x=rk(this.rootComponentType).snapshot;return this.currentTransition=i=Ve(q({},s),{targetSnapshot:x,urlAfterRedirects:f,extras:Ve(q({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Dt(i)}else{let u="";return this.events.next(new Gl(s.id,this.urlSerializer.serialize(s.extractedUrl),u,Gm.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Ci}}),Ei(s=>{let a=new $_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ut(s=>(this.currentTransition=i=Ve(q({},s),{guards:yte(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),Ate(this.environmentInjector,s=>this.events.next(s)),Ei(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw ox(this.urlSerializer,s.guardsResult);let a=new q_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Xn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",bo.GuardRejected),!1)),I1(s=>{if(s.guards.canActivateChecks.length!==0)return Dt(s).pipe(Ei(a=>{let l=new X_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Si(a=>{let l=!1;return Dt(a).pipe(Qte(this.paramsInheritanceStrategy,this.environmentInjector),Ei({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",bo.NoDataFromResolver)}}))}),Ei(a=>{let l=new Y_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),I1(s=>{let a=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ei(f=>{l.component=f}),ut(()=>{})));for(let f of l.children)u.push(...a(f));return u};return Af(a(s.targetSnapshot.root)).pipe(Tl(null),Vo(1))}),I1(()=>this.afterPreactivation()),Si(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?si(l).pipe(ut(()=>i)):Dt(i)}),ut(s=>{let a=hte(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=Ve(q({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Ei(()=>{this.events.next(new $m)}),vte(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Vo(1),Ei({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qa(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),_s(this.transitionAbortSubject.pipe(Ei(s=>{throw s}))),Lc(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",bo.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),ea(s=>{if(this.destroyed)return i.resolve(!1),Ci;if(o=!0,uk(s))this.events.next(new Ka(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),gte(s)?this.events.next(new dh(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new uh(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let l=Ho(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof fh){let{message:u,cancellationCode:f}=ox(this.urlSerializer,l);this.events.next(new Ka(i.id,this.urlSerializer.serialize(i.extractedUrl),u,f)),this.events.next(new dh(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Ci}))}))}cancelNavigationTransition(t,i,r){let o=new Ka(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function one(n){return n!==j_}var Ck=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:()=>ee(sne),providedIn:"root"})}return n})(),ax=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},sne=(()=>{class n extends ax{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})();static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sk=(()=>{class n{urlSerializer=ee(Qm);options=ee(ig,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=ee(wo);urlHandlingStrategy=ee(ux);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ja;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof Ja?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=rk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:()=>ee(ane),providedIn:"root"})}return n})(),ane=(()=>{class n extends Sk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof od?this.updateStateMemento():t instanceof Gl?this.commitTransition(i):t instanceof Wm?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof $m?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Ka&&(t.code===bo.GuardRejected||t.code===bo.NoDataFromResolver)?this.restoreHistory(i):t instanceof uh?this.restoreHistory(i,!0):t instanceof Qa&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=q(q({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",l)}else{let a=q(q({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})();static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function q1(n,e){n.events.pipe(Xn(t=>t instanceof Qa||t instanceof Ka||t instanceof uh||t instanceof Gl),ut(t=>t instanceof Qa||t instanceof Gl?0:(t instanceof Ka?t.code===bo.Redirect||t.code===bo.SupersededByNewNavigation:!1)?2:1),Xn(t=>t!==2),Vo(1)).subscribe(()=>{e()})}var lne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cne={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=ee(XT);stateManager=ee(Sk);options=ee(ig,{optional:!0})||{};pendingTasks=ee(kl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=ee(bk);urlSerializer=ee(Qm);location=ee(wo);urlHandlingStrategy=ee(ux);_events=new Ln;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=ee(Ck);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=ee(rg,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!ee(lx,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new mi;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ka&&i.code!==bo.Redirect&&i.code!==bo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Qa)this.navigated=!0;else if(i instanceof dh){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=q({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||one(r.source)},s);this.scheduleNavigation(a,j_,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}dne(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),j_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=q({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=q(q({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let h;try{let p=r?r.snapshot:this.routerState.snapshot.root;h=ek(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return tk(h,t,f,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Gc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,j_,null,i)}navigate(t,i={skipLocationChange:!1}){return une(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=q({},lne):i===!1?r=q({},cne):r=i,Gc(t))return NL(this.currentUrlTree,t,r);let o=this.parseUrl(t);return NL(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((h,p)=>{a=h,l=p});let f=this.pendingTasks.add();return q1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function une(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ie(4008,!1)}function dne(n){return!(n instanceof $m)&&!(n instanceof dh)}var Es=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ln;constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Qa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Gc(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:wN(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Gc(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(ce(wr),ce(er),vT("tabindex"),ce(Or),ce(Kt),ce(eh))};static \u0275dir=_t({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&Me("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&lr("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Qf],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Qf],replaceUrl:[2,"replaceUrl","replaceUrl",Qf],routerLink:"routerLink"},features:[Ji]})}return n})();var hne=new Oe("");function X1(n,...e){return Bc([{provide:rg,multi:!0,useValue:n},[],{provide:er,useFactory:pne,deps:[wr]},{provide:Jf,multi:!0,useFactory:mne},e.map(t=>t.\u0275providers)])}function pne(n){return n.routerState.root}function mne(){let n=ee(ws);return e=>{let t=n.get(sa);if(e!==t.components[0])return;let i=n.get(wr),r=n.get(gne);n.get(vne)===1&&i.initialNavigation(),n.get(yne,null,en.Optional)?.setUpPreloading(),n.get(hne,null,en.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var gne=new Oe("",{factory:()=>new Ln}),vne=new Oe("",{providedIn:"root",factory:()=>1});var yne=new Oe("");function og(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&iT(og);let i=t?e?.injector?.get(Ll)??ee(Ll):null,r=_ne(e?.equal),o;e?.requireSync?o=bs({kind:0},{equal:r}):o=bs({kind:1,value:e?.initialValue},{equal:r});let s=n.subscribe({next:a=>o.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;o.set({kind:2,error:a})}});if(e?.requireSync&&o().kind===0)throw new Ie(601,!1);return i?.onDestroy(s.unsubscribe.bind(s)),Vl(()=>{let a=o();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new Ie(601,!1)}},{equal:e?.equal})}function _ne(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var o1e=parseInt($2.major,10)>=19?{}:{allowSignalWrites:!0},Mk={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},Tk=new cm;var s1e=Ve(q({},Mk),{toJSON:()=>Mk}),sg=()=>!1,Y1=()=>!0;var Lk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(ce(Or),ce(Kt))};static \u0275dir=_t({type:n})}return n})(),Cx=(()=>{class n extends Lk{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})();static \u0275dir=_t({type:n,features:[On]})}return n})(),yh=new Oe("");var xne={provide:yh,useExisting:mo(()=>Co),multi:!0};function wne(){let n=Ss()?Ss().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var bne=new Oe(""),Co=(()=>{class n extends Lk{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!wne())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(ce(Or),ce(Kt),ce(bne,8))};static \u0275dir=_t({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Me("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[bn([xne]),On]})}return n})();function K1(n){return n==null||J1(n)===0}function J1(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var ad=new Oe(""),Sx=new Oe(""),Cne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Tt=class{static min(e){return kk(e)}static max(e){return Uk(e)}static required(e){return Sne(e)}static requiredTrue(e){return Ene(e)}static email(e){return Mne(e)}static minLength(e){return Tne(e)}static maxLength(e){return Bk(e)}static pattern(e){return Ine(e)}static nullValidator(e){return fx()}static compose(e){return Wk(e)}static composeAsync(e){return $k(e)}};function kk(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Uk(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Sne(n){return K1(n.value)?{required:!0}:null}function Ene(n){return n.value===!0?null:{required:!0}}function Mne(n){return K1(n.value)||Cne.test(n.value)?null:{email:!0}}function Tne(n){return e=>{let t=e.value?.length??J1(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function Bk(n){return e=>{let t=e.value?.length??J1(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Ine(n){if(!n)return fx;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(K1(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function fx(n){return null}function Vk(n){return n!=null}function zk(n){return zc(n)?si(n):n}function Hk(n){let e={};return n.forEach(t=>{e=t!=null?q(q({},e),t):e}),Object.keys(e).length===0?null:e}function jk(n,e){return e.map(t=>t(n))}function Ane(n){return!n.validate}function Gk(n){return n.map(e=>Ane(e)?e:t=>e.validate(t))}function Wk(n){if(!n)return null;let e=n.filter(Vk);return e.length==0?null:function(t){return Hk(jk(t,e))}}function Q1(n){return n!=null?Wk(Gk(n)):null}function $k(n){if(!n)return null;let e=n.filter(Vk);return e.length==0?null:function(t){let i=jk(t,e).map(zk);return bE(i).pipe(ut(Hk))}}function eI(n){return n!=null?$k(Gk(n)):null}function Ik(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qk(n){return n._rawValidators}function Xk(n){return n._rawAsyncValidators}function Z1(n){return n?Array.isArray(n)?n:[n]:[]}function hx(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ak(n,e){let t=Z1(e);return Z1(n).forEach(r=>{hx(t,r)||t.push(r)}),t}function Dk(n,e){return Z1(e).filter(t=>!hx(n,t))}var px=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Q1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Wl=class extends px{name;get formDirective(){return null}get path(){return null}},sd=class extends px{_parent=null;name=null;valueAccessor=null},mx=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Dne={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},S1e=Ve(q({},Dne),{"[class.ng-submitted]":"isSubmitted"}),Ms=(()=>{class n extends mx{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(ce(sd,2))};static \u0275dir=_t({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Dn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[On]})}return n})(),Ts=(()=>{class n extends mx{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(ce(Wl,10))};static \u0275dir=_t({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Dn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[On]})}return n})();var ag="VALID",dx="INVALID",gh="PENDING",lg="DISABLED",qc=class{},gx=class extends qc{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ug=class extends qc{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},dg=class extends qc{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},vh=class extends qc{status;source;constructor(e,t){super(),this.status=e,this.source=t}},vx=class extends qc{source;constructor(e){super(),this.source=e}},yx=class extends qc{source;constructor(e){super(),this.source=e}};function Yk(n){return(Ex(n)?n.validators:n)||null}function Rne(n){return Array.isArray(n)?Q1(n):n||null}function Zk(n,e){return(Ex(e)?e.asyncValidators:n)||null}function Pne(n){return Array.isArray(n)?eI(n):n||null}function Ex(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function One(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ie(1e3,"");if(!i[t])throw new Ie(1001,"")}function Fne(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Ie(1002,"")})}var _x=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Gr(this.statusReactive)}set status(e){Gr(()=>this.statusReactive.set(e))}_status=Vl(()=>this.statusReactive());statusReactive=bs(void 0);get valid(){return this.status===ag}get invalid(){return this.status===dx}get pending(){return this.status==gh}get disabled(){return this.status===lg}get enabled(){return this.status!==lg}errors;get pristine(){return Gr(this.pristineReactive)}set pristine(e){Gr(()=>this.pristineReactive.set(e))}_pristine=Vl(()=>this.pristineReactive());pristineReactive=bs(!0);get dirty(){return!this.pristine}get touched(){return Gr(this.touchedReactive)}set touched(e){Gr(()=>this.touchedReactive.set(e))}_touched=Vl(()=>this.touchedReactive());touchedReactive=bs(!1);get untouched(){return!this.touched}_events=new Ln;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ak(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ak(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Dk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Dk(e,this._rawAsyncValidators))}hasValidator(e){return hx(this._rawValidators,e)}hasAsyncValidator(e){return hx(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ve(q({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new dg(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new dg(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ve(q({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new ug(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new ug(!0,i))}markAsPending(e={}){this.status=gh;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ve(q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=lg,this.errors=null,this._forEachChild(r=>{r.disable(Ve(q({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gx(this.value,i)),this._events.next(new vh(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ve(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ag,this._forEachChild(i=>{i.enable(Ve(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ve(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ag||this.status===gh)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gx(this.value,t)),this._events.next(new vh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ve(q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lg:ag}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=gh,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=zk(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new vh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Hn,this.statusChanges=new Hn}_calculateStatus(){return this._allControlsDisabled()?lg:this.errors?dx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gh)?gh:this._anyControlsHaveStatus(dx)?dx:ag}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new ug(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new dg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ex(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Rne(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Pne(this._rawAsyncValidators)}},vi=class extends _x{constructor(e,t,i){super(Yk(t),Zk(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Fne(this,!0,e),Object.keys(e).forEach(i=>{One(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var fg=new Oe("",{providedIn:"root",factory:()=>Mx}),Mx="always";function Kk(n,e){return[...e.path,n]}function xx(n,e,t=Mx){tI(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Lne(n,e),Une(n,e),kne(n,e),Nne(n,e)}function Rk(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),bx(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Nne(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function tI(n,e){let t=qk(n);e.validator!==null?n.setValidators(Ik(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Xk(n);e.asyncValidator!==null?n.setAsyncValidators(Ik(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();wx(e._rawValidators,r),wx(e._rawAsyncValidators,r)}function bx(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=qk(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=Xk(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return wx(e._rawValidators,i),wx(e._rawAsyncValidators,i),t}function Lne(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Jk(n,e)})}function kne(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Jk(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Jk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Une(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Qk(n,e){n==null,tI(n,e)}function Bne(n,e){return bx(n,e)}function eU(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Vne(n){return Object.getPrototypeOf(n.constructor)===Cx}function tU(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function nU(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Co?t=o:Vne(o)?i=o:r=o}),r||i||t||null}function zne(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Hne={provide:Wl,useExisting:mo(()=>nI)},cg=Promise.resolve(),nI=(()=>{class n extends Wl{callSetDisabledState;get submitted(){return Gr(this.submittedReactive)}_submitted=Vl(()=>this.submittedReactive());submittedReactive=bs(!1);_directives=new Set;form;ngSubmit=new Hn;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new vi({},Q1(t),eI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){cg.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),xx(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){cg.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){cg.then(()=>{let i=this._findContainer(t.path),r=new vi({});Qk(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){cg.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){cg.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),tU(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new vx(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new yx(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(ce(ad,10),ce(Sx,10),ce(fg,8))};static \u0275dir=_t({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&Me("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[bn([Hne]),On]})}return n})();function Pk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ok(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Mn=class extends _x{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(Yk(t),Zk(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ex(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Ok(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ok(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jne=n=>n instanceof Mn;var Gne={provide:sd,useExisting:mo(()=>hg)},Fk=Promise.resolve(),hg=(()=>{class n extends sd{_changeDetectorRef;callSetDisabledState;control=new Mn;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Hn;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=nU(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),eU(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Fk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Qf(i);Fk.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Kk(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(ce(Wl,9),ce(ad,10),ce(Sx,10),ce(yh,10),ce(ur,8),ce(fg,8))};static \u0275dir=_t({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[bn([Gne]),On,Ji]})}return n})();var Is=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=_t({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),Wne={provide:yh,useExisting:mo(()=>pg),multi:!0},pg=(()=>{class n extends Cx{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})();static \u0275dir=_t({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&Me("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[bn([Wne]),On]})}return n})();var iU=new Oe("");var $ne={provide:Wl,useExisting:mo(()=>Xo)},Xo=(()=>{class n extends Wl{callSetDisabledState;get submitted(){return Gr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Vl(()=>this._submittedReactive());_submittedReactive=bs(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Hn;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bx(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return xx(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Rk(t.control||null,t,!1),zne(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),tU(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new vx(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new yx(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(Rk(i||null,t),jne(r)&&(xx(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);Qk(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&Bne(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tI(this.form,this),this._oldForm&&bx(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(ce(ad,10),ce(Sx,10),ce(fg,8))};static \u0275dir=_t({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Me("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[bn([$ne]),On,Ji]})}return n})();var qne={provide:sd,useExisting:mo(()=>Yo)},Yo=(()=>{class n extends sd{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Hn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=nU(this,o)}ngOnChanges(t){this._added||this._setUpControl(),eU(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Kk(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(ce(Wl,13),ce(ad,10),ce(Sx,10),ce(yh,10),ce(iU,8))};static \u0275dir=_t({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[bn([qne]),On,Ji]})}return n})();var Xne={provide:yh,useExisting:mo(()=>Tx),multi:!0};function rU(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Yne(n){return n.split(":")[0]}var Tx=(()=>{class n extends Cx{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=rU(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=Yne(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})();static \u0275dir=_t({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&Me("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[bn([Xne]),On]})}return n})(),oU=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(rU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ce(Kt),ce(Or),ce(Tx,9))};static \u0275dir=_t({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Zne={provide:yh,useExisting:mo(()=>sU),multi:!0};function Nk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Kne(n){return n.split(":")[0]}var sU=(()=>{class n extends Cx{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);r.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=Kne(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})();static \u0275dir=_t({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&Me("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[bn([Zne]),On]})}return n})(),aU=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Nk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Nk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ce(Kt),ce(Or),ce(sU,9))};static \u0275dir=_t({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function Jne(n){return typeof n=="number"?n:parseInt(n,10)}function lU(n){return typeof n=="number"?n:parseFloat(n)}var iI=(()=>{class n{_validator=fx;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):fx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=_t({type:n,features:[Ji]})}return n})(),Qne={provide:ad,useExisting:mo(()=>rI),multi:!0},rI=(()=>{class n extends iI{max;inputName="max";normalizeInput=t=>lU(t);createValidator=t=>Uk(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})();static \u0275dir=_t({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&lr("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[bn([Qne]),On]})}return n})(),eie={provide:ad,useExisting:mo(()=>mg),multi:!0},mg=(()=>{class n extends iI{min;inputName="min";normalizeInput=t=>lU(t);createValidator=t=>kk(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})();static \u0275dir=_t({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&lr("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[bn([eie]),On]})}return n})();var tie={provide:ad,useExisting:mo(()=>oI),multi:!0},oI=(()=>{class n extends iI{maxlength;inputName="maxlength";normalizeInput=t=>Jne(t);createValidator=t=>Bk(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})();static \u0275dir=_t({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&lr("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[bn([tie]),On]})}return n})();var cU=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_r({type:n});static \u0275inj=yr({})}return n})();var _h=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fg,useValue:t.callSetDisabledState??Mx}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=_r({type:n});static \u0275inj=yr({imports:[cU]})}return n})(),So=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iU,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:fg,useValue:t.callSetDisabledState??Mx}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=_r({type:n});static \u0275inj=yr({imports:[cU]})}return n})();function sI(n,e,t){return Math.min(t,Math.max(e,n))}function ld(n){return n===void 0?new Oe(""):Yn(()=>n)}function Yn(n){return n?new Oe("",{factory:n}):new Oe("")}function dU(n){return n!=null}function ma(n,e,t=!1){return{provide:n,useExisting:e,multi:t}}function nie(n){let e=[],t=!1,i;return function(...o){return t&&e.length===o.length&&o.every((a,l)=>a===e[l])||(e=o,i=n.apply(this,o),t=!0),i}}function uU(n,e,t=!0){return function(){let r=n.call(this);return Object.defineProperty(this,e,{enumerable:t,value:r}),r}}function fU(n,e,t){if(typeof n=="function"){let l=e;if(l.kind==="getter")return uU(n,l.name);if(l.kind==="method")return nie(n);throw new Ix}let{get:i,enumerable:r,value:o}=t,s=e;if(i)return{configurable:!0,enumerable:r,get:uU(i,s,r)};if(typeof o!="function")throw new Ix;let a=o;return{configurable:!0,enumerable:r,get(){let l=[],u=!1,f,h=(...p)=>(u&&l.length===p.length&&p.every((v,x)=>v===l[x])||(l=p,f=a.apply(this,p),u=!0),f);return Object.defineProperty(this,s,{configurable:!0,value:h}),h}}}var Ix=class extends Error{constructor(){super("")}};var D1e=Yn(()=>{let n=new Map;return ee(Ll).onDestroy(()=>n.forEach(e=>e.destroy())),n});function hi(n,e,t={}){return Qs(n,e,t)}function hU(n,e=Boolean){return qp(Si(t=>e(t)?n(t):Ci))}var U1e={now:Zp.now.bind(Zp),schedule(n,e,t){return Zp.schedule(function(i){return Gr(()=>n.call(this,i))},e,t)}};var aI=class{constructor(e,t=Ml){this.zoneConditionFn=e,this.scheduler=t}now(){return this.scheduler.now()}schedule(...e){return this.zoneConditionFn(()=>this.scheduler.schedule(...e))}};function Ax(n=ee(Qn),e=Ml){return new aI(n.runOutsideAngular.bind(n),e)}var Wt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Wt||{}),As="*";function lI(n,e){return{type:Wt.Trigger,name:n,definitions:e,options:{}}}function Dx(n,e=null){return{type:Wt.Animate,styles:e,timings:n}}function pU(n,e=null){return{type:Wt.Sequence,steps:n,options:e}}function Xc(n){return{type:Wt.Style,styles:n,offset:null}}function cI(n,e,t){return{type:Wt.State,name:n,styles:e,options:t}}function Rx(n,e,t=null){return{type:Wt.Transition,expr:n,animation:e,options:t}}var el=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},cd=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},wh="!";var Ds=new Oe("[WA_WINDOW]",{factory:()=>{let{defaultView:n}=ee(mn);if(!n)throw new Error("Window is not available");return n}}),Zo=Ds,Q1e=new Oe("[WA_ANIMATION_FRAME]",{factory:()=>{let{requestAnimationFrame:n,cancelAnimationFrame:e}=ee(Zo);return new Ut(i=>{let r=NaN,o=s=>{i.next(s),r=n(o)};return r=n(o),()=>{e(r)}}).pipe(za())}});var eIe=new Oe("[WA_CACHES]",{factory:()=>ee(Zo).caches});var tIe=new Oe("[WA_CRYPTO]",{factory:()=>ee(Zo).crypto});var nIe=new Oe("[WA_CSS]",{factory:()=>ee(Zo).CSS??{escape:n=>n,supports:()=>!1}});var iIe=new Oe("[WA_HISTORY]",{factory:()=>ee(Zo).history});var rIe=new Oe("[WA_LOCAL_STORAGE]",{factory:()=>ee(Zo).localStorage});var oIe=new Oe("[WA_LOCATION]",{factory:()=>ee(Zo).location});var bh=new Oe("[WA_NAVIGATOR]",{factory:()=>ee(Zo).navigator}),mU=bh,sIe=new Oe("[WA_MEDIA_DEVICES]",{factory:()=>ee(mU).mediaDevices});var aIe=new Oe("[WA_NETWORK_INFORMATION]",{factory:()=>ee(bh).connection||null});var gU=new Oe("[WA_PAGE_VISIBILITY]",{factory:()=>{let n=ee(mn);return Qs(n,"visibilitychange").pipe(ys(0),ut(()=>n.visibilityState!=="hidden"),Df(),Jp({refCount:!1,bufferSize:1}))}});var lIe=new Oe("[WA_PERFORMANCE]",{factory:()=>ee(Zo).performance});var cIe=new Oe("[WA_SCREEN]",{factory:()=>ee(Zo).screen});var uIe=new Oe("[WA_SESSION_STORAGE]",{factory:()=>ee(Zo).sessionStorage});var dIe=new Oe("[WA_SPEECH_RECOGNITION]: [SPEECH_RECOGNITION]",{factory:()=>{let n=ee(Zo);return n.speechRecognition||n.webkitSpeechRecognition||null}});var fIe=new Oe("[WA_SPEECH_SYNTHESIS]",{factory:()=>ee(Zo).speechSynthesis});var Ch=new Oe("[WA_USER_AGENT]",{factory:()=>ee(mU).userAgent});var iie=/^((?!chrome|android).)*safari/i,rie=/ipad|iphone|ipod/i;function uI({userAgent:n,maxTouchPoints:e}){return rie.test(n)||iie.test(n)&&e>1}var oie=new Oe("",{factory:()=>uI(ee(bh))}),sie=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/,aie=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/,lie=new Oe("",{factory:()=>sie.test(ee(Ch).toLowerCase())||aie.test(ee(Ch).slice(0,4).toLowerCase())}),yIe=new Oe("",{factory:()=>ee(lie)&&!ee(oie)});var _Ie=new Oe("",{factory:()=>{let n=ee(Ds).matchMedia("(pointer: coarse)");return og(Qs(n,"change").pipe(ut(()=>n.matches)),{initialValue:n.matches})}}),xIe=new Oe("",{factory:()=>!!ee(Ds)?.webkitConvertPointFromNodeToPage});function vU(n){let e=n?.ownerDocument.defaultView;return!!n&&!!e&&n instanceof e.HTMLElement}function Px(n){return n.composedPath()[0]}function dI(n){return"getRootNode"in n&&n.isConnected?n.getRootNode():n.ownerDocument}function Yc(){return ee(Kt).nativeElement}function cie(n){if(n.hasAttribute("disabled")||n.getAttribute("tabIndex")==="-1")return!1;if(vU(n)&&n.isContentEditable||n.getAttribute("tabIndex")==="0")return!0;switch(n.tagName){case"A":case"LINK":return n.hasAttribute("href");case"AUDIO":case"VIDEO":return n.hasAttribute("controls");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;case"INPUT":return n.getAttribute("type")!=="hidden";default:return!1}}function yU(n){return!n.hasAttribute("disabled")&&(n.getAttribute("tabIndex")==="-1"||cie(n))}function _U(n){return new Ie(3e3,!1)}function uie(){return new Ie(3100,!1)}function die(){return new Ie(3101,!1)}function fie(n){return new Ie(3001,!1)}function hie(n){return new Ie(3003,!1)}function pie(n){return new Ie(3004,!1)}function wU(n,e){return new Ie(3005,!1)}function bU(){return new Ie(3006,!1)}function CU(){return new Ie(3007,!1)}function SU(n,e){return new Ie(3008,!1)}function EU(n){return new Ie(3002,!1)}function MU(n,e,t,i,r){return new Ie(3010,!1)}function TU(){return new Ie(3011,!1)}function IU(){return new Ie(3012,!1)}function AU(){return new Ie(3200,!1)}function DU(){return new Ie(3202,!1)}function RU(){return new Ie(3013,!1)}function PU(n){return new Ie(3014,!1)}function OU(n){return new Ie(3015,!1)}function FU(n){return new Ie(3016,!1)}function NU(n,e){return new Ie(3404,!1)}function mie(n){return new Ie(3502,!1)}function LU(n){return new Ie(3503,!1)}function kU(){return new Ie(3300,!1)}function UU(n){return new Ie(3504,!1)}function BU(n){return new Ie(3301,!1)}function VU(n,e){return new Ie(3302,!1)}function zU(n){return new Ie(3303,!1)}function HU(n,e){return new Ie(3400,!1)}function jU(n){return new Ie(3401,!1)}function GU(n){return new Ie(3402,!1)}function WU(n,e){return new Ie(3505,!1)}function $l(n){switch(n.length){case 0:return new el;case 1:return n[0];default:return new cd(n)}}function mI(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let u=l.get("offset"),f=u==s,h=f&&a||new Map;l.forEach((p,g)=>{let v=g,x=p;if(g!=="offset")switch(v=n.normalizePropertyName(v,r),x){case wh:x=t.get(g);break;case As:x=i.get(g);break;default:x=n.normalizeStyleValue(g,v,x,r);break}h.set(v,x)}),f||o.push(h),a=h,s=u}),r.length)throw mie(r);return o}function Ox(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&fI(t,"start",n)));break;case"done":n.onDone(()=>i(t&&fI(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&fI(t,"destroy",n)));break}}function fI(n,e,t){let i=t.totalTime,r=!!t.disabled,o=Fx(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function Fx(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Eo(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function gI(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var gie=typeof document>"u"?null:document.documentElement;function Nx(n){let e=n.parentNode||n.host||null;return e===gie?null:e}function vie(n){return n.substring(1,6)=="ebkit"}var ud=null,xU=!1;function $U(n){ud||(ud=yie()||{},xU=ud.style?"WebkitAppearance"in ud.style:!1);let e=!0;return ud.style&&!vie(n)&&(e=n in ud.style,!e&&xU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ud.style)),e}function yie(){return typeof document<"u"?document.body:null}function vI(n,e){for(;e;){if(e===n)return!0;e=Nx(e)}return!1}function yI(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var _ie=1e3,_I="{{",xie="}}",xI="ng-enter",Lx="ng-leave",gg="ng-trigger",vg=".ng-trigger",wI="ng-animating",kx=".ng-animating";function tl(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:hI(parseFloat(e[1]),e[2])}function hI(n,e){switch(e){case"s":return n*_ie;default:return n}}function yg(n,e,t){return n.hasOwnProperty("duration")?n:wie(n,e,t)}function wie(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(_U(n)),{duration:0,delay:0,easing:""};r=hI(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=hI(parseFloat(l),a[4]));let u=a[5];u&&(s=u)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(uie()),a=!0),o<0&&(e.push(die()),a=!0),a&&e.splice(l,0,_U(n))}return{duration:r,delay:o,easing:s}}function qU(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function ga(n,e,t){e.forEach((i,r)=>{let o=Ux(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Zc(n,e){e.forEach((t,i)=>{let r=Ux(i);n.style[r]=""})}function Sh(n){return Array.isArray(n)?n.length==1?n[0]:pU(n):n}function XU(n,e,t){let i=e.params||{},r=bI(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(fie(o))})}var pI=new RegExp(`${_I}\\s*(.+?)\\s*${xie}`,"g");function bI(n){let e=[];if(typeof n=="string"){let t;for(;t=pI.exec(n);)e.push(t[1]);pI.lastIndex=0}return e}function Eh(n,e,t){let i=`${n}`,r=i.replace(pI,(o,s)=>{let a=e[s];return a==null&&(t.push(hie(s)),a=""),a.toString()});return r==i?n:r}var bie=/-+([a-z0-9])/g;function Ux(n){return n.replace(bie,(...e)=>e[1].toUpperCase())}function YU(n,e){return n===0||e===0}function ZU(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,Bx(n,a)))}}return e}function Mo(n,e,t){switch(e.type){case Wt.Trigger:return n.visitTrigger(e,t);case Wt.State:return n.visitState(e,t);case Wt.Transition:return n.visitTransition(e,t);case Wt.Sequence:return n.visitSequence(e,t);case Wt.Group:return n.visitGroup(e,t);case Wt.Animate:return n.visitAnimate(e,t);case Wt.Keyframes:return n.visitKeyframes(e,t);case Wt.Style:return n.visitStyle(e,t);case Wt.Reference:return n.visitReference(e,t);case Wt.AnimateChild:return n.visitAnimateChild(e,t);case Wt.AnimateRef:return n.visitAnimateRef(e,t);case Wt.Query:return n.visitQuery(e,t);case Wt.Stagger:return n.visitStagger(e,t);default:throw pie(e.type)}}function Bx(n,e){return window.getComputedStyle(n)[e]}var BI=(()=>{class n{validateStyleProperty(t){return $U(t)}containsElement(t,i){return vI(t,i)}getParentElement(t){return Nx(t)}query(t,i,r){return yI(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new el(r,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),fd=class{static NOOP=new BI},hd=class{};var Cie=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Gx=class extends hd{normalizePropertyName(e,t){return Ux(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(Cie.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(wU(e,i))}return s+o}};var Wx="*";function Sie(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>Eie(i,t,e)):t.push(n),t}function Eie(n,e,t){if(n[0]==":"){let l=Mie(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(OU(n)),e;let r=i[1],o=i[2],s=i[3];e.push(KU(r,s));let a=r==Wx&&s==Wx;o[0]=="<"&&!a&&e.push(KU(s,r))}function Mie(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(FU(n)),"* => *"}}var Vx=new Set(["true","1"]),zx=new Set(["false","0"]);function KU(n,e){let t=Vx.has(n)||zx.has(n),i=Vx.has(e)||zx.has(e);return(r,o)=>{let s=n==Wx||n==r,a=e==Wx||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?Vx.has(n):zx.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?Vx.has(e):zx.has(e)),s&&a}}var aB=":self",Tie=new RegExp(`s*${aB}s*,?`,"g");function lB(n,e,t,i){return new II(n).build(e,t,i)}var JU="",II=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new AI(t);return this._resetContextStyleTimingState(r),Mo(this,Sh(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=JU,e.collectedStyles=new Map,e.collectedStyles.set(JU,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(bU()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Wt.State){let l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(f=>{l.name=f,o.push(this.visitState(l,t))}),l.name=u}else if(a.type==Wt.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(CU())}),{type:Wt.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{bI(l).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(SU(e.name,[...o.values()]))}return{type:Wt.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=Mo(this,Sh(e.animation),t),r=Sie(e.expr,t.errors);return{type:Wt.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:dd(e.options)}}visitSequence(e,t){return{type:Wt.Sequence,steps:e.steps.map(i=>Mo(this,i,t)),options:dd(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=Mo(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:Wt.Group,steps:o,options:dd(e.options)}}visitAnimate(e,t){let i=Rie(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Xc({});if(o.type==Wt.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};i.easing&&(u.easing=i.easing),s=Xc(u)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:Wt.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===As?i.push(a):t.errors.push(EU(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(_I)>=0){o=!0;break}}}),{type:Wt.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(l),h=!0;f&&(o!=r&&o>=f.startTime&&r<=f.endTime&&(t.errors.push(MU(l,f.startTime,f.endTime,o,r)),h=!1),o=f.startTime),h&&u.set(l,{startTime:o,endTime:r}),t.options&&XU(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:Wt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(TU()),i;let r=1,o=0,s=[],a=!1,l=!1,u=0,f=e.steps.map(_=>{let E=this._makeStyleAst(_,t),S=E.offset!=null?E.offset:Die(E.styles),C=0;return S!=null&&(o++,C=E.offset=S),l=l||C<0||C>1,a=a||C<u,u=C,s.push(C),E});l&&t.errors.push(IU()),a&&t.errors.push(AU());let h=e.steps.length,p=0;o>0&&o<h?t.errors.push(DU()):o==0&&(p=r/(h-1));let g=h-1,v=t.currentTime,x=t.currentAnimateTimings,y=x.duration;return f.forEach((_,E)=>{let S=p>0?E==g?1:p*E:s[E],C=S*y;t.currentTime=v+x.delay+C,x.duration=C,this._validateStyleAst(_,t),_.offset=S,i.styles.push(_)}),i}visitReference(e,t){return{type:Wt.Reference,animation:Mo(this,Sh(e.animation),t),options:dd(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Wt.AnimateChild,options:dd(e.options)}}visitAnimateRef(e,t){return{type:Wt.AnimateRef,animation:this.visitReference(e.animation,t),options:dd(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=Iie(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Eo(t.collectedStyles,t.currentQuerySelector,new Map);let a=Mo(this,Sh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:Wt.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:dd(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(RU());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:yg(e.timings,t.errors,!0);return{type:Wt.Stagger,animation:Mo(this,Sh(e.animation),t),timings:i,options:null}}};function Iie(n){let e=!!n.split(/\s*,\s*/).find(t=>t==aB);return e&&(n=n.replace(Tie,"")),n=n.replace(/@\*/g,vg).replace(/@\w+/g,t=>vg+"-"+t.slice(1)).replace(/:animating/g,kx),[n,e]}function Aie(n){return n?q({},n):null}var AI=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Die(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Rie(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=yg(n,e).duration;return CI(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=CI(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=yg(t,e);return CI(r.duration,r.delay,r.easing)}function dd(n){return n?(n=q({},n),n.params&&(n.params=Aie(n.params))):n={},n}function CI(n,e,t){return{duration:n,delay:e,easing:t}}function VI(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var xg=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Pie=1,Oie=":enter",Fie=new RegExp(Oie,"g"),Nie=":leave",Lie=new RegExp(Nie,"g");function cB(n,e,t,i,r,o=new Map,s=new Map,a,l,u=[]){return new DI().buildKeyframes(n,e,t,i,r,o,s,a,l,u)}var DI=class{buildKeyframes(e,t,i,r,o,s,a,l,u,f=[]){u=u||new xg;let h=new RI(e,t,u,r,o,f,[]);h.options=l;let p=l.delay?tl(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,l),Mo(this,i,h);let g=h.timelines.filter(v=>v.containsAnimation());if(g.length&&a.size){let v;for(let x=g.length-1;x>=0;x--){let y=g[x];if(y.element===t){v=y;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,h.errors,l)}return g.length?g.map(v=>v.buildKeyframes()):[VI(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:tl(Eh(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?tl(i.duration):null,a=i.delay!=null?tl(i.delay):null;return s!==0&&e.forEach(l=>{let u=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Mo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==Wt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=$x);let s=tl(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Mo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?tl(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),Mo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Eh(i,t.params,t.errors):i;return yg(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==Wt.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let u=l.offset||0;a.forwardTime(u*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?tl(r.delay):0;o&&(t.previousNode.type===Wt.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=$x);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,f)=>{t.currentQueryIndex=f;let h=t.createSubContext(e.options,u);o&&h.delayNextStep(o),u===t.element&&(l=h.currentTimeline),Mo(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let p=h.currentTimeline.currentTime;s=Math.max(s,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let f=t.currentTimeline;l&&f.delayNextStep(l);let h=f.currentTime;Mo(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}},$x={},RI=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=$x;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new qx(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=tl(i.duration)),i.delay!=null&&(r.delay=tl(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Eh(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=$x,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new PI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(Fie,"."+this._enterClassName),e=e.replace(Lie,"."+this._leaveClassName);let l=i!=1,u=this._driver.query(this.element,e,l);i!==0&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!o&&a.length==0&&s.push(PU(t)),a}},qx=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Pie,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||As),this._currentKeyframe.set(t,As);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=kie(e,this._globalTimelineStyles);for(let[a,l]of s){let u=Eh(l,o,i);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??As),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let u=new Map([...this._backFill,...a]);u.forEach((f,h)=>{f===wh?e.add(h):f===As&&t.add(h)}),i||u.set("offset",l/this.duration),r.push(u)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return VI(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},PI=class extends qx{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let u=new Map(e[0]);u.set("offset",QU(a)),o.push(u);let f=e.length-1;for(let h=1;h<=f;h++){let p=new Map(e[h]),g=p.get("offset"),v=t+g*i;p.set("offset",QU(v/s)),o.push(p)}i=s,t=0,r="",e=o}return VI(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function QU(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function kie(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,As)}else for(let[o,s]of r)t.set(o,s)}),t}function eB(n,e,t,i,r,o,s,a,l,u,f,h,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:f,totalTime:h,errors:p}}var SI={},Xx=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return Uie(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,u,f){let h=[],p=this.ast.options&&this.ast.options.params||SI,g=a&&a.params||SI,v=this.buildStyles(i,g,h),x=l&&l.params||SI,y=this.buildStyles(r,x,h),_=new Set,E=new Map,S=new Map,C=r==="void",k={params:uB(x,p),delay:this.ast.options?.delay},F=f?[]:cB(e,t,this.ast.animation,o,s,v,y,k,u,h),L=0;return F.forEach(W=>{L=Math.max(W.duration+W.delay,L)}),h.length?eB(t,this._triggerName,i,r,C,v,y,[],[],E,S,L,h):(F.forEach(W=>{let O=W.element,R=Eo(E,O,new Set);W.preStyleProps.forEach(me=>R.add(me));let j=Eo(S,O,new Set);W.postStyleProps.forEach(me=>j.add(me)),O!==t&&_.add(O)}),eB(t,this._triggerName,i,r,C,v,y,F,[..._.values()],E,S,L))}};function Uie(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function uB(n,e){let t=q({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var OI=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=uB(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Eh(s,r,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}};function Bie(n,e,t){return new FI(n,e,t)}var FI=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new OI(r.style,o,i))}),tB(this.states,"true","1"),tB(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Xx(e,r,this.states))}),this.fallbackTransition=Vie(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function Vie(n,e,t){let i=[(s,a)=>!0],r={type:Wt.Sequence,steps:[],options:null},o={type:Wt.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Xx(n,o,e)}function tB(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var zie=new xg,NI=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],o=lB(this._driver,t,i,r);if(i.length)throw LU(i);this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=mI(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=cB(this._driver,t,o,xI,Lx,new Map,new Map,i,zie,r),s.forEach(f=>{let h=Eo(a,f.element,new Map);f.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(kU()),s=[]),r.length)throw UU(r);a.forEach((f,h)=>{f.forEach((p,g)=>{f.set(g,this._driver.computeStyle(h,g,As))})});let l=s.map(f=>{let h=a.get(f.element);return this._buildPlayer(f,new Map,h)}),u=$l(l);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw BU(e);return t}listen(e,t,i,r){let o=Fx(t,"","","");return Ox(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},nB="ng-animate-queued",Hie=".ng-animate-queued",EI="ng-animate-disabled",jie=".ng-animate-disabled",Gie="ng-star-inserted",Wie=".ng-star-inserted",$ie=[],dB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qie={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},va="__ng_removed",wg=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Yie(r),i){let o=e,{value:s}=o,a=gf(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},_g="void",MI=new wg(_g),LI=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,Rs(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw VU(i,t);if(i==null||i.length==0)throw zU(t);if(!Zie(i))throw HU(i,t);let o=Eo(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=Eo(this._engine.statesByElement,e,new Map);return a.has(t)||(Rs(e,gg),Rs(e,gg+"-"+t),a.set(t,MI)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw jU(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new bg(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Rs(e,gg),Rs(e,gg+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),u=new wg(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=MI),!(u.value===_g)&&l.value===u.value){if(!Qie(l.params,u.params)){let x=[],y=o.matchStyles(l.value,l.params,x),_=o.matchStyles(u.value,u.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{Zc(e,y),ga(e,_)})}return}let p=Eo(this._engine.playersByElement,e,[]);p.forEach(x=>{x.namespaceId==this.id&&x.triggerName==t&&x.queued&&x.destroy()});let g=o.matchTransition(l.value,u.value,e,u.params),v=!1;if(!g){if(!r)return;g=o.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:u,player:s,isFallbackTransition:v}),v||(Rs(e,nB),s.onStart(()=>{Mh(e,nB)})),s.onDone(()=>{let x=this.players.indexOf(s);x>=0&&this.players.splice(x,1);let y=this._engine.playersByElement.get(e);if(y){let _=y.indexOf(s);_>=0&&y.splice(_,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,vg,!0);i.forEach(r=>{if(r[va])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,u)=>{if(s.set(u,l.value),this._triggers.has(u)){let f=this.trigger(e,u,_g,r);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&$l(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,u=i.get(s)||MI,f=new wg(_g),h=new bg(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:u,toState:f,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[va];(!o||o===dB)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Rs(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=Fx(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,Ox(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},kI=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new LI(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let u=i.indexOf(l);i.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(Hx(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Hx(t))return;let o=t[va];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Rs(e,EI)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Mh(e,EI))}removeNode(e,t,i){if(Hx(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[va]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return Hx(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,vg,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,kx,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return $l(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[va];if(t&&t.setForRemoval){if(e[va]=dB,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(EI)&&this.markElementAsDisabled(e,!1),this.driver.query(e,jie,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Rs(r,Gie)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?$l(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw GU(e)}_flushAnimations(e,t){let i=new xg,r=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(Y=>{f.add(Y);let re=this.driver.query(Y,Hie,!0);for(let X=0;X<re.length;X++)f.add(re[X])});let h=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=oB(p,this.collectedEnterElements),v=new Map,x=0;g.forEach((Y,re)=>{let X=xI+x++;v.set(re,X),Y.forEach(_e=>Rs(_e,X))});let y=[],_=new Set,E=new Set;for(let Y=0;Y<this.collectedLeaveElements.length;Y++){let re=this.collectedLeaveElements[Y],X=re[va];X&&X.setForRemoval&&(y.push(re),_.add(re),X.hasAnimation?this.driver.query(re,Wie,!0).forEach(_e=>_.add(_e)):E.add(re))}let S=new Map,C=oB(p,Array.from(_));C.forEach((Y,re)=>{let X=Lx+x++;S.set(re,X),Y.forEach(_e=>Rs(_e,X))}),e.push(()=>{g.forEach((Y,re)=>{let X=v.get(re);Y.forEach(_e=>Mh(_e,X))}),C.forEach((Y,re)=>{let X=S.get(re);Y.forEach(_e=>Mh(_e,X))}),y.forEach(Y=>{this.processLeaveNode(Y)})});let k=[],F=[];for(let Y=this._namespaceList.length-1;Y>=0;Y--)this._namespaceList[Y].drainQueuedTransitions(t).forEach(X=>{let _e=X.player,ze=X.element;if(k.push(_e),this.collectedEnterElements.length){let le=ze[va];if(le&&le.setForMove){if(le.previousTriggersValues&&le.previousTriggersValues.has(X.triggerName)){let je=le.previousTriggersValues.get(X.triggerName),We=this.statesByElement.get(X.element);if(We&&We.has(X.triggerName)){let Ue=We.get(X.triggerName);Ue.value=je,We.set(X.triggerName,Ue)}}_e.destroy();return}}let rt=!h||!this.driver.containsElement(h,ze),ve=S.get(ze),oe=v.get(ze),B=this._buildInstruction(X,i,oe,ve,rt);if(B.errors&&B.errors.length){F.push(B);return}if(rt){_e.onStart(()=>Zc(ze,B.fromStyles)),_e.onDestroy(()=>ga(ze,B.toStyles)),r.push(_e);return}if(X.isFallbackTransition){_e.onStart(()=>Zc(ze,B.fromStyles)),_e.onDestroy(()=>ga(ze,B.toStyles)),r.push(_e);return}let Q=[];B.timelines.forEach(le=>{le.stretchStartingKeyframe=!0,this.disabledNodes.has(le.element)||Q.push(le)}),B.timelines=Q,i.append(ze,B.timelines);let xe={instruction:B,player:_e,element:ze};s.push(xe),B.queriedElements.forEach(le=>Eo(a,le,[]).push(_e)),B.preStyleProps.forEach((le,je)=>{if(le.size){let We=l.get(je);We||l.set(je,We=new Set),le.forEach((Ue,at)=>We.add(at))}}),B.postStyleProps.forEach((le,je)=>{let We=u.get(je);We||u.set(je,We=new Set),le.forEach((Ue,at)=>We.add(at))})});if(F.length){let Y=[];F.forEach(re=>{Y.push(WU(re.triggerName,re.errors))}),k.forEach(re=>re.destroy()),this.reportError(Y)}let L=new Map,W=new Map;s.forEach(Y=>{let re=Y.element;i.has(re)&&(W.set(re,re),this._beforeAnimationBuild(Y.player.namespaceId,Y.instruction,L))}),r.forEach(Y=>{let re=Y.element;this._getPreviousPlayers(re,!1,Y.namespaceId,Y.triggerName,null).forEach(_e=>{Eo(L,re,[]).push(_e),_e.destroy()})});let O=y.filter(Y=>sB(Y,l,u)),R=new Map;rB(R,this.driver,E,u,As).forEach(Y=>{sB(Y,l,u)&&O.push(Y)});let me=new Map;g.forEach((Y,re)=>{rB(me,this.driver,new Set(Y),l,wh)}),O.forEach(Y=>{let re=R.get(Y),X=me.get(Y);R.set(Y,new Map([...re?.entries()??[],...X?.entries()??[]]))});let ue=[],De=[],Ce={};s.forEach(Y=>{let{element:re,player:X,instruction:_e}=Y;if(i.has(re)){if(f.has(re)){X.onDestroy(()=>ga(re,_e.toStyles)),X.disabled=!0,X.overrideTotalTime(_e.totalTime),r.push(X);return}let ze=Ce;if(W.size>1){let ve=re,oe=[];for(;ve=ve.parentNode;){let B=W.get(ve);if(B){ze=B;break}oe.push(ve)}oe.forEach(B=>W.set(B,ze))}let rt=this._buildAnimation(X.namespaceId,_e,L,o,me,R);if(X.setRealPlayer(rt),ze===Ce)ue.push(X);else{let ve=this.playersByElement.get(ze);ve&&ve.length&&(X.parentPlayer=$l(ve)),r.push(X)}}else Zc(re,_e.fromStyles),X.onDestroy(()=>ga(re,_e.toStyles)),De.push(X),f.has(re)&&r.push(X)}),De.forEach(Y=>{let re=o.get(Y.element);if(re&&re.length){let X=$l(re);Y.setRealPlayer(X)}}),r.forEach(Y=>{Y.parentPlayer?Y.syncPlayerEvents(Y.parentPlayer):Y.destroy()});for(let Y=0;Y<y.length;Y++){let re=y[Y],X=re[va];if(Mh(re,Lx),X&&X.hasAnimation)continue;let _e=[];if(a.size){let rt=a.get(re);rt&&rt.length&&_e.push(...rt);let ve=this.driver.query(re,kx,!0);for(let oe=0;oe<ve.length;oe++){let B=a.get(ve[oe]);B&&B.length&&_e.push(...B)}}let ze=_e.filter(rt=>!rt.destroyed);ze.length?Kie(this,re,ze):this.processLeaveNode(re)}return y.length=0,ue.forEach(Y=>{this.players.push(Y),Y.onDone(()=>{Y.destroy();let re=this.players.indexOf(Y);this.players.splice(re,1)}),Y.play()}),ue}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==_g;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||s.push(u)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let u=l.element,f=u!==o,h=Eo(i,u,[]);this._getPreviousPlayers(u,f,s,a,t.toState).forEach(g=>{let v=g.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),g.destroy(),h.push(g)})}Zc(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,l=t.element,u=[],f=new Set,h=new Set,p=t.timelines.map(v=>{let x=v.element;f.add(x);let y=x[va];if(y&&y.removedBeforeQueried)return new el(v.duration,v.delay);let _=x!==l,E=Jie((i.get(x)||$ie).map(L=>L.getRealPlayer())).filter(L=>{let W=L;return W.element?W.element===x:!1}),S=o.get(x),C=s.get(x),k=mI(this._normalizer,v.keyframes,S,C),F=this._buildPlayer(v,k,E);if(v.subTimeline&&r&&h.add(x),_){let L=new bg(e,a,x);L.setRealPlayer(F),u.push(L)}return F});u.forEach(v=>{Eo(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>Xie(this.playersByQueriedElement,v.element,v))}),f.forEach(v=>Rs(v,wI));let g=$l(p);return g.onDestroy(()=>{f.forEach(v=>Mh(v,wI)),ga(l,t.toStyles)}),h.forEach(v=>{Eo(r,v,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new el(e.duration,e.delay)}},bg=class{namespaceId;triggerName;element;_player=new el;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>Ox(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Eo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Xie(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Yie(n){return n??null}function Hx(n){return n&&n.nodeType===1}function Zie(n){return n=="start"||n=="done"}function iB(n,e){let t=n.style.display;return n.style.display=e??"none",t}function rB(n,e,t,i,r){let o=[];t.forEach(l=>o.push(iB(l)));let s=[];i.forEach((l,u)=>{let f=new Map;l.forEach(h=>{let p=e.computeStyle(u,h,r);f.set(h,p),(!p||p.length==0)&&(u[va]=qie,s.push(u))}),n.set(u,f)});let a=0;return t.forEach(l=>iB(l,o[a++])),s}function oB(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let u=a.parentNode;return t.has(u)?l=u:r.has(u)?l=i:l=s(u),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==i&&t.get(l).push(a)}),t}function Rs(n,e){n.classList?.add(e)}function Mh(n,e){n.classList?.remove(e)}function Kie(n,e,t){$l(t).onDone(()=>n.processLeaveNode(e))}function Jie(n){let e=[];return fB(n,e),e}function fB(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof cd?fB(i.players,e):e.push(i)}}function Qie(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function sB(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var Kc=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new kI(e.body,t,i),this._timelineEngine=new NI(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],u=[],f=lB(this._driver,o,l,u);if(l.length)throw NU(r,l);a=Bie(r,f,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=gI(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=gI(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function ere(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=TI(e[0]),e.length>1&&(i=TI(e[e.length-1]))):e instanceof Map&&(t=TI(e)),t||i?new tre(n,t,i):null}var tre=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&ga(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ga(this._element,this._initialStyles),this._endStyles&&(ga(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zc(this._element,this._endStyles),this._endStyles=null),ga(this._element,this._initialStyles),this._state=3)}}return n})();function TI(n){let e=null;return n.forEach((t,i)=>{nre(i)&&(e=e||new Map,e.set(i,t))}),e}function nre(n){return n==="display"||n==="position"}var Yx=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:Bx(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Zx=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return vI(e,t)}getParentElement(e){return Nx(e)}query(e,t,i){return yI(e,t,i)}computeStyle(e,t,i){return Bx(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let u=new Map,f=s.filter(g=>g instanceof Yx);YU(i,r)&&f.forEach(g=>{g.currentSnapshot.forEach((v,x)=>u.set(x,v))});let h=qU(t).map(g=>new Map(g));h=ZU(e,h,u);let p=ere(e,h);return new Yx(e,h,l,p)}};var jx="@",hB="@.disabled",Kx=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==jx&&t==hB?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},UI=class extends Kx{factory;constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==jx?t.charAt(1)=="."&&t==hB?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==jx){let o=ire(e),s=t.slice(1),a="";return s.charAt(0)!=jx&&([s,a]=rre(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,i,l)})}return this.delegate.listen(e,t,i,r)}};function ire(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function rre(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var Jx=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,f=u.get(r);if(!f){let h=()=>u.delete(r);f=new Kx(i,r,this.engine,h),u.set(r,f)}return f}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new UI(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var sre=Yn(()=>{let n={onRemovalComplete:()=>{}},e=new zn(null),t=ee(Kc,{optional:!0})||n,{onRemovalComplete:i=n.onRemovalComplete}=t;return t.onRemovalComplete=(r,o)=>{e.next(r),i.call(t,r,o)},e.pipe(Si(r=>Va(0).pipe(ut(()=>null),ys(r))),za())});function pB(n,e=null){return dI(n).activeElement!==n&&!n.matches(":disabled")&&!e?.contains(n)&&yU(n)}function are(n){return ao(hi(n,"focusin").pipe(ut(({target:e})=>e)),hi(n,"focusout").pipe(Xn(({target:e,relatedTarget:t})=>!!t&&pB(e)),ut(({relatedTarget:e})=>e)))}var YIe=Yn(()=>{let n=ee(sre),e=ee(Ds),t=ee(mn),i=ee(Qn),r=hi(e,"focusout",{capture:!0}),o=hi(e,"focusin",{capture:!0}),s=hi(e,"blur"),a=hi(e,"mousedown"),l=hi(e,"mouseup");return ao(r.pipe(_s(a),Pf({delay:()=>l}),IE(n),Xn(([u,f])=>pB(Px(u),f)),ut(([{relatedTarget:u}])=>u)),s.pipe(ut(()=>t.activeElement),Xn(u=>!!u?.matches("iframe"))),o.pipe(Si(u=>{let f=Px(u),h=dI(f)||t;return h===t?Dt(f):are(h).pipe(ys(f))})),a.pipe(Si(u=>{let f=Px(u);return!t.activeElement||t.activeElement===t.body?Dt(f):r.pipe(Vo(1),ut(()=>f),_s(Va(0,Ax(i))))}))).pipe(Df(),za())}),ZIe=Yn(()=>ee(mn).querySelector("base")?.href??""),lre=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/,cre=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/,zI=Yn(()=>lre.test(ee(Ch).toLowerCase())||cre.test(ee(Ch).slice(0,4).toLowerCase())),mB=Yn(()=>uI(ee(bh))),ure=Yn(()=>ee(zI)&&!ee(mB)),KIe=Yn(()=>!!ee(Ds)?.webkitConvertPointFromNodeToPage),JIe=Yn(()=>ee(mB)?"ios":ee(ure)?"android":"web"),QIe=Yn(()=>{let n=ee(Ds).matchMedia("(pointer: coarse)");return og(Qs(n,"change").pipe(ut(()=>n.matches)),{initialValue:n.matches})}),dre=Yn(()=>!!ee(Ds).Cypress),fre=Yn(sg),eAe=Yn(()=>ee(dre)||ee(fre)),tAe=ld(null);var nAe=Yn(()=>Am(ee(la))?new Range:{}),iAe=Yn(()=>{let n=ee(Ds);return hi(n,"resize").pipe(ys(null),ut(()=>{let e=Math.max(n.document.documentElement.clientWidth||0,n.innerWidth||0,n.visualViewport?.width||0),t=Math.max(n.document.documentElement.clientHeight||0,n.innerHeight||0,n.visualViewport?.height||0),i={width:e,height:t,top:0,left:0,right:e,bottom:t,x:0,y:0};return Ve(q({},i),{toJSON:()=>JSON.stringify(i)})}),Jp({bufferSize:1,refCount:!0}))});var hre=typeof IntersectionObserver<"u"?IntersectionObserver:class{root=null;rootMargin="";thresholds=[];observe(){}unobserve(){}disconnect(){}takeRecords(){return[]}},pre=new Oe("[WA_INTERSECTION_ROOT]"),mre=pre,gre="0px 0px 0px 0px",vB=gre,fAe=new Oe("[WA_INTERSECTION_ROOT_MARGIN]",{providedIn:"root",factory:()=>vB});function vre(){return ee(Kt).nativeElement.getAttribute("waIntersectionRootMargin")||vB}var yre=0,yB=yre,hAe=new Oe("[WA_INTERSECTION_THRESHOLD]",{providedIn:"root",factory:()=>yB});function _re(){return ee(Kt).nativeElement.getAttribute("waIntersectionThreshold")?.split(",").map(parseFloat)||yB}var HI=(()=>{class n extends hre{callbacks=new Map;margin="";threshold="";constructor(){let t=ee(mre,{optional:!0});super(i=>{this.callbacks.forEach((r,o)=>{let s=i.filter(({target:a})=>a===o);return s.length&&r(s,this)})},{root:t?.nativeElement,rootMargin:vre(),threshold:_re()})}observe(t,i=()=>{}){super.observe(t),this.callbacks.set(t,i)}unobserve(t){super.unobserve(t),this.callbacks.delete(t)}ngOnDestroy(){this.disconnect()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=_t({type:n,selectors:[["","waIntersectionObserver",""]],inputs:{margin:[0,"waIntersectionRootMargin","margin"],threshold:[0,"waIntersectionThreshold","threshold"]},exportAs:["IntersectionObserver"],features:[On]})}return n})();var gB=(()=>{class n extends Ut{constructor(){let t=ee(Kt).nativeElement,i=ee(HI);return super(r=>(i.observe(t,o=>{r.next(o)}),()=>{i.unobserve(t)})),this.pipe(za())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),_B=(()=>{class n{waIntersectionObservee=ee(gB);static \u0275fac=function(i){return new(i||n)};static \u0275dir=_t({type:n,selectors:[["","waIntersectionObservee",""]],outputs:{waIntersectionObservee:"waIntersectionObservee"},features:[bn([gB])]})}return n})();var pAe=new Oe("[WA_INTERSECTION_OBSERVER_SUPPORT]: [INTERSECTION_OBSERVER_SUPPORT]",{providedIn:"root",factory:()=>!!ee(Ds).IntersectionObserver});var Qx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_t({type:n,selectors:[["","tuiItem",""]]})}}return n})();var xB=(()=>{class n extends Ut{constructor(){let t=Yc(),i=ee(mn);super(r=>ao(hi(t,"touchstart",{passive:!0}),hi(t,"mousedown")).pipe(Si(()=>ao(hi(i,"touchmove",{passive:!0}).pipe(Xn(({touches:o})=>o.length<2),ut(({touches:o})=>o[0])),hi(i,"mousemove"))),Kp(),ut(([o,s])=>{let a=(s?.clientX??0)-(o?.clientX??0),l=(s?.clientY??0)-(o?.clientY??0);return[a,l]}),_s(ao(hi(i,"touchend"),hi(i,"mouseup"))),Pf()).subscribe(r))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})(),wB=(()=>{class n{constructor(){this.tuiPan=ee(xB)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_t({type:n,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},features:[bn([xB])]})}}return n})();var jI=ld({timeout:500,threshold:30}),bB=(()=>{class n extends Ut{constructor(){let t=ee(mn),i=Yc(),{timeout:r,threshold:o}=ee(jI);super(s=>ao(hi(i,"touchstart",{passive:!0}),hi(t,"touchend")).pipe(Kp(),Xn(([a,l])=>!!a.touches.length&&a.touches[0]?.identifier===l.changedTouches[0]?.identifier),ut(([a,l])=>{let u=a.touches[0]?.clientX??0,f=a.touches[0]?.clientY??0,h=l.changedTouches[0]?.clientX??0,p=l.changedTouches[0]?.clientY??0,g=u-h,v=f-p,x=l.timeStamp-a.timeStamp;return(Math.abs(g)>o||Math.abs(v)>o)&&x<r?{direction:bre(g,v),events:[a,l]}:null}),Xn(dU)).subscribe(s))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac})}}return n})();function bre(n,e){return Math.abs(e)>Math.abs(n)?e>0?"top":"bottom":n>0?"left":"right"}var CB=(()=>{class n{constructor(){this.tuiSwipe=ee(bB)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_t({type:n,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[bn([bB])]})}}return n})();function Cre(n,e){n&1&&fa(0)}function Sre(n,e){if(n&1){let t=yt();I(0,"fieldset",5),Me("waIntersectionObservee",function(r){let o=Le(t).index,s=ae();return ke(r[0]&&s.onIntersection(r[0],o))}),fa(1,6),A()}if(n&2){let t=e.$implicit,i=e.index,r=ae();I2(r.getStyle(r.itemsCount)),$("disabled",r.isDisabled(i)),z(),$("ngTemplateOutlet",t)}}var GI=(()=>{class n extends Ut{constructor(){super(t=>this.output$.subscribe(t)),this.el=Yc(),this.platform=ee(la),this.visible$=ee(gU),this.duration$=new zn(0),this.running$=ao(hi(this.el,"mouseenter").pipe(ut(sg)),hi(this.el,"touchstart").pipe(ut(sg)),hi(this.el,"touchend").pipe(ut(Y1)),hi(this.el,"mouseleave").pipe(ut(Y1)),this.visible$),this.output$=th(this.platform)?Ci:Af([this.duration$,this.running$]).pipe(hU(([t])=>CE(t),t=>t.every(Boolean)))}set duration(t){this.duration$.next(Number.isNaN(t)?this.duration$.value:t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_t({type:n,inputs:{duration:"duration"},features:[On]})}}return n})(),Ere=(()=>{class n{constructor(){this.tuiCarouselAutoscroll=ee(GI)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_t({type:n,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}})}}return n})(),Mre=(()=>{class n{constructor(){this.el=Yc(),this.tuiCarouselScroll=hi(this.el,"wheel").pipe(Xn(({deltaX:t})=>Math.abs(t)>20),TE(500,Ax()),ut(({deltaX:t})=>Math.sign(t)),Ei(()=>{this.el.scrollLeft=10}))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_t({type:n,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}})}}return n})(),SB=(()=>{class n{constructor(){this.el=Yc(),this.cdr=ee(ur),this.isMobile=ee(zI),this.directive=ee(GI),this.translate=0,this.items=Tk,this.transitioned=!0,this.index=0,this.draggable=!1,this.itemsCount=1,this.indexChange=new Hn,this.shift=new Hn}set indexSetter(t){this.index=t,this.directive.duration=NaN}next(){this.items&&this.index===this.items.length-this.itemsCount||this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}get transform(){return`translateX(${100*this.x}%)`}getStyle(t){let i=`${100/t}%`;return{flexBasis:i,minWidth:i,maxWidth:i}}onTransitioned(t){this.transitioned=t,t||(this.translate=this.computedTranslate),this.onShift()}isDisabled(t){return t<this.index||t>=this.index+this.itemsCount}onIntersection({intersectionRatio:t},i){t&&t>=.5&&!this.transitioned&&this.updateIndex(this.index<i?i-this.itemsCount+1:i)}onScroll(t){this.isMobile||(t>0?this.next():this.prev())}onPan(t){if(!this.computedDraggable)return;let i=1-this.items.length/this.itemsCount;this.translate=sI(t/this.el.clientWidth+this.translate,i,0),this.onShift()}onSwipe(t){t==="left"?this.next():t==="right"&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}onShift(){this.shift.emit(Math.abs(this.x%1+.5)*2)}get x(){return this.transitioned?this.computedTranslate:this.translate}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(t){this.index=sI(t,0,this.items.length-1),this.indexChange.emit(this.index),this.cdr.markForCheck()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=dn({type:n,selectors:[["tui-carousel"]],contentQueries:function(i,r,o){if(i&1&&ZT(o,Qx,4,Rr),i&2){let s;ci(s=ui())&&(r.items=s)}},hostVars:4,hostBindings:function(i,r){i&1&&Me("touchstart",function(){return r.onTransitioned(!1)})("touchend",function(){return r.onTransitioned(!0)})("mousedown",function(){return r.onTransitioned(!1)})("mouseup.zoneless",function(){return r.onTransitioned(!0)},!1,jr),i&2&&Dn("_transitioned",r.transitioned)("_draggable",r.draggable)},inputs:{draggable:"draggable",itemsCount:"itemsCount",indexSetter:[0,"index","indexSetter"]},outputs:{indexChange:"indexChange",shift:"shift"},features:[bn([{provide:jI,useValue:{timeout:200,threshold:30}}]),g2([{directive:GI,inputs:["duration","duration"]}])],decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionObserver","","waIntersectionThreshold","0.5",1,"t-wrapper"],[1,"t-items",3,"tuiCarouselAutoscroll","tuiPan","tuiSwipe"],["class","t-item",3,"disabled","style","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"waIntersectionObservee","disabled"],[3,"ngTemplateOutlet"]],template:function(i,r){i&1&&(Pe(0,Cre,1,0,"ng-container",0),_o(1,"async"),I(2,"div",1),Me("tuiCarouselScroll",function(s){return r.onScroll(s)}),I(3,"div",2)(4,"div",3),Me("tuiCarouselAutoscroll",function(){return r.onAutoscroll()})("tuiPan",function(s){return r.onPan(s[0])})("tuiSwipe",function(s){return r.onSwipe(s.direction)}),Pe(5,Sre,2,4,"fieldset",4),A()()()),i&2&&($("ngIf",xo(1,4,r.items.changes)),z(4),Fn("transform",r.transform),z(),$("ngForOf",r.items))},dependencies:[Mm,gi,Rn,ha,Ere,Mre,wB,CB,HI,_B],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}  [tuiCarouselButtons] [tuiIconButton]{border-radius:100%}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-inline-size:100%;max-inline-size:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:sticky;left:0;right:0;min-inline-size:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;touch-action:pan-y}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{display:none}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-inline-size:1rem}'],changeDetection:0})}}return vO([fU],n.prototype,"getStyle",null),n})();function Tre(n,e){if(n&1){let t=yt();I(0,"button",7),Me("click",function(){Le(t);let r=ae(2).index,o=ae(2);return ke(o.changeMainImage(r))}),K(1),A()}if(n&2){let t=ae(2).index,i=ae(2);z(),pn(i.imagesData.idMainImage===t?"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F":"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439")}}function Ire(n,e){if(n&1&&(I(0,"div",4),ye(1,"img",5),Pe(2,Tre,2,1,"button",6),A()),n&2){let t=ae(),i=t.$implicit,r=t.index,o=ae(2);Dn("active",r===o.index+1),z(),$("src",i,Pr),z(),$("ngIf",o.changeModeSlider)}}function Are(n,e){n&1&&(ua(0),Pe(1,Ire,3,4,"div",3),da())}function Dre(n,e){if(n&1){let t=yt();I(0,"tui-carousel",1),yo("indexChange",function(r){Le(t);let o=ae();return Go(o.index,r)||(o.index=r),ke(r)}),Pe(1,Are,2,0,"ng-container",2),A()}if(n&2){let t=ae();$("draggable",!0)("itemsCount",t.getItemsCount()),vo("index",t.index),z(),$("ngForOf",t.imagesData.images)}}var ew=(()=>{class n{index=0;isMobileView=!1;imagesData;changeModeSlider=!1;ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=768}changeMainImage(t){this.imagesData.idMainImage=t}getItemsCount(){return this.imagesData.images.length<3?this.imagesData.images.length:this.isMobileView?1:3}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=dn({type:n,selectors:[["app-image-slider"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,jo)},inputs:{imagesData:"imagesData",changeModeSlider:"changeModeSlider"},decls:1,vars:1,consts:[[3,"draggable","itemsCount","index","indexChange",4,"ngIf"],[3,"indexChange","draggable","itemsCount","index"],[4,"ngFor","ngForOf"],["alt","","draggable","false","class","item",3,"active",4,"tuiItem"],["alt","","draggable","false",1,"item"],[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(i,r){i&1&&Pe(0,Dre,2,4,"tui-carousel",0),i&2&&$("ngIf",r.imagesData)},dependencies:[Rn,gi,Qx,SB],styles:["tui-carousel[_ngcontent-%COMP%]{width:100%;max-width:90vw}.item[_ngcontent-%COMP%]{transition:box-shadow .3s,transform .3s;margin:2rem auto;width:100%;max-height:350px;max-width:350px;aspect-ratio:1;border-radius:20px;background-color:#fff;display:grid;place-items:center;outline:none;border:none}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:90%;pointer-events:none}.item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{grid-area:1/1/2/2;align-self:flex-end;margin-bottom:10px;background:none;outline:none;border:none;font-family:Courier New,Courier,monospace;cursor:pointer;padding:5px;background-color:#fff;border-radius:5px;transition:all .3s ease-in-out}.item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px #fff}"]})}return n})();var EB=Iu(WI());var tw=(()=>{class n{el=ee(Kt);mobileView=!1;constructor(){}ngOnInit(){this.mobileView&&this.el.nativeElement.addEventListener("input",this.onInput.bind(this.el.nativeElement))}onInput(t){let i=t.target;(0,EB.throttle)(()=>{i.style.height="auto",i.style.height=i.scrollHeight+"px"},250)()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=_t({type:n,selectors:[["","appAutoHeight",""]],inputs:{mobileView:"mobileView"}})}return n})();var Jc=(()=>{class n{transform(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")+" \u20BD"}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Kf({name:"costFormat",type:n,pure:!0})}return n})();var TB=Iu(MB());var nw=(()=>{class n{compressImage(t){return new Promise((i,r)=>{new TB.default(t,{quality:.6,success:o=>{i(o)},error:o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0436\u0430\u0442\u0438\u044F:",o.message),r(o)}})})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ih="https://housequality.site/",di=Ih+"api/";var Ah=(()=>{class n{httpModule;baseServiceUrl=di+"category";constructor(t){this.httpModule=t}GETgetAllCategories(){return xn(this.httpModule.get(this.baseServiceUrl))}static \u0275fac=function(i){return new(i||n)(He(Gi))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Di=(()=>{class n{errorSubject=new zn("");successSubject=new zn("");error$=this.errorSubject.asObservable();success$=this.successSubject.asObservable();setError(t,i){this.errorSubject.next(t),setTimeout(()=>this.clearError(),i)}setSuccess(t,i){this.successSubject.next(t),setTimeout(()=>this.clearError(),i)}clearError(){this.errorSubject.next(""),this.successSubject.next("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Rre=["colorModule"],Pre=["shopsModule"],Ore=["additionalModule"],Fre=()=>({standalone:!0}),YI=n=>({invalid:n}),Nre=n=>({filterData:n});function Lre(n,e){if(n&1){let t=yt();I(0,"button",31),Me("click",function(){Le(t);let r=ae();return ke(r.removeImages())}),ye(1,"img",32),A()}}function kre(n,e){if(n&1&&ye(0,"app-image-slider",33),n&2){let t=ae();$("imagesData",t.furnitureData.colors[t.currentColorId].imagesData)("changeModeSlider",!0)}}function Ure(n,e){if(n&1){let t=yt();I(0,"div",34)(1,"input",35),Me("input",function(r){Le(t);let o=ae();return ke(o.onInputImages(r))}),A(),ye(2,"img",36),A()}}function Bre(n,e){if(n&1){let t=yt();I(0,"button",39),Me("click",function(){let r=Le(t).index,o=ae(2);return ke(o.openFurnitureVariant(r))}),A()}if(n&2){let t=e.$implicit,i=e.index;Fn("background-color",t.color),lr("data-idColor",i)}}function Vre(n,e){if(n&1&&(I(0,"span",37),Pe(1,Bre,1,3,"button",38),A()),n&2){let t=ae();Fn("--total-items",t.furnitureData.colors.length.toString()),z(),$("ngForOf",t.furnitureData.colors)}}function zre(n,e){if(n&1){let t=yt();I(0,"button",40),Me("click",function(){let r=Le(t).index,o=ae();return ke(o.openShopsModule(r))}),I(1,"div",41),K(2),_o(3,"costFormat"),A(),I(4,"div",42),ye(5,"img",43),A()()}if(n&2){let t=e.$implicit;z(2),pn(xo(3,1,t.cost))}}function Hre(n,e){n&1&&fa(0)}function jre(n,e){n&1&&(I(0,"span",54),K(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 "),A())}function Gre(n,e){if(n&1){let t=yt();I(0,"form",44),Me("ngSubmit",function(){Le(t);let r=ae();return ke(r.addColor())}),I(1,"button",45),Me("click",function(){Le(t);let r=ae();return ke(r.closeAddModule())}),ye(2,"img",46),A(),I(3,"span",47)(4,"h2",48),K(5,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043C\u0435\u0431\u0435\u043B\u0438"),A(),I(6,"span",49)(7,"label",50),K(8,"\u0426\u0432\u0435\u0442"),A(),ye(9,"input",51),Pe(10,jre,2,0,"span",52),A(),I(11,"button",53),K(12,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),A()()()}if(n&2){let t,i=ae();$("formGroup",i.colorForm),z(10),$("ngIf",((t=i.colorForm.get("color"))==null?null:t.invalid)&&(((t=i.colorForm.get("color"))==null?null:t.dirty)||((t=i.colorForm.get("color"))==null?null:t.touched))),z(),$("disabled",!i.colorForm.valid)}}function Wre(n,e){n&1&&(I(0,"span",54),K(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0443\u044E \u0446\u0435\u043D\u0443 "),A())}function $re(n,e){n&1&&(I(0,"span",54),K(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 "),A())}function qre(n,e){if(n&1){let t=yt();I(0,"button",62),Me("click",function(){Le(t);let r=ae(2);return ke(r.deleteShop())}),ye(1,"img",63),A()}}function Xre(n,e){if(n&1){let t=yt();I(0,"form",44),Me("ngSubmit",function(){Le(t);let r=ae();return ke(r.addShop())}),I(1,"button",45),Me("click",function(){Le(t);let r=ae();return ke(r.closeAddModule())}),ye(2,"img",46),A(),I(3,"span",47)(4,"h2",48),K(5,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430"),A(),I(6,"span",49)(7,"label",55),K(8,"\u0426\u0435\u043D\u0430"),A(),ye(9,"input",56),Pe(10,Wre,2,0,"span",52),A(),I(11,"span",49)(12,"label",57),K(13,"\u0421\u0441\u044B\u043B\u043A\u0430"),A(),ye(14,"input",58),Pe(15,$re,2,0,"span",52),A(),I(16,"span",59)(17,"button",60),K(18,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),A(),Pe(19,qre,2,0,"button",61),A()()()}if(n&2){let t,i,r=ae();$("formGroup",r.shopForm),z(10),$("ngIf",((t=r.shopForm.get("cost"))==null?null:t.invalid)&&(((t=r.shopForm.get("cost"))==null?null:t.dirty)||((t=r.shopForm.get("cost"))==null?null:t.touched))),z(5),$("ngIf",((i=r.shopForm.get("url"))==null?null:i.invalid)&&(((i=r.shopForm.get("url"))==null?null:i.dirty)||((i=r.shopForm.get("url"))==null?null:i.touched))),z(2),$("disabled",!r.shopForm.valid),z(2),$("ngIf",r.lastClickedShop!==void 0)}}function Yre(n,e){if(n&1&&(I(0,"option",77),K(1),A()),n&2){let t=e.$implicit;$("value",t.name),z(),cr("",t.translateOne," ")}}function Zre(n,e){n&1&&(I(0,"span",54),K(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443 "),A())}function Kre(n,e){n&1&&(I(0,"span",54),K(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443 "),A())}function Jre(n,e){n&1&&(I(0,"span",54),K(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443 "),A())}function Qre(n,e){n&1&&fa(0)}function eoe(n,e){if(n&1&&(ua(0),Pe(1,Qre,1,0,"ng-container",79),da()),n&2){let t=e.$implicit;ae(4);let i=zi(37),r=zi(39);z(),$("ngTemplateOutlet",t.type==="select"?i:r)("ngTemplateOutletContext",xr(2,Nre,t))}}function toe(n,e){if(n&1&&(ua(0),Pe(1,eoe,2,4,"ng-container",78),da()),n&2){let t=ae(3);z(),$("ngForOf",t.getfilterData())}}function noe(n,e){if(n&1){let t=yt();I(0,"span",49)(1,"label",67),K(2,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F"),A(),I(3,"select",68),yo("ngModelChange",function(r){Le(t);let o=ae(2);return Go(o.furnitureData.additionalData.category,r)||(o.furnitureData.additionalData.category=r),ke(r)}),Pe(4,Yre,2,2,"option",69),A(),I(5,"label",70),K(6,"\u0428\u0438\u0440\u0438\u043D\u0430(\u0441\u043C)"),A(),ye(7,"input",71),Pe(8,Zre,2,0,"span",52),I(9,"label",72),K(10,"\u0414\u043B\u0438\u043D\u0430(\u0441\u043C)"),A(),ye(11,"input",73),Pe(12,Kre,2,0,"span",52),I(13,"label",74),K(14,"\u0412\u044B\u0441\u043E\u0442\u0430(\u0441\u043C)"),A(),ye(15,"input",75),Pe(16,Jre,2,0,"span",52)(17,toe,2,1,"ng-container",76),A()}if(n&2){let t,i,r,o,s,a,l=ae(2);z(3),$("ngModelOptions",Zu(10,Fre)),vo("ngModel",l.furnitureData.additionalData.category),z(),$("ngForOf",l.categoryArray),z(3),$("ngClass",xr(11,YI,((t=l.proportionsForm.get("width"))==null?null:t.invalid)&&(((t=l.proportionsForm.get("width"))==null?null:t.dirty)||((t=l.proportionsForm.get("width"))==null?null:t.touched)))),z(),$("ngIf",((i=l.proportionsForm.get("width"))==null?null:i.invalid)&&(((i=l.proportionsForm.get("width"))==null?null:i.dirty)||((i=l.proportionsForm.get("width"))==null?null:i.touched))),z(3),$("ngClass",xr(13,YI,((r=l.proportionsForm.get("length"))==null?null:r.invalid)&&(((r=l.proportionsForm.get("length"))==null?null:r.dirty)||((r=l.proportionsForm.get("length"))==null?null:r.touched)))),z(),$("ngIf",((o=l.proportionsForm.get("length"))==null?null:o.invalid)&&(((o=l.proportionsForm.get("length"))==null?null:o.dirty)||((o=l.proportionsForm.get("length"))==null?null:o.touched))),z(3),$("ngClass",xr(15,YI,((s=l.proportionsForm.get("height"))==null?null:s.invalid)&&(((s=l.proportionsForm.get("height"))==null?null:s.dirty)||((s=l.proportionsForm.get("height"))==null?null:s.touched)))),z(),$("ngIf",((a=l.proportionsForm.get("height"))==null?null:a.invalid)&&(((a=l.proportionsForm.get("height"))==null?null:a.dirty)||((a=l.proportionsForm.get("height"))==null?null:a.touched))),z(),$("ngIf",l.furnitureData.additionalData.category)}}function ioe(n,e){if(n&1){let t=yt();I(0,"form",44),Me("ngSubmit",function(){Le(t);let r=ae();return ke(r.saveAdditional())}),I(1,"button",45),Me("click",function(){Le(t);let r=ae();return ke(r.closeAddModule())}),ye(2,"img",46),A(),I(3,"span",47)(4,"h2",48),K(5,"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"),A(),I(6,"span",64),Pe(7,noe,18,17,"span",65),A(),I(8,"button",66),K(9,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),A()()()}if(n&2){let t=ae();$("formGroup",t.proportionsForm),z(7),$("ngIf",t.categoryArray!==void 0),z(),$("disabled",t.proportionsForm.invalid)}}function roe(n,e){if(n&1&&(I(0,"option",77),K(1),A()),n&2){let t=e.$implicit;$("value",t.queryValue),z(),pn(t.name)}}function ooe(n,e){if(n&1){let t=yt();I(0,"span",80)(1,"label",81),K(2),A(),I(3,"select",82),yo("ngModelChange",function(r){let o=Le(t).filterData,s=ae();return Go(s.furnitureData.additionalData[o.field],r)||(s.furnitureData.additionalData[o.field]=r),ke(r)}),Pe(4,roe,2,2,"option",69),A()()}if(n&2){let t=e.filterData,i=ae();z(),$("for",t.field),z(),pn(t.name),z(),$("id",t.field),vo("ngModel",i.furnitureData.additionalData[t.field]),z(),$("ngForOf",t.options)}}function soe(n,e){if(n&1){let t=yt();I(0,"span",80)(1,"label",81),K(2),A(),I(3,"input",83),yo("ngModelChange",function(r){let o=Le(t).filterData,s=ae();return Go(s.furnitureData.additionalData[o.field],r)||(s.furnitureData.additionalData[o.field]=r),ke(r)}),A()()}if(n&2){let t=e.filterData,i=ae();z(),$("for",t.field),z(),pn(t.name),z(),$("id",t.field),vo("ngModel",i.furnitureData.additionalData[t.field])}}var Dh=(()=>{class n{elementRef;changeDetectorRef;clientImageControl;categoryService;notification;constructor(t,i,r,o,s){this.elementRef=t,this.changeDetectorRef=i,this.clientImageControl=r,this.categoryService=o,this.notification=s}addModule;isMobileView=!1;lastClickedShop=void 0;lastClickedColor=void 0;addModuleTemplate;addColorVisible=!1;categoryArray=[];currentColorId=void 0;furnitureModelInput;furnitureData;colorModuleTemplate;shopsModuleTemplate;additionalModuleTemplate;ngOnInit(){this.initCategories(),this.checkViewport()}ngAfterViewInit(){this.addModule=this.elementRef.nativeElement.querySelector(".addModule"),this.furnitureModelInput=this.elementRef.nativeElement.querySelector(".furnitureModelInput")}initCategories(){return Ge(this,null,function*(){try{this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray}catch{this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439",5e3)}})}onInputImages(t){return Ge(this,null,function*(){let r=t.target.files;if(!(!r||this.currentColorId===void 0))try{let o=[];for(let s=0;s<r.length;s++){let a=yield this.clientImageControl.compressImage(r[s]);a&&o.push(URL.createObjectURL(a))}this.furnitureData.colors[this.currentColorId].imagesData.images=o}catch{this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439",5e3)}})}checkViewport(){this.isMobileView=window.innerWidth<=600}numberValidator(t){let i=t.value;return i!==null&&isNaN(i)?{notANumber:!0}:null}removeImages(){this.currentColorId===void 0||!this.furnitureData.colors[this.currentColorId].imagesData.images||(this.furnitureData.colors[this.currentColorId].imagesData.images.length=0)}saveAdditional(){if(this.proportionsForm.invalid){this.proportionsForm.markAllAsTouched(),this.notification.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B",5e3);return}let{width:t,length:i,height:r}=this.proportionsForm.value;t&&i&&r&&(this.furnitureData.proportions={width:t,length:i,height:r}),this.closeAddModule()}openFurnitureVariant(t){let i=this.elementRef.nativeElement.querySelector(".colors"),r=i.querySelector(`[data-idColor="${t}"]`),o=i.querySelectorAll(".colorVariant"),s=[],a=[];o.forEach((l,u)=>{u>+t?a=[...a,l]:u<+t&&(s=[...s,l])}),[r,...a,...s].forEach((l,u)=>{l.style.setProperty("--index",(u+1).toString())}),setTimeout(()=>{r.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+t,r.style.setProperty("margin-right","0")},1250)}getfilterData(){if(!this.furnitureData.additionalData.category)return[];let t=this.categoryArray.findIndex(i=>i.name===this.furnitureData.additionalData.category);return this.categoryArray[t].filters??[]}addColor(){let t=this.colorForm.value.color;if(!t){this.notification.setError("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0446\u0432\u0435\u0442",5e3);return}for(let r of this.furnitureData.colors)if(r.color===t){this.closeAddModule(),this.notification.setError("\u0422\u0430\u043A\u043E\u0439 \u0446\u0432\u0435\u0442 \u0443\u0436\u0435 \u0435\u0441\u0442\u044C",5e3);return}let i={color:t,imagesData:{images:[],idMainImage:0}};this.furnitureData.colors.push(i),this.colorForm.patchValue({color:""}),this.currentColorId=this.furnitureData.colors.length-1,setTimeout(()=>{this.closeAddModule(),this.openFurnitureVariant(this.currentColorId)},0)}closeAddModule(){this.addModule.classList.add("disabled")}addShop(){if(this.lastClickedShop!==void 0){this.furnitureData.shops[this.lastClickedShop]={cost:this.shopForm.value.cost,url:this.shopForm.value.url};return}this.furnitureData.shops.push({cost:this.shopForm.value.cost,url:this.shopForm.value.url}),this.closeAddModule()}deleteShop(){this.lastClickedShop!=null&&this.lastClickedShop>=0&&this.lastClickedShop<this.furnitureData.shops.length&&(this.furnitureData.shops.splice(this.lastClickedShop,1),this.changeDetectorRef.detectChanges(),this.lastClickedShop=void 0)}openColorModule(t){t&&t.preventDefault(),this.addModuleTemplate=this.colorModuleTemplate,this.addModule.classList.remove("disabled"),setTimeout(()=>{this.elementRef.nativeElement.querySelector(".addModuleInput").focus()},10)}deleteColor(){let t=this.currentColorId;this.currentColorId=0,this.furnitureData.colors=this.furnitureData.colors.filter((i,r)=>r!==t)}openShopsModule(t){t!==void 0?(this.lastClickedShop=t,this.shopForm.patchValue({cost:this.furnitureData.shops[t].cost,url:this.furnitureData.shops[t].url})):(this.lastClickedShop=void 0,this.shopForm.patchValue({cost:null,url:""})),this.addModuleTemplate=this.shopsModuleTemplate,this.addModule.classList.remove("disabled")}openAdditional(){this.proportionsForm.patchValue({width:this.furnitureData.proportions.width,length:this.furnitureData.proportions.length,height:this.furnitureData.proportions.height}),this.furnitureData.proportions.width===null&&this.proportionsForm.get("width")?.markAsTouched(),this.furnitureData.proportions.length===null&&this.proportionsForm.get("length")?.markAsTouched(),this.furnitureData.proportions.height===null&&this.proportionsForm.get("height")?.markAsTouched(),this.addModuleTemplate=this.additionalModuleTemplate,this.addModule.classList.remove("disabled")}colorForm=new vi({color:new Mn("",[Tt.required])});shopForm=new vi({cost:new Mn(null,[Tt.required,this.numberValidator]),url:new Mn("",[Tt.required])});proportionsForm=new vi({width:new Mn(null,[Tt.required,Tt.min(0)]),length:new Mn(null,[Tt.required,Tt.min(0)]),height:new Mn(null,[Tt.required,Tt.min(0)])});static \u0275fac=function(i){return new(i||n)(ce(Kt),ce(ur),ce(nw),ce(Ah),ce(Di))};static \u0275cmp=dn({type:n,selectors:[["app-create-furniture"]],viewQuery:function(i,r){if(i&1&&(Mi(Rre,5),Mi(Pre,5),Mi(Ore,5)),i&2){let o;ci(o=ui())&&(r.colorModuleTemplate=o.first),ci(o=ui())&&(r.shopsModuleTemplate=o.first),ci(o=ui())&&(r.additionalModuleTemplate=o.first)}},hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,jo)},inputs:{furnitureData:"furnitureData"},decls:40,vars:9,consts:[["colorModule",""],["shopsModule",""],["additionalModule",""],["selectFilter",""],["rangeFilter",""],[1,"body",3,"click"],["placeholder","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle",3,"ngModelChange","ngModel"],[1,"imageSlideSpan"],["class","editImagesBtn",3,"click",4,"ngIf"],[3,"imagesData","changeModeSlider",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"leftPiece"],[1,"colorSlider"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0446\u0432\u0435\u0442",1,"addColorBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"],["class","colors",3,"--total-items",4,"ngIf"],["type","file","accept",".obj","id","furnitureModel","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C 3D \u043C\u043E\u0434\u0435\u043B\u044C",1,"furnitureModelInput"],[1,"informationSpan"],[1,"descriptionSpan"],[1,"descriptionTitle"],["appAutoHeight","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435...","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"descriptionInformation",3,"ngModelChange","mobileView","ngModel"],[1,"rightFunctionalSection"],[1,"shopsTitle"],[1,"shopsSpan"],[1,"shopsListSpan"],["class","shopFunctions","title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",3,"click",4,"ngFor","ngForOf"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"addShopButton",3,"click"],["title","\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",1,"additionalFunctions",3,"click"],[1,"addModule","disabled"],[4,"ngTemplateOutlet"],[1,"editImagesBtn",3,"click"],["loading","lazy","alt","edit","src","/assets/images/editIcon.svg","alt",""],[3,"imagesData","changeModeSlider"],[1,"uploadImagesDiv"],["multiple","","type","file","accept",".png,.jpeg,.jpg","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"uploadImagesInput",3,"input"],["loading","lazy","src","/assets/images/uploadIcon.png","alt","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",1,"uploadImagesIcon"],[1,"colors"],["class","colorVariant","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",3,"background-color","click",4,"ngFor","ngForOf"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",1,"colorVariant",3,"click"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"shopFunctions",3,"click"],[1,"furnitureCost"],[1,"linkShop"],["loading","lazy","src","/assets/images/linkIcon.svg","alt","\u0421\u0441\u044B\u043B\u043A\u0430"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","colorVariant",1,"inputLabel"],["formControlName","color","placeholder","\u041D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C \u0438\u043B\u0438 #hex","id","colorVariant","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 #hex \u0438\u043B\u0438 \u043D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C",1,"addModuleInput"],["class","error-message",4,"ngIf"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0446\u0432\u0435\u0442",1,"submitAddModuleFormBtn",3,"disabled"],[1,"error-message"],["for","cost",1,"inputLabel"],["formControlName","cost","id","cost","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0435\u043D\u0443",1,"addModuleInput"],["for","url",1,"inputLabel"],["formControlName","url","id","url","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"submitAddModuleFormBtn",3,"disabled"],["class","deleteItemAddModuleBtn","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",3,"click",4,"ngIf"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt","\u0423\u0434\u0430\u043B\u0438\u0442\u044C"],[1,"params"],["class","addModuleInputSpan",4,"ngIf"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E",1,"submitAddModuleFormBtn","additionalBtn",3,"disabled"],["for","category",1,"inputLabel"],["aria-placeholder","\u0414\u0438\u0432\u0430\u043D","name","category","id","category","title","\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",1,"categorySelect",3,"ngModelChange","ngModelOptions","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","width",1,"inputLabel"],["formControlName","width","placeholder","170","id","width","type","number","min","1","step","1","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443",1,"addModuleInput",3,"ngClass"],["for","length",1,"inputLabel"],["formControlName","length","placeholder","150","id","length","type","number","min","1","step","1","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443",1,"addModuleInput",3,"ngClass"],["for","height",1,"inputLabel"],["formControlName","height","placeholder","100","id","height","type","number","min","1","step","1","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443",1,"addModuleInput",3,"ngClass"],[4,"ngIf"],[3,"value"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"filterSpan"],[1,"inputLabel",3,"for"],["type","number",1,"categorySelect",3,"ngModelChange","id","ngModel"],["type","number",1,"addModuleInput",3,"ngModelChange","id","ngModel"]],template:function(i,r){if(i&1){let o=yt();I(0,"span",5),Me("click",function(a){let l;return Le(o),ke((l=r.currentColorId)!==null&&l!==void 0?l:r.openColorModule(a))}),I(1,"input",6),yo("ngModelChange",function(a){return Le(o),Go(r.furnitureData.name,a)||(r.furnitureData.name=a),ke(a)}),A(),I(2,"span",7),Pe(3,Lre,2,0,"button",8)(4,kre,1,2,"app-image-slider",9),A(),Pe(5,Ure,3,0,"div",10),I(6,"span",11)(7,"span",12)(8,"span",13)(9,"button",14),Me("click",function(a){return Le(o),ke(r.openColorModule(a))}),ye(10,"img",15),A(),Pe(11,Vre,2,3,"span",16),A(),ye(12,"input",17),A(),I(13,"span",18)(14,"span",19)(15,"div",20),K(16,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),A(),I(17,"textarea",21),yo("ngModelChange",function(a){return Le(o),Go(r.furnitureData.description,a)||(r.furnitureData.description=a),ke(a)}),A()(),I(18,"span",22)(19,"div",23),K(20,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),A(),I(21,"span",24)(22,"span",25),Pe(23,zre,6,3,"button",26),A(),I(24,"button",27),Me("click",function(){return Le(o),ke(r.openShopsModule())}),ye(25,"img",15),A()(),I(26,"button",28),Me("click",function(){return Le(o),ke(r.openAdditional())}),K(27," \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F "),A()()()()(),I(28,"div",29),Pe(29,Hre,1,0,"ng-container",30),A(),Pe(30,Gre,13,3,"ng-template",null,0,Qi)(32,Xre,20,5,"ng-template",null,1,Qi)(34,ioe,10,3,"ng-template",null,2,Qi)(36,ooe,5,5,"ng-template",null,3,Qi)(38,soe,4,4,"ng-template",null,4,Qi)}i&2&&(z(),vo("ngModel",r.furnitureData.name),z(2),$("ngIf",r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length>0),z(),$("ngIf",r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length>0),z(),$("ngIf",r.currentColorId===void 0||r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length<=0),z(6),$("ngIf",r.furnitureData.colors!==void 0),z(6),$("mobileView",r.isMobileView),vo("ngModel",r.furnitureData.description),z(6),$("ngForOf",r.furnitureData.shops),z(6),$("ngTemplateOutlet",r.addModuleTemplate))},dependencies:[So,Is,oU,aU,Co,pg,Tx,Ms,Ts,mg,Xo,Yo,Wo,tw,ew,gi,Rn,ha,_h,hg,Jc],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}button[_ngcontent-%COMP%]:not(.colorVariant), .furnitureModelInput[_ngcontent-%COMP%]{transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:not(.colorVariant):hover, .furnitureModelInput[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.body[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;gap:30px;margin:60px auto 0}.imageSlideSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.editImagesBtn[_ngcontent-%COMP%]{aspect-ratio:1;border:none;background:none;grid-area:1/1/2/2;align-self:start;z-index:4;justify-self:end;margin-top:-10px;margin-right:-10px}@media (max-width: 768px){.editImagesBtn[_ngcontent-%COMP%]{margin:0}}.editImagesBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;cursor:pointer}app-image-slider[_ngcontent-%COMP%]{width:100%;display:block;grid-area:1/1/2/2}.leftPiece[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0 auto;width:fit-content;background:none;border:none;outline:none;font-size:1.5vw}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:300px;aspect-ratio:1;position:relative;--radius: 60px}.colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out;box-shadow:0 0 3px #fff}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:40px;aspect-ratio:1;z-index:3;background-color:#000;border:none;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.addColorBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:75%}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;min-width:350px;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleFormContent[_ngcontent-%COMP%]   .params[_ngcontent-%COMP%]{max-height:40vh;overflow-y:scroll;overflow-x:hidden}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;padding-right:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd;cursor:pointer;width:100%}.categorySelect[_ngcontent-%COMP%]{width:100%;background:none;border:1px solid #888888;border-radius:10px;padding:10px;background-color:#000;color:#fff;cursor:pointer}.addModuleInput[_ngcontent-%COMP%]{width:calc(100% - 20px);border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center;font-size:28px}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:10px;padding:15px;width:100%;border:none;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px;min-height:300px;background:none;border:none;outline:none;resize:vertical}.rightFunctionalSection[_ngcontent-%COMP%]{width:40%;display:flex;height:100%;flex-direction:column;gap:20px}.additionalFunctions[_ngcontent-%COMP%]{width:100%;background-color:#a3b18a;border-radius:10px;border:none;color:#fff;font-size:115%;line-height:50px;height:50px;cursor:pointer}.shopsSpan[_ngcontent-%COMP%]{width:100%;height:calc(100% - 60px);display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#000;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;border:2px solid rgba(163,177,138,.3)}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#000;border-radius:0 10px 10px 0;place-content:center;display:flex;border:2px solid rgba(163,177,138,.3)}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.addShopButton[_ngcontent-%COMP%]{background-color:#000;border:2px solid rgba(163,177,138,.3);display:flex;place-content:center;border-radius:10px;height:45px;cursor:pointer}.addShopButton[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px}.functionShopsModuleBtns[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{border-radius:10px;background-color:#a3b18a;height:50px;width:20%;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:50%}.furnitureModelInput[_ngcontent-%COMP%]{color:#fff;cursor:pointer;border-radius:10px;box-shadow:0 0 5px #fff;height:30px;padding:10px;align-content:center;justify-content:center;display:flex}.furnitureModelInput[_ngcontent-%COMP%]::file-selector-button{color:transparent;border-radius:50%;height:100%;aspect-ratio:1;border:none;background-color:transparent;background-image:url(/assets/images/addIcon.svg);background-repeat:no-repeat}.furnitureModelLabel[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1200px){.furnitureTitle[_ngcontent-%COMP%]{font-size:2vw}}@media (max-width: 1000px){app-create-furniture[_ngcontent-%COMP%]{width:calc(100% - 10px)}.leftPiece[_ngcontent-%COMP%]{gap:30px}.colorSlider[_ngcontent-%COMP%]{height:150px}.furnitureModelInput[_ngcontent-%COMP%]{height:25px}.furnitureTitle[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){.rightFunctionalSection[_ngcontent-%COMP%]{gap:10px}.furnitureTitle[_ngcontent-%COMP%]{font-size:3vw}.leftPiece[_ngcontent-%COMP%]{gap:0}.shopsTitle[_ngcontent-%COMP%], .descriptionTitle[_ngcontent-%COMP%]{border-radius:10px}.body[_ngcontent-%COMP%]{max-width:400px;margin-top:30px;gap:15px}.furnitureTitle[_ngcontent-%COMP%]{font-size:1.5rem;width:90%}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.colorSlider[_ngcontent-%COMP%]{width:100%;height:200px;margin-bottom:20px}.informationSpan[_ngcontent-%COMP%]{width:100%;flex-direction:column}.descriptionSpan[_ngcontent-%COMP%], .rightFunctionalSection[_ngcontent-%COMP%]{width:100%}.addModuleFormContent[_ngcontent-%COMP%]{width:calc(85vw - 40px);min-width:none;padding:20px}.shopsSpan[_ngcontent-%COMP%]{height:auto}.furnitureModelInput[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-top:10px}}.error-message[_ngcontent-%COMP%]{color:#f44;font-size:.8rem;margin-top:5px}.invalid[_ngcontent-%COMP%]{border-color:#f44!important;box-shadow:0 0 5px #ff444480}.addModuleInput.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#f44}']})}return n})();var AB=new Oe("WindowToken",typeof window<"u"&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var DB=(()=>{class n{constructor(t,i,r){this.ngZone=t,this.document=i,this.window=r,this.copySubject=new Ln,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(t){this.config=t}copy(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});let i=this.copyFromContent(t);return i?this.pushCopyResponse({content:t,isSuccess:i}):this.pushCopyResponse({isSuccess:!1,content:t})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(t,i=!0){try{this.selectTarget(t);let r=this.copyText();return this.clearSelection(i?t:void 0,this.window),r&&this.isCopySuccessInIE11()}catch{return!1}}isCopySuccessInIE11(){let t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}copyFromContent(t,i=this.document.body){if(this.tempTextArea&&!i.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{i.appendChild(this.tempTextArea)}catch{throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;let r=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),r}destroy(t=this.document.body){this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(t,i){t&&t.focus(),i.getSelection()?.removeAllRanges()}createTempTextArea(t,i){let r=t.documentElement.getAttribute("dir")==="rtl",o;o=t.createElement("textarea"),o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[r?"right":"left"]="-9999px";let s=i.pageYOffset||t.documentElement.scrollTop;return o.style.top=s+"px",o.setAttribute("readonly",""),o}pushCopyResponse(t){this.copySubject.observers.length>0&&this.ngZone.run(()=>{this.copySubject.next(t)})}pushCopyReponse(t){this.pushCopyResponse(t)}}return n.\u0275fac=function(t){return new(t||n)(He(Qn),He(mn),He(AB,8))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var nl=(()=>{class n{httpModule;baseServiceUrl=di+"furniture/card";constructor(t){this.httpModule=t}GETfurnitureCard(t,i){return Ge(this,null,function*(){let r=new on().set("furnitureCardId",t);i!==void 0&&(r=r.set("jwt",i));try{let o=yield xn(this.httpModule.get(this.baseServiceUrl,{params:r}));if(!o?.furnitureCard)throw new Error("Invalid response structure: furnitureCard missing");return{furnitureCard:Ve(q({},o.furnitureCard),{colors:o.furnitureCard.colors.map(a=>({color:a.color,imagesData:{idMainImage:a.imagesData.idMainImage,images:a.imagesData.images.map(l=>di+l)}}))}),authorMatched:o.authorMatched}}catch(o){throw console.error("Error in GETfurnitureCard:",o),o}})}POSTcreateFurnitureCard(t,i){let r=new on().set("jwt",i);return xn(this.httpModule.post(this.baseServiceUrl,t,{params:r}))}PUTupdateFurnitureCard(t,i,r){let o=new on().set("jwt",r).set("furnitureCardId",i);return xn(this.httpModule.put(this.baseServiceUrl,t,{params:o}))}DELETEfurnitureCard(t,i){let r=new on().set("jwt",t).set("furnitureCardId",i);return xn(this.httpModule.delete(this.baseServiceUrl,{params:r}))}static \u0275fac=function(i){return new(i||n)(He(Gi))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function loe(n,e){if(n&1&&ye(0,"app-image-slider",18),n&2){let t=ae(2);$("imagesData",t.furnitureData.colors[t.currentColorId].imagesData)}}function coe(n,e){n&1&&(I(0,"div",19),ye(1,"input",20)(2,"img",21),A())}function uoe(n,e){if(n&1){let t=yt();I(0,"button",22),Me("click",function(r){Le(t);let o=ae(2);return ke(o.openFurnitureVariant(r.target))}),A()}if(n&2){let t=e.$implicit,i=e.index;Fn("background-color",t.color),lr("data-idColor",i)}}function doe(n,e){if(n&1){let t=yt();I(0,"span",23)(1,"a",24),K(2),_o(3,"costFormat"),A(),I(4,"button",25),Me("click",function(){let r=Le(t).$implicit,o=ae(2);return ke(o.copyShopLink(r.url))}),ye(5,"img",26),A()()}if(n&2){let t=e.$implicit;z(),$("href",t.url,Pr),z(),pn(xo(3,3,t.cost)),z(2),$("title","\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443: "+t.url)}}function foe(n,e){if(n&1&&(I(0,"span",1)(1,"h1",2),K(2),A(),Pe(3,loe,1,1,"app-image-slider",3)(4,coe,3,0,"div",4),I(5,"span",5)(6,"span",6),ye(7,"img",7),I(8,"span",8),Pe(9,uoe,1,3,"button",9),A()(),I(10,"span",10)(11,"span",11)(12,"div",12),K(13,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),A(),I(14,"div",13),K(15),A()(),I(16,"span",14)(17,"div",15),K(18,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),A(),I(19,"span",16),Pe(20,doe,6,5,"span",17),A()()()()()),n&2){let t=ae();z(2),pn(t.furnitureData.name),z(),$("ngIf",t.furnitureData.colors[t.currentColorId].imagesData),z(),$("ngIf",!t.furnitureData.colors[t.currentColorId].imagesData),z(4),Fn("--total-items",t.furnitureData.colors.length.toString()),z(),$("ngForOf",t.furnitureData.colors),z(6),pn(t.proccessDescription(t.furnitureData.description,t.furnitureData.proportions)),z(5),$("ngForOf",t.furnitureData.shops)}}var rw=(()=>{class n{elementRef;clipboardService;furnitureCardService;notification;constructor(t,i,r,o){this.elementRef=t,this.clipboardService=i,this.furnitureCardService=r,this.notification=o}currentColorId=0;furnitureCardId;furnitureData;ngOnChanges(){return Ge(this,null,function*(){if(this.furnitureCardId!==void 0)try{this.furnitureData=(yield this.furnitureCardService.GETfurnitureCard(this.furnitureCardId)).furnitureCard}catch(t){console.log(t)}})}openFurnitureVariant(t){let i=t,r=this.elementRef.nativeElement.querySelector(".colors"),o=i.getAttribute("data-idcolor");if(!o)return;let s=r.querySelectorAll(".colorVariant"),a=[],l=[];s.forEach((u,f)=>{f>+o?l=[...l,u]:f<+o&&(a=[...a,u])}),[i,...l,...a].forEach((u,f)=>{u.style.setProperty("--index",(f+1).toString())}),setTimeout(()=>{i.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+o,i.style.setProperty("margin-right","0")},1250)}proccessDescription(t,i){return`\u0428\u0438\u0440\u0438\u043D\u0430: ${i.width} \u0441\u043C
\u0414\u043B\u0438\u043D\u0430: ${i.length} \u0441\u043C
\u0412\u044B\u0441\u043E\u0442\u0430: ${i.height} \u0441\u043C
${t}`}copyShopLink(t){this.clipboardService.copyFromContent(t)}static \u0275fac=function(i){return new(i||n)(ce(Kt),ce(DB),ce(nl),ce(Di))};static \u0275cmp=dn({type:n,selectors:[["app-view-furniture"]],inputs:{furnitureCardId:"furnitureCardId",furnitureData:"furnitureData"},features:[Ji],decls:1,vars:1,consts:[["class","body",4,"ngIf"],[1,"body"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle"],[3,"imagesData",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"colorSlider"],["loading","lazy","src","assets/images/paletteIcon.svg","alt","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0432\u0435\u0442","title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0432\u0435\u0442",1,"addColorBtn"],[1,"colors"],["class","colorVariant","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",3,"background-color","click",4,"ngFor","ngForOf"],[1,"informationSpan"],[1,"descriptionSpan"],["title","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",1,"descriptionTitle"],["title","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"descriptionInformation"],[1,"shopsSpan"],["title","\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",1,"shopsTitle"],[1,"shopsListSpan"],["class","shopFunctions",4,"ngFor","ngForOf"],[3,"imagesData"],[1,"uploadImagesDiv"],["type","file","accept",".png,.jpeg","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"uploadImagesInput"],["loading","lazy","src","assets/images/uploadIcon.png","alt","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",1,"uploadImagesIcon"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",1,"colorVariant",3,"click"],[1,"shopFunctions"],["title","\u0426\u0435\u043D\u0430",1,"furnitureCost",3,"href"],[1,"linkShop",3,"click","title"],["loading","lazy","src","assets/images/linkIcon.svg","alt","\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443"]],template:function(i,r){i&1&&Pe(0,foe,21,8,"span",0),i&2&&$("ngIf",r.furnitureData)},dependencies:[ew,gi,Rn,So,Jc],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;gap:30px;margin-bottom:15px;position:relative}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:200px;aspect-ratio:1;position:relative;--radius: 60px}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;box-shadow:0 0 10px #fff;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:30px;aspect-ratio:1;z-index:3;padding:5px;background-color:#000;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px;white-space:pre-line;font-size:16px}.shopsSpan[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#a3b18a;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;box-shadow:0 0 10px #fff;border:none;text-decoration:none}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#a3b18a;border-radius:0 10px 10px 0;border:none;place-content:center;display:flex;box-shadow:0 0 10px #fff;transition:all .5s ease-in-out;cursor:copy}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}@media (max-width: 1200px){.furnitureTitle[_ngcontent-%COMP%]{font-size:2vw}}@media (max-width: 1000px){app-view-furniture[_ngcontent-%COMP%]{width:calc(100% - 10px)}.colorSlider[_ngcontent-%COMP%]{height:200px}.furnitureTitle[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){.body[_ngcontent-%COMP%]{max-width:400px;margin:30px auto;gap:15px}.furnitureTitle[_ngcontent-%COMP%]{font-size:1.5rem;width:90%}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.colorSlider[_ngcontent-%COMP%]{width:100%;height:200px;margin-bottom:20px}.informationSpan[_ngcontent-%COMP%]{width:100%;flex-direction:column}.descriptionSpan[_ngcontent-%COMP%], .shopsSpan[_ngcontent-%COMP%]{width:100%}.descriptionTitle[_ngcontent-%COMP%], .shopsTitle[_ngcontent-%COMP%]{border-radius:10px}.descriptionInformation[_ngcontent-%COMP%]{padding:0 10px}}']})}return n})();var rb="176",fu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},hu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},xV=0,VA=1,wV=2;var zA=1,bV=2,cl=3,Ca=0,Yr=1,Us=2,ac=0,_d=1,HA=2,jA=3,GA=4,CV=5,au=100,SV=101,EV=102,MV=103,TV=104,IV=200,AV=201,DV=202,RV=203,Ow=204,Fw=205,PV=206,OV=207,FV=208,NV=209,LV=210,kV=211,UV=212,BV=213,VV=214,ob=0,sb=1,ab=2,xd=3,lb=4,cb=5,ub=6,db=7,f0=0,zV=1,HV=2,lc=0,jV=1,GV=2,WV=3,$V=4,qV=5,XV=6,YV=7,SA="attached",ZV="detached",EA=300,Fd=301,Nd=302,op=303,fb=304,h0=306,Sa=1e3,Qo=1001,Wh=1002,br=1003,hb=1004;var Ld=1005;var $r=1006,sp=1007;var Ia=1008;var Aa=1009,WA=1010,$A=1011,ap=1012,pb=1013,pu=1014,Bs=1015,lp=1016,mb=1017,gb=1018,cp=1020,qA=35902,XA=1021,YA=1022,ns=1023,$h=1026,up=1027,vb=1028,yb=1029,ZA=1030,_b=1031;var xb=1033,p0=33776,m0=33777,g0=33778,v0=33779,wb=35840,bb=35841,Cb=35842,Sb=35843,Eb=36196,Mb=37492,Tb=37496,Ib=37808,Ab=37809,Db=37810,Rb=37811,Pb=37812,Ob=37813,Fb=37814,Nb=37815,Lb=37816,kb=37817,Ub=37818,Bb=37819,Vb=37820,zb=37821,y0=36492,Hb=36494,jb=36495,KA=36283,Gb=36284,Wb=36285,$b=36286;var wd=2300,bd=2301,Pw=2302,MA=2400,TA=2401,IA=2402,KV=2500;var JA=0,_0=1,dp=2,JV=3200,QV=3201;var x0=0,ez=1,cc="",Cn="srgb",Cr="srgb-linear",kg="linear",qn="srgb";var yd=7680;var AA=519,tz=512,nz=513,iz=514,QA=515,rz=516,oz=517,sz=518,az=519,Nw=35044;var eD="300 es",il=2e3,Ug=2001;var rl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},Fr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],RB=1234567,Og=Math.PI/180,Cd=180/Math.PI;function Fs(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Fr[n&255]+Fr[n>>8&255]+Fr[n>>16&255]+Fr[n>>24&255]+"-"+Fr[e&255]+Fr[e>>8&255]+"-"+Fr[e>>16&15|64]+Fr[e>>24&255]+"-"+Fr[t&63|128]+Fr[t>>8&255]+"-"+Fr[t>>16&255]+Fr[t>>24&255]+Fr[i&255]+Fr[i>>8&255]+Fr[i>>16&255]+Fr[i>>24&255]).toLowerCase()}function nn(n,e,t){return Math.max(e,Math.min(t,n))}function tD(n,e){return(n%e+e)%e}function hoe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function poe(n,e,t){return n!==e?(t-n)/(e-n):0}function Fg(n,e,t){return(1-t)*n+t*e}function moe(n,e,t,i){return Fg(n,e,1-Math.exp(-t*i))}function goe(n,e=1){return e-Math.abs(tD(n,e*2)-e)}function voe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function yoe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function _oe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function xoe(n,e){return n+Math.random()*(e-n)}function woe(n){return n*(.5-Math.random())}function boe(n){n!==void 0&&(RB=n);let e=RB+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Coe(n){return n*Og}function Soe(n){return n*Cd}function Eoe(n){return(n&n-1)===0&&n!==0}function Moe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Toe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Ioe(n,e,t,i,r){let o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),u=o((e+i)/2),f=s((e+i)/2),h=o((e-i)/2),p=s((e-i)/2),g=o((i-e)/2),v=s((i-e)/2);switch(r){case"XYX":n.set(a*f,l*h,l*p,a*u);break;case"YZY":n.set(l*p,a*f,l*h,a*u);break;case"ZXZ":n.set(l*h,l*p,a*f,a*u);break;case"XZX":n.set(a*f,l*v,l*g,a*u);break;case"YXY":n.set(l*g,a*f,l*v,a*u);break;case"ZYZ":n.set(l*v,l*g,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ba(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Wn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var ti={DEG2RAD:Og,RAD2DEG:Cd,generateUUID:Fs,clamp:nn,euclideanModulo:tD,mapLinear:hoe,inverseLerp:poe,lerp:Fg,damp:moe,pingpong:goe,smoothstep:voe,smootherstep:yoe,randInt:_oe,randFloat:xoe,randFloatSpread:woe,seededRandom:boe,degToRad:Coe,radToDeg:Soe,isPowerOfTwo:Eoe,ceilPowerOfTwo:Moe,floorPowerOfTwo:Toe,setQuaternionFromProperEuler:Ioe,normalize:Wn,denormalize:ba},qe=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=nn(this.x,e.x,t.x),this.y=nn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=nn(this.x,e,t),this.y=nn(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(nn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(nn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},$t=class n{constructor(e,t,i,r,o,s,a,l,u){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,u)}set(e,t,i,r,o,s,a,l,u){let f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=o,f[5]=l,f[6]=i,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],u=i[1],f=i[4],h=i[7],p=i[2],g=i[5],v=i[8],x=r[0],y=r[3],_=r[6],E=r[1],S=r[4],C=r[7],k=r[2],F=r[5],L=r[8];return o[0]=s*x+a*E+l*k,o[3]=s*y+a*S+l*F,o[6]=s*_+a*C+l*L,o[1]=u*x+f*E+h*k,o[4]=u*y+f*S+h*F,o[7]=u*_+f*C+h*L,o[2]=p*x+g*E+v*k,o[5]=p*y+g*S+v*F,o[8]=p*_+g*C+v*L,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8];return t*s*f-t*a*u-i*o*f+i*a*l+r*o*u-r*s*l}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=f*s-a*u,p=a*l-f*o,g=u*o-s*l,v=t*h+i*p+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);let x=1/v;return e[0]=h*x,e[1]=(r*u-f*i)*x,e[2]=(a*i-r*s)*x,e[3]=p*x,e[4]=(f*t-r*l)*x,e[5]=(r*o-a*t)*x,e[6]=g*x,e[7]=(i*l-u*t)*x,e[8]=(s*t-i*o)*x,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){let l=Math.cos(o),u=Math.sin(o);return this.set(i*l,i*u,-i*(l*s+u*a)+s+e,-r*u,r*l,-r*(-u*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(ZI.makeScale(e,t)),this}rotate(e){return this.premultiply(ZI.makeRotation(-e)),this}translate(e,t){return this.premultiply(ZI.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},ZI=new $t;function nD(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function qh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function lz(){let n=qh("canvas");return n.style.display="block",n}var PB={};function w0(n){n in PB||(PB[n]=!0,console.warn(n))}function cz(n,e,t){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}}setTimeout(o,t)})}function uz(n){let e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function dz(n){let e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var OB=new $t().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),FB=new $t().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Aoe(){let n={enabled:!0,workingColorSpace:Cr,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===qn&&(r.r=ec(r.r),r.g=ec(r.g),r.b=ec(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===qn&&(r.r=Gh(r.r),r.g=Gh(r.g),r.b=Gh(r.b))),r},fromWorkingColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},toWorkingColorSpace:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===cc?kg:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Cr]:{primaries:e,whitePoint:i,transfer:kg,toXYZ:OB,fromXYZ:FB,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Cn},outputColorSpaceConfig:{drawingBufferColorSpace:Cn}},[Cn]:{primaries:e,whitePoint:i,transfer:qn,toXYZ:OB,fromXYZ:FB,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Cn}}}),n}var zt=Aoe();function ec(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Gh(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var Rh,Lw=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Rh===void 0&&(Rh=qh("canvas")),Rh.width=e.width,Rh.height=e.height;let r=Rh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Rh}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=qh("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=ec(o[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(ec(t[i]/255)*255):t[i]=ec(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Doe=0,Xh=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Doe++}),this.uuid=Fs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(KI(r[s].image)):o.push(KI(r[s]))}else o=KI(r);i.url=o}return t||(e.images[this.uuid]=i),i}};function KI(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Lw.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Roe=0,Zr=(()=>{class n extends rl{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Qo,o=Qo,s=$r,a=Ia,l=ns,u=Aa,f=n.DEFAULT_ANISOTROPY,h=cc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Roe++}),this.uuid=Fs(),this.name="",this.source=new Xh(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new qe(0,0),this.repeat=new qe(1,1),this.center=new qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==EA)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Sa:t.x=t.x-Math.floor(t.x);break;case Qo:t.x=t.x<0?0:1;break;case Wh:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Sa:t.y=t.y-Math.floor(t.y);break;case Qo:t.y=t.y<0?0:1;break;case Wh:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=EA,n.DEFAULT_ANISOTROPY=1,n})(),sn=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o,l=e.elements,u=l[0],f=l[4],h=l[8],p=l[1],g=l[5],v=l[9],x=l[2],y=l[6],_=l[10];if(Math.abs(f-p)<.01&&Math.abs(h-x)<.01&&Math.abs(v-y)<.01){if(Math.abs(f+p)<.1&&Math.abs(h+x)<.1&&Math.abs(v+y)<.1&&Math.abs(u+g+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let S=(u+1)/2,C=(g+1)/2,k=(_+1)/2,F=(f+p)/4,L=(h+x)/4,W=(v+y)/4;return S>C&&S>k?S<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(S),r=F/i,o=L/i):C>k?C<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(C),i=F/r,o=W/r):k<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(k),i=L/o,r=W/o),this.set(i,r,o,t),this}let E=Math.sqrt((y-v)*(y-v)+(h-x)*(h-x)+(p-f)*(p-f));return Math.abs(E)<.001&&(E=1),this.x=(y-v)/E,this.y=(h-x)/E,this.z=(p-f)/E,this.w=Math.acos((u+g+_-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=nn(this.x,e.x,t.x),this.y=nn(this.y,e.y,t.y),this.z=nn(this.z,e.z,t.z),this.w=nn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=nn(this.x,e,t),this.y=nn(this.y,e,t),this.z=nn(this.z,e,t),this.w=nn(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(nn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},kw=class extends rl{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t);let r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:$r,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);let o=new Zr(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new Xh(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ol=class extends kw{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},Bg=class extends Zr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=br,this.minFilter=br,this.wrapR=Qo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var Uw=class extends Zr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=br,this.minFilter=br,this.wrapR=Qo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var yi=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],u=i[r+1],f=i[r+2],h=i[r+3],p=o[s+0],g=o[s+1],v=o[s+2],x=o[s+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=g,e[t+2]=v,e[t+3]=x;return}if(h!==x||l!==p||u!==g||f!==v){let y=1-a,_=l*p+u*g+f*v+h*x,E=_>=0?1:-1,S=1-_*_;if(S>Number.EPSILON){let k=Math.sqrt(S),F=Math.atan2(k,_*E);y=Math.sin(y*F)/k,a=Math.sin(a*F)/k}let C=a*E;if(l=l*y+p*C,u=u*y+g*C,f=f*y+v*C,h=h*y+x*C,y===1-a){let k=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=k,u*=k,f*=k,h*=k}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,o,s){let a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],h=o[s],p=o[s+1],g=o[s+2],v=o[s+3];return e[t]=a*v+f*h+l*g-u*p,e[t+1]=l*v+f*p+u*h-a*g,e[t+2]=u*v+f*g+a*p-l*h,e[t+3]=f*v-a*h-l*p-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),h=a(o/2),p=l(i/2),g=l(r/2),v=l(o/2);switch(s){case"XYZ":this._x=p*f*h+u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h-p*g*v;break;case"YXZ":this._x=p*f*h+u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h+p*g*v;break;case"ZXY":this._x=p*f*h-u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h-p*g*v;break;case"ZYX":this._x=p*f*h-u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h+p*g*v;break;case"YZX":this._x=p*f*h+u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h-p*g*v;break;case"XZY":this._x=p*f*h-u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],u=t[2],f=t[6],h=t[10],p=i+a+h;if(p>0){let g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-l)*g,this._y=(o-u)*g,this._z=(s-r)*g}else if(i>a&&i>h){let g=2*Math.sqrt(1+i-a-h);this._w=(f-l)/g,this._x=.25*g,this._y=(r+s)/g,this._z=(o+u)/g}else if(a>h){let g=2*Math.sqrt(1+a-i-h);this._w=(o-u)/g,this._x=(r+s)/g,this._y=.25*g,this._z=(l+f)/g}else{let g=2*Math.sqrt(1+h-i-a);this._w=(s-r)/g,this._x=(o+u)/g,this._y=(l+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(nn(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,u=t._z,f=t._w;return this._x=i*f+s*a+r*u-o*l,this._y=r*f+s*l+o*a-i*u,this._z=o*f+s*u+i*l-r*a,this._w=s*f-i*a-r*l-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let g=1-t;return this._w=g*s+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*o+t*this._z,this.normalize(),this}let u=Math.sqrt(l),f=Math.atan2(u,a),h=Math.sin((1-t)*f)/u,p=Math.sin(t*f)/u;return this._w=s*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=o*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},V=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(NB.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(NB.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,u=2*(s*r-a*i),f=2*(a*t-o*r),h=2*(o*i-s*t);return this.x=t+l*u+s*h-a*f,this.y=i+l*f+a*u-o*h,this.z=r+l*h+o*f-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=nn(this.x,e.x,t.x),this.y=nn(this.y,e.y,t.y),this.z=nn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=nn(this.x,e,t),this.y=nn(this.y,e,t),this.z=nn(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(nn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return JI.copy(this).projectOnVector(e),this.sub(JI)}reflect(e){return this.sub(JI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(nn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},JI=new V,NB=new yi,qr=class{constructor(e=new V(1/0,1/0,1/0),t=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(_a.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(_a.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=_a.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,_a):_a.fromBufferAttribute(o,s),_a.applyMatrix4(e.matrixWorld),this.expandByPoint(_a);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ow.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),ow.copy(i.boundingBox)),ow.applyMatrix4(e.matrixWorld),this.union(ow)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,_a),_a.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Sg),sw.subVectors(this.max,Sg),Ph.subVectors(e.a,Sg),Oh.subVectors(e.b,Sg),Fh.subVectors(e.c,Sg),Qc.subVectors(Oh,Ph),eu.subVectors(Fh,Oh),pd.subVectors(Ph,Fh);let t=[0,-Qc.z,Qc.y,0,-eu.z,eu.y,0,-pd.z,pd.y,Qc.z,0,-Qc.x,eu.z,0,-eu.x,pd.z,0,-pd.x,-Qc.y,Qc.x,0,-eu.y,eu.x,0,-pd.y,pd.x,0];return!QI(t,Ph,Oh,Fh,sw)||(t=[1,0,0,0,1,0,0,0,1],!QI(t,Ph,Oh,Fh,sw))?!1:(aw.crossVectors(Qc,eu),t=[aw.x,aw.y,aw.z],QI(t,Ph,Oh,Fh,sw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_a).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(_a).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ql[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ql[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ql[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ql[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ql[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ql[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ql[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ql[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ql),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},ql=[new V,new V,new V,new V,new V,new V,new V,new V],_a=new V,ow=new qr,Ph=new V,Oh=new V,Fh=new V,Qc=new V,eu=new V,pd=new V,Sg=new V,sw=new V,aw=new V,md=new V;function QI(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){md.fromArray(n,o);let a=r.x*Math.abs(md.x)+r.y*Math.abs(md.y)+r.z*Math.abs(md.z),l=e.dot(md),u=t.dot(md),f=i.dot(md);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}var Poe=new qr,Eg=new V,eA=new V,To=class{constructor(e=new V,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):Poe.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Eg.subVectors(e,this.center);let t=Eg.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Eg,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(eA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Eg.copy(e.center).add(eA)),this.expandByPoint(Eg.copy(e.center).sub(eA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Xl=new V,tA=new V,lw=new V,tu=new V,nA=new V,cw=new V,iA=new V,sl=class{constructor(e=new V,t=new V(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Xl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Xl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Xl.copy(this.origin).addScaledVector(this.direction,t),Xl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){tA.copy(e).add(t).multiplyScalar(.5),lw.copy(t).sub(e).normalize(),tu.copy(this.origin).sub(tA);let o=e.distanceTo(t)*.5,s=-this.direction.dot(lw),a=tu.dot(this.direction),l=-tu.dot(lw),u=tu.lengthSq(),f=Math.abs(1-s*s),h,p,g,v;if(f>0)if(h=s*l-a,p=s*a-l,v=o*f,h>=0)if(p>=-v)if(p<=v){let x=1/f;h*=x,p*=x,g=h*(h+s*p+2*a)+p*(s*h+p+2*l)+u}else p=o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;else p=-o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;else p<=-v?(h=Math.max(0,-(-s*o+a)),p=h>0?-o:Math.min(Math.max(-o,-l),o),g=-h*h+p*(p+2*l)+u):p<=v?(h=0,p=Math.min(Math.max(-o,-l),o),g=p*(p+2*l)+u):(h=Math.max(0,-(s*o+a)),p=h>0?o:Math.min(Math.max(-o,-l),o),g=-h*h+p*(p+2*l)+u);else p=s>0?-o:o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(tA).addScaledVector(lw,p),g}intersectSphere(e,t){Xl.subVectors(e.center,this.origin);let i=Xl.dot(this.direction),r=Xl.dot(Xl)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l,u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),f>=0?(o=(e.min.y-p.y)*f,s=(e.max.y-p.y)*f):(o=(e.max.y-p.y)*f,s=(e.min.y-p.y)*f),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Xl)!==null}intersectTriangle(e,t,i,r,o){nA.subVectors(t,e),cw.subVectors(i,e),iA.crossVectors(nA,cw);let s=this.direction.dot(iA),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;tu.subVectors(this.origin,e);let l=a*this.direction.dot(cw.crossVectors(tu,cw));if(l<0)return null;let u=a*this.direction.dot(nA.cross(tu));if(u<0||l+u>s)return null;let f=-a*tu.dot(iA);return f<0?null:this.at(f/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},dt=class n{constructor(e,t,i,r,o,s,a,l,u,f,h,p,g,v,x,y){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,u,f,h,p,g,v,x,y)}set(e,t,i,r,o,s,a,l,u,f,h,p,g,v,x,y){let _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=o,_[5]=s,_[9]=a,_[13]=l,_[2]=u,_[6]=f,_[10]=h,_[14]=p,_[3]=g,_[7]=v,_[11]=x,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Nh.setFromMatrixColumn(e,0).length(),o=1/Nh.setFromMatrixColumn(e,1).length(),s=1/Nh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(o),h=Math.sin(o);if(e.order==="XYZ"){let p=s*f,g=s*h,v=a*f,x=a*h;t[0]=l*f,t[4]=-l*h,t[8]=u,t[1]=g+v*u,t[5]=p-x*u,t[9]=-a*l,t[2]=x-p*u,t[6]=v+g*u,t[10]=s*l}else if(e.order==="YXZ"){let p=l*f,g=l*h,v=u*f,x=u*h;t[0]=p+x*a,t[4]=v*a-g,t[8]=s*u,t[1]=s*h,t[5]=s*f,t[9]=-a,t[2]=g*a-v,t[6]=x+p*a,t[10]=s*l}else if(e.order==="ZXY"){let p=l*f,g=l*h,v=u*f,x=u*h;t[0]=p-x*a,t[4]=-s*h,t[8]=v+g*a,t[1]=g+v*a,t[5]=s*f,t[9]=x-p*a,t[2]=-s*u,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){let p=s*f,g=s*h,v=a*f,x=a*h;t[0]=l*f,t[4]=v*u-g,t[8]=p*u+x,t[1]=l*h,t[5]=x*u+p,t[9]=g*u-v,t[2]=-u,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){let p=s*l,g=s*u,v=a*l,x=a*u;t[0]=l*f,t[4]=x-p*h,t[8]=v*h+g,t[1]=h,t[5]=s*f,t[9]=-a*f,t[2]=-u*f,t[6]=g*h+v,t[10]=p-x*h}else if(e.order==="XZY"){let p=s*l,g=s*u,v=a*l,x=a*u;t[0]=l*f,t[4]=-h,t[8]=u*f,t[1]=p*h+x,t[5]=s*f,t[9]=g*h-v,t[2]=v*h-g,t[6]=a*f,t[10]=x*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ooe,e,Foe)}lookAt(e,t,i){let r=this.elements;return Ko.subVectors(e,t),Ko.lengthSq()===0&&(Ko.z=1),Ko.normalize(),nu.crossVectors(i,Ko),nu.lengthSq()===0&&(Math.abs(i.z)===1?Ko.x+=1e-4:Ko.z+=1e-4,Ko.normalize(),nu.crossVectors(i,Ko)),nu.normalize(),uw.crossVectors(Ko,nu),r[0]=nu.x,r[4]=uw.x,r[8]=Ko.x,r[1]=nu.y,r[5]=uw.y,r[9]=Ko.y,r[2]=nu.z,r[6]=uw.z,r[10]=Ko.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],u=i[12],f=i[1],h=i[5],p=i[9],g=i[13],v=i[2],x=i[6],y=i[10],_=i[14],E=i[3],S=i[7],C=i[11],k=i[15],F=r[0],L=r[4],W=r[8],O=r[12],R=r[1],j=r[5],me=r[9],ue=r[13],De=r[2],Ce=r[6],Y=r[10],re=r[14],X=r[3],_e=r[7],ze=r[11],rt=r[15];return o[0]=s*F+a*R+l*De+u*X,o[4]=s*L+a*j+l*Ce+u*_e,o[8]=s*W+a*me+l*Y+u*ze,o[12]=s*O+a*ue+l*re+u*rt,o[1]=f*F+h*R+p*De+g*X,o[5]=f*L+h*j+p*Ce+g*_e,o[9]=f*W+h*me+p*Y+g*ze,o[13]=f*O+h*ue+p*re+g*rt,o[2]=v*F+x*R+y*De+_*X,o[6]=v*L+x*j+y*Ce+_*_e,o[10]=v*W+x*me+y*Y+_*ze,o[14]=v*O+x*ue+y*re+_*rt,o[3]=E*F+S*R+C*De+k*X,o[7]=E*L+S*j+C*Ce+k*_e,o[11]=E*W+S*me+C*Y+k*ze,o[15]=E*O+S*ue+C*re+k*rt,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],u=e[13],f=e[2],h=e[6],p=e[10],g=e[14],v=e[3],x=e[7],y=e[11],_=e[15];return v*(+o*l*h-r*u*h-o*a*p+i*u*p+r*a*g-i*l*g)+x*(+t*l*g-t*u*p+o*s*p-r*s*g+r*u*f-o*l*f)+y*(+t*u*h-t*a*g-o*s*h+i*s*g+o*a*f-i*u*f)+_*(-r*a*f-t*l*h+t*a*p+r*s*h-i*s*p+i*l*f)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=e[9],p=e[10],g=e[11],v=e[12],x=e[13],y=e[14],_=e[15],E=h*y*u-x*p*u+x*l*g-a*y*g-h*l*_+a*p*_,S=v*p*u-f*y*u-v*l*g+s*y*g+f*l*_-s*p*_,C=f*x*u-v*h*u+v*a*g-s*x*g-f*a*_+s*h*_,k=v*h*l-f*x*l-v*a*p+s*x*p+f*a*y-s*h*y,F=t*E+i*S+r*C+o*k;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let L=1/F;return e[0]=E*L,e[1]=(x*p*o-h*y*o-x*r*g+i*y*g+h*r*_-i*p*_)*L,e[2]=(a*y*o-x*l*o+x*r*u-i*y*u-a*r*_+i*l*_)*L,e[3]=(h*l*o-a*p*o-h*r*u+i*p*u+a*r*g-i*l*g)*L,e[4]=S*L,e[5]=(f*y*o-v*p*o+v*r*g-t*y*g-f*r*_+t*p*_)*L,e[6]=(v*l*o-s*y*o-v*r*u+t*y*u+s*r*_-t*l*_)*L,e[7]=(s*p*o-f*l*o+f*r*u-t*p*u-s*r*g+t*l*g)*L,e[8]=C*L,e[9]=(v*h*o-f*x*o-v*i*g+t*x*g+f*i*_-t*h*_)*L,e[10]=(s*x*o-v*a*o+v*i*u-t*x*u-s*i*_+t*a*_)*L,e[11]=(f*a*o-s*h*o-f*i*u+t*h*u+s*i*g-t*a*g)*L,e[12]=k*L,e[13]=(f*x*r-v*h*r+v*i*p-t*x*p-f*i*y+t*h*y)*L,e[14]=(v*a*r-s*x*r-v*i*l+t*x*l+s*i*y-t*a*y)*L,e[15]=(s*h*r-f*a*r+f*i*l-t*h*l-s*i*p+t*a*p)*L,this}scale(e){let t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,u=o*s,f=o*a;return this.set(u*s+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*s,0,u*l-r*a,f*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,u=o+o,f=s+s,h=a+a,p=o*u,g=o*f,v=o*h,x=s*f,y=s*h,_=a*h,E=l*u,S=l*f,C=l*h,k=i.x,F=i.y,L=i.z;return r[0]=(1-(x+_))*k,r[1]=(g+C)*k,r[2]=(v-S)*k,r[3]=0,r[4]=(g-C)*F,r[5]=(1-(p+_))*F,r[6]=(y+E)*F,r[7]=0,r[8]=(v+S)*L,r[9]=(y-E)*L,r[10]=(1-(p+x))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,o=Nh.set(r[0],r[1],r[2]).length(),s=Nh.set(r[4],r[5],r[6]).length(),a=Nh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],xa.copy(this);let u=1/o,f=1/s,h=1/a;return xa.elements[0]*=u,xa.elements[1]*=u,xa.elements[2]*=u,xa.elements[4]*=f,xa.elements[5]*=f,xa.elements[6]*=f,xa.elements[8]*=h,xa.elements[9]*=h,xa.elements[10]*=h,t.setFromRotationMatrix(xa),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=il){let l=this.elements,u=2*o/(t-e),f=2*o/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r),g,v;if(a===il)g=-(s+o)/(s-o),v=-2*s*o/(s-o);else if(a===Ug)g=-s/(s-o),v=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=il){let l=this.elements,u=1/(t-e),f=1/(i-r),h=1/(s-o),p=(t+e)*u,g=(i+r)*f,v,x;if(a===il)v=(s+o)*h,x=-2*h;else if(a===Ug)v=o*h,x=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Nh=new V,xa=new dt,Ooe=new V(0,0,0),Foe=new V(1,1,1),nu=new V,uw=new V,Ko=new V,LB=new dt,kB=new yi,hr=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let o=t.elements,s=o[0],a=o[4],l=o[8],u=o[1],f=o[5],h=o[9],p=o[2],g=o[6],v=o[10];switch(i){case"XYZ":this._y=Math.asin(nn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(g,f),this._z=0);break;case"YXZ":this._x=Math.asin(-nn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(nn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-nn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(nn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-nn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return LB.makeRotationFromQuaternion(t),this.setFromRotationMatrix(LB,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return kB.setFromEuler(this),this.setFromQuaternion(kB,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Yh=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Noe=0,UB=new V,Lh=new yi,Yl=new dt,dw=new V,Mg=new V,Loe=new V,koe=new yi,BB=new V(1,0,0),VB=new V(0,1,0),zB=new V(0,0,1),HB={type:"added"},Uoe={type:"removed"},kh={type:"childadded",child:null},rA={type:"childremoved",child:null},_i=(()=>{class n extends rl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Noe++}),this.uuid=Fs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new V,i=new hr,r=new yi,o=new V(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new dt},normalMatrix:{value:new $t}}),this.matrix=new dt,this.matrixWorld=new dt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Yh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Lh.setFromAxisAngle(t,i),this.quaternion.multiply(Lh),this}rotateOnWorldAxis(t,i){return Lh.setFromAxisAngle(t,i),this.quaternion.premultiply(Lh),this}rotateX(t){return this.rotateOnAxis(BB,t)}rotateY(t){return this.rotateOnAxis(VB,t)}rotateZ(t){return this.rotateOnAxis(zB,t)}translateOnAxis(t,i){return UB.copy(t).applyQuaternion(this.quaternion),this.position.add(UB.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(BB,t)}translateY(t){return this.translateOnAxis(VB,t)}translateZ(t){return this.translateOnAxis(zB,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Yl.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?dw.copy(t):dw.set(t,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),Mg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Yl.lookAt(Mg,dw,this.up):Yl.lookAt(dw,Mg,this.up),this.quaternion.setFromRotationMatrix(Yl),o&&(Yl.extractRotation(o.matrixWorld),Lh.setFromRotationMatrix(Yl),this.quaternion.premultiply(Lh.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(HB),kh.child=t,this.dispatchEvent(kh),kh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Uoe),rA.child=t,this.dispatchEvent(rA),rA.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Yl.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Yl.multiply(t.parent.matrixWorld)),t.applyMatrix4(Yl),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(HB),kh.child=t,this.dispatchEvent(kh),kh.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mg,t,Loe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mg,koe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(l=>Ve(q({},l),{boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),o.instanceInfo=this._instanceInfo.map(l=>q({},l)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(t),o.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(o.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let u=l.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){let p=u[f];s(t.shapes,p)}else s(t.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(t.materials,this.material[u]));o.material=l}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let u=this.animations[l];o.animations.push(s(t.animations,u))}}if(i){let l=a(t.geometries),u=a(t.materials),f=a(t.textures),h=a(t.images),p=a(t.shapes),g=a(t.skeletons),v=a(t.animations),x=a(t.nodes);l.length>0&&(r.geometries=l),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),x.length>0&&(r.nodes=x)}return r.object=o,r;function a(l){let u=[];for(let f in l){let h=l[f];delete h.metadata,u.push(h)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let o=t.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new V(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),wa=new V,Zl=new V,oA=new V,Kl=new V,Uh=new V,Bh=new V,jB=new V,sA=new V,aA=new V,lA=new V,cA=new sn,uA=new sn,dA=new sn,ou=class n{constructor(e=new V,t=new V,i=new V){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),wa.subVectors(e,t),r.cross(wa);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){wa.subVectors(r,t),Zl.subVectors(i,t),oA.subVectors(e,t);let s=wa.dot(wa),a=wa.dot(Zl),l=wa.dot(oA),u=Zl.dot(Zl),f=Zl.dot(oA),h=s*u-a*a;if(h===0)return o.set(0,0,0),null;let p=1/h,g=(u*l-a*f)*p,v=(s*f-a*l)*p;return o.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Kl)===null?!1:Kl.x>=0&&Kl.y>=0&&Kl.x+Kl.y<=1}static getInterpolation(e,t,i,r,o,s,a,l){return this.getBarycoord(e,t,i,r,Kl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Kl.x),l.addScaledVector(s,Kl.y),l.addScaledVector(a,Kl.z),l)}static getInterpolatedAttribute(e,t,i,r,o,s){return cA.setScalar(0),uA.setScalar(0),dA.setScalar(0),cA.fromBufferAttribute(e,t),uA.fromBufferAttribute(e,i),dA.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(cA,o.x),s.addScaledVector(uA,o.y),s.addScaledVector(dA,o.z),s}static isFrontFacing(e,t,i,r){return wa.subVectors(i,t),Zl.subVectors(e,t),wa.cross(Zl).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return wa.subVectors(this.c,this.b),Zl.subVectors(this.a,this.b),wa.cross(Zl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,o=this.c,s,a;Uh.subVectors(r,i),Bh.subVectors(o,i),sA.subVectors(e,i);let l=Uh.dot(sA),u=Bh.dot(sA);if(l<=0&&u<=0)return t.copy(i);aA.subVectors(e,r);let f=Uh.dot(aA),h=Bh.dot(aA);if(f>=0&&h<=f)return t.copy(r);let p=l*h-f*u;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(i).addScaledVector(Uh,s);lA.subVectors(e,o);let g=Uh.dot(lA),v=Bh.dot(lA);if(v>=0&&g<=v)return t.copy(o);let x=g*u-l*v;if(x<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(i).addScaledVector(Bh,a);let y=f*v-g*h;if(y<=0&&h-f>=0&&g-v>=0)return jB.subVectors(o,r),a=(h-f)/(h-f+(g-v)),t.copy(r).addScaledVector(jB,a);let _=1/(y+x+p);return s=x*_,a=p*_,t.copy(i).addScaledVector(Uh,s).addScaledVector(Bh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},fz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},iu={h:0,s:0,l:0},fw={h:0,s:0,l:0};function fA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var pt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Cn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=zt.workingColorSpace){return this.r=e,this.g=t,this.b=i,zt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=zt.workingColorSpace){if(e=tD(e,1),t=nn(t,0,1),i=nn(i,0,1),t===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=fA(s,o,e+1/3),this.g=fA(s,o,e),this.b=fA(s,o,e-1/3)}return zt.toWorkingColorSpace(this,r),this}setStyle(e,t=Cn){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Cn){let i=fz[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ec(e.r),this.g=ec(e.g),this.b=ec(e.b),this}copyLinearToSRGB(e){return this.r=Gh(e.r),this.g=Gh(e.g),this.b=Gh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Cn){return zt.fromWorkingColorSpace(Nr.copy(this),e),Math.round(nn(Nr.r*255,0,255))*65536+Math.round(nn(Nr.g*255,0,255))*256+Math.round(nn(Nr.b*255,0,255))}getHexString(e=Cn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zt.workingColorSpace){zt.fromWorkingColorSpace(Nr.copy(this),t);let i=Nr.r,r=Nr.g,o=Nr.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,u,f=(a+s)/2;if(a===s)l=0,u=0;else{let h=s-a;switch(u=f<=.5?h/(s+a):h/(2-s-a),s){case i:l=(r-o)/h+(r<o?6:0);break;case r:l=(o-i)/h+2;break;case o:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=zt.workingColorSpace){return zt.fromWorkingColorSpace(Nr.copy(this),t),e.r=Nr.r,e.g=Nr.g,e.b=Nr.b,e}getStyle(e=Cn){zt.fromWorkingColorSpace(Nr.copy(this),e);let t=Nr.r,i=Nr.g,r=Nr.b;return e!==Cn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(iu),this.setHSL(iu.h+e,iu.s+t,iu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(iu),e.getHSL(fw);let i=Fg(iu.h,fw.h,t),r=Fg(iu.s,fw.s,t),o=Fg(iu.l,fw.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Nr=new pt;pt.NAMES=fz;var Boe=0,tr=class extends rl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Boe++}),this.uuid=Fs(),this.name="",this.type="Material",this.blending=_d,this.side=Ca,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ow,this.blendDst=Fw,this.blendEquation=au,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new pt(0,0,0),this.blendAlpha=0,this.depthFunc=xd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yd,this.stencilZFail=yd,this.stencilZPass=yd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==_d&&(i.blending=this.blending),this.side!==Ca&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Ow&&(i.blendSrc=this.blendSrc),this.blendDst!==Fw&&(i.blendDst=this.blendDst),this.blendEquation!==au&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==xd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AA&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yd&&(i.stencilFail=this.stencilFail),this.stencilZFail!==yd&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==yd&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(t){let o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},es=class extends tr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hr,this.combine=f0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var Wi=new V,hw=new qe,Voe=0,$i=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Voe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Nw,this.updateRanges=[],this.gpuType=Bs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)hw.fromBufferAttribute(this,t),hw.applyMatrix3(e),this.setXY(t,hw.x,hw.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix3(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix4(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.applyNormalMatrix(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Wi.fromBufferAttribute(this,t),Wi.transformDirection(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ba(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Wn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ba(t,this.array)),t}setX(e,t){return this.normalized&&(t=Wn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ba(t,this.array)),t}setY(e,t){return this.normalized&&(t=Wn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ba(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Wn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ba(t,this.array)),t}setW(e,t){return this.normalized&&(t=Wn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Wn(t,this.array),i=Wn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Wn(t,this.array),i=Wn(i,this.array),r=Wn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=Wn(t,this.array),i=Wn(i,this.array),r=Wn(r,this.array),o=Wn(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Nw&&(e.usage=this.usage),e}};var Sd=class extends $i{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var Vg=class extends $i{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var jn=class extends $i{constructor(e,t,i){super(new Float32Array(e),t,i)}},zoe=0,Ps=new dt,hA=new _i,Vh=new V,Jo=new qr,Tg=new qr,fr=new V,Hi=class n extends rl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zoe++}),this.uuid=Fs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nD(e)?Vg:Sd)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new $t().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ps.makeRotationFromQuaternion(e),this.applyMatrix4(Ps),this}rotateX(e){return Ps.makeRotationX(e),this.applyMatrix4(Ps),this}rotateY(e){return Ps.makeRotationY(e),this.applyMatrix4(Ps),this}rotateZ(e){return Ps.makeRotationZ(e),this.applyMatrix4(Ps),this}translate(e,t,i){return Ps.makeTranslation(e,t,i),this.applyMatrix4(Ps),this}scale(e,t,i){return Ps.makeScale(e,t,i),this.applyMatrix4(Ps),this}lookAt(e){return hA.lookAt(e),hA.updateMatrix(),this.applyMatrix4(hA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vh).negate(),this.translate(Vh.x,Vh.y,Vh.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new jn(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let o=t[i];Jo.setFromBufferAttribute(o),this.morphTargetsRelative?(fr.addVectors(this.boundingBox.min,Jo.min),this.boundingBox.expandByPoint(fr),fr.addVectors(this.boundingBox.max,Jo.max),this.boundingBox.expandByPoint(fr)):(this.boundingBox.expandByPoint(Jo.min),this.boundingBox.expandByPoint(Jo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new To);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new V,1/0);return}if(e){let i=this.boundingSphere.center;if(Jo.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];Tg.setFromBufferAttribute(a),this.morphTargetsRelative?(fr.addVectors(Jo.min,Tg.min),Jo.expandByPoint(fr),fr.addVectors(Jo.max,Tg.max),Jo.expandByPoint(fr)):(Jo.expandByPoint(Tg.min),Jo.expandByPoint(Tg.max))}Jo.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)fr.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(fr));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)fr.fromBufferAttribute(a,u),l&&(Vh.fromBufferAttribute(e,u),fr.add(Vh)),r=Math.max(r,i.distanceToSquared(fr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $i(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let W=0;W<i.count;W++)a[W]=new V,l[W]=new V;let u=new V,f=new V,h=new V,p=new qe,g=new qe,v=new qe,x=new V,y=new V;function _(W,O,R){u.fromBufferAttribute(i,W),f.fromBufferAttribute(i,O),h.fromBufferAttribute(i,R),p.fromBufferAttribute(o,W),g.fromBufferAttribute(o,O),v.fromBufferAttribute(o,R),f.sub(u),h.sub(u),g.sub(p),v.sub(p);let j=1/(g.x*v.y-v.x*g.y);isFinite(j)&&(x.copy(f).multiplyScalar(v.y).addScaledVector(h,-g.y).multiplyScalar(j),y.copy(h).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(j),a[W].add(x),a[O].add(x),a[R].add(x),l[W].add(y),l[O].add(y),l[R].add(y))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let W=0,O=E.length;W<O;++W){let R=E[W],j=R.start,me=R.count;for(let ue=j,De=j+me;ue<De;ue+=3)_(e.getX(ue+0),e.getX(ue+1),e.getX(ue+2))}let S=new V,C=new V,k=new V,F=new V;function L(W){k.fromBufferAttribute(r,W),F.copy(k);let O=a[W];S.copy(O),S.sub(k.multiplyScalar(k.dot(O))).normalize(),C.crossVectors(F,O);let j=C.dot(l[W])<0?-1:1;s.setXYZW(W,S.x,S.y,S.z,j)}for(let W=0,O=E.length;W<O;++W){let R=E[W],j=R.start,me=R.count;for(let ue=j,De=j+me;ue<De;ue+=3)L(e.getX(ue+0)),L(e.getX(ue+1)),L(e.getX(ue+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new $i(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);let r=new V,o=new V,s=new V,a=new V,l=new V,u=new V,f=new V,h=new V;if(e)for(let p=0,g=e.count;p<g;p+=3){let v=e.getX(p+0),x=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,v),o.fromBufferAttribute(t,x),s.fromBufferAttribute(t,y),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,x),u.fromBufferAttribute(i,y),a.add(f),l.add(f),u.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(y,u.x,u.y,u.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),o.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)fr.fromBufferAttribute(e,t),fr.normalize(),e.setXYZ(t,fr.x,fr.y,fr.z)}toNonIndexed(){function e(a,l){let u=a.array,f=a.itemSize,h=a.normalized,p=new u.constructor(l.length*f),g=0,v=0;for(let x=0,y=l.length;x<y;x++){a.isInterleavedBufferAttribute?g=l[x]*a.data.stride+a.offset:g=l[x]*f;for(let _=0;_<f;_++)p[v++]=u[g++]}return new $i(p,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],u=e(l,i);t.setAttribute(a,u)}let o=this.morphAttributes;for(let a in o){let l=[],u=o[a];for(let f=0,h=u.length;f<h;f++){let p=u[f],g=e(p,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let u=s[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let l in i){let u=i[l];e.data.attributes[l]=u.toJSON(e.data)}let r={},o=!1;for(let l in this.morphAttributes){let u=this.morphAttributes[l],f=[];for(let h=0,p=u.length;h<p;h++){let g=u[h];f.push(g.toJSON(e.data))}f.length>0&&(r[l]=f,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let u in r){let f=r[u];this.setAttribute(u,f.clone(t))}let o=e.morphAttributes;for(let u in o){let f=[],h=o[u];for(let p=0,g=h.length;p<g;p++)f.push(h[p].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let u=0,f=s.length;u<f;u++){let h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},GB=new dt,gd=new sl,pw=new To,WB=new V,mw=new V,gw=new V,vw=new V,pA=new V,yw=new V,$B=new V,_w=new V,xi=class extends _i{constructor(e=new Hi,t=new es){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){yw.set(0,0,0);for(let l=0,u=o.length;l<u;l++){let f=a[l],h=o[l];f!==0&&(pA.fromBufferAttribute(h,e),s?yw.addScaledVector(pA,f):yw.addScaledVector(pA.sub(t),f))}t.add(yw)}return t}raycast(e,t){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),pw.copy(i.boundingSphere),pw.applyMatrix4(o),gd.copy(e.ray).recast(e.near),!(pw.containsPoint(gd.origin)===!1&&(gd.intersectSphere(pw,WB)===null||gd.origin.distanceToSquared(WB)>(e.far-e.near)**2))&&(GB.copy(o).invert(),gd.copy(e.ray).applyMatrix4(GB),!(i.boundingBox!==null&&gd.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,gd)))}_computeIntersections(e,t,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,f=o.attributes.uv1,h=o.attributes.normal,p=o.groups,g=o.drawRange;if(a!==null)if(Array.isArray(s))for(let v=0,x=p.length;v<x;v++){let y=p[v],_=s[y.materialIndex],E=Math.max(y.start,g.start),S=Math.min(a.count,Math.min(y.start+y.count,g.start+g.count));for(let C=E,k=S;C<k;C+=3){let F=a.getX(C),L=a.getX(C+1),W=a.getX(C+2);r=xw(this,_,e,i,u,f,h,F,L,W),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{let v=Math.max(0,g.start),x=Math.min(a.count,g.start+g.count);for(let y=v,_=x;y<_;y+=3){let E=a.getX(y),S=a.getX(y+1),C=a.getX(y+2);r=xw(this,s,e,i,u,f,h,E,S,C),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let v=0,x=p.length;v<x;v++){let y=p[v],_=s[y.materialIndex],E=Math.max(y.start,g.start),S=Math.min(l.count,Math.min(y.start+y.count,g.start+g.count));for(let C=E,k=S;C<k;C+=3){let F=C,L=C+1,W=C+2;r=xw(this,_,e,i,u,f,h,F,L,W),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{let v=Math.max(0,g.start),x=Math.min(l.count,g.start+g.count);for(let y=v,_=x;y<_;y+=3){let E=y,S=y+1,C=y+2;r=xw(this,s,e,i,u,f,h,E,S,C),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}};function Hoe(n,e,t,i,r,o,s,a){let l;if(e.side===Yr?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,e.side===Ca,a),l===null)return null;_w.copy(a),_w.applyMatrix4(n.matrixWorld);let u=t.ray.origin.distanceTo(_w);return u<t.near||u>t.far?null:{distance:u,point:_w.clone(),object:n}}function xw(n,e,t,i,r,o,s,a,l,u){n.getVertexPosition(a,mw),n.getVertexPosition(l,gw),n.getVertexPosition(u,vw);let f=Hoe(n,e,t,i,mw,gw,vw,$B);if(f){let h=new V;ou.getBarycoord($B,mw,gw,vw,h),r&&(f.uv=ou.getInterpolatedAttribute(r,a,l,u,h,new qe)),o&&(f.uv1=ou.getInterpolatedAttribute(o,a,l,u,h,new qe)),s&&(f.normal=ou.getInterpolatedAttribute(s,a,l,u,h,new V),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));let p={a,b:l,c:u,normal:new V,materialIndex:0};ou.getNormal(mw,gw,vw,p.normal),f.face=p,f.barycoord=h}return f}var Zh=class n extends Hi{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],u=[],f=[],h=[],p=0,g=0;v("z","y","x",-1,-1,i,t,e,s,o,0),v("z","y","x",1,-1,i,t,-e,s,o,1),v("x","z","y",1,1,e,i,t,r,s,2),v("x","z","y",1,-1,e,i,-t,r,s,3),v("x","y","z",1,-1,e,t,i,r,o,4),v("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new jn(u,3)),this.setAttribute("normal",new jn(f,3)),this.setAttribute("uv",new jn(h,2));function v(x,y,_,E,S,C,k,F,L,W,O){let R=C/L,j=k/W,me=C/2,ue=k/2,De=F/2,Ce=L+1,Y=W+1,re=0,X=0,_e=new V;for(let ze=0;ze<Y;ze++){let rt=ze*j-ue;for(let ve=0;ve<Ce;ve++){let oe=ve*R-me;_e[x]=oe*E,_e[y]=rt*S,_e[_]=De,u.push(_e.x,_e.y,_e.z),_e[x]=0,_e[y]=0,_e[_]=F>0?1:-1,f.push(_e.x,_e.y,_e.z),h.push(ve/L),h.push(1-ze/W),re+=1}}for(let ze=0;ze<W;ze++)for(let rt=0;rt<L;rt++){let ve=p+rt+Ce*ze,oe=p+rt+Ce*(ze+1),B=p+(rt+1)+Ce*(ze+1),Q=p+(rt+1)+Ce*ze;l.push(ve,oe,Q),l.push(oe,B,Q),X+=6}a.addGroup(g,X,O),g+=X,p+=re}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function kd(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function kr(n){let e={};for(let t=0;t<n.length;t++){let i=kd(n[t]);for(let r in i)e[r]=i[r]}return e}function joe(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function iD(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:zt.workingColorSpace}var hz={clone:kd,merge:kr},Goe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Woe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Ea=class extends tr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Goe,this.fragmentShader=Woe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kd(e.uniforms),this.uniformsGroups=joe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},zg=class extends _i{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dt,this.projectionMatrix=new dt,this.projectionMatrixInverse=new dt,this.coordinateSystem=il}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ru=new V,qB=new qe,XB=new qe,Ri=class extends zg{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Cd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Og*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Cd*2*Math.atan(Math.tan(Og*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ru.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ru.x,ru.y).multiplyScalar(-e/ru.z),ru.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ru.x,ru.y).multiplyScalar(-e/ru.z)}getViewSize(e,t){return this.getViewBounds(e,qB,XB),t.subVectors(XB,qB)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Og*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},zh=-90,Hh=1,Bw=class extends _i{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Ri(zh,Hh,e,t);r.layers=this.layers,this.add(r);let o=new Ri(zh,Hh,e,t);o.layers=this.layers,this.add(o);let s=new Ri(zh,Hh,e,t);s.layers=this.layers,this.add(s);let a=new Ri(zh,Hh,e,t);a.layers=this.layers,this.add(a);let l=new Ri(zh,Hh,e,t);l.layers=this.layers,this.add(l);let u=new Ri(zh,Hh,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,l]=t;for(let u of t)this.remove(u);if(e===il)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Ug)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,u,f]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;let x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(h,p,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}},Hg=class extends Zr{constructor(e=[],t=Fd,i,r,o,s,a,l,u,f){super(e,t,i,r,o,s,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Vw=class extends ol{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Hg(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:$r}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Zh(5,5,5),o=new Ea({name:"CubemapFromEquirect",uniforms:kd(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Yr,blending:ac});o.uniforms.tEquirect.value=t;let s=new xi(r,o),a=t.minFilter;return t.minFilter===Ia&&(t.minFilter=$r),new Bw(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}},Lr=class extends _i{constructor(){super(),this.isGroup=!0,this.type="Group"}},$oe={type:"move"},Kh=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Lr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Lr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Lr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(let x of e.hand.values()){let y=t.getJointPose(x,i),_=this._getHandJoint(u,x);y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=y.radius),_.visible=y!==null}let f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=f.position.distanceTo(h.position),g=.02,v=.005;u.inputState.pinching&&p>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent($oe)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Lr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var jg=class extends _i{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new hr,this.environmentIntensity=1,this.environmentRotation=new hr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},Jh=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Nw,this.updateRanges=[],this.version=0,this.uuid=Fs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Wr=new V,Qh=class n{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Wr.fromBufferAttribute(this,t),Wr.applyMatrix4(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Wr.fromBufferAttribute(this,t),Wr.applyNormalMatrix(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Wr.fromBufferAttribute(this,t),Wr.transformDirection(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ba(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Wn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Wn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Wn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Wn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Wn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ba(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ba(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ba(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ba(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Wn(t,this.array),i=Wn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Wn(t,this.array),i=Wn(i,this.array),r=Wn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Wn(t,this.array),i=Wn(i,this.array),r=Wn(r,this.array),o=Wn(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new $i(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var YB=new V,ZB=new sn,KB=new sn,qoe=new V,JB=new dt,ww=new V,mA=new To,QB=new dt,gA=new sl,Ed=class extends xi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=SA,this.bindMatrix=new dt,this.bindMatrixInverse=new dt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new qr),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,ww),this.boundingBox.expandByPoint(ww)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new To),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,ww),this.boundingSphere.expandByPoint(ww)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),mA.copy(this.boundingSphere),mA.applyMatrix4(r),e.ray.intersectsSphere(mA)!==!1&&(QB.copy(r).invert(),gA.copy(e.ray).applyMatrix4(QB),!(this.boundingBox!==null&&gA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,gA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new sn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===SA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ZV?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let i=this.skeleton,r=this.geometry;ZB.fromBufferAttribute(r.attributes.skinIndex,e),KB.fromBufferAttribute(r.attributes.skinWeight,e),YB.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){let s=KB.getComponent(o);if(s!==0){let a=ZB.getComponent(o);JB.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(qoe.copy(YB).applyMatrix4(JB),s)}}return t.applyMatrix4(this.bindMatrixInverse)}},tc=class extends _i{constructor(){super(),this.isBone=!0,this.type="Bone"}},Gg=class extends Zr{constructor(e=null,t=1,i=1,r,o,s,a,l,u=br,f=br,h,p){super(null,s,a,l,u,f,r,o,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},eV=new dt,Xoe=new dt,Md=class n{constructor(e=[],t=[]){this.uuid=Fs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new dt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:Xoe;eV.multiplyMatrices(a,t[o]),eV.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new Gg(t,e,e,ns,Bs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let o=e.bones[i],s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new tc),this.bones.push(s),this.boneInverses.push(new dt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,o=t.length;r<o;r++){let s=t[r];e.bones.push(s.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},lu=class extends $i{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},jh=new dt,tV=new dt,bw=[],nV=new qr,Yoe=new dt,Ig=new xi,Ag=new To,Wg=class extends xi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new lu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Yoe)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new qr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,jh),nV.copy(e.boundingBox).applyMatrix4(jh),this.boundingBox.union(nV)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new To),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,jh),Ag.copy(e.boundingSphere).applyMatrix4(jh),this.boundingSphere.union(Ag)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=e*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(e,t){let i=this.matrixWorld,r=this.count;if(Ig.geometry=this.geometry,Ig.material=this.material,Ig.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ag.copy(this.boundingSphere),Ag.applyMatrix4(i),e.ray.intersectsSphere(Ag)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,jh),tV.multiplyMatrices(i,jh),Ig.matrixWorld=tV,Ig.raycast(e,bw);for(let s=0,a=bw.length;s<a;s++){let l=bw[s];l.instanceId=o,l.object=this,t.push(l)}bw.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new lu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Gg(new Float32Array(r*this.count),r,this.count,vb,Bs));let o=this.morphTexture.source.data.data,s=0;for(let u=0;u<i.length;u++)s+=i[u];let a=this.geometry.morphTargetsRelative?1:1-s,l=r*e;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}},vA=new V,Zoe=new V,Koe=new $t,Os=class{constructor(e=new V(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=vA.subVectors(i,t).cross(Zoe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(vA),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||Koe.getNormalMatrix(e),r=this.coplanarPoint(vA).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},vd=new To,Cw=new V,ep=class{constructor(e=new Os,t=new Os,i=new Os,r=new Os,o=new Os,s=new Os){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=il){let i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],u=r[4],f=r[5],h=r[6],p=r[7],g=r[8],v=r[9],x=r[10],y=r[11],_=r[12],E=r[13],S=r[14],C=r[15];if(i[0].setComponents(l-o,p-u,y-g,C-_).normalize(),i[1].setComponents(l+o,p+u,y+g,C+_).normalize(),i[2].setComponents(l+s,p+f,y+v,C+E).normalize(),i[3].setComponents(l-s,p-f,y-v,C-E).normalize(),i[4].setComponents(l-a,p-h,y-x,C-S).normalize(),t===il)i[5].setComponents(l+a,p+h,y+x,C+S).normalize();else if(t===Ug)i[5].setComponents(a,h,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),vd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),vd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(vd)}intersectsSprite(e){return vd.center.set(0,0,0),vd.radius=.7071067811865476,vd.applyMatrix4(e.matrixWorld),this.intersectsSphere(vd)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(Cw.x=r.normal.x>0?e.max.x:e.min.x,Cw.y=r.normal.y>0?e.max.y:e.min.y,Cw.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Cw)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Ns=class extends tr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new pt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},zw=new V,Hw=new V,iV=new dt,Dg=new sl,Sw=new To,yA=new V,rV=new V,nc=class extends _i{constructor(e=new Hi,t=new Ns){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)zw.fromBufferAttribute(t,r-1),Hw.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=zw.distanceTo(Hw);e.setAttribute("lineDistance",new jn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Sw.copy(i.boundingSphere),Sw.applyMatrix4(r),Sw.radius+=o,e.ray.intersectsSphere(Sw)===!1)return;iV.copy(r).invert(),Dg.copy(e.ray).applyMatrix4(iV);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){let g=Math.max(0,s.start),v=Math.min(f.count,s.start+s.count);for(let x=g,y=v-1;x<y;x+=u){let _=f.getX(x),E=f.getX(x+1),S=Ew(this,e,Dg,l,_,E,x);S&&t.push(S)}if(this.isLineLoop){let x=f.getX(v-1),y=f.getX(g),_=Ew(this,e,Dg,l,x,y,v-1);_&&t.push(_)}}else{let g=Math.max(0,s.start),v=Math.min(p.count,s.start+s.count);for(let x=g,y=v-1;x<y;x+=u){let _=Ew(this,e,Dg,l,x,x+1,x);_&&t.push(_)}if(this.isLineLoop){let x=Ew(this,e,Dg,l,v-1,g,v-1);x&&t.push(x)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function Ew(n,e,t,i,r,o,s){let a=n.geometry.attributes.position;if(zw.fromBufferAttribute(a,r),Hw.fromBufferAttribute(a,o),t.distanceSqToSegment(zw,Hw,yA,rV)>i)return;yA.applyMatrix4(n.matrixWorld);let u=e.ray.origin.distanceTo(yA);if(!(u<e.near||u>e.far))return{distance:u,point:rV.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}var oV=new V,sV=new V,cu=class extends nc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)oV.fromBufferAttribute(t,r),sV.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+oV.distanceTo(sV);e.setAttribute("lineDistance",new jn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},$g=class extends nc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},Ma=class extends tr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new pt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},aV=new dt,DA=new sl,Mw=new To,Tw=new V,ic=class extends _i{constructor(e=new Hi,t=new Ma){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Mw.copy(i.boundingSphere),Mw.applyMatrix4(r),Mw.radius+=o,e.ray.intersectsSphere(Mw)===!1)return;aV.copy(r).invert(),DA.copy(e.ray).applyMatrix4(aV);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){let p=Math.max(0,s.start),g=Math.min(u.count,s.start+s.count);for(let v=p,x=g;v<x;v++){let y=u.getX(v);Tw.fromBufferAttribute(h,y),lV(Tw,y,l,r,e,t,this)}}else{let p=Math.max(0,s.start),g=Math.min(h.count,s.start+s.count);for(let v=p,x=g;v<x;v++)Tw.fromBufferAttribute(h,v),lV(Tw,v,l,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function lV(n,e,t,i,r,o,s){let a=DA.distanceSqToPoint(n);if(a<t){let l=new V;DA.closestPointToPoint(n,l),l.applyMatrix4(i);let u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}var qg=class extends Zr{constructor(e,t,i=pu,r,o,s,a=br,l=br,u,f=$h){if(f!==$h&&f!==up)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,o,s,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Xh(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};var Xr=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(r),t.push(o),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let i=this.getLengths(),r=0,o=i.length,s;t?s=t:s=e*i[o-1];let a=0,l=o-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-s,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(o-1);let f=i[r],p=i[r+1]-f,g=(s-f)/p;return(r+g)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),l=t||(s.isVector2?new qe:new V);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){let i=new V,r=[],o=[],s=[],a=new V,l=new dt;for(let g=0;g<=e;g++){let v=g/e;r[g]=this.getTangentAt(v,new V)}o[0]=new V,s[0]=new V;let u=Number.MAX_VALUE,f=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=u&&(u=f,i.set(1,0,0)),h<=u&&(u=h,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let g=1;g<=e;g++){if(o[g]=o[g-1].clone(),s[g]=s[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();let v=Math.acos(nn(r[g-1].dot(r[g]),-1,1));o[g].applyMatrix4(l.makeRotationAxis(a,v))}s[g].crossVectors(r[g],o[g])}if(t===!0){let g=Math.acos(nn(o[0].dot(o[e]),-1,1));g/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(g=-g);for(let v=1;v<=e;v++)o[v].applyMatrix4(l.makeRotationAxis(r[v],g*v)),s[v].crossVectors(r[v],o[v])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},tp=class extends Xr{constructor(e=0,t=0,i=1,r=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new qe){let i=t,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let f=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,g=u-this.aY;l=p*f-g*h+this.aX,u=p*h+g*f+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},jw=class extends tp{constructor(e,t,i,r,o,s){super(e,t,i,i,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function rD(){let n=0,e=0,t=0,i=0;function r(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){r(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,f,h){let p=(s-o)/u-(a-o)/(u+f)+(a-s)/f,g=(a-s)/f-(l-s)/(f+h)+(l-a)/h;p*=f,g*=f,r(s,a,p,g)},calc:function(o){let s=o*o,a=s*o;return n+e*o+t*s+i*a}}}var Iw=new V,_A=new rD,xA=new rD,wA=new rD,Gw=class extends Xr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new V){let i=t,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let u,f;this.closed||a>0?u=r[(a-1)%o]:(Iw.subVectors(r[0],r[1]).add(r[0]),u=Iw);let h=r[a%o],p=r[(a+1)%o];if(this.closed||a+2<o?f=r[(a+2)%o]:(Iw.subVectors(r[o-1],r[o-2]).add(r[o-1]),f=Iw),this.curveType==="centripetal"||this.curveType==="chordal"){let g=this.curveType==="chordal"?.5:.25,v=Math.pow(u.distanceToSquared(h),g),x=Math.pow(h.distanceToSquared(p),g),y=Math.pow(p.distanceToSquared(f),g);x<1e-4&&(x=1),v<1e-4&&(v=x),y<1e-4&&(y=x),_A.initNonuniformCatmullRom(u.x,h.x,p.x,f.x,v,x,y),xA.initNonuniformCatmullRom(u.y,h.y,p.y,f.y,v,x,y),wA.initNonuniformCatmullRom(u.z,h.z,p.z,f.z,v,x,y)}else this.curveType==="catmullrom"&&(_A.initCatmullRom(u.x,h.x,p.x,f.x,this.tension),xA.initCatmullRom(u.y,h.y,p.y,f.y,this.tension),wA.initCatmullRom(u.z,h.z,p.z,f.z,this.tension));return i.set(_A.calc(l),xA.calc(l),wA.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new V().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function cV(n,e,t,i,r){let o=(i-e)*.5,s=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+o+s)*l+(-3*t+3*i-2*o-s)*a+o*n+t}function Joe(n,e){let t=1-n;return t*t*e}function Qoe(n,e){return 2*(1-n)*n*e}function ese(n,e){return n*n*e}function Ng(n,e,t,i){return Joe(n,e)+Qoe(n,t)+ese(n,i)}function tse(n,e){let t=1-n;return t*t*t*e}function nse(n,e){let t=1-n;return 3*t*t*n*e}function ise(n,e){return 3*(1-n)*n*n*e}function rse(n,e){return n*n*n*e}function Lg(n,e,t,i,r){return tse(n,e)+nse(n,t)+ise(n,i)+rse(n,r)}var Xg=class extends Xr{constructor(e=new qe,t=new qe,i=new qe,r=new qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new qe){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Lg(e,r.x,o.x,s.x,a.x),Lg(e,r.y,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ww=class extends Xr{constructor(e=new V,t=new V,i=new V,r=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new V){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Lg(e,r.x,o.x,s.x,a.x),Lg(e,r.y,o.y,s.y,a.y),Lg(e,r.z,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Yg=class extends Xr{constructor(e=new qe,t=new qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new qe){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new qe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},$w=class extends Xr{constructor(e=new V,t=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new V){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new V){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Zg=class extends Xr{constructor(e=new qe,t=new qe,i=new qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new qe){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(Ng(e,r.x,o.x,s.x),Ng(e,r.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},qw=class extends Xr{constructor(e=new V,t=new V,i=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new V){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(Ng(e,r.x,o.x,s.x),Ng(e,r.y,o.y,s.y),Ng(e,r.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Kg=class extends Xr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new qe){let i=t,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[s===0?s:s-1],u=r[s],f=r[s>r.length-2?r.length-1:s+1],h=r[s>r.length-3?r.length-1:s+2];return i.set(cV(a,l.x,u.x,f.x,h.x),cV(a,l.y,u.y,f.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new qe().fromArray(r))}return this}},uV=Object.freeze({__proto__:null,ArcCurve:jw,CatmullRomCurve3:Gw,CubicBezierCurve:Xg,CubicBezierCurve3:Ww,EllipseCurve:tp,LineCurve:Yg,LineCurve3:$w,QuadraticBezierCurve:Zg,QuadraticBezierCurve3:qw,SplineCurve:Kg}),Xw=class extends Xr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new uV[i](t,e))}return this}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=i){let s=r[o]-i,a=this.curves[o],l=a.getLength(),u=l===0?0:1-s/l;return a.getPointAt(u,t)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let u=0;u<l.length;u++){let f=l[u];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new uV[r.type]().fromJSON(r))}return this}},Jg=class extends Xw{constructor(e){super(),this.type="Path",this.currentPoint=new qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new Yg(this.currentPoint.clone(),new qe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let o=new Zg(this.currentPoint.clone(),new qe(e,t),new qe(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,o,s){let a=new Xg(this.currentPoint.clone(),new qe(e,t),new qe(i,r),new qe(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new Kg(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,o,s){let a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,o,s),this}absarc(e,t,i,r,o,s){return this.absellipse(e,t,i,i,r,o,s),this}ellipse(e,t,i,r,o,s,a,l){let u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,i,r,o,s,a,l),this}absellipse(e,t,i,r,o,s,a,l){let u=new tp(e,t,i,r,o,s,a,l);if(this.curves.length>0){let h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);let f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},np=class extends Jg{constructor(e){super(e),this.uuid=Fs(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new Jg().fromJSON(r))}return this}};function ose(n,e,t=2){let i=e&&e.length,r=i?e[0]*t:n.length,o=pz(n,0,r,t,!0),s=[];if(!o||o.next===o.prev)return s;let a,l,u;if(i&&(o=use(n,e,o,t)),n.length>80*t){a=1/0,l=1/0;let f=-1/0,h=-1/0;for(let p=t;p<r;p+=t){let g=n[p],v=n[p+1];g<a&&(a=g),v<l&&(l=v),g>f&&(f=g),v>h&&(h=v)}u=Math.max(f-a,h-l),u=u!==0?32767/u:0}return Qg(o,s,t,a,l,u,0),s}function pz(n,e,t,i,r){let o;if(r===wse(n,e,t,i)>0)for(let s=e;s<t;s+=i)o=dV(s/i|0,n[s],n[s+1],o);else for(let s=t-i;s>=e;s-=i)o=dV(s/i|0,n[s],n[s+1],o);return o&&ip(o,o.next)&&(t0(o),o=o.next),o}function Td(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(ip(t,t.next)||Ti(t.prev,t,t.next)===0)){if(t0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Qg(n,e,t,i,r,o,s){if(!n)return;!s&&o&&mse(n,i,r,o);let a=n;for(;n.prev!==n.next;){let l=n.prev,u=n.next;if(o?ase(n,i,r,o):sse(n)){e.push(l.i,n.i,u.i),t0(n),n=u.next,a=u.next;continue}if(n=u,n===a){s?s===1?(n=lse(Td(n),e),Qg(n,e,t,i,r,o,2)):s===2&&cse(n,e,t,i,r,o):Qg(Td(n),e,t,i,r,o,1);break}}}function sse(n){let e=n.prev,t=n,i=n.next;if(Ti(e,t,i)>=0)return!1;let r=e.x,o=t.x,s=i.x,a=e.y,l=t.y,u=i.y,f=Math.min(r,o,s),h=Math.min(a,l,u),p=Math.max(r,o,s),g=Math.max(a,l,u),v=i.next;for(;v!==e;){if(v.x>=f&&v.x<=p&&v.y>=h&&v.y<=g&&Pg(r,a,o,l,s,u,v.x,v.y)&&Ti(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function ase(n,e,t,i){let r=n.prev,o=n,s=n.next;if(Ti(r,o,s)>=0)return!1;let a=r.x,l=o.x,u=s.x,f=r.y,h=o.y,p=s.y,g=Math.min(a,l,u),v=Math.min(f,h,p),x=Math.max(a,l,u),y=Math.max(f,h,p),_=RA(g,v,e,t,i),E=RA(x,y,e,t,i),S=n.prevZ,C=n.nextZ;for(;S&&S.z>=_&&C&&C.z<=E;){if(S.x>=g&&S.x<=x&&S.y>=v&&S.y<=y&&S!==r&&S!==s&&Pg(a,f,l,h,u,p,S.x,S.y)&&Ti(S.prev,S,S.next)>=0||(S=S.prevZ,C.x>=g&&C.x<=x&&C.y>=v&&C.y<=y&&C!==r&&C!==s&&Pg(a,f,l,h,u,p,C.x,C.y)&&Ti(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;S&&S.z>=_;){if(S.x>=g&&S.x<=x&&S.y>=v&&S.y<=y&&S!==r&&S!==s&&Pg(a,f,l,h,u,p,S.x,S.y)&&Ti(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;C&&C.z<=E;){if(C.x>=g&&C.x<=x&&C.y>=v&&C.y<=y&&C!==r&&C!==s&&Pg(a,f,l,h,u,p,C.x,C.y)&&Ti(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function lse(n,e){let t=n;do{let i=t.prev,r=t.next.next;!ip(i,r)&&gz(i,t,t.next,r)&&e0(i,r)&&e0(r,i)&&(e.push(i.i,t.i,r.i),t0(t),t0(t.next),t=n=r),t=t.next}while(t!==n);return Td(t)}function cse(n,e,t,i,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&yse(s,a)){let l=vz(s,a);s=Td(s,s.next),l=Td(l,l.next),Qg(s,e,t,i,r,o,0),Qg(l,e,t,i,r,o,0);return}a=a.next}s=s.next}while(s!==n)}function use(n,e,t,i){let r=[];for(let o=0,s=e.length;o<s;o++){let a=e[o]*i,l=o<s-1?e[o+1]*i:n.length,u=pz(n,a,l,i,!1);u===u.next&&(u.steiner=!0),r.push(vse(u))}r.sort(dse);for(let o=0;o<r.length;o++)t=fse(r[o],t);return t}function dse(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){let i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function fse(n,e){let t=hse(n,e);if(!t)return e;let i=vz(t,n);return Td(i,i.next),Td(t,t.next)}function hse(n,e){let t=e,i=n.x,r=n.y,o=-1/0,s;if(ip(n,t))return t;do{if(ip(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){let h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>o&&(o=h,s=t.x<t.next.x?t:t.next,h===i))return s}t=t.next}while(t!==e);if(!s)return null;let a=s,l=s.x,u=s.y,f=1/0;t=s;do{if(i>=t.x&&t.x>=l&&i!==t.x&&mz(r<u?i:o,r,l,u,r<u?o:i,r,t.x,t.y)){let h=Math.abs(r-t.y)/(i-t.x);e0(t,n)&&(h<f||h===f&&(t.x>s.x||t.x===s.x&&pse(s,t)))&&(s=t,f=h)}t=t.next}while(t!==a);return s}function pse(n,e){return Ti(n.prev,n,e.prev)<0&&Ti(e.next,n,n.next)<0}function mse(n,e,t,i){let r=n;do r.z===0&&(r.z=RA(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,gse(r)}function gse(n){let e,t=1;do{let i=n,r;n=null;let o=null;for(e=0;i;){e++;let s=i,a=0;for(let u=0;u<t&&(a++,s=s.nextZ,!!s);u++);let l=t;for(;a>0||l>0&&s;)a!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,l--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;i=s}o.nextZ=null,t*=2}while(e>1);return n}function RA(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function vse(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function mz(n,e,t,i,r,o,s,a){return(r-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(i-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(r-s)*(i-a)}function Pg(n,e,t,i,r,o,s,a){return!(n===s&&e===a)&&mz(n,e,t,i,r,o,s,a)}function yse(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!_se(n,e)&&(e0(n,e)&&e0(e,n)&&xse(n,e)&&(Ti(n.prev,n,e.prev)||Ti(n,e.prev,e))||ip(n,e)&&Ti(n.prev,n,n.next)>0&&Ti(e.prev,e,e.next)>0)}function Ti(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function ip(n,e){return n.x===e.x&&n.y===e.y}function gz(n,e,t,i){let r=Dw(Ti(n,e,t)),o=Dw(Ti(n,e,i)),s=Dw(Ti(t,i,n)),a=Dw(Ti(t,i,e));return!!(r!==o&&s!==a||r===0&&Aw(n,t,e)||o===0&&Aw(n,i,e)||s===0&&Aw(t,n,i)||a===0&&Aw(t,e,i))}function Aw(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Dw(n){return n>0?1:n<0?-1:0}function _se(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&gz(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function e0(n,e){return Ti(n.prev,n,n.next)<0?Ti(n,e,n.next)>=0&&Ti(n,n.prev,e)>=0:Ti(n,e,n.prev)<0||Ti(n,n.next,e)<0}function xse(n,e){let t=n,i=!1,r=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function vz(n,e){let t=PA(n.i,n.x,n.y),i=PA(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function dV(n,e,t,i){let r=PA(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function t0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function PA(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function wse(n,e,t,i){let r=0;for(let o=e,s=t-i;o<t;o+=i)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var OA=class{static triangulate(e,t,i=2){return ose(e,t,i)}},su=class n{static area(e){let t=e.length,i=0;for(let r=t-1,o=0;o<t;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],r=[],o=[];fV(e),hV(i,e);let s=e.length;t.forEach(fV);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,hV(i,t[l]);let a=OA.triangulate(i,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}};function fV(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function hV(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var n0=class n extends Hi{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,h=e/a,p=t/l,g=[],v=[],x=[],y=[];for(let _=0;_<f;_++){let E=_*p-s;for(let S=0;S<u;S++){let C=S*h-o;v.push(C,-E,0),x.push(0,0,1),y.push(S/a),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let E=0;E<a;E++){let S=E+u*_,C=E+u*(_+1),k=E+1+u*(_+1),F=E+1+u*_;g.push(S,C,F),g.push(C,k,F)}this.setIndex(g),this.setAttribute("position",new jn(v,3)),this.setAttribute("normal",new jn(x,3)),this.setAttribute("uv",new jn(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var i0=class n extends Hi{constructor(e=new np([new qe(0,.5),new qe(-.5,-.5),new qe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let i=[],r=[],o=[],s=[],a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new jn(r,3)),this.setAttribute("normal",new jn(o,3)),this.setAttribute("uv",new jn(s,2));function u(f){let h=r.length/3,p=f.extractPoints(t),g=p.shape,v=p.holes;su.isClockWise(g)===!1&&(g=g.reverse());for(let y=0,_=v.length;y<_;y++){let E=v[y];su.isClockWise(E)===!0&&(v[y]=E.reverse())}let x=su.triangulateShape(g,v);for(let y=0,_=v.length;y<_;y++){let E=v[y];g=g.concat(E)}for(let y=0,_=g.length;y<_;y++){let E=g[y];r.push(E.x,E.y,0),o.push(0,0,1),s.push(E.x,E.y)}for(let y=0,_=x.length;y<_;y++){let E=x[y],S=E[0]+h,C=E[1]+h,k=E[2]+h;i.push(S,C,k),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return bse(t,e)}static fromJSON(e,t){let i=[];for(let r=0,o=e.shapes.length;r<o;r++){let s=t[e.shapes[r]];i.push(s)}return new n(i,e.curveSegments)}};function bse(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){let r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}var Id=class extends tr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new pt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=x0,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Io=class extends Id{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new pt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new pt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},al=class extends tr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new pt(16777215),this.specular=new pt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=x0,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hr,this.combine=f0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var r0=class extends tr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=x0,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hr,this.combine=f0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Yw=class extends tr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=JV,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Zw=class extends tr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function Rw(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Cse(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Sse(n){function e(r,o){return n[r]-n[o]}let t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function pV(n,e,t){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=t[o]*e;for(let l=0;l!==e;++l)r[s++]=n[a+l]}return r}function yz(n,e,t,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(e.push(o.time),t.push(...s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(e.push(o.time),t.push(s)),o=n[r++];while(o!==void 0)}var rc=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=o)){let a=t[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Kw=class extends rc{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:MA,endingEnd:MA}}intervalChanged_(e,t,i){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case TA:o=e,a=2*t-i;break;case IA:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case TA:s=e,l=2*i-t;break;case IA:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}let u=(i-t)*.5,f=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),x=v*v,y=x*v,_=-p*y+2*p*x-p*v,E=(1+p)*y+(-1.5-2*p)*x+(-.5+p)*v+1,S=(-1-g)*y+(1.5+g)*x+.5*v,C=g*y-g*x;for(let k=0;k!==a;++k)o[k]=_*s[f+k]+E*s[u+k]+S*s[l+k]+C*s[h+k];return o}},Jw=class extends rc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=(i-t)/(r-t),h=1-f;for(let p=0;p!==a;++p)o[p]=s[u+p]*h+s[l+p]*f;return o}},Qw=class extends rc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Ao=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rw(t,this.TimeBufferType),this.values=Rw(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Rw(e.times,Array),values:Rw(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Qw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Kw(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case wd:t=this.InterpolantFactoryMethodDiscrete;break;case bd:t=this.InterpolantFactoryMethodLinear;break;case Pw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wd;case this.InterpolantFactoryMethodLinear:return bd;case this.InterpolantFactoryMethodSmooth:return Pw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(r!==void 0&&Cse(r))for(let a=0,l=r.length;a!==l;++a){let u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Pw,o=e.length-1,s=1;for(let a=1;a<o;++a){let l=!1,u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)l=!0;else{let h=a*i,p=h-i,g=h+i;for(let v=0;v!==i;++v){let x=t[h+v];if(x!==t[p+v]||x!==t[g+v]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];let h=a*i,p=s*i;for(let g=0;g!==i;++g)t[p+g]=t[h+g]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,u=0;u!==i;++u)t[l+u]=t[a+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};Ao.prototype.ValueTypeName="";Ao.prototype.TimeBufferType=Float32Array;Ao.prototype.ValueBufferType=Float32Array;Ao.prototype.DefaultInterpolation=bd;var oc=class extends Ao{constructor(e,t,i){super(e,t,i)}};oc.prototype.ValueTypeName="bool";oc.prototype.ValueBufferType=Array;oc.prototype.DefaultInterpolation=wd;oc.prototype.InterpolantFactoryMethodLinear=void 0;oc.prototype.InterpolantFactoryMethodSmooth=void 0;var o0=class extends Ao{constructor(e,t,i,r){super(e,t,i,r)}};o0.prototype.ValueTypeName="color";var Ls=class extends Ao{constructor(e,t,i,r){super(e,t,i,r)}};Ls.prototype.ValueTypeName="number";var eb=class extends rc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t),u=e*a;for(let f=u+a;u!==f;u+=4)yi.slerpFlat(o,0,s,u-a,s,u,l);return o}},ts=class extends Ao{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new eb(this.times,this.values,this.getValueSize(),e)}};ts.prototype.ValueTypeName="quaternion";ts.prototype.InterpolantFactoryMethodSmooth=void 0;var sc=class extends Ao{constructor(e,t,i){super(e,t,i)}};sc.prototype.ValueTypeName="string";sc.prototype.ValueBufferType=Array;sc.prototype.DefaultInterpolation=wd;sc.prototype.InterpolantFactoryMethodLinear=void 0;sc.prototype.InterpolantFactoryMethodSmooth=void 0;var ks=class extends Ao{constructor(e,t,i,r){super(e,t,i,r)}};ks.prototype.ValueTypeName="vector";var Ad=class{constructor(e="",t=-1,i=[],r=KV){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Fs(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(Mse(i[s]).scale(r));let o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)t.push(Ao.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let o=t.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);let f=Sse(l);l=pV(l,1,f),u=pV(u,1,f),!r&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new Ls(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){let u=e[a],f=u.name.match(o);if(f&&f.length>1){let h=f[1],p=r[h];p||(r[h]=p=[]),p.push(u)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(h,p,g,v,x){if(g.length!==0){let y=[],_=[];yz(g,y,_,v),y.length!==0&&x.push(new h(p,y,_))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,l=e.length||-1,u=e.hierarchy||[];for(let h=0;h<u.length;h++){let p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){let g={},v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let x=0;x<p[v].morphTargets.length;x++)g[p[v].morphTargets[x]]=-1;for(let x in g){let y=[],_=[];for(let E=0;E!==p[v].morphTargets.length;++E){let S=p[v];y.push(S.time),_.push(S.morphTarget===x?1:0)}r.push(new Ls(".morphTargetInfluence["+x+"]",y,_))}l=g.length*s}else{let g=".bones["+t[h].name+"]";i(ks,g+".position",p,"pos",r),i(ts,g+".quaternion",p,"rot",r),i(ks,g+".scale",p,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Ese(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ls;case"vector":case"vector2":case"vector3":case"vector4":return ks;case"color":return o0;case"quaternion":return ts;case"bool":case"boolean":return oc;case"string":return sc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Mse(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=Ese(n.type);if(n.times===void 0){let t=[],i=[];yz(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var Ql={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},tb=class{constructor(e,t,i){let r=this,o=!1,s=0,a=0,l,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,o===!1&&r.onStart!==void 0&&r.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,r.onProgress!==void 0&&r.onProgress(f,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){let h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,p=u.length;h<p;h+=2){let g=u[h],v=u[h+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null}}},_z=new tb,is=(()=>{class n{constructor(t){this.manager=t!==void 0?t:_z,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Jl={},FA=class extends Error{constructor(e,t){super(e),this.response=t}},ll=class extends is{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=Ql.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Jl[e]!==void 0){Jl[e].push({onLoad:t,onProgress:i,onError:r});return}Jl[e]=[],Jl[e].push({onLoad:t,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let f=Jl[e],h=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),g=p?parseInt(p):0,v=g!==0,x=0,y=new ReadableStream({start(_){E();function E(){h.read().then(({done:S,value:C})=>{if(S)_.close();else{x+=C.byteLength;let k=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:g});for(let F=0,L=f.length;F<L;F++){let W=f[F];W.onProgress&&W.onProgress(k)}_.enqueue(C),E()}},S=>{_.error(S)})}}});return new Response(y)}else throw new FA(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a==="")return u.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,g=new TextDecoder(p);return u.arrayBuffer().then(v=>g.decode(v))}}}).then(u=>{Ql.add(e,u);let f=Jl[e];delete Jl[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onLoad&&g.onLoad(u)}}).catch(u=>{let f=Jl[e];if(f===void 0)throw this.manager.itemError(e),u;delete Jl[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var nb=class extends is{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Ql.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;let a=qh("img");function l(){f(),Ql.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(h){f(),r&&r(h),o.manager.itemError(e),o.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}};var Dd=class extends is{constructor(e){super(e)}load(e,t,i,r){let o=new Zr,s=new nb(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},i,r),o}},uu=class extends _i{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new pt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}},s0=class extends uu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_i.DEFAULT_UP),this.updateMatrix(),this.groundColor=new pt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},bA=new dt,mV=new V,gV=new V,a0=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qe(512,512),this.mapType=Aa,this.map=null,this.mapPass=null,this.matrix=new dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ep,this._frameExtents=new qe(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;mV.setFromMatrixPosition(e.matrixWorld),t.position.copy(mV),gV.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(gV),t.updateMatrixWorld(),bA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bA),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(bA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},NA=class extends a0{constructor(){super(new Ri(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=Cd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Rd=class extends uu{constructor(e,t,i=0,r=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_i.DEFAULT_UP),this.updateMatrix(),this.target=new _i,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new NA}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},vV=new dt,Rg=new V,CA=new V,LA=class extends a0{constructor(){super(new Ri(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qe(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Rg.setFromMatrixPosition(e.matrixWorld),i.position.copy(Rg),CA.copy(i.position),CA.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(CA),i.updateMatrixWorld(),r.makeTranslation(-Rg.x,-Rg.y,-Rg.z),vV.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vV)}},du=class extends uu{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new LA}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Pd=class extends zg{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-e,s=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},kA=class extends a0{constructor(){super(new Pd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Od=class extends uu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_i.DEFAULT_UP),this.updateMatrix(),this.target=new _i,this.shadow=new kA}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},l0=class extends uu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var Ta=class{static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var c0=class extends is{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Ql.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(u=>{t&&t(u),o.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Ql.add(e,u),t&&t(u),o.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Ql.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Ql.add(e,l),o.manager.itemStart(e)}};var ib=class extends Ri{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var oD="\\[\\]\\.:\\/",Tse=new RegExp("["+oD+"]","g"),sD="[^"+oD+"]",Ise="[^"+oD.replace("\\.","")+"]",Ase=/((?:WC+[\/:])*)/.source.replace("WC",sD),Dse=/(WCOD+)?/.source.replace("WCOD",Ise),Rse=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sD),Pse=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sD),Ose=new RegExp("^"+Ase+Dse+Rse+Pse+"$"),Fse=["material","materials","bones","map"],UA=class{constructor(e,t,i){let r=i||$n.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},$n=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Tse,"")}static parseTrackName(t){let i=Ose.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);Fse.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let u=r(l.children);if(u)return u}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===f){f=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}let a=t[o];if(a===void 0){let f=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+o+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=UA,n})();$n.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$n.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$n.prototype.GetterByBindingType=[$n.prototype._getValue_direct,$n.prototype._getValue_array,$n.prototype._getValue_arrayElement,$n.prototype._getValue_toArray];$n.prototype.SetterByBindingTypeAndVersioning=[[$n.prototype._setValue_direct,$n.prototype._setValue_direct_setNeedsUpdate,$n.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_array,$n.prototype._setValue_array_setNeedsUpdate,$n.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_arrayElement,$n.prototype._setValue_arrayElement_setNeedsUpdate,$n.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_fromArray,$n.prototype._setValue_fromArray_setNeedsUpdate,$n.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var kDe=new Float32Array(1);var yV=new dt,u0=class{constructor(e,t,i=0,r=1/0){this.ray=new sl(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Yh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return yV.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(yV),this}intersectObject(e,t=!0,i=[]){return BA(e,this,i,t),i.sort(_V),i}intersectObjects(e,t=!0,i=[]){for(let r=0,o=e.length;r<o;r++)BA(e[r],this,i,t);return i.sort(_V),i}};function _V(n,e){return n.distance-e.distance}function BA(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)BA(o[s],e,t,!0)}}var rp=class{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=nn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(nn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var d0=class extends rl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function aD(n,e,t,i){let r=Nse(i);switch(t){case XA:return n*e;case vb:return n*e/r.components*r.byteLength;case yb:return n*e/r.components*r.byteLength;case ZA:return n*e*2/r.components*r.byteLength;case _b:return n*e*2/r.components*r.byteLength;case YA:return n*e*3/r.components*r.byteLength;case ns:return n*e*4/r.components*r.byteLength;case xb:return n*e*4/r.components*r.byteLength;case p0:case m0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case g0:case v0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case bb:case Sb:return Math.max(n,16)*Math.max(e,8)/4;case wb:case Cb:return Math.max(n,8)*Math.max(e,8)/2;case Eb:case Mb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Tb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Ib:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Ab:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Db:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Rb:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Pb:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Ob:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Fb:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Nb:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Lb:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case kb:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Ub:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Bb:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Vb:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case zb:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case y0:case Hb:case jb:return Math.ceil(n/4)*Math.ceil(e/4)*16;case KA:case Gb:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Wb:case $b:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Nse(n){switch(n){case Aa:case WA:return{byteLength:1,components:1};case ap:case $A:case lp:return{byteLength:2,components:1};case mb:case gb:return{byteLength:2,components:4};case pu:case pb:case Bs:return{byteLength:4,components:1};case qA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rb}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=rb);function jz(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function Lse(n){let e=new WeakMap;function t(a,l){let u=a.array,f=a.usage,h=u.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,u,f),a.onUploadCallback();let g;if(u instanceof Float32Array)g=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=n.SHORT;else if(u instanceof Uint32Array)g=n.UNSIGNED_INT;else if(u instanceof Int32Array)g=n.INT;else if(u instanceof Int8Array)g=n.BYTE;else if(u instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,u){let f=l.array,h=l.updateRanges;if(n.bindBuffer(u,a),h.length===0)n.bufferSubData(u,0,f);else{h.sort((g,v)=>g.start-v.start);let p=0;for(let g=1;g<h.length;g++){let v=h[p],x=h[g];x.start<=v.start+v.count+1?v.count=Math.max(v.count,x.start+x.count-v.start):(++p,h[p]=x)}h.length=p+1;for(let g=0,v=h.length;g<v;g++){let x=h[g];n.bufferSubData(u,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:o,update:s}}var kse=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Use=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Bse=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Vse=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zse=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Hse=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jse=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Gse=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Wse=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,$se=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,qse=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Xse=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Yse=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Zse=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Kse=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Jse=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Qse=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,eae=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,tae=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,nae=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,iae=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,rae=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,oae=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,sae=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,aae=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,lae=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,cae=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,uae=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,dae=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,fae=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,hae="gl_FragColor = linearToOutputTexel( gl_FragColor );",pae=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,mae=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,gae=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,vae=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,yae=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_ae=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,xae=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,wae=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,bae=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Cae=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Sae=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Eae=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Mae=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Tae=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Iae=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Aae=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Dae=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Rae=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Pae=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Oae=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Fae=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Nae=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Lae=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,kae=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Uae=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Bae=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Vae=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zae=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Hae=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,jae=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Gae=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Wae=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,$ae=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qae=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Xae=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Yae=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Zae=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Kae=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Jae=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Qae=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,ele=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,tle=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,nle=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ile=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,rle=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ole=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,sle=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ale=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,lle=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,cle=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ule=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dle=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,fle=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,hle=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ple=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,mle=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,gle=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,vle=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,yle=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,_le=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,xle=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,wle=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ble=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Cle=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Sle=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ele=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Mle=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Tle=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ile=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Ale=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Dle=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Rle=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ple=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ole=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Fle=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Nle=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Lle=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,kle=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ule=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ble=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Vle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zle=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hle=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jle=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Gle=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Wle=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$le=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qle=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Xle=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Yle=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zle=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Kle=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jle=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qle=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ece=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,tce=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nce=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ice=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,rce=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oce=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sce=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,ace=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lce=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cce=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uce=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,dce=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fce=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hce=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,pce=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,mce=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,an={alphahash_fragment:kse,alphahash_pars_fragment:Use,alphamap_fragment:Bse,alphamap_pars_fragment:Vse,alphatest_fragment:zse,alphatest_pars_fragment:Hse,aomap_fragment:jse,aomap_pars_fragment:Gse,batching_pars_vertex:Wse,batching_vertex:$se,begin_vertex:qse,beginnormal_vertex:Xse,bsdfs:Yse,iridescence_fragment:Zse,bumpmap_pars_fragment:Kse,clipping_planes_fragment:Jse,clipping_planes_pars_fragment:Qse,clipping_planes_pars_vertex:eae,clipping_planes_vertex:tae,color_fragment:nae,color_pars_fragment:iae,color_pars_vertex:rae,color_vertex:oae,common:sae,cube_uv_reflection_fragment:aae,defaultnormal_vertex:lae,displacementmap_pars_vertex:cae,displacementmap_vertex:uae,emissivemap_fragment:dae,emissivemap_pars_fragment:fae,colorspace_fragment:hae,colorspace_pars_fragment:pae,envmap_fragment:mae,envmap_common_pars_fragment:gae,envmap_pars_fragment:vae,envmap_pars_vertex:yae,envmap_physical_pars_fragment:Aae,envmap_vertex:_ae,fog_vertex:xae,fog_pars_vertex:wae,fog_fragment:bae,fog_pars_fragment:Cae,gradientmap_pars_fragment:Sae,lightmap_pars_fragment:Eae,lights_lambert_fragment:Mae,lights_lambert_pars_fragment:Tae,lights_pars_begin:Iae,lights_toon_fragment:Dae,lights_toon_pars_fragment:Rae,lights_phong_fragment:Pae,lights_phong_pars_fragment:Oae,lights_physical_fragment:Fae,lights_physical_pars_fragment:Nae,lights_fragment_begin:Lae,lights_fragment_maps:kae,lights_fragment_end:Uae,logdepthbuf_fragment:Bae,logdepthbuf_pars_fragment:Vae,logdepthbuf_pars_vertex:zae,logdepthbuf_vertex:Hae,map_fragment:jae,map_pars_fragment:Gae,map_particle_fragment:Wae,map_particle_pars_fragment:$ae,metalnessmap_fragment:qae,metalnessmap_pars_fragment:Xae,morphinstance_vertex:Yae,morphcolor_vertex:Zae,morphnormal_vertex:Kae,morphtarget_pars_vertex:Jae,morphtarget_vertex:Qae,normal_fragment_begin:ele,normal_fragment_maps:tle,normal_pars_fragment:nle,normal_pars_vertex:ile,normal_vertex:rle,normalmap_pars_fragment:ole,clearcoat_normal_fragment_begin:sle,clearcoat_normal_fragment_maps:ale,clearcoat_pars_fragment:lle,iridescence_pars_fragment:cle,opaque_fragment:ule,packing:dle,premultiplied_alpha_fragment:fle,project_vertex:hle,dithering_fragment:ple,dithering_pars_fragment:mle,roughnessmap_fragment:gle,roughnessmap_pars_fragment:vle,shadowmap_pars_fragment:yle,shadowmap_pars_vertex:_le,shadowmap_vertex:xle,shadowmask_pars_fragment:wle,skinbase_vertex:ble,skinning_pars_vertex:Cle,skinning_vertex:Sle,skinnormal_vertex:Ele,specularmap_fragment:Mle,specularmap_pars_fragment:Tle,tonemapping_fragment:Ile,tonemapping_pars_fragment:Ale,transmission_fragment:Dle,transmission_pars_fragment:Rle,uv_pars_fragment:Ple,uv_pars_vertex:Ole,uv_vertex:Fle,worldpos_vertex:Nle,background_vert:Lle,background_frag:kle,backgroundCube_vert:Ule,backgroundCube_frag:Ble,cube_vert:Vle,cube_frag:zle,depth_vert:Hle,depth_frag:jle,distanceRGBA_vert:Gle,distanceRGBA_frag:Wle,equirect_vert:$le,equirect_frag:qle,linedashed_vert:Xle,linedashed_frag:Yle,meshbasic_vert:Zle,meshbasic_frag:Kle,meshlambert_vert:Jle,meshlambert_frag:Qle,meshmatcap_vert:ece,meshmatcap_frag:tce,meshnormal_vert:nce,meshnormal_frag:ice,meshphong_vert:rce,meshphong_frag:oce,meshphysical_vert:sce,meshphysical_frag:ace,meshtoon_vert:lce,meshtoon_frag:cce,points_vert:uce,points_frag:dce,shadow_vert:fce,shadow_frag:hce,sprite_vert:pce,sprite_frag:mce},nt={common:{diffuse:{value:new pt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $t}},envmap:{envMap:{value:null},envMapRotation:{value:new $t},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $t},normalScale:{value:new qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0},uvTransform:{value:new $t}},sprite:{diffuse:{value:new pt(16777215)},opacity:{value:1},center:{value:new qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}}},ul={basic:{uniforms:kr([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.fog]),vertexShader:an.meshbasic_vert,fragmentShader:an.meshbasic_frag},lambert:{uniforms:kr([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new pt(0)}}]),vertexShader:an.meshlambert_vert,fragmentShader:an.meshlambert_frag},phong:{uniforms:kr([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new pt(0)},specular:{value:new pt(1118481)},shininess:{value:30}}]),vertexShader:an.meshphong_vert,fragmentShader:an.meshphong_frag},standard:{uniforms:kr([nt.common,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.roughnessmap,nt.metalnessmap,nt.fog,nt.lights,{emissive:{value:new pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag},toon:{uniforms:kr([nt.common,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.gradientmap,nt.fog,nt.lights,{emissive:{value:new pt(0)}}]),vertexShader:an.meshtoon_vert,fragmentShader:an.meshtoon_frag},matcap:{uniforms:kr([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,{matcap:{value:null}}]),vertexShader:an.meshmatcap_vert,fragmentShader:an.meshmatcap_frag},points:{uniforms:kr([nt.points,nt.fog]),vertexShader:an.points_vert,fragmentShader:an.points_frag},dashed:{uniforms:kr([nt.common,nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:an.linedashed_vert,fragmentShader:an.linedashed_frag},depth:{uniforms:kr([nt.common,nt.displacementmap]),vertexShader:an.depth_vert,fragmentShader:an.depth_frag},normal:{uniforms:kr([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,{opacity:{value:1}}]),vertexShader:an.meshnormal_vert,fragmentShader:an.meshnormal_frag},sprite:{uniforms:kr([nt.sprite,nt.fog]),vertexShader:an.sprite_vert,fragmentShader:an.sprite_frag},background:{uniforms:{uvTransform:{value:new $t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:an.background_vert,fragmentShader:an.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $t}},vertexShader:an.backgroundCube_vert,fragmentShader:an.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:an.cube_vert,fragmentShader:an.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:an.equirect_vert,fragmentShader:an.equirect_frag},distanceRGBA:{uniforms:kr([nt.common,nt.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:an.distanceRGBA_vert,fragmentShader:an.distanceRGBA_frag},shadow:{uniforms:kr([nt.lights,nt.fog,{color:{value:new pt(0)},opacity:{value:1}}]),vertexShader:an.shadow_vert,fragmentShader:an.shadow_frag}};ul.physical={uniforms:kr([ul.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $t},clearcoatNormalScale:{value:new qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $t},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $t},sheen:{value:0},sheenColor:{value:new pt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $t},transmissionSamplerSize:{value:new qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $t},attenuationDistance:{value:0},attenuationColor:{value:new pt(0)},specularColor:{value:new pt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $t},anisotropyVector:{value:new qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $t}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag};var qb={r:0,b:0,g:0},Ud=new hr,gce=new dt;function vce(n,e,t,i,r,o,s){let a=new pt(0),l=o===!0?0:1,u,f,h=null,p=0,g=null;function v(S){let C=S.isScene===!0?S.background:null;return C&&C.isTexture&&(C=(S.backgroundBlurriness>0?t:e).get(C)),C}function x(S){let C=!1,k=v(S);k===null?_(a,l):k&&k.isColor&&(_(k,1),C=!0);let F=n.xr.getEnvironmentBlendMode();F==="additive"?i.buffers.color.setClear(0,0,0,1,s):F==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||C)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(S,C){let k=v(C);k&&(k.isCubeTexture||k.mapping===h0)?(f===void 0&&(f=new xi(new Zh(1,1,1),new Ea({name:"BackgroundCubeMaterial",uniforms:kd(ul.backgroundCube.uniforms),vertexShader:ul.backgroundCube.vertexShader,fragmentShader:ul.backgroundCube.fragmentShader,side:Yr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(F,L,W){this.matrixWorld.copyPosition(W.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Ud.copy(C.backgroundRotation),Ud.x*=-1,Ud.y*=-1,Ud.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(Ud.y*=-1,Ud.z*=-1),f.material.uniforms.envMap.value=k,f.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(gce.makeRotationFromEuler(Ud)),f.material.toneMapped=zt.getTransfer(k.colorSpace)!==qn,(h!==k||p!==k.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,h=k,p=k.version,g=n.toneMapping),f.layers.enableAll(),S.unshift(f,f.geometry,f.material,0,0,null)):k&&k.isTexture&&(u===void 0&&(u=new xi(new n0(2,2),new Ea({name:"BackgroundMaterial",uniforms:kd(ul.background.uniforms),vertexShader:ul.background.vertexShader,fragmentShader:ul.background.fragmentShader,side:Ca,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=k,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,u.material.toneMapped=zt.getTransfer(k.colorSpace)!==qn,k.matrixAutoUpdate===!0&&k.updateMatrix(),u.material.uniforms.uvTransform.value.copy(k.matrix),(h!==k||p!==k.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,h=k,p=k.version,g=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null))}function _(S,C){S.getRGB(qb,iD(n)),i.buffers.color.setClear(qb.r,qb.g,qb.b,C,s)}function E(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(S,C=1){a.set(S),l=C,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,_(a,l)},render:x,addToRenderList:y,dispose:E}}function yce(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null),o=r,s=!1;function a(R,j,me,ue,De){let Ce=!1,Y=h(ue,me,j);o!==Y&&(o=Y,u(o.object)),Ce=g(R,ue,me,De),Ce&&v(R,ue,me,De),De!==null&&e.update(De,n.ELEMENT_ARRAY_BUFFER),(Ce||s)&&(s=!1,C(R,j,me,ue),De!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(De).buffer))}function l(){return n.createVertexArray()}function u(R){return n.bindVertexArray(R)}function f(R){return n.deleteVertexArray(R)}function h(R,j,me){let ue=me.wireframe===!0,De=i[R.id];De===void 0&&(De={},i[R.id]=De);let Ce=De[j.id];Ce===void 0&&(Ce={},De[j.id]=Ce);let Y=Ce[ue];return Y===void 0&&(Y=p(l()),Ce[ue]=Y),Y}function p(R){let j=[],me=[],ue=[];for(let De=0;De<t;De++)j[De]=0,me[De]=0,ue[De]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:me,attributeDivisors:ue,object:R,attributes:{},index:null}}function g(R,j,me,ue){let De=o.attributes,Ce=j.attributes,Y=0,re=me.getAttributes();for(let X in re)if(re[X].location>=0){let ze=De[X],rt=Ce[X];if(rt===void 0&&(X==="instanceMatrix"&&R.instanceMatrix&&(rt=R.instanceMatrix),X==="instanceColor"&&R.instanceColor&&(rt=R.instanceColor)),ze===void 0||ze.attribute!==rt||rt&&ze.data!==rt.data)return!0;Y++}return o.attributesNum!==Y||o.index!==ue}function v(R,j,me,ue){let De={},Ce=j.attributes,Y=0,re=me.getAttributes();for(let X in re)if(re[X].location>=0){let ze=Ce[X];ze===void 0&&(X==="instanceMatrix"&&R.instanceMatrix&&(ze=R.instanceMatrix),X==="instanceColor"&&R.instanceColor&&(ze=R.instanceColor));let rt={};rt.attribute=ze,ze&&ze.data&&(rt.data=ze.data),De[X]=rt,Y++}o.attributes=De,o.attributesNum=Y,o.index=ue}function x(){let R=o.newAttributes;for(let j=0,me=R.length;j<me;j++)R[j]=0}function y(R){_(R,0)}function _(R,j){let me=o.newAttributes,ue=o.enabledAttributes,De=o.attributeDivisors;me[R]=1,ue[R]===0&&(n.enableVertexAttribArray(R),ue[R]=1),De[R]!==j&&(n.vertexAttribDivisor(R,j),De[R]=j)}function E(){let R=o.newAttributes,j=o.enabledAttributes;for(let me=0,ue=j.length;me<ue;me++)j[me]!==R[me]&&(n.disableVertexAttribArray(me),j[me]=0)}function S(R,j,me,ue,De,Ce,Y){Y===!0?n.vertexAttribIPointer(R,j,me,De,Ce):n.vertexAttribPointer(R,j,me,ue,De,Ce)}function C(R,j,me,ue){x();let De=ue.attributes,Ce=me.getAttributes(),Y=j.defaultAttributeValues;for(let re in Ce){let X=Ce[re];if(X.location>=0){let _e=De[re];if(_e===void 0&&(re==="instanceMatrix"&&R.instanceMatrix&&(_e=R.instanceMatrix),re==="instanceColor"&&R.instanceColor&&(_e=R.instanceColor)),_e!==void 0){let ze=_e.normalized,rt=_e.itemSize,ve=e.get(_e);if(ve===void 0)continue;let oe=ve.buffer,B=ve.type,Q=ve.bytesPerElement,xe=B===n.INT||B===n.UNSIGNED_INT||_e.gpuType===pb;if(_e.isInterleavedBufferAttribute){let le=_e.data,je=le.stride,We=_e.offset;if(le.isInstancedInterleavedBuffer){for(let Ue=0;Ue<X.locationSize;Ue++)_(X.location+Ue,le.meshPerAttribute);R.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let Ue=0;Ue<X.locationSize;Ue++)y(X.location+Ue);n.bindBuffer(n.ARRAY_BUFFER,oe);for(let Ue=0;Ue<X.locationSize;Ue++)S(X.location+Ue,rt/X.locationSize,B,ze,je*Q,(We+rt/X.locationSize*Ue)*Q,xe)}else{if(_e.isInstancedBufferAttribute){for(let le=0;le<X.locationSize;le++)_(X.location+le,_e.meshPerAttribute);R.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let le=0;le<X.locationSize;le++)y(X.location+le);n.bindBuffer(n.ARRAY_BUFFER,oe);for(let le=0;le<X.locationSize;le++)S(X.location+le,rt/X.locationSize,B,ze,rt*Q,rt/X.locationSize*le*Q,xe)}}else if(Y!==void 0){let ze=Y[re];if(ze!==void 0)switch(ze.length){case 2:n.vertexAttrib2fv(X.location,ze);break;case 3:n.vertexAttrib3fv(X.location,ze);break;case 4:n.vertexAttrib4fv(X.location,ze);break;default:n.vertexAttrib1fv(X.location,ze)}}}}E()}function k(){W();for(let R in i){let j=i[R];for(let me in j){let ue=j[me];for(let De in ue)f(ue[De].object),delete ue[De];delete j[me]}delete i[R]}}function F(R){if(i[R.id]===void 0)return;let j=i[R.id];for(let me in j){let ue=j[me];for(let De in ue)f(ue[De].object),delete ue[De];delete j[me]}delete i[R.id]}function L(R){for(let j in i){let me=i[j];if(me[R.id]===void 0)continue;let ue=me[R.id];for(let De in ue)f(ue[De].object),delete ue[De];delete me[R.id]}}function W(){O(),s=!0,o!==r&&(o=r,u(o.object))}function O(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:W,resetDefaultState:O,dispose:k,releaseStatesOfGeometry:F,releaseStatesOfProgram:L,initAttributes:x,enableAttribute:y,disableUnusedAttributes:E}}function _ce(n,e,t){let i;function r(u){i=u}function o(u,f){n.drawArrays(i,u,f),t.update(f,i,1)}function s(u,f,h){h!==0&&(n.drawArraysInstanced(i,u,f,h),t.update(f,i,h))}function a(u,f,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,f,0,h);let g=0;for(let v=0;v<h;v++)g+=f[v];t.update(g,i,1)}function l(u,f,h,p){if(h===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<u.length;v++)s(u[v],f[v],p[v]);else{g.multiDrawArraysInstancedWEBGL(i,u,0,f,0,p,0,h);let v=0;for(let x=0;x<h;x++)v+=f[x]*p[x];t.update(v,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function xce(n,e,t,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(L){return!(L!==ns&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(L){let W=L===lp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==Aa&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==Bs&&!W)}function l(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp",f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);let h=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),E=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),k=v>0,F=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:p,maxTextures:g,maxVertexTextures:v,maxTextureSize:x,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:E,maxVaryings:S,maxFragmentUniforms:C,vertexTextures:k,maxSamples:F}}function wce(n){let e=this,t=null,i=0,r=!1,o=!1,s=new Os,a=new $t,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){let g=h.length!==0||p||i!==0||r;return r=p,i=h.length,g},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,p){t=f(h,p,0)},this.setState=function(h,p,g){let v=h.clippingPlanes,x=h.clipIntersection,y=h.clipShadows,_=n.get(h);if(!r||v===null||v.length===0||o&&!y)o?f(null):u();else{let E=o?0:i,S=E*4,C=_.clippingState||null;l.value=C,C=f(v,p,S,g);for(let k=0;k!==S;++k)C[k]=t[k];_.clippingState=C,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=E}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(h,p,g,v){let x=h!==null?h.length:0,y=null;if(x!==0){if(y=l.value,v!==!0||y===null){let _=g+x*4,E=p.matrixWorldInverse;a.getNormalMatrix(E),(y===null||y.length<_)&&(y=new Float32Array(_));for(let S=0,C=g;S!==x;++S,C+=4)s.copy(h[S]).applyMatrix4(E,a),s.normal.toArray(y,C),y[C+3]=s.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,y}}function bce(n){let e=new WeakMap;function t(s,a){return a===op?s.mapping=Fd:a===fb&&(s.mapping=Nd),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===op||a===fb)if(e.has(s)){let l=e.get(s).texture;return t(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new Vw(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",r),t(u.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}var hp=4,xz=[.125,.215,.35,.446,.526,.582],zd=20,lD=new Pd,wz=new pt,cD=null,uD=0,dD=0,fD=!1,Vd=(1+Math.sqrt(5))/2,fp=1/Vd,bz=[new V(-Vd,fp,0),new V(Vd,fp,0),new V(-fp,0,Vd),new V(fp,0,Vd),new V(0,Vd,-fp),new V(0,Vd,fp),new V(-1,1,-1),new V(1,1,-1),new V(-1,1,1),new V(1,1,1)],Cce=new V,Zb=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,o={}){let{size:s=256,position:a=Cce}=o;cD=this._renderer.getRenderTarget(),uD=this._renderer.getActiveCubeFace(),dD=this._renderer.getActiveMipmapLevel(),fD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Ez(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Sz(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cD,uD,dD),this._renderer.xr.enabled=fD,e.scissorTest=!1,Xb(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Fd||e.mapping===Nd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cD=this._renderer.getRenderTarget(),uD=this._renderer.getActiveCubeFace(),dD=this._renderer.getActiveMipmapLevel(),fD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:$r,minFilter:$r,generateMipmaps:!1,type:lp,format:ns,colorSpace:Cr,depthBuffer:!1},r=Cz(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Cz(e,t,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Sce(o)),this._blurMaterial=Ece(o,e,t)}return r}_compileMaterial(e){let t=new xi(this._lodPlanes[0],e);this._renderer.compile(t,lD)}_sceneToCubeUV(e,t,i,r,o){let l=new Ri(90,1,t,i),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,g=h.toneMapping;h.getClearColor(wz),h.toneMapping=lc,h.autoClear=!1;let v=new es({name:"PMREM.Background",side:Yr,depthWrite:!1,depthTest:!1}),x=new xi(new Zh,v),y=!1,_=e.background;_?_.isColor&&(v.color.copy(_),e.background=null,y=!0):(v.color.copy(wz),y=!0);for(let E=0;E<6;E++){let S=E%3;S===0?(l.up.set(0,u[E],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+f[E],o.y,o.z)):S===1?(l.up.set(0,0,u[E]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+f[E],o.z)):(l.up.set(0,u[E],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+f[E]));let C=this._cubeSize;Xb(r,S*C,E>2?C:0,C,C),h.setRenderTarget(r),y&&h.render(x,l),h.render(e,l)}x.geometry.dispose(),x.material.dispose(),h.toneMapping=g,h.autoClear=p,e.background=_}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Fd||e.mapping===Nd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Ez()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Sz());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new xi(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let l=this._cubeSize;Xb(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,lD)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=bz[(r-o-1)%bz.length];this._blur(e,o-1,o,s,a)}t.autoClear=i}_blur(e,t,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){let l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,h=new xi(this._lodPlanes[r],u),p=u.uniforms,g=this._sizeLods[i]-1,v=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*zd-1),x=o/v,y=isFinite(o)?1+Math.floor(f*x):zd;y>zd&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${zd}`);let _=[],E=0;for(let L=0;L<zd;++L){let W=L/x,O=Math.exp(-W*W/2);_.push(O),L===0?E+=O:L<y&&(E+=2*O)}for(let L=0;L<_.length;L++)_[L]=_[L]/E;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=_,p.latitudinal.value=s==="latitudinal",a&&(p.poleAxis.value=a);let{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-i;let C=this._sizeLods[r],k=3*C*(r>S-hp?r-S+hp:0),F=4*(this._cubeSize-C);Xb(t,k,F,3*C,2*C),l.setRenderTarget(t),l.render(h,lD)}};function Sce(n){let e=[],t=[],i=[],r=n,o=n-hp+1+xz.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);t.push(a);let l=1/a;s>n-hp?l=xz[s-n+hp-1]:s===0&&(l=0),i.push(l);let u=1/(a-2),f=-u,h=1+u,p=[f,f,h,f,h,h,f,f,h,h,f,h],g=6,v=6,x=3,y=2,_=1,E=new Float32Array(x*v*g),S=new Float32Array(y*v*g),C=new Float32Array(_*v*g);for(let F=0;F<g;F++){let L=F%3*2/3-1,W=F>2?0:-1,O=[L,W,0,L+2/3,W,0,L+2/3,W+1,0,L,W,0,L+2/3,W+1,0,L,W+1,0];E.set(O,x*v*F),S.set(p,y*v*F);let R=[F,F,F,F,F,F];C.set(R,_*v*F)}let k=new Hi;k.setAttribute("position",new $i(E,x)),k.setAttribute("uv",new $i(S,y)),k.setAttribute("faceIndex",new $i(C,_)),e.push(k),r>hp&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Cz(n,e,t){let i=new ol(n,e,t);return i.texture.mapping=h0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Xb(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Ece(n,e,t){let i=new Float32Array(zd),r=new V(0,1,0);return new Ea({name:"SphericalGaussianBlur",defines:{n:zd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:bD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ac,depthTest:!1,depthWrite:!1})}function Sz(){return new Ea({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:bD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ac,depthTest:!1,depthWrite:!1})}function Ez(){return new Ea({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:bD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ac,depthTest:!1,depthWrite:!1})}function bD(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Mce(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let l=a.mapping,u=l===op||l===fb,f=l===Fd||l===Nd;if(u||f){let h=e.get(a),p=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new Zb(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{let g=a.image;return u&&g&&g.height>0||f&&g&&r(g)?(t===null&&(t=new Zb(n)),h=u?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let l=0,u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function o(a){let l=a.target;l.removeEventListener("dispose",o);let u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function Tce(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&w0("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Ice(n,e,t,i){let r={},o=new WeakMap;function s(h){let p=h.target;p.index!==null&&e.remove(p.index);for(let v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",s),delete r[p.id];let g=o.get(p);g&&(e.remove(g),o.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",s),r[p.id]=!0,t.memory.geometries++),p}function l(h){let p=h.attributes;for(let g in p)e.update(p[g],n.ARRAY_BUFFER)}function u(h){let p=[],g=h.index,v=h.attributes.position,x=0;if(g!==null){let E=g.array;x=g.version;for(let S=0,C=E.length;S<C;S+=3){let k=E[S+0],F=E[S+1],L=E[S+2];p.push(k,F,F,L,L,k)}}else if(v!==void 0){let E=v.array;x=v.version;for(let S=0,C=E.length/3-1;S<C;S+=3){let k=S+0,F=S+1,L=S+2;p.push(k,F,F,L,L,k)}}else return;let y=new(nD(p)?Vg:Sd)(p,1);y.version=x;let _=o.get(h);_&&e.remove(_),o.set(h,y)}function f(h){let p=o.get(h);if(p){let g=h.index;g!==null&&p.version<g.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:f}}function Ace(n,e,t){let i;function r(p){i=p}let o,s;function a(p){o=p.type,s=p.bytesPerElement}function l(p,g){n.drawElements(i,g,o,p*s),t.update(g,i,1)}function u(p,g,v){v!==0&&(n.drawElementsInstanced(i,g,o,p*s,v),t.update(g,i,v))}function f(p,g,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,o,p,0,v);let y=0;for(let _=0;_<v;_++)y+=g[_];t.update(y,i,1)}function h(p,g,v,x){if(v===0)return;let y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<p.length;_++)u(p[_]/s,g[_],x[_]);else{y.multiDrawElementsInstancedWEBGL(i,g,0,o,p,0,x,0,v);let _=0;for(let E=0;E<v;E++)_+=g[E]*x[E];t.update(_,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function Dce(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Rce(n,e,t){let i=new WeakMap,r=new sn;function o(s,a,l){let u=s.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0,p=i.get(a);if(p===void 0||p.count!==h){let R=function(){W.dispose(),i.delete(a),a.removeEventListener("dispose",R)};var g=R;p!==void 0&&p.texture.dispose();let v=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],E=a.morphAttributes.normal||[],S=a.morphAttributes.color||[],C=0;v===!0&&(C=1),x===!0&&(C=2),y===!0&&(C=3);let k=a.attributes.position.count*C,F=1;k>e.maxTextureSize&&(F=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);let L=new Float32Array(k*F*4*h),W=new Bg(L,k,F,h);W.type=Bs,W.needsUpdate=!0;let O=C*4;for(let j=0;j<h;j++){let me=_[j],ue=E[j],De=S[j],Ce=k*F*4*j;for(let Y=0;Y<me.count;Y++){let re=Y*O;v===!0&&(r.fromBufferAttribute(me,Y),L[Ce+re+0]=r.x,L[Ce+re+1]=r.y,L[Ce+re+2]=r.z,L[Ce+re+3]=0),x===!0&&(r.fromBufferAttribute(ue,Y),L[Ce+re+4]=r.x,L[Ce+re+5]=r.y,L[Ce+re+6]=r.z,L[Ce+re+7]=0),y===!0&&(r.fromBufferAttribute(De,Y),L[Ce+re+8]=r.x,L[Ce+re+9]=r.y,L[Ce+re+10]=r.z,L[Ce+re+11]=De.itemSize===4?r.w:1)}}p={count:h,texture:W,size:new qe(k,F)},i.set(a,p),a.addEventListener("dispose",R)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let v=0;for(let y=0;y<u.length;y++)v+=u[y];let x=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:o}}function Pce(n,e,t,i){let r=new WeakMap;function o(l){let u=i.render.frame,f=l.geometry,h=e.get(l,f);if(r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){let p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return h}function s(){r=new WeakMap}function a(l){let u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:o,dispose:s}}var Gz=new Zr,Mz=new qg(1,1),Wz=new Bg,$z=new Uw,qz=new Hg,Tz=[],Iz=[],Az=new Float32Array(16),Dz=new Float32Array(9),Rz=new Float32Array(4);function mp(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,o=Tz[r];if(o===void 0&&(o=new Float32Array(r),Tz[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function nr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ir(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Jb(n,e){let t=Iz[e];t===void 0&&(t=new Int32Array(e),Iz[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Oce(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Fce(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(nr(t,e))return;n.uniform2fv(this.addr,e),ir(t,e)}}function Nce(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(nr(t,e))return;n.uniform3fv(this.addr,e),ir(t,e)}}function Lce(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(nr(t,e))return;n.uniform4fv(this.addr,e),ir(t,e)}}function kce(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(nr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ir(t,e)}else{if(nr(t,i))return;Rz.set(i),n.uniformMatrix2fv(this.addr,!1,Rz),ir(t,i)}}function Uce(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(nr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ir(t,e)}else{if(nr(t,i))return;Dz.set(i),n.uniformMatrix3fv(this.addr,!1,Dz),ir(t,i)}}function Bce(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(nr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ir(t,e)}else{if(nr(t,i))return;Az.set(i),n.uniformMatrix4fv(this.addr,!1,Az),ir(t,i)}}function Vce(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function zce(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(nr(t,e))return;n.uniform2iv(this.addr,e),ir(t,e)}}function Hce(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(nr(t,e))return;n.uniform3iv(this.addr,e),ir(t,e)}}function jce(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(nr(t,e))return;n.uniform4iv(this.addr,e),ir(t,e)}}function Gce(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Wce(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(nr(t,e))return;n.uniform2uiv(this.addr,e),ir(t,e)}}function $ce(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(nr(t,e))return;n.uniform3uiv(this.addr,e),ir(t,e)}}function qce(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(nr(t,e))return;n.uniform4uiv(this.addr,e),ir(t,e)}}function Xce(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(Mz.compareFunction=QA,o=Mz):o=Gz,t.setTexture2D(e||o,r)}function Yce(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||$z,r)}function Zce(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||qz,r)}function Kce(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Wz,r)}function Jce(n){switch(n){case 5126:return Oce;case 35664:return Fce;case 35665:return Nce;case 35666:return Lce;case 35674:return kce;case 35675:return Uce;case 35676:return Bce;case 5124:case 35670:return Vce;case 35667:case 35671:return zce;case 35668:case 35672:return Hce;case 35669:case 35673:return jce;case 5125:return Gce;case 36294:return Wce;case 36295:return $ce;case 36296:return qce;case 35678:case 36198:case 36298:case 36306:case 35682:return Xce;case 35679:case 36299:case 36307:return Yce;case 35680:case 36300:case 36308:case 36293:return Zce;case 36289:case 36303:case 36311:case 36292:return Kce}}function Qce(n,e){n.uniform1fv(this.addr,e)}function eue(n,e){let t=mp(e,this.size,2);n.uniform2fv(this.addr,t)}function tue(n,e){let t=mp(e,this.size,3);n.uniform3fv(this.addr,t)}function nue(n,e){let t=mp(e,this.size,4);n.uniform4fv(this.addr,t)}function iue(n,e){let t=mp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function rue(n,e){let t=mp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function oue(n,e){let t=mp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function sue(n,e){n.uniform1iv(this.addr,e)}function aue(n,e){n.uniform2iv(this.addr,e)}function lue(n,e){n.uniform3iv(this.addr,e)}function cue(n,e){n.uniform4iv(this.addr,e)}function uue(n,e){n.uniform1uiv(this.addr,e)}function due(n,e){n.uniform2uiv(this.addr,e)}function fue(n,e){n.uniform3uiv(this.addr,e)}function hue(n,e){n.uniform4uiv(this.addr,e)}function pue(n,e,t){let i=this.cache,r=e.length,o=Jb(t,r);nr(i,o)||(n.uniform1iv(this.addr,o),ir(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||Gz,o[s])}function mue(n,e,t){let i=this.cache,r=e.length,o=Jb(t,r);nr(i,o)||(n.uniform1iv(this.addr,o),ir(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||$z,o[s])}function gue(n,e,t){let i=this.cache,r=e.length,o=Jb(t,r);nr(i,o)||(n.uniform1iv(this.addr,o),ir(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||qz,o[s])}function vue(n,e,t){let i=this.cache,r=e.length,o=Jb(t,r);nr(i,o)||(n.uniform1iv(this.addr,o),ir(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||Wz,o[s])}function yue(n){switch(n){case 5126:return Qce;case 35664:return eue;case 35665:return tue;case 35666:return nue;case 35674:return iue;case 35675:return rue;case 35676:return oue;case 5124:case 35670:return sue;case 35667:case 35671:return aue;case 35668:case 35672:return lue;case 35669:case 35673:return cue;case 5125:return uue;case 36294:return due;case 36295:return fue;case 36296:return hue;case 35678:case 36198:case 36298:case 36306:case 35682:return pue;case 35679:case 36299:case 36307:return mue;case 35680:case 36300:case 36308:case 36293:return gue;case 36289:case 36303:case 36311:case 36292:return vue}}var pD=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Jce(t.type)}},mD=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=yue(t.type)}},gD=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,t[a.id],i)}}},hD=/(\w+)(\])?(\[|\.)?/g;function Pz(n,e){n.seq.push(e),n.map[e.id]=e}function _ue(n,e,t){let i=n.name,r=i.length;for(hD.lastIndex=0;;){let o=hD.exec(i),s=hD.lastIndex,a=o[1],l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===r){Pz(t,u===void 0?new pD(a,n,e):new mD(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new gD(a),Pz(t,h)),t=h}}}var pp=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=e.getActiveUniform(t,r),s=e.getUniformLocation(t,o.name);_ue(o,s,this)}}setValue(e,t,i,r){let o=this.map[t];o!==void 0&&o.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){let a=t[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function Oz(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var xue=37297,wue=0;function bue(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join(`
`)}var Fz=new $t;function Cue(n){zt._getMatrix(Fz,zt.workingColorSpace,n);let e=`mat3( ${Fz.elements.map(t=>t.toFixed(4))} )`;switch(zt.getTransfer(n)){case kg:return[e,"LinearTransferOETF"];case qn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Nz(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+bue(n.getShaderSource(e),s)}else return r}function Sue(n,e){let t=Cue(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Eue(n,e){let t;switch(e){case jV:t="Linear";break;case GV:t="Reinhard";break;case WV:t="Cineon";break;case $V:t="ACESFilmic";break;case XV:t="AgX";break;case YV:t="Neutral";break;case qV:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var Yb=new V;function Mue(){zt.getLuminanceCoefficients(Yb);let n=Yb.x.toFixed(4),e=Yb.y.toFixed(4),t=Yb.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Tue(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(b0).join(`
`)}function Iue(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Aue(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function b0(n){return n!==""}function Lz(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kz(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Due=/^[ \t]*#include +<([\w\d./]+)>/gm;function vD(n){return n.replace(Due,Pue)}var Rue=new Map;function Pue(n,e){let t=an[e];if(t===void 0){let i=Rue.get(e);if(i!==void 0)t=an[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return vD(t)}var Oue=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Uz(n){return n.replace(Oue,Fue)}function Fue(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Bz(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Nue(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===zA?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===bV?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===cl&&(e="SHADOWMAP_TYPE_VSM"),e}function Lue(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Fd:case Nd:e="ENVMAP_TYPE_CUBE";break;case h0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function kue(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Nd:e="ENVMAP_MODE_REFRACTION";break}return e}function Uue(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case f0:e="ENVMAP_BLENDING_MULTIPLY";break;case zV:e="ENVMAP_BLENDING_MIX";break;case HV:e="ENVMAP_BLENDING_ADD";break}return e}function Bue(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Vue(n,e,t,i){let r=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,l=Nue(t),u=Lue(t),f=kue(t),h=Uue(t),p=Bue(t),g=Tue(t),v=Iue(o),x=r.createProgram(),y,_,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(b0).join(`
`),y.length>0&&(y+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(b0).join(`
`),_.length>0&&(_+=`
`)):(y=[Bz(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(b0).join(`
`),_=[Bz(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==lc?"#define TONE_MAPPING":"",t.toneMapping!==lc?an.tonemapping_pars_fragment:"",t.toneMapping!==lc?Eue("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",an.colorspace_pars_fragment,Sue("linearToOutputTexel",t.outputColorSpace),Mue(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(b0).join(`
`)),s=vD(s),s=Lz(s,t),s=kz(s,t),a=vD(a),a=Lz(a,t),a=kz(a,t),s=Uz(s),a=Uz(a),t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,y=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===eD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===eD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);let S=E+y+s,C=E+_+a,k=Oz(r,r.VERTEX_SHADER,S),F=Oz(r,r.FRAGMENT_SHADER,C);r.attachShader(x,k),r.attachShader(x,F),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function L(j){if(n.debug.checkShaderErrors){let me=r.getProgramInfoLog(x).trim(),ue=r.getShaderInfoLog(k).trim(),De=r.getShaderInfoLog(F).trim(),Ce=!0,Y=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(Ce=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,k,F);else{let re=Nz(r,k,"vertex"),X=Nz(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+me+`
`+re+`
`+X)}else me!==""?console.warn("THREE.WebGLProgram: Program Info Log:",me):(ue===""||De==="")&&(Y=!1);Y&&(j.diagnostics={runnable:Ce,programLog:me,vertexShader:{log:ue,prefix:y},fragmentShader:{log:De,prefix:_}})}r.deleteShader(k),r.deleteShader(F),W=new pp(r,x),O=Aue(r,x)}let W;this.getUniforms=function(){return W===void 0&&L(this),W};let O;this.getAttributes=function(){return O===void 0&&L(this),O};let R=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=r.getProgramParameter(x,xue)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=wue++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=k,this.fragmentShader=F,this}var zue=0,yD=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new _D(e),t.set(e,i)),i}},_D=class{constructor(e){this.id=zue++,this.code=e,this.usedTimes=0}};function Hue(n,e,t,i,r,o,s){let a=new Yh,l=new yD,u=new Set,f=[],h=r.logarithmicDepthBuffer,p=r.vertexTextures,g=r.precision,v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(O){return u.add(O),O===0?"uv":`uv${O}`}function y(O,R,j,me,ue){let De=me.fog,Ce=ue.geometry,Y=O.isMeshStandardMaterial?me.environment:null,re=(O.isMeshStandardMaterial?t:e).get(O.envMap||Y),X=re&&re.mapping===h0?re.image.height:null,_e=v[O.type];O.precision!==null&&(g=r.getMaxPrecision(O.precision),g!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",g,"instead."));let ze=Ce.morphAttributes.position||Ce.morphAttributes.normal||Ce.morphAttributes.color,rt=ze!==void 0?ze.length:0,ve=0;Ce.morphAttributes.position!==void 0&&(ve=1),Ce.morphAttributes.normal!==void 0&&(ve=2),Ce.morphAttributes.color!==void 0&&(ve=3);let oe,B,Q,xe;if(_e){let Sn=ul[_e];oe=Sn.vertexShader,B=Sn.fragmentShader}else oe=O.vertexShader,B=O.fragmentShader,l.update(O),Q=l.getVertexShaderID(O),xe=l.getFragmentShaderID(O);let le=n.getRenderTarget(),je=n.state.buffers.depth.getReversed(),We=ue.isInstancedMesh===!0,Ue=ue.isBatchedMesh===!0,at=!!O.map,gt=!!O.matcap,ft=!!re,H=!!O.aoMap,Yt=!!O.lightMap,$e=!!O.bumpMap,Rt=!!O.normalMap,Ke=!!O.displacementMap,Ht=!!O.emissiveMap,mt=!!O.metalnessMap,N=!!O.roughnessMap,M=O.anisotropy>0,se=O.clearcoat>0,be=O.dispersion>0,Re=O.iridescence>0,pe=O.sheen>0,Ye=O.transmission>0,Ze=M&&!!O.anisotropyMap,xt=se&&!!O.clearcoatMap,bt=se&&!!O.clearcoatNormalMap,Ne=se&&!!O.clearcoatRoughnessMap,ot=Re&&!!O.iridescenceMap,Ct=Re&&!!O.iridescenceThicknessMap,Mt=pe&&!!O.sheenColorMap,st=pe&&!!O.sheenRoughnessMap,ln=!!O.specularMap,jt=!!O.specularColorMap,Bn=!!O.specularIntensityMap,Z=Ye&&!!O.transmissionMap,Qe=Ye&&!!O.thicknessMap,ge=!!O.gradientMap,Te=!!O.alphaMap,it=O.alphaTest>0,Je=!!O.alphaHash,Lt=!!O.extensions,Kn=lc;O.toneMapped&&(le===null||le.isXRRenderTarget===!0)&&(Kn=n.toneMapping);let Oi={shaderID:_e,shaderType:O.type,shaderName:O.name,vertexShader:oe,fragmentShader:B,defines:O.defines,customVertexShaderID:Q,customFragmentShaderID:xe,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:g,batching:Ue,batchingColor:Ue&&ue._colorsTexture!==null,instancing:We,instancingColor:We&&ue.instanceColor!==null,instancingMorph:We&&ue.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:le===null?n.outputColorSpace:le.isXRRenderTarget===!0?le.texture.colorSpace:Cr,alphaToCoverage:!!O.alphaToCoverage,map:at,matcap:gt,envMap:ft,envMapMode:ft&&re.mapping,envMapCubeUVHeight:X,aoMap:H,lightMap:Yt,bumpMap:$e,normalMap:Rt,displacementMap:p&&Ke,emissiveMap:Ht,normalMapObjectSpace:Rt&&O.normalMapType===ez,normalMapTangentSpace:Rt&&O.normalMapType===x0,metalnessMap:mt,roughnessMap:N,anisotropy:M,anisotropyMap:Ze,clearcoat:se,clearcoatMap:xt,clearcoatNormalMap:bt,clearcoatRoughnessMap:Ne,dispersion:be,iridescence:Re,iridescenceMap:ot,iridescenceThicknessMap:Ct,sheen:pe,sheenColorMap:Mt,sheenRoughnessMap:st,specularMap:ln,specularColorMap:jt,specularIntensityMap:Bn,transmission:Ye,transmissionMap:Z,thicknessMap:Qe,gradientMap:ge,opaque:O.transparent===!1&&O.blending===_d&&O.alphaToCoverage===!1,alphaMap:Te,alphaTest:it,alphaHash:Je,combine:O.combine,mapUv:at&&x(O.map.channel),aoMapUv:H&&x(O.aoMap.channel),lightMapUv:Yt&&x(O.lightMap.channel),bumpMapUv:$e&&x(O.bumpMap.channel),normalMapUv:Rt&&x(O.normalMap.channel),displacementMapUv:Ke&&x(O.displacementMap.channel),emissiveMapUv:Ht&&x(O.emissiveMap.channel),metalnessMapUv:mt&&x(O.metalnessMap.channel),roughnessMapUv:N&&x(O.roughnessMap.channel),anisotropyMapUv:Ze&&x(O.anisotropyMap.channel),clearcoatMapUv:xt&&x(O.clearcoatMap.channel),clearcoatNormalMapUv:bt&&x(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ne&&x(O.clearcoatRoughnessMap.channel),iridescenceMapUv:ot&&x(O.iridescenceMap.channel),iridescenceThicknessMapUv:Ct&&x(O.iridescenceThicknessMap.channel),sheenColorMapUv:Mt&&x(O.sheenColorMap.channel),sheenRoughnessMapUv:st&&x(O.sheenRoughnessMap.channel),specularMapUv:ln&&x(O.specularMap.channel),specularColorMapUv:jt&&x(O.specularColorMap.channel),specularIntensityMapUv:Bn&&x(O.specularIntensityMap.channel),transmissionMapUv:Z&&x(O.transmissionMap.channel),thicknessMapUv:Qe&&x(O.thicknessMap.channel),alphaMapUv:Te&&x(O.alphaMap.channel),vertexTangents:!!Ce.attributes.tangent&&(Rt||M),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!Ce.attributes.color&&Ce.attributes.color.itemSize===4,pointsUvs:ue.isPoints===!0&&!!Ce.attributes.uv&&(at||Te),fog:!!De,useFog:O.fog===!0,fogExp2:!!De&&De.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:je,skinning:ue.isSkinnedMesh===!0,morphTargets:Ce.morphAttributes.position!==void 0,morphNormals:Ce.morphAttributes.normal!==void 0,morphColors:Ce.morphAttributes.color!==void 0,morphTargetsCount:rt,morphTextureStride:ve,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&j.length>0,shadowMapType:n.shadowMap.type,toneMapping:Kn,decodeVideoTexture:at&&O.map.isVideoTexture===!0&&zt.getTransfer(O.map.colorSpace)===qn,decodeVideoTextureEmissive:Ht&&O.emissiveMap.isVideoTexture===!0&&zt.getTransfer(O.emissiveMap.colorSpace)===qn,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===Us,flipSided:O.side===Yr,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Lt&&O.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Lt&&O.extensions.multiDraw===!0||Ue)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return Oi.vertexUv1s=u.has(1),Oi.vertexUv2s=u.has(2),Oi.vertexUv3s=u.has(3),u.clear(),Oi}function _(O){let R=[];if(O.shaderID?R.push(O.shaderID):(R.push(O.customVertexShaderID),R.push(O.customFragmentShaderID)),O.defines!==void 0)for(let j in O.defines)R.push(j),R.push(O.defines[j]);return O.isRawShaderMaterial===!1&&(E(R,O),S(R,O),R.push(n.outputColorSpace)),R.push(O.customProgramCacheKey),R.join()}function E(O,R){O.push(R.precision),O.push(R.outputColorSpace),O.push(R.envMapMode),O.push(R.envMapCubeUVHeight),O.push(R.mapUv),O.push(R.alphaMapUv),O.push(R.lightMapUv),O.push(R.aoMapUv),O.push(R.bumpMapUv),O.push(R.normalMapUv),O.push(R.displacementMapUv),O.push(R.emissiveMapUv),O.push(R.metalnessMapUv),O.push(R.roughnessMapUv),O.push(R.anisotropyMapUv),O.push(R.clearcoatMapUv),O.push(R.clearcoatNormalMapUv),O.push(R.clearcoatRoughnessMapUv),O.push(R.iridescenceMapUv),O.push(R.iridescenceThicknessMapUv),O.push(R.sheenColorMapUv),O.push(R.sheenRoughnessMapUv),O.push(R.specularMapUv),O.push(R.specularColorMapUv),O.push(R.specularIntensityMapUv),O.push(R.transmissionMapUv),O.push(R.thicknessMapUv),O.push(R.combine),O.push(R.fogExp2),O.push(R.sizeAttenuation),O.push(R.morphTargetsCount),O.push(R.morphAttributeCount),O.push(R.numDirLights),O.push(R.numPointLights),O.push(R.numSpotLights),O.push(R.numSpotLightMaps),O.push(R.numHemiLights),O.push(R.numRectAreaLights),O.push(R.numDirLightShadows),O.push(R.numPointLightShadows),O.push(R.numSpotLightShadows),O.push(R.numSpotLightShadowsWithMaps),O.push(R.numLightProbes),O.push(R.shadowMapType),O.push(R.toneMapping),O.push(R.numClippingPlanes),O.push(R.numClipIntersection),O.push(R.depthPacking)}function S(O,R){a.disableAll(),R.supportsVertexTextures&&a.enable(0),R.instancing&&a.enable(1),R.instancingColor&&a.enable(2),R.instancingMorph&&a.enable(3),R.matcap&&a.enable(4),R.envMap&&a.enable(5),R.normalMapObjectSpace&&a.enable(6),R.normalMapTangentSpace&&a.enable(7),R.clearcoat&&a.enable(8),R.iridescence&&a.enable(9),R.alphaTest&&a.enable(10),R.vertexColors&&a.enable(11),R.vertexAlphas&&a.enable(12),R.vertexUv1s&&a.enable(13),R.vertexUv2s&&a.enable(14),R.vertexUv3s&&a.enable(15),R.vertexTangents&&a.enable(16),R.anisotropy&&a.enable(17),R.alphaHash&&a.enable(18),R.batching&&a.enable(19),R.dispersion&&a.enable(20),R.batchingColor&&a.enable(21),O.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.reverseDepthBuffer&&a.enable(4),R.skinning&&a.enable(5),R.morphTargets&&a.enable(6),R.morphNormals&&a.enable(7),R.morphColors&&a.enable(8),R.premultipliedAlpha&&a.enable(9),R.shadowMapEnabled&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),R.decodeVideoTextureEmissive&&a.enable(20),R.alphaToCoverage&&a.enable(21),O.push(a.mask)}function C(O){let R=v[O.type],j;if(R){let me=ul[R];j=hz.clone(me.uniforms)}else j=O.uniforms;return j}function k(O,R){let j;for(let me=0,ue=f.length;me<ue;me++){let De=f[me];if(De.cacheKey===R){j=De,++j.usedTimes;break}}return j===void 0&&(j=new Vue(n,R,O,o),f.push(j)),j}function F(O){if(--O.usedTimes===0){let R=f.indexOf(O);f[R]=f[f.length-1],f.pop(),O.destroy()}}function L(O){l.remove(O)}function W(){l.dispose()}return{getParameters:y,getProgramCacheKey:_,getUniforms:C,acquireProgram:k,releaseProgram:F,releaseShaderCache:L,programs:f,dispose:W}}function jue(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,l){n.get(s)[a]=l}function o(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:o}}function Gue(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Vz(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function zz(){let n=[],e=0,t=[],i=[],r=[];function o(){e=0,t.length=0,i.length=0,r.length=0}function s(h,p,g,v,x,y){let _=n[e];return _===void 0?(_={id:h.id,object:h,geometry:p,material:g,groupOrder:v,renderOrder:h.renderOrder,z:x,group:y},n[e]=_):(_.id=h.id,_.object=h,_.geometry=p,_.material=g,_.groupOrder=v,_.renderOrder=h.renderOrder,_.z=x,_.group=y),e++,_}function a(h,p,g,v,x,y){let _=s(h,p,g,v,x,y);g.transmission>0?i.push(_):g.transparent===!0?r.push(_):t.push(_)}function l(h,p,g,v,x,y){let _=s(h,p,g,v,x,y);g.transmission>0?i.unshift(_):g.transparent===!0?r.unshift(_):t.unshift(_)}function u(h,p){t.length>1&&t.sort(h||Gue),i.length>1&&i.sort(p||Vz),r.length>1&&r.sort(p||Vz)}function f(){for(let h=e,p=n.length;h<p;h++){let g=n[h];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:f,sort:u}}function Wue(){let n=new WeakMap;function e(i,r){let o=n.get(i),s;return o===void 0?(s=new zz,n.set(i,[s])):r>=o.length?(s=new zz,o.push(s)):s=o[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function $ue(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new V,color:new pt};break;case"SpotLight":t={position:new V,direction:new V,color:new pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new V,color:new pt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new V,skyColor:new pt,groundColor:new pt};break;case"RectAreaLight":t={color:new pt,position:new V,halfWidth:new V,halfHeight:new V};break}return n[e.id]=t,t}}}function que(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var Xue=0;function Yue(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Zue(n){let e=new $ue,t=que(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new V);let r=new V,o=new dt,s=new dt;function a(u){let f=0,h=0,p=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let g=0,v=0,x=0,y=0,_=0,E=0,S=0,C=0,k=0,F=0,L=0;u.sort(Yue);for(let O=0,R=u.length;O<R;O++){let j=u[O],me=j.color,ue=j.intensity,De=j.distance,Ce=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)f+=me.r*ue,h+=me.g*ue,p+=me.b*ue;else if(j.isLightProbe){for(let Y=0;Y<9;Y++)i.probe[Y].addScaledVector(j.sh.coefficients[Y],ue);L++}else if(j.isDirectionalLight){let Y=e.get(j);if(Y.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){let re=j.shadow,X=t.get(j);X.shadowIntensity=re.intensity,X.shadowBias=re.bias,X.shadowNormalBias=re.normalBias,X.shadowRadius=re.radius,X.shadowMapSize=re.mapSize,i.directionalShadow[g]=X,i.directionalShadowMap[g]=Ce,i.directionalShadowMatrix[g]=j.shadow.matrix,E++}i.directional[g]=Y,g++}else if(j.isSpotLight){let Y=e.get(j);Y.position.setFromMatrixPosition(j.matrixWorld),Y.color.copy(me).multiplyScalar(ue),Y.distance=De,Y.coneCos=Math.cos(j.angle),Y.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),Y.decay=j.decay,i.spot[x]=Y;let re=j.shadow;if(j.map&&(i.spotLightMap[k]=j.map,k++,re.updateMatrices(j),j.castShadow&&F++),i.spotLightMatrix[x]=re.matrix,j.castShadow){let X=t.get(j);X.shadowIntensity=re.intensity,X.shadowBias=re.bias,X.shadowNormalBias=re.normalBias,X.shadowRadius=re.radius,X.shadowMapSize=re.mapSize,i.spotShadow[x]=X,i.spotShadowMap[x]=Ce,C++}x++}else if(j.isRectAreaLight){let Y=e.get(j);Y.color.copy(me).multiplyScalar(ue),Y.halfWidth.set(j.width*.5,0,0),Y.halfHeight.set(0,j.height*.5,0),i.rectArea[y]=Y,y++}else if(j.isPointLight){let Y=e.get(j);if(Y.color.copy(j.color).multiplyScalar(j.intensity),Y.distance=j.distance,Y.decay=j.decay,j.castShadow){let re=j.shadow,X=t.get(j);X.shadowIntensity=re.intensity,X.shadowBias=re.bias,X.shadowNormalBias=re.normalBias,X.shadowRadius=re.radius,X.shadowMapSize=re.mapSize,X.shadowCameraNear=re.camera.near,X.shadowCameraFar=re.camera.far,i.pointShadow[v]=X,i.pointShadowMap[v]=Ce,i.pointShadowMatrix[v]=j.shadow.matrix,S++}i.point[v]=Y,v++}else if(j.isHemisphereLight){let Y=e.get(j);Y.skyColor.copy(j.color).multiplyScalar(ue),Y.groundColor.copy(j.groundColor).multiplyScalar(ue),i.hemi[_]=Y,_++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=nt.LTC_FLOAT_1,i.rectAreaLTC2=nt.LTC_FLOAT_2):(i.rectAreaLTC1=nt.LTC_HALF_1,i.rectAreaLTC2=nt.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;let W=i.hash;(W.directionalLength!==g||W.pointLength!==v||W.spotLength!==x||W.rectAreaLength!==y||W.hemiLength!==_||W.numDirectionalShadows!==E||W.numPointShadows!==S||W.numSpotShadows!==C||W.numSpotMaps!==k||W.numLightProbes!==L)&&(i.directional.length=g,i.spot.length=x,i.rectArea.length=y,i.point.length=v,i.hemi.length=_,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=S,i.pointShadowMap.length=S,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=S,i.spotLightMatrix.length=C+k-F,i.spotLightMap.length=k,i.numSpotLightShadowsWithMaps=F,i.numLightProbes=L,W.directionalLength=g,W.pointLength=v,W.spotLength=x,W.rectAreaLength=y,W.hemiLength=_,W.numDirectionalShadows=E,W.numPointShadows=S,W.numSpotShadows=C,W.numSpotMaps=k,W.numLightProbes=L,i.version=Xue++)}function l(u,f){let h=0,p=0,g=0,v=0,x=0,y=f.matrixWorldInverse;for(let _=0,E=u.length;_<E;_++){let S=u[_];if(S.isDirectionalLight){let C=i.directional[h];C.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(y),h++}else if(S.isSpotLight){let C=i.spot[g];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(y),C.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(y),g++}else if(S.isRectAreaLight){let C=i.rectArea[v];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(y),s.identity(),o.copy(S.matrixWorld),o.premultiply(y),s.extractRotation(o),C.halfWidth.set(S.width*.5,0,0),C.halfHeight.set(0,S.height*.5,0),C.halfWidth.applyMatrix4(s),C.halfHeight.applyMatrix4(s),v++}else if(S.isPointLight){let C=i.point[p];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(y),p++}else if(S.isHemisphereLight){let C=i.hemi[x];C.direction.setFromMatrixPosition(S.matrixWorld),C.direction.transformDirection(y),x++}}}return{setup:a,setupView:l,state:i}}function Hz(n){let e=new Zue(n),t=[],i=[];function r(f){u.camera=f,t.length=0,i.length=0}function o(f){t.push(f)}function s(f){i.push(f)}function a(){e.setup(t)}function l(f){e.setupView(t,f)}let u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function Kue(n){let e=new WeakMap;function t(r,o=0){let s=e.get(r),a;return s===void 0?(a=new Hz(n),e.set(r,[a])):o>=s.length?(a=new Hz(n),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var Jue=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Que=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ede(n,e,t){let i=new ep,r=new qe,o=new qe,s=new sn,a=new Yw({depthPacking:QV}),l=new Zw,u={},f=t.maxTextureSize,h={[Ca]:Yr,[Yr]:Ca,[Us]:Us},p=new Ea({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qe},radius:{value:4}},vertexShader:Jue,fragmentShader:Que}),g=p.clone();g.defines.HORIZONTAL_PASS=1;let v=new Hi;v.setAttribute("position",new $i(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let x=new xi(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zA;let _=this.type;this.render=function(F,L,W){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||F.length===0)return;let O=n.getRenderTarget(),R=n.getActiveCubeFace(),j=n.getActiveMipmapLevel(),me=n.state;me.setBlending(ac),me.buffers.color.setClear(1,1,1,1),me.buffers.depth.setTest(!0),me.setScissorTest(!1);let ue=_!==cl&&this.type===cl,De=_===cl&&this.type!==cl;for(let Ce=0,Y=F.length;Ce<Y;Ce++){let re=F[Ce],X=re.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",re,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;r.copy(X.mapSize);let _e=X.getFrameExtents();if(r.multiply(_e),o.copy(X.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(o.x=Math.floor(f/_e.x),r.x=o.x*_e.x,X.mapSize.x=o.x),r.y>f&&(o.y=Math.floor(f/_e.y),r.y=o.y*_e.y,X.mapSize.y=o.y)),X.map===null||ue===!0||De===!0){let rt=this.type!==cl?{minFilter:br,magFilter:br}:{};X.map!==null&&X.map.dispose(),X.map=new ol(r.x,r.y,rt),X.map.texture.name=re.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();let ze=X.getViewportCount();for(let rt=0;rt<ze;rt++){let ve=X.getViewport(rt);s.set(o.x*ve.x,o.y*ve.y,o.x*ve.z,o.y*ve.w),me.viewport(s),X.updateMatrices(re,rt),i=X.getFrustum(),C(L,W,X.camera,re,this.type)}X.isPointLightShadow!==!0&&this.type===cl&&E(X,W),X.needsUpdate=!1}_=this.type,y.needsUpdate=!1,n.setRenderTarget(O,R,j)};function E(F,L){let W=e.update(x);p.defines.VSM_SAMPLES!==F.blurSamples&&(p.defines.VSM_SAMPLES=F.blurSamples,g.defines.VSM_SAMPLES=F.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new ol(r.x,r.y)),p.uniforms.shadow_pass.value=F.map.texture,p.uniforms.resolution.value=F.mapSize,p.uniforms.radius.value=F.radius,n.setRenderTarget(F.mapPass),n.clear(),n.renderBufferDirect(L,null,W,p,x,null),g.uniforms.shadow_pass.value=F.mapPass.texture,g.uniforms.resolution.value=F.mapSize,g.uniforms.radius.value=F.radius,n.setRenderTarget(F.map),n.clear(),n.renderBufferDirect(L,null,W,g,x,null)}function S(F,L,W,O){let R=null,j=W.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(j!==void 0)R=j;else if(R=W.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){let me=R.uuid,ue=L.uuid,De=u[me];De===void 0&&(De={},u[me]=De);let Ce=De[ue];Ce===void 0&&(Ce=R.clone(),De[ue]=Ce,L.addEventListener("dispose",k)),R=Ce}if(R.visible=L.visible,R.wireframe=L.wireframe,O===cl?R.side=L.shadowSide!==null?L.shadowSide:L.side:R.side=L.shadowSide!==null?L.shadowSide:h[L.side],R.alphaMap=L.alphaMap,R.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,R.map=L.map,R.clipShadows=L.clipShadows,R.clippingPlanes=L.clippingPlanes,R.clipIntersection=L.clipIntersection,R.displacementMap=L.displacementMap,R.displacementScale=L.displacementScale,R.displacementBias=L.displacementBias,R.wireframeLinewidth=L.wireframeLinewidth,R.linewidth=L.linewidth,W.isPointLight===!0&&R.isMeshDistanceMaterial===!0){let me=n.properties.get(R);me.light=W}return R}function C(F,L,W,O,R){if(F.visible===!1)return;if(F.layers.test(L.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&R===cl)&&(!F.frustumCulled||i.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,F.matrixWorld);let ue=e.update(F),De=F.material;if(Array.isArray(De)){let Ce=ue.groups;for(let Y=0,re=Ce.length;Y<re;Y++){let X=Ce[Y],_e=De[X.materialIndex];if(_e&&_e.visible){let ze=S(F,_e,O,R);F.onBeforeShadow(n,F,L,W,ue,ze,X),n.renderBufferDirect(W,null,ue,ze,F,X),F.onAfterShadow(n,F,L,W,ue,ze,X)}}}else if(De.visible){let Ce=S(F,De,O,R);F.onBeforeShadow(n,F,L,W,ue,Ce,null),n.renderBufferDirect(W,null,ue,Ce,F,null),F.onAfterShadow(n,F,L,W,ue,Ce,null)}}let me=F.children;for(let ue=0,De=me.length;ue<De;ue++)C(me[ue],L,W,O,R)}function k(F){F.target.removeEventListener("dispose",k);for(let W in u){let O=u[W],R=F.target.uuid;R in O&&(O[R].dispose(),delete O[R])}}}var tde={[ob]:sb,[ab]:ub,[lb]:db,[xd]:cb,[sb]:ob,[ub]:ab,[db]:lb,[cb]:xd};function nde(n,e){function t(){let Z=!1,Qe=new sn,ge=null,Te=new sn(0,0,0,0);return{setMask:function(it){ge!==it&&!Z&&(n.colorMask(it,it,it,it),ge=it)},setLocked:function(it){Z=it},setClear:function(it,Je,Lt,Kn,Oi){Oi===!0&&(it*=Kn,Je*=Kn,Lt*=Kn),Qe.set(it,Je,Lt,Kn),Te.equals(Qe)===!1&&(n.clearColor(it,Je,Lt,Kn),Te.copy(Qe))},reset:function(){Z=!1,ge=null,Te.set(-1,0,0,0)}}}function i(){let Z=!1,Qe=!1,ge=null,Te=null,it=null;return{setReversed:function(Je){if(Qe!==Je){let Lt=e.get("EXT_clip_control");Je?Lt.clipControlEXT(Lt.LOWER_LEFT_EXT,Lt.ZERO_TO_ONE_EXT):Lt.clipControlEXT(Lt.LOWER_LEFT_EXT,Lt.NEGATIVE_ONE_TO_ONE_EXT),Qe=Je;let Kn=it;it=null,this.setClear(Kn)}},getReversed:function(){return Qe},setTest:function(Je){Je?le(n.DEPTH_TEST):je(n.DEPTH_TEST)},setMask:function(Je){ge!==Je&&!Z&&(n.depthMask(Je),ge=Je)},setFunc:function(Je){if(Qe&&(Je=tde[Je]),Te!==Je){switch(Je){case ob:n.depthFunc(n.NEVER);break;case sb:n.depthFunc(n.ALWAYS);break;case ab:n.depthFunc(n.LESS);break;case xd:n.depthFunc(n.LEQUAL);break;case lb:n.depthFunc(n.EQUAL);break;case cb:n.depthFunc(n.GEQUAL);break;case ub:n.depthFunc(n.GREATER);break;case db:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Te=Je}},setLocked:function(Je){Z=Je},setClear:function(Je){it!==Je&&(Qe&&(Je=1-Je),n.clearDepth(Je),it=Je)},reset:function(){Z=!1,ge=null,Te=null,it=null,Qe=!1}}}function r(){let Z=!1,Qe=null,ge=null,Te=null,it=null,Je=null,Lt=null,Kn=null,Oi=null;return{setTest:function(Sn){Z||(Sn?le(n.STENCIL_TEST):je(n.STENCIL_TEST))},setMask:function(Sn){Qe!==Sn&&!Z&&(n.stencilMask(Sn),Qe=Sn)},setFunc:function(Sn,or,to){(ge!==Sn||Te!==or||it!==to)&&(n.stencilFunc(Sn,or,to),ge=Sn,Te=or,it=to)},setOp:function(Sn,or,to){(Je!==Sn||Lt!==or||Kn!==to)&&(n.stencilOp(Sn,or,to),Je=Sn,Lt=or,Kn=to)},setLocked:function(Sn){Z=Sn},setClear:function(Sn){Oi!==Sn&&(n.clearStencil(Sn),Oi=Sn)},reset:function(){Z=!1,Qe=null,ge=null,Te=null,it=null,Je=null,Lt=null,Kn=null,Oi=null}}}let o=new t,s=new i,a=new r,l=new WeakMap,u=new WeakMap,f={},h={},p=new WeakMap,g=[],v=null,x=!1,y=null,_=null,E=null,S=null,C=null,k=null,F=null,L=new pt(0,0,0),W=0,O=!1,R=null,j=null,me=null,ue=null,De=null,Ce=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),Y=!1,re=0,X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(X)[1]),Y=re>=1):X.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),Y=re>=2);let _e=null,ze={},rt=n.getParameter(n.SCISSOR_BOX),ve=n.getParameter(n.VIEWPORT),oe=new sn().fromArray(rt),B=new sn().fromArray(ve);function Q(Z,Qe,ge,Te){let it=new Uint8Array(4),Je=n.createTexture();n.bindTexture(Z,Je),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Lt=0;Lt<ge;Lt++)Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY?n.texImage3D(Qe,0,n.RGBA,1,1,Te,0,n.RGBA,n.UNSIGNED_BYTE,it):n.texImage2D(Qe+Lt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,it);return Je}let xe={};xe[n.TEXTURE_2D]=Q(n.TEXTURE_2D,n.TEXTURE_2D,1),xe[n.TEXTURE_CUBE_MAP]=Q(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[n.TEXTURE_2D_ARRAY]=Q(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),xe[n.TEXTURE_3D]=Q(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),le(n.DEPTH_TEST),s.setFunc(xd),$e(!1),Rt(VA),le(n.CULL_FACE),H(ac);function le(Z){f[Z]!==!0&&(n.enable(Z),f[Z]=!0)}function je(Z){f[Z]!==!1&&(n.disable(Z),f[Z]=!1)}function We(Z,Qe){return h[Z]!==Qe?(n.bindFramebuffer(Z,Qe),h[Z]=Qe,Z===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Qe),Z===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Qe),!0):!1}function Ue(Z,Qe){let ge=g,Te=!1;if(Z){ge=p.get(Qe),ge===void 0&&(ge=[],p.set(Qe,ge));let it=Z.textures;if(ge.length!==it.length||ge[0]!==n.COLOR_ATTACHMENT0){for(let Je=0,Lt=it.length;Je<Lt;Je++)ge[Je]=n.COLOR_ATTACHMENT0+Je;ge.length=it.length,Te=!0}}else ge[0]!==n.BACK&&(ge[0]=n.BACK,Te=!0);Te&&n.drawBuffers(ge)}function at(Z){return v!==Z?(n.useProgram(Z),v=Z,!0):!1}let gt={[au]:n.FUNC_ADD,[SV]:n.FUNC_SUBTRACT,[EV]:n.FUNC_REVERSE_SUBTRACT};gt[MV]=n.MIN,gt[TV]=n.MAX;let ft={[IV]:n.ZERO,[AV]:n.ONE,[DV]:n.SRC_COLOR,[Ow]:n.SRC_ALPHA,[LV]:n.SRC_ALPHA_SATURATE,[FV]:n.DST_COLOR,[PV]:n.DST_ALPHA,[RV]:n.ONE_MINUS_SRC_COLOR,[Fw]:n.ONE_MINUS_SRC_ALPHA,[NV]:n.ONE_MINUS_DST_COLOR,[OV]:n.ONE_MINUS_DST_ALPHA,[kV]:n.CONSTANT_COLOR,[UV]:n.ONE_MINUS_CONSTANT_COLOR,[BV]:n.CONSTANT_ALPHA,[VV]:n.ONE_MINUS_CONSTANT_ALPHA};function H(Z,Qe,ge,Te,it,Je,Lt,Kn,Oi,Sn){if(Z===ac){x===!0&&(je(n.BLEND),x=!1);return}if(x===!1&&(le(n.BLEND),x=!0),Z!==CV){if(Z!==y||Sn!==O){if((_!==au||C!==au)&&(n.blendEquation(n.FUNC_ADD),_=au,C=au),Sn)switch(Z){case _d:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case HA:n.blendFunc(n.ONE,n.ONE);break;case jA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case GA:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case _d:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case HA:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case jA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case GA:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}E=null,S=null,k=null,F=null,L.set(0,0,0),W=0,y=Z,O=Sn}return}it=it||Qe,Je=Je||ge,Lt=Lt||Te,(Qe!==_||it!==C)&&(n.blendEquationSeparate(gt[Qe],gt[it]),_=Qe,C=it),(ge!==E||Te!==S||Je!==k||Lt!==F)&&(n.blendFuncSeparate(ft[ge],ft[Te],ft[Je],ft[Lt]),E=ge,S=Te,k=Je,F=Lt),(Kn.equals(L)===!1||Oi!==W)&&(n.blendColor(Kn.r,Kn.g,Kn.b,Oi),L.copy(Kn),W=Oi),y=Z,O=!1}function Yt(Z,Qe){Z.side===Us?je(n.CULL_FACE):le(n.CULL_FACE);let ge=Z.side===Yr;Qe&&(ge=!ge),$e(ge),Z.blending===_d&&Z.transparent===!1?H(ac):H(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),s.setFunc(Z.depthFunc),s.setTest(Z.depthTest),s.setMask(Z.depthWrite),o.setMask(Z.colorWrite);let Te=Z.stencilWrite;a.setTest(Te),Te&&(a.setMask(Z.stencilWriteMask),a.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),a.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),Ht(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?le(n.SAMPLE_ALPHA_TO_COVERAGE):je(n.SAMPLE_ALPHA_TO_COVERAGE)}function $e(Z){R!==Z&&(Z?n.frontFace(n.CW):n.frontFace(n.CCW),R=Z)}function Rt(Z){Z!==xV?(le(n.CULL_FACE),Z!==j&&(Z===VA?n.cullFace(n.BACK):Z===wV?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):je(n.CULL_FACE),j=Z}function Ke(Z){Z!==me&&(Y&&n.lineWidth(Z),me=Z)}function Ht(Z,Qe,ge){Z?(le(n.POLYGON_OFFSET_FILL),(ue!==Qe||De!==ge)&&(n.polygonOffset(Qe,ge),ue=Qe,De=ge)):je(n.POLYGON_OFFSET_FILL)}function mt(Z){Z?le(n.SCISSOR_TEST):je(n.SCISSOR_TEST)}function N(Z){Z===void 0&&(Z=n.TEXTURE0+Ce-1),_e!==Z&&(n.activeTexture(Z),_e=Z)}function M(Z,Qe,ge){ge===void 0&&(_e===null?ge=n.TEXTURE0+Ce-1:ge=_e);let Te=ze[ge];Te===void 0&&(Te={type:void 0,texture:void 0},ze[ge]=Te),(Te.type!==Z||Te.texture!==Qe)&&(_e!==ge&&(n.activeTexture(ge),_e=ge),n.bindTexture(Z,Qe||xe[Z]),Te.type=Z,Te.texture=Qe)}function se(){let Z=ze[_e];Z!==void 0&&Z.type!==void 0&&(n.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function be(){try{n.compressedTexImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Re(){try{n.compressedTexImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function pe(){try{n.texSubImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ye(){try{n.texSubImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ze(){try{n.compressedTexSubImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function xt(){try{n.compressedTexSubImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function bt(){try{n.texStorage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ne(){try{n.texStorage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ot(){try{n.texImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ct(){try{n.texImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Mt(Z){oe.equals(Z)===!1&&(n.scissor(Z.x,Z.y,Z.z,Z.w),oe.copy(Z))}function st(Z){B.equals(Z)===!1&&(n.viewport(Z.x,Z.y,Z.z,Z.w),B.copy(Z))}function ln(Z,Qe){let ge=u.get(Qe);ge===void 0&&(ge=new WeakMap,u.set(Qe,ge));let Te=ge.get(Z);Te===void 0&&(Te=n.getUniformBlockIndex(Qe,Z.name),ge.set(Z,Te))}function jt(Z,Qe){let Te=u.get(Qe).get(Z);l.get(Qe)!==Te&&(n.uniformBlockBinding(Qe,Te,Z.__bindingPointIndex),l.set(Qe,Te))}function Bn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},_e=null,ze={},h={},p=new WeakMap,g=[],v=null,x=!1,y=null,_=null,E=null,S=null,C=null,k=null,F=null,L=new pt(0,0,0),W=0,O=!1,R=null,j=null,me=null,ue=null,De=null,oe.set(0,0,n.canvas.width,n.canvas.height),B.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:le,disable:je,bindFramebuffer:We,drawBuffers:Ue,useProgram:at,setBlending:H,setMaterial:Yt,setFlipSided:$e,setCullFace:Rt,setLineWidth:Ke,setPolygonOffset:Ht,setScissorTest:mt,activeTexture:N,bindTexture:M,unbindTexture:se,compressedTexImage2D:be,compressedTexImage3D:Re,texImage2D:ot,texImage3D:Ct,updateUBOMapping:ln,uniformBlockBinding:jt,texStorage2D:bt,texStorage3D:Ne,texSubImage2D:pe,texSubImage3D:Ye,compressedTexSubImage2D:Ze,compressedTexSubImage3D:xt,scissor:Mt,viewport:st,reset:Bn}}function ide(n,e,t,i,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new qe,f=new WeakMap,h,p=new WeakMap,g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(N,M){return g?new OffscreenCanvas(N,M):qh("canvas")}function x(N,M,se){let be=1,Re=mt(N);if((Re.width>se||Re.height>se)&&(be=se/Math.max(Re.width,Re.height)),be<1)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){let pe=Math.floor(be*Re.width),Ye=Math.floor(be*Re.height);h===void 0&&(h=v(pe,Ye));let Ze=M?v(pe,Ye):h;return Ze.width=pe,Ze.height=Ye,Ze.getContext("2d").drawImage(N,0,0,pe,Ye),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Re.width+"x"+Re.height+") to ("+pe+"x"+Ye+")."),Ze}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Re.width+"x"+Re.height+")."),N;return N}function y(N){return N.generateMipmaps}function _(N){n.generateMipmap(N)}function E(N){return N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:N.isWebGL3DRenderTarget?n.TEXTURE_3D:N.isWebGLArrayRenderTarget||N.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function S(N,M,se,be,Re=!1){if(N!==null){if(n[N]!==void 0)return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let pe=M;if(M===n.RED&&(se===n.FLOAT&&(pe=n.R32F),se===n.HALF_FLOAT&&(pe=n.R16F),se===n.UNSIGNED_BYTE&&(pe=n.R8)),M===n.RED_INTEGER&&(se===n.UNSIGNED_BYTE&&(pe=n.R8UI),se===n.UNSIGNED_SHORT&&(pe=n.R16UI),se===n.UNSIGNED_INT&&(pe=n.R32UI),se===n.BYTE&&(pe=n.R8I),se===n.SHORT&&(pe=n.R16I),se===n.INT&&(pe=n.R32I)),M===n.RG&&(se===n.FLOAT&&(pe=n.RG32F),se===n.HALF_FLOAT&&(pe=n.RG16F),se===n.UNSIGNED_BYTE&&(pe=n.RG8)),M===n.RG_INTEGER&&(se===n.UNSIGNED_BYTE&&(pe=n.RG8UI),se===n.UNSIGNED_SHORT&&(pe=n.RG16UI),se===n.UNSIGNED_INT&&(pe=n.RG32UI),se===n.BYTE&&(pe=n.RG8I),se===n.SHORT&&(pe=n.RG16I),se===n.INT&&(pe=n.RG32I)),M===n.RGB_INTEGER&&(se===n.UNSIGNED_BYTE&&(pe=n.RGB8UI),se===n.UNSIGNED_SHORT&&(pe=n.RGB16UI),se===n.UNSIGNED_INT&&(pe=n.RGB32UI),se===n.BYTE&&(pe=n.RGB8I),se===n.SHORT&&(pe=n.RGB16I),se===n.INT&&(pe=n.RGB32I)),M===n.RGBA_INTEGER&&(se===n.UNSIGNED_BYTE&&(pe=n.RGBA8UI),se===n.UNSIGNED_SHORT&&(pe=n.RGBA16UI),se===n.UNSIGNED_INT&&(pe=n.RGBA32UI),se===n.BYTE&&(pe=n.RGBA8I),se===n.SHORT&&(pe=n.RGBA16I),se===n.INT&&(pe=n.RGBA32I)),M===n.RGB&&se===n.UNSIGNED_INT_5_9_9_9_REV&&(pe=n.RGB9_E5),M===n.RGBA){let Ye=Re?kg:zt.getTransfer(be);se===n.FLOAT&&(pe=n.RGBA32F),se===n.HALF_FLOAT&&(pe=n.RGBA16F),se===n.UNSIGNED_BYTE&&(pe=Ye===qn?n.SRGB8_ALPHA8:n.RGBA8),se===n.UNSIGNED_SHORT_4_4_4_4&&(pe=n.RGBA4),se===n.UNSIGNED_SHORT_5_5_5_1&&(pe=n.RGB5_A1)}return(pe===n.R16F||pe===n.R32F||pe===n.RG16F||pe===n.RG32F||pe===n.RGBA16F||pe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),pe}function C(N,M){let se;return N?M===null||M===pu||M===cp?se=n.DEPTH24_STENCIL8:M===Bs?se=n.DEPTH32F_STENCIL8:M===ap&&(se=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):M===null||M===pu||M===cp?se=n.DEPTH_COMPONENT24:M===Bs?se=n.DEPTH_COMPONENT32F:M===ap&&(se=n.DEPTH_COMPONENT16),se}function k(N,M){return y(N)===!0||N.isFramebufferTexture&&N.minFilter!==br&&N.minFilter!==$r?Math.log2(Math.max(M.width,M.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?M.mipmaps.length:1}function F(N){let M=N.target;M.removeEventListener("dispose",F),W(M),M.isVideoTexture&&f.delete(M)}function L(N){let M=N.target;M.removeEventListener("dispose",L),R(M)}function W(N){let M=i.get(N);if(M.__webglInit===void 0)return;let se=N.source,be=p.get(se);if(be){let Re=be[M.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&O(N),Object.keys(be).length===0&&p.delete(se)}i.remove(N)}function O(N){let M=i.get(N);n.deleteTexture(M.__webglTexture);let se=N.source,be=p.get(se);delete be[M.__cacheKey],s.memory.textures--}function R(N){let M=i.get(N);if(N.depthTexture&&(N.depthTexture.dispose(),i.remove(N.depthTexture)),N.isWebGLCubeRenderTarget)for(let be=0;be<6;be++){if(Array.isArray(M.__webglFramebuffer[be]))for(let Re=0;Re<M.__webglFramebuffer[be].length;Re++)n.deleteFramebuffer(M.__webglFramebuffer[be][Re]);else n.deleteFramebuffer(M.__webglFramebuffer[be]);M.__webglDepthbuffer&&n.deleteRenderbuffer(M.__webglDepthbuffer[be])}else{if(Array.isArray(M.__webglFramebuffer))for(let be=0;be<M.__webglFramebuffer.length;be++)n.deleteFramebuffer(M.__webglFramebuffer[be]);else n.deleteFramebuffer(M.__webglFramebuffer);if(M.__webglDepthbuffer&&n.deleteRenderbuffer(M.__webglDepthbuffer),M.__webglMultisampledFramebuffer&&n.deleteFramebuffer(M.__webglMultisampledFramebuffer),M.__webglColorRenderbuffer)for(let be=0;be<M.__webglColorRenderbuffer.length;be++)M.__webglColorRenderbuffer[be]&&n.deleteRenderbuffer(M.__webglColorRenderbuffer[be]);M.__webglDepthRenderbuffer&&n.deleteRenderbuffer(M.__webglDepthRenderbuffer)}let se=N.textures;for(let be=0,Re=se.length;be<Re;be++){let pe=i.get(se[be]);pe.__webglTexture&&(n.deleteTexture(pe.__webglTexture),s.memory.textures--),i.remove(se[be])}i.remove(N)}let j=0;function me(){j=0}function ue(){let N=j;return N>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+r.maxTextures),j+=1,N}function De(N){let M=[];return M.push(N.wrapS),M.push(N.wrapT),M.push(N.wrapR||0),M.push(N.magFilter),M.push(N.minFilter),M.push(N.anisotropy),M.push(N.internalFormat),M.push(N.format),M.push(N.type),M.push(N.generateMipmaps),M.push(N.premultiplyAlpha),M.push(N.flipY),M.push(N.unpackAlignment),M.push(N.colorSpace),M.join()}function Ce(N,M){let se=i.get(N);if(N.isVideoTexture&&Ke(N),N.isRenderTargetTexture===!1&&N.version>0&&se.__version!==N.version){let be=N.image;if(be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{B(se,N,M);return}}t.bindTexture(n.TEXTURE_2D,se.__webglTexture,n.TEXTURE0+M)}function Y(N,M){let se=i.get(N);if(N.version>0&&se.__version!==N.version){B(se,N,M);return}t.bindTexture(n.TEXTURE_2D_ARRAY,se.__webglTexture,n.TEXTURE0+M)}function re(N,M){let se=i.get(N);if(N.version>0&&se.__version!==N.version){B(se,N,M);return}t.bindTexture(n.TEXTURE_3D,se.__webglTexture,n.TEXTURE0+M)}function X(N,M){let se=i.get(N);if(N.version>0&&se.__version!==N.version){Q(se,N,M);return}t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture,n.TEXTURE0+M)}let _e={[Sa]:n.REPEAT,[Qo]:n.CLAMP_TO_EDGE,[Wh]:n.MIRRORED_REPEAT},ze={[br]:n.NEAREST,[hb]:n.NEAREST_MIPMAP_NEAREST,[Ld]:n.NEAREST_MIPMAP_LINEAR,[$r]:n.LINEAR,[sp]:n.LINEAR_MIPMAP_NEAREST,[Ia]:n.LINEAR_MIPMAP_LINEAR},rt={[tz]:n.NEVER,[az]:n.ALWAYS,[nz]:n.LESS,[QA]:n.LEQUAL,[iz]:n.EQUAL,[sz]:n.GEQUAL,[rz]:n.GREATER,[oz]:n.NOTEQUAL};function ve(N,M){if(M.type===Bs&&e.has("OES_texture_float_linear")===!1&&(M.magFilter===$r||M.magFilter===sp||M.magFilter===Ld||M.magFilter===Ia||M.minFilter===$r||M.minFilter===sp||M.minFilter===Ld||M.minFilter===Ia)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(N,n.TEXTURE_WRAP_S,_e[M.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,_e[M.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,_e[M.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,ze[M.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,ze[M.minFilter]),M.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,rt[M.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(M.magFilter===br||M.minFilter!==Ld&&M.minFilter!==Ia||M.type===Bs&&e.has("OES_texture_float_linear")===!1)return;if(M.anisotropy>1||i.get(M).__currentAnisotropy){let se=e.get("EXT_texture_filter_anisotropic");n.texParameterf(N,se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(M.anisotropy,r.getMaxAnisotropy())),i.get(M).__currentAnisotropy=M.anisotropy}}}function oe(N,M){let se=!1;N.__webglInit===void 0&&(N.__webglInit=!0,M.addEventListener("dispose",F));let be=M.source,Re=p.get(be);Re===void 0&&(Re={},p.set(be,Re));let pe=De(M);if(pe!==N.__cacheKey){Re[pe]===void 0&&(Re[pe]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,se=!0),Re[pe].usedTimes++;let Ye=Re[N.__cacheKey];Ye!==void 0&&(Re[N.__cacheKey].usedTimes--,Ye.usedTimes===0&&O(M)),N.__cacheKey=pe,N.__webglTexture=Re[pe].texture}return se}function B(N,M,se){let be=n.TEXTURE_2D;(M.isDataArrayTexture||M.isCompressedArrayTexture)&&(be=n.TEXTURE_2D_ARRAY),M.isData3DTexture&&(be=n.TEXTURE_3D);let Re=oe(N,M),pe=M.source;t.bindTexture(be,N.__webglTexture,n.TEXTURE0+se);let Ye=i.get(pe);if(pe.version!==Ye.__version||Re===!0){t.activeTexture(n.TEXTURE0+se);let Ze=zt.getPrimaries(zt.workingColorSpace),xt=M.colorSpace===cc?null:zt.getPrimaries(M.colorSpace),bt=M.colorSpace===cc||Ze===xt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,M.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,M.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);let Ne=x(M.image,!1,r.maxTextureSize);Ne=Ht(M,Ne);let ot=o.convert(M.format,M.colorSpace),Ct=o.convert(M.type),Mt=S(M.internalFormat,ot,Ct,M.colorSpace,M.isVideoTexture);ve(be,M);let st,ln=M.mipmaps,jt=M.isVideoTexture!==!0,Bn=Ye.__version===void 0||Re===!0,Z=pe.dataReady,Qe=k(M,Ne);if(M.isDepthTexture)Mt=C(M.format===up,M.type),Bn&&(jt?t.texStorage2D(n.TEXTURE_2D,1,Mt,Ne.width,Ne.height):t.texImage2D(n.TEXTURE_2D,0,Mt,Ne.width,Ne.height,0,ot,Ct,null));else if(M.isDataTexture)if(ln.length>0){jt&&Bn&&t.texStorage2D(n.TEXTURE_2D,Qe,Mt,ln[0].width,ln[0].height);for(let ge=0,Te=ln.length;ge<Te;ge++)st=ln[ge],jt?Z&&t.texSubImage2D(n.TEXTURE_2D,ge,0,0,st.width,st.height,ot,Ct,st.data):t.texImage2D(n.TEXTURE_2D,ge,Mt,st.width,st.height,0,ot,Ct,st.data);M.generateMipmaps=!1}else jt?(Bn&&t.texStorage2D(n.TEXTURE_2D,Qe,Mt,Ne.width,Ne.height),Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ne.width,Ne.height,ot,Ct,Ne.data)):t.texImage2D(n.TEXTURE_2D,0,Mt,Ne.width,Ne.height,0,ot,Ct,Ne.data);else if(M.isCompressedTexture)if(M.isCompressedArrayTexture){jt&&Bn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Mt,ln[0].width,ln[0].height,Ne.depth);for(let ge=0,Te=ln.length;ge<Te;ge++)if(st=ln[ge],M.format!==ns)if(ot!==null)if(jt){if(Z)if(M.layerUpdates.size>0){let it=aD(st.width,st.height,M.format,M.type);for(let Je of M.layerUpdates){let Lt=st.data.subarray(Je*it/st.data.BYTES_PER_ELEMENT,(Je+1)*it/st.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ge,0,0,Je,st.width,st.height,1,ot,Lt)}M.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ge,0,0,0,st.width,st.height,Ne.depth,ot,st.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ge,Mt,st.width,st.height,Ne.depth,0,st.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else jt?Z&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ge,0,0,0,st.width,st.height,Ne.depth,ot,Ct,st.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ge,Mt,st.width,st.height,Ne.depth,0,ot,Ct,st.data)}else{jt&&Bn&&t.texStorage2D(n.TEXTURE_2D,Qe,Mt,ln[0].width,ln[0].height);for(let ge=0,Te=ln.length;ge<Te;ge++)st=ln[ge],M.format!==ns?ot!==null?jt?Z&&t.compressedTexSubImage2D(n.TEXTURE_2D,ge,0,0,st.width,st.height,ot,st.data):t.compressedTexImage2D(n.TEXTURE_2D,ge,Mt,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):jt?Z&&t.texSubImage2D(n.TEXTURE_2D,ge,0,0,st.width,st.height,ot,Ct,st.data):t.texImage2D(n.TEXTURE_2D,ge,Mt,st.width,st.height,0,ot,Ct,st.data)}else if(M.isDataArrayTexture)if(jt){if(Bn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Mt,Ne.width,Ne.height,Ne.depth),Z)if(M.layerUpdates.size>0){let ge=aD(Ne.width,Ne.height,M.format,M.type);for(let Te of M.layerUpdates){let it=Ne.data.subarray(Te*ge/Ne.data.BYTES_PER_ELEMENT,(Te+1)*ge/Ne.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Te,Ne.width,Ne.height,1,ot,Ct,it)}M.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ne.width,Ne.height,Ne.depth,ot,Ct,Ne.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Mt,Ne.width,Ne.height,Ne.depth,0,ot,Ct,Ne.data);else if(M.isData3DTexture)jt?(Bn&&t.texStorage3D(n.TEXTURE_3D,Qe,Mt,Ne.width,Ne.height,Ne.depth),Z&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ne.width,Ne.height,Ne.depth,ot,Ct,Ne.data)):t.texImage3D(n.TEXTURE_3D,0,Mt,Ne.width,Ne.height,Ne.depth,0,ot,Ct,Ne.data);else if(M.isFramebufferTexture){if(Bn)if(jt)t.texStorage2D(n.TEXTURE_2D,Qe,Mt,Ne.width,Ne.height);else{let ge=Ne.width,Te=Ne.height;for(let it=0;it<Qe;it++)t.texImage2D(n.TEXTURE_2D,it,Mt,ge,Te,0,ot,Ct,null),ge>>=1,Te>>=1}}else if(ln.length>0){if(jt&&Bn){let ge=mt(ln[0]);t.texStorage2D(n.TEXTURE_2D,Qe,Mt,ge.width,ge.height)}for(let ge=0,Te=ln.length;ge<Te;ge++)st=ln[ge],jt?Z&&t.texSubImage2D(n.TEXTURE_2D,ge,0,0,ot,Ct,st):t.texImage2D(n.TEXTURE_2D,ge,Mt,ot,Ct,st);M.generateMipmaps=!1}else if(jt){if(Bn){let ge=mt(Ne);t.texStorage2D(n.TEXTURE_2D,Qe,Mt,ge.width,ge.height)}Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ot,Ct,Ne)}else t.texImage2D(n.TEXTURE_2D,0,Mt,ot,Ct,Ne);y(M)&&_(be),Ye.__version=pe.version,M.onUpdate&&M.onUpdate(M)}N.__version=M.version}function Q(N,M,se){if(M.image.length!==6)return;let be=oe(N,M),Re=M.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+se);let pe=i.get(Re);if(Re.version!==pe.__version||be===!0){t.activeTexture(n.TEXTURE0+se);let Ye=zt.getPrimaries(zt.workingColorSpace),Ze=M.colorSpace===cc?null:zt.getPrimaries(M.colorSpace),xt=M.colorSpace===cc||Ye===Ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,M.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,M.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);let bt=M.isCompressedTexture||M.image[0].isCompressedTexture,Ne=M.image[0]&&M.image[0].isDataTexture,ot=[];for(let Te=0;Te<6;Te++)!bt&&!Ne?ot[Te]=x(M.image[Te],!0,r.maxCubemapSize):ot[Te]=Ne?M.image[Te].image:M.image[Te],ot[Te]=Ht(M,ot[Te]);let Ct=ot[0],Mt=o.convert(M.format,M.colorSpace),st=o.convert(M.type),ln=S(M.internalFormat,Mt,st,M.colorSpace),jt=M.isVideoTexture!==!0,Bn=pe.__version===void 0||be===!0,Z=Re.dataReady,Qe=k(M,Ct);ve(n.TEXTURE_CUBE_MAP,M);let ge;if(bt){jt&&Bn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,ln,Ct.width,Ct.height);for(let Te=0;Te<6;Te++){ge=ot[Te].mipmaps;for(let it=0;it<ge.length;it++){let Je=ge[it];M.format!==ns?Mt!==null?jt?Z&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,it,0,0,Je.width,Je.height,Mt,Je.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,it,ln,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):jt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,it,0,0,Je.width,Je.height,Mt,st,Je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,it,ln,Je.width,Je.height,0,Mt,st,Je.data)}}}else{if(ge=M.mipmaps,jt&&Bn){ge.length>0&&Qe++;let Te=mt(ot[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,ln,Te.width,Te.height)}for(let Te=0;Te<6;Te++)if(Ne){jt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,ot[Te].width,ot[Te].height,Mt,st,ot[Te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,ln,ot[Te].width,ot[Te].height,0,Mt,st,ot[Te].data);for(let it=0;it<ge.length;it++){let Lt=ge[it].image[Te].image;jt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,it+1,0,0,Lt.width,Lt.height,Mt,st,Lt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,it+1,ln,Lt.width,Lt.height,0,Mt,st,Lt.data)}}else{jt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Mt,st,ot[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,ln,Mt,st,ot[Te]);for(let it=0;it<ge.length;it++){let Je=ge[it];jt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,it+1,0,0,Mt,st,Je.image[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,it+1,ln,Mt,st,Je.image[Te])}}}y(M)&&_(n.TEXTURE_CUBE_MAP),pe.__version=Re.version,M.onUpdate&&M.onUpdate(M)}N.__version=M.version}function xe(N,M,se,be,Re,pe){let Ye=o.convert(se.format,se.colorSpace),Ze=o.convert(se.type),xt=S(se.internalFormat,Ye,Ze,se.colorSpace),bt=i.get(M),Ne=i.get(se);if(Ne.__renderTarget=M,!bt.__hasExternalTextures){let ot=Math.max(1,M.width>>pe),Ct=Math.max(1,M.height>>pe);Re===n.TEXTURE_3D||Re===n.TEXTURE_2D_ARRAY?t.texImage3D(Re,pe,xt,ot,Ct,M.depth,0,Ye,Ze,null):t.texImage2D(Re,pe,xt,ot,Ct,0,Ye,Ze,null)}t.bindFramebuffer(n.FRAMEBUFFER,N),Rt(M)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,be,Re,Ne.__webglTexture,0,$e(M)):(Re===n.TEXTURE_2D||Re>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,be,Re,Ne.__webglTexture,pe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function le(N,M,se){if(n.bindRenderbuffer(n.RENDERBUFFER,N),M.depthBuffer){let be=M.depthTexture,Re=be&&be.isDepthTexture?be.type:null,pe=C(M.stencilBuffer,Re),Ye=M.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=$e(M);Rt(M)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ze,pe,M.width,M.height):se?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ze,pe,M.width,M.height):n.renderbufferStorage(n.RENDERBUFFER,pe,M.width,M.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ye,n.RENDERBUFFER,N)}else{let be=M.textures;for(let Re=0;Re<be.length;Re++){let pe=be[Re],Ye=o.convert(pe.format,pe.colorSpace),Ze=o.convert(pe.type),xt=S(pe.internalFormat,Ye,Ze,pe.colorSpace),bt=$e(M);se&&Rt(M)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,xt,M.width,M.height):Rt(M)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,bt,xt,M.width,M.height):n.renderbufferStorage(n.RENDERBUFFER,xt,M.width,M.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function je(N,M){if(M&&M.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!(M.depthTexture&&M.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let be=i.get(M.depthTexture);be.__renderTarget=M,(!be.__webglTexture||M.depthTexture.image.width!==M.width||M.depthTexture.image.height!==M.height)&&(M.depthTexture.image.width=M.width,M.depthTexture.image.height=M.height,M.depthTexture.needsUpdate=!0),Ce(M.depthTexture,0);let Re=be.__webglTexture,pe=$e(M);if(M.depthTexture.format===$h)Rt(M)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0,pe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0);else if(M.depthTexture.format===up)Rt(M)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0,pe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function We(N){let M=i.get(N),se=N.isWebGLCubeRenderTarget===!0;if(M.__boundDepthTexture!==N.depthTexture){let be=N.depthTexture;if(M.__depthDisposeCallback&&M.__depthDisposeCallback(),be){let Re=()=>{delete M.__boundDepthTexture,delete M.__depthDisposeCallback,be.removeEventListener("dispose",Re)};be.addEventListener("dispose",Re),M.__depthDisposeCallback=Re}M.__boundDepthTexture=be}if(N.depthTexture&&!M.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");let be=N.texture.mipmaps;be&&be.length>0?je(M.__webglFramebuffer[0],N):je(M.__webglFramebuffer,N)}else if(se){M.__webglDepthbuffer=[];for(let be=0;be<6;be++)if(t.bindFramebuffer(n.FRAMEBUFFER,M.__webglFramebuffer[be]),M.__webglDepthbuffer[be]===void 0)M.__webglDepthbuffer[be]=n.createRenderbuffer(),le(M.__webglDepthbuffer[be],N,!1);else{let Re=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=M.__webglDepthbuffer[be];n.bindRenderbuffer(n.RENDERBUFFER,pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Re,n.RENDERBUFFER,pe)}}else{let be=N.texture.mipmaps;if(be&&be.length>0?t.bindFramebuffer(n.FRAMEBUFFER,M.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,M.__webglFramebuffer),M.__webglDepthbuffer===void 0)M.__webglDepthbuffer=n.createRenderbuffer(),le(M.__webglDepthbuffer,N,!1);else{let Re=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=M.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Re,n.RENDERBUFFER,pe)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(N,M,se){let be=i.get(N);M!==void 0&&xe(be.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),se!==void 0&&We(N)}function at(N){let M=N.texture,se=i.get(N),be=i.get(M);N.addEventListener("dispose",L);let Re=N.textures,pe=N.isWebGLCubeRenderTarget===!0,Ye=Re.length>1;if(Ye||(be.__webglTexture===void 0&&(be.__webglTexture=n.createTexture()),be.__version=M.version,s.memory.textures++),pe){se.__webglFramebuffer=[];for(let Ze=0;Ze<6;Ze++)if(M.mipmaps&&M.mipmaps.length>0){se.__webglFramebuffer[Ze]=[];for(let xt=0;xt<M.mipmaps.length;xt++)se.__webglFramebuffer[Ze][xt]=n.createFramebuffer()}else se.__webglFramebuffer[Ze]=n.createFramebuffer()}else{if(M.mipmaps&&M.mipmaps.length>0){se.__webglFramebuffer=[];for(let Ze=0;Ze<M.mipmaps.length;Ze++)se.__webglFramebuffer[Ze]=n.createFramebuffer()}else se.__webglFramebuffer=n.createFramebuffer();if(Ye)for(let Ze=0,xt=Re.length;Ze<xt;Ze++){let bt=i.get(Re[Ze]);bt.__webglTexture===void 0&&(bt.__webglTexture=n.createTexture(),s.memory.textures++)}if(N.samples>0&&Rt(N)===!1){se.__webglMultisampledFramebuffer=n.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let Ze=0;Ze<Re.length;Ze++){let xt=Re[Ze];se.__webglColorRenderbuffer[Ze]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,se.__webglColorRenderbuffer[Ze]);let bt=o.convert(xt.format,xt.colorSpace),Ne=o.convert(xt.type),ot=S(xt.internalFormat,bt,Ne,xt.colorSpace,N.isXRRenderTarget===!0),Ct=$e(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,ot,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ze,n.RENDERBUFFER,se.__webglColorRenderbuffer[Ze])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(se.__webglDepthRenderbuffer=n.createRenderbuffer(),le(se.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(pe){t.bindTexture(n.TEXTURE_CUBE_MAP,be.__webglTexture),ve(n.TEXTURE_CUBE_MAP,M);for(let Ze=0;Ze<6;Ze++)if(M.mipmaps&&M.mipmaps.length>0)for(let xt=0;xt<M.mipmaps.length;xt++)xe(se.__webglFramebuffer[Ze][xt],N,M,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,xt);else xe(se.__webglFramebuffer[Ze],N,M,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0);y(M)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ye){for(let Ze=0,xt=Re.length;Ze<xt;Ze++){let bt=Re[Ze],Ne=i.get(bt);t.bindTexture(n.TEXTURE_2D,Ne.__webglTexture),ve(n.TEXTURE_2D,bt),xe(se.__webglFramebuffer,N,bt,n.COLOR_ATTACHMENT0+Ze,n.TEXTURE_2D,0),y(bt)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let Ze=n.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(Ze=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ze,be.__webglTexture),ve(Ze,M),M.mipmaps&&M.mipmaps.length>0)for(let xt=0;xt<M.mipmaps.length;xt++)xe(se.__webglFramebuffer[xt],N,M,n.COLOR_ATTACHMENT0,Ze,xt);else xe(se.__webglFramebuffer,N,M,n.COLOR_ATTACHMENT0,Ze,0);y(M)&&_(Ze),t.unbindTexture()}N.depthBuffer&&We(N)}function gt(N){let M=N.textures;for(let se=0,be=M.length;se<be;se++){let Re=M[se];if(y(Re)){let pe=E(N),Ye=i.get(Re).__webglTexture;t.bindTexture(pe,Ye),_(pe),t.unbindTexture()}}}let ft=[],H=[];function Yt(N){if(N.samples>0){if(Rt(N)===!1){let M=N.textures,se=N.width,be=N.height,Re=n.COLOR_BUFFER_BIT,pe=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ye=i.get(N),Ze=M.length>1;if(Ze)for(let bt=0;bt<M.length;bt++)t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer);let xt=N.texture.mipmaps;xt&&xt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ye.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ye.__webglFramebuffer);for(let bt=0;bt<M.length;bt++){if(N.resolveDepthBuffer&&(N.depthBuffer&&(Re|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&N.resolveStencilBuffer&&(Re|=n.STENCIL_BUFFER_BIT)),Ze){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ye.__webglColorRenderbuffer[bt]);let Ne=i.get(M[bt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ne,0)}n.blitFramebuffer(0,0,se,be,0,0,se,be,Re,n.NEAREST),l===!0&&(ft.length=0,H.length=0,ft.push(n.COLOR_ATTACHMENT0+bt),N.depthBuffer&&N.resolveDepthBuffer===!1&&(ft.push(pe),H.push(pe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,H)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ft))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ze)for(let bt=0;bt<M.length;bt++){t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.RENDERBUFFER,Ye.__webglColorRenderbuffer[bt]);let Ne=i.get(M[bt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.TEXTURE_2D,Ne,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer)}else if(N.depthBuffer&&N.resolveDepthBuffer===!1&&l){let M=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[M])}}}function $e(N){return Math.min(r.maxSamples,N.samples)}function Rt(N){let M=i.get(N);return N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&M.__useRenderToTexture!==!1}function Ke(N){let M=s.render.frame;f.get(N)!==M&&(f.set(N,M),N.update())}function Ht(N,M){let se=N.colorSpace,be=N.format,Re=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||se!==Cr&&se!==cc&&(zt.getTransfer(se)===qn?(be!==ns||Re!==Aa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",se)),M}function mt(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(u.width=N.naturalWidth||N.width,u.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(u.width=N.displayWidth,u.height=N.displayHeight):(u.width=N.width,u.height=N.height),u}this.allocateTextureUnit=ue,this.resetTextureUnits=me,this.setTexture2D=Ce,this.setTexture2DArray=Y,this.setTexture3D=re,this.setTextureCube=X,this.rebindTextures=Ue,this.setupRenderTarget=at,this.updateRenderTargetMipmap=gt,this.updateMultisampleRenderTarget=Yt,this.setupDepthRenderbuffer=We,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=Rt}function rde(n,e){function t(i,r=cc){let o,s=zt.getTransfer(r);if(i===Aa)return n.UNSIGNED_BYTE;if(i===mb)return n.UNSIGNED_SHORT_4_4_4_4;if(i===gb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===qA)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===WA)return n.BYTE;if(i===$A)return n.SHORT;if(i===ap)return n.UNSIGNED_SHORT;if(i===pb)return n.INT;if(i===pu)return n.UNSIGNED_INT;if(i===Bs)return n.FLOAT;if(i===lp)return n.HALF_FLOAT;if(i===XA)return n.ALPHA;if(i===YA)return n.RGB;if(i===ns)return n.RGBA;if(i===$h)return n.DEPTH_COMPONENT;if(i===up)return n.DEPTH_STENCIL;if(i===vb)return n.RED;if(i===yb)return n.RED_INTEGER;if(i===ZA)return n.RG;if(i===_b)return n.RG_INTEGER;if(i===xb)return n.RGBA_INTEGER;if(i===p0||i===m0||i===g0||i===v0)if(s===qn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===p0)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===m0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===g0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===v0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===p0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===m0)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===g0)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===v0)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===wb||i===bb||i===Cb||i===Sb)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===wb)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===bb)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Cb)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Sb)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Eb||i===Mb||i===Tb)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===Eb||i===Mb)return s===qn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===Tb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Ib||i===Ab||i===Db||i===Rb||i===Pb||i===Ob||i===Fb||i===Nb||i===Lb||i===kb||i===Ub||i===Bb||i===Vb||i===zb)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===Ib)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Ab)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Db)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Rb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Pb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Ob)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Fb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Nb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Lb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===kb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Ub)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Bb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Vb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===zb)return s===qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===y0||i===Hb||i===jb)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===y0)return s===qn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Hb)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===jb)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===KA||i===Gb||i===Wb||i===$b)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===y0)return o.COMPRESSED_RED_RGTC1_EXT;if(i===Gb)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Wb)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===$b)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===cp?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var ode=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,sde=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,xD=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){let r=new Zr,o=e.properties.get(r);o.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new Ea({vertexShader:ode,fragmentShader:sde,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new xi(new n0(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},wD=class extends rl{constructor(e,t){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,u=null,f=null,h=null,p=null,g=null,v=null,x=new xD,y=t.getContextAttributes(),_=null,E=null,S=[],C=[],k=new qe,F=null,L=new Ri;L.viewport=new sn;let W=new Ri;W.viewport=new sn;let O=[L,W],R=new ib,j=null,me=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let Q=S[B];return Q===void 0&&(Q=new Kh,S[B]=Q),Q.getTargetRaySpace()},this.getControllerGrip=function(B){let Q=S[B];return Q===void 0&&(Q=new Kh,S[B]=Q),Q.getGripSpace()},this.getHand=function(B){let Q=S[B];return Q===void 0&&(Q=new Kh,S[B]=Q),Q.getHandSpace()};function ue(B){let Q=C.indexOf(B.inputSource);if(Q===-1)return;let xe=S[Q];xe!==void 0&&(xe.update(B.inputSource,B.frame,u||s),xe.dispatchEvent({type:B.type,data:B.inputSource}))}function De(){r.removeEventListener("select",ue),r.removeEventListener("selectstart",ue),r.removeEventListener("selectend",ue),r.removeEventListener("squeeze",ue),r.removeEventListener("squeezestart",ue),r.removeEventListener("squeezeend",ue),r.removeEventListener("end",De),r.removeEventListener("inputsourceschange",Ce);for(let B=0;B<S.length;B++){let Q=C[B];Q!==null&&(C[B]=null,S[B].disconnect(Q))}j=null,me=null,x.reset(),e.setRenderTarget(_),g=null,p=null,h=null,r=null,E=null,oe.stop(),i.isPresenting=!1,e.setPixelRatio(F),e.setSize(k.width,k.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){o=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){a=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(B){u=B},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=function(B){return Ge(this,null,function*(){if(r=B,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",ue),r.addEventListener("selectstart",ue),r.addEventListener("selectend",ue),r.addEventListener("squeeze",ue),r.addEventListener("squeezestart",ue),r.addEventListener("squeezeend",ue),r.addEventListener("end",De),r.addEventListener("inputsourceschange",Ce),y.xrCompatible!==!0&&(yield t.makeXRCompatible()),F=e.getPixelRatio(),e.getSize(k),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let xe=null,le=null,je=null;y.depth&&(je=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=y.stencil?up:$h,le=y.stencil?cp:pu);let We={colorFormat:t.RGBA8,depthFormat:je,scaleFactor:o};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer(We),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),E=new ol(p.textureWidth,p.textureHeight,{format:ns,type:Aa,depthTexture:new qg(p.textureWidth,p.textureHeight,le,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{let xe={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};g=new XRWebGLLayer(r,t,xe),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),E=new ol(g.framebufferWidth,g.framebufferHeight,{format:ns,type:Aa,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=yield r.requestReferenceSpace(a),oe.setContext(r),oe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function Ce(B){for(let Q=0;Q<B.removed.length;Q++){let xe=B.removed[Q],le=C.indexOf(xe);le>=0&&(C[le]=null,S[le].disconnect(xe))}for(let Q=0;Q<B.added.length;Q++){let xe=B.added[Q],le=C.indexOf(xe);if(le===-1){for(let We=0;We<S.length;We++)if(We>=C.length){C.push(xe),le=We;break}else if(C[We]===null){C[We]=xe,le=We;break}if(le===-1)break}let je=S[le];je&&je.connect(xe)}}let Y=new V,re=new V;function X(B,Q,xe){Y.setFromMatrixPosition(Q.matrixWorld),re.setFromMatrixPosition(xe.matrixWorld);let le=Y.distanceTo(re),je=Q.projectionMatrix.elements,We=xe.projectionMatrix.elements,Ue=je[14]/(je[10]-1),at=je[14]/(je[10]+1),gt=(je[9]+1)/je[5],ft=(je[9]-1)/je[5],H=(je[8]-1)/je[0],Yt=(We[8]+1)/We[0],$e=Ue*H,Rt=Ue*Yt,Ke=le/(-H+Yt),Ht=Ke*-H;if(Q.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(Ht),B.translateZ(Ke),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert(),je[10]===-1)B.projectionMatrix.copy(Q.projectionMatrix),B.projectionMatrixInverse.copy(Q.projectionMatrixInverse);else{let mt=Ue+Ke,N=at+Ke,M=$e-Ht,se=Rt+(le-Ht),be=gt*at/N*mt,Re=ft*at/N*mt;B.projectionMatrix.makePerspective(M,se,be,Re,mt,N),B.projectionMatrixInverse.copy(B.projectionMatrix).invert()}}function _e(B,Q){Q===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(Q.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(r===null)return;let Q=B.near,xe=B.far;x.texture!==null&&(x.depthNear>0&&(Q=x.depthNear),x.depthFar>0&&(xe=x.depthFar)),R.near=W.near=L.near=Q,R.far=W.far=L.far=xe,(j!==R.near||me!==R.far)&&(r.updateRenderState({depthNear:R.near,depthFar:R.far}),j=R.near,me=R.far),L.layers.mask=B.layers.mask|2,W.layers.mask=B.layers.mask|4,R.layers.mask=L.layers.mask|W.layers.mask;let le=B.parent,je=R.cameras;_e(R,le);for(let We=0;We<je.length;We++)_e(je[We],le);je.length===2?X(R,L,W):R.projectionMatrix.copy(L.projectionMatrix),ze(B,R,le)};function ze(B,Q,xe){xe===null?B.matrix.copy(Q.matrixWorld):(B.matrix.copy(xe.matrixWorld),B.matrix.invert(),B.matrix.multiply(Q.matrixWorld)),B.matrix.decompose(B.position,B.quaternion,B.scale),B.updateMatrixWorld(!0),B.projectionMatrix.copy(Q.projectionMatrix),B.projectionMatrixInverse.copy(Q.projectionMatrixInverse),B.isPerspectiveCamera&&(B.fov=Cd*2*Math.atan(1/B.projectionMatrix.elements[5]),B.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(B){l=B,p!==null&&(p.fixedFoveation=B),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=B)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(R)};let rt=null;function ve(B,Q){if(f=Q.getViewerPose(u||s),v=Q,f!==null){let xe=f.views;g!==null&&(e.setRenderTargetFramebuffer(E,g.framebuffer),e.setRenderTarget(E));let le=!1;xe.length!==R.cameras.length&&(R.cameras.length=0,le=!0);for(let Ue=0;Ue<xe.length;Ue++){let at=xe[Ue],gt=null;if(g!==null)gt=g.getViewport(at);else{let H=h.getViewSubImage(p,at);gt=H.viewport,Ue===0&&(e.setRenderTargetTextures(E,H.colorTexture,H.depthStencilTexture),e.setRenderTarget(E))}let ft=O[Ue];ft===void 0&&(ft=new Ri,ft.layers.enable(Ue),ft.viewport=new sn,O[Ue]=ft),ft.matrix.fromArray(at.transform.matrix),ft.matrix.decompose(ft.position,ft.quaternion,ft.scale),ft.projectionMatrix.fromArray(at.projectionMatrix),ft.projectionMatrixInverse.copy(ft.projectionMatrix).invert(),ft.viewport.set(gt.x,gt.y,gt.width,gt.height),Ue===0&&(R.matrix.copy(ft.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),le===!0&&R.cameras.push(ft)}let je=r.enabledFeatures;if(je&&je.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&h){let Ue=h.getDepthInformation(xe[0]);Ue&&Ue.isValid&&Ue.texture&&x.init(e,Ue,r.renderState)}}for(let xe=0;xe<S.length;xe++){let le=C[xe],je=S[xe];le!==null&&je!==void 0&&je.update(le,Q,u||s)}rt&&rt(B,Q),Q.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Q}),v=null}let oe=new jz;oe.setAnimationLoop(ve),this.setAnimationLoop=function(B){rt=B},this.dispose=function(){}}},Bd=new hr,ade=new dt;function lde(n,e){function t(y,_){y.matrixAutoUpdate===!0&&y.updateMatrix(),_.value.copy(y.matrix)}function i(y,_){_.color.getRGB(y.fogColor.value,iD(n)),_.isFog?(y.fogNear.value=_.near,y.fogFar.value=_.far):_.isFogExp2&&(y.fogDensity.value=_.density)}function r(y,_,E,S,C){_.isMeshBasicMaterial||_.isMeshLambertMaterial?o(y,_):_.isMeshToonMaterial?(o(y,_),h(y,_)):_.isMeshPhongMaterial?(o(y,_),f(y,_)):_.isMeshStandardMaterial?(o(y,_),p(y,_),_.isMeshPhysicalMaterial&&g(y,_,C)):_.isMeshMatcapMaterial?(o(y,_),v(y,_)):_.isMeshDepthMaterial?o(y,_):_.isMeshDistanceMaterial?(o(y,_),x(y,_)):_.isMeshNormalMaterial?o(y,_):_.isLineBasicMaterial?(s(y,_),_.isLineDashedMaterial&&a(y,_)):_.isPointsMaterial?l(y,_,E,S):_.isSpriteMaterial?u(y,_):_.isShadowMaterial?(y.color.value.copy(_.color),y.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function o(y,_){y.opacity.value=_.opacity,_.color&&y.diffuse.value.copy(_.color),_.emissive&&y.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.bumpMap&&(y.bumpMap.value=_.bumpMap,t(_.bumpMap,y.bumpMapTransform),y.bumpScale.value=_.bumpScale,_.side===Yr&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,t(_.normalMap,y.normalMapTransform),y.normalScale.value.copy(_.normalScale),_.side===Yr&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,t(_.displacementMap,y.displacementMapTransform),y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,y.emissiveMapTransform)),_.specularMap&&(y.specularMap.value=_.specularMap,t(_.specularMap,y.specularMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);let E=e.get(_),S=E.envMap,C=E.envMapRotation;S&&(y.envMap.value=S,Bd.copy(C),Bd.x*=-1,Bd.y*=-1,Bd.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Bd.y*=-1,Bd.z*=-1),y.envMapRotation.value.setFromMatrix4(ade.makeRotationFromEuler(Bd)),y.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=_.reflectivity,y.ior.value=_.ior,y.refractionRatio.value=_.refractionRatio),_.lightMap&&(y.lightMap.value=_.lightMap,y.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,y.lightMapTransform)),_.aoMap&&(y.aoMap.value=_.aoMap,y.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,y.aoMapTransform))}function s(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform))}function a(y,_){y.dashSize.value=_.dashSize,y.totalSize.value=_.dashSize+_.gapSize,y.scale.value=_.scale}function l(y,_,E,S){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.size.value=_.size*E,y.scale.value=S*.5,_.map&&(y.map.value=_.map,t(_.map,y.uvTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function u(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.rotation.value=_.rotation,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function f(y,_){y.specular.value.copy(_.specular),y.shininess.value=Math.max(_.shininess,1e-4)}function h(y,_){_.gradientMap&&(y.gradientMap.value=_.gradientMap)}function p(y,_){y.metalness.value=_.metalness,_.metalnessMap&&(y.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,y.metalnessMapTransform)),y.roughness.value=_.roughness,_.roughnessMap&&(y.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,y.roughnessMapTransform)),_.envMap&&(y.envMapIntensity.value=_.envMapIntensity)}function g(y,_,E){y.ior.value=_.ior,_.sheen>0&&(y.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),y.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(y.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,y.sheenColorMapTransform)),_.sheenRoughnessMap&&(y.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,y.sheenRoughnessMapTransform))),_.clearcoat>0&&(y.clearcoat.value=_.clearcoat,y.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(y.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,y.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(y.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Yr&&y.clearcoatNormalScale.value.negate())),_.dispersion>0&&(y.dispersion.value=_.dispersion),_.iridescence>0&&(y.iridescence.value=_.iridescence,y.iridescenceIOR.value=_.iridescenceIOR,y.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(y.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,y.iridescenceMapTransform)),_.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),_.transmission>0&&(y.transmission.value=_.transmission,y.transmissionSamplerMap.value=E.texture,y.transmissionSamplerSize.value.set(E.width,E.height),_.transmissionMap&&(y.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,y.transmissionMapTransform)),y.thickness.value=_.thickness,_.thicknessMap&&(y.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=_.attenuationDistance,y.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(y.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(y.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=_.specularIntensity,y.specularColor.value.copy(_.specularColor),_.specularColorMap&&(y.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,y.specularColorMapTransform)),_.specularIntensityMap&&(y.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,_){_.matcap&&(y.matcap.value=_.matcap)}function x(y,_){let E=e.get(_).light;y.referencePosition.value.setFromMatrixPosition(E.matrixWorld),y.nearDistance.value=E.shadow.camera.near,y.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function cde(n,e,t,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(E,S){let C=S.program;i.uniformBlockBinding(E,C)}function u(E,S){let C=r[E.id];C===void 0&&(v(E),C=f(E),r[E.id]=C,E.addEventListener("dispose",y));let k=S.program;i.updateUBOMapping(E,k);let F=e.render.frame;o[E.id]!==F&&(p(E),o[E.id]=F)}function f(E){let S=h();E.__bindingPointIndex=S;let C=n.createBuffer(),k=E.__size,F=E.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,k,F),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,C),C}function h(){for(let E=0;E<a;E++)if(s.indexOf(E)===-1)return s.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(E){let S=r[E.id],C=E.uniforms,k=E.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let F=0,L=C.length;F<L;F++){let W=Array.isArray(C[F])?C[F]:[C[F]];for(let O=0,R=W.length;O<R;O++){let j=W[O];if(g(j,F,O,k)===!0){let me=j.__offset,ue=Array.isArray(j.value)?j.value:[j.value],De=0;for(let Ce=0;Ce<ue.length;Ce++){let Y=ue[Ce],re=x(Y);typeof Y=="number"||typeof Y=="boolean"?(j.__data[0]=Y,n.bufferSubData(n.UNIFORM_BUFFER,me+De,j.__data)):Y.isMatrix3?(j.__data[0]=Y.elements[0],j.__data[1]=Y.elements[1],j.__data[2]=Y.elements[2],j.__data[3]=0,j.__data[4]=Y.elements[3],j.__data[5]=Y.elements[4],j.__data[6]=Y.elements[5],j.__data[7]=0,j.__data[8]=Y.elements[6],j.__data[9]=Y.elements[7],j.__data[10]=Y.elements[8],j.__data[11]=0):(Y.toArray(j.__data,De),De+=re.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,me,j.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(E,S,C,k){let F=E.value,L=S+"_"+C;if(k[L]===void 0)return typeof F=="number"||typeof F=="boolean"?k[L]=F:k[L]=F.clone(),!0;{let W=k[L];if(typeof F=="number"||typeof F=="boolean"){if(W!==F)return k[L]=F,!0}else if(W.equals(F)===!1)return W.copy(F),!0}return!1}function v(E){let S=E.uniforms,C=0,k=16;for(let L=0,W=S.length;L<W;L++){let O=Array.isArray(S[L])?S[L]:[S[L]];for(let R=0,j=O.length;R<j;R++){let me=O[R],ue=Array.isArray(me.value)?me.value:[me.value];for(let De=0,Ce=ue.length;De<Ce;De++){let Y=ue[De],re=x(Y),X=C%k,_e=X%re.boundary,ze=X+_e;C+=_e,ze!==0&&k-ze<re.storage&&(C+=k-ze),me.__data=new Float32Array(re.storage/Float32Array.BYTES_PER_ELEMENT),me.__offset=C,C+=re.storage}}}let F=C%k;return F>0&&(C+=k-F),E.__size=C,E.__cache={},this}function x(E){let S={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(S.boundary=4,S.storage=4):E.isVector2?(S.boundary=8,S.storage=8):E.isVector3||E.isColor?(S.boundary=16,S.storage=12):E.isVector4?(S.boundary=16,S.storage=16):E.isMatrix3?(S.boundary=48,S.storage=48):E.isMatrix4?(S.boundary=64,S.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),S}function y(E){let S=E.target;S.removeEventListener("dispose",y);let C=s.indexOf(S.__bindingPointIndex);s.splice(C,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete o[S.id]}function _(){for(let E in r)n.deleteBuffer(r[E]);s=[],r={},o={}}return{bind:l,update:u,dispose:_}}var Kb=class{constructor(e={}){let{canvas:t=lz(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=s;let v=new Uint32Array(4),x=new Int32Array(4),y=null,_=null,E=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=lc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let C=this,k=!1;this._outputColorSpace=Cn;let F=0,L=0,W=null,O=-1,R=null,j=new sn,me=new sn,ue=null,De=new pt(0),Ce=0,Y=t.width,re=t.height,X=1,_e=null,ze=null,rt=new sn(0,0,Y,re),ve=new sn(0,0,Y,re),oe=!1,B=new ep,Q=!1,xe=!1,le=new dt,je=new dt,We=new V,Ue=new sn,at={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},gt=!1;function ft(){return W===null?X:1}let H=i;function Yt(D,te){return t.getContext(D,te)}try{let D={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${rb}`),t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",it,!1),t.addEventListener("webglcontextcreationerror",Je,!1),H===null){let te="webgl2";if(H=Yt(te,D),H===null)throw Yt(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let $e,Rt,Ke,Ht,mt,N,M,se,be,Re,pe,Ye,Ze,xt,bt,Ne,ot,Ct,Mt,st,ln,jt,Bn,Z;function Qe(){$e=new Tce(H),$e.init(),jt=new rde(H,$e),Rt=new xce(H,$e,e,jt),Ke=new nde(H,$e),Rt.reverseDepthBuffer&&p&&Ke.buffers.depth.setReversed(!0),Ht=new Dce(H),mt=new jue,N=new ide(H,$e,Ke,mt,Rt,jt,Ht),M=new bce(C),se=new Mce(C),be=new Lse(H),Bn=new yce(H,be),Re=new Ice(H,be,Ht,Bn),pe=new Pce(H,Re,be,Ht),Mt=new Rce(H,Rt,N),Ne=new wce(mt),Ye=new Hue(C,M,se,$e,Rt,Bn,Ne),Ze=new lde(C,mt),xt=new Wue,bt=new Kue($e),Ct=new vce(C,M,se,Ke,pe,g,l),ot=new ede(C,pe,Rt),Z=new cde(H,Ht,Rt,Ke),st=new _ce(H,$e,Ht),ln=new Ace(H,$e,Ht),Ht.programs=Ye.programs,C.capabilities=Rt,C.extensions=$e,C.properties=mt,C.renderLists=xt,C.shadowMap=ot,C.state=Ke,C.info=Ht}Qe();let ge=new wD(C,H);this.xr=ge,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){let D=$e.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){let D=$e.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(D){D!==void 0&&(X=D,this.setSize(Y,re,!1))},this.getSize=function(D){return D.set(Y,re)},this.setSize=function(D,te,de=!0){if(ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=D,re=te,t.width=Math.floor(D*X),t.height=Math.floor(te*X),de===!0&&(t.style.width=D+"px",t.style.height=te+"px"),this.setViewport(0,0,D,te)},this.getDrawingBufferSize=function(D){return D.set(Y*X,re*X).floor()},this.setDrawingBufferSize=function(D,te,de){Y=D,re=te,X=de,t.width=Math.floor(D*de),t.height=Math.floor(te*de),this.setViewport(0,0,D,te)},this.getCurrentViewport=function(D){return D.copy(j)},this.getViewport=function(D){return D.copy(rt)},this.setViewport=function(D,te,de,fe){D.isVector4?rt.set(D.x,D.y,D.z,D.w):rt.set(D,te,de,fe),Ke.viewport(j.copy(rt).multiplyScalar(X).round())},this.getScissor=function(D){return D.copy(ve)},this.setScissor=function(D,te,de,fe){D.isVector4?ve.set(D.x,D.y,D.z,D.w):ve.set(D,te,de,fe),Ke.scissor(me.copy(ve).multiplyScalar(X).round())},this.getScissorTest=function(){return oe},this.setScissorTest=function(D){Ke.setScissorTest(oe=D)},this.setOpaqueSort=function(D){_e=D},this.setTransparentSort=function(D){ze=D},this.getClearColor=function(D){return D.copy(Ct.getClearColor())},this.setClearColor=function(){Ct.setClearColor(...arguments)},this.getClearAlpha=function(){return Ct.getClearAlpha()},this.setClearAlpha=function(){Ct.setClearAlpha(...arguments)},this.clear=function(D=!0,te=!0,de=!0){let fe=0;if(D){let ie=!1;if(W!==null){let Be=W.texture.format;ie=Be===xb||Be===_b||Be===yb}if(ie){let Be=W.texture.type,et=Be===Aa||Be===pu||Be===ap||Be===cp||Be===mb||Be===gb,lt=Ct.getClearColor(),ht=Ct.getClearAlpha(),Bt=lt.r,kt=lt.g,St=lt.b;et?(v[0]=Bt,v[1]=kt,v[2]=St,v[3]=ht,H.clearBufferuiv(H.COLOR,0,v)):(x[0]=Bt,x[1]=kt,x[2]=St,x[3]=ht,H.clearBufferiv(H.COLOR,0,x))}else fe|=H.COLOR_BUFFER_BIT}te&&(fe|=H.DEPTH_BUFFER_BIT),de&&(fe|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",it,!1),t.removeEventListener("webglcontextcreationerror",Je,!1),Ct.dispose(),xt.dispose(),bt.dispose(),mt.dispose(),M.dispose(),se.dispose(),pe.dispose(),Bn.dispose(),Z.dispose(),Ye.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",yu),ge.removeEventListener("sessionend",Fa),as.stop()};function Te(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function it(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;let D=Ht.autoReset,te=ot.enabled,de=ot.autoUpdate,fe=ot.needsUpdate,ie=ot.type;Qe(),Ht.autoReset=D,ot.enabled=te,ot.autoUpdate=de,ot.needsUpdate=fe,ot.type=ie}function Je(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function Lt(D){let te=D.target;te.removeEventListener("dispose",Lt),Kn(te)}function Kn(D){Oi(D),mt.remove(D)}function Oi(D){let te=mt.get(D).programs;te!==void 0&&(te.forEach(function(de){Ye.releaseProgram(de)}),D.isShaderMaterial&&Ye.releaseShaderCache(D))}this.renderBufferDirect=function(D,te,de,fe,ie,Be){te===null&&(te=at);let et=ie.isMesh&&ie.matrixWorld.determinant()<0,lt=FC(D,te,de,fe,ie);Ke.setMaterial(fe,et);let ht=de.index,Bt=1;if(fe.wireframe===!0){if(ht=Re.getWireframeAttribute(de),ht===void 0)return;Bt=2}let kt=de.drawRange,St=de.attributes.position,vn=kt.start*Bt,Tn=(kt.start+kt.count)*Bt;Be!==null&&(vn=Math.max(vn,Be.start*Bt),Tn=Math.min(Tn,(Be.start+Be.count)*Bt)),ht!==null?(vn=Math.max(vn,0),Tn=Math.min(Tn,ht.count)):St!=null&&(vn=Math.max(vn,0),Tn=Math.min(Tn,St.count));let wi=Tn-vn;if(wi<0||wi===1/0)return;Bn.setup(ie,fe,lt,de,ht);let ii,En=st;if(ht!==null&&(ii=be.get(ht),En=ln,En.setIndex(ii)),ie.isMesh)fe.wireframe===!0?(Ke.setLineWidth(fe.wireframeLinewidth*ft()),En.setMode(H.LINES)):En.setMode(H.TRIANGLES);else if(ie.isLine){let Et=fe.linewidth;Et===void 0&&(Et=1),Ke.setLineWidth(Et*ft()),ie.isLineSegments?En.setMode(H.LINES):ie.isLineLoop?En.setMode(H.LINE_LOOP):En.setMode(H.LINE_STRIP)}else ie.isPoints?En.setMode(H.POINTS):ie.isSprite&&En.setMode(H.TRIANGLES);if(ie.isBatchedMesh)if(ie._multiDrawInstances!==null)w0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),En.renderMultiDrawInstances(ie._multiDrawStarts,ie._multiDrawCounts,ie._multiDrawCount,ie._multiDrawInstances);else if($e.get("WEBGL_multi_draw"))En.renderMultiDraw(ie._multiDrawStarts,ie._multiDrawCounts,ie._multiDrawCount);else{let Et=ie._multiDrawStarts,Ii=ie._multiDrawCounts,In=ie._multiDrawCount,Oo=ht?be.get(ht).bytesPerElement:1,pl=mt.get(fe).currentProgram.getUniforms();for(let Mr=0;Mr<In;Mr++)pl.setValue(H,"_gl_DrawID",Mr),En.render(Et[Mr]/Oo,Ii[Mr])}else if(ie.isInstancedMesh)En.renderInstances(vn,wi,ie.count);else if(de.isInstancedBufferGeometry){let Et=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,Ii=Math.min(de.instanceCount,Et);En.renderInstances(vn,wi,Ii)}else En.render(vn,wi)};function Sn(D,te,de){D.transparent===!0&&D.side===Us&&D.forceSinglePass===!1?(D.side=Yr,D.needsUpdate=!0,ef(D,te,de),D.side=Ca,D.needsUpdate=!0,ef(D,te,de),D.side=Us):ef(D,te,de)}this.compile=function(D,te,de=null){de===null&&(de=D),_=bt.get(de),_.init(te),S.push(_),de.traverseVisible(function(ie){ie.isLight&&ie.layers.test(te.layers)&&(_.pushLight(ie),ie.castShadow&&_.pushShadow(ie))}),D!==de&&D.traverseVisible(function(ie){ie.isLight&&ie.layers.test(te.layers)&&(_.pushLight(ie),ie.castShadow&&_.pushShadow(ie))}),_.setupLights();let fe=new Set;return D.traverse(function(ie){if(!(ie.isMesh||ie.isPoints||ie.isLine||ie.isSprite))return;let Be=ie.material;if(Be)if(Array.isArray(Be))for(let et=0;et<Be.length;et++){let lt=Be[et];Sn(lt,de,ie),fe.add(lt)}else Sn(Be,de,ie),fe.add(Be)}),_=S.pop(),fe},this.compileAsync=function(D,te,de=null){let fe=this.compile(D,te,de);return new Promise(ie=>{function Be(){if(fe.forEach(function(et){mt.get(et).currentProgram.isReady()&&fe.delete(et)}),fe.size===0){ie(D);return}setTimeout(Be,10)}$e.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let or=null;function to(D){or&&or(D)}function yu(){as.stop()}function Fa(){as.start()}let as=new jz;as.setAnimationLoop(to),typeof self<"u"&&as.setContext(self),this.setAnimationLoop=function(D){or=D,ge.setAnimationLoop(D),D===null?as.stop():as.start()},ge.addEventListener("sessionstart",yu),ge.addEventListener("sessionend",Fa),this.render=function(D,te){if(te!==void 0&&te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;if(D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),te.parent===null&&te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),ge.enabled===!0&&ge.isPresenting===!0&&(ge.cameraAutoUpdate===!0&&ge.updateCamera(te),te=ge.getCamera()),D.isScene===!0&&D.onBeforeRender(C,D,te,W),_=bt.get(D,S.length),_.init(te),S.push(_),je.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),B.setFromProjectionMatrix(je),xe=this.localClippingEnabled,Q=Ne.init(this.clippingPlanes,xe),y=xt.get(D,E.length),y.init(),E.push(y),ge.enabled===!0&&ge.isPresenting===!0){let Be=C.xr.getDepthSensingMesh();Be!==null&&bc(Be,te,-1/0,C.sortObjects)}bc(D,te,0,C.sortObjects),y.finish(),C.sortObjects===!0&&y.sort(_e,ze),gt=ge.enabled===!1||ge.isPresenting===!1||ge.hasDepthSensing()===!1,gt&&Ct.addToRenderList(y,D),this.info.render.frame++,Q===!0&&Ne.beginShadows();let de=_.state.shadowsArray;ot.render(de,D,te),Q===!0&&Ne.endShadows(),this.info.autoReset===!0&&this.info.reset();let fe=y.opaque,ie=y.transmissive;if(_.setupLights(),te.isArrayCamera){let Be=te.cameras;if(ie.length>0)for(let et=0,lt=Be.length;et<lt;et++){let ht=Be[et];Cc(fe,ie,D,ht)}gt&&Ct.render(D);for(let et=0,lt=Be.length;et<lt;et++){let ht=Be[et];Ws(y,D,ht,ht.viewport)}}else ie.length>0&&Cc(fe,ie,D,te),gt&&Ct.render(D),Ws(y,D,te);W!==null&&L===0&&(N.updateMultisampleRenderTarget(W),N.updateRenderTargetMipmap(W)),D.isScene===!0&&D.onAfterRender(C,D,te),Bn.resetDefaultState(),O=-1,R=null,S.pop(),S.length>0?(_=S[S.length-1],Q===!0&&Ne.setGlobalState(C.clippingPlanes,_.state.camera)):_=null,E.pop(),E.length>0?y=E[E.length-1]:y=null};function bc(D,te,de,fe){if(D.visible===!1)return;if(D.layers.test(te.layers)){if(D.isGroup)de=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(te);else if(D.isLight)_.pushLight(D),D.castShadow&&_.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||B.intersectsSprite(D)){fe&&Ue.setFromMatrixPosition(D.matrixWorld).applyMatrix4(je);let et=pe.update(D),lt=D.material;lt.visible&&y.push(D,et,lt,de,Ue.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||B.intersectsObject(D))){let et=pe.update(D),lt=D.material;if(fe&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),Ue.copy(D.boundingSphere.center)):(et.boundingSphere===null&&et.computeBoundingSphere(),Ue.copy(et.boundingSphere.center)),Ue.applyMatrix4(D.matrixWorld).applyMatrix4(je)),Array.isArray(lt)){let ht=et.groups;for(let Bt=0,kt=ht.length;Bt<kt;Bt++){let St=ht[Bt],vn=lt[St.materialIndex];vn&&vn.visible&&y.push(D,et,vn,de,Ue.z,St)}}else lt.visible&&y.push(D,et,lt,de,Ue.z,null)}}let Be=D.children;for(let et=0,lt=Be.length;et<lt;et++)bc(Be[et],te,de,fe)}function Ws(D,te,de,fe){let ie=D.opaque,Be=D.transmissive,et=D.transparent;_.setupLightsView(de),Q===!0&&Ne.setGlobalState(C.clippingPlanes,de),fe&&Ke.viewport(j.copy(fe)),ie.length>0&&ls(ie,te,de),Be.length>0&&ls(Be,te,de),et.length>0&&ls(et,te,de),Ke.buffers.depth.setTest(!0),Ke.buffers.depth.setMask(!0),Ke.buffers.color.setMask(!0),Ke.setPolygonOffset(!1)}function Cc(D,te,de,fe){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[fe.id]===void 0&&(_.state.transmissionRenderTarget[fe.id]=new ol(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")||$e.has("EXT_color_buffer_float")?lp:Aa,minFilter:Ia,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:zt.workingColorSpace}));let Be=_.state.transmissionRenderTarget[fe.id],et=fe.viewport||j;Be.setSize(et.z*C.transmissionResolutionScale,et.w*C.transmissionResolutionScale);let lt=C.getRenderTarget();C.setRenderTarget(Be),C.getClearColor(De),Ce=C.getClearAlpha(),Ce<1&&C.setClearColor(16777215,.5),C.clear(),gt&&Ct.render(de);let ht=C.toneMapping;C.toneMapping=lc;let Bt=fe.viewport;if(fe.viewport!==void 0&&(fe.viewport=void 0),_.setupLightsView(fe),Q===!0&&Ne.setGlobalState(C.clippingPlanes,fe),ls(D,de,fe),N.updateMultisampleRenderTarget(Be),N.updateRenderTargetMipmap(Be),$e.has("WEBGL_multisampled_render_to_texture")===!1){let kt=!1;for(let St=0,vn=te.length;St<vn;St++){let Tn=te[St],wi=Tn.object,ii=Tn.geometry,En=Tn.material,Et=Tn.group;if(En.side===Us&&wi.layers.test(fe.layers)){let Ii=En.side;En.side=Yr,En.needsUpdate=!0,Z0(wi,de,fe,ii,En,Et),En.side=Ii,En.needsUpdate=!0,kt=!0}}kt===!0&&(N.updateMultisampleRenderTarget(Be),N.updateRenderTargetMipmap(Be))}C.setRenderTarget(lt),C.setClearColor(De,Ce),Bt!==void 0&&(fe.viewport=Bt),C.toneMapping=ht}function ls(D,te,de){let fe=te.isScene===!0?te.overrideMaterial:null;for(let ie=0,Be=D.length;ie<Be;ie++){let et=D[ie],lt=et.object,ht=et.geometry,Bt=et.group,kt=et.material;kt.allowOverride===!0&&fe!==null&&(kt=fe),lt.layers.test(de.layers)&&Z0(lt,te,de,ht,kt,Bt)}}function Z0(D,te,de,fe,ie,Be){D.onBeforeRender(C,te,de,fe,ie,Be),D.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),ie.onBeforeRender(C,te,de,fe,D,Be),ie.transparent===!0&&ie.side===Us&&ie.forceSinglePass===!1?(ie.side=Yr,ie.needsUpdate=!0,C.renderBufferDirect(de,te,fe,ie,D,Be),ie.side=Ca,ie.needsUpdate=!0,C.renderBufferDirect(de,te,fe,ie,D,Be),ie.side=Us):C.renderBufferDirect(de,te,fe,ie,D,Be),D.onAfterRender(C,te,de,fe,ie,Be)}function ef(D,te,de){te.isScene!==!0&&(te=at);let fe=mt.get(D),ie=_.state.lights,Be=_.state.shadowsArray,et=ie.state.version,lt=Ye.getParameters(D,ie.state,Be,te,de),ht=Ye.getProgramCacheKey(lt),Bt=fe.programs;fe.environment=D.isMeshStandardMaterial?te.environment:null,fe.fog=te.fog,fe.envMap=(D.isMeshStandardMaterial?se:M).get(D.envMap||fe.environment),fe.envMapRotation=fe.environment!==null&&D.envMap===null?te.environmentRotation:D.envMapRotation,Bt===void 0&&(D.addEventListener("dispose",Lt),Bt=new Map,fe.programs=Bt);let kt=Bt.get(ht);if(kt!==void 0){if(fe.currentProgram===kt&&fe.lightsStateVersion===et)return K0(D,lt),kt}else lt.uniforms=Ye.getUniforms(D),D.onBeforeCompile(lt,C),kt=Ye.acquireProgram(lt,ht),Bt.set(ht,kt),fe.uniforms=lt.uniforms;let St=fe.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(St.clippingPlanes=Ne.uniform),K0(D,lt),fe.needsLights=LC(D),fe.lightsStateVersion=et,fe.needsLights&&(St.ambientLightColor.value=ie.state.ambient,St.lightProbe.value=ie.state.probe,St.directionalLights.value=ie.state.directional,St.directionalLightShadows.value=ie.state.directionalShadow,St.spotLights.value=ie.state.spot,St.spotLightShadows.value=ie.state.spotShadow,St.rectAreaLights.value=ie.state.rectArea,St.ltc_1.value=ie.state.rectAreaLTC1,St.ltc_2.value=ie.state.rectAreaLTC2,St.pointLights.value=ie.state.point,St.pointLightShadows.value=ie.state.pointShadow,St.hemisphereLights.value=ie.state.hemi,St.directionalShadowMap.value=ie.state.directionalShadowMap,St.directionalShadowMatrix.value=ie.state.directionalShadowMatrix,St.spotShadowMap.value=ie.state.spotShadowMap,St.spotLightMatrix.value=ie.state.spotLightMatrix,St.spotLightMap.value=ie.state.spotLightMap,St.pointShadowMap.value=ie.state.pointShadowMap,St.pointShadowMatrix.value=ie.state.pointShadowMatrix),fe.currentProgram=kt,fe.uniformsList=null,kt}function Mp(D){if(D.uniformsList===null){let te=D.currentProgram.getUniforms();D.uniformsList=pp.seqWithValue(te.seq,D.uniforms)}return D.uniformsList}function K0(D,te){let de=mt.get(D);de.outputColorSpace=te.outputColorSpace,de.batching=te.batching,de.batchingColor=te.batchingColor,de.instancing=te.instancing,de.instancingColor=te.instancingColor,de.instancingMorph=te.instancingMorph,de.skinning=te.skinning,de.morphTargets=te.morphTargets,de.morphNormals=te.morphNormals,de.morphColors=te.morphColors,de.morphTargetsCount=te.morphTargetsCount,de.numClippingPlanes=te.numClippingPlanes,de.numIntersection=te.numClipIntersection,de.vertexAlphas=te.vertexAlphas,de.vertexTangents=te.vertexTangents,de.toneMapping=te.toneMapping}function FC(D,te,de,fe,ie){te.isScene!==!0&&(te=at),N.resetTextureUnits();let Be=te.fog,et=fe.isMeshStandardMaterial?te.environment:null,lt=W===null?C.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:Cr,ht=(fe.isMeshStandardMaterial?se:M).get(fe.envMap||et),Bt=fe.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,kt=!!de.attributes.tangent&&(!!fe.normalMap||fe.anisotropy>0),St=!!de.morphAttributes.position,vn=!!de.morphAttributes.normal,Tn=!!de.morphAttributes.color,wi=lc;fe.toneMapped&&(W===null||W.isXRRenderTarget===!0)&&(wi=C.toneMapping);let ii=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,En=ii!==void 0?ii.length:0,Et=mt.get(fe),Ii=_.state.lights;if(Q===!0&&(xe===!0||D!==R)){let qi=D===R&&fe.id===O;Ne.setState(fe,D,qi)}let In=!1;fe.version===Et.__version?(Et.needsLights&&Et.lightsStateVersion!==Ii.state.version||Et.outputColorSpace!==lt||ie.isBatchedMesh&&Et.batching===!1||!ie.isBatchedMesh&&Et.batching===!0||ie.isBatchedMesh&&Et.batchingColor===!0&&ie.colorTexture===null||ie.isBatchedMesh&&Et.batchingColor===!1&&ie.colorTexture!==null||ie.isInstancedMesh&&Et.instancing===!1||!ie.isInstancedMesh&&Et.instancing===!0||ie.isSkinnedMesh&&Et.skinning===!1||!ie.isSkinnedMesh&&Et.skinning===!0||ie.isInstancedMesh&&Et.instancingColor===!0&&ie.instanceColor===null||ie.isInstancedMesh&&Et.instancingColor===!1&&ie.instanceColor!==null||ie.isInstancedMesh&&Et.instancingMorph===!0&&ie.morphTexture===null||ie.isInstancedMesh&&Et.instancingMorph===!1&&ie.morphTexture!==null||Et.envMap!==ht||fe.fog===!0&&Et.fog!==Be||Et.numClippingPlanes!==void 0&&(Et.numClippingPlanes!==Ne.numPlanes||Et.numIntersection!==Ne.numIntersection)||Et.vertexAlphas!==Bt||Et.vertexTangents!==kt||Et.morphTargets!==St||Et.morphNormals!==vn||Et.morphColors!==Tn||Et.toneMapping!==wi||Et.morphTargetsCount!==En)&&(In=!0):(In=!0,Et.__version=fe.version);let Oo=Et.currentProgram;In===!0&&(Oo=ef(fe,te,ie));let pl=!1,Mr=!1,ml=!1,ri=Oo.getUniforms(),Ur=Et.uniforms;if(Ke.useProgram(Oo.program)&&(pl=!0,Mr=!0,ml=!0),fe.id!==O&&(O=fe.id,Mr=!0),pl||R!==D){Ke.buffers.depth.getReversed()?(le.copy(D.projectionMatrix),uz(le),dz(le),ri.setValue(H,"projectionMatrix",le)):ri.setValue(H,"projectionMatrix",D.projectionMatrix),ri.setValue(H,"viewMatrix",D.matrixWorldInverse);let Fi=ri.map.cameraPosition;Fi!==void 0&&Fi.setValue(H,We.setFromMatrixPosition(D.matrixWorld)),Rt.logarithmicDepthBuffer&&ri.setValue(H,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&ri.setValue(H,"isOrthographic",D.isOrthographicCamera===!0),R!==D&&(R=D,Mr=!0,ml=!0)}if(ie.isSkinnedMesh){ri.setOptional(H,ie,"bindMatrix"),ri.setOptional(H,ie,"bindMatrixInverse");let qi=ie.skeleton;qi&&(qi.boneTexture===null&&qi.computeBoneTexture(),ri.setValue(H,"boneTexture",qi.boneTexture,N))}ie.isBatchedMesh&&(ri.setOptional(H,ie,"batchingTexture"),ri.setValue(H,"batchingTexture",ie._matricesTexture,N),ri.setOptional(H,ie,"batchingIdTexture"),ri.setValue(H,"batchingIdTexture",ie._indirectTexture,N),ri.setOptional(H,ie,"batchingColorTexture"),ie._colorsTexture!==null&&ri.setValue(H,"batchingColorTexture",ie._colorsTexture,N));let Tr=de.morphAttributes;if((Tr.position!==void 0||Tr.normal!==void 0||Tr.color!==void 0)&&Mt.update(ie,de,Oo),(Mr||Et.receiveShadow!==ie.receiveShadow)&&(Et.receiveShadow=ie.receiveShadow,ri.setValue(H,"receiveShadow",ie.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(Ur.envMap.value=ht,Ur.flipEnvMap.value=ht.isCubeTexture&&ht.isRenderTargetTexture===!1?-1:1),fe.isMeshStandardMaterial&&fe.envMap===null&&te.environment!==null&&(Ur.envMapIntensity.value=te.environmentIntensity),Mr&&(ri.setValue(H,"toneMappingExposure",C.toneMappingExposure),Et.needsLights&&NC(Ur,ml),Be&&fe.fog===!0&&Ze.refreshFogUniforms(Ur,Be),Ze.refreshMaterialUniforms(Ur,fe,X,re,_.state.transmissionRenderTarget[D.id]),pp.upload(H,Mp(Et),Ur,N)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(pp.upload(H,Mp(Et),Ur,N),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&ri.setValue(H,"center",ie.center),ri.setValue(H,"modelViewMatrix",ie.modelViewMatrix),ri.setValue(H,"normalMatrix",ie.normalMatrix),ri.setValue(H,"modelMatrix",ie.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){let qi=fe.uniformsGroups;for(let Fi=0,nf=qi.length;Fi<nf;Fi++){let Na=qi[Fi];Z.update(Na,Oo),Z.bind(Na,Oo)}}return Oo}function NC(D,te){D.ambientLightColor.needsUpdate=te,D.lightProbe.needsUpdate=te,D.directionalLights.needsUpdate=te,D.directionalLightShadows.needsUpdate=te,D.pointLights.needsUpdate=te,D.pointLightShadows.needsUpdate=te,D.spotLights.needsUpdate=te,D.spotLightShadows.needsUpdate=te,D.rectAreaLights.needsUpdate=te,D.hemisphereLights.needsUpdate=te}function LC(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return W},this.setRenderTargetTextures=function(D,te,de){let fe=mt.get(D);fe.__autoAllocateDepthBuffer=D.resolveDepthBuffer===!1,fe.__autoAllocateDepthBuffer===!1&&(fe.__useRenderToTexture=!1),mt.get(D.texture).__webglTexture=te,mt.get(D.depthTexture).__webglTexture=fe.__autoAllocateDepthBuffer?void 0:de,fe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(D,te){let de=mt.get(D);de.__webglFramebuffer=te,de.__useDefaultFramebuffer=te===void 0};let kC=H.createFramebuffer();this.setRenderTarget=function(D,te=0,de=0){W=D,F=te,L=de;let fe=!0,ie=null,Be=!1,et=!1;if(D){let ht=mt.get(D);if(ht.__useDefaultFramebuffer!==void 0)Ke.bindFramebuffer(H.FRAMEBUFFER,null),fe=!1;else if(ht.__webglFramebuffer===void 0)N.setupRenderTarget(D);else if(ht.__hasExternalTextures)N.rebindTextures(D,mt.get(D.texture).__webglTexture,mt.get(D.depthTexture).__webglTexture);else if(D.depthBuffer){let St=D.depthTexture;if(ht.__boundDepthTexture!==St){if(St!==null&&mt.has(St)&&(D.width!==St.image.width||D.height!==St.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");N.setupDepthRenderbuffer(D)}}let Bt=D.texture;(Bt.isData3DTexture||Bt.isDataArrayTexture||Bt.isCompressedArrayTexture)&&(et=!0);let kt=mt.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(kt[te])?ie=kt[te][de]:ie=kt[te],Be=!0):D.samples>0&&N.useMultisampledRTT(D)===!1?ie=mt.get(D).__webglMultisampledFramebuffer:Array.isArray(kt)?ie=kt[de]:ie=kt,j.copy(D.viewport),me.copy(D.scissor),ue=D.scissorTest}else j.copy(rt).multiplyScalar(X).floor(),me.copy(ve).multiplyScalar(X).floor(),ue=oe;if(de!==0&&(ie=kC),Ke.bindFramebuffer(H.FRAMEBUFFER,ie)&&fe&&Ke.drawBuffers(D,ie),Ke.viewport(j),Ke.scissor(me),Ke.setScissorTest(ue),Be){let ht=mt.get(D.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+te,ht.__webglTexture,de)}else if(et){let ht=mt.get(D.texture),Bt=te;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,ht.__webglTexture,de,Bt)}else if(D!==null&&de!==0){let ht=mt.get(D.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,ht.__webglTexture,de)}O=-1},this.readRenderTargetPixels=function(D,te,de,fe,ie,Be,et){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=mt.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&et!==void 0&&(lt=lt[et]),lt){Ke.bindFramebuffer(H.FRAMEBUFFER,lt);try{let ht=D.texture,Bt=ht.format,kt=ht.type;if(!Rt.textureFormatReadable(Bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Rt.textureTypeReadable(kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te>=0&&te<=D.width-fe&&de>=0&&de<=D.height-ie&&H.readPixels(te,de,fe,ie,jt.convert(Bt),jt.convert(kt),Be)}finally{let ht=W!==null?mt.get(W).__webglFramebuffer:null;Ke.bindFramebuffer(H.FRAMEBUFFER,ht)}}},this.readRenderTargetPixelsAsync=function(D,te,de,fe,ie,Be,et){return Ge(this,null,function*(){if(!(D&&D.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let lt=mt.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&et!==void 0&&(lt=lt[et]),lt)if(te>=0&&te<=D.width-fe&&de>=0&&de<=D.height-ie){Ke.bindFramebuffer(H.FRAMEBUFFER,lt);let ht=D.texture,Bt=ht.format,kt=ht.type;if(!Rt.textureFormatReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Rt.textureTypeReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let St=H.createBuffer();H.bindBuffer(H.PIXEL_PACK_BUFFER,St),H.bufferData(H.PIXEL_PACK_BUFFER,Be.byteLength,H.STREAM_READ),H.readPixels(te,de,fe,ie,jt.convert(Bt),jt.convert(kt),0);let vn=W!==null?mt.get(W).__webglFramebuffer:null;Ke.bindFramebuffer(H.FRAMEBUFFER,vn);let Tn=H.fenceSync(H.SYNC_GPU_COMMANDS_COMPLETE,0);return H.flush(),yield cz(H,Tn,4),H.bindBuffer(H.PIXEL_PACK_BUFFER,St),H.getBufferSubData(H.PIXEL_PACK_BUFFER,0,Be),H.deleteBuffer(St),H.deleteSync(Tn),Be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(D,te=null,de=0){let fe=Math.pow(2,-de),ie=Math.floor(D.image.width*fe),Be=Math.floor(D.image.height*fe),et=te!==null?te.x:0,lt=te!==null?te.y:0;N.setTexture2D(D,0),H.copyTexSubImage2D(H.TEXTURE_2D,de,0,0,et,lt,ie,Be),Ke.unbindTexture()};let UC=H.createFramebuffer(),tf=H.createFramebuffer();this.copyTextureToTexture=function(D,te,de=null,fe=null,ie=0,Be=null){Be===null&&(ie!==0?(w0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Be=ie,ie=0):Be=0);let et,lt,ht,Bt,kt,St,vn,Tn,wi,ii=D.isCompressedTexture?D.mipmaps[Be]:D.image;if(de!==null)et=de.max.x-de.min.x,lt=de.max.y-de.min.y,ht=de.isBox3?de.max.z-de.min.z:1,Bt=de.min.x,kt=de.min.y,St=de.isBox3?de.min.z:0;else{let Tr=Math.pow(2,-ie);et=Math.floor(ii.width*Tr),lt=Math.floor(ii.height*Tr),D.isDataArrayTexture?ht=ii.depth:D.isData3DTexture?ht=Math.floor(ii.depth*Tr):ht=1,Bt=0,kt=0,St=0}fe!==null?(vn=fe.x,Tn=fe.y,wi=fe.z):(vn=0,Tn=0,wi=0);let En=jt.convert(te.format),Et=jt.convert(te.type),Ii;te.isData3DTexture?(N.setTexture3D(te,0),Ii=H.TEXTURE_3D):te.isDataArrayTexture||te.isCompressedArrayTexture?(N.setTexture2DArray(te,0),Ii=H.TEXTURE_2D_ARRAY):(N.setTexture2D(te,0),Ii=H.TEXTURE_2D),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,te.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,te.unpackAlignment);let In=H.getParameter(H.UNPACK_ROW_LENGTH),Oo=H.getParameter(H.UNPACK_IMAGE_HEIGHT),pl=H.getParameter(H.UNPACK_SKIP_PIXELS),Mr=H.getParameter(H.UNPACK_SKIP_ROWS),ml=H.getParameter(H.UNPACK_SKIP_IMAGES);H.pixelStorei(H.UNPACK_ROW_LENGTH,ii.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,ii.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Bt),H.pixelStorei(H.UNPACK_SKIP_ROWS,kt),H.pixelStorei(H.UNPACK_SKIP_IMAGES,St);let ri=D.isDataArrayTexture||D.isData3DTexture,Ur=te.isDataArrayTexture||te.isData3DTexture;if(D.isDepthTexture){let Tr=mt.get(D),qi=mt.get(te),Fi=mt.get(Tr.__renderTarget),nf=mt.get(qi.__renderTarget);Ke.bindFramebuffer(H.READ_FRAMEBUFFER,Fi.__webglFramebuffer),Ke.bindFramebuffer(H.DRAW_FRAMEBUFFER,nf.__webglFramebuffer);for(let Na=0;Na<ht;Na++)ri&&(H.framebufferTextureLayer(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,mt.get(D).__webglTexture,ie,St+Na),H.framebufferTextureLayer(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,mt.get(te).__webglTexture,Be,wi+Na)),H.blitFramebuffer(Bt,kt,et,lt,vn,Tn,et,lt,H.DEPTH_BUFFER_BIT,H.NEAREST);Ke.bindFramebuffer(H.READ_FRAMEBUFFER,null),Ke.bindFramebuffer(H.DRAW_FRAMEBUFFER,null)}else if(ie!==0||D.isRenderTargetTexture||mt.has(D)){let Tr=mt.get(D),qi=mt.get(te);Ke.bindFramebuffer(H.READ_FRAMEBUFFER,UC),Ke.bindFramebuffer(H.DRAW_FRAMEBUFFER,tf);for(let Fi=0;Fi<ht;Fi++)ri?H.framebufferTextureLayer(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,Tr.__webglTexture,ie,St+Fi):H.framebufferTexture2D(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Tr.__webglTexture,ie),Ur?H.framebufferTextureLayer(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,qi.__webglTexture,Be,wi+Fi):H.framebufferTexture2D(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,qi.__webglTexture,Be),ie!==0?H.blitFramebuffer(Bt,kt,et,lt,vn,Tn,et,lt,H.COLOR_BUFFER_BIT,H.NEAREST):Ur?H.copyTexSubImage3D(Ii,Be,vn,Tn,wi+Fi,Bt,kt,et,lt):H.copyTexSubImage2D(Ii,Be,vn,Tn,Bt,kt,et,lt);Ke.bindFramebuffer(H.READ_FRAMEBUFFER,null),Ke.bindFramebuffer(H.DRAW_FRAMEBUFFER,null)}else Ur?D.isDataTexture||D.isData3DTexture?H.texSubImage3D(Ii,Be,vn,Tn,wi,et,lt,ht,En,Et,ii.data):te.isCompressedArrayTexture?H.compressedTexSubImage3D(Ii,Be,vn,Tn,wi,et,lt,ht,En,ii.data):H.texSubImage3D(Ii,Be,vn,Tn,wi,et,lt,ht,En,Et,ii):D.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,Be,vn,Tn,et,lt,En,Et,ii.data):D.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,Be,vn,Tn,ii.width,ii.height,En,ii.data):H.texSubImage2D(H.TEXTURE_2D,Be,vn,Tn,et,lt,En,Et,ii);H.pixelStorei(H.UNPACK_ROW_LENGTH,In),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Oo),H.pixelStorei(H.UNPACK_SKIP_PIXELS,pl),H.pixelStorei(H.UNPACK_SKIP_ROWS,Mr),H.pixelStorei(H.UNPACK_SKIP_IMAGES,ml),Be===0&&te.generateMipmaps&&H.generateMipmap(Ii),Ke.unbindTexture()},this.copyTextureToTexture3D=function(D,te,de=null,fe=null,ie=0){return w0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(D,te,de,fe,ie)},this.initRenderTarget=function(D){mt.get(D).__webglFramebuffer===void 0&&N.setupRenderTarget(D)},this.initTexture=function(D){D.isCubeTexture?N.setTextureCube(D,0):D.isData3DTexture?N.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?N.setTexture2DArray(D,0):N.setTexture2D(D,0),Ke.unbindTexture()},this.resetState=function(){F=0,L=0,W=null,Ke.reset(),Bn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return il}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=zt._getDrawingBufferColorSpace(e),t.unpackColorSpace=zt._getUnpackColorSpace()}};var Xz={type:"change"},SD={type:"start"},Zz={type:"end"},Qb=new sl,Yz=new Os,dde=Math.cos(70*ti.DEG2RAD),rr=new V,Do=2*Math.PI,Zn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},CD=1e-6,eC=class extends d0{constructor(e,t=null){super(e,t),this.state=Zn.NONE,this.target=new V,this.cursor=new V,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:fu.ROTATE,MIDDLE:fu.DOLLY,RIGHT:fu.PAN},this.touches={ONE:hu.ROTATE,TWO:hu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new V,this._lastQuaternion=new yi,this._lastTargetPosition=new V,this._quat=new yi().setFromUnitVectors(e.up,new V(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new rp,this._sphericalDelta=new rp,this._scale=1,this._panOffset=new V,this._rotateStart=new qe,this._rotateEnd=new qe,this._rotateDelta=new qe,this._panStart=new qe,this._panEnd=new qe,this._panDelta=new qe,this._dollyStart=new qe,this._dollyEnd=new qe,this._dollyDelta=new qe,this._dollyDirection=new V,this._mouse=new qe,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=hde.bind(this),this._onPointerDown=fde.bind(this),this._onPointerUp=pde.bind(this),this._onContextMenu=wde.bind(this),this._onMouseWheel=vde.bind(this),this._onKeyDown=yde.bind(this),this._onTouchStart=_de.bind(this),this._onTouchMove=xde.bind(this),this._onMouseDown=mde.bind(this),this._onMouseMove=gde.bind(this),this._interceptControlDown=bde.bind(this),this._interceptControlUp=Cde.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Xz),this.update(),this.state=Zn.NONE}update(e=null){let t=this.object.position;rr.copy(t).sub(this.target),rr.applyQuaternion(this._quat),this._spherical.setFromVector3(rr),this.autoRotate&&this.state===Zn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=Do:i>Math.PI&&(i-=Do),r<-Math.PI?r+=Do:r>Math.PI&&(r-=Do),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(rr.setFromSpherical(this._spherical),rr.applyQuaternion(this._quatInverse),t.copy(this.target).add(rr),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){let a=rr.length();s=this._clampDistance(a*this._scale);let l=a-s;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),o=!!l}else if(this.object.isOrthographicCamera){let a=new V(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=l!==this.object.zoom;let u=new V(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),s=rr.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(Qb.origin.copy(this.object.position),Qb.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Qb.direction))<dde?this.object.lookAt(this.target):(Yz.setFromNormalAndCoplanarPoint(this.object.up,this.target),Qb.intersectPlane(Yz,this.target))))}else if(this.object.isOrthographicCamera){let s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>CD||8*(1-this._lastQuaternion.dot(this.object.quaternion))>CD||this._lastTargetPosition.distanceToSquared(this.target)>CD?(this.dispatchEvent(Xz),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Do/60*this.autoRotateSpeed*e:Do/60/60*this.autoRotateSpeed}_getZoomScale(e){let t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){rr.setFromMatrixColumn(t,0),rr.multiplyScalar(-e),this._panOffset.add(rr)}_panUp(e,t){this.screenSpacePanning===!0?rr.setFromMatrixColumn(t,1):(rr.setFromMatrixColumn(t,0),rr.crossVectors(this.object.up,rr)),rr.multiplyScalar(e),this._panOffset.add(rr)}_pan(e,t){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;rr.copy(r).sub(this.target);let o=rr.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/i.clientHeight,this.object.matrix),this._panUp(2*t*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=e-i.left,o=t-i.top,s=i.width,a=i.height;this._mouse.x=r/s*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(Do*this._rotateDelta.x/t.clientHeight),this._rotateUp(Do*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Do*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Do*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Do*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Do*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{let i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),o=.5*(e.pageY+i.y);this._rotateEnd.set(r,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(Do*this._rotateDelta.x/t.clientHeight),this._rotateUp(Do*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let s=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new qe,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){let t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function fde(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function hde(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function pde(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Zz),this.state=Zn.NONE;break;case 1:let e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function mde(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case fu.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Zn.DOLLY;break;case fu.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Zn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Zn.ROTATE}break;case fu.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Zn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Zn.PAN}break;default:this.state=Zn.NONE}this.state!==Zn.NONE&&this.dispatchEvent(SD)}function gde(n){switch(this.state){case Zn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Zn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Zn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function vde(n){this.enabled===!1||this.enableZoom===!1||this.state!==Zn.NONE||(n.preventDefault(),this.dispatchEvent(SD),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(Zz))}function yde(n){this.enabled!==!1&&this._handleKeyDown(n)}function _de(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case hu.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Zn.TOUCH_ROTATE;break;case hu.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Zn.TOUCH_PAN;break;default:this.state=Zn.NONE}break;case 2:switch(this.touches.TWO){case hu.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Zn.TOUCH_DOLLY_PAN;break;case hu.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Zn.TOUCH_DOLLY_ROTATE;break;default:this.state=Zn.NONE}break;default:this.state=Zn.NONE}this.state!==Zn.NONE&&this.dispatchEvent(SD)}function xde(n){switch(this._trackPointer(n),this.state){case Zn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Zn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Zn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Zn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Zn.NONE}}function wde(n){this.enabled!==!1&&n.preventDefault()}function bde(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Cde(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var Sde=["overlay"],Ede=["*"];function Mde(n,e){n&1&&ye(0,"div")}function Tde(n,e){if(n&1&&(I(0,"div"),Pe(1,Mde,1,0,"div",6),A()),n&2){let t=ae(2);A2(t.spinner.class),Fn("color",t.spinner.color),z(),$("ngForOf",t.spinner.divArray)}}function Ide(n,e){if(n&1&&(ye(0,"div",7),_o(1,"safeHtml")),n&2){let t=ae(2);$("innerHTML",xo(1,1,t.template),xN)}}function Ade(n,e){if(n&1&&(I(0,"div",2,0),Pe(2,Tde,2,5,"div",3)(3,Ide,2,3,"div",4),I(4,"div",5),z2(5),A()()),n&2){let t=ae();Fn("background-color",t.spinner.bdColor)("z-index",t.spinner.zIndex)("position",t.spinner.fullScreen?"fixed":"absolute"),$("@.disabled",t.disableAnimation)("@fadeIn","in"),z(2),$("ngIf",!t.template),z(),$("ngIf",t.template),z(),Fn("z-index",t.spinner.zIndex)}}var Dde={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},ED={BD_COLOR:"rgba(51,51,51,0.8)",SPINNER_COLOR:"#fff",Z_INDEX:99999},MD="primary",Hd=class n{constructor(e){Object.assign(this,e)}static create(e){return!e?.template&&!e?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new n(e)}},TD=(()=>{class n{constructor(){this.spinnerObservable=new zn(null)}getSpinner(t){return this.spinnerObservable.asObservable().pipe(Xn(i=>i&&i.name===t))}show(t=MD,i){return new Promise((r,o)=>{setTimeout(()=>{i&&Object.keys(i).length?(i.name=t,this.spinnerObservable.next(new Hd(Ve(q({},i),{show:!0}))),r(!0)):(this.spinnerObservable.next(new Hd({name:t,show:!0})),r(!0))},10)})}hide(t=MD,i=10){return new Promise((r,o)=>{setTimeout(()=>{this.spinnerObservable.next(new Hd({name:t,show:!1})),r(!0)},i)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kz=new Oe("NGX_SPINNER_CONFIG"),Rde=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return t?this.sanitizer.bypassSecurityTrustHtml(t):""}static{this.\u0275fac=function(i){return new(i||n)(ce(x1,16))}}static{this.\u0275pipe=Kf({name:"safeHtml",type:n,pure:!0})}}return n})(),Jz=(()=>{class n{constructor(t,i,r,o){this.spinnerService=t,this.changeDetector=i,this.elementRef=r,this.globalConfig=o,this.disableAnimation=!1,this.spinner=new Hd,this.ngUnsubscribe=new Ln,this.setDefaultOptions=()=>{let{type:s}=this.globalConfig??{};this.spinner=Hd.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??s,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor=ED.BD_COLOR,this.zIndex=ED.Z_INDEX,this.color=ED.SPINNER_COLOR,this.size="large",this.fullScreen=!0,this.name=MD,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(_s(this.ngUnsubscribe)).subscribe(t=>{this.setDefaultOptions(),Object.assign(this.spinner,t),t.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(t){return t===this.elementRef.nativeElement.parentElement?!0:t.parentNode&&this.isSpinnerZone(t.parentNode)}ngOnChanges(t){for(let i in t)if(i){let r=t[i];if(r.isFirstChange())return;typeof r.currentValue<"u"&&r.currentValue!==r.previousValue&&r.currentValue!==""&&(this.spinner[i]=r.currentValue,i==="showSpinner"&&(r.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),i==="name"&&this.initObservable())}}getClass(t,i){this.spinner.divCount=Dde[t],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((o,s)=>s);let r="";switch(i.toLowerCase()){case"small":r="la-sm";break;case"medium":r="la-2x";break;case"large":r="la-3x";break;default:break}return"la-"+t+" "+r}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static{this.\u0275fac=function(i){return new(i||n)(ce(TD),ce(ur),ce(Kt),ce(Kz,8))}}static{this.\u0275cmp=dn({type:n,selectors:[["ngx-spinner"]],viewQuery:function(i,r){if(i&1&&Mi(Sde,5),i&2){let o;ci(o=ui())&&(r.spinnerDOM=o.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[Ji],ngContentSelectors:Ede,decls:1,vars:1,consts:[["overlay",""],["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(i,r){i&1&&(V2(),Pe(0,Ade,6,12,"div",1)),i&2&&$("ngIf",r.spinner.show)},dependencies:[Rde,Rn,gi],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[lI("fadeIn",[cI("in",Xc({opacity:1})),Rx(":enter",[Xc({opacity:0}),Dx(300)]),Rx(":leave",Dx(200,Xc({opacity:0})))])]},changeDetection:0})}}return n})(),Qz=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Kz,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=_r({type:n})}static{this.\u0275inj=yr({})}}return n})();function ID(n,e){if(e===JA)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===dp||e===_0){let t=n.getIndex();if(t===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);n.setIndex(s),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=t.count-2,r=[];if(e===dp)for(let s=1;s<=i;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var tC=class extends is{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ND(t)}),this.register(function(t){return new LD(t)}),this.register(function(t){return new WD(t)}),this.register(function(t){return new $D(t)}),this.register(function(t){return new qD(t)}),this.register(function(t){return new UD(t)}),this.register(function(t){return new BD(t)}),this.register(function(t){return new VD(t)}),this.register(function(t){return new zD(t)}),this.register(function(t){return new FD(t)}),this.register(function(t){return new HD(t)}),this.register(function(t){return new kD(t)}),this.register(function(t){return new GD(t)}),this.register(function(t){return new jD(t)}),this.register(function(t){return new PD(t)}),this.register(function(t){return new XD(t)}),this.register(function(t){return new YD(t)})}load(e,t,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let u=Ta.extractUrlBase(e);s=Ta.resolveURL(u,this.path)}else s=Ta.extractUrlBase(e);this.manager.itemStart(e);let a=function(u){r?r(u):console.error(u),o.manager.itemError(e),o.manager.itemEnd(e)},l=new ll(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{o.parse(u,s,function(f){t(f),o.manager.itemEnd(e)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let o,s={},a={},l=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===rH){try{s[gn.KHR_BINARY_GLTF]=new ZD(e)}catch(h){r&&r(h);return}o=JSON.parse(s[gn.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new iR(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){let h=this.pluginCallbacks[f](u);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){let h=o.extensionsUsed[f],p=o.extensionsRequired||[];switch(h){case gn.KHR_MATERIALS_UNLIT:s[h]=new OD;break;case gn.KHR_DRACO_MESH_COMPRESSION:s[h]=new KD(o,this.dracoLoader);break;case gn.KHR_TEXTURE_TRANSFORM:s[h]=new JD;break;case gn.KHR_MESH_QUANTIZATION:s[h]=new QD;break;default:p.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(i,r)}parseAsync(e,t){let i=this;return new Promise(function(r,o){i.parse(e,t,r,o)})}};function Ode(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var gn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},PD=class{constructor(e){this.parser=e,this.name=gn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){let o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let t=this.parser,i="light:"+e,r=t.cache.get(i);if(r)return r;let o=t.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],u,f=new pt(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],Cr);let h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new Od(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new du(f),u.distance=h;break;case"spot":u=new Rd(f),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),uc(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,o=i.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},OD=class{constructor(){this.name=gn.KHR_MATERIALS_UNLIT}getMaterialType(){return es}extendParams(e,t,i){let r=[];e.color=new pt(1,1,1),e.opacity=1;let o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],Cr),e.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",o.baseColorTexture,Cn))}return Promise.all(r)}},FD=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}},ND=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new qe(a,a)}return Promise.all(o)}},LD=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_DISPERSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},kD=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},UD=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_SHEEN}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];t.sheenColor=new pt(0,0,0),t.sheenRoughness=0,t.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Cr)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,Cn)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},BD=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},VD=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_VOLUME}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return t.attenuationColor=new pt().setRGB(a[0],a[1],a[2],Cr),Promise.all(o)}},zD=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_IOR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},HD=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_SPECULAR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return t.specularColor=new pt().setRGB(a[0],a[1],a[2],Cr),s.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,Cn)),Promise.all(o)}},jD=class{constructor(e){this.parser=e,this.name=gn.EXT_MATERIALS_BUMP}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(o)}},GD=class{constructor(e){this.parser=e,this.name=gn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Io}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},WD=class{constructor(e){this.parser=e,this.name=gn.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,s)}},$D=class{constructor(e){this.parser=e,this.name=gn.EXT_TEXTURE_WEBP}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return i.loadTextureImage(e,s.source,l)}},qD=class{constructor(e){this.parser=e,this.name=gn.EXT_TEXTURE_AVIF}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return i.loadTextureImage(e,s.source,l)}},XD=class{constructor(e){this.name=gn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let l=r.byteOffset||0,u=r.byteLength||0,f=r.count,h=r.byteStride,p=new Uint8Array(a,l,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,h,p,r.mode,r.filter).then(function(g){return g.buffer}):s.ready.then(function(){let g=new ArrayBuffer(f*h);return s.decodeGltfBuffer(new Uint8Array(g),f,h,p,r.mode,r.filter),g})})}else return null}},YD=class{constructor(e){this.name=gn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=t.meshes[i.mesh];for(let u of r.primitives)if(u.mode!==Vs.TRIANGLES&&u.mode!==Vs.TRIANGLE_STRIP&&u.mode!==Vs.TRIANGLE_FAN&&u.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],l={};for(let u in s)a.push(this.parser.getDependency("accessor",s[u]).then(f=>(l[u]=f,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{let f=u.pop(),h=f.isGroup?f.children:[f],p=u[0].count,g=[];for(let v of h){let x=new dt,y=new V,_=new yi,E=new V(1,1,1),S=new Wg(v.geometry,v.material,p);for(let C=0;C<p;C++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,C),l.SCALE&&E.fromBufferAttribute(l.SCALE,C),S.setMatrixAt(C,x.compose(y,_,E));for(let C in l)if(C==="_COLOR_0"){let k=l[C];S.instanceColor=new lu(k.array,k.itemSize,k.normalized)}else C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&v.geometry.setAttribute(C,l[C]);_i.prototype.copy.call(S,v),this.parser.assignFinalMaterial(S),g.push(S)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}},rH="glTF",C0=12,eH={JSON:1313821514,BIN:5130562},ZD=class{constructor(e){this.name=gn.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,C0),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==rH)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-C0,o=new DataView(e,C0),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let l=o.getUint32(s,!0);if(s+=4,l===eH.JSON){let u=new Uint8Array(e,C0+s,a);this.content=i.decode(u)}else if(l===eH.BIN){let u=C0+s;this.body=e.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},KD=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=gn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},l={},u={};for(let f in s){let h=tR[f]||f.toLowerCase();a[h]=s[f]}for(let f in e.attributes){let h=tR[f]||f.toLowerCase();if(s[f]!==void 0){let p=i.accessors[e.attributes[f]],g=gp[p.componentType];u[h]=g.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",o).then(function(f){return new Promise(function(h,p){r.decodeDracoFile(f,function(g){for(let v in g.attributes){let x=g.attributes[v],y=l[v];y!==void 0&&(x.normalized=y)}h(g)},a,u,Cr,p)})})}},JD=class{constructor(){this.name=gn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},QD=class{constructor(){this.name=gn.KHR_MESH_QUANTIZATION}},nC=class extends rc{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)t[s]=i[o+s];return t}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,f=r-t,h=(i-t)/f,p=h*h,g=p*h,v=e*u,x=v-u,y=-2*g+3*p,_=g-p,E=1-y,S=_-p+h;for(let C=0;C!==a;C++){let k=s[x+C+a],F=s[x+C+l]*f,L=s[v+C+a],W=s[v+C]*f;o[C]=E*k+S*F+y*L+_*W}return o}},Fde=new yi,eR=class extends nC{interpolate_(e,t,i,r){let o=super.interpolate_(e,t,i,r);return Fde.fromArray(o).normalize().toArray(o),o}},Vs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},gp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tH={9728:br,9729:$r,9984:hb,9985:sp,9986:Ld,9987:Ia},nH={33071:Qo,33648:Wh,10497:Sa},AD={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},tR={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},mu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Nde={CUBICSPLINE:void 0,LINEAR:bd,STEP:wd},DD={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Lde(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Id({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ca})),n.DefaultMaterial}function jd(n,e,t){for(let i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function uc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function kde(n,e,t){let i=!1,r=!1,o=!1;for(let u=0,f=e.length;u<f;u++){let h=e[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],l=[];for(let u=0,f=e.length;u<f;u++){let h=e[u];if(i){let p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;s.push(p)}if(r){let p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(o){let p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(u){let f=u[0],h=u[1],p=u[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=h),o&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function Ude(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Bde(n){let e,t=n.extensions&&n.extensions[gn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+RD(t.attributes):e=n.indices+":"+RD(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+RD(n.targets[i]);return e}function RD(n){let e="",t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function nR(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Vde(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var zde=new dt,iR=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ode,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new Dd(this.options.manager):this.textureLoader=new c0(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ll(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return jd(o,a,r),uc(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(let l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){let s=t[r].joints;for(let a=0,l=s.length;a<l;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){let s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let r=i.clone(),o=(s,a)=>{let l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(let[u,f]of s.children.entries())o(f,a.children[u])};return o(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let r=e(t[i]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let r=0;r<t.length;r++){let o=e(t[r]);o&&i.push(o)}return i}getDependency(e,t){let i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[gn.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(Ta.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){let r=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(e){let t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let s=AD[r.type],a=gp[r.componentType],l=r.normalized===!0,u=new a(r.count*s);return Promise.resolve(new $i(u,s,l))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],l=AD[r.type],u=gp[r.componentType],f=u.BYTES_PER_ELEMENT,h=f*l,p=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0,x,y;if(g&&g!==h){let _=Math.floor(p/g),E="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count,S=t.cache.get(E);S||(x=new u(a,_*g,r.count*g/f),S=new Jh(x,g/f),t.cache.add(E,S)),y=new Qh(S,l,p%g/f,v)}else a===null?x=new u(r.count*l):x=new u(a,p,r.count*l),y=new $i(x,l,v);if(r.sparse!==void 0){let _=AD.SCALAR,E=gp[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,C=r.sparse.values.byteOffset||0,k=new E(s[1],S,r.sparse.count*_),F=new u(s[2],C,r.sparse.count*l);a!==null&&(y=new $i(y.array.slice(),y.itemSize,y.normalized)),y.normalized=!1;for(let L=0,W=k.length;L<W;L++){let O=k[L];if(y.setX(O,F[L*l]),l>=2&&y.setY(O,F[L*l+1]),l>=3&&y.setZ(O,F[L*l+2]),l>=4&&y.setW(O,F[L*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}y.normalized=v}return y})}loadTexture(e){let t=this.json,i=this.options,o=t.textures[e].source,s=t.images[o],a=this.textureLoader;if(s.uri){let l=i.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,i){let r=this,o=this.json,s=o.textures[e],a=o.images[t],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=s.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);let p=(o.samplers||{})[s.sampler]||{};return f.magFilter=tH[p.magFilter]||$r,f.minFilter=tH[p.minFilter]||Ia,f.wrapS=nH[p.wrapS]||Sa,f.wrapT=nH[p.wrapT]||Sa,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==br&&f.minFilter!==$r,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){let i=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());let s=r.images[e],a=self.URL||self.webkitURL,l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=i.getDependency("bufferView",s.bufferView).then(function(h){u=!0;let p=new Blob([h],{type:s.mimeType});return l=a.createObjectURL(p),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let f=Promise.resolve(l).then(function(h){return new Promise(function(p,g){let v=p;t.isImageBitmapLoader===!0&&(v=function(x){let y=new Zr(x);y.needsUpdate=!0,p(y)}),t.load(Ta.resolveURL(h,o.path),v,void 0,g)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),uc(h,s),h.userData.mimeType=s.mimeType||Vde(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[gn.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[gn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let l=o.associations.get(s);s=o.extensions[gn.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return r!==void 0&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){let t=e.geometry,i=e.material,r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new Ma,tr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){let a="LineBasicMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new Ns,tr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Id}loadMaterial(e){let t=this,i=this.json,r=this.extensions,o=i.materials[e],s,a={},l=o.extensions||{},u=[];if(l[gn.KHR_MATERIALS_UNLIT]){let h=r[gn.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),u.push(h.extendParams(a,o,t))}else{let h=o.pbrMetallicRoughness||{};if(a.color=new pt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){let p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Cr),a.opacity=p[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,Cn)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=Us);let f=o.alphaMode||DD.OPAQUE;if(f===DD.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===DD.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==es&&(u.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new qe(1,1),o.normalTexture.scale!==void 0)){let h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==es&&(u.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==es){let h=o.emissiveFactor;a.emissive=new pt().setRGB(h[0],h[1],h[2],Cr)}return o.emissiveTexture!==void 0&&s!==es&&u.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,Cn)),Promise.all(u).then(function(){let h=new s(a);return o.name&&(h.name=o.name),uc(h,o),t.associations.set(h,{materials:e}),o.extensions&&jd(r,h,o),h})}createUniqueName(e){let t=$n.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[gn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return iH(l,a,t)})}let s=[];for(let a=0,l=e.length;a<l;a++){let u=e[a],f=Bde(u),h=r[f];if(h)s.push(h.promise);else{let p;u.extensions&&u.extensions[gn.KHR_DRACO_MESH_COMPRESSION]?p=o(u):p=iH(new Hi,u,t),r[f]={primitive:u,promise:p},s.push(p)}}return Promise.all(s)}loadMesh(e){let t=this,i=this.json,r=this.extensions,o=i.meshes[e],s=o.primitives,a=[];for(let l=0,u=s.length;l<u;l++){let f=s[l].material===void 0?Lde(this.cache):this.getDependency("material",s[l].material);a.push(f)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(l){let u=l.slice(0,l.length-1),f=l[l.length-1],h=[];for(let g=0,v=f.length;g<v;g++){let x=f[g],y=s[g],_,E=u[g];if(y.mode===Vs.TRIANGLES||y.mode===Vs.TRIANGLE_STRIP||y.mode===Vs.TRIANGLE_FAN||y.mode===void 0)_=o.isSkinnedMesh===!0?new Ed(x,E):new xi(x,E),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),y.mode===Vs.TRIANGLE_STRIP?_.geometry=ID(_.geometry,_0):y.mode===Vs.TRIANGLE_FAN&&(_.geometry=ID(_.geometry,dp));else if(y.mode===Vs.LINES)_=new cu(x,E);else if(y.mode===Vs.LINE_STRIP)_=new nc(x,E);else if(y.mode===Vs.LINE_LOOP)_=new $g(x,E);else if(y.mode===Vs.POINTS)_=new ic(x,E);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(_.geometry.morphAttributes).length>0&&Ude(_,o),_.name=t.createUniqueName(o.name||"mesh_"+e),uc(_,o),y.extensions&&jd(r,_,y),t.assignFinalMaterial(_),h.push(_)}for(let g=0,v=h.length;g<v;g++)t.associations.set(h[g],{meshes:e,primitives:g});if(h.length===1)return o.extensions&&jd(r,h[0],o),h[0];let p=new Lr;o.extensions&&jd(r,p,o),t.associations.set(p,{meshes:e});for(let g=0,v=h.length;g<v;g++)p.add(h[g]);return p})}loadCamera(e){let t,i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Ri(ti.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Pd(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),uc(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let r=0,o=t.joints.length;r<o;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],l=[];for(let u=0,f=s.length;u<f;u++){let h=s[u];if(h){a.push(h);let p=new dt;o!==null&&p.fromArray(o.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Md(a,l)})}loadAnimation(e){let t=this.json,i=this,r=t.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],l=[],u=[],f=[];for(let h=0,p=r.channels.length;h<p;h++){let g=r.channels[h],v=r.samplers[g.sampler],x=g.target,y=x.node,_=r.parameters!==void 0?r.parameters[v.input]:v.input,E=r.parameters!==void 0?r.parameters[v.output]:v.output;x.node!==void 0&&(s.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",E)),u.push(v),f.push(x))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f)]).then(function(h){let p=h[0],g=h[1],v=h[2],x=h[3],y=h[4],_=[];for(let E=0,S=p.length;E<S;E++){let C=p[E],k=g[E],F=v[E],L=x[E],W=y[E];if(C===void 0)continue;C.updateMatrix&&C.updateMatrix();let O=i._createAnimationTracks(C,k,F,L,W);if(O)for(let R=0;R<O.length;R++)_.push(O[R])}return new Ad(o,void 0,_)})}createNodeMesh(e){let t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(e){let t=this.json,i=this,r=t.nodes[e],o=i._loadNodeShallow(e),s=[],a=r.children||[];for(let u=0,f=a.length;u<f;u++)s.push(i.getDependency("node",a[u]));let l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),l]).then(function(u){let f=u[0],h=u[1],p=u[2];p!==null&&f.traverse(function(g){g.isSkinnedMesh&&g.bind(p,zde)});for(let g=0,v=h.length;g<v;g++)f.add(h[g]);return f})}_loadNodeShallow(e){let t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=t.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(u){return r._getNodeRef(r.cameraCache,o.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let f;if(o.isBone===!0?f=new tc:u.length>1?f=new Lr:u.length===1?f=u[0]:f=new _i,f!==u[0])for(let h=0,p=u.length;h<p;h++)f.add(u[h]);if(o.name&&(f.userData.name=o.name,f.name=s),uc(f,o),o.extensions&&jd(i,f,o),o.matrix!==void 0){let h=new dt;h.fromArray(o.matrix),f.applyMatrix4(h)}else o.translation!==void 0&&f.position.fromArray(o.translation),o.rotation!==void 0&&f.quaternion.fromArray(o.rotation),o.scale!==void 0&&f.scale.fromArray(o.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],r=this,o=new Lr;i.name&&(o.name=r.createUniqueName(i.name)),uc(o,i),i.extensions&&jd(t,o,i);let s=i.nodes||[],a=[];for(let l=0,u=s.length;l<u;l++)a.push(r.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let f=0,h=l.length;f<h;f++)o.add(l[f]);let u=f=>{let h=new Map;for(let[p,g]of r.associations)(p instanceof tr||p instanceof Zr)&&h.set(p,g);return f.traverse(p=>{let g=r.associations.get(p);g!=null&&h.set(p,g)}),h};return r.associations=u(o),o})}_createAnimationTracks(e,t,i,r,o){let s=[],a=e.name?e.name:e.uuid,l=[];mu[o.path]===mu.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let u;switch(mu[o.path]){case mu.weights:u=Ls;break;case mu.rotation:u=ts;break;case mu.translation:case mu.scale:u=ks;break;default:switch(i.itemSize){case 1:u=Ls;break;case 2:case 3:default:u=ks;break}break}let f=r.interpolation!==void 0?Nde[r.interpolation]:bd,h=this._getArrayFromAccessor(i);for(let p=0,g=l.length;p<g;p++){let v=new u(l[p]+"."+mu[o.path],t.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),s.push(v)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let i=nR(t.constructor),r=new Float32Array(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=t[o]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){let r=this instanceof ts?eR:nC;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function Hde(n,e,t){let i=e.attributes,r=new qr;if(i.POSITION!==void 0){let a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new V(l[0],l[1],l[2]),new V(u[0],u[1],u[2])),a.normalized){let f=nR(gp[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let a=new V,l=new V;for(let u=0,f=o.length;u<f;u++){let h=o[u];if(h.POSITION!==void 0){let p=t.json.accessors[h.POSITION],g=p.min,v=p.max;if(g!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),p.normalized){let x=nR(gp[p.componentType]);l.multiplyScalar(x)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new To;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function iH(n,e,t){let i=e.attributes,r=[];function o(s,a){return t.getDependency("accessor",s).then(function(l){n.setAttribute(a,l)})}for(let s in i){let a=tR[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(e.indices!==void 0&&!n.index){let s=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return zt.workingColorSpace!==Cr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${zt.workingColorSpace}" not supported.`),uc(n,e),Hde(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?kde(n,e.targets,t):n})}function oH(n,e){let t=new tC(e);return new Promise((i,r)=>{t.load(n,o=>{i(o.scene)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var zs=Uint8Array,vp=Uint16Array,jde=Int32Array,sH=new zs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),aH=new zs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Gde=new zs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lH=function(n,e){for(var t=new vp(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new jde(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},cH=lH(sH,2),uH=cH.b,Wde=cH.r;uH[28]=258,Wde[258]=28;var dH=lH(aH,0),$de=dH.b,z4e=dH.r,sR=new vp(32768);for(Un=0;Un<32768;++Un)dc=(Un&43690)>>1|(Un&21845)<<1,dc=(dc&52428)>>2|(dc&13107)<<2,dc=(dc&61680)>>4|(dc&3855)<<4,sR[Un]=((dc&65280)>>8|(dc&255)<<8)>>1;var dc,Un,S0=function(n,e,t){for(var i=n.length,r=0,o=new vp(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new vp(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new vp(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],f=e-n[r],h=s[n[r]-1]++<<f,p=h|(1<<f)-1;h<=p;++h)a[sR[h]>>l]=u}else for(a=new vp(i),r=0;r<i;++r)n[r]&&(a[r]=sR[s[n[r]-1]++]>>15-n[r]);return a},E0=new zs(288);for(Un=0;Un<144;++Un)E0[Un]=8;var Un;for(Un=144;Un<256;++Un)E0[Un]=9;var Un;for(Un=256;Un<280;++Un)E0[Un]=7;var Un;for(Un=280;Un<288;++Un)E0[Un]=8;var Un,fH=new zs(32);for(Un=0;Un<32;++Un)fH[Un]=5;var Un;var qde=S0(E0,9,1);var Xde=S0(fH,5,1),rR=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Da=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},oR=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Yde=function(n){return(n+7)/8|0},Zde=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new zs(n.subarray(e,t))};var Kde=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ra=function(n,e,t){var i=new Error(e||Kde[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,Ra),!t)throw i;return i},Jde=function(n,e,t,i){var r=n.length,o=i?i.length:0;if(!r||e.f&&!e.l)return t||new zs(0);var s=!t,a=s||e.i!=2,l=e.i;s&&(t=new zs(r*3));var u=function(at){var gt=t.length;if(at>gt){var ft=new zs(Math.max(gt*2,at));ft.set(t),t=ft}},f=e.f||0,h=e.p||0,p=e.b||0,g=e.l,v=e.d,x=e.m,y=e.n,_=r*8;do{if(!g){f=Da(n,h,1);var E=Da(n,h+1,3);if(h+=3,E)if(E==1)g=qde,v=Xde,x=9,y=5;else if(E==2){var F=Da(n,h,31)+257,L=Da(n,h+10,15)+4,W=F+Da(n,h+5,31)+1;h+=14;for(var O=new zs(W),R=new zs(19),j=0;j<L;++j)R[Gde[j]]=Da(n,h+j*3,7);h+=L*3;for(var me=rR(R),ue=(1<<me)-1,De=S0(R,me,1),j=0;j<W;){var Ce=De[Da(n,h,ue)];h+=Ce&15;var S=Ce>>4;if(S<16)O[j++]=S;else{var Y=0,re=0;for(S==16?(re=3+Da(n,h,3),h+=2,Y=O[j-1]):S==17?(re=3+Da(n,h,7),h+=3):S==18&&(re=11+Da(n,h,127),h+=7);re--;)O[j++]=Y}}var X=O.subarray(0,F),_e=O.subarray(F);x=rR(X),y=rR(_e),g=S0(X,x,1),v=S0(_e,y,1)}else Ra(1);else{var S=Yde(h)+4,C=n[S-4]|n[S-3]<<8,k=S+C;if(k>r){l&&Ra(0);break}a&&u(p+C),t.set(n.subarray(S,k),p),e.b=p+=C,e.p=h=k*8,e.f=f;continue}if(h>_){l&&Ra(0);break}}a&&u(p+131072);for(var ze=(1<<x)-1,rt=(1<<y)-1,ve=h;;ve=h){var Y=g[oR(n,h)&ze],oe=Y>>4;if(h+=Y&15,h>_){l&&Ra(0);break}if(Y||Ra(2),oe<256)t[p++]=oe;else if(oe==256){ve=h,g=null;break}else{var B=oe-254;if(oe>264){var j=oe-257,Q=sH[j];B=Da(n,h,(1<<Q)-1)+uH[j],h+=Q}var xe=v[oR(n,h)&rt],le=xe>>4;xe||Ra(3),h+=xe&15;var _e=$de[le];if(le>3){var Q=aH[le];_e+=oR(n,h)&(1<<Q)-1,h+=Q}if(h>_){l&&Ra(0);break}a&&u(p+131072);var je=p+B;if(p<_e){var We=o-_e,Ue=Math.min(_e,je);for(We+p<0&&Ra(3);p<Ue;++p)t[p]=i[We+p]}for(;p<je;++p)t[p]=t[p-_e]}}e.l=g,e.p=ve,e.b=p,e.f=f,g&&(f=1,e.m=x,e.d=v,e.n=y)}while(!f);return p!=t.length&&s?Zde(t,0,p):t.subarray(0,p)};var Qde=new zs(0);var efe=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Ra(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Ra(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function hH(n,e){return Jde(n.subarray(efe(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var tfe=typeof TextDecoder<"u"&&new TextDecoder,nfe=0;try{tfe.decode(Qde,{stream:!0}),nfe=1}catch{}function pH(n,e,t){let i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,o=i,s=Math.floor((r+o)/2);for(;e<t[s]||e>=t[s+1];)e<t[s]?o=s:r=s,s=Math.floor((r+o)/2);return s}function rfe(n,e,t,i){let r=[],o=[],s=[];r[0]=1;for(let a=1;a<=t;++a){o[a]=e-i[n+1-a],s[a]=i[n+a]-e;let l=0;for(let u=0;u<a;++u){let f=s[u+1],h=o[a-u],p=r[u]/(f+h);r[u]=l+f*p,l=h*p}r[a]=l}return r}function mH(n,e,t,i){let r=pH(n,i,e),o=rfe(r,i,n,e),s=new sn(0,0,0,0);for(let a=0;a<=n;++a){let l=t[r-n+a],u=o[a],f=l.w*u;s.x+=l.x*f,s.y+=l.y*f,s.z+=l.z*f,s.w+=l.w*u}return s}function ofe(n,e,t,i,r){let o=[];for(let h=0;h<=t;++h)o[h]=0;let s=[];for(let h=0;h<=i;++h)s[h]=o.slice(0);let a=[];for(let h=0;h<=t;++h)a[h]=o.slice(0);a[0][0]=1;let l=o.slice(0),u=o.slice(0);for(let h=1;h<=t;++h){l[h]=e-r[n+1-h],u[h]=r[n+h]-e;let p=0;for(let g=0;g<h;++g){let v=u[g+1],x=l[h-g];a[h][g]=v+x;let y=a[g][h-1]/a[h][g];a[g][h]=p+v*y,p=x*y}a[h][h]=p}for(let h=0;h<=t;++h)s[0][h]=a[h][t];for(let h=0;h<=t;++h){let p=0,g=1,v=[];for(let x=0;x<=t;++x)v[x]=o.slice(0);v[0][0]=1;for(let x=1;x<=i;++x){let y=0,_=h-x,E=t-x;h>=x&&(v[g][0]=v[p][0]/a[E+1][_],y=v[g][0]*a[_][E]);let S=_>=-1?1:-_,C=h-1<=E?x-1:t-h;for(let F=S;F<=C;++F)v[g][F]=(v[p][F]-v[p][F-1])/a[E+1][_+F],y+=v[g][F]*a[_+F][E];h<=E&&(v[g][x]=-v[p][x-1]/a[E+1][h],y+=v[g][x]*a[h][E]),s[x][h]=y;let k=p;p=g,g=k}}let f=t;for(let h=1;h<=i;++h){for(let p=0;p<=t;++p)s[h][p]*=f;f*=t-h}return s}function sfe(n,e,t,i,r){let o=r<n?r:n,s=[],a=pH(n,i,e),l=ofe(a,i,n,o,e),u=[];for(let f=0;f<t.length;++f){let h=t[f].clone(),p=h.w;h.x*=p,h.y*=p,h.z*=p,u[f]=h}for(let f=0;f<=o;++f){let h=u[a-n].clone().multiplyScalar(l[f][0]);for(let p=1;p<=n;++p)h.add(u[a-n+p].clone().multiplyScalar(l[f][p]));s[f]=h}for(let f=o+1;f<=r+1;++f)s[f]=new sn(0,0,0);return s}function afe(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function lfe(n){let e=n.length,t=[],i=[];for(let o=0;o<e;++o){let s=n[o];t[o]=new V(s.x,s.y,s.z),i[o]=s.w}let r=[];for(let o=0;o<e;++o){let s=t[o].clone();for(let a=1;a<=o;++a)s.sub(r[o-a].clone().multiplyScalar(afe(o,a)*i[a]));r[o]=s.divideScalar(i[0])}return r}function gH(n,e,t,i,r){let o=sfe(n,e,t,i,r);return lfe(o)}var iC=class extends Xr{constructor(e,t,i,r,o){super();let s=t?t.length-1:0,a=i?i.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=o||s;for(let l=0;l<a;++l){let u=i[l];this.controlPoints[l]=new sn(u.x,u.y,u.z,u.w)}}getPoint(e,t=new V){let i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=mH(this.degree,this.knots,this.controlPoints,r);return o.w!==1&&o.divideScalar(o.w),i.set(o.x,o.y,o.z)}getTangent(e,t=new V){let i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=gH(this.degree,this.knots,this.controlPoints,r,1);return i.copy(o[1]).normalize(),i}toJSON(){let e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(t=>t.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(t=>new sn(t[0],t[1],t[2],t[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}};var un,ji,Kr,oC=class extends is{constructor(e){super(e)}load(e,t,i,r){let o=this,s=o.path===""?Ta.extractUrlBase(e):o.path,a=new ll(this.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(l){try{t(o.parse(l,s))}catch(u){r?r(u):console.error(u),o.manager.itemError(e)}},i,r)}parse(e,t){if(ufe(e))un=new hR().parse(e);else{let r=_H(e);if(!dfe(r))throw new Error("THREE.FBXLoader: Unknown format.");if(vH(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+vH(r));un=new fR().parse(r)}let i=new Dd(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new cR(i,this.manager).parse(un)}},cR=class{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){ji=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),o=new uR().parse(r);return this.parseScene(r,o,i),Kr}parseConnections(){let e=new Map;return"Connections"in un&&un.Connections.connections.forEach(function(i){let r=i[0],o=i[1],s=i[2];e.has(r)||e.set(r,{parents:[],children:[]});let a={ID:o,relationship:s};e.get(r).parents.push(a),e.has(o)||e.set(o,{parents:[],children:[]});let l={ID:r,relationship:s};e.get(o).children.push(l)}),e}parseImages(){let e={},t={};if("Video"in un.Objects){let i=un.Objects.Video;for(let r in i){let o=i[r],s=parseInt(r);if(e[s]=o.RelativeFilename||o.Filename,"Content"in o){let a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,l=typeof o.Content=="string"&&o.Content!=="";if(a||l){let u=this.parseImage(i[r]);t[o.RelativeFilename||o.Filename]=u}}}}for(let i in e){let r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){let t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase(),o;switch(r){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+o+";base64,"+t;{let s=new Uint8Array(t);return window.URL.createObjectURL(new Blob([s],{type:o}))}}parseTextures(e){let t=new Map;if("Texture"in un.Objects){let i=un.Objects.Texture;for(let r in i){let o=this.parseTexture(i[r],e);t.set(parseInt(r),o)}}return t}parseTexture(e,t){let i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;let r=e.WrapModeU,o=e.WrapModeV,s=r!==void 0?r.value:0,a=o!==void 0?o.value:0;if(i.wrapS=s===0?Sa:Qo,i.wrapT=a===0?Sa:Qo,"Scaling"in e){let l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){let l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){let i=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),r=e.FileName.split(".").pop().toLowerCase(),o=i.has(r)?this.manager.getHandler(`.${r}`):this.textureLoader;if(!o)return console.warn(`FBXLoader: ${r.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Zr;let s=o.path;s||o.setPath(this.textureLoader.path);let a=ji.get(e.id).children,l;a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(l=t[a[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&o.setPath(void 0));let u=o.load(l);return o.setPath(s),u}parseMaterials(e){let t=new Map;if("Material"in un.Objects){let i=un.Objects.Material;for(let r in i){let o=this.parseMaterial(i[r],e);o!==null&&t.set(parseInt(r),o)}}return t}parseMaterial(e,t){let i=e.id,r=e.attrName,o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!ji.has(i))return null;let s=this.parseParameters(e,t,i),a;switch(o.toLowerCase()){case"phong":a=new al;break;case"lambert":a=new r0;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),a=new al;break}return a.setValues(s),a.name=r,a}parseParameters(e,t,i){let r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=zt.toWorkingColorSpace(new pt().fromArray(e.Diffuse.value),Cn):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=zt.toWorkingColorSpace(new pt().fromArray(e.DiffuseColor.value),Cn)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=zt.toWorkingColorSpace(new pt().fromArray(e.Emissive.value),Cn):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=zt.toWorkingColorSpace(new pt().fromArray(e.EmissiveColor.value),Cn)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),r.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),(r.opacity===1||r.opacity===0)&&(r.opacity=e.Opacity?parseFloat(e.Opacity.value):null,r.opacity===null&&(r.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=zt.toWorkingColorSpace(new pt().fromArray(e.Specular.value),Cn):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=zt.toWorkingColorSpace(new pt().fromArray(e.SpecularColor.value),Cn));let o=this;return ji.get(i).children.forEach(function(s){let a=s.relationship;switch(a){case"Bump":r.bumpMap=o.getTexture(t,s.ID);break;case"Maya|TEX_ao_map":r.aoMap=o.getTexture(t,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=o.getTexture(t,s.ID),r.map!==void 0&&(r.map.colorSpace=Cn);break;case"DisplacementColor":r.displacementMap=o.getTexture(t,s.ID);break;case"EmissiveColor":r.emissiveMap=o.getTexture(t,s.ID),r.emissiveMap!==void 0&&(r.emissiveMap.colorSpace=Cn);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=o.getTexture(t,s.ID);break;case"ReflectionColor":r.envMap=o.getTexture(t,s.ID),r.envMap!==void 0&&(r.envMap.mapping=op,r.envMap.colorSpace=Cn);break;case"SpecularColor":r.specularMap=o.getTexture(t,s.ID),r.specularMap!==void 0&&(r.specularMap.colorSpace=Cn);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=o.getTexture(t,s.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in un.Objects&&t in un.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=ji.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in un.Objects){let i=un.Objects.Deformer;for(let r in i){let o=i[r],s=ji.get(parseInt(r));if(o.attrType==="Skin"){let a=this.parseSkeleton(s,i);a.ID=r,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=s.parents[0].ID,e[r]=a}else if(o.attrType==="BlendShape"){let a={id:r};a.rawTargets=this.parseMorphTargets(s,i),a.id=r,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let i=[];return e.children.forEach(function(r){let o=t[r.ID];if(o.attrType!=="Cluster")return;let s={ID:r.ID,indices:[],weights:[],transformLink:new dt().fromArray(o.TransformLink.a)};"Indexes"in o&&(s.indices=o.Indexes.a,s.weights=o.Weights.a),i.push(s)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){let i=[];for(let r=0;r<e.children.length;r++){let o=e.children[r],s=t[o.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;a.geoID=ji.get(parseInt(o.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){Kr=new Lr;let r=this.parseModels(e.skeletons,t,i),o=un.Objects.Model,s=this;r.forEach(function(l){let u=o[l.ID];s.setLookAtProperties(l,u),ji.get(l.ID).parents.forEach(function(h){let p=r.get(h.ID);p!==void 0&&p.add(l)}),l.parent===null&&Kr.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.addGlobalSceneSettings(),Kr.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);let u=yH(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});let a=new dR().parse();Kr.children.length===1&&Kr.children[0].isGroup&&(Kr.children[0].animations=a,Kr=Kr.children[0]),Kr.animations=a}parseModels(e,t,i){let r=new Map,o=un.Objects.Model;for(let s in o){let a=parseInt(s),l=o[s],u=ji.get(a),f=this.buildSkeleton(u,e,a,l.attrName);if(!f){switch(l.attrType){case"Camera":f=this.createCamera(u);break;case"Light":f=this.createLight(u);break;case"Mesh":f=this.createMesh(u,t,i);break;case"NurbsCurve":f=this.createCurve(u,t);break;case"LimbNode":case"Root":f=new tc;break;case"Null":default:f=new Lr;break}f.name=l.attrName?$n.sanitizeNodeName(l.attrName):"",f.userData.originalName=l.attrName,f.ID=a}this.getTransformData(f,l),r.set(a,f)}return r}buildSkeleton(e,t,i,r){let o=null;return e.parents.forEach(function(s){for(let a in t){let l=t[a];l.rawBones.forEach(function(u,f){if(u.ID===s.ID){let h=o;o=new tc,o.matrixWorld.copy(u.transformLink),o.name=r?$n.sanitizeNodeName(r):"",o.userData.originalName=r,o.ID=i,l.bones[f]=o,h!==null&&o.add(h)}})}}),o}createCamera(e){let t,i;if(e.children.forEach(function(r){let o=un.Objects.NodeAttribute[r.ID];o!==void 0&&(i=o)}),i===void 0)t=new _i;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let o=1;i.NearPlane!==void 0&&(o=i.NearPlane.value/1e3);let s=1e3;i.FarPlane!==void 0&&(s=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);let u=a/l,f=45;i.FieldOfView!==void 0&&(f=i.FieldOfView.value);let h=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new Ri(f,u,o,s),h!==null&&t.setFocalLength(h);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new _i;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new _i;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){let o=un.Objects.NodeAttribute[r.ID];o!==void 0&&(i=o)}),i===void 0)t=new _i;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let o=16777215;i.Color!==void 0&&(o=zt.toWorkingColorSpace(new pt().fromArray(i.Color.value),Cn));let s=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(s=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);let l=1;switch(r){case 0:t=new du(o,s,a,l);break;case 1:t=new Od(o,s);break;case 2:let u=Math.PI/3;i.InnerAngle!==void 0&&(u=ti.degToRad(i.InnerAngle.value));let f=0;i.OuterAngle!==void 0&&(f=ti.degToRad(i.OuterAngle.value),f=Math.max(f,1)),t=new Rd(o,s,a,u,f,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new du(o,s);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,o=null,s=null,a=[];if(e.children.forEach(function(l){t.has(l.ID)&&(o=t.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?s=a:a.length>0?s=a[0]:(s=new al({name:is.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(s)),"color"in o.attributes&&a.forEach(function(l){l.vertexColors=!0}),o.groups.length>0){let l=!1;for(let u=0,f=o.groups.length;u<f;u++){let h=o.groups[u];(h.materialIndex<0||h.materialIndex>=a.length)&&(h.materialIndex=a.length,l=!0)}if(l){let u=new al;a.push(u)}}return o.FBX_Deformer?(r=new Ed(o,s),r.normalizeSkinWeights()):r=new xi(o,s),r}createCurve(e,t){let i=e.children.reduce(function(o,s){return t.has(s.ID)&&(o=t.get(s.ID)),o},null),r=new Ns({name:is.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new nc(i,r)}getTransformData(e,t){let i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=M0(t.RotationOrder.value):i.eulerOrder=M0(0),"Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&ji.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){let o=un.Objects.Model[r.ID];if("Lcl_Translation"in o){let s=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),Kr.add(e.target)):e.lookAt(new V().fromArray(s))}}})}bindSkeleton(e,t,i){let r=this.parsePoseNodes();for(let o in e){let s=e[o];ji.get(parseInt(s.ID)).parents.forEach(function(l){if(t.has(l.ID)){let u=l.ID;ji.get(u).parents.forEach(function(h){i.has(h.ID)&&i.get(h.ID).bind(new Md(s.bones),r[h.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in un.Objects){let t=un.Objects.Pose;for(let i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){let r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(o){e[o.Node]=new dt().fromArray(o.Matrix.a)}):e[r.Node]=new dt().fromArray(r.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in un){if("AmbientColor"in un.GlobalSettings){let e=un.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){let o=new pt().setRGB(t,i,r,Cn);Kr.add(new l0(o,1))}}"UnitScaleFactor"in un.GlobalSettings&&(Kr.userData.unitScaleFactor=un.GlobalSettings.UnitScaleFactor.value)}}},uR=class{constructor(){this.negativeMaterialIndices=!1}parse(e){let t=new Map;if("Geometry"in un.Objects){let i=un.Objects.Geometry;for(let r in i){let o=ji.get(parseInt(r)),s=this.parseGeometry(o,i[r],e);t.set(parseInt(r),s)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){let r=i.skeletons,o=[],s=e.parents.map(function(h){return un.Objects.Model[h.ID]});if(s.length===0)return;let a=e.children.reduce(function(h,p){return r[p.ID]!==void 0&&(h=r[p.ID]),h},null);e.children.forEach(function(h){i.morphTargets[h.ID]!==void 0&&o.push(i.morphTargets[h.ID])});let l=s[0],u={};"RotationOrder"in l&&(u.eulerOrder=M0(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);let f=yH(u);return this.genGeometry(t,a,o,f)}genGeometry(e,t,i,r){let o=new Hi;e.attrName&&(o.name=e.attrName);let s=this.parseGeoNode(e,t),a=this.genBuffers(s),l=new jn(a.vertex,3);if(l.applyMatrix4(r),o.setAttribute("position",l),a.colors.length>0&&o.setAttribute("color",new jn(a.colors,3)),t&&(o.setAttribute("skinIndex",new Sd(a.weightsIndices,4)),o.setAttribute("skinWeight",new jn(a.vertexWeights,4)),o.FBX_Deformer=t),a.normal.length>0){let u=new $t().getNormalMatrix(r),f=new jn(a.normal,3);f.applyNormalMatrix(u),o.setAttribute("normal",f)}if(a.uvs.forEach(function(u,f){let h=f===0?"uv":`uv${f}`;o.setAttribute(h,new jn(a.uvs[f],2))}),s.material&&s.material.mappingType!=="AllSame"){let u=a.materialIndex[0],f=0;if(a.materialIndex.forEach(function(h,p){h!==u&&(o.addGroup(f,p-f,u),u=h,f=p)}),o.groups.length>0){let h=o.groups[o.groups.length-1],p=h.start+h.count;p!==a.materialIndex.length&&o.addGroup(p,a.materialIndex.length-p,u)}o.groups.length===0&&o.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(o,e,i,r),o}parseGeoNode(e,t){let i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,o){r.indices.forEach(function(s,a){i.weightTable[s]===void 0&&(i.weightTable[s]=[]),i.weightTable[s].push({id:o,weight:r.weights[a]})})})),i}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,r=0,o=!1,s=[],a=[],l=[],u=[],f=[],h=[],p=this;return e.vertexIndices.forEach(function(g,v){let x,y=!1;g<0&&(g=g^-1,y=!0);let _=[],E=[];if(s.push(g*3,g*3+1,g*3+2),e.color){let S=rC(v,i,g,e.color);l.push(S[0],S[1],S[2])}if(e.skeleton){if(e.weightTable[g]!==void 0&&e.weightTable[g].forEach(function(S){E.push(S.weight),_.push(S.id)}),E.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);let S=[0,0,0,0],C=[0,0,0,0];E.forEach(function(k,F){let L=k,W=_[F];C.forEach(function(O,R,j){if(L>O){j[R]=L,L=O;let me=S[R];S[R]=W,W=me}})}),_=S,E=C}for(;E.length<4;)E.push(0),_.push(0);for(let S=0;S<4;++S)f.push(E[S]),h.push(_[S])}if(e.normal){let S=rC(v,i,g,e.normal);a.push(S[0],S[1],S[2])}e.material&&e.material.mappingType!=="AllSame"&&(x=rC(v,i,g,e.material)[0],x<0&&(p.negativeMaterialIndices=!0,x=0)),e.uv&&e.uv.forEach(function(S,C){let k=rC(v,i,g,S);u[C]===void 0&&(u[C]=[]),u[C].push(k[0]),u[C].push(k[1])}),r++,y&&(p.genFace(t,e,s,x,a,l,u,f,h,r),i++,r=0,s=[],a=[],l=[],u=[],f=[],h=[])}),t}getNormalNewell(e){let t=new V(0,0,0);for(let i=0;i<e.length;i++){let r=e[i],o=e[(i+1)%e.length];t.x+=(r.y-o.y)*(r.z+o.z),t.y+=(r.z-o.z)*(r.x+o.x),t.z+=(r.x-o.x)*(r.y+o.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){let t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new V(0,1,0):new V(0,0,1)).cross(t).normalize(),o=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:o}}flattenVertex(e,t,i){return new qe(e.dot(t),e.dot(i))}genFace(e,t,i,r,o,s,a,l,u,f){let h;if(f>3){let p=[],g=t.baseVertexPositions||t.vertexPositions;for(let _=0;_<i.length;_+=3)p.push(new V(g[i[_]],g[i[_+1]],g[i[_+2]]));let{tangent:v,bitangent:x}=this.getNormalTangentAndBitangent(p),y=[];for(let _ of p)y.push(this.flattenVertex(_,v,x));h=su.triangulateShape(y,[])}else h=[[0,1,2]];for(let[p,g,v]of h)e.vertex.push(t.vertexPositions[i[p*3]]),e.vertex.push(t.vertexPositions[i[p*3+1]]),e.vertex.push(t.vertexPositions[i[p*3+2]]),e.vertex.push(t.vertexPositions[i[g*3]]),e.vertex.push(t.vertexPositions[i[g*3+1]]),e.vertex.push(t.vertexPositions[i[g*3+2]]),e.vertex.push(t.vertexPositions[i[v*3]]),e.vertex.push(t.vertexPositions[i[v*3+1]]),e.vertex.push(t.vertexPositions[i[v*3+2]]),t.skeleton&&(e.vertexWeights.push(l[p*4]),e.vertexWeights.push(l[p*4+1]),e.vertexWeights.push(l[p*4+2]),e.vertexWeights.push(l[p*4+3]),e.vertexWeights.push(l[g*4]),e.vertexWeights.push(l[g*4+1]),e.vertexWeights.push(l[g*4+2]),e.vertexWeights.push(l[g*4+3]),e.vertexWeights.push(l[v*4]),e.vertexWeights.push(l[v*4+1]),e.vertexWeights.push(l[v*4+2]),e.vertexWeights.push(l[v*4+3]),e.weightsIndices.push(u[p*4]),e.weightsIndices.push(u[p*4+1]),e.weightsIndices.push(u[p*4+2]),e.weightsIndices.push(u[p*4+3]),e.weightsIndices.push(u[g*4]),e.weightsIndices.push(u[g*4+1]),e.weightsIndices.push(u[g*4+2]),e.weightsIndices.push(u[g*4+3]),e.weightsIndices.push(u[v*4]),e.weightsIndices.push(u[v*4+1]),e.weightsIndices.push(u[v*4+2]),e.weightsIndices.push(u[v*4+3])),t.color&&(e.colors.push(s[p*3]),e.colors.push(s[p*3+1]),e.colors.push(s[p*3+2]),e.colors.push(s[g*3]),e.colors.push(s[g*3+1]),e.colors.push(s[g*3+2]),e.colors.push(s[v*3]),e.colors.push(s[v*3+1]),e.colors.push(s[v*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(o[p*3]),e.normal.push(o[p*3+1]),e.normal.push(o[p*3+2]),e.normal.push(o[g*3]),e.normal.push(o[g*3+1]),e.normal.push(o[g*3+2]),e.normal.push(o[v*3]),e.normal.push(o[v*3+1]),e.normal.push(o[v*3+2])),t.uv&&t.uv.forEach(function(x,y){e.uvs[y]===void 0&&(e.uvs[y]=[]),e.uvs[y].push(a[y][p*2]),e.uvs[y].push(a[y][p*2+1]),e.uvs[y].push(a[y][g*2]),e.uvs[y].push(a[y][g*2+1]),e.uvs[y].push(a[y][v*2]),e.uvs[y].push(a[y][v*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let o=this;i.forEach(function(s){s.rawTargets.forEach(function(a){let l=un.Objects.Geometry[a.geoID];l!==void 0&&o.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,i,r,o){let s=t.Vertices!==void 0?t.Vertices.a:[],a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=i.Vertices!==void 0?i.Vertices.a:[],u=i.Indexes!==void 0?i.Indexes.a:[],f=e.attributes.position.count*3,h=new Float32Array(f);for(let x=0;x<u.length;x++){let y=u[x]*3;h[y]=l[x*3],h[y+1]=l[x*3+1],h[y+2]=l[x*3+2]}let p={vertexIndices:a,vertexPositions:h,baseVertexPositions:s},g=this.genBuffers(p),v=new jn(g.vertex,3);v.name=o||i.attrName,v.applyMatrix4(r),e.morphAttributes.position.push(v)}parseNormals(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a,o=[];return i==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:o,mappingType:t,referenceType:i}}parseUVs(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a,o=[];return i==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:r,indices:o,mappingType:t,referenceType:i}}parseVertexColors(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a,o=[];i==="IndexToDirect"&&(o=e.ColorIndex.a);for(let s=0,a=new pt;s<r.length;s+=4)a.fromArray(r,s),zt.toWorkingColorSpace(a,Cn),a.toArray(r,s);return{dataSize:4,buffer:r,indices:o,mappingType:t,referenceType:i}}parseMaterialIndices(e){let t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};let r=e.Materials.a,o=[];for(let s=0;s<r.length;++s)o.push(s);return{dataSize:1,buffer:r,indices:o,mappingType:t,referenceType:i}}parseNurbsGeometry(e){let t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Hi;let i=t-1,r=e.KnotVector.a,o=[],s=e.Points.a;for(let h=0,p=s.length;h<p;h+=4)o.push(new sn().fromArray(s,h));let a,l;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let h=0;h<i;++h)o.push(o[h])}let f=new iC(i,r,o,a,l).getPoints(o.length*12);return new Hi().setFromPoints(f)}},dR=class{parse(){let e=[],t=this.parseClips();if(t!==void 0)for(let i in t){let r=t[i],o=this.addClip(r);e.push(o)}return e}parseClips(){if(un.Objects.AnimationCurve===void 0)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=un.Objects.AnimationCurveNode,t=new Map;for(let i in e){let r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){let o={id:r.id,attr:r.attrName,curves:{}};t.set(o.id,o)}}return t}parseAnimationCurves(e){let t=un.Objects.AnimationCurve;for(let i in t){let r={id:t[i].id,times:t[i].KeyTime.a.map(ffe),values:t[i].KeyValueFloat.a},o=ji.get(r.id);if(o!==void 0){let s=o.parents[0].ID,a=o.parents[0].relationship;a.match(/X/)?e.get(s).curves.x=r:a.match(/Y/)?e.get(s).curves.y=r:a.match(/Z/)?e.get(s).curves.z=r:a.match(/DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=r)}}}parseAnimationLayers(e){let t=un.Objects.AnimationLayer,i=new Map;for(let r in t){let o=[],s=ji.get(parseInt(r));s!==void 0&&(s.children.forEach(function(l,u){if(e.has(l.ID)){let f=e.get(l.ID);if(f.curves.x!==void 0||f.curves.y!==void 0||f.curves.z!==void 0){if(o[u]===void 0){let h=ji.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(h!==void 0){let p=un.Objects.Model[h.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}let g={modelName:p.attrName?$n.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Kr.traverse(function(v){v.ID===p.id&&(g.transform=v.matrix,v.userData.transformData&&(g.eulerOrder=v.userData.transformData.eulerOrder))}),g.transform||(g.transform=new dt),"PreRotation"in p&&(g.preRotation=p.PreRotation.value),"PostRotation"in p&&(g.postRotation=p.PostRotation.value),o[u]=g}}o[u]&&(o[u][f.attr]=f)}else if(f.curves.morph!==void 0){if(o[u]===void 0){let h=ji.get(l.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID,p=ji.get(h).parents[0].ID,g=ji.get(p).parents[0].ID,v=ji.get(g).parents[0].ID,x=un.Objects.Model[v],y={modelName:x.attrName?$n.sanitizeNodeName(x.attrName):"",morphName:un.Objects.Deformer[h].attrName};o[u]=y}o[u][f.attr]=f}}}),i.set(parseInt(r),o))}return i}parseAnimStacks(e){let t=un.Objects.AnimationStack,i={};for(let r in t){let o=ji.get(parseInt(r)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=e.get(o[0].ID);i[r]={name:t[r].attrName,layer:s}}return i}addClip(e){let t=[],i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new Ad(e.name,-1,t)}generateTracks(e){let t=[],i=new V,r=new V;if(e.transform&&e.transform.decompose(i,new yi,r),i=i.toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){let o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){let o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,r){let o=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(o,t,i);return new ks(e+"."+r,o,s)}generateRotationTrack(e,t,i,r,o){let s,a;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){let p=this.interpolateRotations(t.x,t.y,t.z,o);s=p[0],a=p[1]}let l=M0(0);i!==void 0&&(i=i.map(ti.degToRad),i.push(l),i=new hr().fromArray(i),i=new yi().setFromEuler(i)),r!==void 0&&(r=r.map(ti.degToRad),r.push(l),r=new hr().fromArray(r),r=new yi().setFromEuler(r).invert());let u=new yi,f=new hr,h=[];if(!a||!s)return new ts(e+".quaternion",[0],[0]);for(let p=0;p<a.length;p+=3)f.set(a[p],a[p+1],a[p+2],o),u.setFromEuler(f),i!==void 0&&u.premultiply(i),r!==void 0&&u.multiply(r),p>2&&new yi().fromArray(h,(p-3)/3*4).dot(u)<0&&u.set(-u.x,-u.y,-u.z,-u.w),u.toArray(h,p/3*4);return new ts(e+".quaternion",s,h)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,i=t.values.map(function(o){return o/100}),r=Kr.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Ls(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let o=1;o<t.length;o++){let s=t[o];s!==r&&(t[i]=s,r=s,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){let r=i,o=[],s=-1,a=-1,l=-1;return e.forEach(function(u){if(t.x&&(s=t.x.times.indexOf(u)),t.y&&(a=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),s!==-1){let f=t.x.values[s];o.push(f),r[0]=f}else o.push(r[0]);if(a!==-1){let f=t.y.values[a];o.push(f),r[1]=f}else o.push(r[1]);if(l!==-1){let f=t.z.values[l];o.push(f),r[2]=f}else o.push(r[2])}),o}interpolateRotations(e,t,i,r){let o=[],s=[];o.push(e.times[0]),s.push(ti.degToRad(e.values[0])),s.push(ti.degToRad(t.values[0])),s.push(ti.degToRad(i.values[0]));for(let a=1;a<e.values.length;a++){let l=[e.values[a-1],t.values[a-1],i.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;let u=l.map(ti.degToRad),f=[e.values[a],t.values[a],i.values[a]];if(isNaN(f[0])||isNaN(f[1])||isNaN(f[2]))continue;let h=f.map(ti.degToRad),p=[f[0]-l[0],f[1]-l[1],f[2]-l[2]],g=[Math.abs(p[0]),Math.abs(p[1]),Math.abs(p[2])];if(g[0]>=180||g[1]>=180||g[2]>=180){let x=Math.max(...g)/180,y=new hr(...u,r),_=new hr(...h,r),E=new yi().setFromEuler(y),S=new yi().setFromEuler(_);E.dot(S)&&S.set(-S.x,-S.y,-S.z,-S.w);let C=e.times[a-1],k=e.times[a]-C,F=new yi,L=new hr;for(let W=0;W<1;W+=1/x)F.copy(E.clone().slerp(S.clone(),W)),o.push(C+W*k),L.setFromQuaternion(F,r),s.push(L.x),s.push(L.y),s.push(L.z)}else o.push(e.times[a]),s.push(ti.degToRad(e.values[a])),s.push(ti.degToRad(t.values[a])),s.push(ti.degToRad(i.values[a]))}return[o,s]}},fR=class{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new aC,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,o){let s=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(s||a)return;let l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),f=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):u?t.parseNodeProperty(r,u,i[++o]):f?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){let i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:i},s=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,o):i in a?(i==="PoseNode"?a.PoseNode.push(o):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),s.id!==""&&(a[i][s.id]=o)):typeof s.id=="number"?(a[i]={},a[i][s.id]=o):i!=="Properties70"&&(i==="PoseNode"?a[i]=[o]:a[i]=o),typeof s.id=="number"&&(o.id=s.id),s.name!==""&&(o.attrName=s.name),s.type!==""&&(o.attrType=s.type),this.pushStack(o)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),o=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&o===","&&(o=i.replace(/"/g,"").replace(/,$/,"").trim());let s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,r,o);return}if(r==="C"){let l=o.split(",").slice(1),u=parseInt(l[0]),f=parseInt(l[1]),h=o.split(",").slice(3);h=h.map(function(p){return p.trim().replace(/^"/,"")}),r="connections",o=[u,f],pfe(o,h),s[r]===void 0&&(s[r]=[])}r==="Node"&&(s.id=o),r in s&&Array.isArray(s[r])?s[r].push(o):r!=="a"?s[r]=o:s.a=o,this.setCurrentProp(s,r),r==="a"&&o.slice(-1)!==","&&(s.a=lR(o))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=lR(t.a))}parseNodeSpecialProperty(e,t,i){let r=i.split('",').map(function(f){return f.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=r[0],s=r[1],a=r[2],l=r[3],u=r[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=lR(u);break}this.getPrevNode()[o]={type:s,type2:a,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),o)}},hR=class{parse(e){let t=new sC(e);t.skip(23);let i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);let r=new aC;for(;!this.endOfContent(t);){let o=this.parseNode(t,i);o!==null&&r.add(o.name,o)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let i={},r=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let s=e.getUint8(),a=e.getString(s);if(r===0)return null;let l=[];for(let p=0;p<o;p++)l.push(this.parseProperty(e));let u=l.length>0?l[0]:"",f=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(i.singleProperty=o===1&&e.getOffset()===r;r>e.getOffset();){let p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,i,p)}return i.propertyList=l,typeof u=="number"&&(i.id=u),f!==""&&(i.attrName=f),h!==""&&(i.attrType=h),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){let r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){let r=[];i.propertyList.forEach(function(o,s){s!==0&&r.push(o)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(o){t[o]=i[o]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],o=i.propertyList[1],s=i.propertyList[2],a=i.propertyList[3],l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:o,type2:s,flag:a,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){let t=e.getString(1),i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":let r=e.getUint32(),o=e.getUint32(),s=e.getUint32();if(o===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}let a=hH(new Uint8Array(e.getArrayBuffer(s))),l=new sC(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},sC=class{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){let t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let r=i.indexOf(0);return r>=0&&(i=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(i)}},aC=class{add(e,t){this[e]=t}};function ufe(n){let e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===_H(n,0,e.length)}function dfe(n){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],t=0;function i(r){let o=n[r-1];return n=n.slice(t+r),t++,o}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function vH(n){let e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function ffe(n){return n/46186158e3}var hfe=[];function rC(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);let o=r*i.dataSize,s=o+i.dataSize;return mfe(hfe,i.buffer,o,s)}var aR=new hr,yp=new V;function yH(n){let e=new dt,t=new dt,i=new dt,r=new dt,o=new dt,s=new dt,a=new dt,l=new dt,u=new dt,f=new dt,h=new dt,p=new dt,g=n.inheritType?n.inheritType:0;n.translation&&e.setPosition(yp.fromArray(n.translation));let v=M0(0);if(n.preRotation){let j=n.preRotation.map(ti.degToRad);j.push(v),t.makeRotationFromEuler(aR.fromArray(j))}if(n.rotation){let j=n.rotation.map(ti.degToRad);j.push(n.eulerOrder||v),i.makeRotationFromEuler(aR.fromArray(j))}if(n.postRotation){let j=n.postRotation.map(ti.degToRad);j.push(v),r.makeRotationFromEuler(aR.fromArray(j)),r.invert()}n.scale&&o.scale(yp.fromArray(n.scale)),n.scalingOffset&&a.setPosition(yp.fromArray(n.scalingOffset)),n.scalingPivot&&s.setPosition(yp.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(yp.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(yp.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(h.copy(n.parentMatrix),f.copy(n.parentMatrixWorld));let x=t.clone().multiply(i).multiply(r),y=new dt;y.extractRotation(f);let _=new dt;_.copyPosition(f);let E=_.clone().invert().multiply(f),S=y.clone().invert().multiply(E),C=o,k=new dt;if(g===0)k.copy(y).multiply(x).multiply(S).multiply(C);else if(g===1)k.copy(y).multiply(S).multiply(x).multiply(C);else{let me=new dt().scale(new V().setFromMatrixScale(h)).clone().invert(),ue=S.clone().multiply(me);k.copy(y).multiply(x).multiply(ue).multiply(C)}let F=u.clone().invert(),L=s.clone().invert(),W=e.clone().multiply(l).multiply(u).multiply(t).multiply(i).multiply(r).multiply(F).multiply(a).multiply(s).multiply(o).multiply(L),O=new dt().copyPosition(W),R=f.clone().multiply(O);return p.copyPosition(R),W=p.clone().multiply(k),W.premultiply(f.invert()),W}function M0(n){n=n||0;let e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function lR(n){return n.split(",").map(function(t){return parseFloat(t)})}function _H(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function pfe(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function mfe(n,e,t,i){for(let r=t,o=0;r<i;r++,o++)n[o]=e[r];return n}function xH(n,e){let t=new oC(e);return new Promise((i,r)=>{t.load(n,o=>{i(o)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var gfe=/^[og]\s*(.+)?/,vfe=/^mtllib /,yfe=/^usemtl /,_fe=/^usemap /,wH=/\s+/,bH=new V,pR=new V,CH=new V,SH=new V,Hs=new V,lC=new pt;function xfe(){let n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}let i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,o){let s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);let a={index:this.materials.length,name:r||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:s!==void 0?s.smooth:this.smooth,groupStart:s!==void 0?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){let u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){let o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),r&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},i&&i.name&&typeof i.clone=="function"){let r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){let r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){let r=this.normals,o=this.object.geometry.normals;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){let r=this.vertices,o=this.object.geometry.normals;bH.fromArray(r,e),pR.fromArray(r,t),CH.fromArray(r,i),Hs.subVectors(CH,pR),SH.subVectors(bH,pR),Hs.cross(SH),Hs.normalize(),o.push(Hs.x,Hs.y,Hs.z),o.push(Hs.x,Hs.y,Hs.z),o.push(Hs.x,Hs.y,Hs.z)},addColor:function(e,t,i){let r=this.colors,o=this.object.geometry.colors;r[e]!==void 0&&o.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&o.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&o.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){let r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0],r[e+1]),o.push(r[t+0],r[t+1]),o.push(r[i+0],r[i+1])},addDefaultUV:function(){let e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){let t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,o,s,a,l,u){let f=this.vertices.length,h=this.parseVertexIndex(e,f),p=this.parseVertexIndex(t,f),g=this.parseVertexIndex(i,f);if(this.addVertex(h,p,g),this.addColor(h,p,g),a!==void 0&&a!==""){let v=this.normals.length;h=this.parseNormalIndex(a,v),p=this.parseNormalIndex(l,v),g=this.parseNormalIndex(u,v),this.addNormal(h,p,g)}else this.addFaceNormal(h,p,g);if(r!==void 0&&r!==""){let v=this.uvs.length;h=this.parseUVIndex(r,v),p=this.parseUVIndex(o,v),g=this.parseUVIndex(s,v),this.addUV(h,p,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";let t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){let o=this.parseVertexIndex(e[i],t);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";let i=this.vertices.length,r=this.uvs.length;for(let o=0,s=e.length;o<s;o++)this.addVertexLine(this.parseVertexIndex(e[o],i));for(let o=0,s=t.length;o<s;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return n.startObject("",!1),n}var cC=class extends is{constructor(e){super(e),this.materials=null}load(e,t,i,r){let o=this,s=new ll(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){let t=new xfe;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));let i=e.split(`
`),r=[];for(let a=0,l=i.length;a<l;a++){let u=i[a].trimStart();if(u.length===0)continue;let f=u.charAt(0);if(f!=="#")if(f==="v"){let h=u.split(wH);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(lC.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]),Cn),t.colors.push(lC.r,lC.g,lC.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(f==="f"){let p=u.slice(1).trim().split(wH),g=[];for(let x=0,y=p.length;x<y;x++){let _=p[x];if(_.length>0){let E=_.split("/");g.push(E)}}let v=g[0];for(let x=1,y=g.length-1;x<y;x++){let _=g[x],E=g[x+1];t.addFace(v[0],_[0],E[0],v[1],_[1],E[1],v[2],_[2],E[2])}}else if(f==="l"){let h=u.substring(1).trim().split(" "),p=[],g=[];if(u.indexOf("/")===-1)p=h;else for(let v=0,x=h.length;v<x;v++){let y=h[v].split("/");y[0]!==""&&p.push(y[0]),y[1]!==""&&g.push(y[1])}t.addLineGeometry(p,g)}else if(f==="p"){let p=u.slice(1).trim().split(" ");t.addPointGeometry(p)}else if((r=gfe.exec(u))!==null){let h=(" "+r[0].slice(1).trim()).slice(1);t.startObject(h)}else if(yfe.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(vfe.test(u))t.materialLibraries.push(u.substring(7).trim());else if(_fe.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(f==="s"){if(r=u.split(" "),r.length>1){let p=r[1].trim().toLowerCase();t.object.smooth=p!=="0"&&p!=="off"}else t.object.smooth=!0;let h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();let o=new Lr;if(o.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let a=0,l=t.objects.length;a<l;a++){let u=t.objects[a],f=u.geometry,h=u.materials,p=f.type==="Line",g=f.type==="Points",v=!1;if(f.vertices.length===0)continue;let x=new Hi;x.setAttribute("position",new jn(f.vertices,3)),f.normals.length>0&&x.setAttribute("normal",new jn(f.normals,3)),f.colors.length>0&&(v=!0,x.setAttribute("color",new jn(f.colors,3))),f.hasUVIndices===!0&&x.setAttribute("uv",new jn(f.uvs,2));let y=[];for(let E=0,S=h.length;E<S;E++){let C=h[E],k=C.name+"_"+C.smooth+"_"+v,F=t.materials[k];if(this.materials!==null){if(F=this.materials.create(C.name),p&&F&&!(F instanceof Ns)){let L=new Ns;tr.prototype.copy.call(L,F),L.color.copy(F.color),F=L}else if(g&&F&&!(F instanceof Ma)){let L=new Ma({size:10,sizeAttenuation:!1});tr.prototype.copy.call(L,F),L.color.copy(F.color),L.map=F.map,F=L}}F===void 0&&(p?F=new Ns:g?F=new Ma({size:1,sizeAttenuation:!1}):F=new al,F.name=C.name,F.flatShading=!C.smooth,F.vertexColors=v,t.materials[k]=F),y.push(F)}let _;if(y.length>1){for(let E=0,S=h.length;E<S;E++){let C=h[E];x.addGroup(C.groupStart,C.groupCount,E)}p?_=new cu(x,y):g?_=new ic(x,y):_=new xi(x,y)}else p?_=new cu(x,y[0]):g?_=new ic(x,y[0]):_=new xi(x,y[0]);_.name=u.name,o.add(_)}else if(t.vertices.length>0){let a=new Ma({size:1,sizeAttenuation:!1}),l=new Hi;l.setAttribute("position",new jn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new jn(t.colors,3)),a.vertexColors=!0);let u=new ic(l,a);o.add(u)}return o}};function EH(n,e){return Ge(this,null,function*(){let t=new cC(e);try{return yield new Promise((r,o)=>{t.load(n,s=>{r(s)},void 0,s=>{s instanceof Error?o(s):o(new Error("An unknown error occurred"))})})}catch(i){throw console.error("Error loading OBJ model:",i),i}})}function MH(n,e){return Ge(this,null,function*(){let t=n.type,i;if(t.includes("gltf")||t.includes("glb")?i="gltf":t.includes("fbx")?i="fbx":t.includes("obj")&&(i="obj"),!i)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0442\u0438\u043F \u043C\u043E\u0434\u0435\u043B\u0438 \u043F\u043E MIME-\u0442\u0438\u043F\u0443.");let r=URL.createObjectURL(n),o;try{switch(i){case"gltf":case"glb":o=oH(r,e);break;case"fbx":o=xH(r,e);break;case"obj":o=EH(r,e);break;default:throw new Error("\u041D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043C\u043E\u0434\u0435\u043B\u0438: "+i)}return yield o}finally{URL.revokeObjectURL(r)}})}function uC(n,e){if(!{}.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var wfe=0;function IH(n){return"__private_"+wfe+++"_"+n}function bfe(n,e,t){let i=[];return n.forEach(r=>typeof r!="string"?i.push(r):e[Symbol.split](r).forEach((o,s,a)=>{o!==""&&i.push(o),s<a.length-1&&i.push(t)})),i}function TH(n,e){let t=/\$/g,i="$$$$",r=[n];if(e==null)return r;for(let o of Object.keys(e))if(o!=="_"){let s=e[o];typeof s=="string"&&(s=t[Symbol.replace](s,i)),r=bfe(r,new RegExp(`%\\{${o}\\}`,"g"),s)}return r}var Cfe=n=>{throw new Error(`missing string: ${n}`)},T0=IH("onMissingKey"),I0=IH("apply"),_p=class{constructor(e,t){let{onMissingKey:i=Cfe}=t===void 0?{}:t;Object.defineProperty(this,I0,{value:Sfe}),Object.defineProperty(this,T0,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(r){return r===1?0:1}},Array.isArray(e)?e.forEach(uC(this,I0)[I0],this):uC(this,I0)[I0](e),uC(this,T0)[T0]=i}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let i=this.locale.strings[e];if(i==null&&(uC(this,T0)[T0](e),i=e),typeof i=="object"){if(t&&typeof t.smart_count<"u"){let o=this.locale.pluralize(t.smart_count);return TH(i[o],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return TH(i,t)}};function Sfe(n){if(!(n!=null&&n.strings))return;let e=this.locale;Object.assign(this.locale,{strings:q(q({},e.strings),n.strings),pluralize:n.pluralize||e.pluralize})}var A5=Iu(DH(),1);var Efe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var RH=(n=21)=>{let e="",t=n|0;for(;t--;)e+=Efe[Math.random()*64|0];return e};var D5=Iu(d5(),1);function fC(n,e){if(!{}.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var yhe=0;function f5(n){return"__private_"+yhe+++"_"+n}var _he={version:"4.2.0"},Gd=f5("callbacks"),yR=f5("publish"),hC=class{constructor(){Object.defineProperty(this,yR,{value:xhe}),this.state={},Object.defineProperty(this,Gd,{writable:!0,value:new Set})}getState(){return this.state}setState(e){let t=q({},this.state),i=q(q({},this.state),e);this.state=i,fC(this,yR)[yR](t,i,e)}subscribe(e){return fC(this,Gd)[Gd].add(e),()=>{fC(this,Gd)[Gd].delete(e)}}};function xhe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];fC(this,Gd)[Gd].forEach(i=>{i(...e)})}hC.VERSION=_he.version;var h5=hC;function D0(n){let e=n.lastIndexOf(".");return e===-1||e===n.length-1?{name:n,extension:void 0}:{name:n.slice(0,e),extension:n.slice(e+1)}}var _R={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function R0(n){var e;if(n.type)return n.type;let t=n.name?(e=D0(n.name).extension)==null?void 0:e.toLowerCase():null;return t&&t in _R?_R[t]:"application/octet-stream"}function whe(n){return n.charCodeAt(0).toString(32)}function p5(n){let e="";return n.replace(/[^A-Z0-9]/gi,t=>(e+=`-${whe(t)}`,"/"))+e}function m5(n,e){let t=e||"uppy";return typeof n.name=="string"&&(t+=`-${p5(n.name.toLowerCase())}`),n.type!==void 0&&(t+=`-${n.type}`),n.meta&&typeof n.meta.relativePath=="string"&&(t+=`-${p5(n.meta.relativePath.toLowerCase())}`),n.data.size!==void 0&&(t+=`-${n.data.size}`),n.data.lastModified!==void 0&&(t+=`-${n.data.lastModified}`),t}function bhe(n){return!n.isRemote||!n.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(n.remote.provider)}function g5(n,e){if(bhe(n))return n.id;let t=R0(n);return m5(Ve(q({},n),{type:t}),e)}function xR(n){if(n==null&&typeof navigator<"u"&&(n=navigator.userAgent),!n)return!0;let e=/Edge\/(\d+\.\d+)/.exec(n);if(!e)return!0;let i=e[1].split(".",2),r=parseInt(i[0],10),o=parseInt(i[1],10);return r<15||r===15&&o<15063||r>18||r===18&&o>=18218}function wR(n,e){return e.name?e.name:n.split("/")[0]==="image"?`${n.split("/")[0]}.${n.split("/")[1]}`:"noname"}function bR(n){return n<10?`0${n}`:n.toString()}function xp(){let n=new Date,e=bR(n.getHours()),t=bR(n.getMinutes()),i=bR(n.getSeconds());return`${e}:${t}:${i}`}var v5={debug:()=>{},warn:()=>{},error:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return console.error(`[Uppy] [${xp()}]`,...e)}},y5={debug:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return console.debug(`[Uppy] [${xp()}]`,...e)},warn:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return console.warn(`[Uppy] [${xp()}]`,...e)},error:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return console.error(`[Uppy] [${xp()}]`,...e)}};var P0=Iu(x5(),1),M5=Iu(E5(),1),T5={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},Ro=class extends Error{constructor(e,t){var i;super(e),this.isRestriction=!0,this.isUserFacing=(i=t?.isUserFacing)!=null?i:!0,t!=null&&t.file&&(this.file=t.file)}},pC=class{constructor(e,t){this.getI18n=t,this.getOpts=()=>{var i;let r=e();if(((i=r.restrictions)==null?void 0:i.allowedFileTypes)!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(e,t){let{maxTotalFileSize:i,maxNumberOfFiles:r}=this.getOpts().restrictions;if(r&&e.filter(s=>!s.isGhost).length+t.length>r)throw new Ro(`${this.getI18n()("youCanOnlyUploadX",{smart_count:r})}`);if(i){let o=[...e,...t].reduce((s,a)=>{var l;return s+((l=a.size)!=null?l:0)},0);if(o>i)throw new Ro(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,P0.default)(i),size:(0,P0.default)(o)}))}}validateSingleFile(e){let{maxFileSize:t,minFileSize:i,allowedFileTypes:r}=this.getOpts().restrictions;if(r&&!r.some(a=>a.includes("/")?e.type?(0,M5.default)(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){let a=r.join(", ");throw new Ro(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(t&&e.size!=null&&e.size>t){var o;throw new Ro(this.getI18n()("exceedsSize",{size:(0,P0.default)(t),file:(o=e.name)!=null?o:this.getI18n()("unnamed")}),{file:e})}if(i&&e.size!=null&&e.size<i)throw new Ro(this.getI18n()("inferiorSize",{size:(0,P0.default)(i)}),{file:e})}validate(e,t){t.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){let{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new Ro(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){var t;let i=new Ro(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(t=e.name)!=null?t:this.getI18n()("unnamed")})),{requiredMetaFields:r}=this.getOpts().restrictions,o=[];for(let s of r)(!Object.hasOwn(e.meta,s)||e.meta[s]==="")&&o.push(s);return{missingFields:o,error:i}}};var I5={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function Xe(n,e){if(!{}.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var Ehe=0;function ni(n){return"__private_"+Ehe+++"_"+n}var Mhe={version:"4.4.5"},mC={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},Sr=ni("plugins"),Er=ni("restricter"),O0=ni("storeUnsubscribe"),fc=ni("emitter"),Wd=ni("preProcessors"),$d=ni("uploaders"),mc=ni("postProcessors"),rs=ni("informAndEmit"),z0=ni("checkRequiredMetaFieldsOnFile"),CR=ni("checkRequiredMetaFields"),F0=ni("assertNewUploadAllowed"),MR=ni("transformFile"),N0=ni("startIfAutoProceed"),L0=ni("checkAndUpdateFileState"),V0=ni("getFilesToRetry"),k0=ni("doRetryAll"),TR=ni("handleUploadProgress"),U0=ni("updateTotalProgress"),gc=ni("updateTotalProgressThrottled"),IR=ni("calculateTotalProgress"),SR=ni("addListeners"),Pa=ni("updateOnlineStatus"),B0=ni("requestClientById"),hc=ni("createUpload"),ER=ni("getUpload"),qd=ni("removeUpload"),pc=ni("runUpload"),gC=class n{constructor(e){Object.defineProperty(this,pc,{value:Hhe}),Object.defineProperty(this,qd,{value:zhe}),Object.defineProperty(this,ER,{value:Vhe}),Object.defineProperty(this,hc,{value:Bhe}),Object.defineProperty(this,SR,{value:Uhe}),Object.defineProperty(this,IR,{value:khe}),Object.defineProperty(this,U0,{value:Lhe}),Object.defineProperty(this,k0,{value:Nhe}),Object.defineProperty(this,V0,{value:Fhe}),Object.defineProperty(this,L0,{value:Ohe}),Object.defineProperty(this,N0,{value:Phe}),Object.defineProperty(this,MR,{value:Rhe}),Object.defineProperty(this,F0,{value:Dhe}),Object.defineProperty(this,CR,{value:Ahe}),Object.defineProperty(this,z0,{value:Ihe}),Object.defineProperty(this,rs,{value:The}),Object.defineProperty(this,Sr,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,Er,{writable:!0,value:void 0}),Object.defineProperty(this,O0,{writable:!0,value:void 0}),Object.defineProperty(this,fc,{writable:!0,value:(0,A5.default)()}),Object.defineProperty(this,Wd,{writable:!0,value:new Set}),Object.defineProperty(this,$d,{writable:!0,value:new Set}),Object.defineProperty(this,mc,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,Object.defineProperty(this,TR,{writable:!0,value:(r,o)=>{let s=r?this.getFile(r.id):void 0;if(r==null||!s){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}if(s.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${r.id}`);return}let a={bytesTotal:o.bytesTotal,percentage:o.bytesTotal!=null&&Number.isFinite(o.bytesTotal)&&o.bytesTotal>0?Math.round(o.bytesUploaded/o.bytesTotal*100):void 0};s.progress.uploadStarted!=null?this.setFileState(r.id,{progress:Ve(q(q({},s.progress),a),{bytesUploaded:o.bytesUploaded})}):this.setFileState(r.id,{progress:q(q({},s.progress),a)}),Xe(this,gc)[gc]()}}),Object.defineProperty(this,gc,{writable:!0,value:(0,D5.default)(()=>Xe(this,U0)[U0](),500,{leading:!0,trailing:!0})}),Object.defineProperty(this,Pa,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,B0,{writable:!0,value:new Map}),this.defaultLocale=I5;let t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:T5,meta:{},onBeforeFileAdded:(r,o)=>!Object.hasOwn(o,r.id),onBeforeUpload:r=>r,store:new h5,logger:v5,infoTimeout:5e3},i=q(q({},t),e);this.opts=Ve(q({},i),{restrictions:q(q({},t.restrictions),e&&e.restrictions)}),e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=y5),this.log(`Using Core v${n.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState(Ve(q({},mC),{plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:xR(),individualCancellation:!0,resumableUploads:!1},meta:q({},this.opts.meta),info:[]})),Xe(this,Er)[Er]=new pC(()=>this.opts,()=>this.i18n),Xe(this,O0)[O0]=this.store.subscribe((r,o,s)=>{this.emit("state-update",r,o,s),this.updateAll(o)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),Xe(this,SR)[SR]()}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];Xe(this,fc)[fc].emit(e,...i)}on(e,t){return Xe(this,fc)[fc].on(e,t),this}once(e,t){return Xe(this,fc)[fc].once(e,t),this}off(e,t){return Xe(this,fc)[fc].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let t=this.getState().files;this.setState({files:q(q({},t),Object.fromEntries(Object.entries(e).map(i=>{let[r,o]=i;return[r,q(q({},t[r]),o)]})))})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){let e=i=>this.log(`Missing i18n string: ${i}`,"error"),t=new _p([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts=Ve(q(q({},this.opts),e),{restrictions:q(q({},this.opts.restrictions),e?.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t=q({},this.getState().files),i=Object.create(null);Object.keys(t).forEach(r=>{i[r]=Ve(q({},t[r]),{progress:q(q({},t[r].progress),e),tus:void 0,transloadit:void 0})}),this.setState(q({files:i},mC))}clear(){let{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState(Ve(q({},mC),{files:{}}))}addPreProcessor(e){Xe(this,Wd)[Wd].add(e)}removePreProcessor(e){return Xe(this,Wd)[Wd].delete(e)}addPostProcessor(e){Xe(this,mc)[mc].add(e)}removePostProcessor(e){return Xe(this,mc)[mc].delete(e)}addUploader(e){Xe(this,$d)[$d].add(e)}removeUploader(e){return Xe(this,$d)[$d].delete(e)}setMeta(e){let t=q(q({},this.getState().meta),e),i=q({},this.getState().files);Object.keys(i).forEach(r=>{i[r]=Ve(q({},i[r]),{meta:q(q({},i[r].meta),e)})}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:i})}setFileMeta(e,t){let i=q({},this.getState().files);if(!i[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}let r=q(q({},i[e].meta),t);i[e]=Ve(q({},i[e]),{meta:r}),this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){let{files:e,totalProgress:t,error:i}=this.getState(),r=Object.values(e),o=[],s=[],a=[],l=[],u=[],f=[],h=[],p=[],g=[];for(let v of r){let{progress:x}=v;!x.uploadComplete&&x.uploadStarted&&(o.push(v),v.isPaused||p.push(v)),x.uploadStarted||s.push(v),(x.uploadStarted||x.preprocess||x.postprocess)&&a.push(v),x.uploadStarted&&l.push(v),v.isPaused&&u.push(v),x.uploadComplete&&f.push(v),v.error&&h.push(v),(x.preprocess||x.postprocess)&&g.push(v)}return{newFiles:s,startedFiles:a,uploadStartedFiles:l,pausedFiles:u,completeFiles:f,erroredFiles:h,inProgressFiles:o,inProgressNotPausedFiles:p,processingFiles:g,isUploadStarted:l.length>0,isAllComplete:t===100&&f.length===r.length&&g.length===0,isAllErrored:!!i&&h.length===r.length,isAllPaused:o.length!==0&&u.length===o.length,isUploadInProgress:o.length>0,isSomeGhost:r.some(v=>v.isGhost)}}validateRestrictions(e,t){t===void 0&&(t=this.getFiles());try{Xe(this,Er)[Er].validate(t,[e])}catch(i){return i}return null}validateSingleFile(e){try{Xe(this,Er)[Er].validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){let t=this.getFiles();try{Xe(this,Er)[Er].validateAggregateRestrictions(t,e)}catch(i){return i.message}return null}checkIfFileAlreadyExists(e){let{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){Xe(this,F0)[F0](e);let{nextFilesState:t,validFilesToAdd:i,errors:r}=Xe(this,L0)[L0]([e]),o=r.filter(a=>a.isRestriction);if(Xe(this,rs)[rs](o),r.length>0)throw r[0];this.setState({files:t});let[s]=i;return this.emit("file-added",s),this.emit("files-added",i),this.log(`Added file: ${s.name}, ${s.id}, mime type: ${s.type}`),Xe(this,N0)[N0](),s.id}addFiles(e){Xe(this,F0)[F0]();let{nextFilesState:t,validFilesToAdd:i,errors:r}=Xe(this,L0)[L0](e),o=r.filter(a=>a.isRestriction);Xe(this,rs)[rs](o);let s=r.filter(a=>!a.isRestriction);if(s.length>0){let a=`Multiple errors occurred while adding files:
`;if(s.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:s.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(s,a);{let l=new Error(a);throw l.errors=s,l}}this.setState({files:t}),i.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),i.length>0&&Xe(this,N0)[N0]()}removeFiles(e){let{files:t,currentUploads:i}=this.getState(),r=q({},t),o=q({},i),s=Object.create(null);e.forEach(f=>{t[f]&&(s[f]=t[f],delete r[f])});function a(f){return s[f]===void 0}Object.keys(o).forEach(f=>{let h=i[f].fileIDs.filter(a);if(h.length===0){delete o[f];return}let{capabilities:p}=this.getState();if(h.length!==i[f].fileIDs.length&&!p.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");o[f]=Ve(q({},i[f]),{fileIDs:h})});let l={currentUploads:o,files:r};Object.keys(r).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),Xe(this,gc)[gc]();let u=Object.keys(s);u.forEach(f=>{this.emit("file-removed",s[f])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let t=this.getFile(e),r=!(t.isPaused||!1);return this.setFileState(e,{isPaused:r}),this.emit("upload-pause",t,r),r}pauseAll(){let e=q({},this.getState().files);Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let r=Ve(q({},e[i]),{isPaused:!0});e[i]=r}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e=q({},this.getState().files);Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let r=Ve(q({},e[i]),{isPaused:!1,error:null});e[i]=r}),this.setState({files:e}),this.emit("resume-all")}retryAll(){return Ge(this,null,function*(){let e=yield Xe(this,k0)[k0]();return this.emit("complete",e),e})}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(mC)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let t=Xe(this,hc)[hc]([e],{forceAllowNewUpload:!0});return Xe(this,pc)[pc](t)}logout(){this.iteratePlugins(e=>{var t;(t=e.provider)==null||t.logout==null||t.logout()})}[Symbol.for("uppy test: updateTotalProgress")](){return Xe(this,U0)[U0]()}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){let l=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];let o=new e(this,...i),s=o.id;if(!s)throw new Error("Your plugin must have an id");if(!o.type)throw new Error("Your plugin must have a type");let a=this.getPlugin(s);if(a){let l=`Already found a plugin named '${a.id}'. Tried to use: '${s}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return e.VERSION&&this.log(`Using ${s} v${e.VERSION}`),o.type in Xe(this,Sr)[Sr]?Xe(this,Sr)[Sr][o.type].push(o):Xe(this,Sr)[Sr][o.type]=[o],o.install(),this.emit("plugin-added",o),this}getPlugin(e){for(let t of Object.values(Xe(this,Sr)[Sr])){let i=t.find(r=>r.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return Xe(this,Sr)[Sr][e]}iteratePlugins(e){Object.values(Xe(this,Sr)[Sr]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let t=Xe(this,Sr)[Sr][e.type],i=t.findIndex(s=>s.id===e.id);i!==-1&&t.splice(i,1);let r=this.getState(),o={plugins:Ve(q({},r.plugins),{[e.id]:void 0})};this.setState(o)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),Xe(this,O0)[O0](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",Xe(this,Pa)[Pa]),window.removeEventListener("offline",Xe(this,Pa)[Pa]))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,i){t===void 0&&(t="info"),i===void 0&&(i=3e3);let r=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:r?e.message:e,details:r?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,t){let{logger:i}=this.opts;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}registerRequestClient(e,t){Xe(this,B0)[B0].set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let t=Xe(this,B0)[B0].get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?Xe(this,pc)[pc](e):(Xe(this,qd)[qd](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return Xe(this,hc)[hc](...arguments)}addResultData(e,t){if(!Xe(this,ER)[ER](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:i}=this.getState(),r=Ve(q({},i[e]),{result:q(q({},i[e].result),t)});this.setState({currentUploads:Ve(q({},i),{[e]:r})})}upload(){return Ge(this,null,function*(){var e;(e=Xe(this,Sr)[Sr].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();if(Xe(this,V0)[V0]().length>0){let o=yield Xe(this,k0)[k0]();if(!(this.getFiles().filter(a=>a.progress.uploadStarted==null).length>0))return this.emit("complete",o),o;({files:t}=this.getState())}let r=this.opts.onBeforeUpload(t);return r===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&typeof r=="object"&&(t=r,this.setState({files:t})),Promise.resolve().then(()=>Xe(this,Er)[Er].validateMinNumberOfFiles(t)).catch(o=>{throw Xe(this,rs)[rs]([o]),o}).then(()=>{if(!Xe(this,CR)[CR](t))throw new Ro(this.i18n("missingRequiredMetaField"))}).catch(o=>{throw o}).then(()=>Ge(this,null,function*(){let{currentUploads:o}=this.getState(),s=Object.values(o).flatMap(f=>f.fileIDs),a=[];Object.keys(t).forEach(f=>{let h=this.getFile(f);!h.progress.uploadStarted&&s.indexOf(f)===-1&&a.push(h.id)});let l=Xe(this,hc)[hc](a),u=yield Xe(this,pc)[pc](l);return this.emit("complete",u),u})).catch(o=>{throw this.emit("error",o),this.log(o,"error"),o}))})}};function The(n){for(let o of n)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");let e=n.filter(o=>o.isUserFacing),t=4,i=e.slice(0,t),r=e.slice(t);i.forEach(o=>{let{message:s,details:a=""}=o;this.info({message:s,details:a},"error",this.opts.infoTimeout)}),r.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:r.length})})}function Ihe(n){let{missingFields:e,error:t}=Xe(this,Er)[Er].getMissingRequiredMetaFields(n);return e.length>0?(this.setFileState(n.id,{missingRequiredMetaFields:e}),this.log(t.message),this.emit("restriction-failed",n,t),!1):!0}function Ahe(n){let e=!0;for(let t of Object.values(n))Xe(this,z0)[z0](t)||(e=!1);return e}function Dhe(n){let{allowNewUpload:e}=this.getState();if(e===!1){let t=new Ro(this.i18n("noMoreFilesAllowed"),{file:n});throw Xe(this,rs)[rs]([t]),t}}function Rhe(n){let e=n instanceof File?{name:n.name,type:n.type,size:n.size,data:n}:n,t=R0(e),i=wR(t,e),r=D0(i).extension,o=g5(e,this.getID()),s=e.meta||{};s.name=i,s.type=t;let a=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:o,name:i,extension:r||"",meta:q(q({},this.getState().meta),s),type:t,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function Phe(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(n=>{n.isRestriction||this.log(n.stack||n.message||n)})},4))}function Ohe(n){let{files:e}=this.getState(),t=q({},e),i=[],r=[];for(let a of n)try{var o;let l=Xe(this,MR)[MR](a),u=(o=e[l.id])==null?void 0:o.isGhost;if(u){let h=e[l.id];l=Ve(q({},h),{isGhost:!1,data:a.data}),this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`)}let f=this.opts.onBeforeFileAdded(l,t);if(!f&&this.checkIfFileAlreadyExists(l.id)){var s;throw new Ro(this.i18n("noDuplicates",{fileName:(s=l.name)!=null?s:this.i18n("unnamed")}),{file:a})}if(f===!1&&!u)throw new Ro("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof f=="object"&&f!==null&&(l=f),Xe(this,Er)[Er].validateSingleFile(l),t[l.id]=l,i.push(l)}catch(l){r.push(l)}try{Xe(this,Er)[Er].validateAggregateRestrictions(Object.values(e),i)}catch(a){return r.push(a),{nextFilesState:e,validFilesToAdd:[],errors:r}}return{nextFilesState:t,validFilesToAdd:i,errors:r}}function Fhe(){let{files:n}=this.getState();return Object.keys(n).filter(e=>n[e].error)}function Nhe(){return Ge(this,null,function*(){let n=Xe(this,V0)[V0](),e=q({},this.getState().files);if(n.forEach(i=>{e[i]=Ve(q({},e[i]),{isPaused:!1,error:null})}),this.setState({files:e,error:null}),this.emit("retry-all",this.getFilesByIds(n)),n.length===0)return{successful:[],failed:[]};let t=Xe(this,hc)[hc](n,{forceAllowNewUpload:!0});return Xe(this,pc)[pc](t)})}function Lhe(){var n,e;let t=Xe(this,IR)[IR](),i=null;t!=null&&(i=Math.round(t*100),i>100?i=100:i<0&&(i=0)),this.emit("progress",(n=i)!=null?n:0),this.setState({totalProgress:(e=i)!=null?e:0})}function khe(){let e=this.getFiles().filter(a=>a.progress.uploadStarted||a.progress.preprocess||a.progress.postprocess);if(e.length===0)return 0;if(e.every(a=>a.progress.uploadComplete))return 1;let t=a=>a.progress.bytesTotal!=null&&a.progress.bytesTotal!==0,i=e.filter(t),r=e.filter(a=>!t(a));if(i.every(a=>a.progress.uploadComplete)&&r.length>0&&!r.every(a=>a.progress.uploadComplete))return null;let o=i.reduce((a,l)=>{var u;return a+((u=l.progress.bytesTotal)!=null?u:0)},0),s=i.reduce((a,l)=>a+(l.progress.bytesUploaded||0),0);return o===0?0:s/o}function Uhe(){let n=(i,r,o)=>{let s=i.message||"Unknown error";i.details&&(s+=` ${i.details}`),this.setState({error:s}),r!=null&&r.id in this.getState().files&&this.setFileState(r.id,{error:s,response:o})};this.on("error",n),this.on("upload-error",(i,r,o)=>{if(n(r,i,o),typeof r=="object"&&r.message){var s;this.log(r.message,"error");let a=new Error(this.i18n("failedToUpload",{file:(s=i?.name)!=null?s:""}));a.isUserFacing=!0,a.details=r.message,r.details&&(a.details+=` ${r.details}`),Xe(this,rs)[rs]([a])}else Xe(this,rs)[rs]([r])});let e=null;this.on("upload-stalled",(i,r)=>{let{message:o}=i,s=r.map(a=>a.meta.name).join(", ");e||(this.info({message:o,details:s},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${o} ${s}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let t=i=>{let r=i.filter(s=>{let a=s!=null&&this.getFile(s.id);return a||this.log(`Not setting progress for a file that has been removed: ${s?.id}`),a}),o=Object.fromEntries(r.map(s=>[s.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:s.size}}]));this.patchFilesState(o)};this.on("upload-start",t),this.on("upload-progress",Xe(this,TR)[TR]),this.on("upload-success",(i,r)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let o=this.getFile(i.id).progress;this.setFileState(i.id,{progress:Ve(q({},o),{postprocess:Xe(this,mc)[mc].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal}),response:r,uploadURL:r.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:r.bytesUploaded||o.bytesTotal}),Xe(this,gc)[gc]()}),this.on("preprocess-progress",(i,r)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:Ve(q({},this.getFile(i.id).progress),{preprocess:r})})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let r=q({},this.getState().files);r[i.id]=Ve(q({},r[i.id]),{progress:q({},r[i.id].progress)}),delete r[i.id].progress.preprocess,this.setState({files:r})}),this.on("postprocess-progress",(i,r)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:Ve(q({},this.getState().files[i.id].progress),{postprocess:r})})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let r=q({},this.getState().files);r[i.id]=Ve(q({},r[i.id]),{progress:q({},r[i.id].progress)}),delete r[i.id].progress.postprocess,this.setState({files:r})}),this.on("restored",()=>{Xe(this,gc)[gc]()}),this.on("dashboard:file-edit-complete",i=>{i&&Xe(this,z0)[z0](i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",Xe(this,Pa)[Pa]),window.addEventListener("offline",Xe(this,Pa)[Pa]),setTimeout(Xe(this,Pa)[Pa],3e3))}function Bhe(n,e){e===void 0&&(e={});let{forceAllowNewUpload:t=!1}=e,{allowNewUpload:i,currentUploads:r}=this.getState();if(!i&&!t)throw new Error("Cannot create a new upload: already uploading.");let o=RH();return this.emit("upload",o,this.getFilesByIds(n)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:Ve(q({},r),{[o]:{fileIDs:n,step:0,result:{}}})}),o}function Vhe(n){let{currentUploads:e}=this.getState();return e[n]}function zhe(n){let e=q({},this.getState().currentUploads);delete e[n],this.setState({currentUploads:e})}function Hhe(n){return Ge(this,null,function*(){let e=()=>{let{currentUploads:o}=this.getState();return o[n]},t=e(),i=[...Xe(this,Wd)[Wd],...Xe(this,$d)[$d],...Xe(this,mc)[mc]];try{for(let o=t.step||0;o<i.length&&t;o++){let s=i[o];this.setState({currentUploads:Ve(q({},this.getState().currentUploads),{[n]:Ve(q({},t),{step:o})})});let{fileIDs:a}=t;yield s(a,n),t=e()}}catch(o){throw Xe(this,qd)[qd](n),o}if(t){t.fileIDs.forEach(l=>{let u=this.getFile(l);u&&u.progress.postprocess&&this.emit("postprocess-complete",u)});let o=t.fileIDs.map(l=>this.getFile(l)),s=o.filter(l=>!l.error),a=o.filter(l=>l.error);this.addResultData(n,{successful:s,failed:a,uploadID:n}),t=e()}let r;return t&&(r=t.result,Xe(this,qd)[qd](n)),r==null&&(this.log(`Not setting result for an upload that has been removed: ${n}`),r={successful:[],failed:[],uploadID:n}),r})}gC.VERSION=Mhe.version;var vC=gC;var H0=class{constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:Ve(q({},t),{[this.id]:q(q({},t[this.id]),e)})})}setOptions(e){this.opts=q(q({},this.opts),e),this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new _p([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function vc(n,e){if(!{}.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var jhe=0;function R5(n){return"__private_"+jhe+++"_"+n}var Jr=R5("uppy"),j0=R5("events"),yC=class{constructor(e){Object.defineProperty(this,Jr,{writable:!0,value:void 0}),Object.defineProperty(this,j0,{writable:!0,value:[]}),vc(this,Jr)[Jr]=e}on(e,t){return vc(this,j0)[j0].push([e,t]),vc(this,Jr)[Jr].on(e,t)}remove(){for(let[e,t]of vc(this,j0)[j0].splice(0))vc(this,Jr)[Jr].off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,r)=>{e===i?.id&&t(r)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,r)=>{e===i?.id&&t(r)})}onRetry(e,t){this.on("upload-retry",i=>{e===i?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{vc(this,Jr)[Jr].getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{vc(this,Jr)[Jr].getFile(e)&&t()})}onCancelAll(e,t){var i=this;this.on("cancel-all",function(){vc(i,Jr)[Jr].getFile(e)&&t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{vc(this,Jr)[Jr].getFile(e)&&t()})}};function Nt(n,e){if(!{}.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var Ghe=0;function Po(n){return"__private_"+Ghe+++"_"+n}function Whe(n){return new Error("Cancelled",{cause:n})}function P5(n){if(n!=null){var e;let t=()=>this.abort(n.reason);n.addEventListener("abort",t,{once:!0});let i=()=>{n.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,i,i)}return this}var ss=Po("activeRequests"),eo=Po("queuedHandlers"),os=Po("paused"),Xd=Po("pauseTimer"),Qr=Po("downLimit"),Yd=Po("upperLimit"),yc=Po("rateLimitingTimer"),G0=Po("call"),_c=Po("queueNext"),RR=Po("next"),AR=Po("queue"),PR=Po("dequeue"),DR=Po("resume"),Zd=Po("increaseLimit"),_C=class{constructor(e){Object.defineProperty(this,PR,{value:Zhe}),Object.defineProperty(this,AR,{value:Yhe}),Object.defineProperty(this,RR,{value:Xhe}),Object.defineProperty(this,_c,{value:qhe}),Object.defineProperty(this,G0,{value:$he}),Object.defineProperty(this,ss,{writable:!0,value:0}),Object.defineProperty(this,eo,{writable:!0,value:[]}),Object.defineProperty(this,os,{writable:!0,value:!1}),Object.defineProperty(this,Xd,{writable:!0,value:void 0}),Object.defineProperty(this,Qr,{writable:!0,value:1}),Object.defineProperty(this,Yd,{writable:!0,value:void 0}),Object.defineProperty(this,yc,{writable:!0,value:void 0}),Object.defineProperty(this,DR,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,Zd,{writable:!0,value:()=>{if(Nt(this,os)[os]){Nt(this,yc)[yc]=setTimeout(Nt(this,Zd)[Zd],0);return}Nt(this,Qr)[Qr]=this.limit,this.limit=Math.ceil((Nt(this,Yd)[Yd]+Nt(this,Qr)[Qr])/2);for(let t=Nt(this,Qr)[Qr];t<=this.limit;t++)Nt(this,_c)[_c]();Nt(this,Yd)[Yd]-Nt(this,Qr)[Qr]>3?Nt(this,yc)[yc]=setTimeout(Nt(this,Zd)[Zd],2e3):Nt(this,Qr)[Qr]=Math.floor(Nt(this,Qr)[Qr]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!Nt(this,os)[os]&&Nt(this,ss)[ss]<this.limit?Nt(this,G0)[G0](e):Nt(this,AR)[AR](e,t)}wrapSyncFunction(e,t){var i=this;return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];let a=i.run(()=>(e(...o),queueMicrotask(()=>a.done()),()=>{}),t);return{abortOn:P5,abort(){a.abort()}}}}wrapPromiseFunction(e,t){var i=this;return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];let a,l=new Promise((u,f)=>{a=i.run(()=>{let h,p;try{p=Promise.resolve(e(...o))}catch(g){p=Promise.reject(g)}return p.then(g=>{h?f(h):(a.done(),u(g))},g=>{h?f(h):(a.done(),f(g))}),g=>{h=Whe(g)}},t)});return l.abort=u=>{a.abort(u)},l.abortOn=P5,l}}resume(){Nt(this,os)[os]=!1,clearTimeout(Nt(this,Xd)[Xd]);for(let e=0;e<this.limit;e++)Nt(this,_c)[_c]()}pause(e){e===void 0&&(e=null),Nt(this,os)[os]=!0,clearTimeout(Nt(this,Xd)[Xd]),e!=null&&(Nt(this,Xd)[Xd]=setTimeout(Nt(this,DR)[DR],e))}rateLimit(e){clearTimeout(Nt(this,yc)[yc]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(Nt(this,Yd)[Yd]=this.limit-1,this.limit=Nt(this,Qr)[Qr],Nt(this,yc)[yc]=setTimeout(Nt(this,Zd)[Zd],e))}get isPaused(){return Nt(this,os)[os]}};function $he(n){Nt(this,ss)[ss]+=1;let e=!1,t;try{t=n()}catch(i){throw Nt(this,ss)[ss]-=1,i}return{abort:i=>{e||(e=!0,Nt(this,ss)[ss]-=1,t?.(i),Nt(this,_c)[_c]())},done:()=>{e||(e=!0,Nt(this,ss)[ss]-=1,Nt(this,_c)[_c]())}}}function qhe(){queueMicrotask(()=>Nt(this,RR)[RR]())}function Xhe(){if(Nt(this,os)[os]||Nt(this,ss)[ss]>=this.limit||Nt(this,eo)[eo].length===0)return;let n=Nt(this,eo)[eo].shift();if(n==null)throw new Error("Invariant violation: next is null");let e=Nt(this,G0)[G0](n.fn);n.abort=e.abort,n.done=e.done}function Yhe(n,e){let t={fn:n,priority:e?.priority||0,abort:()=>{Nt(this,PR)[PR](t)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=Nt(this,eo)[eo].findIndex(r=>t.priority>r.priority);return i===-1?Nt(this,eo)[eo].push(t):Nt(this,eo)[eo].splice(i,0,t),t}function Zhe(n){let e=Nt(this,eo)[eo].indexOf(n);e!==-1&&Nt(this,eo)[eo].splice(e,1)}var xC=Symbol("__queue");var OR=class extends Error{constructor(e,t){t===void 0&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}},W0=OR;function Khe(n){return n?n.readyState!==0&&n.readyState!==4||n.status===0:!1}var O5=Khe;function js(n,e){if(!{}.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var Jhe=0;function wC(n){return"__private_"+Jhe+++"_"+n}var xc=wC("aliveTimer"),Kd=wC("isDone"),$0=wC("onTimedOut"),Jd=wC("timeout"),FR=class{constructor(e,t){Object.defineProperty(this,xc,{writable:!0,value:void 0}),Object.defineProperty(this,Kd,{writable:!0,value:!1}),Object.defineProperty(this,$0,{writable:!0,value:void 0}),Object.defineProperty(this,Jd,{writable:!0,value:void 0}),js(this,Jd)[Jd]=e,js(this,$0)[$0]=()=>t(e)}progress(){js(this,Kd)[Kd]||js(this,Jd)[Jd]>0&&(clearTimeout(js(this,xc)[xc]),js(this,xc)[xc]=setTimeout(js(this,$0)[$0],js(this,Jd)[Jd]))}done(){js(this,Kd)[Kd]||(clearTimeout(js(this,xc)[xc]),js(this,xc)[xc]=void 0,js(this,Kd)[Kd]=!0)}},F5=FR;var bC=()=>{};function N5(n,e){e===void 0&&(e={});let{body:t=null,headers:i={},method:r="GET",onBeforeRequest:o=bC,onUploadProgress:s=bC,shouldRetry:a=()=>!0,onAfterResponse:l=bC,onTimeout:u=bC,responseType:f,retries:h=3,signal:p=null,timeout:g=3e4,withCredentials:v=!1}=e,x=E=>.3*2**(E-1)*1e3,y=new F5(g,u);function _(E){return E===void 0&&(E=0),new Promise((S,C)=>Ge(null,null,function*(){let k=new XMLHttpRequest,F=L=>{a(k)&&E<h?setTimeout(()=>{_(E+1).then(S,C)},x(E)):(y.done(),C(L))};k.open(r,n,!0),k.withCredentials=v,f&&(k.responseType=f),p?.addEventListener("abort",()=>{k.abort(),C(new DOMException("Aborted","AbortError"))}),k.onload=()=>Ge(null,null,function*(){try{yield l(k,E)}catch(L){L.request=k,F(L);return}k.status>=200&&k.status<300?(y.done(),S(k)):a(k)&&E<h?setTimeout(()=>{_(E+1).then(S,C)},x(E)):(y.done(),C(new W0(k.statusText,k)))}),k.onerror=()=>F(new W0(k.statusText,k)),k.upload.onprogress=L=>{y.progress(),s(L)},i&&Object.keys(i).forEach(L=>{k.setRequestHeader(L,i[L])}),yield o(k,E),k.send(t)}))}return _()}function L5(n){let e=t=>"error"in t&&!!t.error;return n.filter(t=>!e(t))}function k5(n){return n.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}function CC(n,e){return n===!0?Object.keys(e):Array.isArray(n)?n:[]}var U5={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function wc(n,e){if(!{}.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var Qhe=0;function wp(n){return"__private_"+Qhe+++"_"+n}var epe={version:"4.3.3"};function tpe(n,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),O5(n)?(t=new W0(t,n),t):(t.request=n,t)}function B5(n){return n.data.slice(0,n.data.size,n.meta.type)}var npe={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""},Qd=wp("getFetcher"),kR=wp("uploadLocalFile"),NR=wp("uploadBundle"),UR=wp("getCompanionClientArgs"),LR=wp("uploadFiles"),q0=wp("handleUpload"),X0=class extends H0{constructor(e,t){if(super(e,q(Ve(q({},npe),{fieldName:t.bundle?"files[]":"file"}),t)),Object.defineProperty(this,LR,{value:spe}),Object.defineProperty(this,UR,{value:ope}),Object.defineProperty(this,NR,{value:rpe}),Object.defineProperty(this,kR,{value:ipe}),Object.defineProperty(this,Qd,{writable:!0,value:void 0}),Object.defineProperty(this,q0,{writable:!0,value:i=>Ge(this,null,function*(){if(i.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[xC]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");let r=this.uppy.getFilesByIds(i),o=L5(r),s=k5(o);if(this.uppy.emit("upload-start",s),this.opts.bundle){if(o.some(l=>l.isRemote))throw new Error("Can\u2019t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");yield wc(this,NR)[NR](o)}else yield wc(this,LR)[LR](o)})}),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=U5,this.i18nInit(),xC in this.opts?this.requests=this.opts[xC]:this.requests=new _C(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if(t?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),wc(this,Qd)[Qd]=i=>(r,o)=>Ge(this,null,function*(){try{var s,a,l;let h=yield N5(r,Ve(q({},o),{onBeforeRequest:(v,x)=>{var y,_;return(y=(_=this.opts).onBeforeRequest)==null?void 0:y.call(_,v,x,i)},shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:v=>{let x=Math.ceil(v/1e3),y=new Error(this.i18n("uploadStalled",{seconds:x}));this.uppy.emit("upload-stalled",y,i)},onUploadProgress:v=>{if(v.lengthComputable)for(let{id:y}of i){var x;let _=this.uppy.getFile(y);this.uppy.emit("upload-progress",_,{uploadStarted:(x=_.progress.uploadStarted)!=null?x:0,bytesUploaded:v.loaded/v.total*_.size,bytesTotal:_.size})}}})),p=yield(s=(a=this.opts).getResponseData)==null?void 0:s.call(a,h);if(h.responseType==="json"){var u;(u=p)!=null||(p=h.response)}else try{var f;(f=p)!=null||(p=JSON.parse(h.responseText))}catch(v){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:v})}let g=typeof((l=p)==null?void 0:l.url)=="string"?p.url:void 0;for(let{id:v}of i)this.uppy.emit("upload-success",this.uppy.getFile(v),{status:h.status,body:p,uploadURL:g});return h}catch(h){if(h.name==="AbortError")return;let p=h.request;for(let g of i)this.uppy.emit("upload-error",this.uppy.getFile(g.id),tpe(p,h),p);throw h}})}getOptions(e){let t=this.uppy.getState().xhrUpload,{headers:i}=this.opts,r=Ve(q(q(q({},this.opts),t||{}),e.xhrUpload||{}),{headers:{}});return typeof i=="function"?r.headers=i(e):Object.assign(r.headers,this.opts.headers),t&&Object.assign(r.headers,t.headers),e.xhrUpload&&Object.assign(r.headers,e.xhrUpload.headers),r}addMetadata(e,t,i){CC(i.allowedMetaFields,t).forEach(o=>{let s=t[o];Array.isArray(s)?s.forEach(a=>e.append(o,a)):e.append(o,s)})}createFormDataUpload(e,t){let i=new FormData;this.addMetadata(i,e.meta,t);let r=B5(e);return e.name?i.append(t.fieldName,r,e.meta.name):i.append(t.fieldName,r),i}createBundledUpload(e,t){let i=new FormData,{meta:r}=this.uppy.getState();return this.addMetadata(i,r,t),e.forEach(o=>{let s=this.getOptions(o),a=B5(o);o.name?i.append(s.fieldName,a,o.name):i.append(s.fieldName,a)}),i}install(){if(this.opts.bundle){let{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:Ve(q({},e),{individualCancellation:!1})})}this.uppy.addUploader(wc(this,q0)[q0])}uninstall(){if(this.opts.bundle){let{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:Ve(q({},e),{individualCancellation:!0})})}this.uppy.removeUploader(wc(this,q0)[q0])}};function ipe(n){return Ge(this,null,function*(){let e=new yC(this.uppy),t=new AbortController,i=this.requests.wrapPromiseFunction(()=>Ge(this,null,function*(){let r=this.getOptions(n),o=wc(this,Qd)[Qd]([n]),s=r.formData?this.createFormDataUpload(n,r):n.data;return o(r.endpoint,Ve(q({},r),{body:s,signal:t.signal}))}));e.onFileRemove(n.id,()=>t.abort()),e.onCancelAll(n.id,()=>{t.abort()});try{yield i().abortOn(t.signal)}catch(r){if(r.message!=="Cancelled")throw r}finally{e.remove()}})}function rpe(n){return Ge(this,null,function*(){let e=new AbortController,t=this.requests.wrapPromiseFunction(()=>Ge(this,null,function*(){var r;let o=(r=this.uppy.getState().xhrUpload)!=null?r:{},s=wc(this,Qd)[Qd](n),a=this.createBundledUpload(n,q(q({},this.opts),o));return s(this.opts.endpoint,Ve(q({},this.opts),{body:a,signal:e.signal}))}));function i(){e.abort()}this.uppy.once("cancel-all",i);try{yield t().abortOn(e.signal)}catch(r){if(r.message!=="Cancelled")throw r}finally{this.uppy.off("cancel-all",i)}})}function ope(n){var e;let t=this.getOptions(n),i=CC(t.allowedMetaFields,n.meta);return Ve(q({},(e=n.remote)==null?void 0:e.body),{protocol:"multipart",endpoint:t.endpoint,size:n.data.size,fieldname:t.fieldName,metadata:Object.fromEntries(i.map(r=>[r,n.meta[r]])),httpMethod:t.method,useFormData:t.formData,headers:t.headers})}function spe(n){return Ge(this,null,function*(){yield Promise.allSettled(n.map(e=>{if(e.isRemote){let t=()=>this.requests,i=new AbortController,r=s=>{s.id===e.id&&i.abort()};this.uppy.on("file-removed",r);let o=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,wc(this,UR)[UR](e),{signal:i.signal,getQueue:t});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",r)},{priority:-1})(),o}return wc(this,kR)[kR](e)}))})}X0.VERSION=epe.version;var dl=(()=>{class n{httpModule;baseServiceUrl=di+"furniture/images/";constructor(t){this.httpModule=t}GETaccountAvatar(t){return`${di}account/avatar?jwt=${t}`}POSTuploadUserAvatar(t,i){let r=new FormData;r.append("image",t);let o=new on().set("jwt",i);return xn(this.httpModule.post(`${di}account/avatar`,r,{params:o}))}POSTuploadProjectImages(t,i,r,o){let s=new FormData;i.images.forEach(l=>s.append("images",l));let a=new on().set("furnitureCardId",o).set("color",t).set("idMainImage",i.idMainImage).set("jwt",r);return xn(this.httpModule.post(this.baseServiceUrl+"upload",s,{params:a}))}DELETEprojectColor(t,i,r){let o=new on().set("jwt",t).set("furnitureCardId",i).set("color",r);return xn(this.httpModule.delete(this.baseServiceUrl+"delete/color",{params:o}))}DELETEproject(t,i){let r=new on().set("jwt",t).set("furnitureCardId",i);return xn(this.httpModule.delete(this.baseServiceUrl+"delete/project",{params:r}))}GETallProjectImages(t,i){let r=new on().set("furnitureCardId",t).set("color",i);return xn(this.httpModule.get(this.baseServiceUrl+"all",{params:r}))}GETmainImage(t,i){return`${this.baseServiceUrl}main?furnitureCardId=${t}&color=${i}`}static \u0275fac=function(i){return new(i||n)(He(Gi))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var V5=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=Am(this.platformId)}static getCookieRegExp(t){let i=t.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return this.documentIsAccessible?(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie)):!1}get(t){if(this.check(t)){t=encodeURIComponent(t);let r=n.getCookieRegExp(t).exec(this.document.cookie);return r&&r[1]?n.safeDecodeURIComponent(r[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let t={},i=this.document;return i.cookie&&i.cookie!==""&&i.cookie.split(";").forEach(r=>{let[o,s]=r.split("=");t[n.safeDecodeURIComponent(o.replace(/^ /,""))]=n.safeDecodeURIComponent(s)}),t}set(t,i,r,o,s,a,l,u){if(!this.documentIsAccessible)return;if(typeof r=="number"||r instanceof Date||o||s||a||l){let p={expires:r,path:o,domain:s,secure:a,sameSite:l||"Lax",partitioned:u};this.set(t,i,p);return}let f=encodeURIComponent(t)+"="+encodeURIComponent(i)+";",h=r||{};if(h.expires)if(typeof h.expires=="number"){let p=new Date(new Date().getTime()+h.expires*1e3*60*60*24);f+="expires="+p.toUTCString()+";"}else f+="expires="+h.expires.toUTCString()+";";h.path&&(f+="path="+h.path+";"),h.domain&&(f+="domain="+h.domain+";"),h.secure===!1&&h.sameSite==="None"&&(h.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),h.secure&&(f+="secure;"),h.sameSite||(h.sameSite="Lax"),f+="sameSite="+h.sameSite+";",h.partitioned&&(f+="Partitioned;"),this.document.cookie=f}delete(t,i,r,o,s="Lax"){if(!this.documentIsAccessible)return;let a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:r,secure:o,sameSite:s})}deleteAll(t,i,r,o="Lax"){if(!this.documentIsAccessible)return;let s=this.getAll();for(let a in s)s.hasOwnProperty(a)&&this.delete(a,t,i,r,o)}static{this.\u0275fac=function(i){return new(i||n)(He(mn),He(la))}}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Pi=(()=>{class n{cookieService;constructor(t){this.cookieService=t}setJwt(t,i){let r=new Date;i==="long"?r.setDate(r.getDate()+7):r.setMinutes(r.getMinutes()+10),this.cookieService.set("jwt",t,{expires:r,path:"/",sameSite:"Strict"})}deleteJwt(){this.cookieService.delete("jwt","/")}setGuideRule(){let t=new Date;t.setDate(t.getDate()+7),this.cookieService.set("guideInclude","false",{expires:t,path:"/",sameSite:"Strict"})}getGuideRule(){return this.cookieService.get("guideInclude")}deleteGuideRule(){this.cookieService.delete("guideInclude","/")}getJwt(){return this.cookieService.get("jwt")}setUserType(t){let i=new Date;i.setDate(i.getDate()+7),this.cookieService.set("accountType",t,{expires:i,path:"/",sameSite:"Strict"})}getUserType(){return this.cookieService.get("accountType")}deleteAccountType(){this.cookieService.delete("accountType","/")}static \u0275fac=function(i){return new(i||n)(He(V5))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var EC=(()=>{class n{furnitureCardService;serverImageControl;accountCookieService;uppy;uploads$=new zn([]);baseServiceUrl=di+"furniture/model";constructor(t,i,r){this.furnitureCardService=t,this.serverImageControl=i,this.accountCookieService=r,this.uppy=new vC({autoProceed:!0}),this.uppy.use(X0,{endpoint:this.baseServiceUrl,fieldName:"file",formData:!0}),this.uppy.on("upload-progress",(o,s)=>{o===void 0||o.name===void 0||this.updateUpload(o.id,o.name,s.percentage??50,"uploading")}),this.uppy.on("upload-success",o=>{o===void 0||o.name===void 0||this.updateUpload(o.id,o.name,100,"success")}),this.uppy.on("upload-error",o=>{o===void 0||o.name===void 0||this.updateUpload(o.id,o.name,0,"error")}),this.uppy.on("file-removed",o=>{o===void 0||o.name===void 0||this.updateUpload(o.id,o.name,0,"cancelled")})}addFile(t,i,r){this.uppy.addFile({name:t.name,type:t.type,data:t,meta:{furnitureCardId:r,jwt:i}})}cancelUpload(t){return Ge(this,null,function*(){let i=this.uppy.getFile(t);if(i){this.uppy.removeFile(t);let r=this.accountCookieService.getJwt(),o=i.meta.furnitureCardId;this.removeFileFromQueue(t),r&&o&&(this.serverImageControl.DELETEproject(r,o),this.furnitureCardService.DELETEfurnitureCard(r,o))}})}removeFileFromQueue(t){let i=this.uploads$.value.filter(r=>r.id!==t);this.uploads$.next(i)}updateUpload(t,i,r,o){let s=this.uploads$.value.filter(a=>a.id!==t);this.uploads$.next([...s,{id:t,name:i,progress:r,status:o}])}static \u0275fac=function(i){return new(i||n)(He(nl),He(dl),He(Pi))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bp=(()=>{class n{httpModule;uploadService;baseServiceUrl=di+"furniture/model";constructor(t,i){this.httpModule=t,this.uploadService=i}GETfurnitureModel(t,i){let r=new on().set("jwt",t).set("furnitureCardId",i);return xn(this.httpModule.get(this.baseServiceUrl,{params:r,responseType:"blob"}))}POSTuploadFurnitureModel(t,i,r){this.uploadService.addFile(t,i,r)}DELETEfurnitureModel(t,i){let r=new on().set("jwt",t).set("furnitureCardId",i);return xn(this.httpModule.delete(this.baseServiceUrl,{params:r}))}static \u0275fac=function(i){return new(i||n)(He(Gi),He(EC))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j5=(()=>{class n{constructor(){}createReport(t,i){this.createReportHTML(t,i)}createReportHTML(t,i){let r=new FileReader;r.onload=()=>{let o=r.result,s=this.generateHtmlContent(t,o);this.openHtmlInNewTab(t.name,s)},r.readAsDataURL(i)}generateHtmlContent(t,i){return`
      <!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>\u041E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435 ${t.name}</title>
    <style>
        @font-face {
            font-family: 'Calypso';
            src: url('${Ih}assets/fonts/Calypso.ttf') format('truetype');
        }

        @font-face {
            font-family: 'Courier New';
            src: url('${Ih}assets/fonts/Courier New.ttf') format('truetype');
        }

        body {
            margin: 0;
            padding: 40px;
            background-color: black;
            color: #DAD7CD;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
        }

        .title {
            font-family: 'Calypso', sans-serif;
            text-align: center;
            font-size: 3rem;
            margin-bottom: 40px;
            color: #A3B18A;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .renderTitle {
            font-family: 'Courier New', monospace;
            font-weight: 400;
            font-size: 1.5rem;
            margin: 30px 0 15px;
            color: #A3B18A;
            border-bottom: 2px solid #A3B18A;
            padding-bottom: 8px;
            width:fit-content;
            align-self: center;
        }

        .furnituresSpanTitle {
            font-family: 'Calypso', sans-serif;
            font-size: 2rem;
            margin: 40px 0 20px;
            color: #A3B18A;
            display: block;
            text-align: center;
        }

        .furniture {
            display: flex;
            flex-direction: column;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }

        .furnitureTitle {
            font-family: 'Courier New', monospace;
            font-weight: 400;
            margin: 0 auto 15px;
            font-size: 1.3rem;
            color: #DAD7CD;
        }

        .furnitureImage {
            margin: 0 auto;
            max-width: 100%;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .furnitureFooter {
            display: flex;
            gap: 30px;
            flex-direction: row;
            justify-content: center;
            flex-wrap: wrap;
        }

        .paramsTitle,
        .shopsTitle {
            font-family: 'Calypso', sans-serif;
            font-size: 1.2rem;
            color: #A3B18A;
            margin-bottom: 15px;
        }

        .paramsSpan {
            width: fit-content;
            min-width: 200px;
        }

        .paramsList {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .paramsItem {
            margin-bottom: 8px;
            position: relative;
            padding-left: 20px;
        }

        .shopsSpan {
            min-width: 200px;
        }

        a {
            display: inline-block;
            background-color: white;
            color: black;
            text-decoration: none;
            padding: 5px 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            width:250px;
            max-width: 250px;
            text-align: center;
            font-family: 'Courier New';
            font-weight: 400;
            font-size: 0.8rem
        }

        a:hover {
            background-color: transparent;
            color: white;
            border-color: white;
        }

        img {
            width: 100%;
            max-height: 500px;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
        }

        .openLink {
            width:250px;
            max-width: 250px;
            margin: 0 auto;
            margin-top: 20px;
        }
        .furnitureLink{
            background-color: #A3B18A;
            color:white;
            &:hover{
                background-color: #344E41;
                border: 2px solid #344E41;
            }
        }

        @media (max-width: 768px) {
            .furnitureFooter {
                flex-direction: column;
                align-items: center;
                gap: 20px;
                width: 100%;
            }

            .paramsSpan,
            .shopsSpan {
                width: 90%;
            }

            .openLink,.shopLink {
                box-sizing: border-box;
                width: 100%;
            }

            .title {
                font-size: 2rem;
            }

            body {
                padding: 20px;
            }
        }
    </style>
</head>
<h1 class="title">\u041E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435<br>${t.name}</h1>
<h2 class="renderTitle">\u0412\u0438\u0434 \u0441\u0432\u0435\u0440\u0445\u0443</h2>
<img src="${i}"
    alt="Room render">

<h2 style="display:${t.furnitures.length===0?"none":"block"}" class="furnituresSpanTitle">\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043D\u0430\u044F \u043C\u0435\u0431\u0435\u043B\u044C</h2>
${t.furnitures.map(r=>`
    <span class="furniture">
    <h3 class="furnitureTitle">${r.name}</h3>
    <img class= "furnitureImage"
        src = "${r.previewUrl}"
        alt = "preview" loading = "lazy">
    <span class="furnitureFooter" >
    <span class="paramsSpan" >
    <p class="paramsTitle"> \u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B </p>
    <ul class= "paramsList">
    <li class="paramsItem"> \u0428\u0438\u0440\u0438\u043D\u0430: ${r.proportions.width}c\u043C </li>
    <li class= "paramsItem"> \u0412\u044B\u0441\u043E\u0442\u0430: ${r.proportions.height}c\u043C </li>
    <li class= "paramsItem"> \u0414\u043B\u0438\u043D\u0430: ${r.proportions.length}c\u043C </li>
    </ul>
    </span>
    <span class= "shopsSpan" >
    ${r.shops.map(o=>`
        <p class="shopsTitle"> \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B </p>
        <span >
      <a class="shopLink" href = "${o.url}">
      ${this.costPipe(o.cost)}
      </a>
      </span>
      `).join("")}
    </span>
    </span>
    <a class= "openLink furnitureLink" href = "${Ih}shop/${r.category}/${r.furnitureCardId}"> \u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C </a>
    </span>
    `).join("")}
<a class="openLink planLink" href="${Ih}plan">\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043F\u0440\u043E\u0435\u043A\u0442</a>

</html>
    `}costPipe(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}openHtmlInNewTab(t,i){let r=new Blob([i],{type:"text/html"}),o=URL.createObjectURL(r);window.open(o,"_blank"),this.downloadHtml(t,o)}downloadHtml(t,i){let r=document.createElement("a");r.href=i,r.download=`${t}-report.html`,r.click(),URL.revokeObjectURL(i)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Cp=(()=>{class n{httpModule;reportService;baseServiceUrl=di+"project";constructor(t,i){this.httpModule=t,this.reportService=i}POSTcreateProject(t,i){let r=new on().set("jwt",t).set("name",i);return xn(this.httpModule.post(this.baseServiceUrl,r))}DELETEdeleteProject(t,i){let r=new on().set("jwt",t).set("projectId",i);return xn(this.httpModule.delete(this.baseServiceUrl,{params:r}))}GETgetProject(t,i){let r=new on().set("jwt",t).set("projectId",i);return xn(this.httpModule.get(this.baseServiceUrl,{params:r}))}PUTupdateProject(t,i,r){let o=new on().set("jwt",t).set("projectId",i);return xn(this.httpModule.put(this.baseServiceUrl,r,{params:o}))}GETgetReportOfRoom(t,i,r){return Ge(this,null,function*(){let o=new on().set("jwt",t).set("roomId",i),s=yield xn(this.httpModule.get(this.baseServiceUrl+"/room",{params:o}));s.furnitures=s.furnitures.map(a=>(a.previewUrl=di+a.previewUrl,a)),this.reportService.createReport(s,r)})}static \u0275fac=function(i){return new(i||n)(He(Gi),He(j5))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cpe(n,e){if(n&1){let t=yt();I(0,"button",9),Me("click",function(){Le(t);let r=ae();return ke(r.deleteModel())}),I(1,"p"),K(2,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),A(),ye(3,"img",10),A()}}function upe(n,e){if(n&1){let t=yt();I(0,"button",11),Me("click",function(){Le(t);let r=ae();return ke(r.getReport())}),I(1,"p"),K(2,"\u041E\u0442\u0447\u0435\u0442"),A(),ye(3,"img",12),A()}}var MC=(()=>{class n{elementRef;spinner;furnitureModelService;furnitureCardService;accountCookieService;projectService;route;notification;location;planHouseComponent;constructor(t,i,r,o,s,a,l,u,f,h){this.elementRef=t,this.spinner=i,this.furnitureModelService=r,this.furnitureCardService=o,this.accountCookieService=s,this.projectService=a,this.route=l,this.notification=u,this.location=f,this.planHouseComponent=h}roomData;saveObjectsEmitter=new Hn;renderer;camera;scene;controls;animationFrameId=null;canvasRatioOfWindow=1.5;roomProportions;raycaster=new u0;mouse=new qe;rectangleMesh;targetobject=void 0;ngAfterViewInit(){this.initThreeJs()}ngOnChanges(t){if(this.roomData=t.roomData.currentValue,!this.roomData||this.scene===void 0||this.roomData===t.roomData.previousValue||(t.roomData.previousValue!==void 0&&this.clearRoom(),this.camera.position.set(0,5,0),this.camera.rotation.set(ti.degToRad(-90),0,0),this.roomProportions=this.roomData.roomProportions,this.createRoom(),this.rectangleMesh.rotation.x=ti.degToRad(-90),this.getObjectSize(this.rectangleMesh).width===0)||!this.planHouseComponent.sceneOpenToggle)return;this.loadRoom();let i=this.route.snapshot.params.furnitureCardId;!i||t.roomData.previousValue||(this.fixPath(),this.addModel(i,!0))}loadFurnitureModel(t,i,r,o,s){return Ge(this,null,function*(){try{let a=yield MH(t);s?this.addObjectToScene(a,i,r,s):this.addObjectToScene(a,i,r),o&&this.saveRoom()}catch{}})}addModel(t,i,r){return Ge(this,null,function*(){let o=this.accountCookieService.getJwt();if(o)try{i&&this.spinner.show();let s=(yield this.furnitureCardService.GETfurnitureCard(t)).furnitureCard.proportions,a=yield this.furnitureModelService.GETfurnitureModel(o,t);yield this.loadFurnitureModel(a,s,t,i,r),this.spinner.hide()}catch(s){this.spinner.hide(),this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043C\u043E\u0434\u0435\u043B\u0438",5e3),console.log(s)}})}fixPath(){let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t)}initThreeJs(){this.scene=new jg,this.camera=new Ri(75,window.innerWidth/window.innerHeight,.1,1e3);let t=new s0(11184810,0,2);this.scene.add(t),this.renderer=new Kb({antialias:!0,alpha:!1});let i=this.elementRef.nativeElement.querySelector("#canvasContainer");this.camera.position.z=5,this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),i.appendChild(this.renderer.domElement),this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}createRoundedRectangleGeometry(t,i,r,o){let s=new np;return s.moveTo(-t/2+r,-i/2),s.lineTo(t/2-r,-i/2),s.quadraticCurveTo(t/2,-i/2,t/2,-i/2+r),s.lineTo(t/2,i/2-r),s.quadraticCurveTo(t/2,i/2,t/2-r,i/2),s.lineTo(-t/2+r,i/2),s.quadraticCurveTo(-t/2,i/2,-t/2,i/2-r),s.lineTo(-t/2,-i/2+r),s.quadraticCurveTo(-t/2,-i/2,-t/2+r,-i/2),new i0(s,o)}createRoom(){if(!this.roomData)return;let t=this.roomData.roomProportions,i=.1;this.controls=new eC(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.15,this.controls.enableZoom=!0,this.controls.minDistance=1,this.controls.maxDistance=10;let r=5;this.controls.maxPolarAngle=ti.degToRad(90-r),this.createRoomShape(t.width,t.length,i),this.rectangleMesh.name="roomFloorBase",this.rectangleMesh}calculateObjectSaveData(t){let i=this.getObjectSize(this.rectangleMesh),r=t.position;return{objectId:t.userData.id,xMetersDistance:r.x/i.width*this.roomProportions.width,zMetersDistance:r.z/i.length*this.roomProportions.length,yRotate:t.rotation.y}}calculateMoveObjectData(t){let i=this.getObjectSize(this.rectangleMesh);return{xDistance:t.xMetersDistance*i.width/this.roomProportions.width,zDistance:t.zMetersDistance*i.length/this.roomProportions.length,yRotate:t.yRotate}}createRoomShape(t,i,r){let o=this.calculateFrustumBounds(),s=t/i,a,l;s<=1?(a=o.height*s,l=o.height):(a=o.width,l=o.width/s);let f=this.createRoundedRectangleGeometry(a*.9,l*.9,r,10),h=new es({color:3427905});this.rectangleMesh=new xi(f,h),this.scene.add(this.rectangleMesh),this.renderer.render(this.scene,this.camera),this.rectangleMesh.updateMatrixWorld(!0)}calculateFrustumBounds(){let t=this.camera.position.y,i=ti.degToRad(this.camera.fov),r=2*Math.tan(i/2)*Math.abs(t);return{width:r*this.camera.aspect,height:r}}addObjectToScene(t,i,r,o){t.userData={id:r},this.scaleImportModel(t,i),this.scene.add(t),this.renderer.render(this.scene,this.camera),o&&(t.position.set(o.xDistance,0,o.zDistance),t.rotation.y=o.yRotate)}getObjectSize(t){let r=new qr().setFromObject(t).getSize(new V);return{width:r.x,length:r.z,height:r.y}}scaleImportModel(t,i){let{width:r,length:o}=i;r=r/100,o=o/100;let s=this.getObjectSize(t),a=this.getObjectSize(this.rectangleMesh),l=s.width>s.length?a.width/s.width:a.length/s.length,f=(s.width>s.length?r/this.roomProportions.width:o/o)*l;t.scale.set(f,f,f)}loadRoom(){return Ge(this,null,function*(){if(!this.accountCookieService.getJwt()||!this.roomData)return;let i=q({objects:this.roomData.objects},this.roomData.roomProportions);this.spinner.show();for(let r of i.objects)yield this.addModel(r.objectId,!1,this.calculateMoveObjectData(r));this.spinner.hide()})}clearRoom(){for(let t=this.scene.children.length-1;t>=0;t--){let i=this.scene.children[t];i.type!=="Scene"&&i.type!=="HemisphereLight"&&this.scene.remove(i)}}onResize(t){this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.render(this.scene,this.camera)}onMouseClick(t){if(this.targetobject){this.targetobject=void 0;return}let i=t.target.getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1,o=-(t.clientY-i.top)/i.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let a=this.raycaster.intersectObjects(this.scene.children).find(l=>l.object.name!=="roomFloorBase"&&l.object.type!=="Scene"&&l.object.type!=="HemisphereLight")?.object;a&&(this.targetobject=a.parent?a.parent:a)}rotateTargetObject(t){if(!this.targetobject)return;let i=-.05;switch(t.key){case"q":case"\u0439":this.targetobject.rotation.y-=i;break;case"e":case"\u0443":this.targetobject.rotation.y+=i}}onMousemove(t){if(!this.targetobject)return;let i=t.target.getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1,o=-(t.clientY-i.top)/i.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let s=this.raycaster.intersectObject(this.rectangleMesh);if(s.length===0)return;let a=s[0].point.x,l=s[0].point.z,u=this.getObjectSize(this.rectangleMesh),f=this.getObjectSize(this.targetobject),h=-u.width/2+f.width/2,p=u.width/2-f.width/2,g=a;g<h?g=h:g>p&&(g=p);let v=-u.length/2+f.length/2,x=u.length/2-f.length/2,y=l;y<v?y=v:y>x&&(y=x),this.targetobject.position.set(g,0,y)}getReport(){return Ge(this,null,function*(){let t=this.accountCookieService.getJwt();if(!t||!this.roomData?._id)return;let i=this.camera.position.clone(),r=this.camera.rotation.clone();this.camera.position.set(0,7,0),this.camera.rotation.set(ti.degToRad(-90),0,0),this.renderer.render(this.scene,this.camera);let o=this.renderer.domElement.toDataURL("image/png"),s=yield fetch(o);this.camera.position.copy(i),this.camera.rotation.copy(r),s.ok||this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0440\u0435\u043D\u0434\u0435\u0440\u0435",5e3);let a=yield s.blob();this.projectService.GETgetReportOfRoom(t,this.roomData?._id,a)})}deleteModel(){this.targetobject&&(this.scene.remove(this.targetobject),this.saveRoom())}saveRoom(){if(!this.roomData)return;let t=this.scene.children.filter(r=>r.name!=="roomFloorBase"&&r.type!=="Scene"&&r.type!=="HemisphereLight").map(r=>this.calculateObjectSaveData(r)),i=t;this.roomData.objects=t,this.saveObjectsEmitter.emit(i)}static \u0275fac=function(i){return new(i||n)(ce(Kt),ce(TD),ce(bp),ce(nl),ce(Pi),ce(Cp),ce(er),ce(Di),ce(wo),ce(gu))};static \u0275cmp=dn({type:n,selectors:[["app-scene"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.onResize(s)},!1,jo)("click",function(s){return r.onMouseClick(s)})("keydown",function(s){return r.rotateTargetObject(s)},!1,jo)("mousemove",function(s){return r.onMousemove(s)})},inputs:{roomData:"roomData"},outputs:{saveObjectsEmitter:"saveObjectsEmitter"},features:[Ji],decls:12,vars:2,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","none"],[1,"Loader"],[2,"font-size","20px","color","white"],["id","canvasContainer"],[1,"functionalsBtnsTemplate"],["title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u043E\u043C\u043D\u0430\u0442\u0443",3,"click"],[1,"changeBtns"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",3,"click",4,"ngIf"],["title","\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u043E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435",3,"click",4,"ngIf"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",3,"click"],["src","/assets/images/deleteIcon.svg","alt",""],["title","\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u043E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435",3,"click"],["src","/assets/images/uploadIcon.png","alt",""]],template:function(i,r){i&1&&(I(0,"ngx-spinner",0),ye(1,"div",1),I(2,"p",2),K(3,"Loading..."),A()(),I(4,"div",3)(5,"span",4)(6,"button",5),Me("click",function(){return r.saveRoom()}),I(7,"p"),K(8,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),A()(),I(9,"span",6),Pe(10,cpe,4,0,"button",7)(11,upe,4,0,"button",8),A()()()),i&2&&(z(10),$("ngIf",r.targetobject!==void 0),z(),$("ngIf",r.targetobject===void 0))},dependencies:[Qz,Jz,Rn],styles:['.Loader[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;max-width:14.6rem;margin-top:7.3rem;margin-bottom:7.3rem}.Loader[_ngcontent-%COMP%]:before, .Loader[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%;animation-duration:1.8s;animation-iteration-count:infinite;animation-timing-function:ease-in-out;filter:drop-shadow(0 0 .7555555556rem rgba(255,255,255,.75))}.Loader[_ngcontent-%COMP%]:before{width:100%;padding-bottom:100%;box-shadow:inset 0 0 0 1.7rem #fff;animation-name:_ngcontent-%COMP%_pulsA}.Loader[_ngcontent-%COMP%]:after{width:calc(100% - 3.4rem);padding-bottom:calc(100% - 3.4rem);box-shadow:0 0 #fff;animation-name:_ngcontent-%COMP%_pulsB}@keyframes _ngcontent-%COMP%_pulsA{0%{box-shadow:inset 0 0 0 1.7rem #fff;opacity:1}50%,to{box-shadow:inset 0 0 #fff;opacity:0}}@keyframes _ngcontent-%COMP%_pulsB{0%,50%{box-shadow:0 0 #fff;opacity:0}to{box-shadow:0 0 0 1.7rem #fff;opacity:1}}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}[_nghost-%COMP%]{display:block;height:100%}.funcBtnsSpan[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);bottom:50px;display:flex;gap:10px}.funcBtn[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:15px;border-radius:10px;border:none;font-family:arial;font-weight:1000;width:25vw;cursor:pointer}#canvasContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:calc(100% - 55px) 50px;gap:5px}.functionalsBtnsTemplate[_ngcontent-%COMP%]{grid-area:2/1/3/2;width:410px;height:50px;justify-self:center;overflow:hidden;display:flex;gap:10px}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;height:100%;justify-content:center;background-color:#000;border-radius:10px;border:2px solid rgba(163,177,138,.5);cursor:pointer;transition:border .3s ease-in-out;display:flex;gap:10px;align-items:center}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:27px;margin-bottom:3px}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border:2px solid rgba(163,177,138,.8)}']})}return n})();var W5=Iu(WI());var fpe=["scene"],hpe=["roomsGuideTemplate1"],ppe=["roomsGuideTemplate2"],mpe=["roomGuideTemplate"];function gpe(n,e){n&1&&(I(0,"span",30),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0.1 \u0434\u043E 10 "),A())}function vpe(n,e){n&1&&(I(0,"span",30),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0.1 \u0434\u043E 10 "),A())}function ype(n,e){n&1&&(I(0,"span",30),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0.1 \u0434\u043E 10 "),A())}function _pe(n,e){n&1&&(I(0,"span",30),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B (\u0434\u043E 20) "),A())}function xpe(n,e){if(n&1){let t=yt();I(0,"button",31),Me("click",function(){Le(t);let r=ae();return ke(r.deleteRoom())}),ye(1,"img",32),A()}}function wpe(n,e){if(n&1){let t=yt();I(0,"button",33),Me("touchstart",function(r){let o=Le(t).index,s=ae();return ke(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("keydown.enter",function(r){let o=Le(t).index,s=ae();return ke(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("mousedown",function(r){let o=Le(t).index,s=ae();return ke(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())}),K(1),A()}if(n&2){let t=e.$implicit,i=e.index,r=ae();Fn("grid-area",t.gridArea)("display",(r.currentViewRoom===i||r.currentViewRoom===void 0)&&!r.sceneOpenToggle?"block":"none"),lr("data-index",i),z(),cr(" ",t.name," ")}}function bpe(n,e){if(n&1&&(I(0,"a",36),K(1),A()),n&2){let t=e.$implicit;$("href","/shop/"+t.name,Pr),z(),cr(" ",t.translateMany," ")}}function Cpe(n,e){if(n&1&&(I(0,"span",34),Pe(1,bpe,2,2,"a",35),A()),n&2){let t=ae();z(),$("ngForOf",t.categoryArray)}}function Spe(n,e){if(n&1){let t=yt();I(0,"div",37)(1,"div",38),ye(2,"span",39),I(3,"img",40),Me("click",function(){Le(t);let r=ae();return ke(r.closeGuide())}),A()()()}if(n&2){let t=ae();z(2),$("ngTemplateOutlet",t.guideTemplate)}}function Epe(n,e){n&1&&(I(0,"div",41)(1,"div",42)(2,"p",43),K(3,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043E\u0434\u0438\u043D \u0440\u0430\u0437 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442e \u0434\u043B\u044F \u0441\u043C\u0435\u043D\u044B \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F"),A(),I(4,"div",44),ye(5,"img",45),A()(),I(6,"div",46),ye(7,"div",47),A(),I(8,"div",42)(9,"p",43),K(10,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0434\u0432\u0430 \u0440\u0430\u0437\u0430 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442e \u0434\u043B\u044F \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043C\u0435\u0431\u0435\u043B\u0438"),A(),I(11,"div",44),ye(12,"img",48),A()()())}function Mpe(n,e){n&1&&(I(0,"div",41)(1,"div",42)(2,"p",43),K(3,"\u0417\u0430\u0436\u043C\u0438\u0442\u0435 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442\u0435 \u0438 \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0439\u0442\u0435"),A(),I(4,"div",49),ye(5,"img",50),A()(),I(6,"div",46),ye(7,"div",47),I(8,"span",51),K(9,"\u0418\u041B\u0418"),A(),ye(10,"div",47),A(),I(11,"div",42)(12,"p",43),K(13,"\u041D\u0430\u0432\u0435\u0434\u0438\u0442\u0435\u0441\u044C \u043D\u0430 TAB \u0438 \u0441 \u0437\u0430\u0436\u0430\u0442\u044B\u043C ENTER \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 \u0441\u0442\u0440\u0435\u043B\u043E\u0447\u043A\u0438"),A(),I(14,"div",52),ye(15,"img",53),I(16,"div",54),ye(17,"img",55),I(18,"div",56),ye(19,"img",57)(20,"img",58)(21,"img",59),A()()()()())}function Tpe(n,e){n&1&&(I(0,"div",41)(1,"div",42)(2,"p",43),K(3,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u041B\u041A\u041C \u043D\u0430 \u043C\u0435\u0431\u0435\u043B\u0438 \u0434\u043B\u044F \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0434\u043B\u044F \u043E\u0442\u043C\u0435\u043D\u044B"),A(),I(4,"div",44),ye(5,"img",45),A()(),I(6,"div",46),ye(7,"div",47),A(),I(8,"div",42)(9,"p",43),K(10,"\u0412 \u0440\u0435\u0436\u0438\u043C\u0435 \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 Q \u0438 E \u0434\u043B\u044F \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430 \u043C\u0435\u0431\u0435\u043B\u0438"),A(),I(11,"div",52)(12,"div",54)(13,"div",56),ye(14,"img",60)(15,"img",61),A()()()()())}var gu=(()=>{class n{renderer;elementRef;categoryService;location;notification;cdr;accountCookieService;constructor(t,i,r,o,s,a,l){this.renderer=t,this.elementRef=i,this.categoryService=r,this.location=o,this.notification=s,this.cdr=a,this.accountCookieService=l}previousGridArea;roomSpan;roomSpanSettings;isDragging=!1;isClick=!1;clickTimer;isDoubleClick=!1;toggleModuleButton;formElement;oldSizeViewRoom=void 0;lastPlanHouse=void 0;categoryArray=[];isGuideIncluded=!1;isGuideVisible=!0;currentViewRoom=void 0;sceneOpenToggle=!1;currentIdClickedRoom=void 0;guideTemplate;planHouse;sceneComponent;initialized=new Hn;planHouseEmitter=new Hn;callSaveEmitter=new Hn;roomsGuideTemplate1;roomsGuideTemplate2;roomGuideTemplate;ngOnInit(){this.checkGuideInclude(),this.initCategories()}ngAfterViewInit(){this.elementRef.nativeElement.parentElement.classList.contains("projectPreviewSpan")&&(this.isGuideIncluded=!1),this.guideTemplate=this.roomsGuideTemplate1,this.cdr.detectChanges(),this.roomSpan=this.elementRef.nativeElement.querySelector(".roomSpan"),this.calculateRoomSpanSettings(),this.formElement=this.elementRef.nativeElement.querySelector("form"),this.toggleModuleButton=this.elementRef.nativeElement.querySelector(".addModuleBtn"),this.initialized.emit()}initCategories(){return Ge(this,null,function*(){this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray})}showGuide(){this.isGuideVisible=!0}checkGuideInclude(){this.isGuideIncluded=this.accountCookieService.getGuideRule()!=="false",this.isGuideVisible=this.isGuideIncluded}emitPlanHouse(){this.planHouseEmitter.emit(this.planHouse)}saveHouse(){this.callSaveEmitter.emit()}findFreeSpace(t){let r=Array.from({length:10},()=>Array(10).fill(!1));this.planHouse.forEach(o=>{let[s,a,l,u]=o.gridArea.split("/").map(Number);for(let f=s-1;f<l-1;f++)for(let h=a-1;h<u-1;h++)r[f][h]=!0});for(let o=0;o<=10-t.length;o++)for(let s=0;s<=10-t.width;s++){let a=!0;for(let l=o;l<o+t.length;l++){for(let u=s;u<s+t.width;u++)if(r[l][u]){a=!1;break}if(!a)break}if(a){for(let l=o;l<o+t.length;l++)for(let u=s;u<s+t.width;u++)r[l][u]=!0;return`${o+1} / ${s+1} / ${o+t.length+1} / ${s+t.width+1}`}}return this.notification.setError("\u041D\u0435\u0442 \u043C\u0435\u0441\u0442\u0430",15e3),!1}calculateRoomSpanSettings(){let t=this.roomSpan.getBoundingClientRect();this.roomSpanSettings={startX:t.left,startY:t.top-document.documentElement.scrollTop,endX:t.width+t.left,endY:t.height+t.top,gap:+window.getComputedStyle(this.roomSpan).getPropertyValue("gap").slice(0,-2)}}isAreaOccupied(t,i){let[r,o,s,a]=t.split("/").map(Number);for(let l=0;l<this.planHouse.length;l++){if(l===i)continue;let[u,f,h,p]=this.planHouse[l].gridArea.split("/").map(Number);if(r<h&&s>u&&o<p&&a>f)return!0}return!1}calculateGridArea(t,i){if(this.currentIdClickedRoom===void 0)return;let r=this.planHouse[this.currentIdClickedRoom].roomProportions,o=t-this.roomSpanSettings.startX,s=i-this.roomSpanSettings.startY-document.documentElement.scrollTop,a=(this.roomSpanSettings.endX-this.roomSpanSettings.startX)/10+this.roomSpanSettings.gap,l=Math.floor(o/a)+1,u=Math.floor(s/a)+1,f=l+Math.round(r.width)-1,h=u+Math.round(r.length)-1;if(!(f>10||h>10))return`${u} / ${l} / ${h+1} / ${f+1}`}resetRoomPosition(t,i){let r=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(r){let o=this.calculateGridArea(t,i);o&&!this.isAreaOccupied(o,this.currentIdClickedRoom)?(this.renderer.setStyle(r,"grid-area",o),this.planHouse[this.currentIdClickedRoom].gridArea=o):this.renderer.setStyle(r,"grid-area",this.previousGridArea),this.renderer.removeStyle(r,"background-color"),this.renderer.removeStyle(r,"z-index"),this.currentIdClickedRoom=void 0}}onMouseLeave(t){this.isDragging&&this.currentIdClickedRoom!==void 0&&this.onMouseUp(t)}onMouseUp(t){if(this.sceneOpenToggle!==!0&&this.currentViewRoom===void 0){if(this.isDragging&&this.currentIdClickedRoom!==void 0){if(this.isDragging=!1,t instanceof MouseEvent&&this.resetRoomPosition(t.clientX,t.clientY),typeof TouchEvent<"u"&&t instanceof TouchEvent){let r=t.changedTouches[0];this.resetRoomPosition(r.clientX,r.clientY)}let i=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');i&&(this.renderer.removeStyle(i,"cursor"),this.renderer.removeStyle(i,"background-color")),this.currentIdClickedRoom=void 0,this.emitPlanHouse()}this.clickTimer=setTimeout(()=>{if(this.isClick&&!this.isDragging){if(this.currentIdClickedRoom==null)return;this.toggleOpenRoomModule(this.currentIdClickedRoom)}this.isClick=!1,this.isDoubleClick=!1,this.isDragging=!1,clearTimeout(this.clickTimer)},250)}}onMouseMove(t){if(t.preventDefault(),this.isDragging&&this.currentIdClickedRoom!==void 0){let i=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(!i)return;let r=t instanceof MouseEvent?this.calculateGridArea(t.clientX,t.clientY):this.calculateGridArea(t.changedTouches[0].clientX,t.changedTouches[0].clientY);this.renderer.setStyle(i,"z-index","4"),r&&(this.renderer.setStyle(i,"grid-area",r),this.isAreaOccupied(r,this.currentIdClickedRoom)?this.renderer.setStyle(i,"background-color","#F18DC4"):this.renderer.setStyle(i,"background-color","#A3B18A"))}}moveRoom(t){if(this.currentIdClickedRoom===void 0||!this.isDragging)return;let i=this.elementRef.nativeElement.querySelector(`[data-index="${this.currentIdClickedRoom}"]`),[r,o,s,a]=this.planHouse[this.currentIdClickedRoom].gridArea.split("/").map(Number);switch(t.key){case"ArrowUp":r-=1,s-=1;break;case"ArrowDown":r+=1,s+=1;break;case"ArrowRight":o+=1,a+=1;break;case"ArrowLeft":o-=1,a-=1;break}if(r<1||o<1||s>11||a>11)return;let l=`${r} / ${o} / ${s} / ${a}`;this.isAreaOccupied(l,this.currentIdClickedRoom)||(this.renderer.setStyle(i,"grid-area",l),this.planHouse[this.currentIdClickedRoom].gridArea=l)}onContextMenu(t){t.preventDefault()}onScroll=(0,W5.throttle)(()=>{this.currentIdClickedRoom!==void 0&&this.calculateRoomSpanSettings()},100);escapeDraggingMode(){this.isDragging=!1,this.currentIdClickedRoom=void 0;let t=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');t&&(this.renderer.removeStyle(t,"background-color"),this.renderer.removeStyle(t,"cursor"))}clickRoom(t,i){if(this.currentViewRoom!==void 0)return;this.currentIdClickedRoom=i;let r=t.target;this.previousGridArea=window.getComputedStyle(r).getPropertyValue("grid-area"),this.isClick&&!this.isDragging?(this.isDoubleClick=!0,this.isClick=!1,this.openViewRoom(this.currentIdClickedRoom)):this.isClick=!0,setTimeout(()=>{this.isDoubleClick||!this.isClick||(this.calculateRoomSpanSettings(),this.renderer.setStyle(r,"cursor","grabbing"),this.isDragging=!0,this.renderer.setStyle(r,"background-color","#A3B18A"),this.currentIdClickedRoom=i,this.isClick=!1)},350)}closeGuide(){this.accountCookieService.setGuideRule(),this.isGuideVisible=!1,this.guideTemplate==this.roomsGuideTemplate1&&(this.guideTemplate=this.roomsGuideTemplate2,this.showGuide())}turnoffGuides(t){t?(this.accountCookieService.setGuideRule(),this.sceneOpenToggle===!0&&this.currentViewRoom!==void 0&&(this.guideTemplate=this.roomGuideTemplate)):this.accountCookieService.deleteGuideRule(),this.checkGuideInclude()}updateRoomObjects(t){this.currentViewRoom!==void 0&&(this.planHouse[this.currentViewRoom].objects=t,this.emitPlanHouse(),this.saveHouse())}openScene(){this.isGuideIncluded&&(this.guideTemplate=this.roomGuideTemplate,this.showGuide());let t=this.location.path()+"/"+this.currentViewRoom;this.location.replaceState(t),this.sceneOpenToggle=!0,this.sceneComponent.loadRoom()}closeScene(){let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t),this.sceneComponent.saveRoom(),this.sceneOpenToggle=!1}closeViewRoom(){let t=this.roomSpan.querySelector(`[data-index="${this.currentViewRoom}"]`);!t||!this.oldSizeViewRoom||(this.currentViewRoom=void 0,this.currentIdClickedRoom=void 0,this.renderer.setStyle(t,"width",this.oldSizeViewRoom.width+"px"),this.renderer.setStyle(t,"height",this.oldSizeViewRoom.height+"px"),this.renderer.removeStyle(t,"border"),this.renderer.removeClass(t,"roomView"),this.renderer.setStyle(this.roomSpan,"display","grid"),setTimeout(()=>{this.renderer.removeStyle(t,"width"),this.renderer.removeStyle(t,"height")},768))}updateRoom(){if(!(this.currentIdClickedRoom===void 0||!this.roomForm.value.name)){if(this.roomForm.value.name===this.planHouse[this.currentIdClickedRoom].name){this.toggleOpenRoomModule();return}this.planHouse[this.currentIdClickedRoom].name=this.roomForm.value.name,this.roomForm.patchValue({width:null,height:null,length:null,name:""}),this.emitPlanHouse(),this.toggleOpenRoomModule(),this.saveHouse()}}addRoom(){let{width:t,length:i,height:r,name:o}=this.roomForm.value;this.toggleOpenRoomModule();let s={name:o,roomProportions:{width:+t,height:+r,length:+i},objects:[],gridArea:""},a=this.findFreeSpace(s.roomProportions);a&&(s.gridArea=a,this.planHouse=[...this.planHouse,s],this.emitPlanHouse(),this.saveHouse())}deleteRoom(){this.currentIdClickedRoom!==void 0&&(this.planHouse.splice(this.currentIdClickedRoom,1),this.currentIdClickedRoom=void 0,this.toggleOpenRoomModule(),this.emitPlanHouse(),this.saveHouse(),this.toggleControls(!0))}toggleControls(t){t?(this.roomForm.get("width")?.enable(),this.roomForm.get("height")?.enable(),this.roomForm.get("length")?.enable()):(this.roomForm.get("width")?.disable(),this.roomForm.get("height")?.disable(),this.roomForm.get("length")?.disable())}toggleOpenRoomModule(t){if(this.toggleModuleButton){if(t!==void 0){let{width:i,height:r,length:o}=this.planHouse[t].roomProportions;this.roomForm.patchValue({width:i,height:r,length:o,name:this.planHouse[t].name}),this.toggleControls(this.currentIdClickedRoom===void 0),this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg");return}this.formElement.classList.contains("openAddModule")?(this.formElement.classList.remove("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","0deg"),this.currentIdClickedRoom=void 0,this.roomForm.patchValue({width:null,height:null,length:null,name:""})):(this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg"))}}openViewRoom(t){this.formElement.classList.remove("openAddModule"),this.currentViewRoom=t,this.lastPlanHouse=this.planHouse[t];let i=this.roomSpan.querySelector(`[data-index="${t}"]`),{width:r,height:o}=i.getBoundingClientRect(),{width:s,height:a}=this.roomSpan.getBoundingClientRect();this.oldSizeViewRoom={height:o,width:r},this.renderer.setStyle(i,"width",r+"px"),this.renderer.setStyle(i,"height",o+"px"),setTimeout(()=>{let l=r>o?s/2/r:a/2/o;this.renderer.setStyle(i,"width",r*l+"px"),this.renderer.setStyle(i,"height",o*l+"px"),this.renderer.setStyle(i,"border","white 3px dashed"),this.renderer.addClass(i,"roomView"),this.renderer.setStyle(this.roomSpan,"display","flex")},0)}roomForm=new vi({width:new Mn(null,[Tt.required,Tt.min(.1),Tt.max(10),Tt.pattern(/^\d*\.?\d+$/)]),height:new Mn(null,[Tt.required,Tt.min(.1),Tt.max(10),Tt.pattern(/^\d*\.?\d+$/)]),length:new Mn(null,[Tt.required,Tt.min(.1),Tt.max(10),Tt.pattern(/^\d*\.?\d+$/)]),name:new Mn("",[Tt.required,Tt.maxLength(20)])});static \u0275fac=function(i){return new(i||n)(ce(Or),ce(Kt),ce(Ah),ce(wo),ce(Di),ce(ur),ce(Pi))};static \u0275cmp=dn({type:n,selectors:[["app-plan-house"]],viewQuery:function(i,r){if(i&1&&(Mi(fpe,5),Mi(hpe,7),Mi(ppe,7),Mi(mpe,7)),i&2){let o;ci(o=ui())&&(r.sceneComponent=o.first),ci(o=ui())&&(r.roomsGuideTemplate1=o.first),ci(o=ui())&&(r.roomsGuideTemplate2=o.first),ci(o=ui())&&(r.roomGuideTemplate=o.first)}},hostBindings:function(i,r){i&1&&Me("mouseleave",function(s){return r.onMouseLeave(s)},!1,jr)("touchend",function(s){return r.onMouseUp(s)},!1,jr)("keyup.Enter",function(s){return r.onMouseUp(s)},!1,jr)("mouseup",function(s){return r.onMouseUp(s)},!1,jr)("mousemove",function(s){return r.onMouseMove(s)},!1,jr)("touchmove",function(s){return r.onMouseMove(s)},!1,jr)("keydown.ArrowUp",function(s){return r.moveRoom(s)},!1,jr)("keydown.ArrowDown",function(s){return r.moveRoom(s)},!1,jr)("keydown.ArrowRight",function(s){return r.moveRoom(s)},!1,jr)("keydown.ArrowLeft",function(s){return r.moveRoom(s)},!1,jr)("contextmenu",function(s){return r.onContextMenu(s)},!1,jr)("scroll",function(){return r.onScroll()},!1,jo)("keydown.Escape",function(){return r.escapeDraggingMode()},!1,jr)},inputs:{planHouse:"planHouse"},outputs:{initialized:"initialized",planHouseEmitter:"planHouseEmitter",callSaveEmitter:"callSaveEmitter"},decls:46,vars:23,consts:[["scene",""],["roomsGuideTemplate1",""],["roomsGuideTemplate2",""],["roomGuideTemplate",""],[1,"planHouseModule"],[1,"addModuleSpan"],["type","button","tabindex","0",1,"addModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","",2,"transition","all 0.5s","pointer-events","none"],[1,"addModuleFormContent",3,"ngSubmit","formGroup"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","width",1,"inputLabel"],["placeholder","5","formControlName","width","max","10","min","0.1","id","width","type","number","step","0.01",1,"addModuleInput"],["class","validation-error",4,"ngIf"],["for","length",1,"inputLabel"],["placeholder","3","formControlName","length","max","10","min","0.1","id","length","type","number","step","0.01",1,"addModuleInput"],["for","height",1,"inputLabel"],["placeholder","2.5","formControlName","height","max","10","min","0.1","id","height","type","number","step","0.01",1,"addModuleInput"],["for","name",1,"inputLabel"],["placeholder","\u0413\u043E\u0441\u0442\u0438\u043D\u0430\u044F","formControlName","name","id","name","type","text",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],["class","deleteItemAddModuleBtn",3,"click",4,"ngIf"],[1,"workArea"],[1,"guideSwitcher",3,"click","title"],[3,"saveObjectsEmitter","roomData"],[1,"roomSpan"],["class","room",3,"grid-area","display","touchstart","keydown.enter","mousedown",4,"ngFor","ngForOf"],["class","furnitureCategoriesButtonsSpan",4,"ngIf"],["class","guideOverlay",4,"ngIf"],[1,"validation-error"],[1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt",""],[1,"room",3,"touchstart","keydown.enter","mousedown"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton",3,"href",4,"ngFor","ngForOf"],[1,"furnitureCategoryButton",3,"href"],[1,"guideOverlay"],[1,"guideSpan"],[1,"guideWindow",3,"ngTemplateOutlet"],["src","assets/images/addIcon.svg","alt","Close",1,"closeIcon",3,"click"],[1,"guideContainer"],[1,"guideSection"],[1,"guideText"],[1,"animationContainer",2,"display","flex","justify-content","center"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","pressMouse"],[1,"dividerWithText"],[1,"dividerLine"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","pressMousetwice"],[1,"animationContainer"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","xMouse"],[1,"dividerText"],[1,"keyboardHint"],["src","assets/images/enter.svg","alt","Enter",1,"enterKey"],[1,"arrowsWrapper"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","top",2,"rotate","90deg"],[1,"middleArrows"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","left"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","bottom",2,"rotate","270deg"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","right",2,"rotate","180deg"],["src","assets/images/qButton.svg","alt","q",1,"arrowKey","left",2,"width","50px"],["src","assets/images/eButton.svg","alt","e",1,"arrowKey","right",2,"width","50px"]],template:function(i,r){if(i&1){let o=yt();I(0,"span",4)(1,"span",5)(2,"button",6),Me("click",function(){return Le(o),ke(r.currentViewRoom===void 0?r.toggleOpenRoomModule():r.sceneOpenToggle===!0?r.closeScene():r.closeViewRoom())}),ye(3,"img",7),A(),I(4,"form",8),Me("ngSubmit",function(){return Le(o),ke(r.currentIdClickedRoom===void 0?r.addRoom():r.updateRoom())}),I(5,"h2",9),K(6,"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u043A\u043E\u043C\u043D\u0430\u0442\u044B"),A(),I(7,"span",10)(8,"label",11),K(9,"\u0428\u0438\u0440\u0438\u043D\u0430(\u043C)"),A(),ye(10,"input",12),Pe(11,gpe,2,0,"span",13),A(),I(12,"span",10)(13,"label",14),K(14,"\u0414\u043B\u0438\u043D\u0430(\u043C)"),A(),ye(15,"input",15),Pe(16,vpe,2,0,"span",13),A(),I(17,"span",10)(18,"label",16),K(19,"\u0412\u044B\u0441\u043E\u0442\u0430(\u043C)"),A(),ye(20,"input",17),Pe(21,ype,2,0,"span",13),A(),I(22,"span",10)(23,"label",18),K(24,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),A(),ye(25,"input",19),Pe(26,_pe,2,0,"span",13),A(),I(27,"span",20)(28,"button",21),K(29,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),A(),Pe(30,xpe,2,0,"button",22),A()()(),I(31,"span",23)(32,"button",24),Me("click",function(){return Le(o),ke(r.turnoffGuides(!!r.isGuideIncluded))}),K(33),A(),I(34,"app-scene",25,0),Me("saveObjectsEmitter",function(a){return Le(o),ke(r.updateRoomObjects(a))}),A(),I(36,"span",26),Pe(37,wpe,2,6,"button",27)(38,Cpe,2,1,"span",28),A()()(),Pe(39,Spe,4,1,"div",29)(40,Epe,13,0,"ng-template",null,1,Qi)(42,Mpe,22,0,"ng-template",null,2,Qi)(44,Tpe,16,0,"ng-template",null,3,Qi)}if(i&2){let o,s,a,l;z(2),Fn("rotate",r.currentViewRoom===void 0?"0deg":"225deg"),z(2),Fn("opacity",r.currentViewRoom===void 0?1:0),$("formGroup",r.roomForm),z(7),$("ngIf",((o=r.roomForm.get("width"))==null?null:o.invalid)&&((o=r.roomForm.get("width"))==null?null:o.touched)),z(5),$("ngIf",((s=r.roomForm.get("length"))==null?null:s.invalid)&&((s=r.roomForm.get("length"))==null?null:s.touched)),z(5),$("ngIf",((a=r.roomForm.get("height"))==null?null:a.invalid)&&((a=r.roomForm.get("height"))==null?null:a.touched)),z(5),$("ngIf",((l=r.roomForm.get("name"))==null?null:l.invalid)&&((l=r.roomForm.get("name"))==null?null:l.touched)),z(2),$("disabled",!r.roomForm.valid),z(2),$("ngIf",r.currentIdClickedRoom!==void 0),z(2),$("title",r.isGuideIncluded?"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C":"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C"),z(),cr(" \u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438 \u043F\u043E \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044E ",r.isGuideIncluded?"\u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B":"\u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u044B"," "),z(),Fn("opacity",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0)("z-index",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0),$("roomData",r.currentViewRoom!==void 0?r.planHouse[r.currentViewRoom]:r.lastPlanHouse),z(2),Dn("viewRoomSmallScreen",r.currentViewRoom!==void 0),z(),$("ngForOf",r.planHouse),z(),$("ngIf",!r.sceneOpenToggle&&r.currentViewRoom!==void 0),z(),$("ngIf",r.isGuideVisible&&r.isGuideIncluded)}},dependencies:[ha,gi,So,Is,Co,pg,Ms,Ts,mg,rI,Xo,Yo,Rn,MC],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.workArea[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;grid-area:1/1/2/2}app-scene[_ngcontent-%COMP%]{grid-area:1/1/2/2}.roomSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;gap:10px;grid-template-columns:repeat(10,calc(10% - 10px));grid-template-rows:repeat(10,calc(10% - 10px));aspect-ratio:1;justify-content:space-around;z-index:0}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;cursor:pointer;z-index:3;border:none;transition:all .75s ease-in-out,background-color .4s ease-in-out;color:#dad7cd;font-size:1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.guideSwitcher[_ngcontent-%COMP%]{grid-area:1/1/2/2;height:40px;width:fit-content;padding:10px;align-self:flex-start;justify-self:center;background:none;border:none;border-bottom:1px solid transparent;cursor:pointer;color:gray;margin-top:-45px;transition:all .3s ease-in-out;position:relative}.guideSwitcher[_ngcontent-%COMP%]:hover{color:#fff!important;border-bottom-color:#fff}.guideSwitcher[_ngcontent-%COMP%]:hover:after{width:100%}.guideSwitcher[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:1px;background:#fff;transition:width .3s ease-in-out}.dividerWithText[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.dividerLine[_ngcontent-%COMP%]{flex:1;height:2px;background-color:#1f1f1f}.dividerText[_ngcontent-%COMP%]{padding:0 10px;color:#666;font-size:14px}.planHouseModule[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-template-columns:1fr}.roomView[_ngcontent-%COMP%]{margin-left:30px;align-self:start;margin-top:30px}.addModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:5;width:35px;aspect-ratio:1;margin-top:10px;justify-self:end;cursor:pointer;rotate:45deg;transition:all .4s ease-in-out}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.addModuleSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;min-width:300px;width:35%;justify-self:end;padding-right:30px;height:fit-content;margin-top:30px;margin-right:30px}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:calc(100% - 60px);padding:0 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 5px #fff;overflow:hidden;transition:all .4s ease-in-out;max-height:0;border-radius:10px;background-color:#000;z-index:4}.openAddModule[_ngcontent-%COMP%]{max-height:1000px;padding:30px 45px}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleInput.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff6b6b;background-color:#ff6b6b0d}.validation-error[_ngcontent-%COMP%]{color:#ff6b6b;font-size:12px;margin-top:4px;display:block;height:16px}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.functionShopsModuleBtns[_ngcontent-%COMP%]{display:flex;gap:10px}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:10px;padding:15px;width:100%;border:none;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{width:20%;height:50px;display:flex;align-items:center;justify-content:center;border-radius:15px;background-color:#a3b18a;border:none;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:25px}.none[_ngcontent-%COMP%]{display:none}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;height:250px;margin-top:100px;max-height:400px;padding:15px;overflow-y:scroll;overflow-x:hidden;width:30%}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;flex-shrink:0;color:#fff;cursor:pointer;border:none;text-decoration:none;transition:all .3s ease-in-out}.furnitureCategoryButton[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@media (max-width: 768px){.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{width:100%}.viewRoomSmallScreen[_ngcontent-%COMP%]{flex-direction:column}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(30% - 5px)}.addModuleSpan[_ngcontent-%COMP%]{margin-right:0;padding-right:0}.workArea[_ngcontent-%COMP%]{flex-direction:column}}.furnitureCategory[_ngcontent-%COMP%]{grid-area:1/1/2/2;background-color:#000;z-index:4;display:flex;flex-direction:column;gap:30px;height:0px;padding:0 10px;overflow:hidden;transition:all .5s ease-in-out}.furnitureCategoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.furnitureList[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.openFurniturelist[_ngcontent-%COMP%]{height:100%;padding:50px 10px 10px}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);display:flex;gap:10px;flex-direction:column;align-items:center}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}.guideContainer[_ngcontent-%COMP%]{background-color:#000;border-radius:12px;padding:1.5rem;color:#dad7cd;display:flex;flex-direction:column;gap:1.5rem;max-width:100%;box-sizing:border-box}.guideSection[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;flex:1}.guideText[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,1.3rem);margin:0;color:#a3b18a;text-align:center;line-height:1.4}.animationContainer[_ngcontent-%COMP%]{position:relative;width:140px;aspect-ratio:1;margin:.5rem 0}.mouse[_ngcontent-%COMP%]{position:absolute;width:40px}.xMouse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_crossAnimation 3s infinite ease-in-out}.pressMouse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pressAnimation 1.5s infinite ease-in-out}.pressMousetwice[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pressAnimationTwice 1.5s infinite ease-in-out}@keyframes _ngcontent-%COMP%_pressAnimation{0%,40%{transform:translateY(0)}20%{transform:translateY(10px)}}@keyframes _ngcontent-%COMP%_pressAnimationTwice{0%,30%,60%{transform:translateY(0)}15%,45%{transform:translateY(10px)}}.keyboardHint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;width:100%;max-width:300px;justify-content:center}.enterKey[_ngcontent-%COMP%]{width:100px;aspect-ratio:2}.middleArrows[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.arrowsWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.arrowKey[_ngcontent-%COMP%]{width:40px;aspect-ratio:1;opacity:.5;transition:opacity .3s}.arrowKey.top[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 0s}.arrowKey.right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite .5s}.arrowKey.bottom[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 1s}.arrowKey.left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 1.5s}@keyframes _ngcontent-%COMP%_crossAnimation{0%,to{transform:translateY(50%)}25%{transform:translate(100px,50%)}50%{transform:translate(50px)}75%{transform:translate(50px,100%)}}@keyframes _ngcontent-%COMP%_pulseArrow{0%,to{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}.guideOverlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background-color:#000000b3;z-index:10}.guideOverlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.guideSpan[_ngcontent-%COMP%]{position:relative;background-color:#000;border-radius:12px;padding:2rem;max-width:90%;width:50%;max-height:90vh;overflow-y:auto;box-shadow:0 0 20px #a3b18a4d}.closeIcon[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;width:1.5rem;height:1.5rem;cursor:pointer;rotate:45deg;transition:transform .2s}.closeIcon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@media (max-width: 768px){.guideContainer[_ngcontent-%COMP%]{padding:1rem;gap:1rem}.animationContainer[_ngcontent-%COMP%]{max-width:150px}.keyboardHint[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.arrowsWrapper[_ngcontent-%COMP%]{width:60%}.guideSpan[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width: 480px){.guideText[_ngcontent-%COMP%]{font-size:.9rem}.animationContainer[_ngcontent-%COMP%]{max-width:120px}}']})}return n})();function vu(){return/windows nt|macintosh|x11|linux/.test(navigator.userAgent.toLowerCase())}var Sp=(()=>{class n{httpModule;baseServiceUrl=di+"find?q=";inputFurnitureNameSubject=new zn("");furnitureName$=this.inputFurnitureNameSubject.asObservable();constructor(t){this.httpModule=t}setFurnitureName(t){this.inputFurnitureNameSubject.next(t)}GETfindFurnitures(t){return xn(this.httpModule.get(this.baseServiceUrl+t))}static \u0275fac=function(i){return new(i||n)(He(Gi))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ipe=(n,e)=>({variantCardDesktop:n,variantCardMobile:e});function Ape(n,e){n&1&&(I(0,"h3"),K(1,"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E :("),A())}function Dpe(n,e){if(n&1&&(I(0,"span",11)(1,"div")(2,"h3",12),K(3),A(),I(4,"a",13),K(5),_o(6,"costFormat"),A()(),ye(7,"img",14),A()),n&2){let t=e.$implicit,i=ae();$("ngClass",S_(7,Ipe,i.checkDesktop(),!i.checkDesktop())),z(3),pn(t.name),z(),$("routerLink",i.getUrl(t.id,t.category)),z(),pn(xo(6,5,t.cost)),z(2),$("src",i.getImage(t.id,t.colorRequest),Pr)}}var TC=(()=>{class n{finderService;elementRef;renderer;imageService;route;variantsSpan;inputElement;foundFurniture;debounceTimer=null;constructor(t,i,r,o,s){this.finderService=t,this.elementRef=i,this.renderer=r,this.imageService=o,this.route=s}ngAfterViewInit(){this.variantsSpan=this.elementRef.nativeElement.querySelector(".variantsSpan"),this.inputElement=this.elementRef.nativeElement.querySelector(".finderInput")}findFurnitures(t){return Ge(this,null,function*(){let i=yield this.finderService.GETfindFurnitures(t);this.openFoundResultsList(),i.length>0?(this.closeFoundResultsList(),setTimeout(()=>{this.foundFurniture=i,this.openFoundResultsList()},400)):this.foundFurniture!==void 0?this.foundFurniture.length=0:this.foundFurniture=[]})}openFoundResultsList(){this.variantsSpan&&this.renderer.addClass(this.variantsSpan,"variantsSpanOpen")}closeFoundResultsList(){this.variantsSpan&&this.renderer.removeClass(this.variantsSpan,"variantsSpanOpen")}checkDesktop=vu;clearInput(){this.inputElement.value="",this.inputProcess(),this.closeFoundResultsList()}checkShopPage(t){let i=this.route.root;for(;i.firstChild;)i=i.firstChild;let r=i.snapshot.data.pageName;return console.log(r),r==="shop"?(this.finderService.setFurnitureName(t),!0):!1}inputProcess(){let t=this.inputElement.value;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{if(t.length===0){this.checkShopPage(t)&&this.closeFoundResultsList();return}this.checkShopPage(t)||this.findFurnitures(t)},300)}getImage(t,i){return this.imageService.GETmainImage(t,i)}getUrl(t,i){return`/shop/${i??"all"}/${t}`}static \u0275fac=function(i){return new(i||n)(ce(Sp),ce(Kt),ce(Or),ce(dl),ce(er))};static \u0275cmp=dn({type:n,selectors:[["app-finder"]],decls:12,vars:2,consts:[[1,"finder"],[1,"finderSpan"],["routerLink","/shop","title","\u041F\u043E\u0438\u0441\u043A",1,"finderBtn","btn"],["loading","lazy","src","/assets/images/searchIcon.svg","alt","search"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438","type","text",1,"finderInput",3,"input"],["title","\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043F\u043E\u043B\u0435",1,"closeBtn","btn",3,"click"],["src","/assets/images/cancelIcon.svg","alt",""],[1,"variantsSpan"],[4,"ngIf"],["class","variantCard",3,"ngClass",4,"ngFor","ngForOf"],["routerLink","/shop",1,"openShopBtn"],[1,"variantCard",3,"ngClass"],[1,"cardName"],[1,"cardCost",3,"routerLink"],["alt","",1,"cardImage",3,"src"]],template:function(i,r){i&1&&(I(0,"span",0)(1,"span",1)(2,"button",2),ye(3,"img",3),A(),I(4,"input",4),Me("input",function(){return r.inputProcess()}),A(),I(5,"button",5),Me("click",function(){return r.clearInput()}),ye(6,"img",6),A()(),I(7,"span",7),Pe(8,Ape,2,0,"h3",8)(9,Dpe,8,10,"span",9),I(10,"button",10),K(11,"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043C\u0430\u0433\u0430\u0437\u0438\u043D"),A()()()),i&2&&(z(8),$("ngIf",r.foundFurniture!==void 0&&r.foundFurniture.length===0),z(),$("ngForOf",r.foundFurniture))},dependencies:[Wo,gi,Rn,Es,Jc],styles:['@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.finder[_ngcontent-%COMP%]{width:100%;min-height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto 1fr}.finderSpan[_ngcontent-%COMP%]{width:100%;height:48px;display:flex;gap:10px;border-radius:15px;background-color:#fff;padding:0 10px;z-index:3;grid-area:1/1/2/2;align-items:center;justify-content:space-around}.btn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{aspect-ratio:1;background:none;border:none;cursor:pointer}.finderBtn[_ngcontent-%COMP%]{height:90%}.closeBtn[_ngcontent-%COMP%]{height:50%;align-self:center;filter:opacity(.75)}.finderInput[_ngcontent-%COMP%]{width:75%;background:none;border:none;outline:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.variantsSpan[_ngcontent-%COMP%]{transition:all .5s ease-in-out;overflow:hidden;max-height:0;grid-area:1/1/2/2;background-color:#000;border-radius:15px;box-shadow:0 0 5px #fff;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:10px;box-sizing:border-box;width:calc(100% + 20px);z-index:2}.variantsSpanOpen[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.variantsSpanOpen[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;padding:60px 10px 10px;overflow-y:scroll;max-height:400px}.variantCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;height:80%;transition:all .5s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}.cardCost[_ngcontent-%COMP%]{border-radius:5px;color:gray;transition:all .5s ease-in-out;cursor:pointer;text-decoration:none;font-variant-numeric:tabular-nums}.variantCardDesktop[_ngcontent-%COMP%]:hover{height:90%}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardCost[_ngcontent-%COMP%]{padding:15px 45px;color:#000;background-color:#fff}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardName[_ngcontent-%COMP%]{margin-bottom:25px}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardImage[_ngcontent-%COMP%]{height:65%}.variantCardMobile[_ngcontent-%COMP%]{height:90%}.variantCardMobile[_ngcontent-%COMP%]   .cardCost[_ngcontent-%COMP%]{margin-top:10px;display:block;padding:0 45px;height:50px;line-height:50px;color:#000;background-color:#fff;font-size:18px}.variantCardMobile[_ngcontent-%COMP%]   .cardName[_ngcontent-%COMP%]{font-size:23px;margin-bottom:50px}.variantCardMobile[_ngcontent-%COMP%]   .cardImage[_ngcontent-%COMP%]{height:65%}.cardImage[_ngcontent-%COMP%]{height:60%;width:fit-content;transition:all .5s ease-in-out}.cardName[_ngcontent-%COMP%]{color:#fff;transition:all .5s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin:5px 0}.variantsSpan[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff}.openShopBtn[_ngcontent-%COMP%]{width:200px;border-radius:10px;background-color:#fff;padding:20px;border:none;margin-bottom:10px;transition:transform .2s ease-in-out;cursor:pointer}.openShopBtn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}']})}return n})();function Rpe(n,e){if(n&1){let t=yt();I(0,"button",5),Me("click",function(){Le(t);let r=ae();return ke(r.toggleMenu())}),ye(1,"img",6),A()}if(n&2){let t=ae();Dn("active",t.menuOpen)}}function Ppe(n,e){n&1&&(I(0,"div",7),ye(1,"app-finder"),I(2,"span",8)(3,"a",9),ye(4,"img",10),A(),I(5,"a",11),vm(),I(6,"svg",12),ye(7,"path",13),A()(),ym(),I(8,"a",14),ye(9,"img",15),A(),I(10,"a",16),ye(11,"img",17),A()()())}function Ope(n,e){n&1&&(I(0,"div",18),ye(1,"app-finder"),I(2,"a",19),ye(3,"img",10),I(4,"div"),K(5,"\u0410\u043A\u043A\u0430\u0443\u043D\u0442"),A()(),I(6,"a",20),vm(),I(7,"svg",12),ye(8,"path",13),A(),ym(),I(9,"div"),K(10,"\u041F\u043B\u0430\u043D"),A()(),I(11,"a",21),ye(12,"img",15),I(13,"div"),K(14,"\u041C\u0435\u0431\u0435\u043B\u044C"),A()(),I(15,"a",22),ye(16,"img",17),I(17,"div"),K(18,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D"),A()()())}var Gs=(()=>{class n{menuOpen=!1;isMobileView=!1;ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=768,this.isMobileView||(this.menuOpen=!1)}toggleMenu(){this.menuOpen=!this.menuOpen}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=dn({type:n,selectors:[["app-navigation-panel"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,jo)},decls:6,vars:3,consts:[[1,"navigationSpan"],["routerLink","/",1,"homeBtn","navigationBtn"],["class","hamburger-menu",3,"active","click",4,"ngIf"],["class","desktop-content",4,"ngIf"],["class","mobile-menu",4,"ngIf"],[1,"hamburger-menu",3,"click"],["ng","","loading","lazy","src","/assets/images/hamburgerMenuIcon.svg","alt","menu"],[1,"desktop-content"],[1,"mainBtns"],["routerLink","/account",1,"accountBtn","navigationBtn"],["loading","lazy","src","/assets/images/accountIcon.svg","alt","account"],["routerLink","/plan",1,"createBtn","navigationBtn"],["viewBox","0 0 32 32"],["d","M28,14H18V4c0-1.104-0.896-2-2-2s-2,0.896-2,2v10H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h10v10c0,1.104,0.896,2,2,2 s2-0.896,2-2V18h10c1.104,0,2-0.896,2-2S29.104,14,28,14z","fill","#DAD7CD"],["routerLink","/create/new",1,"navigationBtn"],["loading","lazy","src","/assets/images/furnitureIcon.svg","alt","furniture"],["routerLink","/shop",1,"navigationBtn"],["loading","lazy","src","/assets/images/shopIcon.svg","alt","shop"],[1,"mobile-menu"],["routerLink","/account",1,"mobile-menu-item"],["routerLink","/plan",1,"mobile-menu-item"],["routerLink","/create/new",1,"mobile-menu-item"],["routerLink","/shop",1,"mobile-menu-item"]],template:function(i,r){i&1&&(I(0,"nav",0)(1,"a",1),K(2,"HQ"),A(),Pe(3,Rpe,2,2,"button",2)(4,Ppe,12,0,"div",3)(5,Ope,19,0,"div",4),A()),i&2&&(z(3),$("ngIf",r.isMobileView),z(),$("ngIf",!r.isMobileView),z(),$("ngIf",r.isMobileView&&r.menuOpen))},dependencies:[Es,TC,Rn],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.desktop-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:80%;height:100%}.navigationBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{height:100%}app-finder[_ngcontent-%COMP%]{height:80%;width:60%}.homeBtn[_ngcontent-%COMP%]{color:#dad7cd;font-family:Gloock;font-size:27.5px;text-decoration:none;align-content:center}.navigationSpan[_ngcontent-%COMP%]{display:flex;background-color:#000;border-radius:10px;gap:5px;justify-content:space-around;width:calc(90vw - 30px);min-width:768px;margin:0 auto;height:60px;align-items:center;border:1px solid rgba(163,177,138,.3);position:relative}@media (max-width: 768px){.navigationSpan[_ngcontent-%COMP%]{justify-content:space-between;padding:0 15px;width:calc(90vw - 30px);min-width:auto}}.navigationBtn[_ngcontent-%COMP%]{height:80%;background:none;border:none;cursor:pointer}.mainBtns[_ngcontent-%COMP%]{height:75%;display:flex;gap:15px;align-items:center}.createBtn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:sepia(4%)}.hamburger-menu[_ngcontent-%COMP%]{display:none;background:none;border:none;cursor:pointer;padding:0;height:30px;width:30px;transition:all .5s ease-in-out}.hamburger-menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.hamburger-menu.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(64%) sepia(11%) saturate(1233%) hue-rotate(71deg) brightness(92%) contrast(86%)}@media (max-width: 768px){.hamburger-menu[_ngcontent-%COMP%]{display:block}}.mobile-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:100%;margin-top:10px;left:0;right:0;background-color:#000;border-radius:10px;padding:15px;flex-direction:column;gap:15px;z-index:100;border:1px solid rgba(163,177,138,.3)}.mobile-menu[_ngcontent-%COMP%]   app-finder[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-bottom:10px;height:40px}.mobile-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#dad7cd;text-decoration:none;padding:8px}.mobile-menu-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .mobile-menu-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.mobile-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.desktop-content[_ngcontent-%COMP%]{display:none}.mobile-menu[_ngcontent-%COMP%]{display:flex}}']})}return n})();var Fpe={images:["/assets/images/sofaSliderPhotos/1.png","/assets/images/sofaSliderPhotos/2.png","/assets/images/sofaSliderPhotos/3.png","/assets/images/sofaSliderPhotos/4.png"],idMainImage:0},q5={name:"Onte Bucle White",colors:[{color:"#FFC2CC",imagesData:Fpe}],description:`\u041C\u0435\u0445\u0430\u043D\u0438\u0437\u043C: \u043F\u0430\u043D\u0442\u043E\u0433\u0440\u0430\u0444
\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442 \u043F\u043E\u043B\u0430: 12 \u0441\u043C
\u042F\u0449\u0438\u043A \u0434\u043B\u044F \u0431\u0435\u043B\u044C\u044F: \u0434\u0430
\u041C\u0430\u043A\u0441. \u043D\u0430\u0433\u0440\u0443\u0437\u043A\u0430: 100 \u043A\u0433`,shops:[{cost:125990,url:"https://www.divan.ru/blagoveshchensk/product/divan-uglovoj-onte-bucle-white"},{cost:84990,url:"https://avtorm.ru/catalog/product-divan-uglovoy-onte-bucle-white"}],additionalData:{category:"sofa"},proportions:{width:1,height:1,length:1}},X5=[{name:"\u041F\u0440\u0438\u0445\u043E\u0436\u0430\u044F",objects:[],gridArea:"1 / 1 / 3 / 4",roomProportions:{width:3,length:2,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:"3 / 1 / 4 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:" 4 / 1 / 5 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0413\u043E\u0441\u0442\u0438\u043D\u043D\u0430\u044F",objects:[],gridArea:"5 / 1 / 8 / 5",roomProportions:{width:4,length:3,height:3}},{name:"\u0421\u043F\u0430\u043B\u044C\u043D\u044F",objects:[],gridArea:" 3 / 2 / 5 / 4",roomProportions:{width:2,length:2,height:3}}];var Y5=n=>({activeChapterBtn:n}),Z5=n=>({opacityDisable:n});function Npe(n,e){n&1&&(I(0,"span",24)(1,"div",25)(2,"span",26),ye(3,"div")(4,"div")(5,"div")(6,"div"),A()(),I(7,"span",27)(8,"span",28),ye(9,"div",29)(10,"div",30)(11,"div",31)(12,"div",32),A(),I(13,"h1",33),K(14,"HOUSEQUALITY"),A(),I(15,"span",34)(16,"button",35),K(17,"Shop"),A(),I(18,"button",36),K(19,"Furniture"),A(),I(20,"button",37),K(21,"Project"),A(),I(22,"button",38),K(23,"Profile"),A()()()())}function Lpe(n,e){n&1&&(I(0,"a",39),K(1,"\u041F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u043A\u0430"),A())}var K5=(()=>{class n{elementRef;router;constructor(t,i){this.elementRef=t,this.router=i}furnitureTemplate="create";furnitureExampleData=q5;planHouseExampleData=X5;isMobileView=!1;ngAfterViewInit(){this.elementRef.nativeElement.querySelectorAll("app-create-furniture,app-plan-house").forEach(t=>{t.querySelectorAll("*").forEach(i=>{i.setAttribute("tabindex","-1"),i.style.pointerEvents="none"})})}ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=600}focusFinder(){let t=this.elementRef.nativeElement.querySelector(".finderInput");t&&t.focus()}openViewFurniture(){this.furnitureTemplate="view"}openCreateFurniture(){this.furnitureTemplate="create"}navigateToPage(t){this.router.navigateByUrl(t)}static \u0275fac=function(i){return new(i||n)(ce(Kt),ce(wr))};static \u0275cmp=dn({type:n,selectors:[["app-main-page"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,jo)},decls:60,vars:17,consts:[["class","startScreenSpan",4,"ngIf"],[1,"mainInformation"],[1,"projectPreviewSpan"],[1,"someSpan"],[1,"chapterTitle",2,"margin-bottom","0"],[1,"descriptionText"],[1,"exampleFunctions"],[1,"quarter-circle","figureFunction"],[1,"exampleFunctionTitle"],[1,"exampleFunctionDescription"],[1,"square","figureFunction",2,"border-radius","20px"],[1,"chapterTitle"],[1,"chapterChangeBtnsSpan"],[1,"changeChapterBtn",3,"click","ngClass"],[1,"furnitureModule"],[1,"furnitureModuleVariant",3,"click","furnitureData","ngClass"],[3,"click","planHouse"],[1,"footerColumnsSpan"],[1,"footerColumn"],[1,"footerMenuBtn",2,"color","#DAD7CD",3,"click"],["routerLink","/account",1,"footerMenuBtn"],["routerLink","/create/new",1,"footerMenuBtn",2,"color","#DAD7CD"],["routerLink","/plan","class","footerMenuBtn",4,"ngIf"],[1,"projectFooterTitle"],[1,"startScreenSpan"],[1,"circleDecoration"],[1,"circleDecorationSpan"],[1,"startInformationSpan"],[1,"decorationFigures"],[1,"quarter-circle"],[1,"square"],[1,"parallelogram"],[1,"circle"],[1,"projectTitle"],[1,"navigationStartMenu"],["routerLink","/shop",1,"startNavigationBtn"],["routerLink","/create/new",1,"startNavigationBtn"],["routerLink","/plan",1,"startNavigationBtn"],["routerLink","/account",1,"startNavigationBtn"],["routerLink","/plan",1,"footerMenuBtn"]],template:function(i,r){i&1&&(Pe(0,Npe,24,0,"span",0),I(1,"span",1),ye(2,"app-navigation-panel"),I(3,"span",2)(4,"span",3)(5,"h2",4),K(6,"\u0412\u0430\u0448 \u0438\u0434\u0435\u0430\u043B\u044C\u043D\u044B\u0439 \u0434\u043E\u043C"),A(),I(7,"h3",5),K(8,"HouseQuality - \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u0430 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0438\u0434\u0435\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u0434\u043E\u043C\u0430. \u0417\u0430\u0439\u0434\u0438\u0442\u0435 \u0432 \u043D\u0430\u0448 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0446\u0438\u0444\u0440\u043E\u0432\u043E\u0433\u043E \u0434\u0438\u0437\u0430\u0439\u043D\u0430 \u0438 \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0441\u0432\u043E\u0435 \u043F\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435!"),A(),I(9,"span",6)(10,"div",7)(11,"h2",8),K(12,"\u0421\u0442\u0438\u043B\u044C"),A(),I(13,"h3",9),K(14,"\u0412\u0430\u0448\u0430 \u0438\u0434\u0435\u044F"),A()(),I(15,"div",10)(16,"h2",8),K(17,"\u0414\u043E\u043C"),A(),I(18,"h3",9),K(19,"\u0412\u0430\u0448\u0430 \u0437\u043E\u043D\u0430"),A()(),I(20,"div",7)(21,"h2",8),K(22,"\u041F\u043B\u0430\u043D"),A(),I(23,"h3",9),K(24,"\u041D\u043E\u0432\u044B\u0439 \u0432\u0438\u0434"),A()(),I(25,"div",10)(26,"h2",8),K(27,"\u041C\u0435\u0431\u0435\u043B\u044C"),A(),I(28,"h3",9),K(29,"\u0411\u043E\u043B\u044C\u0448\u043E\u0439 \u0432\u044B\u0431\u043E\u0440"),A()()()(),I(30,"span",3)(31,"h2",11),K(32,"\u0421\u043E\u0437\u0434\u0430\u0435\u043C \u0438 \u0432\u043E\u043F\u043B\u043E\u0449\u0430\u0435\u043C \u0432\u0430\u0448\u0438 \u043C\u0435\u0447\u0442\u044B"),A(),I(33,"span",12)(34,"button",13),Me("click",function(){return r.openCreateFurniture()}),K(35,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),A(),I(36,"button",13),Me("click",function(){return r.openViewFurniture()}),K(37,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),A()()(),I(38,"span",14)(39,"app-create-furniture",15),Me("click",function(){return r.navigateToPage("/create/new")}),A(),I(40,"app-view-furniture",15),Me("click",function(){return r.navigateToPage("/shop")}),A()(),I(41,"span",3)(42,"h2",11),K(43,"\u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u0441\u0432\u043E\u0439 \u0434\u043E\u043C"),A(),I(44,"h3",5),K(45,"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B \u0438 \u043F\u0435\u0440\u0435\u0434\u0432\u0438\u043D\u044C\u0442\u0435 \u0438\u0445"),A()(),I(46,"app-plan-house",16),Me("click",function(){return r.navigateToPage("/plan")}),A()()(),I(47,"footer")(48,"span",17)(49,"span",18)(50,"a",19),Me("click",function(){return r.focusFinder()}),K(51,"\u041D\u0430\u0439\u0442\u0438 \u043C\u0435\u0431\u0435\u043B\u044C"),A(),I(52,"a",20),K(53,"\u0410\u043A\u043A\u0430\u0443\u043D\u0442"),A()(),I(54,"span",18)(55,"a",21),K(56,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),A(),Pe(57,Lpe,2,0,"a",22),A()(),I(58,"h2",23),K(59,"HouseQuality 2025"),A()()),i&2&&($("ngIf",!r.isMobileView),z(34),$("ngClass",xr(9,Y5,r.furnitureTemplate==="create")),z(2),$("ngClass",xr(11,Y5,r.furnitureTemplate==="view")),z(3),$("furnitureData",r.furnitureExampleData)("ngClass",xr(13,Z5,r.furnitureTemplate==="view")),z(),$("furnitureData",r.furnitureExampleData)("ngClass",xr(15,Z5,r.furnitureTemplate==="create")),z(6),$("planHouse",r.planHouseExampleData),z(11),$("ngIf",!r.isMobileView))},dependencies:[Dh,rw,gu,Wo,Gs,Es,Rn],styles:['@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.startScreenSpan[_ngcontent-%COMP%]{width:100vw;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;padding-top:5vh;overflow:hidden;background:#a3b18a;background:linear-gradient(0deg,#a3b18a,#dad7cd)}@media (max-width: 600px){.startScreenSpan[_ngcontent-%COMP%]{padding-top:3vh}}.circleDecoration[_ngcontent-%COMP%]{grid-area:1/1/2/2}.circleDecorationSpan[_ngcontent-%COMP%]{clip-path:inset(0 0 50% 0);margin-bottom:-50%;display:grid;aspect-ratio:1;place-items:center;content-visibility:auto}.circleDecorationSpan[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#3a5a40;border-radius:50%;grid-area:1/1/2/2;aspect-ratio:1;animation:_ngcontent-%COMP%_wave 2s infinite ease-in-out}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){opacity:1;width:50%;animation-delay:0s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){opacity:.8;width:65%;animation-delay:.3s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){opacity:.6;width:80%;animation-delay:.6s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){opacity:.4;width:95%;animation-delay:.9s}@keyframes _ngcontent-%COMP%_wave{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.decorationFigures[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:30px;height:45px;width:350px;grid-area:1/1/2/2;z-index:1;justify-content:center}@media (max-width: 600px){.decorationFigures[_ngcontent-%COMP%]{width:280px;gap:15px;height:35px}}.parallelogram[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1/2;transform:skew(-20deg);background-color:#344e41;height:100%}.quarter-circle[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:100% 10px 10px;background-color:#344e41;height:100%}.square[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1;background-color:#344e41;height:100%}.circle[_ngcontent-%COMP%]{width:39px;height:39px;position:relative;border:3px solid #344E41;border-radius:50%}.circle[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:#344e41;border-radius:50%;clip-path:inset(0 50% 0 0)}.circle[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:transparent;border-radius:50%}.startInformationSpan[_ngcontent-%COMP%]{display:flex;gap:20px;flex-direction:column;align-items:center;grid-area:1/1/2/2;z-index:1;margin-top:10px}@media (max-width: 600px){.startInformationSpan[_ngcontent-%COMP%]{gap:15px;margin-top:5px}}.projectTitle[_ngcontent-%COMP%]{font-family:Gloock;font-size:8vw;font-weight:400;color:#000}@media (max-width: 600px){.projectTitle[_ngcontent-%COMP%]{font-size:12vw}}.navigationStartMenu[_ngcontent-%COMP%]{display:flex;gap:10px}@media (max-width: 768px){.navigationStartMenu[_ngcontent-%COMP%]{display:none}}.startNavigationBtn[_ngcontent-%COMP%]{padding:5px;background:none;border:none;font-size:1.75vw;cursor:pointer;text-decoration:none;color:#000}.mainInformation[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;align-items:center;gap:50px;padding:50px;width:calc(100vw - 100px)}@media (max-width: 600px){.mainInformation[_ngcontent-%COMP%]{padding:30px 15px;width:calc(100vw - 30px);gap:30px}}.someSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;justify-content:start}@media (max-width: 600px){.someSpan[_ngcontent-%COMP%]{width:100%;align-items:center;text-align:center}}.chapterTitle[_ngcontent-%COMP%]{font-family:Calypso;font-weight:700;font:3.5vw/1 Calypso;color:#dad7cd;width:60%}@media (max-width: 1024px){.chapterTitle[_ngcontent-%COMP%]{font-size:5vw}}@media (max-width: 768px){.chapterTitle[_ngcontent-%COMP%]{font-size:6vw}}@media (max-width: 600px){.chapterTitle[_ngcontent-%COMP%]{font-size:7vw;width:90%}}.descriptionText[_ngcontent-%COMP%]{color:#a3b18a;width:50%;font-size:20px}@media (max-width: 768px){.descriptionText[_ngcontent-%COMP%]{width:65%}}@media (max-width: 600px){.descriptionText[_ngcontent-%COMP%]{width:90%;font-size:4vw}}.exampleFunctions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:50px;font-size:15px}@media (max-width: 768px){.exampleFunctions[_ngcontent-%COMP%]{width:350px}}@media (max-width: 600px){.exampleFunctions[_ngcontent-%COMP%]{height:auto;flex-wrap:wrap;gap:20px;justify-content:center}}.figureFunction[_ngcontent-%COMP%]{display:flex;height:150px;flex-direction:column;justify-content:center;gap:5px;background-color:#344e41b3}.figureFunction[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:left;margin-left:-10px}@media (max-width: 600px){.figureFunction[_ngcontent-%COMP%]{width:40%;height:120px}}.exampleFunctionTitle[_ngcontent-%COMP%]{font-family:Calypso;font-weight:700;font-size:25px;color:#dad7cd;margin:0 0 0 -10px;cursor:default}@media (max-width: 600px){.exampleFunctionTitle[_ngcontent-%COMP%]{font-size:5vw}}.exampleFunctionDescription[_ngcontent-%COMP%]{color:#a3b18a}@media (max-width: 600px){.exampleFunctionDescription[_ngcontent-%COMP%]{font-size:3.5vw}}.chapterChangeBtnsSpan[_ngcontent-%COMP%]{display:flex;gap:30px;width:450px}@media (max-width: 600px){.chapterChangeBtnsSpan[_ngcontent-%COMP%]{justify-content:center;width:100%;gap:15px}}.changeChapterBtn[_ngcontent-%COMP%]{line-height:50px;cursor:pointer;background-color:#344e41;color:#fff;border:none;border-radius:10px;width:50%;aspect-ratio:4;font-size:1.15rem;transition:all .5s ease-in-out}@media (max-width: 600px){.changeChapterBtn[_ngcontent-%COMP%]{font-size:15px;padding:10px;width:calc(50% - 20px);height:50px;line-height:normal}}.projectPreviewSpan[_ngcontent-%COMP%]{width:80%;min-width:550px}@media (max-width: 1100px){.projectPreviewSpan[_ngcontent-%COMP%]{width:100%}}@media (max-width: 600px){.projectPreviewSpan[_ngcontent-%COMP%]{min-width:auto}}.activeChapterBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#000}.furnitureModule[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center}.furnitureModuleVariant[_ngcontent-%COMP%]{display:block;grid-area:1/1/2/2;transition:all .5s ease-in-out;width:100%;z-index:1}.opacityDisable[_ngcontent-%COMP%]{opacity:0;z-index:-1}app-plan-house[_ngcontent-%COMP%]{margin-top:50px;width:calc(100vw - 100px)}@media (max-width: 600px){app-plan-house[_ngcontent-%COMP%]{width:100%}}footer[_ngcontent-%COMP%]{width:calc(100vw - 200px);background-color:#000;padding:100px;display:flex;flex-direction:column;gap:50px}@media (max-width: 600px){footer[_ngcontent-%COMP%]{width:calc(100vw - 40px);padding:50px 20px;gap:30px}}.footerColumnsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}@media (max-width: 600px){.footerColumnsSpan[_ngcontent-%COMP%]{flex-direction:column;gap:30px}}.footerColumn[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}@media (max-width: 600px){.footerColumn[_ngcontent-%COMP%]{align-items:center}}.footerColumn[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none}.footerMenuBtn[_ngcontent-%COMP%]{background:none;color:#a3b18a;font-size:18px;border:none;text-align:start;cursor:pointer}@media (max-width: 600px){.footerMenuBtn[_ngcontent-%COMP%]{font-size:4.5vw;text-align:center}}.projectFooterTitle[_ngcontent-%COMP%]{color:#a3b18a;color:1.15vw;font-weight:400;text-align:center;cursor:default}@media (max-width: 600px){.projectFooterTitle[_ngcontent-%COMP%]{font-size:4.5vw}}app-navigation-panel[_ngcontent-%COMP%]{margin-left:calc(-50vw + 50%);position:sticky;top:30px;z-index:6;width:100%}@media (max-width: 600px){app-navigation-panel[_ngcontent-%COMP%]{top:15px}}app-view-furniture[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%], app-plan-house[_ngcontent-%COMP%]{display:block;cursor:pointer;width:100%}']})}return n})();function IC(n){return n.accountType==="email"}var hl=(()=>{class n{httpModule;accountCookieService;baseServiceUrl=di+"account";constructor(t,i){this.httpModule=t,this.accountCookieService=i}POSTcreateAccount(t){let i=new on().set("accountType",t.accountType).set("nickname",t.nickname);return IC(t)&&(i=i.set("email",t.email).set("password",t.password)),xn(this.httpModule.post(this.baseServiceUrl,i))}DELETEaccountJwt(t){let i=new on().set("jwt",t);return xn(this.httpModule.delete(this.baseServiceUrl+"/jwt/delete",{params:i}))}PUTupdateSecondaryAccountData(t){console.log("changeData",t);let i=new on({fromObject:{nickname:t.nickname,jwt:t.jwt}});return console.log(i.toString()),xn(this.httpModule.put(this.baseServiceUrl,null,{params:i}))}DELETEaccount(t){let i=new on().set("jwt",t);return xn(this.httpModule.delete(this.baseServiceUrl,{params:i}))}GETaccount(t){return Ge(this,null,function*(){let i=new on().set("jwt",t);try{let{accountData:r}=yield xn(this.httpModule.get(this.baseServiceUrl,{params:i}));return r.furnitures=r.furnitures.map(o=>Ve(q({},o),{previewUrl:di+o.previewUrl})),{accountData:r}}catch(r){throw console.error("Error in GETfurnitureCard:",r),r}})}checkJwt(){return!!this.accountCookieService.getJwt()}static \u0275fac=function(i){return new(i||n)(He(Gi),He(Pi))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ep=(()=>{class n{httpModule;baseServiceUrl=di+"auth/";constructor(t){this.httpModule=t}POSTcreateLongJWT(t){let i=new on().set("accountType",t.accountType);return IC(t)&&(i=i.set("email",t.email).set("password",t.password)),xn(this.httpModule.post(this.baseServiceUrl+"jwt/long",i))}POSTcreateShortJWT(t){let i=new on().set("email",t);return xn(this.httpModule.post(this.baseServiceUrl+"jwt/temporary",null,{params:i}))}PUTupdateBaseData(t){let i={accountType:t.accountType,jwt:t.jwt};IC(t)&&(i.password=t.password);let r=new on({fromObject:i});return console.log(r.toString()),xn(this.httpModule.put(this.baseServiceUrl+"account",t))}GETrequestPasswordCode(t){let i=new on().set("email",t);return xn(this.httpModule.get(this.baseServiceUrl+"account/code",{params:i}))}static \u0275fac=function(i){return new(i||n)(He(Gi))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kpe(n,e){if(n&1&&ye(0,"div",43),n&2){let t=e.$implicit;Fn("grid-area",t.gridArea)}}function Upe(n,e){if(n&1){let t=yt();I(0,"div",39),Me("click",function(){let r=Le(t).index,o=ae(2);return ke(o.openProject(r))}),I(1,"h4",40),K(2),A(),I(3,"div",41),Pe(4,kpe,1,2,"div",42),A()()}if(n&2){let t=e.$implicit;z(2),pn(t.name),z(2),$("ngForOf",t.rooms)}}function Bpe(n,e){if(n&1&&(I(0,"a",44)(1,"h4",45),K(2),A(),ye(3,"img",46),A()),n&2){let t=e.$implicit;$("routerLink","/create/"+t._id),z(2),pn(t.name),z(),$("src",t.previewUrl,Pr)}}function Vpe(n,e){if(n&1){let t=yt();I(0,"div",14)(1,"div",15)(2,"div",16),ye(3,"img",17),I(4,"label",18)(5,"input",19),Me("change",function(r){Le(t);let o=ae();return ke(o.uploadAvatar(r))}),A(),ye(6,"img",20),A()(),I(7,"div",21)(8,"h2",22),K(9),A(),I(10,"div",23)(11,"div",24)(12,"span",25),K(13,"\u041F\u0440\u043E\u0435\u043A\u0442\u044B:"),A(),I(14,"span",26),K(15),A()(),I(16,"div",24)(17,"span",25),K(18,"\u041C\u0435\u0431\u0435\u043B\u044C:"),A(),I(19,"span",26),K(20),A()(),I(21,"div",24)(22,"span",25),K(23,"Email:"),A(),I(24,"span",26),K(25),A()()()(),I(26,"div",27)(27,"button",28),Me("click",function(){Le(t);let r=ae();return ke(r.openEditForm())}),ye(28,"img",29),A(),I(29,"button",30),Me("click",function(){Le(t);let r=ae();return ke(r.logout())}),ye(30,"img",31),A()()(),I(31,"div",32)(32,"h3",33),K(33,"\u041C\u043E\u0438 \u043F\u0440\u043E\u0435\u043A\u0442\u044B"),A(),I(34,"div",34),Pe(35,Upe,5,2,"div",35),A()(),I(36,"div",36)(37,"h3",33),K(38,"\u041C\u043E\u044F \u043C\u0435\u0431\u0435\u043B\u044C"),A(),I(39,"div",37),Pe(40,Bpe,4,3,"a",38),A()()()}if(n&2){let t=ae();z(3),$("src",t.accountData.avatarUrl,Pr),z(6),pn(t.accountData.nickname),z(6),pn(t.accountData.projects.length),z(5),pn(t.accountData.furnitures.length),z(5),pn(t.accountData.email),z(10),$("ngForOf",t.accountData.projects),z(5),$("ngForOf",t.accountData.furnitures)}}function zpe(n,e){n&1&&(I(0,"div",47),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),A())}function Hpe(n,e){n&1&&(I(0,"div",47),K(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),A())}function jpe(n,e){if(n&1&&(I(0,"div",8)(1,"label",48),K(2,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),A(),ye(3,"input",49),Pe(4,Hpe,2,0,"div",11),A()),n&2){let t,i,r=ae();z(3),Dn("invalid",((t=r.editForm.get("password"))==null?null:t.invalid)&&((t=r.editForm.get("password"))==null?null:t.touched)),z(),$("ngIf",((i=r.editForm.get("password"))==null?null:i.invalid)&&((i=r.editForm.get("password"))==null?null:i.touched))}}var Q5=(()=>{class n{accountService;router;accountCookieService;imageServerControlService;imageClientControlService;authService;notification;accountData;isEditFormOpen=!1;editForm;constructor(t,i,r,o,s,a,l){this.accountService=t,this.router=i,this.accountCookieService=r,this.imageServerControlService=o,this.imageClientControlService=s,this.authService=a,this.notification=l}ngOnInit(){this.checkAuthAndLoadData(),this.initEditForm()}updateSecondaryAccountData(t){return Ge(this,null,function*(){if(!this.accountData)return;let i={jwt:t,nickname:this.editForm.value.nickname};try{yield this.accountService.PUTupdateSecondaryAccountData(i),this.accountData.nickname=this.editForm.value.nickname,this.notification.setSuccess("\u0414\u0430\u043D\u043D\u044B\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B",5e3)}catch(r){throw this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043D\u0438\u043A\u043D\u0435\u0439\u043C\u0430",5e3),console.error(r),r}})}saveChanges(){return Ge(this,null,function*(){if(!this.accountData||!this.editForm.valid){this.notification.setError("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u044B",5e3);return}let t=this.accountCookieService.getJwt(),i=this.accountCookieService.getUserType();if(!t||!i){this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0443\u0442\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438",5e3);return}try{yield this.updateSecondaryAccountData(t),yield this.updateBaseDataIfNeeded(t,i),this.closeEditForm(),this.notification.setSuccess("\u0414\u0430\u043D\u043D\u044B\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B",5e3)}catch(r){this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445",5e3),console.error(r)}})}updateBaseDataIfNeeded(t,i){return Ge(this,null,function*(){if(this.accountData?.password===void 0||!this.editForm.value.password||i==="google")return;let r={jwt:t,accountType:i,password:this.editForm.value.password};try{yield this.authService.PUTupdateBaseData(r),this.accountData.password=this.editForm.value.password}catch(o){throw this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0430\u0440\u043E\u043B\u044F",5e3),console.error(o),o}})}loadUserData(t){return Ge(this,null,function*(){try{let i=(yield this.accountService.GETaccount(t)).accountData;this.accountData={email:i.email,nickname:i.nickname,projects:i.projects,avatarUrl:this.imageServerControlService.GETaccountAvatar(t),furnitures:i.furnitures},i.password!==void 0&&(this.accountData.password=i.password)}catch(i){console.error(i)}})}uploadAvatar(t){return Ge(this,null,function*(){let i=this.accountCookieService.getJwt();if(!i||!this.accountData)return;let o=t.target.files?.[0];if(!o){this.notification.setError("\u0424\u0430\u0439\u043B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D",5e3);return}try{let s=yield this.imageClientControlService.compressImage(o);if(!s){this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0436\u0430\u0442\u0438\u044F \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",5e3);return}yield this.imageServerControlService.POSTuploadUserAvatar(s,i),this.accountData.avatarUrl=URL.createObjectURL(s),this.notification.setSuccess("\u0410\u0432\u0430\u0442\u0430\u0440 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",5e3)}catch(s){this.notification.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430",5e3),console.error(s)}})}checkAuthAndLoadData(){let t=this.accountCookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.loadUserData(t)}initEditForm(){this.editForm=new vi({nickname:new Mn(this.accountData?.nickname,[Tt.required,Tt.minLength(3),Tt.maxLength(30)])}),this.accountCookieService.getUserType()==="email"&&this.editForm.addControl("password",new Mn(this.accountData?.password,[Tt.required,Tt.minLength(6)]))}openEditForm(){if(!this.accountData){this.notification.setError("\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B",5e3);return}this.isEditFormOpen=!0}closeEditForm(){this.isEditFormOpen=!1,this.accountData&&(this.accountData.nickname!=this.editForm.value.nickname,this.accountData.password&&this.accountData.password!=this.editForm.value.password),this.editForm.reset()}openProject(t){this.router.navigateByUrl("/plan/"+t)}logout(){let t=this.accountCookieService.getJwt();t&&this.accountService.DELETEaccountJwt(t),this.accountCookieService.deleteJwt(),this.accountCookieService.deleteAccountType(),this.router.navigateByUrl("/")}static \u0275fac=function(i){return new(i||n)(ce(hl),ce(wr),ce(Pi),ce(dl),ce(nw),ce(Ep),ce(Di))};static \u0275cmp=dn({type:n,selectors:[["app-account-page"]],decls:18,vars:9,consts:[[1,"account-page"],["class","account-container",4,"ngIf"],[1,"edit-modal"],[1,"modal-content"],[1,"close-btn",3,"click"],["src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"edit-form",3,"ngSubmit","formGroup"],[1,"form-title"],[1,"form-group"],["for","nickname"],["id","nickname","formControlName","nickname"],["class","error-message",4,"ngIf"],["class","form-group",4,"ngIf"],["type","submit",1,"save-btn",3,"disabled"],[1,"account-container"],[1,"profile-card"],[1,"avatar-container"],["alt","\u0410\u0432\u0430\u0442\u0430\u0440",1,"avatar-image",3,"src"],[1,"avatar-edit-btn"],["type","file","id","avatarInput","accept",".png,.jpeg,.jpg",3,"change"],["src","/assets/images/editIcon.svg","alt","\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0430\u0432\u0430\u0442\u0430\u0440"],[1,"profile-info"],[1,"profile-name"],[1,"profile-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"profile-actions"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C",1,"edit-btn",2,"width","27px",3,"click"],["src","/assets/images/editIcon.svg","alt","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"],["title","\u0412\u044B\u0439\u0442\u0438",1,"logout-btn",2,"width","35px",3,"click"],["src","/assets/images/logoutIcon.svg","alt","\u0412\u044B\u0439\u0442\u0438"],[1,"projects-section"],[1,"section-title"],[1,"projects-grid"],["class","project-card",3,"click",4,"ngFor","ngForOf"],[1,"furniture-section"],[1,"furniture-grid"],["class","furniture-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"project-card",3,"click"],[1,"project-name"],[1,"project-scheme"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"room"],[1,"furniture-card",3,"routerLink"],[1,"furniture-name"],["alt","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438",1,"furniture-image",3,"src"],[1,"error-message"],["for","password"],["id","password","type","password","formControlName","password"]],template:function(i,r){if(i&1&&(I(0,"div",0),ye(1,"app-navigation-panel"),Pe(2,Vpe,41,7,"div",1),I(3,"div",2)(4,"div",3)(5,"button",4),Me("click",function(){return r.closeEditForm()}),ye(6,"img",5),A(),I(7,"form",6),Me("ngSubmit",function(){return r.saveChanges()}),I(8,"h3",7),K(9,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"),A(),I(10,"div",8)(11,"label",9),K(12,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),A(),ye(13,"input",10),Pe(14,zpe,2,0,"div",11),A(),Pe(15,jpe,5,3,"div",12),I(16,"button",13),K(17," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),A()()()()()),i&2){let o,s;z(2),$("ngIf",r.accountData),z(),Dn("active",r.isEditFormOpen),z(4),$("formGroup",r.editForm),z(6),Dn("invalid",((o=r.editForm.get("nickname"))==null?null:o.invalid)&&((o=r.editForm.get("nickname"))==null?null:o.touched)),z(),$("ngIf",((s=r.editForm.get("nickname"))==null?null:s.invalid)&&((s=r.editForm.get("nickname"))==null?null:s.touched)),z(),$("ngIf",r.editForm.get("password")),z(),$("disabled",!r.editForm.valid)}},dependencies:[Gs,gi,Rn,So,Is,Co,Ms,Ts,Xo,Yo,Tm,Es],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.account-page[_ngcontent-%COMP%]{background:#000;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:30px 20px;font-family:Courier New,Courier,monospace;color:#dad7cd}.account-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin-top:30px}.profile-card[_ngcontent-%COMP%]{background:#000000b3;border-radius:15px;padding:30px;display:flex;align-items:flex-start;gap:30px;margin-bottom:30px;border:1px solid rgba(163,177,138,.3);position:relative}.avatar-container[_ngcontent-%COMP%]{position:relative;width:250px;aspect-ratio:1;flex-shrink:0}.avatar-container[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:50%;object-fit:cover}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;background:#344e41;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;border:2px solid black;transition:all .3s}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#436554}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;padding:10px;aspect-ratio:1}.profile-info[_ngcontent-%COMP%]{flex-grow:1}.profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;font-size:2rem;margin-bottom:15px;color:#a3b18a;text-shadow:0 0 10px rgba(163,177,138,.3)}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:fit-content;flex-wrap:wrap;gap:20px}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{background:#a3b18a1a;padding:8px 15px;border-radius:20px;border:1px solid rgba(163,177,138,.3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#a3b18a}.stat-item[_ngcontent-%COMP%]{max-width:min(768px,100vw - 500px)}.profile-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;transition:all .3s}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);opacity:.8}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1}.section-title[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;font-size:1.8rem;margin-bottom:20px;color:#a3b18a;text-shadow:0 0 5px rgba(163,177,138,.3);padding-bottom:10px;border-bottom:1px solid rgba(163,177,138,.3)}.projects-section[_ngcontent-%COMP%], .furniture-section[_ngcontent-%COMP%]{background:#000000b3;border-radius:15px;padding:25px;margin-bottom:30px;box-shadow:0 5px 15px #0000004d;border:1px solid rgba(163,177,138,.3)}.projects-grid[_ngcontent-%COMP%], .furniture-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.project-card[_ngcontent-%COMP%]{background:#a3b18a1a;border-radius:10px;padding:15px;cursor:pointer;transition:all .3s;border:1px solid rgba(163,177,138,.2)}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #a3b18a33;border-color:#a3b18a}.project-card[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:15px;color:#dad7cd;text-align:center}.project-card[_ngcontent-%COMP%]   .project-scheme[_ngcontent-%COMP%]{display:grid;width:100%;aspect-ratio:1;gap:5px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.project-card[_ngcontent-%COMP%]   .project-scheme[_ngcontent-%COMP%]   .room[_ngcontent-%COMP%]{background:#344e41;border-radius:3px;transition:all .3s}.furniture-card[_ngcontent-%COMP%]{background:#a3b18a1a;border-radius:10px;padding:15px;text-decoration:none;transition:all .3s;border:1px solid rgba(163,177,138,.2);display:flex;flex-direction:column;align-items:center}.furniture-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #a3b18a33;border-color:#a3b18a}.furniture-card[_ngcontent-%COMP%]   .furniture-name[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:15px;color:#dad7cd;text-align:center}.furniture-card[_ngcontent-%COMP%]   .furniture-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:5px}.edit-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:all .3s;z-index:1000}.edit-modal.active[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#000;border-radius:15px;padding:30px;width:90%;max-width:500px;position:relative;box-shadow:0 0 20px #a3b18a4d;border:1px solid #A3B18A;box-sizing:border-box}.edit-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:none;border:none;cursor:pointer}.edit-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;rotate:45deg;transition:all .3s}.edit-modal[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;color:#a3b18a;text-align:center;margin-bottom:25px;font-size:1.8rem}.edit-modal[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:#dad7cd}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(163,177,138,.5);border-radius:5px;padding:12px 15px;color:#dad7cd;font-family:Courier New,Courier,monospace;transition:all .3s}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#a3b18a;box-shadow:0 0 0 2px #a3b18a33}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background:#ff6b6b1a;animation:_ngcontent-%COMP%_shake .5s ease}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.8rem;margin-top:3px}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:#a3b18a;color:#000;border:none;border-radius:5px;padding:15px;font-family:Courier New,Courier,monospace;font-size:1.1rem;cursor:pointer;transition:all .3s;margin-top:10px}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #a3b18a66}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:disabled{background:#344e41;color:#00000080;cursor:not-allowed}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}20%,60%{transform:translate(-5px)}40%,80%{transform:translate(5px)}}@media (max-width: 900px){.stat-item[_ngcontent-%COMP%]{max-width:calc(100vw - 150px)}.profile-card[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{width:100%}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]{margin:0 auto}.profile-card[_ngcontent-%COMP%]   .profile-actions[_ngcontent-%COMP%]{flex-direction:row;width:100%;justify-content:center}.projects-grid[_ngcontent-%COMP%], .furniture-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}}@media (max-width: 600px){.account-page[_ngcontent-%COMP%]{padding:20px}.avatar-container[_ngcontent-%COMP%]{width:200px}.stat-item[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}.profile-card[_ngcontent-%COMP%]{padding:20px 0}.projects-section[_ngcontent-%COMP%], .furniture-section[_ngcontent-%COMP%]{padding:20px}.profile-name[_ngcontent-%COMP%], .section-title[_ngcontent-%COMP%]{font-size:1.5rem!important}.modal-content[_ngcontent-%COMP%]{width:95%!important;padding:20px!important}}']})}return n})();var Gpe=["signup"],Wpe=["signin"],$pe=["code"],qpe=["changePassword"],Xpe=["requestPasswordChange"],DC=()=>({standalone:!0});function Ype(n,e){n&1&&fa(0)}function Zpe(n,e){n&1&&(I(0,"div",23),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 4-\u0437\u043D\u0430\u0447\u043D\u044B\u0439 \u043A\u043E\u0434 "),A())}function Kpe(n,e){if(n&1){let t=yt();I(0,"form",13),Me("ngSubmit",function(){Le(t);let r=ae();return ke(r.checkMatchCodes())}),I(1,"h2",14),K(2,"\u0421\u043C\u0435\u043D\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"),A(),I(3,"span",15)(4,"label",16),K(5,"\u041A\u043E\u0434 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F"),A(),I(6,"span",17)(7,"input",18,5),Me("input",function(){Le(t);let r=zi(8),o=zi(10),s=ae();return ke(s.onInput(r,o))})("keyup.backspace",function(){Le(t);let r=zi(8),o=ae();return ke(o.onBackspace(r,r))}),yo("ngModelChange",function(r){Le(t);let o=ae();return Go(o.inputValues[0],r)||(o.inputValues[0]=r),ke(r)}),A(),I(9,"input",18,6),Me("input",function(){Le(t);let r=zi(10),o=zi(12),s=ae();return ke(s.onInput(r,o))})("keyup.backspace",function(){Le(t);let r=zi(8),o=zi(10),s=ae();return ke(s.onBackspace(o,r))}),yo("ngModelChange",function(r){Le(t);let o=ae();return Go(o.inputValues[1],r)||(o.inputValues[1]=r),ke(r)}),A(),I(11,"input",18,7),Me("input",function(){Le(t);let r=zi(12),o=zi(14),s=ae();return ke(s.onInput(r,o))})("keyup.backspace",function(){Le(t);let r=zi(10),o=zi(12),s=ae();return ke(s.onBackspace(o,r))}),yo("ngModelChange",function(r){Le(t);let o=ae();return Go(o.inputValues[2],r)||(o.inputValues[2]=r),ke(r)}),A(),I(13,"input",18,8),Me("input",function(){Le(t);let r=zi(14),o=ae();return ke(o.onInput(r,null))})("keyup.backspace",function(){Le(t);let r=zi(12),o=zi(14),s=ae();return ke(s.onBackspace(o,r))}),yo("ngModelChange",function(r){Le(t);let o=ae();return Go(o.inputValues[3],r)||(o.inputValues[3]=r),ke(r)}),A()(),Pe(15,Zpe,2,0,"div",19),A(),I(16,"span",20)(17,"button",21),Me("click",function(){Le(t);let r=ae();return ke(r.changeTemplate("signin"))}),K(18,"\u042F \u0432\u0441\u043F\u043E\u043C\u043D\u0438\u043B \u043F\u0430\u0440\u043E\u043B\u044C"),A()(),I(19,"button",22),K(20),A()()}if(n&2){let t,i,r,o,s,a=ae();z(7),Dn("invalid",((t=a.codeForm.get("code"))==null?null:t.invalid)&&((t=a.codeForm.get("code"))==null?null:t.touched)),vo("ngModel",a.inputValues[0]),$("ngModelOptions",Zu(19,DC)),z(2),Dn("invalid",((i=a.codeForm.get("code"))==null?null:i.invalid)&&((i=a.codeForm.get("code"))==null?null:i.touched)),vo("ngModel",a.inputValues[1]),$("ngModelOptions",Zu(20,DC)),z(2),Dn("invalid",((r=a.codeForm.get("code"))==null?null:r.invalid)&&((r=a.codeForm.get("code"))==null?null:r.touched)),vo("ngModel",a.inputValues[2]),$("ngModelOptions",Zu(21,DC)),z(2),Dn("invalid",((o=a.codeForm.get("code"))==null?null:o.invalid)&&((o=a.codeForm.get("code"))==null?null:o.touched)),vo("ngModel",a.inputValues[3]),$("ngModelOptions",Zu(22,DC)),z(2),$("ngIf",((s=a.codeForm.get("code"))==null?null:s.invalid)&&((s=a.codeForm.get("code"))==null?null:s.touched)),z(4),$("disabled",!a.codeForm.valid),z(),cr(" ",a.codeForm.valid?"\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C":"\u041D\u0435\u043F\u043E\u043B\u043D\u044B\u0439 \u043A\u043E\u0434"," ")}}function Jpe(n,e){n&1&&(I(0,"div",23),K(1," Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D "),A())}function Qpe(n,e){n&1&&(I(0,"div",23),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),A())}function eme(n,e){n&1&&(I(0,"div",23),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C "),A())}function tme(n,e){if(n&1){let t=yt();I(0,"form",24),Me("ngSubmit",function(){Le(t);let r=ae();return ke(r.signinUser())}),I(1,"h2",14),K(2,"\u0412\u0445\u043E\u0434"),A(),I(3,"span",25)(4,"label",26),K(5,"Email"),A(),ye(6,"input",27),Pe(7,Jpe,2,0,"div",19)(8,Qpe,2,0,"div",19),A(),I(9,"span",25)(10,"label",28),K(11,"\u041F\u0430\u0440\u043E\u043B\u044C"),A(),ye(12,"input",29),Pe(13,eme,2,0,"div",19),A(),I(14,"span",20)(15,"button",21),Me("click",function(){Le(t);let r=ae();return ke(r.changeTemplate("signup"))}),K(16,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),A(),I(17,"button",21),Me("click",function(){Le(t);let r=ae();return ke(r.changeTemplate("requestChange"))}),K(18,"\u0417\u0430\u0431\u044B\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?"),A()(),I(19,"button",22),K(20),A()()}if(n&2){let t,i,r,o,s,a=ae();$("formGroup",a.signinForm),z(6),Dn("invalid",((t=a.signinForm.get("email"))==null?null:t.invalid)&&((t=a.signinForm.get("email"))==null?null:t.touched)),z(),$("ngIf",((i=a.signinForm.get("email"))==null||i.errors==null?null:i.errors.required)&&((i=a.signinForm.get("email"))==null?null:i.touched)),z(),$("ngIf",((r=a.signinForm.get("email"))==null||r.errors==null?null:r.errors.email)&&((r=a.signinForm.get("email"))==null?null:r.touched)),z(4),Dn("invalid",((o=a.signinForm.get("password"))==null?null:o.invalid)&&((o=a.signinForm.get("password"))==null?null:o.touched)),z(),$("ngIf",((s=a.signinForm.get("password"))==null?null:s.invalid)&&((s=a.signinForm.get("password"))==null?null:s.touched)),z(6),$("disabled",!a.signinForm.valid),z(),cr(" ",a.signinForm.valid?"\u0412\u043E\u0439\u0442\u0438":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}function nme(n,e){n&1&&(I(0,"div",23),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),A())}function ime(n,e){if(n&1){let t=yt();I(0,"form",24),Me("ngSubmit",function(){Le(t);let r=ae();return ke(r.requestChangeCode())}),I(1,"h2",14),K(2,"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F"),A(),I(3,"div",25)(4,"label",30),K(5,"Email"),A(),ye(6,"input",31),Pe(7,nme,2,0,"div",19),A(),I(8,"div",20)(9,"button",21),Me("click",function(){Le(t);let r=ae();return ke(r.changeTemplate("signin"))}),K(10,"\u041D\u0430\u0437\u0430\u0434 \u043A \u0432\u0445\u043E\u0434\u0443"),A()(),I(11,"button",22),K(12," \u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u043A\u043E\u0434 "),A()()}if(n&2){let t,i,r=ae();$("formGroup",r.requestChangeForm),z(6),Dn("invalid",((t=r.requestChangeForm.get("email"))==null?null:t.invalid)&&((t=r.requestChangeForm.get("email"))==null?null:t.touched)),z(),$("ngIf",((i=r.requestChangeForm.get("email"))==null?null:i.invalid)&&((i=r.requestChangeForm.get("email"))==null?null:i.touched)),z(4),$("disabled",r.requestChangeForm.invalid)}}function rme(n,e){n&1&&(I(0,"div",23),K(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),A())}function ome(n,e){n&1&&(I(0,"div",23),K(1," \u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442 "),A())}function sme(n,e){if(n&1){let t=yt();I(0,"form",24),Me("ngSubmit",function(){Le(t);let r=ae();return ke(r.changePasswordUser())}),I(1,"h2",14),K(2,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),A(),I(3,"span",25)(4,"label",32),K(5,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),A(),ye(6,"input",33),Pe(7,rme,2,0,"div",19),A(),I(8,"span",25)(9,"label",34),K(10,"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C"),A(),ye(11,"input",35),Pe(12,ome,2,0,"div",19),A(),I(13,"button",22),K(14),A()()}if(n&2){let t,i,r,o,s=ae();$("formGroup",s.changePasswordForm),z(6),Dn("invalid",((t=s.changePasswordForm.get("newPassword"))==null?null:t.invalid)&&((t=s.changePasswordForm.get("newPassword"))==null?null:t.touched)),z(),$("ngIf",((i=s.changePasswordForm.get("newPassword"))==null?null:i.invalid)&&((i=s.changePasswordForm.get("newPassword"))==null?null:i.touched)),z(4),Dn("invalid",(((r=s.changePasswordForm.get("repeatPassword"))==null?null:r.invalid)||(s.changePasswordForm.errors==null?null:s.changePasswordForm.errors.mismatch))&&((r=s.changePasswordForm.get("repeatPassword"))==null?null:r.touched)),z(),$("ngIf",(s.changePasswordForm.errors==null?null:s.changePasswordForm.errors.mismatch)&&((o=s.changePasswordForm.get("repeatPassword"))==null?null:o.touched)),z(),$("disabled",!s.changePasswordForm.valid),z(),cr(" ",s.changePasswordForm.valid?"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}function ame(n,e){n&1&&(I(0,"div",23),K(1," Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D "),A())}function lme(n,e){n&1&&(I(0,"div",23),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),A())}function cme(n,e){n&1&&(I(0,"div",23),K(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),A())}function ume(n,e){n&1&&(I(0,"div",23),K(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),A())}function dme(n,e){if(n&1){let t=yt();I(0,"form",24),Me("ngSubmit",function(){Le(t);let r=ae();return ke(r.signUpUser())}),I(1,"h2",14),K(2,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),A(),I(3,"span",25)(4,"label",26),K(5,"Email"),A(),ye(6,"input",27),Pe(7,ame,2,0,"div",19)(8,lme,2,0,"div",19),A(),I(9,"span",25)(10,"label",36),K(11,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),A(),ye(12,"input",37),Pe(13,cme,2,0,"div",19),A(),I(14,"span",25)(15,"label",28),K(16,"\u041F\u0430\u0440\u043E\u043B\u044C"),A(),ye(17,"input",29),Pe(18,ume,2,0,"div",19),A(),I(19,"span",20)(20,"button",21),Me("click",function(){Le(t);let r=ae();return ke(r.changeTemplate("signin"))}),K(21,"\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442?"),A()(),I(22,"button",22),K(23),A()()}if(n&2){let t,i,r,o,s,a,l,u=ae();$("formGroup",u.signupForm),z(6),Dn("invalid",((t=u.signupForm.get("email"))==null?null:t.invalid)&&((t=u.signupForm.get("email"))==null?null:t.touched)),z(),$("ngIf",((i=u.signupForm.get("email"))==null||i.errors==null?null:i.errors.required)&&((i=u.signupForm.get("email"))==null?null:i.touched)),z(),$("ngIf",((r=u.signupForm.get("email"))==null||r.errors==null?null:r.errors.email)&&((r=u.signupForm.get("email"))==null?null:r.touched)),z(4),Dn("invalid",((o=u.signupForm.get("nickname"))==null?null:o.invalid)&&((o=u.signupForm.get("nickname"))==null?null:o.touched)),z(),$("ngIf",((s=u.signupForm.get("nickname"))==null?null:s.invalid)&&((s=u.signupForm.get("nickname"))==null?null:s.touched)),z(4),Dn("invalid",((a=u.signupForm.get("password"))==null?null:a.invalid)&&((a=u.signupForm.get("password"))==null?null:a.touched)),z(),$("ngIf",((l=u.signupForm.get("password"))==null?null:l.invalid)&&((l=u.signupForm.get("password"))==null?null:l.touched)),z(4),$("disabled",!u.signupForm.valid),z(),cr(" ",u.signupForm.valid?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}var ej=(()=>{class n{accountService;authService;router;notification;accountCookieService;cdr;constructor(t,i,r,o,s,a){this.accountService=t,this.authService=i,this.router=r,this.notification=o,this.accountCookieService=s,this.cdr=a}currentFormTemplate;inputValues=new Array(4).fill("");currentChangeCode;currentJwtToken;signupTemplate;signinTemplate;codeTemplate;changePasswordTemplate;requestPasswordChangeTemplate;ngAfterViewInit(){this.currentFormTemplate=this.signinTemplate,this.cdr.detectChanges()}requestChangeCode(){return Ge(this,null,function*(){if(!this.requestChangeForm.invalid)try{this.currentChangeCode=(yield this.authService.GETrequestPasswordCode(this.requestChangeForm.value.email)).resetCode,this.changeTemplate("code")}catch(t){console.log(t)}})}signinUser(){return Ge(this,null,function*(){if(this.signinForm.invalid)return;let t={email:this.signinForm.value.email,password:this.signinForm.value.password,accountType:"email"};try{let i=(yield this.authService.POSTcreateLongJWT(t)).jwt;this.accountCookieService.setJwt(i,"long"),this.accountCookieService.setUserType("email"),this.router.navigateByUrl("/account")}catch(i){console.log(i)}})}signUpUser(){return Ge(this,null,function*(){if(!this.signupForm.invalid)try{let t={email:this.signupForm.value.email,password:this.signupForm.value.password,nickname:this.signupForm.value.nickname,accountType:"email"};yield this.accountService.POSTcreateAccount(t);let i=(yield this.authService.POSTcreateLongJWT(t)).jwt;this.accountCookieService.setJwt(i,"long"),this.accountCookieService.setUserType("email"),this.router.navigateByUrl("/account")}catch(t){console.log(t)}})}changePasswordUser(){return Ge(this,null,function*(){if(this.changePasswordForm.invalid||!this.currentJwtToken)return;let t={password:this.changePasswordForm.value.newPassword,accountType:"email",jwt:this.currentJwtToken};try{yield this.authService.PUTupdateBaseData(t),this.changeTemplate("signin")}catch(i){console.log(i)}})}checkMatchCodes(){return Ge(this,null,function*(){if(this.codeForm.value.code===this.currentChangeCode)try{this.currentJwtToken=(yield this.authService.POSTcreateShortJWT(this.requestChangeForm.value.email)).jwt,this.changeTemplate("changePassword")}catch(t){console.log(t)}else this.notification.setError("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043E\u0434",2500)})}passwordMatchValidator=t=>{let i=t;return i.get("newPassword")?.value===i.get("repeatPassword")?.value?null:{mismatch:!0}};onInput(t,i){this.codeForm.patchValue({code:this.inputValues.join("")}),i&&t.value&&i.focus()}onBackspace(t,i){!t.value&&i&&i.focus(),this.codeForm.patchValue({code:this.inputValues.join("")})}changeTemplate(t){let i={requestChange:this.requestPasswordChangeTemplate,code:this.codeTemplate,signin:this.signinTemplate,signup:this.signupTemplate,changePassword:this.changePasswordTemplate};this.currentFormTemplate=i[t]||this.signinTemplate}signupForm=new vi({email:new Mn("",[Tt.required,Tt.email]),nickname:new Mn("",[Tt.required]),password:new Mn("",[Tt.required,Tt.minLength(6)])});codeForm=new vi({code:new Mn("",[Tt.required,Tt.minLength(4)])});changePasswordForm=new vi({newPassword:new Mn("",[Tt.required,Tt.minLength(6)]),repeatPassword:new Mn("",[Tt.required,Tt.minLength(6)])},{validators:this.passwordMatchValidator});signinForm=new vi({email:new Mn("",[Tt.required,Tt.email]),password:new Mn("",[Tt.required])});requestChangeForm=new vi({email:new Mn("",[Tt.required,Tt.email])});static \u0275fac=function(i){return new(i||n)(ce(hl),ce(Ep),ce(wr),ce(Di),ce(Pi),ce(ur))};static \u0275cmp=dn({type:n,selectors:[["app-login-page"]],viewQuery:function(i,r){if(i&1&&(Mi(Gpe,5,Rr),Mi(Wpe,5,Rr),Mi($pe,5,Rr),Mi(qpe,5,Rr),Mi(Xpe,5,Rr)),i&2){let o;ci(o=ui())&&(r.signupTemplate=o.first),ci(o=ui())&&(r.signinTemplate=o.first),ci(o=ui())&&(r.codeTemplate=o.first),ci(o=ui())&&(r.changePasswordTemplate=o.first),ci(o=ui())&&(r.requestPasswordChangeTemplate=o.first)}},decls:15,vars:1,consts:[["code",""],["signin",""],["requestPasswordChange",""],["changePassword",""],["signup",""],["input1",""],["input2",""],["input3",""],["input4",""],[1,"body"],[1,"login-container"],[1,"formModule"],[4,"ngTemplateOutlet"],[1,"addModuleSpan",3,"ngSubmit"],[1,"addModuleTitle"],[1,"addModuleInputSpan",2,"align-items","center"],["for","#input1",1,"inputLabel"],[1,"input-group"],["type","text","maxlength","1",3,"input","keyup.backspace","ngModelChange","ngModel","ngModelOptions"],["class","error-message",4,"ngIf"],[1,"additionalFuntions"],["type","button",3,"click"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],[1,"error-message"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],[1,"addModuleInputSpan"],["for","email",1,"inputLabel"],["formControlName","email","id","email","type","email",1,"addModuleInput"],["for","password",1,"inputLabel"],["formControlName","password","id","password","type","password",1,"addModuleInput"],[1,"inputLabel"],["formControlName","email","type","email",1,"addModuleInput"],["for","newPassword",1,"inputLabel"],["formControlName","newPassword","id","newPassword","type","password",1,"addModuleInput"],["for","repeatPassword",1,"inputLabel"],["formControlName","repeatPassword","id","repeatPassword","type","password",1,"addModuleInput"],["for","nickname",1,"inputLabel"],["formControlName","nickname","id","nickname","type","text",1,"addModuleInput"]],template:function(i,r){i&1&&(I(0,"span",9),ye(1,"app-navigation-panel"),I(2,"div",10)(3,"div",11),Pe(4,Ype,1,0,"ng-container",12),A()()(),Pe(5,Kpe,21,23,"ng-template",null,0,Qi)(7,tme,21,10,"ng-template",null,1,Qi)(9,ime,13,5,"ng-template",null,2,Qi)(11,sme,15,9,"ng-template",null,3,Qi)(13,dme,24,13,"ng-template",null,4,Qi)),i&2&&(z(4),$("ngTemplateOutlet",r.currentFormTemplate))},dependencies:[Gs,So,Is,Co,Ms,Ts,oI,Xo,Yo,ha,_h,hg,nI,Rn],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.body[_ngcontent-%COMP%]{padding:0;margin:0;min-height:100vh;display:flex;flex-direction:column;align-items:center;background-color:#000;background-size:cover;position:relative}.login-container[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:auto;padding:20px}.formModule[_ngcontent-%COMP%]{background-color:#000;border-radius:10px;padding:30px;width:calc(100% - 60px);box-shadow:0 0 5px #fff;border:1px solid rgba(255,255,255,.1)}.addModuleTitle[_ngcontent-%COMP%]{color:#dad7cd;text-align:center;font-size:2rem;margin-bottom:30px;font-weight:400}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;position:relative}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd;margin-bottom:8px;font-size:.9rem}.addModuleInput[_ngcontent-%COMP%]{background-color:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:5px;padding:12px 15px;color:#dad7cd;font-size:1rem;transition:all .3s ease}.addModuleInput[_ngcontent-%COMP%]:focus{outline:none;border-color:#a3b18a;box-shadow:0 0 0 2px #a3b18a33}.addModuleInput.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background-color:#ff6b6b1a}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.8rem;margin-top:5px}.input-group[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:20px}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;aspect-ratio:1;text-align:center;font-size:24px;font-family:Courier New,monospace;background:#ffffff1a;border:2px solid #A3B18A;border-radius:12px;color:#dad7cd;transition:all .3s ease;outline:none}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#b1bd9c;box-shadow:0 0 0 3px #a3b18a33;transform:translateY(-2px)}.input-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background:#ff6b6b1a;animation:_ngcontent-%COMP%_shake .5s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}20%,60%{transform:translate(-5px)}40%,80%{transform:translate(5px)}}.submitAddModuleFormBtn[_ngcontent-%COMP%]{width:100%;padding:15px;background-color:#a3b18a;color:#000;border:none;border-radius:5px;font-size:1rem;cursor:pointer;transition:all .3s ease;margin-top:10px}.submitAddModuleFormBtn[_ngcontent-%COMP%]:hover{background-color:#acb996}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#a3b18a80;cursor:not-allowed}.additionalFuntions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:20px 0}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#dad7cd;cursor:pointer;font-size:.9rem;padding:5px 0;position:relative}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:1px;background:#dad7cd;transition:width .3s}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:after{width:100%}@media (max-width: 768px){.formModule[_ngcontent-%COMP%]{padding:20px}.addModuleTitle[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:10px}.additionalFuntions[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}']})}return n})();var fme=["planHouse"],BR=n=>({disabled:n});function hme(n,e){n&1&&(I(0,"p",6),K(1,"\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u044D\u0442\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0441 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0445 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u0435\u043D. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440."),A())}function pme(n,e){if(n&1&&ye(0,"div",23),n&2){let t=e.$implicit;Fn("grid-area",t.gridArea)}}function mme(n,e){if(n&1){let t=yt();I(0,"button",16),Me("click",function(){let r=Le(t).index,o=ae(3);return ke(o.openProject(r))}),I(1,"span",17)(2,"h3",18),K(3),A(),I(4,"div",19),Pe(5,pme,1,2,"div",20),A()(),I(6,"button",21),Me("click",function(){let r=Le(t).index,o=ae(3);return ke(o.deleteProject(r))}),ye(7,"img",22),A()()}if(n&2){let t=e.$implicit;z(3),pn(t.name),z(2),$("ngForOf",t.rooms)}}function gme(n,e){if(n&1){let t=yt();I(0,"span",12),Pe(1,mme,8,2,"button",13),I(2,"button",14),Me("click",function(){Le(t);let r=ae(2);return ke(r.openAddModule())}),I(3,"h3"),K(4,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C"),A(),ye(5,"img",15),A()()}if(n&2){let t=ae(2);$("ngClass",xr(2,BR,t.currentProjectId!==void 0)),z(),$("ngForOf",t.accountData.projects)}}function vme(n,e){if(n&1){let t=yt();I(0,"button",24),Me("click",function(){Le(t);let r=ae(2);return ke(r.closeProject())}),ye(1,"img",15),A()}}function yme(n,e){if(n&1){let t=yt();I(0,"app-plan-house",25,0),Me("callSaveEmitter",function(){Le(t);let r=ae(2);return ke(r.saveProject())})("planHouseEmitter",function(r){Le(t);let o=ae(2);return ke(o.updatePlanData(r))}),A()}if(n&2){let t=ae(2);$("ngClass",xr(2,BR,t.currentProjectId===void 0))("planHouse",t.accountData.projects[t.currentProjectId].rooms)}}function _me(n,e){if(n&1&&(I(0,"span",7),Pe(1,gme,6,4,"span",8),I(2,"span",9),Pe(3,vme,2,0,"button",10)(4,yme,2,4,"app-plan-house",11),A()()),n&2){let t=ae();z(),$("ngIf",t.accountData!==void 0),z(),$("ngClass",xr(4,BR,t.currentProjectId===void 0)),z(),$("ngIf",t.getCurrentViewRoom()==null),z(),$("ngIf",t.currentProjectId!==void 0)}}function xme(n,e){if(n&1){let t=yt();I(0,"form",26),Me("ngSubmit",function(){Le(t);let r=ae();return ke(r.createProject())}),I(1,"button",27),Me("click",function(){Le(t);let r=ae();return ke(r.closeAddModule())}),ye(2,"img",28),A(),I(3,"span",29)(4,"h2",30),K(5,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043B\u0430\u043D\u0430"),A(),I(6,"span",31)(7,"label",32),K(8,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),A(),ye(9,"input",33),A(),I(10,"button",34),K(11,"Continue"),A()()()}if(n&2){let t=ae();$("formGroup",t.projectNameForm),z(10),$("disabled",!t.projectNameForm.valid)}}var Y0=(()=>{class n{accountService;accountCookieService;router;route;elemenetRef;renderer;projectService;notification;location;constructor(t,i,r,o,s,a,l,u,f){this.accountService=t,this.accountCookieService=i,this.router=r,this.route=o,this.elemenetRef=s,this.renderer=a,this.projectService=l,this.notification=u,this.location=f}hasRoomIdBeenProcessed=!1;addModule;currentPlanHouse;accountData;currentProjectId=void 0;planHouse;ngOnInit(){let t=this.accountCookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.pageInit(t)}ngAfterViewInit(){this.addModule=this.elemenetRef.nativeElement.querySelector(".addModule")}ngAfterViewChecked(){if(this.hasRoomIdBeenProcessed||!this.planHouse||!this.route.snapshot.params.roomId)return;let t=parseInt(this.route.snapshot.params.roomId);setTimeout(()=>{typeof t=="number"&&(this.planHouse.currentViewRoom=t,this.planHouse.currentIdClickedRoom=t,this.planHouse.openViewRoom(t),this.planHouse.sceneOpenToggle=!0,this.planHouse.guideTemplate=this.planHouse.roomGuideTemplate,this.hasRoomIdBeenProcessed=!0)},0)}pageInit(t){return Ge(this,null,function*(){try{this.accountData=(yield this.accountService.GETaccount(t)).accountData,this.route.paramMap.subscribe(i=>{if(i.get("planId")===null)return;let r=parseInt(i.get("planId"));this.accountData.projects.length>=r&&r>=0&&(this.currentProjectId=r)})}catch(i){console.log(i)}})}createProject(){return Ge(this,null,function*(){this.closeAddModule();let t=this.accountCookieService.getJwt();if(!(!this.projectNameForm.value||!this.projectNameForm.value.name||!t))try{let i=yield this.projectService.POSTcreateProject(t,this.projectNameForm.value.name);this.accountData.projects=[...this.accountData.projects,i.projectData],this.notification.setSuccess("\u041F\u0440\u043E\u0435\u043A\u0442 \u0441\u043E\u0437\u0434\u0430\u043D",5e3)}catch(i){console.log(i)}})}saveProject(){return Ge(this,null,function*(){if(this.currentProjectId===void 0)return;let t=this.accountData.projects[this.currentProjectId]._id,i=this.currentPlanHouse;if(i===void 0)return;let r=this.accountCookieService.getJwt();if(!r)return;let o={rooms:i,name:this.accountData.projects[this.currentProjectId].name};try{yield this.projectService.PUTupdateProject(r,t,o),this.notification.setSuccess("\u041F\u0440\u043E\u0435\u043A\u0442 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",5e3)}catch(s){console.log(s)}})}deleteProject(t){return Ge(this,null,function*(){let i=this.accountCookieService.getJwt(),r=this.accountData.projects[t]._id;!i||!r||(yield this.projectService.DELETEdeleteProject(i,r),this.notification.setSuccess("\u041F\u0440\u043E\u0435\u043A\u0442 \u0443\u0434\u0430\u043B\u0435\u043D",5e3),this.accountData.projects.splice(t,1))})}checkDesktop=vu;getCurrentViewRoom(){if(this.planHouse!==void 0)return this.planHouse.currentViewRoom}updatePlanData(t){this.currentPlanHouse=t,this.accountData.projects[this.currentProjectId].rooms=t}closeAddModule(){this.addModule&&this.renderer.addClass(this.addModule,"disabled")}openAddModule(){this.addModule&&this.renderer.removeClass(this.addModule,"disabled")}closeProject(){this.saveProject(),this.currentProjectId=void 0;let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t)}openProject(t){let i=this.location.path()+"/"+t;this.location.replaceState(i),this.currentProjectId=t}projectNameForm=new vi({name:new Mn("",[Tt.required])});static \u0275fac=function(i){return new(i||n)(ce(hl),ce(Pi),ce(wr),ce(er),ce(Kt),ce(Or),ce(Cp),ce(Di),ce(wo))};static \u0275cmp=dn({type:n,selectors:[["app-plan-house-page"]],viewQuery:function(i,r){if(i&1&&Mi(fme,5),i&2){let o;ci(o=ui())&&(r.planHouse=o.first)}},decls:6,vars:3,consts:[["planHouse",""],[1,"body"],["class","mobileAlert",4,"ngIf"],["class","functionalModule",4,"ngIf"],[1,"addModule","disabled"],["class","addModuleSpan",3,"formGroup","ngSubmit",4,"ngIf"],[1,"mobileAlert"],[1,"functionalModule"],["class","chooseProjectSpan",3,"ngClass",4,"ngIf"],[1,"planModule",3,"ngClass"],[3,"click",4,"ngIf"],[3,"ngClass","planHouse","callSaveEmitter","planHouseEmitter",4,"ngIf"],[1,"chooseProjectSpan",3,"ngClass"],["class","projectCard",3,"click",4,"ngFor","ngForOf"],[1,"addProjectCard","projectCard",3,"click"],["src","/assets/images/addIcon.svg","alt",""],[1,"projectCard",3,"click"],[1,"mainProjectInformation"],[1,"projectTitle"],[1,"projectSchem"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"deleteProjectBtn",3,"click"],["src","/assets/images/deleteIcon.svg","alt",""],[1,"room"],[3,"click"],[3,"callSaveEmitter","planHouseEmitter","ngClass","planHouse"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt",""],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","name",1,"inputLabel"],["formControlName","name","id","name","type","text",1,"addModuleInput"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"]],template:function(i,r){i&1&&(I(0,"span",1),ye(1,"app-navigation-panel"),Pe(2,hme,2,0,"p",2)(3,_me,5,6,"span",3),A(),I(4,"span",4),Pe(5,xme,12,2,"form",5),A()),i&2&&(z(2),$("ngIf",!r.checkDesktop()),z(),$("ngIf",r.checkDesktop()),z(2),$("ngIf",r.accountData))},dependencies:[Gs,gu,gi,Rn,So,Is,Co,Ms,Ts,Xo,Yo,Wo],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.planModule[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;flex-direction:row;gap:10px;width:100%;transition:all .5s ease-in-out}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:35px;height:35px;background:none;border:none;cursor:pointer}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}app-plan-house[_ngcontent-%COMP%]{width:90%}.body[_ngcontent-%COMP%]{background-color:#000;gap:60px;display:flex;flex-direction:column;align-items:center;min-height:100vh}.chooseProjectSpan[_ngcontent-%COMP%]{width:calc(100% - 60px);z-index:0;gap:10px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;transition:all .5s ease-in-out;grid-area:1/1/2/2}@media (max-width: 1024px){.chooseProjectSpan[_ngcontent-%COMP%]{justify-content:center}}.projectCard[_ngcontent-%COMP%]{width:45%;position:relative;aspect-ratio:4/3;display:flex;justify-content:space-between;align-items:center;flex-direction:column;gap:10px;border-radius:10px;border:none;box-shadow:0 0 10px #fff;background-color:#000;cursor:pointer;overflow:hidden}@media (max-width: 1024px){.projectCard[_ngcontent-%COMP%]{width:clamp(450px,70%,700px)}}.deleteProjectBtn[_ngcontent-%COMP%]{height:35px;align-self:flex-end;margin:10px;background:none;border:none;aspect-ratio:1;cursor:pointer}.mainProjectInformation[_ngcontent-%COMP%]{display:flex;height:90%;width:100%;flex-direction:column;align-items:center}.addProjectCard[_ngcontent-%COMP%]{justify-content:center;background-color:#344e41;box-shadow:none}.projectCard[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-size:2em;color:#fff}.addProjectCard[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.projectTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;font-weight:700;font-size:20px}.projectSchem[_ngcontent-%COMP%]{display:grid;height:80%;aspect-ratio:1;gap:7px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:5px}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.functionalModule[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;align-items:flex-start;justify-items:center;width:90vw}@media (max-width: 768px){.functionalModule[_ngcontent-%COMP%]{width:calc(100vw - 10px)}}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.dividerWithText[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.dividerLine[_ngcontent-%COMP%]{flex:1;height:2px;background-color:#1f1f1f}.dividerText[_ngcontent-%COMP%]{padding:0 10px;color:#666;font-size:14px;text-transform:uppercase}.mobileAlert[_ngcontent-%COMP%]{color:#fff;width:300px;font-size:20px}']})}return n})();function wme(n,e){if(n&1){let t=yt();I(0,"button",7),Me("click",function(){Le(t);let r=ae();return ke(r.deleteColor())}),ye(1,"img",8),A()}if(n&2){let t=ae();Fn("background-color",t.deleteColorCalculate())}}var tj=(()=>{class n{route;cookieService;furnitureCardService;serverImageControl;router;furnitureModelService;notification;routeSub=new mi;idPage;createFurnitureComponent;createFurnitureComponentRef;furnitureData={name:"",description:"",colors:[],shops:[],additionalData:{},proportions:{width:null,height:null,length:null}};constructor(t,i,r,o,s,a,l){this.route=t,this.cookieService=i,this.furnitureCardService=r,this.serverImageControl=o,this.router=s,this.furnitureModelService=a,this.notification=l}ngOnInit(){let t=this.cookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.routeSub=this.route.paramMap.subscribe(i=>{this.idPage=i.get("id")??"new",this.clearFurnitureCard(),this.idPage!=="new"&&this.pageInit(t)})}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe()}pageInit(t){return Ge(this,null,function*(){try{let i=yield this.furnitureCardService.GETfurnitureCard(this.idPage,t);if(i.authorMatched===!1){this.router.navigateByUrl("/create/new");return}this.furnitureData=i.furnitureCard,this.createFurnitureComponent.currentColorId=0}catch(i){console.error(i)}})}transformUrlArrayToBlob(t){return Ge(this,null,function*(){return yield Promise.all(t.map(r=>Ge(null,null,function*(){return yield(yield fetch(r.toString())).blob()})))})}deleteFurnitureCard(){return Ge(this,null,function*(){let t=this.cookieService.getJwt();if(t)try{yield this.furnitureModelService.DELETEfurnitureModel(t,this.idPage),yield this.serverImageControl.DELETEproject(t,this.idPage),yield this.furnitureCardService.DELETEfurnitureCard(t,this.idPage),this.router.navigateByUrl("/account")}catch(i){console.error(i)}})}createFurnitureCard(){return Ge(this,null,function*(){let t=this.cookieService.getJwt();if(!(!this.checkValid("create")||!t))try{let i=this.createFurnitureComponent.furnitureData,r=(yield this.furnitureCardService.POSTcreateFurnitureCard(i,t)).furnitureData._id;i.colors.forEach(s=>Ge(this,null,function*(){let l={images:yield this.transformUrlArrayToBlob(s.imagesData.images),idMainImage:s.imagesData.idMainImage};yield this.serverImageControl.POSTuploadProjectImages(s.color,l,t,r)}));let o=this.createFurnitureComponent.furnitureModelInput.files[0];this.furnitureModelService.POSTuploadFurnitureModel(o,t,r),this.notification.setSuccess("\u041C\u0435\u0431\u0435\u043B\u044C \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430",5e3),this.router.navigateByUrl("/account")}catch(i){console.error(i)}})}updateFurnitureCard(){return Ge(this,null,function*(){let t=this.cookieService.getJwt();if(!(!this.checkValid("update")||!t))try{let i=this.createFurnitureComponent.furnitureData;yield this.furnitureCardService.PUTupdateFurnitureCard(i,this.idPage,t),i.colors.forEach(o=>Ge(this,null,function*(){if(o.imagesData.images.length===0)return;let a={images:yield this.transformUrlArrayToBlob(o.imagesData.images),idMainImage:o.imagesData.idMainImage};yield this.serverImageControl.POSTuploadProjectImages(o.color,a,t,this.idPage)}));let r=this.createFurnitureComponent.furnitureModelInput.files;r[0]&&(yield this.furnitureModelService.POSTuploadFurnitureModel(r[0],t,this.idPage)),this.notification.setSuccess("\u041C\u0435\u0431\u0435\u043B\u044C \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430",5e3)}catch(i){console.error(i)}})}checkValid(t){let{colors:i,shops:r,proportions:o,name:s}=this.furnitureData,a=this.createFurnitureComponent.furnitureModelInput.files[0];if(i.length==0)return this.createFurnitureComponent.openColorModule(),!1;if(s.length==0){let l=this.createFurnitureComponentRef.nativeElement.querySelector(".furnitureTitle");return l&&l.focus(),this.notification.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",5e3),!1}if(!o.height||!o.width||!o.length)return this.createFurnitureComponent.openAdditional(),this.notification.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B",5e3),!1;if(!a&&t==="create"){let l=this.createFurnitureComponentRef.nativeElement.querySelector(".furnitureModelInput");return l&&l.click(),this.notification.setError("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 3D \u043C\u043E\u0434\u0435\u043B\u044C",5e3),!1}if(r.length==0)return this.createFurnitureComponent.openShopsModule(),this.notification.setError("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",5e3),!1;for(let l of i)if(l.imagesData.images.length==0&&t==="create"){let u=this.createFurnitureComponentRef.nativeElement.querySelector(".uploadImagesInput");return u&&u.click(),this.notification.setError("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",5e3),!1}return!0}clearFurnitureCard(){this.createFurnitureComponent&&(this.createFurnitureComponent.currentColorId=void 0),this.furnitureData={name:"",description:"",colors:[],shops:[],additionalData:{},proportions:{width:null,height:null,length:null}}}deleteColorCalculate(){if(!(!this.createFurnitureComponent||this.createFurnitureComponent.currentColorId===void 0))return this.createFurnitureComponent.furnitureData.colors[this.createFurnitureComponent.currentColorId].color}deleteColor(){if(this.createFurnitureComponent.furnitureData.colors.length<=1){this.notification.setError("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0435\u0449\u0435 \u0446\u0432\u0435\u0442",500);return}this.createFurnitureComponent.deleteColor()}getCurrentColorId(){if(this.createFurnitureComponent)return this.createFurnitureComponent.currentColorId}static \u0275fac=function(i){return new(i||n)(ce(er),ce(Pi),ce(nl),ce(dl),ce(wr),ce(bp),ce(Di))};static \u0275cmp=dn({type:n,selectors:[["app-create-furniture-page"]],viewQuery:function(i,r){if(i&1&&(Mi(Dh,5),Mi(Dh,5,Kt)),i&2){let o;ci(o=ui())&&(r.createFurnitureComponent=o.first),ci(o=ui())&&(r.createFurnitureComponentRef=o.first)}},decls:9,vars:7,consts:[[1,"body"],[3,"furnitureData"],[1,"functionalBtns"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0446\u0432\u0435\u0442","class","functionalBtn deleteBtn deleteColorBtn colorCircle",3,"background-color","click",4,"ngIf"],[1,"functionalBtn","confirmBtn",3,"click"],[1,"functionalBtn","deleteBtn",3,"title"],["alt","",3,"click","src"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0446\u0432\u0435\u0442",1,"functionalBtn","deleteBtn","deleteColorBtn","colorCircle",3,"click"],["src","/assets/images/cancelIcon.svg","alt","x","srcset",""]],template:function(i,r){i&1&&(I(0,"span",0),ye(1,"app-navigation-panel")(2,"app-create-furniture",1),I(3,"span",2),Pe(4,wme,2,2,"button",3),I(5,"button",4),Me("click",function(){return r.idPage==="new"?r.createFurnitureCard():r.updateFurnitureCard()}),K(6),A(),I(7,"button",5)(8,"img",6),Me("click",function(){return r.idPage==="new"?r.clearFurnitureCard():r.deleteFurnitureCard()}),A()()()()),i&2&&(z(2),$("furnitureData",r.furnitureData),z(2),$("ngIf",r.getCurrentColorId()!==void 0),z(2),cr(" ",r.idPage==="new"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C":"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"," "),z(),$("title",r.idPage==="new"?"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u043E\u0440\u043C\u0443":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443 \u043C\u0435\u0431\u0435\u043B\u0438"),z(),Fn("rotate",r.idPage==="new"?"45deg":"0deg"),$("src","assets/images/"+(r.idPage==="new"?"addIcon.svg":"deleteIcon.svg"),Pr))},dependencies:[Gs,Dh,Rn],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}button[_ngcontent-%COMP%]{transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.body[_ngcontent-%COMP%]{min-height:100vh;background-color:#000;width:100vw;display:flex;flex-direction:column;align-items:center}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}app-navigation-panel[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%]{width:80%}.functionalBtns[_ngcontent-%COMP%]{margin-top:20px;width:clamp(300px,30vw,400px);display:flex;height:50px;gap:10px;justify-content:center;margin-bottom:30px;z-index:1}.functionalBtn[_ngcontent-%COMP%]{height:100%;border-radius:10px;background-color:#344e41;border:none;cursor:pointer}.confirmBtn[_ngcontent-%COMP%]{width:75%;color:#fff;background-color:#344e41;padding:15px}.deleteBtn[_ngcontent-%COMP%]{aspect-ratio:1;padding:1em;display:flex;align-items:center;justify-content:center}.colorCircle[_ngcontent-%COMP%]{border-radius:100%;height:100%;aspect-ratio:1;display:flex;align-items:center;justify-content:center;transition:all .3s ease-in-out;box-shadow:0 0 5px #fff}.colorCircle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;height:50%}.deleteColorBtn[_ngcontent-%COMP%]{padding:5px;background-color:transparent}@media (max-width: 1440px){app-create-furniture[_ngcontent-%COMP%]{width:90%}}@media (max-width: 600px){.body[_ngcontent-%COMP%]{width:100vw;padding:0 10px;box-sizing:border-box}app-navigation-panel[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%]{width:100%}.functionalBtns[_ngcontent-%COMP%]{width:100%;max-width:400px;gap:5px}.confirmBtn[_ngcontent-%COMP%]{width:100%;padding:10px}}']})}return n})();var Oa=(()=>{class n{constructor(){this.change$=new Ln}ngOnChanges(){this.change$.next()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=_t({type:n,standalone:!1,features:[Ji]})}}return n})();var bme={iconCleaner:"@tui.x",hintOnDisabled:!1},ONe=ld(bme);var Cme=Yn(()=>new Sme),Sme=(()=>{class n extends Oa{constructor(){super(...arguments),this.appearance=""}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldAppearance",""]],inputs:{appearance:[0,"tuiTextfieldAppearance","appearance"]},standalone:!1,features:[bn([ma(Cme,n)]),On]})}}return n})(),Eme=Yn(()=>new Mme),Mme=(()=>{class n extends Oa{constructor(){super(...arguments),this.cleaner=!1}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldCleaner",""]],inputs:{cleaner:[0,"tuiTextfieldCleaner","cleaner"]},standalone:!1,features:[bn([ma(Eme,n)]),On]})}}return n})(),Tme=Yn(()=>new Ime),Ime=(()=>{class n extends Oa{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldCustomContent",""]],inputs:{customContent:[0,"tuiTextfieldCustomContent","customContent"]},standalone:!1,features:[bn([ma(Tme,n)]),On]})}}return n})(),Ame=Yn(()=>new Dme),Dme=(()=>{class n extends Oa{constructor(){super(...arguments),this.filler=""}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldFiller",""]],inputs:{filler:[0,"tuiTextfieldFiller","filler"]},standalone:!1,features:[bn([ma(Ame,n)]),On]})}}return n})(),Rme=Yn(()=>new Pme),Pme=(()=>{class n extends Oa{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldIcon",""]],inputs:{icon:[0,"tuiTextfieldIcon","icon"]},standalone:!1,features:[bn([ma(Rme,n)]),On]})}}return n})(),Ome=Yn(()=>new Fme),Fme=(()=>{class n extends Oa{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldIconLeft",""]],inputs:{iconStart:[0,"tuiTextfieldIconLeft","iconStart"]},standalone:!1,features:[bn([ma(Ome,n)]),On]})}}return n})(),Nme=Yn(()=>new Lme),Lme=(()=>{class n extends Oa{constructor(){super(...arguments),this.labelOutside=!1}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldLabelOutside",""]],inputs:{labelOutside:[0,"tuiTextfieldLabelOutside","labelOutside"]},standalone:!1,features:[bn([ma(Nme,n)]),On]})}}return n})(),kme=Yn(()=>new Ume),Ume=(()=>{class n extends Oa{constructor(){super(...arguments),this.postfix=""}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldPostfix",""]],inputs:{postfix:[0,"tuiTextfieldPostfix","postfix"]},standalone:!1,features:[bn([ma(kme,n)]),On]})}}return n})(),Bme=Yn(()=>new Vme),Vme=(()=>{class n extends Oa{constructor(){super(...arguments),this.prefix=""}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldPrefix",""]],inputs:{prefix:[0,"tuiTextfieldPrefix","prefix"]},standalone:!1,features:[bn([ma(Bme,n)]),On]})}}return n})(),zme=Yn(()=>new Hme),Hme=(()=>{class n extends Oa{constructor(){super(...arguments),this.size="l"}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Pn(n)))(r||n)}})()}static{this.\u0275dir=_t({type:n,selectors:[["","tuiTextfieldSize",""]],inputs:{size:[0,"tuiTextfieldSize","size"]},standalone:!1,features:[bn([ma(zme,n)]),On]})}}return n})(),nj=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=_r({type:n})}static{this.\u0275inj=yr({})}}return n})(),FNe=ld();var RC=(()=>{class n{httpModule;baseServiceUrl=di+"shop";abortController=null;constructor(t){this.httpModule=t}GETgetCategoryData(t,i,r){return Ge(this,null,function*(){this.abortController&&this.abortController.abort(),this.abortController=new AbortController;try{let o=`${this.baseServiceUrl}?category=${t}&startRange=${i}`;if(r&&Object.keys(r).length>0){let f=new URLSearchParams;f.append("filters",JSON.stringify(r)),o+=`&${new URLSearchParams(f).toString()}`}let s=yield fetch(o,{signal:this.abortController.signal});if(!s.ok){let f=yield s.text();throw new Error(`\u041E\u0448\u0438\u0431\u043A\u0430: ${s.status} \u2014 ${f}`)}let u=(yield s.json()).resultsArray.map(f=>Ve(q({},f),{previewUrl:di+f.previewUrl}));return{resultsArray:u,resultsClientFiltersData:this.getFindOptionsByResult(u)}}catch(o){throw o.name==="AbortError"||console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0440\u043E\u0441\u0430:",o),o}})}getFindOptionsByResult(t){let i={colors:[],minCost:1/0,maxCost:-1/0};return t.forEach(r=>{r.cost<i.minCost&&(i.minCost=r.cost),r.cost>i.maxCost&&(i.maxCost=r.cost),i.colors.push(...r.colors)}),i.minCost=i.minCost!==1/0?i.minCost:0,i.maxCost=i.maxCost!==-1/0?i.maxCost:0,i.colors=[...new Set(i.colors)],i}static \u0275fac=function(i){return new(i||n)(He(Gi))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Gme=n=>({disabled:n}),Wme=n=>({fieldData:n});function $me(n,e){if(n&1&&(I(0,"h1",10),K(1),A()),n&2){let t=ae();z(),cr(" ",t.currentCategoryId!==void 0?t.categoryArray[t.currentCategoryId].translateMany:"\u0412\u0441\u0435","")}}function qme(n,e){if(n&1){let t=yt();I(0,"span",14)(1,"button",15),Me("click",function(){Le(t);let r=ae(2);return ke(r.closeFurniture())}),ye(2,"img",16),A(),I(3,"span",17),ye(4,"app-view-furniture",18),I(5,"button",19),Me("click",function(){Le(t);let r=ae(2);return ke(r.openAddModule())}),K(6,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),A()()()}if(n&2){let t=ae(2);z(4),$("furnitureCardId",t.furnitureCardId)}}function Xme(n,e){n&1&&ye(0,"app-finder")}function Yme(n,e){if(n&1){let t=yt();I(0,"button",37),Me("click",function(){let r=Le(t).index,o=ae(3);return ke(o.changeCategory(r))}),K(1),A()}if(n&2){let t=e.$implicit,i=e.index,r=ae(3);Dn("active",r.currentCategoryId===i),z(),cr(" ",t.translateOne," ")}}function Zme(n,e){n&1&&(I(0,"strong",38),K(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u0430"),A())}function Kme(n,e){n&1&&ye(0,"img",41)}function Jme(n,e){if(n&1){let t=yt();I(0,"button",39),Me("click",function(){let r=Le(t).$implicit,o=ae(3);return ke(o.selectedColors.includes(r)?o.deleteSelectedColor(r):o.addSelectedColor(r))}),Pe(1,Kme,1,0,"img",40),A()}if(n&2){let t=e.$implicit,i=ae(3);Fn("background-color",t),z(),$("ngIf",i.selectedColors.includes(t))}}function Qme(n,e){n&1&&fa(0)}function ege(n,e){if(n&1&&(I(0,"span",43)(1,"strong",23),K(2),A(),Pe(3,Qme,1,0,"ng-container",44),A()),n&2){let t=e.$implicit;ae(4);let i=zi(10),r=zi(12);z(2),pn(t.name),z(),$("ngTemplateOutlet",t.type==="select"?i:r)("ngTemplateOutletContext",xr(3,Wme,t))}}function tge(n,e){if(n&1&&(ua(0),Pe(1,ege,4,5,"span",42),da()),n&2){let t=ae(3);z(),$("ngForOf",t.categoryArray[t.currentCategoryId].filters)}}function nge(n,e){if(n&1){let t=yt();I(0,"button",45),Me("click",function(){Le(t);let r=ae(3);return ke(r.requestWithFilters())}),K(1," \u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B "),A()}}function ige(n,e){if(n&1&&(I(0,"div",46)(1,"h2",47),K(2),A(),ye(3,"img",48),I(4,"a",49),K(5),_o(6,"costFormat"),A()()),n&2){let t,i=e.$implicit,r=ae(3);z(2),pn(i.name),z(),$("src",i.previewUrl,Pr),z(),$("routerLink",r.checkDesktop()?"/shop/"+((t=r.categoryName)!==null&&t!==void 0?t:"all")+"/"+i.furnitureCardId:"/plan"),z(),pn(xo(6,4,i.cost))}}function rge(n,e){n&1&&(I(0,"span",50)(1,"strong"),K(2,"\u041C\u0435\u0431\u0435\u043B\u044C \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"),A(),ye(3,"img",51),A())}function oge(n,e){if(n&1){let t=yt();I(0,"span",20)(1,"span",21),Pe(2,Xme,1,0,"app-finder",22),I(3,"strong",23),K(4,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F"),A(),I(5,"span",24),Pe(6,Yme,2,3,"button",25),I(7,"button",26),Me("click",function(){Le(t);let r=ae(2);return ke(r.changeCategory(void 0))}),K(8," \u0412\u0441\u0435 "),A()(),I(9,"strong",23),K(10,"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C"),A(),I(11,"form",27),ye(12,"input",28)(13,"hr")(14,"input",29),A(),Pe(15,Zme,2,0,"strong",30),I(16,"strong",23),K(17,"\u0426\u0432\u0435\u0442"),A(),I(18,"span",31),Pe(19,Jme,2,3,"button",32),A(),Pe(20,tge,2,1,"ng-container",22)(21,nge,2,0,"button",33),A(),I(22,"span",34),Pe(23,ige,7,6,"div",35)(24,rge,4,0,"span",36),A()()}if(n&2){let t=ae(2);z(2),$("ngIf",t.checkViewport()),z(4),$("ngForOf",t.categoryArray),z(),Dn("active",t.currentCategoryId==null),z(4),$("formGroup",t.costForm),z(),$("placeholder","\u043E\u0442 "+t.clientFiltersObject.minCost),z(2),$("placeholder","\u0434\u043E "+t.clientFiltersObject.maxCost),z(),$("ngIf",!t.costForm.valid),z(4),$("ngForOf",t.clientFiltersObject.colors),z(),$("ngIf",t.currentCategoryId!==void 0),z(),$("ngIf",t.currentCategoryId!==void 0),z(2),$("ngForOf",t.getClientFilteredFurnitures())("ngForTrackBy",t.trackByFn),z(),$("ngIf",t.getClientFilteredFurnitures().length===0)}}function sge(n,e){if(n&1&&(I(0,"span",11),Pe(1,qme,7,1,"span",12)(2,oge,25,14,"span",13),A()),n&2){let t=ae();z(),$("ngIf",t.furnitureCardId),z(),$("ngIf",!t.furnitureCardId)}}function age(n,e){if(n&1&&(I(0,"a",58),K(1),A()),n&2){let t=e.$implicit,i=e.index,r=ae().index,o=ae(2);$("routerLink",o.getPlanUrl(r,i)),z(),pn(t.name)}}function lge(n,e){if(n&1&&(I(0,"span")(1,"h3",56),K(2),A(),Pe(3,age,2,2,"a",57),A()),n&2){let t=e.$implicit;z(2),pn(t.name),z(),$("ngForOf",t.rooms)}}function cge(n,e){n&1&&(I(0,"a",59),K(1,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D"),A())}function uge(n,e){if(n&1&&(I(0,"span",52)(1,"h2",53),K(2,"\u041F\u0440\u043E\u0435\u043A\u0442\u044B"),A(),Pe(3,lge,4,2,"span",54)(4,cge,2,0,"a",55),A()),n&2){let t=ae();z(3),$("ngForOf",t.accountProjects),z(),$("ngIf",t.accountProjects.length==0)}}function dge(n,e){n&1&&ye(0,"img",41)}function fge(n,e){if(n&1){let t=yt();I(0,"button",62),Me("click",function(){let r=Le(t).$implicit,o=ae(2).fieldData,s=ae();return ke(s.queryGroup[o.field].includes(r.queryValue)?s.deleteSelectedOption(r.queryValue,o.field):s.addSelectedOption(r.queryValue,o.field))}),Pe(1,dge,1,0,"img",40),I(2,"p"),K(3),A()()}if(n&2){let t=e.$implicit,i=ae(2).fieldData,r=ae();z(),$("ngIf",r.queryGroup[i.field].includes(t.queryValue)),z(2),pn(t.name)}}function hge(n,e){if(n&1&&(ua(0),I(1,"span",60),Pe(2,fge,4,2,"button",61),A(),da()),n&2){let t=ae().fieldData;z(2),$("ngForOf",t.options)}}function pge(n,e){if(n&1&&Pe(0,hge,3,1,"ng-container",22),n&2){let t=e.fieldData,i=ae();$("ngIf",i.queryGroup[t.field])}}function mge(n,e){if(n&1&&(ua(0),I(1,"form",27),ye(2,"input",63)(3,"hr")(4,"input",64),A(),da()),n&2){let t=ae().fieldData,i=ae();z(),$("formGroup",i.queryGroup[t.field])}}function gge(n,e){if(n&1&&Pe(0,mge,5,1,"ng-container",22),n&2){let t=e.fieldData,i=ae();$("ngIf",i.queryGroup[t.field])}}var PC=(()=>{class n{route;shopService;router;accountService;accountCookieService;notification;categoryService;location;elementRef;finderService;furnitureNameSubscription;funritureName="";queryGroup={};furnitureCardId;categoryName;accountProjects;currentCategoryId;furnituresArray=[];openAddModuleToggle=!1;categoryArray=[];clientFiltersObject;selectedColors=[];constructor(t,i,r,o,s,a,l,u,f,h){this.route=t,this.shopService=i,this.router=r,this.accountService=o,this.accountCookieService=s,this.notification=a,this.categoryService=l,this.location=u,this.elementRef=f,this.finderService=h}ngOnInit(){return Ge(this,null,function*(){this.clearClientFilters(),this.processRouteParams(),this.furnitureNameSubscription=this.finderService.furnitureName$.subscribe(i=>{this.furnituresArray=[],this.funritureName=i,this.requestFurnitures(this.categoryName??"all",0,this.handleQueryData())});let t=this.accountCookieService.getJwt();if(t)try{this.accountProjects=(yield this.accountService.GETaccount(t)).accountData.projects}catch(i){console.log(i)}})}ngOnDestroy(){this.furnitureNameSubscription.unsubscribe()}initCategories(){return Ge(this,null,function*(){try{this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray,this.categoryArray.forEach((t,i)=>{this.categoryName===t.name&&(this.currentCategoryId=i,this.initQueryGroup())})}catch(t){console.log(t)}})}furnituresInit(){return Ge(this,null,function*(){this.categoryName!==void 0?yield this.requestFurnitures(this.categoryName,0):yield this.requestFurnitures("all",0),this.setScrollObserver()})}requestFurnitures(t,i,r){return Ge(this,null,function*(){let o=yield this.shopService.GETgetCategoryData(t,i,r);console.log(o),this.furnituresArray=[...this.furnituresArray,...o.resultsArray],this.clientFiltersObject=o.resultsClientFiltersData})}clearClientFilters(){this.clientFiltersObject={colors:[],minCost:0,maxCost:0}}initQueryGroup(){this.currentCategoryId!==void 0&&(this.queryGroup={},this.categoryArray[this.currentCategoryId].filters.forEach(t=>{t&&t.type==="select"?this.queryGroup[t.field]=[]:this.queryGroup[t.field]=new vi({min:new Mn(null,[this.numberOrEmptyValidator]),max:new Mn(null,[this.numberOrEmptyValidator])})}))}numberOrEmptyValidator(t){let i=t.value;return i==null||i===""?null:isNaN(i)||i<0?{notNumber:!0}:null}processRouteParams(){let t=this.route.snapshot.params;this.furnitureCardId=t.furnitureCardId,this.categoryName=t.category,console.log("route"),this.initCategories()}setScrollObserver(){let t=this.elementRef.nativeElement.querySelector(".category"),i=t.querySelectorAll(".furnitureItem"),r=0,o={root:t,rootMargin:"0px",threshold:.5},s=(l,u)=>{l.forEach(f=>Ge(this,null,function*(){if(f.isIntersecting){let h=f.target;(Array.from(i).indexOf(h)+1)%8===0&&!h.dataset.observed&&(h.dataset.observed="true",r++,this.categoryName!==void 0?yield this.requestFurnitures(this.categoryName,this.furnituresArray.length,this.handleQueryData()):yield this.requestFurnitures("all",this.furnituresArray.length,this.handleQueryData()))}}))},a=new IntersectionObserver(s,o);i.forEach(l=>a.observe(l))}checkViewport(){return window.innerWidth<=768}requestWithFilters(){this.furnituresArray.length=0,this.requestFurnitures(this.categoryName??"all",0,this.handleQueryData())}handleQueryData(){let t={};return this.funritureName.length>0&&(t.name=this.funritureName),Object.keys(this.queryGroup).forEach(i=>{if(this.queryGroup[i]instanceof vi){if(!this.queryGroup[i].valid)return;let{min:r,max:o}=this.queryGroup[i].value;(+r>0||+o>0)&&(t[i]={min:+r,max:+o})}else this.queryGroup[i].length>0&&(t[i]=this.queryGroup[i])}),console.log(t),t}addSelectedColor(t){this.selectedColors.push(t)}deleteSelectedColor(t){let i=this.selectedColors.findIndex(r=>r===t);this.selectedColors.splice(i,1)}addSelectedOption(t,i){this.queryGroup[i]&&this.queryGroup[i].push(t)}deleteSelectedOption(t,i){if(!this.queryGroup[i])return;let r=this.queryGroup[i].findIndex(o=>o===t);this.queryGroup[i].splice(r,1)}openAddModule(){this.openAddModuleToggle=!0}closeAddModule(){this.openAddModuleToggle=!1}checkDesktop=vu;changeCategory(t){this.furnituresArray.length=0,this.currentCategoryId=t;let i="/shop";t!==void 0?(this.categoryName=this.categoryArray[t].name,i+="/"+this.categoryArray[t].name):this.categoryName=void 0,this.location.replaceState(i),this.furnituresInit(),this.initQueryGroup()}closeFurniture(){this.router.navigateByUrl("/shop"+(this.categoryName==="all"?"":"/"+this.categoryName))}getPlanUrl(t,i){return`/plan/${t}/${i}/${this.furnitureCardId}`}trackByFn(t,i){return i.id}getClientFilteredFurnitures(){return this.costForm.valid?this.furnituresArray.filter(t=>{let i=this.selectedColors.length===0||[...new Set([...t.colors,...this.selectedColors])].length<t.colors.length+this.selectedColors.length,{minCost:r,maxCost:o}=this.costForm.value,s=+(r||-1/0)<=t.cost&&t.cost<=+(o||1/0);return i&&s}):[]}costForm=new vi({minCost:new Mn(null,[this.numberOrEmptyValidator]),maxCost:new Mn(null,[this.numberOrEmptyValidator])});static \u0275fac=function(i){return new(i||n)(ce(er),ce(RC),ce(wr),ce(hl),ce(Pi),ce(Di),ce(Ah),ce(wo),ce(Kt),ce(Sp))};static \u0275cmp=dn({type:n,selectors:[["app-shop-page"]],features:[bn([])],decls:13,vars:6,consts:[["selectFilter",""],["rangeFilter",""],[1,"body"],["class","categoryTitle","title","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",4,"ngIf"],["class","shopModule",4,"ngIf"],[1,"addModule",3,"ngClass"],[1,"addModuleSpan"],["type","button","title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],["class","addModuleFormContent",4,"ngIf"],["title","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",1,"categoryTitle"],[1,"shopModule"],["class","viewFurnitureSpan",4,"ngIf"],["class","mainArea",4,"ngIf"],[1,"viewFurnitureSpan"],["title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"closeFurniture",3,"click"],["src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"furnitureCard"],[3,"furnitureCardId"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",1,"chooseAddProjectBtn",3,"click"],[1,"mainArea"],[1,"params"],[4,"ngIf"],[1,"paramsChapterTitle"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",3,"active","click",4,"ngFor","ngForOf"],["title","\u0412\u0441\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",1,"furnitureCategoryButton",3,"click"],[1,"rangeInputsSpan",3,"formGroup"],["formControlName","minCost","type","text",1,"rangeInput",3,"placeholder"],["formControlName","maxCost","type","text",1,"rangeInput",3,"placeholder"],["class","paramsError",4,"ngIf"],[1,"colorsChooseSpan"],["class","colorItem",3,"background-color","click",4,"ngFor","ngForOf"],["class","useFiltersBtn",3,"click",4,"ngIf"],[1,"category"],["class","furnitureItem",4,"ngFor","ngForOf","ngForTrackBy"],["class","noItemsMsgSpan",4,"ngIf"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",1,"furnitureCategoryButton",3,"click"],[1,"paramsError"],[1,"colorItem",3,"click"],["src","/assets/images/cancelIcon.svg","alt","x","srcset","",4,"ngIf"],["src","/assets/images/cancelIcon.svg","alt","x","srcset",""],["class","categoryFilter",4,"ngFor","ngForOf"],[1,"categoryFilter"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"useFiltersBtn",3,"click"],[1,"furnitureItem"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle"],["loading","lazy","alt","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438","title","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438",1,"furniturePreview",3,"src"],["title","\u0426\u0435\u043D\u0430 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureLink",3,"routerLink"],[1,"noItemsMsgSpan"],["src","/assets/images/furnitureIcon.svg","alt","","srcset",""],[1,"addModuleFormContent"],["title","\u041F\u0440\u043E\u0435\u043A\u0442\u044B",1,"addModuleTitle"],[4,"ngFor","ngForOf"],["routerLink","/plan","class","noProjectsBtn","title","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D",4,"ngIf"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B",3,"routerLink",4,"ngFor","ngForOf"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B",3,"routerLink"],["routerLink","/plan","title","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D",1,"noProjectsBtn"],[1,"selectFilterOptionsSpan"],["class","selectFilterOption",3,"click",4,"ngFor","ngForOf"],[1,"selectFilterOption",3,"click"],["placeholder","\u043E\u0442","formControlName","min","type","text",1,"rangeInput"],["placeholder","\u0434\u043E","formControlName","max","type","text",1,"rangeInput"]],template:function(i,r){if(i&1){let o=yt();I(0,"span",2),ye(1,"app-navigation-panel"),Pe(2,$me,2,1,"h1",3)(3,sge,3,2,"span",4),A(),I(4,"span",5)(5,"span",6)(6,"button",7),Me("click",function(){return Le(o),ke(r.closeAddModule())}),ye(7,"img",8),A(),Pe(8,uge,5,2,"span",9),A()(),Pe(9,pge,1,1,"ng-template",null,0,Qi)(11,gge,1,1,"ng-template",null,1,Qi)}i&2&&(z(2),$("ngIf",!r.furnitureCardId),z(),$("ngIf",r.furnituresArray),z(),$("ngClass",xr(4,Gme,!r.openAddModuleToggle)),z(4),$("ngIf",r.accountProjects))},dependencies:[TC,So,Is,Co,Ms,Ts,Xo,Yo,ha,_h,Gs,gi,Rn,rw,Es,Wo,Jc,nj],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.furnitureLink[_ngcontent-%COMP%], .furnitureCategoryButton[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.furnitureLink[_ngcontent-%COMP%]:hover, .furnitureCategoryButton[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px;z-index:10}app-finder[_ngcontent-%COMP%]{width:calc(100% - 20px)}.body[_ngcontent-%COMP%]{min-height:calc(100vh - 30px);background-color:#000;display:flex;align-items:center;flex-direction:column;gap:30px;padding-bottom:30px}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;color:#fff;cursor:pointer;border:none}.shopModule[_ngcontent-%COMP%]{width:90%;margin:0 auto;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;z-index:1}.category[_ngcontent-%COMP%]{width:75%;height:60vh;transition:all .5s ease-in-out;overflow-y:scroll;display:flex;flex-wrap:wrap;justify-content:space-around;z-index:1}.categoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.params[_ngcontent-%COMP%]{width:20%;min-width:230px;display:flex;flex-direction:column;gap:10px}.params[_ngcontent-%COMP%]   .paramsChapterTitle[_ngcontent-%COMP%]{color:#fff}.params[_ngcontent-%COMP%]   .paramsError[_ngcontent-%COMP%]{color:red}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);max-width:60%;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:space-between}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%;border-radius:10px}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:100%;justify-content:start;padding-top:5px;padding-right:5px;max-height:300px;overflow-y:scroll;margin-bottom:10px}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#a3b18a;color:#000}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;flex-shrink:0;color:#fff;cursor:pointer;border:none}.closeFurniture[_ngcontent-%COMP%]{background:none;border:none;width:35px;aspect-ratio:1;align-self:flex-start;cursor:pointer;grid-area:1/1/2/2;z-index:2}.closeFurniture[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}.viewFurnitureSpan[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;gap:10px;grid-area:1/1/2/2}.mainArea[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex}app-view-furniture[_ngcontent-%COMP%]{width:95%}.furnitureCard[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%;display:flex;flex-direction:column;align-items:center;z-index:1}.chooseAddProjectBtn[_ngcontent-%COMP%]{width:clamp(250px,35%,320px);padding:15px;background-color:#a3b18a;color:#dad7cd;border-radius:10px;border:none;cursor:pointer}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;align-items:center;gap:15px;box-shadow:0 0 10px #fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.disabled[_ngcontent-%COMP%]{opacity:0;z-index:0}.addModuleFormContent[_ngcontent-%COMP%]{padding-top:20px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px;color:#dad7cd;border-radius:10px;text-decoration:none;text-align:center}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{background-color:#a3b18a;width:calc(100% - 20px);margin-bottom:0;cursor:default}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background-color:#344e41;width:calc(80% - 20px);align-self:end;margin-top:5px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.noProjectsBtn[_ngcontent-%COMP%]{color:#dad7cd;text-align:center;width:50%;padding:15px 10px;background-color:#344e41;border-radius:10px;text-decoration:none;transition:background-color .3s ease-in-out}.noProjectsBtn[_ngcontent-%COMP%]:hover{background-color:#a3b18a}.rangeInputsSpan[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;flex-direction:row;color:#fff;align-items:center}.rangeInputsSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:10px;height:2px;background-color:#fff;border:none}.rangeInputsSpan[_ngcontent-%COMP%]   .rangeInput[_ngcontent-%COMP%]{width:45%;border-radius:10px;padding:10px;border:2px solid #A3B18A;outline:none;background-color:#fff}.useFiltersBtn[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:10px;border:none;background-color:#344e41;color:#fff;cursor:pointer;transition:transform .2s ease-in-out}.useFiltersBtn[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.categoryFilter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:100%}.noItemsMsgSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;height:fit-content;align-self:center;align-items:center}.noItemsMsgSpan[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#dad7cd;font-size:30px}.noItemsMsgSpan[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.selectFilterOptionsSpan[_ngcontent-%COMP%]{display:flex;width:100%;gap:5px;flex-wrap:wrap}.selectFilterOptionsSpan[_ngcontent-%COMP%]   .selectFilterOption[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;width:fit-content;padding:10px;border-radius:50px;border:none;outline:none;background-color:#dad7cd;cursor:pointer;transition:transform .2s ease-in-out}.selectFilterOptionsSpan[_ngcontent-%COMP%]   .selectFilterOption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.selectFilterOptionsSpan[_ngcontent-%COMP%]   .selectFilterOption[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:17px;aspect-ratio:1}.selectFilterOptionsSpan[_ngcontent-%COMP%]   .selectFilterOption[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.colorsChooseSpan[_ngcontent-%COMP%]{display:flex;width:100%;flex-wrap:wrap;gap:5px}.colorsChooseSpan[_ngcontent-%COMP%]   .colorItem[_ngcontent-%COMP%]{width:35px;aspect-ratio:1;outline:none;border:none;display:flex;align-items:center;justify-content:center;border-radius:50%;cursor:pointer;transition:transform .2s ease-in-out}.colorsChooseSpan[_ngcontent-%COMP%]   .colorItem[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.colorsChooseSpan[_ngcontent-%COMP%]   .colorItem[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;aspect-ratio:1}@media (max-width: 768px){.category[_ngcontent-%COMP%], .params[_ngcontent-%COMP%], .furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{width:100%}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(20% - 5px)}.mainArea[_ngcontent-%COMP%]{flex-direction:column}.furnitureItem[_ngcontent-%COMP%]{flex:auto;width:100%;max-width:none}}@media (max-width: 600px){.category[_ngcontent-%COMP%]{max-height:50vh;margin-top:15px}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(25% - 5px)}.chooseAddProjectBtn[_ngcontent-%COMP%]{width:calc(100% - 20px);max-width:400px}}@media (max-width: 500px){.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(33% - 5px)}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{max-height:250px}}@media (max-width: 370px){.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(50% - 5px)}}']})}return n})();var ij=[{component:K5,path:""},{component:Q5,path:"account"},{component:ej,path:"login"},{component:Y0,path:"plan"},{component:Y0,path:"plan/:planId"},{component:Y0,path:"plan/:planId/:roomId"},{component:Y0,path:"plan/:planId/:roomId/:furnitureCardId"},{component:tj,path:"create/:id"},{component:PC,path:"shop",data:{pageName:"shop"}},{component:PC,path:"shop/:category",data:{pageName:"shop"}},{component:PC,path:"shop/:category/:furnitureCardId",data:{pageName:"shop"}},{path:"**",redirectTo:"",pathMatch:"full"}];var vge=(()=>{class n extends Kc{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(He(mn),He(fd),He(hd))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})();function yge(){return new Gx}function _ge(n,e,t){return new Jx(n,e,t)}var rj=[{provide:hd,useFactory:yge},{provide:Kc,useClass:vge},{provide:Uc,useFactory:_ge,deps:[Om,Kc,Qn]}],c2e=[{provide:fd,useClass:BI},{provide:bT,useValue:"NoopAnimations"},...rj],xge=[{provide:fd,useFactory:()=>new Zx},{provide:bT,useFactory:()=>"BrowserAnimations"},...rj];function oj(){return Xu("NgEagerAnimations"),[...xge]}var wge=(n,e)=>({appearBody:n,disappearBody:e});function bge(n,e){n&1&&ye(0,"img",6)}function Cge(n,e){if(n&1){let t=yt();I(0,"span",7)(1,"button",8),Me("click",function(){Le(t);let r=ae();return ke(r.reloadPage())}),ye(2,"img",9),A(),I(3,"button",8),Me("click",function(){Le(t);let r=ae();return ke(r.logout())}),ye(4,"img",10),A()()}}var VR=(()=>{class n{notificationService;cookieService;constructor(t,i){this.notificationService=t,this.cookieService=i}errorMessage;successMessage;ngOnInit(){this.notificationService.error$.subscribe(t=>{this.errorMessage=t}),this.notificationService.success$.subscribe(t=>{this.successMessage=t})}reloadPage(){window.location.reload()}logout(){this.cookieService.deleteJwt(),this.cookieService.deleteAccountType(),this.reloadPage()}static \u0275fac=function(i){return new(i||n)(ce(Di),ce(Pi))};static \u0275cmp=dn({type:n,selectors:[["app-notification"]],decls:8,vars:11,consts:[[1,"body",3,"ngClass"],["loading","lazy","style","width: 30px; height: 30px","src","/assets/images/successIcon.svg","alt","",4,"ngIf"],[1,"textSpan"],[1,"title"],[1,"errorMessage"],["class","btnsSpan",4,"ngIf"],["loading","lazy","src","/assets/images/successIcon.svg","alt","",2,"width","30px","height","30px"],[1,"btnsSpan"],[1,"solutionBtn",3,"click"],["loading","lazy","src","/assets/images/reloadIcon.svg","alt",""],["loading","lazy","src","/assets/images/logoutIcon.svg","alt",""]],template:function(i,r){i&1&&(I(0,"span",0),Pe(1,bge,1,0,"img",1),I(2,"span",2)(3,"h2",3),K(4),A(),I(5,"h3",4),K(6),A()(),Pe(7,Cge,5,0,"span",5),A()),i&2&&($("ngClass",S_(8,wge,r.errorMessage||r.successMessage,!r.errorMessage&&!r.successMessage)),lr("tab-index",r.errorMessage||r.successMessage?1:-1),z(),$("ngIf",r.successMessage),z(3),pn(r.errorMessage?"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A":"\u0423\u0441\u043F\u0435\u0448\u043D\u043E"),z(),Fn("color",r.errorMessage?"red":"green"),z(),pn(r.errorMessage||r.successMessage),z(),$("ngIf",r.errorMessage))},dependencies:[Wo,Rn],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{border-radius:10px;border:1px solid rgba(163,177,138,.3);background-color:#000;width:350px;display:flex;flex-direction:row;padding:0 10px;justify-content:space-around;align-items:center;position:fixed;bottom:-100px;opacity:0;left:50%;transform:translate(-50%);transition:all .5s ease-in-out;z-index:10}.appearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_appearHandler .5s forwards}.disappearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_disappearHandler .5s forwards;z-index:-10}.textSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;padding:10px 0;font-size:105%;width:60%;justify-content:center}.title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:17px}.errorMessage[_ngcontent-%COMP%]{margin:0;width:100%;font-weight:400;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.solutionBtn[_ngcontent-%COMP%]{width:100%;height:100%;background:none;margin:0;border:none;cursor:pointer}.solutionBtn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}.btnsSpan[_ngcontent-%COMP%]{display:flex;justify-self:flex-end;width:26%}@keyframes _ngcontent-%COMP%_appearHandler{0%{opacity:0;bottom:-100px}to{opacity:1;bottom:50px}}@keyframes _ngcontent-%COMP%_disappearHandler{0%{opacity:1;bottom:50px}to{opacity:0;bottom:-100px}}']})}return n})();function Sge(n,e){if(n&1){let t=yt();I(0,"div",2)(1,"div",3)(2,"div",4),K(3),A(),I(4,"div",5),K(5),A()(),I(6,"div",6),vm(),I(7,"svg",7),ye(8,"circle",8)(9,"circle",9),A(),ym(),I(10,"button",10),Me("click",function(){let r=Le(t).$implicit,o=ae();return ke(o.cancel(r.id))}),ye(11,"img",11),A()()()}if(n&2){let t=e.$implicit,i=ae();Fn("display",i.checkDesktop()||t.status!=="success"?"flex":"none"),z(3),pn(t.name),z(2),pn(t.status),z(4),lr("stroke-dasharray",i.circumference)("stroke-dashoffset",i.circumference-t.progress/100*i.circumference),z(),Fn("opacity",i.checkDesktop()?0:1),$("title",t.status==="uploading"?"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0443":"\u0423\u0431\u0440\u0430\u0442\u044C \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430")}}var sj=(()=>{class n{uploadService;constructor(t){this.uploadService=t}circumference=2*Math.PI*18;cancel(t){console.log("Cancel upload",t)}checkDesktop=vu;static \u0275fac=function(i){return new(i||n)(ce(EC))};static \u0275cmp=dn({type:n,selectors:[["app-upload-overlay"]],decls:3,vars:3,consts:[[1,"upload-overlay"],["class","upload-item",3,"display",4,"ngFor","ngForOf"],[1,"upload-item"],[1,"file-info"],[1,"file-name"],[1,"file-status"],[1,"progress-wrapper"],["width","40","height","40","viewBox","0 0 40 40",1,"progress-circle"],["cx","20","cy","20","r","18","stroke-width","4","fill","none",1,"progress-bg"],["cx","20","cy","20","r","18","stroke-width","4","fill","none",1,"progress-bar"],[1,"cancel-btn",3,"click","title"],["src","/assets/images/addIcon.svg","alt","Cancel"]],template:function(i,r){i&1&&(I(0,"span",0),Pe(1,Sge,12,9,"div",1),_o(2,"async"),A()),i&2&&(z(),$("ngForOf",xo(2,1,r.uploadService.uploads$)))},dependencies:[gi,Mm],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.upload-overlay[_ngcontent-%COMP%]{position:fixed;bottom:1rem;right:1rem;width:250px;z-index:9999;font-size:14px;display:flex;flex-direction:column;gap:5px}@media (max-width: 500px){.upload-overlay[_ngcontent-%COMP%]{right:calc(50% - 125px);left:calc(50% - 125px)}}.upload-item[_ngcontent-%COMP%]{margin-bottom:.5rem;border:2px solid #A3B18A;padding:1rem;border-radius:10px;background:#000;display:flex;justify-content:space-between;align-items:center;gap:1rem}.file-info[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;max-width:65%}.file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:700;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-info[_ngcontent-%COMP%]   .file-status[_ngcontent-%COMP%]{color:#a3b18a;font-size:12px}.progress-wrapper[_ngcontent-%COMP%]{position:relative;width:40px;height:40px}.progress-wrapper[_ngcontent-%COMP%]   svg.progress-circle[_ngcontent-%COMP%]{transform:rotate(-90deg);width:40px;height:40px;border-radius:50%}.progress-wrapper[_ngcontent-%COMP%]   svg.progress-circle[_ngcontent-%COMP%]   .progress-bg[_ngcontent-%COMP%]{stroke:#dad7cd}.progress-wrapper[_ngcontent-%COMP%]   svg.progress-circle[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{stroke:#344e41;box-shadow:0 0 5px #344e41;transition:stroke-dashoffset .3s ease;stroke-linecap:round}.progress-wrapper[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:28px;height:28px;padding:0;border:none;background:transparent;cursor:pointer;transform:translate(-50%,-50%);opacity:0;transition:opacity .3s ease}.progress-wrapper[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;height:50%;object-fit:contain;box-sizing:border-box;margin-bottom:-3px;rotate:45deg}.progress-wrapper[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{opacity:1!important}']})}return n})();var OC=(()=>{class n{title="HouseQuality";static \u0275fac=function(i){return new(i||n)};static \u0275cmp=dn({type:n,selectors:[["app-root"]],features:[bn([tw,VR,hl,Ep,Pi,dl,Cp,gu,MC,nl,bp,RC,Sp,Location])],decls:3,vars:0,template:function(i,r){i&1&&ye(0,"router-outlet")(1,"app-notification")(2,"app-upload-overlay")},dependencies:[tg,VR,sj],encapsulation:2})}return n})();var aj=(()=>{class n{notification;constructor(t){this.notification=t}intercept(t,i){return i.handle(t).pipe(ea(r=>(this.notification.setError(r.error.message,5e3),Fc(()=>r))))}static \u0275fac=function(i){return new(i||n)(He(Di))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})();var zR={providers:[X1(ij),DL(),oj(),g1(v1()),FL(),{provide:L_,useClass:aj,multi:!0}]};Nm(OC,zR).catch(n=>console.error(n));Nm(OC,zR).then(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/model-scw.js",{scope:"/"}).then(n=>{}).catch(n=>{})}).catch(n=>console.error(n));
