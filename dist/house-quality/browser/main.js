var B7=Object.create;var oS=Object.defineProperty,V7=Object.defineProperties,H7=Object.getOwnPropertyDescriptor,z7=Object.getOwnPropertyDescriptors,j7=Object.getOwnPropertyNames,jv=Object.getOwnPropertySymbols,G7=Object.getPrototypeOf,sS=Object.prototype.hasOwnProperty,l4=Object.prototype.propertyIsEnumerable;var a4=(n,e,t)=>e in n?oS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,we=(n,e)=>{for(var t in e||={})sS.call(e,t)&&a4(n,t,e[t]);if(jv)for(var t of jv(e))l4.call(e,t)&&a4(n,t,e[t]);return n},ft=(n,e)=>V7(n,z7(e));var ju=(n,e)=>{var t={};for(var i in n)sS.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&jv)for(var i of jv(n))e.indexOf(i)<0&&l4.call(n,i)&&(t[i]=n[i]);return t};var c4=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var W7=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of j7(e))!sS.call(n,r)&&r!==t&&oS(n,r,{get:()=>e[r],enumerable:!(i=H7(e,r))||i.enumerable});return n};var aS=(n,e,t)=>(t=n!=null?B7(G7(n)):{},W7(e||!n||!n.__esModule?oS(t,"default",{value:n,enumerable:!0}):t,n));var _t=(n,e,t)=>new Promise((i,r)=>{var o=l=>{try{a(t.next(l))}catch(u){r(u)}},s=l=>{try{a(t.throw(l))}catch(u){r(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var wI=c4((Yh,Zg)=>{"use strict";(function(){var n,e="4.17.21",t=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",u=1,f=2,h=4,p=1,g=2,v=1,x=2,y=4,_=8,T=16,M=32,C=64,H=128,L=256,k=512,$=30,N="...",A=800,j=16,he=1,ae=2,Re=3,Se=1/0,Y=9007199254740991,ie=17976931348623157e292,X=NaN,_e=4294967295,Ve=_e-1,rt=_e>>>1,ge=[["ary",H],["bind",v],["bindKey",x],["curry",_],["curryRight",T],["flip",k],["partial",M],["partialRight",C],["rearg",L]],re="[object Arguments]",B="[object Array]",J="[object AsyncFunction]",xe="[object Boolean]",se="[object Date]",je="[object DOMException]",We="[object Error]",Ue="[object Function]",at="[object GeneratorFunction]",wt="[object Map]",pt="[object Number]",z="[object Null]",nn="[object Object]",$e="[object Promise]",Nt="[object Proxy]",Ke="[object RegExp]",Xt="[object Set]",vt="[object String]",F="[object Symbol]",S="[object Undefined]",oe="[object WeakMap]",Ce="[object WeakSet]",Pe="[object ArrayBuffer]",fe="[object DataView]",Ye="[object Float32Array]",Ze="[object Float64Array]",bt="[object Int8Array]",Mt="[object Int16Array]",ke="[object Int32Array]",ot="[object Uint8Array]",Ct="[object Uint8ClampedArray]",At="[object Uint16Array]",st="[object Uint32Array]",vn=/\b__p \+= '';/g,Yt=/\b(__p \+=) '' \+/g,Xn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,Qe=/[&<>"']/g,pe=RegExp(Z.source),De=RegExp(Qe.source),it=/<%-([\s\S]+?)%>/g,Je=/<%([\s\S]+?)%>/g,Ut=/<%=([\s\S]+?)%>/g,ui=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xi=/^\w*$/,Nn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,br=/[\\^$.*+?()[\]{}|]/g,So=RegExp(br.source),Ou=/^\s+/,Ua=/\s/,gs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Lc=/\{\n\/\* \[wrapped with (.+)\] \*/,Zs=/,? & /,kc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vs=/[()=,{}\[\]\/\s]/,nv=/\\(\\)?/g,cf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jp=/\w*$/,iv=/^[-+]0x[0-9a-f]+$/i,XM=/^0b[01]+$/i,YM=/^\[object .+?Constructor\]$/,ZM=/^0o[0-7]+$/i,KM=/^(?:0|[1-9]\d*)$/,JM=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,uf=/($^)/,I=/['\n\r\u2028\u2029\\]/g,Q="\\ud800-\\udfff",le="\\u0300-\\u036f",ue="\\ufe20-\\ufe2f",te="\\u20d0-\\u20ff",Be=le+ue+te,et="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",mt="\\xac\\xb1\\xd7\\xf7",Vt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Bt="\\u2000-\\u206f",St=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",En="A-Z\\xc0-\\xd6\\xd8-\\xde",Un="\\ufe0e\\ufe0f",Ii=mt+Vt+Bt+St,vi="['\u2019]",Fn="["+Q+"]",Et="["+Ii+"]",ki="["+Be+"]",Bn="\\d+",qo="["+et+"]",Ml="["+lt+"]",jr="[^"+Q+Ii+Bn+et+lt+En+"]",Cl="\\ud83c[\\udffb-\\udfff]",yi="(?:"+ki+"|"+Cl+")",oo="[^"+Q+"]",Gr="(?:\\ud83c[\\udde6-\\uddff]){2}",dr="[\\ud800-\\udbff][\\udc00-\\udfff]",Yi="["+En+"]",df="\\u200d",Ba="(?:"+Ml+"|"+jr+")",z5="(?:"+Yi+"|"+jr+")",YR="(?:"+vi+"(?:d|ll|m|re|s|t|ve))?",ZR="(?:"+vi+"(?:D|LL|M|RE|S|T|VE))?",KR=yi+"?",JR="["+Un+"]?",j5="(?:"+df+"(?:"+[oo,Gr,dr].join("|")+")"+JR+KR+")*",G5="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",W5="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",QR=JR+KR+j5,$5="(?:"+[qo,Gr,dr].join("|")+")"+QR,q5="(?:"+[oo+ki+"?",ki,Gr,dr,Fn].join("|")+")",X5=RegExp(vi,"g"),Y5=RegExp(ki,"g"),QM=RegExp(Cl+"(?="+Cl+")|"+q5+QR,"g"),Z5=RegExp([Yi+"?"+Ml+"+"+YR+"(?="+[Et,Yi,"$"].join("|")+")",z5+"+"+ZR+"(?="+[Et,Yi+Ba,"$"].join("|")+")",Yi+"?"+Ba+"+"+YR,Yi+"+"+ZR,W5,G5,Bn,$5].join("|"),"g"),K5=RegExp("["+df+Q+Be+Un+"]"),J5=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Q5=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],e8=-1,Mi={};Mi[Ye]=Mi[Ze]=Mi[bt]=Mi[Mt]=Mi[ke]=Mi[ot]=Mi[Ct]=Mi[At]=Mi[st]=!0,Mi[re]=Mi[B]=Mi[Pe]=Mi[xe]=Mi[fe]=Mi[se]=Mi[We]=Mi[Ue]=Mi[wt]=Mi[pt]=Mi[nn]=Mi[Ke]=Mi[Xt]=Mi[vt]=Mi[oe]=!1;var _i={};_i[re]=_i[B]=_i[Pe]=_i[fe]=_i[xe]=_i[se]=_i[Ye]=_i[Ze]=_i[bt]=_i[Mt]=_i[ke]=_i[wt]=_i[pt]=_i[nn]=_i[Ke]=_i[Xt]=_i[vt]=_i[F]=_i[ot]=_i[Ct]=_i[At]=_i[st]=!0,_i[We]=_i[Ue]=_i[oe]=!1;var t8={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},n8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i8={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},r8={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},o8=parseFloat,s8=parseInt,eP=typeof global=="object"&&global&&global.Object===Object&&global,a8=typeof self=="object"&&self&&self.Object===Object&&self,Mr=eP||a8||Function("return this")(),eC=typeof Yh=="object"&&Yh&&!Yh.nodeType&&Yh,Nu=eC&&typeof Zg=="object"&&Zg&&!Zg.nodeType&&Zg,tP=Nu&&Nu.exports===eC,tC=tP&&eP.process,ys=function(){try{var K=Nu&&Nu.require&&Nu.require("util").types;return K||tC&&tC.binding&&tC.binding("util")}catch{}}(),nP=ys&&ys.isArrayBuffer,iP=ys&&ys.isDate,rP=ys&&ys.isMap,oP=ys&&ys.isRegExp,sP=ys&&ys.isSet,aP=ys&&ys.isTypedArray;function Xo(K,be,de){switch(de.length){case 0:return K.call(be);case 1:return K.call(be,de[0]);case 2:return K.call(be,de[0],de[1]);case 3:return K.call(be,de[0],de[1],de[2])}return K.apply(be,de)}function l8(K,be,de,dt){for(var Zt=-1,Wn=K==null?0:K.length;++Zt<Wn;){var fr=K[Zt];be(dt,fr,de(fr),K)}return dt}function _s(K,be){for(var de=-1,dt=K==null?0:K.length;++de<dt&&be(K[de],de,K)!==!1;);return K}function c8(K,be){for(var de=K==null?0:K.length;de--&&be(K[de],de,K)!==!1;);return K}function lP(K,be){for(var de=-1,dt=K==null?0:K.length;++de<dt;)if(!be(K[de],de,K))return!1;return!0}function Uc(K,be){for(var de=-1,dt=K==null?0:K.length,Zt=0,Wn=[];++de<dt;){var fr=K[de];be(fr,de,K)&&(Wn[Zt++]=fr)}return Wn}function rv(K,be){var de=K==null?0:K.length;return!!de&&ff(K,be,0)>-1}function nC(K,be,de){for(var dt=-1,Zt=K==null?0:K.length;++dt<Zt;)if(de(be,K[dt]))return!0;return!1}function Ci(K,be){for(var de=-1,dt=K==null?0:K.length,Zt=Array(dt);++de<dt;)Zt[de]=be(K[de],de,K);return Zt}function Bc(K,be){for(var de=-1,dt=be.length,Zt=K.length;++de<dt;)K[Zt+de]=be[de];return K}function iC(K,be,de,dt){var Zt=-1,Wn=K==null?0:K.length;for(dt&&Wn&&(de=K[++Zt]);++Zt<Wn;)de=be(de,K[Zt],Zt,K);return de}function u8(K,be,de,dt){var Zt=K==null?0:K.length;for(dt&&Zt&&(de=K[--Zt]);Zt--;)de=be(de,K[Zt],Zt,K);return de}function rC(K,be){for(var de=-1,dt=K==null?0:K.length;++de<dt;)if(be(K[de],de,K))return!0;return!1}var d8=oC("length");function f8(K){return K.split("")}function h8(K){return K.match(kc)||[]}function cP(K,be,de){var dt;return de(K,function(Zt,Wn,fr){if(be(Zt,Wn,fr))return dt=Wn,!1}),dt}function ov(K,be,de,dt){for(var Zt=K.length,Wn=de+(dt?1:-1);dt?Wn--:++Wn<Zt;)if(be(K[Wn],Wn,K))return Wn;return-1}function ff(K,be,de){return be===be?S8(K,be,de):ov(K,uP,de)}function p8(K,be,de,dt){for(var Zt=de-1,Wn=K.length;++Zt<Wn;)if(dt(K[Zt],be))return Zt;return-1}function uP(K){return K!==K}function dP(K,be){var de=K==null?0:K.length;return de?aC(K,be)/de:X}function oC(K){return function(be){return be==null?n:be[K]}}function sC(K){return function(be){return K==null?n:K[be]}}function fP(K,be,de,dt,Zt){return Zt(K,function(Wn,fr,di){de=dt?(dt=!1,Wn):be(de,Wn,fr,di)}),de}function m8(K,be){var de=K.length;for(K.sort(be);de--;)K[de]=K[de].value;return K}function aC(K,be){for(var de,dt=-1,Zt=K.length;++dt<Zt;){var Wn=be(K[dt]);Wn!==n&&(de=de===n?Wn:de+Wn)}return de}function lC(K,be){for(var de=-1,dt=Array(K);++de<K;)dt[de]=be(de);return dt}function g8(K,be){return Ci(be,function(de){return[de,K[de]]})}function hP(K){return K&&K.slice(0,vP(K)+1).replace(Ou,"")}function Yo(K){return function(be){return K(be)}}function cC(K,be){return Ci(be,function(de){return K[de]})}function Gp(K,be){return K.has(be)}function pP(K,be){for(var de=-1,dt=K.length;++de<dt&&ff(be,K[de],0)>-1;);return de}function mP(K,be){for(var de=K.length;de--&&ff(be,K[de],0)>-1;);return de}function v8(K,be){for(var de=K.length,dt=0;de--;)K[de]===be&&++dt;return dt}var y8=sC(t8),_8=sC(n8);function w8(K){return"\\"+r8[K]}function x8(K,be){return K==null?n:K[be]}function hf(K){return K5.test(K)}function b8(K){return J5.test(K)}function M8(K){for(var be,de=[];!(be=K.next()).done;)de.push(be.value);return de}function uC(K){var be=-1,de=Array(K.size);return K.forEach(function(dt,Zt){de[++be]=[Zt,dt]}),de}function gP(K,be){return function(de){return K(be(de))}}function Vc(K,be){for(var de=-1,dt=K.length,Zt=0,Wn=[];++de<dt;){var fr=K[de];(fr===be||fr===l)&&(K[de]=l,Wn[Zt++]=de)}return Wn}function sv(K){var be=-1,de=Array(K.size);return K.forEach(function(dt){de[++be]=dt}),de}function C8(K){var be=-1,de=Array(K.size);return K.forEach(function(dt){de[++be]=[dt,dt]}),de}function S8(K,be,de){for(var dt=de-1,Zt=K.length;++dt<Zt;)if(K[dt]===be)return dt;return-1}function E8(K,be,de){for(var dt=de+1;dt--;)if(K[dt]===be)return dt;return dt}function pf(K){return hf(K)?D8(K):d8(K)}function Ks(K){return hf(K)?I8(K):f8(K)}function vP(K){for(var be=K.length;be--&&Ua.test(K.charAt(be)););return be}var T8=sC(i8);function D8(K){for(var be=QM.lastIndex=0;QM.test(K);)++be;return be}function I8(K){return K.match(QM)||[]}function A8(K){return K.match(Z5)||[]}var R8=function K(be){be=be==null?Mr:Hc.defaults(Mr.Object(),be,Hc.pick(Mr,Q5));var de=be.Array,dt=be.Date,Zt=be.Error,Wn=be.Function,fr=be.Math,di=be.Object,dC=be.RegExp,P8=be.String,ws=be.TypeError,av=de.prototype,O8=Wn.prototype,mf=di.prototype,lv=be["__core-js_shared__"],cv=O8.toString,Kn=mf.hasOwnProperty,N8=0,yP=function(){var c=/[^.]+$/.exec(lv&&lv.keys&&lv.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),uv=mf.toString,F8=cv.call(di),L8=Mr._,k8=dC("^"+cv.call(Kn).replace(br,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dv=tP?be.Buffer:n,zc=be.Symbol,fv=be.Uint8Array,_P=dv?dv.allocUnsafe:n,hv=gP(di.getPrototypeOf,di),wP=di.create,xP=mf.propertyIsEnumerable,pv=av.splice,bP=zc?zc.isConcatSpreadable:n,Wp=zc?zc.iterator:n,Fu=zc?zc.toStringTag:n,mv=function(){try{var c=Vu(di,"defineProperty");return c({},"",{}),c}catch{}}(),U8=be.clearTimeout!==Mr.clearTimeout&&be.clearTimeout,B8=dt&&dt.now!==Mr.Date.now&&dt.now,V8=be.setTimeout!==Mr.setTimeout&&be.setTimeout,gv=fr.ceil,vv=fr.floor,fC=di.getOwnPropertySymbols,H8=dv?dv.isBuffer:n,MP=be.isFinite,z8=av.join,j8=gP(di.keys,di),hr=fr.max,Wr=fr.min,G8=dt.now,W8=be.parseInt,CP=fr.random,$8=av.reverse,hC=Vu(be,"DataView"),$p=Vu(be,"Map"),pC=Vu(be,"Promise"),gf=Vu(be,"Set"),qp=Vu(be,"WeakMap"),Xp=Vu(di,"create"),yv=qp&&new qp,vf={},q8=Hu(hC),X8=Hu($p),Y8=Hu(pC),Z8=Hu(gf),K8=Hu(qp),_v=zc?zc.prototype:n,Yp=_v?_v.valueOf:n,SP=_v?_v.toString:n;function E(c){if(Ui(c)&&!en(c)&&!(c instanceof Tn)){if(c instanceof xs)return c;if(Kn.call(c,"__wrapped__"))return EO(c)}return new xs(c)}var yf=function(){function c(){}return function(d){if(!Ai(d))return{};if(wP)return wP(d);c.prototype=d;var m=new c;return c.prototype=n,m}}();function wv(){}function xs(c,d){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}E.templateSettings={escape:it,evaluate:Je,interpolate:Ut,variable:"",imports:{_:E}},E.prototype=wv.prototype,E.prototype.constructor=E,xs.prototype=yf(wv.prototype),xs.prototype.constructor=xs;function Tn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function J8(){var c=new Tn(this.__wrapped__);return c.__actions__=Eo(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Eo(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Eo(this.__views__),c}function Q8(){if(this.__filtered__){var c=new Tn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function ej(){var c=this.__wrapped__.value(),d=this.__dir__,m=en(c),w=d<0,b=m?c.length:0,R=fG(0,b,this.__views__),U=R.start,G=R.end,ee=G-U,Ee=w?G:U-1,Te=this.__iteratees__,Fe=Te.length,tt=0,xt=Wr(ee,this.__takeCount__);if(!m||!w&&b==ee&&xt==ee)return YP(c,this.__actions__);var Ft=[];e:for(;ee--&&tt<xt;){Ee+=d;for(var fn=-1,Lt=c[Ee];++fn<Fe;){var bn=Te[fn],An=bn.iteratee,Jo=bn.type,lo=An(Lt);if(Jo==ae)Lt=lo;else if(!lo){if(Jo==he)continue e;break e}}Ft[tt++]=Lt}return Ft}Tn.prototype=yf(wv.prototype),Tn.prototype.constructor=Tn;function Lu(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var w=c[d];this.set(w[0],w[1])}}function tj(){this.__data__=Xp?Xp(null):{},this.size=0}function nj(c){var d=this.has(c)&&delete this.__data__[c];return this.size-=d?1:0,d}function ij(c){var d=this.__data__;if(Xp){var m=d[c];return m===s?n:m}return Kn.call(d,c)?d[c]:n}function rj(c){var d=this.__data__;return Xp?d[c]!==n:Kn.call(d,c)}function oj(c,d){var m=this.__data__;return this.size+=this.has(c)?0:1,m[c]=Xp&&d===n?s:d,this}Lu.prototype.clear=tj,Lu.prototype.delete=nj,Lu.prototype.get=ij,Lu.prototype.has=rj,Lu.prototype.set=oj;function Sl(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var w=c[d];this.set(w[0],w[1])}}function sj(){this.__data__=[],this.size=0}function aj(c){var d=this.__data__,m=xv(d,c);if(m<0)return!1;var w=d.length-1;return m==w?d.pop():pv.call(d,m,1),--this.size,!0}function lj(c){var d=this.__data__,m=xv(d,c);return m<0?n:d[m][1]}function cj(c){return xv(this.__data__,c)>-1}function uj(c,d){var m=this.__data__,w=xv(m,c);return w<0?(++this.size,m.push([c,d])):m[w][1]=d,this}Sl.prototype.clear=sj,Sl.prototype.delete=aj,Sl.prototype.get=lj,Sl.prototype.has=cj,Sl.prototype.set=uj;function El(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var w=c[d];this.set(w[0],w[1])}}function dj(){this.size=0,this.__data__={hash:new Lu,map:new($p||Sl),string:new Lu}}function fj(c){var d=Ov(this,c).delete(c);return this.size-=d?1:0,d}function hj(c){return Ov(this,c).get(c)}function pj(c){return Ov(this,c).has(c)}function mj(c,d){var m=Ov(this,c),w=m.size;return m.set(c,d),this.size+=m.size==w?0:1,this}El.prototype.clear=dj,El.prototype.delete=fj,El.prototype.get=hj,El.prototype.has=pj,El.prototype.set=mj;function ku(c){var d=-1,m=c==null?0:c.length;for(this.__data__=new El;++d<m;)this.add(c[d])}function gj(c){return this.__data__.set(c,s),this}function vj(c){return this.__data__.has(c)}ku.prototype.add=ku.prototype.push=gj,ku.prototype.has=vj;function Js(c){var d=this.__data__=new Sl(c);this.size=d.size}function yj(){this.__data__=new Sl,this.size=0}function _j(c){var d=this.__data__,m=d.delete(c);return this.size=d.size,m}function wj(c){return this.__data__.get(c)}function xj(c){return this.__data__.has(c)}function bj(c,d){var m=this.__data__;if(m instanceof Sl){var w=m.__data__;if(!$p||w.length<t-1)return w.push([c,d]),this.size=++m.size,this;m=this.__data__=new El(w)}return m.set(c,d),this.size=m.size,this}Js.prototype.clear=yj,Js.prototype.delete=_j,Js.prototype.get=wj,Js.prototype.has=xj,Js.prototype.set=bj;function EP(c,d){var m=en(c),w=!m&&zu(c),b=!m&&!w&&qc(c),R=!m&&!w&&!b&&bf(c),U=m||w||b||R,G=U?lC(c.length,P8):[],ee=G.length;for(var Ee in c)(d||Kn.call(c,Ee))&&!(U&&(Ee=="length"||b&&(Ee=="offset"||Ee=="parent")||R&&(Ee=="buffer"||Ee=="byteLength"||Ee=="byteOffset")||Al(Ee,ee)))&&G.push(Ee);return G}function TP(c){var d=c.length;return d?c[SC(0,d-1)]:n}function Mj(c,d){return Nv(Eo(c),Uu(d,0,c.length))}function Cj(c){return Nv(Eo(c))}function mC(c,d,m){(m!==n&&!Qs(c[d],m)||m===n&&!(d in c))&&Tl(c,d,m)}function Zp(c,d,m){var w=c[d];(!(Kn.call(c,d)&&Qs(w,m))||m===n&&!(d in c))&&Tl(c,d,m)}function xv(c,d){for(var m=c.length;m--;)if(Qs(c[m][0],d))return m;return-1}function Sj(c,d,m,w){return jc(c,function(b,R,U){d(w,b,m(b),U)}),w}function DP(c,d){return c&&Ha(d,Cr(d),c)}function Ej(c,d){return c&&Ha(d,Do(d),c)}function Tl(c,d,m){d=="__proto__"&&mv?mv(c,d,{configurable:!0,enumerable:!0,value:m,writable:!0}):c[d]=m}function gC(c,d){for(var m=-1,w=d.length,b=de(w),R=c==null;++m<w;)b[m]=R?n:ZC(c,d[m]);return b}function Uu(c,d,m){return c===c&&(m!==n&&(c=c<=m?c:m),d!==n&&(c=c>=d?c:d)),c}function bs(c,d,m,w,b,R){var U,G=d&u,ee=d&f,Ee=d&h;if(m&&(U=b?m(c,w,b,R):m(c)),U!==n)return U;if(!Ai(c))return c;var Te=en(c);if(Te){if(U=pG(c),!G)return Eo(c,U)}else{var Fe=$r(c),tt=Fe==Ue||Fe==at;if(qc(c))return JP(c,G);if(Fe==nn||Fe==re||tt&&!b){if(U=ee||tt?{}:vO(c),!G)return ee?iG(c,Ej(U,c)):nG(c,DP(U,c))}else{if(!_i[Fe])return b?c:{};U=mG(c,Fe,G)}}R||(R=new Js);var xt=R.get(c);if(xt)return xt;R.set(c,U),$O(c)?c.forEach(function(Lt){U.add(bs(Lt,d,m,Lt,c,R))}):GO(c)&&c.forEach(function(Lt,bn){U.set(bn,bs(Lt,d,m,bn,c,R))});var Ft=Ee?ee?LC:FC:ee?Do:Cr,fn=Te?n:Ft(c);return _s(fn||c,function(Lt,bn){fn&&(bn=Lt,Lt=c[bn]),Zp(U,bn,bs(Lt,d,m,bn,c,R))}),U}function Tj(c){var d=Cr(c);return function(m){return IP(m,c,d)}}function IP(c,d,m){var w=m.length;if(c==null)return!w;for(c=di(c);w--;){var b=m[w],R=d[b],U=c[b];if(U===n&&!(b in c)||!R(U))return!1}return!0}function AP(c,d,m){if(typeof c!="function")throw new ws(r);return im(function(){c.apply(n,m)},d)}function Kp(c,d,m,w){var b=-1,R=rv,U=!0,G=c.length,ee=[],Ee=d.length;if(!G)return ee;m&&(d=Ci(d,Yo(m))),w?(R=nC,U=!1):d.length>=t&&(R=Gp,U=!1,d=new ku(d));e:for(;++b<G;){var Te=c[b],Fe=m==null?Te:m(Te);if(Te=w||Te!==0?Te:0,U&&Fe===Fe){for(var tt=Ee;tt--;)if(d[tt]===Fe)continue e;ee.push(Te)}else R(d,Fe,w)||ee.push(Te)}return ee}var jc=iO(Va),RP=iO(yC,!0);function Dj(c,d){var m=!0;return jc(c,function(w,b,R){return m=!!d(w,b,R),m}),m}function bv(c,d,m){for(var w=-1,b=c.length;++w<b;){var R=c[w],U=d(R);if(U!=null&&(G===n?U===U&&!Ko(U):m(U,G)))var G=U,ee=R}return ee}function Ij(c,d,m,w){var b=c.length;for(m=ln(m),m<0&&(m=-m>b?0:b+m),w=w===n||w>b?b:ln(w),w<0&&(w+=b),w=m>w?0:XO(w);m<w;)c[m++]=d;return c}function PP(c,d){var m=[];return jc(c,function(w,b,R){d(w,b,R)&&m.push(w)}),m}function Pr(c,d,m,w,b){var R=-1,U=c.length;for(m||(m=vG),b||(b=[]);++R<U;){var G=c[R];d>0&&m(G)?d>1?Pr(G,d-1,m,w,b):Bc(b,G):w||(b[b.length]=G)}return b}var vC=rO(),OP=rO(!0);function Va(c,d){return c&&vC(c,d,Cr)}function yC(c,d){return c&&OP(c,d,Cr)}function Mv(c,d){return Uc(d,function(m){return Rl(c[m])})}function Bu(c,d){d=Wc(d,c);for(var m=0,w=d.length;c!=null&&m<w;)c=c[za(d[m++])];return m&&m==w?c:n}function NP(c,d,m){var w=d(c);return en(c)?w:Bc(w,m(c))}function so(c){return c==null?c===n?S:z:Fu&&Fu in di(c)?dG(c):CG(c)}function _C(c,d){return c>d}function Aj(c,d){return c!=null&&Kn.call(c,d)}function Rj(c,d){return c!=null&&d in di(c)}function Pj(c,d,m){return c>=Wr(d,m)&&c<hr(d,m)}function wC(c,d,m){for(var w=m?nC:rv,b=c[0].length,R=c.length,U=R,G=de(R),ee=1/0,Ee=[];U--;){var Te=c[U];U&&d&&(Te=Ci(Te,Yo(d))),ee=Wr(Te.length,ee),G[U]=!m&&(d||b>=120&&Te.length>=120)?new ku(U&&Te):n}Te=c[0];var Fe=-1,tt=G[0];e:for(;++Fe<b&&Ee.length<ee;){var xt=Te[Fe],Ft=d?d(xt):xt;if(xt=m||xt!==0?xt:0,!(tt?Gp(tt,Ft):w(Ee,Ft,m))){for(U=R;--U;){var fn=G[U];if(!(fn?Gp(fn,Ft):w(c[U],Ft,m)))continue e}tt&&tt.push(Ft),Ee.push(xt)}}return Ee}function Oj(c,d,m,w){return Va(c,function(b,R,U){d(w,m(b),R,U)}),w}function Jp(c,d,m){d=Wc(d,c),c=xO(c,d);var w=c==null?c:c[za(Cs(d))];return w==null?n:Xo(w,c,m)}function FP(c){return Ui(c)&&so(c)==re}function Nj(c){return Ui(c)&&so(c)==Pe}function Fj(c){return Ui(c)&&so(c)==se}function Qp(c,d,m,w,b){return c===d?!0:c==null||d==null||!Ui(c)&&!Ui(d)?c!==c&&d!==d:Lj(c,d,m,w,Qp,b)}function Lj(c,d,m,w,b,R){var U=en(c),G=en(d),ee=U?B:$r(c),Ee=G?B:$r(d);ee=ee==re?nn:ee,Ee=Ee==re?nn:Ee;var Te=ee==nn,Fe=Ee==nn,tt=ee==Ee;if(tt&&qc(c)){if(!qc(d))return!1;U=!0,Te=!1}if(tt&&!Te)return R||(R=new Js),U||bf(c)?pO(c,d,m,w,b,R):cG(c,d,ee,m,w,b,R);if(!(m&p)){var xt=Te&&Kn.call(c,"__wrapped__"),Ft=Fe&&Kn.call(d,"__wrapped__");if(xt||Ft){var fn=xt?c.value():c,Lt=Ft?d.value():d;return R||(R=new Js),b(fn,Lt,m,w,R)}}return tt?(R||(R=new Js),uG(c,d,m,w,b,R)):!1}function kj(c){return Ui(c)&&$r(c)==wt}function xC(c,d,m,w){var b=m.length,R=b,U=!w;if(c==null)return!R;for(c=di(c);b--;){var G=m[b];if(U&&G[2]?G[1]!==c[G[0]]:!(G[0]in c))return!1}for(;++b<R;){G=m[b];var ee=G[0],Ee=c[ee],Te=G[1];if(U&&G[2]){if(Ee===n&&!(ee in c))return!1}else{var Fe=new Js;if(w)var tt=w(Ee,Te,ee,c,d,Fe);if(!(tt===n?Qp(Te,Ee,p|g,w,Fe):tt))return!1}}return!0}function LP(c){if(!Ai(c)||_G(c))return!1;var d=Rl(c)?k8:YM;return d.test(Hu(c))}function Uj(c){return Ui(c)&&so(c)==Ke}function Bj(c){return Ui(c)&&$r(c)==Xt}function Vj(c){return Ui(c)&&Vv(c.length)&&!!Mi[so(c)]}function kP(c){return typeof c=="function"?c:c==null?Io:typeof c=="object"?en(c)?VP(c[0],c[1]):BP(c):o4(c)}function bC(c){if(!nm(c))return j8(c);var d=[];for(var m in di(c))Kn.call(c,m)&&m!="constructor"&&d.push(m);return d}function Hj(c){if(!Ai(c))return MG(c);var d=nm(c),m=[];for(var w in c)w=="constructor"&&(d||!Kn.call(c,w))||m.push(w);return m}function MC(c,d){return c<d}function UP(c,d){var m=-1,w=To(c)?de(c.length):[];return jc(c,function(b,R,U){w[++m]=d(b,R,U)}),w}function BP(c){var d=UC(c);return d.length==1&&d[0][2]?_O(d[0][0],d[0][1]):function(m){return m===c||xC(m,c,d)}}function VP(c,d){return VC(c)&&yO(d)?_O(za(c),d):function(m){var w=ZC(m,c);return w===n&&w===d?KC(m,c):Qp(d,w,p|g)}}function Cv(c,d,m,w,b){c!==d&&vC(d,function(R,U){if(b||(b=new Js),Ai(R))zj(c,d,U,m,Cv,w,b);else{var G=w?w(zC(c,U),R,U+"",c,d,b):n;G===n&&(G=R),mC(c,U,G)}},Do)}function zj(c,d,m,w,b,R,U){var G=zC(c,m),ee=zC(d,m),Ee=U.get(ee);if(Ee){mC(c,m,Ee);return}var Te=R?R(G,ee,m+"",c,d,U):n,Fe=Te===n;if(Fe){var tt=en(ee),xt=!tt&&qc(ee),Ft=!tt&&!xt&&bf(ee);Te=ee,tt||xt||Ft?en(G)?Te=G:Zi(G)?Te=Eo(G):xt?(Fe=!1,Te=JP(ee,!0)):Ft?(Fe=!1,Te=QP(ee,!0)):Te=[]:rm(ee)||zu(ee)?(Te=G,zu(G)?Te=YO(G):(!Ai(G)||Rl(G))&&(Te=vO(ee))):Fe=!1}Fe&&(U.set(ee,Te),b(Te,ee,w,R,U),U.delete(ee)),mC(c,m,Te)}function HP(c,d){var m=c.length;if(m)return d+=d<0?m:0,Al(d,m)?c[d]:n}function zP(c,d,m){d.length?d=Ci(d,function(R){return en(R)?function(U){return Bu(U,R.length===1?R[0]:R)}:R}):d=[Io];var w=-1;d=Ci(d,Yo(Pt()));var b=UP(c,function(R,U,G){var ee=Ci(d,function(Ee){return Ee(R)});return{criteria:ee,index:++w,value:R}});return m8(b,function(R,U){return tG(R,U,m)})}function jj(c,d){return jP(c,d,function(m,w){return KC(c,w)})}function jP(c,d,m){for(var w=-1,b=d.length,R={};++w<b;){var U=d[w],G=Bu(c,U);m(G,U)&&em(R,Wc(U,c),G)}return R}function Gj(c){return function(d){return Bu(d,c)}}function CC(c,d,m,w){var b=w?p8:ff,R=-1,U=d.length,G=c;for(c===d&&(d=Eo(d)),m&&(G=Ci(c,Yo(m)));++R<U;)for(var ee=0,Ee=d[R],Te=m?m(Ee):Ee;(ee=b(G,Te,ee,w))>-1;)G!==c&&pv.call(G,ee,1),pv.call(c,ee,1);return c}function GP(c,d){for(var m=c?d.length:0,w=m-1;m--;){var b=d[m];if(m==w||b!==R){var R=b;Al(b)?pv.call(c,b,1):DC(c,b)}}return c}function SC(c,d){return c+vv(CP()*(d-c+1))}function Wj(c,d,m,w){for(var b=-1,R=hr(gv((d-c)/(m||1)),0),U=de(R);R--;)U[w?R:++b]=c,c+=m;return U}function EC(c,d){var m="";if(!c||d<1||d>Y)return m;do d%2&&(m+=c),d=vv(d/2),d&&(c+=c);while(d);return m}function yn(c,d){return jC(wO(c,d,Io),c+"")}function $j(c){return TP(Mf(c))}function qj(c,d){var m=Mf(c);return Nv(m,Uu(d,0,m.length))}function em(c,d,m,w){if(!Ai(c))return c;d=Wc(d,c);for(var b=-1,R=d.length,U=R-1,G=c;G!=null&&++b<R;){var ee=za(d[b]),Ee=m;if(ee==="__proto__"||ee==="constructor"||ee==="prototype")return c;if(b!=U){var Te=G[ee];Ee=w?w(Te,ee,G):n,Ee===n&&(Ee=Ai(Te)?Te:Al(d[b+1])?[]:{})}Zp(G,ee,Ee),G=G[ee]}return c}var WP=yv?function(c,d){return yv.set(c,d),c}:Io,Xj=mv?function(c,d){return mv(c,"toString",{configurable:!0,enumerable:!1,value:QC(d),writable:!0})}:Io;function Yj(c){return Nv(Mf(c))}function Ms(c,d,m){var w=-1,b=c.length;d<0&&(d=-d>b?0:b+d),m=m>b?b:m,m<0&&(m+=b),b=d>m?0:m-d>>>0,d>>>=0;for(var R=de(b);++w<b;)R[w]=c[w+d];return R}function Zj(c,d){var m;return jc(c,function(w,b,R){return m=d(w,b,R),!m}),!!m}function Sv(c,d,m){var w=0,b=c==null?w:c.length;if(typeof d=="number"&&d===d&&b<=rt){for(;w<b;){var R=w+b>>>1,U=c[R];U!==null&&!Ko(U)&&(m?U<=d:U<d)?w=R+1:b=R}return b}return TC(c,d,Io,m)}function TC(c,d,m,w){var b=0,R=c==null?0:c.length;if(R===0)return 0;d=m(d);for(var U=d!==d,G=d===null,ee=Ko(d),Ee=d===n;b<R;){var Te=vv((b+R)/2),Fe=m(c[Te]),tt=Fe!==n,xt=Fe===null,Ft=Fe===Fe,fn=Ko(Fe);if(U)var Lt=w||Ft;else Ee?Lt=Ft&&(w||tt):G?Lt=Ft&&tt&&(w||!xt):ee?Lt=Ft&&tt&&!xt&&(w||!fn):xt||fn?Lt=!1:Lt=w?Fe<=d:Fe<d;Lt?b=Te+1:R=Te}return Wr(R,Ve)}function $P(c,d){for(var m=-1,w=c.length,b=0,R=[];++m<w;){var U=c[m],G=d?d(U):U;if(!m||!Qs(G,ee)){var ee=G;R[b++]=U===0?0:U}}return R}function qP(c){return typeof c=="number"?c:Ko(c)?X:+c}function Zo(c){if(typeof c=="string")return c;if(en(c))return Ci(c,Zo)+"";if(Ko(c))return SP?SP.call(c):"";var d=c+"";return d=="0"&&1/c==-Se?"-0":d}function Gc(c,d,m){var w=-1,b=rv,R=c.length,U=!0,G=[],ee=G;if(m)U=!1,b=nC;else if(R>=t){var Ee=d?null:aG(c);if(Ee)return sv(Ee);U=!1,b=Gp,ee=new ku}else ee=d?[]:G;e:for(;++w<R;){var Te=c[w],Fe=d?d(Te):Te;if(Te=m||Te!==0?Te:0,U&&Fe===Fe){for(var tt=ee.length;tt--;)if(ee[tt]===Fe)continue e;d&&ee.push(Fe),G.push(Te)}else b(ee,Fe,m)||(ee!==G&&ee.push(Fe),G.push(Te))}return G}function DC(c,d){return d=Wc(d,c),c=xO(c,d),c==null||delete c[za(Cs(d))]}function XP(c,d,m,w){return em(c,d,m(Bu(c,d)),w)}function Ev(c,d,m,w){for(var b=c.length,R=w?b:-1;(w?R--:++R<b)&&d(c[R],R,c););return m?Ms(c,w?0:R,w?R+1:b):Ms(c,w?R+1:0,w?b:R)}function YP(c,d){var m=c;return m instanceof Tn&&(m=m.value()),iC(d,function(w,b){return b.func.apply(b.thisArg,Bc([w],b.args))},m)}function IC(c,d,m){var w=c.length;if(w<2)return w?Gc(c[0]):[];for(var b=-1,R=de(w);++b<w;)for(var U=c[b],G=-1;++G<w;)G!=b&&(R[b]=Kp(R[b]||U,c[G],d,m));return Gc(Pr(R,1),d,m)}function ZP(c,d,m){for(var w=-1,b=c.length,R=d.length,U={};++w<b;){var G=w<R?d[w]:n;m(U,c[w],G)}return U}function AC(c){return Zi(c)?c:[]}function RC(c){return typeof c=="function"?c:Io}function Wc(c,d){return en(c)?c:VC(c,d)?[c]:SO(Yn(c))}var Kj=yn;function $c(c,d,m){var w=c.length;return m=m===n?w:m,!d&&m>=w?c:Ms(c,d,m)}var KP=U8||function(c){return Mr.clearTimeout(c)};function JP(c,d){if(d)return c.slice();var m=c.length,w=_P?_P(m):new c.constructor(m);return c.copy(w),w}function PC(c){var d=new c.constructor(c.byteLength);return new fv(d).set(new fv(c)),d}function Jj(c,d){var m=d?PC(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.byteLength)}function Qj(c){var d=new c.constructor(c.source,jp.exec(c));return d.lastIndex=c.lastIndex,d}function eG(c){return Yp?di(Yp.call(c)):{}}function QP(c,d){var m=d?PC(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.length)}function eO(c,d){if(c!==d){var m=c!==n,w=c===null,b=c===c,R=Ko(c),U=d!==n,G=d===null,ee=d===d,Ee=Ko(d);if(!G&&!Ee&&!R&&c>d||R&&U&&ee&&!G&&!Ee||w&&U&&ee||!m&&ee||!b)return 1;if(!w&&!R&&!Ee&&c<d||Ee&&m&&b&&!w&&!R||G&&m&&b||!U&&b||!ee)return-1}return 0}function tG(c,d,m){for(var w=-1,b=c.criteria,R=d.criteria,U=b.length,G=m.length;++w<U;){var ee=eO(b[w],R[w]);if(ee){if(w>=G)return ee;var Ee=m[w];return ee*(Ee=="desc"?-1:1)}}return c.index-d.index}function tO(c,d,m,w){for(var b=-1,R=c.length,U=m.length,G=-1,ee=d.length,Ee=hr(R-U,0),Te=de(ee+Ee),Fe=!w;++G<ee;)Te[G]=d[G];for(;++b<U;)(Fe||b<R)&&(Te[m[b]]=c[b]);for(;Ee--;)Te[G++]=c[b++];return Te}function nO(c,d,m,w){for(var b=-1,R=c.length,U=-1,G=m.length,ee=-1,Ee=d.length,Te=hr(R-G,0),Fe=de(Te+Ee),tt=!w;++b<Te;)Fe[b]=c[b];for(var xt=b;++ee<Ee;)Fe[xt+ee]=d[ee];for(;++U<G;)(tt||b<R)&&(Fe[xt+m[U]]=c[b++]);return Fe}function Eo(c,d){var m=-1,w=c.length;for(d||(d=de(w));++m<w;)d[m]=c[m];return d}function Ha(c,d,m,w){var b=!m;m||(m={});for(var R=-1,U=d.length;++R<U;){var G=d[R],ee=w?w(m[G],c[G],G,m,c):n;ee===n&&(ee=c[G]),b?Tl(m,G,ee):Zp(m,G,ee)}return m}function nG(c,d){return Ha(c,BC(c),d)}function iG(c,d){return Ha(c,mO(c),d)}function Tv(c,d){return function(m,w){var b=en(m)?l8:Sj,R=d?d():{};return b(m,c,Pt(w,2),R)}}function _f(c){return yn(function(d,m){var w=-1,b=m.length,R=b>1?m[b-1]:n,U=b>2?m[2]:n;for(R=c.length>3&&typeof R=="function"?(b--,R):n,U&&ao(m[0],m[1],U)&&(R=b<3?n:R,b=1),d=di(d);++w<b;){var G=m[w];G&&c(d,G,w,R)}return d})}function iO(c,d){return function(m,w){if(m==null)return m;if(!To(m))return c(m,w);for(var b=m.length,R=d?b:-1,U=di(m);(d?R--:++R<b)&&w(U[R],R,U)!==!1;);return m}}function rO(c){return function(d,m,w){for(var b=-1,R=di(d),U=w(d),G=U.length;G--;){var ee=U[c?G:++b];if(m(R[ee],ee,R)===!1)break}return d}}function rG(c,d,m){var w=d&v,b=tm(c);function R(){var U=this&&this!==Mr&&this instanceof R?b:c;return U.apply(w?m:this,arguments)}return R}function oO(c){return function(d){d=Yn(d);var m=hf(d)?Ks(d):n,w=m?m[0]:d.charAt(0),b=m?$c(m,1).join(""):d.slice(1);return w[c]()+b}}function wf(c){return function(d){return iC(i4(n4(d).replace(X5,"")),c,"")}}function tm(c){return function(){var d=arguments;switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3]);case 5:return new c(d[0],d[1],d[2],d[3],d[4]);case 6:return new c(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new c(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var m=yf(c.prototype),w=c.apply(m,d);return Ai(w)?w:m}}function oG(c,d,m){var w=tm(c);function b(){for(var R=arguments.length,U=de(R),G=R,ee=xf(b);G--;)U[G]=arguments[G];var Ee=R<3&&U[0]!==ee&&U[R-1]!==ee?[]:Vc(U,ee);if(R-=Ee.length,R<m)return uO(c,d,Dv,b.placeholder,n,U,Ee,n,n,m-R);var Te=this&&this!==Mr&&this instanceof b?w:c;return Xo(Te,this,U)}return b}function sO(c){return function(d,m,w){var b=di(d);if(!To(d)){var R=Pt(m,3);d=Cr(d),m=function(G){return R(b[G],G,b)}}var U=c(d,m,w);return U>-1?b[R?d[U]:U]:n}}function aO(c){return Il(function(d){var m=d.length,w=m,b=xs.prototype.thru;for(c&&d.reverse();w--;){var R=d[w];if(typeof R!="function")throw new ws(r);if(b&&!U&&Pv(R)=="wrapper")var U=new xs([],!0)}for(w=U?w:m;++w<m;){R=d[w];var G=Pv(R),ee=G=="wrapper"?kC(R):n;ee&&HC(ee[0])&&ee[1]==(H|_|M|L)&&!ee[4].length&&ee[9]==1?U=U[Pv(ee[0])].apply(U,ee[3]):U=R.length==1&&HC(R)?U[G]():U.thru(R)}return function(){var Ee=arguments,Te=Ee[0];if(U&&Ee.length==1&&en(Te))return U.plant(Te).value();for(var Fe=0,tt=m?d[Fe].apply(this,Ee):Te;++Fe<m;)tt=d[Fe].call(this,tt);return tt}})}function Dv(c,d,m,w,b,R,U,G,ee,Ee){var Te=d&H,Fe=d&v,tt=d&x,xt=d&(_|T),Ft=d&k,fn=tt?n:tm(c);function Lt(){for(var bn=arguments.length,An=de(bn),Jo=bn;Jo--;)An[Jo]=arguments[Jo];if(xt)var lo=xf(Lt),Qo=v8(An,lo);if(w&&(An=tO(An,w,b,xt)),R&&(An=nO(An,R,U,xt)),bn-=Qo,xt&&bn<Ee){var Ki=Vc(An,lo);return uO(c,d,Dv,Lt.placeholder,m,An,Ki,G,ee,Ee-bn)}var ea=Fe?m:this,Ol=tt?ea[c]:c;return bn=An.length,G?An=SG(An,G):Ft&&bn>1&&An.reverse(),Te&&ee<bn&&(An.length=ee),this&&this!==Mr&&this instanceof Lt&&(Ol=fn||tm(Ol)),Ol.apply(ea,An)}return Lt}function lO(c,d){return function(m,w){return Oj(m,c,d(w),{})}}function Iv(c,d){return function(m,w){var b;if(m===n&&w===n)return d;if(m!==n&&(b=m),w!==n){if(b===n)return w;typeof m=="string"||typeof w=="string"?(m=Zo(m),w=Zo(w)):(m=qP(m),w=qP(w)),b=c(m,w)}return b}}function OC(c){return Il(function(d){return d=Ci(d,Yo(Pt())),yn(function(m){var w=this;return c(d,function(b){return Xo(b,w,m)})})})}function Av(c,d){d=d===n?" ":Zo(d);var m=d.length;if(m<2)return m?EC(d,c):d;var w=EC(d,gv(c/pf(d)));return hf(d)?$c(Ks(w),0,c).join(""):w.slice(0,c)}function sG(c,d,m,w){var b=d&v,R=tm(c);function U(){for(var G=-1,ee=arguments.length,Ee=-1,Te=w.length,Fe=de(Te+ee),tt=this&&this!==Mr&&this instanceof U?R:c;++Ee<Te;)Fe[Ee]=w[Ee];for(;ee--;)Fe[Ee++]=arguments[++G];return Xo(tt,b?m:this,Fe)}return U}function cO(c){return function(d,m,w){return w&&typeof w!="number"&&ao(d,m,w)&&(m=w=n),d=Pl(d),m===n?(m=d,d=0):m=Pl(m),w=w===n?d<m?1:-1:Pl(w),Wj(d,m,w,c)}}function Rv(c){return function(d,m){return typeof d=="string"&&typeof m=="string"||(d=Ss(d),m=Ss(m)),c(d,m)}}function uO(c,d,m,w,b,R,U,G,ee,Ee){var Te=d&_,Fe=Te?U:n,tt=Te?n:U,xt=Te?R:n,Ft=Te?n:R;d|=Te?M:C,d&=~(Te?C:M),d&y||(d&=~(v|x));var fn=[c,d,b,xt,Fe,Ft,tt,G,ee,Ee],Lt=m.apply(n,fn);return HC(c)&&bO(Lt,fn),Lt.placeholder=w,MO(Lt,c,d)}function NC(c){var d=fr[c];return function(m,w){if(m=Ss(m),w=w==null?0:Wr(ln(w),292),w&&MP(m)){var b=(Yn(m)+"e").split("e"),R=d(b[0]+"e"+(+b[1]+w));return b=(Yn(R)+"e").split("e"),+(b[0]+"e"+(+b[1]-w))}return d(m)}}var aG=gf&&1/sv(new gf([,-0]))[1]==Se?function(c){return new gf(c)}:nS;function dO(c){return function(d){var m=$r(d);return m==wt?uC(d):m==Xt?C8(d):g8(d,c(d))}}function Dl(c,d,m,w,b,R,U,G){var ee=d&x;if(!ee&&typeof c!="function")throw new ws(r);var Ee=w?w.length:0;if(Ee||(d&=~(M|C),w=b=n),U=U===n?U:hr(ln(U),0),G=G===n?G:ln(G),Ee-=b?b.length:0,d&C){var Te=w,Fe=b;w=b=n}var tt=ee?n:kC(c),xt=[c,d,m,w,b,Te,Fe,R,U,G];if(tt&&bG(xt,tt),c=xt[0],d=xt[1],m=xt[2],w=xt[3],b=xt[4],G=xt[9]=xt[9]===n?ee?0:c.length:hr(xt[9]-Ee,0),!G&&d&(_|T)&&(d&=~(_|T)),!d||d==v)var Ft=rG(c,d,m);else d==_||d==T?Ft=oG(c,d,G):(d==M||d==(v|M))&&!b.length?Ft=sG(c,d,m,w):Ft=Dv.apply(n,xt);var fn=tt?WP:bO;return MO(fn(Ft,xt),c,d)}function fO(c,d,m,w){return c===n||Qs(c,mf[m])&&!Kn.call(w,m)?d:c}function hO(c,d,m,w,b,R){return Ai(c)&&Ai(d)&&(R.set(d,c),Cv(c,d,n,hO,R),R.delete(d)),c}function lG(c){return rm(c)?n:c}function pO(c,d,m,w,b,R){var U=m&p,G=c.length,ee=d.length;if(G!=ee&&!(U&&ee>G))return!1;var Ee=R.get(c),Te=R.get(d);if(Ee&&Te)return Ee==d&&Te==c;var Fe=-1,tt=!0,xt=m&g?new ku:n;for(R.set(c,d),R.set(d,c);++Fe<G;){var Ft=c[Fe],fn=d[Fe];if(w)var Lt=U?w(fn,Ft,Fe,d,c,R):w(Ft,fn,Fe,c,d,R);if(Lt!==n){if(Lt)continue;tt=!1;break}if(xt){if(!rC(d,function(bn,An){if(!Gp(xt,An)&&(Ft===bn||b(Ft,bn,m,w,R)))return xt.push(An)})){tt=!1;break}}else if(!(Ft===fn||b(Ft,fn,m,w,R))){tt=!1;break}}return R.delete(c),R.delete(d),tt}function cG(c,d,m,w,b,R,U){switch(m){case fe:if(c.byteLength!=d.byteLength||c.byteOffset!=d.byteOffset)return!1;c=c.buffer,d=d.buffer;case Pe:return!(c.byteLength!=d.byteLength||!R(new fv(c),new fv(d)));case xe:case se:case pt:return Qs(+c,+d);case We:return c.name==d.name&&c.message==d.message;case Ke:case vt:return c==d+"";case wt:var G=uC;case Xt:var ee=w&p;if(G||(G=sv),c.size!=d.size&&!ee)return!1;var Ee=U.get(c);if(Ee)return Ee==d;w|=g,U.set(c,d);var Te=pO(G(c),G(d),w,b,R,U);return U.delete(c),Te;case F:if(Yp)return Yp.call(c)==Yp.call(d)}return!1}function uG(c,d,m,w,b,R){var U=m&p,G=FC(c),ee=G.length,Ee=FC(d),Te=Ee.length;if(ee!=Te&&!U)return!1;for(var Fe=ee;Fe--;){var tt=G[Fe];if(!(U?tt in d:Kn.call(d,tt)))return!1}var xt=R.get(c),Ft=R.get(d);if(xt&&Ft)return xt==d&&Ft==c;var fn=!0;R.set(c,d),R.set(d,c);for(var Lt=U;++Fe<ee;){tt=G[Fe];var bn=c[tt],An=d[tt];if(w)var Jo=U?w(An,bn,tt,d,c,R):w(bn,An,tt,c,d,R);if(!(Jo===n?bn===An||b(bn,An,m,w,R):Jo)){fn=!1;break}Lt||(Lt=tt=="constructor")}if(fn&&!Lt){var lo=c.constructor,Qo=d.constructor;lo!=Qo&&"constructor"in c&&"constructor"in d&&!(typeof lo=="function"&&lo instanceof lo&&typeof Qo=="function"&&Qo instanceof Qo)&&(fn=!1)}return R.delete(c),R.delete(d),fn}function Il(c){return jC(wO(c,n,IO),c+"")}function FC(c){return NP(c,Cr,BC)}function LC(c){return NP(c,Do,mO)}var kC=yv?function(c){return yv.get(c)}:nS;function Pv(c){for(var d=c.name+"",m=vf[d],w=Kn.call(vf,d)?m.length:0;w--;){var b=m[w],R=b.func;if(R==null||R==c)return b.name}return d}function xf(c){var d=Kn.call(E,"placeholder")?E:c;return d.placeholder}function Pt(){var c=E.iteratee||eS;return c=c===eS?kP:c,arguments.length?c(arguments[0],arguments[1]):c}function Ov(c,d){var m=c.__data__;return yG(d)?m[typeof d=="string"?"string":"hash"]:m.map}function UC(c){for(var d=Cr(c),m=d.length;m--;){var w=d[m],b=c[w];d[m]=[w,b,yO(b)]}return d}function Vu(c,d){var m=x8(c,d);return LP(m)?m:n}function dG(c){var d=Kn.call(c,Fu),m=c[Fu];try{c[Fu]=n;var w=!0}catch{}var b=uv.call(c);return w&&(d?c[Fu]=m:delete c[Fu]),b}var BC=fC?function(c){return c==null?[]:(c=di(c),Uc(fC(c),function(d){return xP.call(c,d)}))}:iS,mO=fC?function(c){for(var d=[];c;)Bc(d,BC(c)),c=hv(c);return d}:iS,$r=so;(hC&&$r(new hC(new ArrayBuffer(1)))!=fe||$p&&$r(new $p)!=wt||pC&&$r(pC.resolve())!=$e||gf&&$r(new gf)!=Xt||qp&&$r(new qp)!=oe)&&($r=function(c){var d=so(c),m=d==nn?c.constructor:n,w=m?Hu(m):"";if(w)switch(w){case q8:return fe;case X8:return wt;case Y8:return $e;case Z8:return Xt;case K8:return oe}return d});function fG(c,d,m){for(var w=-1,b=m.length;++w<b;){var R=m[w],U=R.size;switch(R.type){case"drop":c+=U;break;case"dropRight":d-=U;break;case"take":d=Wr(d,c+U);break;case"takeRight":c=hr(c,d-U);break}}return{start:c,end:d}}function hG(c){var d=c.match(Lc);return d?d[1].split(Zs):[]}function gO(c,d,m){d=Wc(d,c);for(var w=-1,b=d.length,R=!1;++w<b;){var U=za(d[w]);if(!(R=c!=null&&m(c,U)))break;c=c[U]}return R||++w!=b?R:(b=c==null?0:c.length,!!b&&Vv(b)&&Al(U,b)&&(en(c)||zu(c)))}function pG(c){var d=c.length,m=new c.constructor(d);return d&&typeof c[0]=="string"&&Kn.call(c,"index")&&(m.index=c.index,m.input=c.input),m}function vO(c){return typeof c.constructor=="function"&&!nm(c)?yf(hv(c)):{}}function mG(c,d,m){var w=c.constructor;switch(d){case Pe:return PC(c);case xe:case se:return new w(+c);case fe:return Jj(c,m);case Ye:case Ze:case bt:case Mt:case ke:case ot:case Ct:case At:case st:return QP(c,m);case wt:return new w;case pt:case vt:return new w(c);case Ke:return Qj(c);case Xt:return new w;case F:return eG(c)}}function gG(c,d){var m=d.length;if(!m)return c;var w=m-1;return d[w]=(m>1?"& ":"")+d[w],d=d.join(m>2?", ":" "),c.replace(gs,`{
/* [wrapped with `+d+`] */
`)}function vG(c){return en(c)||zu(c)||!!(bP&&c&&c[bP])}function Al(c,d){var m=typeof c;return d=d??Y,!!d&&(m=="number"||m!="symbol"&&KM.test(c))&&c>-1&&c%1==0&&c<d}function ao(c,d,m){if(!Ai(m))return!1;var w=typeof d;return(w=="number"?To(m)&&Al(d,m.length):w=="string"&&d in m)?Qs(m[d],c):!1}function VC(c,d){if(en(c))return!1;var m=typeof c;return m=="number"||m=="symbol"||m=="boolean"||c==null||Ko(c)?!0:Xi.test(c)||!ui.test(c)||d!=null&&c in di(d)}function yG(c){var d=typeof c;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?c!=="__proto__":c===null}function HC(c){var d=Pv(c),m=E[d];if(typeof m!="function"||!(d in Tn.prototype))return!1;if(c===m)return!0;var w=kC(m);return!!w&&c===w[0]}function _G(c){return!!yP&&yP in c}var wG=lv?Rl:rS;function nm(c){var d=c&&c.constructor,m=typeof d=="function"&&d.prototype||mf;return c===m}function yO(c){return c===c&&!Ai(c)}function _O(c,d){return function(m){return m==null?!1:m[c]===d&&(d!==n||c in di(m))}}function xG(c){var d=Uv(c,function(w){return m.size===a&&m.clear(),w}),m=d.cache;return d}function bG(c,d){var m=c[1],w=d[1],b=m|w,R=b<(v|x|H),U=w==H&&m==_||w==H&&m==L&&c[7].length<=d[8]||w==(H|L)&&d[7].length<=d[8]&&m==_;if(!(R||U))return c;w&v&&(c[2]=d[2],b|=m&v?0:y);var G=d[3];if(G){var ee=c[3];c[3]=ee?tO(ee,G,d[4]):G,c[4]=ee?Vc(c[3],l):d[4]}return G=d[5],G&&(ee=c[5],c[5]=ee?nO(ee,G,d[6]):G,c[6]=ee?Vc(c[5],l):d[6]),G=d[7],G&&(c[7]=G),w&H&&(c[8]=c[8]==null?d[8]:Wr(c[8],d[8])),c[9]==null&&(c[9]=d[9]),c[0]=d[0],c[1]=b,c}function MG(c){var d=[];if(c!=null)for(var m in di(c))d.push(m);return d}function CG(c){return uv.call(c)}function wO(c,d,m){return d=hr(d===n?c.length-1:d,0),function(){for(var w=arguments,b=-1,R=hr(w.length-d,0),U=de(R);++b<R;)U[b]=w[d+b];b=-1;for(var G=de(d+1);++b<d;)G[b]=w[b];return G[d]=m(U),Xo(c,this,G)}}function xO(c,d){return d.length<2?c:Bu(c,Ms(d,0,-1))}function SG(c,d){for(var m=c.length,w=Wr(d.length,m),b=Eo(c);w--;){var R=d[w];c[w]=Al(R,m)?b[R]:n}return c}function zC(c,d){if(!(d==="constructor"&&typeof c[d]=="function")&&d!="__proto__")return c[d]}var bO=CO(WP),im=V8||function(c,d){return Mr.setTimeout(c,d)},jC=CO(Xj);function MO(c,d,m){var w=d+"";return jC(c,gG(w,EG(hG(w),m)))}function CO(c){var d=0,m=0;return function(){var w=G8(),b=j-(w-m);if(m=w,b>0){if(++d>=A)return arguments[0]}else d=0;return c.apply(n,arguments)}}function Nv(c,d){var m=-1,w=c.length,b=w-1;for(d=d===n?w:d;++m<d;){var R=SC(m,b),U=c[R];c[R]=c[m],c[m]=U}return c.length=d,c}var SO=xG(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(Nn,function(m,w,b,R){d.push(b?R.replace(nv,"$1"):w||m)}),d});function za(c){if(typeof c=="string"||Ko(c))return c;var d=c+"";return d=="0"&&1/c==-Se?"-0":d}function Hu(c){if(c!=null){try{return cv.call(c)}catch{}try{return c+""}catch{}}return""}function EG(c,d){return _s(ge,function(m){var w="_."+m[0];d&m[1]&&!rv(c,w)&&c.push(w)}),c.sort()}function EO(c){if(c instanceof Tn)return c.clone();var d=new xs(c.__wrapped__,c.__chain__);return d.__actions__=Eo(c.__actions__),d.__index__=c.__index__,d.__values__=c.__values__,d}function TG(c,d,m){(m?ao(c,d,m):d===n)?d=1:d=hr(ln(d),0);var w=c==null?0:c.length;if(!w||d<1)return[];for(var b=0,R=0,U=de(gv(w/d));b<w;)U[R++]=Ms(c,b,b+=d);return U}function DG(c){for(var d=-1,m=c==null?0:c.length,w=0,b=[];++d<m;){var R=c[d];R&&(b[w++]=R)}return b}function IG(){var c=arguments.length;if(!c)return[];for(var d=de(c-1),m=arguments[0],w=c;w--;)d[w-1]=arguments[w];return Bc(en(m)?Eo(m):[m],Pr(d,1))}var AG=yn(function(c,d){return Zi(c)?Kp(c,Pr(d,1,Zi,!0)):[]}),RG=yn(function(c,d){var m=Cs(d);return Zi(m)&&(m=n),Zi(c)?Kp(c,Pr(d,1,Zi,!0),Pt(m,2)):[]}),PG=yn(function(c,d){var m=Cs(d);return Zi(m)&&(m=n),Zi(c)?Kp(c,Pr(d,1,Zi,!0),n,m):[]});function OG(c,d,m){var w=c==null?0:c.length;return w?(d=m||d===n?1:ln(d),Ms(c,d<0?0:d,w)):[]}function NG(c,d,m){var w=c==null?0:c.length;return w?(d=m||d===n?1:ln(d),d=w-d,Ms(c,0,d<0?0:d)):[]}function FG(c,d){return c&&c.length?Ev(c,Pt(d,3),!0,!0):[]}function LG(c,d){return c&&c.length?Ev(c,Pt(d,3),!0):[]}function kG(c,d,m,w){var b=c==null?0:c.length;return b?(m&&typeof m!="number"&&ao(c,d,m)&&(m=0,w=b),Ij(c,d,m,w)):[]}function TO(c,d,m){var w=c==null?0:c.length;if(!w)return-1;var b=m==null?0:ln(m);return b<0&&(b=hr(w+b,0)),ov(c,Pt(d,3),b)}function DO(c,d,m){var w=c==null?0:c.length;if(!w)return-1;var b=w-1;return m!==n&&(b=ln(m),b=m<0?hr(w+b,0):Wr(b,w-1)),ov(c,Pt(d,3),b,!0)}function IO(c){var d=c==null?0:c.length;return d?Pr(c,1):[]}function UG(c){var d=c==null?0:c.length;return d?Pr(c,Se):[]}function BG(c,d){var m=c==null?0:c.length;return m?(d=d===n?1:ln(d),Pr(c,d)):[]}function VG(c){for(var d=-1,m=c==null?0:c.length,w={};++d<m;){var b=c[d];w[b[0]]=b[1]}return w}function AO(c){return c&&c.length?c[0]:n}function HG(c,d,m){var w=c==null?0:c.length;if(!w)return-1;var b=m==null?0:ln(m);return b<0&&(b=hr(w+b,0)),ff(c,d,b)}function zG(c){var d=c==null?0:c.length;return d?Ms(c,0,-1):[]}var jG=yn(function(c){var d=Ci(c,AC);return d.length&&d[0]===c[0]?wC(d):[]}),GG=yn(function(c){var d=Cs(c),m=Ci(c,AC);return d===Cs(m)?d=n:m.pop(),m.length&&m[0]===c[0]?wC(m,Pt(d,2)):[]}),WG=yn(function(c){var d=Cs(c),m=Ci(c,AC);return d=typeof d=="function"?d:n,d&&m.pop(),m.length&&m[0]===c[0]?wC(m,n,d):[]});function $G(c,d){return c==null?"":z8.call(c,d)}function Cs(c){var d=c==null?0:c.length;return d?c[d-1]:n}function qG(c,d,m){var w=c==null?0:c.length;if(!w)return-1;var b=w;return m!==n&&(b=ln(m),b=b<0?hr(w+b,0):Wr(b,w-1)),d===d?E8(c,d,b):ov(c,uP,b,!0)}function XG(c,d){return c&&c.length?HP(c,ln(d)):n}var YG=yn(RO);function RO(c,d){return c&&c.length&&d&&d.length?CC(c,d):c}function ZG(c,d,m){return c&&c.length&&d&&d.length?CC(c,d,Pt(m,2)):c}function KG(c,d,m){return c&&c.length&&d&&d.length?CC(c,d,n,m):c}var JG=Il(function(c,d){var m=c==null?0:c.length,w=gC(c,d);return GP(c,Ci(d,function(b){return Al(b,m)?+b:b}).sort(eO)),w});function QG(c,d){var m=[];if(!(c&&c.length))return m;var w=-1,b=[],R=c.length;for(d=Pt(d,3);++w<R;){var U=c[w];d(U,w,c)&&(m.push(U),b.push(w))}return GP(c,b),m}function GC(c){return c==null?c:$8.call(c)}function e6(c,d,m){var w=c==null?0:c.length;return w?(m&&typeof m!="number"&&ao(c,d,m)?(d=0,m=w):(d=d==null?0:ln(d),m=m===n?w:ln(m)),Ms(c,d,m)):[]}function t6(c,d){return Sv(c,d)}function n6(c,d,m){return TC(c,d,Pt(m,2))}function i6(c,d){var m=c==null?0:c.length;if(m){var w=Sv(c,d);if(w<m&&Qs(c[w],d))return w}return-1}function r6(c,d){return Sv(c,d,!0)}function o6(c,d,m){return TC(c,d,Pt(m,2),!0)}function s6(c,d){var m=c==null?0:c.length;if(m){var w=Sv(c,d,!0)-1;if(Qs(c[w],d))return w}return-1}function a6(c){return c&&c.length?$P(c):[]}function l6(c,d){return c&&c.length?$P(c,Pt(d,2)):[]}function c6(c){var d=c==null?0:c.length;return d?Ms(c,1,d):[]}function u6(c,d,m){return c&&c.length?(d=m||d===n?1:ln(d),Ms(c,0,d<0?0:d)):[]}function d6(c,d,m){var w=c==null?0:c.length;return w?(d=m||d===n?1:ln(d),d=w-d,Ms(c,d<0?0:d,w)):[]}function f6(c,d){return c&&c.length?Ev(c,Pt(d,3),!1,!0):[]}function h6(c,d){return c&&c.length?Ev(c,Pt(d,3)):[]}var p6=yn(function(c){return Gc(Pr(c,1,Zi,!0))}),m6=yn(function(c){var d=Cs(c);return Zi(d)&&(d=n),Gc(Pr(c,1,Zi,!0),Pt(d,2))}),g6=yn(function(c){var d=Cs(c);return d=typeof d=="function"?d:n,Gc(Pr(c,1,Zi,!0),n,d)});function v6(c){return c&&c.length?Gc(c):[]}function y6(c,d){return c&&c.length?Gc(c,Pt(d,2)):[]}function _6(c,d){return d=typeof d=="function"?d:n,c&&c.length?Gc(c,n,d):[]}function WC(c){if(!(c&&c.length))return[];var d=0;return c=Uc(c,function(m){if(Zi(m))return d=hr(m.length,d),!0}),lC(d,function(m){return Ci(c,oC(m))})}function PO(c,d){if(!(c&&c.length))return[];var m=WC(c);return d==null?m:Ci(m,function(w){return Xo(d,n,w)})}var w6=yn(function(c,d){return Zi(c)?Kp(c,d):[]}),x6=yn(function(c){return IC(Uc(c,Zi))}),b6=yn(function(c){var d=Cs(c);return Zi(d)&&(d=n),IC(Uc(c,Zi),Pt(d,2))}),M6=yn(function(c){var d=Cs(c);return d=typeof d=="function"?d:n,IC(Uc(c,Zi),n,d)}),C6=yn(WC);function S6(c,d){return ZP(c||[],d||[],Zp)}function E6(c,d){return ZP(c||[],d||[],em)}var T6=yn(function(c){var d=c.length,m=d>1?c[d-1]:n;return m=typeof m=="function"?(c.pop(),m):n,PO(c,m)});function OO(c){var d=E(c);return d.__chain__=!0,d}function D6(c,d){return d(c),c}function Fv(c,d){return d(c)}var I6=Il(function(c){var d=c.length,m=d?c[0]:0,w=this.__wrapped__,b=function(R){return gC(R,c)};return d>1||this.__actions__.length||!(w instanceof Tn)||!Al(m)?this.thru(b):(w=w.slice(m,+m+(d?1:0)),w.__actions__.push({func:Fv,args:[b],thisArg:n}),new xs(w,this.__chain__).thru(function(R){return d&&!R.length&&R.push(n),R}))});function A6(){return OO(this)}function R6(){return new xs(this.value(),this.__chain__)}function P6(){this.__values__===n&&(this.__values__=qO(this.value()));var c=this.__index__>=this.__values__.length,d=c?n:this.__values__[this.__index__++];return{done:c,value:d}}function O6(){return this}function N6(c){for(var d,m=this;m instanceof wv;){var w=EO(m);w.__index__=0,w.__values__=n,d?b.__wrapped__=w:d=w;var b=w;m=m.__wrapped__}return b.__wrapped__=c,d}function F6(){var c=this.__wrapped__;if(c instanceof Tn){var d=c;return this.__actions__.length&&(d=new Tn(this)),d=d.reverse(),d.__actions__.push({func:Fv,args:[GC],thisArg:n}),new xs(d,this.__chain__)}return this.thru(GC)}function L6(){return YP(this.__wrapped__,this.__actions__)}var k6=Tv(function(c,d,m){Kn.call(c,m)?++c[m]:Tl(c,m,1)});function U6(c,d,m){var w=en(c)?lP:Dj;return m&&ao(c,d,m)&&(d=n),w(c,Pt(d,3))}function B6(c,d){var m=en(c)?Uc:PP;return m(c,Pt(d,3))}var V6=sO(TO),H6=sO(DO);function z6(c,d){return Pr(Lv(c,d),1)}function j6(c,d){return Pr(Lv(c,d),Se)}function G6(c,d,m){return m=m===n?1:ln(m),Pr(Lv(c,d),m)}function NO(c,d){var m=en(c)?_s:jc;return m(c,Pt(d,3))}function FO(c,d){var m=en(c)?c8:RP;return m(c,Pt(d,3))}var W6=Tv(function(c,d,m){Kn.call(c,m)?c[m].push(d):Tl(c,m,[d])});function $6(c,d,m,w){c=To(c)?c:Mf(c),m=m&&!w?ln(m):0;var b=c.length;return m<0&&(m=hr(b+m,0)),Hv(c)?m<=b&&c.indexOf(d,m)>-1:!!b&&ff(c,d,m)>-1}var q6=yn(function(c,d,m){var w=-1,b=typeof d=="function",R=To(c)?de(c.length):[];return jc(c,function(U){R[++w]=b?Xo(d,U,m):Jp(U,d,m)}),R}),X6=Tv(function(c,d,m){Tl(c,m,d)});function Lv(c,d){var m=en(c)?Ci:UP;return m(c,Pt(d,3))}function Y6(c,d,m,w){return c==null?[]:(en(d)||(d=d==null?[]:[d]),m=w?n:m,en(m)||(m=m==null?[]:[m]),zP(c,d,m))}var Z6=Tv(function(c,d,m){c[m?0:1].push(d)},function(){return[[],[]]});function K6(c,d,m){var w=en(c)?iC:fP,b=arguments.length<3;return w(c,Pt(d,4),m,b,jc)}function J6(c,d,m){var w=en(c)?u8:fP,b=arguments.length<3;return w(c,Pt(d,4),m,b,RP)}function Q6(c,d){var m=en(c)?Uc:PP;return m(c,Bv(Pt(d,3)))}function eW(c){var d=en(c)?TP:$j;return d(c)}function tW(c,d,m){(m?ao(c,d,m):d===n)?d=1:d=ln(d);var w=en(c)?Mj:qj;return w(c,d)}function nW(c){var d=en(c)?Cj:Yj;return d(c)}function iW(c){if(c==null)return 0;if(To(c))return Hv(c)?pf(c):c.length;var d=$r(c);return d==wt||d==Xt?c.size:bC(c).length}function rW(c,d,m){var w=en(c)?rC:Zj;return m&&ao(c,d,m)&&(d=n),w(c,Pt(d,3))}var oW=yn(function(c,d){if(c==null)return[];var m=d.length;return m>1&&ao(c,d[0],d[1])?d=[]:m>2&&ao(d[0],d[1],d[2])&&(d=[d[0]]),zP(c,Pr(d,1),[])}),kv=B8||function(){return Mr.Date.now()};function sW(c,d){if(typeof d!="function")throw new ws(r);return c=ln(c),function(){if(--c<1)return d.apply(this,arguments)}}function LO(c,d,m){return d=m?n:d,d=c&&d==null?c.length:d,Dl(c,H,n,n,n,n,d)}function kO(c,d){var m;if(typeof d!="function")throw new ws(r);return c=ln(c),function(){return--c>0&&(m=d.apply(this,arguments)),c<=1&&(d=n),m}}var $C=yn(function(c,d,m){var w=v;if(m.length){var b=Vc(m,xf($C));w|=M}return Dl(c,w,d,m,b)}),UO=yn(function(c,d,m){var w=v|x;if(m.length){var b=Vc(m,xf(UO));w|=M}return Dl(d,w,c,m,b)});function BO(c,d,m){d=m?n:d;var w=Dl(c,_,n,n,n,n,n,d);return w.placeholder=BO.placeholder,w}function VO(c,d,m){d=m?n:d;var w=Dl(c,T,n,n,n,n,n,d);return w.placeholder=VO.placeholder,w}function HO(c,d,m){var w,b,R,U,G,ee,Ee=0,Te=!1,Fe=!1,tt=!0;if(typeof c!="function")throw new ws(r);d=Ss(d)||0,Ai(m)&&(Te=!!m.leading,Fe="maxWait"in m,R=Fe?hr(Ss(m.maxWait)||0,d):R,tt="trailing"in m?!!m.trailing:tt);function xt(Ki){var ea=w,Ol=b;return w=b=n,Ee=Ki,U=c.apply(Ol,ea),U}function Ft(Ki){return Ee=Ki,G=im(bn,d),Te?xt(Ki):U}function fn(Ki){var ea=Ki-ee,Ol=Ki-Ee,s4=d-ea;return Fe?Wr(s4,R-Ol):s4}function Lt(Ki){var ea=Ki-ee,Ol=Ki-Ee;return ee===n||ea>=d||ea<0||Fe&&Ol>=R}function bn(){var Ki=kv();if(Lt(Ki))return An(Ki);G=im(bn,fn(Ki))}function An(Ki){return G=n,tt&&w?xt(Ki):(w=b=n,U)}function Jo(){G!==n&&KP(G),Ee=0,w=ee=b=G=n}function lo(){return G===n?U:An(kv())}function Qo(){var Ki=kv(),ea=Lt(Ki);if(w=arguments,b=this,ee=Ki,ea){if(G===n)return Ft(ee);if(Fe)return KP(G),G=im(bn,d),xt(ee)}return G===n&&(G=im(bn,d)),U}return Qo.cancel=Jo,Qo.flush=lo,Qo}var aW=yn(function(c,d){return AP(c,1,d)}),lW=yn(function(c,d,m){return AP(c,Ss(d)||0,m)});function cW(c){return Dl(c,k)}function Uv(c,d){if(typeof c!="function"||d!=null&&typeof d!="function")throw new ws(r);var m=function(){var w=arguments,b=d?d.apply(this,w):w[0],R=m.cache;if(R.has(b))return R.get(b);var U=c.apply(this,w);return m.cache=R.set(b,U)||R,U};return m.cache=new(Uv.Cache||El),m}Uv.Cache=El;function Bv(c){if(typeof c!="function")throw new ws(r);return function(){var d=arguments;switch(d.length){case 0:return!c.call(this);case 1:return!c.call(this,d[0]);case 2:return!c.call(this,d[0],d[1]);case 3:return!c.call(this,d[0],d[1],d[2])}return!c.apply(this,d)}}function uW(c){return kO(2,c)}var dW=Kj(function(c,d){d=d.length==1&&en(d[0])?Ci(d[0],Yo(Pt())):Ci(Pr(d,1),Yo(Pt()));var m=d.length;return yn(function(w){for(var b=-1,R=Wr(w.length,m);++b<R;)w[b]=d[b].call(this,w[b]);return Xo(c,this,w)})}),qC=yn(function(c,d){var m=Vc(d,xf(qC));return Dl(c,M,n,d,m)}),zO=yn(function(c,d){var m=Vc(d,xf(zO));return Dl(c,C,n,d,m)}),fW=Il(function(c,d){return Dl(c,L,n,n,n,d)});function hW(c,d){if(typeof c!="function")throw new ws(r);return d=d===n?d:ln(d),yn(c,d)}function pW(c,d){if(typeof c!="function")throw new ws(r);return d=d==null?0:hr(ln(d),0),yn(function(m){var w=m[d],b=$c(m,0,d);return w&&Bc(b,w),Xo(c,this,b)})}function mW(c,d,m){var w=!0,b=!0;if(typeof c!="function")throw new ws(r);return Ai(m)&&(w="leading"in m?!!m.leading:w,b="trailing"in m?!!m.trailing:b),HO(c,d,{leading:w,maxWait:d,trailing:b})}function gW(c){return LO(c,1)}function vW(c,d){return qC(RC(d),c)}function yW(){if(!arguments.length)return[];var c=arguments[0];return en(c)?c:[c]}function _W(c){return bs(c,h)}function wW(c,d){return d=typeof d=="function"?d:n,bs(c,h,d)}function xW(c){return bs(c,u|h)}function bW(c,d){return d=typeof d=="function"?d:n,bs(c,u|h,d)}function MW(c,d){return d==null||IP(c,d,Cr(d))}function Qs(c,d){return c===d||c!==c&&d!==d}var CW=Rv(_C),SW=Rv(function(c,d){return c>=d}),zu=FP(function(){return arguments}())?FP:function(c){return Ui(c)&&Kn.call(c,"callee")&&!xP.call(c,"callee")},en=de.isArray,EW=nP?Yo(nP):Nj;function To(c){return c!=null&&Vv(c.length)&&!Rl(c)}function Zi(c){return Ui(c)&&To(c)}function TW(c){return c===!0||c===!1||Ui(c)&&so(c)==xe}var qc=H8||rS,DW=iP?Yo(iP):Fj;function IW(c){return Ui(c)&&c.nodeType===1&&!rm(c)}function AW(c){if(c==null)return!0;if(To(c)&&(en(c)||typeof c=="string"||typeof c.splice=="function"||qc(c)||bf(c)||zu(c)))return!c.length;var d=$r(c);if(d==wt||d==Xt)return!c.size;if(nm(c))return!bC(c).length;for(var m in c)if(Kn.call(c,m))return!1;return!0}function RW(c,d){return Qp(c,d)}function PW(c,d,m){m=typeof m=="function"?m:n;var w=m?m(c,d):n;return w===n?Qp(c,d,n,m):!!w}function XC(c){if(!Ui(c))return!1;var d=so(c);return d==We||d==je||typeof c.message=="string"&&typeof c.name=="string"&&!rm(c)}function OW(c){return typeof c=="number"&&MP(c)}function Rl(c){if(!Ai(c))return!1;var d=so(c);return d==Ue||d==at||d==J||d==Nt}function jO(c){return typeof c=="number"&&c==ln(c)}function Vv(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=Y}function Ai(c){var d=typeof c;return c!=null&&(d=="object"||d=="function")}function Ui(c){return c!=null&&typeof c=="object"}var GO=rP?Yo(rP):kj;function NW(c,d){return c===d||xC(c,d,UC(d))}function FW(c,d,m){return m=typeof m=="function"?m:n,xC(c,d,UC(d),m)}function LW(c){return WO(c)&&c!=+c}function kW(c){if(wG(c))throw new Zt(i);return LP(c)}function UW(c){return c===null}function BW(c){return c==null}function WO(c){return typeof c=="number"||Ui(c)&&so(c)==pt}function rm(c){if(!Ui(c)||so(c)!=nn)return!1;var d=hv(c);if(d===null)return!0;var m=Kn.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&cv.call(m)==F8}var YC=oP?Yo(oP):Uj;function VW(c){return jO(c)&&c>=-Y&&c<=Y}var $O=sP?Yo(sP):Bj;function Hv(c){return typeof c=="string"||!en(c)&&Ui(c)&&so(c)==vt}function Ko(c){return typeof c=="symbol"||Ui(c)&&so(c)==F}var bf=aP?Yo(aP):Vj;function HW(c){return c===n}function zW(c){return Ui(c)&&$r(c)==oe}function jW(c){return Ui(c)&&so(c)==Ce}var GW=Rv(MC),WW=Rv(function(c,d){return c<=d});function qO(c){if(!c)return[];if(To(c))return Hv(c)?Ks(c):Eo(c);if(Wp&&c[Wp])return M8(c[Wp]());var d=$r(c),m=d==wt?uC:d==Xt?sv:Mf;return m(c)}function Pl(c){if(!c)return c===0?c:0;if(c=Ss(c),c===Se||c===-Se){var d=c<0?-1:1;return d*ie}return c===c?c:0}function ln(c){var d=Pl(c),m=d%1;return d===d?m?d-m:d:0}function XO(c){return c?Uu(ln(c),0,_e):0}function Ss(c){if(typeof c=="number")return c;if(Ko(c))return X;if(Ai(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=Ai(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=hP(c);var m=XM.test(c);return m||ZM.test(c)?s8(c.slice(2),m?2:8):iv.test(c)?X:+c}function YO(c){return Ha(c,Do(c))}function $W(c){return c?Uu(ln(c),-Y,Y):c===0?c:0}function Yn(c){return c==null?"":Zo(c)}var qW=_f(function(c,d){if(nm(d)||To(d)){Ha(d,Cr(d),c);return}for(var m in d)Kn.call(d,m)&&Zp(c,m,d[m])}),ZO=_f(function(c,d){Ha(d,Do(d),c)}),zv=_f(function(c,d,m,w){Ha(d,Do(d),c,w)}),XW=_f(function(c,d,m,w){Ha(d,Cr(d),c,w)}),YW=Il(gC);function ZW(c,d){var m=yf(c);return d==null?m:DP(m,d)}var KW=yn(function(c,d){c=di(c);var m=-1,w=d.length,b=w>2?d[2]:n;for(b&&ao(d[0],d[1],b)&&(w=1);++m<w;)for(var R=d[m],U=Do(R),G=-1,ee=U.length;++G<ee;){var Ee=U[G],Te=c[Ee];(Te===n||Qs(Te,mf[Ee])&&!Kn.call(c,Ee))&&(c[Ee]=R[Ee])}return c}),JW=yn(function(c){return c.push(n,hO),Xo(KO,n,c)});function QW(c,d){return cP(c,Pt(d,3),Va)}function e$(c,d){return cP(c,Pt(d,3),yC)}function t$(c,d){return c==null?c:vC(c,Pt(d,3),Do)}function n$(c,d){return c==null?c:OP(c,Pt(d,3),Do)}function i$(c,d){return c&&Va(c,Pt(d,3))}function r$(c,d){return c&&yC(c,Pt(d,3))}function o$(c){return c==null?[]:Mv(c,Cr(c))}function s$(c){return c==null?[]:Mv(c,Do(c))}function ZC(c,d,m){var w=c==null?n:Bu(c,d);return w===n?m:w}function a$(c,d){return c!=null&&gO(c,d,Aj)}function KC(c,d){return c!=null&&gO(c,d,Rj)}var l$=lO(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=uv.call(d)),c[d]=m},QC(Io)),c$=lO(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=uv.call(d)),Kn.call(c,d)?c[d].push(m):c[d]=[m]},Pt),u$=yn(Jp);function Cr(c){return To(c)?EP(c):bC(c)}function Do(c){return To(c)?EP(c,!0):Hj(c)}function d$(c,d){var m={};return d=Pt(d,3),Va(c,function(w,b,R){Tl(m,d(w,b,R),w)}),m}function f$(c,d){var m={};return d=Pt(d,3),Va(c,function(w,b,R){Tl(m,b,d(w,b,R))}),m}var h$=_f(function(c,d,m){Cv(c,d,m)}),KO=_f(function(c,d,m,w){Cv(c,d,m,w)}),p$=Il(function(c,d){var m={};if(c==null)return m;var w=!1;d=Ci(d,function(R){return R=Wc(R,c),w||(w=R.length>1),R}),Ha(c,LC(c),m),w&&(m=bs(m,u|f|h,lG));for(var b=d.length;b--;)DC(m,d[b]);return m});function m$(c,d){return JO(c,Bv(Pt(d)))}var g$=Il(function(c,d){return c==null?{}:jj(c,d)});function JO(c,d){if(c==null)return{};var m=Ci(LC(c),function(w){return[w]});return d=Pt(d),jP(c,m,function(w,b){return d(w,b[0])})}function v$(c,d,m){d=Wc(d,c);var w=-1,b=d.length;for(b||(b=1,c=n);++w<b;){var R=c==null?n:c[za(d[w])];R===n&&(w=b,R=m),c=Rl(R)?R.call(c):R}return c}function y$(c,d,m){return c==null?c:em(c,d,m)}function _$(c,d,m,w){return w=typeof w=="function"?w:n,c==null?c:em(c,d,m,w)}var QO=dO(Cr),e4=dO(Do);function w$(c,d,m){var w=en(c),b=w||qc(c)||bf(c);if(d=Pt(d,4),m==null){var R=c&&c.constructor;b?m=w?new R:[]:Ai(c)?m=Rl(R)?yf(hv(c)):{}:m={}}return(b?_s:Va)(c,function(U,G,ee){return d(m,U,G,ee)}),m}function x$(c,d){return c==null?!0:DC(c,d)}function b$(c,d,m){return c==null?c:XP(c,d,RC(m))}function M$(c,d,m,w){return w=typeof w=="function"?w:n,c==null?c:XP(c,d,RC(m),w)}function Mf(c){return c==null?[]:cC(c,Cr(c))}function C$(c){return c==null?[]:cC(c,Do(c))}function S$(c,d,m){return m===n&&(m=d,d=n),m!==n&&(m=Ss(m),m=m===m?m:0),d!==n&&(d=Ss(d),d=d===d?d:0),Uu(Ss(c),d,m)}function E$(c,d,m){return d=Pl(d),m===n?(m=d,d=0):m=Pl(m),c=Ss(c),Pj(c,d,m)}function T$(c,d,m){if(m&&typeof m!="boolean"&&ao(c,d,m)&&(d=m=n),m===n&&(typeof d=="boolean"?(m=d,d=n):typeof c=="boolean"&&(m=c,c=n)),c===n&&d===n?(c=0,d=1):(c=Pl(c),d===n?(d=c,c=0):d=Pl(d)),c>d){var w=c;c=d,d=w}if(m||c%1||d%1){var b=CP();return Wr(c+b*(d-c+o8("1e-"+((b+"").length-1))),d)}return SC(c,d)}var D$=wf(function(c,d,m){return d=d.toLowerCase(),c+(m?t4(d):d)});function t4(c){return JC(Yn(c).toLowerCase())}function n4(c){return c=Yn(c),c&&c.replace(JM,y8).replace(Y5,"")}function I$(c,d,m){c=Yn(c),d=Zo(d);var w=c.length;m=m===n?w:Uu(ln(m),0,w);var b=m;return m-=d.length,m>=0&&c.slice(m,b)==d}function A$(c){return c=Yn(c),c&&De.test(c)?c.replace(Qe,_8):c}function R$(c){return c=Yn(c),c&&So.test(c)?c.replace(br,"\\$&"):c}var P$=wf(function(c,d,m){return c+(m?"-":"")+d.toLowerCase()}),O$=wf(function(c,d,m){return c+(m?" ":"")+d.toLowerCase()}),N$=oO("toLowerCase");function F$(c,d,m){c=Yn(c),d=ln(d);var w=d?pf(c):0;if(!d||w>=d)return c;var b=(d-w)/2;return Av(vv(b),m)+c+Av(gv(b),m)}function L$(c,d,m){c=Yn(c),d=ln(d);var w=d?pf(c):0;return d&&w<d?c+Av(d-w,m):c}function k$(c,d,m){c=Yn(c),d=ln(d);var w=d?pf(c):0;return d&&w<d?Av(d-w,m)+c:c}function U$(c,d,m){return m||d==null?d=0:d&&(d=+d),W8(Yn(c).replace(Ou,""),d||0)}function B$(c,d,m){return(m?ao(c,d,m):d===n)?d=1:d=ln(d),EC(Yn(c),d)}function V$(){var c=arguments,d=Yn(c[0]);return c.length<3?d:d.replace(c[1],c[2])}var H$=wf(function(c,d,m){return c+(m?"_":"")+d.toLowerCase()});function z$(c,d,m){return m&&typeof m!="number"&&ao(c,d,m)&&(d=m=n),m=m===n?_e:m>>>0,m?(c=Yn(c),c&&(typeof d=="string"||d!=null&&!YC(d))&&(d=Zo(d),!d&&hf(c))?$c(Ks(c),0,m):c.split(d,m)):[]}var j$=wf(function(c,d,m){return c+(m?" ":"")+JC(d)});function G$(c,d,m){return c=Yn(c),m=m==null?0:Uu(ln(m),0,c.length),d=Zo(d),c.slice(m,m+d.length)==d}function W$(c,d,m){var w=E.templateSettings;m&&ao(c,d,m)&&(d=n),c=Yn(c),d=zv({},d,w,fO);var b=zv({},d.imports,w.imports,fO),R=Cr(b),U=cC(b,R),G,ee,Ee=0,Te=d.interpolate||uf,Fe="__p += '",tt=dC((d.escape||uf).source+"|"+Te.source+"|"+(Te===Ut?cf:uf).source+"|"+(d.evaluate||uf).source+"|$","g"),xt="//# sourceURL="+(Kn.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++e8+"]")+`
`;c.replace(tt,function(Lt,bn,An,Jo,lo,Qo){return An||(An=Jo),Fe+=c.slice(Ee,Qo).replace(I,w8),bn&&(G=!0,Fe+=`' +
__e(`+bn+`) +
'`),lo&&(ee=!0,Fe+=`';
`+lo+`;
__p += '`),An&&(Fe+=`' +
((__t = (`+An+`)) == null ? '' : __t) +
'`),Ee=Qo+Lt.length,Lt}),Fe+=`';
`;var Ft=Kn.call(d,"variable")&&d.variable;if(!Ft)Fe=`with (obj) {
`+Fe+`
}
`;else if(vs.test(Ft))throw new Zt(o);Fe=(ee?Fe.replace(vn,""):Fe).replace(Yt,"$1").replace(Xn,"$1;"),Fe="function("+(Ft||"obj")+`) {
`+(Ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Fe+`return __p
}`;var fn=r4(function(){return Wn(R,xt+"return "+Fe).apply(n,U)});if(fn.source=Fe,XC(fn))throw fn;return fn}function $$(c){return Yn(c).toLowerCase()}function q$(c){return Yn(c).toUpperCase()}function X$(c,d,m){if(c=Yn(c),c&&(m||d===n))return hP(c);if(!c||!(d=Zo(d)))return c;var w=Ks(c),b=Ks(d),R=pP(w,b),U=mP(w,b)+1;return $c(w,R,U).join("")}function Y$(c,d,m){if(c=Yn(c),c&&(m||d===n))return c.slice(0,vP(c)+1);if(!c||!(d=Zo(d)))return c;var w=Ks(c),b=mP(w,Ks(d))+1;return $c(w,0,b).join("")}function Z$(c,d,m){if(c=Yn(c),c&&(m||d===n))return c.replace(Ou,"");if(!c||!(d=Zo(d)))return c;var w=Ks(c),b=pP(w,Ks(d));return $c(w,b).join("")}function K$(c,d){var m=$,w=N;if(Ai(d)){var b="separator"in d?d.separator:b;m="length"in d?ln(d.length):m,w="omission"in d?Zo(d.omission):w}c=Yn(c);var R=c.length;if(hf(c)){var U=Ks(c);R=U.length}if(m>=R)return c;var G=m-pf(w);if(G<1)return w;var ee=U?$c(U,0,G).join(""):c.slice(0,G);if(b===n)return ee+w;if(U&&(G+=ee.length-G),YC(b)){if(c.slice(G).search(b)){var Ee,Te=ee;for(b.global||(b=dC(b.source,Yn(jp.exec(b))+"g")),b.lastIndex=0;Ee=b.exec(Te);)var Fe=Ee.index;ee=ee.slice(0,Fe===n?G:Fe)}}else if(c.indexOf(Zo(b),G)!=G){var tt=ee.lastIndexOf(b);tt>-1&&(ee=ee.slice(0,tt))}return ee+w}function J$(c){return c=Yn(c),c&&pe.test(c)?c.replace(Z,T8):c}var Q$=wf(function(c,d,m){return c+(m?" ":"")+d.toUpperCase()}),JC=oO("toUpperCase");function i4(c,d,m){return c=Yn(c),d=m?n:d,d===n?b8(c)?A8(c):h8(c):c.match(d)||[]}var r4=yn(function(c,d){try{return Xo(c,n,d)}catch(m){return XC(m)?m:new Zt(m)}}),e7=Il(function(c,d){return _s(d,function(m){m=za(m),Tl(c,m,$C(c[m],c))}),c});function t7(c){var d=c==null?0:c.length,m=Pt();return c=d?Ci(c,function(w){if(typeof w[1]!="function")throw new ws(r);return[m(w[0]),w[1]]}):[],yn(function(w){for(var b=-1;++b<d;){var R=c[b];if(Xo(R[0],this,w))return Xo(R[1],this,w)}})}function n7(c){return Tj(bs(c,u))}function QC(c){return function(){return c}}function i7(c,d){return c==null||c!==c?d:c}var r7=aO(),o7=aO(!0);function Io(c){return c}function eS(c){return kP(typeof c=="function"?c:bs(c,u))}function s7(c){return BP(bs(c,u))}function a7(c,d){return VP(c,bs(d,u))}var l7=yn(function(c,d){return function(m){return Jp(m,c,d)}}),c7=yn(function(c,d){return function(m){return Jp(c,m,d)}});function tS(c,d,m){var w=Cr(d),b=Mv(d,w);m==null&&!(Ai(d)&&(b.length||!w.length))&&(m=d,d=c,c=this,b=Mv(d,Cr(d)));var R=!(Ai(m)&&"chain"in m)||!!m.chain,U=Rl(c);return _s(b,function(G){var ee=d[G];c[G]=ee,U&&(c.prototype[G]=function(){var Ee=this.__chain__;if(R||Ee){var Te=c(this.__wrapped__),Fe=Te.__actions__=Eo(this.__actions__);return Fe.push({func:ee,args:arguments,thisArg:c}),Te.__chain__=Ee,Te}return ee.apply(c,Bc([this.value()],arguments))})}),c}function u7(){return Mr._===this&&(Mr._=L8),this}function nS(){}function d7(c){return c=ln(c),yn(function(d){return HP(d,c)})}var f7=OC(Ci),h7=OC(lP),p7=OC(rC);function o4(c){return VC(c)?oC(za(c)):Gj(c)}function m7(c){return function(d){return c==null?n:Bu(c,d)}}var g7=cO(),v7=cO(!0);function iS(){return[]}function rS(){return!1}function y7(){return{}}function _7(){return""}function w7(){return!0}function x7(c,d){if(c=ln(c),c<1||c>Y)return[];var m=_e,w=Wr(c,_e);d=Pt(d),c-=_e;for(var b=lC(w,d);++m<c;)d(m);return b}function b7(c){return en(c)?Ci(c,za):Ko(c)?[c]:Eo(SO(Yn(c)))}function M7(c){var d=++N8;return Yn(c)+d}var C7=Iv(function(c,d){return c+d},0),S7=NC("ceil"),E7=Iv(function(c,d){return c/d},1),T7=NC("floor");function D7(c){return c&&c.length?bv(c,Io,_C):n}function I7(c,d){return c&&c.length?bv(c,Pt(d,2),_C):n}function A7(c){return dP(c,Io)}function R7(c,d){return dP(c,Pt(d,2))}function P7(c){return c&&c.length?bv(c,Io,MC):n}function O7(c,d){return c&&c.length?bv(c,Pt(d,2),MC):n}var N7=Iv(function(c,d){return c*d},1),F7=NC("round"),L7=Iv(function(c,d){return c-d},0);function k7(c){return c&&c.length?aC(c,Io):0}function U7(c,d){return c&&c.length?aC(c,Pt(d,2)):0}return E.after=sW,E.ary=LO,E.assign=qW,E.assignIn=ZO,E.assignInWith=zv,E.assignWith=XW,E.at=YW,E.before=kO,E.bind=$C,E.bindAll=e7,E.bindKey=UO,E.castArray=yW,E.chain=OO,E.chunk=TG,E.compact=DG,E.concat=IG,E.cond=t7,E.conforms=n7,E.constant=QC,E.countBy=k6,E.create=ZW,E.curry=BO,E.curryRight=VO,E.debounce=HO,E.defaults=KW,E.defaultsDeep=JW,E.defer=aW,E.delay=lW,E.difference=AG,E.differenceBy=RG,E.differenceWith=PG,E.drop=OG,E.dropRight=NG,E.dropRightWhile=FG,E.dropWhile=LG,E.fill=kG,E.filter=B6,E.flatMap=z6,E.flatMapDeep=j6,E.flatMapDepth=G6,E.flatten=IO,E.flattenDeep=UG,E.flattenDepth=BG,E.flip=cW,E.flow=r7,E.flowRight=o7,E.fromPairs=VG,E.functions=o$,E.functionsIn=s$,E.groupBy=W6,E.initial=zG,E.intersection=jG,E.intersectionBy=GG,E.intersectionWith=WG,E.invert=l$,E.invertBy=c$,E.invokeMap=q6,E.iteratee=eS,E.keyBy=X6,E.keys=Cr,E.keysIn=Do,E.map=Lv,E.mapKeys=d$,E.mapValues=f$,E.matches=s7,E.matchesProperty=a7,E.memoize=Uv,E.merge=h$,E.mergeWith=KO,E.method=l7,E.methodOf=c7,E.mixin=tS,E.negate=Bv,E.nthArg=d7,E.omit=p$,E.omitBy=m$,E.once=uW,E.orderBy=Y6,E.over=f7,E.overArgs=dW,E.overEvery=h7,E.overSome=p7,E.partial=qC,E.partialRight=zO,E.partition=Z6,E.pick=g$,E.pickBy=JO,E.property=o4,E.propertyOf=m7,E.pull=YG,E.pullAll=RO,E.pullAllBy=ZG,E.pullAllWith=KG,E.pullAt=JG,E.range=g7,E.rangeRight=v7,E.rearg=fW,E.reject=Q6,E.remove=QG,E.rest=hW,E.reverse=GC,E.sampleSize=tW,E.set=y$,E.setWith=_$,E.shuffle=nW,E.slice=e6,E.sortBy=oW,E.sortedUniq=a6,E.sortedUniqBy=l6,E.split=z$,E.spread=pW,E.tail=c6,E.take=u6,E.takeRight=d6,E.takeRightWhile=f6,E.takeWhile=h6,E.tap=D6,E.throttle=mW,E.thru=Fv,E.toArray=qO,E.toPairs=QO,E.toPairsIn=e4,E.toPath=b7,E.toPlainObject=YO,E.transform=w$,E.unary=gW,E.union=p6,E.unionBy=m6,E.unionWith=g6,E.uniq=v6,E.uniqBy=y6,E.uniqWith=_6,E.unset=x$,E.unzip=WC,E.unzipWith=PO,E.update=b$,E.updateWith=M$,E.values=Mf,E.valuesIn=C$,E.without=w6,E.words=i4,E.wrap=vW,E.xor=x6,E.xorBy=b6,E.xorWith=M6,E.zip=C6,E.zipObject=S6,E.zipObjectDeep=E6,E.zipWith=T6,E.entries=QO,E.entriesIn=e4,E.extend=ZO,E.extendWith=zv,tS(E,E),E.add=C7,E.attempt=r4,E.camelCase=D$,E.capitalize=t4,E.ceil=S7,E.clamp=S$,E.clone=_W,E.cloneDeep=xW,E.cloneDeepWith=bW,E.cloneWith=wW,E.conformsTo=MW,E.deburr=n4,E.defaultTo=i7,E.divide=E7,E.endsWith=I$,E.eq=Qs,E.escape=A$,E.escapeRegExp=R$,E.every=U6,E.find=V6,E.findIndex=TO,E.findKey=QW,E.findLast=H6,E.findLastIndex=DO,E.findLastKey=e$,E.floor=T7,E.forEach=NO,E.forEachRight=FO,E.forIn=t$,E.forInRight=n$,E.forOwn=i$,E.forOwnRight=r$,E.get=ZC,E.gt=CW,E.gte=SW,E.has=a$,E.hasIn=KC,E.head=AO,E.identity=Io,E.includes=$6,E.indexOf=HG,E.inRange=E$,E.invoke=u$,E.isArguments=zu,E.isArray=en,E.isArrayBuffer=EW,E.isArrayLike=To,E.isArrayLikeObject=Zi,E.isBoolean=TW,E.isBuffer=qc,E.isDate=DW,E.isElement=IW,E.isEmpty=AW,E.isEqual=RW,E.isEqualWith=PW,E.isError=XC,E.isFinite=OW,E.isFunction=Rl,E.isInteger=jO,E.isLength=Vv,E.isMap=GO,E.isMatch=NW,E.isMatchWith=FW,E.isNaN=LW,E.isNative=kW,E.isNil=BW,E.isNull=UW,E.isNumber=WO,E.isObject=Ai,E.isObjectLike=Ui,E.isPlainObject=rm,E.isRegExp=YC,E.isSafeInteger=VW,E.isSet=$O,E.isString=Hv,E.isSymbol=Ko,E.isTypedArray=bf,E.isUndefined=HW,E.isWeakMap=zW,E.isWeakSet=jW,E.join=$G,E.kebabCase=P$,E.last=Cs,E.lastIndexOf=qG,E.lowerCase=O$,E.lowerFirst=N$,E.lt=GW,E.lte=WW,E.max=D7,E.maxBy=I7,E.mean=A7,E.meanBy=R7,E.min=P7,E.minBy=O7,E.stubArray=iS,E.stubFalse=rS,E.stubObject=y7,E.stubString=_7,E.stubTrue=w7,E.multiply=N7,E.nth=XG,E.noConflict=u7,E.noop=nS,E.now=kv,E.pad=F$,E.padEnd=L$,E.padStart=k$,E.parseInt=U$,E.random=T$,E.reduce=K6,E.reduceRight=J6,E.repeat=B$,E.replace=V$,E.result=v$,E.round=F7,E.runInContext=K,E.sample=eW,E.size=iW,E.snakeCase=H$,E.some=rW,E.sortedIndex=t6,E.sortedIndexBy=n6,E.sortedIndexOf=i6,E.sortedLastIndex=r6,E.sortedLastIndexBy=o6,E.sortedLastIndexOf=s6,E.startCase=j$,E.startsWith=G$,E.subtract=L7,E.sum=k7,E.sumBy=U7,E.template=W$,E.times=x7,E.toFinite=Pl,E.toInteger=ln,E.toLength=XO,E.toLower=$$,E.toNumber=Ss,E.toSafeInteger=$W,E.toString=Yn,E.toUpper=q$,E.trim=X$,E.trimEnd=Y$,E.trimStart=Z$,E.truncate=K$,E.unescape=J$,E.uniqueId=M7,E.upperCase=Q$,E.upperFirst=JC,E.each=NO,E.eachRight=FO,E.first=AO,tS(E,function(){var c={};return Va(E,function(d,m){Kn.call(E.prototype,m)||(c[m]=d)}),c}(),{chain:!1}),E.VERSION=e,_s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){E[c].placeholder=E}),_s(["drop","take"],function(c,d){Tn.prototype[c]=function(m){m=m===n?1:hr(ln(m),0);var w=this.__filtered__&&!d?new Tn(this):this.clone();return w.__filtered__?w.__takeCount__=Wr(m,w.__takeCount__):w.__views__.push({size:Wr(m,_e),type:c+(w.__dir__<0?"Right":"")}),w},Tn.prototype[c+"Right"]=function(m){return this.reverse()[c](m).reverse()}}),_s(["filter","map","takeWhile"],function(c,d){var m=d+1,w=m==he||m==Re;Tn.prototype[c]=function(b){var R=this.clone();return R.__iteratees__.push({iteratee:Pt(b,3),type:m}),R.__filtered__=R.__filtered__||w,R}}),_s(["head","last"],function(c,d){var m="take"+(d?"Right":"");Tn.prototype[c]=function(){return this[m](1).value()[0]}}),_s(["initial","tail"],function(c,d){var m="drop"+(d?"":"Right");Tn.prototype[c]=function(){return this.__filtered__?new Tn(this):this[m](1)}}),Tn.prototype.compact=function(){return this.filter(Io)},Tn.prototype.find=function(c){return this.filter(c).head()},Tn.prototype.findLast=function(c){return this.reverse().find(c)},Tn.prototype.invokeMap=yn(function(c,d){return typeof c=="function"?new Tn(this):this.map(function(m){return Jp(m,c,d)})}),Tn.prototype.reject=function(c){return this.filter(Bv(Pt(c)))},Tn.prototype.slice=function(c,d){c=ln(c);var m=this;return m.__filtered__&&(c>0||d<0)?new Tn(m):(c<0?m=m.takeRight(-c):c&&(m=m.drop(c)),d!==n&&(d=ln(d),m=d<0?m.dropRight(-d):m.take(d-c)),m)},Tn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Tn.prototype.toArray=function(){return this.take(_e)},Va(Tn.prototype,function(c,d){var m=/^(?:filter|find|map|reject)|While$/.test(d),w=/^(?:head|last)$/.test(d),b=E[w?"take"+(d=="last"?"Right":""):d],R=w||/^find/.test(d);b&&(E.prototype[d]=function(){var U=this.__wrapped__,G=w?[1]:arguments,ee=U instanceof Tn,Ee=G[0],Te=ee||en(U),Fe=function(bn){var An=b.apply(E,Bc([bn],G));return w&&tt?An[0]:An};Te&&m&&typeof Ee=="function"&&Ee.length!=1&&(ee=Te=!1);var tt=this.__chain__,xt=!!this.__actions__.length,Ft=R&&!tt,fn=ee&&!xt;if(!R&&Te){U=fn?U:new Tn(this);var Lt=c.apply(U,G);return Lt.__actions__.push({func:Fv,args:[Fe],thisArg:n}),new xs(Lt,tt)}return Ft&&fn?c.apply(this,G):(Lt=this.thru(Fe),Ft?w?Lt.value()[0]:Lt.value():Lt)})}),_s(["pop","push","shift","sort","splice","unshift"],function(c){var d=av[c],m=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",w=/^(?:pop|shift)$/.test(c);E.prototype[c]=function(){var b=arguments;if(w&&!this.__chain__){var R=this.value();return d.apply(en(R)?R:[],b)}return this[m](function(U){return d.apply(en(U)?U:[],b)})}}),Va(Tn.prototype,function(c,d){var m=E[d];if(m){var w=m.name+"";Kn.call(vf,w)||(vf[w]=[]),vf[w].push({name:d,func:m})}}),vf[Dv(n,x).name]=[{name:"wrapper",func:n}],Tn.prototype.clone=J8,Tn.prototype.reverse=Q8,Tn.prototype.value=ej,E.prototype.at=I6,E.prototype.chain=A6,E.prototype.commit=R6,E.prototype.next=P6,E.prototype.plant=N6,E.prototype.reverse=F6,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=L6,E.prototype.first=E.prototype.head,Wp&&(E.prototype[Wp]=O6),E},Hc=R8();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Mr._=Hc,define(function(){return Hc})):Nu?((Nu.exports=Hc)._=Hc,eC._=Hc):Mr._=Hc}).call(Yh)});var _V=c4((xI,bI)=>{"use strict";(function(n,e){typeof xI=="object"&&typeof bI<"u"?bI.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Compressor=e())})(xI,function(){"use strict";function n(ge,re){var B=Object.keys(ge);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(ge);re&&(J=J.filter(function(xe){return Object.getOwnPropertyDescriptor(ge,xe).enumerable})),B.push.apply(B,J)}return B}function e(ge){for(var re=1;re<arguments.length;re++){var B=arguments[re]!=null?arguments[re]:{};re%2?n(Object(B),!0).forEach(function(J){o(ge,J,B[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ge,Object.getOwnPropertyDescriptors(B)):n(Object(B)).forEach(function(J){Object.defineProperty(ge,J,Object.getOwnPropertyDescriptor(B,J))})}return ge}function t(ge,re){if(!(ge instanceof re))throw new TypeError("Cannot call a class as a function")}function i(ge,re){for(var B=0;B<re.length;B++){var J=re[B];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(ge,l(J.key),J)}}function r(ge,re,B){return re&&i(ge.prototype,re),B&&i(ge,B),Object.defineProperty(ge,"prototype",{writable:!1}),ge}function o(ge,re,B){return re=l(re),re in ge?Object.defineProperty(ge,re,{value:B,enumerable:!0,configurable:!0,writable:!0}):ge[re]=B,ge}function s(){return s=Object.assign?Object.assign.bind():function(ge){for(var re=1;re<arguments.length;re++){var B=arguments[re];for(var J in B)Object.prototype.hasOwnProperty.call(B,J)&&(ge[J]=B[J])}return ge},s.apply(this,arguments)}function a(ge,re){if(typeof ge!="object"||ge===null)return ge;var B=ge[Symbol.toPrimitive];if(B!==void 0){var J=B.call(ge,re||"default");if(typeof J!="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(re==="string"?String:Number)(ge)}function l(ge){var re=a(ge,"string");return typeof re=="symbol"?re:String(re)}var u={exports:{}};(function(ge){typeof window>"u"||function(re){var B=re.HTMLCanvasElement&&re.HTMLCanvasElement.prototype,J=re.Blob&&function(){try{return!!new Blob}catch{return!1}}(),xe=J&&re.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),se=re.BlobBuilder||re.WebKitBlobBuilder||re.MozBlobBuilder||re.MSBlobBuilder,je=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,We=(J||se)&&re.atob&&re.ArrayBuffer&&re.Uint8Array&&function(Ue){var at,wt,pt,z,nn,$e,Nt,Ke,Xt;if(at=Ue.match(je),!at)throw new Error("invalid data URI");for(wt=at[2]?at[1]:"text/plain"+(at[3]||";charset=US-ASCII"),pt=!!at[4],z=Ue.slice(at[0].length),pt?nn=atob(z):nn=decodeURIComponent(z),$e=new ArrayBuffer(nn.length),Nt=new Uint8Array($e),Ke=0;Ke<nn.length;Ke+=1)Nt[Ke]=nn.charCodeAt(Ke);return J?new Blob([xe?Nt:$e],{type:wt}):(Xt=new se,Xt.append($e),Xt.getBlob(wt))};re.HTMLCanvasElement&&!B.toBlob&&(B.mozGetAsFile?B.toBlob=function(Ue,at,wt){var pt=this;setTimeout(function(){wt&&B.toDataURL&&We?Ue(We(pt.toDataURL(at,wt))):Ue(pt.mozGetAsFile("blob",at))})}:B.toDataURL&&We&&(B.msToBlob?B.toBlob=function(Ue,at,wt){var pt=this;setTimeout(function(){(at&&at!=="image/png"||wt)&&B.toDataURL&&We?Ue(We(pt.toDataURL(at,wt))):Ue(pt.msToBlob(at))})}:B.toBlob=function(Ue,at,wt){var pt=this;setTimeout(function(){Ue(We(pt.toDataURL(at,wt)))})})),ge.exports?ge.exports=We:re.dataURLtoBlob=We}(window)})(u);var f=u.exports,h=function(re){return typeof Blob>"u"?!1:re instanceof Blob||Object.prototype.toString.call(re)==="[object Blob]"},p={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},g=typeof window<"u"&&typeof window.document<"u",v=g?window:{},x=function(re){return re>0&&re<1/0},y=Array.prototype.slice;function _(ge){return Array.from?Array.from(ge):y.call(ge)}var T=/^image\/.+$/;function M(ge){return T.test(ge)}function C(ge){var re=M(ge)?ge.substr(6):"";return re==="jpeg"&&(re="jpg"),".".concat(re)}var H=String.fromCharCode;function L(ge,re,B){var J="",xe;for(B+=re,xe=re;xe<B;xe+=1)J+=H(ge.getUint8(xe));return J}var k=v.btoa;function $(ge,re){for(var B=[],J=8192,xe=new Uint8Array(ge);xe.length>0;)B.push(H.apply(null,_(xe.subarray(0,J)))),xe=xe.subarray(J);return"data:".concat(re,";base64,").concat(k(B.join("")))}function N(ge){var re=new DataView(ge),B;try{var J,xe,se;if(re.getUint8(0)===255&&re.getUint8(1)===216)for(var je=re.byteLength,We=2;We+1<je;){if(re.getUint8(We)===255&&re.getUint8(We+1)===225){xe=We;break}We+=1}if(xe){var Ue=xe+4,at=xe+10;if(L(re,Ue,4)==="Exif"){var wt=re.getUint16(at);if(J=wt===18761,(J||wt===19789)&&re.getUint16(at+2,J)===42){var pt=re.getUint32(at+4,J);pt>=8&&(se=at+pt)}}}if(se){var z=re.getUint16(se,J),nn,$e;for($e=0;$e<z;$e+=1)if(nn=se+$e*12+2,re.getUint16(nn,J)===274){nn+=8,B=re.getUint16(nn,J),re.setUint16(nn,1,J);break}}}catch{B=1}return B}function A(ge){var re=0,B=1,J=1;switch(ge){case 2:B=-1;break;case 3:re=-180;break;case 4:J=-1;break;case 5:re=90,J=-1;break;case 6:re=90;break;case 7:re=90,B=-1;break;case 8:re=-90;break}return{rotate:re,scaleX:B,scaleY:J}}var j=/\.\d*(?:0|9){12}\d*$/;function he(ge){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return j.test(ge)?Math.round(ge*re)/re:ge}function ae(ge){var re=ge.aspectRatio,B=ge.height,J=ge.width,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",se=x(J),je=x(B);if(se&&je){var We=B*re;(xe==="contain"||xe==="none")&&We>J||xe==="cover"&&We<J?B=J/re:J=B*re}else se?B=J/re:je&&(J=B*re);return{width:J,height:B}}function Re(ge){for(var re=_(new Uint8Array(ge)),B=re.length,J=[],xe=0;xe+3<B;){var se=re[xe],je=re[xe+1];if(se===255&&je===218)break;if(se===255&&je===216)xe+=2;else{var We=re[xe+2]*256+re[xe+3],Ue=xe+We+2,at=re.slice(xe,Ue);J.push(at),xe=Ue}}return J.reduce(function(wt,pt){return pt[0]===255&&pt[1]===225?wt.concat(pt):wt},[])}function Se(ge,re){var B=_(new Uint8Array(ge));if(B[2]!==255||B[3]!==224)return ge;var J=B[4]*256+B[5],xe=[255,216].concat(re,B.slice(4+J));return new Uint8Array(xe)}var Y=v.ArrayBuffer,ie=v.FileReader,X=v.URL||v.webkitURL,_e=/\.\w+$/,Ve=v.Compressor,rt=function(){function ge(re,B){t(this,ge),this.file=re,this.exif=[],this.image=new Image,this.options=e(e({},p),B),this.aborted=!1,this.result=null,this.init()}return r(ge,[{key:"init",value:function(){var B=this,J=this.file,xe=this.options;if(!h(J)){this.fail(new Error("The first argument must be a File or Blob object."));return}var se=J.type;if(!M(se)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!X||!ie){this.fail(new Error("The current browser does not support image compression."));return}Y||(xe.checkOrientation=!1,xe.retainExif=!1);var je=se==="image/jpeg",We=je&&xe.checkOrientation,Ue=je&&xe.retainExif;if(X&&!We&&!Ue)this.load({url:X.createObjectURL(J)});else{var at=new ie;this.reader=at,at.onload=function(wt){var pt=wt.target,z=pt.result,nn={},$e=1;We&&($e=N(z),$e>1&&s(nn,A($e))),Ue&&(B.exif=Re(z)),We||Ue?!X||$e>1?nn.url=$(z,se):nn.url=X.createObjectURL(J):nn.url=z,B.load(nn)},at.onabort=function(){B.fail(new Error("Aborted to read the image with FileReader."))},at.onerror=function(){B.fail(new Error("Failed to read the image with FileReader."))},at.onloadend=function(){B.reader=null},We||Ue?at.readAsArrayBuffer(J):at.readAsDataURL(J)}}},{key:"load",value:function(B){var J=this,xe=this.file,se=this.image;se.onload=function(){J.draw(e(e({},B),{},{naturalWidth:se.naturalWidth,naturalHeight:se.naturalHeight}))},se.onabort=function(){J.fail(new Error("Aborted to load the image."))},se.onerror=function(){J.fail(new Error("Failed to load the image."))},v.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(v.navigator.userAgent)&&(se.crossOrigin="anonymous"),se.alt=xe.name,se.src=B.url}},{key:"draw",value:function(B){var J=this,xe=B.naturalWidth,se=B.naturalHeight,je=B.rotate,We=je===void 0?0:je,Ue=B.scaleX,at=Ue===void 0?1:Ue,wt=B.scaleY,pt=wt===void 0?1:wt,z=this.file,nn=this.image,$e=this.options,Nt=document.createElement("canvas"),Ke=Nt.getContext("2d"),Xt=Math.abs(We)%180===90,vt=($e.resize==="contain"||$e.resize==="cover")&&x($e.width)&&x($e.height),F=Math.max($e.maxWidth,0)||1/0,S=Math.max($e.maxHeight,0)||1/0,oe=Math.max($e.minWidth,0)||0,Ce=Math.max($e.minHeight,0)||0,Pe=xe/se,fe=$e.width,Ye=$e.height;if(Xt){var Ze=[S,F];F=Ze[0],S=Ze[1];var bt=[Ce,oe];oe=bt[0],Ce=bt[1];var Mt=[Ye,fe];fe=Mt[0],Ye=Mt[1]}vt&&(Pe=fe/Ye);var ke=ae({aspectRatio:Pe,width:F,height:S},"contain");F=ke.width,S=ke.height;var ot=ae({aspectRatio:Pe,width:oe,height:Ce},"cover");if(oe=ot.width,Ce=ot.height,vt){var Ct=ae({aspectRatio:Pe,width:fe,height:Ye},$e.resize);fe=Ct.width,Ye=Ct.height}else{var At=ae({aspectRatio:Pe,width:fe,height:Ye}),st=At.width;fe=st===void 0?xe:st;var vn=At.height;Ye=vn===void 0?se:vn}fe=Math.floor(he(Math.min(Math.max(fe,oe),F))),Ye=Math.floor(he(Math.min(Math.max(Ye,Ce),S)));var Yt=-fe/2,Xn=-Ye/2,Z=fe,Qe=Ye,pe=[];if(vt){var De=0,it=0,Je=xe,Ut=se,ui=ae({aspectRatio:Pe,width:xe,height:se},{contain:"cover",cover:"contain"}[$e.resize]);Je=ui.width,Ut=ui.height,De=(xe-Je)/2,it=(se-Ut)/2,pe.push(De,it,Je,Ut)}if(pe.push(Yt,Xn,Z,Qe),Xt){var Xi=[Ye,fe];fe=Xi[0],Ye=Xi[1]}Nt.width=fe,Nt.height=Ye,M($e.mimeType)||($e.mimeType=z.type);var Nn="transparent";z.size>$e.convertSize&&$e.convertTypes.indexOf($e.mimeType)>=0&&($e.mimeType="image/jpeg");var br=$e.mimeType==="image/jpeg";if(br&&(Nn="#fff"),Ke.fillStyle=Nn,Ke.fillRect(0,0,fe,Ye),$e.beforeDraw&&$e.beforeDraw.call(this,Ke,Nt),!this.aborted&&(Ke.save(),Ke.translate(fe/2,Ye/2),Ke.rotate(We*Math.PI/180),Ke.scale(at,pt),Ke.drawImage.apply(Ke,[nn].concat(pe)),Ke.restore(),$e.drew&&$e.drew.call(this,Ke,Nt),!this.aborted)){var So=function(Ua){if(!J.aborted){var gs=function(vs){return J.done({naturalWidth:xe,naturalHeight:se,result:vs})};if(Ua&&br&&$e.retainExif&&J.exif&&J.exif.length>0){var Lc=function(vs){return gs(f($(Se(vs,J.exif),$e.mimeType)))};if(Ua.arrayBuffer)Ua.arrayBuffer().then(Lc).catch(function(){J.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var Zs=new ie;J.reader=Zs,Zs.onload=function(kc){var vs=kc.target;Lc(vs.result)},Zs.onabort=function(){J.fail(new Error("Aborted to read the compressed image with FileReader."))},Zs.onerror=function(){J.fail(new Error("Failed to read the compressed image with FileReader."))},Zs.onloadend=function(){J.reader=null},Zs.readAsArrayBuffer(Ua)}}else gs(Ua)}};Nt.toBlob?Nt.toBlob(So,$e.mimeType,$e.quality):So(f(Nt.toDataURL($e.mimeType,$e.quality)))}}},{key:"done",value:function(B){var J=B.naturalWidth,xe=B.naturalHeight,se=B.result,je=this.file,We=this.image,Ue=this.options;if(X&&We.src.indexOf("blob:")===0&&X.revokeObjectURL(We.src),se)if(Ue.strict&&!Ue.retainExif&&se.size>je.size&&Ue.mimeType===je.type&&!(Ue.width>J||Ue.height>xe||Ue.minWidth>J||Ue.minHeight>xe||Ue.maxWidth<J||Ue.maxHeight<xe))se=je;else{var at=new Date;se.lastModified=at.getTime(),se.lastModifiedDate=at,se.name=je.name,se.name&&se.type!==je.type&&(se.name=se.name.replace(_e,C(se.type)))}else se=je;this.result=se,Ue.success&&Ue.success.call(this,se)}},{key:"fail",value:function(B){var J=this.options;if(J.error)J.error.call(this,B);else throw B}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Ve,ge}},{key:"setDefaults",value:function(B){s(p,B)}}]),ge}();return rt})});function dS(n,e){return Object.is(n,e)}var pr=null,Gv=!1,fS=1,Es=Symbol("SIGNAL");function Dn(n){let e=pr;return pr=n,e}function hS(){return pr}var Cf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sm(n){if(Gv)throw new Error("");if(pr===null)return;pr.consumerOnSignalRead(n);let e=pr.nextProducerIndex++;if(Yv(pr),e<pr.producerNode.length&&pr.producerNode[e]!==n&&om(pr)){let t=pr.producerNode[e];Xv(t,pr.producerIndexOfThis[e])}pr.producerNode[e]!==n&&(pr.producerNode[e]=n,pr.producerIndexOfThis[e]=om(pr)?d4(n,pr,e):0),pr.producerLastReadVersion[e]=n.version}function u4(){fS++}function pS(n){if(!(om(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===fS)){if(!n.producerMustRecompute(n)&&!qv(n)){uS(n);return}n.producerRecomputeValue(n),uS(n)}}function mS(n){if(n.liveConsumerNode===void 0)return;let e=Gv;Gv=!0;try{for(let t of n.liveConsumerNode)t.dirty||$7(t)}finally{Gv=e}}function gS(){return pr?.consumerAllowSignalWrites!==!1}function $7(n){n.dirty=!0,mS(n),n.consumerMarkedDirty?.(n)}function uS(n){n.dirty=!1,n.lastCleanEpoch=fS}function am(n){return n&&(n.nextProducerIndex=0),Dn(n)}function $v(n,e){if(Dn(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(om(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Xv(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qv(n){Yv(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(pS(t),i!==t.version))return!0}return!1}function lm(n){if(Yv(n),om(n))for(let e=0;e<n.producerNode.length;e++)Xv(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function d4(n,e,t){if(f4(n),n.liveConsumerNode.length===0&&h4(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=d4(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Xv(n,e){if(f4(n),n.liveConsumerNode.length===1&&h4(n))for(let i=0;i<n.producerNode.length;i++)Xv(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Yv(r),r.producerIndexOfThis[i]=e}}function om(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yv(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function f4(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function h4(n){return n.producerNode!==void 0}function vS(n,e){let t=Object.create(q7);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(pS(t),sm(t),t.value===Wv)throw t.error;return t.value};return i[Es]=t,i}var lS=Symbol("UNSET"),cS=Symbol("COMPUTING"),Wv=Symbol("ERRORED"),q7=ft(we({},Cf),{value:lS,dirty:!0,error:null,equal:dS,kind:"computed",producerMustRecompute(n){return n.value===lS||n.value===cS},producerRecomputeValue(n){if(n.value===cS)throw new Error("Detected cycle in computations.");let e=n.value;n.value=cS;let t=am(n),i,r=!1;try{i=n.computation(),Dn(null),r=e!==lS&&e!==Wv&&i!==Wv&&n.equal(e,i)}catch(o){i=Wv,n.error=o}finally{$v(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function X7(){throw new Error}var p4=X7;function m4(n){p4(n)}function yS(n){p4=n}var Y7=null;function _S(n,e){let t=Object.create(Zv);t.value=n,e!==void 0&&(t.equal=e);let i=()=>(sm(t),t.value);return i[Es]=t,i}function cm(n,e){gS()||m4(n),n.equal(n.value,e)||(n.value=e,Z7(n))}function wS(n,e){gS()||m4(n),cm(n,e(n.value))}var Zv=ft(we({},Cf),{equal:dS,value:void 0,kind:"signal"});function Z7(n){n.version++,u4(),mS(n),Y7?.()}function xS(n){let e=Dn(null);try{return n()}finally{Dn(e)}}var bS;function um(){return bS}function Nl(n){let e=bS;return bS=n,e}var Kv=Symbol("NotFound");function Ot(n){return typeof n=="function"}function Sf(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Jv=Sf(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Gu(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Bi=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ot(i))try{i()}catch(o){e=o instanceof Jv?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{g4(o)}catch(s){e=e??[],s instanceof Jv?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Jv(e)}}add(e){var t;if(e&&e!==this)if(this.closed)g4(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Gu(t,e)}remove(e){let{_finalizers:t}=this;t&&Gu(t,e),e instanceof n&&e._removeParent(this)}};Bi.EMPTY=(()=>{let n=new Bi;return n.closed=!0,n})();var MS=Bi.EMPTY;function Qv(n){return n instanceof Bi||n&&"closed"in n&&Ot(n.remove)&&Ot(n.add)&&Ot(n.unsubscribe)}function g4(n){Ot(n)?n():n.unsubscribe()}var ta={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ef={setTimeout(n,e,...t){let{delegate:i}=Ef;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ef;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ey(n){Ef.setTimeout(()=>{let{onUnhandledError:e}=ta;if(e)e(n);else throw n})}function Fl(){}var v4=CS("C",void 0,void 0);function y4(n){return CS("E",void 0,n)}function _4(n){return CS("N",n,void 0)}function CS(n,e,t){return{kind:n,value:e,error:t}}var Wu=null;function Tf(n){if(ta.useDeprecatedSynchronousErrorHandling){let e=!Wu;if(e&&(Wu={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Wu;if(Wu=null,t)throw i}}else n()}function w4(n){ta.useDeprecatedSynchronousErrorHandling&&Wu&&(Wu.errorThrown=!0,Wu.error=n)}var $u=class extends Bi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qv(e)&&e.add(this)):this.destination=n9}static create(e,t,i){return new na(e,t,i)}next(e){this.isStopped?ES(_4(e),this):this._next(e)}error(e){this.isStopped?ES(y4(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ES(v4,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},e9=Function.prototype.bind;function SS(n,e){return e9.call(n,e)}var TS=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){ty(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){ty(i)}else ty(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ty(t)}}},na=class extends $u{constructor(e,t,i){super();let r;if(Ot(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&ta.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&SS(e.next,o),error:e.error&&SS(e.error,o),complete:e.complete&&SS(e.complete,o)}):r=e}this.destination=new TS(r)}};function ty(n){ta.useDeprecatedSynchronousErrorHandling?w4(n):ey(n)}function t9(n){throw n}function ES(n,e){let{onStoppedNotification:t}=ta;t&&Ef.setTimeout(()=>t(n,e))}var n9={closed:!0,next:Fl,error:t9,complete:Fl};var Df=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ri(n){return n}function If(...n){return DS(n)}function DS(n){return n.length===0?Ri:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var yt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=r9(t)?t:new na(t,i,r);return Tf(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=x4(i),new i((r,o)=>{let s=new na({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Df](){return this}pipe(...t){return DS(t)(this)}toPromise(t){return t=x4(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function x4(n){var e;return(e=n??ta.Promise)!==null&&e!==void 0?e:Promise}function i9(n){return n&&Ot(n.next)&&Ot(n.error)&&Ot(n.complete)}function r9(n){return n&&n instanceof $u||i9(n)&&Qv(n)}function IS(n){return Ot(n?.lift)}function kt(n){return e=>{if(IS(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Dt(n,e,t,i,r){return new AS(n,e,t,i,r)}var AS=class extends $u{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Af(){return kt((n,e)=>{let t=null;n._refCount++;let i=Dt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Rf=class extends yt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,IS(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bi;let t=this.getSubject();e.add(this.source.subscribe(Dt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bi.EMPTY)}return e}refCount(){return Af()(this)}};var b4=Sf(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Rn=(()=>{class n extends yt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new ny(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new b4}next(t){Tf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Tf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Tf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?MS:(this.currentObservers=null,o.push(t),new Bi(()=>{this.currentObservers=null,Gu(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new yt;return t.source=this,t}}return n.create=(e,t)=>new ny(e,t),n})(),ny=class extends Rn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:MS}};var Ln=class extends Rn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var dm={now(){return(dm.delegate||Date).now()},delegate:void 0};var fm=class extends Rn{constructor(e=1/0,t=1/0,i=dm){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var iy=class extends Bi{constructor(e,t){super()}schedule(e,t=0){return this}};var hm={setInterval(n,e,...t){let{delegate:i}=hm;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=hm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Pf=class extends iy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return hm.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&hm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Gu(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Of=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Of.now=dm.now;var Nf=class extends Of{constructor(e,t=Of.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var ia=new Nf(Pf),RS=ia;var ry=class extends Pf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var oy=class extends Nf{};var pm=new oy(ry);var ai=new yt(n=>n.complete());function sy(n){return n&&Ot(n.schedule)}function PS(n){return n[n.length-1]}function Ff(n){return Ot(PS(n))?n.pop():void 0}function ja(n){return sy(PS(n))?n.pop():void 0}function M4(n,e){return typeof PS(n)=="number"?n.pop():e}function Ll(n,e,t,i){var r=arguments.length,o=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}function S4(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(i.next(f))}catch(h){s(h)}}function l(f){try{u(i.throw(f))}catch(h){s(h)}}function u(f){f.done?o(f.value):r(f.value).then(a,l)}u((i=i.apply(n,e||[])).next())})}function C4(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qu(n){return this instanceof qu?(this.v=n,this):new qu(n)}function E4(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){i[g]&&(r[g]=function(x){return new Promise(function(y,_){o.push([g,x,y,_])>1||l(g,x)})},v&&(r[g]=v(r[g])))}function l(g,v){try{u(i[g](v))}catch(x){p(o[0][3],x)}}function u(g){g.value instanceof qu?Promise.resolve(g.value.v).then(f,h):p(o[0][2],g)}function f(g){l("next",g)}function h(g){l("throw",g)}function p(g,v){g(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}function T4(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof C4=="function"?C4(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Lf=n=>n&&typeof n.length=="number"&&typeof n!="function";function ay(n){return Ot(n?.then)}function ly(n){return Ot(n[Df])}function cy(n){return Symbol.asyncIterator&&Ot(n?.[Symbol.asyncIterator])}function uy(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function o9(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dy=o9();function fy(n){return Ot(n?.[dy])}function hy(n){return E4(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield qu(t.read());if(r)return yield qu(void 0);yield yield qu(i)}}finally{t.releaseLock()}})}function py(n){return Ot(n?.getReader)}function Pn(n){if(n instanceof yt)return n;if(n!=null){if(ly(n))return s9(n);if(Lf(n))return a9(n);if(ay(n))return l9(n);if(cy(n))return D4(n);if(fy(n))return c9(n);if(py(n))return u9(n)}throw uy(n)}function s9(n){return new yt(e=>{let t=n[Df]();if(Ot(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function a9(n){return new yt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function l9(n){return new yt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ey)})}function c9(n){return new yt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function D4(n){return new yt(e=>{d9(n,e).catch(t=>e.error(t))})}function u9(n){return D4(hy(n))}function d9(n,e){var t,i,r,o;return S4(this,void 0,void 0,function*(){try{for(t=T4(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Ao(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function my(n,e=0){return kt((t,i)=>{t.subscribe(Dt(i,r=>Ao(i,n,()=>i.next(r),e),()=>Ao(i,n,()=>i.complete(),e),r=>Ao(i,n,()=>i.error(r),e)))})}function gy(n,e=0){return kt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function I4(n,e){return Pn(n).pipe(gy(e),my(e))}function A4(n,e){return Pn(n).pipe(gy(e),my(e))}function R4(n,e){return new yt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function P4(n,e){return new yt(t=>{let i;return Ao(t,e,()=>{i=n[dy](),Ao(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>Ot(i?.return)&&i.return()})}function vy(n,e){if(!n)throw new Error("Iterable cannot be null");return new yt(t=>{Ao(t,e,()=>{let i=n[Symbol.asyncIterator]();Ao(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function O4(n,e){return vy(hy(n),e)}function N4(n,e){if(n!=null){if(ly(n))return I4(n,e);if(Lf(n))return R4(n,e);if(ay(n))return A4(n,e);if(cy(n))return vy(n,e);if(fy(n))return P4(n,e);if(py(n))return O4(n,e)}throw uy(n)}function fi(n,e){return e?N4(n,e):Pn(n)}function ct(...n){let e=ja(n);return fi(n,e)}function Xc(n,e){let t=Ot(n)?n:()=>n,i=r=>r.error(t());return new yt(e?r=>e.schedule(i,0,r):i)}function yy(n){return!!n&&(n instanceof yt||Ot(n.lift)&&Ot(n.subscribe))}var ra=Sf(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function _n(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new na({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new ra)}});n.subscribe(o)})}function F4(n){return n instanceof Date&&!isNaN(n)}function Le(n,e){return kt((t,i)=>{let r=0;t.subscribe(Dt(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:f9}=Array;function h9(n,e){return f9(e)?n(...e):n(e)}function kf(n){return Le(e=>h9(n,e))}var{isArray:p9}=Array,{getPrototypeOf:m9,prototype:g9,keys:v9}=Object;function _y(n){if(n.length===1){let e=n[0];if(p9(e))return{args:e,keys:null};if(y9(e)){let t=v9(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function y9(n){return n&&typeof n=="object"&&m9(n)===g9}function wy(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function kl(...n){let e=ja(n),t=Ff(n),{args:i,keys:r}=_y(n);if(i.length===0)return fi([],e);let o=new yt(_9(i,e,r?s=>wy(r,s):Ri));return t?o.pipe(kf(t)):o}function _9(n,e,t=Ri){return i=>{L4(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)L4(e,()=>{let u=fi(n[l],e),f=!1;u.subscribe(Dt(i,h=>{o[l]=h,f||(f=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function L4(n,e,t){n?Ao(t,n,e):e()}function k4(n,e,t,i,r,o,s,a){let l=[],u=0,f=0,h=!1,p=()=>{h&&!l.length&&!u&&e.complete()},g=x=>u<i?v(x):l.push(x),v=x=>{o&&e.next(x),u++;let y=!1;Pn(t(x,f++)).subscribe(Dt(e,_=>{r?.(_),o?g(_):e.next(_)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;l.length&&u<i;){let _=l.shift();s?Ao(e,s,()=>v(_)):v(_)}p()}catch(_){e.error(_)}}))};return n.subscribe(Dt(e,g,()=>{h=!0,p()})),()=>{a?.()}}function Pi(n,e,t=1/0){return Ot(e)?Pi((i,r)=>Le((o,s)=>e(i,o,r,s))(Pn(n(i,r))),t):(typeof e=="number"&&(t=e),kt((i,r)=>k4(i,r,n,t)))}function xy(n=1/0){return Pi(Ri,n)}function U4(){return xy(1)}function Ul(...n){return U4()(fi(n,ja(n)))}function by(n){return new yt(e=>{Pn(n()).subscribe(e)})}function OS(...n){let e=Ff(n),{args:t,keys:i}=_y(n),r=new yt(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let h=!1;Pn(t[f]).subscribe(Dt(o,p=>{h||(h=!0,u--),a[f]=p},()=>l--,void 0,()=>{(!l||!h)&&(u||o.next(i?wy(i,a):a),o.complete())}))}});return e?r.pipe(kf(e)):r}var w9=["addListener","removeListener"],x9=["addEventListener","removeEventListener"],b9=["on","off"];function Ji(n,e,t,i){if(Ot(t)&&(i=t,t=void 0),i)return Ji(n,e,t).pipe(kf(i));let[r,o]=S9(n)?x9.map(s=>a=>n[s](e,a,t)):M9(n)?w9.map(B4(n,e)):C9(n)?b9.map(B4(n,e)):[];if(!r&&Lf(n))return Pi(s=>Ji(s,e,t))(Pn(n));if(!r)throw new TypeError("Invalid event target");return new yt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function B4(n,e){return t=>i=>n[t](e,i)}function M9(n){return Ot(n.addListener)&&Ot(n.removeListener)}function C9(n){return Ot(n.on)&&Ot(n.off)}function S9(n){return Ot(n.addEventListener)&&Ot(n.removeEventListener)}function co(n=0,e,t=RS){let i=-1;return e!=null&&(sy(e)?t=e:i=e),new yt(r=>{let o=F4(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function NS(n=0,e=ia){return n<0&&(n=0),co(n,n,e)}function Jn(...n){let e=ja(n),t=M4(n,1/0),i=n;return i.length?i.length===1?Pn(i[0]):xy(t)(fi(i,e)):ai}function rn(n,e){return kt((t,i)=>{let r=0;t.subscribe(Dt(i,o=>n.call(e,o,r++)&&i.next(o)))})}function oa(n){return kt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Dt(t,void 0,void 0,s=>{o=Pn(n(s,oa(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function V4(n,e,t,i,r){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(Dt(s,f=>{let h=u++;l=a?n(l,f,h):(a=!0,f),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function Yc(n,e){return Ot(e)?Pi(n,e,1):Pi(n,1)}function Bl(n){return kt((e,t)=>{let i=!1;e.subscribe(Dt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Or(n){return n<=0?()=>ai:kt((e,t)=>{let i=0;e.subscribe(Dt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function H4(){return kt((n,e)=>{n.subscribe(Dt(e,Fl))})}function z4(n){return Le(()=>n)}function FS(n,e){return e?t=>Ul(e.pipe(Or(1),H4()),t.pipe(FS(n))):Pi((t,i)=>Pn(n(t,i)).pipe(Or(1),z4(t)))}function Uf(n,e=ia){let t=co(n,e);return FS(()=>t)}function Sr(n,e=Ri){return n=n??E9,kt((t,i)=>{let r,o=!0;t.subscribe(Dt(i,s=>{let a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function E9(n,e){return n===e}function My(n=T9){return kt((e,t)=>{let i=!1;e.subscribe(Dt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function T9(){return new ra}function sa(n){return kt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vl(n,e){let t=arguments.length>=2;return i=>i.pipe(n?rn((r,o)=>n(r,o,i)):Ri,Or(1),t?Bl(e):My(()=>new ra))}function Bf(n){return n<=0?()=>ai:kt((e,t)=>{let i=[];e.subscribe(Dt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function LS(n,e){let t=arguments.length>=2;return i=>i.pipe(n?rn((r,o)=>n(r,o,i)):Ri,Bf(1),t?Bl(e):My(()=>new ra))}function mm(){return kt((n,e)=>{let t,i=!1;n.subscribe(Dt(e,r=>{let o=t;t=r,i&&e.next([o,r]),i=!0}))})}function Ga(n){let e=1/0,t;return n!=null&&(typeof n=="object"?{count:e=1/0,delay:t}=n:e=n),e<=0?()=>ai:kt((i,r)=>{let o=0,s,a=()=>{if(s?.unsubscribe(),s=null,t!=null){let u=typeof t=="number"?co(t):Pn(t(o)),f=Dt(r,()=>{f.unsubscribe(),l()});u.subscribe(f)}else l()},l=()=>{let u=!1;s=i.subscribe(Dt(r,void 0,()=>{++o<e?s?a():u=!0:r.complete()})),u&&a()};l()})}function kS(n,e){return kt(V4(n,e,arguments.length>=2,!0))}function uo(n={}){let{connector:e=()=>new Rn,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,u=0,f=!1,h=!1,p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=l=void 0,f=h=!1},v=()=>{let x=s;g(),x?.unsubscribe()};return kt((x,y)=>{u++,!h&&!f&&p();let _=l=l??e();y.add(()=>{u--,u===0&&!h&&!f&&(a=US(v,r))}),_.subscribe(y),!s&&u>0&&(s=new na({next:T=>_.next(T),error:T=>{h=!0,p(),a=US(g,t,T),_.error(T)},complete:()=>{f=!0,p(),a=US(g,i),_.complete()}}),Pn(x).subscribe(s))})(o)}}function US(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new na({next:()=>{i.unsubscribe(),n()}});return Pn(e(...t)).subscribe(i)}function Hl(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,uo({connector:()=>new fm(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Cy(n){return rn((e,t)=>n<=t)}function Vi(...n){let e=ja(n);return kt((t,i)=>{(e?Ul(n,t,e):Ul(n,t)).subscribe(i)})}function Vn(n,e){return kt((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(Dt(i,l=>{r?.unsubscribe();let u=0,f=o++;Pn(n(l,f)).subscribe(r=Dt(i,h=>i.next(e?e(l,h,f,u++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Oi(n){return kt((e,t)=>{Pn(n).subscribe(Dt(t,()=>t.complete(),Fl)),!t.closed&&e.subscribe(t)})}function Vf(n,e=!1){return kt((t,i)=>{let r=0;t.subscribe(Dt(i,o=>{let s=n(o,r++);(s||e)&&i.next(o),!s&&i.complete()}))})}function Qn(n,e,t){let i=Ot(n)||e||t?{next:n,error:e,complete:t}:n;return i?kt((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Dt(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):Ri}function j4(n,e){return kt((t,i)=>{let{leading:r=!0,trailing:o=!1}=e??{},s=!1,a=null,l=null,u=!1,f=()=>{l?.unsubscribe(),l=null,o&&(g(),u&&i.complete())},h=()=>{l=null,u&&i.complete()},p=v=>l=Pn(n(v)).subscribe(Dt(i,f,h)),g=()=>{if(s){s=!1;let v=a;a=null,i.next(v),!u&&p(v)}};t.subscribe(Dt(i,v=>{s=!0,a=v,!(l&&!l.closed)&&(r?g():p(v))},()=>{u=!0,!(o&&s&&l&&!l.closed)&&i.complete()}))})}function Zc(n,e=ia,t){let i=co(n,e);return j4(()=>i,t)}function BS(...n){let e=Ff(n);return kt((t,i)=>{let r=n.length,o=new Array(r),s=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)Pn(n[l]).subscribe(Dt(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(Ri))&&(s=null))},Fl));t.subscribe(Dt(i,l=>{if(a){let u=[l,...o];i.next(e?e(...u):u)}}))})}var LN="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Ie=class extends Error{code;constructor(e,t){super(lT(e,t)),this.code=e}};function D9(n){return`NG0${Math.abs(n)}`}function lT(n,e){return`${D9(n)}${e?": "+e:""}`}var kN=Symbol("InputSignalNode#UNSET"),I9=ft(we({},Zv),{transformFn:void 0,applyValueToInputSignal(n,e){cm(n,e)}});function UN(n,e){let t=Object.create(I9);t.value=n,t.transformFn=e?.transform;function i(){if(sm(t),t.value===kN){let r=null;throw new Ie(-950,r)}return t.value}return i[Es]=t,i}function Rm(n){return{toString:n}.toString()}var Sy="__parameters__";function A9(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function BN(n,e,t){return Rm(()=>{let i=A9(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,f){let h=l.hasOwnProperty(Sy)?l[Sy]:Object.defineProperty(l,Sy,{value:[]})[Sy];for(;h.length<=f;)h.push(null);return(h[f]=h[f]||[]).push(s),l}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Wf=globalThis;function hi(n){for(let e in n)if(n[e]===hi)return e;throw Error("Could not find renamed property on target object.")}function R9(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Oo(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Oo).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function iE(n,e){return n?e?`${n} ${e}`:n:e||""}var P9=hi({__forward_ref__:hi});function es(n){return n.__forward_ref__=es,n.toString=function(){return Oo(this())},n}function Nr(n){return VN(n)?n():n}function VN(n){return typeof n=="function"&&n.hasOwnProperty(P9)&&n.__forward_ref__===es}function ye(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fo(n){return{providers:n.providers||[],imports:n.imports||[]}}function c_(n){return G4(n,zN)||G4(n,jN)}function HN(n){return c_(n)!==null}function G4(n,e){return n.hasOwnProperty(e)?n[e]:null}function O9(n){let e=n&&(n[zN]||n[jN]);return e||null}function W4(n){return n&&(n.hasOwnProperty($4)||n.hasOwnProperty(N9))?n[$4]:null}var zN=hi({\u0275prov:hi}),$4=hi({\u0275inj:hi}),jN=hi({ngInjectableDef:hi}),N9=hi({ngInjectorDef:hi}),Ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ye({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function GN(n){return n&&!!n.\u0275providers}var F9=hi({\u0275cmp:hi}),L9=hi({\u0275dir:hi}),k9=hi({\u0275pipe:hi}),U9=hi({\u0275mod:hi}),ky=hi({\u0275fac:hi}),_m=hi({__NG_ELEMENT_ID__:hi}),q4=hi({__NG_ENV_ID__:hi});function Pm(n){return typeof n=="string"?n:n==null?"":String(n)}function B9(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Pm(n)}function WN(n,e){throw new Ie(-200,n)}function cT(n,e){throw new Ie(-201,!1)}var wn=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(wn||{}),rE;function $N(){return rE}function Ro(n){let e=rE;return rE=n,e}function qN(n,e,t){let i=c_(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&wn.Optional)return null;if(e!==void 0)return e;cT(n,"Injector")}var V9={},Xu=V9,oE="__NG_DI_FLAG__",Uy=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=t;return this.injector.get(e,i.optional?Kv:Xu,i)}},By="ngTempTokenPath",H9="ngTokenPath",z9=/\n/gm,j9="\u0275",X4="__source";function G9(n,e=wn.Default){if(um()===void 0)throw new Ie(-203,!1);if(um()===null)return qN(n,void 0,e);{let t=um(),i;return t instanceof Uy?i=t.injector:i=t,i.get(n,e&wn.Optional?null:void 0,e)}}function Ge(n,e=wn.Default){return($N()||G9)(Nr(n),e)}function D(n,e=wn.Default){return Ge(n,u_(e))}function u_(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function sE(n){let e=[];for(let t=0;t<n.length;t++){let i=Nr(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Ie(900,!1);let r,o=wn.Default;for(let s=0;s<i.length;s++){let a=i[s],l=W9(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(Ge(r,o))}else e.push(Ge(i))}return e}function XN(n,e){return n[oE]=e,n.prototype[oE]=e,n}function W9(n){return n[oE]}function $9(n,e,t,i){let r=n[By];throw e[X4]&&r.unshift(e[X4]),n.message=q9(`
`+n.message,r,t,i),n[H9]=r,n[By]=null,n}function q9(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==j9?n.slice(2):n;let r=Oo(e);if(Array.isArray(e))r=e.map(Oo).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Oo(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(z9,`
  `)}`}var sd=XN(BN("Optional"),8);var eh=XN(BN("SkipSelf"),4);function Zu(n,e){let t=n.hasOwnProperty(ky);return t?n[ky]:null}function X9(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function Y9(n){return n.flat(Number.POSITIVE_INFINITY)}function uT(n,e){n.forEach(t=>Array.isArray(t)?uT(t,e):e(t))}function YN(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Vy(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Z9(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function K9(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function d_(n,e,t){let i=Om(n,e);return i>=0?n[i|1]=t:(i=~i,K9(n,i,e,t)),i}function VS(n,e){let t=Om(n,e);if(t>=0)return n[t|1]}function Om(n,e){return J9(n,e,1)}function J9(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var $a={},Po=[],Ku=new Ae(""),ts=new Ae("",-1),ZN=new Ae(""),Hy=class{get(e,t=Xu){if(t===Xu){let i=new Error(`NullInjectorError: No provider for ${Oo(e)}!`);throw i.name="NullInjectorError",i}return t}};function KN(n,e){let t=n[U9]||null;if(!t&&e===!0)throw new Error(`Type ${Oo(n)} does not have '\u0275mod' property.`);return t}function $f(n){return n[F9]||null}function JN(n){return n[L9]||null}function Q9(n){return n[k9]||null}function Qc(n){return{\u0275providers:n}}function eq(...n){return{\u0275providers:QN(!0,n),\u0275fromNgModule:!0}}function QN(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return uT(e,s=>{let a=s;aE(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&e3(r,o),t}function e3(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];dT(r,o=>{e(o,i)})}}function aE(n,e,t,i){if(n=Nr(n),!n)return!1;let r=null,o=W4(n),s=!o&&$f(n);if(!o&&!s){let l=n.ngModule;if(o=W4(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)aE(u,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{uT(o.imports,f=>{aE(f,e,t,i)&&(u||=[],u.push(f))})}finally{}u!==void 0&&e3(u,e)}if(!a){let u=Zu(r)||(()=>new r);e({provide:r,useFactory:u,deps:Po},r),e({provide:ZN,useValue:r,multi:!0},r),e({provide:Ku,useValue:()=>Ge(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=n;dT(l,f=>{e(f,u)})}}else return!1;return r!==n&&n.providers!==void 0}function dT(n,e){for(let t of n)GN(t)&&(t=t.\u0275providers),Array.isArray(t)?dT(t,e):e(t)}var tq=hi({provide:String,useValue:hi});function t3(n){return n!==null&&typeof n=="object"&&tq in n}function nq(n){return!!(n&&n.useExisting)}function iq(n){return!!(n&&n.useFactory)}function qf(n){return typeof n=="function"}function rq(n){return!!n.useClass}var f_=new Ae(""),Ry={},Y4={},HS;function fT(){return HS===void 0&&(HS=new Hy),HS}var qr=class{},wm=class extends qr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,cE(e,s=>this.processProvider(s)),this.records.set(ts,Hf(void 0,this)),r.has("environment")&&this.records.set(qr,Hf(void 0,this));let o=this.records.get(f_);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ZN,Po,wn.Self))}retrieve(e,t){let i=t;return this.get(e,i.optional?Kv:Xu,i)}destroy(){vm(this),this._destroyed=!0;let e=Dn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Dn(e)}}onDestroy(e){return vm(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){vm(this);let t=Nl(this),i=Ro(void 0),r;try{return e()}finally{Nl(t),Ro(i)}}get(e,t=Xu,i=wn.Default){if(vm(this),e.hasOwnProperty(q4))return e[q4](this);i=u_(i);let r,o=Nl(this),s=Ro(void 0);try{if(!(i&wn.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=cq(e)&&c_(e);u&&this.injectableDefInScope(u)?l=Hf(lE(e),Ry):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&wn.Self?fT():this.parent;return t=i&wn.Optional&&t===Xu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[By]=a[By]||[]).unshift(Oo(e)),o)throw a;return $9(a,e,"R3InjectorError",this.source)}else throw a}finally{Ro(s),Nl(o)}}resolveInjectorInitializers(){let e=Dn(null),t=Nl(this),i=Ro(void 0),r;try{let o=this.get(Ku,Po,wn.Self);for(let s of o)s()}finally{Nl(t),Ro(i),Dn(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Oo(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Nr(e);let t=qf(e)?e:Nr(e&&e.provide),i=sq(e);if(!qf(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Hf(void 0,Ry,!0),r.factory=()=>sE(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=Dn(null);try{return t.value===Y4?WN(Oo(e)):t.value===Ry&&(t.value=Y4,t.value=t.factory()),typeof t.value=="object"&&t.value&&lq(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Dn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Nr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function lE(n){let e=c_(n),t=e!==null?e.factory:Zu(n);if(t!==null)return t;if(n instanceof Ae)throw new Ie(204,!1);if(n instanceof Function)return oq(n);throw new Ie(204,!1)}function oq(n){if(n.length>0)throw new Ie(204,!1);let t=O9(n);return t!==null?()=>t.factory(n):()=>new n}function sq(n){if(t3(n))return Hf(void 0,n.useValue);{let e=n3(n);return Hf(e,Ry)}}function n3(n,e,t){let i;if(qf(n)){let r=Nr(n);return Zu(r)||lE(r)}else if(t3(n))i=()=>Nr(n.useValue);else if(iq(n))i=()=>n.useFactory(...sE(n.deps||[]));else if(nq(n))i=()=>Ge(Nr(n.useExisting));else{let r=Nr(n&&(n.useClass||n.provide));if(aq(n))i=()=>new r(...sE(n.deps));else return Zu(r)||lE(r)}return i}function vm(n){if(n.destroyed)throw new Ie(205,!1)}function Hf(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function aq(n){return!!n.deps}function lq(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function cq(n){return typeof n=="function"||typeof n=="object"&&n instanceof Ae}function cE(n,e){for(let t of n)Array.isArray(t)?cE(t,e):t&&GN(t)?cE(t.\u0275providers,e):e(t)}function ns(n,e){let t;n instanceof wm?(vm(n),t=n):t=new Uy(n);let i,r=Nl(t),o=Ro(void 0);try{return e()}finally{Nl(r),Ro(o)}}function i3(){return $N()!==void 0||um()!=null}function th(n){if(!i3())throw new Ie(-203,!1)}function uq(n){return typeof n=="function"}var Fo=0,cn=1,Kt=2,Fr=3,la=4,Uo=5,ua=6,zy=7,Lo=8,Ju=9,zl=10,pi=11,xm=12,Z4=13,nh=14,ko=15,Qu=16,zf=17,jl=18,h_=19,r3=20,Kc=21,zS=22,ed=23,Ts=24,jS=25,Hi=26,hT=1,bm=6,Gl=7,jy=8,Xf=9,No=10;function ca(n){return Array.isArray(n)&&typeof n[hT]=="object"}function Za(n){return Array.isArray(n)&&n[hT]===!0}function pT(n){return(n.flags&4)!==0}function ad(n){return n.componentOffset>-1}function p_(n){return(n.flags&1)===1}function da(n){return!!n.template}function Mm(n){return(n[Kt]&512)!==0}function ih(n){return(n[Kt]&256)===256}var uE=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function o3(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var Ni=(()=>{let n=()=>s3;return n.ngInherit=!0,n})();function s3(n){return n.type.prototype.ngOnChanges&&(n.setInput=fq),dq}function dq(){let n=l3(this),e=n?.current;if(e){let t=n.previous;if(t===$a)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function fq(n,e,t,i,r){let o=this.declaredInputs[i],s=l3(n)||hq(n,{previous:$a,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new uE(u&&u.currentValue,t,l===$a),o3(n,e,r,t)}var a3="__ngSimpleChanges__";function l3(n){return n[a3]||null}function hq(n,e){return n[a3]=e}var K4=null;var wi=function(n,e=null,t){K4?.(n,e,t)},c3="svg",pq="math";function fa(n){for(;Array.isArray(n);)n=n[Fo];return n}function mq(n){for(;Array.isArray(n);){if(typeof n[hT]=="object")return n;n=n[Fo]}return null}function u3(n,e){return fa(e[n])}function pa(n,e){return fa(e[n.index])}function d3(n,e){return n.data[e]}function mT(n,e){return n[e]}function qa(n,e){let t=e[n];return ca(t)?t:t[Fo]}function gq(n){return(n[Kt]&4)===4}function gT(n){return(n[Kt]&128)===128}function vq(n){return Za(n[Fr])}function Yf(n,e){return e==null?null:n[e]}function f3(n){n[zf]=0}function h3(n){n[Kt]&1024||(n[Kt]|=1024,gT(n)&&Nm(n))}function yq(n,e){for(;n>0;)e=e[nh],n--;return e}function m_(n){return!!(n[Kt]&9216||n[Ts]?.dirty)}function dE(n){n[zl].changeDetectionScheduler?.notify(8),n[Kt]&64&&(n[Kt]|=1024),m_(n)&&Nm(n)}function Nm(n){n[zl].changeDetectionScheduler?.notify(0);let e=td(n);for(;e!==null&&!(e[Kt]&8192||(e[Kt]|=8192,!gT(e)));)e=td(e)}function p3(n,e){if(ih(n))throw new Ie(911,!1);n[Kc]===null&&(n[Kc]=[]),n[Kc].push(e)}function _q(n,e){if(n[Kc]===null)return;let t=n[Kc].indexOf(e);t!==-1&&n[Kc].splice(t,1)}function td(n){let e=n[Fr];return Za(e)?e[Fr]:e}function vT(n){return n[zy]??=[]}function yT(n){return n.cleanup??=[]}function wq(n,e,t,i){let r=vT(e);r.push(t),n.firstCreatePass&&yT(n).push(i,r.length-1)}var on={lFrame:b3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fE=!1;function xq(){return on.lFrame.elementDepthCount}function bq(){on.lFrame.elementDepthCount++}function Mq(){on.lFrame.elementDepthCount--}function _T(){return on.bindingsEnabled}function rh(){return on.skipHydrationRootTNode!==null}function Cq(n){return on.skipHydrationRootTNode===n}function Sq(n){on.skipHydrationRootTNode=n}function Eq(){on.skipHydrationRootTNode=null}function hn(){return on.lFrame.lView}function zi(){return on.lFrame.tView}function He(n){return on.lFrame.contextLView=n,n[Lo]}function ze(n){return on.lFrame.contextLView=null,n}function Xr(){let n=m3();for(;n!==null&&n.type===64;)n=n.parent;return n}function m3(){return on.lFrame.currentTNode}function Tq(){let n=on.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ld(n,e){let t=on.lFrame;t.currentTNode=n,t.isParent=e}function wT(){return on.lFrame.isParent}function xT(){on.lFrame.isParent=!1}function Dq(){return on.lFrame.contextLView}function g3(){return fE}function Gy(n){let e=fE;return fE=n,e}function Fm(){let n=on.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Iq(n){return on.lFrame.bindingIndex=n}function Lm(){return on.lFrame.bindingIndex++}function v3(n){let e=on.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Aq(){return on.lFrame.inI18n}function Rq(n,e){let t=on.lFrame;t.bindingIndex=t.bindingRootIndex=n,hE(e)}function Pq(){return on.lFrame.currentDirectiveIndex}function hE(n){on.lFrame.currentDirectiveIndex=n}function y3(n){let e=on.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function _3(){return on.lFrame.currentQueryIndex}function bT(n){on.lFrame.currentQueryIndex=n}function Oq(n){let e=n[cn];return e.type===2?e.declTNode:e.type===1?n[Uo]:null}function w3(n,e,t){if(t&wn.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&wn.Host);)if(r=Oq(o),r===null||(o=o[nh],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=on.lFrame=x3();return i.currentTNode=e,i.lView=n,!0}function MT(n){let e=x3(),t=n[cn];on.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function x3(){let n=on.lFrame,e=n===null?null:n.child;return e===null?b3(n):e}function b3(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function M3(){let n=on.lFrame;return on.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var C3=M3;function CT(){let n=M3();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Nq(n){return(on.lFrame.contextLView=yq(n,on.lFrame.contextLView))[Lo]}function cd(){return on.lFrame.selectedIndex}function nd(n){on.lFrame.selectedIndex=n}function g_(){let n=on.lFrame;return d3(n.tView,n.selectedIndex)}function km(){on.lFrame.currentNamespace=c3}function ST(){Fq()}function Fq(){on.lFrame.currentNamespace=null}function S3(){return on.lFrame.currentNamespace}var E3=!0;function v_(){return E3}function eu(n){E3=n}function Lq(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=s3(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ET(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Py(n,e,t){T3(n,e,3,t)}function Oy(n,e,t,i){(n[Kt]&3)===t&&T3(n,e,t,i)}function GS(n,e){let t=n[Kt];(t&3)===e&&(t&=16383,t+=1,n[Kt]=t)}function T3(n,e,t,i){let r=i!==void 0?n[zf]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[zf]+=65536),(a<o||o==-1)&&(kq(n,t,e,l),n[zf]=(n[zf]&4294901760)+l+2),l++}function J4(n,e){wi(4,n,e);let t=Dn(null);try{e.call(n)}finally{Dn(t),wi(5,n,e)}}function kq(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[Kt]>>14<n[zf]>>16&&(n[Kt]&3)===e&&(n[Kt]+=16384,J4(a,o)):J4(a,o)}var Gf=-1,id=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function Uq(n){return(n.flags&8)!==0}function Bq(n){return(n.flags&16)!==0}function Vq(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];Hq(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function D3(n){return n===3||n===4||n===6}function Hq(n){return n.charCodeAt(0)===64}function Zf(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?Q4(n,t,r,null,e[++i]):Q4(n,t,r,null,null))}}return n}function Q4(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function I3(n){return n!==Gf}function Wy(n){return n&32767}function zq(n){return n>>16}function $y(n,e){let t=zq(n),i=e;for(;t>0;)i=i[nh],t--;return i}var pE=!0;function qy(n){let e=pE;return pE=n,e}var jq=256,A3=jq-1,R3=5,Gq=0,Wa={};function Wq(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(_m)&&(i=t[_m]),i==null&&(i=t[_m]=Gq++);let r=i&A3,o=1<<r;e.data[n+(r>>R3)]|=o}function Xy(n,e){let t=P3(n,e);if(t!==-1)return t;let i=e[cn];i.firstCreatePass&&(n.injectorIndex=e.length,WS(i.data,n),WS(e,null),WS(i.blueprint,null));let r=TT(n,e),o=n.injectorIndex;if(I3(r)){let s=Wy(r),a=$y(r,e),l=a[cn].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=r,o}function WS(n,e){n.push(0,0,0,0,0,0,0,0,e)}function P3(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function TT(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=k3(r),i===null)return Gf;if(t++,r=r[nh],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Gf}function mE(n,e,t){Wq(n,e,t)}function $q(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(D3(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function O3(n,e,t){if(t&wn.Optional||n!==void 0)return n;cT(e,"NodeInjector")}function N3(n,e,t,i){if(t&wn.Optional&&i===void 0&&(i=null),(t&(wn.Self|wn.Host))===0){let r=n[Ju],o=Ro(void 0);try{return r?r.get(e,i,t&wn.Optional):qN(e,i,t&wn.Optional)}finally{Ro(o)}}return O3(i,e,t)}function F3(n,e,t,i=wn.Default,r){if(n!==null){if(e[Kt]&2048&&!(i&wn.Self)){let s=Zq(n,e,t,i,Wa);if(s!==Wa)return s}let o=L3(n,e,t,i,Wa);if(o!==Wa)return o}return N3(e,t,i,r)}function L3(n,e,t,i,r){let o=Xq(t);if(typeof o=="function"){if(!w3(e,n,i))return i&wn.Host?O3(r,t,i):N3(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&wn.Optional))cT(t);else return s}finally{C3()}}else if(typeof o=="number"){let s=null,a=P3(n,e),l=Gf,u=i&wn.Host?e[ko][Uo]:null;for((a===-1||i&wn.SkipSelf)&&(l=a===-1?TT(n,e):e[a+8],l===Gf||!tN(i,!1)?a=-1:(s=e[cn],a=Wy(l),e=$y(l,e)));a!==-1;){let f=e[cn];if(eN(o,a,f.data)){let h=qq(a,e,t,s,i,u);if(h!==Wa)return h}l=e[a+8],l!==Gf&&tN(i,e[cn].data[a+8]===u)&&eN(o,a,e)?(s=f,a=Wy(l),e=$y(l,e)):a=-1}}return r}function qq(n,e,t,i,r,o){let s=e[cn],a=s.data[n+8],l=i==null?ad(a)&&pE:i!=s&&(a.type&3)!==0,u=r&wn.Host&&o===a,f=Ny(a,s,t,l,u);return f!==null?Cm(e,s,f,a):Wa}function Ny(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,h=i?a:a+f,p=r?a+f:u;for(let g=h;g<p;g++){let v=s[g];if(g<l&&t===v||g>=l&&v.type===t)return g}if(r){let g=s[l];if(g&&da(g)&&g.type===t)return l}return null}function Cm(n,e,t,i){let r=n[t],o=e.data;if(r instanceof id){let s=r;s.resolving&&WN(B9(o[t]));let a=qy(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Ro(s.injectImpl):null,f=w3(n,i,wn.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&Lq(t,o[t],e)}finally{u!==null&&Ro(u),qy(a),s.resolving=!1,C3()}}return r}function Xq(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_m)?n[_m]:void 0;return typeof e=="number"?e>=0?e&A3:Yq:e}function eN(n,e,t){let i=1<<n;return!!(t[e+(n>>R3)]&i)}function tN(n,e){return!(n&wn.Self)&&!(n&wn.Host&&e)}var Yu=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return F3(this._tNode,this._lView,e,u_(i),t)}};function Yq(){return new Yu(Xr(),hn())}function Hn(n){return Rm(()=>{let e=n.prototype.constructor,t=e[ky]||gE(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[ky]||gE(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function gE(n){return VN(n)?()=>{let e=gE(Nr(n));return e&&e()}:Zu(n)}function Zq(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[Kt]&2048&&!Mm(s);){let a=L3(o,s,t,i|wn.Self,Wa);if(a!==Wa)return a;let l=o.parent;if(!l){let u=s[r3];if(u){let f=u.get(t,Wa,i);if(f!==Wa)return f}l=k3(s),s=s[nh]}o=l}return r}function k3(n){let e=n[cn],t=e.type;return t===2?e.declTNode:t===1?n[Uo]:null}function DT(n){return $q(Xr(),n)}function nN(n,e=null,t=null,i){let r=U3(n,e,t,i);return r.resolveInjectorInitializers(),r}function U3(n,e=null,t=null,i,r=new Set){let o=[t||Po,eq(n)];return i=i||(typeof n=="object"?void 0:Oo(n)),new wm(o,e||fT(),i||null,r)}var Lr=class n{static THROW_IF_NOT_FOUND=Xu;static NULL=new Hy;static create(e,t){if(Array.isArray(e))return nN({name:""},t,e,"");{let i=e.name??"";return nN({name:i},e.parent,e.providers,i)}}static \u0275prov=ye({token:n,providedIn:"any",factory:()=>Ge(ts)});static __NG_ELEMENT_ID__=-1};var Kq=new Ae("");Kq.__NG_ELEMENT_ID__=n=>{let e=Xr();if(e===null)throw new Ie(204,!1);if(e.type&2)return e.value;if(n&wn.Optional)return null;throw new Ie(204,!1)};var B3=!1,Er=(()=>{class n{static __NG_ELEMENT_ID__=Jq;static __NG_ENV_ID__=t=>t}return n})(),Yy=class extends Er{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return ih(t)?(e(),()=>{}):(p3(t,e),()=>_q(t,e))}};function Jq(){return new Yy(hn())}var Kf=class{},IT=new Ae("",{providedIn:"root",factory:()=>!1});var V3=new Ae(""),H3=new Ae(""),Xl=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ln(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=ye({token:n,providedIn:"root",factory:()=>new n})}return n})();var vE=class extends Rn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,i3()&&(this.destroyRef=D(Er,{optional:!0})??void 0,this.pendingTasks=D(Xl,{optional:!0})??void 0)}emit(e){let t=Dn(null);try{super.next(e)}finally{Dn(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Bi&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},kn=vE;function Sm(...n){}function z3(n){let e,t;function i(){n=Sm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function iN(n){return queueMicrotask(()=>n()),()=>{n=Sm}}var AT="isAngularZone",Zy=AT+"_ID",Qq=0,Mn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new kn(!1);onMicrotaskEmpty=new kn(!1);onStable=new kn(!1);onError=new kn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=B3}=e;if(typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,nX(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(AT)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Ie(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,eX,Sm,Sm);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},eX={};function RT(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function tX(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){z3(()=>{n.callbackScheduled=!1,yE(n),n.isCheckStableRunning=!0,RT(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),yE(n)}function nX(n){let e=()=>{tX(n)},t=Qq++;n._inner=n._inner.fork({name:"angular",properties:{[AT]:!0,[Zy]:t,[Zy+t]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(iX(l))return i.invokeTask(o,s,a,l);try{return rN(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),oN(n)}},onInvoke:(i,r,o,s,a,l,u)=>{try{return rN(n),i.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!rX(l)&&e(),oN(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,yE(n),RT(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function yE(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function rN(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function oN(n){n._nesting--,RT(n)}var _E=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new kn;onMicrotaskEmpty=new kn;onStable=new kn;onError=new kn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function iX(n){return j3(n,"__ignore_ng_zone__")}function rX(n){return j3(n,"__scheduler_tick__")}function j3(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Wl=class{_console=console;handleError(e){this._console.error("ERROR",e)}},oX=new Ae("",{providedIn:"root",factory:()=>{let n=D(Mn),e=D(Wl);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function sN(n,e){return UN(n,e)}function sX(n){return UN(kN,n)}var G3=(sN.required=sX,sN);function aX(){return oh(Xr(),hn())}function oh(n,e){return new $t(pa(n,e))}var $t=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=aX}return n})();function lX(n){return n instanceof $t?n.nativeElement:n}function W3(n){return typeof n=="function"&&n[Es]!==void 0}function ji(n,e){let t=_S(n,e?.equal),i=t[Es];return t.set=r=>cm(i,r),t.update=r=>wS(i,r),t.asReadonly=cX.bind(t),t}function cX(){let n=this[Es];if(n.readonlyFn===void 0){let e=()=>this();e[Es]=n,n.readonlyFn=e}return n.readonlyFn}function $3(n){return W3(n)&&typeof n.set=="function"}function uX(){return this._results[Symbol.iterator]()}var Em=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Rn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=Y9(e);(this._changesDetected=!X9(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=uX},dX="ngSkipHydration",fX="ngskiphydration";function q3(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let i=e[t];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===fX)return!0}return!1}function X3(n){return n.hasAttribute(dX)}function Ky(n){return(n.flags&128)===128}function hX(n){if(Ky(n))return!0;let e=n.parent;for(;e;){if(Ky(n)||q3(e))return!0;e=e.parent}return!1}var Y3=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Y3||{}),Z3=new Map,pX=0;function mX(){return pX++}function gX(n){Z3.set(n[h_],n)}function wE(n){Z3.delete(n[h_])}var aN="__ngContext__";function sh(n,e){ca(e)?(n[aN]=e[h_],gX(e)):n[aN]=e}function K3(n){return Q3(n[xm])}function J3(n){return Q3(n[la])}function Q3(n){for(;n!==null&&!Za(n);)n=n[la];return n}var xE;function eF(n){xE=n}function Um(){if(xE!==void 0)return xE;if(typeof document<"u")return document;throw new Ie(210,!1)}var Bm=new Ae("",{providedIn:"root",factory:()=>vX}),vX="ng",PT=new Ae(""),ho=new Ae("",{providedIn:"platform",factory:()=>"unknown"});var OT=new Ae(""),NT=new Ae("",{providedIn:"root",factory:()=>Um().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function yX(){let n=new Vm;return n.store=_X(Um(),D(Bm)),n}var Vm=(()=>{class n{static \u0275prov=ye({token:n,providedIn:"root",factory:yX});store={};onSerializeCallbacks={};get(t,i){return this.store[t]!==void 0?this.store[t]:i}set(t,i){this.store[t]=i}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,i){this.onSerializeCallbacks[t]=i}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function _X(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var tF="h",nF="b",wX="f",xX="n",bX="e",MX="t",FT="c",iF="x",Jy="r",CX="i",SX="n",rF="d";var EX="di";var Ey=new Ae(""),oF=!1,sF=new Ae("",{providedIn:"root",factory:()=>oF});var aF=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(aF||{}),y_=new Ae(""),lN=new Set;function ud(n){lN.has(n)||(lN.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var lF=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=TX}return n})();function TX(){return new lF(hn(),Xr())}var DX=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ye({token:n,providedIn:"root",factory:()=>new n})}return n})();var IX="__nghData__",cF=IX;var $S="ngh",AX="nghm",uF=()=>null;function RX(n,e,t=!1){let i=n.getAttribute($S);if(i==null)return null;let[r,o]=i.split("|");if(i=t?o:r,!i)return null;let s=o?`|${o}`:"",a=t?r:s,l={};if(i!==""){let f=e.get(Vm,null,{optional:!0});f!==null&&(l=f.get(cF,[])[Number(i)])}let u={data:l,firstChild:n.firstChild??null};return t&&(u.firstChild=n,__(u,0,n.nextSibling)),a?n.setAttribute($S,a):n.removeAttribute($S),u}function PX(){uF=RX}function dF(n,e,t=!1){return uF(n,e,t)}function OX(n){let e=n._lView;return e[cn].type===2?null:(Mm(e)&&(e=e[Hi]),e)}function NX(n){return n.textContent?.replace(/\s/gm,"")}function FX(n){let e=Um(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=NX(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=t.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function __(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function bE(n,e){return n.segmentHeads?.[e]??null}function LX(n,e){let t=n.data,i=t[bX]?.[e]??null;return i===null&&t[FT]?.[e]&&(i=LT(n,e)),i}function fF(n,e){return n.data[FT]?.[e]??null}function LT(n,e){let t=fF(n,e)??[],i=0;for(let r of t)i+=r[Jy]*(r[iF]??1);return i}function kX(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[rF];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Hm(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[rF];n.disconnectedNodes=t?new Set(t):null}return!!kX(n)?.has(e)}function qS(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===AX}function cN(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function UX(n){for(let i of n.body.childNodes)if(qS(i))return;let e=cN(n.body.previousSibling);if(qS(e))return;let t=cN(n.head.lastChild);if(!qS(t))throw new Ie(-507,!1)}function hF(n,e){let t=n.contentQueries;if(t!==null){let i=Dn(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];bT(o),a.contentQueries(2,e[s],s)}}}finally{Dn(i)}}}function ME(n,e,t){bT(0);let i=Dn(null);try{e(n,t)}finally{Dn(i)}}function kT(n,e,t){if(pT(e)){let i=Dn(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{Dn(i)}}}var Xa=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xa||{}),Ty;function BX(){if(Ty===void 0&&(Ty=null,Wf.trustedTypes))try{Ty=Wf.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ty}function w_(n){return BX()?.createHTML(n)||n}var Dy;function pF(){if(Dy===void 0&&(Dy=null,Wf.trustedTypes))try{Dy=Wf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Dy}function uN(n){return pF()?.createHTML(n)||n}function dN(n){return pF()?.createScriptURL(n)||n}var $l=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${LN})`}},CE=class extends $l{getTypeName(){return"HTML"}},SE=class extends $l{getTypeName(){return"Style"}},EE=class extends $l{getTypeName(){return"Script"}},TE=class extends $l{getTypeName(){return"URL"}},DE=class extends $l{getTypeName(){return"ResourceURL"}};function Ds(n){return n instanceof $l?n.changingThisBreaksApplicationSecurity:n}function Yl(n,e){let t=VX(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${LN})`)}return t===e}function VX(n){return n instanceof $l&&n.getTypeName()||null}function mF(n){return new CE(n)}function gF(n){return new SE(n)}function vF(n){return new EE(n)}function yF(n){return new TE(n)}function _F(n){return new DE(n)}function HX(n){let e=new AE(n);return zX()?new IE(e):e}var IE=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(w_(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},AE=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=w_(e),t}};function zX(){try{return!!new window.DOMParser().parseFromString(w_(""),"text/html")}catch{return!1}}var jX=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function x_(n){return n=String(n),n.match(jX)?n:"unsafe:"+n}function Zl(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function zm(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var wF=Zl("area,br,col,hr,img,wbr"),xF=Zl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),bF=Zl("rp,rt"),GX=zm(bF,xF),WX=zm(xF,Zl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$X=zm(bF,Zl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fN=zm(wF,WX,$X,GX),MF=Zl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qX=Zl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),XX=Zl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),YX=zm(MF,qX,XX),ZX=Zl("script,style,template"),RE=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=QX(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=JX(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=hN(e).toLowerCase();if(!fN.hasOwnProperty(t))return this.sanitizedSomething=!0,!ZX.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!YX.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;MF[a]&&(l=x_(l)),this.buf.push(" ",s,'="',pN(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=hN(e).toLowerCase();fN.hasOwnProperty(t)&&!wF.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(pN(e))}};function KX(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function JX(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw CF(e);return e}function QX(n){let e=n.firstChild;if(e&&KX(n,e))throw CF(e);return e}function hN(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function CF(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var eY=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tY=/([^\#-~ |!])/g;function pN(n){return n.replace(/&/g,"&amp;").replace(eY,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(tY,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Iy;function UT(n,e){let t=null;try{Iy=Iy||HX(n);let i=e?String(e):"";t=Iy.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Iy.getInertBodyElement(i)}while(i!==o);let a=new RE().sanitizeChildren(mN(t)||t);return w_(a)}finally{if(t){let i=mN(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function mN(n){return"content"in n&&nY(n)?n.content:null}function nY(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var ma=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ma||{});function ah(n){let e=BT();return e?uN(e.sanitize(ma.HTML,n)||""):Yl(n,"HTML")?uN(Ds(n)):UT(Um(),Pm(n))}function kr(n){let e=BT();return e?e.sanitize(ma.URL,n)||"":Yl(n,"URL")?Ds(n):x_(Pm(n))}function iY(n){let e=BT();if(e)return dN(e.sanitize(ma.RESOURCE_URL,n)||"");if(Yl(n,"ResourceURL"))return dN(Ds(n));throw new Ie(904,!1)}function rY(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?iY:kr}function SF(n,e,t){return rY(e,t)(n)}function BT(){let n=hn();return n&&n[zl].sanitizer}var oY=/^>|^->|<!--|-->|--!>|<!-$/g,sY=/(<|>)/g,aY="\u200B$1\u200B";function lY(n){return n.replace(oY,e=>e.replace(sY,aY))}function po(n){return n.ownerDocument.defaultView}function Gi(n){return n.ownerDocument}function cY(n){return n.ownerDocument.body}function EF(n){return n instanceof Function?n():n}function uY(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var TF="ng-template";function dY(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&uY(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(VT(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function VT(n){return n.type===4&&n.value!==TF}function fY(n,e,t){let i=n.type===4&&!t?TF:n.value;return e===i}function hY(n,e,t){let i=4,r=n.attrs,o=r!==null?gY(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!aa(i)&&!aa(l))return!1;if(s&&aa(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!fY(n,l,t)||l===""&&e.length===1){if(aa(i))return!1;s=!0}}else if(i&8){if(r===null||!dY(n,r,l,t)){if(aa(i))return!1;s=!0}}else{let u=e[++a],f=pY(l,r,VT(n),t);if(f===-1){if(aa(i))return!1;s=!0;continue}if(u!==""){let h;if(f>o?h="":h=r[f+1].toLowerCase(),i&2&&u!==h){if(aa(i))return!1;s=!0}}}}return aa(i)||s}function aa(n){return(n&1)===0}function pY(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return vY(e,n)}function DF(n,e,t=!1){for(let i=0;i<e.length;i++)if(hY(n,e[i],t))return!0;return!1}function mY(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function gY(n){for(let e=0;e<n.length;e++){let t=n[e];if(D3(t))return e}return n.length}function vY(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function yY(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function gN(n,e){return n?":not("+e.trim()+")":e}function _Y(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!aa(s)&&(e+=gN(o,r),r=""),i=s,o=o||!aa(i);t++}return r!==""&&(e+=gN(o,r)),e}function wY(n){return n.map(_Y).join(",")}function xY(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!aa(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var Ka={};function IF(n,e){return n.createText(e)}function bY(n,e,t){n.setValue(e,t)}function AF(n,e){return n.createComment(lY(e))}function HT(n,e,t){return n.createElement(e,t)}function Qy(n,e,t,i,r){n.insertBefore(e,t,i,r)}function RF(n,e,t){n.appendChild(e,t)}function vN(n,e,t,i,r){i!==null?Qy(n,e,t,i,r):RF(n,e,t)}function zT(n,e,t){n.removeChild(null,e,t)}function PF(n){n.textContent=""}function MY(n,e,t){n.setAttribute(e,"style",t)}function CY(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function OF(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&Vq(n,e,i),r!==null&&CY(n,e,r),o!==null&&MY(n,e,o)}function jT(n,e,t,i,r,o,s,a,l,u,f){let h=Hi+i,p=h+r,g=SY(h,p),v=typeof u=="function"?u():u;return g[cn]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:f}}function SY(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Ka);return t}function EY(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function GT(n,e,t,i,r,o,s,a,l,u,f){let h=e.blueprint.slice();return h[Fo]=r,h[Kt]=i|4|128|8|64|1024,(u!==null||n&&n[Kt]&2048)&&(h[Kt]|=2048),f3(h),h[Fr]=h[nh]=n,h[Lo]=t,h[zl]=s||n&&n[zl],h[pi]=a||n&&n[pi],h[Ju]=l||n&&n[Ju]||null,h[Uo]=o,h[h_]=mX(),h[ua]=f,h[r3]=u,h[ko]=e.type==2?n[ko]:h,h}function TY(n,e,t){let i=pa(e,n),r=EY(t),o=n[zl].rendererFactory,s=WT(n,GT(n,r,null,NF(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function NF(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function FF(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function WT(n,e){return n[xm]?n[Z4][la]=e:n[xm]=e,n[Z4]=e,e}function W(n=1){LF(zi(),hn(),cd()+n,!1)}function LF(n,e,t,i){if(!i)if((e[Kt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Py(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Oy(e,o,0,t)}nd(t)}var b_=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(b_||{});function PE(n,e,t,i){let r=Dn(null);try{let[o,s,a]=n.inputs[t],l=null;(s&b_.SignalBased)!==0&&(l=e[o][Es]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,o):o3(e,l,o,i)}finally{Dn(r)}}function kF(n,e,t,i,r){let o=cd(),s=i&2;try{nd(-1),s&&e.length>Hi&&LF(n,e,Hi,!1),wi(s?2:0,r),t(i,r)}finally{nd(o),wi(s?3:1,r)}}function M_(n,e,t){NY(n,e,t),(t.flags&64)===64&&FY(n,e,t)}function $T(n,e,t=pa){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function DY(n,e,t,i){let o=i.get(sF,oF)||t===Xa.ShadowDom,s=n.selectRootElement(e,o);return IY(s),s}function IY(n){UF(n)}var UF=()=>null;function AY(n){X3(n)?PF(n):FX(n)}function RY(){UF=AY}function PY(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function qT(n,e,t,i,r,o,s,a){if(!a&&YT(e,n,t,i,r)){ad(e)&&OY(t,e.index);return}if(e.type&3){let l=pa(e,t);i=PY(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(l,i,r)}else e.type&12}function OY(n,e){let t=qa(e,n);t[Kt]&16||(t[Kt]|=64)}function NY(n,e,t){let i=t.directiveStart,r=t.directiveEnd;ad(t)&&TY(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Xy(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],l=Cm(e,n,s,t);if(sh(l,e),o!==null&&BY(e,s-i,l,a,t,o),da(a)){let u=qa(t.index,e);u[Lo]=Cm(e,n,s,t)}}}function FY(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=Pq();try{nd(o);for(let a=i;a<r;a++){let l=n.data[a],u=e[a];hE(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&LY(l,u)}}finally{nd(-1),hE(s)}}function LY(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function XT(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];DF(e,o.selectors,!1)&&(i??=[],da(o)?i.unshift(o):i.push(o))}return i}function kY(n,e,t,i,r,o){let s=pa(n,e);UY(e[pi],s,o,n.value,t,i,r)}function UY(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?Pm(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function BY(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];PE(i,t,l,u)}}function VY(n,e,t){return(n===null||da(n))&&(t=mq(t[e.index])),t[pi]}function HY(n,e){let t=n[Ju],i=t?t.get(Wl,null):null;i&&i.handleError(e)}function YT(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],h=e.data[u];PE(h,t[u],f,r),a=!0}if(o)for(let l of o){let u=t[l],f=e.data[l];PE(f,u,i,r),a=!0}return a}function zY(n,e){let t=qa(e,n),i=t[cn];jY(i,t);let r=t[Fo];r!==null&&t[ua]===null&&(t[ua]=dF(r,t[Ju])),wi(18),ZT(i,t,t[Lo]),wi(19,t[Lo])}function jY(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ZT(n,e,t){MT(e);try{let i=n.viewQuery;i!==null&&ME(1,i,t);let r=n.template;r!==null&&kF(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[jl]?.finishViewCreation(n),n.staticContentQueries&&hF(n,e),n.staticViewQueries&&ME(2,n.viewQuery,t);let o=n.components;o!==null&&GY(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Kt]&=-5,CT()}}function GY(n,e){for(let t=0;t<e.length;t++)zY(n,e[t])}function BF(n,e,t,i){let r=Dn(null);try{let o=e.tView,a=n[Kt]&4096?4096:16,l=GT(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[e.index];l[Qu]=u;let f=n[jl];return f!==null&&(l[jl]=f.createEmbeddedView(o)),ZT(o,l,t),l}finally{Dn(r)}}function OE(n,e){return!e||e.firstChild===null||Ky(n)}var WY;function KT(n,e){return WY(n,e)}var ql=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ql||{});function dd(n){return(n.flags&32)===32}function jf(n,e,t,i,r){if(i!=null){let o,s=!1;Za(i)?o=i:ca(i)&&(s=!0,i=i[Fo]);let a=fa(i);n===0&&t!==null?r==null?RF(e,t,a):Qy(e,t,a,r||null,!0):n===1&&t!==null?Qy(e,t,a,r||null,!0):n===2?zT(e,a,s):n===3&&e.destroyNode(a),o!=null&&tZ(e,n,o,t,r)}}function $Y(n,e){VF(n,e),e[Fo]=null,e[Uo]=null}function qY(n,e,t,i,r,o){i[Fo]=r,i[Uo]=e,S_(n,i,t,1,r,o)}function VF(n,e){e[zl].changeDetectionScheduler?.notify(9),S_(n,e,e[pi],2,null,null)}function XY(n){let e=n[xm];if(!e)return XS(n[cn],n);for(;e;){let t=null;if(ca(e))t=e[xm];else{let i=e[No];i&&(t=i)}if(!t){for(;e&&!e[la]&&e!==n;)ca(e)&&XS(e[cn],e),e=e[Fr];e===null&&(e=n),ca(e)&&XS(e[cn],e),t=e&&e[la]}e=t}}function JT(n,e){let t=n[Xf],i=t.indexOf(e);t.splice(i,1)}function HF(n,e){if(ih(e))return;let t=e[pi];t.destroyNode&&S_(n,e,t,3,null,null),XY(e)}function XS(n,e){if(ih(e))return;let t=Dn(null);try{e[Kt]&=-129,e[Kt]|=256,e[Ts]&&lm(e[Ts]),ZY(n,e),YY(n,e),e[cn].type===1&&e[pi].destroy();let i=e[Qu];if(i!==null&&Za(e[Fr])){i!==e[Fr]&&JT(i,e);let r=e[jl];r!==null&&r.detachView(n)}wE(e)}finally{Dn(t)}}function YY(n,e){let t=n.cleanup,i=e[zy];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[zy]=null);let r=e[Kc];if(r!==null){e[Kc]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[ed];if(o!==null){e[ed]=null;for(let s of o)s.destroy()}}function ZY(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof id)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];wi(4,a,l);try{l.call(a)}finally{wi(5,a,l)}}else{wi(4,r,o);try{o.call(r)}finally{wi(5,r,o)}}}}}function zF(n,e,t){return KY(n,e.parent,t)}function KY(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Fo];if(ad(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Xa.None||r===Xa.Emulated)return null}return pa(i,t)}function jF(n,e,t){return QY(n,e,t)}function JY(n,e,t){return n.type&40?pa(n,t):null}var QY=JY,yN;function C_(n,e,t,i){let r=zF(n,i,e),o=e[pi],s=i.parent||e[Uo],a=jF(s,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)vN(o,r,t[l],a,!1);else vN(o,r,t,a,!1);yN!==void 0&&yN(o,i,e,t,r)}function ym(n,e){if(e!==null){let t=e.type;if(t&3)return pa(e,n);if(t&4)return NE(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return ym(n,i);{let r=n[e.index];return Za(r)?NE(-1,r):fa(r)}}else{if(t&128)return ym(n,e.next);if(t&32)return KT(e,n)()||fa(n[e.index]);{let i=GF(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=td(n[ko]);return ym(r,i)}else return ym(n,e.next)}}}return null}function GF(n,e){if(e!==null){let i=n[ko][Uo],r=e.projection;return i.projection[r]}return null}function NE(n,e){let t=No+n+1;if(t<e.length){let i=e[t],r=i[cn].firstChild;if(r!==null)return ym(i,r)}return e[Gl]}function QT(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(s&&e===0&&(a&&sh(fa(a),i),t.flags|=2),!dd(t))if(l&8)QT(n,e,t.child,i,r,o,!1),jf(e,n,r,a,o);else if(l&32){let u=KT(t,i),f;for(;f=u();)jf(e,n,r,f,o);jf(e,n,r,a,o)}else l&16?WF(n,e,i,t,r,o):jf(e,n,r,a,o);t=s?t.projectionNext:t.next}}function S_(n,e,t,i,r,o){QT(t,i,n.firstChild,e,r,o,!1)}function eZ(n,e,t){let i=e[pi],r=zF(n,t,e),o=t.parent||e[Uo],s=jF(o,t,e);WF(i,0,e,t,r,s)}function WF(n,e,t,i,r,o){let s=t[ko],l=s[Uo].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];jf(e,n,r,f,o)}else{let u=l,f=s[Fr];Ky(i)&&(u.flags|=128),QT(n,e,u,f,r,o,!0)}}function tZ(n,e,t,i,r){let o=t[Gl],s=fa(t);o!==s&&jf(e,n,i,o,r);for(let a=No;a<t.length;a++){let l=t[a];S_(l[cn],l,n,e,i,o)}}function nZ(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:ql.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ql.Important),n.setStyle(t,i,r,o))}}function e_(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(fa(o)),Za(o)&&iZ(o,i);let s=t.type;if(s&8)e_(n,e,t.child,i);else if(s&32){let a=KT(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=GF(e,t);if(Array.isArray(a))i.push(...a);else{let l=td(e[ko]);e_(l[cn],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function iZ(n,e){for(let t=No;t<n.length;t++){let i=n[t],r=i[cn].firstChild;r!==null&&e_(i[cn],i,r,e)}n[Gl]!==n[Fo]&&e.push(n[Gl])}function $F(n){if(n[jS]!==null){for(let e of n[jS])e.impl.addSequence(e);n[jS].length=0}}var qF=[];function rZ(n){return n[Ts]??oZ(n)}function oZ(n){let e=qF.pop()??Object.create(aZ);return e.lView=n,e}function sZ(n){n.lView[Ts]!==n&&(n.lView=null,qF.push(n))}var aZ=ft(we({},Cf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Nm(n.lView)},consumerOnSignalRead(){this.lView[Ts]=this}});function lZ(n){let e=n[Ts]??Object.create(cZ);return e.lView=n,e}var cZ=ft(we({},Cf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=td(n.lView);for(;e&&!XF(e[cn]);)e=td(e);e&&h3(e)},consumerOnSignalRead(){this.lView[Ts]=this}});function XF(n){return n.type!==2}function YF(n){if(n[ed]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[ed])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Kt]&8192)}}var uZ=100;function ZF(n,e=!0,t=0){let r=n[zl].rendererFactory,o=!1;o||r.begin?.();try{dZ(n,t)}catch(s){throw e&&HY(n,s),s}finally{o||r.end?.()}}function dZ(n,e){let t=g3();try{Gy(!0),FE(n,e);let i=0;for(;m_(n);){if(i===uZ)throw new Ie(103,!1);i++,FE(n,1)}}finally{Gy(t)}}function fZ(n,e,t,i){if(ih(e))return;let r=e[Kt],o=!1,s=!1;MT(e);let a=!0,l=null,u=null;o||(XF(n)?(u=rZ(e),l=am(u)):hS()===null?(a=!1,u=lZ(e),l=am(u)):e[Ts]&&(lm(e[Ts]),e[Ts]=null));try{f3(e),Iq(n.bindingStartIndex),t!==null&&kF(n,e,t,2,i);let f=(r&3)===3;if(!o)if(f){let g=n.preOrderCheckHooks;g!==null&&Py(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Oy(e,g,0,null),GS(e,0)}if(s||hZ(e),YF(e),KF(e,0),n.contentQueries!==null&&hF(n,e),!o)if(f){let g=n.contentCheckHooks;g!==null&&Py(e,g)}else{let g=n.contentHooks;g!==null&&Oy(e,g,1),GS(e,1)}mZ(n,e);let h=n.components;h!==null&&QF(e,h,0);let p=n.viewQuery;if(p!==null&&ME(2,p,i),!o)if(f){let g=n.viewCheckHooks;g!==null&&Py(e,g)}else{let g=n.viewHooks;g!==null&&Oy(e,g,2),GS(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[zS]){for(let g of e[zS])g();e[zS]=null}o||($F(e),e[Kt]&=-73)}catch(f){throw o||Nm(e),f}finally{u!==null&&($v(u,l),a&&sZ(u)),CT()}}function KF(n,e){for(let t=K3(n);t!==null;t=J3(t))for(let i=No;i<t.length;i++){let r=t[i];JF(r,e)}}function hZ(n){for(let e=K3(n);e!==null;e=J3(e)){if(!(e[Kt]&2))continue;let t=e[Xf];for(let i=0;i<t.length;i++){let r=t[i];h3(r)}}}function pZ(n,e,t){wi(18);let i=qa(e,n);JF(i,t),wi(19,i[Lo])}function JF(n,e){gT(n)&&FE(n,e)}function FE(n,e){let i=n[cn],r=n[Kt],o=n[Ts],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&qv(o)),s||=!1,o&&(o.dirty=!1),n[Kt]&=-9217,s)fZ(i,n,i.template,n[Lo]);else if(r&8192){YF(n),KF(n,1);let a=i.components;a!==null&&QF(n,a,1),$F(n)}}function QF(n,e,t){for(let i=0;i<e.length;i++)pZ(n,e[i],t)}function mZ(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)nd(~r);else{let o=r,s=t[++i],a=t[++i];Rq(s,o);let l=e[o];wi(24,l),a(2,l),wi(25,l)}}}finally{nd(-1)}}function e1(n,e){let t=g3()?64:1088;for(n[zl].changeDetectionScheduler?.notify(e);n;){n[Kt]|=t;let i=td(n);if(Mm(n)&&!i)return n;n=i}return null}function e2(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function t2(n,e,t,i=!0){let r=e[cn];if(gZ(r,e,n,t),i){let s=NE(t,n),a=e[pi],l=a.parentNode(n[Gl]);l!==null&&qY(r,n[Uo],a,e,l,s)}let o=e[ua];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function LE(n,e){if(n.length<=No)return;let t=No+e,i=n[t];if(i){let r=i[Qu];r!==null&&r!==n&&JT(r,i),e>0&&(n[t-1][la]=i[la]);let o=Vy(n,No+e);$Y(i[cn],i);let s=o[jl];s!==null&&s.detachView(o[cn]),i[Fr]=null,i[la]=null,i[Kt]&=-129}return i}function gZ(n,e,t,i){let r=No+i,o=t.length;i>0&&(t[r-1][la]=e),i<o-No?(e[la]=t[r],YN(t,No+i,e)):(t.push(e),e[la]=null),e[Fr]=t;let s=e[Qu];s!==null&&t!==s&&n2(s,e);let a=e[jl];a!==null&&a.insertView(n),dE(e),e[Kt]|=128}function n2(n,e){let t=n[Xf],i=e[Fr];if(ca(i))n[Kt]|=2;else{let r=i[Fr][ko];e[ko]!==r&&(n[Kt]|=2)}t===null?n[Xf]=[e]:t.push(e)}var Tm=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[cn];return e_(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[Lo]}set context(e){this._lView[Lo]=e}get destroyed(){return ih(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Fr];if(Za(e)){let t=e[jy],i=t?t.indexOf(this):-1;i>-1&&(LE(e,i),Vy(t,i))}this._attachedToViewContainer=!1}HF(this._lView[cn],this._lView)}onDestroy(e){p3(this._lView,e)}markForCheck(){e1(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Kt]&=-129}reattach(){dE(this._lView),this._lView[Kt]|=128}detectChanges(){this._lView[Kt]|=1024,ZF(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Mm(this._lView),t=this._lView[Qu];t!==null&&!e&&JT(t,this._lView),VF(this._lView[cn],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=e;let t=Mm(this._lView),i=this._lView[Qu];i!==null&&!t&&n2(i,this._lView),dE(this._lView)}};var xi=(()=>{class n{static __NG_ELEMENT_ID__=_Z}return n})(),vZ=xi,yZ=class extends vZ{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=BF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Tm(r)}};function _Z(){return E_(Xr(),hn())}function E_(n,e){return n.type&4?new yZ(e,n,oh(n,e)):null}function jm(n,e,t,i,r){let o=n.data[e];if(o===null)o=wZ(n,e,t,i,r),Aq()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=Tq();o.injectorIndex=s===null?-1:s.injectorIndex}return ld(o,!0),o}function wZ(n,e,t,i,r){let o=m3(),s=wT(),a=s?o:o&&o.parent,l=n.data[e]=bZ(n,a,t,e,i,r);return xZ(n,l,o,s),l}function xZ(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function bZ(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return rh()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var MZ=new RegExp(`^(\\d+)*(${nF}|${tF})*(.*)`);function CZ(n){let e=n.match(MZ),[t,i,r,o]=e,s=i?parseInt(i,10):r,a=[];for(let[l,u,f]of o.matchAll(/(f|n)(\d*)/g)){let h=parseInt(f,10)||1;a.push(u,h)}return[s,...a]}function SZ(n){return!n.prev&&n.parent?.type===8}function YS(n){return n.index-Hi}function EZ(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function T_(n,e,t,i){let r=YS(i),o=EZ(n,r);if(o===void 0){let s=n.data[SX];if(s?.[r])o=DZ(s[r],t);else if(e.firstChild===i)o=n.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(SZ(i)){let u=YS(i.parent);o=bE(n,u)}else{let u=pa(l,t);if(a)o=u.firstChild;else{let f=YS(l),h=bE(n,f);if(l.type===2&&h){let g=LT(n,f)+1;o=D_(g,h)}else o=u.nextSibling}}}}return o}function D_(n,e){let t=e;for(let i=0;i<n;i++)t=t.nextSibling;return t}function TZ(n,e){let t=n;for(let i=0;i<e.length;i+=2){let r=e[i],o=e[i+1];for(let s=0;s<o;s++)switch(r){case wX:t=t.firstChild;break;case xX:t=t.nextSibling;break}}return t}function DZ(n,e){let[t,...i]=CZ(n),r;if(t===tF)r=e[ko][Fo];else if(t===nF)r=cY(e[ko][Fo]);else{let o=Number(t);r=fa(e[o+Hi])}return TZ(r,i)}var IZ=!1;function AZ(n){IZ=n}function RZ(n){let e=n[ua];if(e){let{i18nNodes:t,dehydratedIcuData:i}=e;if(t&&i){let r=n[pi];for(let o of i.values())PZ(r,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function PZ(n,e,t){for(let i of t.node.cases[t.case]){let r=e.get(i.index-Hi);r&&zT(n,r,!1)}}function i2(n){let e=n[bm]??[],i=n[Fr][pi],r=[];for(let o of e)o.data[EX]!==void 0?r.push(o):OZ(o,i);n[bm]=r}function OZ(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[Jy];for(;t<r;){let o=i.nextSibling;zT(e,i,!1),i=o,t++}}}function r2(n){i2(n);let e=n[Fo];ca(e)&&t_(e);for(let t=No;t<n.length;t++)t_(n[t])}function t_(n){RZ(n);let e=n[cn];for(let t=Hi;t<e.bindingStartIndex;t++)if(Za(n[t])){let i=n[t];r2(i)}else ca(n[t])&&t_(n[t])}function NZ(n){let e=n._views;for(let t of e){let i=OX(t);i!==null&&i[Fo]!==null&&(ca(i)?t_(i):r2(i))}}function FZ(n,e){let t=[];for(let i of e)for(let r=0;r<(i[iF]??1);r++){let o={data:i,firstChild:null};i[Jy]>0&&(o.firstChild=n,n=D_(i[Jy],n)),t.push(o)}return[n,t]}var o2=()=>null;function LZ(n,e){let t=n[bm];return!e||t===null||t.length===0?null:t[0].data[CX]===e?t.shift():(i2(n),null)}function kZ(){o2=LZ}function kE(n,e){return o2(n,e)}var UZ=class{},s2=class{},UE=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Oo(e)}.`)}},I_=class{static NULL=new UE},Jc=class{},Yr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>BZ()}return n})();function BZ(){let n=hn(),e=Xr(),t=qa(e.index,n);return(ca(t)?t:n)[pi]}var VZ=(()=>{class n{static \u0275prov=ye({token:n,providedIn:"root",factory:()=>null})}return n})();var ZS={},BE=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=u_(i);let r=this.injector.get(e,ZS,i);return r!==ZS||t===ZS?r:this.parentInjector.get(e,t,i)}};function VE(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=iE(r,a);else if(o==2){let l=a,u=e[++s];i=iE(i,l+": "+u+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function ce(n,e=wn.Default){let t=hn();if(t===null)return Ge(n,e);let i=Xr();return F3(i,t,Nr(n),e)}function t1(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a,l=null,u=null,f=zZ(s);f===null?a=s:[a,l,u]=f,WZ(n,e,t,a,o,l,u)}o!==null&&i!==null&&HZ(t,i,o)}function HZ(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new Ie(-301,!1);i.push(e[r],o)}}function zZ(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&da(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let i=null,r=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,jZ(s,i,o,r)),s===e&&(i??=[],i.push(s));return i!==null?(i.push(...e===null?n:n.slice(1)),[i,r,o]):null}function jZ(n,e,t,i){let r=e.length;n.findHostDirectiveDefs(n,e,i),t.set(n,[r,e.length-1])}function GZ(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function WZ(n,e,t,i,r,o,s){let a=i.length,l=!1;for(let p=0;p<a;p++){let g=i[p];!l&&da(g)&&(l=!0,GZ(n,t,p)),mE(Xy(t,e),n,g.type)}KZ(t,n.data.length,a);for(let p=0;p<a;p++){let g=i[p];g.providersResolver&&g.providersResolver(g)}let u=!1,f=!1,h=FF(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let g=i[p];if(t.mergedAttrs=Zf(t.mergedAttrs,g.hostAttrs),qZ(n,t,e,h,g),ZZ(h,g,r),s!==null&&s.has(g)){let[x,y]=s.get(g);t.directiveToIndex.set(g.type,[h,x+t.directiveStart,y+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let v=g.type.prototype;!u&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),h++}$Z(n,t,o)}function $Z(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))_N(0,e,r,i),_N(1,e,r,i),xN(e,i,!1);else{let o=t.get(r);wN(0,e,o,i),wN(1,e,o,i),xN(e,i,!0)}}}function _N(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),a2(e,o)}}function wN(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),a2(e,s)}}function a2(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function xN(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||VT(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let u=r[l];for(let f of u)if(f===e){s??=[],s.push(l,i[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function qZ(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=Zu(r.type,!0)),s=new id(o,da(r),ce);n.blueprint[i]=s,t[i]=s,XZ(n,e,i,FF(n,t,r.hostVars,Ka),r)}function XZ(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;YZ(s)!=a&&s.push(a),s.push(t,i,o)}}function YZ(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ZZ(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;da(e)&&(t[""]=n)}}function KZ(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function l2(n,e,t,i,r,o,s,a){let l=e.consts,u=Yf(l,s),f=jm(e,n,2,i,u);return o&&t1(e,t,f,Yf(l,a),r),f.mergedAttrs=Zf(f.mergedAttrs,f.attrs),f.attrs!==null&&VE(f,f.attrs,!1),f.mergedAttrs!==null&&VE(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function c2(n,e){ET(n,e),pT(e)&&n.queries.elementEnd(e)}var n_=class extends I_{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=$f(e);return new Dm(t,this.ngModule)}};function JZ(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&b_.SignalBased)!==0};return r&&(o.transform=r),o})}function QZ(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function eK(n,e,t){let i=e instanceof qr?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new BE(t,i):t}function tK(n){let e=n.get(Jc,null);if(e===null)throw new Ie(407,!1);let t=n.get(VZ,null),i=n.get(Kf,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i}}function nK(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return HT(e,t,t==="svg"?c3:t==="math"?pq:null)}var Dm=class extends s2{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=JZ(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=QZ(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=wY(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){wi(22);let o=Dn(null);try{let s=this.componentDef,a=i?["ng-version","19.2.9"]:xY(this.componentDef.selectors[0]),l=jT(0,null,null,1,0,null,null,null,null,[a],null),u=eK(s,r||this.ngModule,e),f=tK(u),h=f.rendererFactory.createRenderer(null,s),p=i?DY(h,i,s.encapsulation,u):nK(s,h),g=GT(null,l,null,512|NF(s),null,null,f,h,u,null,dF(p,u,!0));g[Hi]=p,MT(g);let v=null;try{let x=l2(Hi,l,g,"#host",()=>[this.componentDef],!0,0);p&&(OF(h,p,x),sh(p,g)),M_(l,g,x),kT(l,x,g),c2(l,x),t!==void 0&&iK(x,this.ngContentSelectors,t),v=qa(x.index,g),g[Lo]=v[Lo],ZT(l,g,null)}catch(x){throw v!==null&&wE(v),wE(g),x}finally{wi(23),CT()}return new HE(this.componentType,g)}finally{Dn(o)}}},HE=class extends UZ{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=d3(t[cn],Hi),this.location=oh(this._tNode,t),this.instance=qa(this._tNode.index,t)[Lo],this.hostView=this.changeDetectorRef=new Tm(t,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=YT(i,r[cn],r,e,t);this.previousInputValues.set(e,t);let s=qa(i.index,r);e1(s,1)}get injector(){return new Yu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function iK(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Zr=(()=>{class n{static __NG_ELEMENT_ID__=rK}return n})();function rK(){let n=Xr();return d2(n,hn())}var oK=Zr,u2=class extends oK{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return oh(this._hostTNode,this._hostLView)}get injector(){return new Yu(this._hostTNode,this._hostLView)}get parentInjector(){let e=TT(this._hostTNode,this._hostLView);if(I3(e)){let t=$y(e,this._hostLView),i=Wy(e),r=t[cn].data[i+8];return new Yu(r,t)}else return new Yu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=bN(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-No}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=kE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,OE(this._hostTNode,s)),a}createComponent(e,t,i,r,o){let s=e&&!uq(e),a;if(s)a=t;else{let v=t||{};a=v.index,i=v.injector,r=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let l=s?e:new Dm($f(e)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let x=(s?u:this.parentInjector).get(qr,null);x&&(o=x)}let f=$f(l.componentType??{}),h=kE(this._lContainer,f?.id??null),p=h?.firstChild??null,g=l.create(u,r,p,o);return this.insertImpl(g.hostView,a,OE(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(vq(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Fr],u=new u2(l,l[Uo],l[Fr]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return t2(s,r,o,i),e.attachToViewContainerRef(),YN(KS(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=bN(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=LE(this._lContainer,t);i&&(Vy(KS(this._lContainer),t),HF(i[cn],i))}detach(e){let t=this._adjustIndex(e,-1),i=LE(this._lContainer,t);return i&&Vy(KS(this._lContainer),t)!=null?new Tm(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function bN(n){return n[jy]}function KS(n){return n[jy]||(n[jy]=[])}function d2(n,e){let t,i=e[n.index];return Za(i)?t=i:(t=e2(i,e,null,n),e[n.index]=t,WT(e,t)),f2(t,e,n,i),new u2(t,n,e)}function sK(n,e){let t=n[pi],i=t.createComment(""),r=pa(e,n),o=t.parentNode(r);return Qy(t,o,i,t.nextSibling(r),!1),i}var f2=h2,n1=()=>!1;function aK(n,e,t){return n1(n,e,t)}function h2(n,e,t,i){if(n[Gl])return;let r;t.type&8?r=fa(i):r=sK(e,t),n[Gl]=r}function lK(n,e,t){if(n[Gl]&&n[bm])return!0;let i=t[ua],r=e.index-Hi;if(!i||hX(e)||Hm(i,r))return!1;let s=bE(i,r),a=i.data[FT]?.[r],[l,u]=FZ(s,a);return n[Gl]=l,n[bm]=u,!0}function cK(n,e,t,i){n1(n,t,e)||h2(n,e,t,i)}function uK(){f2=cK,n1=lK}var zE=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},jE=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)i1(e,t).matches!==null&&this.queries[t].setDirty()}},i_=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=yK(e):this.predicate=e}},GE=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},WE=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,dK(t,o)),this.matchTNodeWithReadOption(e,t,Ny(t,e,o,!1,!1))}else i===xi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ny(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===$t||r===Zr||r===xi&&t.type&4)this.addMatch(t.index,-2);else{let o=Ny(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function dK(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function fK(n,e){return n.type&11?oh(n,e):n.type&4?E_(n,e):null}function hK(n,e,t,i){return t===-1?fK(e,n):t===-2?pK(n,e,i):Cm(n,n[cn],t,e)}function pK(n,e,t){if(t===$t)return oh(e,n);if(t===xi)return E_(e,n);if(t===Zr)return d2(e,n)}function p2(n,e,t,i){let r=e[jl].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(hK(e,f,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function $E(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=p2(n,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],f=e[-l];for(let h=No;h<f.length;h++){let p=f[h];p[Qu]===p[Fr]&&$E(p[cn],p,u,i)}if(f[Xf]!==null){let h=f[Xf];for(let p=0;p<h.length;p++){let g=h[p];$E(g[cn],g,u,i)}}}}}return i}function mK(n,e){return n[jl].queries[e].queryList}function m2(n,e,t){let i=new Em((t&4)===4);return wq(n,e,i,i.destroy),(e[jl]??=new jE).queries.push(new zE(i))-1}function gK(n,e,t){let i=zi();return i.firstCreatePass&&(g2(i,new i_(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),m2(i,hn(),e)}function vK(n,e,t,i){let r=zi();if(r.firstCreatePass){let o=Xr();g2(r,new i_(e,t,i),o.index),_K(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return m2(r,hn(),t)}function yK(n){return n.split(",").map(e=>e.trim())}function g2(n,e,t){n.queries===null&&(n.queries=new GE),n.queries.track(new WE(e,t))}function _K(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function i1(n,e){return n.queries.getByIndex(e)}function wK(n,e){let t=n[cn],i=i1(t,e);return i.crossesNgTemplate?$E(t,n,e,[]):p2(t,n,i,e)}var rd=class{},r1=class{};function v2(n,e){return new r_(n,e??null,[])}var r_=class extends rd{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new n_(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=KN(e);this._bootstrapComponents=EF(o.bootstrap),this._r3Injector=U3(e,t,[{provide:rd,useValue:this},{provide:I_,useValue:this.componentFactoryResolver},...i],Oo(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},qE=class extends r1{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new r_(this.moduleType,e,[])}};var o_=class extends rd{injector;componentFactoryResolver=new n_(this);instance=null;constructor(e){super();let t=new wm([...e.providers,{provide:rd,useValue:this},{provide:I_,useValue:this.componentFactoryResolver}],e.parent||fT(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function A_(n,e,t=null){return new o_({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var xK=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=QN(!1,t.type),r=i.length>0?A_([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ye({token:n,providedIn:"environment",factory:()=>new n(Ge(qr))})}return n})();function Tt(n){return Rm(()=>{let e=y2(n),t=ft(we({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Y3.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(xK).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xa.Emulated,styles:n.styles||Po,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ud("NgStandalone"),_2(t);let i=n.dependencies;return t.directiveDefs=MN(i,!1),t.pipeDefs=MN(i,!0),t.id=EK(t),t})}function bK(n){return $f(n)||JN(n)}function MK(n){return n!==null}function mo(n){return Rm(()=>({type:n.type,bootstrap:n.bootstrap||Po,declarations:n.declarations||Po,imports:n.imports||Po,exports:n.exports||Po,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function CK(n,e){if(n==null)return $a;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=b_.None,l=null),t[o]=[i,a,l],e[o]=s}return t}function SK(n){if(n==null)return $a;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Xe(n){return Rm(()=>{let e=y2(n);return _2(e),e})}function lh(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function y2(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||$a,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Po,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:CK(n.inputs,e),outputs:SK(n.outputs),debugInfo:null}}function _2(n){n.features?.forEach(e=>e(n))}function MN(n,e){if(!n)return null;let t=e?Q9:bK;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(MK)}function EK(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function TK(n){return Object.getPrototypeOf(n.prototype).constructor}function jn(n){let e=TK(n.type),t=!0,i=[n];for(;e;){let r;if(da(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ie(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=JS(n.inputs),s.declaredInputs=JS(n.declaredInputs),s.outputs=JS(n.outputs);let a=r.hostBindings;a&&PK(n,a);let l=r.viewQuery,u=r.contentQueries;if(l&&AK(n,l),u&&RK(n,u),DK(n,r),R9(n.outputs,r.outputs),da(r)&&r.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===jn&&(t=!1)}}e=Object.getPrototypeOf(e)}IK(i)}function DK(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function IK(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Zf(r.hostAttrs,t=Zf(t,r.hostAttrs))}}function JS(n){return n===$a?{}:n===Po?[]:n}function AK(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function RK(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function PK(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Kl(n){let e=t=>{let i=Array.isArray(n);t.hostDirectives===null?(t.findHostDirectiveDefs=w2,t.hostDirectives=i?n.map(XE):[n]):i?t.hostDirectives.unshift(...n.map(XE)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function w2(n,e,t){if(n.hostDirectives!==null)for(let i of n.hostDirectives)if(typeof i=="function"){let r=i();for(let o of r)CN(XE(o),e,t)}else CN(i,e,t)}function CN(n,e,t){let i=JN(n.directive);OK(i.declaredInputs,n.inputs),w2(i,e,t),t.set(i,n),e.push(i)}function XE(n){return typeof n=="function"?{directive:Nr(n),inputs:$a,outputs:$a}:{directive:Nr(n.directive),inputs:SN(n.inputs),outputs:SN(n.outputs)}}function SN(n){if(n===void 0||n.length===0)return $a;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function OK(n,e){for(let t in e)if(e.hasOwnProperty(t)){let i=e[t],r=n[t];n[i]=r}}function x2(n){return FK(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function NK(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function FK(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function o1(n,e,t){return n[e]=t}function LK(n,e){return n[e]}function Ya(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function kK(n,e,t,i){let r=Ya(n,e,t);return Ya(n,e+1,i)||r}function UK(n,e,t,i,r,o,s,a,l){let u=e.consts,f=jm(e,n,4,s||null,a||null);_T()&&t1(e,t,f,Yf(u,l),XT),f.mergedAttrs=Zf(f.mergedAttrs,f.attrs),ET(e,f);let h=f.tView=jT(2,f,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,f),h.queries=e.queries.embeddedTView(f)),f}function b2(n,e,t,i,r,o,s,a,l,u){let f=t+Hi,h=e.firstCreatePass?UK(f,e,n,i,r,o,s,a,l):e.data[f];ld(h,!1);let p=M2(e,n,h,t);v_()&&C_(e,n,p,h),sh(p,n);let g=e2(p,n,p,h);return n[f]=g,WT(n,g),aK(g,h,n),p_(h)&&M_(e,n,h),l!=null&&$T(n,h,u),h}function Oe(n,e,t,i,r,o,s,a){let l=hn(),u=zi(),f=Yf(u.consts,o);return b2(l,u,n,e,t,i,r,f,s,a),Oe}var M2=C2;function C2(n,e,t,i){return eu(!0),e[pi].createComment("")}function BK(n,e,t,i){let r=e[ua],o=!r||rh()||dd(t)||Hm(r,i);if(eu(o),o)return C2(n,e);let s=r.data[MX]?.[i]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=T_(r,n,e,t);__(r,i,a);let l=LT(r,i);return D_(l,a)}function VK(){M2=BK}var s1=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var S2=new Ae("");var E2=(()=>{class n{static \u0275prov=ye({token:n,providedIn:"root",factory:()=>new YE})}return n})(),YE=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function tu(n){return!!n&&typeof n.then=="function"}function a1(n){return!!n&&typeof n.subscribe=="function"}var HK=new Ae("");var T2=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=D(HK,{optional:!0})??[];injector=D(Lr);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=ns(this.injector,r);if(tu(o))t.push(o);else if(a1(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ch=new Ae("");function zK(){yS(()=>{throw new Ie(600,!1)})}function jK(n){return n.isBoundToModule}var GK=10;var ha=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=D(oX);afterRenderManager=D(DX);zonelessEnabled=D(IT);rootEffectScheduler=D(E2);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Rn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=D(Xl).hasPendingTasks.pipe(Le(t=>!t));constructor(){D(y_,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=D(qr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Lr.NULL){wi(10);let o=t instanceof s2;if(!this._injector.get(T2).done){let g="";throw new Ie(405,g)}let a;o?a=t:a=this._injector.get(I_).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=jK(a)?void 0:this._injector.get(rd),u=i||a.selector,f=a.create(r,[],u,l),h=f.location.nativeElement,p=f.injector.get(S2,null);return p?.registerApplication(h),f.onDestroy(()=>{this.detachView(f.hostView),Fy(this.components,f),p?.unregisterApplication(h)}),this._loadComponent(f),wi(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){wi(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(aF.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Ie(101,!1);let t=Dn(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Dn(t),this.afterTick.next(),wi(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Jc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<GK;)wi(14),this.synchronizeOnce(),wi(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)WK(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>m_(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Fy(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ch,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Fy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ie(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fy(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function WK(n,e,t,i){if(!t&&!m_(n))return;ZF(n,e,t&&!i?0:1)}function or(n,e,t,i){let r=hn(),o=Lm();if(Ya(r,o,e)){let s=zi(),a=g_();kY(a,r,n,e,t,i)}return or}function $K(n,e,t,i){return Ya(n,Lm(),t)?e+Pm(t)+i:Ka}function Ay(n,e){return n<<17|e<<2}function od(n){return n>>17&32767}function qK(n){return(n&2)==2}function XK(n,e){return n&131071|e<<17}function ZE(n){return n|2}function Jf(n){return(n&131068)>>2}function QS(n,e){return n&-131069|e<<2}function YK(n){return(n&1)===1}function KE(n){return n|1}function ZK(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=od(s),l=Jf(s);n[i]=t;let u=!1,f;if(Array.isArray(t)){let h=t;f=h[1],(f===null||Om(h,f)>0)&&(u=!0)}else f=t;if(r)if(l!==0){let p=od(n[a+1]);n[i+1]=Ay(p,a),p!==0&&(n[p+1]=QS(n[p+1],i)),n[a+1]=XK(n[a+1],i)}else n[i+1]=Ay(a,0),a!==0&&(n[a+1]=QS(n[a+1],i)),a=i;else n[i+1]=Ay(l,0),a===0?a=i:n[l+1]=QS(n[l+1],i),l=i;u&&(n[i+1]=ZE(n[i+1])),EN(n,f,i,!0),EN(n,f,i,!1),KK(e,f,n,i,o),s=Ay(a,l),o?e.classBindings=s:e.styleBindings=s}function KK(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Om(o,e)>=0&&(t[i+1]=KE(t[i+1]))}function EN(n,e,t,i){let r=n[t+1],o=e===null,s=i?od(r):Jf(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];JK(l,e)&&(a=!0,n[s+1]=i?KE(u):ZE(u)),s=i?od(u):Jf(u)}a&&(n[t+1]=i?ZE(r):KE(r))}function JK(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Om(n,e)>=0:!1}var mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function D2(n){return n.substring(mr.key,mr.keyEnd)}function QK(n){return n.substring(mr.value,mr.valueEnd)}function eJ(n){return R2(n),I2(n,Qf(n,0,mr.textEnd))}function I2(n,e){let t=mr.textEnd;return t===e?-1:(e=mr.keyEnd=nJ(n,mr.key=e,t),Qf(n,e,t))}function tJ(n){return R2(n),A2(n,Qf(n,0,mr.textEnd))}function A2(n,e){let t=mr.textEnd,i=mr.key=Qf(n,e,t);return t===i?-1:(i=mr.keyEnd=iJ(n,i,t),i=TN(n,i,t,58),i=mr.value=Qf(n,i,t),i=mr.valueEnd=rJ(n,i,t),TN(n,i,t,59))}function R2(n){mr.key=0,mr.keyEnd=0,mr.value=0,mr.valueEnd=0,mr.textEnd=n.length}function Qf(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function nJ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function iJ(n,e,t){let i;for(;e<t&&((i=n.charCodeAt(e))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)e++;return e}function TN(n,e,t,i){return e=Qf(n,e,t),e<t&&e++,e}function rJ(n,e,t){let i=-1,r=-1,o=-1,s=e,a=s;for(;s<t;){let l=n.charCodeAt(s++);if(l===59)return a;l===34||l===39?a=s=DN(n,l,s,t):e===s-4&&o===85&&r===82&&i===76&&l===40?a=s=DN(n,41,s,t):l>32&&(a=s),o=r,r=i,i=l&-33}return a}function DN(n,e,t,i){let r=-1,o=t;for(;o<i;){let s=n.charCodeAt(o++);if(s==e&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function q(n,e,t){let i=hn(),r=Lm();if(Ya(i,r,e)){let o=zi(),s=g_();qT(o,s,i,n,e,i[pi],t,!1)}return q}function JE(n,e,t,i,r){YT(e,n,t,r?"class":"style",i)}function Gn(n,e,t){return N2(n,e,t,!1),Gn}function Ht(n,e){return N2(n,e,null,!0),Ht}function P2(n){F2(U2,oJ,n,!1)}function oJ(n,e){for(let t=tJ(e);t>=0;t=A2(e,t))U2(n,D2(e),QK(e))}function O2(n){F2(fJ,sJ,n,!0)}function sJ(n,e){for(let t=eJ(e);t>=0;t=I2(e,t))d_(n,D2(e),!0)}function N2(n,e,t,i){let r=hn(),o=zi(),s=v3(2);if(o.firstUpdatePass&&k2(o,n,s,i),e!==Ka&&Ya(r,s,e)){let a=o.data[cd()];B2(o,a,r,r[pi],n,r[s+1]=pJ(e,t),i,s)}}function F2(n,e,t,i){let r=zi(),o=v3(2);r.firstUpdatePass&&k2(r,null,o,i);let s=hn();if(t!==Ka&&Ya(s,o,t)){let a=r.data[cd()];if(V2(a,i)&&!L2(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=iE(l,t||"")),JE(r,a,s,t,i)}else hJ(r,a,s,s[pi],s[o+1],s[o+1]=dJ(n,e,t),i,o)}}function L2(n,e){return e>=n.expandoStartIndex}function k2(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[cd()],s=L2(n,t);V2(o,i)&&e===null&&!s&&(e=!1),e=aJ(r,o,e,i),ZK(r,o,e,t,s,i)}}function aJ(n,e,t,i){let r=y3(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=eE(null,n,e,t,i),t=Im(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=eE(r,n,e,t,i),o===null){let l=lJ(n,e,i);l!==void 0&&Array.isArray(l)&&(l=eE(null,n,e,l[1],i),l=Im(l,e.attrs,i),cJ(n,e,i,l))}else o=uJ(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function lJ(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Jf(i)!==0)return n[od(i)]}function cJ(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[od(r)]=i}function uJ(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=Im(i,s,t)}return Im(i,e.attrs,t)}function eE(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=Im(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Im(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),d_(n,s,t?!0:e[++o]))}return n===void 0?null:n}function dJ(n,e,t){if(t==null||t==="")return Po;let i=[],r=Ds(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function U2(n,e,t){d_(n,e,Ds(t))}function fJ(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&d_(n,i,t)}function hJ(n,e,t,i,r,o,s,a){r===Ka&&(r=Po);let l=0,u=0,f=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;f!==null||h!==null;){let p=l<r.length?r[l+1]:void 0,g=u<o.length?o[u+1]:void 0,v=null,x;f===h?(l+=2,u+=2,p!==g&&(v=h,x=g)):h===null||f!==null&&f<h?(l+=2,v=f):(u+=2,v=h,x=g),v!==null&&B2(n,e,t,i,v,x,s,a),f=l<r.length?r[l]:null,h=u<o.length?o[u]:null}}function B2(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],f=YK(u)?IN(l,e,t,r,Jf(u),s):void 0;if(!s_(f)){s_(o)||qK(u)&&(o=IN(l,null,t,r,a,s));let h=u3(cd(),t);nZ(i,s,h,r,o)}}function IN(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let l=n[r],u=Array.isArray(l),f=u?l[1]:l,h=f===null,p=t[r+1];p===Ka&&(p=h?Po:void 0);let g=h?VS(p,i):f===i?p:void 0;if(u&&!s_(g)&&(g=VS(l,i)),s_(g)&&(a=g,s))return a;let v=n[r+1];r=s?od(v):Jf(v)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=VS(l,i))}return a}function s_(n){return n!==void 0}function pJ(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Oo(Ds(n)))),n}function V2(n,e){return(n.flags&(e?8:16))!==0}function P(n,e,t,i){let r=hn(),o=zi(),s=Hi+n,a=r[pi],l=o.firstCreatePass?l2(s,o,r,e,XT,_T(),t,i):o.data[s],u=H2(o,r,l,a,e,n);r[s]=u;let f=p_(l);return ld(l,!0),OF(a,u,l),!dd(l)&&v_()&&C_(o,r,u,l),(xq()===0||f)&&sh(u,r),bq(),f&&(M_(o,r,l),kT(o,l,r)),i!==null&&$T(r,l),P}function O(){let n=Xr();wT()?xT():(n=n.parent,ld(n,!1));let e=n;Cq(e)&&Eq(),Mq();let t=zi();return t.firstCreatePass&&c2(t,e),e.classesWithoutHost!=null&&Uq(e)&&JE(t,e,hn(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Bq(e)&&JE(t,e,hn(),e.stylesWithoutHost,!1),O}function me(n,e,t,i){return P(n,e,t,i),O(),me}var H2=(n,e,t,i,r,o)=>(eu(!0),HT(i,r,S3()));function mJ(n,e,t,i,r,o){let s=e[ua],a=!s||rh()||dd(t)||Hm(s,o);if(eu(a),a)return HT(i,r,S3());let l=T_(s,n,e,t);return fF(s,o)&&__(s,o,l.nextSibling),s&&(q3(t)||X3(l))&&ad(t)&&(Sq(t),PF(l)),l}function gJ(){H2=mJ}function vJ(n,e,t,i,r){let o=e.consts,s=Yf(o,i),a=jm(e,n,8,"ng-container",s);s!==null&&VE(a,s,!0);let l=Yf(o,r);return _T()&&t1(e,t,a,l,XT),a.mergedAttrs=Zf(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Ja(n,e,t){let i=hn(),r=zi(),o=n+Hi,s=r.firstCreatePass?vJ(o,r,i,e,t):r.data[o];ld(s,!0);let a=z2(r,i,s,n);return i[o]=a,v_()&&C_(r,i,a,s),sh(a,i),p_(s)&&(M_(r,i,s),kT(r,s,i)),t!=null&&$T(i,s),Ja}function Qa(){let n=Xr(),e=zi();return wT()?xT():(n=n.parent,ld(n,!1)),e.firstCreatePass&&(ET(e,n),pT(n)&&e.queries.elementEnd(n)),Qa}function Qi(n,e,t){return Ja(n,e,t),Qa(),Qi}var z2=(n,e,t,i)=>(eu(!0),AF(e[pi],""));function yJ(n,e,t,i){let r,o=e[ua],s=!o||rh()||Hm(o,i)||dd(t);if(eu(s),s)return AF(e[pi],"");let a=T_(o,n,e,t),l=LX(o,i);return __(o,i,a),r=D_(l,a),r}function _J(){z2=yJ}function Rt(){return hn()}function nu(n,e,t){let i=hn(),r=Lm();if(Ya(i,r,e)){let o=zi(),s=g_(),a=y3(o.data),l=VY(a,s,i);qT(o,s,i,n,e,l,t,!0)}return nu}var a_="en-US";var wJ=a_;function xJ(n){typeof n=="string"&&(wJ=n.toLowerCase().replace(/_/g,"-"))}function AN(n,e,t){return function i(r){if(r===Function)return t;let o=ad(n)?qa(n.index,e):e;e1(o,5);let s=e[Lo],a=RN(e,s,t,r),l=i.__ngNextListenerFn__;for(;l;)a=RN(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function RN(n,e,t,i){let r=Dn(null);try{return wi(6,e,t),t(i)!==!1}catch(o){return bJ(n,o),!1}finally{wi(7,e,t),Dn(r)}}function bJ(n,e){let t=n[Ju],i=t?t.get(Wl,null):null;i&&i.handleError(e)}function PN(n,e,t,i,r,o){let s=e[t],a=e[cn],u=a.data[t].outputs[i],f=s[u],h=a.firstCreatePass?yT(a):null,p=vT(e),g=f.subscribe(o),v=p.length;p.push(o,g),h&&h.push(r,n.index,v,-(v+1))}var MJ=new Map;function Me(n,e,t,i){let r=hn(),o=zi(),s=Xr();return j2(o,r,r[pi],s,n,e,i),Me}function CJ(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[zy],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function j2(n,e,t,i,r,o,s){let a=p_(i),u=n.firstCreatePass?yT(n):null,f=vT(e),h=!0;if(i.type&3||s){let p=pa(i,e),g=s?s(p):p,v=f.length,x=s?_=>s(fa(_[i.index])):i.index,y=null;if(!s&&a&&(y=CJ(n,e,r,i.index)),y!==null){let _=y.__ngLastListenerFn__||y;_.__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,h=!1}else{o=AN(i,e,o);let _=e[Ju].get(Bm);MJ.get(_)?.(g,r,o);let M=t.listen(g,r,o);f.push(o,M),u&&u.push(r,x,v,v+1)}}else o=AN(i,e,o);if(h){let p=i.outputs?.[r],g=i.hostDirectiveOutputs?.[r];if(g&&g.length)for(let v=0;v<g.length;v+=2){let x=g[v],y=g[v+1];PN(i,e,x,y,r,o)}if(p&&p.length)for(let v of p)PN(i,e,v,r,r,o)}}function ve(n=1){return Nq(n)}function SJ(n,e){let t=null,i=mY(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(i===null?DF(n,o,!0):yY(i,o))return r}return t}function iu(n){let e=hn()[ko][Uo];if(!e.projection){let t=n?n.length:1,i=e.projection=Z9(t,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?SJ(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function is(n,e=0,t,i,r,o){let s=hn(),a=zi(),l=i?n+1:null;l!==null&&b2(s,a,l,i,r,o,null,t);let u=jm(a,Hi+n,16,null,t||null);u.projection===null&&(u.projection=e),xT();let h=!s[ua]||rh();s[ko][Uo].projection[u.projection]===null&&l!==null?EJ(s,a,l):h&&!dd(u)&&eZ(a,s,u)}function EJ(n,e,t){let i=Hi+t,r=e.data[i],o=n[i],s=kE(o,r.tView.ssrId),a=BF(n,r,void 0,{dehydratedView:s});t2(o,a,0,OE(r,s))}function R_(n,e,t,i){vK(n,e,t,i)}function Fi(n,e,t){gK(n,e,t)}function mi(n){let e=hn(),t=zi(),i=_3();bT(i+1);let r=i1(t,i);if(n.dirty&&gq(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=wK(e,i);n.reset(o,lX),n.notifyOnChanges()}return!0}return!1}function gi(){return mK(hn(),_3())}function TJ(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Ur(n){let e=Dq();return mT(e,Hi+n)}function ne(n,e=""){let t=hn(),i=zi(),r=n+Hi,o=i.firstCreatePass?jm(i,r,1,e,null):i.data[r],s=G2(i,t,o,e,n);t[r]=s,v_()&&C_(i,t,s,o),ld(o,!1)}var G2=(n,e,t,i,r)=>(eu(!0),IF(e[pi],i));function DJ(n,e,t,i,r){let o=e[ua],s=!o||rh()||dd(t)||Hm(o,r);return eu(s),s?IF(e[pi],i):T_(o,n,e,t)}function IJ(){G2=DJ}function ei(n){return er("",n,""),ei}function er(n,e,t){let i=hn(),r=$K(i,n,e,t);return r!==Ka&&AJ(i,cd(),r),er}function AJ(n,e,t){let i=u3(e,n);bY(n[pi],i,t)}function Is(n,e,t){$3(e)&&(e=e());let i=hn(),r=Lm();if(Ya(i,r,e)){let o=zi(),s=g_();qT(o,s,i,n,e,i[pi],t,!1)}return Is}function ga(n,e){let t=$3(n);return t&&n.set(e),t}function As(n,e){let t=hn(),i=zi(),r=Xr();return j2(i,t,t[pi],r,n,e),As}function RJ(n,e,t){let i=zi();if(i.firstCreatePass){let r=da(n);QE(t,i.data,i.blueprint,r,!0),QE(e,i.data,i.blueprint,r,!1)}}function QE(n,e,t,i,r){if(n=Nr(n),Array.isArray(n))for(let o=0;o<n.length;o++)QE(n[o],e,t,i,r);else{let o=zi(),s=hn(),a=Xr(),l=qf(n)?n:Nr(n.provide),u=n3(n),f=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(qf(n)||!n.multi){let g=new id(u,r,ce),v=nE(l,e,r?f:f+p,h);v===-1?(mE(Xy(a,s),o,l),tE(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[v]=g,s[v]=g)}else{let g=nE(l,e,f+p,h),v=nE(l,e,f,f+p),x=g>=0&&t[g],y=v>=0&&t[v];if(r&&!y||!r&&!x){mE(Xy(a,s),o,l);let _=NJ(r?OJ:PJ,t.length,r,i,u);!r&&y&&(t[v].providerFactory=_),tE(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),s.push(_)}else{let _=W2(t[r?v:g],u,!r&&i);tE(o,n,g>-1?g:v,_)}!r&&i&&y&&t[v].componentProviders++}}}function tE(n,e,t,i){let r=qf(e),o=rq(e);if(r||o){let l=(o?Nr(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[i,l]):u[f+1].push(i,l)}else u.push(t,l)}}}function W2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function nE(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function PJ(n,e,t,i){return eT(this.multi,[])}function OJ(n,e,t,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Cm(t,t[cn],this.providerFactory.index,i);o=a.slice(0,s),eT(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],eT(r,o);return o}function eT(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function NJ(n,e,t,i,r){let o=new id(n,t,ce);return o.multi=[],o.index=e,o.componentProviders=0,W2(o,r,i&&!t),o}function un(n,e=[]){return t=>{t.providersResolver=(i,r)=>RJ(i,r?r(n):n,e)}}function fd(n,e,t){let i=Fm()+n,r=hn();return r[i]===Ka?o1(r,i,t?e.call(t):e()):LK(r,i)}function gr(n,e,t,i){return q2(hn(),Fm(),n,e,t,i)}function P_(n,e,t,i,r){return X2(hn(),Fm(),n,e,t,i,r)}function $2(n,e){let t=n[e];return t===Ka?void 0:t}function q2(n,e,t,i,r,o){let s=e+t;return Ya(n,s,r)?o1(n,s+1,o?i.call(o,r):i(r)):$2(n,s+1)}function X2(n,e,t,i,r,o,s){let a=e+t;return kK(n,a,r,o)?o1(n,a+2,s?i.call(s,r,o):i(r,o)):$2(n,a+2)}function el(n,e){let t=zi(),i,r=n+Hi;t.firstCreatePass?(i=FJ(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=Zu(i.type,!0)),s,a=Ro(ce);try{let l=qy(!1),u=o();return qy(l),TJ(t,hn(),r,u),u}finally{Ro(a)}}function FJ(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Jl(n,e,t){let i=n+Hi,r=hn(),o=mT(r,i);return Z2(r,i)?q2(r,Fm(),e,o.transform,t,o):o.transform(t)}function Y2(n,e,t,i){let r=n+Hi,o=hn(),s=mT(o,r);return Z2(o,r)?X2(o,Fm(),e,s.transform,t,i,s):s.transform(t,i)}function Z2(n,e){return n[cn].data[e].pure}function Kr(n,e){return E_(n,e)}var Am=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},K2=new Am("19.2.9"),tT=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},J2=(()=>{class n{compileModuleSync(t){return new qE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=KN(t),o=EF(r.declarations).reduce((s,a)=>{let l=$f(a);return l&&s.push(new Dm(l)),s},[]);return new tT(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var LJ=(()=>{class n{zone=D(Mn);changeDetectionScheduler=D(Kf);applicationRef=D(ha);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kJ({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Mn(ft(we({},UJ()),{scheduleInRootZone:t})),[{provide:Mn,useFactory:n},{provide:Ku,multi:!0,useFactory:()=>{let i=D(LJ,{optional:!0});return()=>i.initialize()}},{provide:Ku,multi:!0,useFactory:()=>{let i=D(BJ);return()=>{i.initialize()}}},e===!0?{provide:V3,useValue:!0}:[],{provide:H3,useValue:t??B3}]}function UJ(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var BJ=(()=>{class n{subscription=new Bi;initialized=!1;zone=D(Mn);pendingTasks=D(Xl);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Mn.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Mn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var VJ=(()=>{class n{appRef=D(ha);taskService=D(Xl);ngZone=D(Mn);zonelessEnabled=D(IT);tracing=D(y_,{optional:!0});disableScheduling=D(V3,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Bi;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zy):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(D(H3,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof _E||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?iN:z3;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zy+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,iN(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HJ(){return typeof $localize<"u"&&$localize.locale||a_}var O_=new Ae("",{providedIn:"root",factory:()=>D(O_,wn.Optional|wn.SkipSelf)||HJ()});var nT=new Ae(""),zJ=new Ae("");function gm(n){return!n.moduleRef}function jJ(n){let e=gm(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Mn);return t.run(()=>{gm(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Wl,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),gm(n)){let o=()=>e.destroy(),s=n.platformInjector.get(nT);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(nT);s.add(o),n.moduleRef.onDestroy(()=>{Fy(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return WJ(i,t,()=>{let o=e.get(T2);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(O_,a_);if(xJ(s||a_),!e.get(zJ,!0))return gm(n)?e.get(ha):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(gm(n)){let l=e.get(ha);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return GJ(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function GJ(n,e){let t=n.injector.get(ha);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Ie(-403,!1);e.push(n)}function WJ(n,e,t){try{let i=t();return tu(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var Ly=null;function $J(n=[],e){return Lr.create({name:e,providers:[{provide:f_,useValue:"platform"},{provide:nT,useValue:new Set([()=>Ly=null])},...n]})}function qJ(n=[]){if(Ly)return Ly;let e=$J(n);return Ly=e,zK(),XJ(e),e}function XJ(n){let e=n.get(PT,null);ns(n,()=>{e?.forEach(t=>t())})}var ti=(()=>{class n{static __NG_ELEMENT_ID__=YJ}return n})();function YJ(n){return ZJ(Xr(),hn(),(n&16)===16)}function ZJ(n,e,t){if(ad(n)&&!t){let i=qa(n.index,e);return new Tm(i,i)}else if(n.type&175){let i=e[ko];return new Tm(i,e)}return null}var iT=class{constructor(){}supports(e){return x2(e)}create(e){return new rT(e)}},KJ=(n,e)=>e,rT=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||KJ}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<ON(i,r,o)?t:i,a=ON(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,f=l-r;if(u!=f){for(let p=0;p<u;p++){let g=p<o.length?o[p]:o[p]=0,v=g+p;f<=v&&v<u&&(o[p]=g+1)}let h=s.previousIndex;o[h]=f-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!x2(e))throw new Ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,NK(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new oT(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new l_),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new l_),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},oT=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},sT=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},l_=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new sT,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ON(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function NN(){return new l1([new iT])}var l1=(()=>{class n{factories;static \u0275prov=ye({token:n,providedIn:"root",factory:NN});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||NN()),deps:[[n,new eh,new sd]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new Ie(901,!1)}}return n})();function Q2(n){wi(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=qJ(i),o=[kJ({}),{provide:Kf,useExisting:VJ},...t||[]],s=new o_({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return jJ({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{wi(9)}}var FN=!1;function JJ(){FN||(FN=!0,PX(),gJ(),IJ(),_J(),VK(),uK(),kZ(),RY())}function QJ(n){return n.whenStable()}function eL(){let n=[{provide:Ey,useFactory:()=>{let e=!0;return e=!!D(Vm,{optional:!0})?.get(cF,null),e&&ud("NgHydration"),e}},{provide:Ku,useValue:()=>{AZ(!1),D(Ey)&&(UX(Um()),JJ())},multi:!0}];return n.push({provide:sF,useFactory:()=>D(Ey)},{provide:ch,useFactory:()=>{if(D(Ey)){let e=D(ha);return()=>{QJ(e).then(()=>{e.destroyed||NZ(e)})}}return()=>{}},multi:!0}),Qc(n)}function uh(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function go(n){return xS(n)}function rs(n,e){return vS(n,e?.equal)}var aT=class{[Es];constructor(e){this[Es]=e}destroy(){this[Es].destroy()}};function dh(n,e){!e?.injector&&th(dh);let t=e?.injector??D(Lr),i=e?.manualCleanup!==!0?t.get(Er):null,r,o=t.get(lF,null,{optional:!0}),s=t.get(Kf);return o!==null&&!e?.forceRoot?(r=nQ(o.view,s,n),i instanceof Yy&&i._lView===o.view&&(i=null)):r=iQ(n,t.get(E2),s),r.injector=t,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new aT(r)}var tL=ft(we({},Cf),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Sm,run(){if(this.dirty=!1,this.hasRun&&!qv(this))return;this.hasRun=!0;let n=i=>(this.cleanupFns??=[]).push(i),e=am(this),t=Gy(!1);try{this.maybeCleanup(),this.fn(n)}finally{Gy(t),$v(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),eQ=ft(we({},tL),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){lm(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),tQ=ft(we({},tL),{consumerMarkedDirty(){this.view[Kt]|=8192,Nm(this.view),this.notifier.notify(13)},destroy(){lm(this),this.onDestroyFn(),this.maybeCleanup(),this.view[ed]?.delete(this)}});function nQ(n,e,t){let i=Object.create(tQ);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=t,n[ed]??=new Set,n[ed].add(i),i.consumerMarkedDirty(i),i}function iQ(n,e,t){let i=Object.create(eQ);return i.fn=n,i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.schedule(i),i.notifier.notify(12),i}var zt=new Ae("");var rL=null;function Rs(){return rL}function c1(n){rL??=n}var Gm=class{},u1=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:()=>D(oL),providedIn:"platform"})}return n})();var oL=(()=>{class n extends u1{_location;_history;_doc=D(zt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rs().getBaseHref(this._doc)}onPopState(t){let i=Rs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=Rs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function sL(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function nL(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ru(n){return n&&n[0]!=="?"?`?${n}`:n}var fh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:()=>D(lL),providedIn:"root"})}return n})(),aL=new Ae(""),lL=(()=>{class n extends fh{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??D(zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sL(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+ru(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+ru(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+ru(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Ge(u1),Ge(aL,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bo=(()=>{class n{_subject=new Rn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=sQ(nL(iL(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ru(i))}normalize(t){return n.stripTrailingSlash(oQ(this._basePath,iL(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ru(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ru(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=ru;static joinWithSlash=sL;static stripTrailingSlash=nL;static \u0275fac=function(i){return new(i||n)(Ge(fh))};static \u0275prov=ye({token:n,factory:()=>rQ(),providedIn:"root"})}return n})();function rQ(){return new Bo(Ge(fh))}function oQ(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function iL(n){return n.replace(/\/index.html$/,"")}function sQ(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var d1=/\s+/,cL=[],os=(()=>{class n{_ngEl;_renderer;initialClasses=cL;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(d1):cL}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(d1):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(d1).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(ce($t),ce(Yr))};static \u0275dir=Xe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})(),p1=(()=>{class n{_viewContainerRef;ngComponentOutlet=null;ngComponentOutletInputs;ngComponentOutletInjector;ngComponentOutletContent;ngComponentOutletNgModule;ngComponentOutletNgModuleFactory;_componentRef;_moduleRef;_inputsUsed=new Map;get componentInstance(){return this._componentRef?.instance??null}constructor(t){this._viewContainerRef=t}_needToReCreateNgModuleInstance(t){return t.ngComponentOutletNgModule!==void 0||t.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(t){return t.ngComponentOutlet!==void 0||t.ngComponentOutletContent!==void 0||t.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(t)}ngOnChanges(t){if(this._needToReCreateComponentInstance(t)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let i=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(t)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=v2(this.ngComponentOutletNgModule,uL(i)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(uL(i)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:i,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let t of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(t,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(t){for(let[i,r]of this._inputsUsed)r?(t.setInput(i,this.ngComponentOutletInputs[i]),this._inputsUsed.set(i,!1)):(t.setInput(i,void 0),this._inputsUsed.delete(i))}static \u0275fac=function(i){return new(i||n)(ce(Zr))};static \u0275dir=Xe({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},exportAs:["ngComponentOutlet"],features:[Ni]})}return n})();function uL(n){return n.get(rd).injector}var N_=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},li=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new N_(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),dL(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);dL(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(ce(Zr),ce(xi),ce(l1))};static \u0275dir=Xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function dL(n,e){n.context.$implicit=e.item}var In=(()=>{class n{_viewContainer;_context=new F_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fL(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fL(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(ce(Zr),ce(xi))};static \u0275dir=Xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),F_=class{$implicit=null;ngIf=null};function fL(n,e){if(n&&!n.createEmbeddedView)throw new Ie(2020,!1)}var Ql=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(ce(Zr))};static \u0275dir=Xe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Ni]})}return n})();function aQ(n,e){return new Ie(2100,!1)}var f1=class{createSubscription(e,t){return go(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){go(()=>e.unsubscribe())}},h1=class{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}},lQ=new h1,cQ=new f1,ou=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(tu(t))return lQ;if(a1(t))return cQ;throw aQ(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(ce(ti,16))};static \u0275pipe=lh({name:"async",type:n,pure:!1})}return n})();var hd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=mo({type:n});static \u0275inj=fo({})}return n})();function Wm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var L_="browser",hL="server";function md(n){return n===L_}function hh(n){return n===hL}var pd=class{};var gd=new Ae(""),y1=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Ie(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Ge(gd),Ge(Mn))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),mh=class{_doc;constructor(e){this._doc=e}manager},k_="ng-app-id";function pL(n){for(let e of n)e.remove()}function mL(n,e){let t=e.createElement("style");return t.textContent=n,t}function uQ(n,e,t,i){let r=n.head?.querySelectorAll(`style[${k_}="${e}"],link[${k_}="${e}"]`);if(r)for(let o of r)o.removeAttribute(k_),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function g1(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var _1=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=hh(o),uQ(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,mL);i?.forEach(r=>this.addUsage(r,this.external,g1))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(pL(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])pL(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,mL(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,g1(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(k_,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Ge(zt),Ge(Bm),Ge(NT,8),Ge(ho))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),m1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},w1=/%COMP%/g;var vL="%COMP%",dQ=`_nghost-${vL}`,fQ=`_ngcontent-${vL}`,hQ=!0,pQ=new Ae("",{providedIn:"root",factory:()=>hQ});function mQ(n){return fQ.replace(w1,n)}function gQ(n){return dQ.replace(w1,n)}function yL(n,e){return e.map(t=>t.replace(w1,n))}var Xm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=hh(a),this.defaultRenderer=new $m(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Xa.ShadowDom&&(i=ft(we({},i),{encapsulation:Xa.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof U_?r.applyToHost(t):r instanceof qm&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(i.encapsulation){case Xa.Emulated:o=new U_(l,u,i,this.appId,f,s,a,h,p);break;case Xa.ShadowDom:return new v1(l,u,t,i,s,a,this.nonce,h,p);default:o=new qm(l,u,i,f,s,a,h,p);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Ge(y1),Ge(_1),Ge(Bm),Ge(pQ),Ge(zt),Ge(ho),Ge(Mn),Ge(NT),Ge(y_,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),$m=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(m1[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(gL(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(gL(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ie(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=m1[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=m1[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ql.DashCase|ql.Important)?e.style.setProperty(t,i,r&ql.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ql.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=Rs().getGlobalEventTarget(this.doc,e),!e))throw new Ie(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function gL(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var v1=class extends $m{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=yL(r.id,f);for(let p of f){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=g1(p,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qm=class extends $m{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let f=i.styles;this.styles=u?yL(u,f):f,this.styleUrls=i.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},U_=class extends qm{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,l,u){let f=r+"-"+i.id;super(e,t,i,o,s,a,l,u,f),this.contentAttr=mQ(f),this.hostAttr=gQ(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var B_=class n extends Gm{supportsDOMEvents=!0;static makeCurrent(){c1(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=vQ();return t==null?null:yQ(t)}resetBaseElement(){Ym=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Wm(document.cookie,e)}},Ym=null;function vQ(){return Ym=Ym||document.querySelector("base"),Ym?Ym.getAttribute("href"):null}function yQ(n){return new URL(n,document.baseURI).pathname}var _Q=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),wL=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Ge(zt))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),_L=["alt","control","meta","shift"],wQ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xQ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xL=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rs().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),_L.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=wQ[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),_L.forEach(s=>{if(s!==r){let a=xQ[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Ge(zt))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function Zm(n,e){return Q2(we({rootComponent:n},bQ(e)))}function bQ(n){return{appProviders:[...TQ,...n?.providers??[]],platformProviders:EQ}}function MQ(){B_.makeCurrent()}function CQ(){return new Wl}function SQ(){return eF(document),document}var EQ=[{provide:ho,useValue:L_},{provide:PT,useValue:MQ,multi:!0},{provide:zt,useFactory:SQ}];var TQ=[{provide:f_,useValue:"root"},{provide:Wl,useFactory:CQ},{provide:gd,useClass:wL,multi:!0,deps:[zt]},{provide:gd,useClass:xL,multi:!0,deps:[zt]},Xm,_1,y1,{provide:Jc,useExisting:Xm},{provide:pd,useClass:_Q},[]];var vh=class{},Km=class{},ec=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var H_=class{encodeKey(e){return bL(e)}encodeValue(e){return bL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function DQ(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var IQ=/%(\d[a-f0-9])/gi,AQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bL(n){return encodeURIComponent(n).replace(IQ,(e,t)=>AQ[t]??e)}function V_(n){return`${n}`}var pn=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new H_,e.fromString){if(e.fromObject)throw new Ie(2805,!1);this.map=DQ(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(V_):[V_(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(V_(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(V_(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var z_=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function RQ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ML(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function CL(n){return typeof Blob<"u"&&n instanceof Blob}function SL(n){return typeof FormData<"u"&&n instanceof FormData}function PQ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var EL="Content-Type",TL="Accept",IL="X-Request-URL",AL="text/plain",RL="application/json",OQ=`${RL}, ${AL}, */*`,gh=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(RQ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ec,this.context??=new z_,!this.params)this.params=new pn,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ML(this.body)||CL(this.body)||SL(this.body)||PQ(this.body)?this.body:this.body instanceof pn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||SL(this.body)?null:CL(this.body)?this.body.type||null:ML(this.body)?null:typeof this.body=="string"?AL:this.body instanceof pn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?RL:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,f=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),u)),e.setParams&&(f=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),f)),new n(t,i,s,{params:f,headers:u,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},vd=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(vd||{}),yh=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new ec,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},j_=class n extends yh{constructor(e={}){super(e)}type=vd.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},yd=class n extends yh{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=vd.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Jm=class extends yh{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},NQ=200,FQ=204;function x1(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var sr=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof gh)o=t;else{let l;r.headers instanceof ec?l=r.headers:l=new ec(r.headers);let u;r.params&&(r.params instanceof pn?u=r.params:u=new pn({fromObject:r.params})),o=new gh(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=ct(o).pipe(Yc(l=>this.handler.handle(l)));if(t instanceof gh||r.observe==="events")return s;let a=s.pipe(rn(l=>l instanceof yd));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Le(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Ie(2806,!1);return l.body}));case"blob":return a.pipe(Le(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Ie(2807,!1);return l.body}));case"text":return a.pipe(Le(l=>{if(l.body!==null&&typeof l.body!="string")throw new Ie(2808,!1);return l.body}));case"json":default:return a.pipe(Le(l=>l.body))}case"response":return a;default:throw new Ie(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new pn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,x1(r,i))}post(t,i,r={}){return this.request("POST",t,x1(r,i))}put(t,i,r={}){return this.request("PUT",t,x1(r,i))}static \u0275fac=function(i){return new(i||n)(Ge(vh))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();var LQ=new Ae("");function PL(n,e){return e(n)}function kQ(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function UQ(n,e,t){return(i,r)=>ns(t,()=>e(i,o=>n(o,r)))}var W_=new Ae(""),M1=new Ae(""),C1=new Ae(""),S1=new Ae("",{providedIn:"root",factory:()=>!0});function BQ(){let n=null;return(e,t)=>{n===null&&(n=(D(W_,{optional:!0})??[]).reduceRight(kQ,PL));let i=D(Xl);if(D(S1)){let o=i.add();return n(e,t).pipe(sa(()=>i.remove(o)))}else return n(e,t)}}var G_=(()=>{class n extends vh{backend;injector;chain=null;pendingTasks=D(Xl);contributeToStability=D(S1);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(M1),...this.injector.get(C1,[])]));this.chain=i.reduceRight((r,o)=>UQ(r,o,this.injector),PL)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(sa(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(Ge(Km),Ge(qr))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();var VQ=/^\)\]\}',?\n/,HQ=RegExp(`^${IL}:`,"m");function zQ(n){return"responseURL"in n&&n.responseURL?n.responseURL:HQ.test(n.getAllResponseHeaders())?n.getResponseHeader(IL):null}var b1=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Ie(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?fi(i.\u0275loadImpl()):ct(null)).pipe(Vn(()=>new yt(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((x,y)=>s.setRequestHeader(x,y.join(","))),t.headers.has(TL)||s.setRequestHeader(TL,OQ),!t.headers.has(EL)){let x=t.detectContentTypeHeader();x!==null&&s.setRequestHeader(EL,x)}if(t.responseType){let x=t.responseType.toLowerCase();s.responseType=x!=="json"?x:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let x=s.statusText||"OK",y=new ec(s.getAllResponseHeaders()),_=zQ(s)||t.url;return l=new j_({headers:y,status:s.status,statusText:x,url:_}),l},f=()=>{let{headers:x,status:y,statusText:_,url:T}=u(),M=null;y!==FQ&&(M=typeof s.response>"u"?s.responseText:s.response),y===0&&(y=M?NQ:0);let C=y>=200&&y<300;if(t.responseType==="json"&&typeof M=="string"){let H=M;M=M.replace(VQ,"");try{M=M!==""?JSON.parse(M):null}catch(L){M=H,C&&(C=!1,M={error:L,text:M})}}C?(o.next(new yd({body:M,headers:x,status:y,statusText:_,url:T||void 0})),o.complete()):o.error(new Jm({error:M,headers:x,status:y,statusText:_,url:T||void 0}))},h=x=>{let{url:y}=u(),_=new Jm({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});o.error(_)},p=!1,g=x=>{p||(o.next(u()),p=!0);let y={type:vd.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(y.total=x.total),t.responseType==="text"&&s.responseText&&(y.partialText=s.responseText),o.next(y)},v=x=>{let y={type:vd.UploadProgress,loaded:x.loaded};x.lengthComputable&&(y.total=x.total),o.next(y)};return s.addEventListener("load",f),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:vd.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",f),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(Ge(pd))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),OL=new Ae(""),jQ="XSRF-TOKEN",GQ=new Ae("",{providedIn:"root",factory:()=>jQ}),WQ="X-XSRF-TOKEN",$Q=new Ae("",{providedIn:"root",factory:()=>WQ}),Qm=class{},qQ=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Wm(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(Ge(zt),Ge(ho),Ge(GQ))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function XQ(n,e){let t=n.url.toLowerCase();if(!D(OL)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=D(Qm).getToken(),r=D($Q);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var E1=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(E1||{});function YQ(n,e){return{\u0275kind:n,\u0275providers:e}}function T1(...n){let e=[sr,b1,G_,{provide:vh,useExisting:G_},{provide:Km,useFactory:()=>D(LQ,{optional:!0})??D(b1)},{provide:M1,useValue:XQ,multi:!0},{provide:OL,useValue:!0},{provide:Qm,useClass:qQ}];for(let t of n)e.push(...t.\u0275providers);return Qc(e)}var DL=new Ae("");function D1(){return YQ(E1.LegacyInterceptors,[{provide:DL,useFactory:BQ},{provide:M1,useExisting:DL,multi:!0}])}var ZQ=new Ae(""),KQ="b",JQ="h",QQ="s",eee="st",tee="u",nee="rt",I1=new Ae(""),iee=["GET","HEAD"];function ree(n,e){let p=D(I1),{isCacheActive:t}=p,i=ju(p,["isCacheActive"]),{transferCache:r,method:o}=n;if(!t||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!iee.includes(o)||!i.includeRequestsWithAuthHeaders&&oee(n)||i.filter?.(n)===!1)return e(n);let s=D(Vm);if(D(ZQ,{optional:!0}))throw new Ie(2803,!1);let l=n.url,u=see(n,l),f=s.get(u,null),h=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(h=r.includeHeaders),f){let{[KQ]:g,[nee]:v,[JQ]:x,[QQ]:y,[eee]:_,[tee]:T}=f,M=g;switch(v){case"arraybuffer":M=new TextEncoder().encode(g).buffer;break;case"blob":M=new Blob([g]);break}let C=new ec(x);return ct(new yd({body:M,headers:C,status:y,statusText:_,url:T}))}return e(n).pipe(Qn(g=>{g instanceof yd}))}function oee(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function NL(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function see(n,e){let{params:t,method:i,responseType:r}=n,o=NL(t),s=n.serializeBody();s instanceof URLSearchParams?s=NL(s):typeof s!="string"&&(s="");let a=[i,r,e,s,o].join("|"),l=aee(a);return l}function aee(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function FL(n){return[{provide:I1,useFactory:()=>(ud("NgHttpTransferCache"),we({isCacheActive:!0},n))},{provide:C1,useValue:ree,multi:!0},{provide:ch,multi:!0,useFactory:()=>{let e=D(ha),t=D(I1);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var LL=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(Ge(zt))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var R1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Ge(lee),r},providedIn:"root"})}return n})(),lee=(()=>{class n extends R1{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case ma.NONE:return i;case ma.HTML:return Yl(i,"HTML")?Ds(i):UT(this._doc,String(i)).toString();case ma.STYLE:return Yl(i,"Style")?Ds(i):i;case ma.SCRIPT:if(Yl(i,"Script"))return Ds(i);throw new Ie(5200,!1);case ma.URL:return Yl(i,"URL")?Ds(i):x_(String(i));case ma.RESOURCE_URL:if(Yl(i,"ResourceURL"))return Ds(i);throw new Ie(5201,!1);default:throw new Ie(5202,!1)}}bypassSecurityTrustHtml(t){return mF(t)}bypassSecurityTrustStyle(t){return gF(t)}bypassSecurityTrustScript(t){return vF(t)}bypassSecurityTrustUrl(t){return yF(t)}bypassSecurityTrustResourceUrl(t){return _F(t)}static \u0275fac=function(i){return new(i||n)(Ge(zt))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A1=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(A1||{});function kL(...n){let e=[],t=new Set;for(let{\u0275providers:r,\u0275kind:o}of n)t.add(o),r.length&&e.push(r);let i=t.has(A1.HttpTransferCacheOptions);return Qc([[],eL(),t.has(A1.NoHttpTransferCache)||i?[]:FL({}),e])}var P1=class extends CustomEvent{constructor(e,o){var s=o,{clientX:t,clientY:i}=s,r=ju(s,["clientX","clientY"]);super(e,ft(we({},r),{detail:{clientX:t,clientY:i}}))}},cee=({userAgent:n,maxTouchPoints:e})=>/ipad|iphone|ipod/i.test(n)||/^((?!chrome|android).)*safari/i.test(n)&&e>1,uee=700,BL=typeof navigator>"u"?null:navigator,dee=15,O1=class{constructor(){this.isIOS=!!BL&&cee(BL)}addEventListener(e,t,i){let r=this.isIOS?this.listenTouchEvents(e):this.listenContextmenuEvent(e);return e.addEventListener("longtap",i),()=>{r(),e.removeEventListener("longtap",i)}}supports(e){return e==="longtap"}listenContextmenuEvent(e){return this.manager.addEventListener(e,"contextmenu.prevent.stop",({clientX:t,clientY:i})=>{this.dispatchLongtapEvent(e,t,i)})}listenTouchEvents(e){let t=null,i=null,r=()=>{clearTimeout(t),i=null,t=null},o=this.manager.addEventListener(e,"touchstart.zoneless.passive",({touches:u})=>{let f=u[0];if(!f)return;let{clientX:h,clientY:p}=f;i={clientX:h,clientY:p},t=setTimeout(()=>{this.dispatchLongtapEvent(e,h,p),r()},uee)}),s=this.manager.addEventListener(e,"touchmove.zoneless.passive",({touches:u})=>{let f=u[0];if(!f||!i)return;let{clientX:h,clientY:p}=f;Math.hypot(h-i.clientX,p-i.clientY)<=dee||r()}),a=this.manager.addEventListener(e,"touchcancel.zoneless.passive",r),l=this.manager.addEventListener(e,"touchend.zoneless.passive",r);return()=>{o(),s(),a(),l()}}dispatchLongtapEvent(e,t,i){e.dispatchEvent(new P1("longtap",{clientX:t,clientY:i,bubbles:!1,cancelable:!1,composed:!1}))}},$_=class{supports(e){return this.regExp.test(e)}getDelay(e){let t=this.regExp.exec(e);if(!t?.groups)throw new Error(`Invalid event: ${e}`);let{time:i,units:r}=t.groups;switch(r){case"ms":return Number(i);case"s":return Number(i)*1e3;default:throw new Error(`Invalid event: ${e}`)}}unwrap(e){return e.replace(this.regExp,"")}},N1=class extends $_{constructor(){super(...arguments),this.regExp=/\.debounce~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,i){let r,o=this.manager.addEventListener(e,this.unwrap(t),s=>{clearTimeout(r),r=setTimeout(()=>{i(s)},this.getDelay(t))});return()=>{clearTimeout(r),o()}}},nc=class{supports(e){return e.includes(this.modifier)}unwrap(e){return e.split(".").filter(t=>!this.modifier.includes(t)).join(".")}},fee=new Ae("",{factory:()=>{let n=D(zt);return e=>e==="body"?n.body:n.defaultView[e]||n.createElement("div")}}),hee=(()=>{class n extends nc{constructor(){super(...arguments),this.handler=D(fee),this.modifier=">"}addEventListener(t,i,r){return this.manager.addEventListener(this.handler(i.split(">")[0]),i.split(">")?.[1]??"",r)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),pee=(()=>{class n extends nc{constructor(){super(...arguments),this.modifier="capture.once.passive"}supports(t){return t.includes(".")&&!this.unwrap(t).includes(".")}addEventListener(t,i,r){let o=this.unwrap(i),s=i.includes(".capture");return t.addEventListener(o,r,{capture:s,once:i.includes(".once"),passive:i.includes(".passive")}),()=>t.removeEventListener(o,r,{capture:s})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),mee=(()=>{class n extends nc{constructor(){super(...arguments),this.modifier=".prevent"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.preventDefault(),r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),gee=(()=>{class n extends nc{constructor(){super(...arguments),this.modifier="resize"}supports(t){return t==="resize"}addEventListener(t,i,r){if(typeof ResizeObserver>"u"||!(t instanceof Element))return t.addEventListener(i,r),()=>t.removeEventListener(i,r);let o=new ResizeObserver(r);return o.observe(t),()=>o.disconnect()}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),vee=(()=>{class n extends nc{constructor(){super(...arguments),this.modifier=".self"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.target===o.currentTarget&&r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),VL=(()=>{class n extends nc{constructor(){super(...arguments),this.modifier=".silent"}addEventListener(t,i,r){return n.ngZone=this.manager.getZone(),n.ngZone.runOutsideAngular(()=>this.manager.addEventListener(t,this.unwrap(i),r))}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),yee=(()=>{class n extends nc{constructor(){super(...arguments),this.modifier=".stop"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.stopPropagation(),r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),F1=class extends $_{constructor(){super(...arguments),this.regExp=/\.throttle~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,i){let r,o=this.manager.addEventListener(e,this.unwrap(t),s=>{r===void 0&&(i(s),r=setTimeout(()=>{r=void 0},this.getDelay(t)))});return()=>{clearTimeout(r),o()}}},_ee=(()=>{class n extends VL{constructor(){super(...arguments),this.modifier=".zoneless"}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),wee=[VL,_ee,hee,pee,mee,gee,vee,yee,O1,N1,F1],xee=wee.map(n=>({provide:gd,multi:!0,useClass:n}));function HL(){return xee}var sn="primary",hg=Symbol("RouteTitle"),V1=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function xd(n){return new V1(n)}function YL(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function bee(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!tl(n[t],e[t]))return!1;return!0}function tl(n,e){let t=n?H1(n):void 0,i=e?H1(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!ZL(n[r],e[r]))return!1;return!0}function H1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ZL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function KL(n){return n.length>0?n[n.length-1]:null}function lu(n){return yy(n)?n:tu(n)?fi(Promise.resolve(n)):ct(n)}var Mee={exact:QL,subset:ek},JL={exact:Cee,subset:See,ignored:()=>!0};function zL(n,e,t){return Mee[t.paths](n.root,e.root,t.matrixParams)&&JL[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Cee(n,e){return tl(n,e)}function QL(n,e,t){if(!_d(n.segments,e.segments)||!Y_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!QL(n.children[i],e.children[i],t))return!1;return!0}function See(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ZL(n[t],e[t]))}function ek(n,e,t){return tk(n,e,e.segments,t)}function tk(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!_d(r,t)||e.hasChildren()||!Y_(r,t,i))}else if(n.segments.length===t.length){if(!_d(n.segments,t)||!Y_(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!ek(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!_d(n.segments,r)||!Y_(n.segments,r,i)||!n.children[sn]?!1:tk(n.children[sn],e,o,i)}}function Y_(n,e,t){return e.every((i,r)=>JL[t](n[r].parameters,i.parameters))}var il=class{root;queryParams;fragment;_queryParamMap;constructor(e=new $n([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=xd(this.queryParams),this._queryParamMap}toString(){return Dee.serialize(this)}},$n=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Z_(this)}},su=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=xd(this.parameters),this._parameterMap}toString(){return ik(this)}};function Eee(n,e){return _d(n,e)&&n.every((t,i)=>tl(t.parameters,e[i].parameters))}function _d(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function Tee(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===sn&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==sn&&(t=t.concat(e(r,i)))}),t}var pg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:()=>new bd,providedIn:"root"})}return n})(),bd=class{parse(e){let t=new j1(e);return new il(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${eg(e.root,!0)}`,i=Ree(e.queryParams),r=typeof e.fragment=="string"?`#${Iee(e.fragment)}`:"";return`${t}${i}${r}`}},Dee=new bd;function Z_(n){return n.segments.map(e=>ik(e)).join("/")}function eg(n,e){if(!n.hasChildren())return Z_(n);if(e){let t=n.children[sn]?eg(n.children[sn],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==sn&&i.push(`${r}:${eg(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Tee(n,(i,r)=>r===sn?[eg(n.children[sn],!1)]:[`${r}:${eg(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[sn]!=null?`${Z_(n)}/${t[0]}`:`${Z_(n)}/(${t.join("//")})`}}function nk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function q_(n){return nk(n).replace(/%3B/gi,";")}function Iee(n){return encodeURI(n)}function z1(n){return nk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function K_(n){return decodeURIComponent(n)}function jL(n){return K_(n.replace(/\+/g,"%20"))}function ik(n){return`${z1(n.path)}${Aee(n.parameters)}`}function Aee(n){return Object.entries(n).map(([e,t])=>`;${z1(e)}=${z1(t)}`).join("")}function Ree(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${q_(t)}=${q_(r)}`).join("&"):`${q_(t)}=${q_(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Pee=/^[^\/()?;#]+/;function L1(n){let e=n.match(Pee);return e?e[0]:""}var Oee=/^[^\/()?;=#]+/;function Nee(n){let e=n.match(Oee);return e?e[0]:""}var Fee=/^[^=?&#]+/;function Lee(n){let e=n.match(Fee);return e?e[0]:""}var kee=/^[^&#]+/;function Uee(n){let e=n.match(kee);return e?e[0]:""}var j1=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $n([],{}):new $n([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[sn]=new $n(e,t)),i}parseSegment(){let e=L1(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ie(4009,!1);return this.capture(e),new su(K_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Nee(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=L1(this.remaining);r&&(i=r,this.capture(i))}e[K_(t)]=K_(i)}parseQueryParam(e){let t=Lee(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=Uee(this.remaining);s&&(i=s,this.capture(i))}let r=jL(t),o=jL(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=L1(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ie(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=sn);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[sn]:new $n([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ie(4011,!1)}};function rk(n){return n.segments.length>0?new $n([],{[sn]:n}):n}function ok(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=ok(r);if(i===sn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new $n(n.segments,e);return Bee(t)}function Bee(n){if(n.numberOfChildren===1&&n.children[sn]){let e=n.children[sn];return new $n(n.segments.concat(e.segments),e.children)}return n}function au(n){return n instanceof il}function sk(n,e,t=null,i=null){let r=ak(n);return lk(r,e,t,i)}function ak(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new $n(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=rk(i);return e??r}function lk(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return k1(r,r,r,t,i);let o=Vee(e);if(o.toRoot())return k1(r,r,new $n([],{}),t,i);let s=Hee(o,r,n),a=s.processChildren?ng(s.segmentGroup,s.index,o.commands):uk(s.segmentGroup,s.index,o.commands);return k1(r,s.segmentGroup,a,t,i)}function Q_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function rg(n){return typeof n=="object"&&n!=null&&n.outlets}function k1(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===e?s=t:s=ck(n,e,t);let a=rk(ok(s));return new il(a,o,r)}function ck(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=ck(o,e,t)}),new $n(n.segments,i)}var ew=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Q_(i[0]))throw new Ie(4003,!1);let r=i.find(rg);if(r&&r!==KL(i))throw new Ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Vee(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ew(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new ew(t,e,i)}var xh=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Hee(n,e,t){if(n.isAbsolute)return new xh(e,!0,0);if(!t)return new xh(e,!1,NaN);if(t.parent===null)return new xh(t,!0,0);let i=Q_(n.commands[0])?0:1,r=t.segments.length-1+i;return zee(t,r,n.numberOfDoubleDots)}function zee(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ie(4005,!1);r=i.segments.length}return new xh(i,!1,r-o)}function jee(n){return rg(n[0])?n[0].outlets:{[sn]:n}}function uk(n,e,t){if(n??=new $n([],{}),n.segments.length===0&&n.hasChildren())return ng(n,e,t);let i=Gee(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new $n(n.segments.slice(0,i.pathIndex),{});return o.children[sn]=new $n(n.segments.slice(i.pathIndex),n.children),ng(o,0,r)}else return i.match&&r.length===0?new $n(n.segments,{}):i.match&&!n.hasChildren()?G1(n,e,t):i.match?ng(n,0,r):G1(n,e,t)}function ng(n,e,t){if(t.length===0)return new $n(n.segments,{});{let i=jee(t),r={};if(Object.keys(i).some(o=>o!==sn)&&n.children[sn]&&n.numberOfChildren===1&&n.children[sn].segments.length===0){let o=ng(n.children[sn],e,t);return new $n(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=uk(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new $n(n.segments,r)}}function Gee(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(rg(a))break;let l=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!WL(l,u,s))return o;i+=2}else{if(!WL(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function G1(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(rg(o)){let l=Wee(o.outlets);return new $n(i,l)}if(r===0&&Q_(t[0])){let l=n.segments[e];i.push(new su(l.path,GL(t[0]))),r++;continue}let s=rg(o)?o.outlets[sn]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&Q_(a)?(i.push(new su(s,GL(a))),r+=2):(i.push(new su(s,{})),r++)}return new $n(i,{})}function Wee(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=G1(new $n([],{}),0,i))}),e}function GL(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function WL(n,e,t){return n==t.path&&tl(e,t.parameters)}var J_="imperative",Tr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Tr||{}),as=class{id;url;constructor(e,t){this.id=e,this.url=t}},Md=class extends as{type=Tr.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},rl=class extends as{urlAfterRedirects;type=Tr.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Vo||{}),og=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(og||{}),nl=class extends as{reason;code;type=Tr.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ic=class extends as{reason;code;type=Tr.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Mh=class extends as{error;target;type=Tr.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sg=class extends as{urlAfterRedirects;state;type=Tr.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tw=class extends as{urlAfterRedirects;state;type=Tr.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nw=class extends as{urlAfterRedirects;state;shouldActivate;type=Tr.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},iw=class extends as{urlAfterRedirects;state;type=Tr.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rw=class extends as{urlAfterRedirects;state;type=Tr.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ow=class{route;type=Tr.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sw=class{route;type=Tr.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},aw=class{snapshot;type=Tr.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lw=class{snapshot;type=Tr.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cw=class{snapshot;type=Tr.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uw=class{snapshot;type=Tr.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ag=class{},Ch=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function $ee(n,e){return n.providers&&!n._injector&&(n._injector=A_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function va(n){return n.outlet||sn}function qee(n,e){let t=n.filter(i=>va(i)===e);return t.push(...n.filter(i=>va(i)!==e)),t}function mg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var dw=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return mg(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Th(this.rootInjector)}},Th=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new dw(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Ge(qr))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fw=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=W1(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=W1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=$1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return $1(e,this._root).map(t=>t.value)}};function W1(n,e){if(n===e.value)return e;for(let t of e.children){let i=W1(n,t);if(i)return i}return null}function $1(n,e){if(n===e.value)return[e];for(let t of e.children){let i=$1(n,t);if(i.length)return i.unshift(e),i}return[]}var ss=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function wh(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var lg=class extends fw{snapshot;constructor(e,t){super(e),this.snapshot=t,eD(this,e)}toString(){return this.snapshot.toString()}};function dk(n){let e=Xee(n),t=new Ln([new su("",{})]),i=new Ln({}),r=new Ln({}),o=new Ln({}),s=new Ln(""),a=new Br(t,i,o,s,r,sn,n,e.root);return a.snapshot=e.root,new lg(new ss(a,[]),e)}function Xee(n){let e={},t={},i={},r="",o=new wd([],e,i,r,t,sn,n,null,{});return new cg("",new ss(o,[]))}var Br=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Le(u=>u[hg]))??ct(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Le(e=>xd(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Le(e=>xd(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hw(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:we(we({},e.params),n.params),data:we(we({},e.data),n.data),resolve:we(we(we(we({},n.data),e.data),r?.data),n._resolvedData)}:i={params:we({},n.params),data:we({},n.data),resolve:we(we({},n.data),n._resolvedData??{})},r&&hk(r)&&(i.resolve[hg]=r.title),i}var wd=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[hg]}constructor(e,t,i,r,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xd(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},cg=class extends fw{url;constructor(e,t){super(t),this.url=e,eD(this,t)}toString(){return fk(this._root)}};function eD(n,e){e.value._routerState=n,e.children.forEach(t=>eD(n,t))}function fk(n){let e=n.children.length>0?` { ${n.children.map(fk).join(", ")} } `:"";return`${n.value}${e}`}function U1(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,tl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),tl(e.params,t.params)||n.paramsSubject.next(t.params),bee(e.url,t.url)||n.urlSubject.next(t.url),tl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function q1(n,e){let t=tl(n.params,e.params)&&Eee(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||q1(n.parent,e.parent))}function hk(n){return typeof n.title=="string"||n.title===null}var pk=new Ae(""),gg=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=sn;activateEvents=new kn;deactivateEvents=new kn;attachEvents=new kn;detachEvents=new kn;routerOutletData=G3(void 0);parentContexts=D(Th);location=D(Zr);changeDetector=D(ti);inputBinder=D(vw,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ie(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Ie(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new X1(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ni]})}return n})(),X1=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===Br?this.route:e===Th?this.childContexts:e===pk?this.outletData:this.parent.get(e,t)}},vw=new Ae("");function Yee(n,e,t){let i=ug(n,e._root,t?t._root:void 0);return new lg(i,e)}function ug(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Zee(n,e,t);return new ss(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ug(n,a)),s}}let i=Kee(e.value),r=e.children.map(o=>ug(n,o));return new ss(i,r)}}function Zee(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ug(n,i,r);return ug(n,i)})}function Kee(n){return new Br(new Ln(n.url),new Ln(n.params),new Ln(n.queryParams),new Ln(n.fragment),new Ln(n.data),n.outlet,n.component,n)}var Sh=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},mk="ngNavigationCancelingError";function pw(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=au(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=gk(!1,Vo.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function gk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[mk]=!0,t.cancellationCode=e,t}function Jee(n){return vk(n)&&au(n.url)}function vk(n){return!!n&&n[mk]}var Qee=(n,e,t,i)=>Le(r=>(new Y1(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Y1=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),U1(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=wh(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=wh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=wh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=wh(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new uw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new lw(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(U1(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),U1(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},mw=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},bh=class{component;route;constructor(e,t){this.component=e,this.route=t}};function ete(n,e,t){let i=n._root,r=e?e._root:null;return tg(i,r,t,[i.value])}function tte(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Dh(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!HN(n)?n:e.get(n):i}function tg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=wh(e);return n.children.forEach(s=>{nte(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ig(a,t.getContext(s),r)),r}function nte(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=ite(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new mw(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?tg(n,e,a?a.children:null,i,r):tg(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new bh(a.outlet.component,s))}else s&&ig(e,a,r),r.canActivateChecks.push(new mw(i)),o.component?tg(n,null,a?a.children:null,i,r):tg(n,null,t,i,r);return r}function ite(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!_d(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_d(n.url,e.url)||!tl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!q1(n,e)||!tl(n.queryParams,e.queryParams);case"paramsChange":default:return!q1(n,e)}}function ig(n,e,t){let i=wh(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?ig(s,e.children.getContext(o),t):ig(s,null,t):ig(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new bh(e.outlet.component,r)):t.canDeactivateChecks.push(new bh(null,r)):t.canDeactivateChecks.push(new bh(null,r))}function vg(n){return typeof n=="function"}function rte(n){return typeof n=="boolean"}function ote(n){return n&&vg(n.canLoad)}function ste(n){return n&&vg(n.canActivate)}function ate(n){return n&&vg(n.canActivateChild)}function lte(n){return n&&vg(n.canDeactivate)}function cte(n){return n&&vg(n.canMatch)}function yk(n){return n instanceof ra||n?.name==="EmptyError"}var X_=Symbol("INITIAL_VALUE");function Eh(){return Vn(n=>kl(n.map(e=>e.pipe(Or(1),Vi(X_)))).pipe(Le(e=>{for(let t of e)if(t!==!0){if(t===X_)return X_;if(t===!1||ute(t))return t}return!0}),rn(e=>e!==X_),Or(1)))}function ute(n){return au(n)||n instanceof Sh}function dte(n,e){return Pi(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ct(ft(we({},t),{guardsResult:!0})):fte(s,i,r,n).pipe(Pi(a=>a&&rte(a)?hte(i,o,n,e):ct(a)),Le(a=>ft(we({},t),{guardsResult:a})))})}function fte(n,e,t,i){return fi(n).pipe(Pi(r=>yte(r.component,r.route,t,e,i)),Vl(r=>r!==!0,!0))}function hte(n,e,t,i){return fi(e).pipe(Yc(r=>Ul(mte(r.route.parent,i),pte(r.route,i),vte(n,r.path,t),gte(n,r.route,t))),Vl(r=>r!==!0,!0))}function pte(n,e){return n!==null&&e&&e(new cw(n)),ct(!0)}function mte(n,e){return n!==null&&e&&e(new aw(n)),ct(!0)}function gte(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ct(!0);let r=i.map(o=>by(()=>{let s=mg(e)??t,a=Dh(o,s),l=ste(a)?a.canActivate(e,n):ns(s,()=>a(e,n));return lu(l).pipe(Vl())}));return ct(r).pipe(Eh())}function vte(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>tte(s)).filter(s=>s!==null).map(s=>by(()=>{let a=s.guards.map(l=>{let u=mg(s.node)??t,f=Dh(l,u),h=ate(f)?f.canActivateChild(i,n):ns(u,()=>f(i,n));return lu(h).pipe(Vl())});return ct(a).pipe(Eh())}));return ct(o).pipe(Eh())}function yte(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ct(!0);let s=o.map(a=>{let l=mg(e)??r,u=Dh(a,l),f=lte(u)?u.canDeactivate(n,e,t,i):ns(l,()=>u(n,e,t,i));return lu(f).pipe(Vl())});return ct(s).pipe(Eh())}function _te(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return ct(!0);let o=r.map(s=>{let a=Dh(s,n),l=ote(a)?a.canLoad(e,t):ns(n,()=>a(e,t));return lu(l)});return ct(o).pipe(Eh(),_k(i))}function _k(n){return If(Qn(e=>{if(typeof e!="boolean")throw pw(n,e)}),Le(e=>e===!0))}function wte(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return ct(!0);let o=r.map(s=>{let a=Dh(s,n),l=cte(a)?a.canMatch(e,t):ns(n,()=>a(e,t));return lu(l)});return ct(o).pipe(Eh(),_k(i))}var dg=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},fg=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function _h(n){return Xc(new dg(n))}function xte(n){return Xc(new Ie(4e3,!1))}function bte(n){return Xc(gk(!1,Vo.GuardRejected))}var Z1=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ct(i);if(r.numberOfChildren>1||!r.children[sn])return xte(`${e.redirectTo}`);r=r.children[sn]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let a=t,{queryParams:l,fragment:u,routeConfig:f,url:h,outlet:p,params:g,data:v,title:x}=r,y=ns(o,()=>a({params:g,data:v,queryParams:l,fragment:u,routeConfig:f,url:h,outlet:p,title:x}));if(y instanceof il)throw new fg(y);t=y}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new fg(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new il(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new $n(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ie(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},K1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mte(n,e,t,i,r){let o=wk(n,e,t);return o.matched?(i=$ee(e,i),wte(i,e,t,r).pipe(Le(s=>s===!0?o:we({},K1)))):ct(o)}function wk(n,e,t){if(e.path==="**")return Cte(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?we({},K1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||YL)(t,n,e);if(!r)return we({},K1);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?we(we({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Cte(n){return{matched:!0,parameters:n.length>0?KL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function $L(n,e,t,i){return t.length>0&&Tte(n,t,i)?{segmentGroup:new $n(e,Ete(i,new $n(t,n.children))),slicedSegments:[]}:t.length===0&&Dte(n,t,i)?{segmentGroup:new $n(n.segments,Ste(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new $n(n.segments,n.children),slicedSegments:t}}function Ste(n,e,t,i){let r={};for(let o of t)if(yw(n,e,o)&&!i[va(o)]){let s=new $n([],{});r[va(o)]=s}return we(we({},i),r)}function Ete(n,e){let t={};t[sn]=e;for(let i of n)if(i.path===""&&va(i)!==sn){let r=new $n([],{});t[va(i)]=r}return t}function Tte(n,e,t){return t.some(i=>yw(n,e,i)&&va(i)!==sn)}function Dte(n,e,t){return t.some(i=>yw(n,e,i))}function yw(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Ite(n,e,t){return e.length===0&&!n.children[t]}var J1=class{};function Ate(n,e,t,i,r,o,s="emptyOnly"){return new Q1(n,e,t,i,r,s,o).recognize()}var Rte=31,Q1=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Z1(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=$L(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Le(({children:t,rootSnapshot:i})=>{let r=new ss(i,t),o=new cg("",r),s=sk(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new wd([],Object.freeze({}),Object.freeze(we({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),sn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,sn,t).pipe(Le(i=>({children:i,rootSnapshot:t})),oa(i=>{if(i instanceof fg)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof dg?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Le(s=>s instanceof ss?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return fi(o).pipe(Yc(s=>{let a=i.children[s],l=qee(t,s);return this.processSegmentGroup(e,l,a,s,r)}),kS((s,a)=>(s.push(...a),s)),Bl(null),LS(),Pi(s=>{if(s===null)return _h(i);let a=xk(s);return Pte(a),ct(a)}))}processSegment(e,t,i,r,o,s,a){return fi(t).pipe(Yc(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,o,s,a).pipe(oa(u=>{if(u instanceof dg)return ct(null);throw u}))),Vl(l=>!!l),oa(l=>{if(yk(l))return Ite(i,r,o)?ct(new J1):_h(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,l){return va(i)!==s&&(s===sn||!yw(r,o,i))?_h(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,l):_h(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:h,remainingSegments:p}=wk(t,r,o);if(!l)return _h(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Rte&&(this.allowRedirects=!1));let g=new wd(o,u,Object.freeze(we({},this.urlTree.queryParams)),this.urlTree.fragment,qL(r),va(r),r.component??r._loadedComponent??null,r,XL(r)),v=hw(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(v.params),g.data=Object.freeze(v.data);let x=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(r,x).pipe(Pi(y=>this.processSegment(e,i,t,y.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=Mte(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(Vn(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Vn(({routes:u})=>{let f=i._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=l,v=new wd(p,h,Object.freeze(we({},this.urlTree.queryParams)),this.urlTree.fragment,qL(i),va(i),i.component??i._loadedComponent??null,i,XL(i)),x=hw(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(x.params),v.data=Object.freeze(x.data);let{segmentGroup:y,slicedSegments:_}=$L(t,p,g,u);if(_.length===0&&y.hasChildren())return this.processChildren(f,u,y,v).pipe(Le(M=>new ss(v,M)));if(u.length===0&&_.length===0)return ct(new ss(v,[]));let T=va(i)===o;return this.processSegment(f,u,y,_,T?sn:o,!0,v).pipe(Le(M=>new ss(v,M instanceof ss?[M]:[])))}))):_h(t)))}getChildConfig(e,t,i){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):_te(e,t,i,this.urlSerializer).pipe(Pi(r=>r?this.configLoader.loadChildren(e,t).pipe(Qn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):bte(t))):ct({routes:[],injector:e})}};function Pte(n){n.sort((e,t)=>e.value.outlet===sn?-1:t.value.outlet===sn?1:e.value.outlet.localeCompare(t.value.outlet))}function Ote(n){let e=n.value.routeConfig;return e&&e.path===""}function xk(n){let e=[],t=new Set;for(let i of n){if(!Ote(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=xk(i.children);e.push(new ss(i.value,r))}return e.filter(i=>!t.has(i))}function qL(n){return n.data||{}}function XL(n){return n.resolve||{}}function Nte(n,e,t,i,r,o){return Pi(s=>Ate(n,e,t,i,s.extractedUrl,r,o).pipe(Le(({state:a,tree:l})=>ft(we({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function Fte(n,e){return Pi(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ct(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of bk(l))s.add(u);let a=0;return fi(s).pipe(Yc(l=>o.has(l)?Lte(l,i,n,e):(l.data=hw(l,l.parent,n).resolve,ct(void 0))),Qn(()=>a++),Bf(1),Pi(l=>a===s.size?ct(t):ai))})}function bk(n){let e=n.children.map(t=>bk(t)).flat();return[n,...e]}function Lte(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!hk(r)&&(o[hg]=r.title),kte(o,n,e,i).pipe(Le(s=>(n._resolvedData=s,n.data=hw(n,n.parent,t).resolve,null)))}function kte(n,e,t,i){let r=H1(n);if(r.length===0)return ct({});let o={};return fi(r).pipe(Pi(s=>Ute(n[s],e,t,i).pipe(Vl(),Qn(a=>{if(a instanceof Sh)throw pw(new bd,a);o[s]=a}))),Bf(1),Le(()=>o),oa(s=>yk(s)?ai:Xc(s)))}function Ute(n,e,t,i){let r=mg(e)??i,o=Dh(n,r),s=o.resolve?o.resolve(e,t):ns(r,()=>o(e,t));return lu(s)}function B1(n){return Vn(e=>{let t=n(e);return t?fi(t).pipe(Le(()=>e)):ct(e)})}var tD=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===sn);return i}getResolvedTitleForRoute(t){return t.data[hg]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:()=>D(Mk),providedIn:"root"})}return n})(),Mk=(()=>{class n extends tD{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Ge(LL))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yg=new Ae("",{providedIn:"root",factory:()=>({})}),nD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Tt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&me(0,"router-outlet")},dependencies:[gg],encapsulation:2})}return n})();function iD(n){let e=n.children&&n.children.map(iD),t=e?ft(we({},n),{children:e}):we({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==sn&&(t.component=nD),t}var _g=new Ae(""),Ck=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=D(J2);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=lu(t.loadComponent()).pipe(Le(Ek),Qn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),sa(()=>{this.componentLoaders.delete(t)})),r=new Rf(i,()=>new Rn).pipe(Af());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Sk(i,this.compiler,t,this.onLoadEndListener).pipe(sa(()=>{this.childrenLoaders.delete(i)})),s=new Rf(o,()=>new Rn).pipe(Af());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sk(n,e,t,i){return lu(n.loadChildren()).pipe(Le(Ek),Pi(r=>r instanceof r1||Array.isArray(r)?ct(r):fi(e.compileModuleAsync(r))),Le(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(_g,[],{optional:!0,self:!0}).flat()),{routes:s.map(iD),injector:o}}))}function Bte(n){return n&&typeof n=="object"&&"default"in n}function Ek(n){return Bte(n)?n.default:n}var _w=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:()=>D(Vte),providedIn:"root"})}return n})(),Vte=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tk=new Ae("");var Dk=new Ae(""),Ik=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Rn;transitionAbortSubject=new Rn;configLoader=D(Ck);environmentInjector=D(qr);destroyRef=D(Er);urlSerializer=D(pg);rootContexts=D(Th);location=D(Bo);inputBindingEnabled=D(vw,{optional:!0})!==null;titleStrategy=D(tD);options=D(yg,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=D(_w);createViewTransition=D(Tk,{optional:!0});navigationErrorHandler=D(Dk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ct(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new ow(r)),i=r=>this.events.next(new sw(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(ft(we({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(t){return this.transitions=new Ln(null),this.transitions.pipe(rn(i=>i!==null),Vn(i=>{let r=!1,o=!1;return ct(i).pipe(Vn(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Vo.SupersededByNewNavigation),ai;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ft(we({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload"){let u="";return this.events.next(new ic(s.id,this.urlSerializer.serialize(s.rawUrl),u,og.IgnoredSameUrlNavigation)),s.resolve(!1),ai}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ct(s).pipe(Vn(u=>(this.events.next(new Md(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?ai:Promise.resolve(u))),Nte(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Qn(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ft(we({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let f=new sg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:f,source:h,restoredState:p,extras:g}=s,v=new Md(u,this.urlSerializer.serialize(f),h,p);this.events.next(v);let x=dk(this.rootComponentType).snapshot;return this.currentTransition=i=ft(we({},s),{targetSnapshot:x,urlAfterRedirects:f,extras:ft(we({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,ct(i)}else{let u="";return this.events.next(new ic(s.id,this.urlSerializer.serialize(s.extractedUrl),u,og.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ai}}),Qn(s=>{let a=new tw(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Le(s=>(this.currentTransition=i=ft(we({},s),{guards:ete(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),dte(this.environmentInjector,s=>this.events.next(s)),Qn(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw pw(this.urlSerializer,s.guardsResult);let a=new nw(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),rn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Vo.GuardRejected),!1)),B1(s=>{if(s.guards.canActivateChecks.length!==0)return ct(s).pipe(Qn(a=>{let l=new iw(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Vn(a=>{let l=!1;return ct(a).pipe(Fte(this.paramsInheritanceStrategy,this.environmentInjector),Qn({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Vo.NoDataFromResolver)}}))}),Qn(a=>{let l=new rw(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),B1(s=>{let a=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(Qn(f=>{l.component=f}),Le(()=>{})));for(let f of l.children)u.push(...a(f));return u};return kl(a(s.targetSnapshot.root)).pipe(Bl(null),Or(1))}),B1(()=>this.afterPreactivation()),Vn(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?fi(l).pipe(Le(()=>i)):ct(i)}),Le(s=>{let a=Yee(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=ft(we({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Qn(()=>{this.events.next(new ag)}),Qee(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Or(1),Qn({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new rl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),Oi(this.transitionAbortSubject.pipe(Qn(s=>{throw s}))),sa(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",Vo.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),oa(s=>{if(this.destroyed)return i.resolve(!1),ai;if(o=!0,vk(s))this.events.next(new nl(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),Jee(s)?this.events.next(new Ch(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Mh(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let l=ns(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Sh){let{message:u,cancellationCode:f}=pw(this.urlSerializer,l);this.events.next(new nl(i.id,this.urlSerializer.serialize(i.extractedUrl),u,f)),this.events.next(new Ch(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return ai}))}))}cancelNavigationTransition(t,i,r){let o=new nl(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hte(n){return n!==J_}var Ak=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:()=>D(zte),providedIn:"root"})}return n})(),gw=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},zte=(()=>{class n extends gw{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})();static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rk=(()=>{class n{urlSerializer=D(pg);options=D(yg,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=D(Bo);urlHandlingStrategy=D(_w);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new il;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof il?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=dk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:()=>D(jte),providedIn:"root"})}return n})(),jte=(()=>{class n extends Rk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Md?this.updateStateMemento():t instanceof ic?this.commitTransition(i):t instanceof sg?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof ag?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof nl&&(t.code===Vo.GuardRejected||t.code===Vo.NoDataFromResolver)?this.restoreHistory(i):t instanceof Mh?this.restoreHistory(i,!0):t instanceof rl&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=we(we({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",l)}else{let a=we(we({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})();static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rD(n,e){n.events.pipe(rn(t=>t instanceof rl||t instanceof nl||t instanceof Mh||t instanceof ic),Le(t=>t instanceof rl||t instanceof ic?0:(t instanceof nl?t.code===Vo.Redirect||t.code===Vo.SupersededByNewNavigation:!1)?2:1),rn(t=>t!==2),Or(1)).subscribe(()=>{e()})}var Gte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wte={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=D(s1);stateManager=D(Rk);options=D(yg,{optional:!0})||{};pendingTasks=D(Xl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=D(Ik);urlSerializer=D(pg);location=D(Bo);urlHandlingStrategy=D(_w);_events=new Rn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=D(Ak);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=D(_g,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!D(vw,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Bi;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof nl&&i.code!==Vo.Redirect&&i.code!==Vo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof rl)this.navigated=!0;else if(i instanceof Ch){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=we({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Hte(r.source)},s);this.scheduleNavigation(a,J_,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}qte(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),J_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=we({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(iD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=we(we({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let h;try{let p=r?r.snapshot:this.routerState.snapshot.root;h=ak(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return lk(h,t,f,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=au(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,J_,null,i)}navigate(t,i={skipLocationChange:!1}){return $te(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=we({},Gte):i===!1?r=we({},Wte):r=i,au(t))return zL(this.currentUrlTree,t,r);let o=this.parseUrl(t);return zL(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((h,p)=>{a=h,l=p});let f=this.pendingTasks.add();return rD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $te(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ie(4008,!1)}function qte(n){return!(n instanceof ag)&&!(n instanceof Ch)}var Ps=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Rn;constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof rl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(au(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:SF(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:au(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(ce(Vr),ce(Br),DT("tabindex"),ce(Yr),ce($t),ce(fh))};static \u0275dir=Xe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&Me("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&or("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",uh],skipLocationChange:[2,"skipLocationChange","skipLocationChange",uh],replaceUrl:[2,"replaceUrl","replaceUrl",uh],routerLink:"routerLink"},features:[Ni]})}return n})();var Yte=new Ae("");function oD(n,...e){return Qc([{provide:_g,multi:!0,useValue:n},[],{provide:Br,useFactory:Zte,deps:[Vr]},{provide:ch,multi:!0,useFactory:Kte},e.map(t=>t.\u0275providers)])}function Zte(n){return n.routerState.root}function Kte(){let n=D(Lr);return e=>{let t=n.get(ha);if(e!==t.components[0])return;let i=n.get(Vr),r=n.get(Jte);n.get(Qte)===1&&i.initialNavigation(),n.get(ene,null,wn.Optional)?.setUpPreloading(),n.get(Yte,null,wn.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Jte=new Ae("",{factory:()=>new Rn}),Qte=new Ae("",{providedIn:"root",factory:()=>1});var ene=new Ae("");function Dr(n){n||(th(Dr),n=D(Er));let e=new yt(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(Oi(e))}function rc(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&th(rc);let i=t?e?.injector?.get(Er)??D(Er):null,r=tne(e?.equal),o;e?.requireSync?o=ji({kind:0},{equal:r}):o=ji({kind:1,value:e?.initialValue},{equal:r});let s=n.subscribe({next:a=>o.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;o.set({kind:2,error:a})}});if(e?.requireSync&&o().kind===0)throw new Ie(601,!1);return i?.onDestroy(s.unsubscribe.bind(s)),rs(()=>{let a=o();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new Ie(601,!1)}},{equal:e?.equal})}function tne(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var fTe=parseInt(K2.major,10)>=19?{}:{allowSignalWrites:!0},Pk={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},Ok=new Em;var Nk=()=>{},cu=ft(we({},Pk),{toJSON:()=>Pk}),oc=()=>!1,Sd=()=>!0;var Fk={acceptNode(n){return"ownerSVGElement"in n?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},Ih="\xA0",Lk="\u2013";var Wk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(ce(Yr),ce($t))};static \u0275dir=Xe({type:n})}return n})(),Pw=(()=>{class n extends Wk{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})();static \u0275dir=Xe({type:n,features:[jn]})}return n})(),Ph=new Ae("");var nne={provide:Ph,useExisting:es(()=>Os),multi:!0};function ine(){let n=Rs()?Rs().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var rne=new Ae(""),Os=(()=>{class n extends Wk{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!ine())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(ce(Yr),ce($t),ce(rne,8))};static \u0275dir=Xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Me("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[un([nne]),jn]})}return n})();function aD(n){return n==null||lD(n)===0}function lD(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Oh=new Ae(""),Ow=new Ae(""),one=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,an=class{static min(e){return $k(e)}static max(e){return sne(e)}static required(e){return ane(e)}static requiredTrue(e){return lne(e)}static email(e){return cne(e)}static minLength(e){return une(e)}static maxLength(e){return qk(e)}static pattern(e){return dne(e)}static nullValidator(e){return xw()}static compose(e){return Qk(e)}static composeAsync(e){return eU(e)}};function $k(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function sne(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function ane(n){return aD(n.value)?{required:!0}:null}function lne(n){return n.value===!0?null:{required:!0}}function cne(n){return aD(n.value)||one.test(n.value)?null:{email:!0}}function une(n){return e=>{let t=e.value?.length??lD(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function qk(n){return e=>{let t=e.value?.length??lD(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function dne(n){if(!n)return xw;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(aD(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function xw(n){return null}function Xk(n){return n!=null}function Yk(n){return tu(n)?fi(n):n}function Zk(n){let e={};return n.forEach(t=>{e=t!=null?we(we({},e),t):e}),Object.keys(e).length===0?null:e}function Kk(n,e){return e.map(t=>t(n))}function fne(n){return!n.validate}function Jk(n){return n.map(e=>fne(e)?e:t=>e.validate(t))}function Qk(n){if(!n)return null;let e=n.filter(Xk);return e.length==0?null:function(t){return Zk(Kk(t,e))}}function cD(n){return n!=null?Qk(Jk(n)):null}function eU(n){if(!n)return null;let e=n.filter(Xk);return e.length==0?null:function(t){let i=Kk(t,e).map(Yk);return OS(i).pipe(Le(Zk))}}function uD(n){return n!=null?eU(Jk(n)):null}function kk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tU(n){return n._rawValidators}function nU(n){return n._rawAsyncValidators}function sD(n){return n?Array.isArray(n)?n:[n]:[]}function bw(n,e){return Array.isArray(n)?n.includes(e):n===e}function Uk(n,e){let t=sD(e);return sD(n).forEach(r=>{bw(t,r)||t.push(r)}),t}function Bk(n,e){return sD(e).filter(t=>!bw(n,t))}var Mw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},sc=class extends Mw{name;get formDirective(){return null}get path(){return null}},ac=class extends Mw{_parent=null;name=null;valueAccessor=null},Cw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},hne={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ATe=ft(we({},hne),{"[class.ng-submitted]":"isSubmitted"}),ol=(()=>{class n extends Cw{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(ce(ac,2))};static \u0275dir=Xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ht("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[jn]})}return n})(),sl=(()=>{class n extends Cw{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(ce(sc,10))};static \u0275dir=Xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ht("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[jn]})}return n})();var wg="VALID",ww="INVALID",Ah="PENDING",xg="DISABLED",uu=class{},Sw=class extends uu{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Mg=class extends uu{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Cg=class extends uu{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Rh=class extends uu{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Ew=class extends uu{source;constructor(e){super(),this.source=e}},Tw=class extends uu{source;constructor(e){super(),this.source=e}};function iU(n){return(Nw(n)?n.validators:n)||null}function pne(n){return Array.isArray(n)?cD(n):n||null}function rU(n,e){return(Nw(e)?e.asyncValidators:n)||null}function mne(n){return Array.isArray(n)?uD(n):n||null}function Nw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function gne(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ie(1e3,"");if(!i[t])throw new Ie(1001,"")}function vne(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Ie(1002,"")})}var Dw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return go(this.statusReactive)}set status(e){go(()=>this.statusReactive.set(e))}_status=rs(()=>this.statusReactive());statusReactive=ji(void 0);get valid(){return this.status===wg}get invalid(){return this.status===ww}get pending(){return this.status==Ah}get disabled(){return this.status===xg}get enabled(){return this.status!==xg}errors;get pristine(){return go(this.pristineReactive)}set pristine(e){go(()=>this.pristineReactive.set(e))}_pristine=rs(()=>this.pristineReactive());pristineReactive=ji(!0);get dirty(){return!this.pristine}get touched(){return go(this.touchedReactive)}set touched(e){go(()=>this.touchedReactive.set(e))}_touched=rs(()=>this.touchedReactive());touchedReactive=ji(!1);get untouched(){return!this.touched}_events=new Rn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Uk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Uk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Bk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Bk(e,this._rawAsyncValidators))}hasValidator(e){return bw(this._rawValidators,e)}hasAsyncValidator(e){return bw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ft(we({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Cg(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Cg(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ft(we({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Mg(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Mg(!0,i))}markAsPending(e={}){this.status=Ah;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ft(we({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xg,this.errors=null,this._forEachChild(r=>{r.disable(ft(we({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sw(this.value,i)),this._events.next(new Rh(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ft(we({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=wg,this._forEachChild(i=>{i.enable(ft(we({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ft(we({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wg||this.status===Ah)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sw(this.value,t)),this._events.next(new Rh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ft(we({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xg:wg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ah,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=Yk(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Rh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new kn,this.statusChanges=new kn}_calculateStatus(){return this._allControlsDisabled()?xg:this.errors?ww:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ah)?Ah:this._anyControlsHaveStatus(ww)?ww:wg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Mg(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Cg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=pne(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=mne(this._rawAsyncValidators)}},ar=class extends Dw{constructor(e,t,i){super(iU(t),rU(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){vne(this,!0,e),Object.keys(e).forEach(i=>{gne(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Sg=new Ae("",{providedIn:"root",factory:()=>Fw}),Fw="always";function oU(n,e){return[...e.path,n]}function Iw(n,e,t=Fw){dD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),_ne(n,e),xne(n,e),wne(n,e),yne(n,e)}function Vk(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Rw(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Aw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function yne(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function dD(n,e){let t=tU(n);e.validator!==null?n.setValidators(kk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=nU(n);e.asyncValidator!==null?n.setAsyncValidators(kk(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Aw(e._rawValidators,r),Aw(e._rawAsyncValidators,r)}function Rw(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=tU(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=nU(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Aw(e._rawValidators,i),Aw(e._rawAsyncValidators,i),t}function _ne(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&sU(n,e)})}function wne(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&sU(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function sU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xne(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function aU(n,e){n==null,dD(n,e)}function bne(n,e){return Rw(n,e)}function lU(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Mne(n){return Object.getPrototypeOf(n.constructor)===Pw}function cU(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function uU(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Os?t=o:Mne(o)?i=o:r=o}),r||i||t||null}function Cne(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Sne={provide:sc,useExisting:es(()=>fD)},bg=Promise.resolve(),fD=(()=>{class n extends sc{callSetDisabledState;get submitted(){return go(this.submittedReactive)}_submitted=rs(()=>this.submittedReactive());submittedReactive=ji(!1);_directives=new Set;form;ngSubmit=new kn;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new ar({},cD(t),uD(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){bg.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Iw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){bg.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){bg.then(()=>{let i=this._findContainer(t.path),r=new ar({});aU(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){bg.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){bg.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),cU(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Ew(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Tw(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(ce(Oh,10),ce(Ow,10),ce(Sg,8))};static \u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&Me("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[un([Sne]),jn]})}return n})();function Hk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ni=class extends Dw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(iU(t),rU(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(zk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){zk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Ene=n=>n instanceof ni;var Tne={provide:ac,useExisting:es(()=>Eg)},jk=Promise.resolve(),Eg=(()=>{class n extends ac{_changeDetectorRef;callSetDisabledState;control=new ni;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new kn;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=uU(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lU(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Iw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){jk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&uh(i);jk.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?oU(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(ce(sc,9),ce(Oh,10),ce(Ow,10),ce(Ph,10),ce(ti,8),ce(Sg,8))};static \u0275dir=Xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[un([Tne]),jn,Ni]})}return n})();var al=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),Dne={provide:Ph,useExisting:es(()=>hD),multi:!0},hD=(()=>{class n extends Pw{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})();static \u0275dir=Xe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&Me("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[un([Dne]),jn]})}return n})();var dU=new Ae("");var Ine={provide:sc,useExisting:es(()=>ya)},ya=(()=>{class n extends sc{callSetDisabledState;get submitted(){return go(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=rs(()=>this._submittedReactive());_submittedReactive=ji(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new kn;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rw(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Iw(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Vk(t.control||null,t,!1),Cne(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),cU(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Ew(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Tw(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(Vk(i||null,t),Ene(r)&&(Iw(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);aU(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&bne(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dD(this.form,this),this._oldForm&&Rw(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(ce(Oh,10),ce(Ow,10),ce(Sg,8))};static \u0275dir=Xe({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Me("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[un([Ine]),jn,Ni]})}return n})();var Ane={provide:ac,useExisting:es(()=>_a)},_a=(()=>{class n extends ac{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new kn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=uU(this,o)}ngOnChanges(t){this._added||this._setUpControl(),lU(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return oU(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(ce(sc,13),ce(Oh,10),ce(Ow,10),ce(Ph,10),ce(dU,8))};static \u0275dir=Xe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[un([Ane]),jn,Ni]})}return n})();var Rne={provide:Ph,useExisting:es(()=>Lw),multi:!0};function fU(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Pne(n){return n.split(":")[0]}var Lw=(()=>{class n extends Pw{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=fU(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=Pne(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})();static \u0275dir=Xe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&Me("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[un([Rne]),jn]})}return n})(),hU=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(fU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ce($t),ce(Yr),ce(Lw,9))};static \u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),One={provide:Ph,useExisting:es(()=>pU),multi:!0};function Gk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Nne(n){return n.split(":")[0]}var pU=(()=>{class n extends Pw{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);r.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=Nne(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})();static \u0275dir=Xe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&Me("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[un([One]),jn]})}return n})(),mU=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Gk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Gk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ce($t),ce(Yr),ce(pU,9))};static \u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function Fne(n){return typeof n=="number"?n:parseInt(n,10)}function Lne(n){return typeof n=="number"?n:parseFloat(n)}var gU=(()=>{class n{_validator=xw;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):xw,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xe({type:n,features:[Ni]})}return n})();var kne={provide:Oh,useExisting:es(()=>pD),multi:!0},pD=(()=>{class n extends gU{min;inputName="min";normalizeInput=t=>Lne(t);createValidator=t=>$k(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})();static \u0275dir=Xe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&or("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[un([kne]),jn]})}return n})();var Une={provide:Oh,useExisting:es(()=>mD),multi:!0},mD=(()=>{class n extends gU{maxlength;inputName="maxlength";normalizeInput=t=>Fne(t);createValidator=t=>qk(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})();static \u0275dir=Xe({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&or("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[un([Une]),jn]})}return n})();var vU=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=mo({type:n});static \u0275inj=fo({})}return n})();var kw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sg,useValue:t.callSetDisabledState??Fw}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=mo({type:n});static \u0275inj=fo({imports:[vU]})}return n})(),Ns=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:dU,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Sg,useValue:t.callSetDisabledState??Fw}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=mo({type:n});static \u0275inj=fo({imports:[vU]})}return n})();function Jr(n,e,t){return Math.min(t,Math.max(e,n))}function Dg(n,e,t){return n>=e&&n<t}function Uw(n,e,t){return Number.isNaN(n)||n<=e?e:n>=t?t:Math.round(n)}function wU(n,e){return n.slice(0,Math.max(e,0)).concat(n.slice(Math.max(e+1,0)))}function Cn(n){return n===void 0?new Ae(""):tn(()=>n)}function tn(n){return n?new Ae("",{factory:n}):new Ae("")}var Bne="position: fixed; visibility: hidden; pointer-events: none",Vne="height: fit-content; line-height: 1em;",yU="tui-font-size-watcher";function xU(n,e=window){if(e.document.querySelector(`.${yU}`))return()=>{};let t=e.document.createElement("iframe"),i=()=>{let{innerWidth:s,outerWidth:a,devicePixelRatio:l}=e;t.width=`${s===a?s:s/l}`};e.document.body.append(t),e.addEventListener("resize",i);let r=t.contentWindow?.document,o=new ResizeObserver(()=>n(r?.body.offsetHeight||0));return t.setAttribute("class",yU),t.setAttribute("style",Bne),r?.documentElement.style.setProperty("font","-apple-system-body"),r?.body.setAttribute("style",Vne),r?.body.insertAdjacentText("beforeend",".".repeat(1e3)),o.observe(r?.body||t),i(),()=>{o.disconnect(),t.remove(),e.removeEventListener("resize",i)}}function Ig(n){return n!=null}function wa(n,e,t=!1){return{provide:n,useExisting:e,multi:t}}function Ag(n,e,t){return{provide:n,useFactory:()=>we(we({},D(n,{optional:!0,skipSelf:!0})||t),D(e,{optional:!0})||e)}}function Hne(n){let e=[],t=!1,i;return function(...o){return t&&e.length===o.length&&o.every((a,l)=>a===e[l])||(e=o,i=n.apply(this,o),t=!0),i}}function _U(n,e,t=!0){return function(){let r=n.call(this);return Object.defineProperty(this,e,{enumerable:t,value:r}),r}}function ll(n,e,t){if(typeof n=="function"){let l=e;if(l.kind==="getter")return _U(n,l.name);if(l.kind==="method")return Hne(n);throw new Bw}let{get:i,enumerable:r,value:o}=t,s=e;if(i)return{configurable:!0,enumerable:r,get:_U(i,s,r)};if(typeof o!="function")throw new Bw;let a=o;return{configurable:!0,enumerable:r,get(){let l=[],u=!1,f,h=(...p)=>(u&&l.length===p.length&&p.every((v,x)=>v===l[x])||(l=p,f=a.apply(this,p),u=!0),f);return Object.defineProperty(this,s,{configurable:!0,value:h}),h}}}var Bw=class extends Error{constructor(){super("")}};function Qr(n){return`${n}px`}var LTe=tn(()=>{let n=new Map;return D(Er).onDestroy(()=>n.forEach(e=>e.destroy())),n});function Jt(n,e,t={}){return Ji(n,e,t)}function vD(n,e=Boolean){return If(Vn(t=>e(t)?n(t):ai))}function bU(n){return Jt(n===n.ownerDocument.documentElement?n.ownerDocument:n,"scroll")}var jTe={now:pm.now.bind(pm),schedule(n,e,t){return pm.schedule(function(i){return go(()=>n.call(this,i))},e,t)}};function Vw(n=D(ti)){return Qn(()=>n.markForCheck())}function MU(n=D(Mn)){return e=>new yt(t=>e.subscribe({next:i=>n.run(()=>t.next(i)),error:i=>n.run(()=>t.error(i)),complete:()=>n.run(()=>t.complete())}))}function Nh(n=D(Mn)){return e=>new yt(t=>n.runOutsideAngular(()=>e.subscribe(t)))}function lc(n=D(Mn)){return If(Nh(n),MU(n))}var gD=class{constructor(e,t=ia){this.zoneConditionFn=e,this.scheduler=t}now(){return this.scheduler.now()}schedule(...e){return this.zoneConditionFn(()=>this.scheduler.schedule(...e))}};function cc(n=D(Mn),e=ia){return new gD(n.runOutsideAngular.bind(n),e)}var jt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(jt||{}),Fs="*";function ii(n,e){return{type:jt.Trigger,name:n,definitions:e,options:{}}}function It(n,e=null){return{type:jt.Animate,styles:e,timings:n}}function CU(n,e=null){return{type:jt.Sequence,steps:n,options:e}}function Ne(n){return{type:jt.Style,styles:n,offset:null}}function yD(n,e,t){return{type:jt.State,name:n,styles:e,options:t}}function Gt(n,e,t=null){return{type:jt.Transition,expr:n,animation:e,options:t}}function Rg(n=null){return{type:jt.AnimateChild,options:n}}function tr(n,e,t=null){return{type:jt.Query,selector:n,animation:e,options:t}}function Ir(n,e){return{type:jt.Stagger,timings:n,animation:e}}var cl=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Ed=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Fh="!";var Wt="{{duration}}ms ease-in-out",uc={params:{duration:300}},eo=300,Pg=ii("tuiParentAnimation",[Gt(":leave",[tr(":scope > *",[Rg()],{optional:!0})])]),QTe=ii("tuiParentStop",[Gt(":enter",[])]),SU=ii("tuiHost",[Gt(":enter",[Ne({overflow:"clip"}),tr(":scope > *",[Rg()],{optional:!0})]),Gt(":leave",[tr(":scope > *",[Rg()],{optional:!0})])]),zne=ii("tuiHeightCollapse",[Gt(":enter",[Ne({height:0}),It(Wt,Ne({height:"*"}))],uc),Gt(":leave",[Ne({height:"*"}),It(Wt,Ne({height:0}))],uc)]),e1e=ii("tuiHeightCollapseList",[Gt("* => *",[tr(":enter",[Ne({height:0}),Ir(eo,[It(Wt,Ne({height:"*"}))])],{optional:!0}),tr(":leave",[Ne({height:"*"}),Ir(eo,[It(Wt,Ne({height:0}))])],{optional:!0})],uc)]),t1e=ii("tuiWidthCollapse",[Gt(":enter",[Ne({width:0}),It(Wt,Ne({width:"*"}))],uc),Gt(":leave",[Ne({width:"*"}),It(Wt,Ne({width:0}))],uc)]),n1e=ii("tuiWidthCollapseList",[Gt("* => *",[tr(":enter",[Ne({width:0}),Ir(eo,[It(Wt,Ne({width:"*"}))])],{optional:!0}),tr(":leave",[Ne({width:"*"}),Ir(eo,[It(Wt,Ne({width:0}))])],{optional:!0})],uc)]),i1e=ii("tuiCrossFade",[Gt(":enter",[Ne({opacity:0}),It(Wt,Ne({opacity:1}))],{params:{duration:300}}),Gt(":leave",[Ne({opacity:1,position:"absolute",left:"{{left}}",right:"{{right}}",bottom:"{{bottom}}",top:"{{top}}"}),It(Wt,Ne({opacity:0}))],{params:{duration:300,left:"auto",right:"auto",bottom:"auto",top:"auto"}})]),Lh=ii("tuiFadeIn",[Gt(":enter",[Ne({opacity:0}),It(Wt,Ne({opacity:1}))],uc),Gt(":leave",[Ne({opacity:1}),It(Wt,Ne({opacity:0}))],uc)]),r1e=ii("tuiFadeInList",[Gt("* => *",[tr(":enter",[Ne({opacity:0}),Ir(eo,[It(Wt,Ne({opacity:1}))])],{optional:!0}),tr(":leave",[Ne({opacity:1}),Ir(eo,[It(Wt,Ne({opacity:0}))])],{optional:!0})],uc)]),o1e=ii("tuiFadeInTop",[Gt(":enter",[Ne({transform:"translateY(-{{start}}px)",opacity:0}),It(Wt,Ne({transform:"translateY({{end}})",opacity:1}))],{params:{end:0,start:10,duration:300}}),Gt(":leave",[Ne({transform:"translateY({{end}})",opacity:1}),It(Wt,Ne({transform:"translateY(-{{start}}px)",opacity:0}))],{params:{end:0,start:10,duration:300}})]),s1e=ii("tuiFadeInBottom",[Gt(":enter",[Ne({transform:"translateY({{start}}px)",opacity:0}),It(Wt,Ne({transform:"translateY({{end}})",opacity:1}))],{params:{end:0,start:10,duration:300}}),Gt(":leave",[Ne({transform:"translateY({{end}})",opacity:1}),It(Wt,Ne({transform:"translateY({{start}}px)",opacity:0}))],{params:{end:0,start:10,duration:300}})]),EU=ii("tuiDropdownAnimation",[Gt(":enter",[Ne({transform:"translateY(-{{start}}px)",opacity:0}),It(Wt,Ne({transform:"translateY({{end}})",opacity:1}))],{params:{end:0,start:10,duration:300}}),Gt(":leave",[Ne({transform:"translateY({{end}})",opacity:1}),It(Wt,Ne({transform:"translateY(-{{start}}px)",opacity:0}))],{params:{end:0,start:10,duration:300}})]),TU=ii("tuiScaleIn",[Gt(":enter",[Ne({transform:"scale({{start}})"}),It("{{duration}}ms {{easing}}",Ne({transform:"scale({{end}})"}))],{params:{end:1,start:0,duration:300,easing:"ease-in-out"}}),Gt(":leave",[Ne({transform:"scale({{end}})"}),It(Wt,Ne({transform:"scale({{start}})"}))],{params:{end:1,start:0,duration:300}})]),a1e=ii("tuiPop",[Gt(":enter",[Ne({transform:"scale({{start}})"}),It(Wt,Ne({transform:"scale({{middle}})"})),It(Wt,Ne({transform:"scale({{end}})"}))],{params:{end:1,middle:1.1,start:0,duration:300}}),Gt(":leave",[Ne({transform:"scale({{end}})"}),It(Wt,Ne({transform:"scale({{middle}})"})),It(Wt,Ne({transform:"scale({{start}})"}))],{params:{end:1,middle:1.1,start:0,duration:300}})]),l1e=ii("tuiScaleInList",[Gt("* => *",[tr(":enter",[Ne({transform:"scale({{start}})"}),Ir(eo,[It(Wt,Ne({transform:"scale({{end}})"}))])],{optional:!0}),tr(":leave",[Ne({transform:"scale({{end}})"}),Ir(eo,[It(Wt,Ne({transform:"scale({{start}})"}))])],{optional:!0})],{params:{end:1,start:0,duration:300}})]),jne=ii("tuiSlideIn",[Gt("* => left",[Ne({transform:"translateX(-{{start}})"}),It(Wt,Ne({transform:"translateX({{end}})"}))],{params:{end:0,start:"100%",duration:300}}),Gt("left => *",[Ne({transform:"translateX({{end}})"}),It(Wt,Ne({transform:"translateX(-{{start}})"}))],{params:{end:0,start:"100%",duration:300}}),Gt("* => right",[Ne({transform:"translateX({{start}})"}),It(Wt,Ne({transform:"translateX({{end}})"}))],{params:{end:0,start:"100%",duration:300}}),Gt("right => *",[Ne({transform:"translateX({{end}})"}),It(Wt,Ne({transform:"translateX({{start}})"}))],{params:{end:0,start:"100%",duration:300}})]),c1e=ii("tuiSlideInLeft",[Gt(":enter",[Ne({transform:"translateX(-{{start}})"}),It(Wt,Ne({transform:"translateX({{end}})"}))],{params:{end:0,start:"100%",duration:300}}),Gt(":leave",[Ne({transform:"translateX({{end}})"}),It(Wt,Ne({transform:"translateX(-{{start}})"}))],{params:{end:0,start:"100%",duration:300}})]),u1e=ii("tuiSlideInLeftList",[Gt("* => *",[tr(":enter",[Ne({transform:"translateX(-{{start}})"}),Ir(eo,[It(Wt,Ne({transform:"translateX({{end}})"}))])],{optional:!0}),tr(":leave",[Ne({transform:"translateX({{end}})"}),Ir(eo,[It(Wt,Ne({transform:"translateX(-{{start}})"}))])],{optional:!0})],{params:{end:0,start:"100%",duration:300}})]),d1e=ii("tuiSlideInRight",[Gt(":enter",[Ne({transform:"translateX({{start}})"}),It(Wt,Ne({transform:"translateX({{end}})"}))],{params:{end:0,start:"100%",duration:300}}),Gt(":leave",[Ne({transform:"translateX({{end}})"}),It(Wt,Ne({transform:"translateX({{start}})"}))],{params:{end:0,start:"100%",duration:300}})]),f1e=ii("tuiSlideInRightList",[Gt("* => *",[tr(":enter",[Ne({transform:"translateX({{start}})"}),Ir(eo,[It(Wt,Ne({transform:"translateX({{end}})"}))])],{optional:!0}),tr(":leave",[Ne({transform:"translateX({{end}})"}),Ir(eo,[It(Wt,Ne({transform:"translateX({{start}})"}))])],{optional:!0})],{params:{end:0,start:"100%",duration:300}})]),Gne=ii("tuiSlideInTop",[Gt(":enter",[Ne({transform:"translate3d(0,{{start}},0)",pointerEvents:"none"}),It(Wt,Ne({transform:"translate3d(0,{{end}},0)"}))],{params:{end:0,start:"100%",duration:300}}),Gt(":leave",[Ne({transform:"translate3d(0,{{end}},0)"}),It(Wt,Ne({transform:"translate3d(0,{{start}},0)"}))],{params:{end:0,start:"100%",duration:300}})]),h1e=ii("tuiSlideInTopList",[Gt("* => *",[tr(":enter",[Ne({transform:"translateY({{start}})"}),Ir(eo,[It(Wt,Ne({transform:"translateY({{end}})"}))])],{optional:!0}),tr(":leave",[Ne({transform:"translateY({{end}})"}),Ir(eo,[It(Wt,Ne({transform:"translateY({{start}})"}))])],{optional:!0})],{params:{end:0,start:"100%",duration:300}})]),p1e=ii("tuiSlideInBottom",[Gt(":enter",[Ne({transform:"translateY(-{{start}})"}),It(Wt,Ne({transform:"translateY({{end}})"}))],{params:{end:0,start:"100%",duration:300}}),Gt(":leave",[Ne({transform:"translateY({{end}})"}),It(Wt,Ne({transform:"translateY(-{{start}})"}))],{params:{end:0,start:"100%",duration:300}})]),m1e=ii("tuiSlideInBottomList",[Gt("* => *",[tr(":enter",[Ne({transform:"translateY(-{{start}})"}),Ir(eo,[It(Wt,Ne({transform:"translateY({{end}})"}))])],{optional:!0}),tr(":leave",[Ne({transform:"translateY({{end}})"}),Ir(eo,[It(Wt,Ne({transform:"translateY(-{{start}})"}))])],{optional:!0})],{params:{end:0,start:"100%",duration:300}})]);var Wi=new Ae("[WA_WINDOW]",{factory:()=>{let{defaultView:n}=D(zt);if(!n)throw new Error("Window is not available");return n}}),vo=Wi,Og=new Ae("[WA_ANIMATION_FRAME]",{factory:()=>{let{requestAnimationFrame:n,cancelAnimationFrame:e}=D(vo);return new yt(i=>{let r=NaN,o=s=>{i.next(s),r=n(o)};return r=n(o),()=>{e(r)}}).pipe(uo())}});var w1e=new Ae("[WA_CACHES]",{factory:()=>D(vo).caches});var x1e=new Ae("[WA_CRYPTO]",{factory:()=>D(vo).crypto});var b1e=new Ae("[WA_CSS]",{factory:()=>D(vo).CSS??{escape:n=>n,supports:()=>!1}});var M1e=new Ae("[WA_HISTORY]",{factory:()=>D(vo).history});var DU=new Ae("[WA_LOCAL_STORAGE]",{factory:()=>D(vo).localStorage});var C1e=new Ae("[WA_LOCATION]",{factory:()=>D(vo).location});var kh=new Ae("[WA_NAVIGATOR]",{factory:()=>D(vo).navigator}),IU=kh,S1e=new Ae("[WA_MEDIA_DEVICES]",{factory:()=>D(IU).mediaDevices});var E1e=new Ae("[WA_NETWORK_INFORMATION]",{factory:()=>D(kh).connection||null});var AU=new Ae("[WA_PAGE_VISIBILITY]",{factory:()=>{let n=D(zt);return Ji(n,"visibilitychange").pipe(Vi(0),Le(()=>n.visibilityState!=="hidden"),Sr(),Hl({refCount:!1,bufferSize:1}))}});var T1e=new Ae("[WA_PERFORMANCE]",{factory:()=>D(vo).performance});var D1e=new Ae("[WA_SCREEN]",{factory:()=>D(vo).screen});var I1e=new Ae("[WA_SESSION_STORAGE]",{factory:()=>D(vo).sessionStorage});var A1e=new Ae("[WA_SPEECH_RECOGNITION]: [SPEECH_RECOGNITION]",{factory:()=>{let n=D(vo);return n.speechRecognition||n.webkitSpeechRecognition||null}});var R1e=new Ae("[WA_SPEECH_SYNTHESIS]",{factory:()=>D(vo).speechSynthesis});var Uh=new Ae("[WA_USER_AGENT]",{factory:()=>D(IU).userAgent});var Wne=/^((?!chrome|android).)*safari/i,$ne=/ipad|iphone|ipod/i;function _D({userAgent:n,maxTouchPoints:e}){return $ne.test(n)||Wne.test(n)&&e>1}var qne=new Ae("",{factory:()=>_D(D(kh))}),Xne=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/,Yne=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/,Zne=new Ae("",{factory:()=>Xne.test(D(Uh).toLowerCase())||Yne.test(D(Uh).slice(0,4).toLowerCase())}),k1e=new Ae("",{factory:()=>D(Zne)&&!D(qne)});var U1e=new Ae("",{factory:()=>{let n=D(Wi).matchMedia("(pointer: coarse)");return rc(Ji(n,"change").pipe(Le(()=>n.matches)),{initialValue:n.matches})}}),B1e=new Ae("",{factory:()=>!!D(Wi)?.webkitConvertPointFromNodeToPage});function Hw(n){let e=Cn(n);return[e,t=>Ag(e,t,n)]}function wD(n,e){try{return n.contains(e)||!!(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING)}catch{return!1}}function Ng(n){return!!n&&"nodeType"in n&&n.nodeType===Node.ELEMENT_NODE}function dc(n){let e=n?.ownerDocument.defaultView;return!!n&&!!e&&n instanceof e.HTMLElement}function Bh(n){return n.composedPath()[0]}function zw(n){return"getRootNode"in n&&n.isConnected?n.getRootNode():n.ownerDocument}function RU(n){let{ownerDocument:e}=n;if(!e?.defaultView||!n.getBoundingClientRect)return null;let{innerWidth:t,innerHeight:i}=e.defaultView,r=zw(n),o=n.getBoundingClientRect();if(o.width===0&&o.height===0)return null;let s=Jr(Math.round(o.left)+2,0,t),a=Jr(Math.round(o.top)+2,0,i),l=Jr(Math.round(o.right)-2,0,t),u=Jr(Math.round(o.bottom)-2,0,i),f=Jr(Math.round(o.left+o.width/2),0,t),h=Jr(Math.round(o.top+o.height/2),0,i),g=[r.elementFromPoint(f,a),r.elementFromPoint(f,u),r.elementFromPoint(s,h),r.elementFromPoint(l,h)].filter(Ig);if(!g.length)return[];let v=g.filter(x=>!n.contains(x)&&!x.contains(n));return v.length===4?v:null}function PU(n,e){let{offsetTop:t,offsetLeft:i,offsetParent:r}=e;for(;dc(r)&&r!==n;)t+=r.offsetTop,i+=r.offsetLeft,r=r.offsetParent;return{offsetTop:t,offsetLeft:i}}function zn(){return D($t).nativeElement}function xD(n=0,e=0){let t={x:n,y:e,left:n,right:n,top:e,bottom:e,width:0,height:0};return ft(we({},t),{toJSON:()=>t})}function bD({activeElement:n}){if(!n?.shadowRoot)return n;let e=n.shadowRoot.activeElement;for(;e?.shadowRoot;)e=e.shadowRoot.activeElement;return e}function OU(n){let e=bD(n);dc(e)&&e.blur()}function NU(n){if(n.hasAttribute("disabled")||n.getAttribute("tabIndex")==="-1")return!1;if(dc(n)&&n.isContentEditable||n.getAttribute("tabIndex")==="0")return!0;switch(n.tagName){case"A":case"LINK":return n.hasAttribute("href");case"AUDIO":case"VIDEO":return n.hasAttribute("controls");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;case"INPUT":return n.getAttribute("type")!=="hidden";default:return!1}}function MD(n){return!n.hasAttribute("disabled")&&(n.getAttribute("tabIndex")==="-1"||NU(n))}function FU({initial:n,root:e,previous:t=!1,keyboard:i=!0}){if(!e.ownerDocument)return null;let r=i?NU:MD,o=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,Fk);o.currentNode=n;do if(dc(o.currentNode)&&(n=o.currentNode),dc(n)&&r(n))return n;while(t?o.previousNode():o.nextNode());return null}function LU(n){return new Ie(3e3,!1)}function Kne(){return new Ie(3100,!1)}function Jne(){return new Ie(3101,!1)}function Qne(n){return new Ie(3001,!1)}function eie(n){return new Ie(3003,!1)}function tie(n){return new Ie(3004,!1)}function UU(n,e){return new Ie(3005,!1)}function BU(){return new Ie(3006,!1)}function VU(){return new Ie(3007,!1)}function HU(n,e){return new Ie(3008,!1)}function zU(n){return new Ie(3002,!1)}function jU(n,e,t,i,r){return new Ie(3010,!1)}function GU(){return new Ie(3011,!1)}function WU(){return new Ie(3012,!1)}function $U(){return new Ie(3200,!1)}function qU(){return new Ie(3202,!1)}function XU(){return new Ie(3013,!1)}function YU(n){return new Ie(3014,!1)}function ZU(n){return new Ie(3015,!1)}function KU(n){return new Ie(3016,!1)}function JU(n,e){return new Ie(3404,!1)}function nie(n){return new Ie(3502,!1)}function QU(n){return new Ie(3503,!1)}function eB(){return new Ie(3300,!1)}function tB(n){return new Ie(3504,!1)}function nB(n){return new Ie(3301,!1)}function iB(n,e){return new Ie(3302,!1)}function rB(n){return new Ie(3303,!1)}function oB(n,e){return new Ie(3400,!1)}function sB(n){return new Ie(3401,!1)}function aB(n){return new Ie(3402,!1)}function lB(n,e){return new Ie(3505,!1)}function fc(n){switch(n.length){case 0:return new cl;case 1:return n[0];default:return new Ed(n)}}function TD(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let u=l.get("offset"),f=u==s,h=f&&a||new Map;l.forEach((p,g)=>{let v=g,x=p;if(g!=="offset")switch(v=n.normalizePropertyName(v,r),x){case Fh:x=t.get(g);break;case Fs:x=i.get(g);break;default:x=n.normalizeStyleValue(g,v,x,r);break}h.set(v,x)}),f||o.push(h),a=h,s=u}),r.length)throw nie(r);return o}function jw(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&CD(t,"start",n)));break;case"done":n.onDone(()=>i(t&&CD(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&CD(t,"destroy",n)));break}}function CD(n,e,t){let i=t.totalTime,r=!!t.disabled,o=Gw(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function Gw(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Ho(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function DD(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var iie=typeof document>"u"?null:document.documentElement;function Ww(n){let e=n.parentNode||n.host||null;return e===iie?null:e}function rie(n){return n.substring(1,6)=="ebkit"}var Td=null,kU=!1;function cB(n){Td||(Td=oie()||{},kU=Td.style?"WebkitAppearance"in Td.style:!1);let e=!0;return Td.style&&!rie(n)&&(e=n in Td.style,!e&&kU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Td.style)),e}function oie(){return typeof document<"u"?document.body:null}function ID(n,e){for(;e;){if(e===n)return!0;e=Ww(e)}return!1}function AD(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var sie=1e3,RD="{{",aie="}}",PD="ng-enter",$w="ng-leave",Fg="ng-trigger",Lg=".ng-trigger",OD="ng-animating",qw=".ng-animating";function ul(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:SD(parseFloat(e[1]),e[2])}function SD(n,e){switch(e){case"s":return n*sie;default:return n}}function kg(n,e,t){return n.hasOwnProperty("duration")?n:lie(n,e,t)}function lie(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(LU(n)),{duration:0,delay:0,easing:""};r=SD(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=SD(parseFloat(l),a[4]));let u=a[5];u&&(s=u)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(Kne()),a=!0),o<0&&(e.push(Jne()),a=!0),a&&e.splice(l,0,LU(n))}return{duration:r,delay:o,easing:s}}function uB(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function xa(n,e,t){e.forEach((i,r)=>{let o=Xw(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function du(n,e){e.forEach((t,i)=>{let r=Xw(i);n.style[r]=""})}function Vh(n){return Array.isArray(n)?n.length==1?n[0]:CU(n):n}function dB(n,e,t){let i=e.params||{},r=ND(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(Qne(o))})}var ED=new RegExp(`${RD}\\s*(.+?)\\s*${aie}`,"g");function ND(n){let e=[];if(typeof n=="string"){let t;for(;t=ED.exec(n);)e.push(t[1]);ED.lastIndex=0}return e}function Hh(n,e,t){let i=`${n}`,r=i.replace(ED,(o,s)=>{let a=e[s];return a==null&&(t.push(eie(s)),a=""),a.toString()});return r==i?n:r}var cie=/-+([a-z0-9])/g;function Xw(n){return n.replace(cie,(...e)=>e[1].toUpperCase())}function fB(n,e){return n===0||e===0}function hB(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,Yw(n,a)))}}return e}function zo(n,e,t){switch(e.type){case jt.Trigger:return n.visitTrigger(e,t);case jt.State:return n.visitState(e,t);case jt.Transition:return n.visitTransition(e,t);case jt.Sequence:return n.visitSequence(e,t);case jt.Group:return n.visitGroup(e,t);case jt.Animate:return n.visitAnimate(e,t);case jt.Keyframes:return n.visitKeyframes(e,t);case jt.Style:return n.visitStyle(e,t);case jt.Reference:return n.visitReference(e,t);case jt.AnimateChild:return n.visitAnimateChild(e,t);case jt.AnimateRef:return n.visitAnimateRef(e,t);case jt.Query:return n.visitQuery(e,t);case jt.Stagger:return n.visitStagger(e,t);default:throw tie(e.type)}}function Yw(n,e){return window.getComputedStyle(n)[e]}var KD=(()=>{class n{validateStyleProperty(t){return cB(t)}containsElement(t,i){return ID(t,i)}getParentElement(t){return Ww(t)}query(t,i,r){return AD(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new cl(r,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),Id=class{static NOOP=new KD},Ad=class{};var uie=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),ex=class extends Ad{normalizePropertyName(e,t){return Xw(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(uie.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(UU(e,i))}return s+o}};var tx="*";function die(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>fie(i,t,e)):t.push(n),t}function fie(n,e,t){if(n[0]==":"){let l=hie(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(ZU(n)),e;let r=i[1],o=i[2],s=i[3];e.push(pB(r,s));let a=r==tx&&s==tx;o[0]=="<"&&!a&&e.push(pB(s,r))}function hie(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(KU(n)),"* => *"}}var Zw=new Set(["true","1"]),Kw=new Set(["false","0"]);function pB(n,e){let t=Zw.has(n)||Kw.has(n),i=Zw.has(e)||Kw.has(e);return(r,o)=>{let s=n==tx||n==r,a=e==tx||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?Zw.has(n):Kw.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?Zw.has(e):Kw.has(e)),s&&a}}var CB=":self",pie=new RegExp(`s*${CB}s*,?`,"g");function SB(n,e,t,i){return new VD(n).build(e,t,i)}var mB="",VD=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new HD(t);return this._resetContextStyleTimingState(r),zo(this,Vh(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=mB,e.collectedStyles=new Map,e.collectedStyles.set(mB,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(BU()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==jt.State){let l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(f=>{l.name=f,o.push(this.visitState(l,t))}),l.name=u}else if(a.type==jt.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(VU())}),{type:jt.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{ND(l).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(HU(e.name,[...o.values()]))}return{type:jt.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=zo(this,Vh(e.animation),t),r=die(e.expr,t.errors);return{type:jt.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Dd(e.options)}}visitSequence(e,t){return{type:jt.Sequence,steps:e.steps.map(i=>zo(this,i,t)),options:Dd(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=zo(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:jt.Group,steps:o,options:Dd(e.options)}}visitAnimate(e,t){let i=yie(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Ne({});if(o.type==jt.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};i.easing&&(u.easing=i.easing),s=Ne(u)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:jt.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Fs?i.push(a):t.errors.push(zU(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(RD)>=0){o=!0;break}}}),{type:jt.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(l),h=!0;f&&(o!=r&&o>=f.startTime&&r<=f.endTime&&(t.errors.push(jU(l,f.startTime,f.endTime,o,r)),h=!1),o=f.startTime),h&&u.set(l,{startTime:o,endTime:r}),t.options&&dB(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:jt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(GU()),i;let r=1,o=0,s=[],a=!1,l=!1,u=0,f=e.steps.map(_=>{let T=this._makeStyleAst(_,t),M=T.offset!=null?T.offset:vie(T.styles),C=0;return M!=null&&(o++,C=T.offset=M),l=l||C<0||C>1,a=a||C<u,u=C,s.push(C),T});l&&t.errors.push(WU()),a&&t.errors.push($U());let h=e.steps.length,p=0;o>0&&o<h?t.errors.push(qU()):o==0&&(p=r/(h-1));let g=h-1,v=t.currentTime,x=t.currentAnimateTimings,y=x.duration;return f.forEach((_,T)=>{let M=p>0?T==g?1:p*T:s[T],C=M*y;t.currentTime=v+x.delay+C,x.duration=C,this._validateStyleAst(_,t),_.offset=M,i.styles.push(_)}),i}visitReference(e,t){return{type:jt.Reference,animation:zo(this,Vh(e.animation),t),options:Dd(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:jt.AnimateChild,options:Dd(e.options)}}visitAnimateRef(e,t){return{type:jt.AnimateRef,animation:this.visitReference(e.animation,t),options:Dd(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=mie(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Ho(t.collectedStyles,t.currentQuerySelector,new Map);let a=zo(this,Vh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:jt.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Dd(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(XU());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:kg(e.timings,t.errors,!0);return{type:jt.Stagger,animation:zo(this,Vh(e.animation),t),timings:i,options:null}}};function mie(n){let e=!!n.split(/\s*,\s*/).find(t=>t==CB);return e&&(n=n.replace(pie,"")),n=n.replace(/@\*/g,Lg).replace(/@\w+/g,t=>Lg+"-"+t.slice(1)).replace(/:animating/g,qw),[n,e]}function gie(n){return n?we({},n):null}var HD=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function vie(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function yie(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=kg(n,e).duration;return FD(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=FD(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=kg(t,e);return FD(r.duration,r.delay,r.easing)}function Dd(n){return n?(n=we({},n),n.params&&(n.params=gie(n.params))):n={},n}function FD(n,e,t){return{duration:n,delay:e,easing:t}}function JD(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Bg=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},_ie=1,wie=":enter",xie=new RegExp(wie,"g"),bie=":leave",Mie=new RegExp(bie,"g");function EB(n,e,t,i,r,o=new Map,s=new Map,a,l,u=[]){return new zD().buildKeyframes(n,e,t,i,r,o,s,a,l,u)}var zD=class{buildKeyframes(e,t,i,r,o,s,a,l,u,f=[]){u=u||new Bg;let h=new jD(e,t,u,r,o,f,[]);h.options=l;let p=l.delay?ul(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,l),zo(this,i,h);let g=h.timelines.filter(v=>v.containsAnimation());if(g.length&&a.size){let v;for(let x=g.length-1;x>=0;x--){let y=g[x];if(y.element===t){v=y;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,h.errors,l)}return g.length?g.map(v=>v.buildKeyframes()):[JD(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:ul(Hh(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?ul(i.duration):null,a=i.delay!=null?ul(i.delay):null;return s!==0&&e.forEach(l=>{let u=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),zo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==jt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=nx);let s=ul(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>zo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?ul(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),zo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Hh(i,t.params,t.errors):i;return kg(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==jt.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let u=l.offset||0;a.forwardTime(u*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?ul(r.delay):0;o&&(t.previousNode.type===jt.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=nx);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,f)=>{t.currentQueryIndex=f;let h=t.createSubContext(e.options,u);o&&h.delayNextStep(o),u===t.element&&(l=h.currentTimeline),zo(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let p=h.currentTimeline.currentTime;s=Math.max(s,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let f=t.currentTimeline;l&&f.delayNextStep(l);let h=f.currentTime;zo(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}},nx={},jD=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=nx;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new ix(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=ul(i.duration)),i.delay!=null&&(r.delay=ul(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Hh(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=nx,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new GD(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(xie,"."+this._enterClassName),e=e.replace(Mie,"."+this._leaveClassName);let l=i!=1,u=this._driver.query(this.element,e,l);i!==0&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!o&&a.length==0&&s.push(YU(t)),a}},ix=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=_ie,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Fs),this._currentKeyframe.set(t,Fs);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=Cie(e,this._globalTimelineStyles);for(let[a,l]of s){let u=Hh(l,o,i);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Fs),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let u=new Map([...this._backFill,...a]);u.forEach((f,h)=>{f===Fh?e.add(h):f===Fs&&t.add(h)}),i||u.set("offset",l/this.duration),r.push(u)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return JD(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},GD=class extends ix{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let u=new Map(e[0]);u.set("offset",gB(a)),o.push(u);let f=e.length-1;for(let h=1;h<=f;h++){let p=new Map(e[h]),g=p.get("offset"),v=t+g*i;p.set("offset",gB(v/s)),o.push(p)}i=s,t=0,r="",e=o}return JD(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function gB(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Cie(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,Fs)}else for(let[o,s]of r)t.set(o,s)}),t}function vB(n,e,t,i,r,o,s,a,l,u,f,h,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:f,totalTime:h,errors:p}}var LD={},rx=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return Sie(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,u,f){let h=[],p=this.ast.options&&this.ast.options.params||LD,g=a&&a.params||LD,v=this.buildStyles(i,g,h),x=l&&l.params||LD,y=this.buildStyles(r,x,h),_=new Set,T=new Map,M=new Map,C=r==="void",H={params:TB(x,p),delay:this.ast.options?.delay},L=f?[]:EB(e,t,this.ast.animation,o,s,v,y,H,u,h),k=0;return L.forEach($=>{k=Math.max($.duration+$.delay,k)}),h.length?vB(t,this._triggerName,i,r,C,v,y,[],[],T,M,k,h):(L.forEach($=>{let N=$.element,A=Ho(T,N,new Set);$.preStyleProps.forEach(he=>A.add(he));let j=Ho(M,N,new Set);$.postStyleProps.forEach(he=>j.add(he)),N!==t&&_.add(N)}),vB(t,this._triggerName,i,r,C,v,y,L,[..._.values()],T,M,k))}};function Sie(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function TB(n,e){let t=we({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var WD=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=TB(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Hh(s,r,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}};function Eie(n,e,t){return new $D(n,e,t)}var $D=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new WD(r.style,o,i))}),yB(this.states,"true","1"),yB(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new rx(e,r,this.states))}),this.fallbackTransition=Tie(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function Tie(n,e,t){let i=[(s,a)=>!0],r={type:jt.Sequence,steps:[],options:null},o={type:jt.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new rx(n,o,e)}function yB(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var Die=new Bg,qD=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],o=SB(this._driver,t,i,r);if(i.length)throw QU(i);this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=TD(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=EB(this._driver,t,o,PD,$w,new Map,new Map,i,Die,r),s.forEach(f=>{let h=Ho(a,f.element,new Map);f.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(eB()),s=[]),r.length)throw tB(r);a.forEach((f,h)=>{f.forEach((p,g)=>{f.set(g,this._driver.computeStyle(h,g,Fs))})});let l=s.map(f=>{let h=a.get(f.element);return this._buildPlayer(f,new Map,h)}),u=fc(l);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw nB(e);return t}listen(e,t,i,r){let o=Gw(t,"","","");return jw(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},_B="ng-animate-queued",Iie=".ng-animate-queued",kD="ng-animate-disabled",Aie=".ng-animate-disabled",Rie="ng-star-inserted",Pie=".ng-star-inserted",Oie=[],DB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Nie={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ba="__ng_removed",Vg=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Lie(r),i){let o=e,{value:s}=o,a=ju(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},Ug="void",UD=new Vg(Ug),XD=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,Ls(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw iB(i,t);if(i==null||i.length==0)throw rB(t);if(!kie(i))throw oB(i,t);let o=Ho(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=Ho(this._engine.statesByElement,e,new Map);return a.has(t)||(Ls(e,Fg),Ls(e,Fg+"-"+t),a.set(t,UD)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw sB(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new Hg(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Ls(e,Fg),Ls(e,Fg+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),u=new Vg(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=UD),!(u.value===Ug)&&l.value===u.value){if(!Vie(l.params,u.params)){let x=[],y=o.matchStyles(l.value,l.params,x),_=o.matchStyles(u.value,u.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{du(e,y),xa(e,_)})}return}let p=Ho(this._engine.playersByElement,e,[]);p.forEach(x=>{x.namespaceId==this.id&&x.triggerName==t&&x.queued&&x.destroy()});let g=o.matchTransition(l.value,u.value,e,u.params),v=!1;if(!g){if(!r)return;g=o.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:u,player:s,isFallbackTransition:v}),v||(Ls(e,_B),s.onStart(()=>{zh(e,_B)})),s.onDone(()=>{let x=this.players.indexOf(s);x>=0&&this.players.splice(x,1);let y=this._engine.playersByElement.get(e);if(y){let _=y.indexOf(s);_>=0&&y.splice(_,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,Lg,!0);i.forEach(r=>{if(r[ba])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,u)=>{if(s.set(u,l.value),this._triggers.has(u)){let f=this.trigger(e,u,Ug,r);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&fc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,u=i.get(s)||UD,f=new Vg(Ug),h=new Hg(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:u,toState:f,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[ba];(!o||o===DB)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ls(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=Gw(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,jw(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},YD=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new XD(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let u=i.indexOf(l);i.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(Jw(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Jw(t))return;let o=t[ba];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ls(e,kD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),zh(e,kD))}removeNode(e,t,i){if(Jw(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[ba]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return Jw(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Lg,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,qw,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return fc(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ba];if(t&&t.setForRemoval){if(e[ba]=DB,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(kD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Aie,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Ls(r,Rie)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?fc(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw aB(e)}_flushAnimations(e,t){let i=new Bg,r=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(Y=>{f.add(Y);let ie=this.driver.query(Y,Iie,!0);for(let X=0;X<ie.length;X++)f.add(ie[X])});let h=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=bB(p,this.collectedEnterElements),v=new Map,x=0;g.forEach((Y,ie)=>{let X=PD+x++;v.set(ie,X),Y.forEach(_e=>Ls(_e,X))});let y=[],_=new Set,T=new Set;for(let Y=0;Y<this.collectedLeaveElements.length;Y++){let ie=this.collectedLeaveElements[Y],X=ie[ba];X&&X.setForRemoval&&(y.push(ie),_.add(ie),X.hasAnimation?this.driver.query(ie,Pie,!0).forEach(_e=>_.add(_e)):T.add(ie))}let M=new Map,C=bB(p,Array.from(_));C.forEach((Y,ie)=>{let X=$w+x++;M.set(ie,X),Y.forEach(_e=>Ls(_e,X))}),e.push(()=>{g.forEach((Y,ie)=>{let X=v.get(ie);Y.forEach(_e=>zh(_e,X))}),C.forEach((Y,ie)=>{let X=M.get(ie);Y.forEach(_e=>zh(_e,X))}),y.forEach(Y=>{this.processLeaveNode(Y)})});let H=[],L=[];for(let Y=this._namespaceList.length-1;Y>=0;Y--)this._namespaceList[Y].drainQueuedTransitions(t).forEach(X=>{let _e=X.player,Ve=X.element;if(H.push(_e),this.collectedEnterElements.length){let se=Ve[ba];if(se&&se.setForMove){if(se.previousTriggersValues&&se.previousTriggersValues.has(X.triggerName)){let je=se.previousTriggersValues.get(X.triggerName),We=this.statesByElement.get(X.element);if(We&&We.has(X.triggerName)){let Ue=We.get(X.triggerName);Ue.value=je,We.set(X.triggerName,Ue)}}_e.destroy();return}}let rt=!h||!this.driver.containsElement(h,Ve),ge=M.get(Ve),re=v.get(Ve),B=this._buildInstruction(X,i,re,ge,rt);if(B.errors&&B.errors.length){L.push(B);return}if(rt){_e.onStart(()=>du(Ve,B.fromStyles)),_e.onDestroy(()=>xa(Ve,B.toStyles)),r.push(_e);return}if(X.isFallbackTransition){_e.onStart(()=>du(Ve,B.fromStyles)),_e.onDestroy(()=>xa(Ve,B.toStyles)),r.push(_e);return}let J=[];B.timelines.forEach(se=>{se.stretchStartingKeyframe=!0,this.disabledNodes.has(se.element)||J.push(se)}),B.timelines=J,i.append(Ve,B.timelines);let xe={instruction:B,player:_e,element:Ve};s.push(xe),B.queriedElements.forEach(se=>Ho(a,se,[]).push(_e)),B.preStyleProps.forEach((se,je)=>{if(se.size){let We=l.get(je);We||l.set(je,We=new Set),se.forEach((Ue,at)=>We.add(at))}}),B.postStyleProps.forEach((se,je)=>{let We=u.get(je);We||u.set(je,We=new Set),se.forEach((Ue,at)=>We.add(at))})});if(L.length){let Y=[];L.forEach(ie=>{Y.push(lB(ie.triggerName,ie.errors))}),H.forEach(ie=>ie.destroy()),this.reportError(Y)}let k=new Map,$=new Map;s.forEach(Y=>{let ie=Y.element;i.has(ie)&&($.set(ie,ie),this._beforeAnimationBuild(Y.player.namespaceId,Y.instruction,k))}),r.forEach(Y=>{let ie=Y.element;this._getPreviousPlayers(ie,!1,Y.namespaceId,Y.triggerName,null).forEach(_e=>{Ho(k,ie,[]).push(_e),_e.destroy()})});let N=y.filter(Y=>MB(Y,l,u)),A=new Map;xB(A,this.driver,T,u,Fs).forEach(Y=>{MB(Y,l,u)&&N.push(Y)});let he=new Map;g.forEach((Y,ie)=>{xB(he,this.driver,new Set(Y),l,Fh)}),N.forEach(Y=>{let ie=A.get(Y),X=he.get(Y);A.set(Y,new Map([...ie?.entries()??[],...X?.entries()??[]]))});let ae=[],Re=[],Se={};s.forEach(Y=>{let{element:ie,player:X,instruction:_e}=Y;if(i.has(ie)){if(f.has(ie)){X.onDestroy(()=>xa(ie,_e.toStyles)),X.disabled=!0,X.overrideTotalTime(_e.totalTime),r.push(X);return}let Ve=Se;if($.size>1){let ge=ie,re=[];for(;ge=ge.parentNode;){let B=$.get(ge);if(B){Ve=B;break}re.push(ge)}re.forEach(B=>$.set(B,Ve))}let rt=this._buildAnimation(X.namespaceId,_e,k,o,he,A);if(X.setRealPlayer(rt),Ve===Se)ae.push(X);else{let ge=this.playersByElement.get(Ve);ge&&ge.length&&(X.parentPlayer=fc(ge)),r.push(X)}}else du(ie,_e.fromStyles),X.onDestroy(()=>xa(ie,_e.toStyles)),Re.push(X),f.has(ie)&&r.push(X)}),Re.forEach(Y=>{let ie=o.get(Y.element);if(ie&&ie.length){let X=fc(ie);Y.setRealPlayer(X)}}),r.forEach(Y=>{Y.parentPlayer?Y.syncPlayerEvents(Y.parentPlayer):Y.destroy()});for(let Y=0;Y<y.length;Y++){let ie=y[Y],X=ie[ba];if(zh(ie,$w),X&&X.hasAnimation)continue;let _e=[];if(a.size){let rt=a.get(ie);rt&&rt.length&&_e.push(...rt);let ge=this.driver.query(ie,qw,!0);for(let re=0;re<ge.length;re++){let B=a.get(ge[re]);B&&B.length&&_e.push(...B)}}let Ve=_e.filter(rt=>!rt.destroyed);Ve.length?Uie(this,ie,Ve):this.processLeaveNode(ie)}return y.length=0,ae.forEach(Y=>{this.players.push(Y),Y.onDone(()=>{Y.destroy();let ie=this.players.indexOf(Y);this.players.splice(ie,1)}),Y.play()}),ae}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==Ug;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||s.push(u)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let u=l.element,f=u!==o,h=Ho(i,u,[]);this._getPreviousPlayers(u,f,s,a,t.toState).forEach(g=>{let v=g.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),g.destroy(),h.push(g)})}du(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,l=t.element,u=[],f=new Set,h=new Set,p=t.timelines.map(v=>{let x=v.element;f.add(x);let y=x[ba];if(y&&y.removedBeforeQueried)return new cl(v.duration,v.delay);let _=x!==l,T=Bie((i.get(x)||Oie).map(k=>k.getRealPlayer())).filter(k=>{let $=k;return $.element?$.element===x:!1}),M=o.get(x),C=s.get(x),H=TD(this._normalizer,v.keyframes,M,C),L=this._buildPlayer(v,H,T);if(v.subTimeline&&r&&h.add(x),_){let k=new Hg(e,a,x);k.setRealPlayer(L),u.push(k)}return L});u.forEach(v=>{Ho(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>Fie(this.playersByQueriedElement,v.element,v))}),f.forEach(v=>Ls(v,OD));let g=fc(p);return g.onDestroy(()=>{f.forEach(v=>zh(v,OD)),xa(l,t.toStyles)}),h.forEach(v=>{Ho(r,v,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new cl(e.duration,e.delay)}},Hg=class{namespaceId;triggerName;element;_player=new cl;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>jw(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ho(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Fie(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Lie(n){return n??null}function Jw(n){return n&&n.nodeType===1}function kie(n){return n=="start"||n=="done"}function wB(n,e){let t=n.style.display;return n.style.display=e??"none",t}function xB(n,e,t,i,r){let o=[];t.forEach(l=>o.push(wB(l)));let s=[];i.forEach((l,u)=>{let f=new Map;l.forEach(h=>{let p=e.computeStyle(u,h,r);f.set(h,p),(!p||p.length==0)&&(u[ba]=Nie,s.push(u))}),n.set(u,f)});let a=0;return t.forEach(l=>wB(l,o[a++])),s}function bB(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let u=a.parentNode;return t.has(u)?l=u:r.has(u)?l=i:l=s(u),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==i&&t.get(l).push(a)}),t}function Ls(n,e){n.classList?.add(e)}function zh(n,e){n.classList?.remove(e)}function Uie(n,e,t){fc(t).onDone(()=>n.processLeaveNode(e))}function Bie(n){let e=[];return IB(n,e),e}function IB(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Ed?IB(i.players,e):e.push(i)}}function Vie(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function MB(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var fu=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new YD(e.body,t,i),this._timelineEngine=new qD(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],u=[],f=SB(this._driver,o,l,u);if(l.length)throw JU(r,l);a=Eie(r,f,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=DD(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=DD(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Hie(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=BD(e[0]),e.length>1&&(i=BD(e[e.length-1]))):e instanceof Map&&(t=BD(e)),t||i?new zie(n,t,i):null}var zie=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&xa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xa(this._element,this._initialStyles),this._endStyles&&(xa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(du(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(du(this._element,this._endStyles),this._endStyles=null),xa(this._element,this._initialStyles),this._state=3)}}return n})();function BD(n){let e=null;return n.forEach((t,i)=>{jie(i)&&(e=e||new Map,e.set(i,t))}),e}function jie(n){return n==="display"||n==="position"}var ox=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:Yw(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},sx=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return ID(e,t)}getParentElement(e){return Ww(e)}query(e,t,i){return AD(e,t,i)}computeStyle(e,t,i){return Yw(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let u=new Map,f=s.filter(g=>g instanceof ox);fB(i,r)&&f.forEach(g=>{g.currentSnapshot.forEach((v,x)=>u.set(x,v))});let h=uB(t).map(g=>new Map(g));h=hB(e,h,u);let p=Hie(e,h);return new ox(e,h,l,p)}};var Qw="@",AB="@.disabled",ax=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==Qw&&t==AB?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},ZD=class extends ax{factory;constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==Qw?t.charAt(1)=="."&&t==AB?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==Qw){let o=Gie(e),s=t.slice(1),a="";return s.charAt(0)!=Qw&&([s,a]=Wie(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,i,l)})}return this.delegate.listen(e,t,i,r)}};function Gie(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Wie(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var lx=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,f=u.get(r);if(!f){let h=()=>u.delete(r);f=new ax(i,r,this.engine,h),u.set(r,f)}return f}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new ZD(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var qie=tn(()=>{let n={onRemovalComplete:()=>{}},e=new Ln(null),t=D(fu,{optional:!0})||n,{onRemovalComplete:i=n.onRemovalComplete}=t;return t.onRemovalComplete=(r,o)=>{e.next(r),i.call(t,r,o)},e.pipe(Vn(r=>co(0).pipe(Le(()=>null),Vi(r))),uo())});function RB(n,e=null){return zw(n).activeElement!==n&&!n.matches(":disabled")&&!e?.contains(n)&&MD(n)}function Xie(n){return Jn(Jt(n,"focusin").pipe(Le(({target:e})=>e)),Jt(n,"focusout").pipe(rn(({target:e,relatedTarget:t})=>!!t&&RB(e)),Le(({relatedTarget:e})=>e)))}var PB=tn(()=>{let n=D(qie),e=D(Wi),t=D(zt),i=D(Mn),r=Jt(e,"focusout",{capture:!0}),o=Jt(e,"focusin",{capture:!0}),s=Jt(e,"blur"),a=Jt(e,"mousedown"),l=Jt(e,"mouseup");return Jn(r.pipe(Oi(a),Ga({delay:()=>l}),BS(n),rn(([u,f])=>RB(Bh(u),f)),Le(([{relatedTarget:u}])=>u)),s.pipe(Le(()=>t.activeElement),rn(u=>!!u?.matches("iframe"))),o.pipe(Vn(u=>{let f=Bh(u),h=zw(f)||t;return h===t?ct(f):Xie(h).pipe(Vi(f))})),a.pipe(Vn(u=>{let f=Bh(u);return!t.activeElement||t.activeElement===t.body?ct(f):r.pipe(Or(1),Le(()=>f),Oi(co(0,cc(i))))}))).pipe(Sr(),uo())}),_De=tn(()=>D(zt).querySelector("base")?.href??""),Yie=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/,Zie=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/,Ma=tn(()=>Yie.test(D(Uh).toLowerCase())||Zie.test(D(Uh).slice(0,4).toLowerCase())),cx=tn(()=>_D(D(kh))),Kie=tn(()=>D(Ma)&&!D(cx)),OB=tn(()=>!!D(Wi)?.webkitConvertPointFromNodeToPage),QD=tn(()=>D(cx)?"ios":D(Kie)?"android":"web"),wDe=tn(()=>{let n=D(Wi).matchMedia("(pointer: coarse)");return rc(Ji(n,"change").pipe(Le(()=>n.matches)),{initialValue:n.matches})}),Jie=tn(()=>!!D(Wi).Cypress),Qie=tn(oc),xDe=tn(()=>D(Jie)||D(Qie)),bDe=Cn(null);var MDe=tn(()=>md(D(ho))?new Range:{}),NB=tn(()=>{let n=D(Wi);return Jt(n,"resize").pipe(Vi(null),Le(()=>{let e=Math.max(n.document.documentElement.clientWidth||0,n.innerWidth||0,n.visualViewport?.width||0),t=Math.max(n.document.documentElement.clientHeight||0,n.innerHeight||0,n.visualViewport?.height||0),i={width:e,height:t,top:0,left:0,right:e,bottom:t,x:0,y:0};return ft(we({},i),{toJSON:()=>JSON.stringify(i)})}),Hl({bufferSize:1,refCount:!0}))});var ere=Cn(),FB=(()=>{class n{constructor(){this.handler=D(ere,{optional:!0}),this.nothing=D(Er).onDestroy(this.handler&&md(D(ho))&&typeof ResizeObserver<"u"?xU(this.handler,D(Wi)):Nk)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n})}}return n})();var jh=12,ux=1,eI=0,dx=11,tI=0,nI=9999,nre=2099,ire=`${Ih}${Lk}${Ih}`,rre=1e3,ore=60,sre=60,are=24,lre=rre*ore,cre=lre*sre,NDe=cre*are,ure=10,FDe=2*ure+ire.length,fx={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},hc={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11},ks=class n{constructor(e){this.year=e}static isValidYear(e){return Number.isInteger(e)&&Dg(e,tI,nI+1)}static isLeapYear(e){return e%400===0||e%4===0&&e%100!==0}static getAbsoluteLeapYears(e){return Math.ceil(e/400)+(Math.ceil(e/4)-Math.ceil(e/100))}static lengthBetween(e,t){return t.year-e.year}static normalizeYearPart(e){return Uw(e,tI,nI)}get formattedYear(){return String(this.year).padStart(4,"0")}get isLeapYear(){return n.isLeapYear(this.year)}get absoluteLeapYears(){return n.getAbsoluteLeapYears(this.year)}yearBefore({year:e}){return this.year<e}yearSameOrBefore({year:e}){return this.year<=e}yearSame({year:e}){return this.year===e}yearSameOrAfter({year:e}){return this.year>=e}yearAfter({year:e}){return this.year>e}append({year:e=0}){let t=this.year+e;return new n(t)}toString(){return this.formattedYear}valueOf(){return this.year}[Symbol.toPrimitive](e){return Date.prototype[Symbol.toPrimitive].call(this,e)}toJSON(){return this.formattedYear}},ls=class n extends ks{constructor(e,t){super(e),this.month=t}static isValidMonth(e,t){return ks.isValidYear(e)&&n.isValidMonthPart(t)}static getMonthDaysCount(e,t){switch(e){case hc.April:case hc.June:case hc.November:case hc.September:return 30;case hc.February:return t?29:28;default:return 31}}static currentLocal(){let e=new Date;return new n(e.getFullYear(),e.getMonth())}static currentUtc(){let e=new Date;return new n(e.getUTCFullYear(),e.getUTCMonth())}static lengthBetween(e,t){let i=e.month+e.year*12;return t.month+t.year*12-i}static normalizeMonthPart(e){return Uw(e,eI,dx)}static isValidMonthPart(e){return Number.isInteger(e)&&Dg(e,eI,dx+1)}get formattedMonthPart(){return String(this.month+1).padStart(2,"0")}get daysCount(){return n.getMonthDaysCount(this.month,this.isLeapYear)}monthBefore(e){return this.yearBefore(e)||this.yearSame(e)&&this.month<e.month}monthSameOrBefore(e){return this.yearBefore(e)||this.yearSame(e)&&this.month<=e.month}monthSame(e){return this.yearSame(e)&&this.month===e.month}monthSameOrAfter(e){return this.yearAfter(e)||this.yearSame(e)&&this.month>=e.month}monthAfter(e){return this.yearAfter(e)||this.yearSame(e)&&this.month>e.month}append({year:e=0,month:t=0}){let i=(this.year+e)*jh+this.month+t;return new n(Math.floor(i/jh),i%jh)}toString(){return`${this.formattedMonthPart}.${this.formattedYear}`}valueOf(){return this.toLocalNativeDate().valueOf()}toJSON(){return`${super.toJSON()}-${this.formattedMonthPart}`}toLocalNativeDate(){return new Date(this.year,this.month)}toUtcNativeDate(){return new Date(Date.UTC(this.year,this.month))}},zg=class n extends ls{constructor(e,t,i){super(e,t),this.day=i}static fromLocalNativeDate(e){return new n(e.getFullYear(),e.getMonth(),e.getDate())}static fromUtcNativeDate(e){return new n(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}static isValidDay(e,t,i){return ls.isValidMonth(e,t)&&Number.isInteger(i)&&Dg(i,ux,ls.getMonthDaysCount(t,ks.isLeapYear(e))+1)}static currentLocal(){let e=new Date,t=e.getFullYear(),i=e.getMonth(),r=e.getDate();return new n(t,i,r)}static currentUtc(){let e=new Date,t=e.getUTCFullYear(),i=e.getUTCMonth(),r=e.getUTCDate();return new n(t,i,r)}static normalizeOf(e,t,i){let r=ks.normalizeYearPart(e),o=ls.normalizeMonthPart(t),s=n.normalizeDayPart(i,o,r);return new n(r,o,s)}static lengthBetween(e,t){return Math.round((t.toLocalNativeDate().getTime()-e.toLocalNativeDate().getTime())/(1e3*60*60*24))}static parseRawDateString(e,t="DMY"){switch(t){case"MDY":return{day:parseInt(e.slice(3,5),10),month:parseInt(e.slice(0,2),10)-1,year:parseInt(e.slice(6,10),10)};case"YMD":return{day:parseInt(e.slice(8,10),10),month:parseInt(e.slice(5,7),10)-1,year:parseInt(e.slice(0,4),10)};case"DMY":default:return{day:parseInt(e.slice(0,2),10),month:parseInt(e.slice(3,5),10)-1,year:parseInt(e.slice(6,10),10)}}}static normalizeParse(e,t="DMY"){let{day:i,month:r,year:o}=this.parseRawDateString(e,t);return n.normalizeOf(o,r,i)}static jsonParse(e){let{day:t,month:i,year:r}=this.parseRawDateString(e,"YMD");if(!ls.isValidMonth(r,i)||!Number.isInteger(t)||!Dg(t,ux,ls.getMonthDaysCount(i,ks.isLeapYear(r))+1))throw new iI(r,i,t);return new n(r,i,t)}static normalizeDayPart(e,t,i){let r=ls.getMonthDaysCount(t,ks.isLeapYear(i));return Uw(e,1,r)}get formattedDayPart(){return String(this.day).padStart(2,"0")}get isWeekend(){let e=this.dayOfWeek(!1);return e===fx.Saturday||e===fx.Sunday}dayOfWeek(e=!0){let t=e?this.toLocalNativeDate().getDay()-1:this.toLocalNativeDate().getDay();return t<0?6:t}dayBefore(e){return this.monthBefore(e)||this.monthSame(e)&&this.day<e.day}daySameOrBefore(e){return this.monthBefore(e)||this.monthSame(e)&&this.day<=e.day}daySame(e){return this.monthSame(e)&&this.day===e.day}daySameOrAfter(e){return this.monthAfter(e)||this.monthSame(e)&&this.day>=e.day}dayAfter(e){return this.monthAfter(e)||this.monthSame(e)&&this.day>e.day}dayLimit(e,t){return e!==null&&this.dayBefore(e)?e:t!==null&&this.dayAfter(t)?t:this}append({year:e=0,month:t=0,day:i=0}){let r=(this.year+e)*jh+this.month+t,o=Math.floor(r/jh),s=r%jh,a=Math.min(this.day,ls.getMonthDaysCount(s,ks.isLeapYear(o)))+i;for(;a>ls.getMonthDaysCount(s,ks.isLeapYear(o));)a-=ls.getMonthDaysCount(s,ks.isLeapYear(o)),s===hc.December?(o++,s=hc.January):s++;for(;a<ux;)s===hc.January?(o--,s=hc.December):s--,a+=ls.getMonthDaysCount(s,ks.isLeapYear(o));return new n(o,s,a)}getFormattedDay(e,t){let i=this.formattedDayPart,r=this.formattedMonthPart,o=this.formattedYear;switch(e){case"MDY":return`${r}${t}${i}${t}${o}`;case"YMD":return`${o}${t}${r}${t}${i}`;case"DMY":default:return`${i}${t}${r}${t}${o}`}}toString(e="DMY",t="."){return this.getFormattedDay(e,t)}toJSON(){return`${super.toJSON()}-${this.formattedDayPart}`}toLocalNativeDate(){return new Date(this.year,this.month,this.day)}toUtcNativeDate(){return new Date(Date.UTC(this.year,this.month,this.day))}},iI=class extends Error{constructor(e,t,i){super("")}};var LDe=new zg(tI,eI,ux),kDe=new zg(nI,dx,31),UDe=new zg(nre,dx,31);var dre={cardNumber:["Number","Card number"],cardExpiry:["Expires","Valid through"]},fre={colorSelectorModeNames:["Solid color","Gradient"],toolbarTools:{undo:"Undo",redo:"Redo",font:"Font",fontStyle:"Font style",fontSize:"Font size",bold:"Bold",italic:"Italic",underline:"Underline",strikeThrough:"Strike through",justify:"Justify",justifyLeft:"Justify left",justifyCenter:"Justify center",justifyRight:"Justify right",justifyFull:"Justify full",list:"List",indent:"Indent",outdent:"Outdent",unorderedList:"Unordered list",orderedList:"Ordered list",quote:"Quote",foreColor:"Color",backColor:"Background color",hiliteColor:"Highlight color",clear:"Clear",link:"Link",attach:"Attach file",tex:"Insert TeX",code:"Code",image:"Insert image",insertHorizontalRule:"Insert horizontal rule",superscript:"Superscript",subscript:"Subscript",insertTable:"Insert table",insertGroup:"Insert group",hiliteGroup:"Hilite group",removeGroup:"Remove group",insertAnchor:"Insert anchor",mergeCells:"Merge cells",splitCells:"Split cells",rowsColumnsManaging:"Managing rows and columns",cellColor:"Cell color",setDetails:"Details",removeDetails:"Remove details"},editorEditLink:{urlExample:"example.com",anchorExample:"anchor"},editorTableCommands:[["Insert column before","Insert column after"],["Insert row before","Insert row after"],["Delete column","Delete row"]],editorCodeOptions:["Code in the text","Code in block"],editorFontOptions:{small:"Small",large:"Large",normal:"Normal",title:"Title",subtitle:"Subtitle"}},hre={showHideText:"Show/Hide",paginationTexts:{pages:"Pages",linesPerPage:"Lines per page",of:"of"}},pre={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua & Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AR:"Argentina",AT:"Austria",AU:"Australia",AW:"Aruba",AZ:"Azerbaijan",BA:"Bosnia & Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"St. Barth\xE9lemy",BM:"Bermuda",BN:"Brunei",BO:"Bolivia",BQ:"Caribbean Netherlands",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CD:"Congo - Kinshasa",CF:"Central African Republic",CG:"Congo - Brazzaville",CH:"Switzerland",CI:"C\xF4te d\u2019Ivoire",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Cura\xE7ao",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Federated States of Micronesia",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GT:"Guatemala",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IN:"India",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KM:"Comoros",KN:"St. Kitts & Nevis",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"St. Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"St. Martin",MG:"Madagascar",MK:"North Macedonia",ML:"Mali",MM:"Myanmar (Burma)",MN:"Mongolia",MO:"Macao",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"R\xE9union",RO:"Romania",RS:"Serbia",RU:"Russia",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"St. Helena",SI:"Slovenia",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",ST:"S\xE3o Tom\xE9 & Pr\xEDncipe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Eswatini",TC:"Turks & Caicos Islands",TD:"Chad",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"T\xFCrkiye",TT:"Trinidad & Tobago",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VC:"St. Vincent & Grenadines",VE:"Venezuela",VG:"British Virgin Islands",VN:"Vietnam",VU:"Vanuatu",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe",AC:"Ascension Island",AS:"American Samoa",AX:"\xC5land Islands",CC:"Cocos (Keeling) Islands",CK:"Cook Islands",CX:"Christmas Island",EH:"Western Sahara",FO:"Faroe Islands",GG:"Guernsey",GU:"Guam",IM:"Isle of Man",JE:"Jersey",IO:"British Indian Ocean Territory",KI:"Kiribati",MH:"Marshall Islands",MP:"Northern Mariana Islands",NF:"Norfolk Island",NR:"Nauru",NU:"Niue",PM:"Saint Pierre and Miquelon",PR:"Puerto Rico",PS:"Palestine",SJ:"Svalbard and Jan Mayen",SS:"South Sudan",TA:"Tristan da Cunha",TK:"Tokelau",TV:"Tuvalu",VA:"Holy See",VI:"Virgin Islands",WF:"Wallis and Futuna"},mre={months:["January","February","March","April","May","June","July","August","September","October","November","December"],close:"Close",clear:"Clear",nothingFoundMessage:"Nothing found",defaultErrorMessage:"Value is invalid",spinTexts:["Previous","Next"],shortWeekDays:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],countries:pre},gre={cancel:"Cancel",done:"Done",more:"More",otherDate:"Other date...",showAll:"Show all",hide:"Hide",mobileCalendarTexts:["Choose day","Choose range","Choose days"],range:["from","to"],countTexts:["Plus","Minus"],time:{"HH:MM":"HH:MM","HH:MM AA":"HH:MM AA","HH:MM:SS":"HH:MM:SS","HH:MM:SS AA":"HH:MM:SS AA","HH:MM:SS.MSS":"HH:MM:SS.MSS","HH:MM:SS.MSS AA":"HH:MM:SS.MSS AA"},dateTexts:{DMY:"dd.mm.yyyy",MDY:"mm.dd.yyyy",YMD:"yyyy.mm.dd"},digitalInformationUnits:["B","KiB","MiB"],passwordTexts:["Show password","Hide password"],copyTexts:["Copy","Copied"],shortCalendarMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],pagination:["Previous page","Next page"],fileTexts:{loadingError:"Upload failed",preview:"Preview",remove:"Remove"},inputFileTexts:{defaultLabelSingle:"or drop\xA0it\xA0here",defaultLabelMultiple:"or drop\xA0them\xA0here",defaultLinkSingle:"Choose a file",defaultLinkMultiple:"Choose files",maxSizeRejectionReason:"File is larger than",formatRejectionReason:"Wrong file type",drop:"Drop file here",dropMultiple:"Drop files here"},multiSelectTexts:{all:"Select all",none:"Select none"},confirm:{yes:"Yes",no:"No"},previewTexts:{rotate:"Rotate"},zoomTexts:{zoomOut:"Zoom out",zoomIn:"Zoom in",reset:"Reset"},phoneSearch:"Type country or code"},vre={inputSearch:{popular:"Popular",history:"Recent",placeholder:"Type query",hotkey:"to search",all:"All",empty:"Nothing found"}},LB=we(we(we(we(we(we({name:"english"},mre),gre),hre),dre),fre),vre);var kB=tn(()=>LB),UB=tn(()=>ct(D(kB))),yre=Cn(),_re=Cn("tuiLanguage");function hu(n){return()=>D(UB).pipe(Le(e=>e[n]))}var rI=tn(()=>D(zt).defaultView?.matchMedia?.("(prefers-reduced-motion: reduce)").matches??!1),dl=tn(()=>D(rI)?0:1),wre=Cn("assets/taiga-ui/icons");var xre={check:"@tui.check",close:"@tui.x",error:"@tui.circle-alert",more:"@tui.chevron-right",search:"@tui.search",ellipsis:"@tui.ellipsis"},uIe=Cn(xre);var bre="tuiDark",Mre=Cn(bre),BB=tn(()=>{let n=!0,e=D(DU),t=D(Mre),i=e.getItem(t),r=D(Wi).matchMedia("(prefers-color-scheme: dark)"),o=ji(!!((i&&JSON.parse(i))??r.matches));return Ji(r,"change").pipe(rn(()=>!e.getItem(t)),Dr()).subscribe(()=>{n=!0,o.set(r.matches)}),dh(()=>{let s=String(o());n?n=!1:e.setItem(t,s)}),Object.assign(o,{reset:()=>{e.removeItem(t),n=!0,o.set(r.matches)}})}),Cre={mode:"DMY",separator:"."},dIe=Cn(ct(Cre));var fIe=Cn(n=>n.isWeekend?"weekend":"weekday"),hIe=Cn(fx.Monday),pIe=tn(hu("months")),mIe=tn(hu("close")),gIe=tn(hu("clear")),vIe=tn(hu("nothingFoundMessage")),yIe=tn(hu("defaultErrorMessage")),_Ie=tn(hu("spinTexts")),wIe=tn(hu("shortWeekDays")),xIe=Cn(""),bIe=Cn(""),MIe=Cn({});var CIe=tn(()=>{let n=D(wre);return e=>`${n}/${e.replace("@tui.","").split(".").join("/")}.svg`});var VB=Cn({mobile:768,desktopSmall:1024,desktopLarge:1280}),Sre={precision:NaN,decimalSeparator:".",thousandSeparator:Ih,rounding:"truncate",decimalMode:"pad"},SIe=Cn(ct(Sre));var Gh=tn(()=>new $t(D(zt).documentElement)),Ere=tn(()=>{let n=D(zt);return Jn(Jt(n,"selectionchange"),Jt(n,"mouseup"),Jt(n,"mousedown").pipe(Vn(()=>Jt(n,"mousemove").pipe(Oi(Jt(n,"mouseup"))))),Jt(n,"keydown"),Jt(n,"keyup")).pipe(uo())}),EIe=Cn({decrement:"@tui.chevron-left",increment:"@tui.chevron-right"}),HB=Cn("Taiga UI"),Wh=tn(()=>{let n=D(Wi);return{type:"viewport",getClientRect(){let{height:e=0,offsetTop:t=0}=n.visualViewport||{},i={top:0,left:0,right:n.innerWidth,bottom:n.innerHeight,width:n.innerWidth,height:e+t||n.innerHeight,x:0,y:0};return ft(we({},i),{toJSON:()=>JSON.stringify(i)})}}});function oI(n,e="tui-hints"){return!!RU(n)?.some(t=>!t.closest(e))}var Tre=300;function $h(n=D(dl),e){return{value:"",params:{duration:sI(n),easing:e}}}function sI(n){return n&&Tre/n}var hx=new Ae("");function Gg(n={}){return D(hx,n)}var fl=class{constructor(e,t){this.component=e,this.i=t}createInjector(e,t){return Lr.create({parent:this.i||e,providers:[{provide:hx,useValue:t}]})}},jg=class{constructor(e){this.$implicit=e}get polymorpheusOutlet(){return this.$implicit}};function Dre(n){return Object(n)!==n}var lI=(()=>{class n{constructor(t=D(xi,{self:!0}),i=D(ti)){this.template=t,this.cdr=i,this.polymorpheus=""}static ngTemplateContextGuard(t,i){return!0}check(){this.cdr.markForCheck()}static{this.\u0275fac=function(i){return new(i||n)(ce(xi),ce(ti))}}static{this.\u0275dir=Xe({type:n,selectors:[["ng-template","polymorpheus",""]],inputs:{polymorpheus:"polymorpheus"},exportAs:["polymorpheus"]})}}return n})(),pc=(()=>{class n{constructor(){this.vcr=D(Zr),this.i=D(ts),this.t=D(xi),this.content=""}static ngTemplateContextGuard(t,i){return!0}ngOnChanges({content:t}){let i=this.getContext();if(this.c?.injector.get(ti).markForCheck(),!t)return;this.vcr.clear();let r=i&&new Proxy(jB(i),{get:(o,s)=>jB(this.getContext())?.[s]});zB(this.content)?this.process(this.content,r):(i instanceof jg&&i.$implicit)!=null&&this.vcr.createEmbeddedView(this.template,r,{injector:this.i})}ngDoCheck(){aI(this.content)&&this.content.check()}get template(){return aI(this.content)?this.content.template:this.content instanceof xi?this.content:this.t}getContext(){return Ire(this.content)||zB(this.content)?this.context:new jg(typeof this.content=="function"?this.content(this.context??{}):this.content)}process(t,i){let r=t.createInjector(this.i,i);this.c=this.vcr.createComponent(t.component,{injector:r})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","polymorpheusOutlet",""]],inputs:{content:[0,"polymorpheusOutlet","content"],context:[0,"polymorpheusOutletContext","context"]},features:[Ni]})}}return n})();function aI(n){return n instanceof lI}function zB(n){return n instanceof fl}function Ire(n){return aI(n)||n instanceof xi}function jB(n){return n&&Dre(n)?new jg(n):n}var Are=["viewContainer"],cI=class{};var uI=class extends cI{constructor(){super(...arguments),this.fromControlValue=Ri,this.toControlValue=Ri}},WIe=new uI;var px=(()=>{class n{constructor(){this.injector=D(ts),this.nothing=D(qh).attach(this)}addComponentChild(t){let i=t.createInjector(this.injector),r=this.vcr.createComponent(t.component,{injector:i});return r.changeDetectorRef.detectChanges(),r}addTemplateChild(t,i){return this.vcr.createEmbeddedView(t,i)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,viewQuery:function(i,r){if(i&1&&Fi(Are,5,Zr),i&2){let o;mi(o=gi())&&(r.vcr=o.first)}},standalone:!1})}}return n})(),qh=(()=>{class n{attach(t){this.host=t}add(t){return this.safeHost.addComponentChild(t)}remove({hostView:t}){this.removeTemplate(t)}addTemplate(t,i){return this.safeHost.addTemplateChild(t,i)}removeTemplate(t){t.destroyed||t.destroy()}get safeHost(){if(!this.host)throw new dI;return this.host}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})();function mx(n){return wa(qh,n)}var dI=class extends Error{constructor(){super("")}};var Wg=(()=>{class n{constructor(){this.control=D(ac,{self:!0,optional:!0}),this.active$=D(PB),this.zone=D(Mn),this.el=zn(),this.tuiActiveZoneParent=null,this.subActiveZones=[],this.directParentActiveZone=D(n,{skipSelf:!0,optional:!0}),this.tuiActiveZoneChange=this.active$.pipe(Le(t=>!!t&&this.contains(t)),Vi(!1),Sr(),Cy(1),Qn(t=>{!t&&typeof this.control?.valueAccessor.onTouched=="function"&&this.control.valueAccessor.onTouched()}),lc(this.zone),uo()),this.directParentActiveZone?.addSubActiveZone(this)}set tuiActiveZoneParentSetter(t){this.setZone(t)}ngOnDestroy(){this.directParentActiveZone?.removeSubActiveZone(this),this.tuiActiveZoneParent?.removeSubActiveZone(this)}contains(t){return this.el.contains(t)||this.subActiveZones.some((i,r,o)=>o.indexOf(i)===r&&i.contains(t))}setZone(t){this.tuiActiveZoneParent?.removeSubActiveZone(this),t?.addSubActiveZone(this),this.tuiActiveZoneParent=t}addSubActiveZone(t){this.subActiveZones=[...this.subActiveZones,t]}removeSubActiveZone(t){this.subActiveZones=wU(this.subActiveZones,this.subActiveZones.indexOf(t))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiActiveZone","",5,"ng-container"],["","tuiActiveZoneChange","",5,"ng-container"],["","tuiActiveZoneParent","",5,"ng-container"]],hostBindings:function(i,r){i&1&&Me("mousedown.zoneless",function(){return 0},!1,Gi)},inputs:{tuiActiveZoneParentSetter:[0,"tuiActiveZoneParent","tuiActiveZoneParentSetter"]},outputs:{tuiActiveZoneChange:"tuiActiveZoneChange"},exportAs:["tuiActiveZone"]})}}return Ll([ll],n.prototype,"setZone",null),n})();var gx=class{},mc=class extends gx{},hl=class extends gx{};function GB(n,e,t){return{provide:n,deps:[[new eh,new sd,n],t],useFactory:$g(e)}}function $g(n){return(e,t)=>e?.find?.(i=>i!==t&&i.type===n)||t}function yx(n,e){return GB(mc,n,e)}function _x(n,e){return GB(hl,n,e)}function qg(n){return wa(hl,n,!0)}var vx=class{};function wx(n){return wa(vx,n,!0)}var Rd=class extends yt{};function xx(n){return wa(Rd,n,!0)}var bx=(()=>{class n{constructor(){this.destroyRef=D(Er),this.drivers=D(Rd,{self:!0,optional:!0})||[],this.vehicles=D(vx,{self:!0,optional:!0})}ngAfterViewInit(){let t=this.vehicles?.find(({type:i})=>i===this.type);Jn(...this.drivers.filter(({type:i})=>i===this.type)).pipe(Sr(),Dr(this.destroyRef)).subscribe(i=>{t?.toggle(i)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,standalone:!1})}}return n})();function fI(n){return!!n&&(Pre(n)||fI(n.parentElement))}function Pre(n){return n.ownerDocument.defaultView?.getComputedStyle(n).getPropertyValue("position")==="fixed"}function Ore(n,e){n&1&&Qi(0)}function Nre(n,e){if(n&1){let t=Rt();P(0,"div",5),Me("mousedown.capture.prevent",function(){return He(t),ze(0)}),me(1,"div",6),O()}if(n&2){let t=ve().ngIf,i=ve(2);Ht("t-bar_has-horizontal",t[1]),q("@tuiFadeIn",i.options)}}function Fre(n,e){if(n&1){let t=Rt();P(0,"div",7),Me("mousedown.capture.prevent",function(){return He(t),ze(0)}),me(1,"div",8),O()}if(n&2){let t=ve().ngIf,i=ve(2);Ht("t-bar_has-vertical",t[0]),q("@tuiFadeIn",i.options)}}function Lre(n,e){if(n&1&&(Ja(0),Oe(1,Nre,2,3,"div",3)(2,Fre,2,3,"div",4),Qa()),n&2){let t=e.ngIf;W(),q("ngIf",t[0]),W(),q("ngIf",t[1])}}function kre(n,e){if(n&1&&(Oe(0,Lre,3,2,"ng-container",2),el(1,"async")),n&2){let t=ve();q("ngIf",Jl(1,1,t.refresh$))}}var Ure=["*"];function Bre(n,e){if(n&1&&me(0,"tui-scroll-controls",2),n&2){let t=ve();Ht("t-hover-mode",t.options.mode==="hover")}}var WB=(()=>{class n extends yt{constructor(){super(t=>this.scroll$.subscribe(t)),this.el=zn(),this.element=D(Gh).nativeElement,this.scroll$=Jn(Jt(this.el.parentElement,"mousedown").pipe(rn(({target:t})=>t!==this.el),Le(t=>this.getScrolled(t,.5,.5))),Jt(this.el,"mousedown").pipe(Nh(),Vn(t=>{let{ownerDocument:i}=this.el,r=this.el.getBoundingClientRect(),o=Vre(t,r),s=Hre(t,r);return Jt(i,"mousemove").pipe(Le(a=>this.getScrolled(a,o,s)),Oi(Jt(i,"mouseup")))})))}getScrolled({clientY:t,clientX:i},r,o){let{offsetHeight:s,offsetWidth:a}=this.el,{top:l,left:u,width:f,height:h}=this.el.parentElement.getBoundingClientRect(),p=this.element.scrollHeight-h,g=this.element.scrollWidth-f,v=(t-l-s*r)/(h-s),x=(i-u-a*o)/(f-a);return[p*v,g*x]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})();function Vre({clientY:n},{top:e,height:t}){return(n-e)/t}function Hre({clientX:n},{left:e,width:t}){return(n-e)/t}var Mx=24,zre=(()=>{class n{constructor(){this.el=D(Gh).nativeElement,this.style=zn().style,this.scrollSub=D(WB).pipe(Dr()).subscribe(([t,i])=>{this.el.style.scrollBehavior="auto",this.tuiScrollbar==="horizontal"?this.el.scrollLeft=i:this.el.scrollTop=t,this.el.style.scrollBehavior=""}),this.styleSub=Jn(D(Og).pipe(Zc(100,cc())),bU(this.el)).pipe(Nh(),Dr()).subscribe(()=>{let t={scrollTop:this.el.scrollTop,scrollHeight:this.el.scrollHeight,clientHeight:this.el.clientHeight,scrollLeft:this.el.scrollLeft,scrollWidth:this.el.scrollWidth,clientWidth:this.el.clientWidth},i=`${this.getThumb(t)*100}%`,r=`${this.getView(t)*100}%`;this.tuiScrollbar==="vertical"?(this.style.top=i,this.style.height=r):(this.style.left=i,this.style.width=r)}),this.tuiScrollbar="vertical"}getScrolled(t){return this.tuiScrollbar==="vertical"?t.scrollTop/(t.scrollHeight-t.clientHeight):t.scrollLeft/(t.scrollWidth-t.clientWidth)}getCompensation(t){return t.clientHeight*t.clientHeight/t.scrollHeight>Mx&&this.tuiScrollbar==="vertical"||t.clientWidth*t.clientWidth/t.scrollWidth>Mx&&this.tuiScrollbar==="horizontal"?0:this.tuiScrollbar==="vertical"?Mx/t.clientHeight:Mx/t.clientWidth}getThumb(t){let i=this.getCompensation(t)||this.getView(t);return this.getScrolled(t)*(1-i)}getView(t){return this.tuiScrollbar==="vertical"?Math.ceil(t.clientHeight/t.scrollHeight*100)/100:Math.ceil(t.clientWidth/t.scrollWidth*100)/100}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiScrollbar",""]],inputs:{tuiScrollbar:"tuiScrollbar"},features:[un([WB])]})}}return n})(),jre={mode:"always"},[Cx,DAe]=Hw(jre),Xg=(()=>{class n{constructor(){this.scrollRef=D(Gh).nativeElement,this.nativeScrollbar=D(Cx).mode==="native",this.options=$h(D(dl)),this.refresh$=D(Og).pipe(Zc(300,cc()),Le(()=>this.scrollbars),Vi([!1,!1]),Sr((t,i)=>t[0]===i[0]&&t[1]===i[1]),lc())}get scrollbars(){let{clientHeight:t,scrollHeight:i,clientWidth:r,scrollWidth:o}=this.scrollRef;return[Math.ceil(t/i*100)<100,Math.ceil(r/o*100)<100]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-scroll-controls"]],decls:3,vars:2,consts:[["custom",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],["class","t-bar t-bar_vertical",3,"t-bar_has-horizontal","mousedown.capture.prevent",4,"ngIf"],["class","t-bar t-bar_horizontal",3,"t-bar_has-vertical","mousedown.capture.prevent",4,"ngIf"],[1,"t-bar","t-bar_vertical",3,"mousedown.capture.prevent"],["tuiScrollbar","vertical",1,"t-thumb"],[1,"t-bar","t-bar_horizontal",3,"mousedown.capture.prevent"],["tuiScrollbar","horizontal",1,"t-thumb"]],template:function(i,r){if(i&1&&Oe(0,Ore,1,0,"ng-container",1)(1,kre,2,3,"ng-template",null,0,Kr),i&2){let o=Ur(2);q("ngIf",r.nativeScrollbar)("ngIfElse",o)}},dependencies:[ou,In,zre],styles:["[_nghost-%COMP%]{position:sticky;top:0;left:0;z-index:1;min-inline-size:calc(100% - 1px);min-block-size:calc(100% - 1px);max-inline-size:calc(100% - 1px);max-block-size:calc(100% - 1px);float:inline-start;margin-inline-end:calc(-100% + 1px);pointer-events:none}.t-bar[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;pointer-events:auto}.t-bar_vertical[_ngcontent-%COMP%]{top:0;inline-size:.875rem}.t-bar_horizontal[_ngcontent-%COMP%]{left:0;block-size:.875rem}.t-bar_has-horizontal[_ngcontent-%COMP%]{bottom:.5rem}.t-bar_has-vertical[_ngcontent-%COMP%]{right:.5rem}.t-thumb[_ngcontent-%COMP%]{transition-property:all;transition-duration:.15s;transition-timing-function:ease-in-out;position:absolute;border-radius:6.25rem;border:.25rem solid transparent;cursor:pointer;pointer-events:auto;-webkit-user-select:none;user-select:none;background:currentColor;background-clip:content-box;box-sizing:border-box;transition-property:width,height,opacity;opacity:.2}.t-thumb[_ngcontent-%COMP%]:hover{opacity:.24}.t-thumb[_ngcontent-%COMP%]:active{opacity:.48}.t-bar_vertical[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]{right:0;inline-size:.75rem;min-block-size:1.25rem}.t-bar_vertical[_ngcontent-%COMP%]:hover   .t-thumb[_ngcontent-%COMP%], .t-bar_vertical[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]:active{inline-size:.875rem}.t-bar_horizontal[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]{bottom:0;block-size:.75rem;min-inline-size:1.25rem}.t-bar_horizontal[_ngcontent-%COMP%]:hover   .t-thumb[_ngcontent-%COMP%], .t-bar_horizontal[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]:active{block-size:.875rem}"],data:{animation:[Lh]},changeDetection:0})}}return n})();var $B=(()=>{class n{constructor(){this.el=zn(),this.options=D(Cx),this.isIOS=D(cx),this.browserScrollRef=new $t(this.el),this.hidden=this.options.mode==="hidden"}get delegated(){return this.scrollRef!==this.el||this.options.mode==="native"}get scrollRef(){return this.browserScrollRef.nativeElement}set scrollRef(t){this.browserScrollRef.nativeElement=t}scrollIntoView(t){if(this.delegated)return;let{offsetHeight:i,offsetWidth:r}=t,{offsetTop:o,offsetLeft:s}=PU(this.scrollRef,t),a=o+i/2-this.scrollRef.clientHeight/2,l=s+r/2-this.scrollRef.clientWidth/2;this.scrollRef.scrollTo?.(l,a)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-scrollbar"]],hostVars:2,hostBindings:function(i,r){i&1&&Me("tui-scrollable.stop",function(s){return r.scrollRef=s.detail})("tui-scroll-into-view.stop",function(s){return r.scrollIntoView(s.detail)}),i&2&&Ht("_native-hidden",r.options.mode!=="native"&&(!r.isIOS||r.hidden))},inputs:{hidden:"hidden"},features:[un([{provide:Gh,useFactory:()=>D(n).browserScrollRef}])],ngContentSelectors:Ure,decls:3,vars:3,consts:[["class","t-bars",3,"t-hover-mode",4,"ngIf"],[1,"t-content"],[1,"t-bars"]],template:function(i,r){i&1&&(iu(),Oe(0,Bre,1,2,"tui-scroll-controls",0),P(1,"div",1),is(2),O()),i&2&&(q("ngIf",!r.hidden&&!r.isIOS&&r.options.mode!=="native"),W(),Ht("t-content_delegated",r.delegated))},dependencies:[In,Xg],styles:["[_nghost-%COMP%]{position:relative;display:flex;max-block-size:100%;isolation:isolate;overflow:auto}._native-hidden[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}._native-hidden[_nghost-%COMP%]::-webkit-scrollbar, ._native-hidden[_nghost-%COMP%]::-webkit-scrollbar-thumb{display:none}[_nghost-%COMP%]   .t-hover-mode[_ngcontent-%COMP%]:not(:active){transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:0}[_nghost-%COMP%]:hover   .t-hover-mode[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:1}.t-content[_ngcontent-%COMP%]{isolation:isolate;flex:1;flex-basis:auto;inline-size:100%;block-size:-webkit-max-content;block-size:max-content}.t-content_delegated[_ngcontent-%COMP%]{block-size:100%}.t-bars[_ngcontent-%COMP%]{color:var(--tui-text-primary)}"],changeDetection:0})}}return n})();var qB=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiScrollRef",""]],features:[un([wa(Gh,$t)])]})}}return n})();var XB=(()=>{class n extends yt{constructor(){super(t=>this.stream$.subscribe(t)),this.media=D(VB),this.sorted=Object.values(this.media).sort((t,i)=>t-i),this.invert=Object.keys(this.media).reduce((t,i)=>ft(we({},t),{[this.media[i]]:i}),{}),this.stream$=D(NB).pipe(Le(({width:t})=>this.sorted.find(i=>i>t)),Le(t=>this.invert[t||this.sorted[this.sorted.length-1]||0]??null),Sr(),lc(),Hl({bufferSize:1,refCount:!0}))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Xh=(()=>{class n extends yt{constructor(){let t=D(Og),i=D(Mn);super(r=>t.pipe(Vi(null),Le(()=>this.accessor.getPosition(this.el.getBoundingClientRect(),this.el)),Nh(i),sa(()=>this.accessor.getPosition(cu))).subscribe(r)),this.el=zn(),this.accessor=D(mc)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),Sx=(()=>{class n{constructor(){this.isWebkit=D(OB),this.win=D(Wi)}correct(t){return this.isWebkit?[t[0]+(this.win.visualViewport?.offsetTop??0),t[1]+(this.win.visualViewport?.offsetLeft??0)]:t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hI(n){return Array.isArray(n)?n:[n]}var $re=n=>({$implicit:n});function qre(n,e){if(n&1&&(P(0,"div",2),ne(1),O()),n&2){let t=e.polymorpheusOutlet;W(),er(" ",t," ")}}var Xre=(()=>{class n extends Ln{constructor(){super(!1),this.type="dropdown"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),Yre=(()=>{class n extends bx{constructor(){super(...arguments),this.type="dropdown"}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275dir=Xe({type:n,features:[jn]})}}return n})(),Zre=tn(()=>Qre),Kre=Cn(),YB=(()=>{class n extends qh{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Jre={align:"left",direction:null,limitWidth:"auto",maxHeight:400,minHeight:80,offset:4,appearance:""},ZB=Cn(Jre);var KB=(()=>{class n extends mc{constructor(){super(...arguments),this.options=D(ZB),this.viewport=D(Wh),this.directionChange=new kn,this.type="dropdown",this.accessor=$g("dropdown")(D(hl),D(pI,{optional:!0}))}emitDirection(t){this.directionChange.emit(t)}getPosition({width:t,height:i}){!t&&!i&&(this.previous=void 0);let r=this.accessor?.getClientRect()??cu,o=this.viewport.getClientRect(),{minHeight:s,align:a,direction:l,offset:u,limitWidth:f}=this.options,h={top:o.top-u,bottom:o.bottom+u,right:o.right-u,left:o.left+u},p=this.previous||l||"bottom",g={top:r.top-2*u-h.top,bottom:h.bottom-r.bottom-2*u},v=f==="fixed"?r.width:t,x=Math.max(r.right-v,u),y=r.left+t<h.right?r.left:x,_={top:r.top-u-i,bottom:r.bottom+u,right:Math.max(h.left,x),center:r.left+r.width/2+t/2<h.right?r.left+r.width/2-t/2:x,left:Math.max(h.left,y)},T=g.top>g.bottom?"top":"bottom";return g[p]>s&&l||g[p]>i?(this.emitDirection(p),[_[p],_[a]]):(this.previous=T,this.emitDirection(T),[_[T],_[a]])}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275dir=Xe({type:n,outputs:{directionChange:"tuiDropdownDirectionChange"},features:[jn]})}}return Ll([ll],n.prototype,"emitDirection",null),n})(),pI=(()=>{class n{constructor(){this.refresh$=new Rn,this.service=D(YB),this.cdr=D(ti),this.drivers=hI(D(Xre,{self:!0,optional:!0})),this.sub=this.refresh$.pipe(Zc(0,cc()),Dr()).subscribe(()=>{this.ref()?.changeDetectorRef.detectChanges(),this.ref()?.changeDetectorRef.markForCheck()}),this.el=zn(),this.type="dropdown",this.component=new fl(D(Zre),D(ts)),this.ref=ji(null)}set tuiDropdown(t){this.content=t instanceof xi?new lI(t,this.cdr):t}get position(){return fI(this.el)?"fixed":"absolute"}ngAfterViewChecked(){this.refresh$.next()}ngOnChanges(){this.content||this.toggle(!1)}ngOnDestroy(){this.toggle(!1)}getClientRect(){return this.el.getBoundingClientRect()}toggle(t){let i=this.ref();t&&this.content&&!i?this.ref.set(this.service.add(this.component)):!t&&i&&(this.ref.set(null),this.service.remove(i)),this.drivers.forEach(r=>r?.next(t)),this.cdr.markForCheck()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiDropdown","",5,"ng-container",5,"ng-template"]],hostVars:2,hostBindings:function(i,r){i&2&&Ht("tui-dropdown-open",r.ref())},inputs:{tuiDropdown:"tuiDropdown"},exportAs:["tuiDropdown"],features:[un([qg(n),wx(n)]),Kl([Yre,{directive:KB,outputs:["tuiDropdownDirectionChange","tuiDropdownDirectionChange"]}]),Ni]})}}return n})(),Qre=(()=>{class n{constructor(){this.el=zn(),this.accessor=D(hl),this.viewport=D(Wh),this.vvs=D(Sx),this.animation=$h(D(dl)),this.options=D(ZB),this.directive=D(pI),this.context=D(Kre,{optional:!0}),this.darkMode=D(BB),this.position=this.directive.position,this.theme=rs((t=this.darkMode())=>this.directive.el.closest("[tuiTheme]")?.getAttribute("tuiTheme")),this.sub=D(Xh).pipe(Vf(()=>this.directive.el.isConnected&&!!this.directive.el.getBoundingClientRect().height),Le(t=>this.directive.position==="fixed"?this.vvs.correct(t):t),Le(([t,i])=>this.getStyles(i,t)),Dr()).subscribe({next:t=>Object.assign(this.el.style,t),complete:()=>this.close?.()}),this.close=()=>this.directive.toggle(!1)}getStyles(t,i){let{maxHeight:r,minHeight:o,offset:s,limitWidth:a}=this.options,{left:l=0,top:u=0}=this.el.offsetParent?.getBoundingClientRect()||{},f=this.accessor.getClientRect(),h=this.viewport.getClientRect(),p=f.top-h.top-2*s,g=h.top+h.height-i-s,v=i>f.bottom?g:p,x=this.el.getBoundingClientRect().right<=f.left||t>=f.right?r:Jr(v,o,r);return i-=u,t-=l,{position:this.position,top:Qr(Math.round(Math.max(i,s-u))),left:Qr(Math.round(t)),maxHeight:Qr(Math.round(x)),width:a==="fixed"?Qr(Math.round(f.width)):"",minWidth:a==="min"?Qr(Math.round(f.width)):""}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-dropdown"]],hostVars:3,hostBindings:function(i,r){i&2&&(nu("@tuiDropdownAnimation",r.animation),or("data-appearance",r.options.appearance)("tuiTheme",r.theme()))},features:[un([Xh,yx("dropdown",KB),_x("dropdown",pI)]),Kl([Wg])],decls:2,vars:4,consts:[[1,"t-scroll"],["class","t-primitive",4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-primitive"]],template:function(i,r){i&1&&(P(0,"tui-scrollbar",0),Oe(1,qre,2,1,"div",1),O()),i&2&&(W(),q("polymorpheusOutlet",r.directive.content)("polymorpheusOutletContext",gr(2,$re,r.close)))},dependencies:[pc,$B],styles:["[_nghost-%COMP%]{position:absolute;display:flex;box-shadow:var(--tui-shadow-medium);color:var(--tui-text-primary);background:var(--tui-background-elevation-3);border-radius:var(--tui-radius-m);overflow:hidden;border:1px solid var(--tui-border-normal);box-sizing:border-box;max-inline-size:calc(100% - 8px);isolation:isolate;pointer-events:auto}.ng-animating[_nghost-%COMP%]{pointer-events:none}[_nghost-%COMP%]:not([style*=top]){visibility:hidden}.t-scroll[_ngcontent-%COMP%]{flex-grow:1;max-inline-size:100%;inline-size:-webkit-max-content;inline-size:max-content;overscroll-behavior:none}.t-primitive[_ngcontent-%COMP%]{padding:1rem}"],data:{animation:[EU]}})}}return n})();var eoe={showDelay:200,hideDelay:500},ERe=Cn(eoe);var JB=(()=>{class n extends px{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-dropdowns"]],hostAttrs:[2,"position","absolute","width","100%","top","0"],features:[un([mx(YB)]),jn],decls:2,vars:0,consts:[["viewContainer",""]],template:function(i,r){i&1&&Qi(0,null,0)},encapsulation:2,changeDetection:0})}}return n})();function toe({currentTarget:n,relatedTarget:e}){return!Ng(e)||!Ng(n)||!n.contains(e)}var Yg=(()=>{class n extends yt{constructor(){super(t=>this.stream$.subscribe(t)),this.el=zn(),this.zone=D(Mn),this.stream$=Jn(Jt(this.el,"mouseenter").pipe(Le(Sd)),Jt(this.el,"mouseleave").pipe(Le(oc)),Jt(this.el,"mouseout").pipe(rn(toe),Le(oc))).pipe(Sr(),lc(this.zone))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})();function noe(n,e){n&1&&Qi(0)}var ioe=["*"];function roe(n,e){if(n&1&&me(0,"span",1),n&2){let t=e.polymorpheusOutlet;q("innerHTML",t,ah)}}var ooe=n=>({$implicit:n});function soe(n,e){n&1&&Qi(0)}function aoe(n,e){if(n&1&&(P(0,"div",1),Oe(1,soe,1,0,"ng-container",2),O()),n&2){let t=e.$implicit;q("@tuiParentAnimation",void 0)("tuiActiveZoneParent",t.activeZone||null),W(),q("polymorpheusOutlet",t.component)("polymorpheusOutletContext",gr(4,ooe,t))}}var loe=tn(()=>poe),eV=(()=>{class n extends Ln{constructor(){super([])}add(t){this.next(this.value.concat(t))}remove(t){this.value.includes(t)&&this.next(this.value.filter(i=>i!==t))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),coe=(()=>{class n extends bx{constructor(){super(...arguments),this.type="hint"}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275dir=Xe({type:n,features:[jn]})}}return n})(),QB=["bottom-left","bottom","bottom-right","top-left","top","top-right","left-top","left","left-bottom","right-top","right","right-bottom"],uoe={direction:"bottom-left",showDelay:500,hideDelay:200,appearance:"",icon:"@tui.circle-help"},mI=Cn(uoe);var gI=(()=>{class n extends Rd{constructor(){super(t=>this.stream$.subscribe(t)),this.isMobile=D(Ma),this.el=zn(),this.hovered$=D(Yg),this.options=D(mI),this.visible=!1,this.toggle$=new Rn,this.stream$=Jn(this.toggle$.pipe(Vn(t=>this.isMobile?ct(t):ct(t).pipe(Uf(t?0:this.tuiHintHideDelay))),Oi(this.hovered$),Ga()),this.hovered$.pipe(Vn(t=>this.isMobile?ct(t):ct(t).pipe(Uf(t?this.tuiHintShowDelay:this.tuiHintHideDelay))),Oi(this.toggle$),Ga())).pipe(rn(()=>this.enabled),Le(t=>t&&(this.el.hasAttribute("tuiHintPointer")||!oI(this.el))),Qn(t=>{this.visible=t})),this.parent=D(n,{optional:!0,skipSelf:!0}),this.tuiHintShowDelay=this.options.showDelay,this.tuiHintHideDelay=this.options.hideDelay,this.type="hint",this.enabled=!0}toggle(t=!this.visible){this.toggle$.next(t),this.parent?.toggle(t)}close(){this.toggle$.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,inputs:{tuiHintShowDelay:"tuiHintShowDelay",tuiHintHideDelay:"tuiHintHideDelay"},exportAs:["tuiHintHover"],features:[un([xx(n),Yg]),jn]})}}return n})(),Ex=8,Tx=24,nr=0,vr=1,tV=(()=>{class n extends mc{constructor(){super(...arguments),this.offset=D(Ma)?16:8,this.viewport=D(Wh),this.accessor=$g("hint")(D(hl),D(nV)),this.points=QB.reduce((t,i)=>ft(we({},t),{[i]:[0,0]}),{}),this.direction=D(mI).direction,this.directionChange=new kn,this.type="hint"}emitDirection(t){this.directionChange.emit(t)}getPosition(t,i){let r=i?.clientWidth??t.width,o=i?.clientHeight??t.height,s=this.accessor.getClientRect()??cu,a=s.left+s.width/2,l=s.top+s.height/2;this.points["top-left"][nr]=s.top-o-this.offset,this.points["top-left"][vr]=a-r+Tx,this.points.top[nr]=this.points["top-left"][nr],this.points.top[vr]=a-r/2,this.points["top-right"][nr]=this.points["top-left"][nr],this.points["top-right"][vr]=a-Tx,this.points["bottom-left"][nr]=s.bottom+this.offset,this.points["bottom-left"][vr]=this.points["top-left"][vr],this.points.bottom[nr]=this.points["bottom-left"][nr],this.points.bottom[vr]=this.points.top[vr],this.points["bottom-right"][nr]=this.points["bottom-left"][nr],this.points["bottom-right"][vr]=this.points["top-right"][vr],this.points["left-top"][nr]=l-o+Tx,this.points["left-top"][vr]=s.left-r-this.offset,this.points.left[nr]=l-o/2,this.points.left[vr]=this.points["left-top"][vr],this.points["left-bottom"][nr]=l-Tx,this.points["left-bottom"][vr]=this.points["left-top"][vr],this.points["right-top"][nr]=this.points["left-top"][nr],this.points["right-top"][vr]=s.right+this.offset,this.points.right[nr]=this.points.left[nr],this.points.right[vr]=this.points["right-top"][vr],this.points["right-bottom"][nr]=this.points["left-bottom"][nr],this.points["right-bottom"][vr]=this.points["right-top"][vr];let h=(Array.isArray(this.direction)?this.direction:[this.direction]).concat(QB).find(p=>this.checkPosition(this.points[p],r,o))||this.fallback;return this.emitDirection(h),this.points[h]}get fallback(){return this.points.top[nr]>this.viewport.getClientRect().bottom-this.points.bottom[nr]?"top":"bottom"}checkPosition([t,i],r,o){let s=this.viewport.getClientRect();return t>s.top+Ex&&i>s.left+Ex&&t+o<s.bottom-Ex&&i+r<s.right-Ex}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275dir=Xe({type:n,inputs:{direction:[0,"tuiHintDirection","direction"]},outputs:{directionChange:"tuiHintDirectionChange"},features:[jn]})}}return Ll([ll],n.prototype,"emitDirection",null),n})(),nV=(()=>{class n{constructor(){this.service=D(eV),this.appearance=D(mI).appearance,this.content=ji(null),this.component=D(fl),this.el=zn(),this.activeZone=D(Wg,{optional:!0}),this.type="hint"}set tuiHint(t){this.content.set(t),t||this.toggle(!1)}ngOnDestroy(){this.toggle(!1)}getClientRect(){return this.el.getBoundingClientRect()}toggle(t){t&&this.content()?this.service.add(this):this.service.remove(this)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiHint","",5,"ng-container",5,"ng-template"]],inputs:{context:[0,"tuiHintContext","context"],appearance:[0,"tuiHintAppearance","appearance"],tuiHint:"tuiHint"},features:[un([qg(n),wx(n),{provide:fl,deps:[loe,ts],useClass:fl}]),Kl([coe,{directive:gI,inputs:["tuiHintHideDelay","tuiHintHideDelay","tuiHintShowDelay","tuiHintShowDelay"]},{directive:tV,inputs:["tuiHintDirection","tuiHintDirection"],outputs:["tuiHintDirectionChange","tuiHintDirectionChange"]}])]})}}return n})(),doe=(()=>{class n extends gI{constructor(){super(...arguments),this.currentRect=cu}getClientRect(){return this.currentRect}onMove({clientX:t,clientY:i}){this.currentRect=xD(t,i)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiHint","","tuiHintPointer",""]],hostBindings:function(i,r){i&1&&Me("mousemove.zoneless",function(s){return r.onMove(s)})},features:[un([qg(n),xx(n)]),jn]})}}return n})(),foe=(()=>{class n{constructor(){this.context=Gg()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["ng-component"]],hostVars:1,hostBindings:function(i,r){i&2&&nu("@tuiParentAnimation",void 0)},decls:1,vars:1,consts:[[4,"polymorpheusOutlet"]],template:function(i,r){i&1&&Oe(0,noe,1,0,"ng-container",0),i&2&&q("polymorpheusOutlet",r.context.$implicit.content())},dependencies:[pc],encapsulation:2,data:{animation:[Pg]},changeDetection:0})}}return n})();var hoe=[Xh,Yg,yx("hint",tV),_x("hint",nV)],Dx=8,poe=(()=>{class n{constructor(){this.el=zn(),this.hover=D(gI),this.vvs=D(Sx),this.viewport=D(Wh),this.desktop={value:"",params:{end:1,start:1}},this.options=$h(D(dl),"cubic-bezier(0.35, 1.3, 0.25, 1)"),this.pointer=D(doe,{optional:!0}),this.accessor=D(hl),this.hint=Gg().$implicit,this.isMobile=D(Ma),this.content=this.hint.component.component===foe?ji(""):this.hint.content,this.appearance=this.hint.appearance||this.hint.el.closest("[tuiTheme]")?.getAttribute("tuiTheme"),D(Xh).pipe(Vf(()=>this.hint.el.isConnected),Le(t=>this.vvs.correct(t)),Dr()).subscribe({next:([t,i])=>this.update(t,i),complete:()=>this.hover.close()}),D(Yg).pipe(Dr()).subscribe(t=>this.hover.toggle(t))}onClick(t){(!t.closest(this.el.tagName)&&!this.hint.el.contains(t)||oI(this.hint.el))&&this.hover.toggle(!1)}apply(t,i,r,o){this.el.style.top=t,this.el.style.left=i,this.el.style.setProperty("--t-top",`${r}%`),this.el.style.setProperty("--t-left",`${o}%`),this.el.style.setProperty("--t-rotate",!o||Math.ceil(o)===100?"90deg":"0deg")}update(t,i){let{clientHeight:r,clientWidth:o}=this.el,s=this.accessor.getClientRect();if(s===cu||!r||!o)return;let a=this.viewport.getClientRect(),l=Jr(Math.max(Dx,i),a.left+Dx,Math.max(Dx,a.width+a.left-o-Dx)),[u,f]=this.vvs.correct([s.top+s.height/2-t,s.left+s.width/2-l]);this.apply(Qr(Math.round(t)),Qr(Math.round(l)),Math.round(Jr(u,0,r)/r*100),Math.round(Jr(f,0,o)/o*100))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-hint"]],hostVars:8,hostBindings:function(i,r){i&1&&Me("click",function(s){return r.onClick(s.target)},!1,Gi),i&2&&(nu("@tuiScaleIn",r.isMobile?r.options:r.desktop)("@tuiFadeIn",r.options),or("data-appearance",r.appearance)("tuiTheme",r.appearance==="dark"?"light":null),Ht("_untouchable",r.pointer)("_mobile",r.isMobile))},features:[un(hoe)],ngContentSelectors:ioe,decls:2,vars:2,consts:[[3,"innerHTML",4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerHTML"]],template:function(i,r){i&1&&(iu(),is(0),Oe(1,roe,1,1,"span",0)),i&2&&(W(),q("polymorpheusOutlet",r.content())("polymorpheusOutletContext",r.hint.context))},dependencies:[pc],styles:[`[_nghost-%COMP%]{position:absolute;max-inline-size:min(18rem,calc(100% - 1rem));padding:.75rem 1rem;background:var(--tui-background-accent-1);border-radius:var(--tui-radius-l);color:var(--tui-text-primary-on-accent-1);box-sizing:border-box;font:var(--tui-font-text-s);white-space:pre-line;overflow-wrap:break-word;transform-origin:var(--t-left) var(--t-top);--tui-background-elevation-2: var(--tui-background-elevation-3)}[_nghost-%COMP%]:before{content:"";position:absolute;top:var(--t-top);left:var(--t-left);inline-size:.75rem;block-size:.5rem;background:inherit;-webkit-mask-image:url('data:image/svg+xml,<svg viewBox="0 0 12 8" xmlns="http://www.w3.org/2000/svg"><path d="M3.61336 1.69607L2.44882 2.96493C1.84795 3.61964 0.949361 3.99951 0.00053941 4C0.000359608 4 0.000179805 4 0 4C0.000179863 4 0.000359764 4 0.000539623 4C0.949362 4.00049 1.84795 4.38036 2.44882 5.03506L3.61336 6.30394C4.55981 7.33517 5.03303 7.85079 5.63254 7.96535C5.87433 8.01155 6.12436 8.01155 6.36616 7.96535C6.96567 7.85079 7.43889 7.33517 8.38534 6.30393L9.54988 5.03507C10.1511 4.37994 11.0505 4 12 4C11.0505 4 10.1511 3.62006 9.54988 2.96493L8.38534 1.69606C7.43889 0.664826 6.96567 0.149207 6.36616 0.0346517C6.12436 -0.0115506 5.87433 -0.0115506 5.63254 0.0346517C5.03303 0.149207 4.55981 0.664827 3.61336 1.69607Z" /></svg>');mask-image:url('data:image/svg+xml,<svg viewBox="0 0 12 8" xmlns="http://www.w3.org/2000/svg"><path d="M3.61336 1.69607L2.44882 2.96493C1.84795 3.61964 0.949361 3.99951 0.00053941 4C0.000359608 4 0.000179805 4 0 4C0.000179863 4 0.000359764 4 0.000539623 4C0.949362 4.00049 1.84795 4.38036 2.44882 5.03506L3.61336 6.30394C4.55981 7.33517 5.03303 7.85079 5.63254 7.96535C5.87433 8.01155 6.12436 8.01155 6.36616 7.96535C6.96567 7.85079 7.43889 7.33517 8.38534 6.30393L9.54988 5.03507C10.1511 4.37994 11.0505 4 12 4C11.0505 4 10.1511 3.62006 9.54988 2.96493L8.38534 1.69606C7.43889 0.664826 6.96567 0.149207 6.36616 0.0346517C6.12436 -0.0115506 5.87433 -0.0115506 5.63254 0.0346517C5.03303 0.149207 4.55981 0.664827 3.61336 1.69607Z" /></svg>');transform:translate(-50%,-50%) rotate(var(--t-rotate))}._mobile[_nghost-%COMP%]{font:var(--tui-font-text-m)}._mobile[_nghost-%COMP%]:before{inline-size:1.5rem;block-size:1.125rem;-webkit-mask-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 18"><path d="M7.22854 3.81615L4.89971 6.6711C3.69732 8.14514 1.8988 9 0 9C1.8988 9 3.69732 9.85486 4.89971 11.3289L7.22854 14.1839L7.22854 14.1839C9.12123 16.5041 10.0676 17.6643 11.2665 17.922C11.75 18.026 12.25 18.026 12.7335 17.922C13.9324 17.6643 14.8788 16.5041 16.7715 14.1839L19.1003 11.3289C20.3027 9.85486 22.1012 9 24 9C22.1012 9 20.3027 8.14514 19.1003 6.6711L16.7715 3.81614C14.8788 1.49586 13.9324 0.335716 12.7335 0.0779663C12.25 -0.0259888 11.75 -0.0259888 11.2665 0.0779663C10.0676 0.335716 9.12123 1.49586 7.22854 3.81614L7.22854 3.81615Z" /></svg>');mask-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 18"><path d="M7.22854 3.81615L4.89971 6.6711C3.69732 8.14514 1.8988 9 0 9C1.8988 9 3.69732 9.85486 4.89971 11.3289L7.22854 14.1839L7.22854 14.1839C9.12123 16.5041 10.0676 17.6643 11.2665 17.922C11.75 18.026 12.25 18.026 12.7335 17.922C13.9324 17.6643 14.8788 16.5041 16.7715 14.1839L19.1003 11.3289C20.3027 9.85486 22.1012 9 24 9C22.1012 9 20.3027 8.14514 19.1003 6.6711L16.7715 3.81614C14.8788 1.49586 13.9324 0.335716 12.7335 0.0779663C12.25 -0.0259888 11.75 -0.0259888 11.2665 0.0779663C10.0676 0.335716 9.12123 1.49586 7.22854 3.81614L7.22854 3.81615Z" /></svg>')}[data-appearance=error][_nghost-%COMP%]{background:var(--tui-status-negative)}[data-appearance=dark][_nghost-%COMP%]{background:var(--tui-background-elevation-1);color:var(--tui-text-primary);filter:drop-shadow(0 0 .125rem rgba(0,0,0,.16)) drop-shadow(0 1.5rem 1rem rgba(0,0,0,.03)) drop-shadow(0 .75rem .75rem rgba(0,0,0,.04)) drop-shadow(0 .25rem .375rem rgba(0,0,0,.05))}[_nghost-%COMP%]:not([style*=top]){visibility:hidden}._untouchable[_nghost-%COMP%]{pointer-events:none}`],data:{animation:[Lh,TU]},changeDetection:0})}}return Ll([ll],n.prototype,"apply",null),n})();var iV=(()=>{class n{constructor(){this.hints$=D(eV),this.destroyRef=D(Er),this.cdr=D(ti),this.hints=[]}ngOnInit(){this.hints$.pipe(Dr(this.destroyRef)).subscribe(t=>{this.hints=t,this.cdr.detectChanges()})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-hints"]],hostAttrs:["aria-live","polite"],decls:1,vars:1,consts:[["role","tooltip",3,"tuiActiveZoneParent",4,"ngFor","ngForOf"],["role","tooltip",3,"tuiActiveZoneParent"],[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(i,r){i&1&&Oe(0,aoe,2,6,"div",0),i&2&&q("ngForOf",r.hints)},dependencies:[li,pc,Wg],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;inline-size:100%;block-size:100%;block-size:0}"],data:{animation:[Pg]}})}}return n})();var moe=typeof IntersectionObserver<"u"?IntersectionObserver:class{root=null;rootMargin="";thresholds=[];observe(){}unobserve(){}disconnect(){}takeRecords(){return[]}},goe=new Ae("[WA_INTERSECTION_ROOT]"),voe=goe,yoe="0px 0px 0px 0px",oV=yoe,vPe=new Ae("[WA_INTERSECTION_ROOT_MARGIN]",{providedIn:"root",factory:()=>oV});function _oe(){return D($t).nativeElement.getAttribute("waIntersectionRootMargin")||oV}var woe=0,sV=woe,yPe=new Ae("[WA_INTERSECTION_THRESHOLD]",{providedIn:"root",factory:()=>sV});function xoe(){return D($t).nativeElement.getAttribute("waIntersectionThreshold")?.split(",").map(parseFloat)||sV}var vI=(()=>{class n extends moe{callbacks=new Map;margin="";threshold="";constructor(){let t=D(voe,{optional:!0});super(i=>{this.callbacks.forEach((r,o)=>{let s=i.filter(({target:a})=>a===o);return s.length&&r(s,this)})},{root:t?.nativeElement,rootMargin:_oe(),threshold:xoe()})}observe(t,i=()=>{}){super.observe(t),this.callbacks.set(t,i)}unobserve(t){super.unobserve(t),this.callbacks.delete(t)}ngOnDestroy(){this.disconnect()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xe({type:n,selectors:[["","waIntersectionObserver",""]],inputs:{margin:[0,"waIntersectionRootMargin","margin"],threshold:[0,"waIntersectionThreshold","threshold"]},exportAs:["IntersectionObserver"],features:[jn]})}return n})();var rV=(()=>{class n extends yt{constructor(){let t=D($t).nativeElement,i=D(vI);return super(r=>(i.observe(t,o=>{r.next(o)}),()=>{i.unobserve(t)})),this.pipe(uo())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),aV=(()=>{class n{waIntersectionObservee=D(rV);static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xe({type:n,selectors:[["","waIntersectionObservee",""]],outputs:{waIntersectionObservee:"waIntersectionObservee"},features:[un([rV])]})}return n})();var _Pe=new Ae("[WA_INTERSECTION_OBSERVER_SUPPORT]: [INTERSECTION_OBSERVER_SUPPORT]",{providedIn:"root",factory:()=>!!D(Wi).IntersectionObserver});var Ix=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiItem",""]]})}}return n})();var lV=(()=>{class n{transform(t,i,...r){return i(t,...r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=lh({name:"tuiMapper",type:n,pure:!0})}}return n})();var cV=(()=>{class n extends yt{constructor(){let t=zn(),i=D(zt);super(r=>Jn(Jt(t,"touchstart",{passive:!0}),Jt(t,"mousedown")).pipe(Vn(()=>Jn(Jt(i,"touchmove",{passive:!0}).pipe(rn(({touches:o})=>o.length<2),Le(({touches:o})=>o[0])),Jt(i,"mousemove"))),mm(),Le(([o,s])=>{let a=(s?.clientX??0)-(o?.clientX??0),l=(s?.clientY??0)-(o?.clientY??0);return[a,l]}),Oi(Jn(Jt(i,"touchend"),Jt(i,"mouseup"))),Ga()).subscribe(r))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})(),uV=(()=>{class n{constructor(){this.tuiPan=D(cV)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},features:[un([cV])]})}}return n})();var yI=Cn({timeout:500,threshold:30}),dV=(()=>{class n extends yt{constructor(){let t=D(zt),i=zn(),{timeout:r,threshold:o}=D(yI);super(s=>Jn(Jt(i,"touchstart",{passive:!0}),Jt(t,"touchend")).pipe(mm(),rn(([a,l])=>!!a.touches.length&&a.touches[0]?.identifier===l.changedTouches[0]?.identifier),Le(([a,l])=>{let u=a.touches[0]?.clientX??0,f=a.touches[0]?.clientY??0,h=l.changedTouches[0]?.clientX??0,p=l.changedTouches[0]?.clientY??0,g=u-h,v=f-p,x=l.timeStamp-a.timeStamp;return(Math.abs(g)>o||Math.abs(v)>o)&&x<r?{direction:Coe(g,v),events:[a,l]}:null}),rn(Ig)).subscribe(s))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac})}}return n})();function Coe(n,e){return Math.abs(e)>Math.abs(n)?e>0?"top":"bottom":n>0?"left":"right"}var fV=(()=>{class n{constructor(){this.tuiSwipe=D(dV)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[un([dV])]})}}return n})();function Soe(n,e){n&1&&Qi(0)}function Eoe(n,e){if(n&1){let t=Rt();P(0,"fieldset",5),Me("waIntersectionObservee",function(r){let o=He(t).index,s=ve();return ze(r[0]&&s.onIntersection(r[0],o))}),Qi(1,6),O()}if(n&2){let t=e.$implicit,i=e.index,r=ve();P2(r.getStyle(r.itemsCount)),q("disabled",r.isDisabled(i)),W(),q("ngTemplateOutlet",t)}}var _I=(()=>{class n extends yt{constructor(){super(t=>this.output$.subscribe(t)),this.el=zn(),this.platform=D(ho),this.visible$=D(AU),this.duration$=new Ln(0),this.running$=Jn(Jt(this.el,"mouseenter").pipe(Le(oc)),Jt(this.el,"touchstart").pipe(Le(oc)),Jt(this.el,"touchend").pipe(Le(Sd)),Jt(this.el,"mouseleave").pipe(Le(Sd)),this.visible$),this.output$=hh(this.platform)?ai:kl([this.duration$,this.running$]).pipe(vD(([t])=>NS(t),t=>t.every(Boolean)))}set duration(t){this.duration$.next(Number.isNaN(t)?this.duration$.value:t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,inputs:{duration:"duration"},features:[jn]})}}return n})(),Toe=(()=>{class n{constructor(){this.tuiCarouselAutoscroll=D(_I)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}})}}return n})(),Doe=(()=>{class n{constructor(){this.el=zn(),this.tuiCarouselScroll=Jt(this.el,"wheel").pipe(rn(({deltaX:t})=>Math.abs(t)>20),Zc(500,cc()),Le(({deltaX:t})=>Math.sign(t)),Qn(()=>{this.el.scrollLeft=10}))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}})}}return n})(),hV=(()=>{class n{constructor(){this.el=zn(),this.cdr=D(ti),this.isMobile=D(Ma),this.directive=D(_I),this.translate=0,this.items=Ok,this.transitioned=!0,this.index=0,this.draggable=!1,this.itemsCount=1,this.indexChange=new kn,this.shift=new kn}set indexSetter(t){this.index=t,this.directive.duration=NaN}next(){this.items&&this.index===this.items.length-this.itemsCount||this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}get transform(){return`translateX(${100*this.x}%)`}getStyle(t){let i=`${100/t}%`;return{flexBasis:i,minWidth:i,maxWidth:i}}onTransitioned(t){this.transitioned=t,t||(this.translate=this.computedTranslate),this.onShift()}isDisabled(t){return t<this.index||t>=this.index+this.itemsCount}onIntersection({intersectionRatio:t},i){t&&t>=.5&&!this.transitioned&&this.updateIndex(this.index<i?i-this.itemsCount+1:i)}onScroll(t){this.isMobile||(t>0?this.next():this.prev())}onPan(t){if(!this.computedDraggable)return;let i=1-this.items.length/this.itemsCount;this.translate=Jr(t/this.el.clientWidth+this.translate,i,0),this.onShift()}onSwipe(t){t==="left"?this.next():t==="right"&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}onShift(){this.shift.emit(Math.abs(this.x%1+.5)*2)}get x(){return this.transitioned?this.computedTranslate:this.translate}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(t){this.index=Jr(t,0,this.items.length-1),this.indexChange.emit(this.index),this.cdr.markForCheck()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-carousel"]],contentQueries:function(i,r,o){if(i&1&&R_(o,Ix,4,xi),i&2){let s;mi(s=gi())&&(r.items=s)}},hostVars:4,hostBindings:function(i,r){i&1&&Me("touchstart",function(){return r.onTransitioned(!1)})("touchend",function(){return r.onTransitioned(!0)})("mousedown",function(){return r.onTransitioned(!1)})("mouseup.zoneless",function(){return r.onTransitioned(!0)},!1,Gi),i&2&&Ht("_transitioned",r.transitioned)("_draggable",r.draggable)},inputs:{draggable:"draggable",itemsCount:"itemsCount",indexSetter:[0,"index","indexSetter"]},outputs:{indexChange:"indexChange",shift:"shift"},features:[un([{provide:yI,useValue:{timeout:200,threshold:30}}]),Kl([{directive:_I,inputs:["duration","duration"]}])],decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionObserver","","waIntersectionThreshold","0.5",1,"t-wrapper"],[1,"t-items",3,"tuiCarouselAutoscroll","tuiPan","tuiSwipe"],["class","t-item",3,"disabled","style","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"waIntersectionObservee","disabled"],[3,"ngTemplateOutlet"]],template:function(i,r){i&1&&(Oe(0,Soe,1,0,"ng-container",0),el(1,"async"),P(2,"div",1),Me("tuiCarouselScroll",function(s){return r.onScroll(s)}),P(3,"div",2)(4,"div",3),Me("tuiCarouselAutoscroll",function(){return r.onAutoscroll()})("tuiPan",function(s){return r.onPan(s[0])})("tuiSwipe",function(s){return r.onSwipe(s.direction)}),Oe(5,Eoe,2,4,"fieldset",4),O()()()),i&2&&(q("ngIf",Jl(1,4,r.items.changes)),W(4),Gn("transform",r.transform),W(),q("ngForOf",r.items))},dependencies:[ou,li,In,Ql,Toe,Doe,uV,fV,vI,aV],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}  [tuiCarouselButtons] [tuiIconButton]{border-radius:100%}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-inline-size:100%;max-inline-size:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:sticky;left:0;right:0;min-inline-size:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;touch-action:pan-y}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{display:none}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-inline-size:1rem}'],changeDetection:0})}}return Ll([ll],n.prototype,"getStyle",null),n})();var pV=(()=>{class n{constructor(){this.doc=D(zt),this.el=zn(),this.activeElement=null,this.initialized=!1,Promise.resolve().then(()=>{this.initialized=!0,this.activeElement=bD(this.doc),this.el.focus()})}ngOnDestroy(){OU(this.doc),Promise.resolve().then(()=>{dc(this.activeElement)&&this.activeElement.focus()})}onFocusIn(t){let{firstElementChild:i}=this.el;!wD(this.el,t)&&i&&FU({initial:i,root:this.el})?.focus()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiFocusTrap",""]],hostAttrs:["tabIndex","0"],hostBindings:function(i,r){i&1&&Me("focusin.zoneless",function(s){return r.initialized&&r.onFocusIn(s.target)},!1,po)}})}}return n})();function Ioe(n,e){n&1&&Qi(0)}function Aoe(n,e){if(n&1&&(P(0,"section",2),Oe(1,Ioe,1,0,"ng-container",3),me(2,"tui-scroll-controls",4),O()),n&2){let t=e.$implicit;q("@tuiHost",void 0),or("aria-labelledby",t.id),W(),q("polymorpheusOutlet",t.component)("polymorpheusOutletContext",t)}}var Roe=Cn(new Ln([])),Poe={appearance:"",size:"m",required:!1,closeable:!0,dismissible:!0,label:"",header:"",data:void 0},AOe=Cn(ai),ROe=Cn(Poe);var POe=new Error("Required dialog was dismissed");var mV=(()=>{class n{constructor(){this.el=zn(),this.dialogs=rc(D(Roe),{initialValue:[]})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-dialogs"]],hostBindings:function(i,r){i&1&&Me("keydown.zoneless",function(){return r.el.scrollTop=r.el.scrollHeight/2})},decls:2,vars:3,consts:[[1,"t-overlay"],["aria-modal","true","role","dialog","tuiFocusTrap","","tuiScrollRef","","class","t-dialog",4,"ngFor","ngForOf"],["aria-modal","true","role","dialog","tuiFocusTrap","","tuiScrollRef","",1,"t-dialog"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-scrollbars"]],template:function(i,r){i&1&&(me(0,"div",0),Oe(1,Aoe,3,4,"section",1)),i&2&&(Ht("t-overlay_visible",r.dialogs().length),W(),q("ngForOf",r.dialogs()))},dependencies:[li,pc,pV,Xg,qB],styles:['[_nghost-%COMP%]{position:fixed;top:0;left:0;inline-size:100%;block-size:100%;scrollbar-width:none;-ms-overflow-style:none;pointer-events:none;overflow:hidden;overscroll-behavior:none;overflow-wrap:break-word;transform:translateY(var(--t-root-top))}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{display:none}[_nghost-%COMP%]:has(section){pointer-events:auto;overflow:auto}[_nghost-%COMP%]:before{content:"";display:block;block-size:1000%}.t-overlay[_ngcontent-%COMP%], .t-dialog[_ngcontent-%COMP%]{transition-property:filter;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;scrollbar-width:none;-ms-overflow-style:none;position:fixed;top:0;left:0;bottom:0;right:0;display:flex;block-size:100%;align-items:flex-start;outline:none;overflow:auto}.t-overlay[_ngcontent-%COMP%]::-webkit-scrollbar, .t-dialog[_ngcontent-%COMP%]::-webkit-scrollbar, .t-overlay[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .t-dialog[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{display:none}.t-overlay.ng-animating[_ngcontent-%COMP%], .t-dialog.ng-animating[_ngcontent-%COMP%]{overflow:clip}.t-dialog[_ngcontent-%COMP%]{position:sticky;overscroll-behavior:none;filter:brightness(.25)}.t-overlay[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;background:var(--tui-service-backdrop);-webkit-backdrop-filter:var(--tui-backdrop, none);backdrop-filter:var(--tui-backdrop, none);opacity:0;transition-timing-function:ease-in}.t-overlay_visible[_ngcontent-%COMP%]{opacity:1;transition-timing-function:ease-out}.t-dialog[_ngcontent-%COMP%]:last-child{pointer-events:auto;filter:none}tui-root:has(tui-dropdown-mobile._sheet)[_nghost-%COMP%]   .t-dialog[_ngcontent-%COMP%]:last-child, tui-root:has(tui-dropdown-mobile._sheet)   [_nghost-%COMP%]   .t-dialog[_ngcontent-%COMP%]:last-child{filter:brightness(.5)}.t-scrollbars[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;right:0;margin:0;color:#747474}'],data:{animation:[SU]}})}}return n})();var Ooe={info:"@tui.info",positive:"@tui.circle-check",negative:"@tui.circle-x",warning:"@tui.circle-alert",neutral:"@tui.info",success:"@tui.circle-check",error:"@tui.circle-x"},Noe={appearance:"info",icon:n=>Ooe[n]??"",size:"l"},[gV,LOe]=Hw(Noe);function Foe(n,e){if(n&1&&(Qi(0,3),el(1,"tuiMapper")),n&2){let t=e.$implicit,i=ve(2);q("ngComponentOutlet",t.component.component)("ngComponentOutletInjector",Y2(1,2,t,i.mapper))}}function Loe(n,e){if(n&1&&(P(0,"div",1),Oe(1,Foe,2,5,"ng-container",2),O()),n&2){let t=e.$implicit;q("@tuiParentAnimation",void 0),W(),q("ngForOf",t)}}var koe={autoClose:3e3,label:"",closeable:!0,data:void 0},QOe=tn(()=>we(we({},koe),D(gV))),e4e=tn(()=>D(Ma)?"1rem 1rem 0 auto":"2rem 3rem 0 auto"),Uoe=Cn(new Ln([])),Boe=tn(()=>kl([ct(new Map),D(Uoe)]).pipe(Le(([n,e])=>(n.forEach((t,i)=>n.set(i,[])),e.forEach(t=>{let i=t.component.component,r=n.get(i)||[];n.set(i,[...r,t])}),Array.from(n.values())))));var vV=(()=>{class n{constructor(){this.injector=D(ts),this.alerts$=D(Boe),this.trackBy=Ri,this.mapper=t=>Lr.create({providers:[{provide:hx,useValue:t}],parent:this.injector})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-alerts"]],decls:2,vars:4,consts:[["class","t-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],[1,"t-wrapper"],[3,"ngComponentOutlet","ngComponentOutletInjector",4,"ngFor","ngForOf"],[3,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(i,r){i&1&&(Oe(0,Loe,2,2,"div",0),el(1,"async")),i&2&&q("ngForOf",Jl(1,2,r.alerts$))("ngForTrackBy",r.trackBy)},dependencies:[hd,p1,li,ou,lV],styles:[`tui-alerts>.t-wrapper{position:fixed;top:0;left:0;inline-size:100%;block-size:100%;display:flex;flex-direction:column;pointer-events:none}tui-alerts>.t-wrapper>*{pointer-events:auto}
`],encapsulation:2,data:{animation:[Pg]}})}}return n})();function Voe(n,e){if(n&1){let t=Rt();P(0,"button",7),Me("click",function(){He(t);let r=ve(2).index,o=ve(2);return ze(o.changeMainImage(r))}),ne(1),O()}if(n&2){let t=ve(2).index,i=ve(2);W(),ei(i.imagesData.idMainImage===t?"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F":"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439")}}function Hoe(n,e){if(n&1&&(P(0,"div",4),me(1,"img",5),Oe(2,Voe,2,1,"button",6),O()),n&2){let t=ve(),i=t.$implicit,r=t.index,o=ve(2);Ht("active",r===o.index+1),W(),q("src",i,kr),W(),q("ngIf",o.changeModeSlider)}}function zoe(n,e){n&1&&(Ja(0),Oe(1,Hoe,3,4,"div",3),Qa())}function joe(n,e){if(n&1){let t=Rt();P(0,"tui-carousel",1),As("indexChange",function(r){He(t);let o=ve();return ga(o.index,r)||(o.index=r),ze(r)}),Oe(1,zoe,2,0,"ng-container",2),O()}if(n&2){let t=ve();q("draggable",!0)("itemsCount",t.isMobileView?1:3),Is("index",t.index),W(),q("ngForOf",t.imagesData.images)}}var Ax=(()=>{class n{index=0;isMobileView=!1;imagesData;changeModeSlider=!1;ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=768}changeMainImage(t){this.imagesData.idMainImage=t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Tt({type:n,selectors:[["app-image-slider"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,po)},inputs:{imagesData:"imagesData",changeModeSlider:"changeModeSlider"},decls:1,vars:1,consts:[[3,"draggable","itemsCount","index","indexChange",4,"ngIf"],[3,"indexChange","draggable","itemsCount","index"],[4,"ngFor","ngForOf"],["alt","","draggable","false","class","item",3,"active",4,"tuiItem"],["alt","","draggable","false",1,"item"],[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(i,r){i&1&&Oe(0,joe,2,4,"tui-carousel",0),i&2&&q("ngIf",r.imagesData)},dependencies:[In,li,Ix,hV],styles:["tui-carousel[_ngcontent-%COMP%]{width:100%;max-width:90vw}.item[_ngcontent-%COMP%]{transition:box-shadow .3s,transform .3s;margin:2rem auto;width:100%;aspect-ratio:1;border-radius:20px;background-color:#fff;display:grid;place-items:center;outline:none;border:none}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:90%;pointer-events:none}.item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{grid-area:1/1/2/2;align-self:flex-end;margin-bottom:10px;background:none;outline:none;border:none;font-family:Courier New,Courier,monospace;cursor:pointer}"]})}return n})();var yV=aS(wI());var Rx=(()=>{class n{constructor(){}el=D($t);mobileView=!1;ngOnInit(){this.mobileView&&this.el.nativeElement.addEventListener("input",this.onInput.bind(this.el.nativeElement))}onInput(t){let i=t.target;(0,yV.throttle)(()=>{i.style.height="auto",i.style.height=i.scrollHeight+"px"},250)()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xe({type:n,selectors:[["","appAutoHeight",""]],inputs:{mobileView:"mobileView"}})}return n})();var wV=aS(_V());var Px=(()=>{class n{compressImage(t){return console.log(typeof t),new Promise((i,r)=>{new wV.default(t,{quality:.6,success:o=>{i(o)},error:o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0436\u0430\u0442\u0438\u044F:",o.message),r(o)}})})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Si="http://localhost:5000/";var Zh=(()=>{class n{httpModule;baseServiceUrl=Si+"category/";constructor(t){this.httpModule=t}GETgetAllCategories(){return _n(this.httpModule.get(this.baseServiceUrl+"all"))}static \u0275fac=function(i){return new(i||n)(Ge(sr))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $i=(()=>{class n{errorSubject=new Ln("");error$=this.errorSubject.asObservable();setError(t,i){this.errorSubject.next(t),setTimeout(()=>this.clearError(),i)}clearError(){this.errorSubject.next("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Goe=["colorModule"],Woe=["shopsModule"],$oe=["additionalModule"],qoe=()=>({standalone:!0}),CI=n=>({invalid:n});function Xoe(n,e){if(n&1){let t=Rt();P(0,"button",29),Me("click",function(){He(t);let r=ve();return ze(r.removeImages())}),me(1,"img",30),O()}}function Yoe(n,e){if(n&1&&me(0,"app-image-slider",31),n&2){let t=ve();q("imagesData",t.furnitureData.colors[t.currentColorId].imagesData)("changeModeSlider",!0)}}function Zoe(n,e){if(n&1){let t=Rt();P(0,"div",32)(1,"input",33),Me("input",function(r){He(t);let o=ve();return ze(o.onInputImages(r))}),O(),me(2,"img",34),O()}}function Koe(n,e){if(n&1){let t=Rt();P(0,"button",37),Me("click",function(){let r=He(t).index,o=ve(2);return ze(o.openFurnitureVariant(r))}),O()}if(n&2){let t=e.$implicit,i=e.index;Gn("background-color",t.color),or("data-idColor",i)}}function Joe(n,e){if(n&1&&(P(0,"span",35),Oe(1,Koe,1,3,"button",36),O()),n&2){let t=ve();Gn("--total-items",t.furnitureData.colors.length.toString()),W(),q("ngForOf",t.furnitureData.colors)}}function Qoe(n,e){if(n&1){let t=Rt();P(0,"button",38),Me("click",function(){let r=He(t).index,o=ve();return ze(o.openShopsModule(r))}),P(1,"div",39),ne(2),O(),P(3,"div",40),me(4,"img",41),O()()}if(n&2){let t=e.$implicit;W(2),ei(t.cost)}}function ese(n,e){n&1&&Qi(0)}function tse(n,e){n&1&&(P(0,"span",52),ne(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 "),O())}function nse(n,e){if(n&1){let t=Rt();P(0,"form",42),Me("ngSubmit",function(){He(t);let r=ve();return ze(r.addColor())}),P(1,"button",43),Me("click",function(){He(t);let r=ve();return ze(r.closeAddModule())}),me(2,"img",44),O(),P(3,"span",45)(4,"h2",46),ne(5,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043C\u0435\u0431\u0435\u043B\u0438"),O(),P(6,"span",47)(7,"label",48),ne(8,"\u0426\u0432\u0435\u0442"),O(),me(9,"input",49),Oe(10,tse,2,0,"span",50),O(),P(11,"button",51),ne(12,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),O()()()}if(n&2){let t,i=ve();q("formGroup",i.colorForm),W(10),q("ngIf",((t=i.colorForm.get("color"))==null?null:t.invalid)&&(((t=i.colorForm.get("color"))==null?null:t.dirty)||((t=i.colorForm.get("color"))==null?null:t.touched))),W(),q("disabled",!i.colorForm.valid)}}function ise(n,e){n&1&&(P(0,"span",52),ne(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0443\u044E \u0446\u0435\u043D\u0443 "),O())}function rse(n,e){n&1&&(P(0,"span",52),ne(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 "),O())}function ose(n,e){if(n&1){let t=Rt();P(0,"button",60),Me("click",function(){He(t);let r=ve(2);return ze(r.deleteShop())}),me(1,"img",61),O()}}function sse(n,e){if(n&1){let t=Rt();P(0,"form",42),Me("ngSubmit",function(){He(t);let r=ve();return ze(r.addShop())}),P(1,"button",43),Me("click",function(){He(t);let r=ve();return ze(r.closeAddModule())}),me(2,"img",44),O(),P(3,"span",45)(4,"h2",46),ne(5,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430"),O(),P(6,"span",47)(7,"label",53),ne(8,"\u0426\u0435\u043D\u0430"),O(),me(9,"input",54),Oe(10,ise,2,0,"span",50),O(),P(11,"span",47)(12,"label",55),ne(13,"\u0421\u0441\u044B\u043B\u043A\u0430"),O(),me(14,"input",56),Oe(15,rse,2,0,"span",50),O(),P(16,"span",57)(17,"button",58),ne(18,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),O(),Oe(19,ose,2,0,"button",59),O()()()}if(n&2){let t,i,r=ve();q("formGroup",r.shopForm),W(10),q("ngIf",((t=r.shopForm.get("cost"))==null?null:t.invalid)&&(((t=r.shopForm.get("cost"))==null?null:t.dirty)||((t=r.shopForm.get("cost"))==null?null:t.touched))),W(5),q("ngIf",((i=r.shopForm.get("url"))==null?null:i.invalid)&&(((i=r.shopForm.get("url"))==null?null:i.dirty)||((i=r.shopForm.get("url"))==null?null:i.touched))),W(2),q("disabled",!r.shopForm.valid),W(2),q("ngIf",r.lastClickedShop!==void 0)}}function ase(n,e){if(n&1&&(P(0,"option",73),ne(1),O()),n&2){let t=e.$implicit;q("value",t.name),W(),ei(t.translateOne)}}function lse(n,e){n&1&&(P(0,"span",52),ne(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443 "),O())}function cse(n,e){n&1&&(P(0,"span",52),ne(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443 "),O())}function use(n,e){n&1&&(P(0,"span",52),ne(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443 "),O())}function dse(n,e){if(n&1){let t=Rt();P(0,"span",47)(1,"label",64),ne(2,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F"),O(),P(3,"select",65),As("ngModelChange",function(r){He(t);let o=ve(2);return ga(o.furnitureData.additionalData.category,r)||(o.furnitureData.additionalData.category=r),ze(r)}),Oe(4,ase,2,2,"option",66),O(),P(5,"label",67),ne(6,"\u0428\u0438\u0440\u0438\u043D\u0430"),O(),me(7,"input",68),Oe(8,lse,2,0,"span",50),P(9,"label",69),ne(10,"\u0414\u043B\u0438\u043D\u0430"),O(),me(11,"input",70),Oe(12,cse,2,0,"span",50),P(13,"label",71),ne(14,"\u0412\u044B\u0441\u043E\u0442\u0430"),O(),me(15,"input",72),Oe(16,use,2,0,"span",50),O()}if(n&2){let t,i,r,o,s,a,l=ve(2);W(3),q("ngModelOptions",fd(9,qoe)),Is("ngModel",l.furnitureData.additionalData.category),W(),q("ngForOf",l.categoriesArray),W(3),q("ngClass",gr(10,CI,((t=l.proportionsForm.get("width"))==null?null:t.invalid)&&(((t=l.proportionsForm.get("width"))==null?null:t.dirty)||((t=l.proportionsForm.get("width"))==null?null:t.touched)))),W(),q("ngIf",((i=l.proportionsForm.get("width"))==null?null:i.invalid)&&(((i=l.proportionsForm.get("width"))==null?null:i.dirty)||((i=l.proportionsForm.get("width"))==null?null:i.touched))),W(3),q("ngClass",gr(12,CI,((r=l.proportionsForm.get("length"))==null?null:r.invalid)&&(((r=l.proportionsForm.get("length"))==null?null:r.dirty)||((r=l.proportionsForm.get("length"))==null?null:r.touched)))),W(),q("ngIf",((o=l.proportionsForm.get("length"))==null?null:o.invalid)&&(((o=l.proportionsForm.get("length"))==null?null:o.dirty)||((o=l.proportionsForm.get("length"))==null?null:o.touched))),W(3),q("ngClass",gr(14,CI,((s=l.proportionsForm.get("height"))==null?null:s.invalid)&&(((s=l.proportionsForm.get("height"))==null?null:s.dirty)||((s=l.proportionsForm.get("height"))==null?null:s.touched)))),W(),q("ngIf",((a=l.proportionsForm.get("height"))==null?null:a.invalid)&&(((a=l.proportionsForm.get("height"))==null?null:a.dirty)||((a=l.proportionsForm.get("height"))==null?null:a.touched)))}}function fse(n,e){if(n&1){let t=Rt();P(0,"form",42),Me("ngSubmit",function(){He(t);let r=ve();return ze(r.saveAdditional())}),P(1,"button",43),Me("click",function(){He(t);let r=ve();return ze(r.closeAddModule())}),me(2,"img",44),O(),P(3,"span",45)(4,"h2",46),ne(5,"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"),O(),Oe(6,dse,17,16,"span",62),P(7,"button",63),ne(8,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),O()()()}if(n&2){let t=ve();q("formGroup",t.proportionsForm),W(6),q("ngIf",t.categoriesArray!==void 0),W(),q("disabled",t.proportionsForm.invalid)}}var Kg=(()=>{class n{elementRef;changeDetectorRef;clientImageControl;categoryService;errorHandler;constructor(t,i,r,o,s){this.elementRef=t,this.changeDetectorRef=i,this.clientImageControl=r,this.categoryService=o,this.errorHandler=s}addModule;isMobileView=!1;lastClickedShop=void 0;lastClickedColor=void 0;addModuleTemplate;addColorVisible=!1;categoriesArray=[];currentColorId=void 0;furnitureModelInput;furnitureData;colorModuleTemplate;shopsModuleTemplate;additionalModuleTemplate;ngOnInit(){this.initCategories(),this.checkViewport()}ngAfterViewInit(){this.addModule=this.elementRef.nativeElement.querySelector(".addModule"),this.furnitureModelInput=this.elementRef.nativeElement.querySelector(".furnitureModelInput")}initCategories(){return _t(this,null,function*(){try{this.categoriesArray=(yield this.categoryService.GETgetAllCategories()).categoryArray}catch{this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439",5e3)}})}onInputImages(t){return _t(this,null,function*(){let r=t.target.files;if(!(!r||this.currentColorId===void 0))try{let o=[];for(let s=0;s<r.length;s++){let a=yield this.clientImageControl.compressImage(r[s]);a&&o.push(URL.createObjectURL(a))}this.furnitureData.colors[this.currentColorId].imagesData.images=o}catch{this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439",5e3)}})}checkViewport(){this.isMobileView=window.innerWidth<=600}numberValidator(t){let i=t.value;return i!==null&&isNaN(i)?{notANumber:!0}:null}removeImages(){this.currentColorId===void 0||!this.furnitureData.colors[this.currentColorId].imagesData.images||(this.furnitureData.colors[this.currentColorId].imagesData.images.length=0)}saveAdditional(){if(this.proportionsForm.invalid){this.proportionsForm.markAllAsTouched(),this.errorHandler.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B",5e3);return}let{width:t,length:i,height:r}=this.proportionsForm.value;t&&i&&r&&(this.furnitureData.proportions={width:t,length:i,height:r}),this.closeAddModule()}openFurnitureVariant(t){let i=this.elementRef.nativeElement.querySelector(".colors"),r=i.querySelector(`[data-idColor="${t}"]`),o=i.querySelectorAll(".colorVariant"),s=[],a=[];o.forEach((l,u)=>{u>+t?a=[...a,l]:u<+t&&(s=[...s,l])}),[r,...a,...s].forEach((l,u)=>{l.style.setProperty("--index",(u+1).toString())}),setTimeout(()=>{r.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+t,r.style.setProperty("margin-right","0")},1250)}addColor(){let t=this.colorForm.value.color;if(!t){this.errorHandler.setError("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0446\u0432\u0435\u0442",5e3);return}let i={color:t,imagesData:{images:[],idMainImage:0}};this.furnitureData.colors.push(i),this.colorForm.patchValue({color:""}),this.currentColorId=this.furnitureData.colors.length-1,setTimeout(()=>{this.closeAddModule(),this.openFurnitureVariant(this.currentColorId)},0)}closeAddModule(){this.addModule.classList.add("disabled")}addShop(){if(this.lastClickedShop!==void 0){this.furnitureData.shops[this.lastClickedShop]={cost:this.shopForm.value.cost,url:this.shopForm.value.url};return}this.furnitureData.shops.push({cost:this.shopForm.value.cost,url:this.shopForm.value.url}),this.closeAddModule()}deleteShop(){this.lastClickedShop!=null&&this.lastClickedShop>=0&&this.lastClickedShop<this.furnitureData.shops.length&&(this.furnitureData.shops.splice(this.lastClickedShop,1),this.changeDetectorRef.detectChanges(),this.lastClickedShop=void 0)}openColorModule(t){t&&t.preventDefault(),this.addModuleTemplate=this.colorModuleTemplate,this.addModule.classList.remove("disabled"),setTimeout(()=>{this.elementRef.nativeElement.querySelector(".addModuleInput").focus()},10)}deleteColor(){let t=this.currentColorId;this.currentColorId=0,this.furnitureData.colors=this.furnitureData.colors.filter((i,r)=>r!==t)}openShopsModule(t){t!==void 0?(this.lastClickedShop=t,this.shopForm.patchValue({cost:this.furnitureData.shops[t].cost,url:this.furnitureData.shops[t].url})):(this.lastClickedShop=void 0,this.shopForm.patchValue({cost:null,url:""})),this.addModuleTemplate=this.shopsModuleTemplate,this.addModule.classList.remove("disabled")}openAdditional(){this.proportionsForm.patchValue({width:this.furnitureData.proportions.width,length:this.furnitureData.proportions.length,height:this.furnitureData.proportions.height}),this.furnitureData.proportions.width===null&&this.proportionsForm.get("width")?.markAsTouched(),this.furnitureData.proportions.length===null&&this.proportionsForm.get("length")?.markAsTouched(),this.furnitureData.proportions.height===null&&this.proportionsForm.get("height")?.markAsTouched(),this.addModuleTemplate=this.additionalModuleTemplate,this.addModule.classList.remove("disabled")}colorForm=new ar({color:new ni("",[an.required])});shopForm=new ar({cost:new ni(null,[an.required,this.numberValidator]),url:new ni("",[an.required])});proportionsForm=new ar({width:new ni(null,[an.required,an.min(0)]),length:new ni(null,[an.required,an.min(0)]),height:new ni(null,[an.required,an.min(0)])});static \u0275fac=function(i){return new(i||n)(ce($t),ce(ti),ce(Px),ce(Zh),ce($i))};static \u0275cmp=Tt({type:n,selectors:[["app-create-furniture"]],viewQuery:function(i,r){if(i&1&&(Fi(Goe,5),Fi(Woe,5),Fi($oe,5)),i&2){let o;mi(o=gi())&&(r.colorModuleTemplate=o.first),mi(o=gi())&&(r.shopsModuleTemplate=o.first),mi(o=gi())&&(r.additionalModuleTemplate=o.first)}},hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.ngOnInit(s)},!1,po)},inputs:{furnitureData:"furnitureData"},decls:36,vars:9,consts:[["colorModule",""],["shopsModule",""],["additionalModule",""],[1,"body",3,"click"],["placeholder","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle",3,"ngModelChange","ngModel"],[1,"imageSlideSpan"],["class","editImagesBtn",3,"click",4,"ngIf"],[3,"imagesData","changeModeSlider",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"leftPiece"],[1,"colorSlider"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0446\u0432\u0435\u0442",1,"addColorBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"],["class","colors",3,"--total-items",4,"ngIf"],["type","file","accept",".obj","id","furnitureModel","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C 3D \u043C\u043E\u0434\u0435\u043B\u044C",1,"furnitureModelInput"],[1,"informationSpan"],[1,"descriptionSpan"],[1,"descriptionTitle"],["appAutoHeight","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435...","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"descriptionInformation",3,"ngModelChange","mobileView","ngModel"],[1,"rightFunctionalSection"],[1,"shopsTitle"],[1,"shopsSpan"],[1,"shopsListSpan"],["class","shopFunctions","title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",3,"click",4,"ngFor","ngForOf"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"addShopButton",3,"click"],["title","\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",1,"additionalFunctions",3,"click"],[1,"addModule","disabled"],[4,"ngTemplateOutlet"],[1,"editImagesBtn",3,"click"],["loading","lazy","alt","edit","src","/assets/images/editIcon.svg","alt",""],[3,"imagesData","changeModeSlider"],[1,"uploadImagesDiv"],["multiple","","type","file","accept",".png,.jpeg,.jpg","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"uploadImagesInput",3,"input"],["loading","lazy","src","/assets/images/uploadIcon.png","alt","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",1,"uploadImagesIcon"],[1,"colors"],["class","colorVariant","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",3,"background-color","click",4,"ngFor","ngForOf"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",1,"colorVariant",3,"click"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"shopFunctions",3,"click"],[1,"furnitureCost"],[1,"linkShop"],["loading","lazy","src","/assets/images/linkIcon.svg","alt","\u0421\u0441\u044B\u043B\u043A\u0430"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","colorVariant",1,"inputLabel"],["formControlName","color","placeholder","\u041D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C \u0438\u043B\u0438 #hex","id","colorVariant","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 #hex \u0438\u043B\u0438 \u043D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C",1,"addModuleInput"],["class","error-message",4,"ngIf"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0446\u0432\u0435\u0442",1,"submitAddModuleFormBtn",3,"disabled"],[1,"error-message"],["for","cost",1,"inputLabel"],["formControlName","cost","id","cost","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0435\u043D\u0443",1,"addModuleInput"],["for","url",1,"inputLabel"],["formControlName","url","id","url","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"submitAddModuleFormBtn",3,"disabled"],["class","deleteItemAddModuleBtn","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",3,"click",4,"ngIf"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt","\u0423\u0434\u0430\u043B\u0438\u0442\u044C"],["class","addModuleInputSpan",4,"ngIf"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E",1,"submitAddModuleFormBtn","additionalBtn",3,"disabled"],["for","category",1,"inputLabel"],["aria-placeholder","\u0414\u0438\u0432\u0430\u043D","name","category","id","category","title","\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",1,"categorySelect",3,"ngModelChange","ngModelOptions","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","width",1,"inputLabel"],["formControlName","width","placeholder","1.7","id","width","type","number","min","0","step","0.01","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443",1,"addModuleInput",3,"ngClass"],["for","length",1,"inputLabel"],["formControlName","length","placeholder","1.5","id","length","type","number","min","0","step","0.01","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443",1,"addModuleInput",3,"ngClass"],["for","height",1,"inputLabel"],["formControlName","height","placeholder","1","id","height","type","number","min","0","step","0.01","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443",1,"addModuleInput",3,"ngClass"],[3,"value"]],template:function(i,r){if(i&1){let o=Rt();P(0,"span",3),Me("click",function(a){let l;return He(o),ze((l=r.currentColorId)!==null&&l!==void 0?l:r.openColorModule(a))}),P(1,"input",4),As("ngModelChange",function(a){return He(o),ga(r.furnitureData.name,a)||(r.furnitureData.name=a),ze(a)}),O(),P(2,"span",5),Oe(3,Xoe,2,0,"button",6)(4,Yoe,1,2,"app-image-slider",7),O(),Oe(5,Zoe,3,0,"div",8),P(6,"span",9)(7,"span",10)(8,"span",11)(9,"button",12),Me("click",function(a){return He(o),ze(r.openColorModule(a))}),me(10,"img",13),O(),Oe(11,Joe,2,3,"span",14),O(),me(12,"input",15),O(),P(13,"span",16)(14,"span",17)(15,"div",18),ne(16,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),O(),P(17,"textarea",19),As("ngModelChange",function(a){return He(o),ga(r.furnitureData.description,a)||(r.furnitureData.description=a),ze(a)}),O()(),P(18,"span",20)(19,"div",21),ne(20,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),O(),P(21,"span",22)(22,"span",23),Oe(23,Qoe,5,1,"button",24),O(),P(24,"button",25),Me("click",function(){return He(o),ze(r.openShopsModule())}),me(25,"img",13),O()(),P(26,"button",26),Me("click",function(){return He(o),ze(r.openAdditional())}),ne(27," \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F "),O()()()()(),P(28,"div",27),Oe(29,ese,1,0,"ng-container",28),O(),Oe(30,nse,13,3,"ng-template",null,0,Kr)(32,sse,20,5,"ng-template",null,1,Kr)(34,fse,9,3,"ng-template",null,2,Kr)}i&2&&(W(),Is("ngModel",r.furnitureData.name),W(2),q("ngIf",r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length>0),W(),q("ngIf",r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length>0),W(),q("ngIf",r.currentColorId===void 0||r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length<=0),W(6),q("ngIf",r.furnitureData.colors!==void 0),W(6),q("mobileView",r.isMobileView),Is("ngModel",r.furnitureData.description),W(6),q("ngForOf",r.furnitureData.shops),W(6),q("ngTemplateOutlet",r.addModuleTemplate))},dependencies:[os,Rx,Ax,li,In,Ns,al,hU,mU,Os,hD,Lw,ol,sl,pD,ya,_a,Ql,kw,Eg],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}button[_ngcontent-%COMP%]:not(.colorVariant), .furnitureModelInput[_ngcontent-%COMP%]{transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:not(.colorVariant):hover, .furnitureModelInput[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.body[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;gap:30px;margin:60px auto 0}.imageSlideSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.editImagesBtn[_ngcontent-%COMP%]{aspect-ratio:1;border:none;background:none;grid-area:1/1/2/2;align-self:start;z-index:4;justify-self:end;margin-top:-10px;margin-right:-10px}@media (max-width: 768px){.editImagesBtn[_ngcontent-%COMP%]{margin:0}}.editImagesBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;cursor:pointer}app-image-slider[_ngcontent-%COMP%]{width:100%;display:block;grid-area:1/1/2/2}.leftPiece[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0 auto;width:fit-content;background:none;border:none;outline:none;font-size:1.5vw}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:300px;aspect-ratio:1;position:relative;--radius: 60px}.colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out;box-shadow:0 0 3px #fff}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:40px;aspect-ratio:1;z-index:3;background-color:#000;border:none;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.addColorBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:75%}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;min-width:350px;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd;cursor:pointer}.categorySelect[_ngcontent-%COMP%]{background:none;border:1px solid #888888;border-radius:10px;padding:10px;background-color:#000;color:#fff;cursor:pointer}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center;font-size:28px}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:10px;padding:15px;width:100%;border:none;margin-bottom:20px;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px;min-height:300px;background:none;border:none;outline:none;resize:vertical}.rightFunctionalSection[_ngcontent-%COMP%]{width:40%;display:flex;height:100%;flex-direction:column;gap:20px}.additionalFunctions[_ngcontent-%COMP%]{width:100%;background-color:#a3b18a;border-radius:10px;border:none;color:#fff;font-size:115%;line-height:50px;height:50px;cursor:pointer}.shopsSpan[_ngcontent-%COMP%]{width:100%;height:calc(100% - 60px);display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#000;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;border:2px solid rgba(163,177,138,.3)}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#000;border-radius:0 10px 10px 0;place-content:center;display:flex;border:2px solid rgba(163,177,138,.3)}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.addShopButton[_ngcontent-%COMP%]{background-color:#000;border:2px solid rgba(163,177,138,.3);display:flex;place-content:center;border-radius:10px;height:45px;cursor:pointer}.addShopButton[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px}.functionShopsModuleBtns[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{border-radius:10px;background-color:#a3b18a;height:50px;width:20%;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:50%}.furnitureModelInput[_ngcontent-%COMP%]{color:#fff;cursor:pointer;border-radius:10px;box-shadow:0 0 5px #fff;height:30px;padding:10px;align-content:center;justify-content:center;display:flex}.furnitureModelInput[_ngcontent-%COMP%]::file-selector-button{color:transparent;border-radius:50%;height:100%;aspect-ratio:1;border:none;background-color:transparent;background-image:url(/assets/images/addIcon.svg);background-repeat:no-repeat}.furnitureModelLabel[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1200px){.furnitureTitle[_ngcontent-%COMP%]{font-size:2vw}}@media (max-width: 1000px){app-create-furniture[_ngcontent-%COMP%]{width:calc(100% - 10px)}.leftPiece[_ngcontent-%COMP%]{gap:30px}.colorSlider[_ngcontent-%COMP%]{height:150px}.furnitureModelInput[_ngcontent-%COMP%]{height:25px}.furnitureTitle[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){.rightFunctionalSection[_ngcontent-%COMP%]{gap:10px}.furnitureTitle[_ngcontent-%COMP%]{font-size:3vw}.leftPiece[_ngcontent-%COMP%]{gap:0}.shopsTitle[_ngcontent-%COMP%], .descriptionTitle[_ngcontent-%COMP%]{border-radius:10px}.body[_ngcontent-%COMP%]{max-width:400px;margin-top:30px;gap:15px}.furnitureTitle[_ngcontent-%COMP%]{font-size:1.5rem;width:90%}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.colorSlider[_ngcontent-%COMP%]{width:100%;height:200px;margin-bottom:20px}.informationSpan[_ngcontent-%COMP%]{width:100%;flex-direction:column}.descriptionSpan[_ngcontent-%COMP%], .rightFunctionalSection[_ngcontent-%COMP%]{width:100%}.addModuleFormContent[_ngcontent-%COMP%]{width:calc(85vw - 40px);min-width:none;padding:20px}.shopsSpan[_ngcontent-%COMP%]{height:auto}.furnitureModelInput[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-top:10px}}.error-message[_ngcontent-%COMP%]{color:#f44;font-size:.8rem;margin-top:5px}.invalid[_ngcontent-%COMP%]{border-color:#f44!important;box-shadow:0 0 5px #ff444480}.addModuleInput.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#f44}']})}return n})();var bV=new Ae("WindowToken",typeof window<"u"&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var MV=(()=>{class n{constructor(t,i,r){this.ngZone=t,this.document=i,this.window=r,this.copySubject=new Rn,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(t){this.config=t}copy(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});let i=this.copyFromContent(t);return i?this.pushCopyResponse({content:t,isSuccess:i}):this.pushCopyResponse({isSuccess:!1,content:t})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(t,i=!0){try{this.selectTarget(t);let r=this.copyText();return this.clearSelection(i?t:void 0,this.window),r&&this.isCopySuccessInIE11()}catch{return!1}}isCopySuccessInIE11(){let t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}copyFromContent(t,i=this.document.body){if(this.tempTextArea&&!i.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{i.appendChild(this.tempTextArea)}catch{throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;let r=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),r}destroy(t=this.document.body){this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(t,i){t&&t.focus(),i.getSelection()?.removeAllRanges()}createTempTextArea(t,i){let r=t.documentElement.getAttribute("dir")==="rtl",o;o=t.createElement("textarea"),o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[r?"right":"left"]="-9999px";let s=i.pageYOffset||t.documentElement.scrollTop;return o.style.top=s+"px",o.setAttribute("readonly",""),o}pushCopyResponse(t){this.copySubject.observers.length>0&&this.ngZone.run(()=>{this.copySubject.next(t)})}pushCopyReponse(t){this.pushCopyResponse(t)}}return n.\u0275fac=function(t){return new(t||n)(Ge(Mn),Ge(zt),Ge(bV,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var pu=(()=>{class n{httpModule;baseServiceUrl=Si+"furniture/card";constructor(t){this.httpModule=t}GETfurnitureCard(t,i){return _t(this,null,function*(){let r=new pn().set("furnitureCardId",t);i!==void 0&&(r=r.set("jwt",i));try{let o=yield _n(this.httpModule.get(this.baseServiceUrl,{params:r}));if(!o?.furnitureCard)throw new Error("Invalid response structure: furnitureCard missing");return{furnitureCard:ft(we({},o.furnitureCard),{colors:o.furnitureCard.colors.map(a=>({color:a.color,imagesData:{idMainImage:a.imagesData.idMainImage,images:a.imagesData.images.map(l=>Si+l)}}))}),authorMatched:o.authorMatched}}catch(o){throw console.error("Error in GETfurnitureCard:",o),o}})}POSTcreateFurnitureCard(t,i){let r=new pn().set("jwt",i);return _n(this.httpModule.post(this.baseServiceUrl,t,{params:r}))}PUTupdateFurnitureCard(t,i,r){let o=new pn().set("jwt",r).set("furnitureId",i);return _n(this.httpModule.put(this.baseServiceUrl,t,{params:o}))}DELETEfurnitureCard(t,i){let r=new pn().set("jwt",t).set("furnitureCardId",i);return _n(this.httpModule.delete(this.baseServiceUrl,{params:r}))}static \u0275fac=function(i){return new(i||n)(Ge(sr))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pse(n,e){if(n&1&&me(0,"app-image-slider",18),n&2){let t=ve(2);q("imagesData",t.furnitureData.colors[t.currentColorId].imagesData)}}function mse(n,e){n&1&&(P(0,"div",19),me(1,"input",20)(2,"img",21),O())}function gse(n,e){if(n&1){let t=Rt();P(0,"button",22),Me("click",function(r){He(t);let o=ve(2);return ze(o.openFurnitureVariant(r.target))}),O()}if(n&2){let t=e.$implicit,i=e.index;Gn("background-color",t.color),or("data-idColor",i)}}function vse(n,e){if(n&1){let t=Rt();P(0,"span",23)(1,"a",24),ne(2),O(),P(3,"button",25),Me("click",function(){let r=He(t).$implicit,o=ve(2);return ze(o.copyShopLink(r.url))}),me(4,"img",26),O()()}if(n&2){let t=e.$implicit;W(),q("href",t.url,kr),W(),ei(t.cost),W(),q("title","\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443: "+t.url)}}function yse(n,e){if(n&1&&(P(0,"span",1)(1,"h1",2),ne(2),O(),Oe(3,pse,1,1,"app-image-slider",3)(4,mse,3,0,"div",4),P(5,"span",5)(6,"span",6),me(7,"img",7),P(8,"span",8),Oe(9,gse,1,3,"button",9),O()(),P(10,"span",10)(11,"span",11)(12,"div",12),ne(13,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),O(),P(14,"div",13),ne(15),O()(),P(16,"span",14)(17,"div",15),ne(18,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),O(),P(19,"span",16),Oe(20,vse,5,3,"span",17),O()()()()()),n&2){let t=ve();W(2),ei(t.furnitureData.name),W(),q("ngIf",t.furnitureData.colors[t.currentColorId].imagesData),W(),q("ngIf",!t.furnitureData.colors[t.currentColorId].imagesData),W(4),Gn("--total-items",t.furnitureData.colors.length.toString()),W(),q("ngForOf",t.furnitureData.colors),W(6),ei(t.proccessDescription(t.furnitureData.description,t.furnitureData.proportions)),W(5),q("ngForOf",t.furnitureData.shops)}}var Ox=(()=>{class n{elementRef;clipboardService;furnitureCardService;errorHandler;constructor(t,i,r,o){this.elementRef=t,this.clipboardService=i,this.furnitureCardService=r,this.errorHandler=o}currentColorId=0;furnitureId;furnitureData;ngOnChanges(t){return _t(this,null,function*(){if(this.furnitureId!==void 0)try{this.furnitureData=(yield this.furnitureCardService.GETfurnitureCard(this.furnitureId)).furnitureCard}catch(i){console.log(i)}})}openFurnitureVariant(t){let i=t,r=this.elementRef.nativeElement.querySelector(".colors"),o=i.getAttribute("data-idcolor");if(!o)return;let s=r.querySelectorAll(".colorVariant"),a=[],l=[];s.forEach((u,f)=>{f>+o?l=[...l,u]:f<+o&&(a=[...a,u])}),[i,...l,...a].forEach((u,f)=>{u.style.setProperty("--index",(f+1).toString())}),setTimeout(()=>{i.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+o,i.style.setProperty("margin-right","0")},1250)}proccessDescription(t,i){return`\u0428\u0438\u0440\u0438\u043D\u0430: ${i.width}\u043C
\u0414\u043B\u0438\u043D\u0430: ${i.length}\u043C
\u0412\u044B\u0441\u043E\u0442\u0430: ${i.height}\u043C
${t}`}copyShopLink(t){this.clipboardService.copyFromContent(t)}static \u0275fac=function(i){return new(i||n)(ce($t),ce(MV),ce(pu),ce($i))};static \u0275cmp=Tt({type:n,selectors:[["app-view-furniture"]],inputs:{furnitureId:"furnitureId",furnitureData:"furnitureData"},features:[Ni],decls:1,vars:1,consts:[["class","body",4,"ngIf"],[1,"body"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle"],[3,"imagesData",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"colorSlider"],["loading","lazy","src","assets/images/paletteIcon.svg","alt","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0432\u0435\u0442","title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0432\u0435\u0442",1,"addColorBtn"],[1,"colors"],["class","colorVariant","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",3,"background-color","click",4,"ngFor","ngForOf"],[1,"informationSpan"],[1,"descriptionSpan"],["title","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",1,"descriptionTitle"],["title","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"descriptionInformation"],[1,"shopsSpan"],["title","\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",1,"shopsTitle"],[1,"shopsListSpan"],["class","shopFunctions",4,"ngFor","ngForOf"],[3,"imagesData"],[1,"uploadImagesDiv"],["type","file","accept",".png,.jpeg","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"uploadImagesInput"],["loading","lazy","src","assets/images/uploadIcon.png","alt","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",1,"uploadImagesIcon"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",1,"colorVariant",3,"click"],[1,"shopFunctions"],["title","\u0426\u0435\u043D\u0430",1,"furnitureCost",3,"href"],[1,"linkShop",3,"click","title"],["loading","lazy","src","assets/images/linkIcon.svg","alt","\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443"]],template:function(i,r){i&1&&Oe(0,yse,21,8,"span",0),i&2&&q("ngIf",r.furnitureData)},dependencies:[Ax,li,In,Ns],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;gap:30px;margin-bottom:15px;position:relative}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:200px;aspect-ratio:1;position:relative;--radius: 60px}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;box-shadow:0 0 10px #fff;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:30px;aspect-ratio:1;z-index:3;padding:5px;background-color:#000;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px;white-space:pre-line;font-size:16px}.shopsSpan[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#a3b18a;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;box-shadow:0 0 10px #fff;border:none;text-decoration:none}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#a3b18a;border-radius:0 10px 10px 0;border:none;place-content:center;display:flex;box-shadow:0 0 10px #fff;transition:all .5s ease-in-out;cursor:copy}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}@media (max-width: 1200px){.furnitureTitle[_ngcontent-%COMP%]{font-size:2vw}}@media (max-width: 1000px){app-view-furniture[_ngcontent-%COMP%]{width:calc(100% - 10px)}.colorSlider[_ngcontent-%COMP%]{height:200px}.furnitureTitle[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){.body[_ngcontent-%COMP%]{max-width:400px;margin:30px auto;gap:15px}.furnitureTitle[_ngcontent-%COMP%]{font-size:1.5rem;width:90%}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.colorSlider[_ngcontent-%COMP%]{width:100%;height:200px;margin-bottom:20px}.informationSpan[_ngcontent-%COMP%]{width:100%;flex-direction:column}.descriptionSpan[_ngcontent-%COMP%], .shopsSpan[_ngcontent-%COMP%]{width:100%}.descriptionTitle[_ngcontent-%COMP%], .shopsTitle[_ngcontent-%COMP%]{border-radius:10px}.descriptionInformation[_ngcontent-%COMP%]{padding:0 10px}}']})}return n})();var Ob="176",Du={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Iu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},hH=0,gA=1,pH=2;var vA=1,mH=2,wl=3,Ia=0,bo=1,Gs=2,Ac=0,kd=1,yA=2,_A=3,wA=4,gH=5,Mu=100,vH=101,yH=102,_H=103,wH=104,xH=200,bH=201,MH=202,CH=203,lb=204,cb=205,SH=206,EH=207,TH=208,DH=209,IH=210,AH=211,RH=212,PH=213,OH=214,Nb=0,Fb=1,Lb=2,Ud=3,kb=4,Ub=5,Bb=6,Vb=7,V0=0,NH=1,FH=2,Rc=0,LH=1,kH=2,UH=3,BH=4,VH=5,HH=6,zH=7,eA="attached",jH="detached",tA=300,Jd=301,Qd=302,Sp=303,Hb=304,H0=306,Aa=1e3,ds=1001,dp=1002,Hr=1003,zb=1004;var ef=1005;var _o=1006,Ep=1007;var Na=1008;var Fa=1009,xA=1010,bA=1011,Tp=1012,jb=1013,Au=1014,Ws=1015,Dp=1016,Gb=1017,Wb=1018,Ip=1020,MA=35902,CA=1021,SA=1022,ps=1023,fp=1026,Ap=1027,$b=1028,qb=1029,EA=1030,Xb=1031;var Yb=1033,z0=33776,j0=33777,G0=33778,W0=33779,Zb=35840,Kb=35841,Jb=35842,Qb=35843,eM=36196,tM=37492,nM=37496,iM=37808,rM=37809,oM=37810,sM=37811,aM=37812,lM=37813,cM=37814,uM=37815,dM=37816,fM=37817,hM=37818,pM=37819,mM=37820,gM=37821,$0=36492,vM=36494,yM=36495,TA=36283,_M=36284,wM=36285,xM=36286;var Bd=2300,Vd=2301,ab=2302,nA=2400,iA=2401,rA=2402,GH=2500;var DA=0,q0=1,Rp=2,WH=3200,$H=3201;var X0=0,qH=1,Pc="",On="srgb",zr="srgb-linear",d0="linear",si="srgb";var Ld=7680;var oA=519,XH=512,YH=513,ZH=514,IA=515,KH=516,JH=517,QH=518,ez=519,ub=35044;var AA="300 es",pl=2e3,f0=2001;var ml=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},to=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],CV=1234567,a0=Math.PI/180,Hd=180/Math.PI;function Vs(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(to[n&255]+to[n>>8&255]+to[n>>16&255]+to[n>>24&255]+"-"+to[e&255]+to[e>>8&255]+"-"+to[e>>16&15|64]+to[e>>24&255]+"-"+to[t&63|128]+to[t>>8&255]+"-"+to[t>>16&255]+to[t>>24&255]+to[i&255]+to[i>>8&255]+to[i>>16&255]+to[i>>24&255]).toLowerCase()}function dn(n,e,t){return Math.max(e,Math.min(t,n))}function RA(n,e){return(n%e+e)%e}function _se(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function wse(n,e,t){return n!==e?(t-n)/(e-n):0}function l0(n,e,t){return(1-t)*n+t*e}function xse(n,e,t,i){return l0(n,e,1-Math.exp(-t*i))}function bse(n,e=1){return e-Math.abs(RA(n,e*2)-e)}function Mse(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Cse(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Sse(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Ese(n,e){return n+Math.random()*(e-n)}function Tse(n){return n*(.5-Math.random())}function Dse(n){n!==void 0&&(CV=n);let e=CV+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Ise(n){return n*a0}function Ase(n){return n*Hd}function Rse(n){return(n&n-1)===0&&n!==0}function Pse(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ose(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Nse(n,e,t,i,r){let o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),u=o((e+i)/2),f=s((e+i)/2),h=o((e-i)/2),p=s((e-i)/2),g=o((i-e)/2),v=s((i-e)/2);switch(r){case"XYX":n.set(a*f,l*h,l*p,a*u);break;case"YZY":n.set(l*p,a*f,l*h,a*u);break;case"ZXZ":n.set(l*h,l*p,a*f,a*u);break;case"XZX":n.set(a*f,l*v,l*g,a*u);break;case"YXY":n.set(l*g,a*f,l*v,a*u);break;case"ZYZ":n.set(l*v,l*g,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Da(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ri(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var bi={DEG2RAD:a0,RAD2DEG:Hd,generateUUID:Vs,clamp:dn,euclideanModulo:RA,mapLinear:_se,inverseLerp:wse,lerp:l0,damp:xse,pingpong:bse,smoothstep:Mse,smootherstep:Cse,randInt:Sse,randFloat:Ese,randFloatSpread:Tse,seededRandom:Dse,degToRad:Ise,radToDeg:Ase,isPowerOfTwo:Rse,ceilPowerOfTwo:Pse,floorPowerOfTwo:Ose,setQuaternionFromProperEuler:Nse,normalize:ri,denormalize:Da},qe=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=dn(this.x,e.x,t.x),this.y=dn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=dn(this.x,e,t),this.y=dn(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(dn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Qt=class n{constructor(e,t,i,r,o,s,a,l,u){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,u)}set(e,t,i,r,o,s,a,l,u){let f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=o,f[5]=l,f[6]=i,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],u=i[1],f=i[4],h=i[7],p=i[2],g=i[5],v=i[8],x=r[0],y=r[3],_=r[6],T=r[1],M=r[4],C=r[7],H=r[2],L=r[5],k=r[8];return o[0]=s*x+a*T+l*H,o[3]=s*y+a*M+l*L,o[6]=s*_+a*C+l*k,o[1]=u*x+f*T+h*H,o[4]=u*y+f*M+h*L,o[7]=u*_+f*C+h*k,o[2]=p*x+g*T+v*H,o[5]=p*y+g*M+v*L,o[8]=p*_+g*C+v*k,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8];return t*s*f-t*a*u-i*o*f+i*a*l+r*o*u-r*s*l}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=f*s-a*u,p=a*l-f*o,g=u*o-s*l,v=t*h+i*p+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);let x=1/v;return e[0]=h*x,e[1]=(r*u-f*i)*x,e[2]=(a*i-r*s)*x,e[3]=p*x,e[4]=(f*t-r*l)*x,e[5]=(r*o-a*t)*x,e[6]=g*x,e[7]=(i*l-u*t)*x,e[8]=(s*t-i*o)*x,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){let l=Math.cos(o),u=Math.sin(o);return this.set(i*l,i*u,-i*(l*s+u*a)+s+e,-r*u,r*l,-r*(-u*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(EI.makeScale(e,t)),this}rotate(e){return this.premultiply(EI.makeRotation(-e)),this}translate(e,t){return this.premultiply(EI.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},EI=new Qt;function PA(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function hp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function tz(){let n=hp("canvas");return n.style.display="block",n}var SV={};function Y0(n){n in SV||(SV[n]=!0,console.warn(n))}function nz(n,e,t){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}}setTimeout(o,t)})}function iz(n){let e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function rz(n){let e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var EV=new Qt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),TV=new Qt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Fse(){let n={enabled:!0,workingColorSpace:zr,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===si&&(r.r=Mc(r.r),r.g=Mc(r.g),r.b=Mc(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===si&&(r.r=up(r.r),r.g=up(r.g),r.b=up(r.b))),r},fromWorkingColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},toWorkingColorSpace:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Pc?d0:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[zr]:{primaries:e,whitePoint:i,transfer:d0,toXYZ:EV,fromXYZ:TV,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:On},outputColorSpaceConfig:{drawingBufferColorSpace:On}},[On]:{primaries:e,whitePoint:i,transfer:si,toXYZ:EV,fromXYZ:TV,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:On}}}),n}var qt=Fse();function Mc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function up(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var Kh,db=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Kh===void 0&&(Kh=hp("canvas")),Kh.width=e.width,Kh.height=e.height;let r=Kh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Kh}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=hp("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Mc(o[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Mc(t[i]/255)*255):t[i]=Mc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Lse=0,pp=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Lse++}),this.uuid=Vs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(TI(r[s].image)):o.push(TI(r[s]))}else o=TI(r);i.url=o}return t||(e.images[this.uuid]=i),i}};function TI(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?db.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var kse=0,Mo=(()=>{class n extends ml{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=ds,o=ds,s=_o,a=Na,l=ps,u=Fa,f=n.DEFAULT_ANISOTROPY,h=Pc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:kse++}),this.uuid=Vs(),this.name="",this.source=new pp(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new qe(0,0),this.repeat=new qe(1,1),this.center=new qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==tA)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Aa:t.x=t.x-Math.floor(t.x);break;case ds:t.x=t.x<0?0:1;break;case dp:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Aa:t.y=t.y-Math.floor(t.y);break;case ds:t.y=t.y<0?0:1;break;case dp:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=tA,n.DEFAULT_ANISOTROPY=1,n})(),mn=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o,l=e.elements,u=l[0],f=l[4],h=l[8],p=l[1],g=l[5],v=l[9],x=l[2],y=l[6],_=l[10];if(Math.abs(f-p)<.01&&Math.abs(h-x)<.01&&Math.abs(v-y)<.01){if(Math.abs(f+p)<.1&&Math.abs(h+x)<.1&&Math.abs(v+y)<.1&&Math.abs(u+g+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let M=(u+1)/2,C=(g+1)/2,H=(_+1)/2,L=(f+p)/4,k=(h+x)/4,$=(v+y)/4;return M>C&&M>H?M<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(M),r=L/i,o=k/i):C>H?C<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(C),i=L/r,o=$/r):H<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(H),i=k/o,r=$/o),this.set(i,r,o,t),this}let T=Math.sqrt((y-v)*(y-v)+(h-x)*(h-x)+(p-f)*(p-f));return Math.abs(T)<.001&&(T=1),this.x=(y-v)/T,this.y=(h-x)/T,this.z=(p-f)/T,this.w=Math.acos((u+g+_-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=dn(this.x,e.x,t.x),this.y=dn(this.y,e.y,t.y),this.z=dn(this.z,e.z,t.z),this.w=dn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=dn(this.x,e,t),this.y=dn(this.y,e,t),this.z=dn(this.z,e,t),this.w=dn(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(dn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},fb=class extends ml{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new mn(0,0,e,t),this.scissorTest=!1,this.viewport=new mn(0,0,e,t);let r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:_o,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);let o=new Mo(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new pp(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},gl=class extends fb{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},h0=class extends Mo{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Hr,this.minFilter=Hr,this.wrapR=ds,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var hb=class extends Mo{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Hr,this.minFilter=Hr,this.wrapR=ds,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Ei=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],u=i[r+1],f=i[r+2],h=i[r+3],p=o[s+0],g=o[s+1],v=o[s+2],x=o[s+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=g,e[t+2]=v,e[t+3]=x;return}if(h!==x||l!==p||u!==g||f!==v){let y=1-a,_=l*p+u*g+f*v+h*x,T=_>=0?1:-1,M=1-_*_;if(M>Number.EPSILON){let H=Math.sqrt(M),L=Math.atan2(H,_*T);y=Math.sin(y*L)/H,a=Math.sin(a*L)/H}let C=a*T;if(l=l*y+p*C,u=u*y+g*C,f=f*y+v*C,h=h*y+x*C,y===1-a){let H=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=H,u*=H,f*=H,h*=H}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,o,s){let a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],h=o[s],p=o[s+1],g=o[s+2],v=o[s+3];return e[t]=a*v+f*h+l*g-u*p,e[t+1]=l*v+f*p+u*h-a*g,e[t+2]=u*v+f*g+a*p-l*h,e[t+3]=f*v-a*h-l*p-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),h=a(o/2),p=l(i/2),g=l(r/2),v=l(o/2);switch(s){case"XYZ":this._x=p*f*h+u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h-p*g*v;break;case"YXZ":this._x=p*f*h+u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h+p*g*v;break;case"ZXY":this._x=p*f*h-u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h-p*g*v;break;case"ZYX":this._x=p*f*h-u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h+p*g*v;break;case"YZX":this._x=p*f*h+u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h-p*g*v;break;case"XZY":this._x=p*f*h-u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],u=t[2],f=t[6],h=t[10],p=i+a+h;if(p>0){let g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-l)*g,this._y=(o-u)*g,this._z=(s-r)*g}else if(i>a&&i>h){let g=2*Math.sqrt(1+i-a-h);this._w=(f-l)/g,this._x=.25*g,this._y=(r+s)/g,this._z=(o+u)/g}else if(a>h){let g=2*Math.sqrt(1+a-i-h);this._w=(o-u)/g,this._x=(r+s)/g,this._y=.25*g,this._z=(l+f)/g}else{let g=2*Math.sqrt(1+h-i-a);this._w=(s-r)/g,this._x=(o+u)/g,this._y=(l+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(dn(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,u=t._z,f=t._w;return this._x=i*f+s*a+r*u-o*l,this._y=r*f+s*l+o*a-i*u,this._z=o*f+s*u+i*l-r*a,this._w=s*f-i*a-r*l-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let g=1-t;return this._w=g*s+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*o+t*this._z,this.normalize(),this}let u=Math.sqrt(l),f=Math.atan2(u,a),h=Math.sin((1-t)*f)/u,p=Math.sin(t*f)/u;return this._w=s*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=o*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},V=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(DV.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(DV.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,u=2*(s*r-a*i),f=2*(a*t-o*r),h=2*(o*i-s*t);return this.x=t+l*u+s*h-a*f,this.y=i+l*f+a*u-o*h,this.z=r+l*h+o*f-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=dn(this.x,e.x,t.x),this.y=dn(this.y,e.y,t.y),this.z=dn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=dn(this.x,e,t),this.y=dn(this.y,e,t),this.z=dn(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(dn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return DI.copy(this).projectOnVector(e),this.sub(DI)}reflect(e){return this.sub(DI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},DI=new V,DV=new Ei,wo=class{constructor(e=new V(1/0,1/0,1/0),t=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Sa.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Sa.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Sa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Sa):Sa.fromBufferAttribute(o,s),Sa.applyMatrix4(e.matrixWorld),this.expandByPoint(Sa);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Nx.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Nx.copy(i.boundingBox)),Nx.applyMatrix4(e.matrixWorld),this.union(Nx)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Sa),Sa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jg),Fx.subVectors(this.max,Jg),Jh.subVectors(e.a,Jg),Qh.subVectors(e.b,Jg),ep.subVectors(e.c,Jg),mu.subVectors(Qh,Jh),gu.subVectors(ep,Qh),Pd.subVectors(Jh,ep);let t=[0,-mu.z,mu.y,0,-gu.z,gu.y,0,-Pd.z,Pd.y,mu.z,0,-mu.x,gu.z,0,-gu.x,Pd.z,0,-Pd.x,-mu.y,mu.x,0,-gu.y,gu.x,0,-Pd.y,Pd.x,0];return!II(t,Jh,Qh,ep,Fx)||(t=[1,0,0,0,1,0,0,0,1],!II(t,Jh,Qh,ep,Fx))?!1:(Lx.crossVectors(mu,gu),t=[Lx.x,Lx.y,Lx.z],II(t,Jh,Qh,ep,Fx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Sa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Sa).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(gc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),gc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),gc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),gc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),gc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),gc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),gc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),gc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(gc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},gc=[new V,new V,new V,new V,new V,new V,new V,new V],Sa=new V,Nx=new wo,Jh=new V,Qh=new V,ep=new V,mu=new V,gu=new V,Pd=new V,Jg=new V,Fx=new V,Lx=new V,Od=new V;function II(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Od.fromArray(n,o);let a=r.x*Math.abs(Od.x)+r.y*Math.abs(Od.y)+r.z*Math.abs(Od.z),l=e.dot(Od),u=t.dot(Od),f=i.dot(Od);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}var Use=new wo,Qg=new V,AI=new V,jo=class{constructor(e=new V,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):Use.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qg.subVectors(e,this.center);let t=Qg.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Qg,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(AI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qg.copy(e.center).add(AI)),this.expandByPoint(Qg.copy(e.center).sub(AI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},vc=new V,RI=new V,kx=new V,vu=new V,PI=new V,Ux=new V,OI=new V,vl=class{constructor(e=new V,t=new V(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,vc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=vc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vc.copy(this.origin).addScaledVector(this.direction,t),vc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){RI.copy(e).add(t).multiplyScalar(.5),kx.copy(t).sub(e).normalize(),vu.copy(this.origin).sub(RI);let o=e.distanceTo(t)*.5,s=-this.direction.dot(kx),a=vu.dot(this.direction),l=-vu.dot(kx),u=vu.lengthSq(),f=Math.abs(1-s*s),h,p,g,v;if(f>0)if(h=s*l-a,p=s*a-l,v=o*f,h>=0)if(p>=-v)if(p<=v){let x=1/f;h*=x,p*=x,g=h*(h+s*p+2*a)+p*(s*h+p+2*l)+u}else p=o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;else p=-o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;else p<=-v?(h=Math.max(0,-(-s*o+a)),p=h>0?-o:Math.min(Math.max(-o,-l),o),g=-h*h+p*(p+2*l)+u):p<=v?(h=0,p=Math.min(Math.max(-o,-l),o),g=p*(p+2*l)+u):(h=Math.max(0,-(s*o+a)),p=h>0?o:Math.min(Math.max(-o,-l),o),g=-h*h+p*(p+2*l)+u);else p=s>0?-o:o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(RI).addScaledVector(kx,p),g}intersectSphere(e,t){vc.subVectors(e.center,this.origin);let i=vc.dot(this.direction),r=vc.dot(vc)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l,u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),f>=0?(o=(e.min.y-p.y)*f,s=(e.max.y-p.y)*f):(o=(e.max.y-p.y)*f,s=(e.min.y-p.y)*f),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,vc)!==null}intersectTriangle(e,t,i,r,o){PI.subVectors(t,e),Ux.subVectors(i,e),OI.crossVectors(PI,Ux);let s=this.direction.dot(OI),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;vu.subVectors(this.origin,e);let l=a*this.direction.dot(Ux.crossVectors(vu,Ux));if(l<0)return null;let u=a*this.direction.dot(PI.cross(vu));if(u<0||l+u>s)return null;let f=-a*vu.dot(OI);return f<0?null:this.at(f/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ht=class n{constructor(e,t,i,r,o,s,a,l,u,f,h,p,g,v,x,y){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,u,f,h,p,g,v,x,y)}set(e,t,i,r,o,s,a,l,u,f,h,p,g,v,x,y){let _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=o,_[5]=s,_[9]=a,_[13]=l,_[2]=u,_[6]=f,_[10]=h,_[14]=p,_[3]=g,_[7]=v,_[11]=x,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/tp.setFromMatrixColumn(e,0).length(),o=1/tp.setFromMatrixColumn(e,1).length(),s=1/tp.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(o),h=Math.sin(o);if(e.order==="XYZ"){let p=s*f,g=s*h,v=a*f,x=a*h;t[0]=l*f,t[4]=-l*h,t[8]=u,t[1]=g+v*u,t[5]=p-x*u,t[9]=-a*l,t[2]=x-p*u,t[6]=v+g*u,t[10]=s*l}else if(e.order==="YXZ"){let p=l*f,g=l*h,v=u*f,x=u*h;t[0]=p+x*a,t[4]=v*a-g,t[8]=s*u,t[1]=s*h,t[5]=s*f,t[9]=-a,t[2]=g*a-v,t[6]=x+p*a,t[10]=s*l}else if(e.order==="ZXY"){let p=l*f,g=l*h,v=u*f,x=u*h;t[0]=p-x*a,t[4]=-s*h,t[8]=v+g*a,t[1]=g+v*a,t[5]=s*f,t[9]=x-p*a,t[2]=-s*u,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){let p=s*f,g=s*h,v=a*f,x=a*h;t[0]=l*f,t[4]=v*u-g,t[8]=p*u+x,t[1]=l*h,t[5]=x*u+p,t[9]=g*u-v,t[2]=-u,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){let p=s*l,g=s*u,v=a*l,x=a*u;t[0]=l*f,t[4]=x-p*h,t[8]=v*h+g,t[1]=h,t[5]=s*f,t[9]=-a*f,t[2]=-u*f,t[6]=g*h+v,t[10]=p-x*h}else if(e.order==="XZY"){let p=s*l,g=s*u,v=a*l,x=a*u;t[0]=l*f,t[4]=-h,t[8]=u*f,t[1]=p*h+x,t[5]=s*f,t[9]=g*h-v,t[2]=v*h-g,t[6]=a*f,t[10]=x*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Bse,e,Vse)}lookAt(e,t,i){let r=this.elements;return cs.subVectors(e,t),cs.lengthSq()===0&&(cs.z=1),cs.normalize(),yu.crossVectors(i,cs),yu.lengthSq()===0&&(Math.abs(i.z)===1?cs.x+=1e-4:cs.z+=1e-4,cs.normalize(),yu.crossVectors(i,cs)),yu.normalize(),Bx.crossVectors(cs,yu),r[0]=yu.x,r[4]=Bx.x,r[8]=cs.x,r[1]=yu.y,r[5]=Bx.y,r[9]=cs.y,r[2]=yu.z,r[6]=Bx.z,r[10]=cs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],u=i[12],f=i[1],h=i[5],p=i[9],g=i[13],v=i[2],x=i[6],y=i[10],_=i[14],T=i[3],M=i[7],C=i[11],H=i[15],L=r[0],k=r[4],$=r[8],N=r[12],A=r[1],j=r[5],he=r[9],ae=r[13],Re=r[2],Se=r[6],Y=r[10],ie=r[14],X=r[3],_e=r[7],Ve=r[11],rt=r[15];return o[0]=s*L+a*A+l*Re+u*X,o[4]=s*k+a*j+l*Se+u*_e,o[8]=s*$+a*he+l*Y+u*Ve,o[12]=s*N+a*ae+l*ie+u*rt,o[1]=f*L+h*A+p*Re+g*X,o[5]=f*k+h*j+p*Se+g*_e,o[9]=f*$+h*he+p*Y+g*Ve,o[13]=f*N+h*ae+p*ie+g*rt,o[2]=v*L+x*A+y*Re+_*X,o[6]=v*k+x*j+y*Se+_*_e,o[10]=v*$+x*he+y*Y+_*Ve,o[14]=v*N+x*ae+y*ie+_*rt,o[3]=T*L+M*A+C*Re+H*X,o[7]=T*k+M*j+C*Se+H*_e,o[11]=T*$+M*he+C*Y+H*Ve,o[15]=T*N+M*ae+C*ie+H*rt,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],u=e[13],f=e[2],h=e[6],p=e[10],g=e[14],v=e[3],x=e[7],y=e[11],_=e[15];return v*(+o*l*h-r*u*h-o*a*p+i*u*p+r*a*g-i*l*g)+x*(+t*l*g-t*u*p+o*s*p-r*s*g+r*u*f-o*l*f)+y*(+t*u*h-t*a*g-o*s*h+i*s*g+o*a*f-i*u*f)+_*(-r*a*f-t*l*h+t*a*p+r*s*h-i*s*p+i*l*f)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=e[9],p=e[10],g=e[11],v=e[12],x=e[13],y=e[14],_=e[15],T=h*y*u-x*p*u+x*l*g-a*y*g-h*l*_+a*p*_,M=v*p*u-f*y*u-v*l*g+s*y*g+f*l*_-s*p*_,C=f*x*u-v*h*u+v*a*g-s*x*g-f*a*_+s*h*_,H=v*h*l-f*x*l-v*a*p+s*x*p+f*a*y-s*h*y,L=t*T+i*M+r*C+o*H;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let k=1/L;return e[0]=T*k,e[1]=(x*p*o-h*y*o-x*r*g+i*y*g+h*r*_-i*p*_)*k,e[2]=(a*y*o-x*l*o+x*r*u-i*y*u-a*r*_+i*l*_)*k,e[3]=(h*l*o-a*p*o-h*r*u+i*p*u+a*r*g-i*l*g)*k,e[4]=M*k,e[5]=(f*y*o-v*p*o+v*r*g-t*y*g-f*r*_+t*p*_)*k,e[6]=(v*l*o-s*y*o-v*r*u+t*y*u+s*r*_-t*l*_)*k,e[7]=(s*p*o-f*l*o+f*r*u-t*p*u-s*r*g+t*l*g)*k,e[8]=C*k,e[9]=(v*h*o-f*x*o-v*i*g+t*x*g+f*i*_-t*h*_)*k,e[10]=(s*x*o-v*a*o+v*i*u-t*x*u-s*i*_+t*a*_)*k,e[11]=(f*a*o-s*h*o-f*i*u+t*h*u+s*i*g-t*a*g)*k,e[12]=H*k,e[13]=(f*x*r-v*h*r+v*i*p-t*x*p-f*i*y+t*h*y)*k,e[14]=(v*a*r-s*x*r-v*i*l+t*x*l+s*i*y-t*a*y)*k,e[15]=(s*h*r-f*a*r+f*i*l-t*h*l-s*i*p+t*a*p)*k,this}scale(e){let t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,u=o*s,f=o*a;return this.set(u*s+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*s,0,u*l-r*a,f*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,u=o+o,f=s+s,h=a+a,p=o*u,g=o*f,v=o*h,x=s*f,y=s*h,_=a*h,T=l*u,M=l*f,C=l*h,H=i.x,L=i.y,k=i.z;return r[0]=(1-(x+_))*H,r[1]=(g+C)*H,r[2]=(v-M)*H,r[3]=0,r[4]=(g-C)*L,r[5]=(1-(p+_))*L,r[6]=(y+T)*L,r[7]=0,r[8]=(v+M)*k,r[9]=(y-T)*k,r[10]=(1-(p+x))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,o=tp.set(r[0],r[1],r[2]).length(),s=tp.set(r[4],r[5],r[6]).length(),a=tp.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Ea.copy(this);let u=1/o,f=1/s,h=1/a;return Ea.elements[0]*=u,Ea.elements[1]*=u,Ea.elements[2]*=u,Ea.elements[4]*=f,Ea.elements[5]*=f,Ea.elements[6]*=f,Ea.elements[8]*=h,Ea.elements[9]*=h,Ea.elements[10]*=h,t.setFromRotationMatrix(Ea),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=pl){let l=this.elements,u=2*o/(t-e),f=2*o/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r),g,v;if(a===pl)g=-(s+o)/(s-o),v=-2*s*o/(s-o);else if(a===f0)g=-s/(s-o),v=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=pl){let l=this.elements,u=1/(t-e),f=1/(i-r),h=1/(s-o),p=(t+e)*u,g=(i+r)*f,v,x;if(a===pl)v=(s+o)*h,x=-2*h;else if(a===f0)v=o*h,x=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},tp=new V,Ea=new ht,Bse=new V(0,0,0),Vse=new V(1,1,1),yu=new V,Bx=new V,cs=new V,IV=new ht,AV=new Ei,Rr=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let o=t.elements,s=o[0],a=o[4],l=o[8],u=o[1],f=o[5],h=o[9],p=o[2],g=o[6],v=o[10];switch(i){case"XYZ":this._y=Math.asin(dn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(g,f),this._z=0);break;case"YXZ":this._x=Math.asin(-dn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(dn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-dn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(dn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-dn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return IV.makeRotationFromQuaternion(t),this.setFromRotationMatrix(IV,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return AV.setFromEuler(this),this.setFromQuaternion(AV,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),mp=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Hse=0,RV=new V,np=new Ei,yc=new ht,Vx=new V,e0=new V,zse=new V,jse=new Ei,PV=new V(1,0,0),OV=new V(0,1,0),NV=new V(0,0,1),FV={type:"added"},Gse={type:"removed"},ip={type:"childadded",child:null},NI={type:"childremoved",child:null},Ti=(()=>{class n extends ml{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Hse++}),this.uuid=Vs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new V,i=new Rr,r=new Ei,o=new V(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ht},normalMatrix:{value:new Qt}}),this.matrix=new ht,this.matrixWorld=new ht,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new mp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return np.setFromAxisAngle(t,i),this.quaternion.multiply(np),this}rotateOnWorldAxis(t,i){return np.setFromAxisAngle(t,i),this.quaternion.premultiply(np),this}rotateX(t){return this.rotateOnAxis(PV,t)}rotateY(t){return this.rotateOnAxis(OV,t)}rotateZ(t){return this.rotateOnAxis(NV,t)}translateOnAxis(t,i){return RV.copy(t).applyQuaternion(this.quaternion),this.position.add(RV.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(PV,t)}translateY(t){return this.translateOnAxis(OV,t)}translateZ(t){return this.translateOnAxis(NV,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(yc.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Vx.copy(t):Vx.set(t,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),e0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yc.lookAt(e0,Vx,this.up):yc.lookAt(Vx,e0,this.up),this.quaternion.setFromRotationMatrix(yc),o&&(yc.extractRotation(o.matrixWorld),np.setFromRotationMatrix(yc),this.quaternion.premultiply(np.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(FV),ip.child=t,this.dispatchEvent(ip),ip.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Gse),NI.child=t,this.dispatchEvent(NI),NI.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),yc.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),yc.multiply(t.parent.matrixWorld)),t.applyMatrix4(yc),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(FV),ip.child=t,this.dispatchEvent(ip),ip.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e0,t,zse),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e0,jse,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(l=>ft(we({},l),{boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),o.instanceInfo=this._instanceInfo.map(l=>we({},l)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(t),o.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(o.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let u=l.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){let p=u[f];s(t.shapes,p)}else s(t.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(t.materials,this.material[u]));o.material=l}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let u=this.animations[l];o.animations.push(s(t.animations,u))}}if(i){let l=a(t.geometries),u=a(t.materials),f=a(t.textures),h=a(t.images),p=a(t.shapes),g=a(t.skeletons),v=a(t.animations),x=a(t.nodes);l.length>0&&(r.geometries=l),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),x.length>0&&(r.nodes=x)}return r.object=o,r;function a(l){let u=[];for(let f in l){let h=l[f];delete h.metadata,u.push(h)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let o=t.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new V(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Ta=new V,_c=new V,FI=new V,wc=new V,rp=new V,op=new V,LV=new V,LI=new V,kI=new V,UI=new V,BI=new mn,VI=new mn,HI=new mn,xu=class n{constructor(e=new V,t=new V,i=new V){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ta.subVectors(e,t),r.cross(Ta);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){Ta.subVectors(r,t),_c.subVectors(i,t),FI.subVectors(e,t);let s=Ta.dot(Ta),a=Ta.dot(_c),l=Ta.dot(FI),u=_c.dot(_c),f=_c.dot(FI),h=s*u-a*a;if(h===0)return o.set(0,0,0),null;let p=1/h,g=(u*l-a*f)*p,v=(s*f-a*l)*p;return o.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,wc)===null?!1:wc.x>=0&&wc.y>=0&&wc.x+wc.y<=1}static getInterpolation(e,t,i,r,o,s,a,l){return this.getBarycoord(e,t,i,r,wc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,wc.x),l.addScaledVector(s,wc.y),l.addScaledVector(a,wc.z),l)}static getInterpolatedAttribute(e,t,i,r,o,s){return BI.setScalar(0),VI.setScalar(0),HI.setScalar(0),BI.fromBufferAttribute(e,t),VI.fromBufferAttribute(e,i),HI.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(BI,o.x),s.addScaledVector(VI,o.y),s.addScaledVector(HI,o.z),s}static isFrontFacing(e,t,i,r){return Ta.subVectors(i,t),_c.subVectors(e,t),Ta.cross(_c).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ta.subVectors(this.c,this.b),_c.subVectors(this.a,this.b),Ta.cross(_c).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,o=this.c,s,a;rp.subVectors(r,i),op.subVectors(o,i),LI.subVectors(e,i);let l=rp.dot(LI),u=op.dot(LI);if(l<=0&&u<=0)return t.copy(i);kI.subVectors(e,r);let f=rp.dot(kI),h=op.dot(kI);if(f>=0&&h<=f)return t.copy(r);let p=l*h-f*u;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(i).addScaledVector(rp,s);UI.subVectors(e,o);let g=rp.dot(UI),v=op.dot(UI);if(v>=0&&g<=v)return t.copy(o);let x=g*u-l*v;if(x<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(i).addScaledVector(op,a);let y=f*v-g*h;if(y<=0&&h-f>=0&&g-v>=0)return LV.subVectors(o,r),a=(h-f)/(h-f+(g-v)),t.copy(r).addScaledVector(LV,a);let _=1/(y+x+p);return s=x*_,a=p*_,t.copy(i).addScaledVector(rp,s).addScaledVector(op,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},oz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_u={h:0,s:0,l:0},Hx={h:0,s:0,l:0};function zI(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var gt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=On){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=qt.workingColorSpace){return this.r=e,this.g=t,this.b=i,qt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=qt.workingColorSpace){if(e=RA(e,1),t=dn(t,0,1),i=dn(i,0,1),t===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=zI(s,o,e+1/3),this.g=zI(s,o,e),this.b=zI(s,o,e-1/3)}return qt.toWorkingColorSpace(this,r),this}setStyle(e,t=On){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=On){let i=oz[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Mc(e.r),this.g=Mc(e.g),this.b=Mc(e.b),this}copyLinearToSRGB(e){return this.r=up(e.r),this.g=up(e.g),this.b=up(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=On){return qt.fromWorkingColorSpace(no.copy(this),e),Math.round(dn(no.r*255,0,255))*65536+Math.round(dn(no.g*255,0,255))*256+Math.round(dn(no.b*255,0,255))}getHexString(e=On){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qt.workingColorSpace){qt.fromWorkingColorSpace(no.copy(this),t);let i=no.r,r=no.g,o=no.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,u,f=(a+s)/2;if(a===s)l=0,u=0;else{let h=s-a;switch(u=f<=.5?h/(s+a):h/(2-s-a),s){case i:l=(r-o)/h+(r<o?6:0);break;case r:l=(o-i)/h+2;break;case o:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=qt.workingColorSpace){return qt.fromWorkingColorSpace(no.copy(this),t),e.r=no.r,e.g=no.g,e.b=no.b,e}getStyle(e=On){qt.fromWorkingColorSpace(no.copy(this),e);let t=no.r,i=no.g,r=no.b;return e!==On?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(_u),this.setHSL(_u.h+e,_u.s+t,_u.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(_u),e.getHSL(Hx);let i=l0(_u.h,Hx.h,t),r=l0(_u.s,Hx.s,t),o=l0(_u.l,Hx.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},no=new gt;gt.NAMES=oz;var Wse=0,yr=class extends ml{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Wse++}),this.uuid=Vs(),this.name="",this.type="Material",this.blending=kd,this.side=Ia,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=lb,this.blendDst=cb,this.blendEquation=Mu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gt(0,0,0),this.blendAlpha=0,this.depthFunc=Ud,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=oA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ld,this.stencilZFail=Ld,this.stencilZPass=Ld,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==kd&&(i.blending=this.blending),this.side!==Ia&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==lb&&(i.blendSrc=this.blendSrc),this.blendDst!==cb&&(i.blendDst=this.blendDst),this.blendEquation!==Mu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ud&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==oA&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ld&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ld&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ld&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(t){let o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},fs=class extends yr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Rr,this.combine=V0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var lr=new V,zx=new qe,$se=0,cr=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:$se++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=ub,this.updateRanges=[],this.gpuType=Ws,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)zx.fromBufferAttribute(this,t),zx.applyMatrix3(e),this.setXY(t,zx.x,zx.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)lr.fromBufferAttribute(this,t),lr.applyMatrix3(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)lr.fromBufferAttribute(this,t),lr.applyMatrix4(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)lr.fromBufferAttribute(this,t),lr.applyNormalMatrix(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)lr.fromBufferAttribute(this,t),lr.transformDirection(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Da(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ri(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Da(t,this.array)),t}setX(e,t){return this.normalized&&(t=ri(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Da(t,this.array)),t}setY(e,t){return this.normalized&&(t=ri(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Da(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ri(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Da(t,this.array)),t}setW(e,t){return this.normalized&&(t=ri(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ri(t,this.array),i=ri(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=ri(t,this.array),i=ri(i,this.array),r=ri(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=ri(t,this.array),i=ri(i,this.array),r=ri(r,this.array),o=ri(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ub&&(e.usage=this.usage),e}};var zd=class extends cr{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var p0=class extends cr{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var Zn=class extends cr{constructor(e,t,i){super(new Float32Array(e),t,i)}},qse=0,Us=new ht,jI=new Ti,sp=new V,us=new wo,t0=new wo,Ar=new V,ir=class n extends ml{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:qse++}),this.uuid=Vs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(PA(e)?p0:zd)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new Qt().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Us.makeRotationFromQuaternion(e),this.applyMatrix4(Us),this}rotateX(e){return Us.makeRotationX(e),this.applyMatrix4(Us),this}rotateY(e){return Us.makeRotationY(e),this.applyMatrix4(Us),this}rotateZ(e){return Us.makeRotationZ(e),this.applyMatrix4(Us),this}translate(e,t,i){return Us.makeTranslation(e,t,i),this.applyMatrix4(Us),this}scale(e,t,i){return Us.makeScale(e,t,i),this.applyMatrix4(Us),this}lookAt(e){return jI.lookAt(e),jI.updateMatrix(),this.applyMatrix4(jI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sp).negate(),this.translate(sp.x,sp.y,sp.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Zn(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new wo);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let o=t[i];us.setFromBufferAttribute(o),this.morphTargetsRelative?(Ar.addVectors(this.boundingBox.min,us.min),this.boundingBox.expandByPoint(Ar),Ar.addVectors(this.boundingBox.max,us.max),this.boundingBox.expandByPoint(Ar)):(this.boundingBox.expandByPoint(us.min),this.boundingBox.expandByPoint(us.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new jo);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new V,1/0);return}if(e){let i=this.boundingSphere.center;if(us.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];t0.setFromBufferAttribute(a),this.morphTargetsRelative?(Ar.addVectors(us.min,t0.min),us.expandByPoint(Ar),Ar.addVectors(us.max,t0.max),us.expandByPoint(Ar)):(us.expandByPoint(t0.min),us.expandByPoint(t0.max))}us.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)Ar.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(Ar));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)Ar.fromBufferAttribute(a,u),l&&(sp.fromBufferAttribute(e,u),Ar.add(sp)),r=Math.max(r,i.distanceToSquared(Ar))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new cr(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let $=0;$<i.count;$++)a[$]=new V,l[$]=new V;let u=new V,f=new V,h=new V,p=new qe,g=new qe,v=new qe,x=new V,y=new V;function _($,N,A){u.fromBufferAttribute(i,$),f.fromBufferAttribute(i,N),h.fromBufferAttribute(i,A),p.fromBufferAttribute(o,$),g.fromBufferAttribute(o,N),v.fromBufferAttribute(o,A),f.sub(u),h.sub(u),g.sub(p),v.sub(p);let j=1/(g.x*v.y-v.x*g.y);isFinite(j)&&(x.copy(f).multiplyScalar(v.y).addScaledVector(h,-g.y).multiplyScalar(j),y.copy(h).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(j),a[$].add(x),a[N].add(x),a[A].add(x),l[$].add(y),l[N].add(y),l[A].add(y))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let $=0,N=T.length;$<N;++$){let A=T[$],j=A.start,he=A.count;for(let ae=j,Re=j+he;ae<Re;ae+=3)_(e.getX(ae+0),e.getX(ae+1),e.getX(ae+2))}let M=new V,C=new V,H=new V,L=new V;function k($){H.fromBufferAttribute(r,$),L.copy(H);let N=a[$];M.copy(N),M.sub(H.multiplyScalar(H.dot(N))).normalize(),C.crossVectors(L,N);let j=C.dot(l[$])<0?-1:1;s.setXYZW($,M.x,M.y,M.z,j)}for(let $=0,N=T.length;$<N;++$){let A=T[$],j=A.start,he=A.count;for(let ae=j,Re=j+he;ae<Re;ae+=3)k(e.getX(ae+0)),k(e.getX(ae+1)),k(e.getX(ae+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new cr(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);let r=new V,o=new V,s=new V,a=new V,l=new V,u=new V,f=new V,h=new V;if(e)for(let p=0,g=e.count;p<g;p+=3){let v=e.getX(p+0),x=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,v),o.fromBufferAttribute(t,x),s.fromBufferAttribute(t,y),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,x),u.fromBufferAttribute(i,y),a.add(f),l.add(f),u.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(y,u.x,u.y,u.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),o.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ar.fromBufferAttribute(e,t),Ar.normalize(),e.setXYZ(t,Ar.x,Ar.y,Ar.z)}toNonIndexed(){function e(a,l){let u=a.array,f=a.itemSize,h=a.normalized,p=new u.constructor(l.length*f),g=0,v=0;for(let x=0,y=l.length;x<y;x++){a.isInterleavedBufferAttribute?g=l[x]*a.data.stride+a.offset:g=l[x]*f;for(let _=0;_<f;_++)p[v++]=u[g++]}return new cr(p,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],u=e(l,i);t.setAttribute(a,u)}let o=this.morphAttributes;for(let a in o){let l=[],u=o[a];for(let f=0,h=u.length;f<h;f++){let p=u[f],g=e(p,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let u=s[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let l in i){let u=i[l];e.data.attributes[l]=u.toJSON(e.data)}let r={},o=!1;for(let l in this.morphAttributes){let u=this.morphAttributes[l],f=[];for(let h=0,p=u.length;h<p;h++){let g=u[h];f.push(g.toJSON(e.data))}f.length>0&&(r[l]=f,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let u in r){let f=r[u];this.setAttribute(u,f.clone(t))}let o=e.morphAttributes;for(let u in o){let f=[],h=o[u];for(let p=0,g=h.length;p<g;p++)f.push(h[p].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let u=0,f=s.length;u<f;u++){let h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},kV=new ht,Nd=new vl,jx=new jo,UV=new V,Gx=new V,Wx=new V,$x=new V,GI=new V,qx=new V,BV=new V,Xx=new V,Di=class extends Ti{constructor(e=new ir,t=new fs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){qx.set(0,0,0);for(let l=0,u=o.length;l<u;l++){let f=a[l],h=o[l];f!==0&&(GI.fromBufferAttribute(h,e),s?qx.addScaledVector(GI,f):qx.addScaledVector(GI.sub(t),f))}t.add(qx)}return t}raycast(e,t){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),jx.copy(i.boundingSphere),jx.applyMatrix4(o),Nd.copy(e.ray).recast(e.near),!(jx.containsPoint(Nd.origin)===!1&&(Nd.intersectSphere(jx,UV)===null||Nd.origin.distanceToSquared(UV)>(e.far-e.near)**2))&&(kV.copy(o).invert(),Nd.copy(e.ray).applyMatrix4(kV),!(i.boundingBox!==null&&Nd.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Nd)))}_computeIntersections(e,t,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,f=o.attributes.uv1,h=o.attributes.normal,p=o.groups,g=o.drawRange;if(a!==null)if(Array.isArray(s))for(let v=0,x=p.length;v<x;v++){let y=p[v],_=s[y.materialIndex],T=Math.max(y.start,g.start),M=Math.min(a.count,Math.min(y.start+y.count,g.start+g.count));for(let C=T,H=M;C<H;C+=3){let L=a.getX(C),k=a.getX(C+1),$=a.getX(C+2);r=Yx(this,_,e,i,u,f,h,L,k,$),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{let v=Math.max(0,g.start),x=Math.min(a.count,g.start+g.count);for(let y=v,_=x;y<_;y+=3){let T=a.getX(y),M=a.getX(y+1),C=a.getX(y+2);r=Yx(this,s,e,i,u,f,h,T,M,C),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let v=0,x=p.length;v<x;v++){let y=p[v],_=s[y.materialIndex],T=Math.max(y.start,g.start),M=Math.min(l.count,Math.min(y.start+y.count,g.start+g.count));for(let C=T,H=M;C<H;C+=3){let L=C,k=C+1,$=C+2;r=Yx(this,_,e,i,u,f,h,L,k,$),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{let v=Math.max(0,g.start),x=Math.min(l.count,g.start+g.count);for(let y=v,_=x;y<_;y+=3){let T=y,M=y+1,C=y+2;r=Yx(this,s,e,i,u,f,h,T,M,C),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}};function Xse(n,e,t,i,r,o,s,a){let l;if(e.side===bo?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,e.side===Ia,a),l===null)return null;Xx.copy(a),Xx.applyMatrix4(n.matrixWorld);let u=t.ray.origin.distanceTo(Xx);return u<t.near||u>t.far?null:{distance:u,point:Xx.clone(),object:n}}function Yx(n,e,t,i,r,o,s,a,l,u){n.getVertexPosition(a,Gx),n.getVertexPosition(l,Wx),n.getVertexPosition(u,$x);let f=Xse(n,e,t,i,Gx,Wx,$x,BV);if(f){let h=new V;xu.getBarycoord(BV,Gx,Wx,$x,h),r&&(f.uv=xu.getInterpolatedAttribute(r,a,l,u,h,new qe)),o&&(f.uv1=xu.getInterpolatedAttribute(o,a,l,u,h,new qe)),s&&(f.normal=xu.getInterpolatedAttribute(s,a,l,u,h,new V),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));let p={a,b:l,c:u,normal:new V,materialIndex:0};xu.getNormal(Gx,Wx,$x,p.normal),f.face=p,f.barycoord=h}return f}var gp=class n extends ir{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],u=[],f=[],h=[],p=0,g=0;v("z","y","x",-1,-1,i,t,e,s,o,0),v("z","y","x",1,-1,i,t,-e,s,o,1),v("x","z","y",1,1,e,i,t,r,s,2),v("x","z","y",1,-1,e,i,-t,r,s,3),v("x","y","z",1,-1,e,t,i,r,o,4),v("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new Zn(u,3)),this.setAttribute("normal",new Zn(f,3)),this.setAttribute("uv",new Zn(h,2));function v(x,y,_,T,M,C,H,L,k,$,N){let A=C/k,j=H/$,he=C/2,ae=H/2,Re=L/2,Se=k+1,Y=$+1,ie=0,X=0,_e=new V;for(let Ve=0;Ve<Y;Ve++){let rt=Ve*j-ae;for(let ge=0;ge<Se;ge++){let re=ge*A-he;_e[x]=re*T,_e[y]=rt*M,_e[_]=Re,u.push(_e.x,_e.y,_e.z),_e[x]=0,_e[y]=0,_e[_]=L>0?1:-1,f.push(_e.x,_e.y,_e.z),h.push(ge/k),h.push(1-Ve/$),ie+=1}}for(let Ve=0;Ve<$;Ve++)for(let rt=0;rt<k;rt++){let ge=p+rt+Se*Ve,re=p+rt+Se*(Ve+1),B=p+(rt+1)+Se*(Ve+1),J=p+(rt+1)+Se*Ve;l.push(ge,re,J),l.push(re,B,J),X+=6}a.addGroup(g,X,N),g+=X,p+=ie}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function tf(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ro(n){let e={};for(let t=0;t<n.length;t++){let i=tf(n[t]);for(let r in i)e[r]=i[r]}return e}function Yse(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function OA(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qt.workingColorSpace}var sz={clone:tf,merge:ro},Zse=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Kse=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Ra=class extends yr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Zse,this.fragmentShader=Kse,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tf(e.uniforms),this.uniformsGroups=Yse(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},m0=class extends Ti{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ht,this.projectionMatrix=new ht,this.projectionMatrixInverse=new ht,this.coordinateSystem=pl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},wu=new V,VV=new qe,HV=new qe,qi=class extends m0{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Hd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(a0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Hd*2*Math.atan(Math.tan(a0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){wu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(wu.x,wu.y).multiplyScalar(-e/wu.z),wu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(wu.x,wu.y).multiplyScalar(-e/wu.z)}getViewSize(e,t){return this.getViewBounds(e,VV,HV),t.subVectors(HV,VV)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(a0*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},ap=-90,lp=1,pb=class extends Ti{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new qi(ap,lp,e,t);r.layers=this.layers,this.add(r);let o=new qi(ap,lp,e,t);o.layers=this.layers,this.add(o);let s=new qi(ap,lp,e,t);s.layers=this.layers,this.add(s);let a=new qi(ap,lp,e,t);a.layers=this.layers,this.add(a);let l=new qi(ap,lp,e,t);l.layers=this.layers,this.add(l);let u=new qi(ap,lp,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,l]=t;for(let u of t)this.remove(u);if(e===pl)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===f0)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,u,f]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;let x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(h,p,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}},g0=class extends Mo{constructor(e=[],t=Jd,i,r,o,s,a,l,u,f){super(e,t,i,r,o,s,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},mb=class extends gl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new g0(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:_o}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new gp(5,5,5),o=new Ra({name:"CubemapFromEquirect",uniforms:tf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:bo,blending:Ac});o.uniforms.tEquirect.value=t;let s=new Di(r,o),a=t.minFilter;return t.minFilter===Na&&(t.minFilter=_o),new pb(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}},io=class extends Ti{constructor(){super(),this.isGroup=!0,this.type="Group"}},Jse={type:"move"},vp=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new io,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new io,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new io,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(let x of e.hand.values()){let y=t.getJointPose(x,i),_=this._getHandJoint(u,x);y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=y.radius),_.visible=y!==null}let f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=f.position.distanceTo(h.position),g=.02,v=.005;u.inputState.pinching&&p>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Jse)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new io;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var v0=class extends Ti{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Rr,this.environmentIntensity=1,this.environmentRotation=new Rr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},yp=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ub,this.updateRanges=[],this.version=0,this.uuid=Vs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},yo=new V,_p=class n{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)yo.fromBufferAttribute(this,t),yo.applyMatrix4(e),this.setXYZ(t,yo.x,yo.y,yo.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)yo.fromBufferAttribute(this,t),yo.applyNormalMatrix(e),this.setXYZ(t,yo.x,yo.y,yo.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)yo.fromBufferAttribute(this,t),yo.transformDirection(e),this.setXYZ(t,yo.x,yo.y,yo.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Da(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ri(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=ri(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ri(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ri(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ri(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Da(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Da(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Da(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Da(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ri(t,this.array),i=ri(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ri(t,this.array),i=ri(i,this.array),r=ri(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=ri(t,this.array),i=ri(i,this.array),r=ri(r,this.array),o=ri(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new cr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var zV=new V,jV=new mn,GV=new mn,Qse=new V,WV=new ht,Zx=new V,WI=new jo,$V=new ht,$I=new vl,jd=class extends Di{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=eA,this.bindMatrix=new ht,this.bindMatrixInverse=new ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new wo),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Zx),this.boundingBox.expandByPoint(Zx)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new jo),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Zx),this.boundingSphere.expandByPoint(Zx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),WI.copy(this.boundingSphere),WI.applyMatrix4(r),e.ray.intersectsSphere(WI)!==!1&&($V.copy(r).invert(),$I.copy(e.ray).applyMatrix4($V),!(this.boundingBox!==null&&$I.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,$I)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new mn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===eA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===jH?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let i=this.skeleton,r=this.geometry;jV.fromBufferAttribute(r.attributes.skinIndex,e),GV.fromBufferAttribute(r.attributes.skinWeight,e),zV.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){let s=GV.getComponent(o);if(s!==0){let a=jV.getComponent(o);WV.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Qse.copy(zV).applyMatrix4(WV),s)}}return t.applyMatrix4(this.bindMatrixInverse)}},Cc=class extends Ti{constructor(){super(),this.isBone=!0,this.type="Bone"}},y0=class extends Mo{constructor(e=null,t=1,i=1,r,o,s,a,l,u=Hr,f=Hr,h,p){super(null,s,a,l,u,f,r,o,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},qV=new ht,eae=new ht,Gd=class n{constructor(e=[],t=[]){this.uuid=Vs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new ht;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:eae;qV.multiplyMatrices(a,t[o]),qV.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new y0(t,e,e,ps,Ws);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let o=e.bones[i],s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Cc),this.bones.push(s),this.boneInverses.push(new ht().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,o=t.length;r<o;r++){let s=t[r];e.bones.push(s.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},Cu=class extends cr{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},cp=new ht,XV=new ht,Kx=[],YV=new wo,tae=new ht,n0=new Di,i0=new jo,_0=class extends Di{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Cu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,tae)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new wo),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,cp),YV.copy(e.boundingBox).applyMatrix4(cp),this.boundingBox.union(YV)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new jo),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,cp),i0.copy(e.boundingSphere).applyMatrix4(cp),this.boundingSphere.union(i0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=e*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(e,t){let i=this.matrixWorld,r=this.count;if(n0.geometry=this.geometry,n0.material=this.material,n0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),i0.copy(this.boundingSphere),i0.applyMatrix4(i),e.ray.intersectsSphere(i0)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,cp),XV.multiplyMatrices(i,cp),n0.matrixWorld=XV,n0.raycast(e,Kx);for(let s=0,a=Kx.length;s<a;s++){let l=Kx[s];l.instanceId=o,l.object=this,t.push(l)}Kx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Cu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new y0(new Float32Array(r*this.count),r,this.count,$b,Ws));let o=this.morphTexture.source.data.data,s=0;for(let u=0;u<i.length;u++)s+=i[u];let a=this.geometry.morphTargetsRelative?1:1-s,l=r*e;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}},qI=new V,nae=new V,iae=new Qt,Bs=class{constructor(e=new V(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=qI.subVectors(i,t).cross(nae.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(qI),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||iae.getNormalMatrix(e),r=this.coplanarPoint(qI).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Fd=new jo,Jx=new V,wp=class{constructor(e=new Bs,t=new Bs,i=new Bs,r=new Bs,o=new Bs,s=new Bs){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=pl){let i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],u=r[4],f=r[5],h=r[6],p=r[7],g=r[8],v=r[9],x=r[10],y=r[11],_=r[12],T=r[13],M=r[14],C=r[15];if(i[0].setComponents(l-o,p-u,y-g,C-_).normalize(),i[1].setComponents(l+o,p+u,y+g,C+_).normalize(),i[2].setComponents(l+s,p+f,y+v,C+T).normalize(),i[3].setComponents(l-s,p-f,y-v,C-T).normalize(),i[4].setComponents(l-a,p-h,y-x,C-M).normalize(),t===pl)i[5].setComponents(l+a,p+h,y+x,C+M).normalize();else if(t===f0)i[5].setComponents(a,h,x,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Fd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Fd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Fd)}intersectsSprite(e){return Fd.center.set(0,0,0),Fd.radius=.7071067811865476,Fd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Fd)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(Jx.x=r.normal.x>0?e.max.x:e.min.x,Jx.y=r.normal.y>0?e.max.y:e.min.y,Jx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Jx)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Hs=class extends yr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},gb=new V,vb=new V,ZV=new ht,r0=new vl,Qx=new jo,XI=new V,KV=new V,Sc=class extends Ti{constructor(e=new ir,t=new Hs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)gb.fromBufferAttribute(t,r-1),vb.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=gb.distanceTo(vb);e.setAttribute("lineDistance",new Zn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Qx.copy(i.boundingSphere),Qx.applyMatrix4(r),Qx.radius+=o,e.ray.intersectsSphere(Qx)===!1)return;ZV.copy(r).invert(),r0.copy(e.ray).applyMatrix4(ZV);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){let g=Math.max(0,s.start),v=Math.min(f.count,s.start+s.count);for(let x=g,y=v-1;x<y;x+=u){let _=f.getX(x),T=f.getX(x+1),M=eb(this,e,r0,l,_,T,x);M&&t.push(M)}if(this.isLineLoop){let x=f.getX(v-1),y=f.getX(g),_=eb(this,e,r0,l,x,y,v-1);_&&t.push(_)}}else{let g=Math.max(0,s.start),v=Math.min(p.count,s.start+s.count);for(let x=g,y=v-1;x<y;x+=u){let _=eb(this,e,r0,l,x,x+1,x);_&&t.push(_)}if(this.isLineLoop){let x=eb(this,e,r0,l,v-1,g,v-1);x&&t.push(x)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function eb(n,e,t,i,r,o,s){let a=n.geometry.attributes.position;if(gb.fromBufferAttribute(a,r),vb.fromBufferAttribute(a,o),t.distanceSqToSegment(gb,vb,XI,KV)>i)return;XI.applyMatrix4(n.matrixWorld);let u=e.ray.origin.distanceTo(XI);if(!(u<e.near||u>e.far))return{distance:u,point:KV.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}var JV=new V,QV=new V,Su=class extends Sc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)JV.fromBufferAttribute(t,r),QV.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+JV.distanceTo(QV);e.setAttribute("lineDistance",new Zn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},w0=class extends Sc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},Pa=class extends yr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},eH=new ht,sA=new vl,tb=new jo,nb=new V,Ec=class extends Ti{constructor(e=new ir,t=new Pa){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),tb.copy(i.boundingSphere),tb.applyMatrix4(r),tb.radius+=o,e.ray.intersectsSphere(tb)===!1)return;eH.copy(r).invert(),sA.copy(e.ray).applyMatrix4(eH);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){let p=Math.max(0,s.start),g=Math.min(u.count,s.start+s.count);for(let v=p,x=g;v<x;v++){let y=u.getX(v);nb.fromBufferAttribute(h,y),tH(nb,y,l,r,e,t,this)}}else{let p=Math.max(0,s.start),g=Math.min(h.count,s.start+s.count);for(let v=p,x=g;v<x;v++)nb.fromBufferAttribute(h,v),tH(nb,v,l,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function tH(n,e,t,i,r,o,s){let a=sA.distanceSqToPoint(n);if(a<t){let l=new V;sA.closestPointToPoint(n,l),l.applyMatrix4(i);let u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}var x0=class extends Mo{constructor(e,t,i=Au,r,o,s,a=Hr,l=Hr,u,f=fp){if(f!==fp&&f!==Ap)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,o,s,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new pp(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};var xo=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(r),t.push(o),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let i=this.getLengths(),r=0,o=i.length,s;t?s=t:s=e*i[o-1];let a=0,l=o-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-s,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(o-1);let f=i[r],p=i[r+1]-f,g=(s-f)/p;return(r+g)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),l=t||(s.isVector2?new qe:new V);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){let i=new V,r=[],o=[],s=[],a=new V,l=new ht;for(let g=0;g<=e;g++){let v=g/e;r[g]=this.getTangentAt(v,new V)}o[0]=new V,s[0]=new V;let u=Number.MAX_VALUE,f=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=u&&(u=f,i.set(1,0,0)),h<=u&&(u=h,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let g=1;g<=e;g++){if(o[g]=o[g-1].clone(),s[g]=s[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();let v=Math.acos(dn(r[g-1].dot(r[g]),-1,1));o[g].applyMatrix4(l.makeRotationAxis(a,v))}s[g].crossVectors(r[g],o[g])}if(t===!0){let g=Math.acos(dn(o[0].dot(o[e]),-1,1));g/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(g=-g);for(let v=1;v<=e;v++)o[v].applyMatrix4(l.makeRotationAxis(r[v],g*v)),s[v].crossVectors(r[v],o[v])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},xp=class extends xo{constructor(e=0,t=0,i=1,r=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new qe){let i=t,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let f=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,g=u-this.aY;l=p*f-g*h+this.aX,u=p*h+g*f+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},yb=class extends xp{constructor(e,t,i,r,o,s){super(e,t,i,i,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function NA(){let n=0,e=0,t=0,i=0;function r(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){r(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,f,h){let p=(s-o)/u-(a-o)/(u+f)+(a-s)/f,g=(a-s)/f-(l-s)/(f+h)+(l-a)/h;p*=f,g*=f,r(s,a,p,g)},calc:function(o){let s=o*o,a=s*o;return n+e*o+t*s+i*a}}}var ib=new V,YI=new NA,ZI=new NA,KI=new NA,_b=class extends xo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new V){let i=t,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let u,f;this.closed||a>0?u=r[(a-1)%o]:(ib.subVectors(r[0],r[1]).add(r[0]),u=ib);let h=r[a%o],p=r[(a+1)%o];if(this.closed||a+2<o?f=r[(a+2)%o]:(ib.subVectors(r[o-1],r[o-2]).add(r[o-1]),f=ib),this.curveType==="centripetal"||this.curveType==="chordal"){let g=this.curveType==="chordal"?.5:.25,v=Math.pow(u.distanceToSquared(h),g),x=Math.pow(h.distanceToSquared(p),g),y=Math.pow(p.distanceToSquared(f),g);x<1e-4&&(x=1),v<1e-4&&(v=x),y<1e-4&&(y=x),YI.initNonuniformCatmullRom(u.x,h.x,p.x,f.x,v,x,y),ZI.initNonuniformCatmullRom(u.y,h.y,p.y,f.y,v,x,y),KI.initNonuniformCatmullRom(u.z,h.z,p.z,f.z,v,x,y)}else this.curveType==="catmullrom"&&(YI.initCatmullRom(u.x,h.x,p.x,f.x,this.tension),ZI.initCatmullRom(u.y,h.y,p.y,f.y,this.tension),KI.initCatmullRom(u.z,h.z,p.z,f.z,this.tension));return i.set(YI.calc(l),ZI.calc(l),KI.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new V().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function nH(n,e,t,i,r){let o=(i-e)*.5,s=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+o+s)*l+(-3*t+3*i-2*o-s)*a+o*n+t}function rae(n,e){let t=1-n;return t*t*e}function oae(n,e){return 2*(1-n)*n*e}function sae(n,e){return n*n*e}function c0(n,e,t,i){return rae(n,e)+oae(n,t)+sae(n,i)}function aae(n,e){let t=1-n;return t*t*t*e}function lae(n,e){let t=1-n;return 3*t*t*n*e}function cae(n,e){return 3*(1-n)*n*n*e}function uae(n,e){return n*n*n*e}function u0(n,e,t,i,r){return aae(n,e)+lae(n,t)+cae(n,i)+uae(n,r)}var b0=class extends xo{constructor(e=new qe,t=new qe,i=new qe,r=new qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new qe){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(u0(e,r.x,o.x,s.x,a.x),u0(e,r.y,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},wb=class extends xo{constructor(e=new V,t=new V,i=new V,r=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new V){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(u0(e,r.x,o.x,s.x,a.x),u0(e,r.y,o.y,s.y,a.y),u0(e,r.z,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},M0=class extends xo{constructor(e=new qe,t=new qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new qe){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new qe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},xb=class extends xo{constructor(e=new V,t=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new V){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new V){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},C0=class extends xo{constructor(e=new qe,t=new qe,i=new qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new qe){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(c0(e,r.x,o.x,s.x),c0(e,r.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},bb=class extends xo{constructor(e=new V,t=new V,i=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new V){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(c0(e,r.x,o.x,s.x),c0(e,r.y,o.y,s.y),c0(e,r.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},S0=class extends xo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new qe){let i=t,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[s===0?s:s-1],u=r[s],f=r[s>r.length-2?r.length-1:s+1],h=r[s>r.length-3?r.length-1:s+2];return i.set(nH(a,l.x,u.x,f.x,h.x),nH(a,l.y,u.y,f.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new qe().fromArray(r))}return this}},iH=Object.freeze({__proto__:null,ArcCurve:yb,CatmullRomCurve3:_b,CubicBezierCurve:b0,CubicBezierCurve3:wb,EllipseCurve:xp,LineCurve:M0,LineCurve3:xb,QuadraticBezierCurve:C0,QuadraticBezierCurve3:bb,SplineCurve:S0}),Mb=class extends xo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new iH[i](t,e))}return this}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=i){let s=r[o]-i,a=this.curves[o],l=a.getLength(),u=l===0?0:1-s/l;return a.getPointAt(u,t)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let u=0;u<l.length;u++){let f=l[u];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new iH[r.type]().fromJSON(r))}return this}},E0=class extends Mb{constructor(e){super(),this.type="Path",this.currentPoint=new qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new M0(this.currentPoint.clone(),new qe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let o=new C0(this.currentPoint.clone(),new qe(e,t),new qe(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,o,s){let a=new b0(this.currentPoint.clone(),new qe(e,t),new qe(i,r),new qe(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new S0(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,o,s){let a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,o,s),this}absarc(e,t,i,r,o,s){return this.absellipse(e,t,i,i,r,o,s),this}ellipse(e,t,i,r,o,s,a,l){let u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,i,r,o,s,a,l),this}absellipse(e,t,i,r,o,s,a,l){let u=new xp(e,t,i,r,o,s,a,l);if(this.curves.length>0){let h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);let f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},bp=class extends E0{constructor(e){super(e),this.uuid=Vs(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new E0().fromJSON(r))}return this}};function dae(n,e,t=2){let i=e&&e.length,r=i?e[0]*t:n.length,o=az(n,0,r,t,!0),s=[];if(!o||o.next===o.prev)return s;let a,l,u;if(i&&(o=gae(n,e,o,t)),n.length>80*t){a=1/0,l=1/0;let f=-1/0,h=-1/0;for(let p=t;p<r;p+=t){let g=n[p],v=n[p+1];g<a&&(a=g),v<l&&(l=v),g>f&&(f=g),v>h&&(h=v)}u=Math.max(f-a,h-l),u=u!==0?32767/u:0}return T0(o,s,t,a,l,u,0),s}function az(n,e,t,i,r){let o;if(r===Tae(n,e,t,i)>0)for(let s=e;s<t;s+=i)o=rH(s/i|0,n[s],n[s+1],o);else for(let s=t-i;s>=e;s-=i)o=rH(s/i|0,n[s],n[s+1],o);return o&&Mp(o,o.next)&&(I0(o),o=o.next),o}function Wd(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Mp(t,t.next)||Li(t.prev,t,t.next)===0)){if(I0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function T0(n,e,t,i,r,o,s){if(!n)return;!s&&o&&xae(n,i,r,o);let a=n;for(;n.prev!==n.next;){let l=n.prev,u=n.next;if(o?hae(n,i,r,o):fae(n)){e.push(l.i,n.i,u.i),I0(n),n=u.next,a=u.next;continue}if(n=u,n===a){s?s===1?(n=pae(Wd(n),e),T0(n,e,t,i,r,o,2)):s===2&&mae(n,e,t,i,r,o):T0(Wd(n),e,t,i,r,o,1);break}}}function fae(n){let e=n.prev,t=n,i=n.next;if(Li(e,t,i)>=0)return!1;let r=e.x,o=t.x,s=i.x,a=e.y,l=t.y,u=i.y,f=Math.min(r,o,s),h=Math.min(a,l,u),p=Math.max(r,o,s),g=Math.max(a,l,u),v=i.next;for(;v!==e;){if(v.x>=f&&v.x<=p&&v.y>=h&&v.y<=g&&s0(r,a,o,l,s,u,v.x,v.y)&&Li(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function hae(n,e,t,i){let r=n.prev,o=n,s=n.next;if(Li(r,o,s)>=0)return!1;let a=r.x,l=o.x,u=s.x,f=r.y,h=o.y,p=s.y,g=Math.min(a,l,u),v=Math.min(f,h,p),x=Math.max(a,l,u),y=Math.max(f,h,p),_=aA(g,v,e,t,i),T=aA(x,y,e,t,i),M=n.prevZ,C=n.nextZ;for(;M&&M.z>=_&&C&&C.z<=T;){if(M.x>=g&&M.x<=x&&M.y>=v&&M.y<=y&&M!==r&&M!==s&&s0(a,f,l,h,u,p,M.x,M.y)&&Li(M.prev,M,M.next)>=0||(M=M.prevZ,C.x>=g&&C.x<=x&&C.y>=v&&C.y<=y&&C!==r&&C!==s&&s0(a,f,l,h,u,p,C.x,C.y)&&Li(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;M&&M.z>=_;){if(M.x>=g&&M.x<=x&&M.y>=v&&M.y<=y&&M!==r&&M!==s&&s0(a,f,l,h,u,p,M.x,M.y)&&Li(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;C&&C.z<=T;){if(C.x>=g&&C.x<=x&&C.y>=v&&C.y<=y&&C!==r&&C!==s&&s0(a,f,l,h,u,p,C.x,C.y)&&Li(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function pae(n,e){let t=n;do{let i=t.prev,r=t.next.next;!Mp(i,r)&&cz(i,t,t.next,r)&&D0(i,r)&&D0(r,i)&&(e.push(i.i,t.i,r.i),I0(t),I0(t.next),t=n=r),t=t.next}while(t!==n);return Wd(t)}function mae(n,e,t,i,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&Cae(s,a)){let l=uz(s,a);s=Wd(s,s.next),l=Wd(l,l.next),T0(s,e,t,i,r,o,0),T0(l,e,t,i,r,o,0);return}a=a.next}s=s.next}while(s!==n)}function gae(n,e,t,i){let r=[];for(let o=0,s=e.length;o<s;o++){let a=e[o]*i,l=o<s-1?e[o+1]*i:n.length,u=az(n,a,l,i,!1);u===u.next&&(u.steiner=!0),r.push(Mae(u))}r.sort(vae);for(let o=0;o<r.length;o++)t=yae(r[o],t);return t}function vae(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){let i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function yae(n,e){let t=_ae(n,e);if(!t)return e;let i=uz(t,n);return Wd(i,i.next),Wd(t,t.next)}function _ae(n,e){let t=e,i=n.x,r=n.y,o=-1/0,s;if(Mp(n,t))return t;do{if(Mp(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){let h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>o&&(o=h,s=t.x<t.next.x?t:t.next,h===i))return s}t=t.next}while(t!==e);if(!s)return null;let a=s,l=s.x,u=s.y,f=1/0;t=s;do{if(i>=t.x&&t.x>=l&&i!==t.x&&lz(r<u?i:o,r,l,u,r<u?o:i,r,t.x,t.y)){let h=Math.abs(r-t.y)/(i-t.x);D0(t,n)&&(h<f||h===f&&(t.x>s.x||t.x===s.x&&wae(s,t)))&&(s=t,f=h)}t=t.next}while(t!==a);return s}function wae(n,e){return Li(n.prev,n,e.prev)<0&&Li(e.next,n,n.next)<0}function xae(n,e,t,i){let r=n;do r.z===0&&(r.z=aA(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,bae(r)}function bae(n){let e,t=1;do{let i=n,r;n=null;let o=null;for(e=0;i;){e++;let s=i,a=0;for(let u=0;u<t&&(a++,s=s.nextZ,!!s);u++);let l=t;for(;a>0||l>0&&s;)a!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,l--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;i=s}o.nextZ=null,t*=2}while(e>1);return n}function aA(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Mae(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function lz(n,e,t,i,r,o,s,a){return(r-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(i-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(r-s)*(i-a)}function s0(n,e,t,i,r,o,s,a){return!(n===s&&e===a)&&lz(n,e,t,i,r,o,s,a)}function Cae(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Sae(n,e)&&(D0(n,e)&&D0(e,n)&&Eae(n,e)&&(Li(n.prev,n,e.prev)||Li(n,e.prev,e))||Mp(n,e)&&Li(n.prev,n,n.next)>0&&Li(e.prev,e,e.next)>0)}function Li(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Mp(n,e){return n.x===e.x&&n.y===e.y}function cz(n,e,t,i){let r=ob(Li(n,e,t)),o=ob(Li(n,e,i)),s=ob(Li(t,i,n)),a=ob(Li(t,i,e));return!!(r!==o&&s!==a||r===0&&rb(n,t,e)||o===0&&rb(n,i,e)||s===0&&rb(t,n,i)||a===0&&rb(t,e,i))}function rb(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function ob(n){return n>0?1:n<0?-1:0}function Sae(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&cz(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function D0(n,e){return Li(n.prev,n,n.next)<0?Li(n,e,n.next)>=0&&Li(n,n.prev,e)>=0:Li(n,e,n.prev)<0||Li(n,n.next,e)<0}function Eae(n,e){let t=n,i=!1,r=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function uz(n,e){let t=lA(n.i,n.x,n.y),i=lA(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function rH(n,e,t,i){let r=lA(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function I0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function lA(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Tae(n,e,t,i){let r=0;for(let o=e,s=t-i;o<t;o+=i)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var cA=class{static triangulate(e,t,i=2){return dae(e,t,i)}},bu=class n{static area(e){let t=e.length,i=0;for(let r=t-1,o=0;o<t;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],r=[],o=[];oH(e),sH(i,e);let s=e.length;t.forEach(oH);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,sH(i,t[l]);let a=cA.triangulate(i,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}};function oH(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function sH(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var A0=class n extends ir{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,h=e/a,p=t/l,g=[],v=[],x=[],y=[];for(let _=0;_<f;_++){let T=_*p-s;for(let M=0;M<u;M++){let C=M*h-o;v.push(C,-T,0),x.push(0,0,1),y.push(M/a),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let T=0;T<a;T++){let M=T+u*_,C=T+u*(_+1),H=T+1+u*(_+1),L=T+1+u*_;g.push(M,C,L),g.push(C,H,L)}this.setIndex(g),this.setAttribute("position",new Zn(v,3)),this.setAttribute("normal",new Zn(x,3)),this.setAttribute("uv",new Zn(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var R0=class n extends ir{constructor(e=new bp([new qe(0,.5),new qe(-.5,-.5),new qe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let i=[],r=[],o=[],s=[],a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Zn(r,3)),this.setAttribute("normal",new Zn(o,3)),this.setAttribute("uv",new Zn(s,2));function u(f){let h=r.length/3,p=f.extractPoints(t),g=p.shape,v=p.holes;bu.isClockWise(g)===!1&&(g=g.reverse());for(let y=0,_=v.length;y<_;y++){let T=v[y];bu.isClockWise(T)===!0&&(v[y]=T.reverse())}let x=bu.triangulateShape(g,v);for(let y=0,_=v.length;y<_;y++){let T=v[y];g=g.concat(T)}for(let y=0,_=g.length;y<_;y++){let T=g[y];r.push(T.x,T.y,0),o.push(0,0,1),s.push(T.x,T.y)}for(let y=0,_=x.length;y<_;y++){let T=x[y],M=T[0]+h,C=T[1]+h,H=T[2]+h;i.push(M,C,H),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return Dae(t,e)}static fromJSON(e,t){let i=[];for(let r=0,o=e.shapes.length;r<o;r++){let s=t[e.shapes[r]];i.push(s)}return new n(i,e.curveSegments)}};function Dae(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){let r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}var $d=class extends yr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=X0,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Rr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Go=class extends $d{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},yl=class extends yr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gt(16777215),this.specular=new gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=X0,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Rr,this.combine=V0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var P0=class extends yr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=X0,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Rr,this.combine=V0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Cb=class extends yr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=WH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Sb=class extends yr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function sb(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Iae(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Aae(n){function e(r,o){return n[r]-n[o]}let t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function aH(n,e,t){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=t[o]*e;for(let l=0;l!==e;++l)r[s++]=n[a+l]}return r}function dz(n,e,t,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(e.push(o.time),t.push(...s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(e.push(o.time),t.push(s)),o=n[r++];while(o!==void 0)}var Tc=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=o)){let a=t[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Eb=class extends Tc{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:nA,endingEnd:nA}}intervalChanged_(e,t,i){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case iA:o=e,a=2*t-i;break;case rA:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case iA:s=e,l=2*i-t;break;case rA:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}let u=(i-t)*.5,f=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),x=v*v,y=x*v,_=-p*y+2*p*x-p*v,T=(1+p)*y+(-1.5-2*p)*x+(-.5+p)*v+1,M=(-1-g)*y+(1.5+g)*x+.5*v,C=g*y-g*x;for(let H=0;H!==a;++H)o[H]=_*s[f+H]+T*s[u+H]+M*s[l+H]+C*s[h+H];return o}},Tb=class extends Tc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=(i-t)/(r-t),h=1-f;for(let p=0;p!==a;++p)o[p]=s[u+p]*h+s[l+p]*f;return o}},Db=class extends Tc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Wo=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=sb(t,this.TimeBufferType),this.values=sb(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:sb(e.times,Array),values:sb(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Db(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Tb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Eb(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bd:t=this.InterpolantFactoryMethodDiscrete;break;case Vd:t=this.InterpolantFactoryMethodLinear;break;case ab:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bd;case this.InterpolantFactoryMethodLinear:return Vd;case this.InterpolantFactoryMethodSmooth:return ab}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(r!==void 0&&Iae(r))for(let a=0,l=r.length;a!==l;++a){let u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===ab,o=e.length-1,s=1;for(let a=1;a<o;++a){let l=!1,u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)l=!0;else{let h=a*i,p=h-i,g=h+i;for(let v=0;v!==i;++v){let x=t[h+v];if(x!==t[p+v]||x!==t[g+v]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];let h=a*i,p=s*i;for(let g=0;g!==i;++g)t[p+g]=t[h+g]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,u=0;u!==i;++u)t[l+u]=t[a+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};Wo.prototype.ValueTypeName="";Wo.prototype.TimeBufferType=Float32Array;Wo.prototype.ValueBufferType=Float32Array;Wo.prototype.DefaultInterpolation=Vd;var Dc=class extends Wo{constructor(e,t,i){super(e,t,i)}};Dc.prototype.ValueTypeName="bool";Dc.prototype.ValueBufferType=Array;Dc.prototype.DefaultInterpolation=Bd;Dc.prototype.InterpolantFactoryMethodLinear=void 0;Dc.prototype.InterpolantFactoryMethodSmooth=void 0;var O0=class extends Wo{constructor(e,t,i,r){super(e,t,i,r)}};O0.prototype.ValueTypeName="color";var zs=class extends Wo{constructor(e,t,i,r){super(e,t,i,r)}};zs.prototype.ValueTypeName="number";var Ib=class extends Tc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t),u=e*a;for(let f=u+a;u!==f;u+=4)Ei.slerpFlat(o,0,s,u-a,s,u,l);return o}},hs=class extends Wo{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new Ib(this.times,this.values,this.getValueSize(),e)}};hs.prototype.ValueTypeName="quaternion";hs.prototype.InterpolantFactoryMethodSmooth=void 0;var Ic=class extends Wo{constructor(e,t,i){super(e,t,i)}};Ic.prototype.ValueTypeName="string";Ic.prototype.ValueBufferType=Array;Ic.prototype.DefaultInterpolation=Bd;Ic.prototype.InterpolantFactoryMethodLinear=void 0;Ic.prototype.InterpolantFactoryMethodSmooth=void 0;var js=class extends Wo{constructor(e,t,i,r){super(e,t,i,r)}};js.prototype.ValueTypeName="vector";var qd=class{constructor(e="",t=-1,i=[],r=GH){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Vs(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(Pae(i[s]).scale(r));let o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)t.push(Wo.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let o=t.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);let f=Aae(l);l=aH(l,1,f),u=aH(u,1,f),!r&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new zs(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){let u=e[a],f=u.name.match(o);if(f&&f.length>1){let h=f[1],p=r[h];p||(r[h]=p=[]),p.push(u)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(h,p,g,v,x){if(g.length!==0){let y=[],_=[];dz(g,y,_,v),y.length!==0&&x.push(new h(p,y,_))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,l=e.length||-1,u=e.hierarchy||[];for(let h=0;h<u.length;h++){let p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){let g={},v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let x=0;x<p[v].morphTargets.length;x++)g[p[v].morphTargets[x]]=-1;for(let x in g){let y=[],_=[];for(let T=0;T!==p[v].morphTargets.length;++T){let M=p[v];y.push(M.time),_.push(M.morphTarget===x?1:0)}r.push(new zs(".morphTargetInfluence["+x+"]",y,_))}l=g.length*s}else{let g=".bones["+t[h].name+"]";i(js,g+".position",p,"pos",r),i(hs,g+".quaternion",p,"rot",r),i(js,g+".scale",p,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Rae(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zs;case"vector":case"vector2":case"vector3":case"vector4":return js;case"color":return O0;case"quaternion":return hs;case"bool":case"boolean":return Dc;case"string":return Ic}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Pae(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=Rae(n.type);if(n.times===void 0){let t=[],i=[];dz(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var bc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},Ab=class{constructor(e,t,i){let r=this,o=!1,s=0,a=0,l,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,o===!1&&r.onStart!==void 0&&r.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,r.onProgress!==void 0&&r.onProgress(f,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){let h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,p=u.length;h<p;h+=2){let g=u[h],v=u[h+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null}}},fz=new Ab,ms=(()=>{class n{constructor(t){this.manager=t!==void 0?t:fz,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),xc={},uA=class extends Error{constructor(e,t){super(e),this.response=t}},_l=class extends ms{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=bc.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(xc[e]!==void 0){xc[e].push({onLoad:t,onProgress:i,onError:r});return}xc[e]=[],xc[e].push({onLoad:t,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let f=xc[e],h=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),g=p?parseInt(p):0,v=g!==0,x=0,y=new ReadableStream({start(_){T();function T(){h.read().then(({done:M,value:C})=>{if(M)_.close();else{x+=C.byteLength;let H=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:g});for(let L=0,k=f.length;L<k;L++){let $=f[L];$.onProgress&&$.onProgress(H)}_.enqueue(C),T()}},M=>{_.error(M)})}}});return new Response(y)}else throw new uA(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a==="")return u.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,g=new TextDecoder(p);return u.arrayBuffer().then(v=>g.decode(v))}}}).then(u=>{bc.add(e,u);let f=xc[e];delete xc[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onLoad&&g.onLoad(u)}}).catch(u=>{let f=xc[e];if(f===void 0)throw this.manager.itemError(e),u;delete xc[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var Rb=class extends ms{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=bc.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;let a=hp("img");function l(){f(),bc.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(h){f(),r&&r(h),o.manager.itemError(e),o.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}};var Xd=class extends ms{constructor(e){super(e)}load(e,t,i,r){let o=new Mo,s=new Rb(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},i,r),o}},Eu=class extends Ti{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new gt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}},N0=class extends Eu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ti.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},JI=new ht,lH=new V,cH=new V,F0=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qe(512,512),this.mapType=Fa,this.map=null,this.mapPass=null,this.matrix=new ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wp,this._frameExtents=new qe(1,1),this._viewportCount=1,this._viewports=[new mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;lH.setFromMatrixPosition(e.matrixWorld),t.position.copy(lH),cH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(cH),t.updateMatrixWorld(),JI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JI),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(JI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},dA=class extends F0{constructor(){super(new qi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=Hd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Yd=class extends Eu{constructor(e,t,i=0,r=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ti.DEFAULT_UP),this.updateMatrix(),this.target=new Ti,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new dA}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},uH=new ht,o0=new V,QI=new V,fA=class extends F0{constructor(){super(new qi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qe(4,2),this._viewportCount=6,this._viewports=[new mn(2,1,1,1),new mn(0,1,1,1),new mn(3,1,1,1),new mn(1,1,1,1),new mn(3,0,1,1),new mn(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),o0.setFromMatrixPosition(e.matrixWorld),i.position.copy(o0),QI.copy(i.position),QI.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(QI),i.updateMatrixWorld(),r.makeTranslation(-o0.x,-o0.y,-o0.z),uH.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uH)}},Tu=class extends Eu{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new fA}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Zd=class extends m0{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-e,s=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},hA=class extends F0{constructor(){super(new Zd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Kd=class extends Eu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ti.DEFAULT_UP),this.updateMatrix(),this.target=new Ti,this.shadow=new hA}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},L0=class extends Eu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var Oa=class{static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var k0=class extends ms{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=bc.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(u=>{t&&t(u),o.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return bc.add(e,u),t&&t(u),o.manager.itemEnd(e),u}).catch(function(u){r&&r(u),bc.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});bc.add(e,l),o.manager.itemStart(e)}};var Pb=class extends qi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var FA="\\[\\]\\.:\\/",Oae=new RegExp("["+FA+"]","g"),LA="[^"+FA+"]",Nae="[^"+FA.replace("\\.","")+"]",Fae=/((?:WC+[\/:])*)/.source.replace("WC",LA),Lae=/(WCOD+)?/.source.replace("WCOD",Nae),kae=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LA),Uae=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LA),Bae=new RegExp("^"+Fae+Lae+kae+Uae+"$"),Vae=["material","materials","bones","map"],pA=class{constructor(e,t,i){let r=i||oi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},oi=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Oae,"")}static parseTrackName(t){let i=Bae.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);Vae.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let u=r(l.children);if(u)return u}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===f){f=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}let a=t[o];if(a===void 0){let f=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+o+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=pA,n})();oi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};oi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};oi.prototype.GetterByBindingType=[oi.prototype._getValue_direct,oi.prototype._getValue_array,oi.prototype._getValue_arrayElement,oi.prototype._getValue_toArray];oi.prototype.SetterByBindingTypeAndVersioning=[[oi.prototype._setValue_direct,oi.prototype._setValue_direct_setNeedsUpdate,oi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_array,oi.prototype._setValue_array_setNeedsUpdate,oi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_arrayElement,oi.prototype._setValue_arrayElement_setNeedsUpdate,oi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_fromArray,oi.prototype._setValue_fromArray_setNeedsUpdate,oi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var N4e=new Float32Array(1);var dH=new ht,U0=class{constructor(e,t,i=0,r=1/0){this.ray=new vl(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new mp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return dH.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(dH),this}intersectObject(e,t=!0,i=[]){return mA(e,this,i,t),i.sort(fH),i}intersectObjects(e,t=!0,i=[]){for(let r=0,o=e.length;r<o;r++)mA(e[r],this,i,t);return i.sort(fH),i}};function fH(n,e){return n.distance-e.distance}function mA(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)mA(o[s],e,t,!0)}}var Cp=class{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=dn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(dn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var B0=class extends ml{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function kA(n,e,t,i){let r=Hae(i);switch(t){case CA:return n*e;case $b:return n*e/r.components*r.byteLength;case qb:return n*e/r.components*r.byteLength;case EA:return n*e*2/r.components*r.byteLength;case Xb:return n*e*2/r.components*r.byteLength;case SA:return n*e*3/r.components*r.byteLength;case ps:return n*e*4/r.components*r.byteLength;case Yb:return n*e*4/r.components*r.byteLength;case z0:case j0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case G0:case W0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Kb:case Qb:return Math.max(n,16)*Math.max(e,8)/4;case Zb:case Jb:return Math.max(n,8)*Math.max(e,8)/2;case eM:case tM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case nM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case iM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case rM:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case oM:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case sM:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case aM:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case lM:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case cM:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case uM:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case dM:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case fM:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case hM:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case pM:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case mM:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case gM:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case $0:case vM:case yM:return Math.ceil(n/4)*Math.ceil(e/4)*16;case TA:case _M:return Math.ceil(n/4)*Math.ceil(e/4)*8;case wM:case xM:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Hae(n){switch(n){case Fa:case xA:return{byteLength:1,components:1};case Tp:case bA:case Dp:return{byteLength:2,components:1};case Gb:case Wb:return{byteLength:2,components:4};case Au:case jb:case Ws:return{byteLength:4,components:1};case MA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ob}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ob);function Lz(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function zae(n){let e=new WeakMap;function t(a,l){let u=a.array,f=a.usage,h=u.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,u,f),a.onUploadCallback();let g;if(u instanceof Float32Array)g=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=n.SHORT;else if(u instanceof Uint32Array)g=n.UNSIGNED_INT;else if(u instanceof Int32Array)g=n.INT;else if(u instanceof Int8Array)g=n.BYTE;else if(u instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,u){let f=l.array,h=l.updateRanges;if(n.bindBuffer(u,a),h.length===0)n.bufferSubData(u,0,f);else{h.sort((g,v)=>g.start-v.start);let p=0;for(let g=1;g<h.length;g++){let v=h[p],x=h[g];x.start<=v.start+v.count+1?v.count=Math.max(v.count,x.start+x.count-v.start):(++p,h[p]=x)}h.length=p+1;for(let g=0,v=h.length;g<v;g++){let x=h[g];n.bufferSubData(u,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:o,update:s}}var jae=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Gae=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Wae=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,$ae=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qae=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Xae=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Yae=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Zae=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Kae=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Jae=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Qae=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ele=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,tle=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,nle=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ile=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,rle=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,ole=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sle=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ale=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,lle=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,cle=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ule=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,dle=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,fle=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,hle=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ple=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,mle=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,gle=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,vle=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,yle=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_le="gl_FragColor = linearToOutputTexel( gl_FragColor );",wle=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,xle=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ble=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Mle=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Cle=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Sle=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ele=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Tle=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Dle=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ile=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ale=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Rle=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ple=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ole=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Nle=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Fle=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Lle=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,kle=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Ule=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ble=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Vle=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Hle=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,zle=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jle=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Gle=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Wle=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,$le=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qle=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Xle=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Yle=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Zle=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Kle=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Jle=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Qle=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ece=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,tce=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,nce=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ice=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,rce=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,oce=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,sce=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,ace=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,lce=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,cce=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uce=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,dce=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,fce=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,hce=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,pce=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,mce=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,gce=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,vce=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,yce=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_ce=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,wce=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,xce=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,bce=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Mce=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Cce=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Sce=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Ece=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Tce=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Dce=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ice=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Ace=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Rce=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Pce=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Oce=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Nce=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Fce=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Lce=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,kce=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Uce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Bce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Vce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Hce=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,zce=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,jce=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Wce=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$ce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,qce=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Xce=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Yce=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Zce=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Kce=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Jce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Qce=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eue=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tue=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nue=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,iue=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rue=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oue=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sue=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,aue=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lue=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,cue=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,uue=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,due=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fue=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,hue=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pue=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mue=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gue=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,vue=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yue=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_ue=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wue=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xue=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gn={alphahash_fragment:jae,alphahash_pars_fragment:Gae,alphamap_fragment:Wae,alphamap_pars_fragment:$ae,alphatest_fragment:qae,alphatest_pars_fragment:Xae,aomap_fragment:Yae,aomap_pars_fragment:Zae,batching_pars_vertex:Kae,batching_vertex:Jae,begin_vertex:Qae,beginnormal_vertex:ele,bsdfs:tle,iridescence_fragment:nle,bumpmap_pars_fragment:ile,clipping_planes_fragment:rle,clipping_planes_pars_fragment:ole,clipping_planes_pars_vertex:sle,clipping_planes_vertex:ale,color_fragment:lle,color_pars_fragment:cle,color_pars_vertex:ule,color_vertex:dle,common:fle,cube_uv_reflection_fragment:hle,defaultnormal_vertex:ple,displacementmap_pars_vertex:mle,displacementmap_vertex:gle,emissivemap_fragment:vle,emissivemap_pars_fragment:yle,colorspace_fragment:_le,colorspace_pars_fragment:wle,envmap_fragment:xle,envmap_common_pars_fragment:ble,envmap_pars_fragment:Mle,envmap_pars_vertex:Cle,envmap_physical_pars_fragment:Fle,envmap_vertex:Sle,fog_vertex:Ele,fog_pars_vertex:Tle,fog_fragment:Dle,fog_pars_fragment:Ile,gradientmap_pars_fragment:Ale,lightmap_pars_fragment:Rle,lights_lambert_fragment:Ple,lights_lambert_pars_fragment:Ole,lights_pars_begin:Nle,lights_toon_fragment:Lle,lights_toon_pars_fragment:kle,lights_phong_fragment:Ule,lights_phong_pars_fragment:Ble,lights_physical_fragment:Vle,lights_physical_pars_fragment:Hle,lights_fragment_begin:zle,lights_fragment_maps:jle,lights_fragment_end:Gle,logdepthbuf_fragment:Wle,logdepthbuf_pars_fragment:$le,logdepthbuf_pars_vertex:qle,logdepthbuf_vertex:Xle,map_fragment:Yle,map_pars_fragment:Zle,map_particle_fragment:Kle,map_particle_pars_fragment:Jle,metalnessmap_fragment:Qle,metalnessmap_pars_fragment:ece,morphinstance_vertex:tce,morphcolor_vertex:nce,morphnormal_vertex:ice,morphtarget_pars_vertex:rce,morphtarget_vertex:oce,normal_fragment_begin:sce,normal_fragment_maps:ace,normal_pars_fragment:lce,normal_pars_vertex:cce,normal_vertex:uce,normalmap_pars_fragment:dce,clearcoat_normal_fragment_begin:fce,clearcoat_normal_fragment_maps:hce,clearcoat_pars_fragment:pce,iridescence_pars_fragment:mce,opaque_fragment:gce,packing:vce,premultiplied_alpha_fragment:yce,project_vertex:_ce,dithering_fragment:wce,dithering_pars_fragment:xce,roughnessmap_fragment:bce,roughnessmap_pars_fragment:Mce,shadowmap_pars_fragment:Cce,shadowmap_pars_vertex:Sce,shadowmap_vertex:Ece,shadowmask_pars_fragment:Tce,skinbase_vertex:Dce,skinning_pars_vertex:Ice,skinning_vertex:Ace,skinnormal_vertex:Rce,specularmap_fragment:Pce,specularmap_pars_fragment:Oce,tonemapping_fragment:Nce,tonemapping_pars_fragment:Fce,transmission_fragment:Lce,transmission_pars_fragment:kce,uv_pars_fragment:Uce,uv_pars_vertex:Bce,uv_vertex:Vce,worldpos_vertex:Hce,background_vert:zce,background_frag:jce,backgroundCube_vert:Gce,backgroundCube_frag:Wce,cube_vert:$ce,cube_frag:qce,depth_vert:Xce,depth_frag:Yce,distanceRGBA_vert:Zce,distanceRGBA_frag:Kce,equirect_vert:Jce,equirect_frag:Qce,linedashed_vert:eue,linedashed_frag:tue,meshbasic_vert:nue,meshbasic_frag:iue,meshlambert_vert:rue,meshlambert_frag:oue,meshmatcap_vert:sue,meshmatcap_frag:aue,meshnormal_vert:lue,meshnormal_frag:cue,meshphong_vert:uue,meshphong_frag:due,meshphysical_vert:fue,meshphysical_frag:hue,meshtoon_vert:pue,meshtoon_frag:mue,points_vert:gue,points_frag:vue,shadow_vert:yue,shadow_frag:_ue,sprite_vert:wue,sprite_frag:xue},nt={common:{diffuse:{value:new gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Qt}},envmap:{envMap:{value:null},envMapRotation:{value:new Qt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Qt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Qt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Qt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Qt},normalScale:{value:new qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Qt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Qt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Qt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Qt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0},uvTransform:{value:new Qt}},sprite:{diffuse:{value:new gt(16777215)},opacity:{value:1},center:{value:new qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}}},xl={basic:{uniforms:ro([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.fog]),vertexShader:gn.meshbasic_vert,fragmentShader:gn.meshbasic_frag},lambert:{uniforms:ro([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new gt(0)}}]),vertexShader:gn.meshlambert_vert,fragmentShader:gn.meshlambert_frag},phong:{uniforms:ro([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new gt(0)},specular:{value:new gt(1118481)},shininess:{value:30}}]),vertexShader:gn.meshphong_vert,fragmentShader:gn.meshphong_frag},standard:{uniforms:ro([nt.common,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.roughnessmap,nt.metalnessmap,nt.fog,nt.lights,{emissive:{value:new gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gn.meshphysical_vert,fragmentShader:gn.meshphysical_frag},toon:{uniforms:ro([nt.common,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.gradientmap,nt.fog,nt.lights,{emissive:{value:new gt(0)}}]),vertexShader:gn.meshtoon_vert,fragmentShader:gn.meshtoon_frag},matcap:{uniforms:ro([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,{matcap:{value:null}}]),vertexShader:gn.meshmatcap_vert,fragmentShader:gn.meshmatcap_frag},points:{uniforms:ro([nt.points,nt.fog]),vertexShader:gn.points_vert,fragmentShader:gn.points_frag},dashed:{uniforms:ro([nt.common,nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gn.linedashed_vert,fragmentShader:gn.linedashed_frag},depth:{uniforms:ro([nt.common,nt.displacementmap]),vertexShader:gn.depth_vert,fragmentShader:gn.depth_frag},normal:{uniforms:ro([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,{opacity:{value:1}}]),vertexShader:gn.meshnormal_vert,fragmentShader:gn.meshnormal_frag},sprite:{uniforms:ro([nt.sprite,nt.fog]),vertexShader:gn.sprite_vert,fragmentShader:gn.sprite_frag},background:{uniforms:{uvTransform:{value:new Qt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:gn.background_vert,fragmentShader:gn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Qt}},vertexShader:gn.backgroundCube_vert,fragmentShader:gn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:gn.cube_vert,fragmentShader:gn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gn.equirect_vert,fragmentShader:gn.equirect_frag},distanceRGBA:{uniforms:ro([nt.common,nt.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gn.distanceRGBA_vert,fragmentShader:gn.distanceRGBA_frag},shadow:{uniforms:ro([nt.lights,nt.fog,{color:{value:new gt(0)},opacity:{value:1}}]),vertexShader:gn.shadow_vert,fragmentShader:gn.shadow_frag}};xl.physical={uniforms:ro([xl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Qt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Qt},clearcoatNormalScale:{value:new qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Qt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Qt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Qt},sheen:{value:0},sheenColor:{value:new gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Qt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Qt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Qt},transmissionSamplerSize:{value:new qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Qt},attenuationDistance:{value:0},attenuationColor:{value:new gt(0)},specularColor:{value:new gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Qt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Qt},anisotropyVector:{value:new qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Qt}}]),vertexShader:gn.meshphysical_vert,fragmentShader:gn.meshphysical_frag};var bM={r:0,b:0,g:0},nf=new Rr,bue=new ht;function Mue(n,e,t,i,r,o,s){let a=new gt(0),l=o===!0?0:1,u,f,h=null,p=0,g=null;function v(M){let C=M.isScene===!0?M.background:null;return C&&C.isTexture&&(C=(M.backgroundBlurriness>0?t:e).get(C)),C}function x(M){let C=!1,H=v(M);H===null?_(a,l):H&&H.isColor&&(_(H,1),C=!0);let L=n.xr.getEnvironmentBlendMode();L==="additive"?i.buffers.color.setClear(0,0,0,1,s):L==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||C)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(M,C){let H=v(C);H&&(H.isCubeTexture||H.mapping===H0)?(f===void 0&&(f=new Di(new gp(1,1,1),new Ra({name:"BackgroundCubeMaterial",uniforms:tf(xl.backgroundCube.uniforms),vertexShader:xl.backgroundCube.vertexShader,fragmentShader:xl.backgroundCube.fragmentShader,side:bo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(L,k,$){this.matrixWorld.copyPosition($.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),nf.copy(C.backgroundRotation),nf.x*=-1,nf.y*=-1,nf.z*=-1,H.isCubeTexture&&H.isRenderTargetTexture===!1&&(nf.y*=-1,nf.z*=-1),f.material.uniforms.envMap.value=H,f.material.uniforms.flipEnvMap.value=H.isCubeTexture&&H.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(bue.makeRotationFromEuler(nf)),f.material.toneMapped=qt.getTransfer(H.colorSpace)!==si,(h!==H||p!==H.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,h=H,p=H.version,g=n.toneMapping),f.layers.enableAll(),M.unshift(f,f.geometry,f.material,0,0,null)):H&&H.isTexture&&(u===void 0&&(u=new Di(new A0(2,2),new Ra({name:"BackgroundMaterial",uniforms:tf(xl.background.uniforms),vertexShader:xl.background.vertexShader,fragmentShader:xl.background.fragmentShader,side:Ia,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=H,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,u.material.toneMapped=qt.getTransfer(H.colorSpace)!==si,H.matrixAutoUpdate===!0&&H.updateMatrix(),u.material.uniforms.uvTransform.value.copy(H.matrix),(h!==H||p!==H.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,h=H,p=H.version,g=n.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null))}function _(M,C){M.getRGB(bM,OA(n)),i.buffers.color.setClear(bM.r,bM.g,bM.b,C,s)}function T(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(M,C=1){a.set(M),l=C,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,_(a,l)},render:x,addToRenderList:y,dispose:T}}function Cue(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null),o=r,s=!1;function a(A,j,he,ae,Re){let Se=!1,Y=h(ae,he,j);o!==Y&&(o=Y,u(o.object)),Se=g(A,ae,he,Re),Se&&v(A,ae,he,Re),Re!==null&&e.update(Re,n.ELEMENT_ARRAY_BUFFER),(Se||s)&&(s=!1,C(A,j,he,ae),Re!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Re).buffer))}function l(){return n.createVertexArray()}function u(A){return n.bindVertexArray(A)}function f(A){return n.deleteVertexArray(A)}function h(A,j,he){let ae=he.wireframe===!0,Re=i[A.id];Re===void 0&&(Re={},i[A.id]=Re);let Se=Re[j.id];Se===void 0&&(Se={},Re[j.id]=Se);let Y=Se[ae];return Y===void 0&&(Y=p(l()),Se[ae]=Y),Y}function p(A){let j=[],he=[],ae=[];for(let Re=0;Re<t;Re++)j[Re]=0,he[Re]=0,ae[Re]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:he,attributeDivisors:ae,object:A,attributes:{},index:null}}function g(A,j,he,ae){let Re=o.attributes,Se=j.attributes,Y=0,ie=he.getAttributes();for(let X in ie)if(ie[X].location>=0){let Ve=Re[X],rt=Se[X];if(rt===void 0&&(X==="instanceMatrix"&&A.instanceMatrix&&(rt=A.instanceMatrix),X==="instanceColor"&&A.instanceColor&&(rt=A.instanceColor)),Ve===void 0||Ve.attribute!==rt||rt&&Ve.data!==rt.data)return!0;Y++}return o.attributesNum!==Y||o.index!==ae}function v(A,j,he,ae){let Re={},Se=j.attributes,Y=0,ie=he.getAttributes();for(let X in ie)if(ie[X].location>=0){let Ve=Se[X];Ve===void 0&&(X==="instanceMatrix"&&A.instanceMatrix&&(Ve=A.instanceMatrix),X==="instanceColor"&&A.instanceColor&&(Ve=A.instanceColor));let rt={};rt.attribute=Ve,Ve&&Ve.data&&(rt.data=Ve.data),Re[X]=rt,Y++}o.attributes=Re,o.attributesNum=Y,o.index=ae}function x(){let A=o.newAttributes;for(let j=0,he=A.length;j<he;j++)A[j]=0}function y(A){_(A,0)}function _(A,j){let he=o.newAttributes,ae=o.enabledAttributes,Re=o.attributeDivisors;he[A]=1,ae[A]===0&&(n.enableVertexAttribArray(A),ae[A]=1),Re[A]!==j&&(n.vertexAttribDivisor(A,j),Re[A]=j)}function T(){let A=o.newAttributes,j=o.enabledAttributes;for(let he=0,ae=j.length;he<ae;he++)j[he]!==A[he]&&(n.disableVertexAttribArray(he),j[he]=0)}function M(A,j,he,ae,Re,Se,Y){Y===!0?n.vertexAttribIPointer(A,j,he,Re,Se):n.vertexAttribPointer(A,j,he,ae,Re,Se)}function C(A,j,he,ae){x();let Re=ae.attributes,Se=he.getAttributes(),Y=j.defaultAttributeValues;for(let ie in Se){let X=Se[ie];if(X.location>=0){let _e=Re[ie];if(_e===void 0&&(ie==="instanceMatrix"&&A.instanceMatrix&&(_e=A.instanceMatrix),ie==="instanceColor"&&A.instanceColor&&(_e=A.instanceColor)),_e!==void 0){let Ve=_e.normalized,rt=_e.itemSize,ge=e.get(_e);if(ge===void 0)continue;let re=ge.buffer,B=ge.type,J=ge.bytesPerElement,xe=B===n.INT||B===n.UNSIGNED_INT||_e.gpuType===jb;if(_e.isInterleavedBufferAttribute){let se=_e.data,je=se.stride,We=_e.offset;if(se.isInstancedInterleavedBuffer){for(let Ue=0;Ue<X.locationSize;Ue++)_(X.location+Ue,se.meshPerAttribute);A.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Ue=0;Ue<X.locationSize;Ue++)y(X.location+Ue);n.bindBuffer(n.ARRAY_BUFFER,re);for(let Ue=0;Ue<X.locationSize;Ue++)M(X.location+Ue,rt/X.locationSize,B,Ve,je*J,(We+rt/X.locationSize*Ue)*J,xe)}else{if(_e.isInstancedBufferAttribute){for(let se=0;se<X.locationSize;se++)_(X.location+se,_e.meshPerAttribute);A.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let se=0;se<X.locationSize;se++)y(X.location+se);n.bindBuffer(n.ARRAY_BUFFER,re);for(let se=0;se<X.locationSize;se++)M(X.location+se,rt/X.locationSize,B,Ve,rt*J,rt/X.locationSize*se*J,xe)}}else if(Y!==void 0){let Ve=Y[ie];if(Ve!==void 0)switch(Ve.length){case 2:n.vertexAttrib2fv(X.location,Ve);break;case 3:n.vertexAttrib3fv(X.location,Ve);break;case 4:n.vertexAttrib4fv(X.location,Ve);break;default:n.vertexAttrib1fv(X.location,Ve)}}}}T()}function H(){$();for(let A in i){let j=i[A];for(let he in j){let ae=j[he];for(let Re in ae)f(ae[Re].object),delete ae[Re];delete j[he]}delete i[A]}}function L(A){if(i[A.id]===void 0)return;let j=i[A.id];for(let he in j){let ae=j[he];for(let Re in ae)f(ae[Re].object),delete ae[Re];delete j[he]}delete i[A.id]}function k(A){for(let j in i){let he=i[j];if(he[A.id]===void 0)continue;let ae=he[A.id];for(let Re in ae)f(ae[Re].object),delete ae[Re];delete he[A.id]}}function $(){N(),s=!0,o!==r&&(o=r,u(o.object))}function N(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:$,resetDefaultState:N,dispose:H,releaseStatesOfGeometry:L,releaseStatesOfProgram:k,initAttributes:x,enableAttribute:y,disableUnusedAttributes:T}}function Sue(n,e,t){let i;function r(u){i=u}function o(u,f){n.drawArrays(i,u,f),t.update(f,i,1)}function s(u,f,h){h!==0&&(n.drawArraysInstanced(i,u,f,h),t.update(f,i,h))}function a(u,f,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,f,0,h);let g=0;for(let v=0;v<h;v++)g+=f[v];t.update(g,i,1)}function l(u,f,h,p){if(h===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<u.length;v++)s(u[v],f[v],p[v]);else{g.multiDrawArraysInstancedWEBGL(i,u,0,f,0,p,0,h);let v=0;for(let x=0;x<h;x++)v+=f[x]*p[x];t.update(v,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Eue(n,e,t,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let k=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(k){return!(k!==ps&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(k){let $=k===Dp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==Fa&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==Ws&&!$)}function l(k){if(k==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp",f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);let h=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),H=v>0,L=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:p,maxTextures:g,maxVertexTextures:v,maxTextureSize:x,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:T,maxVaryings:M,maxFragmentUniforms:C,vertexTextures:H,maxSamples:L}}function Tue(n){let e=this,t=null,i=0,r=!1,o=!1,s=new Bs,a=new Qt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){let g=h.length!==0||p||i!==0||r;return r=p,i=h.length,g},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,p){t=f(h,p,0)},this.setState=function(h,p,g){let v=h.clippingPlanes,x=h.clipIntersection,y=h.clipShadows,_=n.get(h);if(!r||v===null||v.length===0||o&&!y)o?f(null):u();else{let T=o?0:i,M=T*4,C=_.clippingState||null;l.value=C,C=f(v,p,M,g);for(let H=0;H!==M;++H)C[H]=t[H];_.clippingState=C,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=T}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(h,p,g,v){let x=h!==null?h.length:0,y=null;if(x!==0){if(y=l.value,v!==!0||y===null){let _=g+x*4,T=p.matrixWorldInverse;a.getNormalMatrix(T),(y===null||y.length<_)&&(y=new Float32Array(_));for(let M=0,C=g;M!==x;++M,C+=4)s.copy(h[M]).applyMatrix4(T,a),s.normal.toArray(y,C),y[C+3]=s.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,y}}function Due(n){let e=new WeakMap;function t(s,a){return a===Sp?s.mapping=Jd:a===Hb&&(s.mapping=Qd),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===Sp||a===Hb)if(e.has(s)){let l=e.get(s).texture;return t(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new mb(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",r),t(u.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}var Op=4,hz=[.125,.215,.35,.446,.526,.582],sf=20,UA=new Zd,pz=new gt,BA=null,VA=0,HA=0,zA=!1,of=(1+Math.sqrt(5))/2,Pp=1/of,mz=[new V(-of,Pp,0),new V(of,Pp,0),new V(-Pp,0,of),new V(Pp,0,of),new V(0,of,-Pp),new V(0,of,Pp),new V(-1,1,-1),new V(1,1,-1),new V(-1,1,1),new V(1,1,1)],Iue=new V,SM=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,o={}){let{size:s=256,position:a=Iue}=o;BA=this._renderer.getRenderTarget(),VA=this._renderer.getActiveCubeFace(),HA=this._renderer.getActiveMipmapLevel(),zA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=yz(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=vz(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(BA,VA,HA),this._renderer.xr.enabled=zA,e.scissorTest=!1,MM(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Jd||e.mapping===Qd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),BA=this._renderer.getRenderTarget(),VA=this._renderer.getActiveCubeFace(),HA=this._renderer.getActiveMipmapLevel(),zA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:_o,minFilter:_o,generateMipmaps:!1,type:Dp,format:ps,colorSpace:zr,depthBuffer:!1},r=gz(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=gz(e,t,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Aue(o)),this._blurMaterial=Rue(o,e,t)}return r}_compileMaterial(e){let t=new Di(this._lodPlanes[0],e);this._renderer.compile(t,UA)}_sceneToCubeUV(e,t,i,r,o){let l=new qi(90,1,t,i),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,g=h.toneMapping;h.getClearColor(pz),h.toneMapping=Rc,h.autoClear=!1;let v=new fs({name:"PMREM.Background",side:bo,depthWrite:!1,depthTest:!1}),x=new Di(new gp,v),y=!1,_=e.background;_?_.isColor&&(v.color.copy(_),e.background=null,y=!0):(v.color.copy(pz),y=!0);for(let T=0;T<6;T++){let M=T%3;M===0?(l.up.set(0,u[T],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+f[T],o.y,o.z)):M===1?(l.up.set(0,0,u[T]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+f[T],o.z)):(l.up.set(0,u[T],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+f[T]));let C=this._cubeSize;MM(r,M*C,T>2?C:0,C,C),h.setRenderTarget(r),y&&h.render(x,l),h.render(e,l)}x.geometry.dispose(),x.material.dispose(),h.toneMapping=g,h.autoClear=p,e.background=_}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Jd||e.mapping===Qd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=yz()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=vz());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new Di(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let l=this._cubeSize;MM(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,UA)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=mz[(r-o-1)%mz.length];this._blur(e,o-1,o,s,a)}t.autoClear=i}_blur(e,t,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){let l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,h=new Di(this._lodPlanes[r],u),p=u.uniforms,g=this._sizeLods[i]-1,v=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*sf-1),x=o/v,y=isFinite(o)?1+Math.floor(f*x):sf;y>sf&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${sf}`);let _=[],T=0;for(let k=0;k<sf;++k){let $=k/x,N=Math.exp(-$*$/2);_.push(N),k===0?T+=N:k<y&&(T+=2*N)}for(let k=0;k<_.length;k++)_[k]=_[k]/T;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=_,p.latitudinal.value=s==="latitudinal",a&&(p.poleAxis.value=a);let{_lodMax:M}=this;p.dTheta.value=v,p.mipInt.value=M-i;let C=this._sizeLods[r],H=3*C*(r>M-Op?r-M+Op:0),L=4*(this._cubeSize-C);MM(t,H,L,3*C,2*C),l.setRenderTarget(t),l.render(h,UA)}};function Aue(n){let e=[],t=[],i=[],r=n,o=n-Op+1+hz.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);t.push(a);let l=1/a;s>n-Op?l=hz[s-n+Op-1]:s===0&&(l=0),i.push(l);let u=1/(a-2),f=-u,h=1+u,p=[f,f,h,f,h,h,f,f,h,h,f,h],g=6,v=6,x=3,y=2,_=1,T=new Float32Array(x*v*g),M=new Float32Array(y*v*g),C=new Float32Array(_*v*g);for(let L=0;L<g;L++){let k=L%3*2/3-1,$=L>2?0:-1,N=[k,$,0,k+2/3,$,0,k+2/3,$+1,0,k,$,0,k+2/3,$+1,0,k,$+1,0];T.set(N,x*v*L),M.set(p,y*v*L);let A=[L,L,L,L,L,L];C.set(A,_*v*L)}let H=new ir;H.setAttribute("position",new cr(T,x)),H.setAttribute("uv",new cr(M,y)),H.setAttribute("faceIndex",new cr(C,_)),e.push(H),r>Op&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function gz(n,e,t){let i=new gl(n,e,t);return i.texture.mapping=H0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function MM(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Rue(n,e,t){let i=new Float32Array(sf),r=new V(0,1,0);return new Ra({name:"SphericalGaussianBlur",defines:{n:sf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:JA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ac,depthTest:!1,depthWrite:!1})}function vz(){return new Ra({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:JA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ac,depthTest:!1,depthWrite:!1})}function yz(){return new Ra({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:JA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ac,depthTest:!1,depthWrite:!1})}function JA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Pue(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let l=a.mapping,u=l===Sp||l===Hb,f=l===Jd||l===Qd;if(u||f){let h=e.get(a),p=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new SM(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{let g=a.image;return u&&g&&g.height>0||f&&g&&r(g)?(t===null&&(t=new SM(n)),h=u?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let l=0,u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function o(a){let l=a.target;l.removeEventListener("dispose",o);let u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function Oue(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&Y0("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Nue(n,e,t,i){let r={},o=new WeakMap;function s(h){let p=h.target;p.index!==null&&e.remove(p.index);for(let v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",s),delete r[p.id];let g=o.get(p);g&&(e.remove(g),o.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",s),r[p.id]=!0,t.memory.geometries++),p}function l(h){let p=h.attributes;for(let g in p)e.update(p[g],n.ARRAY_BUFFER)}function u(h){let p=[],g=h.index,v=h.attributes.position,x=0;if(g!==null){let T=g.array;x=g.version;for(let M=0,C=T.length;M<C;M+=3){let H=T[M+0],L=T[M+1],k=T[M+2];p.push(H,L,L,k,k,H)}}else if(v!==void 0){let T=v.array;x=v.version;for(let M=0,C=T.length/3-1;M<C;M+=3){let H=M+0,L=M+1,k=M+2;p.push(H,L,L,k,k,H)}}else return;let y=new(PA(p)?p0:zd)(p,1);y.version=x;let _=o.get(h);_&&e.remove(_),o.set(h,y)}function f(h){let p=o.get(h);if(p){let g=h.index;g!==null&&p.version<g.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:f}}function Fue(n,e,t){let i;function r(p){i=p}let o,s;function a(p){o=p.type,s=p.bytesPerElement}function l(p,g){n.drawElements(i,g,o,p*s),t.update(g,i,1)}function u(p,g,v){v!==0&&(n.drawElementsInstanced(i,g,o,p*s,v),t.update(g,i,v))}function f(p,g,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,o,p,0,v);let y=0;for(let _=0;_<v;_++)y+=g[_];t.update(y,i,1)}function h(p,g,v,x){if(v===0)return;let y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<p.length;_++)u(p[_]/s,g[_],x[_]);else{y.multiDrawElementsInstancedWEBGL(i,g,0,o,p,0,x,0,v);let _=0;for(let T=0;T<v;T++)_+=g[T]*x[T];t.update(_,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function Lue(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function kue(n,e,t){let i=new WeakMap,r=new mn;function o(s,a,l){let u=s.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0,p=i.get(a);if(p===void 0||p.count!==h){let A=function(){$.dispose(),i.delete(a),a.removeEventListener("dispose",A)};var g=A;p!==void 0&&p.texture.dispose();let v=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],T=a.morphAttributes.normal||[],M=a.morphAttributes.color||[],C=0;v===!0&&(C=1),x===!0&&(C=2),y===!0&&(C=3);let H=a.attributes.position.count*C,L=1;H>e.maxTextureSize&&(L=Math.ceil(H/e.maxTextureSize),H=e.maxTextureSize);let k=new Float32Array(H*L*4*h),$=new h0(k,H,L,h);$.type=Ws,$.needsUpdate=!0;let N=C*4;for(let j=0;j<h;j++){let he=_[j],ae=T[j],Re=M[j],Se=H*L*4*j;for(let Y=0;Y<he.count;Y++){let ie=Y*N;v===!0&&(r.fromBufferAttribute(he,Y),k[Se+ie+0]=r.x,k[Se+ie+1]=r.y,k[Se+ie+2]=r.z,k[Se+ie+3]=0),x===!0&&(r.fromBufferAttribute(ae,Y),k[Se+ie+4]=r.x,k[Se+ie+5]=r.y,k[Se+ie+6]=r.z,k[Se+ie+7]=0),y===!0&&(r.fromBufferAttribute(Re,Y),k[Se+ie+8]=r.x,k[Se+ie+9]=r.y,k[Se+ie+10]=r.z,k[Se+ie+11]=Re.itemSize===4?r.w:1)}}p={count:h,texture:$,size:new qe(H,L)},i.set(a,p),a.addEventListener("dispose",A)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let v=0;for(let y=0;y<u.length;y++)v+=u[y];let x=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:o}}function Uue(n,e,t,i){let r=new WeakMap;function o(l){let u=i.render.frame,f=l.geometry,h=e.get(l,f);if(r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){let p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return h}function s(){r=new WeakMap}function a(l){let u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:o,dispose:s}}var kz=new Mo,_z=new x0(1,1),Uz=new h0,Bz=new hb,Vz=new g0,wz=[],xz=[],bz=new Float32Array(16),Mz=new Float32Array(9),Cz=new Float32Array(4);function Fp(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,o=wz[r];if(o===void 0&&(o=new Float32Array(r),wz[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function _r(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function wr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function TM(n,e){let t=xz[e];t===void 0&&(t=new Int32Array(e),xz[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Bue(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Vue(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_r(t,e))return;n.uniform2fv(this.addr,e),wr(t,e)}}function Hue(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(_r(t,e))return;n.uniform3fv(this.addr,e),wr(t,e)}}function zue(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_r(t,e))return;n.uniform4fv(this.addr,e),wr(t,e)}}function jue(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(_r(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),wr(t,e)}else{if(_r(t,i))return;Cz.set(i),n.uniformMatrix2fv(this.addr,!1,Cz),wr(t,i)}}function Gue(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(_r(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),wr(t,e)}else{if(_r(t,i))return;Mz.set(i),n.uniformMatrix3fv(this.addr,!1,Mz),wr(t,i)}}function Wue(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(_r(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),wr(t,e)}else{if(_r(t,i))return;bz.set(i),n.uniformMatrix4fv(this.addr,!1,bz),wr(t,i)}}function $ue(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function que(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_r(t,e))return;n.uniform2iv(this.addr,e),wr(t,e)}}function Xue(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(_r(t,e))return;n.uniform3iv(this.addr,e),wr(t,e)}}function Yue(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_r(t,e))return;n.uniform4iv(this.addr,e),wr(t,e)}}function Zue(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Kue(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_r(t,e))return;n.uniform2uiv(this.addr,e),wr(t,e)}}function Jue(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(_r(t,e))return;n.uniform3uiv(this.addr,e),wr(t,e)}}function Que(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_r(t,e))return;n.uniform4uiv(this.addr,e),wr(t,e)}}function ede(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(_z.compareFunction=IA,o=_z):o=kz,t.setTexture2D(e||o,r)}function tde(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Bz,r)}function nde(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Vz,r)}function ide(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Uz,r)}function rde(n){switch(n){case 5126:return Bue;case 35664:return Vue;case 35665:return Hue;case 35666:return zue;case 35674:return jue;case 35675:return Gue;case 35676:return Wue;case 5124:case 35670:return $ue;case 35667:case 35671:return que;case 35668:case 35672:return Xue;case 35669:case 35673:return Yue;case 5125:return Zue;case 36294:return Kue;case 36295:return Jue;case 36296:return Que;case 35678:case 36198:case 36298:case 36306:case 35682:return ede;case 35679:case 36299:case 36307:return tde;case 35680:case 36300:case 36308:case 36293:return nde;case 36289:case 36303:case 36311:case 36292:return ide}}function ode(n,e){n.uniform1fv(this.addr,e)}function sde(n,e){let t=Fp(e,this.size,2);n.uniform2fv(this.addr,t)}function ade(n,e){let t=Fp(e,this.size,3);n.uniform3fv(this.addr,t)}function lde(n,e){let t=Fp(e,this.size,4);n.uniform4fv(this.addr,t)}function cde(n,e){let t=Fp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ude(n,e){let t=Fp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function dde(n,e){let t=Fp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function fde(n,e){n.uniform1iv(this.addr,e)}function hde(n,e){n.uniform2iv(this.addr,e)}function pde(n,e){n.uniform3iv(this.addr,e)}function mde(n,e){n.uniform4iv(this.addr,e)}function gde(n,e){n.uniform1uiv(this.addr,e)}function vde(n,e){n.uniform2uiv(this.addr,e)}function yde(n,e){n.uniform3uiv(this.addr,e)}function _de(n,e){n.uniform4uiv(this.addr,e)}function wde(n,e,t){let i=this.cache,r=e.length,o=TM(t,r);_r(i,o)||(n.uniform1iv(this.addr,o),wr(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||kz,o[s])}function xde(n,e,t){let i=this.cache,r=e.length,o=TM(t,r);_r(i,o)||(n.uniform1iv(this.addr,o),wr(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||Bz,o[s])}function bde(n,e,t){let i=this.cache,r=e.length,o=TM(t,r);_r(i,o)||(n.uniform1iv(this.addr,o),wr(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||Vz,o[s])}function Mde(n,e,t){let i=this.cache,r=e.length,o=TM(t,r);_r(i,o)||(n.uniform1iv(this.addr,o),wr(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||Uz,o[s])}function Cde(n){switch(n){case 5126:return ode;case 35664:return sde;case 35665:return ade;case 35666:return lde;case 35674:return cde;case 35675:return ude;case 35676:return dde;case 5124:case 35670:return fde;case 35667:case 35671:return hde;case 35668:case 35672:return pde;case 35669:case 35673:return mde;case 5125:return gde;case 36294:return vde;case 36295:return yde;case 36296:return _de;case 35678:case 36198:case 36298:case 36306:case 35682:return wde;case 35679:case 36299:case 36307:return xde;case 35680:case 36300:case 36308:case 36293:return bde;case 36289:case 36303:case 36311:case 36292:return Mde}}var GA=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=rde(t.type)}},WA=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Cde(t.type)}},$A=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,t[a.id],i)}}},jA=/(\w+)(\])?(\[|\.)?/g;function Sz(n,e){n.seq.push(e),n.map[e.id]=e}function Sde(n,e,t){let i=n.name,r=i.length;for(jA.lastIndex=0;;){let o=jA.exec(i),s=jA.lastIndex,a=o[1],l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===r){Sz(t,u===void 0?new GA(a,n,e):new WA(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new $A(a),Sz(t,h)),t=h}}}var Np=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=e.getActiveUniform(t,r),s=e.getUniformLocation(t,o.name);Sde(o,s,this)}}setValue(e,t,i,r){let o=this.map[t];o!==void 0&&o.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){let a=t[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function Ez(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var Ede=37297,Tde=0;function Dde(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join(`
`)}var Tz=new Qt;function Ide(n){qt._getMatrix(Tz,qt.workingColorSpace,n);let e=`mat3( ${Tz.elements.map(t=>t.toFixed(4))} )`;switch(qt.getTransfer(n)){case d0:return[e,"LinearTransferOETF"];case si:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Dz(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+Dde(n.getShaderSource(e),s)}else return r}function Ade(n,e){let t=Ide(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Rde(n,e){let t;switch(e){case LH:t="Linear";break;case kH:t="Reinhard";break;case UH:t="Cineon";break;case BH:t="ACESFilmic";break;case HH:t="AgX";break;case zH:t="Neutral";break;case VH:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var CM=new V;function Pde(){qt.getLuminanceCoefficients(CM);let n=CM.x.toFixed(4),e=CM.y.toFixed(4),t=CM.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Ode(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Z0).join(`
`)}function Nde(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Fde(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function Z0(n){return n!==""}function Iz(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Az(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Lde=/^[ \t]*#include +<([\w\d./]+)>/gm;function qA(n){return n.replace(Lde,Ude)}var kde=new Map;function Ude(n,e){let t=gn[e];if(t===void 0){let i=kde.get(e);if(i!==void 0)t=gn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return qA(t)}var Bde=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Rz(n){return n.replace(Bde,Vde)}function Vde(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Pz(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Hde(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===vA?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===mH?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===wl&&(e="SHADOWMAP_TYPE_VSM"),e}function zde(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Jd:case Qd:e="ENVMAP_TYPE_CUBE";break;case H0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function jde(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Qd:e="ENVMAP_MODE_REFRACTION";break}return e}function Gde(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case V0:e="ENVMAP_BLENDING_MULTIPLY";break;case NH:e="ENVMAP_BLENDING_MIX";break;case FH:e="ENVMAP_BLENDING_ADD";break}return e}function Wde(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function $de(n,e,t,i){let r=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,l=Hde(t),u=zde(t),f=jde(t),h=Gde(t),p=Wde(t),g=Ode(t),v=Nde(o),x=r.createProgram(),y,_,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Z0).join(`
`),y.length>0&&(y+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Z0).join(`
`),_.length>0&&(_+=`
`)):(y=[Pz(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Z0).join(`
`),_=[Pz(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Rc?"#define TONE_MAPPING":"",t.toneMapping!==Rc?gn.tonemapping_pars_fragment:"",t.toneMapping!==Rc?Rde("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",gn.colorspace_pars_fragment,Ade("linearToOutputTexel",t.outputColorSpace),Pde(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Z0).join(`
`)),s=qA(s),s=Iz(s,t),s=Az(s,t),a=qA(a),a=Iz(a,t),a=Az(a,t),s=Rz(s),a=Rz(a),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,y=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===AA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===AA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);let M=T+y+s,C=T+_+a,H=Ez(r,r.VERTEX_SHADER,M),L=Ez(r,r.FRAGMENT_SHADER,C);r.attachShader(x,H),r.attachShader(x,L),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function k(j){if(n.debug.checkShaderErrors){let he=r.getProgramInfoLog(x).trim(),ae=r.getShaderInfoLog(H).trim(),Re=r.getShaderInfoLog(L).trim(),Se=!0,Y=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(Se=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,H,L);else{let ie=Dz(r,H,"vertex"),X=Dz(r,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+he+`
`+ie+`
`+X)}else he!==""?console.warn("THREE.WebGLProgram: Program Info Log:",he):(ae===""||Re==="")&&(Y=!1);Y&&(j.diagnostics={runnable:Se,programLog:he,vertexShader:{log:ae,prefix:y},fragmentShader:{log:Re,prefix:_}})}r.deleteShader(H),r.deleteShader(L),$=new Np(r,x),N=Fde(r,x)}let $;this.getUniforms=function(){return $===void 0&&k(this),$};let N;this.getAttributes=function(){return N===void 0&&k(this),N};let A=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return A===!1&&(A=r.getProgramParameter(x,Ede)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Tde++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=H,this.fragmentShader=L,this}var qde=0,XA=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new YA(e),t.set(e,i)),i}},YA=class{constructor(e){this.id=qde++,this.code=e,this.usedTimes=0}};function Xde(n,e,t,i,r,o,s){let a=new mp,l=new XA,u=new Set,f=[],h=r.logarithmicDepthBuffer,p=r.vertexTextures,g=r.precision,v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(N){return u.add(N),N===0?"uv":`uv${N}`}function y(N,A,j,he,ae){let Re=he.fog,Se=ae.geometry,Y=N.isMeshStandardMaterial?he.environment:null,ie=(N.isMeshStandardMaterial?t:e).get(N.envMap||Y),X=ie&&ie.mapping===H0?ie.image.height:null,_e=v[N.type];N.precision!==null&&(g=r.getMaxPrecision(N.precision),g!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",g,"instead."));let Ve=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,rt=Ve!==void 0?Ve.length:0,ge=0;Se.morphAttributes.position!==void 0&&(ge=1),Se.morphAttributes.normal!==void 0&&(ge=2),Se.morphAttributes.color!==void 0&&(ge=3);let re,B,J,xe;if(_e){let Nn=xl[_e];re=Nn.vertexShader,B=Nn.fragmentShader}else re=N.vertexShader,B=N.fragmentShader,l.update(N),J=l.getVertexShaderID(N),xe=l.getFragmentShaderID(N);let se=n.getRenderTarget(),je=n.state.buffers.depth.getReversed(),We=ae.isInstancedMesh===!0,Ue=ae.isBatchedMesh===!0,at=!!N.map,wt=!!N.matcap,pt=!!ie,z=!!N.aoMap,nn=!!N.lightMap,$e=!!N.bumpMap,Nt=!!N.normalMap,Ke=!!N.displacementMap,Xt=!!N.emissiveMap,vt=!!N.metalnessMap,F=!!N.roughnessMap,S=N.anisotropy>0,oe=N.clearcoat>0,Ce=N.dispersion>0,Pe=N.iridescence>0,fe=N.sheen>0,Ye=N.transmission>0,Ze=S&&!!N.anisotropyMap,bt=oe&&!!N.clearcoatMap,Mt=oe&&!!N.clearcoatNormalMap,ke=oe&&!!N.clearcoatRoughnessMap,ot=Pe&&!!N.iridescenceMap,Ct=Pe&&!!N.iridescenceThicknessMap,At=fe&&!!N.sheenColorMap,st=fe&&!!N.sheenRoughnessMap,vn=!!N.specularMap,Yt=!!N.specularColorMap,Xn=!!N.specularIntensityMap,Z=Ye&&!!N.transmissionMap,Qe=Ye&&!!N.thicknessMap,pe=!!N.gradientMap,De=!!N.alphaMap,it=N.alphaTest>0,Je=!!N.alphaHash,Ut=!!N.extensions,ui=Rc;N.toneMapped&&(se===null||se.isXRRenderTarget===!0)&&(ui=n.toneMapping);let Xi={shaderID:_e,shaderType:N.type,shaderName:N.name,vertexShader:re,fragmentShader:B,defines:N.defines,customVertexShaderID:J,customFragmentShaderID:xe,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:g,batching:Ue,batchingColor:Ue&&ae._colorsTexture!==null,instancing:We,instancingColor:We&&ae.instanceColor!==null,instancingMorph:We&&ae.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:se===null?n.outputColorSpace:se.isXRRenderTarget===!0?se.texture.colorSpace:zr,alphaToCoverage:!!N.alphaToCoverage,map:at,matcap:wt,envMap:pt,envMapMode:pt&&ie.mapping,envMapCubeUVHeight:X,aoMap:z,lightMap:nn,bumpMap:$e,normalMap:Nt,displacementMap:p&&Ke,emissiveMap:Xt,normalMapObjectSpace:Nt&&N.normalMapType===qH,normalMapTangentSpace:Nt&&N.normalMapType===X0,metalnessMap:vt,roughnessMap:F,anisotropy:S,anisotropyMap:Ze,clearcoat:oe,clearcoatMap:bt,clearcoatNormalMap:Mt,clearcoatRoughnessMap:ke,dispersion:Ce,iridescence:Pe,iridescenceMap:ot,iridescenceThicknessMap:Ct,sheen:fe,sheenColorMap:At,sheenRoughnessMap:st,specularMap:vn,specularColorMap:Yt,specularIntensityMap:Xn,transmission:Ye,transmissionMap:Z,thicknessMap:Qe,gradientMap:pe,opaque:N.transparent===!1&&N.blending===kd&&N.alphaToCoverage===!1,alphaMap:De,alphaTest:it,alphaHash:Je,combine:N.combine,mapUv:at&&x(N.map.channel),aoMapUv:z&&x(N.aoMap.channel),lightMapUv:nn&&x(N.lightMap.channel),bumpMapUv:$e&&x(N.bumpMap.channel),normalMapUv:Nt&&x(N.normalMap.channel),displacementMapUv:Ke&&x(N.displacementMap.channel),emissiveMapUv:Xt&&x(N.emissiveMap.channel),metalnessMapUv:vt&&x(N.metalnessMap.channel),roughnessMapUv:F&&x(N.roughnessMap.channel),anisotropyMapUv:Ze&&x(N.anisotropyMap.channel),clearcoatMapUv:bt&&x(N.clearcoatMap.channel),clearcoatNormalMapUv:Mt&&x(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ke&&x(N.clearcoatRoughnessMap.channel),iridescenceMapUv:ot&&x(N.iridescenceMap.channel),iridescenceThicknessMapUv:Ct&&x(N.iridescenceThicknessMap.channel),sheenColorMapUv:At&&x(N.sheenColorMap.channel),sheenRoughnessMapUv:st&&x(N.sheenRoughnessMap.channel),specularMapUv:vn&&x(N.specularMap.channel),specularColorMapUv:Yt&&x(N.specularColorMap.channel),specularIntensityMapUv:Xn&&x(N.specularIntensityMap.channel),transmissionMapUv:Z&&x(N.transmissionMap.channel),thicknessMapUv:Qe&&x(N.thicknessMap.channel),alphaMapUv:De&&x(N.alphaMap.channel),vertexTangents:!!Se.attributes.tangent&&(Nt||S),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!Se.attributes.color&&Se.attributes.color.itemSize===4,pointsUvs:ae.isPoints===!0&&!!Se.attributes.uv&&(at||De),fog:!!Re,useFog:N.fog===!0,fogExp2:!!Re&&Re.isFogExp2,flatShading:N.flatShading===!0,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:je,skinning:ae.isSkinnedMesh===!0,morphTargets:Se.morphAttributes.position!==void 0,morphNormals:Se.morphAttributes.normal!==void 0,morphColors:Se.morphAttributes.color!==void 0,morphTargetsCount:rt,morphTextureStride:ge,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:N.dithering,shadowMapEnabled:n.shadowMap.enabled&&j.length>0,shadowMapType:n.shadowMap.type,toneMapping:ui,decodeVideoTexture:at&&N.map.isVideoTexture===!0&&qt.getTransfer(N.map.colorSpace)===si,decodeVideoTextureEmissive:Xt&&N.emissiveMap.isVideoTexture===!0&&qt.getTransfer(N.emissiveMap.colorSpace)===si,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===Gs,flipSided:N.side===bo,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:Ut&&N.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ut&&N.extensions.multiDraw===!0||Ue)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return Xi.vertexUv1s=u.has(1),Xi.vertexUv2s=u.has(2),Xi.vertexUv3s=u.has(3),u.clear(),Xi}function _(N){let A=[];if(N.shaderID?A.push(N.shaderID):(A.push(N.customVertexShaderID),A.push(N.customFragmentShaderID)),N.defines!==void 0)for(let j in N.defines)A.push(j),A.push(N.defines[j]);return N.isRawShaderMaterial===!1&&(T(A,N),M(A,N),A.push(n.outputColorSpace)),A.push(N.customProgramCacheKey),A.join()}function T(N,A){N.push(A.precision),N.push(A.outputColorSpace),N.push(A.envMapMode),N.push(A.envMapCubeUVHeight),N.push(A.mapUv),N.push(A.alphaMapUv),N.push(A.lightMapUv),N.push(A.aoMapUv),N.push(A.bumpMapUv),N.push(A.normalMapUv),N.push(A.displacementMapUv),N.push(A.emissiveMapUv),N.push(A.metalnessMapUv),N.push(A.roughnessMapUv),N.push(A.anisotropyMapUv),N.push(A.clearcoatMapUv),N.push(A.clearcoatNormalMapUv),N.push(A.clearcoatRoughnessMapUv),N.push(A.iridescenceMapUv),N.push(A.iridescenceThicknessMapUv),N.push(A.sheenColorMapUv),N.push(A.sheenRoughnessMapUv),N.push(A.specularMapUv),N.push(A.specularColorMapUv),N.push(A.specularIntensityMapUv),N.push(A.transmissionMapUv),N.push(A.thicknessMapUv),N.push(A.combine),N.push(A.fogExp2),N.push(A.sizeAttenuation),N.push(A.morphTargetsCount),N.push(A.morphAttributeCount),N.push(A.numDirLights),N.push(A.numPointLights),N.push(A.numSpotLights),N.push(A.numSpotLightMaps),N.push(A.numHemiLights),N.push(A.numRectAreaLights),N.push(A.numDirLightShadows),N.push(A.numPointLightShadows),N.push(A.numSpotLightShadows),N.push(A.numSpotLightShadowsWithMaps),N.push(A.numLightProbes),N.push(A.shadowMapType),N.push(A.toneMapping),N.push(A.numClippingPlanes),N.push(A.numClipIntersection),N.push(A.depthPacking)}function M(N,A){a.disableAll(),A.supportsVertexTextures&&a.enable(0),A.instancing&&a.enable(1),A.instancingColor&&a.enable(2),A.instancingMorph&&a.enable(3),A.matcap&&a.enable(4),A.envMap&&a.enable(5),A.normalMapObjectSpace&&a.enable(6),A.normalMapTangentSpace&&a.enable(7),A.clearcoat&&a.enable(8),A.iridescence&&a.enable(9),A.alphaTest&&a.enable(10),A.vertexColors&&a.enable(11),A.vertexAlphas&&a.enable(12),A.vertexUv1s&&a.enable(13),A.vertexUv2s&&a.enable(14),A.vertexUv3s&&a.enable(15),A.vertexTangents&&a.enable(16),A.anisotropy&&a.enable(17),A.alphaHash&&a.enable(18),A.batching&&a.enable(19),A.dispersion&&a.enable(20),A.batchingColor&&a.enable(21),N.push(a.mask),a.disableAll(),A.fog&&a.enable(0),A.useFog&&a.enable(1),A.flatShading&&a.enable(2),A.logarithmicDepthBuffer&&a.enable(3),A.reverseDepthBuffer&&a.enable(4),A.skinning&&a.enable(5),A.morphTargets&&a.enable(6),A.morphNormals&&a.enable(7),A.morphColors&&a.enable(8),A.premultipliedAlpha&&a.enable(9),A.shadowMapEnabled&&a.enable(10),A.doubleSided&&a.enable(11),A.flipSided&&a.enable(12),A.useDepthPacking&&a.enable(13),A.dithering&&a.enable(14),A.transmission&&a.enable(15),A.sheen&&a.enable(16),A.opaque&&a.enable(17),A.pointsUvs&&a.enable(18),A.decodeVideoTexture&&a.enable(19),A.decodeVideoTextureEmissive&&a.enable(20),A.alphaToCoverage&&a.enable(21),N.push(a.mask)}function C(N){let A=v[N.type],j;if(A){let he=xl[A];j=sz.clone(he.uniforms)}else j=N.uniforms;return j}function H(N,A){let j;for(let he=0,ae=f.length;he<ae;he++){let Re=f[he];if(Re.cacheKey===A){j=Re,++j.usedTimes;break}}return j===void 0&&(j=new $de(n,A,N,o),f.push(j)),j}function L(N){if(--N.usedTimes===0){let A=f.indexOf(N);f[A]=f[f.length-1],f.pop(),N.destroy()}}function k(N){l.remove(N)}function $(){l.dispose()}return{getParameters:y,getProgramCacheKey:_,getUniforms:C,acquireProgram:H,releaseProgram:L,releaseShaderCache:k,programs:f,dispose:$}}function Yde(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,l){n.get(s)[a]=l}function o(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:o}}function Zde(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Oz(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Nz(){let n=[],e=0,t=[],i=[],r=[];function o(){e=0,t.length=0,i.length=0,r.length=0}function s(h,p,g,v,x,y){let _=n[e];return _===void 0?(_={id:h.id,object:h,geometry:p,material:g,groupOrder:v,renderOrder:h.renderOrder,z:x,group:y},n[e]=_):(_.id=h.id,_.object=h,_.geometry=p,_.material=g,_.groupOrder=v,_.renderOrder=h.renderOrder,_.z=x,_.group=y),e++,_}function a(h,p,g,v,x,y){let _=s(h,p,g,v,x,y);g.transmission>0?i.push(_):g.transparent===!0?r.push(_):t.push(_)}function l(h,p,g,v,x,y){let _=s(h,p,g,v,x,y);g.transmission>0?i.unshift(_):g.transparent===!0?r.unshift(_):t.unshift(_)}function u(h,p){t.length>1&&t.sort(h||Zde),i.length>1&&i.sort(p||Oz),r.length>1&&r.sort(p||Oz)}function f(){for(let h=e,p=n.length;h<p;h++){let g=n[h];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:f,sort:u}}function Kde(){let n=new WeakMap;function e(i,r){let o=n.get(i),s;return o===void 0?(s=new Nz,n.set(i,[s])):r>=o.length?(s=new Nz,o.push(s)):s=o[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Jde(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new V,color:new gt};break;case"SpotLight":t={position:new V,direction:new V,color:new gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new V,color:new gt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new V,skyColor:new gt,groundColor:new gt};break;case"RectAreaLight":t={color:new gt,position:new V,halfWidth:new V,halfHeight:new V};break}return n[e.id]=t,t}}}function Qde(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var efe=0;function tfe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function nfe(n){let e=new Jde,t=Qde(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new V);let r=new V,o=new ht,s=new ht;function a(u){let f=0,h=0,p=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let g=0,v=0,x=0,y=0,_=0,T=0,M=0,C=0,H=0,L=0,k=0;u.sort(tfe);for(let N=0,A=u.length;N<A;N++){let j=u[N],he=j.color,ae=j.intensity,Re=j.distance,Se=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)f+=he.r*ae,h+=he.g*ae,p+=he.b*ae;else if(j.isLightProbe){for(let Y=0;Y<9;Y++)i.probe[Y].addScaledVector(j.sh.coefficients[Y],ae);k++}else if(j.isDirectionalLight){let Y=e.get(j);if(Y.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){let ie=j.shadow,X=t.get(j);X.shadowIntensity=ie.intensity,X.shadowBias=ie.bias,X.shadowNormalBias=ie.normalBias,X.shadowRadius=ie.radius,X.shadowMapSize=ie.mapSize,i.directionalShadow[g]=X,i.directionalShadowMap[g]=Se,i.directionalShadowMatrix[g]=j.shadow.matrix,T++}i.directional[g]=Y,g++}else if(j.isSpotLight){let Y=e.get(j);Y.position.setFromMatrixPosition(j.matrixWorld),Y.color.copy(he).multiplyScalar(ae),Y.distance=Re,Y.coneCos=Math.cos(j.angle),Y.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),Y.decay=j.decay,i.spot[x]=Y;let ie=j.shadow;if(j.map&&(i.spotLightMap[H]=j.map,H++,ie.updateMatrices(j),j.castShadow&&L++),i.spotLightMatrix[x]=ie.matrix,j.castShadow){let X=t.get(j);X.shadowIntensity=ie.intensity,X.shadowBias=ie.bias,X.shadowNormalBias=ie.normalBias,X.shadowRadius=ie.radius,X.shadowMapSize=ie.mapSize,i.spotShadow[x]=X,i.spotShadowMap[x]=Se,C++}x++}else if(j.isRectAreaLight){let Y=e.get(j);Y.color.copy(he).multiplyScalar(ae),Y.halfWidth.set(j.width*.5,0,0),Y.halfHeight.set(0,j.height*.5,0),i.rectArea[y]=Y,y++}else if(j.isPointLight){let Y=e.get(j);if(Y.color.copy(j.color).multiplyScalar(j.intensity),Y.distance=j.distance,Y.decay=j.decay,j.castShadow){let ie=j.shadow,X=t.get(j);X.shadowIntensity=ie.intensity,X.shadowBias=ie.bias,X.shadowNormalBias=ie.normalBias,X.shadowRadius=ie.radius,X.shadowMapSize=ie.mapSize,X.shadowCameraNear=ie.camera.near,X.shadowCameraFar=ie.camera.far,i.pointShadow[v]=X,i.pointShadowMap[v]=Se,i.pointShadowMatrix[v]=j.shadow.matrix,M++}i.point[v]=Y,v++}else if(j.isHemisphereLight){let Y=e.get(j);Y.skyColor.copy(j.color).multiplyScalar(ae),Y.groundColor.copy(j.groundColor).multiplyScalar(ae),i.hemi[_]=Y,_++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=nt.LTC_FLOAT_1,i.rectAreaLTC2=nt.LTC_FLOAT_2):(i.rectAreaLTC1=nt.LTC_HALF_1,i.rectAreaLTC2=nt.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;let $=i.hash;($.directionalLength!==g||$.pointLength!==v||$.spotLength!==x||$.rectAreaLength!==y||$.hemiLength!==_||$.numDirectionalShadows!==T||$.numPointShadows!==M||$.numSpotShadows!==C||$.numSpotMaps!==H||$.numLightProbes!==k)&&(i.directional.length=g,i.spot.length=x,i.rectArea.length=y,i.point.length=v,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=C+H-L,i.spotLightMap.length=H,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=k,$.directionalLength=g,$.pointLength=v,$.spotLength=x,$.rectAreaLength=y,$.hemiLength=_,$.numDirectionalShadows=T,$.numPointShadows=M,$.numSpotShadows=C,$.numSpotMaps=H,$.numLightProbes=k,i.version=efe++)}function l(u,f){let h=0,p=0,g=0,v=0,x=0,y=f.matrixWorldInverse;for(let _=0,T=u.length;_<T;_++){let M=u[_];if(M.isDirectionalLight){let C=i.directional[h];C.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(y),h++}else if(M.isSpotLight){let C=i.spot[g];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(y),C.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(y),g++}else if(M.isRectAreaLight){let C=i.rectArea[v];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(y),s.identity(),o.copy(M.matrixWorld),o.premultiply(y),s.extractRotation(o),C.halfWidth.set(M.width*.5,0,0),C.halfHeight.set(0,M.height*.5,0),C.halfWidth.applyMatrix4(s),C.halfHeight.applyMatrix4(s),v++}else if(M.isPointLight){let C=i.point[p];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(y),p++}else if(M.isHemisphereLight){let C=i.hemi[x];C.direction.setFromMatrixPosition(M.matrixWorld),C.direction.transformDirection(y),x++}}}return{setup:a,setupView:l,state:i}}function Fz(n){let e=new nfe(n),t=[],i=[];function r(f){u.camera=f,t.length=0,i.length=0}function o(f){t.push(f)}function s(f){i.push(f)}function a(){e.setup(t)}function l(f){e.setupView(t,f)}let u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function ife(n){let e=new WeakMap;function t(r,o=0){let s=e.get(r),a;return s===void 0?(a=new Fz(n),e.set(r,[a])):o>=s.length?(a=new Fz(n),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var rfe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ofe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function sfe(n,e,t){let i=new wp,r=new qe,o=new qe,s=new mn,a=new Cb({depthPacking:$H}),l=new Sb,u={},f=t.maxTextureSize,h={[Ia]:bo,[bo]:Ia,[Gs]:Gs},p=new Ra({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qe},radius:{value:4}},vertexShader:rfe,fragmentShader:ofe}),g=p.clone();g.defines.HORIZONTAL_PASS=1;let v=new ir;v.setAttribute("position",new cr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let x=new Di(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vA;let _=this.type;this.render=function(L,k,$){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||L.length===0)return;let N=n.getRenderTarget(),A=n.getActiveCubeFace(),j=n.getActiveMipmapLevel(),he=n.state;he.setBlending(Ac),he.buffers.color.setClear(1,1,1,1),he.buffers.depth.setTest(!0),he.setScissorTest(!1);let ae=_!==wl&&this.type===wl,Re=_===wl&&this.type!==wl;for(let Se=0,Y=L.length;Se<Y;Se++){let ie=L[Se],X=ie.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;r.copy(X.mapSize);let _e=X.getFrameExtents();if(r.multiply(_e),o.copy(X.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(o.x=Math.floor(f/_e.x),r.x=o.x*_e.x,X.mapSize.x=o.x),r.y>f&&(o.y=Math.floor(f/_e.y),r.y=o.y*_e.y,X.mapSize.y=o.y)),X.map===null||ae===!0||Re===!0){let rt=this.type!==wl?{minFilter:Hr,magFilter:Hr}:{};X.map!==null&&X.map.dispose(),X.map=new gl(r.x,r.y,rt),X.map.texture.name=ie.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();let Ve=X.getViewportCount();for(let rt=0;rt<Ve;rt++){let ge=X.getViewport(rt);s.set(o.x*ge.x,o.y*ge.y,o.x*ge.z,o.y*ge.w),he.viewport(s),X.updateMatrices(ie,rt),i=X.getFrustum(),C(k,$,X.camera,ie,this.type)}X.isPointLightShadow!==!0&&this.type===wl&&T(X,$),X.needsUpdate=!1}_=this.type,y.needsUpdate=!1,n.setRenderTarget(N,A,j)};function T(L,k){let $=e.update(x);p.defines.VSM_SAMPLES!==L.blurSamples&&(p.defines.VSM_SAMPLES=L.blurSamples,g.defines.VSM_SAMPLES=L.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new gl(r.x,r.y)),p.uniforms.shadow_pass.value=L.map.texture,p.uniforms.resolution.value=L.mapSize,p.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(k,null,$,p,x,null),g.uniforms.shadow_pass.value=L.mapPass.texture,g.uniforms.resolution.value=L.mapSize,g.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(k,null,$,g,x,null)}function M(L,k,$,N){let A=null,j=$.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(j!==void 0)A=j;else if(A=$.isPointLight===!0?l:a,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){let he=A.uuid,ae=k.uuid,Re=u[he];Re===void 0&&(Re={},u[he]=Re);let Se=Re[ae];Se===void 0&&(Se=A.clone(),Re[ae]=Se,k.addEventListener("dispose",H)),A=Se}if(A.visible=k.visible,A.wireframe=k.wireframe,N===wl?A.side=k.shadowSide!==null?k.shadowSide:k.side:A.side=k.shadowSide!==null?k.shadowSide:h[k.side],A.alphaMap=k.alphaMap,A.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,A.map=k.map,A.clipShadows=k.clipShadows,A.clippingPlanes=k.clippingPlanes,A.clipIntersection=k.clipIntersection,A.displacementMap=k.displacementMap,A.displacementScale=k.displacementScale,A.displacementBias=k.displacementBias,A.wireframeLinewidth=k.wireframeLinewidth,A.linewidth=k.linewidth,$.isPointLight===!0&&A.isMeshDistanceMaterial===!0){let he=n.properties.get(A);he.light=$}return A}function C(L,k,$,N,A){if(L.visible===!1)return;if(L.layers.test(k.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&A===wl)&&(!L.frustumCulled||i.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,L.matrixWorld);let ae=e.update(L),Re=L.material;if(Array.isArray(Re)){let Se=ae.groups;for(let Y=0,ie=Se.length;Y<ie;Y++){let X=Se[Y],_e=Re[X.materialIndex];if(_e&&_e.visible){let Ve=M(L,_e,N,A);L.onBeforeShadow(n,L,k,$,ae,Ve,X),n.renderBufferDirect($,null,ae,Ve,L,X),L.onAfterShadow(n,L,k,$,ae,Ve,X)}}}else if(Re.visible){let Se=M(L,Re,N,A);L.onBeforeShadow(n,L,k,$,ae,Se,null),n.renderBufferDirect($,null,ae,Se,L,null),L.onAfterShadow(n,L,k,$,ae,Se,null)}}let he=L.children;for(let ae=0,Re=he.length;ae<Re;ae++)C(he[ae],k,$,N,A)}function H(L){L.target.removeEventListener("dispose",H);for(let $ in u){let N=u[$],A=L.target.uuid;A in N&&(N[A].dispose(),delete N[A])}}}var afe={[Nb]:Fb,[Lb]:Bb,[kb]:Vb,[Ud]:Ub,[Fb]:Nb,[Bb]:Lb,[Vb]:kb,[Ub]:Ud};function lfe(n,e){function t(){let Z=!1,Qe=new mn,pe=null,De=new mn(0,0,0,0);return{setMask:function(it){pe!==it&&!Z&&(n.colorMask(it,it,it,it),pe=it)},setLocked:function(it){Z=it},setClear:function(it,Je,Ut,ui,Xi){Xi===!0&&(it*=ui,Je*=ui,Ut*=ui),Qe.set(it,Je,Ut,ui),De.equals(Qe)===!1&&(n.clearColor(it,Je,Ut,ui),De.copy(Qe))},reset:function(){Z=!1,pe=null,De.set(-1,0,0,0)}}}function i(){let Z=!1,Qe=!1,pe=null,De=null,it=null;return{setReversed:function(Je){if(Qe!==Je){let Ut=e.get("EXT_clip_control");Je?Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.ZERO_TO_ONE_EXT):Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.NEGATIVE_ONE_TO_ONE_EXT),Qe=Je;let ui=it;it=null,this.setClear(ui)}},getReversed:function(){return Qe},setTest:function(Je){Je?se(n.DEPTH_TEST):je(n.DEPTH_TEST)},setMask:function(Je){pe!==Je&&!Z&&(n.depthMask(Je),pe=Je)},setFunc:function(Je){if(Qe&&(Je=afe[Je]),De!==Je){switch(Je){case Nb:n.depthFunc(n.NEVER);break;case Fb:n.depthFunc(n.ALWAYS);break;case Lb:n.depthFunc(n.LESS);break;case Ud:n.depthFunc(n.LEQUAL);break;case kb:n.depthFunc(n.EQUAL);break;case Ub:n.depthFunc(n.GEQUAL);break;case Bb:n.depthFunc(n.GREATER);break;case Vb:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}De=Je}},setLocked:function(Je){Z=Je},setClear:function(Je){it!==Je&&(Qe&&(Je=1-Je),n.clearDepth(Je),it=Je)},reset:function(){Z=!1,pe=null,De=null,it=null,Qe=!1}}}function r(){let Z=!1,Qe=null,pe=null,De=null,it=null,Je=null,Ut=null,ui=null,Xi=null;return{setTest:function(Nn){Z||(Nn?se(n.STENCIL_TEST):je(n.STENCIL_TEST))},setMask:function(Nn){Qe!==Nn&&!Z&&(n.stencilMask(Nn),Qe=Nn)},setFunc:function(Nn,br,So){(pe!==Nn||De!==br||it!==So)&&(n.stencilFunc(Nn,br,So),pe=Nn,De=br,it=So)},setOp:function(Nn,br,So){(Je!==Nn||Ut!==br||ui!==So)&&(n.stencilOp(Nn,br,So),Je=Nn,Ut=br,ui=So)},setLocked:function(Nn){Z=Nn},setClear:function(Nn){Xi!==Nn&&(n.clearStencil(Nn),Xi=Nn)},reset:function(){Z=!1,Qe=null,pe=null,De=null,it=null,Je=null,Ut=null,ui=null,Xi=null}}}let o=new t,s=new i,a=new r,l=new WeakMap,u=new WeakMap,f={},h={},p=new WeakMap,g=[],v=null,x=!1,y=null,_=null,T=null,M=null,C=null,H=null,L=null,k=new gt(0,0,0),$=0,N=!1,A=null,j=null,he=null,ae=null,Re=null,Se=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),Y=!1,ie=0,X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec(X)[1]),Y=ie>=1):X.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),Y=ie>=2);let _e=null,Ve={},rt=n.getParameter(n.SCISSOR_BOX),ge=n.getParameter(n.VIEWPORT),re=new mn().fromArray(rt),B=new mn().fromArray(ge);function J(Z,Qe,pe,De){let it=new Uint8Array(4),Je=n.createTexture();n.bindTexture(Z,Je),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ut=0;Ut<pe;Ut++)Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY?n.texImage3D(Qe,0,n.RGBA,1,1,De,0,n.RGBA,n.UNSIGNED_BYTE,it):n.texImage2D(Qe+Ut,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,it);return Je}let xe={};xe[n.TEXTURE_2D]=J(n.TEXTURE_2D,n.TEXTURE_2D,1),xe[n.TEXTURE_CUBE_MAP]=J(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[n.TEXTURE_2D_ARRAY]=J(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),xe[n.TEXTURE_3D]=J(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),se(n.DEPTH_TEST),s.setFunc(Ud),$e(!1),Nt(gA),se(n.CULL_FACE),z(Ac);function se(Z){f[Z]!==!0&&(n.enable(Z),f[Z]=!0)}function je(Z){f[Z]!==!1&&(n.disable(Z),f[Z]=!1)}function We(Z,Qe){return h[Z]!==Qe?(n.bindFramebuffer(Z,Qe),h[Z]=Qe,Z===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Qe),Z===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Qe),!0):!1}function Ue(Z,Qe){let pe=g,De=!1;if(Z){pe=p.get(Qe),pe===void 0&&(pe=[],p.set(Qe,pe));let it=Z.textures;if(pe.length!==it.length||pe[0]!==n.COLOR_ATTACHMENT0){for(let Je=0,Ut=it.length;Je<Ut;Je++)pe[Je]=n.COLOR_ATTACHMENT0+Je;pe.length=it.length,De=!0}}else pe[0]!==n.BACK&&(pe[0]=n.BACK,De=!0);De&&n.drawBuffers(pe)}function at(Z){return v!==Z?(n.useProgram(Z),v=Z,!0):!1}let wt={[Mu]:n.FUNC_ADD,[vH]:n.FUNC_SUBTRACT,[yH]:n.FUNC_REVERSE_SUBTRACT};wt[_H]=n.MIN,wt[wH]=n.MAX;let pt={[xH]:n.ZERO,[bH]:n.ONE,[MH]:n.SRC_COLOR,[lb]:n.SRC_ALPHA,[IH]:n.SRC_ALPHA_SATURATE,[TH]:n.DST_COLOR,[SH]:n.DST_ALPHA,[CH]:n.ONE_MINUS_SRC_COLOR,[cb]:n.ONE_MINUS_SRC_ALPHA,[DH]:n.ONE_MINUS_DST_COLOR,[EH]:n.ONE_MINUS_DST_ALPHA,[AH]:n.CONSTANT_COLOR,[RH]:n.ONE_MINUS_CONSTANT_COLOR,[PH]:n.CONSTANT_ALPHA,[OH]:n.ONE_MINUS_CONSTANT_ALPHA};function z(Z,Qe,pe,De,it,Je,Ut,ui,Xi,Nn){if(Z===Ac){x===!0&&(je(n.BLEND),x=!1);return}if(x===!1&&(se(n.BLEND),x=!0),Z!==gH){if(Z!==y||Nn!==N){if((_!==Mu||C!==Mu)&&(n.blendEquation(n.FUNC_ADD),_=Mu,C=Mu),Nn)switch(Z){case kd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case yA:n.blendFunc(n.ONE,n.ONE);break;case _A:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case wA:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case kd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case yA:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case _A:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case wA:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}T=null,M=null,H=null,L=null,k.set(0,0,0),$=0,y=Z,N=Nn}return}it=it||Qe,Je=Je||pe,Ut=Ut||De,(Qe!==_||it!==C)&&(n.blendEquationSeparate(wt[Qe],wt[it]),_=Qe,C=it),(pe!==T||De!==M||Je!==H||Ut!==L)&&(n.blendFuncSeparate(pt[pe],pt[De],pt[Je],pt[Ut]),T=pe,M=De,H=Je,L=Ut),(ui.equals(k)===!1||Xi!==$)&&(n.blendColor(ui.r,ui.g,ui.b,Xi),k.copy(ui),$=Xi),y=Z,N=!1}function nn(Z,Qe){Z.side===Gs?je(n.CULL_FACE):se(n.CULL_FACE);let pe=Z.side===bo;Qe&&(pe=!pe),$e(pe),Z.blending===kd&&Z.transparent===!1?z(Ac):z(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),s.setFunc(Z.depthFunc),s.setTest(Z.depthTest),s.setMask(Z.depthWrite),o.setMask(Z.colorWrite);let De=Z.stencilWrite;a.setTest(De),De&&(a.setMask(Z.stencilWriteMask),a.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),a.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),Xt(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?se(n.SAMPLE_ALPHA_TO_COVERAGE):je(n.SAMPLE_ALPHA_TO_COVERAGE)}function $e(Z){A!==Z&&(Z?n.frontFace(n.CW):n.frontFace(n.CCW),A=Z)}function Nt(Z){Z!==hH?(se(n.CULL_FACE),Z!==j&&(Z===gA?n.cullFace(n.BACK):Z===pH?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):je(n.CULL_FACE),j=Z}function Ke(Z){Z!==he&&(Y&&n.lineWidth(Z),he=Z)}function Xt(Z,Qe,pe){Z?(se(n.POLYGON_OFFSET_FILL),(ae!==Qe||Re!==pe)&&(n.polygonOffset(Qe,pe),ae=Qe,Re=pe)):je(n.POLYGON_OFFSET_FILL)}function vt(Z){Z?se(n.SCISSOR_TEST):je(n.SCISSOR_TEST)}function F(Z){Z===void 0&&(Z=n.TEXTURE0+Se-1),_e!==Z&&(n.activeTexture(Z),_e=Z)}function S(Z,Qe,pe){pe===void 0&&(_e===null?pe=n.TEXTURE0+Se-1:pe=_e);let De=Ve[pe];De===void 0&&(De={type:void 0,texture:void 0},Ve[pe]=De),(De.type!==Z||De.texture!==Qe)&&(_e!==pe&&(n.activeTexture(pe),_e=pe),n.bindTexture(Z,Qe||xe[Z]),De.type=Z,De.texture=Qe)}function oe(){let Z=Ve[_e];Z!==void 0&&Z.type!==void 0&&(n.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function Ce(){try{n.compressedTexImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Pe(){try{n.compressedTexImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function fe(){try{n.texSubImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ye(){try{n.texSubImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ze(){try{n.compressedTexSubImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function bt(){try{n.compressedTexSubImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Mt(){try{n.texStorage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ke(){try{n.texStorage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ot(){try{n.texImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ct(){try{n.texImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function At(Z){re.equals(Z)===!1&&(n.scissor(Z.x,Z.y,Z.z,Z.w),re.copy(Z))}function st(Z){B.equals(Z)===!1&&(n.viewport(Z.x,Z.y,Z.z,Z.w),B.copy(Z))}function vn(Z,Qe){let pe=u.get(Qe);pe===void 0&&(pe=new WeakMap,u.set(Qe,pe));let De=pe.get(Z);De===void 0&&(De=n.getUniformBlockIndex(Qe,Z.name),pe.set(Z,De))}function Yt(Z,Qe){let De=u.get(Qe).get(Z);l.get(Qe)!==De&&(n.uniformBlockBinding(Qe,De,Z.__bindingPointIndex),l.set(Qe,De))}function Xn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},_e=null,Ve={},h={},p=new WeakMap,g=[],v=null,x=!1,y=null,_=null,T=null,M=null,C=null,H=null,L=null,k=new gt(0,0,0),$=0,N=!1,A=null,j=null,he=null,ae=null,Re=null,re.set(0,0,n.canvas.width,n.canvas.height),B.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:se,disable:je,bindFramebuffer:We,drawBuffers:Ue,useProgram:at,setBlending:z,setMaterial:nn,setFlipSided:$e,setCullFace:Nt,setLineWidth:Ke,setPolygonOffset:Xt,setScissorTest:vt,activeTexture:F,bindTexture:S,unbindTexture:oe,compressedTexImage2D:Ce,compressedTexImage3D:Pe,texImage2D:ot,texImage3D:Ct,updateUBOMapping:vn,uniformBlockBinding:Yt,texStorage2D:Mt,texStorage3D:ke,texSubImage2D:fe,texSubImage3D:Ye,compressedTexSubImage2D:Ze,compressedTexSubImage3D:bt,scissor:At,viewport:st,reset:Xn}}function cfe(n,e,t,i,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new qe,f=new WeakMap,h,p=new WeakMap,g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(F,S){return g?new OffscreenCanvas(F,S):hp("canvas")}function x(F,S,oe){let Ce=1,Pe=vt(F);if((Pe.width>oe||Pe.height>oe)&&(Ce=oe/Math.max(Pe.width,Pe.height)),Ce<1)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap||typeof VideoFrame<"u"&&F instanceof VideoFrame){let fe=Math.floor(Ce*Pe.width),Ye=Math.floor(Ce*Pe.height);h===void 0&&(h=v(fe,Ye));let Ze=S?v(fe,Ye):h;return Ze.width=fe,Ze.height=Ye,Ze.getContext("2d").drawImage(F,0,0,fe,Ye),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Pe.width+"x"+Pe.height+") to ("+fe+"x"+Ye+")."),Ze}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Pe.width+"x"+Pe.height+")."),F;return F}function y(F){return F.generateMipmaps}function _(F){n.generateMipmap(F)}function T(F){return F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:F.isWebGL3DRenderTarget?n.TEXTURE_3D:F.isWebGLArrayRenderTarget||F.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function M(F,S,oe,Ce,Pe=!1){if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let fe=S;if(S===n.RED&&(oe===n.FLOAT&&(fe=n.R32F),oe===n.HALF_FLOAT&&(fe=n.R16F),oe===n.UNSIGNED_BYTE&&(fe=n.R8)),S===n.RED_INTEGER&&(oe===n.UNSIGNED_BYTE&&(fe=n.R8UI),oe===n.UNSIGNED_SHORT&&(fe=n.R16UI),oe===n.UNSIGNED_INT&&(fe=n.R32UI),oe===n.BYTE&&(fe=n.R8I),oe===n.SHORT&&(fe=n.R16I),oe===n.INT&&(fe=n.R32I)),S===n.RG&&(oe===n.FLOAT&&(fe=n.RG32F),oe===n.HALF_FLOAT&&(fe=n.RG16F),oe===n.UNSIGNED_BYTE&&(fe=n.RG8)),S===n.RG_INTEGER&&(oe===n.UNSIGNED_BYTE&&(fe=n.RG8UI),oe===n.UNSIGNED_SHORT&&(fe=n.RG16UI),oe===n.UNSIGNED_INT&&(fe=n.RG32UI),oe===n.BYTE&&(fe=n.RG8I),oe===n.SHORT&&(fe=n.RG16I),oe===n.INT&&(fe=n.RG32I)),S===n.RGB_INTEGER&&(oe===n.UNSIGNED_BYTE&&(fe=n.RGB8UI),oe===n.UNSIGNED_SHORT&&(fe=n.RGB16UI),oe===n.UNSIGNED_INT&&(fe=n.RGB32UI),oe===n.BYTE&&(fe=n.RGB8I),oe===n.SHORT&&(fe=n.RGB16I),oe===n.INT&&(fe=n.RGB32I)),S===n.RGBA_INTEGER&&(oe===n.UNSIGNED_BYTE&&(fe=n.RGBA8UI),oe===n.UNSIGNED_SHORT&&(fe=n.RGBA16UI),oe===n.UNSIGNED_INT&&(fe=n.RGBA32UI),oe===n.BYTE&&(fe=n.RGBA8I),oe===n.SHORT&&(fe=n.RGBA16I),oe===n.INT&&(fe=n.RGBA32I)),S===n.RGB&&oe===n.UNSIGNED_INT_5_9_9_9_REV&&(fe=n.RGB9_E5),S===n.RGBA){let Ye=Pe?d0:qt.getTransfer(Ce);oe===n.FLOAT&&(fe=n.RGBA32F),oe===n.HALF_FLOAT&&(fe=n.RGBA16F),oe===n.UNSIGNED_BYTE&&(fe=Ye===si?n.SRGB8_ALPHA8:n.RGBA8),oe===n.UNSIGNED_SHORT_4_4_4_4&&(fe=n.RGBA4),oe===n.UNSIGNED_SHORT_5_5_5_1&&(fe=n.RGB5_A1)}return(fe===n.R16F||fe===n.R32F||fe===n.RG16F||fe===n.RG32F||fe===n.RGBA16F||fe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),fe}function C(F,S){let oe;return F?S===null||S===Au||S===Ip?oe=n.DEPTH24_STENCIL8:S===Ws?oe=n.DEPTH32F_STENCIL8:S===Tp&&(oe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):S===null||S===Au||S===Ip?oe=n.DEPTH_COMPONENT24:S===Ws?oe=n.DEPTH_COMPONENT32F:S===Tp&&(oe=n.DEPTH_COMPONENT16),oe}function H(F,S){return y(F)===!0||F.isFramebufferTexture&&F.minFilter!==Hr&&F.minFilter!==_o?Math.log2(Math.max(S.width,S.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?S.mipmaps.length:1}function L(F){let S=F.target;S.removeEventListener("dispose",L),$(S),S.isVideoTexture&&f.delete(S)}function k(F){let S=F.target;S.removeEventListener("dispose",k),A(S)}function $(F){let S=i.get(F);if(S.__webglInit===void 0)return;let oe=F.source,Ce=p.get(oe);if(Ce){let Pe=Ce[S.__cacheKey];Pe.usedTimes--,Pe.usedTimes===0&&N(F),Object.keys(Ce).length===0&&p.delete(oe)}i.remove(F)}function N(F){let S=i.get(F);n.deleteTexture(S.__webglTexture);let oe=F.source,Ce=p.get(oe);delete Ce[S.__cacheKey],s.memory.textures--}function A(F){let S=i.get(F);if(F.depthTexture&&(F.depthTexture.dispose(),i.remove(F.depthTexture)),F.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++){if(Array.isArray(S.__webglFramebuffer[Ce]))for(let Pe=0;Pe<S.__webglFramebuffer[Ce].length;Pe++)n.deleteFramebuffer(S.__webglFramebuffer[Ce][Pe]);else n.deleteFramebuffer(S.__webglFramebuffer[Ce]);S.__webglDepthbuffer&&n.deleteRenderbuffer(S.__webglDepthbuffer[Ce])}else{if(Array.isArray(S.__webglFramebuffer))for(let Ce=0;Ce<S.__webglFramebuffer.length;Ce++)n.deleteFramebuffer(S.__webglFramebuffer[Ce]);else n.deleteFramebuffer(S.__webglFramebuffer);if(S.__webglDepthbuffer&&n.deleteRenderbuffer(S.__webglDepthbuffer),S.__webglMultisampledFramebuffer&&n.deleteFramebuffer(S.__webglMultisampledFramebuffer),S.__webglColorRenderbuffer)for(let Ce=0;Ce<S.__webglColorRenderbuffer.length;Ce++)S.__webglColorRenderbuffer[Ce]&&n.deleteRenderbuffer(S.__webglColorRenderbuffer[Ce]);S.__webglDepthRenderbuffer&&n.deleteRenderbuffer(S.__webglDepthRenderbuffer)}let oe=F.textures;for(let Ce=0,Pe=oe.length;Ce<Pe;Ce++){let fe=i.get(oe[Ce]);fe.__webglTexture&&(n.deleteTexture(fe.__webglTexture),s.memory.textures--),i.remove(oe[Ce])}i.remove(F)}let j=0;function he(){j=0}function ae(){let F=j;return F>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+r.maxTextures),j+=1,F}function Re(F){let S=[];return S.push(F.wrapS),S.push(F.wrapT),S.push(F.wrapR||0),S.push(F.magFilter),S.push(F.minFilter),S.push(F.anisotropy),S.push(F.internalFormat),S.push(F.format),S.push(F.type),S.push(F.generateMipmaps),S.push(F.premultiplyAlpha),S.push(F.flipY),S.push(F.unpackAlignment),S.push(F.colorSpace),S.join()}function Se(F,S){let oe=i.get(F);if(F.isVideoTexture&&Ke(F),F.isRenderTargetTexture===!1&&F.version>0&&oe.__version!==F.version){let Ce=F.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{B(oe,F,S);return}}t.bindTexture(n.TEXTURE_2D,oe.__webglTexture,n.TEXTURE0+S)}function Y(F,S){let oe=i.get(F);if(F.version>0&&oe.__version!==F.version){B(oe,F,S);return}t.bindTexture(n.TEXTURE_2D_ARRAY,oe.__webglTexture,n.TEXTURE0+S)}function ie(F,S){let oe=i.get(F);if(F.version>0&&oe.__version!==F.version){B(oe,F,S);return}t.bindTexture(n.TEXTURE_3D,oe.__webglTexture,n.TEXTURE0+S)}function X(F,S){let oe=i.get(F);if(F.version>0&&oe.__version!==F.version){J(oe,F,S);return}t.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture,n.TEXTURE0+S)}let _e={[Aa]:n.REPEAT,[ds]:n.CLAMP_TO_EDGE,[dp]:n.MIRRORED_REPEAT},Ve={[Hr]:n.NEAREST,[zb]:n.NEAREST_MIPMAP_NEAREST,[ef]:n.NEAREST_MIPMAP_LINEAR,[_o]:n.LINEAR,[Ep]:n.LINEAR_MIPMAP_NEAREST,[Na]:n.LINEAR_MIPMAP_LINEAR},rt={[XH]:n.NEVER,[ez]:n.ALWAYS,[YH]:n.LESS,[IA]:n.LEQUAL,[ZH]:n.EQUAL,[QH]:n.GEQUAL,[KH]:n.GREATER,[JH]:n.NOTEQUAL};function ge(F,S){if(S.type===Ws&&e.has("OES_texture_float_linear")===!1&&(S.magFilter===_o||S.magFilter===Ep||S.magFilter===ef||S.magFilter===Na||S.minFilter===_o||S.minFilter===Ep||S.minFilter===ef||S.minFilter===Na)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(F,n.TEXTURE_WRAP_S,_e[S.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,_e[S.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,_e[S.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,Ve[S.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,Ve[S.minFilter]),S.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,rt[S.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(S.magFilter===Hr||S.minFilter!==ef&&S.minFilter!==Na||S.type===Ws&&e.has("OES_texture_float_linear")===!1)return;if(S.anisotropy>1||i.get(S).__currentAnisotropy){let oe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(F,oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(S.anisotropy,r.getMaxAnisotropy())),i.get(S).__currentAnisotropy=S.anisotropy}}}function re(F,S){let oe=!1;F.__webglInit===void 0&&(F.__webglInit=!0,S.addEventListener("dispose",L));let Ce=S.source,Pe=p.get(Ce);Pe===void 0&&(Pe={},p.set(Ce,Pe));let fe=Re(S);if(fe!==F.__cacheKey){Pe[fe]===void 0&&(Pe[fe]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,oe=!0),Pe[fe].usedTimes++;let Ye=Pe[F.__cacheKey];Ye!==void 0&&(Pe[F.__cacheKey].usedTimes--,Ye.usedTimes===0&&N(S)),F.__cacheKey=fe,F.__webglTexture=Pe[fe].texture}return oe}function B(F,S,oe){let Ce=n.TEXTURE_2D;(S.isDataArrayTexture||S.isCompressedArrayTexture)&&(Ce=n.TEXTURE_2D_ARRAY),S.isData3DTexture&&(Ce=n.TEXTURE_3D);let Pe=re(F,S),fe=S.source;t.bindTexture(Ce,F.__webglTexture,n.TEXTURE0+oe);let Ye=i.get(fe);if(fe.version!==Ye.__version||Pe===!0){t.activeTexture(n.TEXTURE0+oe);let Ze=qt.getPrimaries(qt.workingColorSpace),bt=S.colorSpace===Pc?null:qt.getPrimaries(S.colorSpace),Mt=S.colorSpace===Pc||Ze===bt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,S.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,S.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,S.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Mt);let ke=x(S.image,!1,r.maxTextureSize);ke=Xt(S,ke);let ot=o.convert(S.format,S.colorSpace),Ct=o.convert(S.type),At=M(S.internalFormat,ot,Ct,S.colorSpace,S.isVideoTexture);ge(Ce,S);let st,vn=S.mipmaps,Yt=S.isVideoTexture!==!0,Xn=Ye.__version===void 0||Pe===!0,Z=fe.dataReady,Qe=H(S,ke);if(S.isDepthTexture)At=C(S.format===Ap,S.type),Xn&&(Yt?t.texStorage2D(n.TEXTURE_2D,1,At,ke.width,ke.height):t.texImage2D(n.TEXTURE_2D,0,At,ke.width,ke.height,0,ot,Ct,null));else if(S.isDataTexture)if(vn.length>0){Yt&&Xn&&t.texStorage2D(n.TEXTURE_2D,Qe,At,vn[0].width,vn[0].height);for(let pe=0,De=vn.length;pe<De;pe++)st=vn[pe],Yt?Z&&t.texSubImage2D(n.TEXTURE_2D,pe,0,0,st.width,st.height,ot,Ct,st.data):t.texImage2D(n.TEXTURE_2D,pe,At,st.width,st.height,0,ot,Ct,st.data);S.generateMipmaps=!1}else Yt?(Xn&&t.texStorage2D(n.TEXTURE_2D,Qe,At,ke.width,ke.height),Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ke.width,ke.height,ot,Ct,ke.data)):t.texImage2D(n.TEXTURE_2D,0,At,ke.width,ke.height,0,ot,Ct,ke.data);else if(S.isCompressedTexture)if(S.isCompressedArrayTexture){Yt&&Xn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,At,vn[0].width,vn[0].height,ke.depth);for(let pe=0,De=vn.length;pe<De;pe++)if(st=vn[pe],S.format!==ps)if(ot!==null)if(Yt){if(Z)if(S.layerUpdates.size>0){let it=kA(st.width,st.height,S.format,S.type);for(let Je of S.layerUpdates){let Ut=st.data.subarray(Je*it/st.data.BYTES_PER_ELEMENT,(Je+1)*it/st.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,Je,st.width,st.height,1,ot,Ut)}S.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,0,st.width,st.height,ke.depth,ot,st.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,pe,At,st.width,st.height,ke.depth,0,st.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Yt?Z&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,0,st.width,st.height,ke.depth,ot,Ct,st.data):t.texImage3D(n.TEXTURE_2D_ARRAY,pe,At,st.width,st.height,ke.depth,0,ot,Ct,st.data)}else{Yt&&Xn&&t.texStorage2D(n.TEXTURE_2D,Qe,At,vn[0].width,vn[0].height);for(let pe=0,De=vn.length;pe<De;pe++)st=vn[pe],S.format!==ps?ot!==null?Yt?Z&&t.compressedTexSubImage2D(n.TEXTURE_2D,pe,0,0,st.width,st.height,ot,st.data):t.compressedTexImage2D(n.TEXTURE_2D,pe,At,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Yt?Z&&t.texSubImage2D(n.TEXTURE_2D,pe,0,0,st.width,st.height,ot,Ct,st.data):t.texImage2D(n.TEXTURE_2D,pe,At,st.width,st.height,0,ot,Ct,st.data)}else if(S.isDataArrayTexture)if(Yt){if(Xn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,At,ke.width,ke.height,ke.depth),Z)if(S.layerUpdates.size>0){let pe=kA(ke.width,ke.height,S.format,S.type);for(let De of S.layerUpdates){let it=ke.data.subarray(De*pe/ke.data.BYTES_PER_ELEMENT,(De+1)*pe/ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,De,ke.width,ke.height,1,ot,Ct,it)}S.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ke.width,ke.height,ke.depth,ot,Ct,ke.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,At,ke.width,ke.height,ke.depth,0,ot,Ct,ke.data);else if(S.isData3DTexture)Yt?(Xn&&t.texStorage3D(n.TEXTURE_3D,Qe,At,ke.width,ke.height,ke.depth),Z&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ke.width,ke.height,ke.depth,ot,Ct,ke.data)):t.texImage3D(n.TEXTURE_3D,0,At,ke.width,ke.height,ke.depth,0,ot,Ct,ke.data);else if(S.isFramebufferTexture){if(Xn)if(Yt)t.texStorage2D(n.TEXTURE_2D,Qe,At,ke.width,ke.height);else{let pe=ke.width,De=ke.height;for(let it=0;it<Qe;it++)t.texImage2D(n.TEXTURE_2D,it,At,pe,De,0,ot,Ct,null),pe>>=1,De>>=1}}else if(vn.length>0){if(Yt&&Xn){let pe=vt(vn[0]);t.texStorage2D(n.TEXTURE_2D,Qe,At,pe.width,pe.height)}for(let pe=0,De=vn.length;pe<De;pe++)st=vn[pe],Yt?Z&&t.texSubImage2D(n.TEXTURE_2D,pe,0,0,ot,Ct,st):t.texImage2D(n.TEXTURE_2D,pe,At,ot,Ct,st);S.generateMipmaps=!1}else if(Yt){if(Xn){let pe=vt(ke);t.texStorage2D(n.TEXTURE_2D,Qe,At,pe.width,pe.height)}Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ot,Ct,ke)}else t.texImage2D(n.TEXTURE_2D,0,At,ot,Ct,ke);y(S)&&_(Ce),Ye.__version=fe.version,S.onUpdate&&S.onUpdate(S)}F.__version=S.version}function J(F,S,oe){if(S.image.length!==6)return;let Ce=re(F,S),Pe=S.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+oe);let fe=i.get(Pe);if(Pe.version!==fe.__version||Ce===!0){t.activeTexture(n.TEXTURE0+oe);let Ye=qt.getPrimaries(qt.workingColorSpace),Ze=S.colorSpace===Pc?null:qt.getPrimaries(S.colorSpace),bt=S.colorSpace===Pc||Ye===Ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,S.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,S.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,S.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);let Mt=S.isCompressedTexture||S.image[0].isCompressedTexture,ke=S.image[0]&&S.image[0].isDataTexture,ot=[];for(let De=0;De<6;De++)!Mt&&!ke?ot[De]=x(S.image[De],!0,r.maxCubemapSize):ot[De]=ke?S.image[De].image:S.image[De],ot[De]=Xt(S,ot[De]);let Ct=ot[0],At=o.convert(S.format,S.colorSpace),st=o.convert(S.type),vn=M(S.internalFormat,At,st,S.colorSpace),Yt=S.isVideoTexture!==!0,Xn=fe.__version===void 0||Ce===!0,Z=Pe.dataReady,Qe=H(S,Ct);ge(n.TEXTURE_CUBE_MAP,S);let pe;if(Mt){Yt&&Xn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,vn,Ct.width,Ct.height);for(let De=0;De<6;De++){pe=ot[De].mipmaps;for(let it=0;it<pe.length;it++){let Je=pe[it];S.format!==ps?At!==null?Yt?Z&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,it,0,0,Je.width,Je.height,At,Je.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,it,vn,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Yt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,it,0,0,Je.width,Je.height,At,st,Je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,it,vn,Je.width,Je.height,0,At,st,Je.data)}}}else{if(pe=S.mipmaps,Yt&&Xn){pe.length>0&&Qe++;let De=vt(ot[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,vn,De.width,De.height)}for(let De=0;De<6;De++)if(ke){Yt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,0,0,ot[De].width,ot[De].height,At,st,ot[De].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,vn,ot[De].width,ot[De].height,0,At,st,ot[De].data);for(let it=0;it<pe.length;it++){let Ut=pe[it].image[De].image;Yt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,it+1,0,0,Ut.width,Ut.height,At,st,Ut.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,it+1,vn,Ut.width,Ut.height,0,At,st,Ut.data)}}else{Yt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,0,0,At,st,ot[De]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,vn,At,st,ot[De]);for(let it=0;it<pe.length;it++){let Je=pe[it];Yt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,it+1,0,0,At,st,Je.image[De]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,it+1,vn,At,st,Je.image[De])}}}y(S)&&_(n.TEXTURE_CUBE_MAP),fe.__version=Pe.version,S.onUpdate&&S.onUpdate(S)}F.__version=S.version}function xe(F,S,oe,Ce,Pe,fe){let Ye=o.convert(oe.format,oe.colorSpace),Ze=o.convert(oe.type),bt=M(oe.internalFormat,Ye,Ze,oe.colorSpace),Mt=i.get(S),ke=i.get(oe);if(ke.__renderTarget=S,!Mt.__hasExternalTextures){let ot=Math.max(1,S.width>>fe),Ct=Math.max(1,S.height>>fe);Pe===n.TEXTURE_3D||Pe===n.TEXTURE_2D_ARRAY?t.texImage3D(Pe,fe,bt,ot,Ct,S.depth,0,Ye,Ze,null):t.texImage2D(Pe,fe,bt,ot,Ct,0,Ye,Ze,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),Nt(S)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ce,Pe,ke.__webglTexture,0,$e(S)):(Pe===n.TEXTURE_2D||Pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ce,Pe,ke.__webglTexture,fe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function se(F,S,oe){if(n.bindRenderbuffer(n.RENDERBUFFER,F),S.depthBuffer){let Ce=S.depthTexture,Pe=Ce&&Ce.isDepthTexture?Ce.type:null,fe=C(S.stencilBuffer,Pe),Ye=S.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=$e(S);Nt(S)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ze,fe,S.width,S.height):oe?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ze,fe,S.width,S.height):n.renderbufferStorage(n.RENDERBUFFER,fe,S.width,S.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ye,n.RENDERBUFFER,F)}else{let Ce=S.textures;for(let Pe=0;Pe<Ce.length;Pe++){let fe=Ce[Pe],Ye=o.convert(fe.format,fe.colorSpace),Ze=o.convert(fe.type),bt=M(fe.internalFormat,Ye,Ze,fe.colorSpace),Mt=$e(S);oe&&Nt(S)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Mt,bt,S.width,S.height):Nt(S)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Mt,bt,S.width,S.height):n.renderbufferStorage(n.RENDERBUFFER,bt,S.width,S.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function je(F,S){if(S&&S.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!(S.depthTexture&&S.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let Ce=i.get(S.depthTexture);Ce.__renderTarget=S,(!Ce.__webglTexture||S.depthTexture.image.width!==S.width||S.depthTexture.image.height!==S.height)&&(S.depthTexture.image.width=S.width,S.depthTexture.image.height=S.height,S.depthTexture.needsUpdate=!0),Se(S.depthTexture,0);let Pe=Ce.__webglTexture,fe=$e(S);if(S.depthTexture.format===fp)Nt(S)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0,fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0);else if(S.depthTexture.format===Ap)Nt(S)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0,fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0);else throw new Error("Unknown depthTexture format")}function We(F){let S=i.get(F),oe=F.isWebGLCubeRenderTarget===!0;if(S.__boundDepthTexture!==F.depthTexture){let Ce=F.depthTexture;if(S.__depthDisposeCallback&&S.__depthDisposeCallback(),Ce){let Pe=()=>{delete S.__boundDepthTexture,delete S.__depthDisposeCallback,Ce.removeEventListener("dispose",Pe)};Ce.addEventListener("dispose",Pe),S.__depthDisposeCallback=Pe}S.__boundDepthTexture=Ce}if(F.depthTexture&&!S.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");let Ce=F.texture.mipmaps;Ce&&Ce.length>0?je(S.__webglFramebuffer[0],F):je(S.__webglFramebuffer,F)}else if(oe){S.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)if(t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer[Ce]),S.__webglDepthbuffer[Ce]===void 0)S.__webglDepthbuffer[Ce]=n.createRenderbuffer(),se(S.__webglDepthbuffer[Ce],F,!1);else{let Pe=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=S.__webglDepthbuffer[Ce];n.bindRenderbuffer(n.RENDERBUFFER,fe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Pe,n.RENDERBUFFER,fe)}}else{let Ce=F.texture.mipmaps;if(Ce&&Ce.length>0?t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer),S.__webglDepthbuffer===void 0)S.__webglDepthbuffer=n.createRenderbuffer(),se(S.__webglDepthbuffer,F,!1);else{let Pe=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=S.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,fe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Pe,n.RENDERBUFFER,fe)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(F,S,oe){let Ce=i.get(F);S!==void 0&&xe(Ce.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),oe!==void 0&&We(F)}function at(F){let S=F.texture,oe=i.get(F),Ce=i.get(S);F.addEventListener("dispose",k);let Pe=F.textures,fe=F.isWebGLCubeRenderTarget===!0,Ye=Pe.length>1;if(Ye||(Ce.__webglTexture===void 0&&(Ce.__webglTexture=n.createTexture()),Ce.__version=S.version,s.memory.textures++),fe){oe.__webglFramebuffer=[];for(let Ze=0;Ze<6;Ze++)if(S.mipmaps&&S.mipmaps.length>0){oe.__webglFramebuffer[Ze]=[];for(let bt=0;bt<S.mipmaps.length;bt++)oe.__webglFramebuffer[Ze][bt]=n.createFramebuffer()}else oe.__webglFramebuffer[Ze]=n.createFramebuffer()}else{if(S.mipmaps&&S.mipmaps.length>0){oe.__webglFramebuffer=[];for(let Ze=0;Ze<S.mipmaps.length;Ze++)oe.__webglFramebuffer[Ze]=n.createFramebuffer()}else oe.__webglFramebuffer=n.createFramebuffer();if(Ye)for(let Ze=0,bt=Pe.length;Ze<bt;Ze++){let Mt=i.get(Pe[Ze]);Mt.__webglTexture===void 0&&(Mt.__webglTexture=n.createTexture(),s.memory.textures++)}if(F.samples>0&&Nt(F)===!1){oe.__webglMultisampledFramebuffer=n.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let Ze=0;Ze<Pe.length;Ze++){let bt=Pe[Ze];oe.__webglColorRenderbuffer[Ze]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,oe.__webglColorRenderbuffer[Ze]);let Mt=o.convert(bt.format,bt.colorSpace),ke=o.convert(bt.type),ot=M(bt.internalFormat,Mt,ke,bt.colorSpace,F.isXRRenderTarget===!0),Ct=$e(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,ot,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ze,n.RENDERBUFFER,oe.__webglColorRenderbuffer[Ze])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(oe.__webglDepthRenderbuffer=n.createRenderbuffer(),se(oe.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(fe){t.bindTexture(n.TEXTURE_CUBE_MAP,Ce.__webglTexture),ge(n.TEXTURE_CUBE_MAP,S);for(let Ze=0;Ze<6;Ze++)if(S.mipmaps&&S.mipmaps.length>0)for(let bt=0;bt<S.mipmaps.length;bt++)xe(oe.__webglFramebuffer[Ze][bt],F,S,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,bt);else xe(oe.__webglFramebuffer[Ze],F,S,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0);y(S)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ye){for(let Ze=0,bt=Pe.length;Ze<bt;Ze++){let Mt=Pe[Ze],ke=i.get(Mt);t.bindTexture(n.TEXTURE_2D,ke.__webglTexture),ge(n.TEXTURE_2D,Mt),xe(oe.__webglFramebuffer,F,Mt,n.COLOR_ATTACHMENT0+Ze,n.TEXTURE_2D,0),y(Mt)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let Ze=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(Ze=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ze,Ce.__webglTexture),ge(Ze,S),S.mipmaps&&S.mipmaps.length>0)for(let bt=0;bt<S.mipmaps.length;bt++)xe(oe.__webglFramebuffer[bt],F,S,n.COLOR_ATTACHMENT0,Ze,bt);else xe(oe.__webglFramebuffer,F,S,n.COLOR_ATTACHMENT0,Ze,0);y(S)&&_(Ze),t.unbindTexture()}F.depthBuffer&&We(F)}function wt(F){let S=F.textures;for(let oe=0,Ce=S.length;oe<Ce;oe++){let Pe=S[oe];if(y(Pe)){let fe=T(F),Ye=i.get(Pe).__webglTexture;t.bindTexture(fe,Ye),_(fe),t.unbindTexture()}}}let pt=[],z=[];function nn(F){if(F.samples>0){if(Nt(F)===!1){let S=F.textures,oe=F.width,Ce=F.height,Pe=n.COLOR_BUFFER_BIT,fe=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ye=i.get(F),Ze=S.length>1;if(Ze)for(let Mt=0;Mt<S.length;Mt++)t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer);let bt=F.texture.mipmaps;bt&&bt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ye.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ye.__webglFramebuffer);for(let Mt=0;Mt<S.length;Mt++){if(F.resolveDepthBuffer&&(F.depthBuffer&&(Pe|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&F.resolveStencilBuffer&&(Pe|=n.STENCIL_BUFFER_BIT)),Ze){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ye.__webglColorRenderbuffer[Mt]);let ke=i.get(S[Mt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ke,0)}n.blitFramebuffer(0,0,oe,Ce,0,0,oe,Ce,Pe,n.NEAREST),l===!0&&(pt.length=0,z.length=0,pt.push(n.COLOR_ATTACHMENT0+Mt),F.depthBuffer&&F.resolveDepthBuffer===!1&&(pt.push(fe),z.push(fe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,z)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,pt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ze)for(let Mt=0;Mt<S.length;Mt++){t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.RENDERBUFFER,Ye.__webglColorRenderbuffer[Mt]);let ke=i.get(S[Mt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ye.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.TEXTURE_2D,ke,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer)}else if(F.depthBuffer&&F.resolveDepthBuffer===!1&&l){let S=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[S])}}}function $e(F){return Math.min(r.maxSamples,F.samples)}function Nt(F){let S=i.get(F);return F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&S.__useRenderToTexture!==!1}function Ke(F){let S=s.render.frame;f.get(F)!==S&&(f.set(F,S),F.update())}function Xt(F,S){let oe=F.colorSpace,Ce=F.format,Pe=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||oe!==zr&&oe!==Pc&&(qt.getTransfer(oe)===si?(Ce!==ps||Pe!==Fa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),S}function vt(F){return typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement?(u.width=F.naturalWidth||F.width,u.height=F.naturalHeight||F.height):typeof VideoFrame<"u"&&F instanceof VideoFrame?(u.width=F.displayWidth,u.height=F.displayHeight):(u.width=F.width,u.height=F.height),u}this.allocateTextureUnit=ae,this.resetTextureUnits=he,this.setTexture2D=Se,this.setTexture2DArray=Y,this.setTexture3D=ie,this.setTextureCube=X,this.rebindTextures=Ue,this.setupRenderTarget=at,this.updateRenderTargetMipmap=wt,this.updateMultisampleRenderTarget=nn,this.setupDepthRenderbuffer=We,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=Nt}function ufe(n,e){function t(i,r=Pc){let o,s=qt.getTransfer(r);if(i===Fa)return n.UNSIGNED_BYTE;if(i===Gb)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Wb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===MA)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===xA)return n.BYTE;if(i===bA)return n.SHORT;if(i===Tp)return n.UNSIGNED_SHORT;if(i===jb)return n.INT;if(i===Au)return n.UNSIGNED_INT;if(i===Ws)return n.FLOAT;if(i===Dp)return n.HALF_FLOAT;if(i===CA)return n.ALPHA;if(i===SA)return n.RGB;if(i===ps)return n.RGBA;if(i===fp)return n.DEPTH_COMPONENT;if(i===Ap)return n.DEPTH_STENCIL;if(i===$b)return n.RED;if(i===qb)return n.RED_INTEGER;if(i===EA)return n.RG;if(i===Xb)return n.RG_INTEGER;if(i===Yb)return n.RGBA_INTEGER;if(i===z0||i===j0||i===G0||i===W0)if(s===si)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===z0)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===j0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===G0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===W0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===z0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===j0)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===G0)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===W0)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Zb||i===Kb||i===Jb||i===Qb)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===Zb)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Kb)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Jb)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Qb)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===eM||i===tM||i===nM)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===eM||i===tM)return s===si?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===nM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===iM||i===rM||i===oM||i===sM||i===aM||i===lM||i===cM||i===uM||i===dM||i===fM||i===hM||i===pM||i===mM||i===gM)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===iM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===rM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===oM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===sM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===aM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===lM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===cM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===uM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===dM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===fM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===hM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===pM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===mM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===gM)return s===si?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===$0||i===vM||i===yM)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===$0)return s===si?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===vM)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===yM)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===TA||i===_M||i===wM||i===xM)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===$0)return o.COMPRESSED_RED_RGTC1_EXT;if(i===_M)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===wM)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===xM)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Ip?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var dfe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ffe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,ZA=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){let r=new Mo,o=e.properties.get(r);o.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new Ra({vertexShader:dfe,fragmentShader:ffe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Di(new A0(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},KA=class extends ml{constructor(e,t){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,u=null,f=null,h=null,p=null,g=null,v=null,x=new ZA,y=t.getContextAttributes(),_=null,T=null,M=[],C=[],H=new qe,L=null,k=new qi;k.viewport=new mn;let $=new qi;$.viewport=new mn;let N=[k,$],A=new Pb,j=null,he=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let J=M[B];return J===void 0&&(J=new vp,M[B]=J),J.getTargetRaySpace()},this.getControllerGrip=function(B){let J=M[B];return J===void 0&&(J=new vp,M[B]=J),J.getGripSpace()},this.getHand=function(B){let J=M[B];return J===void 0&&(J=new vp,M[B]=J),J.getHandSpace()};function ae(B){let J=C.indexOf(B.inputSource);if(J===-1)return;let xe=M[J];xe!==void 0&&(xe.update(B.inputSource,B.frame,u||s),xe.dispatchEvent({type:B.type,data:B.inputSource}))}function Re(){r.removeEventListener("select",ae),r.removeEventListener("selectstart",ae),r.removeEventListener("selectend",ae),r.removeEventListener("squeeze",ae),r.removeEventListener("squeezestart",ae),r.removeEventListener("squeezeend",ae),r.removeEventListener("end",Re),r.removeEventListener("inputsourceschange",Se);for(let B=0;B<M.length;B++){let J=C[B];J!==null&&(C[B]=null,M[B].disconnect(J))}j=null,he=null,x.reset(),e.setRenderTarget(_),g=null,p=null,h=null,r=null,T=null,re.stop(),i.isPresenting=!1,e.setPixelRatio(L),e.setSize(H.width,H.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){o=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){a=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(B){u=B},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=function(B){return _t(this,null,function*(){if(r=B,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",ae),r.addEventListener("selectstart",ae),r.addEventListener("selectend",ae),r.addEventListener("squeeze",ae),r.addEventListener("squeezestart",ae),r.addEventListener("squeezeend",ae),r.addEventListener("end",Re),r.addEventListener("inputsourceschange",Se),y.xrCompatible!==!0&&(yield t.makeXRCompatible()),L=e.getPixelRatio(),e.getSize(H),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let xe=null,se=null,je=null;y.depth&&(je=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=y.stencil?Ap:fp,se=y.stencil?Ip:Au);let We={colorFormat:t.RGBA8,depthFormat:je,scaleFactor:o};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer(We),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),T=new gl(p.textureWidth,p.textureHeight,{format:ps,type:Fa,depthTexture:new x0(p.textureWidth,p.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{let xe={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};g=new XRWebGLLayer(r,t,xe),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),T=new gl(g.framebufferWidth,g.framebufferHeight,{format:ps,type:Fa,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=yield r.requestReferenceSpace(a),re.setContext(r),re.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function Se(B){for(let J=0;J<B.removed.length;J++){let xe=B.removed[J],se=C.indexOf(xe);se>=0&&(C[se]=null,M[se].disconnect(xe))}for(let J=0;J<B.added.length;J++){let xe=B.added[J],se=C.indexOf(xe);if(se===-1){for(let We=0;We<M.length;We++)if(We>=C.length){C.push(xe),se=We;break}else if(C[We]===null){C[We]=xe,se=We;break}if(se===-1)break}let je=M[se];je&&je.connect(xe)}}let Y=new V,ie=new V;function X(B,J,xe){Y.setFromMatrixPosition(J.matrixWorld),ie.setFromMatrixPosition(xe.matrixWorld);let se=Y.distanceTo(ie),je=J.projectionMatrix.elements,We=xe.projectionMatrix.elements,Ue=je[14]/(je[10]-1),at=je[14]/(je[10]+1),wt=(je[9]+1)/je[5],pt=(je[9]-1)/je[5],z=(je[8]-1)/je[0],nn=(We[8]+1)/We[0],$e=Ue*z,Nt=Ue*nn,Ke=se/(-z+nn),Xt=Ke*-z;if(J.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(Xt),B.translateZ(Ke),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert(),je[10]===-1)B.projectionMatrix.copy(J.projectionMatrix),B.projectionMatrixInverse.copy(J.projectionMatrixInverse);else{let vt=Ue+Ke,F=at+Ke,S=$e-Xt,oe=Nt+(se-Xt),Ce=wt*at/F*vt,Pe=pt*at/F*vt;B.projectionMatrix.makePerspective(S,oe,Ce,Pe,vt,F),B.projectionMatrixInverse.copy(B.projectionMatrix).invert()}}function _e(B,J){J===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(J.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(r===null)return;let J=B.near,xe=B.far;x.texture!==null&&(x.depthNear>0&&(J=x.depthNear),x.depthFar>0&&(xe=x.depthFar)),A.near=$.near=k.near=J,A.far=$.far=k.far=xe,(j!==A.near||he!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),j=A.near,he=A.far),k.layers.mask=B.layers.mask|2,$.layers.mask=B.layers.mask|4,A.layers.mask=k.layers.mask|$.layers.mask;let se=B.parent,je=A.cameras;_e(A,se);for(let We=0;We<je.length;We++)_e(je[We],se);je.length===2?X(A,k,$):A.projectionMatrix.copy(k.projectionMatrix),Ve(B,A,se)};function Ve(B,J,xe){xe===null?B.matrix.copy(J.matrixWorld):(B.matrix.copy(xe.matrixWorld),B.matrix.invert(),B.matrix.multiply(J.matrixWorld)),B.matrix.decompose(B.position,B.quaternion,B.scale),B.updateMatrixWorld(!0),B.projectionMatrix.copy(J.projectionMatrix),B.projectionMatrixInverse.copy(J.projectionMatrixInverse),B.isPerspectiveCamera&&(B.fov=Hd*2*Math.atan(1/B.projectionMatrix.elements[5]),B.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(B){l=B,p!==null&&(p.fixedFoveation=B),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=B)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(A)};let rt=null;function ge(B,J){if(f=J.getViewerPose(u||s),v=J,f!==null){let xe=f.views;g!==null&&(e.setRenderTargetFramebuffer(T,g.framebuffer),e.setRenderTarget(T));let se=!1;xe.length!==A.cameras.length&&(A.cameras.length=0,se=!0);for(let Ue=0;Ue<xe.length;Ue++){let at=xe[Ue],wt=null;if(g!==null)wt=g.getViewport(at);else{let z=h.getViewSubImage(p,at);wt=z.viewport,Ue===0&&(e.setRenderTargetTextures(T,z.colorTexture,z.depthStencilTexture),e.setRenderTarget(T))}let pt=N[Ue];pt===void 0&&(pt=new qi,pt.layers.enable(Ue),pt.viewport=new mn,N[Ue]=pt),pt.matrix.fromArray(at.transform.matrix),pt.matrix.decompose(pt.position,pt.quaternion,pt.scale),pt.projectionMatrix.fromArray(at.projectionMatrix),pt.projectionMatrixInverse.copy(pt.projectionMatrix).invert(),pt.viewport.set(wt.x,wt.y,wt.width,wt.height),Ue===0&&(A.matrix.copy(pt.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),se===!0&&A.cameras.push(pt)}let je=r.enabledFeatures;if(je&&je.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&h){let Ue=h.getDepthInformation(xe[0]);Ue&&Ue.isValid&&Ue.texture&&x.init(e,Ue,r.renderState)}}for(let xe=0;xe<M.length;xe++){let se=C[xe],je=M[xe];se!==null&&je!==void 0&&je.update(se,J,u||s)}rt&&rt(B,J),J.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:J}),v=null}let re=new Lz;re.setAnimationLoop(ge),this.setAnimationLoop=function(B){rt=B},this.dispose=function(){}}},rf=new Rr,hfe=new ht;function pfe(n,e){function t(y,_){y.matrixAutoUpdate===!0&&y.updateMatrix(),_.value.copy(y.matrix)}function i(y,_){_.color.getRGB(y.fogColor.value,OA(n)),_.isFog?(y.fogNear.value=_.near,y.fogFar.value=_.far):_.isFogExp2&&(y.fogDensity.value=_.density)}function r(y,_,T,M,C){_.isMeshBasicMaterial||_.isMeshLambertMaterial?o(y,_):_.isMeshToonMaterial?(o(y,_),h(y,_)):_.isMeshPhongMaterial?(o(y,_),f(y,_)):_.isMeshStandardMaterial?(o(y,_),p(y,_),_.isMeshPhysicalMaterial&&g(y,_,C)):_.isMeshMatcapMaterial?(o(y,_),v(y,_)):_.isMeshDepthMaterial?o(y,_):_.isMeshDistanceMaterial?(o(y,_),x(y,_)):_.isMeshNormalMaterial?o(y,_):_.isLineBasicMaterial?(s(y,_),_.isLineDashedMaterial&&a(y,_)):_.isPointsMaterial?l(y,_,T,M):_.isSpriteMaterial?u(y,_):_.isShadowMaterial?(y.color.value.copy(_.color),y.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function o(y,_){y.opacity.value=_.opacity,_.color&&y.diffuse.value.copy(_.color),_.emissive&&y.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.bumpMap&&(y.bumpMap.value=_.bumpMap,t(_.bumpMap,y.bumpMapTransform),y.bumpScale.value=_.bumpScale,_.side===bo&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,t(_.normalMap,y.normalMapTransform),y.normalScale.value.copy(_.normalScale),_.side===bo&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,t(_.displacementMap,y.displacementMapTransform),y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,y.emissiveMapTransform)),_.specularMap&&(y.specularMap.value=_.specularMap,t(_.specularMap,y.specularMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);let T=e.get(_),M=T.envMap,C=T.envMapRotation;M&&(y.envMap.value=M,rf.copy(C),rf.x*=-1,rf.y*=-1,rf.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(rf.y*=-1,rf.z*=-1),y.envMapRotation.value.setFromMatrix4(hfe.makeRotationFromEuler(rf)),y.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=_.reflectivity,y.ior.value=_.ior,y.refractionRatio.value=_.refractionRatio),_.lightMap&&(y.lightMap.value=_.lightMap,y.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,y.lightMapTransform)),_.aoMap&&(y.aoMap.value=_.aoMap,y.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,y.aoMapTransform))}function s(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform))}function a(y,_){y.dashSize.value=_.dashSize,y.totalSize.value=_.dashSize+_.gapSize,y.scale.value=_.scale}function l(y,_,T,M){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.size.value=_.size*T,y.scale.value=M*.5,_.map&&(y.map.value=_.map,t(_.map,y.uvTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function u(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.rotation.value=_.rotation,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function f(y,_){y.specular.value.copy(_.specular),y.shininess.value=Math.max(_.shininess,1e-4)}function h(y,_){_.gradientMap&&(y.gradientMap.value=_.gradientMap)}function p(y,_){y.metalness.value=_.metalness,_.metalnessMap&&(y.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,y.metalnessMapTransform)),y.roughness.value=_.roughness,_.roughnessMap&&(y.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,y.roughnessMapTransform)),_.envMap&&(y.envMapIntensity.value=_.envMapIntensity)}function g(y,_,T){y.ior.value=_.ior,_.sheen>0&&(y.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),y.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(y.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,y.sheenColorMapTransform)),_.sheenRoughnessMap&&(y.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,y.sheenRoughnessMapTransform))),_.clearcoat>0&&(y.clearcoat.value=_.clearcoat,y.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(y.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,y.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(y.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===bo&&y.clearcoatNormalScale.value.negate())),_.dispersion>0&&(y.dispersion.value=_.dispersion),_.iridescence>0&&(y.iridescence.value=_.iridescence,y.iridescenceIOR.value=_.iridescenceIOR,y.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(y.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,y.iridescenceMapTransform)),_.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),_.transmission>0&&(y.transmission.value=_.transmission,y.transmissionSamplerMap.value=T.texture,y.transmissionSamplerSize.value.set(T.width,T.height),_.transmissionMap&&(y.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,y.transmissionMapTransform)),y.thickness.value=_.thickness,_.thicknessMap&&(y.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=_.attenuationDistance,y.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(y.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(y.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=_.specularIntensity,y.specularColor.value.copy(_.specularColor),_.specularColorMap&&(y.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,y.specularColorMapTransform)),_.specularIntensityMap&&(y.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,_){_.matcap&&(y.matcap.value=_.matcap)}function x(y,_){let T=e.get(_).light;y.referencePosition.value.setFromMatrixPosition(T.matrixWorld),y.nearDistance.value=T.shadow.camera.near,y.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function mfe(n,e,t,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(T,M){let C=M.program;i.uniformBlockBinding(T,C)}function u(T,M){let C=r[T.id];C===void 0&&(v(T),C=f(T),r[T.id]=C,T.addEventListener("dispose",y));let H=M.program;i.updateUBOMapping(T,H);let L=e.render.frame;o[T.id]!==L&&(p(T),o[T.id]=L)}function f(T){let M=h();T.__bindingPointIndex=M;let C=n.createBuffer(),H=T.__size,L=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,H,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,C),C}function h(){for(let T=0;T<a;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(T){let M=r[T.id],C=T.uniforms,H=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let L=0,k=C.length;L<k;L++){let $=Array.isArray(C[L])?C[L]:[C[L]];for(let N=0,A=$.length;N<A;N++){let j=$[N];if(g(j,L,N,H)===!0){let he=j.__offset,ae=Array.isArray(j.value)?j.value:[j.value],Re=0;for(let Se=0;Se<ae.length;Se++){let Y=ae[Se],ie=x(Y);typeof Y=="number"||typeof Y=="boolean"?(j.__data[0]=Y,n.bufferSubData(n.UNIFORM_BUFFER,he+Re,j.__data)):Y.isMatrix3?(j.__data[0]=Y.elements[0],j.__data[1]=Y.elements[1],j.__data[2]=Y.elements[2],j.__data[3]=0,j.__data[4]=Y.elements[3],j.__data[5]=Y.elements[4],j.__data[6]=Y.elements[5],j.__data[7]=0,j.__data[8]=Y.elements[6],j.__data[9]=Y.elements[7],j.__data[10]=Y.elements[8],j.__data[11]=0):(Y.toArray(j.__data,Re),Re+=ie.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,he,j.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(T,M,C,H){let L=T.value,k=M+"_"+C;if(H[k]===void 0)return typeof L=="number"||typeof L=="boolean"?H[k]=L:H[k]=L.clone(),!0;{let $=H[k];if(typeof L=="number"||typeof L=="boolean"){if($!==L)return H[k]=L,!0}else if($.equals(L)===!1)return $.copy(L),!0}return!1}function v(T){let M=T.uniforms,C=0,H=16;for(let k=0,$=M.length;k<$;k++){let N=Array.isArray(M[k])?M[k]:[M[k]];for(let A=0,j=N.length;A<j;A++){let he=N[A],ae=Array.isArray(he.value)?he.value:[he.value];for(let Re=0,Se=ae.length;Re<Se;Re++){let Y=ae[Re],ie=x(Y),X=C%H,_e=X%ie.boundary,Ve=X+_e;C+=_e,Ve!==0&&H-Ve<ie.storage&&(C+=H-Ve),he.__data=new Float32Array(ie.storage/Float32Array.BYTES_PER_ELEMENT),he.__offset=C,C+=ie.storage}}}let L=C%H;return L>0&&(C+=H-L),T.__size=C,T.__cache={},this}function x(T){let M={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(M.boundary=4,M.storage=4):T.isVector2?(M.boundary=8,M.storage=8):T.isVector3||T.isColor?(M.boundary=16,M.storage=12):T.isVector4?(M.boundary=16,M.storage=16):T.isMatrix3?(M.boundary=48,M.storage=48):T.isMatrix4?(M.boundary=64,M.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),M}function y(T){let M=T.target;M.removeEventListener("dispose",y);let C=s.indexOf(M.__bindingPointIndex);s.splice(C,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete o[M.id]}function _(){for(let T in r)n.deleteBuffer(r[T]);s=[],r={},o={}}return{bind:l,update:u,dispose:_}}var EM=class{constructor(e={}){let{canvas:t=tz(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=s;let v=new Uint32Array(4),x=new Int32Array(4),y=null,_=null,T=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Rc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let C=this,H=!1;this._outputColorSpace=On;let L=0,k=0,$=null,N=-1,A=null,j=new mn,he=new mn,ae=null,Re=new gt(0),Se=0,Y=t.width,ie=t.height,X=1,_e=null,Ve=null,rt=new mn(0,0,Y,ie),ge=new mn(0,0,Y,ie),re=!1,B=new wp,J=!1,xe=!1,se=new ht,je=new ht,We=new V,Ue=new mn,at={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},wt=!1;function pt(){return $===null?X:1}let z=i;function nn(I,Q){return t.getContext(I,Q)}try{let I={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ob}`),t.addEventListener("webglcontextlost",De,!1),t.addEventListener("webglcontextrestored",it,!1),t.addEventListener("webglcontextcreationerror",Je,!1),z===null){let Q="webgl2";if(z=nn(Q,I),z===null)throw nn(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}let $e,Nt,Ke,Xt,vt,F,S,oe,Ce,Pe,fe,Ye,Ze,bt,Mt,ke,ot,Ct,At,st,vn,Yt,Xn,Z;function Qe(){$e=new Oue(z),$e.init(),Yt=new ufe(z,$e),Nt=new Eue(z,$e,e,Yt),Ke=new lfe(z,$e),Nt.reverseDepthBuffer&&p&&Ke.buffers.depth.setReversed(!0),Xt=new Lue(z),vt=new Yde,F=new cfe(z,$e,Ke,vt,Nt,Yt,Xt),S=new Due(C),oe=new Pue(C),Ce=new zae(z),Xn=new Cue(z,Ce),Pe=new Nue(z,Ce,Xt,Xn),fe=new Uue(z,Pe,Ce,Xt),At=new kue(z,Nt,F),ke=new Tue(vt),Ye=new Xde(C,S,oe,$e,Nt,Xn,ke),Ze=new pfe(C,vt),bt=new Kde,Mt=new ife($e),Ct=new Mue(C,S,oe,Ke,fe,g,l),ot=new sfe(C,fe,Nt),Z=new mfe(z,Xt,Nt,Ke),st=new Sue(z,$e,Xt),vn=new Fue(z,$e,Xt),Xt.programs=Ye.programs,C.capabilities=Nt,C.extensions=$e,C.properties=vt,C.renderLists=bt,C.shadowMap=ot,C.state=Ke,C.info=Xt}Qe();let pe=new KA(C,z);this.xr=pe,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){let I=$e.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){let I=$e.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(I){I!==void 0&&(X=I,this.setSize(Y,ie,!1))},this.getSize=function(I){return I.set(Y,ie)},this.setSize=function(I,Q,le=!0){if(pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=I,ie=Q,t.width=Math.floor(I*X),t.height=Math.floor(Q*X),le===!0&&(t.style.width=I+"px",t.style.height=Q+"px"),this.setViewport(0,0,I,Q)},this.getDrawingBufferSize=function(I){return I.set(Y*X,ie*X).floor()},this.setDrawingBufferSize=function(I,Q,le){Y=I,ie=Q,X=le,t.width=Math.floor(I*le),t.height=Math.floor(Q*le),this.setViewport(0,0,I,Q)},this.getCurrentViewport=function(I){return I.copy(j)},this.getViewport=function(I){return I.copy(rt)},this.setViewport=function(I,Q,le,ue){I.isVector4?rt.set(I.x,I.y,I.z,I.w):rt.set(I,Q,le,ue),Ke.viewport(j.copy(rt).multiplyScalar(X).round())},this.getScissor=function(I){return I.copy(ge)},this.setScissor=function(I,Q,le,ue){I.isVector4?ge.set(I.x,I.y,I.z,I.w):ge.set(I,Q,le,ue),Ke.scissor(he.copy(ge).multiplyScalar(X).round())},this.getScissorTest=function(){return re},this.setScissorTest=function(I){Ke.setScissorTest(re=I)},this.setOpaqueSort=function(I){_e=I},this.setTransparentSort=function(I){Ve=I},this.getClearColor=function(I){return I.copy(Ct.getClearColor())},this.setClearColor=function(){Ct.setClearColor(...arguments)},this.getClearAlpha=function(){return Ct.getClearAlpha()},this.setClearAlpha=function(){Ct.setClearAlpha(...arguments)},this.clear=function(I=!0,Q=!0,le=!0){let ue=0;if(I){let te=!1;if($!==null){let Be=$.texture.format;te=Be===Yb||Be===Xb||Be===qb}if(te){let Be=$.texture.type,et=Be===Fa||Be===Au||Be===Tp||Be===Ip||Be===Gb||Be===Wb,lt=Ct.getClearColor(),mt=Ct.getClearAlpha(),Vt=lt.r,Bt=lt.g,St=lt.b;et?(v[0]=Vt,v[1]=Bt,v[2]=St,v[3]=mt,z.clearBufferuiv(z.COLOR,0,v)):(x[0]=Vt,x[1]=Bt,x[2]=St,x[3]=mt,z.clearBufferiv(z.COLOR,0,x))}else ue|=z.COLOR_BUFFER_BIT}Q&&(ue|=z.DEPTH_BUFFER_BIT),le&&(ue|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",De,!1),t.removeEventListener("webglcontextrestored",it,!1),t.removeEventListener("webglcontextcreationerror",Je,!1),Ct.dispose(),bt.dispose(),Mt.dispose(),vt.dispose(),S.dispose(),oe.dispose(),fe.dispose(),Xn.dispose(),Z.dispose(),Ye.dispose(),pe.dispose(),pe.removeEventListener("sessionstart",Ou),pe.removeEventListener("sessionend",Ua),gs.stop()};function De(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),H=!0}function it(){console.log("THREE.WebGLRenderer: Context Restored."),H=!1;let I=Xt.autoReset,Q=ot.enabled,le=ot.autoUpdate,ue=ot.needsUpdate,te=ot.type;Qe(),Xt.autoReset=I,ot.enabled=Q,ot.autoUpdate=le,ot.needsUpdate=ue,ot.type=te}function Je(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function Ut(I){let Q=I.target;Q.removeEventListener("dispose",Ut),ui(Q)}function ui(I){Xi(I),vt.remove(I)}function Xi(I){let Q=vt.get(I).programs;Q!==void 0&&(Q.forEach(function(le){Ye.releaseProgram(le)}),I.isShaderMaterial&&Ye.releaseShaderCache(I))}this.renderBufferDirect=function(I,Q,le,ue,te,Be){Q===null&&(Q=at);let et=te.isMesh&&te.matrixWorld.determinant()<0,lt=XM(I,Q,le,ue,te);Ke.setMaterial(ue,et);let mt=le.index,Vt=1;if(ue.wireframe===!0){if(mt=Pe.getWireframeAttribute(le),mt===void 0)return;Vt=2}let Bt=le.drawRange,St=le.attributes.position,En=Bt.start*Vt,Un=(Bt.start+Bt.count)*Vt;Be!==null&&(En=Math.max(En,Be.start*Vt),Un=Math.min(Un,(Be.start+Be.count)*Vt)),mt!==null?(En=Math.max(En,0),Un=Math.min(Un,mt.count)):St!=null&&(En=Math.max(En,0),Un=Math.min(Un,St.count));let Ii=Un-En;if(Ii<0||Ii===1/0)return;Xn.setup(te,ue,lt,le,mt);let vi,Fn=st;if(mt!==null&&(vi=Ce.get(mt),Fn=vn,Fn.setIndex(vi)),te.isMesh)ue.wireframe===!0?(Ke.setLineWidth(ue.wireframeLinewidth*pt()),Fn.setMode(z.LINES)):Fn.setMode(z.TRIANGLES);else if(te.isLine){let Et=ue.linewidth;Et===void 0&&(Et=1),Ke.setLineWidth(Et*pt()),te.isLineSegments?Fn.setMode(z.LINES):te.isLineLoop?Fn.setMode(z.LINE_LOOP):Fn.setMode(z.LINE_STRIP)}else te.isPoints?Fn.setMode(z.POINTS):te.isSprite&&Fn.setMode(z.TRIANGLES);if(te.isBatchedMesh)if(te._multiDrawInstances!==null)Y0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Fn.renderMultiDrawInstances(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount,te._multiDrawInstances);else if($e.get("WEBGL_multi_draw"))Fn.renderMultiDraw(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount);else{let Et=te._multiDrawStarts,ki=te._multiDrawCounts,Bn=te._multiDrawCount,qo=mt?Ce.get(mt).bytesPerElement:1,Ml=vt.get(ue).currentProgram.getUniforms();for(let jr=0;jr<Bn;jr++)Ml.setValue(z,"_gl_DrawID",jr),Fn.render(Et[jr]/qo,ki[jr])}else if(te.isInstancedMesh)Fn.renderInstances(En,Ii,te.count);else if(le.isInstancedBufferGeometry){let Et=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,ki=Math.min(le.instanceCount,Et);Fn.renderInstances(En,Ii,ki)}else Fn.render(En,Ii)};function Nn(I,Q,le){I.transparent===!0&&I.side===Gs&&I.forceSinglePass===!1?(I.side=bo,I.needsUpdate=!0,cf(I,Q,le),I.side=Ia,I.needsUpdate=!0,cf(I,Q,le),I.side=Gs):cf(I,Q,le)}this.compile=function(I,Q,le=null){le===null&&(le=I),_=Mt.get(le),_.init(Q),M.push(_),le.traverseVisible(function(te){te.isLight&&te.layers.test(Q.layers)&&(_.pushLight(te),te.castShadow&&_.pushShadow(te))}),I!==le&&I.traverseVisible(function(te){te.isLight&&te.layers.test(Q.layers)&&(_.pushLight(te),te.castShadow&&_.pushShadow(te))}),_.setupLights();let ue=new Set;return I.traverse(function(te){if(!(te.isMesh||te.isPoints||te.isLine||te.isSprite))return;let Be=te.material;if(Be)if(Array.isArray(Be))for(let et=0;et<Be.length;et++){let lt=Be[et];Nn(lt,le,te),ue.add(lt)}else Nn(Be,le,te),ue.add(Be)}),_=M.pop(),ue},this.compileAsync=function(I,Q,le=null){let ue=this.compile(I,Q,le);return new Promise(te=>{function Be(){if(ue.forEach(function(et){vt.get(et).currentProgram.isReady()&&ue.delete(et)}),ue.size===0){te(I);return}setTimeout(Be,10)}$e.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let br=null;function So(I){br&&br(I)}function Ou(){gs.stop()}function Ua(){gs.start()}let gs=new Lz;gs.setAnimationLoop(So),typeof self<"u"&&gs.setContext(self),this.setAnimationLoop=function(I){br=I,pe.setAnimationLoop(I),I===null?gs.stop():gs.start()},pe.addEventListener("sessionstart",Ou),pe.addEventListener("sessionend",Ua),this.render=function(I,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(H===!0)return;if(I.matrixWorldAutoUpdate===!0&&I.updateMatrixWorld(),Q.parent===null&&Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),pe.enabled===!0&&pe.isPresenting===!0&&(pe.cameraAutoUpdate===!0&&pe.updateCamera(Q),Q=pe.getCamera()),I.isScene===!0&&I.onBeforeRender(C,I,Q,$),_=Mt.get(I,M.length),_.init(Q),M.push(_),je.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),B.setFromProjectionMatrix(je),xe=this.localClippingEnabled,J=ke.init(this.clippingPlanes,xe),y=bt.get(I,T.length),y.init(),T.push(y),pe.enabled===!0&&pe.isPresenting===!0){let Be=C.xr.getDepthSensingMesh();Be!==null&&Lc(Be,Q,-1/0,C.sortObjects)}Lc(I,Q,0,C.sortObjects),y.finish(),C.sortObjects===!0&&y.sort(_e,Ve),wt=pe.enabled===!1||pe.isPresenting===!1||pe.hasDepthSensing()===!1,wt&&Ct.addToRenderList(y,I),this.info.render.frame++,J===!0&&ke.beginShadows();let le=_.state.shadowsArray;ot.render(le,I,Q),J===!0&&ke.endShadows(),this.info.autoReset===!0&&this.info.reset();let ue=y.opaque,te=y.transmissive;if(_.setupLights(),Q.isArrayCamera){let Be=Q.cameras;if(te.length>0)for(let et=0,lt=Be.length;et<lt;et++){let mt=Be[et];kc(ue,te,I,mt)}wt&&Ct.render(I);for(let et=0,lt=Be.length;et<lt;et++){let mt=Be[et];Zs(y,I,mt,mt.viewport)}}else te.length>0&&kc(ue,te,I,Q),wt&&Ct.render(I),Zs(y,I,Q);$!==null&&k===0&&(F.updateMultisampleRenderTarget($),F.updateRenderTargetMipmap($)),I.isScene===!0&&I.onAfterRender(C,I,Q),Xn.resetDefaultState(),N=-1,A=null,M.pop(),M.length>0?(_=M[M.length-1],J===!0&&ke.setGlobalState(C.clippingPlanes,_.state.camera)):_=null,T.pop(),T.length>0?y=T[T.length-1]:y=null};function Lc(I,Q,le,ue){if(I.visible===!1)return;if(I.layers.test(Q.layers)){if(I.isGroup)le=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(Q);else if(I.isLight)_.pushLight(I),I.castShadow&&_.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||B.intersectsSprite(I)){ue&&Ue.setFromMatrixPosition(I.matrixWorld).applyMatrix4(je);let et=fe.update(I),lt=I.material;lt.visible&&y.push(I,et,lt,le,Ue.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(!I.frustumCulled||B.intersectsObject(I))){let et=fe.update(I),lt=I.material;if(ue&&(I.boundingSphere!==void 0?(I.boundingSphere===null&&I.computeBoundingSphere(),Ue.copy(I.boundingSphere.center)):(et.boundingSphere===null&&et.computeBoundingSphere(),Ue.copy(et.boundingSphere.center)),Ue.applyMatrix4(I.matrixWorld).applyMatrix4(je)),Array.isArray(lt)){let mt=et.groups;for(let Vt=0,Bt=mt.length;Vt<Bt;Vt++){let St=mt[Vt],En=lt[St.materialIndex];En&&En.visible&&y.push(I,et,En,le,Ue.z,St)}}else lt.visible&&y.push(I,et,lt,le,Ue.z,null)}}let Be=I.children;for(let et=0,lt=Be.length;et<lt;et++)Lc(Be[et],Q,le,ue)}function Zs(I,Q,le,ue){let te=I.opaque,Be=I.transmissive,et=I.transparent;_.setupLightsView(le),J===!0&&ke.setGlobalState(C.clippingPlanes,le),ue&&Ke.viewport(j.copy(ue)),te.length>0&&vs(te,Q,le),Be.length>0&&vs(Be,Q,le),et.length>0&&vs(et,Q,le),Ke.buffers.depth.setTest(!0),Ke.buffers.depth.setMask(!0),Ke.buffers.color.setMask(!0),Ke.setPolygonOffset(!1)}function kc(I,Q,le,ue){if((le.isScene===!0?le.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[ue.id]===void 0&&(_.state.transmissionRenderTarget[ue.id]=new gl(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")||$e.has("EXT_color_buffer_float")?Dp:Fa,minFilter:Na,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qt.workingColorSpace}));let Be=_.state.transmissionRenderTarget[ue.id],et=ue.viewport||j;Be.setSize(et.z*C.transmissionResolutionScale,et.w*C.transmissionResolutionScale);let lt=C.getRenderTarget();C.setRenderTarget(Be),C.getClearColor(Re),Se=C.getClearAlpha(),Se<1&&C.setClearColor(16777215,.5),C.clear(),wt&&Ct.render(le);let mt=C.toneMapping;C.toneMapping=Rc;let Vt=ue.viewport;if(ue.viewport!==void 0&&(ue.viewport=void 0),_.setupLightsView(ue),J===!0&&ke.setGlobalState(C.clippingPlanes,ue),vs(I,le,ue),F.updateMultisampleRenderTarget(Be),F.updateRenderTargetMipmap(Be),$e.has("WEBGL_multisampled_render_to_texture")===!1){let Bt=!1;for(let St=0,En=Q.length;St<En;St++){let Un=Q[St],Ii=Un.object,vi=Un.geometry,Fn=Un.material,Et=Un.group;if(Fn.side===Gs&&Ii.layers.test(ue.layers)){let ki=Fn.side;Fn.side=bo,Fn.needsUpdate=!0,nv(Ii,le,ue,vi,Fn,Et),Fn.side=ki,Fn.needsUpdate=!0,Bt=!0}}Bt===!0&&(F.updateMultisampleRenderTarget(Be),F.updateRenderTargetMipmap(Be))}C.setRenderTarget(lt),C.setClearColor(Re,Se),Vt!==void 0&&(ue.viewport=Vt),C.toneMapping=mt}function vs(I,Q,le){let ue=Q.isScene===!0?Q.overrideMaterial:null;for(let te=0,Be=I.length;te<Be;te++){let et=I[te],lt=et.object,mt=et.geometry,Vt=et.group,Bt=et.material;Bt.allowOverride===!0&&ue!==null&&(Bt=ue),lt.layers.test(le.layers)&&nv(lt,Q,le,mt,Bt,Vt)}}function nv(I,Q,le,ue,te,Be){I.onBeforeRender(C,Q,le,ue,te,Be),I.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),te.onBeforeRender(C,Q,le,ue,I,Be),te.transparent===!0&&te.side===Gs&&te.forceSinglePass===!1?(te.side=bo,te.needsUpdate=!0,C.renderBufferDirect(le,Q,ue,te,I,Be),te.side=Ia,te.needsUpdate=!0,C.renderBufferDirect(le,Q,ue,te,I,Be),te.side=Gs):C.renderBufferDirect(le,Q,ue,te,I,Be),I.onAfterRender(C,Q,le,ue,te,Be)}function cf(I,Q,le){Q.isScene!==!0&&(Q=at);let ue=vt.get(I),te=_.state.lights,Be=_.state.shadowsArray,et=te.state.version,lt=Ye.getParameters(I,te.state,Be,Q,le),mt=Ye.getProgramCacheKey(lt),Vt=ue.programs;ue.environment=I.isMeshStandardMaterial?Q.environment:null,ue.fog=Q.fog,ue.envMap=(I.isMeshStandardMaterial?oe:S).get(I.envMap||ue.environment),ue.envMapRotation=ue.environment!==null&&I.envMap===null?Q.environmentRotation:I.envMapRotation,Vt===void 0&&(I.addEventListener("dispose",Ut),Vt=new Map,ue.programs=Vt);let Bt=Vt.get(mt);if(Bt!==void 0){if(ue.currentProgram===Bt&&ue.lightsStateVersion===et)return iv(I,lt),Bt}else lt.uniforms=Ye.getUniforms(I),I.onBeforeCompile(lt,C),Bt=Ye.acquireProgram(lt,mt),Vt.set(mt,Bt),ue.uniforms=lt.uniforms;let St=ue.uniforms;return(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(St.clippingPlanes=ke.uniform),iv(I,lt),ue.needsLights=ZM(I),ue.lightsStateVersion=et,ue.needsLights&&(St.ambientLightColor.value=te.state.ambient,St.lightProbe.value=te.state.probe,St.directionalLights.value=te.state.directional,St.directionalLightShadows.value=te.state.directionalShadow,St.spotLights.value=te.state.spot,St.spotLightShadows.value=te.state.spotShadow,St.rectAreaLights.value=te.state.rectArea,St.ltc_1.value=te.state.rectAreaLTC1,St.ltc_2.value=te.state.rectAreaLTC2,St.pointLights.value=te.state.point,St.pointLightShadows.value=te.state.pointShadow,St.hemisphereLights.value=te.state.hemi,St.directionalShadowMap.value=te.state.directionalShadowMap,St.directionalShadowMatrix.value=te.state.directionalShadowMatrix,St.spotShadowMap.value=te.state.spotShadowMap,St.spotLightMatrix.value=te.state.spotLightMatrix,St.spotLightMap.value=te.state.spotLightMap,St.pointShadowMap.value=te.state.pointShadowMap,St.pointShadowMatrix.value=te.state.pointShadowMatrix),ue.currentProgram=Bt,ue.uniformsList=null,Bt}function jp(I){if(I.uniformsList===null){let Q=I.currentProgram.getUniforms();I.uniformsList=Np.seqWithValue(Q.seq,I.uniforms)}return I.uniformsList}function iv(I,Q){let le=vt.get(I);le.outputColorSpace=Q.outputColorSpace,le.batching=Q.batching,le.batchingColor=Q.batchingColor,le.instancing=Q.instancing,le.instancingColor=Q.instancingColor,le.instancingMorph=Q.instancingMorph,le.skinning=Q.skinning,le.morphTargets=Q.morphTargets,le.morphNormals=Q.morphNormals,le.morphColors=Q.morphColors,le.morphTargetsCount=Q.morphTargetsCount,le.numClippingPlanes=Q.numClippingPlanes,le.numIntersection=Q.numClipIntersection,le.vertexAlphas=Q.vertexAlphas,le.vertexTangents=Q.vertexTangents,le.toneMapping=Q.toneMapping}function XM(I,Q,le,ue,te){Q.isScene!==!0&&(Q=at),F.resetTextureUnits();let Be=Q.fog,et=ue.isMeshStandardMaterial?Q.environment:null,lt=$===null?C.outputColorSpace:$.isXRRenderTarget===!0?$.texture.colorSpace:zr,mt=(ue.isMeshStandardMaterial?oe:S).get(ue.envMap||et),Vt=ue.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,Bt=!!le.attributes.tangent&&(!!ue.normalMap||ue.anisotropy>0),St=!!le.morphAttributes.position,En=!!le.morphAttributes.normal,Un=!!le.morphAttributes.color,Ii=Rc;ue.toneMapped&&($===null||$.isXRRenderTarget===!0)&&(Ii=C.toneMapping);let vi=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,Fn=vi!==void 0?vi.length:0,Et=vt.get(ue),ki=_.state.lights;if(J===!0&&(xe===!0||I!==A)){let dr=I===A&&ue.id===N;ke.setState(ue,I,dr)}let Bn=!1;ue.version===Et.__version?(Et.needsLights&&Et.lightsStateVersion!==ki.state.version||Et.outputColorSpace!==lt||te.isBatchedMesh&&Et.batching===!1||!te.isBatchedMesh&&Et.batching===!0||te.isBatchedMesh&&Et.batchingColor===!0&&te.colorTexture===null||te.isBatchedMesh&&Et.batchingColor===!1&&te.colorTexture!==null||te.isInstancedMesh&&Et.instancing===!1||!te.isInstancedMesh&&Et.instancing===!0||te.isSkinnedMesh&&Et.skinning===!1||!te.isSkinnedMesh&&Et.skinning===!0||te.isInstancedMesh&&Et.instancingColor===!0&&te.instanceColor===null||te.isInstancedMesh&&Et.instancingColor===!1&&te.instanceColor!==null||te.isInstancedMesh&&Et.instancingMorph===!0&&te.morphTexture===null||te.isInstancedMesh&&Et.instancingMorph===!1&&te.morphTexture!==null||Et.envMap!==mt||ue.fog===!0&&Et.fog!==Be||Et.numClippingPlanes!==void 0&&(Et.numClippingPlanes!==ke.numPlanes||Et.numIntersection!==ke.numIntersection)||Et.vertexAlphas!==Vt||Et.vertexTangents!==Bt||Et.morphTargets!==St||Et.morphNormals!==En||Et.morphColors!==Un||Et.toneMapping!==Ii||Et.morphTargetsCount!==Fn)&&(Bn=!0):(Bn=!0,Et.__version=ue.version);let qo=Et.currentProgram;Bn===!0&&(qo=cf(ue,Q,te));let Ml=!1,jr=!1,Cl=!1,yi=qo.getUniforms(),oo=Et.uniforms;if(Ke.useProgram(qo.program)&&(Ml=!0,jr=!0,Cl=!0),ue.id!==N&&(N=ue.id,jr=!0),Ml||A!==I){Ke.buffers.depth.getReversed()?(se.copy(I.projectionMatrix),iz(se),rz(se),yi.setValue(z,"projectionMatrix",se)):yi.setValue(z,"projectionMatrix",I.projectionMatrix),yi.setValue(z,"viewMatrix",I.matrixWorldInverse);let Yi=yi.map.cameraPosition;Yi!==void 0&&Yi.setValue(z,We.setFromMatrixPosition(I.matrixWorld)),Nt.logarithmicDepthBuffer&&yi.setValue(z,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&yi.setValue(z,"isOrthographic",I.isOrthographicCamera===!0),A!==I&&(A=I,jr=!0,Cl=!0)}if(te.isSkinnedMesh){yi.setOptional(z,te,"bindMatrix"),yi.setOptional(z,te,"bindMatrixInverse");let dr=te.skeleton;dr&&(dr.boneTexture===null&&dr.computeBoneTexture(),yi.setValue(z,"boneTexture",dr.boneTexture,F))}te.isBatchedMesh&&(yi.setOptional(z,te,"batchingTexture"),yi.setValue(z,"batchingTexture",te._matricesTexture,F),yi.setOptional(z,te,"batchingIdTexture"),yi.setValue(z,"batchingIdTexture",te._indirectTexture,F),yi.setOptional(z,te,"batchingColorTexture"),te._colorsTexture!==null&&yi.setValue(z,"batchingColorTexture",te._colorsTexture,F));let Gr=le.morphAttributes;if((Gr.position!==void 0||Gr.normal!==void 0||Gr.color!==void 0)&&At.update(te,le,qo),(jr||Et.receiveShadow!==te.receiveShadow)&&(Et.receiveShadow=te.receiveShadow,yi.setValue(z,"receiveShadow",te.receiveShadow)),ue.isMeshGouraudMaterial&&ue.envMap!==null&&(oo.envMap.value=mt,oo.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),ue.isMeshStandardMaterial&&ue.envMap===null&&Q.environment!==null&&(oo.envMapIntensity.value=Q.environmentIntensity),jr&&(yi.setValue(z,"toneMappingExposure",C.toneMappingExposure),Et.needsLights&&YM(oo,Cl),Be&&ue.fog===!0&&Ze.refreshFogUniforms(oo,Be),Ze.refreshMaterialUniforms(oo,ue,X,ie,_.state.transmissionRenderTarget[I.id]),Np.upload(z,jp(Et),oo,F)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(Np.upload(z,jp(Et),oo,F),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&yi.setValue(z,"center",te.center),yi.setValue(z,"modelViewMatrix",te.modelViewMatrix),yi.setValue(z,"normalMatrix",te.normalMatrix),yi.setValue(z,"modelMatrix",te.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){let dr=ue.uniformsGroups;for(let Yi=0,df=dr.length;Yi<df;Yi++){let Ba=dr[Yi];Z.update(Ba,qo),Z.bind(Ba,qo)}}return qo}function YM(I,Q){I.ambientLightColor.needsUpdate=Q,I.lightProbe.needsUpdate=Q,I.directionalLights.needsUpdate=Q,I.directionalLightShadows.needsUpdate=Q,I.pointLights.needsUpdate=Q,I.pointLightShadows.needsUpdate=Q,I.spotLights.needsUpdate=Q,I.spotLightShadows.needsUpdate=Q,I.rectAreaLights.needsUpdate=Q,I.hemisphereLights.needsUpdate=Q}function ZM(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(I,Q,le){let ue=vt.get(I);ue.__autoAllocateDepthBuffer=I.resolveDepthBuffer===!1,ue.__autoAllocateDepthBuffer===!1&&(ue.__useRenderToTexture=!1),vt.get(I.texture).__webglTexture=Q,vt.get(I.depthTexture).__webglTexture=ue.__autoAllocateDepthBuffer?void 0:le,ue.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(I,Q){let le=vt.get(I);le.__webglFramebuffer=Q,le.__useDefaultFramebuffer=Q===void 0};let KM=z.createFramebuffer();this.setRenderTarget=function(I,Q=0,le=0){$=I,L=Q,k=le;let ue=!0,te=null,Be=!1,et=!1;if(I){let mt=vt.get(I);if(mt.__useDefaultFramebuffer!==void 0)Ke.bindFramebuffer(z.FRAMEBUFFER,null),ue=!1;else if(mt.__webglFramebuffer===void 0)F.setupRenderTarget(I);else if(mt.__hasExternalTextures)F.rebindTextures(I,vt.get(I.texture).__webglTexture,vt.get(I.depthTexture).__webglTexture);else if(I.depthBuffer){let St=I.depthTexture;if(mt.__boundDepthTexture!==St){if(St!==null&&vt.has(St)&&(I.width!==St.image.width||I.height!==St.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");F.setupDepthRenderbuffer(I)}}let Vt=I.texture;(Vt.isData3DTexture||Vt.isDataArrayTexture||Vt.isCompressedArrayTexture)&&(et=!0);let Bt=vt.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(Array.isArray(Bt[Q])?te=Bt[Q][le]:te=Bt[Q],Be=!0):I.samples>0&&F.useMultisampledRTT(I)===!1?te=vt.get(I).__webglMultisampledFramebuffer:Array.isArray(Bt)?te=Bt[le]:te=Bt,j.copy(I.viewport),he.copy(I.scissor),ae=I.scissorTest}else j.copy(rt).multiplyScalar(X).floor(),he.copy(ge).multiplyScalar(X).floor(),ae=re;if(le!==0&&(te=KM),Ke.bindFramebuffer(z.FRAMEBUFFER,te)&&ue&&Ke.drawBuffers(I,te),Ke.viewport(j),Ke.scissor(he),Ke.setScissorTest(ae),Be){let mt=vt.get(I.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+Q,mt.__webglTexture,le)}else if(et){let mt=vt.get(I.texture),Vt=Q;z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,mt.__webglTexture,le,Vt)}else if(I!==null&&le!==0){let mt=vt.get(I.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,mt.__webglTexture,le)}N=-1},this.readRenderTargetPixels=function(I,Q,le,ue,te,Be,et){if(!(I&&I.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=vt.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&et!==void 0&&(lt=lt[et]),lt){Ke.bindFramebuffer(z.FRAMEBUFFER,lt);try{let mt=I.texture,Vt=mt.format,Bt=mt.type;if(!Nt.textureFormatReadable(Vt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Nt.textureTypeReadable(Bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Q>=0&&Q<=I.width-ue&&le>=0&&le<=I.height-te&&z.readPixels(Q,le,ue,te,Yt.convert(Vt),Yt.convert(Bt),Be)}finally{let mt=$!==null?vt.get($).__webglFramebuffer:null;Ke.bindFramebuffer(z.FRAMEBUFFER,mt)}}},this.readRenderTargetPixelsAsync=function(I,Q,le,ue,te,Be,et){return _t(this,null,function*(){if(!(I&&I.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let lt=vt.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&et!==void 0&&(lt=lt[et]),lt)if(Q>=0&&Q<=I.width-ue&&le>=0&&le<=I.height-te){Ke.bindFramebuffer(z.FRAMEBUFFER,lt);let mt=I.texture,Vt=mt.format,Bt=mt.type;if(!Nt.textureFormatReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Nt.textureTypeReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let St=z.createBuffer();z.bindBuffer(z.PIXEL_PACK_BUFFER,St),z.bufferData(z.PIXEL_PACK_BUFFER,Be.byteLength,z.STREAM_READ),z.readPixels(Q,le,ue,te,Yt.convert(Vt),Yt.convert(Bt),0);let En=$!==null?vt.get($).__webglFramebuffer:null;Ke.bindFramebuffer(z.FRAMEBUFFER,En);let Un=z.fenceSync(z.SYNC_GPU_COMMANDS_COMPLETE,0);return z.flush(),yield nz(z,Un,4),z.bindBuffer(z.PIXEL_PACK_BUFFER,St),z.getBufferSubData(z.PIXEL_PACK_BUFFER,0,Be),z.deleteBuffer(St),z.deleteSync(Un),Be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(I,Q=null,le=0){let ue=Math.pow(2,-le),te=Math.floor(I.image.width*ue),Be=Math.floor(I.image.height*ue),et=Q!==null?Q.x:0,lt=Q!==null?Q.y:0;F.setTexture2D(I,0),z.copyTexSubImage2D(z.TEXTURE_2D,le,0,0,et,lt,te,Be),Ke.unbindTexture()};let JM=z.createFramebuffer(),uf=z.createFramebuffer();this.copyTextureToTexture=function(I,Q,le=null,ue=null,te=0,Be=null){Be===null&&(te!==0?(Y0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Be=te,te=0):Be=0);let et,lt,mt,Vt,Bt,St,En,Un,Ii,vi=I.isCompressedTexture?I.mipmaps[Be]:I.image;if(le!==null)et=le.max.x-le.min.x,lt=le.max.y-le.min.y,mt=le.isBox3?le.max.z-le.min.z:1,Vt=le.min.x,Bt=le.min.y,St=le.isBox3?le.min.z:0;else{let Gr=Math.pow(2,-te);et=Math.floor(vi.width*Gr),lt=Math.floor(vi.height*Gr),I.isDataArrayTexture?mt=vi.depth:I.isData3DTexture?mt=Math.floor(vi.depth*Gr):mt=1,Vt=0,Bt=0,St=0}ue!==null?(En=ue.x,Un=ue.y,Ii=ue.z):(En=0,Un=0,Ii=0);let Fn=Yt.convert(Q.format),Et=Yt.convert(Q.type),ki;Q.isData3DTexture?(F.setTexture3D(Q,0),ki=z.TEXTURE_3D):Q.isDataArrayTexture||Q.isCompressedArrayTexture?(F.setTexture2DArray(Q,0),ki=z.TEXTURE_2D_ARRAY):(F.setTexture2D(Q,0),ki=z.TEXTURE_2D),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,Q.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,Q.unpackAlignment);let Bn=z.getParameter(z.UNPACK_ROW_LENGTH),qo=z.getParameter(z.UNPACK_IMAGE_HEIGHT),Ml=z.getParameter(z.UNPACK_SKIP_PIXELS),jr=z.getParameter(z.UNPACK_SKIP_ROWS),Cl=z.getParameter(z.UNPACK_SKIP_IMAGES);z.pixelStorei(z.UNPACK_ROW_LENGTH,vi.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,vi.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,Vt),z.pixelStorei(z.UNPACK_SKIP_ROWS,Bt),z.pixelStorei(z.UNPACK_SKIP_IMAGES,St);let yi=I.isDataArrayTexture||I.isData3DTexture,oo=Q.isDataArrayTexture||Q.isData3DTexture;if(I.isDepthTexture){let Gr=vt.get(I),dr=vt.get(Q),Yi=vt.get(Gr.__renderTarget),df=vt.get(dr.__renderTarget);Ke.bindFramebuffer(z.READ_FRAMEBUFFER,Yi.__webglFramebuffer),Ke.bindFramebuffer(z.DRAW_FRAMEBUFFER,df.__webglFramebuffer);for(let Ba=0;Ba<mt;Ba++)yi&&(z.framebufferTextureLayer(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,vt.get(I).__webglTexture,te,St+Ba),z.framebufferTextureLayer(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,vt.get(Q).__webglTexture,Be,Ii+Ba)),z.blitFramebuffer(Vt,Bt,et,lt,En,Un,et,lt,z.DEPTH_BUFFER_BIT,z.NEAREST);Ke.bindFramebuffer(z.READ_FRAMEBUFFER,null),Ke.bindFramebuffer(z.DRAW_FRAMEBUFFER,null)}else if(te!==0||I.isRenderTargetTexture||vt.has(I)){let Gr=vt.get(I),dr=vt.get(Q);Ke.bindFramebuffer(z.READ_FRAMEBUFFER,JM),Ke.bindFramebuffer(z.DRAW_FRAMEBUFFER,uf);for(let Yi=0;Yi<mt;Yi++)yi?z.framebufferTextureLayer(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,Gr.__webglTexture,te,St+Yi):z.framebufferTexture2D(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,Gr.__webglTexture,te),oo?z.framebufferTextureLayer(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,dr.__webglTexture,Be,Ii+Yi):z.framebufferTexture2D(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,dr.__webglTexture,Be),te!==0?z.blitFramebuffer(Vt,Bt,et,lt,En,Un,et,lt,z.COLOR_BUFFER_BIT,z.NEAREST):oo?z.copyTexSubImage3D(ki,Be,En,Un,Ii+Yi,Vt,Bt,et,lt):z.copyTexSubImage2D(ki,Be,En,Un,Vt,Bt,et,lt);Ke.bindFramebuffer(z.READ_FRAMEBUFFER,null),Ke.bindFramebuffer(z.DRAW_FRAMEBUFFER,null)}else oo?I.isDataTexture||I.isData3DTexture?z.texSubImage3D(ki,Be,En,Un,Ii,et,lt,mt,Fn,Et,vi.data):Q.isCompressedArrayTexture?z.compressedTexSubImage3D(ki,Be,En,Un,Ii,et,lt,mt,Fn,vi.data):z.texSubImage3D(ki,Be,En,Un,Ii,et,lt,mt,Fn,Et,vi):I.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,Be,En,Un,et,lt,Fn,Et,vi.data):I.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,Be,En,Un,vi.width,vi.height,Fn,vi.data):z.texSubImage2D(z.TEXTURE_2D,Be,En,Un,et,lt,Fn,Et,vi);z.pixelStorei(z.UNPACK_ROW_LENGTH,Bn),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,qo),z.pixelStorei(z.UNPACK_SKIP_PIXELS,Ml),z.pixelStorei(z.UNPACK_SKIP_ROWS,jr),z.pixelStorei(z.UNPACK_SKIP_IMAGES,Cl),Be===0&&Q.generateMipmaps&&z.generateMipmap(ki),Ke.unbindTexture()},this.copyTextureToTexture3D=function(I,Q,le=null,ue=null,te=0){return Y0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(I,Q,le,ue,te)},this.initRenderTarget=function(I){vt.get(I).__webglFramebuffer===void 0&&F.setupRenderTarget(I)},this.initTexture=function(I){I.isCubeTexture?F.setTextureCube(I,0):I.isData3DTexture?F.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?F.setTexture2DArray(I,0):F.setTexture2D(I,0),Ke.unbindTexture()},this.resetState=function(){L=0,k=0,$=null,Ke.reset(),Xn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return pl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=qt._getDrawingBufferColorSpace(e),t.unpackColorSpace=qt._getUnpackColorSpace()}};var Hz={type:"change"},eR={type:"start"},jz={type:"end"},DM=new vl,zz=new Bs,vfe=Math.cos(70*bi.DEG2RAD),xr=new V,$o=2*Math.PI,ci={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},QA=1e-6,IM=class extends B0{constructor(e,t=null){super(e,t),this.state=ci.NONE,this.target=new V,this.cursor=new V,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Du.ROTATE,MIDDLE:Du.DOLLY,RIGHT:Du.PAN},this.touches={ONE:Iu.ROTATE,TWO:Iu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new V,this._lastQuaternion=new Ei,this._lastTargetPosition=new V,this._quat=new Ei().setFromUnitVectors(e.up,new V(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Cp,this._sphericalDelta=new Cp,this._scale=1,this._panOffset=new V,this._rotateStart=new qe,this._rotateEnd=new qe,this._rotateDelta=new qe,this._panStart=new qe,this._panEnd=new qe,this._panDelta=new qe,this._dollyStart=new qe,this._dollyEnd=new qe,this._dollyDelta=new qe,this._dollyDirection=new V,this._mouse=new qe,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=_fe.bind(this),this._onPointerDown=yfe.bind(this),this._onPointerUp=wfe.bind(this),this._onContextMenu=Tfe.bind(this),this._onMouseWheel=Mfe.bind(this),this._onKeyDown=Cfe.bind(this),this._onTouchStart=Sfe.bind(this),this._onTouchMove=Efe.bind(this),this._onMouseDown=xfe.bind(this),this._onMouseMove=bfe.bind(this),this._interceptControlDown=Dfe.bind(this),this._interceptControlUp=Ife.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Hz),this.update(),this.state=ci.NONE}update(e=null){let t=this.object.position;xr.copy(t).sub(this.target),xr.applyQuaternion(this._quat),this._spherical.setFromVector3(xr),this.autoRotate&&this.state===ci.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=$o:i>Math.PI&&(i-=$o),r<-Math.PI?r+=$o:r>Math.PI&&(r-=$o),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(xr.setFromSpherical(this._spherical),xr.applyQuaternion(this._quatInverse),t.copy(this.target).add(xr),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){let a=xr.length();s=this._clampDistance(a*this._scale);let l=a-s;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),o=!!l}else if(this.object.isOrthographicCamera){let a=new V(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=l!==this.object.zoom;let u=new V(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),s=xr.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(DM.origin.copy(this.object.position),DM.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(DM.direction))<vfe?this.object.lookAt(this.target):(zz.setFromNormalAndCoplanarPoint(this.object.up,this.target),DM.intersectPlane(zz,this.target))))}else if(this.object.isOrthographicCamera){let s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>QA||8*(1-this._lastQuaternion.dot(this.object.quaternion))>QA||this._lastTargetPosition.distanceToSquared(this.target)>QA?(this.dispatchEvent(Hz),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?$o/60*this.autoRotateSpeed*e:$o/60/60*this.autoRotateSpeed}_getZoomScale(e){let t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){xr.setFromMatrixColumn(t,0),xr.multiplyScalar(-e),this._panOffset.add(xr)}_panUp(e,t){this.screenSpacePanning===!0?xr.setFromMatrixColumn(t,1):(xr.setFromMatrixColumn(t,0),xr.crossVectors(this.object.up,xr)),xr.multiplyScalar(e),this._panOffset.add(xr)}_pan(e,t){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;xr.copy(r).sub(this.target);let o=xr.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/i.clientHeight,this.object.matrix),this._panUp(2*t*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=e-i.left,o=t-i.top,s=i.width,a=i.height;this._mouse.x=r/s*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft($o*this._rotateDelta.x/t.clientHeight),this._rotateUp($o*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp($o*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-$o*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft($o*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-$o*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{let i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),o=.5*(e.pageY+i.y);this._rotateEnd.set(r,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft($o*this._rotateDelta.x/t.clientHeight),this._rotateUp($o*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let s=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new qe,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){let t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function yfe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function _fe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function wfe(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(jz),this.state=ci.NONE;break;case 1:let e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function xfe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Du.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=ci.DOLLY;break;case Du.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=ci.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=ci.ROTATE}break;case Du.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=ci.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=ci.PAN}break;default:this.state=ci.NONE}this.state!==ci.NONE&&this.dispatchEvent(eR)}function bfe(n){switch(this.state){case ci.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case ci.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case ci.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function Mfe(n){this.enabled===!1||this.enableZoom===!1||this.state!==ci.NONE||(n.preventDefault(),this.dispatchEvent(eR),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(jz))}function Cfe(n){this.enabled!==!1&&this._handleKeyDown(n)}function Sfe(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Iu.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=ci.TOUCH_ROTATE;break;case Iu.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=ci.TOUCH_PAN;break;default:this.state=ci.NONE}break;case 2:switch(this.touches.TWO){case Iu.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=ci.TOUCH_DOLLY_PAN;break;case Iu.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=ci.TOUCH_DOLLY_ROTATE;break;default:this.state=ci.NONE}break;default:this.state=ci.NONE}this.state!==ci.NONE&&this.dispatchEvent(eR)}function Efe(n){switch(this._trackPointer(n),this.state){case ci.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case ci.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case ci.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case ci.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=ci.NONE}}function Tfe(n){this.enabled!==!1&&n.preventDefault()}function Dfe(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Ife(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var Afe=["overlay"],Rfe=["*"];function Pfe(n,e){n&1&&me(0,"div")}function Ofe(n,e){if(n&1&&(P(0,"div"),Oe(1,Pfe,1,0,"div",6),O()),n&2){let t=ve(2);O2(t.spinner.class),Gn("color",t.spinner.color),W(),q("ngForOf",t.spinner.divArray)}}function Nfe(n,e){if(n&1&&(me(0,"div",7),el(1,"safeHtml")),n&2){let t=ve(2);q("innerHTML",Jl(1,1,t.template),ah)}}function Ffe(n,e){if(n&1&&(P(0,"div",2,0),Oe(2,Ofe,2,5,"div",3)(3,Nfe,2,3,"div",4),P(4,"div",5),is(5),O()()),n&2){let t=ve();Gn("background-color",t.spinner.bdColor)("z-index",t.spinner.zIndex)("position",t.spinner.fullScreen?"fixed":"absolute"),q("@.disabled",t.disableAnimation)("@fadeIn","in"),W(2),q("ngIf",!t.template),W(),q("ngIf",t.template),W(),Gn("z-index",t.spinner.zIndex)}}var Lfe={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},tR={BD_COLOR:"rgba(51,51,51,0.8)",SPINNER_COLOR:"#fff",Z_INDEX:99999},nR="primary",af=class n{constructor(e){Object.assign(this,e)}static create(e){return!e?.template&&!e?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new n(e)}},iR=(()=>{class n{constructor(){this.spinnerObservable=new Ln(null)}getSpinner(t){return this.spinnerObservable.asObservable().pipe(rn(i=>i&&i.name===t))}show(t=nR,i){return new Promise((r,o)=>{setTimeout(()=>{i&&Object.keys(i).length?(i.name=t,this.spinnerObservable.next(new af(ft(we({},i),{show:!0}))),r(!0)):(this.spinnerObservable.next(new af({name:t,show:!0})),r(!0))},10)})}hide(t=nR,i=10){return new Promise((r,o)=>{setTimeout(()=>{this.spinnerObservable.next(new af({name:t,show:!1})),r(!0)},i)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gz=new Ae("NGX_SPINNER_CONFIG"),kfe=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return t?this.sanitizer.bypassSecurityTrustHtml(t):""}static{this.\u0275fac=function(i){return new(i||n)(ce(R1,16))}}static{this.\u0275pipe=lh({name:"safeHtml",type:n,pure:!0})}}return n})(),Wz=(()=>{class n{constructor(t,i,r,o){this.spinnerService=t,this.changeDetector=i,this.elementRef=r,this.globalConfig=o,this.disableAnimation=!1,this.spinner=new af,this.ngUnsubscribe=new Rn,this.setDefaultOptions=()=>{let{type:s}=this.globalConfig??{};this.spinner=af.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??s,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor=tR.BD_COLOR,this.zIndex=tR.Z_INDEX,this.color=tR.SPINNER_COLOR,this.size="large",this.fullScreen=!0,this.name=nR,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(Oi(this.ngUnsubscribe)).subscribe(t=>{this.setDefaultOptions(),Object.assign(this.spinner,t),t.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(t){return t===this.elementRef.nativeElement.parentElement?!0:t.parentNode&&this.isSpinnerZone(t.parentNode)}ngOnChanges(t){for(let i in t)if(i){let r=t[i];if(r.isFirstChange())return;typeof r.currentValue<"u"&&r.currentValue!==r.previousValue&&r.currentValue!==""&&(this.spinner[i]=r.currentValue,i==="showSpinner"&&(r.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),i==="name"&&this.initObservable())}}getClass(t,i){this.spinner.divCount=Lfe[t],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((o,s)=>s);let r="";switch(i.toLowerCase()){case"small":r="la-sm";break;case"medium":r="la-2x";break;case"large":r="la-3x";break;default:break}return"la-"+t+" "+r}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static{this.\u0275fac=function(i){return new(i||n)(ce(iR),ce(ti),ce($t),ce(Gz,8))}}static{this.\u0275cmp=Tt({type:n,selectors:[["ngx-spinner"]],viewQuery:function(i,r){if(i&1&&Fi(Afe,5),i&2){let o;mi(o=gi())&&(r.spinnerDOM=o.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[Ni],ngContentSelectors:Rfe,decls:1,vars:1,consts:[["overlay",""],["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(i,r){i&1&&(iu(),Oe(0,Ffe,6,12,"div",1)),i&2&&q("ngIf",r.spinner.show)},dependencies:[kfe,In,li],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[ii("fadeIn",[yD("in",Ne({opacity:1})),Gt(":enter",[Ne({opacity:0}),It(300)]),Gt(":leave",It(200,Ne({opacity:0})))])]},changeDetection:0})}}return n})(),$z=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Gz,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=mo({type:n})}static{this.\u0275inj=fo({})}}return n})();function rR(n,e){if(e===DA)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Rp||e===q0){let t=n.getIndex();if(t===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);n.setIndex(s),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=t.count-2,r=[];if(e===Rp)for(let s=1;s<=i;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var AM=class extends ms{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new dR(t)}),this.register(function(t){return new fR(t)}),this.register(function(t){return new xR(t)}),this.register(function(t){return new bR(t)}),this.register(function(t){return new MR(t)}),this.register(function(t){return new pR(t)}),this.register(function(t){return new mR(t)}),this.register(function(t){return new gR(t)}),this.register(function(t){return new vR(t)}),this.register(function(t){return new uR(t)}),this.register(function(t){return new yR(t)}),this.register(function(t){return new hR(t)}),this.register(function(t){return new wR(t)}),this.register(function(t){return new _R(t)}),this.register(function(t){return new lR(t)}),this.register(function(t){return new CR(t)}),this.register(function(t){return new SR(t)})}load(e,t,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let u=Oa.extractUrlBase(e);s=Oa.resolveURL(u,this.path)}else s=Oa.extractUrlBase(e);this.manager.itemStart(e);let a=function(u){r?r(u):console.error(u),o.manager.itemError(e),o.manager.itemEnd(e)},l=new _l(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{o.parse(u,s,function(f){t(f),o.manager.itemEnd(e)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let o,s={},a={},l=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===Kz){try{s[Sn.KHR_BINARY_GLTF]=new ER(e)}catch(h){r&&r(h);return}o=JSON.parse(s[Sn.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new OR(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){let h=this.pluginCallbacks[f](u);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){let h=o.extensionsUsed[f],p=o.extensionsRequired||[];switch(h){case Sn.KHR_MATERIALS_UNLIT:s[h]=new cR;break;case Sn.KHR_DRACO_MESH_COMPRESSION:s[h]=new TR(o,this.dracoLoader);break;case Sn.KHR_TEXTURE_TRANSFORM:s[h]=new DR;break;case Sn.KHR_MESH_QUANTIZATION:s[h]=new IR;break;default:p.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(i,r)}parseAsync(e,t){let i=this;return new Promise(function(r,o){i.parse(e,t,r,o)})}};function Bfe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var Sn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},lR=class{constructor(e){this.parser=e,this.name=Sn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){let o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let t=this.parser,i="light:"+e,r=t.cache.get(i);if(r)return r;let o=t.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],u,f=new gt(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],zr);let h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new Kd(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Tu(f),u.distance=h;break;case"spot":u=new Yd(f),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),Oc(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,o=i.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},cR=class{constructor(){this.name=Sn.KHR_MATERIALS_UNLIT}getMaterialType(){return fs}extendParams(e,t,i){let r=[];e.color=new gt(1,1,1),e.opacity=1;let o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],zr),e.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",o.baseColorTexture,On))}return Promise.all(r)}},uR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}},dR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new qe(a,a)}return Promise.all(o)}},fR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_DISPERSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},hR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},pR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_SHEEN}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];t.sheenColor=new gt(0,0,0),t.sheenRoughness=0,t.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],zr)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,On)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},mR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},gR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_VOLUME}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return t.attenuationColor=new gt().setRGB(a[0],a[1],a[2],zr),Promise.all(o)}},vR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_IOR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},yR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_SPECULAR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return t.specularColor=new gt().setRGB(a[0],a[1],a[2],zr),s.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,On)),Promise.all(o)}},_R=class{constructor(e){this.parser=e,this.name=Sn.EXT_MATERIALS_BUMP}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(o)}},wR=class{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Go}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},xR=class{constructor(e){this.parser=e,this.name=Sn.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,s)}},bR=class{constructor(e){this.parser=e,this.name=Sn.EXT_TEXTURE_WEBP}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return i.loadTextureImage(e,s.source,l)}},MR=class{constructor(e){this.parser=e,this.name=Sn.EXT_TEXTURE_AVIF}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return i.loadTextureImage(e,s.source,l)}},CR=class{constructor(e){this.name=Sn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let l=r.byteOffset||0,u=r.byteLength||0,f=r.count,h=r.byteStride,p=new Uint8Array(a,l,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,h,p,r.mode,r.filter).then(function(g){return g.buffer}):s.ready.then(function(){let g=new ArrayBuffer(f*h);return s.decodeGltfBuffer(new Uint8Array(g),f,h,p,r.mode,r.filter),g})})}else return null}},SR=class{constructor(e){this.name=Sn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=t.meshes[i.mesh];for(let u of r.primitives)if(u.mode!==$s.TRIANGLES&&u.mode!==$s.TRIANGLE_STRIP&&u.mode!==$s.TRIANGLE_FAN&&u.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],l={};for(let u in s)a.push(this.parser.getDependency("accessor",s[u]).then(f=>(l[u]=f,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{let f=u.pop(),h=f.isGroup?f.children:[f],p=u[0].count,g=[];for(let v of h){let x=new ht,y=new V,_=new Ei,T=new V(1,1,1),M=new _0(v.geometry,v.material,p);for(let C=0;C<p;C++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,C),l.SCALE&&T.fromBufferAttribute(l.SCALE,C),M.setMatrixAt(C,x.compose(y,_,T));for(let C in l)if(C==="_COLOR_0"){let H=l[C];M.instanceColor=new Cu(H.array,H.itemSize,H.normalized)}else C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&v.geometry.setAttribute(C,l[C]);Ti.prototype.copy.call(M,v),this.parser.assignFinalMaterial(M),g.push(M)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}},Kz="glTF",K0=12,qz={JSON:1313821514,BIN:5130562},ER=class{constructor(e){this.name=Sn.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,K0),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Kz)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-K0,o=new DataView(e,K0),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let l=o.getUint32(s,!0);if(s+=4,l===qz.JSON){let u=new Uint8Array(e,K0+s,a);this.content=i.decode(u)}else if(l===qz.BIN){let u=K0+s;this.body=e.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},TR=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Sn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},l={},u={};for(let f in s){let h=RR[f]||f.toLowerCase();a[h]=s[f]}for(let f in e.attributes){let h=RR[f]||f.toLowerCase();if(s[f]!==void 0){let p=i.accessors[e.attributes[f]],g=Lp[p.componentType];u[h]=g.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",o).then(function(f){return new Promise(function(h,p){r.decodeDracoFile(f,function(g){for(let v in g.attributes){let x=g.attributes[v],y=l[v];y!==void 0&&(x.normalized=y)}h(g)},a,u,zr,p)})})}},DR=class{constructor(){this.name=Sn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},IR=class{constructor(){this.name=Sn.KHR_MESH_QUANTIZATION}},RM=class extends Tc{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)t[s]=i[o+s];return t}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,f=r-t,h=(i-t)/f,p=h*h,g=p*h,v=e*u,x=v-u,y=-2*g+3*p,_=g-p,T=1-y,M=_-p+h;for(let C=0;C!==a;C++){let H=s[x+C+a],L=s[x+C+l]*f,k=s[v+C+a],$=s[v+C]*f;o[C]=T*H+M*L+y*k+_*$}return o}},Vfe=new Ei,AR=class extends RM{interpolate_(e,t,i,r){let o=super.interpolate_(e,t,i,r);return Vfe.fromArray(o).normalize().toArray(o),o}},$s={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Lp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Xz={9728:Hr,9729:_o,9984:zb,9985:Ep,9986:ef,9987:Na},Yz={33071:ds,33648:dp,10497:Aa},oR={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},RR={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ru={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Hfe={CUBICSPLINE:void 0,LINEAR:Vd,STEP:Bd},sR={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function zfe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new $d({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ia})),n.DefaultMaterial}function lf(n,e,t){for(let i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Oc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function jfe(n,e,t){let i=!1,r=!1,o=!1;for(let u=0,f=e.length;u<f;u++){let h=e[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],l=[];for(let u=0,f=e.length;u<f;u++){let h=e[u];if(i){let p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;s.push(p)}if(r){let p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(o){let p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(u){let f=u[0],h=u[1],p=u[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=h),o&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function Gfe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Wfe(n){let e,t=n.extensions&&n.extensions[Sn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+aR(t.attributes):e=n.indices+":"+aR(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+aR(n.targets[i]);return e}function aR(n){let e="",t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function PR(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function $fe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var qfe=new ht,OR=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Bfe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new Xd(this.options.manager):this.textureLoader=new k0(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new _l(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return lf(o,a,r),Oc(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(let l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){let s=t[r].joints;for(let a=0,l=s.length;a<l;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){let s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let r=i.clone(),o=(s,a)=>{let l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(let[u,f]of s.children.entries())o(f,a.children[u])};return o(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let r=e(t[i]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let r=0;r<t.length;r++){let o=e(t[r]);o&&i.push(o)}return i}getDependency(e,t){let i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Sn.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(Oa.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){let r=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(e){let t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let s=oR[r.type],a=Lp[r.componentType],l=r.normalized===!0,u=new a(r.count*s);return Promise.resolve(new cr(u,s,l))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],l=oR[r.type],u=Lp[r.componentType],f=u.BYTES_PER_ELEMENT,h=f*l,p=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0,x,y;if(g&&g!==h){let _=Math.floor(p/g),T="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count,M=t.cache.get(T);M||(x=new u(a,_*g,r.count*g/f),M=new yp(x,g/f),t.cache.add(T,M)),y=new _p(M,l,p%g/f,v)}else a===null?x=new u(r.count*l):x=new u(a,p,r.count*l),y=new cr(x,l,v);if(r.sparse!==void 0){let _=oR.SCALAR,T=Lp[r.sparse.indices.componentType],M=r.sparse.indices.byteOffset||0,C=r.sparse.values.byteOffset||0,H=new T(s[1],M,r.sparse.count*_),L=new u(s[2],C,r.sparse.count*l);a!==null&&(y=new cr(y.array.slice(),y.itemSize,y.normalized)),y.normalized=!1;for(let k=0,$=H.length;k<$;k++){let N=H[k];if(y.setX(N,L[k*l]),l>=2&&y.setY(N,L[k*l+1]),l>=3&&y.setZ(N,L[k*l+2]),l>=4&&y.setW(N,L[k*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}y.normalized=v}return y})}loadTexture(e){let t=this.json,i=this.options,o=t.textures[e].source,s=t.images[o],a=this.textureLoader;if(s.uri){let l=i.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,i){let r=this,o=this.json,s=o.textures[e],a=o.images[t],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=s.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);let p=(o.samplers||{})[s.sampler]||{};return f.magFilter=Xz[p.magFilter]||_o,f.minFilter=Xz[p.minFilter]||Na,f.wrapS=Yz[p.wrapS]||Aa,f.wrapT=Yz[p.wrapT]||Aa,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==Hr&&f.minFilter!==_o,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){let i=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());let s=r.images[e],a=self.URL||self.webkitURL,l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=i.getDependency("bufferView",s.bufferView).then(function(h){u=!0;let p=new Blob([h],{type:s.mimeType});return l=a.createObjectURL(p),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let f=Promise.resolve(l).then(function(h){return new Promise(function(p,g){let v=p;t.isImageBitmapLoader===!0&&(v=function(x){let y=new Mo(x);y.needsUpdate=!0,p(y)}),t.load(Oa.resolveURL(h,o.path),v,void 0,g)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),Oc(h,s),h.userData.mimeType=s.mimeType||$fe(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[Sn.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[Sn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let l=o.associations.get(s);s=o.extensions[Sn.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return r!==void 0&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){let t=e.geometry,i=e.material,r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new Pa,yr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){let a="LineBasicMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new Hs,yr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return $d}loadMaterial(e){let t=this,i=this.json,r=this.extensions,o=i.materials[e],s,a={},l=o.extensions||{},u=[];if(l[Sn.KHR_MATERIALS_UNLIT]){let h=r[Sn.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),u.push(h.extendParams(a,o,t))}else{let h=o.pbrMetallicRoughness||{};if(a.color=new gt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){let p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],zr),a.opacity=p[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,On)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=Gs);let f=o.alphaMode||sR.OPAQUE;if(f===sR.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===sR.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==fs&&(u.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new qe(1,1),o.normalTexture.scale!==void 0)){let h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==fs&&(u.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==fs){let h=o.emissiveFactor;a.emissive=new gt().setRGB(h[0],h[1],h[2],zr)}return o.emissiveTexture!==void 0&&s!==fs&&u.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,On)),Promise.all(u).then(function(){let h=new s(a);return o.name&&(h.name=o.name),Oc(h,o),t.associations.set(h,{materials:e}),o.extensions&&lf(r,h,o),h})}createUniqueName(e){let t=oi.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[Sn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return Zz(l,a,t)})}let s=[];for(let a=0,l=e.length;a<l;a++){let u=e[a],f=Wfe(u),h=r[f];if(h)s.push(h.promise);else{let p;u.extensions&&u.extensions[Sn.KHR_DRACO_MESH_COMPRESSION]?p=o(u):p=Zz(new ir,u,t),r[f]={primitive:u,promise:p},s.push(p)}}return Promise.all(s)}loadMesh(e){let t=this,i=this.json,r=this.extensions,o=i.meshes[e],s=o.primitives,a=[];for(let l=0,u=s.length;l<u;l++){let f=s[l].material===void 0?zfe(this.cache):this.getDependency("material",s[l].material);a.push(f)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(l){let u=l.slice(0,l.length-1),f=l[l.length-1],h=[];for(let g=0,v=f.length;g<v;g++){let x=f[g],y=s[g],_,T=u[g];if(y.mode===$s.TRIANGLES||y.mode===$s.TRIANGLE_STRIP||y.mode===$s.TRIANGLE_FAN||y.mode===void 0)_=o.isSkinnedMesh===!0?new jd(x,T):new Di(x,T),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),y.mode===$s.TRIANGLE_STRIP?_.geometry=rR(_.geometry,q0):y.mode===$s.TRIANGLE_FAN&&(_.geometry=rR(_.geometry,Rp));else if(y.mode===$s.LINES)_=new Su(x,T);else if(y.mode===$s.LINE_STRIP)_=new Sc(x,T);else if(y.mode===$s.LINE_LOOP)_=new w0(x,T);else if(y.mode===$s.POINTS)_=new Ec(x,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(_.geometry.morphAttributes).length>0&&Gfe(_,o),_.name=t.createUniqueName(o.name||"mesh_"+e),Oc(_,o),y.extensions&&lf(r,_,y),t.assignFinalMaterial(_),h.push(_)}for(let g=0,v=h.length;g<v;g++)t.associations.set(h[g],{meshes:e,primitives:g});if(h.length===1)return o.extensions&&lf(r,h[0],o),h[0];let p=new io;o.extensions&&lf(r,p,o),t.associations.set(p,{meshes:e});for(let g=0,v=h.length;g<v;g++)p.add(h[g]);return p})}loadCamera(e){let t,i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new qi(bi.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Zd(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Oc(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let r=0,o=t.joints.length;r<o;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],l=[];for(let u=0,f=s.length;u<f;u++){let h=s[u];if(h){a.push(h);let p=new ht;o!==null&&p.fromArray(o.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Gd(a,l)})}loadAnimation(e){let t=this.json,i=this,r=t.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],l=[],u=[],f=[];for(let h=0,p=r.channels.length;h<p;h++){let g=r.channels[h],v=r.samplers[g.sampler],x=g.target,y=x.node,_=r.parameters!==void 0?r.parameters[v.input]:v.input,T=r.parameters!==void 0?r.parameters[v.output]:v.output;x.node!==void 0&&(s.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",T)),u.push(v),f.push(x))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f)]).then(function(h){let p=h[0],g=h[1],v=h[2],x=h[3],y=h[4],_=[];for(let T=0,M=p.length;T<M;T++){let C=p[T],H=g[T],L=v[T],k=x[T],$=y[T];if(C===void 0)continue;C.updateMatrix&&C.updateMatrix();let N=i._createAnimationTracks(C,H,L,k,$);if(N)for(let A=0;A<N.length;A++)_.push(N[A])}return new qd(o,void 0,_)})}createNodeMesh(e){let t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(e){let t=this.json,i=this,r=t.nodes[e],o=i._loadNodeShallow(e),s=[],a=r.children||[];for(let u=0,f=a.length;u<f;u++)s.push(i.getDependency("node",a[u]));let l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),l]).then(function(u){let f=u[0],h=u[1],p=u[2];p!==null&&f.traverse(function(g){g.isSkinnedMesh&&g.bind(p,qfe)});for(let g=0,v=h.length;g<v;g++)f.add(h[g]);return f})}_loadNodeShallow(e){let t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=t.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(u){return r._getNodeRef(r.cameraCache,o.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let f;if(o.isBone===!0?f=new Cc:u.length>1?f=new io:u.length===1?f=u[0]:f=new Ti,f!==u[0])for(let h=0,p=u.length;h<p;h++)f.add(u[h]);if(o.name&&(f.userData.name=o.name,f.name=s),Oc(f,o),o.extensions&&lf(i,f,o),o.matrix!==void 0){let h=new ht;h.fromArray(o.matrix),f.applyMatrix4(h)}else o.translation!==void 0&&f.position.fromArray(o.translation),o.rotation!==void 0&&f.quaternion.fromArray(o.rotation),o.scale!==void 0&&f.scale.fromArray(o.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],r=this,o=new io;i.name&&(o.name=r.createUniqueName(i.name)),Oc(o,i),i.extensions&&lf(t,o,i);let s=i.nodes||[],a=[];for(let l=0,u=s.length;l<u;l++)a.push(r.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let f=0,h=l.length;f<h;f++)o.add(l[f]);let u=f=>{let h=new Map;for(let[p,g]of r.associations)(p instanceof yr||p instanceof Mo)&&h.set(p,g);return f.traverse(p=>{let g=r.associations.get(p);g!=null&&h.set(p,g)}),h};return r.associations=u(o),o})}_createAnimationTracks(e,t,i,r,o){let s=[],a=e.name?e.name:e.uuid,l=[];Ru[o.path]===Ru.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let u;switch(Ru[o.path]){case Ru.weights:u=zs;break;case Ru.rotation:u=hs;break;case Ru.translation:case Ru.scale:u=js;break;default:switch(i.itemSize){case 1:u=zs;break;case 2:case 3:default:u=js;break}break}let f=r.interpolation!==void 0?Hfe[r.interpolation]:Vd,h=this._getArrayFromAccessor(i);for(let p=0,g=l.length;p<g;p++){let v=new u(l[p]+"."+Ru[o.path],t.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),s.push(v)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let i=PR(t.constructor),r=new Float32Array(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=t[o]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){let r=this instanceof hs?AR:RM;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function Xfe(n,e,t){let i=e.attributes,r=new wo;if(i.POSITION!==void 0){let a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new V(l[0],l[1],l[2]),new V(u[0],u[1],u[2])),a.normalized){let f=PR(Lp[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let a=new V,l=new V;for(let u=0,f=o.length;u<f;u++){let h=o[u];if(h.POSITION!==void 0){let p=t.json.accessors[h.POSITION],g=p.min,v=p.max;if(g!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),p.normalized){let x=PR(Lp[p.componentType]);l.multiplyScalar(x)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new jo;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function Zz(n,e,t){let i=e.attributes,r=[];function o(s,a){return t.getDependency("accessor",s).then(function(l){n.setAttribute(a,l)})}for(let s in i){let a=RR[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(e.indices!==void 0&&!n.index){let s=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return qt.workingColorSpace!==zr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${qt.workingColorSpace}" not supported.`),Oc(n,e),Xfe(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?jfe(n,e.targets,t):n})}function Jz(n,e){let t=new AM(e);return new Promise((i,r)=>{t.load(n,o=>{i(o.scene)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var qs=Uint8Array,kp=Uint16Array,Yfe=Int32Array,Qz=new qs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e5=new qs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Zfe=new qs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t5=function(n,e){for(var t=new kp(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Yfe(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},n5=t5(Qz,2),i5=n5.b,Kfe=n5.r;i5[28]=258,Kfe[258]=28;var r5=t5(e5,0),Jfe=r5.b,UFe=r5.r,LR=new kp(32768);for(qn=0;qn<32768;++qn)Nc=(qn&43690)>>1|(qn&21845)<<1,Nc=(Nc&52428)>>2|(Nc&13107)<<2,Nc=(Nc&61680)>>4|(Nc&3855)<<4,LR[qn]=((Nc&65280)>>8|(Nc&255)<<8)>>1;var Nc,qn,J0=function(n,e,t){for(var i=n.length,r=0,o=new kp(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new kp(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new kp(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],f=e-n[r],h=s[n[r]-1]++<<f,p=h|(1<<f)-1;h<=p;++h)a[LR[h]>>l]=u}else for(a=new kp(i),r=0;r<i;++r)n[r]&&(a[r]=LR[s[n[r]-1]++]>>15-n[r]);return a},Q0=new qs(288);for(qn=0;qn<144;++qn)Q0[qn]=8;var qn;for(qn=144;qn<256;++qn)Q0[qn]=9;var qn;for(qn=256;qn<280;++qn)Q0[qn]=7;var qn;for(qn=280;qn<288;++qn)Q0[qn]=8;var qn,o5=new qs(32);for(qn=0;qn<32;++qn)o5[qn]=5;var qn;var Qfe=J0(Q0,9,1);var ehe=J0(o5,5,1),NR=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},La=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},FR=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},the=function(n){return(n+7)/8|0},nhe=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new qs(n.subarray(e,t))};var ihe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ka=function(n,e,t){var i=new Error(e||ihe[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,ka),!t)throw i;return i},rhe=function(n,e,t,i){var r=n.length,o=i?i.length:0;if(!r||e.f&&!e.l)return t||new qs(0);var s=!t,a=s||e.i!=2,l=e.i;s&&(t=new qs(r*3));var u=function(at){var wt=t.length;if(at>wt){var pt=new qs(Math.max(wt*2,at));pt.set(t),t=pt}},f=e.f||0,h=e.p||0,p=e.b||0,g=e.l,v=e.d,x=e.m,y=e.n,_=r*8;do{if(!g){f=La(n,h,1);var T=La(n,h+1,3);if(h+=3,T)if(T==1)g=Qfe,v=ehe,x=9,y=5;else if(T==2){var L=La(n,h,31)+257,k=La(n,h+10,15)+4,$=L+La(n,h+5,31)+1;h+=14;for(var N=new qs($),A=new qs(19),j=0;j<k;++j)A[Zfe[j]]=La(n,h+j*3,7);h+=k*3;for(var he=NR(A),ae=(1<<he)-1,Re=J0(A,he,1),j=0;j<$;){var Se=Re[La(n,h,ae)];h+=Se&15;var M=Se>>4;if(M<16)N[j++]=M;else{var Y=0,ie=0;for(M==16?(ie=3+La(n,h,3),h+=2,Y=N[j-1]):M==17?(ie=3+La(n,h,7),h+=3):M==18&&(ie=11+La(n,h,127),h+=7);ie--;)N[j++]=Y}}var X=N.subarray(0,L),_e=N.subarray(L);x=NR(X),y=NR(_e),g=J0(X,x,1),v=J0(_e,y,1)}else ka(1);else{var M=the(h)+4,C=n[M-4]|n[M-3]<<8,H=M+C;if(H>r){l&&ka(0);break}a&&u(p+C),t.set(n.subarray(M,H),p),e.b=p+=C,e.p=h=H*8,e.f=f;continue}if(h>_){l&&ka(0);break}}a&&u(p+131072);for(var Ve=(1<<x)-1,rt=(1<<y)-1,ge=h;;ge=h){var Y=g[FR(n,h)&Ve],re=Y>>4;if(h+=Y&15,h>_){l&&ka(0);break}if(Y||ka(2),re<256)t[p++]=re;else if(re==256){ge=h,g=null;break}else{var B=re-254;if(re>264){var j=re-257,J=Qz[j];B=La(n,h,(1<<J)-1)+i5[j],h+=J}var xe=v[FR(n,h)&rt],se=xe>>4;xe||ka(3),h+=xe&15;var _e=Jfe[se];if(se>3){var J=e5[se];_e+=FR(n,h)&(1<<J)-1,h+=J}if(h>_){l&&ka(0);break}a&&u(p+131072);var je=p+B;if(p<_e){var We=o-_e,Ue=Math.min(_e,je);for(We+p<0&&ka(3);p<Ue;++p)t[p]=i[We+p]}for(;p<je;++p)t[p]=t[p-_e]}}e.l=g,e.p=ge,e.b=p,e.f=f,g&&(f=1,e.m=x,e.d=v,e.n=y)}while(!f);return p!=t.length&&s?nhe(t,0,p):t.subarray(0,p)};var ohe=new qs(0);var she=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&ka(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&ka(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function s5(n,e){return rhe(n.subarray(she(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var ahe=typeof TextDecoder<"u"&&new TextDecoder,lhe=0;try{ahe.decode(ohe,{stream:!0}),lhe=1}catch{}function a5(n,e,t){let i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,o=i,s=Math.floor((r+o)/2);for(;e<t[s]||e>=t[s+1];)e<t[s]?o=s:r=s,s=Math.floor((r+o)/2);return s}function uhe(n,e,t,i){let r=[],o=[],s=[];r[0]=1;for(let a=1;a<=t;++a){o[a]=e-i[n+1-a],s[a]=i[n+a]-e;let l=0;for(let u=0;u<a;++u){let f=s[u+1],h=o[a-u],p=r[u]/(f+h);r[u]=l+f*p,l=h*p}r[a]=l}return r}function l5(n,e,t,i){let r=a5(n,i,e),o=uhe(r,i,n,e),s=new mn(0,0,0,0);for(let a=0;a<=n;++a){let l=t[r-n+a],u=o[a],f=l.w*u;s.x+=l.x*f,s.y+=l.y*f,s.z+=l.z*f,s.w+=l.w*u}return s}function dhe(n,e,t,i,r){let o=[];for(let h=0;h<=t;++h)o[h]=0;let s=[];for(let h=0;h<=i;++h)s[h]=o.slice(0);let a=[];for(let h=0;h<=t;++h)a[h]=o.slice(0);a[0][0]=1;let l=o.slice(0),u=o.slice(0);for(let h=1;h<=t;++h){l[h]=e-r[n+1-h],u[h]=r[n+h]-e;let p=0;for(let g=0;g<h;++g){let v=u[g+1],x=l[h-g];a[h][g]=v+x;let y=a[g][h-1]/a[h][g];a[g][h]=p+v*y,p=x*y}a[h][h]=p}for(let h=0;h<=t;++h)s[0][h]=a[h][t];for(let h=0;h<=t;++h){let p=0,g=1,v=[];for(let x=0;x<=t;++x)v[x]=o.slice(0);v[0][0]=1;for(let x=1;x<=i;++x){let y=0,_=h-x,T=t-x;h>=x&&(v[g][0]=v[p][0]/a[T+1][_],y=v[g][0]*a[_][T]);let M=_>=-1?1:-_,C=h-1<=T?x-1:t-h;for(let L=M;L<=C;++L)v[g][L]=(v[p][L]-v[p][L-1])/a[T+1][_+L],y+=v[g][L]*a[_+L][T];h<=T&&(v[g][x]=-v[p][x-1]/a[T+1][h],y+=v[g][x]*a[h][T]),s[x][h]=y;let H=p;p=g,g=H}}let f=t;for(let h=1;h<=i;++h){for(let p=0;p<=t;++p)s[h][p]*=f;f*=t-h}return s}function fhe(n,e,t,i,r){let o=r<n?r:n,s=[],a=a5(n,i,e),l=dhe(a,i,n,o,e),u=[];for(let f=0;f<t.length;++f){let h=t[f].clone(),p=h.w;h.x*=p,h.y*=p,h.z*=p,u[f]=h}for(let f=0;f<=o;++f){let h=u[a-n].clone().multiplyScalar(l[f][0]);for(let p=1;p<=n;++p)h.add(u[a-n+p].clone().multiplyScalar(l[f][p]));s[f]=h}for(let f=o+1;f<=r+1;++f)s[f]=new mn(0,0,0);return s}function hhe(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function phe(n){let e=n.length,t=[],i=[];for(let o=0;o<e;++o){let s=n[o];t[o]=new V(s.x,s.y,s.z),i[o]=s.w}let r=[];for(let o=0;o<e;++o){let s=t[o].clone();for(let a=1;a<=o;++a)s.sub(r[o-a].clone().multiplyScalar(hhe(o,a)*i[a]));r[o]=s.divideScalar(i[0])}return r}function c5(n,e,t,i,r){let o=fhe(n,e,t,i,r);return phe(o)}var PM=class extends xo{constructor(e,t,i,r,o){super();let s=t?t.length-1:0,a=i?i.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=o||s;for(let l=0;l<a;++l){let u=i[l];this.controlPoints[l]=new mn(u.x,u.y,u.z,u.w)}}getPoint(e,t=new V){let i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=l5(this.degree,this.knots,this.controlPoints,r);return o.w!==1&&o.divideScalar(o.w),i.set(o.x,o.y,o.z)}getTangent(e,t=new V){let i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=c5(this.degree,this.knots,this.controlPoints,r,1);return i.copy(o[1]).normalize(),i}toJSON(){let e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(t=>t.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(t=>new mn(t[0],t[1],t[2],t[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}};var xn,rr,Co,NM=class extends ms{constructor(e){super(e)}load(e,t,i,r){let o=this,s=o.path===""?Oa.extractUrlBase(e):o.path,a=new _l(this.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(l){try{t(o.parse(l,s))}catch(u){r?r(u):console.error(u),o.manager.itemError(e)}},i,r)}parse(e,t){if(ghe(e))xn=new jR().parse(e);else{let r=f5(e);if(!vhe(r))throw new Error("THREE.FBXLoader: Unknown format.");if(u5(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+u5(r));xn=new zR().parse(r)}let i=new Xd(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new BR(i,this.manager).parse(xn)}},BR=class{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){rr=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),o=new VR().parse(r);return this.parseScene(r,o,i),Co}parseConnections(){let e=new Map;return"Connections"in xn&&xn.Connections.connections.forEach(function(i){let r=i[0],o=i[1],s=i[2];e.has(r)||e.set(r,{parents:[],children:[]});let a={ID:o,relationship:s};e.get(r).parents.push(a),e.has(o)||e.set(o,{parents:[],children:[]});let l={ID:r,relationship:s};e.get(o).children.push(l)}),e}parseImages(){let e={},t={};if("Video"in xn.Objects){let i=xn.Objects.Video;for(let r in i){let o=i[r],s=parseInt(r);if(e[s]=o.RelativeFilename||o.Filename,"Content"in o){let a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,l=typeof o.Content=="string"&&o.Content!=="";if(a||l){let u=this.parseImage(i[r]);t[o.RelativeFilename||o.Filename]=u}}}}for(let i in e){let r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){let t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase(),o;switch(r){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+o+";base64,"+t;{let s=new Uint8Array(t);return window.URL.createObjectURL(new Blob([s],{type:o}))}}parseTextures(e){let t=new Map;if("Texture"in xn.Objects){let i=xn.Objects.Texture;for(let r in i){let o=this.parseTexture(i[r],e);t.set(parseInt(r),o)}}return t}parseTexture(e,t){let i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;let r=e.WrapModeU,o=e.WrapModeV,s=r!==void 0?r.value:0,a=o!==void 0?o.value:0;if(i.wrapS=s===0?Aa:ds,i.wrapT=a===0?Aa:ds,"Scaling"in e){let l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){let l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){let i=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),r=e.FileName.split(".").pop().toLowerCase(),o=i.has(r)?this.manager.getHandler(`.${r}`):this.textureLoader;if(!o)return console.warn(`FBXLoader: ${r.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Mo;let s=o.path;s||o.setPath(this.textureLoader.path);let a=rr.get(e.id).children,l;a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(l=t[a[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&o.setPath(void 0));let u=o.load(l);return o.setPath(s),u}parseMaterials(e){let t=new Map;if("Material"in xn.Objects){let i=xn.Objects.Material;for(let r in i){let o=this.parseMaterial(i[r],e);o!==null&&t.set(parseInt(r),o)}}return t}parseMaterial(e,t){let i=e.id,r=e.attrName,o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!rr.has(i))return null;let s=this.parseParameters(e,t,i),a;switch(o.toLowerCase()){case"phong":a=new yl;break;case"lambert":a=new P0;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),a=new yl;break}return a.setValues(s),a.name=r,a}parseParameters(e,t,i){let r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=qt.toWorkingColorSpace(new gt().fromArray(e.Diffuse.value),On):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=qt.toWorkingColorSpace(new gt().fromArray(e.DiffuseColor.value),On)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=qt.toWorkingColorSpace(new gt().fromArray(e.Emissive.value),On):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=qt.toWorkingColorSpace(new gt().fromArray(e.EmissiveColor.value),On)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),r.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),(r.opacity===1||r.opacity===0)&&(r.opacity=e.Opacity?parseFloat(e.Opacity.value):null,r.opacity===null&&(r.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=qt.toWorkingColorSpace(new gt().fromArray(e.Specular.value),On):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=qt.toWorkingColorSpace(new gt().fromArray(e.SpecularColor.value),On));let o=this;return rr.get(i).children.forEach(function(s){let a=s.relationship;switch(a){case"Bump":r.bumpMap=o.getTexture(t,s.ID);break;case"Maya|TEX_ao_map":r.aoMap=o.getTexture(t,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=o.getTexture(t,s.ID),r.map!==void 0&&(r.map.colorSpace=On);break;case"DisplacementColor":r.displacementMap=o.getTexture(t,s.ID);break;case"EmissiveColor":r.emissiveMap=o.getTexture(t,s.ID),r.emissiveMap!==void 0&&(r.emissiveMap.colorSpace=On);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=o.getTexture(t,s.ID);break;case"ReflectionColor":r.envMap=o.getTexture(t,s.ID),r.envMap!==void 0&&(r.envMap.mapping=Sp,r.envMap.colorSpace=On);break;case"SpecularColor":r.specularMap=o.getTexture(t,s.ID),r.specularMap!==void 0&&(r.specularMap.colorSpace=On);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=o.getTexture(t,s.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in xn.Objects&&t in xn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=rr.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in xn.Objects){let i=xn.Objects.Deformer;for(let r in i){let o=i[r],s=rr.get(parseInt(r));if(o.attrType==="Skin"){let a=this.parseSkeleton(s,i);a.ID=r,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=s.parents[0].ID,e[r]=a}else if(o.attrType==="BlendShape"){let a={id:r};a.rawTargets=this.parseMorphTargets(s,i),a.id=r,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let i=[];return e.children.forEach(function(r){let o=t[r.ID];if(o.attrType!=="Cluster")return;let s={ID:r.ID,indices:[],weights:[],transformLink:new ht().fromArray(o.TransformLink.a)};"Indexes"in o&&(s.indices=o.Indexes.a,s.weights=o.Weights.a),i.push(s)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){let i=[];for(let r=0;r<e.children.length;r++){let o=e.children[r],s=t[o.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;a.geoID=rr.get(parseInt(o.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){Co=new io;let r=this.parseModels(e.skeletons,t,i),o=xn.Objects.Model,s=this;r.forEach(function(l){let u=o[l.ID];s.setLookAtProperties(l,u),rr.get(l.ID).parents.forEach(function(h){let p=r.get(h.ID);p!==void 0&&p.add(l)}),l.parent===null&&Co.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.addGlobalSceneSettings(),Co.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);let u=d5(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});let a=new HR().parse();Co.children.length===1&&Co.children[0].isGroup&&(Co.children[0].animations=a,Co=Co.children[0]),Co.animations=a}parseModels(e,t,i){let r=new Map,o=xn.Objects.Model;for(let s in o){let a=parseInt(s),l=o[s],u=rr.get(a),f=this.buildSkeleton(u,e,a,l.attrName);if(!f){switch(l.attrType){case"Camera":f=this.createCamera(u);break;case"Light":f=this.createLight(u);break;case"Mesh":f=this.createMesh(u,t,i);break;case"NurbsCurve":f=this.createCurve(u,t);break;case"LimbNode":case"Root":f=new Cc;break;case"Null":default:f=new io;break}f.name=l.attrName?oi.sanitizeNodeName(l.attrName):"",f.userData.originalName=l.attrName,f.ID=a}this.getTransformData(f,l),r.set(a,f)}return r}buildSkeleton(e,t,i,r){let o=null;return e.parents.forEach(function(s){for(let a in t){let l=t[a];l.rawBones.forEach(function(u,f){if(u.ID===s.ID){let h=o;o=new Cc,o.matrixWorld.copy(u.transformLink),o.name=r?oi.sanitizeNodeName(r):"",o.userData.originalName=r,o.ID=i,l.bones[f]=o,h!==null&&o.add(h)}})}}),o}createCamera(e){let t,i;if(e.children.forEach(function(r){let o=xn.Objects.NodeAttribute[r.ID];o!==void 0&&(i=o)}),i===void 0)t=new Ti;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let o=1;i.NearPlane!==void 0&&(o=i.NearPlane.value/1e3);let s=1e3;i.FarPlane!==void 0&&(s=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);let u=a/l,f=45;i.FieldOfView!==void 0&&(f=i.FieldOfView.value);let h=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new qi(f,u,o,s),h!==null&&t.setFocalLength(h);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new Ti;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new Ti;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){let o=xn.Objects.NodeAttribute[r.ID];o!==void 0&&(i=o)}),i===void 0)t=new Ti;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let o=16777215;i.Color!==void 0&&(o=qt.toWorkingColorSpace(new gt().fromArray(i.Color.value),On));let s=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(s=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);let l=1;switch(r){case 0:t=new Tu(o,s,a,l);break;case 1:t=new Kd(o,s);break;case 2:let u=Math.PI/3;i.InnerAngle!==void 0&&(u=bi.degToRad(i.InnerAngle.value));let f=0;i.OuterAngle!==void 0&&(f=bi.degToRad(i.OuterAngle.value),f=Math.max(f,1)),t=new Yd(o,s,a,u,f,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Tu(o,s);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,o=null,s=null,a=[];if(e.children.forEach(function(l){t.has(l.ID)&&(o=t.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?s=a:a.length>0?s=a[0]:(s=new yl({name:ms.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(s)),"color"in o.attributes&&a.forEach(function(l){l.vertexColors=!0}),o.groups.length>0){let l=!1;for(let u=0,f=o.groups.length;u<f;u++){let h=o.groups[u];(h.materialIndex<0||h.materialIndex>=a.length)&&(h.materialIndex=a.length,l=!0)}if(l){let u=new yl;a.push(u)}}return o.FBX_Deformer?(r=new jd(o,s),r.normalizeSkinWeights()):r=new Di(o,s),r}createCurve(e,t){let i=e.children.reduce(function(o,s){return t.has(s.ID)&&(o=t.get(s.ID)),o},null),r=new Hs({name:ms.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Sc(i,r)}getTransformData(e,t){let i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=ev(t.RotationOrder.value):i.eulerOrder=ev(0),"Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&rr.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){let o=xn.Objects.Model[r.ID];if("Lcl_Translation"in o){let s=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),Co.add(e.target)):e.lookAt(new V().fromArray(s))}}})}bindSkeleton(e,t,i){let r=this.parsePoseNodes();for(let o in e){let s=e[o];rr.get(parseInt(s.ID)).parents.forEach(function(l){if(t.has(l.ID)){let u=l.ID;rr.get(u).parents.forEach(function(h){i.has(h.ID)&&i.get(h.ID).bind(new Gd(s.bones),r[h.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in xn.Objects){let t=xn.Objects.Pose;for(let i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){let r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(o){e[o.Node]=new ht().fromArray(o.Matrix.a)}):e[r.Node]=new ht().fromArray(r.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in xn){if("AmbientColor"in xn.GlobalSettings){let e=xn.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){let o=new gt().setRGB(t,i,r,On);Co.add(new L0(o,1))}}"UnitScaleFactor"in xn.GlobalSettings&&(Co.userData.unitScaleFactor=xn.GlobalSettings.UnitScaleFactor.value)}}},VR=class{constructor(){this.negativeMaterialIndices=!1}parse(e){let t=new Map;if("Geometry"in xn.Objects){let i=xn.Objects.Geometry;for(let r in i){let o=rr.get(parseInt(r)),s=this.parseGeometry(o,i[r],e);t.set(parseInt(r),s)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){let r=i.skeletons,o=[],s=e.parents.map(function(h){return xn.Objects.Model[h.ID]});if(s.length===0)return;let a=e.children.reduce(function(h,p){return r[p.ID]!==void 0&&(h=r[p.ID]),h},null);e.children.forEach(function(h){i.morphTargets[h.ID]!==void 0&&o.push(i.morphTargets[h.ID])});let l=s[0],u={};"RotationOrder"in l&&(u.eulerOrder=ev(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);let f=d5(u);return this.genGeometry(t,a,o,f)}genGeometry(e,t,i,r){let o=new ir;e.attrName&&(o.name=e.attrName);let s=this.parseGeoNode(e,t),a=this.genBuffers(s),l=new Zn(a.vertex,3);if(l.applyMatrix4(r),o.setAttribute("position",l),a.colors.length>0&&o.setAttribute("color",new Zn(a.colors,3)),t&&(o.setAttribute("skinIndex",new zd(a.weightsIndices,4)),o.setAttribute("skinWeight",new Zn(a.vertexWeights,4)),o.FBX_Deformer=t),a.normal.length>0){let u=new Qt().getNormalMatrix(r),f=new Zn(a.normal,3);f.applyNormalMatrix(u),o.setAttribute("normal",f)}if(a.uvs.forEach(function(u,f){let h=f===0?"uv":`uv${f}`;o.setAttribute(h,new Zn(a.uvs[f],2))}),s.material&&s.material.mappingType!=="AllSame"){let u=a.materialIndex[0],f=0;if(a.materialIndex.forEach(function(h,p){h!==u&&(o.addGroup(f,p-f,u),u=h,f=p)}),o.groups.length>0){let h=o.groups[o.groups.length-1],p=h.start+h.count;p!==a.materialIndex.length&&o.addGroup(p,a.materialIndex.length-p,u)}o.groups.length===0&&o.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(o,e,i,r),o}parseGeoNode(e,t){let i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,o){r.indices.forEach(function(s,a){i.weightTable[s]===void 0&&(i.weightTable[s]=[]),i.weightTable[s].push({id:o,weight:r.weights[a]})})})),i}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,r=0,o=!1,s=[],a=[],l=[],u=[],f=[],h=[],p=this;return e.vertexIndices.forEach(function(g,v){let x,y=!1;g<0&&(g=g^-1,y=!0);let _=[],T=[];if(s.push(g*3,g*3+1,g*3+2),e.color){let M=OM(v,i,g,e.color);l.push(M[0],M[1],M[2])}if(e.skeleton){if(e.weightTable[g]!==void 0&&e.weightTable[g].forEach(function(M){T.push(M.weight),_.push(M.id)}),T.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);let M=[0,0,0,0],C=[0,0,0,0];T.forEach(function(H,L){let k=H,$=_[L];C.forEach(function(N,A,j){if(k>N){j[A]=k,k=N;let he=M[A];M[A]=$,$=he}})}),_=M,T=C}for(;T.length<4;)T.push(0),_.push(0);for(let M=0;M<4;++M)f.push(T[M]),h.push(_[M])}if(e.normal){let M=OM(v,i,g,e.normal);a.push(M[0],M[1],M[2])}e.material&&e.material.mappingType!=="AllSame"&&(x=OM(v,i,g,e.material)[0],x<0&&(p.negativeMaterialIndices=!0,x=0)),e.uv&&e.uv.forEach(function(M,C){let H=OM(v,i,g,M);u[C]===void 0&&(u[C]=[]),u[C].push(H[0]),u[C].push(H[1])}),r++,y&&(p.genFace(t,e,s,x,a,l,u,f,h,r),i++,r=0,s=[],a=[],l=[],u=[],f=[],h=[])}),t}getNormalNewell(e){let t=new V(0,0,0);for(let i=0;i<e.length;i++){let r=e[i],o=e[(i+1)%e.length];t.x+=(r.y-o.y)*(r.z+o.z),t.y+=(r.z-o.z)*(r.x+o.x),t.z+=(r.x-o.x)*(r.y+o.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){let t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new V(0,1,0):new V(0,0,1)).cross(t).normalize(),o=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:o}}flattenVertex(e,t,i){return new qe(e.dot(t),e.dot(i))}genFace(e,t,i,r,o,s,a,l,u,f){let h;if(f>3){let p=[],g=t.baseVertexPositions||t.vertexPositions;for(let _=0;_<i.length;_+=3)p.push(new V(g[i[_]],g[i[_+1]],g[i[_+2]]));let{tangent:v,bitangent:x}=this.getNormalTangentAndBitangent(p),y=[];for(let _ of p)y.push(this.flattenVertex(_,v,x));h=bu.triangulateShape(y,[])}else h=[[0,1,2]];for(let[p,g,v]of h)e.vertex.push(t.vertexPositions[i[p*3]]),e.vertex.push(t.vertexPositions[i[p*3+1]]),e.vertex.push(t.vertexPositions[i[p*3+2]]),e.vertex.push(t.vertexPositions[i[g*3]]),e.vertex.push(t.vertexPositions[i[g*3+1]]),e.vertex.push(t.vertexPositions[i[g*3+2]]),e.vertex.push(t.vertexPositions[i[v*3]]),e.vertex.push(t.vertexPositions[i[v*3+1]]),e.vertex.push(t.vertexPositions[i[v*3+2]]),t.skeleton&&(e.vertexWeights.push(l[p*4]),e.vertexWeights.push(l[p*4+1]),e.vertexWeights.push(l[p*4+2]),e.vertexWeights.push(l[p*4+3]),e.vertexWeights.push(l[g*4]),e.vertexWeights.push(l[g*4+1]),e.vertexWeights.push(l[g*4+2]),e.vertexWeights.push(l[g*4+3]),e.vertexWeights.push(l[v*4]),e.vertexWeights.push(l[v*4+1]),e.vertexWeights.push(l[v*4+2]),e.vertexWeights.push(l[v*4+3]),e.weightsIndices.push(u[p*4]),e.weightsIndices.push(u[p*4+1]),e.weightsIndices.push(u[p*4+2]),e.weightsIndices.push(u[p*4+3]),e.weightsIndices.push(u[g*4]),e.weightsIndices.push(u[g*4+1]),e.weightsIndices.push(u[g*4+2]),e.weightsIndices.push(u[g*4+3]),e.weightsIndices.push(u[v*4]),e.weightsIndices.push(u[v*4+1]),e.weightsIndices.push(u[v*4+2]),e.weightsIndices.push(u[v*4+3])),t.color&&(e.colors.push(s[p*3]),e.colors.push(s[p*3+1]),e.colors.push(s[p*3+2]),e.colors.push(s[g*3]),e.colors.push(s[g*3+1]),e.colors.push(s[g*3+2]),e.colors.push(s[v*3]),e.colors.push(s[v*3+1]),e.colors.push(s[v*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(o[p*3]),e.normal.push(o[p*3+1]),e.normal.push(o[p*3+2]),e.normal.push(o[g*3]),e.normal.push(o[g*3+1]),e.normal.push(o[g*3+2]),e.normal.push(o[v*3]),e.normal.push(o[v*3+1]),e.normal.push(o[v*3+2])),t.uv&&t.uv.forEach(function(x,y){e.uvs[y]===void 0&&(e.uvs[y]=[]),e.uvs[y].push(a[y][p*2]),e.uvs[y].push(a[y][p*2+1]),e.uvs[y].push(a[y][g*2]),e.uvs[y].push(a[y][g*2+1]),e.uvs[y].push(a[y][v*2]),e.uvs[y].push(a[y][v*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let o=this;i.forEach(function(s){s.rawTargets.forEach(function(a){let l=xn.Objects.Geometry[a.geoID];l!==void 0&&o.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,i,r,o){let s=t.Vertices!==void 0?t.Vertices.a:[],a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=i.Vertices!==void 0?i.Vertices.a:[],u=i.Indexes!==void 0?i.Indexes.a:[],f=e.attributes.position.count*3,h=new Float32Array(f);for(let x=0;x<u.length;x++){let y=u[x]*3;h[y]=l[x*3],h[y+1]=l[x*3+1],h[y+2]=l[x*3+2]}let p={vertexIndices:a,vertexPositions:h,baseVertexPositions:s},g=this.genBuffers(p),v=new Zn(g.vertex,3);v.name=o||i.attrName,v.applyMatrix4(r),e.morphAttributes.position.push(v)}parseNormals(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a,o=[];return i==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:o,mappingType:t,referenceType:i}}parseUVs(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a,o=[];return i==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:r,indices:o,mappingType:t,referenceType:i}}parseVertexColors(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a,o=[];i==="IndexToDirect"&&(o=e.ColorIndex.a);for(let s=0,a=new gt;s<r.length;s+=4)a.fromArray(r,s),qt.toWorkingColorSpace(a,On),a.toArray(r,s);return{dataSize:4,buffer:r,indices:o,mappingType:t,referenceType:i}}parseMaterialIndices(e){let t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};let r=e.Materials.a,o=[];for(let s=0;s<r.length;++s)o.push(s);return{dataSize:1,buffer:r,indices:o,mappingType:t,referenceType:i}}parseNurbsGeometry(e){let t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ir;let i=t-1,r=e.KnotVector.a,o=[],s=e.Points.a;for(let h=0,p=s.length;h<p;h+=4)o.push(new mn().fromArray(s,h));let a,l;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let h=0;h<i;++h)o.push(o[h])}let f=new PM(i,r,o,a,l).getPoints(o.length*12);return new ir().setFromPoints(f)}},HR=class{parse(){let e=[],t=this.parseClips();if(t!==void 0)for(let i in t){let r=t[i],o=this.addClip(r);e.push(o)}return e}parseClips(){if(xn.Objects.AnimationCurve===void 0)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=xn.Objects.AnimationCurveNode,t=new Map;for(let i in e){let r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){let o={id:r.id,attr:r.attrName,curves:{}};t.set(o.id,o)}}return t}parseAnimationCurves(e){let t=xn.Objects.AnimationCurve;for(let i in t){let r={id:t[i].id,times:t[i].KeyTime.a.map(yhe),values:t[i].KeyValueFloat.a},o=rr.get(r.id);if(o!==void 0){let s=o.parents[0].ID,a=o.parents[0].relationship;a.match(/X/)?e.get(s).curves.x=r:a.match(/Y/)?e.get(s).curves.y=r:a.match(/Z/)?e.get(s).curves.z=r:a.match(/DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=r)}}}parseAnimationLayers(e){let t=xn.Objects.AnimationLayer,i=new Map;for(let r in t){let o=[],s=rr.get(parseInt(r));s!==void 0&&(s.children.forEach(function(l,u){if(e.has(l.ID)){let f=e.get(l.ID);if(f.curves.x!==void 0||f.curves.y!==void 0||f.curves.z!==void 0){if(o[u]===void 0){let h=rr.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(h!==void 0){let p=xn.Objects.Model[h.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}let g={modelName:p.attrName?oi.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Co.traverse(function(v){v.ID===p.id&&(g.transform=v.matrix,v.userData.transformData&&(g.eulerOrder=v.userData.transformData.eulerOrder))}),g.transform||(g.transform=new ht),"PreRotation"in p&&(g.preRotation=p.PreRotation.value),"PostRotation"in p&&(g.postRotation=p.PostRotation.value),o[u]=g}}o[u]&&(o[u][f.attr]=f)}else if(f.curves.morph!==void 0){if(o[u]===void 0){let h=rr.get(l.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID,p=rr.get(h).parents[0].ID,g=rr.get(p).parents[0].ID,v=rr.get(g).parents[0].ID,x=xn.Objects.Model[v],y={modelName:x.attrName?oi.sanitizeNodeName(x.attrName):"",morphName:xn.Objects.Deformer[h].attrName};o[u]=y}o[u][f.attr]=f}}}),i.set(parseInt(r),o))}return i}parseAnimStacks(e){let t=xn.Objects.AnimationStack,i={};for(let r in t){let o=rr.get(parseInt(r)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=e.get(o[0].ID);i[r]={name:t[r].attrName,layer:s}}return i}addClip(e){let t=[],i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new qd(e.name,-1,t)}generateTracks(e){let t=[],i=new V,r=new V;if(e.transform&&e.transform.decompose(i,new Ei,r),i=i.toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){let o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){let o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,r){let o=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(o,t,i);return new js(e+"."+r,o,s)}generateRotationTrack(e,t,i,r,o){let s,a;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){let p=this.interpolateRotations(t.x,t.y,t.z,o);s=p[0],a=p[1]}let l=ev(0);i!==void 0&&(i=i.map(bi.degToRad),i.push(l),i=new Rr().fromArray(i),i=new Ei().setFromEuler(i)),r!==void 0&&(r=r.map(bi.degToRad),r.push(l),r=new Rr().fromArray(r),r=new Ei().setFromEuler(r).invert());let u=new Ei,f=new Rr,h=[];if(!a||!s)return new hs(e+".quaternion",[0],[0]);for(let p=0;p<a.length;p+=3)f.set(a[p],a[p+1],a[p+2],o),u.setFromEuler(f),i!==void 0&&u.premultiply(i),r!==void 0&&u.multiply(r),p>2&&new Ei().fromArray(h,(p-3)/3*4).dot(u)<0&&u.set(-u.x,-u.y,-u.z,-u.w),u.toArray(h,p/3*4);return new hs(e+".quaternion",s,h)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,i=t.values.map(function(o){return o/100}),r=Co.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new zs(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let o=1;o<t.length;o++){let s=t[o];s!==r&&(t[i]=s,r=s,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){let r=i,o=[],s=-1,a=-1,l=-1;return e.forEach(function(u){if(t.x&&(s=t.x.times.indexOf(u)),t.y&&(a=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),s!==-1){let f=t.x.values[s];o.push(f),r[0]=f}else o.push(r[0]);if(a!==-1){let f=t.y.values[a];o.push(f),r[1]=f}else o.push(r[1]);if(l!==-1){let f=t.z.values[l];o.push(f),r[2]=f}else o.push(r[2])}),o}interpolateRotations(e,t,i,r){let o=[],s=[];o.push(e.times[0]),s.push(bi.degToRad(e.values[0])),s.push(bi.degToRad(t.values[0])),s.push(bi.degToRad(i.values[0]));for(let a=1;a<e.values.length;a++){let l=[e.values[a-1],t.values[a-1],i.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;let u=l.map(bi.degToRad),f=[e.values[a],t.values[a],i.values[a]];if(isNaN(f[0])||isNaN(f[1])||isNaN(f[2]))continue;let h=f.map(bi.degToRad),p=[f[0]-l[0],f[1]-l[1],f[2]-l[2]],g=[Math.abs(p[0]),Math.abs(p[1]),Math.abs(p[2])];if(g[0]>=180||g[1]>=180||g[2]>=180){let x=Math.max(...g)/180,y=new Rr(...u,r),_=new Rr(...h,r),T=new Ei().setFromEuler(y),M=new Ei().setFromEuler(_);T.dot(M)&&M.set(-M.x,-M.y,-M.z,-M.w);let C=e.times[a-1],H=e.times[a]-C,L=new Ei,k=new Rr;for(let $=0;$<1;$+=1/x)L.copy(T.clone().slerp(M.clone(),$)),o.push(C+$*H),k.setFromQuaternion(L,r),s.push(k.x),s.push(k.y),s.push(k.z)}else o.push(e.times[a]),s.push(bi.degToRad(e.values[a])),s.push(bi.degToRad(t.values[a])),s.push(bi.degToRad(i.values[a]))}return[o,s]}},zR=class{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new LM,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,o){let s=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(s||a)return;let l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),f=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):u?t.parseNodeProperty(r,u,i[++o]):f?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){let i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:i},s=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,o):i in a?(i==="PoseNode"?a.PoseNode.push(o):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),s.id!==""&&(a[i][s.id]=o)):typeof s.id=="number"?(a[i]={},a[i][s.id]=o):i!=="Properties70"&&(i==="PoseNode"?a[i]=[o]:a[i]=o),typeof s.id=="number"&&(o.id=s.id),s.name!==""&&(o.attrName=s.name),s.type!==""&&(o.attrType=s.type),this.pushStack(o)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),o=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&o===","&&(o=i.replace(/"/g,"").replace(/,$/,"").trim());let s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,r,o);return}if(r==="C"){let l=o.split(",").slice(1),u=parseInt(l[0]),f=parseInt(l[1]),h=o.split(",").slice(3);h=h.map(function(p){return p.trim().replace(/^"/,"")}),r="connections",o=[u,f],whe(o,h),s[r]===void 0&&(s[r]=[])}r==="Node"&&(s.id=o),r in s&&Array.isArray(s[r])?s[r].push(o):r!=="a"?s[r]=o:s.a=o,this.setCurrentProp(s,r),r==="a"&&o.slice(-1)!==","&&(s.a=UR(o))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=UR(t.a))}parseNodeSpecialProperty(e,t,i){let r=i.split('",').map(function(f){return f.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=r[0],s=r[1],a=r[2],l=r[3],u=r[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=UR(u);break}this.getPrevNode()[o]={type:s,type2:a,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),o)}},jR=class{parse(e){let t=new FM(e);t.skip(23);let i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);let r=new LM;for(;!this.endOfContent(t);){let o=this.parseNode(t,i);o!==null&&r.add(o.name,o)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let i={},r=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let s=e.getUint8(),a=e.getString(s);if(r===0)return null;let l=[];for(let p=0;p<o;p++)l.push(this.parseProperty(e));let u=l.length>0?l[0]:"",f=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(i.singleProperty=o===1&&e.getOffset()===r;r>e.getOffset();){let p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,i,p)}return i.propertyList=l,typeof u=="number"&&(i.id=u),f!==""&&(i.attrName=f),h!==""&&(i.attrType=h),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){let r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){let r=[];i.propertyList.forEach(function(o,s){s!==0&&r.push(o)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(o){t[o]=i[o]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],o=i.propertyList[1],s=i.propertyList[2],a=i.propertyList[3],l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:o,type2:s,flag:a,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){let t=e.getString(1),i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":let r=e.getUint32(),o=e.getUint32(),s=e.getUint32();if(o===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}let a=s5(new Uint8Array(e.getArrayBuffer(s))),l=new FM(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},FM=class{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){let t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let r=i.indexOf(0);return r>=0&&(i=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(i)}},LM=class{add(e,t){this[e]=t}};function ghe(n){let e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===f5(n,0,e.length)}function vhe(n){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],t=0;function i(r){let o=n[r-1];return n=n.slice(t+r),t++,o}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function u5(n){let e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function yhe(n){return n/46186158e3}var _he=[];function OM(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);let o=r*i.dataSize,s=o+i.dataSize;return xhe(_he,i.buffer,o,s)}var kR=new Rr,Up=new V;function d5(n){let e=new ht,t=new ht,i=new ht,r=new ht,o=new ht,s=new ht,a=new ht,l=new ht,u=new ht,f=new ht,h=new ht,p=new ht,g=n.inheritType?n.inheritType:0;n.translation&&e.setPosition(Up.fromArray(n.translation));let v=ev(0);if(n.preRotation){let j=n.preRotation.map(bi.degToRad);j.push(v),t.makeRotationFromEuler(kR.fromArray(j))}if(n.rotation){let j=n.rotation.map(bi.degToRad);j.push(n.eulerOrder||v),i.makeRotationFromEuler(kR.fromArray(j))}if(n.postRotation){let j=n.postRotation.map(bi.degToRad);j.push(v),r.makeRotationFromEuler(kR.fromArray(j)),r.invert()}n.scale&&o.scale(Up.fromArray(n.scale)),n.scalingOffset&&a.setPosition(Up.fromArray(n.scalingOffset)),n.scalingPivot&&s.setPosition(Up.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Up.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(Up.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(h.copy(n.parentMatrix),f.copy(n.parentMatrixWorld));let x=t.clone().multiply(i).multiply(r),y=new ht;y.extractRotation(f);let _=new ht;_.copyPosition(f);let T=_.clone().invert().multiply(f),M=y.clone().invert().multiply(T),C=o,H=new ht;if(g===0)H.copy(y).multiply(x).multiply(M).multiply(C);else if(g===1)H.copy(y).multiply(M).multiply(x).multiply(C);else{let he=new ht().scale(new V().setFromMatrixScale(h)).clone().invert(),ae=M.clone().multiply(he);H.copy(y).multiply(x).multiply(ae).multiply(C)}let L=u.clone().invert(),k=s.clone().invert(),$=e.clone().multiply(l).multiply(u).multiply(t).multiply(i).multiply(r).multiply(L).multiply(a).multiply(s).multiply(o).multiply(k),N=new ht().copyPosition($),A=f.clone().multiply(N);return p.copyPosition(A),$=p.clone().multiply(H),$.premultiply(f.invert()),$}function ev(n){n=n||0;let e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function UR(n){return n.split(",").map(function(t){return parseFloat(t)})}function f5(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function whe(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function xhe(n,e,t,i){for(let r=t,o=0;r<i;r++,o++)n[o]=e[r];return n}function h5(n,e){let t=new NM(e);return new Promise((i,r)=>{t.load(n,o=>{i(o)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var bhe=/^[og]\s*(.+)?/,Mhe=/^mtllib /,Che=/^usemtl /,She=/^usemap /,p5=/\s+/,m5=new V,GR=new V,g5=new V,v5=new V,Xs=new V,kM=new gt;function Ehe(){let n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}let i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,o){let s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);let a={index:this.materials.length,name:r||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:s!==void 0?s.smooth:this.smooth,groupStart:s!==void 0?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){let u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){let o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),r&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},i&&i.name&&typeof i.clone=="function"){let r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){let r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){let r=this.normals,o=this.object.geometry.normals;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){let r=this.vertices,o=this.object.geometry.normals;m5.fromArray(r,e),GR.fromArray(r,t),g5.fromArray(r,i),Xs.subVectors(g5,GR),v5.subVectors(m5,GR),Xs.cross(v5),Xs.normalize(),o.push(Xs.x,Xs.y,Xs.z),o.push(Xs.x,Xs.y,Xs.z),o.push(Xs.x,Xs.y,Xs.z)},addColor:function(e,t,i){let r=this.colors,o=this.object.geometry.colors;r[e]!==void 0&&o.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&o.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&o.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){let r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0],r[e+1]),o.push(r[t+0],r[t+1]),o.push(r[i+0],r[i+1])},addDefaultUV:function(){let e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){let t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,o,s,a,l,u){let f=this.vertices.length,h=this.parseVertexIndex(e,f),p=this.parseVertexIndex(t,f),g=this.parseVertexIndex(i,f);if(this.addVertex(h,p,g),this.addColor(h,p,g),a!==void 0&&a!==""){let v=this.normals.length;h=this.parseNormalIndex(a,v),p=this.parseNormalIndex(l,v),g=this.parseNormalIndex(u,v),this.addNormal(h,p,g)}else this.addFaceNormal(h,p,g);if(r!==void 0&&r!==""){let v=this.uvs.length;h=this.parseUVIndex(r,v),p=this.parseUVIndex(o,v),g=this.parseUVIndex(s,v),this.addUV(h,p,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";let t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){let o=this.parseVertexIndex(e[i],t);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";let i=this.vertices.length,r=this.uvs.length;for(let o=0,s=e.length;o<s;o++)this.addVertexLine(this.parseVertexIndex(e[o],i));for(let o=0,s=t.length;o<s;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return n.startObject("",!1),n}var UM=class extends ms{constructor(e){super(e),this.materials=null}load(e,t,i,r){let o=this,s=new _l(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){let t=new Ehe;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));let i=e.split(`
`),r=[];for(let a=0,l=i.length;a<l;a++){let u=i[a].trimStart();if(u.length===0)continue;let f=u.charAt(0);if(f!=="#")if(f==="v"){let h=u.split(p5);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(kM.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]),On),t.colors.push(kM.r,kM.g,kM.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(f==="f"){let p=u.slice(1).trim().split(p5),g=[];for(let x=0,y=p.length;x<y;x++){let _=p[x];if(_.length>0){let T=_.split("/");g.push(T)}}let v=g[0];for(let x=1,y=g.length-1;x<y;x++){let _=g[x],T=g[x+1];t.addFace(v[0],_[0],T[0],v[1],_[1],T[1],v[2],_[2],T[2])}}else if(f==="l"){let h=u.substring(1).trim().split(" "),p=[],g=[];if(u.indexOf("/")===-1)p=h;else for(let v=0,x=h.length;v<x;v++){let y=h[v].split("/");y[0]!==""&&p.push(y[0]),y[1]!==""&&g.push(y[1])}t.addLineGeometry(p,g)}else if(f==="p"){let p=u.slice(1).trim().split(" ");t.addPointGeometry(p)}else if((r=bhe.exec(u))!==null){let h=(" "+r[0].slice(1).trim()).slice(1);t.startObject(h)}else if(Che.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(Mhe.test(u))t.materialLibraries.push(u.substring(7).trim());else if(She.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(f==="s"){if(r=u.split(" "),r.length>1){let p=r[1].trim().toLowerCase();t.object.smooth=p!=="0"&&p!=="off"}else t.object.smooth=!0;let h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();let o=new io;if(o.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let a=0,l=t.objects.length;a<l;a++){let u=t.objects[a],f=u.geometry,h=u.materials,p=f.type==="Line",g=f.type==="Points",v=!1;if(f.vertices.length===0)continue;let x=new ir;x.setAttribute("position",new Zn(f.vertices,3)),f.normals.length>0&&x.setAttribute("normal",new Zn(f.normals,3)),f.colors.length>0&&(v=!0,x.setAttribute("color",new Zn(f.colors,3))),f.hasUVIndices===!0&&x.setAttribute("uv",new Zn(f.uvs,2));let y=[];for(let T=0,M=h.length;T<M;T++){let C=h[T],H=C.name+"_"+C.smooth+"_"+v,L=t.materials[H];if(this.materials!==null){if(L=this.materials.create(C.name),p&&L&&!(L instanceof Hs)){let k=new Hs;yr.prototype.copy.call(k,L),k.color.copy(L.color),L=k}else if(g&&L&&!(L instanceof Pa)){let k=new Pa({size:10,sizeAttenuation:!1});yr.prototype.copy.call(k,L),k.color.copy(L.color),k.map=L.map,L=k}}L===void 0&&(p?L=new Hs:g?L=new Pa({size:1,sizeAttenuation:!1}):L=new yl,L.name=C.name,L.flatShading=!C.smooth,L.vertexColors=v,t.materials[H]=L),y.push(L)}let _;if(y.length>1){for(let T=0,M=h.length;T<M;T++){let C=h[T];x.addGroup(C.groupStart,C.groupCount,T)}p?_=new Su(x,y):g?_=new Ec(x,y):_=new Di(x,y)}else p?_=new Su(x,y[0]):g?_=new Ec(x,y[0]):_=new Di(x,y[0]);_.name=u.name,o.add(_)}else if(t.vertices.length>0){let a=new Pa({size:1,sizeAttenuation:!1}),l=new ir;l.setAttribute("position",new Zn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new Zn(t.colors,3)),a.vertexColors=!0);let u=new Ec(l,a);o.add(u)}return o}};function y5(n,e){return _t(this,null,function*(){let t=new UM(e);try{return yield new Promise((r,o)=>{t.load(n,s=>{r(s)},void 0,s=>{s instanceof Error?o(s):o(new Error("An unknown error occurred"))})})}catch(i){throw console.error("Error loading OBJ model:",i),i}})}function _5(n,e){return _t(this,null,function*(){let t=n.type,i;if(console.log(n),t.includes("gltf")||t.includes("glb")?i="gltf":t.includes("fbx")?i="fbx":t.includes("obj")&&(i="obj"),!i)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0442\u0438\u043F \u043C\u043E\u0434\u0435\u043B\u0438 \u043F\u043E MIME-\u0442\u0438\u043F\u0443.");let r=URL.createObjectURL(n),o;try{switch(i){case"gltf":case"glb":o=Jz(r,e);break;case"fbx":o=h5(r,e);break;case"obj":o=y5(r,e);break;default:throw new Error("\u041D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043C\u043E\u0434\u0435\u043B\u0438: "+i)}return yield o}finally{URL.revokeObjectURL(r)}})}var Bp=(()=>{class n{httpModule;baseServiceUrl=Si+"furniture/model/";constructor(t){this.httpModule=t}GETfurnitureModel(t,i){let r=new pn().set("jwt",t).set("furnitureId",i);return _n(this.httpModule.get(this.baseServiceUrl,{params:r,responseType:"blob"}))}POSTuploadFurnitureModel(t,i,r){let o=new FormData;o.append("model",t);let s=new pn().set("jwt",i).set("furnitureId",r).set("fileName",t.name);return _n(this.httpModule.post(this.baseServiceUrl,o,{params:s}))}DELETEfurnitureModel(t,i){let r=new pn().set("jwt",t);return _n(this.httpModule.delete(this.baseServiceUrl+i,{params:r}))}static \u0275fac=function(i){return new(i||n)(Ge(sr))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var x5=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=md(this.platformId)}static getCookieRegExp(t){let i=t.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return this.documentIsAccessible?(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie)):!1}get(t){if(this.check(t)){t=encodeURIComponent(t);let r=n.getCookieRegExp(t).exec(this.document.cookie);return r&&r[1]?n.safeDecodeURIComponent(r[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let t={},i=this.document;return i.cookie&&i.cookie!==""&&i.cookie.split(";").forEach(r=>{let[o,s]=r.split("=");t[n.safeDecodeURIComponent(o.replace(/^ /,""))]=n.safeDecodeURIComponent(s)}),t}set(t,i,r,o,s,a,l,u){if(!this.documentIsAccessible)return;if(typeof r=="number"||r instanceof Date||o||s||a||l){let p={expires:r,path:o,domain:s,secure:a,sameSite:l||"Lax",partitioned:u};this.set(t,i,p);return}let f=encodeURIComponent(t)+"="+encodeURIComponent(i)+";",h=r||{};if(h.expires)if(typeof h.expires=="number"){let p=new Date(new Date().getTime()+h.expires*1e3*60*60*24);f+="expires="+p.toUTCString()+";"}else f+="expires="+h.expires.toUTCString()+";";h.path&&(f+="path="+h.path+";"),h.domain&&(f+="domain="+h.domain+";"),h.secure===!1&&h.sameSite==="None"&&(h.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),h.secure&&(f+="secure;"),h.sameSite||(h.sameSite="Lax"),f+="sameSite="+h.sameSite+";",h.partitioned&&(f+="Partitioned;"),this.document.cookie=f}delete(t,i,r,o,s="Lax"){if(!this.documentIsAccessible)return;let a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:r,secure:o,sameSite:s})}deleteAll(t,i,r,o="Lax"){if(!this.documentIsAccessible)return;let s=this.getAll();for(let a in s)s.hasOwnProperty(a)&&this.delete(a,t,i,r,o)}static{this.\u0275fac=function(i){return new(i||n)(Ge(zt),Ge(ho))}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ur=(()=>{class n{cookieService;constructor(t){this.cookieService=t}setJwt(t,i){let r=new Date;i==="long"?r.setDate(r.getDate()+7):r.setMinutes(r.getMinutes()+10),this.cookieService.set("jwt",t,{expires:r,path:"/",sameSite:"Strict"})}deleteJwt(){this.cookieService.delete("jwt","/")}setGuideRule(){this.cookieService.set("guideInclude","false",{expires:new Date().getDate()+7,path:"/",sameSite:"Strict"})}getGuideRule(){return this.cookieService.get("guideInclude")}deleteGuideRule(){this.cookieService.delete("guideInclude","/")}getJwt(){return this.cookieService.get("jwt")}setUserType(t){this.cookieService.set("accountType",t,{expires:new Date().getDate()+7,path:"/",sameSite:"Strict"})}getUserType(){return this.cookieService.get("accountType")}deleteUserType(){this.cookieService.delete("accountType")}static \u0275fac=function(i){return new(i||n)(Ge(x5))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var BM=(()=>{class n{elementRef;spinner;furnitureModelService;furnitureCardService;accountCookieService;route;errorHandler;location;constructor(t,i,r,o,s,a,l,u){this.elementRef=t,this.spinner=i,this.furnitureModelService=r,this.furnitureCardService=o,this.accountCookieService=s,this.route=a,this.errorHandler=l,this.location=u}roomData;saveObjectsEmitter=new kn;renderer;camera;scene;controls;animationFrameId=null;canvasRatioOfWindow=1.5;roomProportions;raycaster=new U0;mouse=new qe;targetobject=void 0;rectangleMesh;ngAfterViewInit(){this.initThreeJs()}ngOnChanges(t){if(this.roomData=t.roomData.currentValue,!this.roomData||this.scene===void 0||this.roomData===t.roomData.previousValue)return;t.roomData.previousValue!==void 0&&this.clearRoom(),this.camera.position.set(0,5,0),this.camera.rotation.set(bi.degToRad(-90),0,0),this.roomProportions=this.roomData.roomProportions,this.createRoom(),this.rectangleMesh.rotation.x=bi.degToRad(-90);let i=we({objects:this.roomData.objects},this.roomData.roomProportions);if(this.getObjectSize(this.rectangleMesh).width===0)return;this.loadRoom(i);let r=this.route.snapshot.params.furnitureId;!r||t.roomData.previousValue||(this.fixPath(),this.addModel(r,!0))}loadFurnitureModel(t,i,r,o,s){return _t(this,null,function*(){this.spinner.show();try{let a=yield _5(t);s?this.addObjectToScene(a,i,r,s):this.addObjectToScene(a,i,r),this.spinner.hide(),o&&this.saveRoom()}catch{this.spinner.hide()}})}addModel(t,i,r){return _t(this,null,function*(){let o=this.accountCookieService.getJwt();if(o)try{let s=(yield this.furnitureCardService.GETfurnitureCard(t)).furnitureCard.proportions;console.log("addModel request");let a=yield this.furnitureModelService.GETfurnitureModel(o,t);this.loadFurnitureModel(a,s,t,i,r)}catch(s){console.log(s)}})}fixPath(){let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t)}initThreeJs(){this.scene=new v0,this.camera=new qi(75,window.innerWidth/window.innerHeight,.1,1e3);let t=new N0(11184810,0,2);this.scene.add(t),this.renderer=new EM({alpha:!0});let i=this.elementRef.nativeElement.querySelector("#canvasContainer");this.camera.position.z=5,this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),i.appendChild(this.renderer.domElement),this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}createRoundedRectangleGeometry(t,i,r,o){let s=new bp;return s.moveTo(-t/2+r,-i/2),s.lineTo(t/2-r,-i/2),s.quadraticCurveTo(t/2,-i/2,t/2,-i/2+r),s.lineTo(t/2,i/2-r),s.quadraticCurveTo(t/2,i/2,t/2-r,i/2),s.lineTo(-t/2+r,i/2),s.quadraticCurveTo(-t/2,i/2,-t/2,i/2-r),s.lineTo(-t/2,-i/2+r),s.quadraticCurveTo(-t/2,-i/2,-t/2+r,-i/2),new R0(s,o)}createRoom(){if(!this.roomData)return;let t=this.roomData.roomProportions,i=.1;this.controls=new IM(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.15,this.controls.enableZoom=!0,this.controls.minDistance=1,this.controls.maxDistance=10;let r=5;this.controls.maxPolarAngle=bi.degToRad(90-r),this.createRoomShape(t.width,t.length,i),this.rectangleMesh.name="roomFloorBase",this.rectangleMesh}calculateObjectSaveData(t){let i=this.getObjectSize(this.rectangleMesh),r=t.position;return{objectId:t.userData.id,xMetersDistance:r.x/i.width*this.roomProportions.width,zMetersDistance:r.z/i.length*this.roomProportions.length,yRotate:t.rotation.y}}calculateMoveObjectData(t){let i=this.getObjectSize(this.rectangleMesh);return{xDistance:t.xMetersDistance*i.width/this.roomProportions.width,zDistance:t.zMetersDistance*i.length/this.roomProportions.length,yRotate:t.yRotate}}createRoomShape(t,i,r){let o=this.calculateFrustumBounds(),s=t/i,a,l;s<=1?(a=o.height*s,l=o.height):(a=o.width,l=o.width/s);let f=this.createRoundedRectangleGeometry(a*.9,l*.9,r,10),h=new fs({color:3427905});this.rectangleMesh=new Di(f,h),this.scene.add(this.rectangleMesh),this.renderer.render(this.scene,this.camera),this.rectangleMesh.updateMatrixWorld(!0)}calculateFrustumBounds(){let t=this.camera.position.y,i=bi.degToRad(this.camera.fov),r=2*Math.tan(i/2)*Math.abs(t);return{width:r*this.camera.aspect,height:r}}addObjectToScene(t,i,r,o){t.userData={id:r},this.scaleImportModel(t,i),this.scene.add(t),this.renderer.render(this.scene,this.camera),o&&(t.position.set(o.xDistance,0,o.zDistance),t.rotation.y=o.yRotate)}getObjectSize(t){let r=new wo().setFromObject(t).getSize(new V);return{width:r.x,length:r.z,height:r.y}}scaleImportModel(t,i){let r=this.getObjectSize(t),o=this.getObjectSize(this.rectangleMesh),s=r.width>r.length?o.width/r.width:o.length/r.length,l=(r.width>r.length?i.width/this.roomProportions.width:i.length/this.roomProportions.length)*s;t.scale.set(l,l,l)}loadRoom(t){this.accountCookieService.getJwt()&&t.objects.forEach(r=>{this.addModel(r.objectId,!1,this.calculateMoveObjectData(r))})}clearRoom(){for(let t=this.scene.children.length-1;t>=0;t--){let i=this.scene.children[t];i.type!=="Scene"&&i.type!=="HemisphereLight"&&this.scene.remove(i)}}onResize(t){this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.render(this.scene,this.camera)}onMouseClick(t){if(this.targetobject){this.targetobject=void 0;return}let i=t.target.getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1,o=-(t.clientY-i.top)/i.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let a=this.raycaster.intersectObjects(this.scene.children).find(l=>l.object.name!=="roomFloorBase"&&l.object.type!=="Scene"&&l.object.type!=="HemisphereLight")?.object;a&&(this.targetobject=a.parent?a.parent:a)}rotateTargetObject(t){if(!this.targetobject)return;let i=-.05;switch(t.key){case"q":case"\u0439":this.targetobject.rotation.y-=i;break;case"e":case"\u0443":this.targetobject.rotation.y+=i}}onMousemove(t){if(!this.targetobject)return;let i=t.target.getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1,o=-(t.clientY-i.top)/i.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let s=this.raycaster.intersectObject(this.rectangleMesh);if(s.length===0)return;let a=s[0].point.x,l=s[0].point.z,u=this.getObjectSize(this.rectangleMesh),f=this.getObjectSize(this.targetobject),h=-u.width/2+f.width/2,p=u.width/2-f.width/2,g=a;g<h?g=h:g>p&&(g=p);let v=-u.length/2+f.length/2,x=u.length/2-f.length/2,y=l;y<v?y=v:y>x&&(y=x),this.targetobject.position.set(g,0,y)}deleteModel(){this.targetobject&&this.scene.remove(this.targetobject),this.saveRoom()}saveRoom(){if(!this.roomData)return;let t=this.scene.children.filter(r=>r.name!=="roomFloorBase"&&r.type!=="Scene"&&r.type!=="HemisphereLight").map(r=>this.calculateObjectSaveData(r)),i=t;this.roomData.objects=t,this.saveObjectsEmitter.emit(i)}static \u0275fac=function(i){return new(i||n)(ce($t),ce(iR),ce(Bp),ce(pu),ce(ur),ce(Br),ce($i),ce(Bo))};static \u0275cmp=Tt({type:n,selectors:[["app-scene"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.onResize(s)},!1,po)("click",function(s){return r.onMouseClick(s)})("keydown",function(s){return r.rotateTargetObject(s)},!1,po)("mousemove",function(s){return r.onMousemove(s)})},inputs:{roomData:"roomData"},outputs:{saveObjectsEmitter:"saveObjectsEmitter"},features:[Ni],decls:9,vars:2,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","none"],[1,"Loader"],[2,"font-size","20px","color","white"],["id","canvasContainer"],[1,"deleteModelBtn",3,"click"],["src","/assets/images/deleteIcon.svg","alt",""]],template:function(i,r){i&1&&(P(0,"ngx-spinner",0),me(1,"div",1),P(2,"p",2),ne(3,"Loading..."),O()(),P(4,"div",3)(5,"button",4),Me("click",function(){return r.deleteModel()}),P(6,"p"),ne(7,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),O(),me(8,"img",5),O()()),i&2&&(W(5),Gn("opacity",r.targetobject!==void 0?1:0))},dependencies:[$z,Wz],styles:['.Loader[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;max-width:14.6rem;margin-top:7.3rem;margin-bottom:7.3rem}.Loader[_ngcontent-%COMP%]:before, .Loader[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%;animation-duration:1.8s;animation-iteration-count:infinite;animation-timing-function:ease-in-out;filter:drop-shadow(0 0 .7555555556rem rgba(255,255,255,.75))}.Loader[_ngcontent-%COMP%]:before{width:100%;padding-bottom:100%;box-shadow:inset 0 0 0 1.7rem #fff;animation-name:_ngcontent-%COMP%_pulsA}.Loader[_ngcontent-%COMP%]:after{width:calc(100% - 3.4rem);padding-bottom:calc(100% - 3.4rem);box-shadow:0 0 #fff;animation-name:_ngcontent-%COMP%_pulsB}@keyframes _ngcontent-%COMP%_pulsA{0%{box-shadow:inset 0 0 0 1.7rem #fff;opacity:1}50%,to{box-shadow:inset 0 0 #fff;opacity:0}}@keyframes _ngcontent-%COMP%_pulsB{0%,50%{box-shadow:0 0 #fff;opacity:0}to{box-shadow:0 0 0 1.7rem #fff;opacity:1}}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}[_nghost-%COMP%]{display:block;height:100%}.funcBtnsSpan[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);bottom:50px;display:flex;gap:10px}.funcBtn[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:15px;border-radius:10px;border:none;font-family:arial;font-weight:1000;width:25vw;cursor:pointer}#canvasContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:calc(100% - 55px) 50px;gap:5px}.deleteModelBtn[_ngcontent-%COMP%]{grid-area:2/1/3/2;width:250px;height:50px;display:flex;justify-content:space-around;background-color:#000;border-radius:10px;border:none;box-shadow:0 0 5px #fff;align-items:center;justify-self:center;cursor:pointer;transition:all .3s ease-in-out}.deleteModelBtn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px}.deleteModelBtn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:27px;margin-bottom:3px}.deleteModelBtn[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px #a3b18a}']})}return n})();var b5=aS(wI());var Dhe=["scene"],Ihe=["roomsGuideTemplate1"],Ahe=["roomsGuideTemplate2"],Rhe=["roomGuideTemplate"];function Phe(n,e){if(n&1){let t=Rt();P(0,"button",29),Me("click",function(){He(t);let r=ve();return ze(r.deleteRoom())}),me(1,"img",30),O()}}function Ohe(n,e){if(n&1){let t=Rt();P(0,"button",31),Me("touchstart",function(r){let o=He(t).index,s=ve();return ze(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("keydown.enter",function(r){let o=He(t).index,s=ve();return ze(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("mousedown",function(r){let o=He(t).index,s=ve();return ze(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())}),ne(1),O()}if(n&2){let t=e.$implicit,i=e.index,r=ve();Gn("grid-area",t.gridArea)("display",(r.currentViewRoom===i||r.currentViewRoom===void 0)&&!r.sceneOpenToggle?"block":"none"),or("data-index",i),W(),er(" ",t.name," ")}}function Nhe(n,e){if(n&1&&(P(0,"a",34),ne(1),O()),n&2){let t=e.$implicit;q("href","/shop/"+t.name,kr),W(),er(" ",t.translateMany," ")}}function Fhe(n,e){if(n&1&&(P(0,"span",32),Oe(1,Nhe,2,2,"a",33),O()),n&2){let t=ve();W(),q("ngForOf",t.categoryArray)}}function Lhe(n,e){if(n&1){let t=Rt();P(0,"div",35)(1,"div",36),me(2,"span",37),P(3,"img",38),Me("click",function(){He(t);let r=ve();return ze(r.closeGuide())}),O()()()}if(n&2){let t=ve();W(2),q("ngTemplateOutlet",t.guideTemplate)}}function khe(n,e){n&1&&(P(0,"div",39)(1,"div",40)(2,"p",41),ne(3,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043E\u0434\u0438\u043D \u0440\u0430\u0437 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442e \u0434\u043B\u044F \u0441\u043C\u0435\u043D\u044B \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F"),O(),P(4,"div",42),me(5,"img",43),O()(),P(6,"div",44),me(7,"div",45),O(),P(8,"div",40)(9,"p",41),ne(10,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0434\u0432\u0430 \u0440\u0430\u0437\u0430 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442e \u0434\u043B\u044F \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043C\u0435\u0431\u0435\u043B\u0438"),O(),P(11,"div",42),me(12,"img",46),O()()())}function Uhe(n,e){n&1&&(P(0,"div",39)(1,"div",40)(2,"p",41),ne(3,"\u0417\u0430\u0436\u043C\u0438\u0442\u0435 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442\u0435 \u0438 \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0439\u0442\u0435"),O(),P(4,"div",47),me(5,"img",48),O()(),P(6,"div",44),me(7,"div",45),P(8,"span",49),ne(9,"\u0418\u041B\u0418"),O(),me(10,"div",45),O(),P(11,"div",40)(12,"p",41),ne(13,"\u041D\u0430\u0432\u0435\u0434\u0438\u0442\u0435\u0441\u044C \u043D\u0430 TAB \u0438 \u0441 \u0437\u0430\u0436\u0430\u0442\u044B\u043C ENTER \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 \u0441\u0442\u0440\u0435\u043B\u043E\u0447\u043A\u0438"),O(),P(14,"div",50),me(15,"img",51),P(16,"div",52),me(17,"img",53),P(18,"div",54),me(19,"img",55)(20,"img",56)(21,"img",57),O()()()()())}function Bhe(n,e){n&1&&(P(0,"div",39)(1,"div",40)(2,"p",41),ne(3,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u041B\u041A\u041C \u043D\u0430 \u043C\u0435\u0431\u0435\u043B\u0438 \u0434\u043B\u044F \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F"),O(),P(4,"div",42),me(5,"img",43),O()(),P(6,"div",44),me(7,"div",45),O(),P(8,"div",40)(9,"p",41),ne(10,"\u0412 \u0440\u0435\u0436\u0438\u043C\u0435 \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 Q \u0438 E \u0434\u043B\u044F \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430 \u043C\u0435\u0431\u0435\u043B\u0438"),O(),P(11,"div",50)(12,"div",52)(13,"div",54),me(14,"img",58)(15,"img",59),O()()()()())}var Vp=(()=>{class n{renderer;elementRef;categoryService;location;errorHandler;cdr;accountCookieService;constructor(t,i,r,o,s,a,l){this.renderer=t,this.elementRef=i,this.categoryService=r,this.location=o,this.errorHandler=s,this.cdr=a,this.accountCookieService=l}previousGridArea;roomSpan;roomSpanSettings;isDragging=!1;isClick=!1;clickTimer;isDoubleClick=!1;toggleModuleButton;formElement;oldSizeViewRoom=void 0;lastPlanHouse=void 0;categoryArray=[];isGuideIncluded=!1;isGuideVisible=!0;currentViewRoom=void 0;sceneOpenToggle=!1;currentIdClickedRoom=void 0;guideTemplate;planHouse;sceneComponent;initialized=new kn;planHouseEmitter=new kn;callSaveEmitter=new kn;roomsGuideTemplate1;roomsGuideTemplate2;roomGuideTemplate;ngOnInit(){this.checkGuideInclude(),this.initCategories()}ngAfterViewInit(){this.elementRef.nativeElement.parentElement.classList.contains("projectPreviewSpan")&&(this.isGuideIncluded=!1),this.guideTemplate=this.roomsGuideTemplate1,this.cdr.detectChanges(),this.roomSpan=this.elementRef.nativeElement.querySelector(".roomSpan"),this.calculateRoomSpanSettings(),this.formElement=this.elementRef.nativeElement.querySelector("form"),this.toggleModuleButton=this.elementRef.nativeElement.querySelector(".addModuleBtn"),this.initialized.emit()}initCategories(){return _t(this,null,function*(){this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray})}showGuide(){this.isGuideVisible=!0}checkGuideInclude(){this.isGuideIncluded=this.accountCookieService.getGuideRule()!=="false"}emitPlanHouse(){this.planHouseEmitter.emit(this.planHouse)}saveHouse(){this.callSaveEmitter.emit()}numberValidator(){return t=>{let i=t.value;return!isNaN(parseFloat(i))&&isFinite(i)?null:{notANumber:{value:t.value}}}}findFreeSpace(t){let r=Array.from({length:10},()=>Array(10).fill(!1));this.planHouse.forEach(o=>{let[s,a,l,u]=o.gridArea.split("/").map(Number);for(let f=s-1;f<l-1;f++)for(let h=a-1;h<u-1;h++)r[f][h]=!0});for(let o=0;o<=10-t.length;o++)for(let s=0;s<=10-t.width;s++){let a=!0;for(let l=o;l<o+t.length;l++){for(let u=s;u<s+t.width;u++)if(r[l][u]){a=!1;break}if(!a)break}if(a){for(let l=o;l<o+t.length;l++)for(let u=s;u<s+t.width;u++)r[l][u]=!0;return`${o+1} / ${s+1} / ${o+t.length+1} / ${s+t.width+1}`}}return this.errorHandler.setError("\u041D\u0435\u0442 \u043C\u0435\u0441\u0442\u0430",15e3),!1}calculateRoomSpanSettings(){let t=this.roomSpan.getBoundingClientRect();this.roomSpanSettings={startX:t.left,startY:t.top-document.documentElement.scrollTop,endX:t.width+t.left,endY:t.height+t.top,gap:+window.getComputedStyle(this.roomSpan).getPropertyValue("gap").slice(0,-2)}}isAreaOccupied(t,i){let[r,o,s,a]=t.split("/").map(Number);for(let l=0;l<this.planHouse.length;l++){if(l===i)continue;let[u,f,h,p]=this.planHouse[l].gridArea.split("/").map(Number);if(r<h&&s>u&&o<p&&a>f)return!0}return!1}calculateGridArea(t,i){if(this.currentIdClickedRoom===void 0)return;let r=this.planHouse[this.currentIdClickedRoom].roomProportions,o=t-this.roomSpanSettings.startX,s=i-this.roomSpanSettings.startY-document.documentElement.scrollTop,a=(this.roomSpanSettings.endX-this.roomSpanSettings.startX)/10+this.roomSpanSettings.gap,l=Math.floor(o/a)+1,u=Math.floor(s/a)+1,f=l+Math.round(r.width)-1,h=u+Math.round(r.length)-1;if(!(f>10||h>10))return`${u} / ${l} / ${h+1} / ${f+1}`}resetRoomPosition(t,i){let r=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(r){let o=this.calculateGridArea(t,i);o&&!this.isAreaOccupied(o,this.currentIdClickedRoom)?(this.renderer.setStyle(r,"grid-area",o),this.planHouse[this.currentIdClickedRoom].gridArea=o):this.renderer.setStyle(r,"grid-area",this.previousGridArea),this.renderer.removeStyle(r,"background-color"),this.renderer.removeStyle(r,"z-index"),this.currentIdClickedRoom=void 0}}onMouseLeave(t){this.isDragging&&this.currentIdClickedRoom!==void 0&&this.onMouseUp(t)}onMouseUp(t){if(this.sceneOpenToggle!==!0&&this.currentViewRoom===void 0){if(this.isDragging&&this.currentIdClickedRoom!==void 0){if(this.isDragging=!1,t instanceof MouseEvent&&this.resetRoomPosition(t.clientX,t.clientY),typeof TouchEvent<"u"&&t instanceof TouchEvent){let r=t.changedTouches[0];this.resetRoomPosition(r.clientX,r.clientY)}let i=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');i&&(this.renderer.removeStyle(i,"cursor"),this.renderer.removeStyle(i,"background-color")),this.currentIdClickedRoom=void 0,this.emitPlanHouse()}this.clickTimer=setTimeout(()=>{if(this.isClick&&!this.isDragging){if(this.currentIdClickedRoom==null)return;this.toggleOpenRoomModule(this.currentIdClickedRoom)}this.isClick=!1,this.isDoubleClick=!1,this.isDragging=!1,clearTimeout(this.clickTimer)},250)}}onMouseMove(t){if(t.preventDefault(),this.isDragging&&this.currentIdClickedRoom!==void 0){let i=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(!i)return;let r=t instanceof MouseEvent?this.calculateGridArea(t.clientX,t.clientY):this.calculateGridArea(t.changedTouches[0].clientX,t.changedTouches[0].clientY);this.renderer.setStyle(i,"z-index","4"),r&&(this.renderer.setStyle(i,"grid-area",r),this.isAreaOccupied(r,this.currentIdClickedRoom)?this.renderer.setStyle(i,"background-color","#F18DC4"):this.renderer.setStyle(i,"background-color","#A3B18A"))}}moveRoom(t){if(this.currentIdClickedRoom===void 0||!this.isDragging)return;let i=this.elementRef.nativeElement.querySelector(`[data-index="${this.currentIdClickedRoom}"]`),[r,o,s,a]=this.planHouse[this.currentIdClickedRoom].gridArea.split("/").map(Number);switch(t.key){case"ArrowUp":r-=1,s-=1;break;case"ArrowDown":r+=1,s+=1;break;case"ArrowRight":o+=1,a+=1;break;case"ArrowLeft":o-=1,a-=1;break}if(r<1||o<1||s>11||a>11)return;let l=`${r} / ${o} / ${s} / ${a}`;this.isAreaOccupied(l,this.currentIdClickedRoom)||(this.renderer.setStyle(i,"grid-area",l),this.planHouse[this.currentIdClickedRoom].gridArea=l)}onContextMenu(t){t.preventDefault()}onScroll=(0,b5.throttle)(()=>{this.currentIdClickedRoom!==void 0&&this.calculateRoomSpanSettings()},100);escapeDraggingMode(){console.log("keyup",this.currentIdClickedRoom),this.isDragging=!1,this.currentIdClickedRoom=void 0;let t=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');console.log(t),t&&(this.renderer.removeStyle(t,"background-color"),this.renderer.removeStyle(t,"cursor"))}clickRoom(t,i){if(this.currentViewRoom!==void 0)return;this.currentIdClickedRoom=i;let r=t.target;this.previousGridArea=window.getComputedStyle(r).getPropertyValue("grid-area"),this.isClick&&!this.isDragging?(this.isDoubleClick=!0,this.isClick=!1,this.openViewRoom(this.currentIdClickedRoom)):this.isClick=!0,setTimeout(()=>{this.isDoubleClick||!this.isClick||(this.calculateRoomSpanSettings(),this.renderer.setStyle(r,"cursor","grabbing"),this.isDragging=!0,this.renderer.setStyle(r,"background-color","#A3B18A"),this.currentIdClickedRoom=i,this.isClick=!1)},350)}closeGuide(){this.accountCookieService.setGuideRule(),this.isGuideVisible=!1,this.guideTemplate==this.roomsGuideTemplate1&&(this.guideTemplate=this.roomsGuideTemplate2,this.showGuide())}turnoffGuides(t){t?(this.accountCookieService.setGuideRule(),this.sceneOpenToggle===!0&&this.currentViewRoom!==void 0&&(this.guideTemplate=this.roomGuideTemplate)):this.accountCookieService.deleteGuideRule(),this.checkGuideInclude()}updateRoomObjects(t){this.currentViewRoom!==void 0&&(this.planHouse[this.currentViewRoom].objects=t,this.emitPlanHouse(),this.saveHouse())}openScene(){this.isGuideIncluded&&(this.guideTemplate=this.roomGuideTemplate,this.showGuide());let t=this.location.path()+"/"+this.currentViewRoom;this.location.replaceState(t),this.sceneOpenToggle=!0}closeScene(){let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t),this.sceneComponent.saveRoom(),this.sceneOpenToggle=!1}closeViewRoom(){let t=this.roomSpan.querySelector(`[data-index="${this.currentViewRoom}"]`);!t||!this.oldSizeViewRoom||(this.currentViewRoom=void 0,this.currentIdClickedRoom=void 0,this.renderer.setStyle(t,"width",this.oldSizeViewRoom.width+"px"),this.renderer.setStyle(t,"height",this.oldSizeViewRoom.height+"px"),this.renderer.removeStyle(t,"border"),this.renderer.removeClass(t,"roomView"),this.renderer.setStyle(this.roomSpan,"display","grid"),setTimeout(()=>{this.renderer.removeStyle(t,"width"),this.renderer.removeStyle(t,"height")},750))}updateRoom(){if(!(this.currentIdClickedRoom===void 0||!this.roomForm.value.name)){if(this.roomForm.value.name===this.planHouse[this.currentIdClickedRoom].name){this.toggleOpenRoomModule();return}this.planHouse[this.currentIdClickedRoom].name=this.roomForm.value.name,this.roomForm.patchValue({width:null,height:null,length:null,name:""}),this.emitPlanHouse(),this.toggleOpenRoomModule(),this.saveHouse()}}addRoom(){let{width:t,length:i,height:r,name:o}=this.roomForm.value;this.toggleOpenRoomModule();let s={name:o,roomProportions:{width:+t,height:+r,length:+i},objects:[],gridArea:""},a=this.findFreeSpace(s.roomProportions);a&&(s.gridArea=a,this.planHouse=[...this.planHouse,s],this.emitPlanHouse(),this.saveHouse())}deleteRoom(){this.currentIdClickedRoom!==void 0&&(this.planHouse.splice(this.currentIdClickedRoom,1),this.currentIdClickedRoom=void 0,this.toggleOpenRoomModule(),this.emitPlanHouse(),this.saveHouse(),this.toggleControls(!0))}toggleControls(t){t?(this.roomForm.get("width")?.enable(),this.roomForm.get("height")?.enable(),this.roomForm.get("length")?.enable()):(this.roomForm.get("width")?.disable(),this.roomForm.get("height")?.disable(),this.roomForm.get("length")?.disable())}toggleOpenRoomModule(t){if(this.toggleModuleButton){if(t!==void 0){let{width:i,height:r,length:o}=this.planHouse[t].roomProportions;this.roomForm.patchValue({width:i,height:r,length:o,name:this.planHouse[t].name}),this.toggleControls(this.currentIdClickedRoom===void 0),this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg");return}this.formElement.classList.contains("openAddModule")?(this.formElement.classList.remove("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","0deg"),this.currentIdClickedRoom=void 0,this.roomForm.patchValue({width:null,height:null,length:null,name:""})):(this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg"))}}openViewRoom(t){this.formElement.classList.remove("openAddModule"),this.currentViewRoom=t,this.lastPlanHouse=this.planHouse[t];let i=this.roomSpan.querySelector(`[data-index="${t}"]`),{width:r,height:o}=i.getBoundingClientRect(),{width:s,height:a}=this.roomSpan.getBoundingClientRect();this.oldSizeViewRoom={height:o,width:r},this.renderer.setStyle(i,"width",r+"px"),this.renderer.setStyle(i,"height",o+"px"),setTimeout(()=>{let l=r>o?s/2/r:a/2/o;this.renderer.setStyle(i,"width",r*l+"px"),this.renderer.setStyle(i,"height",o*l+"px"),this.renderer.setStyle(i,"border","white 3px dashed"),this.renderer.addClass(i,"roomView"),this.renderer.setStyle(this.roomSpan,"display","flex")},0)}roomForm=new ar({width:new ni(null,[an.required,this.numberValidator()]),height:new ni(null,[an.required,this.numberValidator()]),length:new ni(null,[an.required,this.numberValidator()]),name:new ni("",[an.required])});static \u0275fac=function(i){return new(i||n)(ce(Yr),ce($t),ce(Zh),ce(Bo),ce($i),ce(ti),ce(ur))};static \u0275cmp=Tt({type:n,selectors:[["app-plan-house"]],viewQuery:function(i,r){if(i&1&&(Fi(Dhe,5),Fi(Ihe,7),Fi(Ahe,7),Fi(Rhe,7)),i&2){let o;mi(o=gi())&&(r.sceneComponent=o.first),mi(o=gi())&&(r.roomsGuideTemplate1=o.first),mi(o=gi())&&(r.roomsGuideTemplate2=o.first),mi(o=gi())&&(r.roomGuideTemplate=o.first)}},hostBindings:function(i,r){i&1&&Me("mouseleave",function(s){return r.onMouseLeave(s)},!1,Gi)("touchend",function(s){return r.onMouseUp(s)},!1,Gi)("keyup.Enter",function(s){return r.onMouseUp(s)},!1,Gi)("mouseup",function(s){return r.onMouseUp(s)},!1,Gi)("touchmove",function(s){return r.onMouseMove(s)},!1,Gi)("mousemove",function(s){return r.onMouseMove(s)},!1,Gi)("keydown.ArrowUp",function(s){return r.moveRoom(s)},!1,Gi)("keydown.ArrowDown",function(s){return r.moveRoom(s)},!1,Gi)("keydown.ArrowRight",function(s){return r.moveRoom(s)},!1,Gi)("keydown.ArrowLeft",function(s){return r.moveRoom(s)},!1,Gi)("contextmenu",function(s){return r.onContextMenu(s)},!1,Gi)("scroll",function(){return r.onScroll()},!1,po)("keydown.Escape",function(){return r.escapeDraggingMode()},!1,Gi)},inputs:{planHouse:"planHouse"},outputs:{initialized:"initialized",planHouseEmitter:"planHouseEmitter",callSaveEmitter:"callSaveEmitter"},decls:42,vars:19,consts:[["scene",""],["roomsGuideTemplate1",""],["roomsGuideTemplate2",""],["roomGuideTemplate",""],[1,"planHouseModule"],[1,"addModuleSpan"],["type","button","tabindex","0",1,"addModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","",2,"transition","all 0.5s","pointer-events","none"],[1,"addModuleFormContent",3,"ngSubmit","formGroup"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","width",1,"inputLabel"],["placeholder","5m","formControlName","width","id","width","type","text",1,"addModuleInput"],["for","length",1,"inputLabel"],["placeholder","3m","formControlName","length","id","length","type","text",1,"addModuleInput"],["for","height",1,"inputLabel"],["placeholder","1.7m","formControlName","height","id","height","type","text",1,"addModuleInput"],["for","name",1,"inputLabel"],["placeholder","Bedroom","formControlName","name","id","name","type","text",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],["class","deleteItemAddModuleBtn",3,"click",4,"ngIf"],[1,"workArea"],[1,"guideSwitcher",3,"click","title"],[3,"saveObjectsEmitter","roomData"],[1,"roomSpan"],["class","room",3,"grid-area","display","touchstart","keydown.enter","mousedown",4,"ngFor","ngForOf"],["class","furnitureCategoriesButtonsSpan",4,"ngIf"],["class","guideOverlay",4,"ngIf"],[1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt",""],[1,"room",3,"touchstart","keydown.enter","mousedown"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton",3,"href",4,"ngFor","ngForOf"],[1,"furnitureCategoryButton",3,"href"],[1,"guideOverlay"],[1,"guideSpan"],[1,"guideWindow",3,"ngTemplateOutlet"],["src","assets/images/addIcon.svg","alt","Close",1,"closeIcon",3,"click"],[1,"guideContainer"],[1,"guideSection"],[1,"guideText"],[1,"animationContainer",2,"display","flex","justify-content","center"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","pressMouse"],[1,"dividerWithText"],[1,"dividerLine"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","pressMousetwice"],[1,"animationContainer"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","xMouse"],[1,"dividerText"],[1,"keyboardHint"],["src","assets/images/enter.svg","alt","Enter",1,"enterKey"],[1,"arrowsWrapper"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","top",2,"rotate","90deg"],[1,"middleArrows"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","left"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","bottom",2,"rotate","270deg"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","right",2,"rotate","180deg"],["src","assets/images/qButton.svg","alt","q",1,"arrowKey","left",2,"width","50px"],["src","assets/images/eButton.svg","alt","e",1,"arrowKey","right",2,"width","50px"]],template:function(i,r){if(i&1){let o=Rt();P(0,"span",4)(1,"span",5)(2,"button",6),Me("click",function(){return He(o),ze(r.currentViewRoom===void 0?r.toggleOpenRoomModule():r.sceneOpenToggle===!0?r.closeScene():r.closeViewRoom())}),me(3,"img",7),O(),P(4,"form",8),Me("ngSubmit",function(){return He(o),ze(r.currentIdClickedRoom===void 0?r.addRoom():r.updateRoom())}),P(5,"h2",9),ne(6,"Room parameters"),O(),P(7,"span",10)(8,"label",11),ne(9,"Width"),O(),me(10,"input",12),O(),P(11,"span",10)(12,"label",13),ne(13,"Length"),O(),me(14,"input",14),O(),P(15,"span",10)(16,"label",15),ne(17,"Height"),O(),me(18,"input",16),O(),P(19,"span",10)(20,"label",17),ne(21,"Name"),O(),me(22,"input",18),O(),P(23,"span",19)(24,"button",20),ne(25,"Continue"),O(),Oe(26,Phe,2,0,"button",21),O()()(),P(27,"span",22)(28,"button",23),Me("click",function(){return He(o),ze(r.turnoffGuides(!!r.isGuideIncluded))}),ne(29),O(),P(30,"app-scene",24,0),Me("saveObjectsEmitter",function(a){return He(o),ze(r.updateRoomObjects(a))}),O(),P(32,"span",25),Oe(33,Ohe,2,6,"button",26)(34,Fhe,2,1,"span",27),O()()(),Oe(35,Lhe,4,1,"div",28)(36,khe,13,0,"ng-template",null,1,Kr)(38,Uhe,22,0,"ng-template",null,2,Kr)(40,Bhe,16,0,"ng-template",null,3,Kr)}i&2&&(W(2),Gn("rotate",r.currentViewRoom===void 0?"0deg":"225deg"),W(2),Gn("opacity",r.currentViewRoom===void 0?1:0),q("formGroup",r.roomForm),W(20),q("disabled",!r.roomForm.valid),W(2),q("ngIf",r.currentIdClickedRoom!==void 0),W(2),q("title",r.isGuideIncluded?"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C":"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C"),W(),er(" \u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438 \u043F\u043E \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044E ",r.isGuideIncluded?"\u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B":"\u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u044B"," "),W(),Gn("opacity",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0)("z-index",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0),q("roomData",r.currentViewRoom!==void 0?r.planHouse[r.currentViewRoom]:r.lastPlanHouse),W(2),Ht("viewRoomSmallScreen",r.currentViewRoom!==void 0),W(),q("ngForOf",r.planHouse),W(),q("ngIf",!r.sceneOpenToggle&&r.currentViewRoom!==void 0),W(),q("ngIf",r.isGuideVisible&&r.isGuideIncluded))},dependencies:[Ql,li,Ns,al,Os,ol,sl,ya,_a,In,BM],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.workArea[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;grid-area:1/1/2/2}app-scene[_ngcontent-%COMP%]{grid-area:1/1/2/2}.roomSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;gap:10px;grid-template-columns:repeat(10,calc(10% - 10px));grid-template-rows:repeat(10,calc(10% - 10px));aspect-ratio:1;justify-content:space-around;z-index:0}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;cursor:pointer;z-index:3;border:none;transition:all .75s ease-in-out,background-color .4s ease-in-out;color:#dad7cd;font-size:1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.guideSwitcher[_ngcontent-%COMP%]{grid-area:1/1/2/2;height:40px;width:fit-content;padding:10px;align-self:flex-start;justify-self:center;background:none;border:none;border-bottom:1px solid transparent;cursor:pointer;color:gray;margin-top:-45px;transition:all .3s ease-in-out;position:relative}.guideSwitcher[_ngcontent-%COMP%]:hover{color:#fff!important;border-bottom-color:#fff}.guideSwitcher[_ngcontent-%COMP%]:hover:after{width:100%}.guideSwitcher[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:1px;background:#fff;transition:width .3s ease-in-out}.dividerWithText[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.dividerLine[_ngcontent-%COMP%]{flex:1;height:2px;background-color:#1f1f1f}.dividerText[_ngcontent-%COMP%]{padding:0 10px;color:#666;font-size:14px}.planHouseModule[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-template-columns:1fr}.roomView[_ngcontent-%COMP%]{margin-left:30px;align-self:start;margin-top:30px}.addModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:5;width:35px;aspect-ratio:1;margin-top:10px;justify-self:end;cursor:pointer;rotate:45deg;transition:all .4s ease-in-out}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.addModuleSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;min-width:300px;width:35%;justify-self:end;padding-right:30px;height:fit-content;margin-top:30px;margin-right:30px}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:calc(100% - 60px);padding:0 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 5px #fff;overflow:hidden;transition:all .4s ease-in-out;max-height:0;border-radius:10px;background-color:#000;z-index:4}.openAddModule[_ngcontent-%COMP%]{max-height:1000px;padding:30px 45px}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.functionShopsModuleBtns[_ngcontent-%COMP%]{display:flex;gap:10px}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{width:20%;height:50px;display:flex;align-items:center;justify-content:center;border-radius:15px;background-color:#a3b18a;border:none;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:25px}.none[_ngcontent-%COMP%]{display:none}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;height:250px;margin-top:100px;width:30%}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;color:#fff;cursor:pointer;border:none;text-decoration:none;transition:all .3s ease-in-out}.furnitureCategoryButton[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}@media (max-width: 768px){.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{width:100%}.viewRoomSmallScreen[_ngcontent-%COMP%]{flex-direction:column}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(30% - 5px)}.addModuleSpan[_ngcontent-%COMP%]{margin-right:0;padding-right:0}}.furnitureCategory[_ngcontent-%COMP%]{grid-area:1/1/2/2;background-color:#000;z-index:4;display:flex;flex-direction:column;gap:30px;height:0px;padding:0 10px;overflow:hidden;transition:all .5s ease-in-out}.furnitureCategoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.furnitureList[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.openFurniturelist[_ngcontent-%COMP%]{height:100%;padding:50px 10px 10px}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);display:flex;gap:10px;flex-direction:column;align-items:center}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}.guideContainer[_ngcontent-%COMP%]{background-color:#000;border-radius:12px;padding:1.5rem;color:#dad7cd;display:flex;flex-direction:column;gap:1.5rem;max-width:100%;box-sizing:border-box}.guideSection[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;flex:1}.guideText[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,1.3rem);margin:0;color:#a3b18a;text-align:center;line-height:1.4}.animationContainer[_ngcontent-%COMP%]{position:relative;width:140px;aspect-ratio:1;margin:.5rem 0}.mouse[_ngcontent-%COMP%]{position:absolute;width:40px}.xMouse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_crossAnimation 3s infinite ease-in-out}.pressMouse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pressAnimation 1.5s infinite ease-in-out}.pressMousetwice[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pressAnimationTwice 1.5s infinite ease-in-out}@keyframes _ngcontent-%COMP%_pressAnimation{0%,40%{transform:translateY(0)}20%{transform:translateY(10px)}}@keyframes _ngcontent-%COMP%_pressAnimationTwice{0%,30%,60%{transform:translateY(0)}15%,45%{transform:translateY(10px)}}.keyboardHint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;width:100%;max-width:300px;justify-content:center}.enterKey[_ngcontent-%COMP%]{width:100px;aspect-ratio:2}.middleArrows[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.arrowsWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.arrowKey[_ngcontent-%COMP%]{width:40px;aspect-ratio:1;opacity:.5;transition:opacity .3s}.arrowKey.top[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 0s}.arrowKey.right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite .5s}.arrowKey.bottom[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 1s}.arrowKey.left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 1.5s}@keyframes _ngcontent-%COMP%_crossAnimation{0%,to{transform:translateY(50%)}25%{transform:translate(100px,50%)}50%{transform:translate(50px)}75%{transform:translate(50px,100%)}}@keyframes _ngcontent-%COMP%_pulseArrow{0%,to{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}.guideOverlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background-color:#000000b3;z-index:10}.guideOverlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.guideSpan[_ngcontent-%COMP%]{position:relative;background-color:#000;border-radius:12px;padding:2rem;max-width:90%;width:50%;max-height:90vh;overflow-y:auto;box-shadow:0 0 20px #a3b18a4d}.closeIcon[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;width:1.5rem;height:1.5rem;cursor:pointer;rotate:45deg;transition:transform .2s}.closeIcon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@media (max-width: 768px){.guideContainer[_ngcontent-%COMP%]{padding:1rem;gap:1rem}.animationContainer[_ngcontent-%COMP%]{max-width:150px}.keyboardHint[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.arrowsWrapper[_ngcontent-%COMP%]{width:60%}.guideSpan[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width: 480px){.guideText[_ngcontent-%COMP%]{font-size:.9rem}.animationContainer[_ngcontent-%COMP%]{max-width:120px}}']})}return n})();function Hp(){return/windows nt|macintosh|x11|linux/.test(navigator.userAgent.toLowerCase())}var VM=(()=>{class n{httpModule;constructor(t){this.httpModule=t}baseServiceUrl=Si+"finder?q=";GETfindFurnitures(t){return _n(this.httpModule.get(this.baseServiceUrl+t))}static \u0275fac=function(i){return new(i||n)(Ge(sr))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pu=(()=>{class n{httpModule;baseServiceUrl=Si+"furniture/images/";constructor(t){this.httpModule=t}GETaccountAvatar(t){return`${Si}avatar?jwt=${t}`}POSTuploadUserAvatar(t,i){let r=new FormData;r.append("image",t);let o=new pn().set("jwt",i);return _n(this.httpModule.post(`${Si}avatar/upload`,r,{params:o}))}POSTuploadProjectImages(t,i,r,o){let s=new FormData;console.log(i.images),i.images.forEach(l=>s.append("images",l));let a=new pn().set("furnitureCardId",o).set("color",t).set("idMainImage",i.idMainImage).set("jwt",r);return _n(this.httpModule.post(this.baseServiceUrl+"upload/images",s,{params:a}))}DELETEprojectColor(t,i,r){let o=new pn().set("jwt",t).set("furnitureCardId",i).set("color",r);return _n(this.httpModule.delete(this.baseServiceUrl+"delete/color",{params:o}))}DELETEproject(t,i){let r=new pn().set("jwt",t).set("furnitureCardId",i);return _n(this.httpModule.delete(this.baseServiceUrl+"delete/project",{params:r}))}GETallProjectImages(t,i){let r=new pn().set("furnitureCardId",t).set("color",i);return _n(this.httpModule.get(this.baseServiceUrl+"all",{params:r}))}GETmainImage(t,i){return`${this.baseServiceUrl}main?furnitureCardId=${t}&color=${i}`}static \u0275fac=function(i){return new(i||n)(Ge(sr))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Hhe=(n,e)=>({variantCardDesktop:n,variantCardMobile:e});function zhe(n,e){n&1&&(P(0,"h3"),ne(1,"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E :("),O())}function jhe(n,e){if(n&1&&(P(0,"span",10)(1,"div")(2,"h3",11),ne(3),O(),P(4,"a",12),ne(5),O()(),me(6,"img",13),O()),n&2){let t=e.$implicit,i=ve();q("ngClass",P_(5,Hhe,i.checkDesktop(),!i.checkDesktop())),W(3),ei(t.name),W(),q("href",i.getUrl(t.id,t.category),kr),W(),er("",t.cost," \u0440\u0443\u0431"),W(),q("src",i.getImage(t.id,t.colorRequest),kr)}}var M5=(()=>{class n{finderService;elementRef;renderer;imageService;constructor(t,i,r,o){this.finderService=t,this.elementRef=i,this.renderer=r,this.imageService=o}variantsSpan;inputElement;foundFurniture;debounceTimer=null;ngAfterViewInit(){this.variantsSpan=this.elementRef.nativeElement.querySelector(".variantsSpan"),this.inputElement=this.elementRef.nativeElement.querySelector(".finderInput")}findFurnitures(t){return _t(this,null,function*(){let i=yield this.finderService.GETfindFurnitures(t);this.openFoundResultsList(),i.length>0?(this.closeFoundResultsList(),setTimeout(()=>{this.foundFurniture=i,this.openFoundResultsList()},400)):this.foundFurniture!==void 0?this.foundFurniture.length=0:this.foundFurniture=[]})}openFoundResultsList(){this.variantsSpan!==void 0&&this.renderer.addClass(this.variantsSpan,"variantsSpanOpen")}closeFoundResultsList(){this.variantsSpan!==void 0&&this.renderer.removeClass(this.variantsSpan,"variantsSpanOpen")}checkDesktop=Hp;clearInput(){this.inputElement.value="",this.closeFoundResultsList()}inputProcess(){let t=this.inputElement.value;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{if(t.length===0){this.closeFoundResultsList();return}this.findFurnitures(t)},300)}getImage(t,i){return this.imageService.GETmainImage(t,i)}getUrl(t,i){return`shop/${i??"all"}/${t}`}static \u0275fac=function(i){return new(i||n)(ce(VM),ce($t),ce(Yr),ce(Pu))};static \u0275cmp=Tt({type:n,selectors:[["app-finder"]],decls:10,vars:2,consts:[[1,"finder"],[1,"finderSpan"],["routerLink","/shop","title","\u041F\u043E\u0438\u0441\u043A",1,"finderBtn","btn"],["loading","lazy","src","/assets/images/searchIcon.svg","alt","search"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438","type","text",1,"finderInput",3,"input"],["title","\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043F\u043E\u043B\u0435",1,"closeBtn","btn",3,"click"],["src","/assets/images/cancelIcon.svg","alt",""],[1,"variantsSpan"],[4,"ngIf"],["class","variantCard",3,"ngClass",4,"ngFor","ngForOf"],[1,"variantCard",3,"ngClass"],[1,"cardName"],[1,"cardCost",3,"href"],["alt","",1,"cardImage",3,"src"]],template:function(i,r){i&1&&(P(0,"span",0)(1,"span",1)(2,"button",2),me(3,"img",3),O(),P(4,"input",4),Me("input",function(){return r.inputProcess()}),O(),P(5,"button",5),Me("click",function(){return r.clearInput()}),me(6,"img",6),O()(),P(7,"span",7),Oe(8,zhe,2,0,"h3",8)(9,jhe,7,8,"span",9),O()()),i&2&&(W(8),q("ngIf",r.foundFurniture!==void 0&&r.foundFurniture.length===0),W(),q("ngForOf",r.foundFurniture))},dependencies:[os,li,In,Ps],styles:['@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.finder[_ngcontent-%COMP%]{width:100%;min-height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto 1fr}.finderSpan[_ngcontent-%COMP%]{width:100%;height:48px;display:flex;gap:10px;border-radius:15px;background-color:#fff;padding:0 10px;z-index:3;grid-area:1/1/2/2;align-items:center;justify-content:space-around}.btn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{aspect-ratio:1;background:none;border:none;cursor:pointer}.finderBtn[_ngcontent-%COMP%]{height:90%}.closeBtn[_ngcontent-%COMP%]{height:50%;align-self:center;filter:opacity(.75)}.finderInput[_ngcontent-%COMP%]{width:75%;background:none;border:none;outline:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.variantsSpan[_ngcontent-%COMP%]{transition:all .5s ease-in-out;overflow:hidden;max-height:0;grid-area:1/1/2/2;background-color:#000;border-radius:15px;box-shadow:0 0 5px #fff;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:10px;box-sizing:border-box;width:calc(100% + 20px);z-index:2}.variantsSpanOpen[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.variantsSpanOpen[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;padding:60px 10px 10px;overflow-y:scroll;max-height:400px}.variantCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;height:80%;transition:all .5s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}.cardCost[_ngcontent-%COMP%]{border-radius:5px;color:gray;transition:all .5s ease-in-out;cursor:pointer;text-decoration:none}.variantCardDesktop[_ngcontent-%COMP%]:hover{height:90%}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardCost[_ngcontent-%COMP%]{padding:15px 45px;color:#000;background-color:#fff}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardName[_ngcontent-%COMP%]{margin-bottom:25px}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardImage[_ngcontent-%COMP%]{height:65%}.variantCardMobile[_ngcontent-%COMP%]{height:90%}.variantCardMobile[_ngcontent-%COMP%]   .cardCost[_ngcontent-%COMP%]{margin-top:10px;display:block;padding:0 45px;height:50px;line-height:50px;color:#000;background-color:#fff;font-size:18px}.variantCardMobile[_ngcontent-%COMP%]   .cardName[_ngcontent-%COMP%]{font-size:23px;margin-bottom:50px}.variantCardMobile[_ngcontent-%COMP%]   .cardImage[_ngcontent-%COMP%]{height:65%}.cardImage[_ngcontent-%COMP%]{height:60%;width:fit-content;transition:all .5s ease-in-out}.cardName[_ngcontent-%COMP%]{color:#fff;transition:all .5s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin:5px 0}.variantsSpan[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff}']})}return n})();function Ghe(n,e){if(n&1){let t=Rt();P(0,"button",5),Me("click",function(){He(t);let r=ve();return ze(r.toggleMenu())}),me(1,"img",6),O()}if(n&2){let t=ve();Ht("active",t.menuOpen)}}function Whe(n,e){n&1&&(P(0,"div",7),me(1,"app-finder"),P(2,"span",8)(3,"a",9),me(4,"img",10),O(),P(5,"a",11),km(),P(6,"svg",12),me(7,"path",13),O()(),ST(),P(8,"a",14),me(9,"img",15),O()()())}function $he(n,e){n&1&&(P(0,"div",16),me(1,"app-finder"),P(2,"a",17),me(3,"img",10),P(4,"span"),ne(5,"\u0410\u043A\u043A\u0430\u0443\u043D\u0442"),O()(),P(6,"a",18),km(),P(7,"svg",12),me(8,"path",13),O(),ST(),P(9,"span"),ne(10,"\u041F\u043B\u0430\u043D"),O()(),P(11,"a",19),me(12,"img",15),P(13,"span"),ne(14,"\u041C\u0435\u0431\u0435\u043B\u044C"),O()()())}var Ys=(()=>{class n{menuOpen=!1;isMobileView=!1;ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=750,this.isMobileView||(this.menuOpen=!1)}toggleMenu(){this.menuOpen=!this.menuOpen}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Tt({type:n,selectors:[["app-navigation-panel"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,po)},decls:6,vars:3,consts:[[1,"navigationSpan"],["routerLink","/",1,"homeBtn","navigationBtn"],["class","hamburger-menu",3,"active","click",4,"ngIf"],["class","desktop-content",4,"ngIf"],["class","mobile-menu",4,"ngIf"],[1,"hamburger-menu",3,"click"],["ng","","loading","lazy","src","/assets/images/hamburgerMenuIcon.svg","alt","menu"],[1,"desktop-content"],[1,"mainBtns"],["routerLink","/account",1,"accountBtn","navigationBtn"],["loading","lazy","src","/assets/images/accountIcon.svg","alt","account"],["routerLink","/plan",1,"createBtn","navigationBtn"],["viewBox","0 0 32 32"],["d","M28,14H18V4c0-1.104-0.896-2-2-2s-2,0.896-2,2v10H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h10v10c0,1.104,0.896,2,2,2 s2-0.896,2-2V18h10c1.104,0,2-0.896,2-2S29.104,14,28,14z","fill","#DAD7CD"],["routerLink","/create/new",1,"navigationBtn"],["loading","lazy","src","/assets/images/furnitureIcon.svg","alt","furniture"],[1,"mobile-menu"],["routerLink","/account",1,"mobile-menu-item"],["routerLink","/plan",1,"mobile-menu-item"],["routerLink","/create/new",1,"mobile-menu-item"]],template:function(i,r){i&1&&(P(0,"span",0)(1,"a",1),ne(2,"HQ"),O(),Oe(3,Ghe,2,2,"button",2)(4,Whe,10,0,"div",3)(5,$he,15,0,"div",4),O()),i&2&&(W(3),q("ngIf",r.isMobileView),W(),q("ngIf",!r.isMobileView),W(),q("ngIf",r.isMobileView&&r.menuOpen))},dependencies:[Ps,M5,In],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.desktop-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:80%;height:100%}.navigationBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{height:100%}app-finder[_ngcontent-%COMP%]{height:80%;width:60%}.homeBtn[_ngcontent-%COMP%]{color:#dad7cd;font-family:Gloock;font-size:27.5px;text-decoration:none;align-content:center}.navigationSpan[_ngcontent-%COMP%]{display:flex;background-color:#000;border-radius:10px;gap:5px;justify-content:space-around;width:calc(90vw - 30px);min-width:550px;margin:0 auto;height:60px;align-items:center;border:1px solid rgba(163,177,138,.3);position:relative}@media (max-width: 750px){.navigationSpan[_ngcontent-%COMP%]{justify-content:space-between;padding:0 15px;width:calc(90vw - 30px);min-width:auto}}.navigationBtn[_ngcontent-%COMP%]{height:80%;background:none;border:none;cursor:pointer}.mainBtns[_ngcontent-%COMP%]{height:75%;display:flex;gap:15px;align-items:center}.hamburger-menu[_ngcontent-%COMP%]{display:none;background:none;border:none;cursor:pointer;padding:0;height:30px;width:30px;transition:all .5s ease-in-out}.hamburger-menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.hamburger-menu.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(64%) sepia(11%) saturate(1233%) hue-rotate(71deg) brightness(92%) contrast(86%)}@media (max-width: 750px){.hamburger-menu[_ngcontent-%COMP%]{display:block}}.mobile-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:100%;margin-top:10px;left:0;right:0;background-color:#000;border-radius:10px;padding:15px;flex-direction:column;gap:15px;z-index:100;border:1px solid rgba(163,177,138,.3)}.mobile-menu[_ngcontent-%COMP%]   app-finder[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-bottom:10px;height:40px}.mobile-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#dad7cd;text-decoration:none;padding:8px}.mobile-menu-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .mobile-menu-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.mobile-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 750px){.desktop-content[_ngcontent-%COMP%]{display:none}.mobile-menu[_ngcontent-%COMP%]{display:flex}}']})}return n})();var qhe={images:["/assets/images/sofaSliderPhotos/1.png","/assets/images/sofaSliderPhotos/2.png","/assets/images/sofaSliderPhotos/3.png","/assets/images/sofaSliderPhotos/4.png"],idMainImage:0},C5={name:"Onte Bucle White",colors:[{color:"#FFC2CC",imagesData:qhe}],description:`\u041C\u0435\u0445\u0430\u043D\u0438\u0437\u043C: \u043F\u0430\u043D\u0442\u043E\u0433\u0440\u0430\u0444
\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442 \u043F\u043E\u043B\u0430: 12 \u0441\u043C
\u042F\u0449\u0438\u043A \u0434\u043B\u044F \u0431\u0435\u043B\u044C\u044F: \u0434\u0430
\u041C\u0430\u043A\u0441. \u043D\u0430\u0433\u0440\u0443\u0437\u043A\u0430: 100 \u043A\u0433`,shops:[{cost:125990,url:"https://www.divan.ru/blagoveshchensk/product/divan-uglovoj-onte-bucle-white"},{cost:84990,url:"https://avtorm.ru/catalog/product-divan-uglovoy-onte-bucle-white"}],additionalData:{category:"sofa"},proportions:{width:1,height:1,length:1}},S5=[{name:"\u041F\u0440\u0438\u0445\u043E\u0436\u0430\u044F",objects:[],gridArea:"1 / 1 / 3 / 4",roomProportions:{width:3,length:2,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:"3 / 1 / 4 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:" 4 / 1 / 5 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0413\u043E\u0441\u0442\u0438\u043D\u043D\u0430\u044F",objects:[],gridArea:"5 / 1 / 8 / 5",roomProportions:{width:4,length:3,height:3}},{name:"\u0421\u043F\u0430\u043B\u044C\u043D\u044F",objects:[],gridArea:" 3 / 2 / 5 / 4",roomProportions:{width:2,length:2,height:3}}];var E5=n=>({activeChapterBtn:n}),T5=n=>({opacityDisable:n});function Xhe(n,e){n&1&&(P(0,"span",24)(1,"div",25)(2,"span",26),me(3,"div")(4,"div")(5,"div")(6,"div"),O()(),P(7,"span",27)(8,"span",28),me(9,"div",29)(10,"div",30)(11,"div",31)(12,"div",32),O(),P(13,"h1",33),ne(14,"HOUSEQUALITY"),O(),P(15,"span",34)(16,"button",35),ne(17,"Shop"),O(),P(18,"button",36),ne(19,"Furniture"),O(),P(20,"button",37),ne(21,"Project"),O(),P(22,"button",38),ne(23,"Profile"),O()()()())}function Yhe(n,e){n&1&&(P(0,"a",39),ne(1,"\u041F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u043A\u0430"),O())}var D5=(()=>{class n{elementRef;router;constructor(t,i){this.elementRef=t,this.router=i}furnitureTemplate="create";furnitureExampleData=C5;planHouseExampleData=S5;isMobileView=!1;ngAfterViewInit(){this.elementRef.nativeElement.querySelectorAll("app-create-furniture,app-plan-house").forEach(t=>{t.querySelectorAll("*").forEach(i=>{i.setAttribute("tabindex","-1"),i.style.pointerEvents="none"})})}ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=600}focusFinder(){let t=this.elementRef.nativeElement.querySelector(".finderInput");t&&t.focus()}openViewFurniture(){this.furnitureTemplate="view"}openCreateFurniture(){this.furnitureTemplate="create"}navigateToPage(t){this.router.navigateByUrl(t)}static \u0275fac=function(i){return new(i||n)(ce($t),ce(Vr))};static \u0275cmp=Tt({type:n,selectors:[["app-main-page"]],hostBindings:function(i,r){i&1&&Me("resize",function(s){return r.checkViewport(s)},!1,po)},decls:60,vars:17,consts:[["class","startScreenSpan",4,"ngIf"],[1,"mainInformation"],[1,"projectPreviewSpan"],[1,"someSpan"],[1,"chapterTitle",2,"margin-bottom","0"],[1,"descriptionText"],[1,"exampleFunctions"],[1,"quarter-circle","figureFunction"],[1,"exampleFunctionTitle"],[1,"exampleFunctionDescription"],[1,"square","figureFunction",2,"border-radius","20px"],[1,"chapterTitle"],[1,"chapterChangeBtnsSpan"],[1,"changeChapterBtn",3,"click","ngClass"],[1,"furnitureModule"],[1,"furnitureModuleVariant",3,"click","furnitureData","ngClass"],[3,"click","planHouse"],[1,"footerColumnsSpan"],[1,"footerColumn"],[1,"footerMenuBtn",2,"color","#DAD7CD",3,"click"],["routerLink","/account",1,"footerMenuBtn"],["routerLink","/create/new",1,"footerMenuBtn",2,"color","#DAD7CD"],["routerLink","/plan","class","footerMenuBtn",4,"ngIf"],[1,"projectFooterTitle"],[1,"startScreenSpan"],[1,"circleDecoration"],[1,"circleDecorationSpan"],[1,"startInformationSpan"],[1,"decorationFigures"],[1,"quarter-circle"],[1,"square"],[1,"parallelogram"],[1,"circle"],[1,"projectTitle"],[1,"navigationStartMenu"],["routerLink","/shop",1,"startNavigationBtn"],["routerLink","/create/new",1,"startNavigationBtn"],["routerLink","/plan",1,"startNavigationBtn"],["routerLink","/account",1,"startNavigationBtn"],["routerLink","/plan",1,"footerMenuBtn"]],template:function(i,r){i&1&&(Oe(0,Xhe,24,0,"span",0),P(1,"span",1),me(2,"app-navigation-panel"),P(3,"span",2)(4,"span",3)(5,"h2",4),ne(6,"\u0412\u0430\u0448 \u0438\u0434\u0435\u0430\u043B\u044C\u043D\u044B\u0439 \u0434\u043E\u043C"),O(),P(7,"h3",5),ne(8,"HouseQuality - \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u0430 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0438\u0434\u0435\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u0434\u043E\u043C\u0430. \u0417\u0430\u0439\u0434\u0438\u0442\u0435 \u0432 \u043D\u0430\u0448 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0446\u0438\u0444\u0440\u043E\u0432\u043E\u0433\u043E \u0434\u0438\u0437\u0430\u0439\u043D\u0430 \u0438 \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0441\u0432\u043E\u0435 \u043F\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435!"),O(),P(9,"span",6)(10,"div",7)(11,"h2",8),ne(12,"\u0421\u0442\u0438\u043B\u044C"),O(),P(13,"h3",9),ne(14,"\u0412\u0430\u0448\u0430 \u0438\u0434\u0435\u044F"),O()(),P(15,"div",10)(16,"h2",8),ne(17,"\u0414\u043E\u043C"),O(),P(18,"h3",9),ne(19,"\u0412\u0430\u0448\u0430 \u0437\u043E\u043D\u0430"),O()(),P(20,"div",7)(21,"h2",8),ne(22,"\u041F\u043B\u0430\u043D"),O(),P(23,"h3",9),ne(24,"\u041D\u043E\u0432\u044B\u0439 \u0432\u0438\u0434"),O()(),P(25,"div",10)(26,"h2",8),ne(27,"\u041C\u0435\u0431\u0435\u043B\u044C"),O(),P(28,"h3",9),ne(29,"\u0411\u043E\u043B\u044C\u0448\u043E\u0439 \u0432\u044B\u0431\u043E\u0440"),O()()()(),P(30,"span",3)(31,"h2",11),ne(32,"\u0421\u043E\u0437\u0434\u0430\u0435\u043C \u0438 \u0432\u043E\u043F\u043B\u043E\u0449\u0430\u0435\u043C \u0432\u0430\u0448\u0438 \u043C\u0435\u0447\u0442\u044B"),O(),P(33,"span",12)(34,"button",13),Me("click",function(){return r.openCreateFurniture()}),ne(35,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),O(),P(36,"button",13),Me("click",function(){return r.openViewFurniture()}),ne(37,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),O()()(),P(38,"span",14)(39,"app-create-furniture",15),Me("click",function(){return r.navigateToPage("/create/new")}),O(),P(40,"app-view-furniture",15),Me("click",function(){return r.navigateToPage("/shop")}),O()(),P(41,"span",3)(42,"h2",11),ne(43,"\u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u0441\u0432\u043E\u0439 \u0434\u043E\u043C"),O(),P(44,"h3",5),ne(45,"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B \u0438 \u043F\u0435\u0440\u0435\u0434\u0432\u0438\u043D\u044C\u0442\u0435 \u0438\u0445"),O()(),P(46,"app-plan-house",16),Me("click",function(){return r.navigateToPage("/plan")}),O()()(),P(47,"footer")(48,"span",17)(49,"span",18)(50,"a",19),Me("click",function(){return r.focusFinder()}),ne(51,"\u041D\u0430\u0439\u0442\u0438 \u043C\u0435\u0431\u0435\u043B\u044C"),O(),P(52,"a",20),ne(53,"\u0410\u043A\u043A\u0430\u0443\u043D\u0442"),O()(),P(54,"span",18)(55,"a",21),ne(56,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),O(),Oe(57,Yhe,2,0,"a",22),O()(),P(58,"h2",23),ne(59,"HouseQuality 2025"),O()()),i&2&&(q("ngIf",!r.isMobileView),W(34),q("ngClass",gr(9,E5,r.furnitureTemplate==="create")),W(2),q("ngClass",gr(11,E5,r.furnitureTemplate==="view")),W(3),q("furnitureData",r.furnitureExampleData)("ngClass",gr(13,T5,r.furnitureTemplate==="view")),W(),q("furnitureData",r.furnitureExampleData)("ngClass",gr(15,T5,r.furnitureTemplate==="create")),W(6),q("planHouse",r.planHouseExampleData),W(11),q("ngIf",!r.isMobileView))},dependencies:[Kg,Ox,Vp,os,Ys,Ps,In],styles:['@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.startScreenSpan[_ngcontent-%COMP%]{width:100vw;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;padding-top:5vh;overflow:hidden;background:#a3b18a;background:linear-gradient(0deg,#a3b18a,#dad7cd)}@media (max-width: 600px){.startScreenSpan[_ngcontent-%COMP%]{padding-top:3vh}}.circleDecoration[_ngcontent-%COMP%]{grid-area:1/1/2/2}.circleDecorationSpan[_ngcontent-%COMP%]{clip-path:inset(0 0 50% 0);margin-bottom:-50%;display:grid;aspect-ratio:1;place-items:center;content-visibility:auto}.circleDecorationSpan[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#3a5a40;border-radius:50%;grid-area:1/1/2/2;aspect-ratio:1;animation:_ngcontent-%COMP%_wave 2s infinite ease-in-out}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){opacity:1;width:50%;animation-delay:0s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){opacity:.8;width:65%;animation-delay:.3s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){opacity:.6;width:80%;animation-delay:.6s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){opacity:.4;width:95%;animation-delay:.9s}@keyframes _ngcontent-%COMP%_wave{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.decorationFigures[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:30px;height:45px;width:350px;grid-area:1/1/2/2;z-index:1;justify-content:center}@media (max-width: 600px){.decorationFigures[_ngcontent-%COMP%]{width:280px;gap:15px;height:35px}}.parallelogram[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1/2;transform:skew(-20deg);background-color:#344e41;height:100%}.quarter-circle[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:100% 10px 10px;background-color:#344e41;height:100%}.square[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1;background-color:#344e41;height:100%}.circle[_ngcontent-%COMP%]{width:39px;height:39px;position:relative;border:3px solid #344E41;border-radius:50%}.circle[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:#344e41;border-radius:50%;clip-path:inset(0 50% 0 0)}.circle[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:transparent;border-radius:50%}.startInformationSpan[_ngcontent-%COMP%]{display:flex;gap:20px;flex-direction:column;align-items:center;grid-area:1/1/2/2;z-index:1;margin-top:10px}@media (max-width: 600px){.startInformationSpan[_ngcontent-%COMP%]{gap:15px;margin-top:5px}}.projectTitle[_ngcontent-%COMP%]{font-family:Gloock;font-size:8vw;font-weight:400;color:#000}@media (max-width: 600px){.projectTitle[_ngcontent-%COMP%]{font-size:12vw}}.navigationStartMenu[_ngcontent-%COMP%]{display:flex;gap:10px}@media (max-width: 768px){.navigationStartMenu[_ngcontent-%COMP%]{display:none}}.startNavigationBtn[_ngcontent-%COMP%]{padding:5px;background:none;border:none;font-size:1.75vw;cursor:pointer;text-decoration:none;color:#000}.mainInformation[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;align-items:center;gap:50px;padding:50px;width:calc(100vw - 100px)}@media (max-width: 600px){.mainInformation[_ngcontent-%COMP%]{padding:30px 15px;width:calc(100vw - 30px);gap:30px}}.someSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;justify-content:start}@media (max-width: 600px){.someSpan[_ngcontent-%COMP%]{width:100%;align-items:center;text-align:center}}.chapterTitle[_ngcontent-%COMP%]{font-family:Calypso;font-weight:700;font:3.5vw/1 Calypso;color:#dad7cd;width:60%}@media (max-width: 1024px){.chapterTitle[_ngcontent-%COMP%]{font-size:5vw}}@media (max-width: 768px){.chapterTitle[_ngcontent-%COMP%]{font-size:6vw}}@media (max-width: 600px){.chapterTitle[_ngcontent-%COMP%]{font-size:7vw;width:90%}}.descriptionText[_ngcontent-%COMP%]{color:#a3b18a;width:50%;font-size:20px}@media (max-width: 768px){.descriptionText[_ngcontent-%COMP%]{width:65%}}@media (max-width: 600px){.descriptionText[_ngcontent-%COMP%]{width:90%;font-size:4vw}}.exampleFunctions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:50px;font-size:15px}@media (max-width: 768px){.exampleFunctions[_ngcontent-%COMP%]{width:350px}}@media (max-width: 600px){.exampleFunctions[_ngcontent-%COMP%]{height:auto;flex-wrap:wrap;gap:20px;justify-content:center}}.figureFunction[_ngcontent-%COMP%]{display:flex;height:150px;flex-direction:column;justify-content:center;gap:5px;background-color:#344e41b3}.figureFunction[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:left;margin-left:-10px}@media (max-width: 600px){.figureFunction[_ngcontent-%COMP%]{width:40%;height:120px}}.exampleFunctionTitle[_ngcontent-%COMP%]{font-family:Calypso;font-weight:700;font-size:25px;color:#dad7cd;margin:0 0 0 -10px;cursor:default}@media (max-width: 600px){.exampleFunctionTitle[_ngcontent-%COMP%]{font-size:5vw}}.exampleFunctionDescription[_ngcontent-%COMP%]{color:#a3b18a}@media (max-width: 600px){.exampleFunctionDescription[_ngcontent-%COMP%]{font-size:3.5vw}}.chapterChangeBtnsSpan[_ngcontent-%COMP%]{display:flex;gap:30px;width:450px}@media (max-width: 600px){.chapterChangeBtnsSpan[_ngcontent-%COMP%]{justify-content:center;width:100%;gap:15px}}.changeChapterBtn[_ngcontent-%COMP%]{line-height:50px;cursor:pointer;background-color:#344e41;color:#fff;border:none;border-radius:10px;width:50%;aspect-ratio:4;font-size:1.15rem;transition:all .5s ease-in-out}@media (max-width: 600px){.changeChapterBtn[_ngcontent-%COMP%]{font-size:15px;padding:10px;width:calc(50% - 20px);height:50px;line-height:normal}}.projectPreviewSpan[_ngcontent-%COMP%]{width:80%;min-width:550px}@media (max-width: 1100px){.projectPreviewSpan[_ngcontent-%COMP%]{width:100%}}@media (max-width: 600px){.projectPreviewSpan[_ngcontent-%COMP%]{min-width:auto}}.activeChapterBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#000}.furnitureModule[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center}.furnitureModuleVariant[_ngcontent-%COMP%]{display:block;grid-area:1/1/2/2;transition:all .5s ease-in-out;width:100%;z-index:1}.opacityDisable[_ngcontent-%COMP%]{opacity:0;z-index:-1}app-plan-house[_ngcontent-%COMP%]{margin-top:50px;width:calc(100vw - 100px)}@media (max-width: 600px){app-plan-house[_ngcontent-%COMP%]{width:100%}}footer[_ngcontent-%COMP%]{width:calc(100vw - 200px);background-color:#000;padding:100px;display:flex;flex-direction:column;gap:50px}@media (max-width: 600px){footer[_ngcontent-%COMP%]{width:calc(100vw - 40px);padding:50px 20px;gap:30px}}.footerColumnsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}@media (max-width: 600px){.footerColumnsSpan[_ngcontent-%COMP%]{flex-direction:column;gap:30px}}.footerColumn[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}@media (max-width: 600px){.footerColumn[_ngcontent-%COMP%]{align-items:center}}.footerColumn[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none}.footerMenuBtn[_ngcontent-%COMP%]{background:none;color:#a3b18a;font-size:18px;border:none;text-align:start;cursor:pointer}@media (max-width: 600px){.footerMenuBtn[_ngcontent-%COMP%]{font-size:4.5vw;text-align:center}}.projectFooterTitle[_ngcontent-%COMP%]{color:#a3b18a;color:1.15vw;font-weight:400;text-align:center;cursor:default}@media (max-width: 600px){.projectFooterTitle[_ngcontent-%COMP%]{font-size:4.5vw}}app-navigation-panel[_ngcontent-%COMP%]{margin-left:calc(-50vw + 50%);position:sticky;top:30px;z-index:6;width:100%}@media (max-width: 600px){app-navigation-panel[_ngcontent-%COMP%]{top:15px}}app-view-furniture[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%], app-plan-house[_ngcontent-%COMP%]{display:block;cursor:pointer;width:100%}']})}return n})();function HM(n){return n.accountType==="email"}var bl=(()=>{class n{httpModule;accountCookieService;baseServiceUrl=Si+"account";constructor(t,i){this.httpModule=t,this.accountCookieService=i}POSTcreateAccount(t){let i=new pn().set("accountType",t.accountType).set("nickname",t.nickname);return HM(t)&&(i=i.set("email",t.email).set("password",t.password)),_n(this.httpModule.post(this.baseServiceUrl,i))}DELETEaccountJwt(t){let i=new pn().set("jwt",t);return _n(this.httpModule.delete(this.baseServiceUrl+"/jwt/delete",{params:i}))}PUTupdateSecondaryAccountData(t){let i=new pn().set("nickname",t.nickname).set("jwt",t.jwt);return _n(this.httpModule.put(this.baseServiceUrl,i))}DELETEaccount(t){let i=new pn().set("jwt",t);return _n(this.httpModule.delete(this.baseServiceUrl,{params:i}))}GETaccount(t){return _t(this,null,function*(){let i=new pn().set("jwt",t);try{let{accountData:r}=yield _n(this.httpModule.get(this.baseServiceUrl,{params:i}));return r.furnitures=r.furnitures.map(o=>ft(we({},o),{previewUrl:Si+o.previewUrl})),{accountData:r}}catch(r){throw console.error("Error in GETfurnitureCard:",r),r}})}checkJwt(){return!!this.accountCookieService.getJwt()}static \u0275fac=function(i){return new(i||n)(Ge(sr),Ge(ur))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zp=(()=>{class n{httpModule;baseServiceUrl=Si+"auth/";constructor(t){this.httpModule=t}POSTcreateLongJWT(t){let i=new pn().set("accountType",t.accountType);return HM(t)&&(i=i.set("email",t.email).set("password",t.password)),_n(this.httpModule.post(this.baseServiceUrl+"jwt/long",i))}POSTcreateShortJWT(t){let i=new pn().set("email",t);return _n(this.httpModule.post(this.baseServiceUrl+"jwt/temporary",i))}PUTupdateBaseData(t){let i=new pn().set("accountType",t.accountType).set("jwt",t.jwt);return HM(t)&&(i=i.set("password",t.password)),_n(this.httpModule.put(this.baseServiceUrl+"account",i))}GETrequestPasswordCode(t){let i=new pn().set("email",t);return _n(this.httpModule.get(this.baseServiceUrl+"account/code",{params:i}))}static \u0275fac=function(i){return new(i||n)(Ge(sr))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zhe(n,e){if(n&1&&me(0,"div",43),n&2){let t=e.$implicit;Gn("grid-area",t.gridArea)}}function Khe(n,e){if(n&1){let t=Rt();P(0,"div",39),Me("click",function(){let r=He(t).index,o=ve(2);return ze(o.openProject(r))}),P(1,"h4",40),ne(2),O(),P(3,"div",41),Oe(4,Zhe,1,2,"div",42),O()()}if(n&2){let t=e.$implicit;W(2),ei(t.name),W(2),q("ngForOf",t.rooms)}}function Jhe(n,e){if(n&1&&(P(0,"a",44)(1,"h4",45),ne(2),O(),me(3,"img",46),O()),n&2){let t=e.$implicit;q("routerLink","/create/"+t._id),W(2),ei(t.name),W(),q("src",t.previewUrl,kr)}}function Qhe(n,e){if(n&1){let t=Rt();P(0,"div",14)(1,"div",15)(2,"div",16),me(3,"img",17),P(4,"label",18)(5,"input",19),Me("change",function(r){He(t);let o=ve();return ze(o.uploadAvatar(r))}),O(),me(6,"img",20),O()(),P(7,"div",21)(8,"h2",22),ne(9),O(),P(10,"div",23)(11,"div",24)(12,"span",25),ne(13,"\u041F\u0440\u043E\u0435\u043A\u0442\u044B:"),O(),P(14,"span",26),ne(15),O()(),P(16,"div",24)(17,"span",25),ne(18,"\u041C\u0435\u0431\u0435\u043B\u044C:"),O(),P(19,"span",26),ne(20),O()(),P(21,"div",24)(22,"span",25),ne(23,"Email:"),O(),P(24,"span",26),ne(25),O()()()(),P(26,"div",27)(27,"button",28),Me("click",function(){He(t);let r=ve();return ze(r.openEditForm())}),me(28,"img",29),O(),P(29,"button",30),Me("click",function(){He(t);let r=ve();return ze(r.logout())}),me(30,"img",31),O()()(),P(31,"div",32)(32,"h3",33),ne(33,"\u041C\u043E\u0438 \u043F\u0440\u043E\u0435\u043A\u0442\u044B"),O(),P(34,"div",34),Oe(35,Khe,5,2,"div",35),O()(),P(36,"div",36)(37,"h3",33),ne(38,"\u041C\u043E\u044F \u043C\u0435\u0431\u0435\u043B\u044C"),O(),P(39,"div",37),Oe(40,Jhe,4,3,"a",38),O()()()}if(n&2){let t=ve();W(3),q("src",t.accountData.avatarUrl,kr),W(6),ei(t.accountData.nickname),W(6),ei(t.accountData.projects.length),W(5),ei(t.accountData.furnitures.length),W(5),ei(t.accountData.email),W(10),q("ngForOf",t.accountData.projects),W(5),q("ngForOf",t.accountData.furnitures)}}function epe(n,e){n&1&&(P(0,"div",47),ne(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),O())}function tpe(n,e){n&1&&(P(0,"div",47),ne(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),O())}function npe(n,e){if(n&1&&(P(0,"div",8)(1,"label",48),ne(2,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),O(),me(3,"input",49),Oe(4,tpe,2,0,"div",11),O()),n&2){let t,i,r=ve();W(3),Ht("invalid",((t=r.editForm.get("password"))==null?null:t.invalid)&&((t=r.editForm.get("password"))==null?null:t.touched)),W(),q("ngIf",((i=r.editForm.get("password"))==null?null:i.invalid)&&((i=r.editForm.get("password"))==null?null:i.touched))}}var A5=(()=>{class n{accountService;router;accountCookieService;imageServerControlService;imageClientControlService;authService;errorHandler;constructor(t,i,r,o,s,a,l){this.accountService=t,this.router=i,this.accountCookieService=r,this.imageServerControlService=o,this.imageClientControlService=s,this.authService=a,this.errorHandler=l}accountData;isEditFormOpen=!1;editForm;ngOnInit(){this.checkAuthAndLoadData(),this.initEditForm()}updateSecondaryAccountData(t){return _t(this,null,function*(){if(!this.accountData)return;let i={jwt:t,nickname:this.editForm.value.nickname};try{yield this.accountService.PUTupdateSecondaryAccountData(i),this.accountData.nickname=this.editForm.value.nickname}catch(r){throw this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043D\u0438\u043A\u043D\u0435\u0439\u043C\u0430",5e3),console.error(r),r}})}saveChanges(){return _t(this,null,function*(){if(!this.accountData||!this.editForm.valid){this.errorHandler.setError("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u044B",5e3);return}let t=this.accountCookieService.getJwt(),i=this.accountCookieService.getUserType();if(!t||!i){this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0443\u0442\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438",5e3);return}try{yield this.updateSecondaryAccountData(t),yield this.updateBaseDataIfNeeded(t,i),this.closeEditForm()}catch(r){this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445",5e3),console.error(r)}})}updateBaseDataIfNeeded(t,i){return _t(this,null,function*(){if(this.accountData?.password===void 0||!this.editForm.value.password||i==="google")return;let r={jwt:t,accountType:i,password:this.editForm.value.password};try{yield this.authService.PUTupdateBaseData(r),this.accountData.password=this.editForm.value.password}catch(o){throw this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0430\u0440\u043E\u043B\u044F",5e3),console.error(o),o}})}loadUserData(t){return _t(this,null,function*(){try{let i=(yield this.accountService.GETaccount(t)).accountData;this.accountData={email:i.email,nickname:i.nickname,projects:i.projects,avatarUrl:this.imageServerControlService.GETaccountAvatar(t),furnitures:i.furnitures},i.password!==void 0&&(this.accountData.password=i.password)}catch(i){console.error(i)}})}uploadAvatar(t){return _t(this,null,function*(){let i=this.accountCookieService.getJwt();if(!i||!this.accountData)return;let o=t.target.files?.[0];if(!o){this.errorHandler.setError("\u0424\u0430\u0439\u043B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D",5e3);return}try{let s=yield this.imageClientControlService.compressImage(o);if(!s){this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0436\u0430\u0442\u0438\u044F \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",5e3);return}yield this.imageServerControlService.POSTuploadUserAvatar(s,i),this.accountData.avatarUrl=URL.createObjectURL(s)}catch(s){this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430",5e3),console.error(s)}})}checkAuthAndLoadData(){let t=this.accountCookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.loadUserData(t)}initEditForm(){this.editForm=new ar({nickname:new ni(this.accountData?.nickname,[an.required,an.minLength(3),an.maxLength(30)])}),this.accountCookieService.getUserType()==="email"&&this.editForm.addControl("password",new ni(this.accountData?.password,[an.required,an.minLength(6)]))}openEditForm(){if(!this.accountData){this.errorHandler.setError("\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B",5e3);return}this.isEditFormOpen=!0}closeEditForm(){this.isEditFormOpen=!1,this.accountData&&(this.accountData.nickname!=this.editForm.value.nickname,this.accountData.password&&this.accountData.password!=this.editForm.value.password),this.editForm.reset()}openProject(t){this.router.navigateByUrl("/plan/"+t)}logout(){this.accountCookieService.deleteJwt(),this.accountCookieService.deleteUserType(),this.router.navigateByUrl("/")}static \u0275fac=function(i){return new(i||n)(ce(bl),ce(Vr),ce(ur),ce(Pu),ce(Px),ce(zp),ce($i))};static \u0275cmp=Tt({type:n,selectors:[["app-account-page"]],decls:18,vars:9,consts:[[1,"account-page"],["class","account-container",4,"ngIf"],[1,"edit-modal"],[1,"modal-content"],[1,"close-btn",3,"click"],["src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"edit-form",3,"ngSubmit","formGroup"],[1,"form-title"],[1,"form-group"],["for","nickname"],["id","nickname","formControlName","nickname"],["class","error-message",4,"ngIf"],["class","form-group",4,"ngIf"],["type","submit",1,"save-btn",3,"disabled"],[1,"account-container"],[1,"profile-card"],[1,"avatar-container"],["alt","\u0410\u0432\u0430\u0442\u0430\u0440",1,"avatar-image",3,"src"],[1,"avatar-edit-btn"],["type","file","id","avatarInput","accept",".png,.jpeg,.jpg",3,"change"],["src","/assets/images/editIcon.svg","alt","\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0430\u0432\u0430\u0442\u0430\u0440"],[1,"profile-info"],[1,"profile-name"],[1,"profile-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"profile-actions"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C",1,"edit-btn",2,"width","27px",3,"click"],["src","/assets/images/editIcon.svg","alt","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"],["title","\u0412\u044B\u0439\u0442\u0438",1,"logout-btn",2,"width","35px",3,"click"],["src","/assets/images/logoutIcon.svg","alt","\u0412\u044B\u0439\u0442\u0438"],[1,"projects-section"],[1,"section-title"],[1,"projects-grid"],["class","project-card",3,"click",4,"ngFor","ngForOf"],[1,"furniture-section"],[1,"furniture-grid"],["class","furniture-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"project-card",3,"click"],[1,"project-name"],[1,"project-scheme"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"room"],[1,"furniture-card",3,"routerLink"],[1,"furniture-name"],["alt","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438",1,"furniture-image",3,"src"],[1,"error-message"],["for","password"],["id","password","type","password","formControlName","password"]],template:function(i,r){if(i&1&&(P(0,"div",0),me(1,"app-navigation-panel"),Oe(2,Qhe,41,7,"div",1),P(3,"div",2)(4,"div",3)(5,"button",4),Me("click",function(){return r.closeEditForm()}),me(6,"img",5),O(),P(7,"form",6),Me("ngSubmit",function(){return r.saveChanges()}),P(8,"h3",7),ne(9,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"),O(),P(10,"div",8)(11,"label",9),ne(12,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),O(),me(13,"input",10),Oe(14,epe,2,0,"div",11),O(),Oe(15,npe,5,3,"div",12),P(16,"button",13),ne(17," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),O()()()()()),i&2){let o,s;W(2),q("ngIf",r.accountData),W(),Ht("active",r.isEditFormOpen),W(4),q("formGroup",r.editForm),W(6),Ht("invalid",((o=r.editForm.get("nickname"))==null?null:o.invalid)&&((o=r.editForm.get("nickname"))==null?null:o.touched)),W(),q("ngIf",((s=r.editForm.get("nickname"))==null?null:s.invalid)&&((s=r.editForm.get("nickname"))==null?null:s.touched)),W(),q("ngIf",r.editForm.get("password")),W(),q("disabled",!r.editForm.valid)}},dependencies:[Ys,li,In,Ns,al,Os,ol,sl,ya,_a,hd,Ps],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.account-page[_ngcontent-%COMP%]{background:#000;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:30px 20px;font-family:Courier New,Courier,monospace;color:#dad7cd}.account-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin-top:30px}.profile-card[_ngcontent-%COMP%]{background:#000000b3;border-radius:15px;padding:30px;display:flex;align-items:flex-start;gap:30px;margin-bottom:30px;border:1px solid rgba(163,177,138,.3);position:relative}.avatar-container[_ngcontent-%COMP%]{position:relative;width:250px;aspect-ratio:1;flex-shrink:0}.avatar-container[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:50%;object-fit:cover}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;background:#344e41;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;border:2px solid black;transition:all .3s}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#436554}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;padding:10px;aspect-ratio:1}.profile-info[_ngcontent-%COMP%]{flex-grow:1}.profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;font-size:2rem;margin-bottom:15px;color:#a3b18a;text-shadow:0 0 10px rgba(163,177,138,.3)}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:fit-content;flex-wrap:wrap;gap:20px}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{background:#a3b18a1a;padding:8px 15px;border-radius:20px;border:1px solid rgba(163,177,138,.3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#a3b18a}.stat-item[_ngcontent-%COMP%]{max-width:min(750px,100vw - 500px)}.profile-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;transition:all .3s}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);opacity:.8}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1}.section-title[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;font-size:1.8rem;margin-bottom:20px;color:#a3b18a;text-shadow:0 0 5px rgba(163,177,138,.3);padding-bottom:10px;border-bottom:1px solid rgba(163,177,138,.3)}.projects-section[_ngcontent-%COMP%], .furniture-section[_ngcontent-%COMP%]{background:#000000b3;border-radius:15px;padding:25px;margin-bottom:30px;box-shadow:0 5px 15px #0000004d;border:1px solid rgba(163,177,138,.3)}.projects-grid[_ngcontent-%COMP%], .furniture-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.project-card[_ngcontent-%COMP%]{background:#a3b18a1a;border-radius:10px;padding:15px;cursor:pointer;transition:all .3s;border:1px solid rgba(163,177,138,.2)}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #a3b18a33;border-color:#a3b18a}.project-card[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:15px;color:#dad7cd;text-align:center}.project-card[_ngcontent-%COMP%]   .project-scheme[_ngcontent-%COMP%]{display:grid;width:100%;aspect-ratio:1;gap:5px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.project-card[_ngcontent-%COMP%]   .project-scheme[_ngcontent-%COMP%]   .room[_ngcontent-%COMP%]{background:#344e41;border-radius:3px;transition:all .3s}.furniture-card[_ngcontent-%COMP%]{background:#a3b18a1a;border-radius:10px;padding:15px;text-decoration:none;transition:all .3s;border:1px solid rgba(163,177,138,.2);display:flex;flex-direction:column;align-items:center}.furniture-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #a3b18a33;border-color:#a3b18a}.furniture-card[_ngcontent-%COMP%]   .furniture-name[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:15px;color:#dad7cd;text-align:center}.furniture-card[_ngcontent-%COMP%]   .furniture-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:5px}.edit-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:all .3s;z-index:1000}.edit-modal.active[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#000;border-radius:15px;padding:30px;width:90%;max-width:500px;position:relative;box-shadow:0 0 20px #a3b18a4d;border:1px solid #A3B18A;box-sizing:border-box}.edit-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:none;border:none;cursor:pointer}.edit-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;rotate:45deg;transition:all .3s}.edit-modal[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;color:#a3b18a;text-align:center;margin-bottom:25px;font-size:1.8rem}.edit-modal[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:#dad7cd}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(163,177,138,.5);border-radius:5px;padding:12px 15px;color:#dad7cd;font-family:Courier New,Courier,monospace;transition:all .3s}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#a3b18a;box-shadow:0 0 0 2px #a3b18a33}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background:#ff6b6b1a;animation:_ngcontent-%COMP%_shake .5s ease}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.8rem;margin-top:3px}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:#a3b18a;color:#000;border:none;border-radius:5px;padding:15px;font-family:Courier New,Courier,monospace;font-size:1.1rem;cursor:pointer;transition:all .3s;margin-top:10px}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #a3b18a66}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:disabled{background:#344e41;color:#00000080;cursor:not-allowed}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}20%,60%{transform:translate(-5px)}40%,80%{transform:translate(5px)}}@media (max-width: 900px){.stat-item[_ngcontent-%COMP%]{max-width:calc(100vw - 150px)}.profile-card[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{width:100%}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]{margin:0 auto}.profile-card[_ngcontent-%COMP%]   .profile-actions[_ngcontent-%COMP%]{flex-direction:row;width:100%;justify-content:center}.projects-grid[_ngcontent-%COMP%], .furniture-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}}@media (max-width: 600px){.account-page[_ngcontent-%COMP%]{padding:20px}.avatar-container[_ngcontent-%COMP%]{width:200px}.stat-item[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}.profile-card[_ngcontent-%COMP%]{padding:20px 0}.projects-section[_ngcontent-%COMP%], .furniture-section[_ngcontent-%COMP%]{padding:20px}.profile-name[_ngcontent-%COMP%], .section-title[_ngcontent-%COMP%]{font-size:1.5rem!important}.modal-content[_ngcontent-%COMP%]{width:95%!important;padding:20px!important}}']})}return n})();var ipe=["signup"],rpe=["signin"],ope=["code"],spe=["changePassword"],ape=["requestPasswordChange"],jM=()=>({standalone:!0});function lpe(n,e){n&1&&Qi(0)}function cpe(n,e){n&1&&(P(0,"div",23),ne(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 4-\u0437\u043D\u0430\u0447\u043D\u044B\u0439 \u043A\u043E\u0434 "),O())}function upe(n,e){if(n&1){let t=Rt();P(0,"form",13),Me("ngSubmit",function(){He(t);let r=ve();return ze(r.checkMatchCodes())}),P(1,"h2",14),ne(2,"\u0421\u043C\u0435\u043D\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"),O(),P(3,"span",15)(4,"label",16),ne(5,"\u041A\u043E\u0434 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F"),O(),P(6,"span",17)(7,"input",18,5),Me("input",function(){He(t);let r=Ur(8),o=Ur(10),s=ve();return ze(s.onInput(r,o))})("keyup.backspace",function(){He(t);let r=Ur(8),o=ve();return ze(o.onBackspace(r,r))}),As("ngModelChange",function(r){He(t);let o=ve();return ga(o.inputValues[0],r)||(o.inputValues[0]=r),ze(r)}),O(),P(9,"input",18,6),Me("input",function(){He(t);let r=Ur(10),o=Ur(12),s=ve();return ze(s.onInput(r,o))})("keyup.backspace",function(){He(t);let r=Ur(8),o=Ur(10),s=ve();return ze(s.onBackspace(o,r))}),As("ngModelChange",function(r){He(t);let o=ve();return ga(o.inputValues[1],r)||(o.inputValues[1]=r),ze(r)}),O(),P(11,"input",18,7),Me("input",function(){He(t);let r=Ur(12),o=Ur(14),s=ve();return ze(s.onInput(r,o))})("keyup.backspace",function(){He(t);let r=Ur(10),o=Ur(12),s=ve();return ze(s.onBackspace(o,r))}),As("ngModelChange",function(r){He(t);let o=ve();return ga(o.inputValues[2],r)||(o.inputValues[2]=r),ze(r)}),O(),P(13,"input",18,8),Me("input",function(){He(t);let r=Ur(14),o=ve();return ze(o.onInput(r,null))})("keyup.backspace",function(){He(t);let r=Ur(12),o=Ur(14),s=ve();return ze(s.onBackspace(o,r))}),As("ngModelChange",function(r){He(t);let o=ve();return ga(o.inputValues[3],r)||(o.inputValues[3]=r),ze(r)}),O()(),Oe(15,cpe,2,0,"div",19),O(),P(16,"span",20)(17,"button",21),Me("click",function(){He(t);let r=ve();return ze(r.changeTemplate("signin"))}),ne(18,"\u042F \u0432\u0441\u043F\u043E\u043C\u043D\u0438\u043B \u043F\u0430\u0440\u043E\u043B\u044C"),O()(),P(19,"button",22),ne(20),O()()}if(n&2){let t,i,r,o,s,a=ve();W(7),Ht("invalid",((t=a.codeForm.get("code"))==null?null:t.invalid)&&((t=a.codeForm.get("code"))==null?null:t.touched)),Is("ngModel",a.inputValues[0]),q("ngModelOptions",fd(19,jM)),W(2),Ht("invalid",((i=a.codeForm.get("code"))==null?null:i.invalid)&&((i=a.codeForm.get("code"))==null?null:i.touched)),Is("ngModel",a.inputValues[1]),q("ngModelOptions",fd(20,jM)),W(2),Ht("invalid",((r=a.codeForm.get("code"))==null?null:r.invalid)&&((r=a.codeForm.get("code"))==null?null:r.touched)),Is("ngModel",a.inputValues[2]),q("ngModelOptions",fd(21,jM)),W(2),Ht("invalid",((o=a.codeForm.get("code"))==null?null:o.invalid)&&((o=a.codeForm.get("code"))==null?null:o.touched)),Is("ngModel",a.inputValues[3]),q("ngModelOptions",fd(22,jM)),W(2),q("ngIf",((s=a.codeForm.get("code"))==null?null:s.invalid)&&((s=a.codeForm.get("code"))==null?null:s.touched)),W(4),q("disabled",!a.codeForm.valid),W(),er(" ",a.codeForm.valid?"\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C":"\u041D\u0435\u043F\u043E\u043B\u043D\u044B\u0439 \u043A\u043E\u0434"," ")}}function dpe(n,e){n&1&&(P(0,"div",23),ne(1," Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D "),O())}function fpe(n,e){n&1&&(P(0,"div",23),ne(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),O())}function hpe(n,e){n&1&&(P(0,"div",23),ne(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C "),O())}function ppe(n,e){if(n&1){let t=Rt();P(0,"form",24),Me("ngSubmit",function(){He(t);let r=ve();return ze(r.signinUser())}),P(1,"h2",14),ne(2,"\u0412\u0445\u043E\u0434"),O(),P(3,"span",25)(4,"label",26),ne(5,"Email"),O(),me(6,"input",27),Oe(7,dpe,2,0,"div",19)(8,fpe,2,0,"div",19),O(),P(9,"span",25)(10,"label",28),ne(11,"\u041F\u0430\u0440\u043E\u043B\u044C"),O(),me(12,"input",29),Oe(13,hpe,2,0,"div",19),O(),P(14,"span",20)(15,"button",21),Me("click",function(){He(t);let r=ve();return ze(r.changeTemplate("signup"))}),ne(16,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),O(),P(17,"button",21),Me("click",function(){He(t);let r=ve();return ze(r.changeTemplate("requestChange"))}),ne(18,"\u0417\u0430\u0431\u044B\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?"),O()(),P(19,"button",22),ne(20),O()()}if(n&2){let t,i,r,o,s,a=ve();q("formGroup",a.signinForm),W(6),Ht("invalid",((t=a.signinForm.get("email"))==null?null:t.invalid)&&((t=a.signinForm.get("email"))==null?null:t.touched)),W(),q("ngIf",((i=a.signinForm.get("email"))==null||i.errors==null?null:i.errors.required)&&((i=a.signinForm.get("email"))==null?null:i.touched)),W(),q("ngIf",((r=a.signinForm.get("email"))==null||r.errors==null?null:r.errors.email)&&((r=a.signinForm.get("email"))==null?null:r.touched)),W(4),Ht("invalid",((o=a.signinForm.get("password"))==null?null:o.invalid)&&((o=a.signinForm.get("password"))==null?null:o.touched)),W(),q("ngIf",((s=a.signinForm.get("password"))==null?null:s.invalid)&&((s=a.signinForm.get("password"))==null?null:s.touched)),W(6),q("disabled",!a.signinForm.valid),W(),er(" ",a.signinForm.valid?"\u0412\u043E\u0439\u0442\u0438":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}function mpe(n,e){n&1&&(P(0,"div",23),ne(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),O())}function gpe(n,e){if(n&1){let t=Rt();P(0,"form",24),Me("ngSubmit",function(){He(t);let r=ve();return ze(r.requestChangeCode())}),P(1,"h2",14),ne(2,"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F"),O(),P(3,"div",25)(4,"label",30),ne(5,"Email"),O(),me(6,"input",31),Oe(7,mpe,2,0,"div",19),O(),P(8,"div",20)(9,"button",21),Me("click",function(){He(t);let r=ve();return ze(r.changeTemplate("signin"))}),ne(10,"\u041D\u0430\u0437\u0430\u0434 \u043A \u0432\u0445\u043E\u0434\u0443"),O()(),P(11,"button",22),ne(12," \u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u043A\u043E\u0434 "),O()()}if(n&2){let t,i,r=ve();q("formGroup",r.requestChangeForm),W(6),Ht("invalid",((t=r.requestChangeForm.get("email"))==null?null:t.invalid)&&((t=r.requestChangeForm.get("email"))==null?null:t.touched)),W(),q("ngIf",((i=r.requestChangeForm.get("email"))==null?null:i.invalid)&&((i=r.requestChangeForm.get("email"))==null?null:i.touched)),W(4),q("disabled",r.requestChangeForm.invalid)}}function vpe(n,e){n&1&&(P(0,"div",23),ne(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),O())}function ype(n,e){n&1&&(P(0,"div",23),ne(1," \u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442 "),O())}function _pe(n,e){if(n&1){let t=Rt();P(0,"form",24),Me("ngSubmit",function(){He(t);let r=ve();return ze(r.changePasswordUser())}),P(1,"h2",14),ne(2,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),O(),P(3,"span",25)(4,"label",32),ne(5,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),O(),me(6,"input",33),Oe(7,vpe,2,0,"div",19),O(),P(8,"span",25)(9,"label",34),ne(10,"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C"),O(),me(11,"input",35),Oe(12,ype,2,0,"div",19),O(),P(13,"button",22),ne(14),O()()}if(n&2){let t,i,r,o,s=ve();q("formGroup",s.changePasswordForm),W(6),Ht("invalid",((t=s.changePasswordForm.get("newPassword"))==null?null:t.invalid)&&((t=s.changePasswordForm.get("newPassword"))==null?null:t.touched)),W(),q("ngIf",((i=s.changePasswordForm.get("newPassword"))==null?null:i.invalid)&&((i=s.changePasswordForm.get("newPassword"))==null?null:i.touched)),W(4),Ht("invalid",(((r=s.changePasswordForm.get("repeatPassword"))==null?null:r.invalid)||(s.changePasswordForm.errors==null?null:s.changePasswordForm.errors.mismatch))&&((r=s.changePasswordForm.get("repeatPassword"))==null?null:r.touched)),W(),q("ngIf",(s.changePasswordForm.errors==null?null:s.changePasswordForm.errors.mismatch)&&((o=s.changePasswordForm.get("repeatPassword"))==null?null:o.touched)),W(),q("disabled",!s.changePasswordForm.valid),W(),er(" ",s.changePasswordForm.valid?"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}function wpe(n,e){n&1&&(P(0,"div",23),ne(1," Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D "),O())}function xpe(n,e){n&1&&(P(0,"div",23),ne(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),O())}function bpe(n,e){n&1&&(P(0,"div",23),ne(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),O())}function Mpe(n,e){n&1&&(P(0,"div",23),ne(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),O())}function Cpe(n,e){if(n&1){let t=Rt();P(0,"form",24),Me("ngSubmit",function(){He(t);let r=ve();return ze(r.signUpUser())}),P(1,"h2",14),ne(2,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),O(),P(3,"span",25)(4,"label",26),ne(5,"Email"),O(),me(6,"input",27),Oe(7,wpe,2,0,"div",19)(8,xpe,2,0,"div",19),O(),P(9,"span",25)(10,"label",36),ne(11,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),O(),me(12,"input",37),Oe(13,bpe,2,0,"div",19),O(),P(14,"span",25)(15,"label",28),ne(16,"\u041F\u0430\u0440\u043E\u043B\u044C"),O(),me(17,"input",29),Oe(18,Mpe,2,0,"div",19),O(),P(19,"span",20)(20,"button",21),Me("click",function(){He(t);let r=ve();return ze(r.changeTemplate("signin"))}),ne(21,"\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442?"),O()(),P(22,"button",22),ne(23),O()()}if(n&2){let t,i,r,o,s,a,l,u=ve();q("formGroup",u.signupForm),W(6),Ht("invalid",((t=u.signupForm.get("email"))==null?null:t.invalid)&&((t=u.signupForm.get("email"))==null?null:t.touched)),W(),q("ngIf",((i=u.signupForm.get("email"))==null||i.errors==null?null:i.errors.required)&&((i=u.signupForm.get("email"))==null?null:i.touched)),W(),q("ngIf",((r=u.signupForm.get("email"))==null||r.errors==null?null:r.errors.email)&&((r=u.signupForm.get("email"))==null?null:r.touched)),W(4),Ht("invalid",((o=u.signupForm.get("nickname"))==null?null:o.invalid)&&((o=u.signupForm.get("nickname"))==null?null:o.touched)),W(),q("ngIf",((s=u.signupForm.get("nickname"))==null?null:s.invalid)&&((s=u.signupForm.get("nickname"))==null?null:s.touched)),W(4),Ht("invalid",((a=u.signupForm.get("password"))==null?null:a.invalid)&&((a=u.signupForm.get("password"))==null?null:a.touched)),W(),q("ngIf",((l=u.signupForm.get("password"))==null?null:l.invalid)&&((l=u.signupForm.get("password"))==null?null:l.touched)),W(4),q("disabled",!u.signupForm.valid),W(),er(" ",u.signupForm.valid?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}var R5=(()=>{class n{accountService;authService;router;errorHandler;accountCookieService;cdr;constructor(t,i,r,o,s,a){this.accountService=t,this.authService=i,this.router=r,this.errorHandler=o,this.accountCookieService=s,this.cdr=a}currentFormTemplate;inputValues=new Array(4).fill("");currentChangeCode;currentJwtToken;signupTemplate;signinTemplate;codeTemplate;changePasswordTemplate;requestPasswordChangeTemplate;ngAfterViewInit(){this.currentFormTemplate=this.signinTemplate,this.cdr.detectChanges()}requestChangeCode(){return _t(this,null,function*(){if(!this.requestChangeForm.invalid)try{this.currentChangeCode=(yield this.authService.GETrequestPasswordCode(this.requestChangeForm.value.email)).resetCode,this.changeTemplate("code")}catch(t){console.log(t)}})}signinUser(){return _t(this,null,function*(){if(this.signinForm.invalid)return;let t={email:this.signinForm.value.email,password:this.signinForm.value.password,accountType:"email"};try{let i=(yield this.authService.POSTcreateLongJWT(t)).jwt;this.accountCookieService.setJwt(i,"long"),this.accountCookieService.setUserType("email"),this.router.navigateByUrl("/account")}catch(i){console.log(i)}})}signUpUser(){return _t(this,null,function*(){if(!this.signupForm.invalid)try{let t={email:this.signupForm.value.email,password:this.signupForm.value.password,nickname:this.signupForm.value.nickname,accountType:"email"};yield this.accountService.POSTcreateAccount(t);let i=(yield this.authService.POSTcreateLongJWT(t)).jwt;this.accountCookieService.setJwt(i,"long"),this.accountCookieService.setUserType("email"),this.router.navigateByUrl("/account")}catch(t){console.log(t)}})}changePasswordUser(){return _t(this,null,function*(){if(this.changePasswordForm.invalid||!this.currentJwtToken)return;let t={password:this.changePasswordForm.value.newPassword,accountType:"email",jwt:this.currentJwtToken};try{yield this.authService.PUTupdateBaseData(t),this.changeTemplate("signin")}catch(i){console.log(i)}})}checkMatchCodes(){return _t(this,null,function*(){if(this.codeForm.value.code===this.currentChangeCode)try{this.currentJwtToken=(yield this.authService.POSTcreateShortJWT(this.requestChangeForm.value.email)).jwt,this.changeTemplate("changePassword")}catch(t){console.log(t)}else this.errorHandler.setError("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043E\u0434",2500)})}passwordMatchValidator=t=>{let i=t;return i.get("newPassword")?.value===i.get("repeatPassword")?.value?null:{mismatch:!0}};onInput(t,i){this.codeForm.patchValue({code:this.inputValues.join("")}),i&&t.value&&i.focus()}onBackspace(t,i){!t.value&&i&&i.focus(),this.codeForm.patchValue({code:this.inputValues.join("")})}changeTemplate(t){let i={requestChange:this.requestPasswordChangeTemplate,code:this.codeTemplate,signin:this.signinTemplate,signup:this.signupTemplate,changePassword:this.changePasswordTemplate};this.currentFormTemplate=i[t]||this.signinTemplate}signupForm=new ar({email:new ni("",[an.required,an.email]),nickname:new ni("",[an.required]),password:new ni("",[an.required,an.minLength(6)])});codeForm=new ar({code:new ni("",[an.required,an.minLength(4)])});changePasswordForm=new ar({newPassword:new ni("",[an.required,an.minLength(6)]),repeatPassword:new ni("",[an.required,an.minLength(6)])},{validators:this.passwordMatchValidator});signinForm=new ar({email:new ni("",[an.required,an.email]),password:new ni("",[an.required])});requestChangeForm=new ar({email:new ni("",[an.required,an.email])});static \u0275fac=function(i){return new(i||n)(ce(bl),ce(zp),ce(Vr),ce($i),ce(ur),ce(ti))};static \u0275cmp=Tt({type:n,selectors:[["app-login-page"]],viewQuery:function(i,r){if(i&1&&(Fi(ipe,5,xi),Fi(rpe,5,xi),Fi(ope,5,xi),Fi(spe,5,xi),Fi(ape,5,xi)),i&2){let o;mi(o=gi())&&(r.signupTemplate=o.first),mi(o=gi())&&(r.signinTemplate=o.first),mi(o=gi())&&(r.codeTemplate=o.first),mi(o=gi())&&(r.changePasswordTemplate=o.first),mi(o=gi())&&(r.requestPasswordChangeTemplate=o.first)}},decls:15,vars:1,consts:[["code",""],["signin",""],["requestPasswordChange",""],["changePassword",""],["signup",""],["input1",""],["input2",""],["input3",""],["input4",""],[1,"body"],[1,"login-container"],[1,"formModule"],[4,"ngTemplateOutlet"],[1,"addModuleSpan",3,"ngSubmit"],[1,"addModuleTitle"],[1,"addModuleInputSpan",2,"align-items","center"],["for","#input1",1,"inputLabel"],[1,"input-group"],["type","text","maxlength","1",3,"input","keyup.backspace","ngModelChange","ngModel","ngModelOptions"],["class","error-message",4,"ngIf"],[1,"additionalFuntions"],["type","button",3,"click"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],[1,"error-message"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],[1,"addModuleInputSpan"],["for","email",1,"inputLabel"],["formControlName","email","id","email","type","email",1,"addModuleInput"],["for","password",1,"inputLabel"],["formControlName","password","id","password","type","password",1,"addModuleInput"],[1,"inputLabel"],["formControlName","email","type","email",1,"addModuleInput"],["for","newPassword",1,"inputLabel"],["formControlName","newPassword","id","newPassword","type","password",1,"addModuleInput"],["for","repeatPassword",1,"inputLabel"],["formControlName","repeatPassword","id","repeatPassword","type","password",1,"addModuleInput"],["for","nickname",1,"inputLabel"],["formControlName","nickname","id","nickname","type","text",1,"addModuleInput"]],template:function(i,r){i&1&&(P(0,"span",9),me(1,"app-navigation-panel"),P(2,"div",10)(3,"div",11),Oe(4,lpe,1,0,"ng-container",12),O()()(),Oe(5,upe,21,23,"ng-template",null,0,Kr)(7,ppe,21,10,"ng-template",null,1,Kr)(9,gpe,13,5,"ng-template",null,2,Kr)(11,_pe,15,9,"ng-template",null,3,Kr)(13,Cpe,24,13,"ng-template",null,4,Kr)),i&2&&(W(4),q("ngTemplateOutlet",r.currentFormTemplate))},dependencies:[Ys,Ns,al,Os,ol,sl,mD,ya,_a,Ql,kw,Eg,fD,In],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.body[_ngcontent-%COMP%]{padding:0;margin:0;min-height:100vh;display:flex;flex-direction:column;align-items:center;background-color:#000;background-size:cover;position:relative}.login-container[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:auto;padding:20px}.formModule[_ngcontent-%COMP%]{background-color:#000;border-radius:10px;padding:30px;width:calc(100% - 60px);box-shadow:0 0 5px #fff;border:1px solid rgba(255,255,255,.1)}.addModuleTitle[_ngcontent-%COMP%]{color:#dad7cd;text-align:center;font-size:2rem;margin-bottom:30px;font-weight:400}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;position:relative}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd;margin-bottom:8px;font-size:.9rem}.addModuleInput[_ngcontent-%COMP%]{background-color:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:5px;padding:12px 15px;color:#dad7cd;font-size:1rem;transition:all .3s ease}.addModuleInput[_ngcontent-%COMP%]:focus{outline:none;border-color:#a3b18a;box-shadow:0 0 0 2px #a3b18a33}.addModuleInput.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background-color:#ff6b6b1a}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.8rem;margin-top:5px}.input-group[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:20px}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;aspect-ratio:1;text-align:center;font-size:24px;font-family:Courier New,monospace;background:#ffffff1a;border:2px solid #A3B18A;border-radius:12px;color:#dad7cd;transition:all .3s ease;outline:none}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#b1bd9c;box-shadow:0 0 0 3px #a3b18a33;transform:translateY(-2px)}.input-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background:#ff6b6b1a;animation:_ngcontent-%COMP%_shake .5s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}20%,60%{transform:translate(-5px)}40%,80%{transform:translate(5px)}}.submitAddModuleFormBtn[_ngcontent-%COMP%]{width:100%;padding:15px;background-color:#a3b18a;color:#000;border:none;border-radius:5px;font-size:1rem;cursor:pointer;transition:all .3s ease;margin-top:10px}.submitAddModuleFormBtn[_ngcontent-%COMP%]:hover{background-color:#acb996}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#a3b18a80;cursor:not-allowed}.additionalFuntions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:20px 0}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#dad7cd;cursor:pointer;font-size:.9rem;padding:5px 0;position:relative}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:1px;background:#dad7cd;transition:width .3s}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:after{width:100%}@media (max-width: 768px){.formModule[_ngcontent-%COMP%]{padding:20px}.addModuleTitle[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:10px}.additionalFuntions[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}']})}return n})();var GM=(()=>{class n{httpModule;baseServiceUrl=Si+"projects/";constructor(t){this.httpModule=t}POSTcreateProject(t,i){let r=new pn().set("jwt",t).set("name",i);return _n(this.httpModule.post(this.baseServiceUrl,r))}DELETEdeleteProject(t,i){let r=new pn().set("jwt",t).set("projectId",i);return _n(this.httpModule.delete(this.baseServiceUrl,{params:r}))}GETgetProject(t,i){let r=new pn().set("jwt",t).set("projectId",i);return _n(this.httpModule.get(this.baseServiceUrl,{params:r}))}PUTupdateProject(t,i,r){let o=new pn().set("jwt",t).set("projectId",i).set("name",r.name).set("rooms",JSON.stringify(r.rooms));return _n(this.httpModule.put(this.baseServiceUrl,o))}static \u0275fac=function(i){return new(i||n)(Ge(sr))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Epe=["planHouse"],$R=n=>({disabled:n});function Tpe(n,e){n&1&&(P(0,"p",6),ne(1,"\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u044D\u0442\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0441 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0445 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u0435\u043D. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440."),O())}function Dpe(n,e){if(n&1&&me(0,"div",23),n&2){let t=e.$implicit;Gn("grid-area",t.gridArea)}}function Ipe(n,e){if(n&1){let t=Rt();P(0,"button",16),Me("click",function(){let r=He(t).index,o=ve(3);return ze(o.openProject(r))}),P(1,"span",17)(2,"h3",18),ne(3),O(),P(4,"div",19),Oe(5,Dpe,1,2,"div",20),O()(),P(6,"button",21),Me("click",function(){let r=He(t).index,o=ve(3);return ze(o.deleteProject(r))}),me(7,"img",22),O()()}if(n&2){let t=e.$implicit;W(3),ei(t.name),W(2),q("ngForOf",t.rooms)}}function Ape(n,e){if(n&1){let t=Rt();P(0,"span",12),Oe(1,Ipe,8,2,"button",13),P(2,"button",14),Me("click",function(){He(t);let r=ve(2);return ze(r.openAddModule())}),P(3,"h3"),ne(4,"Create"),O(),me(5,"img",15),O()()}if(n&2){let t=ve(2);q("ngClass",gr(2,$R,t.currentProjectId!==void 0)),W(),q("ngForOf",t.accountData.projects)}}function Rpe(n,e){if(n&1){let t=Rt();P(0,"button",24),Me("click",function(){He(t);let r=ve(2);return ze(r.closeProject())}),me(1,"img",15),O()}}function Ppe(n,e){if(n&1){let t=Rt();P(0,"app-plan-house",25,0),Me("callSaveEmitter",function(){He(t);let r=ve(2);return ze(r.saveProject())})("planHouseEmitter",function(r){He(t);let o=ve(2);return ze(o.updatePlanData(r))}),O()}if(n&2){let t=ve(2);q("ngClass",gr(2,$R,t.currentProjectId===void 0))("planHouse",t.accountData.projects[t.currentProjectId].rooms)}}function Ope(n,e){if(n&1&&(P(0,"span",7),Oe(1,Ape,6,4,"span",8),P(2,"span",9),Oe(3,Rpe,2,0,"button",10)(4,Ppe,2,4,"app-plan-house",11),O()()),n&2){let t=ve();W(),q("ngIf",t.accountData!==void 0),W(),q("ngClass",gr(4,$R,t.currentProjectId===void 0)),W(),q("ngIf",t.getCurrentViewRoom()==null),W(),q("ngIf",t.currentProjectId!==void 0)}}function Npe(n,e){if(n&1){let t=Rt();P(0,"form",26),Me("ngSubmit",function(){He(t);let r=ve();return ze(r.createProject())}),P(1,"button",27),Me("click",function(){He(t);let r=ve();return ze(r.closeAddModule())}),me(2,"img",28),O(),P(3,"span",29)(4,"h2",30),ne(5,"Project name"),O(),P(6,"span",31)(7,"label",32),ne(8,"Name"),O(),me(9,"input",33),O(),P(10,"button",34),ne(11,"Continue"),O()()()}if(n&2){let t=ve();q("formGroup",t.projectNameForm),W(10),q("disabled",!t.projectNameForm.valid)}}var tv=(()=>{class n{accountService;accountCookieService;router;route;elemenetRef;renderer;projectService;errorHandler;location;constructor(t,i,r,o,s,a,l,u,f){this.accountService=t,this.accountCookieService=i,this.router=r,this.route=o,this.elemenetRef=s,this.renderer=a,this.projectService=l,this.errorHandler=u,this.location=f}hasRoomIdBeenProcessed=!1;addModule;currentPlanHouse;accountData;currentProjectId=void 0;planHouse;ngOnInit(){let t=this.accountCookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.pageInit(t)}ngAfterViewInit(){this.addModule=this.elemenetRef.nativeElement.querySelector(".addModule")}ngAfterViewChecked(){if(this.hasRoomIdBeenProcessed||!this.planHouse||!this.route.snapshot.params.roomId)return;let t=parseInt(this.route.snapshot.params.roomId);setTimeout(()=>{typeof t=="number"&&(this.planHouse.currentViewRoom=t,this.planHouse.currentIdClickedRoom=t,this.planHouse.openViewRoom(t),this.planHouse.sceneOpenToggle=!0,this.planHouse.guideTemplate=this.planHouse.roomGuideTemplate,this.hasRoomIdBeenProcessed=!0)},0)}pageInit(t){return _t(this,null,function*(){try{this.accountData=(yield this.accountService.GETaccount(t)).accountData,this.route.paramMap.subscribe(i=>{if(i.get("planId")===null)return;let r=parseInt(i.get("planId"));this.accountData.projects.length>=r&&r>=0&&(this.currentProjectId=r)})}catch(i){console.log(i)}})}createProject(){return _t(this,null,function*(){this.closeAddModule();let t=this.accountCookieService.getJwt();if(!(!this.projectNameForm.value||!this.projectNameForm.value.name||!t))try{this.accountData.projects=[...this.accountData.projects,(yield this.projectService.POSTcreateProject(t,this.projectNameForm.value.name)).projectData]}catch(i){console.log(i)}})}saveProject(){return _t(this,null,function*(){if(this.currentProjectId===void 0)return;let t=this.accountData.projects[this.currentProjectId]._id,i=this.currentPlanHouse;if(i===void 0)return;let r=this.accountCookieService.getJwt(),o={rooms:i,name:this.accountData.projects[this.currentProjectId].name};try{yield this.projectService.PUTupdateProject(r,t,o)}catch(s){console.log(s)}})}deleteProject(t){return _t(this,null,function*(){let i=this.accountCookieService.getJwt(),r=this.accountData.projects[t]._id;!i||!r||(yield this.projectService.DELETEdeleteProject(i,r),this.accountData.projects.splice(t,1))})}checkDesktop=Hp;getCurrentViewRoom(){if(this.planHouse!==void 0)return this.planHouse.currentViewRoom}updatePlanData(t){this.currentPlanHouse=t,this.accountData.projects[this.currentProjectId].rooms=t}closeAddModule(){this.addModule&&this.renderer.addClass(this.addModule,"disabled")}openAddModule(){this.addModule&&this.renderer.removeClass(this.addModule,"disabled")}closeProject(){this.saveProject(),this.currentProjectId=void 0;let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t)}openProject(t){let i=this.location.path()+"/"+t;this.location.replaceState(i),this.currentProjectId=t}projectNameForm=new ar({name:new ni("",[an.required])});static \u0275fac=function(i){return new(i||n)(ce(bl),ce(ur),ce(Vr),ce(Br),ce($t),ce(Yr),ce(GM),ce($i),ce(Bo))};static \u0275cmp=Tt({type:n,selectors:[["app-plan-house-page"]],viewQuery:function(i,r){if(i&1&&Fi(Epe,5),i&2){let o;mi(o=gi())&&(r.planHouse=o.first)}},decls:6,vars:3,consts:[["planHouse",""],[1,"body"],["class","mobileAlert",4,"ngIf"],["class","functionalModule",4,"ngIf"],[1,"addModule","disabled"],["class","addModuleSpan",3,"formGroup","ngSubmit",4,"ngIf"],[1,"mobileAlert"],[1,"functionalModule"],["class","chooseProjectSpan",3,"ngClass",4,"ngIf"],[1,"planModule",3,"ngClass"],[3,"click",4,"ngIf"],[3,"ngClass","planHouse","callSaveEmitter","planHouseEmitter",4,"ngIf"],[1,"chooseProjectSpan",3,"ngClass"],["class","projectCard",3,"click",4,"ngFor","ngForOf"],[1,"addProjectCard","projectCard",3,"click"],["src","/assets/images/addIcon.svg","alt",""],[1,"projectCard",3,"click"],[1,"mainProjectInformation"],[1,"projectTitle"],[1,"projectSchem"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"deleteProjectBtn",3,"click"],["src","/assets/images/deleteIcon.svg","alt",""],[1,"room"],[3,"click"],[3,"callSaveEmitter","planHouseEmitter","ngClass","planHouse"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt",""],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","name",1,"inputLabel"],["formControlName","name","id","name","type","text",1,"addModuleInput"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"]],template:function(i,r){i&1&&(P(0,"span",1),me(1,"app-navigation-panel"),Oe(2,Tpe,2,0,"p",2)(3,Ope,5,6,"span",3),O(),P(4,"span",4),Oe(5,Npe,12,2,"form",5),O()),i&2&&(W(2),q("ngIf",!r.checkDesktop()),W(),q("ngIf",r.checkDesktop()),W(2),q("ngIf",r.accountData))},dependencies:[Ys,Vp,li,In,Ns,al,Os,ol,sl,ya,_a,os],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.planModule[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;flex-direction:row;gap:10px;width:100%;transition:all .5s ease-in-out}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:35px;height:35px;background:none;border:none;cursor:pointer}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}app-plan-house[_ngcontent-%COMP%]{width:90%}.body[_ngcontent-%COMP%]{background-color:#000;gap:60px;display:flex;flex-direction:column;align-items:center;min-height:100vh}.chooseProjectSpan[_ngcontent-%COMP%]{width:calc(100% - 60px);z-index:0;gap:10px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;transition:all .5s ease-in-out;grid-area:1/1/2/2}@media (max-width: 1024px){.chooseProjectSpan[_ngcontent-%COMP%]{justify-content:center}}.projectCard[_ngcontent-%COMP%]{width:45%;position:relative;aspect-ratio:4/3;display:flex;justify-content:space-between;align-items:center;flex-direction:column;gap:10px;border-radius:10px;border:none;box-shadow:0 0 10px #fff;background-color:#000;cursor:pointer;overflow:hidden}@media (max-width: 1024px){.projectCard[_ngcontent-%COMP%]{width:clamp(450px,70%,700px)}}.deleteProjectBtn[_ngcontent-%COMP%]{height:35px;align-self:flex-end;margin:10px;background:none;border:none;aspect-ratio:1;cursor:pointer}.mainProjectInformation[_ngcontent-%COMP%]{display:flex;height:90%;width:100%;flex-direction:column;align-items:center}.addProjectCard[_ngcontent-%COMP%]{justify-content:center;background-color:#344e41;box-shadow:none}.projectCard[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-size:2em;color:#fff}.addProjectCard[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.projectTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;font-weight:700;font-size:20px}.projectSchem[_ngcontent-%COMP%]{display:grid;height:80%;aspect-ratio:1;gap:7px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:5px}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.functionalModule[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;align-items:flex-start;justify-items:center;width:90vw}@media (max-width: 768px){.functionalModule[_ngcontent-%COMP%]{width:calc(100vw - 10px)}}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.dividerWithText[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.dividerLine[_ngcontent-%COMP%]{flex:1;height:2px;background-color:#1f1f1f}.dividerText[_ngcontent-%COMP%]{padding:0 10px;color:#666;font-size:14px;text-transform:uppercase}.mobileAlert[_ngcontent-%COMP%]{color:#fff;width:300px;font-size:20px}']})}return n})();function Fpe(n,e){if(n&1){let t=Rt();P(0,"button",7),Me("click",function(){He(t);let r=ve();return ze(r.deleteColor())}),P(1,"div",8),km(),P(2,"svg",9),me(3,"path",10),O()()()}if(n&2){let t=ve();W(),Gn("background-color",t.deleteColorCalculate())}}var P5=(()=>{class n{route;cookieService;furnitureCardService;serverImageControl;router;furnitureModelService;errorHandler;constructor(t,i,r,o,s,a,l){this.route=t,this.cookieService=i,this.furnitureCardService=r,this.serverImageControl=o,this.router=s,this.furnitureModelService=a,this.errorHandler=l}idPage;createFurnitureComponent;furnitureData={name:"",description:"",colors:[],shops:[],additionalData:{},proportions:{width:null,height:null,length:null}};ngOnInit(){let t=this.cookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.idPage=this.route.snapshot.paramMap.get("id"),this.idPage!=="new"&&this.pageInit(t)}pageInit(t){return _t(this,null,function*(){try{let i=yield this.furnitureCardService.GETfurnitureCard(this.idPage,t);if(i.authorMatched===!1){this.router.navigateByUrl("/create/new");return}this.furnitureData=i.furnitureCard,this.createFurnitureComponent.currentColorId=0}catch(i){console.log(i)}})}transformUrlArrayToBlob(t){return _t(this,null,function*(){return yield Promise.all(t.map(r=>_t(null,null,function*(){return yield(yield fetch(r.toString())).blob()})))})}deleteFurnitureCard(){return _t(this,null,function*(){let t=this.cookieService.getJwt();if(t)try{yield this.serverImageControl.DELETEproject(t,this.idPage),yield this.furnitureCardService.DELETEfurnitureCard(t,this.idPage),this.router.navigateByUrl("/account")}catch(i){console.log(i)}})}createFurnitureCard(){return _t(this,null,function*(){let t=this.cookieService.getJwt();if(!(!this.checkValid("create")||!t))try{let i=this.createFurnitureComponent.furnitureData,r=(yield this.furnitureCardService.POSTcreateFurnitureCard(i,t)).furnitureData._id;i.colors.forEach(s=>_t(this,null,function*(){let l={images:yield this.transformUrlArrayToBlob(s.imagesData.images),idMainImage:s.imagesData.idMainImage};yield this.serverImageControl.POSTuploadProjectImages(s.color,l,t,r)}));let o=this.createFurnitureComponent.furnitureModelInput.files[0];yield this.furnitureModelService.POSTuploadFurnitureModel(o,t,r),this.router.navigateByUrl("/create/"+r),window.location.href=window.location.href}catch(i){console.log(i)}})}updateFurnitureCard(){return _t(this,null,function*(){let t=this.cookieService.getJwt();if(!(!this.checkValid("update")||!t))try{let i=this.createFurnitureComponent.furnitureData;console.log(i),yield this.furnitureCardService.PUTupdateFurnitureCard(i,this.idPage,t),i.colors.forEach(o=>_t(this,null,function*(){if(o.imagesData.images.length===0)return;let a={images:yield this.transformUrlArrayToBlob(o.imagesData.images),idMainImage:o.imagesData.idMainImage};yield this.serverImageControl.POSTuploadProjectImages(o.color,a,t,this.idPage)}));let r=this.createFurnitureComponent.furnitureModelInput.files;r[0]&&(yield this.furnitureModelService.POSTuploadFurnitureModel(r[0],t,this.idPage))}catch(i){console.log(i)}})}checkValid(t){let{colors:i,shops:r,proportions:o}=this.furnitureData,s=this.createFurnitureComponent.furnitureModelInput.files[0];if(i.length==0)return this.createFurnitureComponent.openColorModule(),!1;if(!o.height||!o.width||!o.length)return this.createFurnitureComponent.openAdditional(),this.errorHandler.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B",5e3),!1;if(!s&&t==="create")return this.errorHandler.setError("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 3D \u043C\u043E\u0434\u0435\u043B\u044C",5e3),!1;if(r.length==0)return this.errorHandler.setError("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",5e3),!1;for(let a of i)if(a.imagesData.images.length==0&&t==="create")return this.errorHandler.setError("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",5e3),!1;return!0}clearFurnitureCard(){this.createFurnitureComponent.currentColorId=void 0,this.furnitureData={name:"",description:"",colors:[],shops:[],additionalData:{},proportions:{width:0,height:0,length:0}}}deleteColorCalculate(){if(!(!this.createFurnitureComponent||this.createFurnitureComponent.currentColorId===void 0))return this.createFurnitureComponent.furnitureData.colors[this.createFurnitureComponent.currentColorId].color}deleteColor(){this.createFurnitureComponent.furnitureData.colors.length<=1||this.createFurnitureComponent.deleteColor()}getCurrentColorId(){if(this.createFurnitureComponent)return this.createFurnitureComponent.currentColorId}static \u0275fac=function(i){return new(i||n)(ce(Br),ce(ur),ce(pu),ce(Pu),ce(Vr),ce(Bp),ce($i))};static \u0275cmp=Tt({type:n,selectors:[["app-create-furniture-page"]],viewQuery:function(i,r){if(i&1&&Fi(Kg,5),i&2){let o;mi(o=gi())&&(r.createFurnitureComponent=o.first)}},decls:9,vars:7,consts:[[1,"body"],[3,"furnitureData"],[1,"functionalBtns"],["class","functionalBtn deleteBtn deleteColorBtn",3,"click",4,"ngIf"],[1,"functionalBtn","confirmBtn",3,"click"],[1,"functionalBtn","deleteBtn",3,"title"],["alt","",3,"click","src"],[1,"functionalBtn","deleteBtn","deleteColorBtn",3,"click"],[1,"colorCircle"],["version","1.1","viewBox","0 0 24 24",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"height","50%","aspect-ratio","1"],["d",`M14.8,12l3.6-3.6c0.8-0.8,0.8-2,0-2.8c-0.8-0.8-2-0.8-2.8,0L12,9.2L8.4,5.6c-0.8-0.8-2-0.8-2.8,0   
          c-0.8,0.8-0.8,2,0,2.8L9.2,12l-3.6,3.6c-0.8,0.8-0.8,2,0,2.8C6,18.8,6.5,19,7,19s1-0.2,1.4-0.6l3.6-3.6l3.6,3.6   
          C16,18.8,16.5,19,17,19s1-0.2,1.4-0.6c0.8-0.8,0.8-2,0-2.8L14.8,12z`,"id","exit","fill","white","stroke","black","stroke-width","1"]],template:function(i,r){i&1&&(P(0,"span",0),me(1,"app-navigation-panel")(2,"app-create-furniture",1),P(3,"span",2),Oe(4,Fpe,4,2,"button",3),P(5,"button",4),Me("click",function(){return r.idPage==="new"?r.createFurnitureCard():r.updateFurnitureCard()}),ne(6),O(),P(7,"button",5)(8,"img",6),Me("click",function(){return r.idPage==="new"?r.clearFurnitureCard():r.deleteFurnitureCard()}),O()()()()),i&2&&(W(2),q("furnitureData",r.furnitureData),W(2),q("ngIf",r.getCurrentColorId()!==void 0),W(2),er(" ",r.idPage==="new"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C":"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"," "),W(),q("title",r.idPage==="new"?"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u043E\u0440\u043C\u0443":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443 \u043C\u0435\u0431\u0435\u043B\u0438"),W(),Gn("rotate",r.idPage==="new"?"45deg":"0deg"),q("src","assets/images/"+(r.idPage==="new"?"addIcon.svg":"deleteIcon.svg"),kr))},dependencies:[Ys,Kg,In],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}button[_ngcontent-%COMP%]{transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.body[_ngcontent-%COMP%]{min-height:100vh;background-color:#000;width:100vw;display:flex;flex-direction:column;align-items:center}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}app-navigation-panel[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%]{width:80%}.confirmBtn[_ngcontent-%COMP%]{width:75%;color:#fff;padding:15px}.functionalBtns[_ngcontent-%COMP%]{margin-top:20px;width:clamp(300px,30vw,400px);display:flex;height:50px;gap:10px;justify-content:center;margin-bottom:30px}.functionalBtn[_ngcontent-%COMP%]{height:100%;border-radius:10px;background-color:#344e41;border:none;cursor:pointer}.deleteBtn[_ngcontent-%COMP%]{aspect-ratio:1;padding:1em;display:flex;align-items:center;justify-content:center}.colorCircle[_ngcontent-%COMP%]{border-radius:100%;height:100%;aspect-ratio:1;display:flex;align-items:center;justify-content:center;border:3px solid black;box-shadow:0 0 5px #fff;transition:background-color .3s ease-in-out}.deleteColorBtn[_ngcontent-%COMP%]{padding:5px;background-color:transparent}@media (max-width: 1440px){app-create-furniture[_ngcontent-%COMP%]{width:90%}}@media (max-width: 600px){.body[_ngcontent-%COMP%]{width:100vw;padding:0 10px;box-sizing:border-box}app-navigation-panel[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%]{width:100%}.functionalBtns[_ngcontent-%COMP%]{width:100%;margin:20px auto;max-width:400px;gap:5px}.confirmBtn[_ngcontent-%COMP%]{width:100%;padding:10px}}']})}return n})();var WM=(()=>{class n{httpModule;baseServiceUrl=Si+"shop/";constructor(t){this.httpModule=t}GETgetCategoryData(t,i){return _t(this,null,function*(){try{let{resultsArray:r}=yield _n(this.httpModule.get(`${this.baseServiceUrl}category?category=${t}&startRange=${i}`));return r=r.map(o=>ft(we({},o),{previewUrl:Si+o.previewUrl})),{resultsArray:r}}catch(r){throw console.error(r),r}})}GETgetAllFurnitures(t){return _t(this,null,function*(){try{let{resultsArray:i}=yield _n(this.httpModule.get(`${this.baseServiceUrl}all?startRange=${t}`));return i=i.map(r=>ft(we({},r),{previewUrl:Si+r.previewUrl})),{resultsArray:i}}catch(i){throw console.error(i),i}})}static \u0275fac=function(i){return new(i||n)(Ge(sr))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kpe=n=>({disabled:n});function Upe(n,e){if(n&1&&(P(0,"h1",8),ne(1),O()),n&2){let t=ve();W(),ei(t.currentCategoryId!==void 0?t.categoryArray[t.currentCategoryId].translateMany:"\u0412\u0441\u0435")}}function Bpe(n,e){if(n&1){let t=Rt();P(0,"span",12)(1,"button",13),Me("click",function(){He(t);let r=ve(2);return ze(r.closeFurniture())}),me(2,"img",14),O(),P(3,"span",15),me(4,"app-view-furniture",16),P(5,"button",17),Me("click",function(){He(t);let r=ve(2);return ze(r.openAddModule())}),ne(6,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),O()()()}if(n&2){let t=ve(2);W(4),q("furnitureId",t.furnitureId)}}function Vpe(n,e){if(n&1){let t=Rt();P(0,"button",25),Me("click",function(){let r=He(t).index,o=ve(3);return ze(o.changeCategory(r))}),ne(1),O()}if(n&2){let t=e.$implicit,i=e.index,r=ve(3);Ht("active",r.currentCategoryId===i),W(),er(" ",t.translateOne," ")}}function Hpe(n,e){if(n&1&&(P(0,"div",26)(1,"h2",27),ne(2),O(),me(3,"img",28),P(4,"a",29),ne(5),O()()),n&2){let t,i=e.$implicit,r=ve(3);W(2),ei(i.name),W(),q("src",i.previewUrl,kr),W(),q("routerLink",r.checkDesktop()?"/shop/"+((t=r.categoryName)!==null&&t!==void 0?t:"all")+"/"+i.furnitureId:"/plan"),W(),ei(i.cost)}}function zpe(n,e){if(n&1){let t=Rt();P(0,"span",18)(1,"span",19)(2,"span",20),Oe(3,Vpe,2,3,"button",21),P(4,"button",22),Me("click",function(){He(t);let r=ve(2);return ze(r.changeCategory(void 0))}),ne(5," \u0412\u0441\u0435 "),O()()(),P(6,"span",23),Oe(7,Hpe,6,4,"div",24),O()()}if(n&2){let t=ve(2);W(3),q("ngForOf",t.categoryArray),W(),Ht("active",t.currentCategoryId==null),W(3),q("ngForOf",t.furnituresArray)("ngForTrackBy",t.trackByFn)}}function jpe(n,e){if(n&1&&(P(0,"span",9),Oe(1,Bpe,7,1,"span",10)(2,zpe,8,5,"span",11),O()),n&2){let t=ve();W(),q("ngIf",t.furnitureId),W(),q("ngIf",!t.furnitureId)}}function Gpe(n,e){if(n&1&&(P(0,"a",36),ne(1),O()),n&2){let t=e.$implicit,i=e.index,r=ve().index,o=ve(2);q("routerLink",o.getPlanUrl(r,i)),W(),ei(t.name)}}function Wpe(n,e){if(n&1&&(P(0,"span")(1,"h3",34),ne(2),O(),Oe(3,Gpe,2,2,"a",35),O()),n&2){let t=e.$implicit;W(2),ei(t.name),W(),q("ngForOf",t.rooms)}}function $pe(n,e){n&1&&(P(0,"a",37),ne(1,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D"),O())}function qpe(n,e){if(n&1&&(P(0,"span",30)(1,"h2",31),ne(2,"\u041F\u0440\u043E\u0435\u043A\u0442\u044B"),O(),Oe(3,Wpe,4,2,"span",32)(4,$pe,2,0,"a",33),O()),n&2){let t=ve();W(3),q("ngForOf",t.accountProjects),W(),q("ngIf",t.accountProjects.length==0)}}var $M=(()=>{class n{route;shopService;router;accountService;accountCookieService;errorHandler;categoryService;location;elementRef;constructor(t,i,r,o,s,a,l,u,f){this.route=t,this.shopService=i,this.router=r,this.accountService=o,this.accountCookieService=s,this.errorHandler=a,this.categoryService=l,this.location=u,this.elementRef=f}furnitureId;categoryName;accountProjects;currentCategoryId;furnituresArray=[];openAddModuleToggle=!1;categoryArray=[];ngOnInit(){this.processRouteParams(),console.log("init")}initCategories(){return _t(this,null,function*(){try{this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray,this.categoryArray.forEach((t,i)=>{this.categoryName===t.name&&(this.currentCategoryId=i)})}catch(t){console.log(t)}})}furnituresInit(){return _t(this,null,function*(){if(this.furnitureId){let t=this.accountCookieService.getJwt();try{this.accountProjects=(yield this.accountService.GETaccount(t)).accountData.projects}catch(i){console.log(i)}}else this.categoryName!==void 0?yield this.requestCategoryFurnitures(this.categoryName,0):yield this.requestAllFurnitures(0)})}requestCategoryFurnitures(t,i){return _t(this,null,function*(){let r=(yield this.shopService.GETgetCategoryData(t,i)).resultsArray;this.furnituresArray=[...this.furnituresArray,...r]})}requestAllFurnitures(t){return _t(this,null,function*(){let i=(yield this.shopService.GETgetAllFurnitures(t)).resultsArray;this.furnituresArray=[...this.furnituresArray,...i]})}processRouteParams(){let t=this.route.snapshot.params;this.furnitureId=t.furnitureId,this.categoryName=t.category,this.furnituresInit(),this.initCategories()}setScrollObserver(){let t=this.elementRef.nativeElement.querySelector(".category"),i=t.querySelectorAll(".furnitureItem"),r=0,o={root:t,rootMargin:"0px",threshold:.5},s=(l,u)=>{l.forEach(f=>_t(this,null,function*(){if(f.isIntersecting){let h=f.target;(Array.from(i).indexOf(h)+1)%8===0&&!h.dataset.observed&&(h.dataset.observed="true",r++,this.categoryName!==void 0?yield this.requestCategoryFurnitures(this.categoryName,this.furnituresArray.length):yield this.requestAllFurnitures(this.furnituresArray.length))}}))},a=new IntersectionObserver(s,o);i.forEach(l=>a.observe(l))}openAddModule(){this.openAddModuleToggle=!0}closeAddModule(){this.openAddModuleToggle=!1}checkDesktop=Hp;changeCategory(t){this.furnituresArray.length=0,this.currentCategoryId=t;let i=this.location.path();t!==void 0?(this.categoryName=this.categoryArray[t].name,i+="/"+this.categoryArray[t].name):(this.categoryName=void 0,i="/shop"),this.location.replaceState(i),this.furnituresInit()}closeFurniture(){this.router.navigateByUrl("/shop"+(this.categoryName==="all"?"":"/"+this.categoryName))}getPlanUrl(t,i){return`/plan/${t}/${i}/${this.furnitureId}`}trackByFn(t,i){return i.id}static \u0275fac=function(i){return new(i||n)(ce(Br),ce(WM),ce(Vr),ce(bl),ce(ur),ce($i),ce(Zh),ce(Bo),ce($t))};static \u0275cmp=Tt({type:n,selectors:[["app-shop-page"]],decls:9,vars:6,consts:[[1,"body"],["class","categoryTitle","title","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",4,"ngIf"],["class","shopModule",4,"ngIf"],[1,"addModule",3,"ngClass"],[1,"addModuleSpan"],["type","button","title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],["class","addModuleFormContent",4,"ngIf"],["title","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",1,"categoryTitle"],[1,"shopModule"],["class","viewFurnitureSpan",4,"ngIf"],["class","mainArea",4,"ngIf"],[1,"viewFurnitureSpan"],["title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"closeFurniture",3,"click"],["src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"furnitureCard"],[3,"furnitureId"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",1,"chooseAddProjectBtn",3,"click"],[1,"mainArea"],[1,"params"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",3,"active","click",4,"ngFor","ngForOf"],["title","\u0412\u0441\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",1,"furnitureCategoryButton",3,"click"],[1,"category"],["class","furnitureItem",4,"ngFor","ngForOf","ngForTrackBy"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",1,"furnitureCategoryButton",3,"click"],[1,"furnitureItem"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle"],["loading","lazy","alt","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438","title","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438",1,"furniturePreview",3,"src"],["title","\u0426\u0435\u043D\u0430 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureLink",3,"routerLink"],[1,"addModuleFormContent"],["title","\u041F\u0440\u043E\u0435\u043A\u0442\u044B",1,"addModuleTitle"],[4,"ngFor","ngForOf"],["routerLink","/plan","class","noProjectsBtn","title","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D",4,"ngIf"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B",3,"routerLink",4,"ngFor","ngForOf"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B",3,"routerLink"],["routerLink","/plan","title","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D",1,"noProjectsBtn"]],template:function(i,r){i&1&&(P(0,"span",0),me(1,"app-navigation-panel"),Oe(2,Upe,2,1,"h1",1)(3,jpe,3,2,"span",2),O(),P(4,"span",3)(5,"span",4)(6,"button",5),Me("click",function(){return r.closeAddModule()}),me(7,"img",6),O(),Oe(8,qpe,5,2,"span",7),O()()),i&2&&(W(2),q("ngIf",!r.furnitureId),W(),q("ngIf",r.furnituresArray),W(),q("ngClass",gr(4,kpe,!r.openAddModuleToggle)),W(4),q("ngIf",r.accountProjects))},dependencies:[Ys,li,In,Ox,Ps,os],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.furnitureLink[_ngcontent-%COMP%], .furnitureCategoryButton[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.furnitureLink[_ngcontent-%COMP%]:hover, .furnitureCategoryButton[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px;z-index:10}.body[_ngcontent-%COMP%]{min-height:calc(100vh - 30px);background-color:#000;display:flex;align-items:center;flex-direction:column;gap:30px;padding-bottom:30px}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:30%;justify-content:center}.furnitureCategoryButton.active[_ngcontent-%COMP%]{background-color:#a3b18a;color:#000}.shopModule[_ngcontent-%COMP%]{width:90%;margin:0 auto;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;z-index:1}.category[_ngcontent-%COMP%]{width:75%;height:60vh;transition:all .5s ease-in-out;overflow-y:scroll;display:flex;flex-wrap:wrap;justify-content:space-around;z-index:1}.categoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.params[_ngcontent-%COMP%]{width:20%;display:flex;gap:10px}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);max-width:60%;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:space-between}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%;border-radius:10px}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:100%;justify-content:start}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;color:#fff;cursor:pointer;border:none}.closeFurniture[_ngcontent-%COMP%]{background:none;border:none;width:35px;aspect-ratio:1;align-self:flex-start;cursor:pointer;grid-area:1/1/2/2;z-index:2}.closeFurniture[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}.viewFurnitureSpan[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;gap:10px;grid-area:1/1/2/2}.mainArea[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex}app-view-furniture[_ngcontent-%COMP%]{width:95%}.furnitureCard[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%;display:flex;flex-direction:column;align-items:center;z-index:1}.chooseAddProjectBtn[_ngcontent-%COMP%]{width:clamp(250px,35%,320px);padding:15px;background-color:#a3b18a;color:#dad7cd;border-radius:10px;border:none;cursor:pointer}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;align-items:center;gap:15px;box-shadow:0 0 10px #fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.disabled[_ngcontent-%COMP%]{opacity:0;z-index:0}.addModuleFormContent[_ngcontent-%COMP%]{padding-top:20px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px;color:#dad7cd;border-radius:10px;text-decoration:none;text-align:center}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{background-color:#a3b18a;width:calc(100% - 20px);margin-bottom:0;cursor:default}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background-color:#344e41;width:calc(80% - 20px);align-self:end;margin-top:5px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.noProjectsBtn[_ngcontent-%COMP%]{color:#dad7cd;text-align:center;width:50%;padding:15px 10px;background-color:#344e41;border-radius:10px;text-decoration:none;transition:background-color .3s ease-in-out}.noProjectsBtn[_ngcontent-%COMP%]:hover{background-color:#a3b18a}@media (max-width: 768px){.category[_ngcontent-%COMP%], .params[_ngcontent-%COMP%], .furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{width:100%}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(20% - 5px)}.mainArea[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 600px){.category[_ngcontent-%COMP%]{max-height:50vh;margin-top:15px}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(25% - 5px)}.furnitureItem[_ngcontent-%COMP%]{flex:auto;width:100%;max-width:none}.chooseAddProjectBtn[_ngcontent-%COMP%]{width:calc(100% - 20px);max-width:400px}}']})}return n})();var O5=[{component:D5,path:""},{component:A5,path:"account"},{component:R5,path:"login"},{component:tv,path:"plan"},{component:tv,path:"plan/:planId"},{component:tv,path:"plan/:planId/:roomId"},{component:tv,path:"plan/:planId/:roomId/:furnitureId"},{component:P5,path:"create/:id"},{component:$M,path:"shop"},{component:$M,path:"shop/:category"},{component:$M,path:"shop/:category/:furnitureId"}];var Xpe=(()=>{class n extends fu{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(Ge(zt),Ge(Id),Ge(Ad))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function Ype(){return new ex}function Zpe(n,e,t){return new lx(n,e,t)}var N5=[{provide:Ad,useFactory:Ype},{provide:fu,useClass:Xpe},{provide:Jc,useFactory:Zpe,deps:[Xm,fu,Mn]}],lke=[{provide:Id,useClass:KD},{provide:OT,useValue:"NoopAnimations"},...N5],Kpe=[{provide:Id,useFactory:()=>new sx},{provide:OT,useFactory:()=>"BrowserAnimations"},...N5];function F5(){return ud("NgEagerAnimations"),[...Kpe]}var L5=(()=>{class n{constructor(){this.tuiPlatform=D(QD,{skipSelf:!0})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiPlatform",""]],hostVars:1,hostBindings:function(i,r){i&2&&or("data-platform",r.tuiPlatform)},inputs:{tuiPlatform:"tuiPlatform"},features:[un([{provide:QD,useFactory:()=>D(n).tuiPlatform}])]})}}return n})();var k5=(()=>{class n extends yt{visualViewport=D(vo).visualViewport;stream$=this.visualViewport?Jn(Ji(this.visualViewport,"resize"),Ji(this.visualViewport,"scroll"),Ji(this.visualViewport,"scrollend")).pipe(Vi(null),Le(()=>this.visualViewport),rn(Boolean),Hl({bufferSize:1,refCount:!0})):ai;constructor(){super(t=>this.stream$.subscribe(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var U5=(()=>{class n{constructor(){this.w=D(Wi),this.style=zn().style,this.$=D(k5).pipe(Dr()).subscribe(({offsetLeft:t,offsetTop:i,height:r,width:o,scale:s})=>{this.style.setProperty("--tui-viewport-x",Qr(t)),this.style.setProperty("--tui-viewport-y",Qr(i)),this.style.setProperty("--tui-viewport-height",Qr(r)),this.style.setProperty("--tui-viewport-width",Qr(o)),this.style.setProperty("--tui-viewport-scale",String(s)),this.style.setProperty("--tui-viewport-vh",Qr(this.w.innerHeight/100)),this.style.setProperty("--tui-viewport-vw",Qr(this.w.innerWidth/100))})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["","tuiVisualViewport",""]]})}}return n})();var eme=(()=>{class n extends qh{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var B5=(()=>{class n extends px{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Hn(n)))(r||n)}})()}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-popups"]],features:[un([mx(eme)]),jn],decls:2,vars:0,consts:[["viewContainer",""]],template:function(i,r){i&1&&Qi(0,null,0)},encapsulation:2,changeDetection:0})}}return n})();var tme=["*",[["tuiOverContent"]],[["tuiOverDialogs"]],[["tuiOverAlerts"]],[["tuiOverDropdowns"]],[["tuiOverHints"]]],nme=["*","tuiOverContent","tuiOverDialogs","tuiOverAlerts","tuiOverDropdowns","tuiOverHints"];function ime(n,e){n&1&&me(0,"tui-scroll-controls",3)}function rme(n,e){if(n&1&&(Ja(0),Oe(1,ime,1,0,"tui-scroll-controls",2),me(2,"tui-popups"),is(3,1),me(4,"tui-dialogs"),is(5,2),me(6,"tui-alerts"),is(7,3),me(8,"tui-dropdowns"),is(9,4),me(10,"tui-hints"),is(11,5),Qa()),n&2){let t=ve();W(),q("ngIf",t.scrollbars)}}var V5=(()=>{class n{constructor(){this.doc=D(zt),this.el=zn(),this.reducedMotion=D(rI),this.duration=sI(D(dl)),this.isChildRoot=!!D(n,{optional:!0,skipSelf:!0}),this.top=ji(!this.isChildRoot),this.isMobileRes=rc(D(XB).pipe(Le(t=>t==="mobile"),Vw()),{initialValue:!1}),this.nativeScrollbar=D(Cx).mode==="native",this.scrollbars=!this.nativeScrollbar&&!D(Ma)&&!this.isChildRoot,this.top()&&(this.doc.documentElement.setAttribute("data-tui-theme",D(HB).toLowerCase()),this.nativeScrollbar||this.doc.defaultView?.document.documentElement.classList.add("tui-zero-scrollbar"))}get isTopLayer(){return this.doc.fullscreenElement?this.doc.fullscreenElement===this.el:!this.isChildRoot}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Tt({type:n,selectors:[["tui-root"]],hostAttrs:["data-tui-version","4.36.0"],hostVars:6,hostBindings:function(i,r){i&1&&Me("touchstart.passive.zoneless",function(){return 0})("fullscreenchange",function(){return r.top.set(r.isTopLayer)},!1,Gi),i&2&&(Gn("--tui-duration",r.duration,"ms")("--tui-scroll-behavior",r.reducedMotion?"auto":"smooth"),Ht("_mobile",r.isMobileRes()))},features:[Kl([L5,U5,FB])],ngContentSelectors:nme,decls:3,vars:1,consts:[[1,"t-root-content"],[4,"ngIf"],["class","t-root-scrollbar",4,"ngIf"],[1,"t-root-scrollbar"]],template:function(i,r){i&1&&(iu(tme),P(0,"div",0),is(1),O(),Oe(2,rme,12,1,"ng-container",1)),i&2&&(W(2),q("ngIf",r.top()))},dependencies:[In,vV,mV,JB,iV,B5,Xg],styles:[`@keyframes tuiPresent{to{content:""}}@keyframes tuiSkeletonVibe{to{opacity:.5}}.tui-zero-scrollbar{scrollbar-width:none;-ms-overflow-style:none}.tui-zero-scrollbar::-webkit-scrollbar,.tui-zero-scrollbar::-webkit-scrollbar-thumb{display:none}body,input{margin:0}tui-root{position:relative;display:block;font:var(--tui-font-text-s);color:var(--tui-text-primary);flex:1;border-image:conic-gradient(var(--tui-background-base) 0 0) fill 0/0/0 0 100vh 0;-webkit-tap-highlight-color:transparent}tui-root>.t-root-scrollbar{position:fixed;top:0;left:0;bottom:0;right:0;z-index:0;display:none;margin:0}[data-tui-theme] tui-root>.t-root-scrollbar{display:block}.t-root-content{position:relative;top:var(--t-root-top);block-size:100%;isolation:isolate}.t-root-content>*{--t-root-top: 0}[tuiDropdownButton][tuiDropdownButton]{display:none}
`],encapsulation:2})}}return n})();var ome=(n,e)=>({appearBody:n,disappearBody:e}),qR=(()=>{class n{errorService;cookieService;constructor(t,i){this.errorService=t,this.cookieService=i}errorMessage;ngOnInit(){this.errorService.error$.subscribe(t=>{this.errorMessage=t})}reloadPage(){window.location.reload()}logout(){this.cookieService.deleteJwt(),this.cookieService.deleteUserType(),this.reloadPage()}static \u0275fac=function(i){return new(i||n)(ce($i),ce(ur))};static \u0275cmp=Tt({type:n,selectors:[["app-error-handler"]],decls:11,vars:5,consts:[[1,"body",3,"ngClass"],[1,"textSpan"],[1,"title"],[1,"errorMessage"],[1,"btnsSpan"],[1,"solutionBtn",3,"click"],["loading","lazy","src","/assets/images/reloadIcon.svg","alt",""],["loading","lazy","src","/assets/images/logoutIcon.svg","alt",""]],template:function(i,r){i&1&&(P(0,"span",0)(1,"span",1)(2,"h2",2),ne(3,"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A"),O(),P(4,"h3",3),ne(5),O()(),P(6,"span",4)(7,"button",5),Me("click",function(){return r.reloadPage()}),me(8,"img",6),O(),P(9,"button",5),Me("click",function(){return r.logout()}),me(10,"img",7),O()()()),i&2&&(q("ngClass",P_(2,ome,r.errorMessage.length>0,r.errorMessage.length<1)),W(5),ei(r.errorMessage))},dependencies:[os],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px #fff;background-color:#000;width:clamp(250px,30vw,350px);display:flex;flex-direction:row;padding:0 10px;justify-content:space-around;position:fixed;bottom:0;opacity:0;left:50%;transform:translate(-50%);transition:all .5s ease-in-out}.appearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_appearHandler .5s forwards}.disappearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_disappearHandler .5s forwards}.textSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;padding:10px 0;font-size:105%;width:60%;justify-content:center}.title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:17px}.errorMessage[_ngcontent-%COMP%]{color:red;margin:0;width:100%;font-weight:400;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.solutionBtn[_ngcontent-%COMP%]{width:100%;height:100%;background:none;margin:0;border:none;cursor:pointer}.btnsSpan[_ngcontent-%COMP%]{display:flex;justify-self:flex-end;width:26%}.reloadPageBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:50%}@keyframes _ngcontent-%COMP%_appearHandler{0%{opacity:0;bottom:0}to{opacity:1;bottom:50px}}@keyframes _ngcontent-%COMP%_disappearHandler{0%{opacity:1;bottom:50px}to{opacity:0;bottom:-100%}}']})}return n})();var qM=(()=>{class n{title="HouseQuality";static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Tt({type:n,selectors:[["app-root"]],features:[un([Rx,qR,bl,zp,ur,Pu,GM,Vp,BM,pu,Bp,WM,VM,Location])],decls:3,vars:0,template:function(i,r){i&1&&(P(0,"tui-root"),me(1,"router-outlet")(2,"app-error-handler"),O())},dependencies:[gg,qR,V5],encapsulation:2})}return n})();var H5=(()=>{class n{errorHandler;constructor(t){this.errorHandler=t}intercept(t,i){return i.handle(t).pipe(oa(r=>(this.errorHandler.setError(r.error.message,5e3),Xc(()=>r))))}static \u0275fac=function(i){return new(i||n)(Ge($i))};static \u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();var XR={providers:[oD(O5),kL(),F5(),T1(D1()),HL(),{provide:W_,useClass:H5,multi:!0}]};Zm(qM,XR).catch(n=>console.error(n));Zm(qM,XR).then(()=>{"serviceWorker"in navigator?navigator.serviceWorker.register("/model-scw.js",{scope:"/"}).then(n=>{console.log("Service Worker \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D:",n),navigator.serviceWorker.ready.then(e=>{console.log("\u0421\u0435\u0440\u0432\u0438\u0441-\u0432\u043E\u0440\u043A\u0435\u0440 \u0433\u043E\u0442\u043E\u0432:",e)}).catch(e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0438 \u0433\u043E\u0442\u043E\u0432\u043D\u043E\u0441\u0442\u0438 \u0441\u0435\u0440\u0432\u0438\u0441-\u0432\u043E\u0440\u043A\u0435\u0440\u0430:",e)})}).catch(n=>console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 Service Worker:",n)):console.log("Service Worker \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044F \u0432 \u044D\u0442\u043E\u043C \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435")}).catch(n=>console.error(n));
