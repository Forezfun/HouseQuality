var YW=Object.create;var pE=Object.defineProperty,ZW=Object.defineProperties,KW=Object.getOwnPropertyDescriptor,JW=Object.getOwnPropertyDescriptors,QW=Object.getOwnPropertyNames,y0=Object.getOwnPropertySymbols,e6=Object.getPrototypeOf,mE=Object.prototype.hasOwnProperty,sP=Object.prototype.propertyIsEnumerable;var oP=(n,e,t)=>e in n?pE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Oe=(n,e)=>{for(var t in e||={})mE.call(e,t)&&oP(n,t,e[t]);if(y0)for(var t of y0(e))sP.call(e,t)&&oP(n,t,e[t]);return n},wt=(n,e)=>ZW(n,JW(e));var Md=(n,e)=>{var t={};for(var i in n)mE.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&y0)for(var i of y0(n))e.indexOf(i)<0&&sP.call(n,i)&&(t[i]=n[i]);return t};var aP=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var t6=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of QW(e))!mE.call(n,r)&&r!==t&&pE(n,r,{get:()=>e[r],enumerable:!(i=KW(e,r))||i.enumerable});return n};var gE=(n,e,t)=>(t=n!=null?YW(e6(n)):{},t6(e||!n||!n.__esModule?pE(t,"default",{value:n,enumerable:!0}):t,n));var at=(n,e,t)=>new Promise((i,r)=>{var o=l=>{try{a(t.next(l))}catch(u){r(u)}},s=l=>{try{a(t.throw(l))}catch(u){r(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var y1=aP((Of,Sm)=>{"use strict";(function(){var n,e="4.17.21",t=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",u=1,f=2,h=4,p=1,g=2,v=1,w=2,y=4,_=8,T=16,E=32,M=64,V=128,F=256,L=512,G=30,O="...",I=800,z=16,he=1,ae=2,Te=3,be=1/0,q=9007199254740991,ie=17976931348623157e292,$=NaN,ge=4294967295,Ue=ge-1,tt=ge>>>1,me=[["ary",V],["bind",v],["bindKey",w],["curry",_],["curryRight",T],["flip",L],["partial",E],["partialRight",M],["rearg",F]],re="[object Arguments]",U="[object Array]",Z="[object AsyncFunction]",ve="[object Boolean]",se="[object Date]",He="[object DOMException]",je="[object Error]",Fe="[object Function]",rt="[object GeneratorFunction]",pt="[object Map]",ut="[object Number]",H="[object Null]",qt="[object Object]",Ge="[object Promise]",At="[object Proxy]",Xe="[object RegExp]",Vt="[object Set]",ht="[object String]",N="[object Symbol]",S="[object Undefined]",oe="[object WeakMap]",xe="[object WeakSet]",Ae="[object ArrayBuffer]",fe="[object DataView]",$e="[object Float32Array]",qe="[object Float64Array]",gt="[object Int8Array]",vt="[object Int16Array]",Ne="[object Int32Array]",nt="[object Uint8Array]",yt="[object Uint8ClampedArray]",bt="[object Uint16Array]",it="[object Uint32Array]",sn=/\b__p \+= '';/g,Ht=/\b(__p \+=) '' \+/g,Dn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Ze=/[&<>"']/g,pe=RegExp(X.source),Se=RegExp(Ze.source),et=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,Ot=/<%=([\s\S]+?)%>/g,zn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mi=/^\w*$/,xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zi=/[\\^$.*+?()[\]{}|]/g,Gr=RegExp(Zi.source),Uc=/^\s+/,aa=/\s/,Bo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jl=/\{\n\/\* \[wrapped with (.+)\] \*/,bs=/,? & /,Gl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vo=/[()=,{}\[\]\/\s]/,Rg=/\\(\\)?/g,cd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ih=/\w*$/,Pg=/^[-+]0x[0-9a-f]+$/i,ib=/^0b[01]+$/i,rb=/^\[object .+?Constructor\]$/,ob=/^0o[0-7]+$/i,sb=/^(?:0|[1-9]\d*)$/,ab=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ud=/($^)/,A=/['\n\r\u2028\u2029\\]/g,J="\\ud800-\\udfff",le="\\u0300-\\u036f",ce="\\ufe20-\\ufe2f",ee="\\u20d0-\\u20ff",Le=le+ce+ee,Ke="\\u2700-\\u27bf",ot="a-z\\xdf-\\xf6\\xf8-\\xff",dt="\\xac\\xb1\\xd7\\xf7",Lt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nt="\\u2000-\\u206f",_t=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pn="A-Z\\xc0-\\xd6\\xd8-\\xde",bn="\\ufe0e\\ufe0f",di=dt+Lt+Nt+_t,Xn="['\u2019]",wn="["+J+"]",xt="["+di+"]",mi="["+Le+"]",En="\\d+",po="["+Ke+"]",ja="["+ot+"]",mr="[^"+J+di+En+Ke+ot+pn+"]",Ga="\\ud83c[\\udffb-\\udfff]",Yn="(?:"+mi+"|"+Ga+")",Cr="[^"+J+"]",gr="(?:\\ud83c[\\udde6-\\uddff]){2}",Hi="[\\ud800-\\udbff][\\udc00-\\udfff]",Si="["+pn+"]",dd="\\u200d",la="(?:"+ja+"|"+mr+")",JV="(?:"+Si+"|"+mr+")",qI="(?:"+Xn+"(?:d|ll|m|re|s|t|ve))?",XI="(?:"+Xn+"(?:D|LL|M|RE|S|T|VE))?",YI=Yn+"?",ZI="["+bn+"]?",QV="(?:"+dd+"(?:"+[Cr,gr,Hi].join("|")+")"+ZI+YI+")*",eH="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tH="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",KI=ZI+YI+QV,nH="(?:"+[po,gr,Hi].join("|")+")"+KI,iH="(?:"+[Cr+mi+"?",mi,gr,Hi,wn].join("|")+")",rH=RegExp(Xn,"g"),oH=RegExp(mi,"g"),lb=RegExp(Ga+"(?="+Ga+")|"+iH+KI,"g"),sH=RegExp([Si+"?"+ja+"+"+qI+"(?="+[xt,Si,"$"].join("|")+")",JV+"+"+XI+"(?="+[xt,Si+la,"$"].join("|")+")",Si+"?"+la+"+"+qI,Si+"+"+XI,tH,eH,En,nH].join("|"),"g"),aH=RegExp("["+dd+J+Le+bn+"]"),lH=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cH=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],uH=-1,ei={};ei[$e]=ei[qe]=ei[gt]=ei[vt]=ei[Ne]=ei[nt]=ei[yt]=ei[bt]=ei[it]=!0,ei[re]=ei[U]=ei[Ae]=ei[ve]=ei[fe]=ei[se]=ei[je]=ei[Fe]=ei[pt]=ei[ut]=ei[qt]=ei[Xe]=ei[Vt]=ei[ht]=ei[oe]=!1;var Zn={};Zn[re]=Zn[U]=Zn[Ae]=Zn[fe]=Zn[ve]=Zn[se]=Zn[$e]=Zn[qe]=Zn[gt]=Zn[vt]=Zn[Ne]=Zn[pt]=Zn[ut]=Zn[qt]=Zn[Xe]=Zn[Vt]=Zn[ht]=Zn[N]=Zn[nt]=Zn[yt]=Zn[bt]=Zn[it]=!0,Zn[je]=Zn[Fe]=Zn[oe]=!1;var dH={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},fH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hH={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pH={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mH=parseFloat,gH=parseInt,JI=typeof global=="object"&&global&&global.Object===Object&&global,vH=typeof self=="object"&&self&&self.Object===Object&&self,Ki=JI||vH||Function("return this")(),cb=typeof Of=="object"&&Of&&!Of.nodeType&&Of,Bc=cb&&typeof Sm=="object"&&Sm&&!Sm.nodeType&&Sm,QI=Bc&&Bc.exports===cb,ub=QI&&JI.process,Ho=function(){try{var Y=Bc&&Bc.require&&Bc.require("util").types;return Y||ub&&ub.binding&&ub.binding("util")}catch{}}(),eD=Ho&&Ho.isArrayBuffer,tD=Ho&&Ho.isDate,nD=Ho&&Ho.isMap,iD=Ho&&Ho.isRegExp,rD=Ho&&Ho.isSet,oD=Ho&&Ho.isTypedArray;function mo(Y,ye,ue){switch(ue.length){case 0:return Y.call(ye);case 1:return Y.call(ye,ue[0]);case 2:return Y.call(ye,ue[0],ue[1]);case 3:return Y.call(ye,ue[0],ue[1],ue[2])}return Y.apply(ye,ue)}function yH(Y,ye,ue,st){for(var zt=-1,Cn=Y==null?0:Y.length;++zt<Cn;){var zi=Y[zt];ye(st,zi,ue(zi),Y)}return st}function zo(Y,ye){for(var ue=-1,st=Y==null?0:Y.length;++ue<st&&ye(Y[ue],ue,Y)!==!1;);return Y}function _H(Y,ye){for(var ue=Y==null?0:Y.length;ue--&&ye(Y[ue],ue,Y)!==!1;);return Y}function sD(Y,ye){for(var ue=-1,st=Y==null?0:Y.length;++ue<st;)if(!ye(Y[ue],ue,Y))return!1;return!0}function Wl(Y,ye){for(var ue=-1,st=Y==null?0:Y.length,zt=0,Cn=[];++ue<st;){var zi=Y[ue];ye(zi,ue,Y)&&(Cn[zt++]=zi)}return Cn}function Og(Y,ye){var ue=Y==null?0:Y.length;return!!ue&&fd(Y,ye,0)>-1}function db(Y,ye,ue){for(var st=-1,zt=Y==null?0:Y.length;++st<zt;)if(ue(ye,Y[st]))return!0;return!1}function oi(Y,ye){for(var ue=-1,st=Y==null?0:Y.length,zt=Array(st);++ue<st;)zt[ue]=ye(Y[ue],ue,Y);return zt}function $l(Y,ye){for(var ue=-1,st=ye.length,zt=Y.length;++ue<st;)Y[zt+ue]=ye[ue];return Y}function fb(Y,ye,ue,st){var zt=-1,Cn=Y==null?0:Y.length;for(st&&Cn&&(ue=Y[++zt]);++zt<Cn;)ue=ye(ue,Y[zt],zt,Y);return ue}function xH(Y,ye,ue,st){var zt=Y==null?0:Y.length;for(st&&zt&&(ue=Y[--zt]);zt--;)ue=ye(ue,Y[zt],zt,Y);return ue}function hb(Y,ye){for(var ue=-1,st=Y==null?0:Y.length;++ue<st;)if(ye(Y[ue],ue,Y))return!0;return!1}var wH=pb("length");function bH(Y){return Y.split("")}function EH(Y){return Y.match(Gl)||[]}function aD(Y,ye,ue){var st;return ue(Y,function(zt,Cn,zi){if(ye(zt,Cn,zi))return st=Cn,!1}),st}function Ng(Y,ye,ue,st){for(var zt=Y.length,Cn=ue+(st?1:-1);st?Cn--:++Cn<zt;)if(ye(Y[Cn],Cn,Y))return Cn;return-1}function fd(Y,ye,ue){return ye===ye?FH(Y,ye,ue):Ng(Y,lD,ue)}function MH(Y,ye,ue,st){for(var zt=ue-1,Cn=Y.length;++zt<Cn;)if(st(Y[zt],ye))return zt;return-1}function lD(Y){return Y!==Y}function cD(Y,ye){var ue=Y==null?0:Y.length;return ue?gb(Y,ye)/ue:$}function pb(Y){return function(ye){return ye==null?n:ye[Y]}}function mb(Y){return function(ye){return Y==null?n:Y[ye]}}function uD(Y,ye,ue,st,zt){return zt(Y,function(Cn,zi,jn){ue=st?(st=!1,Cn):ye(ue,Cn,zi,jn)}),ue}function SH(Y,ye){var ue=Y.length;for(Y.sort(ye);ue--;)Y[ue]=Y[ue].value;return Y}function gb(Y,ye){for(var ue,st=-1,zt=Y.length;++st<zt;){var Cn=ye(Y[st]);Cn!==n&&(ue=ue===n?Cn:ue+Cn)}return ue}function vb(Y,ye){for(var ue=-1,st=Array(Y);++ue<Y;)st[ue]=ye(ue);return st}function CH(Y,ye){return oi(ye,function(ue){return[ue,Y[ue]]})}function dD(Y){return Y&&Y.slice(0,mD(Y)+1).replace(Uc,"")}function go(Y){return function(ye){return Y(ye)}}function yb(Y,ye){return oi(ye,function(ue){return Y[ue]})}function Dh(Y,ye){return Y.has(ye)}function fD(Y,ye){for(var ue=-1,st=Y.length;++ue<st&&fd(ye,Y[ue],0)>-1;);return ue}function hD(Y,ye){for(var ue=Y.length;ue--&&fd(ye,Y[ue],0)>-1;);return ue}function TH(Y,ye){for(var ue=Y.length,st=0;ue--;)Y[ue]===ye&&++st;return st}var AH=mb(dH),IH=mb(fH);function DH(Y){return"\\"+pH[Y]}function RH(Y,ye){return Y==null?n:Y[ye]}function hd(Y){return aH.test(Y)}function PH(Y){return lH.test(Y)}function OH(Y){for(var ye,ue=[];!(ye=Y.next()).done;)ue.push(ye.value);return ue}function _b(Y){var ye=-1,ue=Array(Y.size);return Y.forEach(function(st,zt){ue[++ye]=[zt,st]}),ue}function pD(Y,ye){return function(ue){return Y(ye(ue))}}function ql(Y,ye){for(var ue=-1,st=Y.length,zt=0,Cn=[];++ue<st;){var zi=Y[ue];(zi===ye||zi===l)&&(Y[ue]=l,Cn[zt++]=ue)}return Cn}function Fg(Y){var ye=-1,ue=Array(Y.size);return Y.forEach(function(st){ue[++ye]=st}),ue}function NH(Y){var ye=-1,ue=Array(Y.size);return Y.forEach(function(st){ue[++ye]=[st,st]}),ue}function FH(Y,ye,ue){for(var st=ue-1,zt=Y.length;++st<zt;)if(Y[st]===ye)return st;return-1}function LH(Y,ye,ue){for(var st=ue+1;st--;)if(Y[st]===ye)return st;return st}function pd(Y){return hd(Y)?UH(Y):wH(Y)}function Es(Y){return hd(Y)?BH(Y):bH(Y)}function mD(Y){for(var ye=Y.length;ye--&&aa.test(Y.charAt(ye)););return ye}var kH=mb(hH);function UH(Y){for(var ye=lb.lastIndex=0;lb.test(Y);)++ye;return ye}function BH(Y){return Y.match(lb)||[]}function VH(Y){return Y.match(sH)||[]}var HH=function Y(ye){ye=ye==null?Ki:Xl.defaults(Ki.Object(),ye,Xl.pick(Ki,cH));var ue=ye.Array,st=ye.Date,zt=ye.Error,Cn=ye.Function,zi=ye.Math,jn=ye.Object,xb=ye.RegExp,zH=ye.String,jo=ye.TypeError,Lg=ue.prototype,jH=Cn.prototype,md=jn.prototype,kg=ye["__core-js_shared__"],Ug=jH.toString,Nn=md.hasOwnProperty,GH=0,gD=function(){var c=/[^.]+$/.exec(kg&&kg.keys&&kg.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Bg=md.toString,WH=Ug.call(jn),$H=Ki._,qH=xb("^"+Ug.call(Nn).replace(Zi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vg=QI?ye.Buffer:n,Yl=ye.Symbol,Hg=ye.Uint8Array,vD=Vg?Vg.allocUnsafe:n,zg=pD(jn.getPrototypeOf,jn),yD=jn.create,_D=md.propertyIsEnumerable,jg=Lg.splice,xD=Yl?Yl.isConcatSpreadable:n,Rh=Yl?Yl.iterator:n,Vc=Yl?Yl.toStringTag:n,Gg=function(){try{var c=Wc(jn,"defineProperty");return c({},"",{}),c}catch{}}(),XH=ye.clearTimeout!==Ki.clearTimeout&&ye.clearTimeout,YH=st&&st.now!==Ki.Date.now&&st.now,ZH=ye.setTimeout!==Ki.setTimeout&&ye.setTimeout,Wg=zi.ceil,$g=zi.floor,wb=jn.getOwnPropertySymbols,KH=Vg?Vg.isBuffer:n,wD=ye.isFinite,JH=Lg.join,QH=pD(jn.keys,jn),ji=zi.max,vr=zi.min,ez=st.now,tz=ye.parseInt,bD=zi.random,nz=Lg.reverse,bb=Wc(ye,"DataView"),Ph=Wc(ye,"Map"),Eb=Wc(ye,"Promise"),gd=Wc(ye,"Set"),Oh=Wc(ye,"WeakMap"),Nh=Wc(jn,"create"),qg=Oh&&new Oh,vd={},iz=$c(bb),rz=$c(Ph),oz=$c(Eb),sz=$c(gd),az=$c(Oh),Xg=Yl?Yl.prototype:n,Fh=Xg?Xg.valueOf:n,ED=Xg?Xg.toString:n;function C(c){if(gi(c)&&!Wt(c)&&!(c instanceof mn)){if(c instanceof Go)return c;if(Nn.call(c,"__wrapped__"))return MR(c)}return new Go(c)}var yd=function(){function c(){}return function(d){if(!fi(d))return{};if(yD)return yD(d);c.prototype=d;var m=new c;return c.prototype=n,m}}();function Yg(){}function Go(c,d){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}C.templateSettings={escape:et,evaluate:Ye,interpolate:Ot,variable:"",imports:{_:C}},C.prototype=Yg.prototype,C.prototype.constructor=C,Go.prototype=yd(Yg.prototype),Go.prototype.constructor=Go;function mn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function lz(){var c=new mn(this.__wrapped__);return c.__actions__=Wr(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Wr(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Wr(this.__views__),c}function cz(){if(this.__filtered__){var c=new mn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function uz(){var c=this.__wrapped__.value(),d=this.__dir__,m=Wt(c),x=d<0,b=m?c.length:0,D=b5(0,b,this.__views__),k=D.start,j=D.end,Q=j-k,Ee=x?j:k-1,Me=this.__iteratees__,Pe=Me.length,Je=0,mt=vr(Q,this.__takeCount__);if(!m||!x&&b==Q&&mt==Q)return qD(c,this.__actions__);var It=[];e:for(;Q--&&Je<mt;){Ee+=d;for(var en=-1,Dt=c[Ee];++en<Pe;){var un=Me[en],yn=un.iteratee,_o=un.type,Ir=yn(Dt);if(_o==ae)Dt=Ir;else if(!Ir){if(_o==he)continue e;break e}}It[Je++]=Dt}return It}mn.prototype=yd(Yg.prototype),mn.prototype.constructor=mn;function Hc(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var x=c[d];this.set(x[0],x[1])}}function dz(){this.__data__=Nh?Nh(null):{},this.size=0}function fz(c){var d=this.has(c)&&delete this.__data__[c];return this.size-=d?1:0,d}function hz(c){var d=this.__data__;if(Nh){var m=d[c];return m===s?n:m}return Nn.call(d,c)?d[c]:n}function pz(c){var d=this.__data__;return Nh?d[c]!==n:Nn.call(d,c)}function mz(c,d){var m=this.__data__;return this.size+=this.has(c)?0:1,m[c]=Nh&&d===n?s:d,this}Hc.prototype.clear=dz,Hc.prototype.delete=fz,Hc.prototype.get=hz,Hc.prototype.has=pz,Hc.prototype.set=mz;function Wa(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var x=c[d];this.set(x[0],x[1])}}function gz(){this.__data__=[],this.size=0}function vz(c){var d=this.__data__,m=Zg(d,c);if(m<0)return!1;var x=d.length-1;return m==x?d.pop():jg.call(d,m,1),--this.size,!0}function yz(c){var d=this.__data__,m=Zg(d,c);return m<0?n:d[m][1]}function _z(c){return Zg(this.__data__,c)>-1}function xz(c,d){var m=this.__data__,x=Zg(m,c);return x<0?(++this.size,m.push([c,d])):m[x][1]=d,this}Wa.prototype.clear=gz,Wa.prototype.delete=vz,Wa.prototype.get=yz,Wa.prototype.has=_z,Wa.prototype.set=xz;function $a(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var x=c[d];this.set(x[0],x[1])}}function wz(){this.size=0,this.__data__={hash:new Hc,map:new(Ph||Wa),string:new Hc}}function bz(c){var d=l0(this,c).delete(c);return this.size-=d?1:0,d}function Ez(c){return l0(this,c).get(c)}function Mz(c){return l0(this,c).has(c)}function Sz(c,d){var m=l0(this,c),x=m.size;return m.set(c,d),this.size+=m.size==x?0:1,this}$a.prototype.clear=wz,$a.prototype.delete=bz,$a.prototype.get=Ez,$a.prototype.has=Mz,$a.prototype.set=Sz;function zc(c){var d=-1,m=c==null?0:c.length;for(this.__data__=new $a;++d<m;)this.add(c[d])}function Cz(c){return this.__data__.set(c,s),this}function Tz(c){return this.__data__.has(c)}zc.prototype.add=zc.prototype.push=Cz,zc.prototype.has=Tz;function Ms(c){var d=this.__data__=new Wa(c);this.size=d.size}function Az(){this.__data__=new Wa,this.size=0}function Iz(c){var d=this.__data__,m=d.delete(c);return this.size=d.size,m}function Dz(c){return this.__data__.get(c)}function Rz(c){return this.__data__.has(c)}function Pz(c,d){var m=this.__data__;if(m instanceof Wa){var x=m.__data__;if(!Ph||x.length<t-1)return x.push([c,d]),this.size=++m.size,this;m=this.__data__=new $a(x)}return m.set(c,d),this.size=m.size,this}Ms.prototype.clear=Az,Ms.prototype.delete=Iz,Ms.prototype.get=Dz,Ms.prototype.has=Rz,Ms.prototype.set=Pz;function MD(c,d){var m=Wt(c),x=!m&&qc(c),b=!m&&!x&&ec(c),D=!m&&!x&&!b&&bd(c),k=m||x||b||D,j=k?vb(c.length,zH):[],Q=j.length;for(var Ee in c)(d||Nn.call(c,Ee))&&!(k&&(Ee=="length"||b&&(Ee=="offset"||Ee=="parent")||D&&(Ee=="buffer"||Ee=="byteLength"||Ee=="byteOffset")||Za(Ee,Q)))&&j.push(Ee);return j}function SD(c){var d=c.length;return d?c[Nb(0,d-1)]:n}function Oz(c,d){return c0(Wr(c),jc(d,0,c.length))}function Nz(c){return c0(Wr(c))}function Mb(c,d,m){(m!==n&&!Ss(c[d],m)||m===n&&!(d in c))&&qa(c,d,m)}function Lh(c,d,m){var x=c[d];(!(Nn.call(c,d)&&Ss(x,m))||m===n&&!(d in c))&&qa(c,d,m)}function Zg(c,d){for(var m=c.length;m--;)if(Ss(c[m][0],d))return m;return-1}function Fz(c,d,m,x){return Zl(c,function(b,D,k){d(x,b,m(b),k)}),x}function CD(c,d){return c&&ua(d,Ji(d),c)}function Lz(c,d){return c&&ua(d,qr(d),c)}function qa(c,d,m){d=="__proto__"&&Gg?Gg(c,d,{configurable:!0,enumerable:!0,value:m,writable:!0}):c[d]=m}function Sb(c,d){for(var m=-1,x=d.length,b=ue(x),D=c==null;++m<x;)b[m]=D?n:oE(c,d[m]);return b}function jc(c,d,m){return c===c&&(m!==n&&(c=c<=m?c:m),d!==n&&(c=c>=d?c:d)),c}function Wo(c,d,m,x,b,D){var k,j=d&u,Q=d&f,Ee=d&h;if(m&&(k=b?m(c,x,b,D):m(c)),k!==n)return k;if(!fi(c))return c;var Me=Wt(c);if(Me){if(k=M5(c),!j)return Wr(c,k)}else{var Pe=yr(c),Je=Pe==Fe||Pe==rt;if(ec(c))return ZD(c,j);if(Pe==qt||Pe==re||Je&&!b){if(k=Q||Je?{}:mR(c),!j)return Q?h5(c,Lz(k,c)):f5(c,CD(k,c))}else{if(!Zn[Pe])return b?c:{};k=S5(c,Pe,j)}}D||(D=new Ms);var mt=D.get(c);if(mt)return mt;D.set(c,k),GR(c)?c.forEach(function(Dt){k.add(Wo(Dt,d,m,Dt,c,D))}):zR(c)&&c.forEach(function(Dt,un){k.set(un,Wo(Dt,d,m,un,c,D))});var It=Ee?Q?Wb:Gb:Q?qr:Ji,en=Me?n:It(c);return zo(en||c,function(Dt,un){en&&(un=Dt,Dt=c[un]),Lh(k,un,Wo(Dt,d,m,un,c,D))}),k}function kz(c){var d=Ji(c);return function(m){return TD(m,c,d)}}function TD(c,d,m){var x=m.length;if(c==null)return!x;for(c=jn(c);x--;){var b=m[x],D=d[b],k=c[b];if(k===n&&!(b in c)||!D(k))return!1}return!0}function AD(c,d,m){if(typeof c!="function")throw new jo(r);return jh(function(){c.apply(n,m)},d)}function kh(c,d,m,x){var b=-1,D=Og,k=!0,j=c.length,Q=[],Ee=d.length;if(!j)return Q;m&&(d=oi(d,go(m))),x?(D=db,k=!1):d.length>=t&&(D=Dh,k=!1,d=new zc(d));e:for(;++b<j;){var Me=c[b],Pe=m==null?Me:m(Me);if(Me=x||Me!==0?Me:0,k&&Pe===Pe){for(var Je=Ee;Je--;)if(d[Je]===Pe)continue e;Q.push(Me)}else D(d,Pe,x)||Q.push(Me)}return Q}var Zl=tR(ca),ID=tR(Tb,!0);function Uz(c,d){var m=!0;return Zl(c,function(x,b,D){return m=!!d(x,b,D),m}),m}function Kg(c,d,m){for(var x=-1,b=c.length;++x<b;){var D=c[x],k=d(D);if(k!=null&&(j===n?k===k&&!yo(k):m(k,j)))var j=k,Q=D}return Q}function Bz(c,d,m,x){var b=c.length;for(m=Zt(m),m<0&&(m=-m>b?0:b+m),x=x===n||x>b?b:Zt(x),x<0&&(x+=b),x=m>x?0:$R(x);m<x;)c[m++]=d;return c}function DD(c,d){var m=[];return Zl(c,function(x,b,D){d(x,b,D)&&m.push(x)}),m}function ir(c,d,m,x,b){var D=-1,k=c.length;for(m||(m=T5),b||(b=[]);++D<k;){var j=c[D];d>0&&m(j)?d>1?ir(j,d-1,m,x,b):$l(b,j):x||(b[b.length]=j)}return b}var Cb=nR(),RD=nR(!0);function ca(c,d){return c&&Cb(c,d,Ji)}function Tb(c,d){return c&&RD(c,d,Ji)}function Jg(c,d){return Wl(d,function(m){return Ka(c[m])})}function Gc(c,d){d=Jl(d,c);for(var m=0,x=d.length;c!=null&&m<x;)c=c[da(d[m++])];return m&&m==x?c:n}function PD(c,d,m){var x=d(c);return Wt(c)?x:$l(x,m(c))}function Tr(c){return c==null?c===n?S:H:Vc&&Vc in jn(c)?w5(c):N5(c)}function Ab(c,d){return c>d}function Vz(c,d){return c!=null&&Nn.call(c,d)}function Hz(c,d){return c!=null&&d in jn(c)}function zz(c,d,m){return c>=vr(d,m)&&c<ji(d,m)}function Ib(c,d,m){for(var x=m?db:Og,b=c[0].length,D=c.length,k=D,j=ue(D),Q=1/0,Ee=[];k--;){var Me=c[k];k&&d&&(Me=oi(Me,go(d))),Q=vr(Me.length,Q),j[k]=!m&&(d||b>=120&&Me.length>=120)?new zc(k&&Me):n}Me=c[0];var Pe=-1,Je=j[0];e:for(;++Pe<b&&Ee.length<Q;){var mt=Me[Pe],It=d?d(mt):mt;if(mt=m||mt!==0?mt:0,!(Je?Dh(Je,It):x(Ee,It,m))){for(k=D;--k;){var en=j[k];if(!(en?Dh(en,It):x(c[k],It,m)))continue e}Je&&Je.push(It),Ee.push(mt)}}return Ee}function jz(c,d,m,x){return ca(c,function(b,D,k){d(x,m(b),D,k)}),x}function Uh(c,d,m){d=Jl(d,c),c=_R(c,d);var x=c==null?c:c[da(qo(d))];return x==null?n:mo(x,c,m)}function OD(c){return gi(c)&&Tr(c)==re}function Gz(c){return gi(c)&&Tr(c)==Ae}function Wz(c){return gi(c)&&Tr(c)==se}function Bh(c,d,m,x,b){return c===d?!0:c==null||d==null||!gi(c)&&!gi(d)?c!==c&&d!==d:$z(c,d,m,x,Bh,b)}function $z(c,d,m,x,b,D){var k=Wt(c),j=Wt(d),Q=k?U:yr(c),Ee=j?U:yr(d);Q=Q==re?qt:Q,Ee=Ee==re?qt:Ee;var Me=Q==qt,Pe=Ee==qt,Je=Q==Ee;if(Je&&ec(c)){if(!ec(d))return!1;k=!0,Me=!1}if(Je&&!Me)return D||(D=new Ms),k||bd(c)?fR(c,d,m,x,b,D):_5(c,d,Q,m,x,b,D);if(!(m&p)){var mt=Me&&Nn.call(c,"__wrapped__"),It=Pe&&Nn.call(d,"__wrapped__");if(mt||It){var en=mt?c.value():c,Dt=It?d.value():d;return D||(D=new Ms),b(en,Dt,m,x,D)}}return Je?(D||(D=new Ms),x5(c,d,m,x,b,D)):!1}function qz(c){return gi(c)&&yr(c)==pt}function Db(c,d,m,x){var b=m.length,D=b,k=!x;if(c==null)return!D;for(c=jn(c);b--;){var j=m[b];if(k&&j[2]?j[1]!==c[j[0]]:!(j[0]in c))return!1}for(;++b<D;){j=m[b];var Q=j[0],Ee=c[Q],Me=j[1];if(k&&j[2]){if(Ee===n&&!(Q in c))return!1}else{var Pe=new Ms;if(x)var Je=x(Ee,Me,Q,c,d,Pe);if(!(Je===n?Bh(Me,Ee,p|g,x,Pe):Je))return!1}}return!0}function ND(c){if(!fi(c)||I5(c))return!1;var d=Ka(c)?qH:rb;return d.test($c(c))}function Xz(c){return gi(c)&&Tr(c)==Xe}function Yz(c){return gi(c)&&yr(c)==Vt}function Zz(c){return gi(c)&&m0(c.length)&&!!ei[Tr(c)]}function FD(c){return typeof c=="function"?c:c==null?Xr:typeof c=="object"?Wt(c)?UD(c[0],c[1]):kD(c):iP(c)}function Rb(c){if(!zh(c))return QH(c);var d=[];for(var m in jn(c))Nn.call(c,m)&&m!="constructor"&&d.push(m);return d}function Kz(c){if(!fi(c))return O5(c);var d=zh(c),m=[];for(var x in c)x=="constructor"&&(d||!Nn.call(c,x))||m.push(x);return m}function Pb(c,d){return c<d}function LD(c,d){var m=-1,x=$r(c)?ue(c.length):[];return Zl(c,function(b,D,k){x[++m]=d(b,D,k)}),x}function kD(c){var d=qb(c);return d.length==1&&d[0][2]?vR(d[0][0],d[0][1]):function(m){return m===c||Db(m,c,d)}}function UD(c,d){return Yb(c)&&gR(d)?vR(da(c),d):function(m){var x=oE(m,c);return x===n&&x===d?sE(m,c):Bh(d,x,p|g)}}function Qg(c,d,m,x,b){c!==d&&Cb(d,function(D,k){if(b||(b=new Ms),fi(D))Jz(c,d,k,m,Qg,x,b);else{var j=x?x(Kb(c,k),D,k+"",c,d,b):n;j===n&&(j=D),Mb(c,k,j)}},qr)}function Jz(c,d,m,x,b,D,k){var j=Kb(c,m),Q=Kb(d,m),Ee=k.get(Q);if(Ee){Mb(c,m,Ee);return}var Me=D?D(j,Q,m+"",c,d,k):n,Pe=Me===n;if(Pe){var Je=Wt(Q),mt=!Je&&ec(Q),It=!Je&&!mt&&bd(Q);Me=Q,Je||mt||It?Wt(j)?Me=j:Ci(j)?Me=Wr(j):mt?(Pe=!1,Me=ZD(Q,!0)):It?(Pe=!1,Me=KD(Q,!0)):Me=[]:Gh(Q)||qc(Q)?(Me=j,qc(j)?Me=qR(j):(!fi(j)||Ka(j))&&(Me=mR(Q))):Pe=!1}Pe&&(k.set(Q,Me),b(Me,Q,x,D,k),k.delete(Q)),Mb(c,m,Me)}function BD(c,d){var m=c.length;if(m)return d+=d<0?m:0,Za(d,m)?c[d]:n}function VD(c,d,m){d.length?d=oi(d,function(D){return Wt(D)?function(k){return Gc(k,D.length===1?D[0]:D)}:D}):d=[Xr];var x=-1;d=oi(d,go(Mt()));var b=LD(c,function(D,k,j){var Q=oi(d,function(Ee){return Ee(D)});return{criteria:Q,index:++x,value:D}});return SH(b,function(D,k){return d5(D,k,m)})}function Qz(c,d){return HD(c,d,function(m,x){return sE(c,x)})}function HD(c,d,m){for(var x=-1,b=d.length,D={};++x<b;){var k=d[x],j=Gc(c,k);m(j,k)&&Vh(D,Jl(k,c),j)}return D}function e5(c){return function(d){return Gc(d,c)}}function Ob(c,d,m,x){var b=x?MH:fd,D=-1,k=d.length,j=c;for(c===d&&(d=Wr(d)),m&&(j=oi(c,go(m)));++D<k;)for(var Q=0,Ee=d[D],Me=m?m(Ee):Ee;(Q=b(j,Me,Q,x))>-1;)j!==c&&jg.call(j,Q,1),jg.call(c,Q,1);return c}function zD(c,d){for(var m=c?d.length:0,x=m-1;m--;){var b=d[m];if(m==x||b!==D){var D=b;Za(b)?jg.call(c,b,1):kb(c,b)}}return c}function Nb(c,d){return c+$g(bD()*(d-c+1))}function t5(c,d,m,x){for(var b=-1,D=ji(Wg((d-c)/(m||1)),0),k=ue(D);D--;)k[x?D:++b]=c,c+=m;return k}function Fb(c,d){var m="";if(!c||d<1||d>q)return m;do d%2&&(m+=c),d=$g(d/2),d&&(c+=c);while(d);return m}function an(c,d){return Jb(yR(c,d,Xr),c+"")}function n5(c){return SD(Ed(c))}function i5(c,d){var m=Ed(c);return c0(m,jc(d,0,m.length))}function Vh(c,d,m,x){if(!fi(c))return c;d=Jl(d,c);for(var b=-1,D=d.length,k=D-1,j=c;j!=null&&++b<D;){var Q=da(d[b]),Ee=m;if(Q==="__proto__"||Q==="constructor"||Q==="prototype")return c;if(b!=k){var Me=j[Q];Ee=x?x(Me,Q,j):n,Ee===n&&(Ee=fi(Me)?Me:Za(d[b+1])?[]:{})}Lh(j,Q,Ee),j=j[Q]}return c}var jD=qg?function(c,d){return qg.set(c,d),c}:Xr,r5=Gg?function(c,d){return Gg(c,"toString",{configurable:!0,enumerable:!1,value:lE(d),writable:!0})}:Xr;function o5(c){return c0(Ed(c))}function $o(c,d,m){var x=-1,b=c.length;d<0&&(d=-d>b?0:b+d),m=m>b?b:m,m<0&&(m+=b),b=d>m?0:m-d>>>0,d>>>=0;for(var D=ue(b);++x<b;)D[x]=c[x+d];return D}function s5(c,d){var m;return Zl(c,function(x,b,D){return m=d(x,b,D),!m}),!!m}function e0(c,d,m){var x=0,b=c==null?x:c.length;if(typeof d=="number"&&d===d&&b<=tt){for(;x<b;){var D=x+b>>>1,k=c[D];k!==null&&!yo(k)&&(m?k<=d:k<d)?x=D+1:b=D}return b}return Lb(c,d,Xr,m)}function Lb(c,d,m,x){var b=0,D=c==null?0:c.length;if(D===0)return 0;d=m(d);for(var k=d!==d,j=d===null,Q=yo(d),Ee=d===n;b<D;){var Me=$g((b+D)/2),Pe=m(c[Me]),Je=Pe!==n,mt=Pe===null,It=Pe===Pe,en=yo(Pe);if(k)var Dt=x||It;else Ee?Dt=It&&(x||Je):j?Dt=It&&Je&&(x||!mt):Q?Dt=It&&Je&&!mt&&(x||!en):mt||en?Dt=!1:Dt=x?Pe<=d:Pe<d;Dt?b=Me+1:D=Me}return vr(D,Ue)}function GD(c,d){for(var m=-1,x=c.length,b=0,D=[];++m<x;){var k=c[m],j=d?d(k):k;if(!m||!Ss(j,Q)){var Q=j;D[b++]=k===0?0:k}}return D}function WD(c){return typeof c=="number"?c:yo(c)?$:+c}function vo(c){if(typeof c=="string")return c;if(Wt(c))return oi(c,vo)+"";if(yo(c))return ED?ED.call(c):"";var d=c+"";return d=="0"&&1/c==-be?"-0":d}function Kl(c,d,m){var x=-1,b=Og,D=c.length,k=!0,j=[],Q=j;if(m)k=!1,b=db;else if(D>=t){var Ee=d?null:v5(c);if(Ee)return Fg(Ee);k=!1,b=Dh,Q=new zc}else Q=d?[]:j;e:for(;++x<D;){var Me=c[x],Pe=d?d(Me):Me;if(Me=m||Me!==0?Me:0,k&&Pe===Pe){for(var Je=Q.length;Je--;)if(Q[Je]===Pe)continue e;d&&Q.push(Pe),j.push(Me)}else b(Q,Pe,m)||(Q!==j&&Q.push(Pe),j.push(Me))}return j}function kb(c,d){return d=Jl(d,c),c=_R(c,d),c==null||delete c[da(qo(d))]}function $D(c,d,m,x){return Vh(c,d,m(Gc(c,d)),x)}function t0(c,d,m,x){for(var b=c.length,D=x?b:-1;(x?D--:++D<b)&&d(c[D],D,c););return m?$o(c,x?0:D,x?D+1:b):$o(c,x?D+1:0,x?b:D)}function qD(c,d){var m=c;return m instanceof mn&&(m=m.value()),fb(d,function(x,b){return b.func.apply(b.thisArg,$l([x],b.args))},m)}function Ub(c,d,m){var x=c.length;if(x<2)return x?Kl(c[0]):[];for(var b=-1,D=ue(x);++b<x;)for(var k=c[b],j=-1;++j<x;)j!=b&&(D[b]=kh(D[b]||k,c[j],d,m));return Kl(ir(D,1),d,m)}function XD(c,d,m){for(var x=-1,b=c.length,D=d.length,k={};++x<b;){var j=x<D?d[x]:n;m(k,c[x],j)}return k}function Bb(c){return Ci(c)?c:[]}function Vb(c){return typeof c=="function"?c:Xr}function Jl(c,d){return Wt(c)?c:Yb(c,d)?[c]:ER(Rn(c))}var a5=an;function Ql(c,d,m){var x=c.length;return m=m===n?x:m,!d&&m>=x?c:$o(c,d,m)}var YD=XH||function(c){return Ki.clearTimeout(c)};function ZD(c,d){if(d)return c.slice();var m=c.length,x=vD?vD(m):new c.constructor(m);return c.copy(x),x}function Hb(c){var d=new c.constructor(c.byteLength);return new Hg(d).set(new Hg(c)),d}function l5(c,d){var m=d?Hb(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.byteLength)}function c5(c){var d=new c.constructor(c.source,Ih.exec(c));return d.lastIndex=c.lastIndex,d}function u5(c){return Fh?jn(Fh.call(c)):{}}function KD(c,d){var m=d?Hb(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.length)}function JD(c,d){if(c!==d){var m=c!==n,x=c===null,b=c===c,D=yo(c),k=d!==n,j=d===null,Q=d===d,Ee=yo(d);if(!j&&!Ee&&!D&&c>d||D&&k&&Q&&!j&&!Ee||x&&k&&Q||!m&&Q||!b)return 1;if(!x&&!D&&!Ee&&c<d||Ee&&m&&b&&!x&&!D||j&&m&&b||!k&&b||!Q)return-1}return 0}function d5(c,d,m){for(var x=-1,b=c.criteria,D=d.criteria,k=b.length,j=m.length;++x<k;){var Q=JD(b[x],D[x]);if(Q){if(x>=j)return Q;var Ee=m[x];return Q*(Ee=="desc"?-1:1)}}return c.index-d.index}function QD(c,d,m,x){for(var b=-1,D=c.length,k=m.length,j=-1,Q=d.length,Ee=ji(D-k,0),Me=ue(Q+Ee),Pe=!x;++j<Q;)Me[j]=d[j];for(;++b<k;)(Pe||b<D)&&(Me[m[b]]=c[b]);for(;Ee--;)Me[j++]=c[b++];return Me}function eR(c,d,m,x){for(var b=-1,D=c.length,k=-1,j=m.length,Q=-1,Ee=d.length,Me=ji(D-j,0),Pe=ue(Me+Ee),Je=!x;++b<Me;)Pe[b]=c[b];for(var mt=b;++Q<Ee;)Pe[mt+Q]=d[Q];for(;++k<j;)(Je||b<D)&&(Pe[mt+m[k]]=c[b++]);return Pe}function Wr(c,d){var m=-1,x=c.length;for(d||(d=ue(x));++m<x;)d[m]=c[m];return d}function ua(c,d,m,x){var b=!m;m||(m={});for(var D=-1,k=d.length;++D<k;){var j=d[D],Q=x?x(m[j],c[j],j,m,c):n;Q===n&&(Q=c[j]),b?qa(m,j,Q):Lh(m,j,Q)}return m}function f5(c,d){return ua(c,Xb(c),d)}function h5(c,d){return ua(c,hR(c),d)}function n0(c,d){return function(m,x){var b=Wt(m)?yH:Fz,D=d?d():{};return b(m,c,Mt(x,2),D)}}function _d(c){return an(function(d,m){var x=-1,b=m.length,D=b>1?m[b-1]:n,k=b>2?m[2]:n;for(D=c.length>3&&typeof D=="function"?(b--,D):n,k&&Ar(m[0],m[1],k)&&(D=b<3?n:D,b=1),d=jn(d);++x<b;){var j=m[x];j&&c(d,j,x,D)}return d})}function tR(c,d){return function(m,x){if(m==null)return m;if(!$r(m))return c(m,x);for(var b=m.length,D=d?b:-1,k=jn(m);(d?D--:++D<b)&&x(k[D],D,k)!==!1;);return m}}function nR(c){return function(d,m,x){for(var b=-1,D=jn(d),k=x(d),j=k.length;j--;){var Q=k[c?j:++b];if(m(D[Q],Q,D)===!1)break}return d}}function p5(c,d,m){var x=d&v,b=Hh(c);function D(){var k=this&&this!==Ki&&this instanceof D?b:c;return k.apply(x?m:this,arguments)}return D}function iR(c){return function(d){d=Rn(d);var m=hd(d)?Es(d):n,x=m?m[0]:d.charAt(0),b=m?Ql(m,1).join(""):d.slice(1);return x[c]()+b}}function xd(c){return function(d){return fb(tP(eP(d).replace(rH,"")),c,"")}}function Hh(c){return function(){var d=arguments;switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3]);case 5:return new c(d[0],d[1],d[2],d[3],d[4]);case 6:return new c(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new c(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var m=yd(c.prototype),x=c.apply(m,d);return fi(x)?x:m}}function m5(c,d,m){var x=Hh(c);function b(){for(var D=arguments.length,k=ue(D),j=D,Q=wd(b);j--;)k[j]=arguments[j];var Ee=D<3&&k[0]!==Q&&k[D-1]!==Q?[]:ql(k,Q);if(D-=Ee.length,D<m)return lR(c,d,i0,b.placeholder,n,k,Ee,n,n,m-D);var Me=this&&this!==Ki&&this instanceof b?x:c;return mo(Me,this,k)}return b}function rR(c){return function(d,m,x){var b=jn(d);if(!$r(d)){var D=Mt(m,3);d=Ji(d),m=function(j){return D(b[j],j,b)}}var k=c(d,m,x);return k>-1?b[D?d[k]:k]:n}}function oR(c){return Ya(function(d){var m=d.length,x=m,b=Go.prototype.thru;for(c&&d.reverse();x--;){var D=d[x];if(typeof D!="function")throw new jo(r);if(b&&!k&&a0(D)=="wrapper")var k=new Go([],!0)}for(x=k?x:m;++x<m;){D=d[x];var j=a0(D),Q=j=="wrapper"?$b(D):n;Q&&Zb(Q[0])&&Q[1]==(V|_|E|F)&&!Q[4].length&&Q[9]==1?k=k[a0(Q[0])].apply(k,Q[3]):k=D.length==1&&Zb(D)?k[j]():k.thru(D)}return function(){var Ee=arguments,Me=Ee[0];if(k&&Ee.length==1&&Wt(Me))return k.plant(Me).value();for(var Pe=0,Je=m?d[Pe].apply(this,Ee):Me;++Pe<m;)Je=d[Pe].call(this,Je);return Je}})}function i0(c,d,m,x,b,D,k,j,Q,Ee){var Me=d&V,Pe=d&v,Je=d&w,mt=d&(_|T),It=d&L,en=Je?n:Hh(c);function Dt(){for(var un=arguments.length,yn=ue(un),_o=un;_o--;)yn[_o]=arguments[_o];if(mt)var Ir=wd(Dt),xo=TH(yn,Ir);if(x&&(yn=QD(yn,x,b,mt)),D&&(yn=eR(yn,D,k,mt)),un-=xo,mt&&un<Ee){var Ti=ql(yn,Ir);return lR(c,d,i0,Dt.placeholder,m,yn,Ti,j,Q,Ee-un)}var Cs=Pe?m:this,Qa=Je?Cs[c]:c;return un=yn.length,j?yn=F5(yn,j):It&&un>1&&yn.reverse(),Me&&Q<un&&(yn.length=Q),this&&this!==Ki&&this instanceof Dt&&(Qa=en||Hh(Qa)),Qa.apply(Cs,yn)}return Dt}function sR(c,d){return function(m,x){return jz(m,c,d(x),{})}}function r0(c,d){return function(m,x){var b;if(m===n&&x===n)return d;if(m!==n&&(b=m),x!==n){if(b===n)return x;typeof m=="string"||typeof x=="string"?(m=vo(m),x=vo(x)):(m=WD(m),x=WD(x)),b=c(m,x)}return b}}function zb(c){return Ya(function(d){return d=oi(d,go(Mt())),an(function(m){var x=this;return c(d,function(b){return mo(b,x,m)})})})}function o0(c,d){d=d===n?" ":vo(d);var m=d.length;if(m<2)return m?Fb(d,c):d;var x=Fb(d,Wg(c/pd(d)));return hd(d)?Ql(Es(x),0,c).join(""):x.slice(0,c)}function g5(c,d,m,x){var b=d&v,D=Hh(c);function k(){for(var j=-1,Q=arguments.length,Ee=-1,Me=x.length,Pe=ue(Me+Q),Je=this&&this!==Ki&&this instanceof k?D:c;++Ee<Me;)Pe[Ee]=x[Ee];for(;Q--;)Pe[Ee++]=arguments[++j];return mo(Je,b?m:this,Pe)}return k}function aR(c){return function(d,m,x){return x&&typeof x!="number"&&Ar(d,m,x)&&(m=x=n),d=Ja(d),m===n?(m=d,d=0):m=Ja(m),x=x===n?d<m?1:-1:Ja(x),t5(d,m,x,c)}}function s0(c){return function(d,m){return typeof d=="string"&&typeof m=="string"||(d=Xo(d),m=Xo(m)),c(d,m)}}function lR(c,d,m,x,b,D,k,j,Q,Ee){var Me=d&_,Pe=Me?k:n,Je=Me?n:k,mt=Me?D:n,It=Me?n:D;d|=Me?E:M,d&=~(Me?M:E),d&y||(d&=~(v|w));var en=[c,d,b,mt,Pe,It,Je,j,Q,Ee],Dt=m.apply(n,en);return Zb(c)&&xR(Dt,en),Dt.placeholder=x,wR(Dt,c,d)}function jb(c){var d=zi[c];return function(m,x){if(m=Xo(m),x=x==null?0:vr(Zt(x),292),x&&wD(m)){var b=(Rn(m)+"e").split("e"),D=d(b[0]+"e"+(+b[1]+x));return b=(Rn(D)+"e").split("e"),+(b[0]+"e"+(+b[1]-x))}return d(m)}}var v5=gd&&1/Fg(new gd([,-0]))[1]==be?function(c){return new gd(c)}:dE;function cR(c){return function(d){var m=yr(d);return m==pt?_b(d):m==Vt?NH(d):CH(d,c(d))}}function Xa(c,d,m,x,b,D,k,j){var Q=d&w;if(!Q&&typeof c!="function")throw new jo(r);var Ee=x?x.length:0;if(Ee||(d&=~(E|M),x=b=n),k=k===n?k:ji(Zt(k),0),j=j===n?j:Zt(j),Ee-=b?b.length:0,d&M){var Me=x,Pe=b;x=b=n}var Je=Q?n:$b(c),mt=[c,d,m,x,b,Me,Pe,D,k,j];if(Je&&P5(mt,Je),c=mt[0],d=mt[1],m=mt[2],x=mt[3],b=mt[4],j=mt[9]=mt[9]===n?Q?0:c.length:ji(mt[9]-Ee,0),!j&&d&(_|T)&&(d&=~(_|T)),!d||d==v)var It=p5(c,d,m);else d==_||d==T?It=m5(c,d,j):(d==E||d==(v|E))&&!b.length?It=g5(c,d,m,x):It=i0.apply(n,mt);var en=Je?jD:xR;return wR(en(It,mt),c,d)}function uR(c,d,m,x){return c===n||Ss(c,md[m])&&!Nn.call(x,m)?d:c}function dR(c,d,m,x,b,D){return fi(c)&&fi(d)&&(D.set(d,c),Qg(c,d,n,dR,D),D.delete(d)),c}function y5(c){return Gh(c)?n:c}function fR(c,d,m,x,b,D){var k=m&p,j=c.length,Q=d.length;if(j!=Q&&!(k&&Q>j))return!1;var Ee=D.get(c),Me=D.get(d);if(Ee&&Me)return Ee==d&&Me==c;var Pe=-1,Je=!0,mt=m&g?new zc:n;for(D.set(c,d),D.set(d,c);++Pe<j;){var It=c[Pe],en=d[Pe];if(x)var Dt=k?x(en,It,Pe,d,c,D):x(It,en,Pe,c,d,D);if(Dt!==n){if(Dt)continue;Je=!1;break}if(mt){if(!hb(d,function(un,yn){if(!Dh(mt,yn)&&(It===un||b(It,un,m,x,D)))return mt.push(yn)})){Je=!1;break}}else if(!(It===en||b(It,en,m,x,D))){Je=!1;break}}return D.delete(c),D.delete(d),Je}function _5(c,d,m,x,b,D,k){switch(m){case fe:if(c.byteLength!=d.byteLength||c.byteOffset!=d.byteOffset)return!1;c=c.buffer,d=d.buffer;case Ae:return!(c.byteLength!=d.byteLength||!D(new Hg(c),new Hg(d)));case ve:case se:case ut:return Ss(+c,+d);case je:return c.name==d.name&&c.message==d.message;case Xe:case ht:return c==d+"";case pt:var j=_b;case Vt:var Q=x&p;if(j||(j=Fg),c.size!=d.size&&!Q)return!1;var Ee=k.get(c);if(Ee)return Ee==d;x|=g,k.set(c,d);var Me=fR(j(c),j(d),x,b,D,k);return k.delete(c),Me;case N:if(Fh)return Fh.call(c)==Fh.call(d)}return!1}function x5(c,d,m,x,b,D){var k=m&p,j=Gb(c),Q=j.length,Ee=Gb(d),Me=Ee.length;if(Q!=Me&&!k)return!1;for(var Pe=Q;Pe--;){var Je=j[Pe];if(!(k?Je in d:Nn.call(d,Je)))return!1}var mt=D.get(c),It=D.get(d);if(mt&&It)return mt==d&&It==c;var en=!0;D.set(c,d),D.set(d,c);for(var Dt=k;++Pe<Q;){Je=j[Pe];var un=c[Je],yn=d[Je];if(x)var _o=k?x(yn,un,Je,d,c,D):x(un,yn,Je,c,d,D);if(!(_o===n?un===yn||b(un,yn,m,x,D):_o)){en=!1;break}Dt||(Dt=Je=="constructor")}if(en&&!Dt){var Ir=c.constructor,xo=d.constructor;Ir!=xo&&"constructor"in c&&"constructor"in d&&!(typeof Ir=="function"&&Ir instanceof Ir&&typeof xo=="function"&&xo instanceof xo)&&(en=!1)}return D.delete(c),D.delete(d),en}function Ya(c){return Jb(yR(c,n,TR),c+"")}function Gb(c){return PD(c,Ji,Xb)}function Wb(c){return PD(c,qr,hR)}var $b=qg?function(c){return qg.get(c)}:dE;function a0(c){for(var d=c.name+"",m=vd[d],x=Nn.call(vd,d)?m.length:0;x--;){var b=m[x],D=b.func;if(D==null||D==c)return b.name}return d}function wd(c){var d=Nn.call(C,"placeholder")?C:c;return d.placeholder}function Mt(){var c=C.iteratee||cE;return c=c===cE?FD:c,arguments.length?c(arguments[0],arguments[1]):c}function l0(c,d){var m=c.__data__;return A5(d)?m[typeof d=="string"?"string":"hash"]:m.map}function qb(c){for(var d=Ji(c),m=d.length;m--;){var x=d[m],b=c[x];d[m]=[x,b,gR(b)]}return d}function Wc(c,d){var m=RH(c,d);return ND(m)?m:n}function w5(c){var d=Nn.call(c,Vc),m=c[Vc];try{c[Vc]=n;var x=!0}catch{}var b=Bg.call(c);return x&&(d?c[Vc]=m:delete c[Vc]),b}var Xb=wb?function(c){return c==null?[]:(c=jn(c),Wl(wb(c),function(d){return _D.call(c,d)}))}:fE,hR=wb?function(c){for(var d=[];c;)$l(d,Xb(c)),c=zg(c);return d}:fE,yr=Tr;(bb&&yr(new bb(new ArrayBuffer(1)))!=fe||Ph&&yr(new Ph)!=pt||Eb&&yr(Eb.resolve())!=Ge||gd&&yr(new gd)!=Vt||Oh&&yr(new Oh)!=oe)&&(yr=function(c){var d=Tr(c),m=d==qt?c.constructor:n,x=m?$c(m):"";if(x)switch(x){case iz:return fe;case rz:return pt;case oz:return Ge;case sz:return Vt;case az:return oe}return d});function b5(c,d,m){for(var x=-1,b=m.length;++x<b;){var D=m[x],k=D.size;switch(D.type){case"drop":c+=k;break;case"dropRight":d-=k;break;case"take":d=vr(d,c+k);break;case"takeRight":c=ji(c,d-k);break}}return{start:c,end:d}}function E5(c){var d=c.match(jl);return d?d[1].split(bs):[]}function pR(c,d,m){d=Jl(d,c);for(var x=-1,b=d.length,D=!1;++x<b;){var k=da(d[x]);if(!(D=c!=null&&m(c,k)))break;c=c[k]}return D||++x!=b?D:(b=c==null?0:c.length,!!b&&m0(b)&&Za(k,b)&&(Wt(c)||qc(c)))}function M5(c){var d=c.length,m=new c.constructor(d);return d&&typeof c[0]=="string"&&Nn.call(c,"index")&&(m.index=c.index,m.input=c.input),m}function mR(c){return typeof c.constructor=="function"&&!zh(c)?yd(zg(c)):{}}function S5(c,d,m){var x=c.constructor;switch(d){case Ae:return Hb(c);case ve:case se:return new x(+c);case fe:return l5(c,m);case $e:case qe:case gt:case vt:case Ne:case nt:case yt:case bt:case it:return KD(c,m);case pt:return new x;case ut:case ht:return new x(c);case Xe:return c5(c);case Vt:return new x;case N:return u5(c)}}function C5(c,d){var m=d.length;if(!m)return c;var x=m-1;return d[x]=(m>1?"& ":"")+d[x],d=d.join(m>2?", ":" "),c.replace(Bo,`{
/* [wrapped with `+d+`] */
`)}function T5(c){return Wt(c)||qc(c)||!!(xD&&c&&c[xD])}function Za(c,d){var m=typeof c;return d=d??q,!!d&&(m=="number"||m!="symbol"&&sb.test(c))&&c>-1&&c%1==0&&c<d}function Ar(c,d,m){if(!fi(m))return!1;var x=typeof d;return(x=="number"?$r(m)&&Za(d,m.length):x=="string"&&d in m)?Ss(m[d],c):!1}function Yb(c,d){if(Wt(c))return!1;var m=typeof c;return m=="number"||m=="symbol"||m=="boolean"||c==null||yo(c)?!0:Mi.test(c)||!zn.test(c)||d!=null&&c in jn(d)}function A5(c){var d=typeof c;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?c!=="__proto__":c===null}function Zb(c){var d=a0(c),m=C[d];if(typeof m!="function"||!(d in mn.prototype))return!1;if(c===m)return!0;var x=$b(m);return!!x&&c===x[0]}function I5(c){return!!gD&&gD in c}var D5=kg?Ka:hE;function zh(c){var d=c&&c.constructor,m=typeof d=="function"&&d.prototype||md;return c===m}function gR(c){return c===c&&!fi(c)}function vR(c,d){return function(m){return m==null?!1:m[c]===d&&(d!==n||c in jn(m))}}function R5(c){var d=h0(c,function(x){return m.size===a&&m.clear(),x}),m=d.cache;return d}function P5(c,d){var m=c[1],x=d[1],b=m|x,D=b<(v|w|V),k=x==V&&m==_||x==V&&m==F&&c[7].length<=d[8]||x==(V|F)&&d[7].length<=d[8]&&m==_;if(!(D||k))return c;x&v&&(c[2]=d[2],b|=m&v?0:y);var j=d[3];if(j){var Q=c[3];c[3]=Q?QD(Q,j,d[4]):j,c[4]=Q?ql(c[3],l):d[4]}return j=d[5],j&&(Q=c[5],c[5]=Q?eR(Q,j,d[6]):j,c[6]=Q?ql(c[5],l):d[6]),j=d[7],j&&(c[7]=j),x&V&&(c[8]=c[8]==null?d[8]:vr(c[8],d[8])),c[9]==null&&(c[9]=d[9]),c[0]=d[0],c[1]=b,c}function O5(c){var d=[];if(c!=null)for(var m in jn(c))d.push(m);return d}function N5(c){return Bg.call(c)}function yR(c,d,m){return d=ji(d===n?c.length-1:d,0),function(){for(var x=arguments,b=-1,D=ji(x.length-d,0),k=ue(D);++b<D;)k[b]=x[d+b];b=-1;for(var j=ue(d+1);++b<d;)j[b]=x[b];return j[d]=m(k),mo(c,this,j)}}function _R(c,d){return d.length<2?c:Gc(c,$o(d,0,-1))}function F5(c,d){for(var m=c.length,x=vr(d.length,m),b=Wr(c);x--;){var D=d[x];c[x]=Za(D,m)?b[D]:n}return c}function Kb(c,d){if(!(d==="constructor"&&typeof c[d]=="function")&&d!="__proto__")return c[d]}var xR=bR(jD),jh=ZH||function(c,d){return Ki.setTimeout(c,d)},Jb=bR(r5);function wR(c,d,m){var x=d+"";return Jb(c,C5(x,L5(E5(x),m)))}function bR(c){var d=0,m=0;return function(){var x=ez(),b=z-(x-m);if(m=x,b>0){if(++d>=I)return arguments[0]}else d=0;return c.apply(n,arguments)}}function c0(c,d){var m=-1,x=c.length,b=x-1;for(d=d===n?x:d;++m<d;){var D=Nb(m,b),k=c[D];c[D]=c[m],c[m]=k}return c.length=d,c}var ER=R5(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(xn,function(m,x,b,D){d.push(b?D.replace(Rg,"$1"):x||m)}),d});function da(c){if(typeof c=="string"||yo(c))return c;var d=c+"";return d=="0"&&1/c==-be?"-0":d}function $c(c){if(c!=null){try{return Ug.call(c)}catch{}try{return c+""}catch{}}return""}function L5(c,d){return zo(me,function(m){var x="_."+m[0];d&m[1]&&!Og(c,x)&&c.push(x)}),c.sort()}function MR(c){if(c instanceof mn)return c.clone();var d=new Go(c.__wrapped__,c.__chain__);return d.__actions__=Wr(c.__actions__),d.__index__=c.__index__,d.__values__=c.__values__,d}function k5(c,d,m){(m?Ar(c,d,m):d===n)?d=1:d=ji(Zt(d),0);var x=c==null?0:c.length;if(!x||d<1)return[];for(var b=0,D=0,k=ue(Wg(x/d));b<x;)k[D++]=$o(c,b,b+=d);return k}function U5(c){for(var d=-1,m=c==null?0:c.length,x=0,b=[];++d<m;){var D=c[d];D&&(b[x++]=D)}return b}function B5(){var c=arguments.length;if(!c)return[];for(var d=ue(c-1),m=arguments[0],x=c;x--;)d[x-1]=arguments[x];return $l(Wt(m)?Wr(m):[m],ir(d,1))}var V5=an(function(c,d){return Ci(c)?kh(c,ir(d,1,Ci,!0)):[]}),H5=an(function(c,d){var m=qo(d);return Ci(m)&&(m=n),Ci(c)?kh(c,ir(d,1,Ci,!0),Mt(m,2)):[]}),z5=an(function(c,d){var m=qo(d);return Ci(m)&&(m=n),Ci(c)?kh(c,ir(d,1,Ci,!0),n,m):[]});function j5(c,d,m){var x=c==null?0:c.length;return x?(d=m||d===n?1:Zt(d),$o(c,d<0?0:d,x)):[]}function G5(c,d,m){var x=c==null?0:c.length;return x?(d=m||d===n?1:Zt(d),d=x-d,$o(c,0,d<0?0:d)):[]}function W5(c,d){return c&&c.length?t0(c,Mt(d,3),!0,!0):[]}function $5(c,d){return c&&c.length?t0(c,Mt(d,3),!0):[]}function q5(c,d,m,x){var b=c==null?0:c.length;return b?(m&&typeof m!="number"&&Ar(c,d,m)&&(m=0,x=b),Bz(c,d,m,x)):[]}function SR(c,d,m){var x=c==null?0:c.length;if(!x)return-1;var b=m==null?0:Zt(m);return b<0&&(b=ji(x+b,0)),Ng(c,Mt(d,3),b)}function CR(c,d,m){var x=c==null?0:c.length;if(!x)return-1;var b=x-1;return m!==n&&(b=Zt(m),b=m<0?ji(x+b,0):vr(b,x-1)),Ng(c,Mt(d,3),b,!0)}function TR(c){var d=c==null?0:c.length;return d?ir(c,1):[]}function X5(c){var d=c==null?0:c.length;return d?ir(c,be):[]}function Y5(c,d){var m=c==null?0:c.length;return m?(d=d===n?1:Zt(d),ir(c,d)):[]}function Z5(c){for(var d=-1,m=c==null?0:c.length,x={};++d<m;){var b=c[d];x[b[0]]=b[1]}return x}function AR(c){return c&&c.length?c[0]:n}function K5(c,d,m){var x=c==null?0:c.length;if(!x)return-1;var b=m==null?0:Zt(m);return b<0&&(b=ji(x+b,0)),fd(c,d,b)}function J5(c){var d=c==null?0:c.length;return d?$o(c,0,-1):[]}var Q5=an(function(c){var d=oi(c,Bb);return d.length&&d[0]===c[0]?Ib(d):[]}),ej=an(function(c){var d=qo(c),m=oi(c,Bb);return d===qo(m)?d=n:m.pop(),m.length&&m[0]===c[0]?Ib(m,Mt(d,2)):[]}),tj=an(function(c){var d=qo(c),m=oi(c,Bb);return d=typeof d=="function"?d:n,d&&m.pop(),m.length&&m[0]===c[0]?Ib(m,n,d):[]});function nj(c,d){return c==null?"":JH.call(c,d)}function qo(c){var d=c==null?0:c.length;return d?c[d-1]:n}function ij(c,d,m){var x=c==null?0:c.length;if(!x)return-1;var b=x;return m!==n&&(b=Zt(m),b=b<0?ji(x+b,0):vr(b,x-1)),d===d?LH(c,d,b):Ng(c,lD,b,!0)}function rj(c,d){return c&&c.length?BD(c,Zt(d)):n}var oj=an(IR);function IR(c,d){return c&&c.length&&d&&d.length?Ob(c,d):c}function sj(c,d,m){return c&&c.length&&d&&d.length?Ob(c,d,Mt(m,2)):c}function aj(c,d,m){return c&&c.length&&d&&d.length?Ob(c,d,n,m):c}var lj=Ya(function(c,d){var m=c==null?0:c.length,x=Sb(c,d);return zD(c,oi(d,function(b){return Za(b,m)?+b:b}).sort(JD)),x});function cj(c,d){var m=[];if(!(c&&c.length))return m;var x=-1,b=[],D=c.length;for(d=Mt(d,3);++x<D;){var k=c[x];d(k,x,c)&&(m.push(k),b.push(x))}return zD(c,b),m}function Qb(c){return c==null?c:nz.call(c)}function uj(c,d,m){var x=c==null?0:c.length;return x?(m&&typeof m!="number"&&Ar(c,d,m)?(d=0,m=x):(d=d==null?0:Zt(d),m=m===n?x:Zt(m)),$o(c,d,m)):[]}function dj(c,d){return e0(c,d)}function fj(c,d,m){return Lb(c,d,Mt(m,2))}function hj(c,d){var m=c==null?0:c.length;if(m){var x=e0(c,d);if(x<m&&Ss(c[x],d))return x}return-1}function pj(c,d){return e0(c,d,!0)}function mj(c,d,m){return Lb(c,d,Mt(m,2),!0)}function gj(c,d){var m=c==null?0:c.length;if(m){var x=e0(c,d,!0)-1;if(Ss(c[x],d))return x}return-1}function vj(c){return c&&c.length?GD(c):[]}function yj(c,d){return c&&c.length?GD(c,Mt(d,2)):[]}function _j(c){var d=c==null?0:c.length;return d?$o(c,1,d):[]}function xj(c,d,m){return c&&c.length?(d=m||d===n?1:Zt(d),$o(c,0,d<0?0:d)):[]}function wj(c,d,m){var x=c==null?0:c.length;return x?(d=m||d===n?1:Zt(d),d=x-d,$o(c,d<0?0:d,x)):[]}function bj(c,d){return c&&c.length?t0(c,Mt(d,3),!1,!0):[]}function Ej(c,d){return c&&c.length?t0(c,Mt(d,3)):[]}var Mj=an(function(c){return Kl(ir(c,1,Ci,!0))}),Sj=an(function(c){var d=qo(c);return Ci(d)&&(d=n),Kl(ir(c,1,Ci,!0),Mt(d,2))}),Cj=an(function(c){var d=qo(c);return d=typeof d=="function"?d:n,Kl(ir(c,1,Ci,!0),n,d)});function Tj(c){return c&&c.length?Kl(c):[]}function Aj(c,d){return c&&c.length?Kl(c,Mt(d,2)):[]}function Ij(c,d){return d=typeof d=="function"?d:n,c&&c.length?Kl(c,n,d):[]}function eE(c){if(!(c&&c.length))return[];var d=0;return c=Wl(c,function(m){if(Ci(m))return d=ji(m.length,d),!0}),vb(d,function(m){return oi(c,pb(m))})}function DR(c,d){if(!(c&&c.length))return[];var m=eE(c);return d==null?m:oi(m,function(x){return mo(d,n,x)})}var Dj=an(function(c,d){return Ci(c)?kh(c,d):[]}),Rj=an(function(c){return Ub(Wl(c,Ci))}),Pj=an(function(c){var d=qo(c);return Ci(d)&&(d=n),Ub(Wl(c,Ci),Mt(d,2))}),Oj=an(function(c){var d=qo(c);return d=typeof d=="function"?d:n,Ub(Wl(c,Ci),n,d)}),Nj=an(eE);function Fj(c,d){return XD(c||[],d||[],Lh)}function Lj(c,d){return XD(c||[],d||[],Vh)}var kj=an(function(c){var d=c.length,m=d>1?c[d-1]:n;return m=typeof m=="function"?(c.pop(),m):n,DR(c,m)});function RR(c){var d=C(c);return d.__chain__=!0,d}function Uj(c,d){return d(c),c}function u0(c,d){return d(c)}var Bj=Ya(function(c){var d=c.length,m=d?c[0]:0,x=this.__wrapped__,b=function(D){return Sb(D,c)};return d>1||this.__actions__.length||!(x instanceof mn)||!Za(m)?this.thru(b):(x=x.slice(m,+m+(d?1:0)),x.__actions__.push({func:u0,args:[b],thisArg:n}),new Go(x,this.__chain__).thru(function(D){return d&&!D.length&&D.push(n),D}))});function Vj(){return RR(this)}function Hj(){return new Go(this.value(),this.__chain__)}function zj(){this.__values__===n&&(this.__values__=WR(this.value()));var c=this.__index__>=this.__values__.length,d=c?n:this.__values__[this.__index__++];return{done:c,value:d}}function jj(){return this}function Gj(c){for(var d,m=this;m instanceof Yg;){var x=MR(m);x.__index__=0,x.__values__=n,d?b.__wrapped__=x:d=x;var b=x;m=m.__wrapped__}return b.__wrapped__=c,d}function Wj(){var c=this.__wrapped__;if(c instanceof mn){var d=c;return this.__actions__.length&&(d=new mn(this)),d=d.reverse(),d.__actions__.push({func:u0,args:[Qb],thisArg:n}),new Go(d,this.__chain__)}return this.thru(Qb)}function $j(){return qD(this.__wrapped__,this.__actions__)}var qj=n0(function(c,d,m){Nn.call(c,m)?++c[m]:qa(c,m,1)});function Xj(c,d,m){var x=Wt(c)?sD:Uz;return m&&Ar(c,d,m)&&(d=n),x(c,Mt(d,3))}function Yj(c,d){var m=Wt(c)?Wl:DD;return m(c,Mt(d,3))}var Zj=rR(SR),Kj=rR(CR);function Jj(c,d){return ir(d0(c,d),1)}function Qj(c,d){return ir(d0(c,d),be)}function e8(c,d,m){return m=m===n?1:Zt(m),ir(d0(c,d),m)}function PR(c,d){var m=Wt(c)?zo:Zl;return m(c,Mt(d,3))}function OR(c,d){var m=Wt(c)?_H:ID;return m(c,Mt(d,3))}var t8=n0(function(c,d,m){Nn.call(c,m)?c[m].push(d):qa(c,m,[d])});function n8(c,d,m,x){c=$r(c)?c:Ed(c),m=m&&!x?Zt(m):0;var b=c.length;return m<0&&(m=ji(b+m,0)),g0(c)?m<=b&&c.indexOf(d,m)>-1:!!b&&fd(c,d,m)>-1}var i8=an(function(c,d,m){var x=-1,b=typeof d=="function",D=$r(c)?ue(c.length):[];return Zl(c,function(k){D[++x]=b?mo(d,k,m):Uh(k,d,m)}),D}),r8=n0(function(c,d,m){qa(c,m,d)});function d0(c,d){var m=Wt(c)?oi:LD;return m(c,Mt(d,3))}function o8(c,d,m,x){return c==null?[]:(Wt(d)||(d=d==null?[]:[d]),m=x?n:m,Wt(m)||(m=m==null?[]:[m]),VD(c,d,m))}var s8=n0(function(c,d,m){c[m?0:1].push(d)},function(){return[[],[]]});function a8(c,d,m){var x=Wt(c)?fb:uD,b=arguments.length<3;return x(c,Mt(d,4),m,b,Zl)}function l8(c,d,m){var x=Wt(c)?xH:uD,b=arguments.length<3;return x(c,Mt(d,4),m,b,ID)}function c8(c,d){var m=Wt(c)?Wl:DD;return m(c,p0(Mt(d,3)))}function u8(c){var d=Wt(c)?SD:n5;return d(c)}function d8(c,d,m){(m?Ar(c,d,m):d===n)?d=1:d=Zt(d);var x=Wt(c)?Oz:i5;return x(c,d)}function f8(c){var d=Wt(c)?Nz:o5;return d(c)}function h8(c){if(c==null)return 0;if($r(c))return g0(c)?pd(c):c.length;var d=yr(c);return d==pt||d==Vt?c.size:Rb(c).length}function p8(c,d,m){var x=Wt(c)?hb:s5;return m&&Ar(c,d,m)&&(d=n),x(c,Mt(d,3))}var m8=an(function(c,d){if(c==null)return[];var m=d.length;return m>1&&Ar(c,d[0],d[1])?d=[]:m>2&&Ar(d[0],d[1],d[2])&&(d=[d[0]]),VD(c,ir(d,1),[])}),f0=YH||function(){return Ki.Date.now()};function g8(c,d){if(typeof d!="function")throw new jo(r);return c=Zt(c),function(){if(--c<1)return d.apply(this,arguments)}}function NR(c,d,m){return d=m?n:d,d=c&&d==null?c.length:d,Xa(c,V,n,n,n,n,d)}function FR(c,d){var m;if(typeof d!="function")throw new jo(r);return c=Zt(c),function(){return--c>0&&(m=d.apply(this,arguments)),c<=1&&(d=n),m}}var tE=an(function(c,d,m){var x=v;if(m.length){var b=ql(m,wd(tE));x|=E}return Xa(c,x,d,m,b)}),LR=an(function(c,d,m){var x=v|w;if(m.length){var b=ql(m,wd(LR));x|=E}return Xa(d,x,c,m,b)});function kR(c,d,m){d=m?n:d;var x=Xa(c,_,n,n,n,n,n,d);return x.placeholder=kR.placeholder,x}function UR(c,d,m){d=m?n:d;var x=Xa(c,T,n,n,n,n,n,d);return x.placeholder=UR.placeholder,x}function BR(c,d,m){var x,b,D,k,j,Q,Ee=0,Me=!1,Pe=!1,Je=!0;if(typeof c!="function")throw new jo(r);d=Xo(d)||0,fi(m)&&(Me=!!m.leading,Pe="maxWait"in m,D=Pe?ji(Xo(m.maxWait)||0,d):D,Je="trailing"in m?!!m.trailing:Je);function mt(Ti){var Cs=x,Qa=b;return x=b=n,Ee=Ti,k=c.apply(Qa,Cs),k}function It(Ti){return Ee=Ti,j=jh(un,d),Me?mt(Ti):k}function en(Ti){var Cs=Ti-Q,Qa=Ti-Ee,rP=d-Cs;return Pe?vr(rP,D-Qa):rP}function Dt(Ti){var Cs=Ti-Q,Qa=Ti-Ee;return Q===n||Cs>=d||Cs<0||Pe&&Qa>=D}function un(){var Ti=f0();if(Dt(Ti))return yn(Ti);j=jh(un,en(Ti))}function yn(Ti){return j=n,Je&&x?mt(Ti):(x=b=n,k)}function _o(){j!==n&&YD(j),Ee=0,x=Q=b=j=n}function Ir(){return j===n?k:yn(f0())}function xo(){var Ti=f0(),Cs=Dt(Ti);if(x=arguments,b=this,Q=Ti,Cs){if(j===n)return It(Q);if(Pe)return YD(j),j=jh(un,d),mt(Q)}return j===n&&(j=jh(un,d)),k}return xo.cancel=_o,xo.flush=Ir,xo}var v8=an(function(c,d){return AD(c,1,d)}),y8=an(function(c,d,m){return AD(c,Xo(d)||0,m)});function _8(c){return Xa(c,L)}function h0(c,d){if(typeof c!="function"||d!=null&&typeof d!="function")throw new jo(r);var m=function(){var x=arguments,b=d?d.apply(this,x):x[0],D=m.cache;if(D.has(b))return D.get(b);var k=c.apply(this,x);return m.cache=D.set(b,k)||D,k};return m.cache=new(h0.Cache||$a),m}h0.Cache=$a;function p0(c){if(typeof c!="function")throw new jo(r);return function(){var d=arguments;switch(d.length){case 0:return!c.call(this);case 1:return!c.call(this,d[0]);case 2:return!c.call(this,d[0],d[1]);case 3:return!c.call(this,d[0],d[1],d[2])}return!c.apply(this,d)}}function x8(c){return FR(2,c)}var w8=a5(function(c,d){d=d.length==1&&Wt(d[0])?oi(d[0],go(Mt())):oi(ir(d,1),go(Mt()));var m=d.length;return an(function(x){for(var b=-1,D=vr(x.length,m);++b<D;)x[b]=d[b].call(this,x[b]);return mo(c,this,x)})}),nE=an(function(c,d){var m=ql(d,wd(nE));return Xa(c,E,n,d,m)}),VR=an(function(c,d){var m=ql(d,wd(VR));return Xa(c,M,n,d,m)}),b8=Ya(function(c,d){return Xa(c,F,n,n,n,d)});function E8(c,d){if(typeof c!="function")throw new jo(r);return d=d===n?d:Zt(d),an(c,d)}function M8(c,d){if(typeof c!="function")throw new jo(r);return d=d==null?0:ji(Zt(d),0),an(function(m){var x=m[d],b=Ql(m,0,d);return x&&$l(b,x),mo(c,this,b)})}function S8(c,d,m){var x=!0,b=!0;if(typeof c!="function")throw new jo(r);return fi(m)&&(x="leading"in m?!!m.leading:x,b="trailing"in m?!!m.trailing:b),BR(c,d,{leading:x,maxWait:d,trailing:b})}function C8(c){return NR(c,1)}function T8(c,d){return nE(Vb(d),c)}function A8(){if(!arguments.length)return[];var c=arguments[0];return Wt(c)?c:[c]}function I8(c){return Wo(c,h)}function D8(c,d){return d=typeof d=="function"?d:n,Wo(c,h,d)}function R8(c){return Wo(c,u|h)}function P8(c,d){return d=typeof d=="function"?d:n,Wo(c,u|h,d)}function O8(c,d){return d==null||TD(c,d,Ji(d))}function Ss(c,d){return c===d||c!==c&&d!==d}var N8=s0(Ab),F8=s0(function(c,d){return c>=d}),qc=OD(function(){return arguments}())?OD:function(c){return gi(c)&&Nn.call(c,"callee")&&!_D.call(c,"callee")},Wt=ue.isArray,L8=eD?go(eD):Gz;function $r(c){return c!=null&&m0(c.length)&&!Ka(c)}function Ci(c){return gi(c)&&$r(c)}function k8(c){return c===!0||c===!1||gi(c)&&Tr(c)==ve}var ec=KH||hE,U8=tD?go(tD):Wz;function B8(c){return gi(c)&&c.nodeType===1&&!Gh(c)}function V8(c){if(c==null)return!0;if($r(c)&&(Wt(c)||typeof c=="string"||typeof c.splice=="function"||ec(c)||bd(c)||qc(c)))return!c.length;var d=yr(c);if(d==pt||d==Vt)return!c.size;if(zh(c))return!Rb(c).length;for(var m in c)if(Nn.call(c,m))return!1;return!0}function H8(c,d){return Bh(c,d)}function z8(c,d,m){m=typeof m=="function"?m:n;var x=m?m(c,d):n;return x===n?Bh(c,d,n,m):!!x}function iE(c){if(!gi(c))return!1;var d=Tr(c);return d==je||d==He||typeof c.message=="string"&&typeof c.name=="string"&&!Gh(c)}function j8(c){return typeof c=="number"&&wD(c)}function Ka(c){if(!fi(c))return!1;var d=Tr(c);return d==Fe||d==rt||d==Z||d==At}function HR(c){return typeof c=="number"&&c==Zt(c)}function m0(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=q}function fi(c){var d=typeof c;return c!=null&&(d=="object"||d=="function")}function gi(c){return c!=null&&typeof c=="object"}var zR=nD?go(nD):qz;function G8(c,d){return c===d||Db(c,d,qb(d))}function W8(c,d,m){return m=typeof m=="function"?m:n,Db(c,d,qb(d),m)}function $8(c){return jR(c)&&c!=+c}function q8(c){if(D5(c))throw new zt(i);return ND(c)}function X8(c){return c===null}function Y8(c){return c==null}function jR(c){return typeof c=="number"||gi(c)&&Tr(c)==ut}function Gh(c){if(!gi(c)||Tr(c)!=qt)return!1;var d=zg(c);if(d===null)return!0;var m=Nn.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&Ug.call(m)==WH}var rE=iD?go(iD):Xz;function Z8(c){return HR(c)&&c>=-q&&c<=q}var GR=rD?go(rD):Yz;function g0(c){return typeof c=="string"||!Wt(c)&&gi(c)&&Tr(c)==ht}function yo(c){return typeof c=="symbol"||gi(c)&&Tr(c)==N}var bd=oD?go(oD):Zz;function K8(c){return c===n}function J8(c){return gi(c)&&yr(c)==oe}function Q8(c){return gi(c)&&Tr(c)==xe}var eG=s0(Pb),tG=s0(function(c,d){return c<=d});function WR(c){if(!c)return[];if($r(c))return g0(c)?Es(c):Wr(c);if(Rh&&c[Rh])return OH(c[Rh]());var d=yr(c),m=d==pt?_b:d==Vt?Fg:Ed;return m(c)}function Ja(c){if(!c)return c===0?c:0;if(c=Xo(c),c===be||c===-be){var d=c<0?-1:1;return d*ie}return c===c?c:0}function Zt(c){var d=Ja(c),m=d%1;return d===d?m?d-m:d:0}function $R(c){return c?jc(Zt(c),0,ge):0}function Xo(c){if(typeof c=="number")return c;if(yo(c))return $;if(fi(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=fi(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=dD(c);var m=ib.test(c);return m||ob.test(c)?gH(c.slice(2),m?2:8):Pg.test(c)?$:+c}function qR(c){return ua(c,qr(c))}function nG(c){return c?jc(Zt(c),-q,q):c===0?c:0}function Rn(c){return c==null?"":vo(c)}var iG=_d(function(c,d){if(zh(d)||$r(d)){ua(d,Ji(d),c);return}for(var m in d)Nn.call(d,m)&&Lh(c,m,d[m])}),XR=_d(function(c,d){ua(d,qr(d),c)}),v0=_d(function(c,d,m,x){ua(d,qr(d),c,x)}),rG=_d(function(c,d,m,x){ua(d,Ji(d),c,x)}),oG=Ya(Sb);function sG(c,d){var m=yd(c);return d==null?m:CD(m,d)}var aG=an(function(c,d){c=jn(c);var m=-1,x=d.length,b=x>2?d[2]:n;for(b&&Ar(d[0],d[1],b)&&(x=1);++m<x;)for(var D=d[m],k=qr(D),j=-1,Q=k.length;++j<Q;){var Ee=k[j],Me=c[Ee];(Me===n||Ss(Me,md[Ee])&&!Nn.call(c,Ee))&&(c[Ee]=D[Ee])}return c}),lG=an(function(c){return c.push(n,dR),mo(YR,n,c)});function cG(c,d){return aD(c,Mt(d,3),ca)}function uG(c,d){return aD(c,Mt(d,3),Tb)}function dG(c,d){return c==null?c:Cb(c,Mt(d,3),qr)}function fG(c,d){return c==null?c:RD(c,Mt(d,3),qr)}function hG(c,d){return c&&ca(c,Mt(d,3))}function pG(c,d){return c&&Tb(c,Mt(d,3))}function mG(c){return c==null?[]:Jg(c,Ji(c))}function gG(c){return c==null?[]:Jg(c,qr(c))}function oE(c,d,m){var x=c==null?n:Gc(c,d);return x===n?m:x}function vG(c,d){return c!=null&&pR(c,d,Vz)}function sE(c,d){return c!=null&&pR(c,d,Hz)}var yG=sR(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=Bg.call(d)),c[d]=m},lE(Xr)),_G=sR(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=Bg.call(d)),Nn.call(c,d)?c[d].push(m):c[d]=[m]},Mt),xG=an(Uh);function Ji(c){return $r(c)?MD(c):Rb(c)}function qr(c){return $r(c)?MD(c,!0):Kz(c)}function wG(c,d){var m={};return d=Mt(d,3),ca(c,function(x,b,D){qa(m,d(x,b,D),x)}),m}function bG(c,d){var m={};return d=Mt(d,3),ca(c,function(x,b,D){qa(m,b,d(x,b,D))}),m}var EG=_d(function(c,d,m){Qg(c,d,m)}),YR=_d(function(c,d,m,x){Qg(c,d,m,x)}),MG=Ya(function(c,d){var m={};if(c==null)return m;var x=!1;d=oi(d,function(D){return D=Jl(D,c),x||(x=D.length>1),D}),ua(c,Wb(c),m),x&&(m=Wo(m,u|f|h,y5));for(var b=d.length;b--;)kb(m,d[b]);return m});function SG(c,d){return ZR(c,p0(Mt(d)))}var CG=Ya(function(c,d){return c==null?{}:Qz(c,d)});function ZR(c,d){if(c==null)return{};var m=oi(Wb(c),function(x){return[x]});return d=Mt(d),HD(c,m,function(x,b){return d(x,b[0])})}function TG(c,d,m){d=Jl(d,c);var x=-1,b=d.length;for(b||(b=1,c=n);++x<b;){var D=c==null?n:c[da(d[x])];D===n&&(x=b,D=m),c=Ka(D)?D.call(c):D}return c}function AG(c,d,m){return c==null?c:Vh(c,d,m)}function IG(c,d,m,x){return x=typeof x=="function"?x:n,c==null?c:Vh(c,d,m,x)}var KR=cR(Ji),JR=cR(qr);function DG(c,d,m){var x=Wt(c),b=x||ec(c)||bd(c);if(d=Mt(d,4),m==null){var D=c&&c.constructor;b?m=x?new D:[]:fi(c)?m=Ka(D)?yd(zg(c)):{}:m={}}return(b?zo:ca)(c,function(k,j,Q){return d(m,k,j,Q)}),m}function RG(c,d){return c==null?!0:kb(c,d)}function PG(c,d,m){return c==null?c:$D(c,d,Vb(m))}function OG(c,d,m,x){return x=typeof x=="function"?x:n,c==null?c:$D(c,d,Vb(m),x)}function Ed(c){return c==null?[]:yb(c,Ji(c))}function NG(c){return c==null?[]:yb(c,qr(c))}function FG(c,d,m){return m===n&&(m=d,d=n),m!==n&&(m=Xo(m),m=m===m?m:0),d!==n&&(d=Xo(d),d=d===d?d:0),jc(Xo(c),d,m)}function LG(c,d,m){return d=Ja(d),m===n?(m=d,d=0):m=Ja(m),c=Xo(c),zz(c,d,m)}function kG(c,d,m){if(m&&typeof m!="boolean"&&Ar(c,d,m)&&(d=m=n),m===n&&(typeof d=="boolean"?(m=d,d=n):typeof c=="boolean"&&(m=c,c=n)),c===n&&d===n?(c=0,d=1):(c=Ja(c),d===n?(d=c,c=0):d=Ja(d)),c>d){var x=c;c=d,d=x}if(m||c%1||d%1){var b=bD();return vr(c+b*(d-c+mH("1e-"+((b+"").length-1))),d)}return Nb(c,d)}var UG=xd(function(c,d,m){return d=d.toLowerCase(),c+(m?QR(d):d)});function QR(c){return aE(Rn(c).toLowerCase())}function eP(c){return c=Rn(c),c&&c.replace(ab,AH).replace(oH,"")}function BG(c,d,m){c=Rn(c),d=vo(d);var x=c.length;m=m===n?x:jc(Zt(m),0,x);var b=m;return m-=d.length,m>=0&&c.slice(m,b)==d}function VG(c){return c=Rn(c),c&&Se.test(c)?c.replace(Ze,IH):c}function HG(c){return c=Rn(c),c&&Gr.test(c)?c.replace(Zi,"\\$&"):c}var zG=xd(function(c,d,m){return c+(m?"-":"")+d.toLowerCase()}),jG=xd(function(c,d,m){return c+(m?" ":"")+d.toLowerCase()}),GG=iR("toLowerCase");function WG(c,d,m){c=Rn(c),d=Zt(d);var x=d?pd(c):0;if(!d||x>=d)return c;var b=(d-x)/2;return o0($g(b),m)+c+o0(Wg(b),m)}function $G(c,d,m){c=Rn(c),d=Zt(d);var x=d?pd(c):0;return d&&x<d?c+o0(d-x,m):c}function qG(c,d,m){c=Rn(c),d=Zt(d);var x=d?pd(c):0;return d&&x<d?o0(d-x,m)+c:c}function XG(c,d,m){return m||d==null?d=0:d&&(d=+d),tz(Rn(c).replace(Uc,""),d||0)}function YG(c,d,m){return(m?Ar(c,d,m):d===n)?d=1:d=Zt(d),Fb(Rn(c),d)}function ZG(){var c=arguments,d=Rn(c[0]);return c.length<3?d:d.replace(c[1],c[2])}var KG=xd(function(c,d,m){return c+(m?"_":"")+d.toLowerCase()});function JG(c,d,m){return m&&typeof m!="number"&&Ar(c,d,m)&&(d=m=n),m=m===n?ge:m>>>0,m?(c=Rn(c),c&&(typeof d=="string"||d!=null&&!rE(d))&&(d=vo(d),!d&&hd(c))?Ql(Es(c),0,m):c.split(d,m)):[]}var QG=xd(function(c,d,m){return c+(m?" ":"")+aE(d)});function eW(c,d,m){return c=Rn(c),m=m==null?0:jc(Zt(m),0,c.length),d=vo(d),c.slice(m,m+d.length)==d}function tW(c,d,m){var x=C.templateSettings;m&&Ar(c,d,m)&&(d=n),c=Rn(c),d=v0({},d,x,uR);var b=v0({},d.imports,x.imports,uR),D=Ji(b),k=yb(b,D),j,Q,Ee=0,Me=d.interpolate||ud,Pe="__p += '",Je=xb((d.escape||ud).source+"|"+Me.source+"|"+(Me===Ot?cd:ud).source+"|"+(d.evaluate||ud).source+"|$","g"),mt="//# sourceURL="+(Nn.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++uH+"]")+`
`;c.replace(Je,function(Dt,un,yn,_o,Ir,xo){return yn||(yn=_o),Pe+=c.slice(Ee,xo).replace(A,DH),un&&(j=!0,Pe+=`' +
__e(`+un+`) +
'`),Ir&&(Q=!0,Pe+=`';
`+Ir+`;
__p += '`),yn&&(Pe+=`' +
((__t = (`+yn+`)) == null ? '' : __t) +
'`),Ee=xo+Dt.length,Dt}),Pe+=`';
`;var It=Nn.call(d,"variable")&&d.variable;if(!It)Pe=`with (obj) {
`+Pe+`
}
`;else if(Vo.test(It))throw new zt(o);Pe=(Q?Pe.replace(sn,""):Pe).replace(Ht,"$1").replace(Dn,"$1;"),Pe="function("+(It||"obj")+`) {
`+(It?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(j?", __e = _.escape":"")+(Q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pe+`return __p
}`;var en=nP(function(){return Cn(D,mt+"return "+Pe).apply(n,k)});if(en.source=Pe,iE(en))throw en;return en}function nW(c){return Rn(c).toLowerCase()}function iW(c){return Rn(c).toUpperCase()}function rW(c,d,m){if(c=Rn(c),c&&(m||d===n))return dD(c);if(!c||!(d=vo(d)))return c;var x=Es(c),b=Es(d),D=fD(x,b),k=hD(x,b)+1;return Ql(x,D,k).join("")}function oW(c,d,m){if(c=Rn(c),c&&(m||d===n))return c.slice(0,mD(c)+1);if(!c||!(d=vo(d)))return c;var x=Es(c),b=hD(x,Es(d))+1;return Ql(x,0,b).join("")}function sW(c,d,m){if(c=Rn(c),c&&(m||d===n))return c.replace(Uc,"");if(!c||!(d=vo(d)))return c;var x=Es(c),b=fD(x,Es(d));return Ql(x,b).join("")}function aW(c,d){var m=G,x=O;if(fi(d)){var b="separator"in d?d.separator:b;m="length"in d?Zt(d.length):m,x="omission"in d?vo(d.omission):x}c=Rn(c);var D=c.length;if(hd(c)){var k=Es(c);D=k.length}if(m>=D)return c;var j=m-pd(x);if(j<1)return x;var Q=k?Ql(k,0,j).join(""):c.slice(0,j);if(b===n)return Q+x;if(k&&(j+=Q.length-j),rE(b)){if(c.slice(j).search(b)){var Ee,Me=Q;for(b.global||(b=xb(b.source,Rn(Ih.exec(b))+"g")),b.lastIndex=0;Ee=b.exec(Me);)var Pe=Ee.index;Q=Q.slice(0,Pe===n?j:Pe)}}else if(c.indexOf(vo(b),j)!=j){var Je=Q.lastIndexOf(b);Je>-1&&(Q=Q.slice(0,Je))}return Q+x}function lW(c){return c=Rn(c),c&&pe.test(c)?c.replace(X,kH):c}var cW=xd(function(c,d,m){return c+(m?" ":"")+d.toUpperCase()}),aE=iR("toUpperCase");function tP(c,d,m){return c=Rn(c),d=m?n:d,d===n?PH(c)?VH(c):EH(c):c.match(d)||[]}var nP=an(function(c,d){try{return mo(c,n,d)}catch(m){return iE(m)?m:new zt(m)}}),uW=Ya(function(c,d){return zo(d,function(m){m=da(m),qa(c,m,tE(c[m],c))}),c});function dW(c){var d=c==null?0:c.length,m=Mt();return c=d?oi(c,function(x){if(typeof x[1]!="function")throw new jo(r);return[m(x[0]),x[1]]}):[],an(function(x){for(var b=-1;++b<d;){var D=c[b];if(mo(D[0],this,x))return mo(D[1],this,x)}})}function fW(c){return kz(Wo(c,u))}function lE(c){return function(){return c}}function hW(c,d){return c==null||c!==c?d:c}var pW=oR(),mW=oR(!0);function Xr(c){return c}function cE(c){return FD(typeof c=="function"?c:Wo(c,u))}function gW(c){return kD(Wo(c,u))}function vW(c,d){return UD(c,Wo(d,u))}var yW=an(function(c,d){return function(m){return Uh(m,c,d)}}),_W=an(function(c,d){return function(m){return Uh(c,m,d)}});function uE(c,d,m){var x=Ji(d),b=Jg(d,x);m==null&&!(fi(d)&&(b.length||!x.length))&&(m=d,d=c,c=this,b=Jg(d,Ji(d)));var D=!(fi(m)&&"chain"in m)||!!m.chain,k=Ka(c);return zo(b,function(j){var Q=d[j];c[j]=Q,k&&(c.prototype[j]=function(){var Ee=this.__chain__;if(D||Ee){var Me=c(this.__wrapped__),Pe=Me.__actions__=Wr(this.__actions__);return Pe.push({func:Q,args:arguments,thisArg:c}),Me.__chain__=Ee,Me}return Q.apply(c,$l([this.value()],arguments))})}),c}function xW(){return Ki._===this&&(Ki._=$H),this}function dE(){}function wW(c){return c=Zt(c),an(function(d){return BD(d,c)})}var bW=zb(oi),EW=zb(sD),MW=zb(hb);function iP(c){return Yb(c)?pb(da(c)):e5(c)}function SW(c){return function(d){return c==null?n:Gc(c,d)}}var CW=aR(),TW=aR(!0);function fE(){return[]}function hE(){return!1}function AW(){return{}}function IW(){return""}function DW(){return!0}function RW(c,d){if(c=Zt(c),c<1||c>q)return[];var m=ge,x=vr(c,ge);d=Mt(d),c-=ge;for(var b=vb(x,d);++m<c;)d(m);return b}function PW(c){return Wt(c)?oi(c,da):yo(c)?[c]:Wr(ER(Rn(c)))}function OW(c){var d=++GH;return Rn(c)+d}var NW=r0(function(c,d){return c+d},0),FW=jb("ceil"),LW=r0(function(c,d){return c/d},1),kW=jb("floor");function UW(c){return c&&c.length?Kg(c,Xr,Ab):n}function BW(c,d){return c&&c.length?Kg(c,Mt(d,2),Ab):n}function VW(c){return cD(c,Xr)}function HW(c,d){return cD(c,Mt(d,2))}function zW(c){return c&&c.length?Kg(c,Xr,Pb):n}function jW(c,d){return c&&c.length?Kg(c,Mt(d,2),Pb):n}var GW=r0(function(c,d){return c*d},1),WW=jb("round"),$W=r0(function(c,d){return c-d},0);function qW(c){return c&&c.length?gb(c,Xr):0}function XW(c,d){return c&&c.length?gb(c,Mt(d,2)):0}return C.after=g8,C.ary=NR,C.assign=iG,C.assignIn=XR,C.assignInWith=v0,C.assignWith=rG,C.at=oG,C.before=FR,C.bind=tE,C.bindAll=uW,C.bindKey=LR,C.castArray=A8,C.chain=RR,C.chunk=k5,C.compact=U5,C.concat=B5,C.cond=dW,C.conforms=fW,C.constant=lE,C.countBy=qj,C.create=sG,C.curry=kR,C.curryRight=UR,C.debounce=BR,C.defaults=aG,C.defaultsDeep=lG,C.defer=v8,C.delay=y8,C.difference=V5,C.differenceBy=H5,C.differenceWith=z5,C.drop=j5,C.dropRight=G5,C.dropRightWhile=W5,C.dropWhile=$5,C.fill=q5,C.filter=Yj,C.flatMap=Jj,C.flatMapDeep=Qj,C.flatMapDepth=e8,C.flatten=TR,C.flattenDeep=X5,C.flattenDepth=Y5,C.flip=_8,C.flow=pW,C.flowRight=mW,C.fromPairs=Z5,C.functions=mG,C.functionsIn=gG,C.groupBy=t8,C.initial=J5,C.intersection=Q5,C.intersectionBy=ej,C.intersectionWith=tj,C.invert=yG,C.invertBy=_G,C.invokeMap=i8,C.iteratee=cE,C.keyBy=r8,C.keys=Ji,C.keysIn=qr,C.map=d0,C.mapKeys=wG,C.mapValues=bG,C.matches=gW,C.matchesProperty=vW,C.memoize=h0,C.merge=EG,C.mergeWith=YR,C.method=yW,C.methodOf=_W,C.mixin=uE,C.negate=p0,C.nthArg=wW,C.omit=MG,C.omitBy=SG,C.once=x8,C.orderBy=o8,C.over=bW,C.overArgs=w8,C.overEvery=EW,C.overSome=MW,C.partial=nE,C.partialRight=VR,C.partition=s8,C.pick=CG,C.pickBy=ZR,C.property=iP,C.propertyOf=SW,C.pull=oj,C.pullAll=IR,C.pullAllBy=sj,C.pullAllWith=aj,C.pullAt=lj,C.range=CW,C.rangeRight=TW,C.rearg=b8,C.reject=c8,C.remove=cj,C.rest=E8,C.reverse=Qb,C.sampleSize=d8,C.set=AG,C.setWith=IG,C.shuffle=f8,C.slice=uj,C.sortBy=m8,C.sortedUniq=vj,C.sortedUniqBy=yj,C.split=JG,C.spread=M8,C.tail=_j,C.take=xj,C.takeRight=wj,C.takeRightWhile=bj,C.takeWhile=Ej,C.tap=Uj,C.throttle=S8,C.thru=u0,C.toArray=WR,C.toPairs=KR,C.toPairsIn=JR,C.toPath=PW,C.toPlainObject=qR,C.transform=DG,C.unary=C8,C.union=Mj,C.unionBy=Sj,C.unionWith=Cj,C.uniq=Tj,C.uniqBy=Aj,C.uniqWith=Ij,C.unset=RG,C.unzip=eE,C.unzipWith=DR,C.update=PG,C.updateWith=OG,C.values=Ed,C.valuesIn=NG,C.without=Dj,C.words=tP,C.wrap=T8,C.xor=Rj,C.xorBy=Pj,C.xorWith=Oj,C.zip=Nj,C.zipObject=Fj,C.zipObjectDeep=Lj,C.zipWith=kj,C.entries=KR,C.entriesIn=JR,C.extend=XR,C.extendWith=v0,uE(C,C),C.add=NW,C.attempt=nP,C.camelCase=UG,C.capitalize=QR,C.ceil=FW,C.clamp=FG,C.clone=I8,C.cloneDeep=R8,C.cloneDeepWith=P8,C.cloneWith=D8,C.conformsTo=O8,C.deburr=eP,C.defaultTo=hW,C.divide=LW,C.endsWith=BG,C.eq=Ss,C.escape=VG,C.escapeRegExp=HG,C.every=Xj,C.find=Zj,C.findIndex=SR,C.findKey=cG,C.findLast=Kj,C.findLastIndex=CR,C.findLastKey=uG,C.floor=kW,C.forEach=PR,C.forEachRight=OR,C.forIn=dG,C.forInRight=fG,C.forOwn=hG,C.forOwnRight=pG,C.get=oE,C.gt=N8,C.gte=F8,C.has=vG,C.hasIn=sE,C.head=AR,C.identity=Xr,C.includes=n8,C.indexOf=K5,C.inRange=LG,C.invoke=xG,C.isArguments=qc,C.isArray=Wt,C.isArrayBuffer=L8,C.isArrayLike=$r,C.isArrayLikeObject=Ci,C.isBoolean=k8,C.isBuffer=ec,C.isDate=U8,C.isElement=B8,C.isEmpty=V8,C.isEqual=H8,C.isEqualWith=z8,C.isError=iE,C.isFinite=j8,C.isFunction=Ka,C.isInteger=HR,C.isLength=m0,C.isMap=zR,C.isMatch=G8,C.isMatchWith=W8,C.isNaN=$8,C.isNative=q8,C.isNil=Y8,C.isNull=X8,C.isNumber=jR,C.isObject=fi,C.isObjectLike=gi,C.isPlainObject=Gh,C.isRegExp=rE,C.isSafeInteger=Z8,C.isSet=GR,C.isString=g0,C.isSymbol=yo,C.isTypedArray=bd,C.isUndefined=K8,C.isWeakMap=J8,C.isWeakSet=Q8,C.join=nj,C.kebabCase=zG,C.last=qo,C.lastIndexOf=ij,C.lowerCase=jG,C.lowerFirst=GG,C.lt=eG,C.lte=tG,C.max=UW,C.maxBy=BW,C.mean=VW,C.meanBy=HW,C.min=zW,C.minBy=jW,C.stubArray=fE,C.stubFalse=hE,C.stubObject=AW,C.stubString=IW,C.stubTrue=DW,C.multiply=GW,C.nth=rj,C.noConflict=xW,C.noop=dE,C.now=f0,C.pad=WG,C.padEnd=$G,C.padStart=qG,C.parseInt=XG,C.random=kG,C.reduce=a8,C.reduceRight=l8,C.repeat=YG,C.replace=ZG,C.result=TG,C.round=WW,C.runInContext=Y,C.sample=u8,C.size=h8,C.snakeCase=KG,C.some=p8,C.sortedIndex=dj,C.sortedIndexBy=fj,C.sortedIndexOf=hj,C.sortedLastIndex=pj,C.sortedLastIndexBy=mj,C.sortedLastIndexOf=gj,C.startCase=QG,C.startsWith=eW,C.subtract=$W,C.sum=qW,C.sumBy=XW,C.template=tW,C.times=RW,C.toFinite=Ja,C.toInteger=Zt,C.toLength=$R,C.toLower=nW,C.toNumber=Xo,C.toSafeInteger=nG,C.toString=Rn,C.toUpper=iW,C.trim=rW,C.trimEnd=oW,C.trimStart=sW,C.truncate=aW,C.unescape=lW,C.uniqueId=OW,C.upperCase=cW,C.upperFirst=aE,C.each=PR,C.eachRight=OR,C.first=AR,uE(C,function(){var c={};return ca(C,function(d,m){Nn.call(C.prototype,m)||(c[m]=d)}),c}(),{chain:!1}),C.VERSION=e,zo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){C[c].placeholder=C}),zo(["drop","take"],function(c,d){mn.prototype[c]=function(m){m=m===n?1:ji(Zt(m),0);var x=this.__filtered__&&!d?new mn(this):this.clone();return x.__filtered__?x.__takeCount__=vr(m,x.__takeCount__):x.__views__.push({size:vr(m,ge),type:c+(x.__dir__<0?"Right":"")}),x},mn.prototype[c+"Right"]=function(m){return this.reverse()[c](m).reverse()}}),zo(["filter","map","takeWhile"],function(c,d){var m=d+1,x=m==he||m==Te;mn.prototype[c]=function(b){var D=this.clone();return D.__iteratees__.push({iteratee:Mt(b,3),type:m}),D.__filtered__=D.__filtered__||x,D}}),zo(["head","last"],function(c,d){var m="take"+(d?"Right":"");mn.prototype[c]=function(){return this[m](1).value()[0]}}),zo(["initial","tail"],function(c,d){var m="drop"+(d?"":"Right");mn.prototype[c]=function(){return this.__filtered__?new mn(this):this[m](1)}}),mn.prototype.compact=function(){return this.filter(Xr)},mn.prototype.find=function(c){return this.filter(c).head()},mn.prototype.findLast=function(c){return this.reverse().find(c)},mn.prototype.invokeMap=an(function(c,d){return typeof c=="function"?new mn(this):this.map(function(m){return Uh(m,c,d)})}),mn.prototype.reject=function(c){return this.filter(p0(Mt(c)))},mn.prototype.slice=function(c,d){c=Zt(c);var m=this;return m.__filtered__&&(c>0||d<0)?new mn(m):(c<0?m=m.takeRight(-c):c&&(m=m.drop(c)),d!==n&&(d=Zt(d),m=d<0?m.dropRight(-d):m.take(d-c)),m)},mn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},mn.prototype.toArray=function(){return this.take(ge)},ca(mn.prototype,function(c,d){var m=/^(?:filter|find|map|reject)|While$/.test(d),x=/^(?:head|last)$/.test(d),b=C[x?"take"+(d=="last"?"Right":""):d],D=x||/^find/.test(d);b&&(C.prototype[d]=function(){var k=this.__wrapped__,j=x?[1]:arguments,Q=k instanceof mn,Ee=j[0],Me=Q||Wt(k),Pe=function(un){var yn=b.apply(C,$l([un],j));return x&&Je?yn[0]:yn};Me&&m&&typeof Ee=="function"&&Ee.length!=1&&(Q=Me=!1);var Je=this.__chain__,mt=!!this.__actions__.length,It=D&&!Je,en=Q&&!mt;if(!D&&Me){k=en?k:new mn(this);var Dt=c.apply(k,j);return Dt.__actions__.push({func:u0,args:[Pe],thisArg:n}),new Go(Dt,Je)}return It&&en?c.apply(this,j):(Dt=this.thru(Pe),It?x?Dt.value()[0]:Dt.value():Dt)})}),zo(["pop","push","shift","sort","splice","unshift"],function(c){var d=Lg[c],m=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",x=/^(?:pop|shift)$/.test(c);C.prototype[c]=function(){var b=arguments;if(x&&!this.__chain__){var D=this.value();return d.apply(Wt(D)?D:[],b)}return this[m](function(k){return d.apply(Wt(k)?k:[],b)})}}),ca(mn.prototype,function(c,d){var m=C[d];if(m){var x=m.name+"";Nn.call(vd,x)||(vd[x]=[]),vd[x].push({name:d,func:m})}}),vd[i0(n,w).name]=[{name:"wrapper",func:n}],mn.prototype.clone=lz,mn.prototype.reverse=cz,mn.prototype.value=uz,C.prototype.at=Bj,C.prototype.chain=Vj,C.prototype.commit=Hj,C.prototype.next=zj,C.prototype.plant=Gj,C.prototype.reverse=Wj,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=$j,C.prototype.first=C.prototype.head,Rh&&(C.prototype[Rh]=jj),C},Xl=HH();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ki._=Xl,define(function(){return Xl})):Bc?((Bc.exports=Xl)._=Xl,cb._=Xl):Ki._=Xl}).call(Of)});var Pk=aP((_1,x1)=>{"use strict";(function(n,e){typeof _1=="object"&&typeof x1<"u"?x1.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Compressor=e())})(_1,function(){"use strict";function n(me,re){var U=Object.keys(me);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(me);re&&(Z=Z.filter(function(ve){return Object.getOwnPropertyDescriptor(me,ve).enumerable})),U.push.apply(U,Z)}return U}function e(me){for(var re=1;re<arguments.length;re++){var U=arguments[re]!=null?arguments[re]:{};re%2?n(Object(U),!0).forEach(function(Z){o(me,Z,U[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(U)):n(Object(U)).forEach(function(Z){Object.defineProperty(me,Z,Object.getOwnPropertyDescriptor(U,Z))})}return me}function t(me,re){if(!(me instanceof re))throw new TypeError("Cannot call a class as a function")}function i(me,re){for(var U=0;U<re.length;U++){var Z=re[U];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(me,l(Z.key),Z)}}function r(me,re,U){return re&&i(me.prototype,re),U&&i(me,U),Object.defineProperty(me,"prototype",{writable:!1}),me}function o(me,re,U){return re=l(re),re in me?Object.defineProperty(me,re,{value:U,enumerable:!0,configurable:!0,writable:!0}):me[re]=U,me}function s(){return s=Object.assign?Object.assign.bind():function(me){for(var re=1;re<arguments.length;re++){var U=arguments[re];for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(me[Z]=U[Z])}return me},s.apply(this,arguments)}function a(me,re){if(typeof me!="object"||me===null)return me;var U=me[Symbol.toPrimitive];if(U!==void 0){var Z=U.call(me,re||"default");if(typeof Z!="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(re==="string"?String:Number)(me)}function l(me){var re=a(me,"string");return typeof re=="symbol"?re:String(re)}var u={exports:{}};(function(me){typeof window>"u"||function(re){var U=re.HTMLCanvasElement&&re.HTMLCanvasElement.prototype,Z=re.Blob&&function(){try{return!!new Blob}catch{return!1}}(),ve=Z&&re.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),se=re.BlobBuilder||re.WebKitBlobBuilder||re.MozBlobBuilder||re.MSBlobBuilder,He=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,je=(Z||se)&&re.atob&&re.ArrayBuffer&&re.Uint8Array&&function(Fe){var rt,pt,ut,H,qt,Ge,At,Xe,Vt;if(rt=Fe.match(He),!rt)throw new Error("invalid data URI");for(pt=rt[2]?rt[1]:"text/plain"+(rt[3]||";charset=US-ASCII"),ut=!!rt[4],H=Fe.slice(rt[0].length),ut?qt=atob(H):qt=decodeURIComponent(H),Ge=new ArrayBuffer(qt.length),At=new Uint8Array(Ge),Xe=0;Xe<qt.length;Xe+=1)At[Xe]=qt.charCodeAt(Xe);return Z?new Blob([ve?At:Ge],{type:pt}):(Vt=new se,Vt.append(Ge),Vt.getBlob(pt))};re.HTMLCanvasElement&&!U.toBlob&&(U.mozGetAsFile?U.toBlob=function(Fe,rt,pt){var ut=this;setTimeout(function(){pt&&U.toDataURL&&je?Fe(je(ut.toDataURL(rt,pt))):Fe(ut.mozGetAsFile("blob",rt))})}:U.toDataURL&&je&&(U.msToBlob?U.toBlob=function(Fe,rt,pt){var ut=this;setTimeout(function(){(rt&&rt!=="image/png"||pt)&&U.toDataURL&&je?Fe(je(ut.toDataURL(rt,pt))):Fe(ut.msToBlob(rt))})}:U.toBlob=function(Fe,rt,pt){var ut=this;setTimeout(function(){Fe(je(ut.toDataURL(rt,pt)))})})),me.exports?me.exports=je:re.dataURLtoBlob=je}(window)})(u);var f=u.exports,h=function(re){return typeof Blob>"u"?!1:re instanceof Blob||Object.prototype.toString.call(re)==="[object Blob]"},p={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},g=typeof window<"u"&&typeof window.document<"u",v=g?window:{},w=function(re){return re>0&&re<1/0},y=Array.prototype.slice;function _(me){return Array.from?Array.from(me):y.call(me)}var T=/^image\/.+$/;function E(me){return T.test(me)}function M(me){var re=E(me)?me.substr(6):"";return re==="jpeg"&&(re="jpg"),".".concat(re)}var V=String.fromCharCode;function F(me,re,U){var Z="",ve;for(U+=re,ve=re;ve<U;ve+=1)Z+=V(me.getUint8(ve));return Z}var L=v.btoa;function G(me,re){for(var U=[],Z=8192,ve=new Uint8Array(me);ve.length>0;)U.push(V.apply(null,_(ve.subarray(0,Z)))),ve=ve.subarray(Z);return"data:".concat(re,";base64,").concat(L(U.join("")))}function O(me){var re=new DataView(me),U;try{var Z,ve,se;if(re.getUint8(0)===255&&re.getUint8(1)===216)for(var He=re.byteLength,je=2;je+1<He;){if(re.getUint8(je)===255&&re.getUint8(je+1)===225){ve=je;break}je+=1}if(ve){var Fe=ve+4,rt=ve+10;if(F(re,Fe,4)==="Exif"){var pt=re.getUint16(rt);if(Z=pt===18761,(Z||pt===19789)&&re.getUint16(rt+2,Z)===42){var ut=re.getUint32(rt+4,Z);ut>=8&&(se=rt+ut)}}}if(se){var H=re.getUint16(se,Z),qt,Ge;for(Ge=0;Ge<H;Ge+=1)if(qt=se+Ge*12+2,re.getUint16(qt,Z)===274){qt+=8,U=re.getUint16(qt,Z),re.setUint16(qt,1,Z);break}}}catch{U=1}return U}function I(me){var re=0,U=1,Z=1;switch(me){case 2:U=-1;break;case 3:re=-180;break;case 4:Z=-1;break;case 5:re=90,Z=-1;break;case 6:re=90;break;case 7:re=90,U=-1;break;case 8:re=-90;break}return{rotate:re,scaleX:U,scaleY:Z}}var z=/\.\d*(?:0|9){12}\d*$/;function he(me){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return z.test(me)?Math.round(me*re)/re:me}function ae(me){var re=me.aspectRatio,U=me.height,Z=me.width,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",se=w(Z),He=w(U);if(se&&He){var je=U*re;(ve==="contain"||ve==="none")&&je>Z||ve==="cover"&&je<Z?U=Z/re:Z=U*re}else se?U=Z/re:He&&(Z=U*re);return{width:Z,height:U}}function Te(me){for(var re=_(new Uint8Array(me)),U=re.length,Z=[],ve=0;ve+3<U;){var se=re[ve],He=re[ve+1];if(se===255&&He===218)break;if(se===255&&He===216)ve+=2;else{var je=re[ve+2]*256+re[ve+3],Fe=ve+je+2,rt=re.slice(ve,Fe);Z.push(rt),ve=Fe}}return Z.reduce(function(pt,ut){return ut[0]===255&&ut[1]===225?pt.concat(ut):pt},[])}function be(me,re){var U=_(new Uint8Array(me));if(U[2]!==255||U[3]!==224)return me;var Z=U[4]*256+U[5],ve=[255,216].concat(re,U.slice(4+Z));return new Uint8Array(ve)}var q=v.ArrayBuffer,ie=v.FileReader,$=v.URL||v.webkitURL,ge=/\.\w+$/,Ue=v.Compressor,tt=function(){function me(re,U){t(this,me),this.file=re,this.exif=[],this.image=new Image,this.options=e(e({},p),U),this.aborted=!1,this.result=null,this.init()}return r(me,[{key:"init",value:function(){var U=this,Z=this.file,ve=this.options;if(!h(Z)){this.fail(new Error("The first argument must be a File or Blob object."));return}var se=Z.type;if(!E(se)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!$||!ie){this.fail(new Error("The current browser does not support image compression."));return}q||(ve.checkOrientation=!1,ve.retainExif=!1);var He=se==="image/jpeg",je=He&&ve.checkOrientation,Fe=He&&ve.retainExif;if($&&!je&&!Fe)this.load({url:$.createObjectURL(Z)});else{var rt=new ie;this.reader=rt,rt.onload=function(pt){var ut=pt.target,H=ut.result,qt={},Ge=1;je&&(Ge=O(H),Ge>1&&s(qt,I(Ge))),Fe&&(U.exif=Te(H)),je||Fe?!$||Ge>1?qt.url=G(H,se):qt.url=$.createObjectURL(Z):qt.url=H,U.load(qt)},rt.onabort=function(){U.fail(new Error("Aborted to read the image with FileReader."))},rt.onerror=function(){U.fail(new Error("Failed to read the image with FileReader."))},rt.onloadend=function(){U.reader=null},je||Fe?rt.readAsArrayBuffer(Z):rt.readAsDataURL(Z)}}},{key:"load",value:function(U){var Z=this,ve=this.file,se=this.image;se.onload=function(){Z.draw(e(e({},U),{},{naturalWidth:se.naturalWidth,naturalHeight:se.naturalHeight}))},se.onabort=function(){Z.fail(new Error("Aborted to load the image."))},se.onerror=function(){Z.fail(new Error("Failed to load the image."))},v.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(v.navigator.userAgent)&&(se.crossOrigin="anonymous"),se.alt=ve.name,se.src=U.url}},{key:"draw",value:function(U){var Z=this,ve=U.naturalWidth,se=U.naturalHeight,He=U.rotate,je=He===void 0?0:He,Fe=U.scaleX,rt=Fe===void 0?1:Fe,pt=U.scaleY,ut=pt===void 0?1:pt,H=this.file,qt=this.image,Ge=this.options,At=document.createElement("canvas"),Xe=At.getContext("2d"),Vt=Math.abs(je)%180===90,ht=(Ge.resize==="contain"||Ge.resize==="cover")&&w(Ge.width)&&w(Ge.height),N=Math.max(Ge.maxWidth,0)||1/0,S=Math.max(Ge.maxHeight,0)||1/0,oe=Math.max(Ge.minWidth,0)||0,xe=Math.max(Ge.minHeight,0)||0,Ae=ve/se,fe=Ge.width,$e=Ge.height;if(Vt){var qe=[S,N];N=qe[0],S=qe[1];var gt=[xe,oe];oe=gt[0],xe=gt[1];var vt=[$e,fe];fe=vt[0],$e=vt[1]}ht&&(Ae=fe/$e);var Ne=ae({aspectRatio:Ae,width:N,height:S},"contain");N=Ne.width,S=Ne.height;var nt=ae({aspectRatio:Ae,width:oe,height:xe},"cover");if(oe=nt.width,xe=nt.height,ht){var yt=ae({aspectRatio:Ae,width:fe,height:$e},Ge.resize);fe=yt.width,$e=yt.height}else{var bt=ae({aspectRatio:Ae,width:fe,height:$e}),it=bt.width;fe=it===void 0?ve:it;var sn=bt.height;$e=sn===void 0?se:sn}fe=Math.floor(he(Math.min(Math.max(fe,oe),N))),$e=Math.floor(he(Math.min(Math.max($e,xe),S)));var Ht=-fe/2,Dn=-$e/2,X=fe,Ze=$e,pe=[];if(ht){var Se=0,et=0,Ye=ve,Ot=se,zn=ae({aspectRatio:Ae,width:ve,height:se},{contain:"cover",cover:"contain"}[Ge.resize]);Ye=zn.width,Ot=zn.height,Se=(ve-Ye)/2,et=(se-Ot)/2,pe.push(Se,et,Ye,Ot)}if(pe.push(Ht,Dn,X,Ze),Vt){var Mi=[$e,fe];fe=Mi[0],$e=Mi[1]}At.width=fe,At.height=$e,E(Ge.mimeType)||(Ge.mimeType=H.type);var xn="transparent";H.size>Ge.convertSize&&Ge.convertTypes.indexOf(Ge.mimeType)>=0&&(Ge.mimeType="image/jpeg");var Zi=Ge.mimeType==="image/jpeg";if(Zi&&(xn="#fff"),Xe.fillStyle=xn,Xe.fillRect(0,0,fe,$e),Ge.beforeDraw&&Ge.beforeDraw.call(this,Xe,At),!this.aborted&&(Xe.save(),Xe.translate(fe/2,$e/2),Xe.rotate(je*Math.PI/180),Xe.scale(rt,ut),Xe.drawImage.apply(Xe,[qt].concat(pe)),Xe.restore(),Ge.drew&&Ge.drew.call(this,Xe,At),!this.aborted)){var Gr=function(aa){if(!Z.aborted){var Bo=function(Vo){return Z.done({naturalWidth:ve,naturalHeight:se,result:Vo})};if(aa&&Zi&&Ge.retainExif&&Z.exif&&Z.exif.length>0){var jl=function(Vo){return Bo(f(G(be(Vo,Z.exif),Ge.mimeType)))};if(aa.arrayBuffer)aa.arrayBuffer().then(jl).catch(function(){Z.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var bs=new ie;Z.reader=bs,bs.onload=function(Gl){var Vo=Gl.target;jl(Vo.result)},bs.onabort=function(){Z.fail(new Error("Aborted to read the compressed image with FileReader."))},bs.onerror=function(){Z.fail(new Error("Failed to read the compressed image with FileReader."))},bs.onloadend=function(){Z.reader=null},bs.readAsArrayBuffer(aa)}}else Bo(aa)}};At.toBlob?At.toBlob(Gr,Ge.mimeType,Ge.quality):Gr(f(At.toDataURL(Ge.mimeType,Ge.quality)))}}},{key:"done",value:function(U){var Z=U.naturalWidth,ve=U.naturalHeight,se=U.result,He=this.file,je=this.image,Fe=this.options;if($&&je.src.indexOf("blob:")===0&&$.revokeObjectURL(je.src),se)if(Fe.strict&&!Fe.retainExif&&se.size>He.size&&Fe.mimeType===He.type&&!(Fe.width>Z||Fe.height>ve||Fe.minWidth>Z||Fe.minHeight>ve||Fe.maxWidth<Z||Fe.maxHeight<ve))se=He;else{var rt=new Date;se.lastModified=rt.getTime(),se.lastModifiedDate=rt,se.name=He.name,se.name&&se.type!==He.type&&(se.name=se.name.replace(ge,M(se.type)))}else se=He;this.result=se,Fe.success&&Fe.success.call(this,se)}},{key:"fail",value:function(U){var Z=this.options;if(Z.error)Z.error.call(this,U);else throw U}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Ue,me}},{key:"setDefaults",value:function(U){s(p,U)}}]),me}();return tt})});function xE(n,e){return Object.is(n,e)}var Gi=null,_0=!1,wE=1,Yo=Symbol("SIGNAL");function gn(n){let e=Gi;return Gi=n,e}function bE(){return Gi}var $h={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qh(n){if(_0)throw new Error("");if(Gi===null)return;Gi.consumerOnSignalRead(n);let e=Gi.nextProducerIndex++;if(E0(Gi),e<Gi.producerNode.length&&Gi.producerNode[e]!==n&&Wh(Gi)){let t=Gi.producerNode[e];b0(t,Gi.producerIndexOfThis[e])}Gi.producerNode[e]!==n&&(Gi.producerNode[e]=n,Gi.producerIndexOfThis[e]=Wh(Gi)?cP(n,Gi,e):0),Gi.producerLastReadVersion[e]=n.version}function lP(){wE++}function EE(n){if(!(Wh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===wE)){if(!n.producerMustRecompute(n)&&!TE(n)){_E(n);return}n.producerRecomputeValue(n),_E(n)}}function ME(n){if(n.liveConsumerNode===void 0)return;let e=_0;_0=!0;try{for(let t of n.liveConsumerNode)t.dirty||n6(t)}finally{_0=e}}function SE(){return Gi?.consumerAllowSignalWrites!==!1}function n6(n){n.dirty=!0,ME(n),n.consumerMarkedDirty?.(n)}function _E(n){n.dirty=!1,n.lastCleanEpoch=wE}function w0(n){return n&&(n.nextProducerIndex=0),gn(n)}function CE(n,e){if(gn(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Wh(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)b0(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function TE(n){E0(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(EE(t),i!==t.version))return!0}return!1}function AE(n){if(E0(n),Wh(n))for(let e=0;e<n.producerNode.length;e++)b0(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function cP(n,e,t){if(uP(n),n.liveConsumerNode.length===0&&dP(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=cP(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function b0(n,e){if(uP(n),n.liveConsumerNode.length===1&&dP(n))for(let i=0;i<n.producerNode.length;i++)b0(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];E0(r),r.producerIndexOfThis[i]=e}}function Wh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function E0(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function uP(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function dP(n){return n.producerNode!==void 0}function IE(n,e){let t=Object.create(i6);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(EE(t),qh(t),t.value===x0)throw t.error;return t.value};return i[Yo]=t,i}var vE=Symbol("UNSET"),yE=Symbol("COMPUTING"),x0=Symbol("ERRORED"),i6=wt(Oe({},$h),{value:vE,dirty:!0,error:null,equal:xE,kind:"computed",producerMustRecompute(n){return n.value===vE||n.value===yE},producerRecomputeValue(n){if(n.value===yE)throw new Error("Detected cycle in computations.");let e=n.value;n.value=yE;let t=w0(n),i,r=!1;try{i=n.computation(),gn(null),r=e!==vE&&e!==x0&&i!==x0&&n.equal(e,i)}catch(o){i=x0,n.error=o}finally{CE(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function r6(){throw new Error}var fP=r6;function hP(n){fP(n)}function DE(n){fP=n}var o6=null;function RE(n,e){let t=Object.create(M0);t.value=n,e!==void 0&&(t.equal=e);let i=()=>(qh(t),t.value);return i[Yo]=t,i}function Xh(n,e){SE()||hP(n),n.equal(n.value,e)||(n.value=e,s6(n))}function PE(n,e){SE()||hP(n),Xh(n,e(n.value))}var M0=wt(Oe({},$h),{equal:xE,value:void 0,kind:"signal"});function s6(n){n.version++,lP(),ME(n),o6?.()}function OE(n){let e=gn(null);try{return n()}finally{gn(e)}}var NE;function Yh(){return NE}function el(n){let e=NE;return NE=n,e}var S0=Symbol("NotFound");function St(n){return typeof n=="function"}function Sd(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var C0=Sd(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Xc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var vi=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(St(i))try{i()}catch(o){e=o instanceof C0?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{pP(o)}catch(s){e=e??[],s instanceof C0?e=[...e,...s.errors]:e.push(s)}}if(e)throw new C0(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pP(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Xc(t,e)}remove(e){let{_finalizers:t}=this;t&&Xc(t,e),e instanceof n&&e._removeParent(this)}};vi.EMPTY=(()=>{let n=new vi;return n.closed=!0,n})();var FE=vi.EMPTY;function T0(n){return n instanceof vi||n&&"closed"in n&&St(n.remove)&&St(n.add)&&St(n.unsubscribe)}function pP(n){St(n)?n():n.unsubscribe()}var Ts={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Cd={setTimeout(n,e,...t){let{delegate:i}=Cd;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Cd;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function A0(n){Cd.setTimeout(()=>{let{onUnhandledError:e}=Ts;if(e)e(n);else throw n})}function Yc(){}var mP=LE("C",void 0,void 0);function gP(n){return LE("E",void 0,n)}function vP(n){return LE("N",n,void 0)}function LE(n,e,t){return{kind:n,value:e,error:t}}var Zc=null;function Td(n){if(Ts.useDeprecatedSynchronousErrorHandling){let e=!Zc;if(e&&(Zc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Zc;if(Zc=null,t)throw i}}else n()}function yP(n){Ts.useDeprecatedSynchronousErrorHandling&&Zc&&(Zc.errorThrown=!0,Zc.error=n)}var Kc=class extends vi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,T0(e)&&e.add(this)):this.destination=f6}static create(e,t,i){return new As(e,t,i)}next(e){this.isStopped?UE(vP(e),this):this._next(e)}error(e){this.isStopped?UE(gP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?UE(mP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},u6=Function.prototype.bind;function kE(n,e){return u6.call(n,e)}var BE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){I0(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){I0(i)}else I0(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){I0(t)}}},As=class extends Kc{constructor(e,t,i){super();let r;if(St(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Ts.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&kE(e.next,o),error:e.error&&kE(e.error,o),complete:e.complete&&kE(e.complete,o)}):r=e}this.destination=new BE(r)}};function I0(n){Ts.useDeprecatedSynchronousErrorHandling?yP(n):A0(n)}function d6(n){throw n}function UE(n,e){let{onStoppedNotification:t}=Ts;t&&Cd.setTimeout(()=>t(n,e))}var f6={closed:!0,next:Yc,error:d6,complete:Yc};var Ad=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rr(n){return n}function Zh(...n){return VE(n)}function VE(n){return n.length===0?rr:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Ft=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=p6(t)?t:new As(t,i,r);return Td(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=_P(i),new i((r,o)=>{let s=new As({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Ad](){return this}pipe(...t){return VE(t)(this)}toPromise(t){return t=_P(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function _P(n){var e;return(e=n??Ts.Promise)!==null&&e!==void 0?e:Promise}function h6(n){return n&&St(n.next)&&St(n.error)&&St(n.complete)}function p6(n){return n&&n instanceof Kc||h6(n)&&T0(n)}function HE(n){return St(n?.lift)}function kt(n){return e=>{if(HE(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pt(n,e,t,i,r){return new zE(n,e,t,i,r)}var zE=class extends Kc{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Id(){return kt((n,e)=>{let t=null;n._refCount++;let i=Pt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Dd=class extends Ft{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,HE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vi;let t=this.getSubject();e.add(this.source.subscribe(Pt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vi.EMPTY)}return e}refCount(){return Id()(this)}};var xP=Sd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fn=(()=>{class n extends Ft{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new D0(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new xP}next(t){Td(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Td(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Td(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?FE:(this.currentObservers=null,o.push(t),new vi(()=>{this.currentObservers=null,Xc(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Ft;return t.source=this,t}}return n.create=(e,t)=>new D0(e,t),n})(),D0=class extends Fn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:FE}};var ti=class extends Fn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Kh={now(){return(Kh.delegate||Date).now()},delegate:void 0};var R0=class extends Fn{constructor(e=1/0,t=1/0,i=Kh){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var P0=class extends vi{constructor(e,t){super()}schedule(e,t=0){return this}};var Jh={setInterval(n,e,...t){let{delegate:i}=Jh;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Jh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Rd=class extends P0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Jh.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Jh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Xc(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Pd=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Pd.now=Kh.now;var Od=class extends Pd{constructor(e,t=Pd.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var tl=new Od(Rd),jE=tl;var O0=class extends Rd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var N0=class extends Od{};var Qh=new N0(O0);var yi=new Ft(n=>n.complete());function F0(n){return n&&St(n.schedule)}function GE(n){return n[n.length-1]}function Nd(n){return St(GE(n))?n.pop():void 0}function fa(n){return F0(GE(n))?n.pop():void 0}function wP(n,e){return typeof GE(n)=="number"?n.pop():e}function EP(n,e,t,i){var r=arguments.length,o=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}function MP(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(i.next(f))}catch(h){s(h)}}function l(f){try{u(i.throw(f))}catch(h){s(h)}}function u(f){f.done?o(f.value):r(f.value).then(a,l)}u((i=i.apply(n,e||[])).next())})}function bP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jc(n){return this instanceof Jc?(this.v=n,this):new Jc(n)}function SP(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){i[g]&&(r[g]=function(w){return new Promise(function(y,_){o.push([g,w,y,_])>1||l(g,w)})},v&&(r[g]=v(r[g])))}function l(g,v){try{u(i[g](v))}catch(w){p(o[0][3],w)}}function u(g){g.value instanceof Jc?Promise.resolve(g.value.v).then(f,h):p(o[0][2],g)}function f(g){l("next",g)}function h(g){l("throw",g)}function p(g,v){g(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}function CP(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof bP=="function"?bP(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Fd=n=>n&&typeof n.length=="number"&&typeof n!="function";function L0(n){return St(n?.then)}function k0(n){return St(n[Ad])}function U0(n){return Symbol.asyncIterator&&St(n?.[Symbol.asyncIterator])}function B0(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function m6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var V0=m6();function H0(n){return St(n?.[V0])}function z0(n){return SP(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Jc(t.read());if(r)return yield Jc(void 0);yield yield Jc(i)}}finally{t.releaseLock()}})}function j0(n){return St(n?.getReader)}function Mn(n){if(n instanceof Ft)return n;if(n!=null){if(k0(n))return g6(n);if(Fd(n))return v6(n);if(L0(n))return y6(n);if(U0(n))return TP(n);if(H0(n))return _6(n);if(j0(n))return x6(n)}throw B0(n)}function g6(n){return new Ft(e=>{let t=n[Ad]();if(St(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function v6(n){return new Ft(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function y6(n){return new Ft(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,A0)})}function _6(n){return new Ft(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function TP(n){return new Ft(e=>{w6(n,e).catch(t=>e.error(t))})}function x6(n){return TP(z0(n))}function w6(n,e){var t,i,r,o;return MP(this,void 0,void 0,function*(){try{for(t=CP(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Yr(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function G0(n,e=0){return kt((t,i)=>{t.subscribe(Pt(i,r=>Yr(i,n,()=>i.next(r),e),()=>Yr(i,n,()=>i.complete(),e),r=>Yr(i,n,()=>i.error(r),e)))})}function W0(n,e=0){return kt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function AP(n,e){return Mn(n).pipe(W0(e),G0(e))}function IP(n,e){return Mn(n).pipe(W0(e),G0(e))}function DP(n,e){return new Ft(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function RP(n,e){return new Ft(t=>{let i;return Yr(t,e,()=>{i=n[V0](),Yr(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>St(i?.return)&&i.return()})}function $0(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ft(t=>{Yr(t,e,()=>{let i=n[Symbol.asyncIterator]();Yr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function PP(n,e){return $0(z0(n),e)}function OP(n,e){if(n!=null){if(k0(n))return AP(n,e);if(Fd(n))return DP(n,e);if(L0(n))return IP(n,e);if(U0(n))return $0(n,e);if(H0(n))return RP(n,e);if(j0(n))return PP(n,e)}throw B0(n)}function Kn(n,e){return e?OP(n,e):Mn(n)}function Ct(...n){let e=fa(n);return Kn(n,e)}function tc(n,e){let t=St(n)?n:()=>n,i=r=>r.error(t());return new Ft(e?r=>e.schedule(i,0,r):i)}function WE(n){return!!n&&(n instanceof Ft||St(n.lift)&&St(n.subscribe))}var Is=Sd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function tn(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new As({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new Is)}});n.subscribe(o)})}function NP(n){return n instanceof Date&&!isNaN(n)}function lt(n,e){return kt((t,i)=>{let r=0;t.subscribe(Pt(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:b6}=Array;function E6(n,e){return b6(e)?n(...e):n(e)}function Ld(n){return lt(e=>E6(n,e))}var{isArray:M6}=Array,{getPrototypeOf:S6,prototype:C6,keys:T6}=Object;function q0(n){if(n.length===1){let e=n[0];if(M6(e))return{args:e,keys:null};if(A6(e)){let t=T6(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function A6(n){return n&&typeof n=="object"&&S6(n)===C6}function X0(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function kd(...n){let e=fa(n),t=Nd(n),{args:i,keys:r}=q0(n);if(i.length===0)return Kn([],e);let o=new Ft(I6(i,e,r?s=>X0(r,s):rr));return t?o.pipe(Ld(t)):o}function I6(n,e,t=rr){return i=>{FP(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)FP(e,()=>{let u=Kn(n[l],e),f=!1;u.subscribe(Pt(i,h=>{o[l]=h,f||(f=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function FP(n,e,t){n?Yr(t,n,e):e()}function LP(n,e,t,i,r,o,s,a){let l=[],u=0,f=0,h=!1,p=()=>{h&&!l.length&&!u&&e.complete()},g=w=>u<i?v(w):l.push(w),v=w=>{o&&e.next(w),u++;let y=!1;Mn(t(w,f++)).subscribe(Pt(e,_=>{r?.(_),o?g(_):e.next(_)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;l.length&&u<i;){let _=l.shift();s?Yr(e,s,()=>v(_)):v(_)}p()}catch(_){e.error(_)}}))};return n.subscribe(Pt(e,g,()=>{h=!0,p()})),()=>{a?.()}}function Ai(n,e,t=1/0){return St(e)?Ai((i,r)=>lt((o,s)=>e(i,o,r,s))(Mn(n(i,r))),t):(typeof e=="number"&&(t=e),kt((i,r)=>LP(i,r,n,t)))}function Y0(n=1/0){return Ai(rr,n)}function kP(){return Y0(1)}function Qc(...n){return kP()(Kn(n,fa(n)))}function Z0(n){return new Ft(e=>{Mn(n()).subscribe(e)})}function $E(...n){let e=Nd(n),{args:t,keys:i}=q0(n),r=new Ft(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let h=!1;Mn(t[f]).subscribe(Pt(o,p=>{h||(h=!0,u--),a[f]=p},()=>l--,void 0,()=>{(!l||!h)&&(u||o.next(i?X0(i,a):a),o.complete())}))}});return e?r.pipe(Ld(e)):r}var D6=["addListener","removeListener"],R6=["addEventListener","removeEventListener"],P6=["on","off"];function Ds(n,e,t,i){if(St(t)&&(i=t,t=void 0),i)return Ds(n,e,t).pipe(Ld(i));let[r,o]=F6(n)?R6.map(s=>a=>n[s](e,a,t)):O6(n)?D6.map(UP(n,e)):N6(n)?P6.map(UP(n,e)):[];if(!r&&Fd(n))return Ai(s=>Ds(s,e,t))(Mn(n));if(!r)throw new TypeError("Invalid event target");return new Ft(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function UP(n,e){return t=>i=>n[t](e,i)}function O6(n){return St(n.addListener)&&St(n.removeListener)}function N6(n){return St(n.on)&&St(n.off)}function F6(n){return St(n.addEventListener)&&St(n.removeEventListener)}function ha(n=0,e,t=jE){let i=-1;return e!=null&&(F0(e)?t=e:i=e),new Ft(r=>{let o=NP(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function qE(n=0,e=tl){return n<0&&(n=0),ha(n,n,e)}function wo(...n){let e=fa(n),t=wP(n,1/0),i=n;return i.length?i.length===1?Mn(i[0]):Y0(t)(Kn(i,e)):yi}function Gn(n,e){return kt((t,i)=>{let r=0;t.subscribe(Pt(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Rs(n){return kt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Pt(t,void 0,void 0,s=>{o=Mn(n(s,Rs(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function BP(n,e,t,i,r){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(Pt(s,f=>{let h=u++;l=a?n(l,f,h):(a=!0,f),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function nc(n,e){return St(e)?Ai(n,e,1):Ai(n,1)}function nl(n){return kt((e,t)=>{let i=!1;e.subscribe(Pt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function bo(n){return n<=0?()=>yi:kt((e,t)=>{let i=0;e.subscribe(Pt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function ep(n,e=rr){return n=n??L6,kt((t,i)=>{let r,o=!0;t.subscribe(Pt(i,s=>{let a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function L6(n,e){return n===e}function K0(n=k6){return kt((e,t)=>{let i=!1;e.subscribe(Pt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function k6(){return new Is}function ic(n){return kt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function il(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Gn((r,o)=>n(r,o,i)):rr,bo(1),t?nl(e):K0(()=>new Is))}function Ud(n){return n<=0?()=>yi:kt((e,t)=>{let i=[];e.subscribe(Pt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function XE(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Gn((r,o)=>n(r,o,i)):rr,Ud(1),t?nl(e):K0(()=>new Is))}function tp(){return kt((n,e)=>{let t,i=!1;n.subscribe(Pt(e,r=>{let o=t;t=r,i&&e.next([o,r]),i=!0}))})}function Bd(n){let e=1/0,t;return n!=null&&(typeof n=="object"?{count:e=1/0,delay:t}=n:e=n),e<=0?()=>yi:kt((i,r)=>{let o=0,s,a=()=>{if(s?.unsubscribe(),s=null,t!=null){let u=typeof t=="number"?ha(t):Mn(t(o)),f=Pt(r,()=>{f.unsubscribe(),l()});u.subscribe(f)}else l()},l=()=>{let u=!1;s=i.subscribe(Pt(r,void 0,()=>{++o<e?s?a():u=!0:r.complete()})),u&&a()};l()})}function YE(n,e){return kt(BP(n,e,arguments.length>=2,!0))}function pa(n={}){let{connector:e=()=>new Fn,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,u=0,f=!1,h=!1,p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=l=void 0,f=h=!1},v=()=>{let w=s;g(),w?.unsubscribe()};return kt((w,y)=>{u++,!h&&!f&&p();let _=l=l??e();y.add(()=>{u--,u===0&&!h&&!f&&(a=ZE(v,r))}),_.subscribe(y),!s&&u>0&&(s=new As({next:T=>_.next(T),error:T=>{h=!0,p(),a=ZE(g,t,T),_.error(T)},complete:()=>{f=!0,p(),a=ZE(g,i),_.complete()}}),Mn(w).subscribe(s))})(o)}}function ZE(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new As({next:()=>{i.unsubscribe(),n()}});return Mn(e(...t)).subscribe(i)}function np(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,pa({connector:()=>new R0(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Ps(...n){let e=fa(n);return kt((t,i)=>{(e?Qc(n,t,e):Qc(n,t)).subscribe(i)})}function _i(n,e){return kt((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(Pt(i,l=>{r?.unsubscribe();let u=0,f=o++;Mn(n(l,f)).subscribe(r=Pt(i,h=>i.next(e?e(l,h,f,u++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Zo(n){return kt((e,t)=>{Mn(n).subscribe(Pt(t,()=>t.complete(),Yc)),!t.closed&&e.subscribe(t)})}function hi(n,e,t){let i=St(n)||e||t?{next:n,error:e,complete:t}:n;return i?kt((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Pt(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):rr}function VP(n,e){return kt((t,i)=>{let{leading:r=!0,trailing:o=!1}=e??{},s=!1,a=null,l=null,u=!1,f=()=>{l?.unsubscribe(),l=null,o&&(g(),u&&i.complete())},h=()=>{l=null,u&&i.complete()},p=v=>l=Mn(n(v)).subscribe(Pt(i,f,h)),g=()=>{if(s){s=!1;let v=a;a=null,i.next(v),!u&&p(v)}};t.subscribe(Pt(i,v=>{s=!0,a=v,!(l&&!l.closed)&&(r?g():p(v))},()=>{u=!0,!(o&&s&&l&&!l.closed)&&i.complete()}))})}function KE(n,e=tl,t){let i=ha(n,e);return VP(()=>i,t)}function JE(...n){let e=Nd(n);return kt((t,i)=>{let r=n.length,o=new Array(r),s=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)Mn(n[l]).subscribe(Pt(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(rr))&&(s=null))},Yc));t.subscribe(Pt(i,l=>{if(a){let u=[l,...o];i.next(e?e(...u):u)}}))})}var F4="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Ce=class extends Error{code;constructor(e,t){super(bS(e,t)),this.code=e}};function U6(n){return`NG0${Math.abs(n)}`}function bS(n,e){return`${U6(n)}${e?": "+e:""}`}var L4=Symbol("InputSignalNode#UNSET"),B6=wt(Oe({},M0),{transformFn:void 0,applyValueToInputSignal(n,e){Xh(n,e)}});function k4(n,e){let t=Object.create(B6);t.value=n,t.transformFn=e?.transform;function i(){if(qh(t),t.value===L4){let r=null;throw new Ce(-950,r)}return t.value}return i[Yo]=t,i}function yp(n){return{toString:n}.toString()}var J0="__parameters__";function V6(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function U4(n,e,t){return yp(()=>{let i=V6(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,f){let h=l.hasOwnProperty(J0)?l[J0]:Object.defineProperty(l,J0,{value:[]})[J0];for(;h.length<=f;)h.push(null);return(h[f]=h[f]||[]).push(s),l}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Gd=globalThis;function $n(n){for(let e in n)if(n[e]===$n)return e;throw Error("Could not find renamed property on target object.")}function H6(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Jr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Jr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function gM(n,e){return n?e?`${n} ${e}`:n:e||""}var z6=$n({__forward_ref__:$n});function no(n){return n.__forward_ref__=no,n.toString=function(){return Jr(this())},n}function or(n){return B4(n)?n():n}function B4(n){return typeof n=="function"&&n.hasOwnProperty(z6)&&n.__forward_ref__===no}function De(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fv(n){return HP(n,H4)||HP(n,z4)}function V4(n){return Fv(n)!==null}function HP(n,e){return n.hasOwnProperty(e)?n[e]:null}function j6(n){let e=n&&(n[H4]||n[z4]);return e||null}function zP(n){return n&&(n.hasOwnProperty(jP)||n.hasOwnProperty(G6))?n[jP]:null}var H4=$n({\u0275prov:$n}),jP=$n({\u0275inj:$n}),z4=$n({ngInjectableDef:$n}),G6=$n({ngInjectorDef:$n}),Ie=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=De({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function j4(n){return n&&!!n.\u0275providers}var W6=$n({\u0275cmp:$n}),$6=$n({\u0275dir:$n}),q6=$n({\u0275pipe:$n}),X6=$n({\u0275mod:$n}),uv=$n({\u0275fac:$n}),sp=$n({__NG_ELEMENT_ID__:$n}),GP=$n({__NG_ENV_ID__:$n});function _p(n){return typeof n=="string"?n:n==null?"":String(n)}function Y6(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():_p(n)}function G4(n,e){throw new Ce(-200,n)}function ES(n,e){throw new Ce(-201,!1)}var ln=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ln||{}),vM;function W4(){return vM}function Zr(n){let e=vM;return vM=n,e}function $4(n,e,t){let i=Fv(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&ln.Optional)return null;if(e!==void 0)return e;ES(n,"Injector")}var Z6={},eu=Z6,yM="__NG_DI_FLAG__",dv=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=t;return this.injector.get(e,i.optional?S0:eu,i)}},fv="ngTempTokenPath",K6="ngTokenPath",J6=/\n/gm,Q6="\u0275",WP="__source";function e$(n,e=ln.Default){if(Yh()===void 0)throw new Ce(-203,!1);if(Yh()===null)return $4(n,void 0,e);{let t=Yh(),i;return t instanceof dv?i=t.injector:i=t,i.get(n,e&ln.Optional?null:void 0,e)}}function ze(n,e=ln.Default){return(W4()||e$)(or(n),e)}function K(n,e=ln.Default){return ze(n,Lv(e))}function Lv(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _M(n){let e=[];for(let t=0;t<n.length;t++){let i=or(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Ce(900,!1);let r,o=ln.Default;for(let s=0;s<i.length;s++){let a=i[s],l=t$(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(ze(r,o))}else e.push(ze(i))}return e}function q4(n,e){return n[yM]=e,n.prototype[yM]=e,n}function t$(n){return n[yM]}function n$(n,e,t,i){let r=n[fv];throw e[WP]&&r.unshift(e[WP]),n.message=i$(`
`+n.message,r,t,i),n[K6]=r,n[fv]=null,n}function i$(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Q6?n.slice(2):n;let r=Jr(e);if(Array.isArray(e))r=e.map(Jr).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Jr(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(J6,`
  `)}`}var X4=q4(U4("Optional"),8);var r$=q4(U4("SkipSelf"),4);function nu(n,e){let t=n.hasOwnProperty(uv);return t?n[uv]:null}function o$(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function s$(n){return n.flat(Number.POSITIVE_INFINITY)}function MS(n,e){n.forEach(t=>Array.isArray(t)?MS(t,e):e(t))}function Y4(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function hv(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function a$(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function l$(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function kv(n,e,t){let i=xp(n,e);return i>=0?n[i|1]=t:(i=~i,l$(n,i,e,t)),i}function QE(n,e){let t=xp(n,e);if(t>=0)return n[t|1]}function xp(n,e){return c$(n,e,1)}function c$(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var ga={},Kr=[],iu=new Ie(""),Z4=new Ie("",-1),K4=new Ie(""),pv=class{get(e,t=eu){if(t===eu){let i=new Error(`NullInjectorError: No provider for ${Jr(e)}!`);throw i.name="NullInjectorError",i}return t}};function J4(n,e){let t=n[X6]||null;if(!t&&e===!0)throw new Error(`Type ${Jr(n)} does not have '\u0275mod' property.`);return t}function Wd(n){return n[W6]||null}function Q4(n){return n[$6]||null}function u$(n){return n[q6]||null}function sc(n){return{\u0275providers:n}}function d$(...n){return{\u0275providers:e3(!0,n),\u0275fromNgModule:!0}}function e3(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return MS(e,s=>{let a=s;xM(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&t3(r,o),t}function t3(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];SS(r,o=>{e(o,i)})}}function xM(n,e,t,i){if(n=or(n),!n)return!1;let r=null,o=zP(n),s=!o&&Wd(n);if(!o&&!s){let l=n.ngModule;if(o=zP(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)xM(u,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{MS(o.imports,f=>{xM(f,e,t,i)&&(u||=[],u.push(f))})}finally{}u!==void 0&&t3(u,e)}if(!a){let u=nu(r)||(()=>new r);e({provide:r,useFactory:u,deps:Kr},r),e({provide:K4,useValue:r,multi:!0},r),e({provide:iu,useValue:()=>ze(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=n;SS(l,f=>{e(f,u)})}}else return!1;return r!==n&&n.providers!==void 0}function SS(n,e){for(let t of n)j4(t)&&(t=t.\u0275providers),Array.isArray(t)?SS(t,e):e(t)}var f$=$n({provide:String,useValue:$n});function n3(n){return n!==null&&typeof n=="object"&&f$ in n}function h$(n){return!!(n&&n.useExisting)}function p$(n){return!!(n&&n.useFactory)}function $d(n){return typeof n=="function"}function m$(n){return!!n.useClass}var Uv=new Ie(""),rv={},$P={},eM;function CS(){return eM===void 0&&(eM=new pv),eM}var _r=class{},ap=class extends _r{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,bM(e,s=>this.processProvider(s)),this.records.set(Z4,Vd(void 0,this)),r.has("environment")&&this.records.set(_r,Vd(void 0,this));let o=this.records.get(Uv);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(K4,Kr,ln.Self))}retrieve(e,t){let i=t;return this.get(e,i.optional?S0:eu,i)}destroy(){rp(this),this._destroyed=!0;let e=gn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),gn(e)}}onDestroy(e){return rp(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){rp(this);let t=el(this),i=Zr(void 0),r;try{return e()}finally{el(t),Zr(i)}}get(e,t=eu,i=ln.Default){if(rp(this),e.hasOwnProperty(GP))return e[GP](this);i=Lv(i);let r,o=el(this),s=Zr(void 0);try{if(!(i&ln.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=x$(e)&&Fv(e);u&&this.injectableDefInScope(u)?l=Vd(wM(e),rv):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&ln.Self?CS():this.parent;return t=i&ln.Optional&&t===eu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[fv]=a[fv]||[]).unshift(Jr(e)),o)throw a;return n$(a,e,"R3InjectorError",this.source)}else throw a}finally{Zr(s),el(o)}}resolveInjectorInitializers(){let e=gn(null),t=el(this),i=Zr(void 0),r;try{let o=this.get(iu,Kr,ln.Self);for(let s of o)s()}finally{el(t),Zr(i),gn(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Jr(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=or(e);let t=$d(e)?e:or(e&&e.provide),i=v$(e);if(!$d(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Vd(void 0,rv,!0),r.factory=()=>_M(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=gn(null);try{return t.value===$P?G4(Jr(e)):t.value===rv&&(t.value=$P,t.value=t.factory()),typeof t.value=="object"&&t.value&&_$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{gn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=or(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function wM(n){let e=Fv(n),t=e!==null?e.factory:nu(n);if(t!==null)return t;if(n instanceof Ie)throw new Ce(204,!1);if(n instanceof Function)return g$(n);throw new Ce(204,!1)}function g$(n){if(n.length>0)throw new Ce(204,!1);let t=j6(n);return t!==null?()=>t.factory(n):()=>new n}function v$(n){if(n3(n))return Vd(void 0,n.useValue);{let e=i3(n);return Vd(e,rv)}}function i3(n,e,t){let i;if($d(n)){let r=or(n);return nu(r)||wM(r)}else if(n3(n))i=()=>or(n.useValue);else if(p$(n))i=()=>n.useFactory(..._M(n.deps||[]));else if(h$(n))i=()=>ze(or(n.useExisting));else{let r=or(n&&(n.useClass||n.provide));if(y$(n))i=()=>new r(..._M(n.deps));else return nu(r)||wM(r)}return i}function rp(n){if(n.destroyed)throw new Ce(205,!1)}function Vd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function y$(n){return!!n.deps}function _$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function x$(n){return typeof n=="function"||typeof n=="object"&&n instanceof Ie}function bM(n,e){for(let t of n)Array.isArray(t)?bM(t,e):t&&j4(t)?bM(t.\u0275providers,e):e(t)}function Mo(n,e){let t;n instanceof ap?(rp(n),t=n):t=new dv(n);let i,r=el(t),o=Zr(void 0);try{return e()}finally{el(r),Zr(o)}}function r3(){return W4()!==void 0||Yh()!=null}function TS(n){if(!r3())throw new Ce(-203,!1)}function w$(n){return typeof n=="function"}var Eo=0,Kt=1,$t=2,sr=3,Ns=4,io=5,Ls=6,mv=7,eo=8,ru=9,rl=10,Qn=11,lp=12,qP=13,Qd=14,to=15,ou=16,Hd=17,ol=18,Bv=19,o3=20,rc=21,tM=22,gv=23,Ko=24,nM=25,Ii=26,s3=1,cp=6,sl=7,vv=8,qd=9,Qr=10;function Fs(n){return Array.isArray(n)&&typeof n[s3]=="object"}function xa(n){return Array.isArray(n)&&n[s3]===!0}function AS(n){return(n.flags&4)!==0}function uu(n){return n.componentOffset>-1}function Vv(n){return(n.flags&1)===1}function va(n){return!!n.template}function up(n){return(n[$t]&512)!==0}function ef(n){return(n[$t]&256)===256}var EM=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function a3(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var ar=(()=>{let n=()=>l3;return n.ngInherit=!0,n})();function l3(n){return n.type.prototype.ngOnChanges&&(n.setInput=E$),b$}function b$(){let n=u3(this),e=n?.current;if(e){let t=n.previous;if(t===ga)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function E$(n,e,t,i,r){let o=this.declaredInputs[i],s=u3(n)||M$(n,{previous:ga,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new EM(u&&u.currentValue,t,l===ga),a3(n,e,r,t)}var c3="__ngSimpleChanges__";function u3(n){return n[c3]||null}function M$(n,e){return n[c3]=e}var XP=null;var Jn=function(n,e=null,t){XP?.(n,e,t)},d3="svg",S$="math";function ks(n){for(;Array.isArray(n);)n=n[Eo];return n}function f3(n,e){return ks(e[n])}function Bs(n,e){return ks(e[n.index])}function h3(n,e){return n.data[e]}function p3(n,e){return n[e]}function ya(n,e){let t=e[n];return Fs(t)?t:t[Eo]}function C$(n){return(n[$t]&4)===4}function IS(n){return(n[$t]&128)===128}function T$(n){return xa(n[sr])}function Xd(n,e){return e==null?null:n[e]}function m3(n){n[Hd]=0}function g3(n){n[$t]&1024||(n[$t]|=1024,IS(n)&&zv(n))}function A$(n,e){for(;n>0;)e=e[Qd],n--;return e}function Hv(n){return!!(n[$t]&9216||n[Ko]?.dirty)}function MM(n){n[rl].changeDetectionScheduler?.notify(8),n[$t]&64&&(n[$t]|=1024),Hv(n)&&zv(n)}function zv(n){n[rl].changeDetectionScheduler?.notify(0);let e=su(n);for(;e!==null&&!(e[$t]&8192||(e[$t]|=8192,!IS(e)));)e=su(e)}function v3(n,e){if(ef(n))throw new Ce(911,!1);n[rc]===null&&(n[rc]=[]),n[rc].push(e)}function I$(n,e){if(n[rc]===null)return;let t=n[rc].indexOf(e);t!==-1&&n[rc].splice(t,1)}function su(n){let e=n[sr];return xa(e)?e[sr]:e}function DS(n){return n[mv]??=[]}function RS(n){return n.cleanup??=[]}function D$(n,e,t,i){let r=DS(e);r.push(t),n.firstCreatePass&&RS(n).push(i,r.length-1)}var Xt={lFrame:M3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var SM=!1;function R$(){return Xt.lFrame.elementDepthCount}function P$(){Xt.lFrame.elementDepthCount++}function O$(){Xt.lFrame.elementDepthCount--}function PS(){return Xt.bindingsEnabled}function tf(){return Xt.skipHydrationRootTNode!==null}function N$(n){return Xt.skipHydrationRootTNode===n}function F$(n){Xt.skipHydrationRootTNode=n}function L$(){Xt.skipHydrationRootTNode=null}function dn(){return Xt.lFrame.lView}function Di(){return Xt.lFrame.tView}function Be(n){return Xt.lFrame.contextLView=n,n[eo]}function Ve(n){return Xt.lFrame.contextLView=null,n}function Rr(){let n=y3();for(;n!==null&&n.type===64;)n=n.parent;return n}function y3(){return Xt.lFrame.currentTNode}function k$(){let n=Xt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function du(n,e){let t=Xt.lFrame;t.currentTNode=n,t.isParent=e}function OS(){return Xt.lFrame.isParent}function NS(){Xt.lFrame.isParent=!1}function U$(){return Xt.lFrame.contextLView}function _3(){return SM}function YP(n){let e=SM;return SM=n,e}function jv(){let n=Xt.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function B$(n){return Xt.lFrame.bindingIndex=n}function Gv(){return Xt.lFrame.bindingIndex++}function x3(n){let e=Xt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function V$(){return Xt.lFrame.inI18n}function H$(n,e){let t=Xt.lFrame;t.bindingIndex=t.bindingRootIndex=n,CM(e)}function z$(){return Xt.lFrame.currentDirectiveIndex}function CM(n){Xt.lFrame.currentDirectiveIndex=n}function j$(n){let e=Xt.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function w3(){return Xt.lFrame.currentQueryIndex}function FS(n){Xt.lFrame.currentQueryIndex=n}function G$(n){let e=n[Kt];return e.type===2?e.declTNode:e.type===1?n[io]:null}function b3(n,e,t){if(t&ln.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&ln.Host);)if(r=G$(o),r===null||(o=o[Qd],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Xt.lFrame=E3();return i.currentTNode=e,i.lView=n,!0}function LS(n){let e=E3(),t=n[Kt];Xt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function E3(){let n=Xt.lFrame,e=n===null?null:n.child;return e===null?M3(n):e}function M3(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function S3(){let n=Xt.lFrame;return Xt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var C3=S3;function kS(){let n=S3();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function W$(n){return(Xt.lFrame.contextLView=A$(n,Xt.lFrame.contextLView))[eo]}function fu(){return Xt.lFrame.selectedIndex}function au(n){Xt.lFrame.selectedIndex=n}function US(){let n=Xt.lFrame;return h3(n.tView,n.selectedIndex)}function BS(){Xt.lFrame.currentNamespace=d3}function VS(){$$()}function $$(){Xt.lFrame.currentNamespace=null}function T3(){return Xt.lFrame.currentNamespace}var A3=!0;function Wv(){return A3}function ac(n){A3=n}function q$(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=l3(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function HS(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function ov(n,e,t){I3(n,e,3,t)}function sv(n,e,t,i){(n[$t]&3)===t&&I3(n,e,t,i)}function iM(n,e){let t=n[$t];(t&3)===e&&(t&=16383,t+=1,n[$t]=t)}function I3(n,e,t,i){let r=i!==void 0?n[Hd]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[Hd]+=65536),(a<o||o==-1)&&(X$(n,t,e,l),n[Hd]=(n[Hd]&4294901760)+l+2),l++}function ZP(n,e){Jn(4,n,e);let t=gn(null);try{e.call(n)}finally{gn(t),Jn(5,n,e)}}function X$(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[$t]>>14<n[Hd]>>16&&(n[$t]&3)===e&&(n[$t]+=16384,ZP(a,o)):ZP(a,o)}var jd=-1,lu=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function Y$(n){return(n.flags&8)!==0}function Z$(n){return(n.flags&16)!==0}function K$(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];J$(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function D3(n){return n===3||n===4||n===6}function J$(n){return n.charCodeAt(0)===64}function Yd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?KP(n,t,r,null,e[++i]):KP(n,t,r,null,null))}}return n}function KP(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function R3(n){return n!==jd}function yv(n){return n&32767}function Q$(n){return n>>16}function _v(n,e){let t=Q$(n),i=e;for(;t>0;)i=i[Qd],t--;return i}var TM=!0;function xv(n){let e=TM;return TM=n,e}var e7=256,P3=e7-1,O3=5,t7=0,ma={};function n7(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(sp)&&(i=t[sp]),i==null&&(i=t[sp]=t7++);let r=i&P3,o=1<<r;e.data[n+(r>>O3)]|=o}function wv(n,e){let t=N3(n,e);if(t!==-1)return t;let i=e[Kt];i.firstCreatePass&&(n.injectorIndex=e.length,rM(i.data,n),rM(e,null),rM(i.blueprint,null));let r=zS(n,e),o=n.injectorIndex;if(R3(r)){let s=yv(r),a=_v(r,e),l=a[Kt].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=r,o}function rM(n,e){n.push(0,0,0,0,0,0,0,0,e)}function N3(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function zS(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=B3(r),i===null)return jd;if(t++,r=r[Qd],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return jd}function AM(n,e,t){n7(n,e,t)}function i7(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(D3(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function F3(n,e,t){if(t&ln.Optional||n!==void 0)return n;ES(e,"NodeInjector")}function L3(n,e,t,i){if(t&ln.Optional&&i===void 0&&(i=null),(t&(ln.Self|ln.Host))===0){let r=n[ru],o=Zr(void 0);try{return r?r.get(e,i,t&ln.Optional):$4(e,i,t&ln.Optional)}finally{Zr(o)}}return F3(i,e,t)}function k3(n,e,t,i=ln.Default,r){if(n!==null){if(e[$t]&2048&&!(i&ln.Self)){let s=a7(n,e,t,i,ma);if(s!==ma)return s}let o=U3(n,e,t,i,ma);if(o!==ma)return o}return L3(e,t,i,r)}function U3(n,e,t,i,r){let o=o7(t);if(typeof o=="function"){if(!b3(e,n,i))return i&ln.Host?F3(r,t,i):L3(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&ln.Optional))ES(t);else return s}finally{C3()}}else if(typeof o=="number"){let s=null,a=N3(n,e),l=jd,u=i&ln.Host?e[to][io]:null;for((a===-1||i&ln.SkipSelf)&&(l=a===-1?zS(n,e):e[a+8],l===jd||!QP(i,!1)?a=-1:(s=e[Kt],a=yv(l),e=_v(l,e)));a!==-1;){let f=e[Kt];if(JP(o,a,f.data)){let h=r7(a,e,t,s,i,u);if(h!==ma)return h}l=e[a+8],l!==jd&&QP(i,e[Kt].data[a+8]===u)&&JP(o,a,e)?(s=f,a=yv(l),e=_v(l,e)):a=-1}}return r}function r7(n,e,t,i,r,o){let s=e[Kt],a=s.data[n+8],l=i==null?uu(a)&&TM:i!=s&&(a.type&3)!==0,u=r&ln.Host&&o===a,f=av(a,s,t,l,u);return f!==null?dp(e,s,f,a):ma}function av(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,h=i?a:a+f,p=r?a+f:u;for(let g=h;g<p;g++){let v=s[g];if(g<l&&t===v||g>=l&&v.type===t)return g}if(r){let g=s[l];if(g&&va(g)&&g.type===t)return l}return null}function dp(n,e,t,i){let r=n[t],o=e.data;if(r instanceof lu){let s=r;s.resolving&&G4(Y6(o[t]));let a=xv(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Zr(s.injectImpl):null,f=b3(n,i,ln.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&q$(t,o[t],e)}finally{u!==null&&Zr(u),xv(a),s.resolving=!1,C3()}}return r}function o7(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(sp)?n[sp]:void 0;return typeof e=="number"?e>=0?e&P3:s7:e}function JP(n,e,t){let i=1<<n;return!!(t[e+(n>>O3)]&i)}function QP(n,e){return!(n&ln.Self)&&!(n&ln.Host&&e)}var tu=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return k3(this._tNode,this._lView,e,Lv(i),t)}};function s7(){return new tu(Rr(),dn())}function Ni(n){return yp(()=>{let e=n.prototype.constructor,t=e[uv]||IM(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[uv]||IM(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function IM(n){return B4(n)?()=>{let e=IM(or(n));return e&&e()}:nu(n)}function a7(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[$t]&2048&&!up(s);){let a=U3(o,s,t,i|ln.Self,ma);if(a!==ma)return a;let l=o.parent;if(!l){let u=s[o3];if(u){let f=u.get(t,ma,i);if(f!==ma)return f}l=B3(s),s=s[Qd]}o=l}return r}function B3(n){let e=n[Kt],t=e.type;return t===2?e.declTNode:t===1?n[io]:null}function jS(n){return i7(Rr(),n)}function e4(n,e=null,t=null,i){let r=V3(n,e,t,i);return r.resolveInjectorInitializers(),r}function V3(n,e=null,t=null,i,r=new Set){let o=[t||Kr,d$(n)];return i=i||(typeof n=="object"?void 0:Jr(n)),new ap(o,e||CS(),i||null,r)}var Jo=class n{static THROW_IF_NOT_FOUND=eu;static NULL=new pv;static create(e,t){if(Array.isArray(e))return e4({name:""},t,e,"");{let i=e.name??"";return e4({name:i},e.parent,e.providers,i)}}static \u0275prov=De({token:n,providedIn:"any",factory:()=>ze(Z4)});static __NG_ELEMENT_ID__=-1};var l7=new Ie("");l7.__NG_ELEMENT_ID__=n=>{let e=Rr();if(e===null)throw new Ce(204,!1);if(e.type&2)return e.value;if(n&ln.Optional)return null;throw new Ce(204,!1)};var H3=!1,dl=(()=>{class n{static __NG_ELEMENT_ID__=c7;static __NG_ENV_ID__=t=>t}return n})(),DM=class extends dl{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return ef(t)?(e(),()=>{}):(v3(t,e),()=>I$(t,e))}};function c7(){return new DM(dn())}var fp=class{},GS=new Ie("",{providedIn:"root",factory:()=>!1});var z3=new Ie(""),j3=new Ie(""),fl=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new ti(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=De({token:n,providedIn:"root",factory:()=>new n})}return n})();var RM=class extends Fn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,r3()&&(this.destroyRef=K(dl,{optional:!0})??void 0,this.pendingTasks=K(fl,{optional:!0})??void 0)}emit(e){let t=gn(null);try{super.next(e)}finally{gn(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof vi&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Pn=RM;function bv(...n){}function G3(n){let e,t;function i(){n=bv;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function t4(n){return queueMicrotask(()=>n()),()=>{n=bv}}var WS="isAngularZone",Ev=WS+"_ID",u7=0,Wn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Pn(!1);onMicrotaskEmpty=new Pn(!1);onStable=new Pn(!1);onError=new Pn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=H3}=e;if(typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,h7(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(WS)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Ce(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,d7,bv,bv);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},d7={};function $S(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function f7(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){G3(()=>{n.callbackScheduled=!1,PM(n),n.isCheckStableRunning=!0,$S(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),PM(n)}function h7(n){let e=()=>{f7(n)},t=u7++;n._inner=n._inner.fork({name:"angular",properties:{[WS]:!0,[Ev]:t,[Ev+t]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(p7(l))return i.invokeTask(o,s,a,l);try{return n4(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),i4(n)}},onInvoke:(i,r,o,s,a,l,u)=>{try{return n4(n),i.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!m7(l)&&e(),i4(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,PM(n),$S(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function PM(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function n4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function i4(n){n._nesting--,$S(n)}var OM=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Pn;onMicrotaskEmpty=new Pn;onStable=new Pn;onError=new Pn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function p7(n){return W3(n,"__ignore_ng_zone__")}function m7(n){return W3(n,"__scheduler_tick__")}function W3(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var al=class{_console=console;handleError(e){this._console.error("ERROR",e)}},g7=new Ie("",{providedIn:"root",factory:()=>{let n=K(Wn),e=K(al);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function r4(n,e){return k4(n,e)}function v7(n){return k4(L4,n)}var $3=(r4.required=v7,r4);function y7(){return nf(Rr(),dn())}function nf(n,e){return new nn(Bs(n,e))}var nn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=y7}return n})();function _7(n){return n instanceof nn?n.nativeElement:n}function q3(n){return typeof n=="function"&&n[Yo]!==void 0}function Qo(n,e){let t=RE(n,e?.equal),i=t[Yo];return t.set=r=>Xh(i,r),t.update=r=>PE(i,r),t.asReadonly=x7.bind(t),t}function x7(){let n=this[Yo];if(n.readonlyFn===void 0){let e=()=>this();e[Yo]=n,n.readonlyFn=e}return n.readonlyFn}function X3(n){return q3(n)&&typeof n.set=="function"}function w7(){return this._results[Symbol.iterator]()}var hp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Fn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=s$(e);(this._changesDetected=!o$(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=w7},b7="ngSkipHydration",E7="ngskiphydration";function Y3(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let i=e[t];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===E7)return!0}return!1}function Z3(n){return n.hasAttribute(b7)}function Mv(n){return(n.flags&128)===128}function M7(n){if(Mv(n))return!0;let e=n.parent;for(;e;){if(Mv(n)||Y3(e))return!0;e=e.parent}return!1}var K3=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(K3||{}),J3=new Map,S7=0;function C7(){return S7++}function T7(n){J3.set(n[Bv],n)}function NM(n){J3.delete(n[Bv])}var o4="__ngContext__";function rf(n,e){Fs(e)?(n[o4]=e[Bv],T7(e)):n[o4]=e}function Q3(n){return tO(n[lp])}function eO(n){return tO(n[Ns])}function tO(n){for(;n!==null&&!xa(n);)n=n[Ns];return n}var FM;function nO(n){FM=n}function wp(){if(FM!==void 0)return FM;if(typeof document<"u")return document;throw new Ce(210,!1)}var bp=new Ie("",{providedIn:"root",factory:()=>A7}),A7="ng",qS=new Ie(""),So=new Ie("",{providedIn:"platform",factory:()=>"unknown"});var XS=new Ie(""),YS=new Ie("",{providedIn:"root",factory:()=>wp().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function I7(){let n=new Ep;return n.store=D7(wp(),K(bp)),n}var Ep=(()=>{class n{static \u0275prov=De({token:n,providedIn:"root",factory:I7});store={};onSerializeCallbacks={};get(t,i){return this.store[t]!==void 0?this.store[t]:i}set(t,i){this.store[t]=i}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,i){this.onSerializeCallbacks[t]=i}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function D7(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var iO="h",rO="b",R7="f",P7="n",O7="e",N7="t",ZS="c",oO="x",Sv="r",F7="i",L7="n",sO="d";var k7="di";var Q0=new Ie(""),aO=!1,lO=new Ie("",{providedIn:"root",factory:()=>aO});var cO=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(cO||{}),$v=new Ie(""),s4=new Set;function hu(n){s4.has(n)||(s4.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var U7=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=De({token:n,providedIn:"root",factory:()=>new n})}return n})();var B7="__nghData__",uO=B7;var oM="ngh",V7="nghm",dO=()=>null;function H7(n,e,t=!1){let i=n.getAttribute(oM);if(i==null)return null;let[r,o]=i.split("|");if(i=t?o:r,!i)return null;let s=o?`|${o}`:"",a=t?r:s,l={};if(i!==""){let f=e.get(Ep,null,{optional:!0});f!==null&&(l=f.get(uO,[])[Number(i)])}let u={data:l,firstChild:n.firstChild??null};return t&&(u.firstChild=n,qv(u,0,n.nextSibling)),a?n.setAttribute(oM,a):n.removeAttribute(oM),u}function z7(){dO=H7}function fO(n,e,t=!1){return dO(n,e,t)}function j7(n){let e=n._lView;return e[Kt].type===2?null:(up(e)&&(e=e[Ii]),e)}function G7(n){return n.textContent?.replace(/\s/gm,"")}function W7(n){let e=wp(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=G7(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=t.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function qv(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function LM(n,e){return n.segmentHeads?.[e]??null}function $7(n,e){let t=n.data,i=t[O7]?.[e]??null;return i===null&&t[ZS]?.[e]&&(i=KS(n,e)),i}function hO(n,e){return n.data[ZS]?.[e]??null}function KS(n,e){let t=hO(n,e)??[],i=0;for(let r of t)i+=r[Sv]*(r[oO]??1);return i}function q7(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[sO];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Mp(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[sO];n.disconnectedNodes=t?new Set(t):null}return!!q7(n)?.has(e)}function sM(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===V7}function a4(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function X7(n){for(let i of n.body.childNodes)if(sM(i))return;let e=a4(n.body.previousSibling);if(sM(e))return;let t=a4(n.head.lastChild);if(!sM(t))throw new Ce(-507,!1)}function pO(n,e){let t=n.contentQueries;if(t!==null){let i=gn(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];FS(o),a.contentQueries(2,e[s],s)}}}finally{gn(i)}}}function kM(n,e,t){FS(0);let i=gn(null);try{e(n,t)}finally{gn(i)}}function JS(n,e,t){if(AS(e)){let i=gn(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{gn(i)}}}var _a=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(_a||{}),ev;function Y7(){if(ev===void 0&&(ev=null,Gd.trustedTypes))try{ev=Gd.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ev}function Xv(n){return Y7()?.createHTML(n)||n}var tv;function mO(){if(tv===void 0&&(tv=null,Gd.trustedTypes))try{tv=Gd.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return tv}function l4(n){return mO()?.createHTML(n)||n}function c4(n){return mO()?.createScriptURL(n)||n}var ll=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${F4})`}},UM=class extends ll{getTypeName(){return"HTML"}},BM=class extends ll{getTypeName(){return"Style"}},VM=class extends ll{getTypeName(){return"Script"}},HM=class extends ll{getTypeName(){return"URL"}},zM=class extends ll{getTypeName(){return"ResourceURL"}};function es(n){return n instanceof ll?n.changingThisBreaksApplicationSecurity:n}function hl(n,e){let t=Z7(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${F4})`)}return t===e}function Z7(n){return n instanceof ll&&n.getTypeName()||null}function gO(n){return new UM(n)}function vO(n){return new BM(n)}function yO(n){return new VM(n)}function _O(n){return new HM(n)}function xO(n){return new zM(n)}function K7(n){let e=new GM(n);return J7()?new jM(e):e}var jM=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Xv(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},GM=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Xv(e),t}};function J7(){try{return!!new window.DOMParser().parseFromString(Xv(""),"text/html")}catch{return!1}}var Q7=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Yv(n){return n=String(n),n.match(Q7)?n:"unsafe:"+n}function pl(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Sp(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var wO=pl("area,br,col,hr,img,wbr"),bO=pl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),EO=pl("rp,rt"),e9=Sp(EO,bO),t9=Sp(bO,pl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),n9=Sp(EO,pl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),u4=Sp(wO,t9,n9,e9),MO=pl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),i9=pl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),r9=pl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),o9=Sp(MO,i9,r9),s9=pl("script,style,template"),WM=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=c9(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=l9(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=d4(e).toLowerCase();if(!u4.hasOwnProperty(t))return this.sanitizedSomething=!0,!s9.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!o9.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;MO[a]&&(l=Yv(l)),this.buf.push(" ",s,'="',f4(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=d4(e).toLowerCase();u4.hasOwnProperty(t)&&!wO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(f4(e))}};function a9(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function l9(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw SO(e);return e}function c9(n){let e=n.firstChild;if(e&&a9(n,e))throw SO(e);return e}function d4(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function SO(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var u9=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d9=/([^\#-~ |!])/g;function f4(n){return n.replace(/&/g,"&amp;").replace(u9,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(d9,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var nv;function QS(n,e){let t=null;try{nv=nv||K7(n);let i=e?String(e):"";t=nv.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=nv.getInertBodyElement(i)}while(i!==o);let a=new WM().sanitizeChildren(h4(t)||t);return Xv(a)}finally{if(t){let i=h4(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function h4(n){return"content"in n&&f9(n)?n.content:null}function f9(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Vs=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Vs||{});function CO(n){let e=eC();return e?l4(e.sanitize(Vs.HTML,n)||""):hl(n,"HTML")?l4(es(n)):QS(wp(),_p(n))}function lr(n){let e=eC();return e?e.sanitize(Vs.URL,n)||"":hl(n,"URL")?es(n):Yv(_p(n))}function h9(n){let e=eC();if(e)return c4(e.sanitize(Vs.RESOURCE_URL,n)||"");if(hl(n,"ResourceURL"))return c4(es(n));throw new Ce(904,!1)}function p9(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?h9:lr}function TO(n,e,t){return p9(e,t)(n)}function eC(){let n=dn();return n&&n[rl].sanitizer}var m9=/^>|^->|<!--|-->|--!>|<!-$/g,g9=/(<|>)/g,v9="\u200B$1\u200B";function y9(n){return n.replace(m9,e=>e.replace(g9,v9))}function Co(n){return n.ownerDocument.defaultView}function Pr(n){return n.ownerDocument}function _9(n){return n.ownerDocument.body}function AO(n){return n instanceof Function?n():n}function x9(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var IO="ng-template";function w9(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&x9(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(tC(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function tC(n){return n.type===4&&n.value!==IO}function b9(n,e,t){let i=n.type===4&&!t?IO:n.value;return e===i}function E9(n,e,t){let i=4,r=n.attrs,o=r!==null?C9(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Os(i)&&!Os(l))return!1;if(s&&Os(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!b9(n,l,t)||l===""&&e.length===1){if(Os(i))return!1;s=!0}}else if(i&8){if(r===null||!w9(n,r,l,t)){if(Os(i))return!1;s=!0}}else{let u=e[++a],f=M9(l,r,tC(n),t);if(f===-1){if(Os(i))return!1;s=!0;continue}if(u!==""){let h;if(f>o?h="":h=r[f+1].toLowerCase(),i&2&&u!==h){if(Os(i))return!1;s=!0}}}}return Os(i)||s}function Os(n){return(n&1)===0}function M9(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return T9(e,n)}function DO(n,e,t=!1){for(let i=0;i<e.length;i++)if(E9(n,e[i],t))return!0;return!1}function S9(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function C9(n){for(let e=0;e<n.length;e++){let t=n[e];if(D3(t))return e}return n.length}function T9(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function A9(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function p4(n,e){return n?":not("+e.trim()+")":e}function I9(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Os(s)&&(e+=p4(o,r),r=""),i=s,o=o||!Os(i);t++}return r!==""&&(e+=p4(o,r)),e}function D9(n){return n.map(I9).join(",")}function R9(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!Os(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var wa={};function RO(n,e){return n.createText(e)}function P9(n,e,t){n.setValue(e,t)}function PO(n,e){return n.createComment(y9(e))}function nC(n,e,t){return n.createElement(e,t)}function Cv(n,e,t,i,r){n.insertBefore(e,t,i,r)}function OO(n,e,t){n.appendChild(e,t)}function m4(n,e,t,i,r){i!==null?Cv(n,e,t,i,r):OO(n,e,t)}function iC(n,e,t){n.removeChild(null,e,t)}function NO(n){n.textContent=""}function O9(n,e,t){n.setAttribute(e,"style",t)}function N9(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function FO(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&K$(n,e,i),r!==null&&N9(n,e,r),o!==null&&O9(n,e,o)}function rC(n,e,t,i,r,o,s,a,l,u,f){let h=Ii+i,p=h+r,g=F9(h,p),v=typeof u=="function"?u():u;return g[Kt]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:f}}function F9(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:wa);return t}function L9(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=rC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function oC(n,e,t,i,r,o,s,a,l,u,f){let h=e.blueprint.slice();return h[Eo]=r,h[$t]=i|4|128|8|64|1024,(u!==null||n&&n[$t]&2048)&&(h[$t]|=2048),m3(h),h[sr]=h[Qd]=n,h[eo]=t,h[rl]=s||n&&n[rl],h[Qn]=a||n&&n[Qn],h[ru]=l||n&&n[ru]||null,h[io]=o,h[Bv]=C7(),h[Ls]=f,h[o3]=u,h[to]=e.type==2?n[to]:h,h}function k9(n,e,t){let i=Bs(e,n),r=L9(t),o=n[rl].rendererFactory,s=sC(n,oC(n,r,null,LO(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function LO(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function kO(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function sC(n,e){return n[lp]?n[qP][Ns]=e:n[lp]=e,n[qP]=e,e}function W(n=1){UO(Di(),dn(),fu()+n,!1)}function UO(n,e,t,i){if(!i)if((e[$t]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ov(e,o,t)}else{let o=n.preOrderHooks;o!==null&&sv(e,o,0,t)}au(t)}var Zv=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Zv||{});function $M(n,e,t,i){let r=gn(null);try{let[o,s,a]=n.inputs[t],l=null;(s&Zv.SignalBased)!==0&&(l=e[o][Yo]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,o):a3(e,l,o,i)}finally{gn(r)}}function BO(n,e,t,i,r){let o=fu(),s=i&2;try{au(-1),s&&e.length>Ii&&UO(n,e,Ii,!1),Jn(s?2:0,r),t(i,r)}finally{au(o),Jn(s?3:1,r)}}function Kv(n,e,t){G9(n,e,t),(t.flags&64)===64&&W9(n,e,t)}function aC(n,e,t=Bs){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function U9(n,e,t,i){let o=i.get(lO,aO)||t===_a.ShadowDom,s=n.selectRootElement(e,o);return B9(s),s}function B9(n){VO(n)}var VO=()=>null;function V9(n){Z3(n)?NO(n):W7(n)}function H9(){VO=V9}function z9(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function HO(n,e,t,i,r,o,s,a){if(!a&&cC(e,n,t,i,r)){uu(e)&&j9(t,e.index);return}if(e.type&3){let l=Bs(e,t);i=z9(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(l,i,r)}else e.type&12}function j9(n,e){let t=ya(e,n);t[$t]&16||(t[$t]|=64)}function G9(n,e,t){let i=t.directiveStart,r=t.directiveEnd;uu(t)&&k9(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||wv(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],l=dp(e,n,s,t);if(rf(l,e),o!==null&&Y9(e,s-i,l,a,t,o),va(a)){let u=ya(t.index,e);u[eo]=dp(e,n,s,t)}}}function W9(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=z$();try{au(o);for(let a=i;a<r;a++){let l=n.data[a],u=e[a];CM(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&$9(l,u)}}finally{au(-1),CM(s)}}function $9(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function lC(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];DO(e,o.selectors,!1)&&(i??=[],va(o)?i.unshift(o):i.push(o))}return i}function q9(n,e,t,i,r,o){let s=Bs(n,e);X9(e[Qn],s,o,n.value,t,i,r)}function X9(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?_p(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function Y9(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];$M(i,t,l,u)}}function Z9(n,e){let t=n[ru],i=t?t.get(al,null):null;i&&i.handleError(e)}function cC(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],h=e.data[u];$M(h,t[u],f,r),a=!0}if(o)for(let l of o){let u=t[l],f=e.data[l];$M(f,u,i,r),a=!0}return a}function K9(n,e){let t=ya(e,n),i=t[Kt];J9(i,t);let r=t[Eo];r!==null&&t[Ls]===null&&(t[Ls]=fO(r,t[ru])),Jn(18),uC(i,t,t[eo]),Jn(19,t[eo])}function J9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function uC(n,e,t){LS(e);try{let i=n.viewQuery;i!==null&&kM(1,i,t);let r=n.template;r!==null&&BO(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ol]?.finishViewCreation(n),n.staticContentQueries&&pO(n,e),n.staticViewQueries&&kM(2,n.viewQuery,t);let o=n.components;o!==null&&Q9(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[$t]&=-5,kS()}}function Q9(n,e){for(let t=0;t<e.length;t++)K9(n,e[t])}function zO(n,e,t,i){let r=gn(null);try{let o=e.tView,a=n[$t]&4096?4096:16,l=oC(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[e.index];l[ou]=u;let f=n[ol];return f!==null&&(l[ol]=f.createEmbeddedView(o)),uC(o,l,t),l}finally{gn(r)}}function qM(n,e){return!e||e.firstChild===null||Mv(n)}var eq;function dC(n,e){return eq(n,e)}var cl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(cl||{});function pu(n){return(n.flags&32)===32}function zd(n,e,t,i,r){if(i!=null){let o,s=!1;xa(i)?o=i:Fs(i)&&(s=!0,i=i[Eo]);let a=ks(i);n===0&&t!==null?r==null?OO(e,t,a):Cv(e,t,a,r||null,!0):n===1&&t!==null?Cv(e,t,a,r||null,!0):n===2?iC(e,a,s):n===3&&e.destroyNode(a),o!=null&&uq(e,n,o,t,r)}}function tq(n,e){jO(n,e),e[Eo]=null,e[io]=null}function nq(n,e,t,i,r,o){i[Eo]=r,i[io]=e,Qv(n,i,t,1,r,o)}function jO(n,e){e[rl].changeDetectionScheduler?.notify(9),Qv(n,e,e[Qn],2,null,null)}function iq(n){let e=n[lp];if(!e)return aM(n[Kt],n);for(;e;){let t=null;if(Fs(e))t=e[lp];else{let i=e[Qr];i&&(t=i)}if(!t){for(;e&&!e[Ns]&&e!==n;)Fs(e)&&aM(e[Kt],e),e=e[sr];e===null&&(e=n),Fs(e)&&aM(e[Kt],e),t=e&&e[Ns]}e=t}}function fC(n,e){let t=n[qd],i=t.indexOf(e);t.splice(i,1)}function GO(n,e){if(ef(e))return;let t=e[Qn];t.destroyNode&&Qv(n,e,t,3,null,null),iq(e)}function aM(n,e){if(ef(e))return;let t=gn(null);try{e[$t]&=-129,e[$t]|=256,e[Ko]&&AE(e[Ko]),oq(n,e),rq(n,e),e[Kt].type===1&&e[Qn].destroy();let i=e[ou];if(i!==null&&xa(e[sr])){i!==e[sr]&&fC(i,e);let r=e[ol];r!==null&&r.detachView(n)}NM(e)}finally{gn(t)}}function rq(n,e){let t=n.cleanup,i=e[mv];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[mv]=null);let r=e[rc];if(r!==null){e[rc]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[gv];if(o!==null){e[gv]=null;for(let s of o)s.destroy()}}function oq(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof lu)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Jn(4,a,l);try{l.call(a)}finally{Jn(5,a,l)}}else{Jn(4,r,o);try{o.call(r)}finally{Jn(5,r,o)}}}}}function WO(n,e,t){return sq(n,e.parent,t)}function sq(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Eo];if(uu(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===_a.None||r===_a.Emulated)return null}return Bs(i,t)}function $O(n,e,t){return lq(n,e,t)}function aq(n,e,t){return n.type&40?Bs(n,t):null}var lq=aq,g4;function Jv(n,e,t,i){let r=WO(n,i,e),o=e[Qn],s=i.parent||e[io],a=$O(s,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)m4(o,r,t[l],a,!1);else m4(o,r,t,a,!1);g4!==void 0&&g4(o,i,e,t,r)}function op(n,e){if(e!==null){let t=e.type;if(t&3)return Bs(e,n);if(t&4)return XM(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return op(n,i);{let r=n[e.index];return xa(r)?XM(-1,r):ks(r)}}else{if(t&128)return op(n,e.next);if(t&32)return dC(e,n)()||ks(n[e.index]);{let i=qO(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=su(n[to]);return op(r,i)}else return op(n,e.next)}}}return null}function qO(n,e){if(e!==null){let i=n[to][io],r=e.projection;return i.projection[r]}return null}function XM(n,e){let t=Qr+n+1;if(t<e.length){let i=e[t],r=i[Kt].firstChild;if(r!==null)return op(i,r)}return e[sl]}function hC(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(s&&e===0&&(a&&rf(ks(a),i),t.flags|=2),!pu(t))if(l&8)hC(n,e,t.child,i,r,o,!1),zd(e,n,r,a,o);else if(l&32){let u=dC(t,i),f;for(;f=u();)zd(e,n,r,f,o);zd(e,n,r,a,o)}else l&16?XO(n,e,i,t,r,o):zd(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Qv(n,e,t,i,r,o){hC(t,i,n.firstChild,e,r,o,!1)}function cq(n,e,t){let i=e[Qn],r=WO(n,t,e),o=t.parent||e[io],s=$O(o,t,e);XO(i,0,e,t,r,s)}function XO(n,e,t,i,r,o){let s=t[to],l=s[io].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];zd(e,n,r,f,o)}else{let u=l,f=s[sr];Mv(i)&&(u.flags|=128),hC(n,e,u,f,r,o,!0)}}function uq(n,e,t,i,r){let o=t[sl],s=ks(t);o!==s&&zd(e,n,i,o,r);for(let a=Qr;a<t.length;a++){let l=t[a];Qv(l[Kt],l,n,e,i,o)}}function dq(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:cl.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=cl.Important),n.setStyle(t,i,r,o))}}function Tv(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(ks(o)),xa(o)&&fq(o,i);let s=t.type;if(s&8)Tv(n,e,t.child,i);else if(s&32){let a=dC(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=qO(e,t);if(Array.isArray(a))i.push(...a);else{let l=su(e[to]);Tv(l[Kt],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function fq(n,e){for(let t=Qr;t<n.length;t++){let i=n[t],r=i[Kt].firstChild;r!==null&&Tv(i[Kt],i,r,e)}n[sl]!==n[Eo]&&e.push(n[sl])}function YO(n){if(n[nM]!==null){for(let e of n[nM])e.impl.addSequence(e);n[nM].length=0}}var ZO=[];function hq(n){return n[Ko]??pq(n)}function pq(n){let e=ZO.pop()??Object.create(gq);return e.lView=n,e}function mq(n){n.lView[Ko]!==n&&(n.lView=null,ZO.push(n))}var gq=wt(Oe({},$h),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{zv(n.lView)},consumerOnSignalRead(){this.lView[Ko]=this}});function vq(n){let e=n[Ko]??Object.create(yq);return e.lView=n,e}var yq=wt(Oe({},$h),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=su(n.lView);for(;e&&!KO(e[Kt]);)e=su(e);e&&g3(e)},consumerOnSignalRead(){this.lView[Ko]=this}});function KO(n){return n.type!==2}function JO(n){if(n[gv]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[gv])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[$t]&8192)}}var _q=100;function QO(n,e=!0,t=0){let r=n[rl].rendererFactory,o=!1;o||r.begin?.();try{xq(n,t)}catch(s){throw e&&Z9(n,s),s}finally{o||r.end?.()}}function xq(n,e){let t=_3();try{YP(!0),YM(n,e);let i=0;for(;Hv(n);){if(i===_q)throw new Ce(103,!1);i++,YM(n,1)}}finally{YP(t)}}function wq(n,e,t,i){if(ef(e))return;let r=e[$t],o=!1,s=!1;LS(e);let a=!0,l=null,u=null;o||(KO(n)?(u=hq(e),l=w0(u)):bE()===null?(a=!1,u=vq(e),l=w0(u)):e[Ko]&&(AE(e[Ko]),e[Ko]=null));try{m3(e),B$(n.bindingStartIndex),t!==null&&BO(n,e,t,2,i);let f=(r&3)===3;if(!o)if(f){let g=n.preOrderCheckHooks;g!==null&&ov(e,g,null)}else{let g=n.preOrderHooks;g!==null&&sv(e,g,0,null),iM(e,0)}if(s||bq(e),JO(e),eN(e,0),n.contentQueries!==null&&pO(n,e),!o)if(f){let g=n.contentCheckHooks;g!==null&&ov(e,g)}else{let g=n.contentHooks;g!==null&&sv(e,g,1),iM(e,1)}Mq(n,e);let h=n.components;h!==null&&nN(e,h,0);let p=n.viewQuery;if(p!==null&&kM(2,p,i),!o)if(f){let g=n.viewCheckHooks;g!==null&&ov(e,g)}else{let g=n.viewHooks;g!==null&&sv(e,g,2),iM(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[tM]){for(let g of e[tM])g();e[tM]=null}o||(YO(e),e[$t]&=-73)}catch(f){throw o||zv(e),f}finally{u!==null&&(CE(u,l),a&&mq(u)),kS()}}function eN(n,e){for(let t=Q3(n);t!==null;t=eO(t))for(let i=Qr;i<t.length;i++){let r=t[i];tN(r,e)}}function bq(n){for(let e=Q3(n);e!==null;e=eO(e)){if(!(e[$t]&2))continue;let t=e[qd];for(let i=0;i<t.length;i++){let r=t[i];g3(r)}}}function Eq(n,e,t){Jn(18);let i=ya(e,n);tN(i,t),Jn(19,i[eo])}function tN(n,e){IS(n)&&YM(n,e)}function YM(n,e){let i=n[Kt],r=n[$t],o=n[Ko],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&TE(o)),s||=!1,o&&(o.dirty=!1),n[$t]&=-9217,s)wq(i,n,i.template,n[eo]);else if(r&8192){JO(n),eN(n,1);let a=i.components;a!==null&&nN(n,a,1),YO(n)}}function nN(n,e,t){for(let i=0;i<e.length;i++)Eq(n,e[i],t)}function Mq(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)au(~r);else{let o=r,s=t[++i],a=t[++i];H$(s,o);let l=e[o];Jn(24,l),a(2,l),Jn(25,l)}}}finally{au(-1)}}function pC(n,e){let t=_3()?64:1088;for(n[rl].changeDetectionScheduler?.notify(e);n;){n[$t]|=t;let i=su(n);if(up(n)&&!i)return n;n=i}return null}function iN(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function rN(n,e,t,i=!0){let r=e[Kt];if(Sq(r,e,n,t),i){let s=XM(t,n),a=e[Qn],l=a.parentNode(n[sl]);l!==null&&nq(r,n[io],a,e,l,s)}let o=e[Ls];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ZM(n,e){if(n.length<=Qr)return;let t=Qr+e,i=n[t];if(i){let r=i[ou];r!==null&&r!==n&&fC(r,i),e>0&&(n[t-1][Ns]=i[Ns]);let o=hv(n,Qr+e);tq(i[Kt],i);let s=o[ol];s!==null&&s.detachView(o[Kt]),i[sr]=null,i[Ns]=null,i[$t]&=-129}return i}function Sq(n,e,t,i){let r=Qr+i,o=t.length;i>0&&(t[r-1][Ns]=e),i<o-Qr?(e[Ns]=t[r],Y4(t,Qr+i,e)):(t.push(e),e[Ns]=null),e[sr]=t;let s=e[ou];s!==null&&t!==s&&oN(s,e);let a=e[ol];a!==null&&a.insertView(n),MM(e),e[$t]|=128}function oN(n,e){let t=n[qd],i=e[sr];if(Fs(i))n[$t]|=2;else{let r=i[sr][to];e[to]!==r&&(n[$t]|=2)}t===null?n[qd]=[e]:t.push(e)}var pp=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Kt];return Tv(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[eo]}set context(e){this._lView[eo]=e}get destroyed(){return ef(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[sr];if(xa(e)){let t=e[vv],i=t?t.indexOf(this):-1;i>-1&&(ZM(e,i),hv(t,i))}this._attachedToViewContainer=!1}GO(this._lView[Kt],this._lView)}onDestroy(e){v3(this._lView,e)}markForCheck(){pC(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$t]&=-129}reattach(){MM(this._lView),this._lView[$t]|=128}detectChanges(){this._lView[$t]|=1024,QO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=up(this._lView),t=this._lView[ou];t!==null&&!e&&fC(t,this._lView),jO(this._lView[Kt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=e;let t=up(this._lView),i=this._lView[ou];i!==null&&!t&&oN(i,this._lView),MM(this._lView)}};var xr=(()=>{class n{static __NG_ELEMENT_ID__=Aq}return n})(),Cq=xr,Tq=class extends Cq{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=zO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new pp(r)}};function Aq(){return ey(Rr(),dn())}function ey(n,e){return n.type&4?new Tq(e,n,nf(n,e)):null}function Cp(n,e,t,i,r){let o=n.data[e];if(o===null)o=Iq(n,e,t,i,r),V$()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=k$();o.injectorIndex=s===null?-1:s.injectorIndex}return du(o,!0),o}function Iq(n,e,t,i,r){let o=y3(),s=OS(),a=s?o:o&&o.parent,l=n.data[e]=Rq(n,a,t,e,i,r);return Dq(n,l,o,s),l}function Dq(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Rq(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return tf()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Pq=new RegExp(`^(\\d+)*(${rO}|${iO})*(.*)`);function Oq(n){let e=n.match(Pq),[t,i,r,o]=e,s=i?parseInt(i,10):r,a=[];for(let[l,u,f]of o.matchAll(/(f|n)(\d*)/g)){let h=parseInt(f,10)||1;a.push(u,h)}return[s,...a]}function Nq(n){return!n.prev&&n.parent?.type===8}function lM(n){return n.index-Ii}function Fq(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function ty(n,e,t,i){let r=lM(i),o=Fq(n,r);if(o===void 0){let s=n.data[L7];if(s?.[r])o=kq(s[r],t);else if(e.firstChild===i)o=n.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(Nq(i)){let u=lM(i.parent);o=LM(n,u)}else{let u=Bs(l,t);if(a)o=u.firstChild;else{let f=lM(l),h=LM(n,f);if(l.type===2&&h){let g=KS(n,f)+1;o=ny(g,h)}else o=u.nextSibling}}}}return o}function ny(n,e){let t=e;for(let i=0;i<n;i++)t=t.nextSibling;return t}function Lq(n,e){let t=n;for(let i=0;i<e.length;i+=2){let r=e[i],o=e[i+1];for(let s=0;s<o;s++)switch(r){case R7:t=t.firstChild;break;case P7:t=t.nextSibling;break}}return t}function kq(n,e){let[t,...i]=Oq(n),r;if(t===iO)r=e[to][Eo];else if(t===rO)r=_9(e[to][Eo]);else{let o=Number(t);r=ks(e[o+Ii])}return Lq(r,i)}var Uq=!1;function Bq(n){Uq=n}function Vq(n){let e=n[Ls];if(e){let{i18nNodes:t,dehydratedIcuData:i}=e;if(t&&i){let r=n[Qn];for(let o of i.values())Hq(r,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function Hq(n,e,t){for(let i of t.node.cases[t.case]){let r=e.get(i.index-Ii);r&&iC(n,r,!1)}}function sN(n){let e=n[cp]??[],i=n[sr][Qn],r=[];for(let o of e)o.data[k7]!==void 0?r.push(o):zq(o,i);n[cp]=r}function zq(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[Sv];for(;t<r;){let o=i.nextSibling;iC(e,i,!1),i=o,t++}}}function aN(n){sN(n);let e=n[Eo];Fs(e)&&Av(e);for(let t=Qr;t<n.length;t++)Av(n[t])}function Av(n){Vq(n);let e=n[Kt];for(let t=Ii;t<e.bindingStartIndex;t++)if(xa(n[t])){let i=n[t];aN(i)}else Fs(n[t])&&Av(n[t])}function jq(n){let e=n._views;for(let t of e){let i=j7(t);i!==null&&i[Eo]!==null&&(Fs(i)?Av(i):aN(i))}}function Gq(n,e){let t=[];for(let i of e)for(let r=0;r<(i[oO]??1);r++){let o={data:i,firstChild:null};i[Sv]>0&&(o.firstChild=n,n=ny(i[Sv],n)),t.push(o)}return[n,t]}var lN=()=>null;function Wq(n,e){let t=n[cp];return!e||t===null||t.length===0?null:t[0].data[F7]===e?t.shift():(sN(n),null)}function $q(){lN=Wq}function KM(n,e){return lN(n,e)}var qq=class{},cN=class{},JM=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Jr(e)}.`)}},iy=class{static NULL=new JM},oc=class{},wr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Xq()}return n})();function Xq(){let n=dn(),e=Rr(),t=ya(e.index,n);return(Fs(t)?t:n)[Qn]}var Yq=(()=>{class n{static \u0275prov=De({token:n,providedIn:"root",factory:()=>null})}return n})();var cM={},QM=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Lv(i);let r=this.injector.get(e,cM,i);return r!==cM||t===cM?r:this.parentInjector.get(e,t,i)}};function eS(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=gM(r,a);else if(o==2){let l=a,u=e[++s];i=gM(i,l+": "+u+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function de(n,e=ln.Default){let t=dn();if(t===null)return ze(n,e);let i=Rr();return k3(i,t,or(n),e)}function mC(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a,l=null,u=null,f=Kq(s);f===null?a=s:[a,l,u]=f,eX(n,e,t,a,o,l,u)}o!==null&&i!==null&&Zq(t,i,o)}function Zq(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new Ce(-301,!1);i.push(e[r],o)}}function Kq(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&va(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let i=null,r=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,Jq(s,i,o,r)),s===e&&(i??=[],i.push(s));return i!==null?(i.push(...e===null?n:n.slice(1)),[i,r,o]):null}function Jq(n,e,t,i){let r=e.length;n.findHostDirectiveDefs(n,e,i),t.set(n,[r,e.length-1])}function Qq(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function eX(n,e,t,i,r,o,s){let a=i.length,l=!1;for(let p=0;p<a;p++){let g=i[p];!l&&va(g)&&(l=!0,Qq(n,t,p)),AM(wv(t,e),n,g.type)}sX(t,n.data.length,a);for(let p=0;p<a;p++){let g=i[p];g.providersResolver&&g.providersResolver(g)}let u=!1,f=!1,h=kO(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let g=i[p];if(t.mergedAttrs=Yd(t.mergedAttrs,g.hostAttrs),nX(n,t,e,h,g),oX(h,g,r),s!==null&&s.has(g)){let[w,y]=s.get(g);t.directiveToIndex.set(g.type,[h,w+t.directiveStart,y+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let v=g.type.prototype;!u&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),h++}tX(n,t,o)}function tX(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))v4(0,e,r,i),v4(1,e,r,i),_4(e,i,!1);else{let o=t.get(r);y4(0,e,o,i),y4(1,e,o,i),_4(e,i,!0)}}}function v4(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),uN(e,o)}}function y4(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),uN(e,s)}}function uN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function _4(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||tC(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let u=r[l];for(let f of u)if(f===e){s??=[],s.push(l,i[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function nX(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=nu(r.type,!0)),s=new lu(o,va(r),de);n.blueprint[i]=s,t[i]=s,iX(n,e,i,kO(n,t,r.hostVars,wa),r)}function iX(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;rX(s)!=a&&s.push(a),s.push(t,i,o)}}function rX(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function oX(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;va(e)&&(t[""]=n)}}function sX(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function dN(n,e,t,i,r,o,s,a){let l=e.consts,u=Xd(l,s),f=Cp(e,n,2,i,u);return o&&mC(e,t,f,Xd(l,a),r),f.mergedAttrs=Yd(f.mergedAttrs,f.attrs),f.attrs!==null&&eS(f,f.attrs,!1),f.mergedAttrs!==null&&eS(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function fN(n,e){HS(n,e),AS(e)&&n.queries.elementEnd(e)}var Iv=class extends iy{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Wd(e);return new mp(t,this.ngModule)}};function aX(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&Zv.SignalBased)!==0};return r&&(o.transform=r),o})}function lX(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function cX(n,e,t){let i=e instanceof _r?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new QM(t,i):t}function uX(n){let e=n.get(oc,null);if(e===null)throw new Ce(407,!1);let t=n.get(Yq,null),i=n.get(fp,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i}}function dX(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return nC(e,t,t==="svg"?d3:t==="math"?S$:null)}var mp=class extends cN{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=aX(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=lX(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=D9(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){Jn(22);let o=gn(null);try{let s=this.componentDef,a=i?["ng-version","19.2.9"]:R9(this.componentDef.selectors[0]),l=rC(0,null,null,1,0,null,null,null,null,[a],null),u=cX(s,r||this.ngModule,e),f=uX(u),h=f.rendererFactory.createRenderer(null,s),p=i?U9(h,i,s.encapsulation,u):dX(s,h),g=oC(null,l,null,512|LO(s),null,null,f,h,u,null,fO(p,u,!0));g[Ii]=p,LS(g);let v=null;try{let w=dN(Ii,l,g,"#host",()=>[this.componentDef],!0,0);p&&(FO(h,p,w),rf(p,g)),Kv(l,g,w),JS(l,w,g),fN(l,w),t!==void 0&&fX(w,this.ngContentSelectors,t),v=ya(w.index,g),g[eo]=v[eo],uC(l,g,null)}catch(w){throw v!==null&&NM(v),NM(g),w}finally{Jn(23),kS()}return new tS(this.componentType,g)}finally{gn(o)}}},tS=class extends qq{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=h3(t[Kt],Ii),this.location=nf(this._tNode,t),this.instance=ya(this._tNode.index,t)[eo],this.hostView=this.changeDetectorRef=new pp(t,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=cC(i,r[Kt],r,e,t);this.previousInputValues.set(e,t);let s=ya(i.index,r);pC(s,1)}get injector(){return new tu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function fX(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var ba=(()=>{class n{static __NG_ELEMENT_ID__=hX}return n})();function hX(){let n=Rr();return pN(n,dn())}var pX=ba,hN=class extends pX{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return nf(this._hostTNode,this._hostLView)}get injector(){return new tu(this._hostTNode,this._hostLView)}get parentInjector(){let e=zS(this._hostTNode,this._hostLView);if(R3(e)){let t=_v(e,this._hostLView),i=yv(e),r=t[Kt].data[i+8];return new tu(r,t)}else return new tu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=x4(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Qr}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=KM(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,qM(this._hostTNode,s)),a}createComponent(e,t,i,r,o){let s=e&&!w$(e),a;if(s)a=t;else{let v=t||{};a=v.index,i=v.injector,r=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let l=s?e:new mp(Wd(e)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let w=(s?u:this.parentInjector).get(_r,null);w&&(o=w)}let f=Wd(l.componentType??{}),h=KM(this._lContainer,f?.id??null),p=h?.firstChild??null,g=l.create(u,r,p,o);return this.insertImpl(g.hostView,a,qM(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(T$(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[sr],u=new hN(l,l[io],l[sr]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return rN(s,r,o,i),e.attachToViewContainerRef(),Y4(uM(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=x4(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=ZM(this._lContainer,t);i&&(hv(uM(this._lContainer),t),GO(i[Kt],i))}detach(e){let t=this._adjustIndex(e,-1),i=ZM(this._lContainer,t);return i&&hv(uM(this._lContainer),t)!=null?new pp(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function x4(n){return n[vv]}function uM(n){return n[vv]||(n[vv]=[])}function pN(n,e){let t,i=e[n.index];return xa(i)?t=i:(t=iN(i,e,null,n),e[n.index]=t,sC(e,t)),mN(t,e,n,i),new hN(t,n,e)}function mX(n,e){let t=n[Qn],i=t.createComment(""),r=Bs(e,n),o=t.parentNode(r);return Cv(t,o,i,t.nextSibling(r),!1),i}var mN=gN,gC=()=>!1;function gX(n,e,t){return gC(n,e,t)}function gN(n,e,t,i){if(n[sl])return;let r;t.type&8?r=ks(i):r=mX(e,t),n[sl]=r}function vX(n,e,t){if(n[sl]&&n[cp])return!0;let i=t[Ls],r=e.index-Ii;if(!i||M7(e)||Mp(i,r))return!1;let s=LM(i,r),a=i.data[ZS]?.[r],[l,u]=Gq(s,a);return n[sl]=l,n[cp]=u,!0}function yX(n,e,t,i){gC(n,t,e)||gN(n,e,t,i)}function _X(){mN=yX,gC=vX}var nS=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},iS=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)vC(e,t).matches!==null&&this.queries[t].setDirty()}},Dv=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=TX(e):this.predicate=e}},rS=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},oS=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,xX(t,o)),this.matchTNodeWithReadOption(e,t,av(t,e,o,!1,!1))}else i===xr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,av(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===nn||r===ba||r===xr&&t.type&4)this.addMatch(t.index,-2);else{let o=av(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function xX(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function wX(n,e){return n.type&11?nf(n,e):n.type&4?ey(n,e):null}function bX(n,e,t,i){return t===-1?wX(e,n):t===-2?EX(n,e,i):dp(n,n[Kt],t,e)}function EX(n,e,t){if(t===nn)return nf(e,n);if(t===xr)return ey(e,n);if(t===ba)return pN(e,n)}function vN(n,e,t,i){let r=e[ol].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(bX(e,f,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function sS(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=vN(n,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],f=e[-l];for(let h=Qr;h<f.length;h++){let p=f[h];p[ou]===p[sr]&&sS(p[Kt],p,u,i)}if(f[qd]!==null){let h=f[qd];for(let p=0;p<h.length;p++){let g=h[p];sS(g[Kt],g,u,i)}}}}}return i}function MX(n,e){return n[ol].queries[e].queryList}function yN(n,e,t){let i=new hp((t&4)===4);return D$(n,e,i,i.destroy),(e[ol]??=new iS).queries.push(new nS(i))-1}function SX(n,e,t){let i=Di();return i.firstCreatePass&&(_N(i,new Dv(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),yN(i,dn(),e)}function CX(n,e,t,i){let r=Di();if(r.firstCreatePass){let o=Rr();_N(r,new Dv(e,t,i),o.index),AX(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return yN(r,dn(),t)}function TX(n){return n.split(",").map(e=>e.trim())}function _N(n,e,t){n.queries===null&&(n.queries=new rS),n.queries.track(new oS(e,t))}function AX(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function vC(n,e){return n.queries.getByIndex(e)}function IX(n,e){let t=n[Kt],i=vC(t,e);return i.crossesNgTemplate?sS(t,n,e,[]):vN(t,n,i,e)}var Zd=class{},yC=class{};var aS=class extends Zd{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Iv(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=J4(e);this._bootstrapComponents=AO(o.bootstrap),this._r3Injector=V3(e,t,[{provide:Zd,useValue:this},{provide:iy,useValue:this.componentFactoryResolver},...i],Jr(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lS=class extends yC{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new aS(this.moduleType,e,[])}};var Rv=class extends Zd{injector;componentFactoryResolver=new Iv(this);instance=null;constructor(e){super();let t=new ap([...e.providers,{provide:Zd,useValue:this},{provide:iy,useValue:this.componentFactoryResolver}],e.parent||CS(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ry(n,e,t=null){return new Rv({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var DX=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=e3(!1,t.type),r=i.length>0?ry([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=De({token:n,providedIn:"environment",factory:()=>new n(ze(_r))})}return n})();function vn(n){return yp(()=>{let e=xN(n),t=wt(Oe({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===K3.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(DX).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||_a.Emulated,styles:n.styles||Kr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&hu("NgStandalone"),wN(t);let i=n.dependencies;return t.directiveDefs=w4(i,!1),t.pipeDefs=w4(i,!0),t.id=FX(t),t})}function RX(n){return Wd(n)||Q4(n)}function PX(n){return n!==null}function Or(n){return yp(()=>({type:n.type,bootstrap:n.bootstrap||Kr,declarations:n.declarations||Kr,imports:n.imports||Kr,exports:n.exports||Kr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function OX(n,e){if(n==null)return ga;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=Zv.None,l=null),t[o]=[i,a,l],e[o]=s}return t}function NX(n){if(n==null)return ga;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ut(n){return yp(()=>{let e=xN(n);return wN(e),e})}function of(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function xN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ga,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Kr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:OX(n.inputs,e),outputs:NX(n.outputs),debugInfo:null}}function wN(n){n.features?.forEach(e=>e(n))}function w4(n,e){if(!n)return null;let t=e?u$:RX;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(PX)}function FX(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function LX(n){return Object.getPrototypeOf(n.prototype).constructor}function Fi(n){let e=LX(n.type),t=!0,i=[n];for(;e;){let r;if(va(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ce(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=dM(n.inputs),s.declaredInputs=dM(n.declaredInputs),s.outputs=dM(n.outputs);let a=r.hostBindings;a&&HX(n,a);let l=r.viewQuery,u=r.contentQueries;if(l&&BX(n,l),u&&VX(n,u),kX(n,r),H6(n.outputs,r.outputs),va(r)&&r.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Fi&&(t=!1)}}e=Object.getPrototypeOf(e)}UX(i)}function kX(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function UX(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Yd(r.hostAttrs,t=Yd(t,r.hostAttrs))}}function dM(n){return n===ga?{}:n===Kr?[]:n}function BX(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function VX(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function HX(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function bN(n){let e=t=>{let i=Array.isArray(n);t.hostDirectives===null?(t.findHostDirectiveDefs=EN,t.hostDirectives=i?n.map(cS):[n]):i?t.hostDirectives.unshift(...n.map(cS)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function EN(n,e,t){if(n.hostDirectives!==null)for(let i of n.hostDirectives)if(typeof i=="function"){let r=i();for(let o of r)b4(cS(o),e,t)}else b4(i,e,t)}function b4(n,e,t){let i=Q4(n.directive);zX(i.declaredInputs,n.inputs),EN(i,e,t),t.set(i,n),e.push(i)}function cS(n){return typeof n=="function"?{directive:or(n),inputs:ga,outputs:ga}:{directive:or(n.directive),inputs:E4(n.inputs),outputs:E4(n.outputs)}}function E4(n){if(n===void 0||n.length===0)return ga;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function zX(n,e){for(let t in e)if(e.hasOwnProperty(t)){let i=e[t],r=n[t];n[i]=r}}function MN(n){return GX(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function jX(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function GX(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function _C(n,e,t){return n[e]=t}function WX(n,e){return n[e]}function ul(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function $X(n,e,t,i){let r=ul(n,e,t);return ul(n,e+1,i)||r}function qX(n,e,t,i,r,o,s,a,l){let u=e.consts,f=Cp(e,n,4,s||null,a||null);PS()&&mC(e,t,f,Xd(u,l),lC),f.mergedAttrs=Yd(f.mergedAttrs,f.attrs),HS(e,f);let h=f.tView=rC(2,f,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,f),h.queries=e.queries.embeddedTView(f)),f}function SN(n,e,t,i,r,o,s,a,l,u){let f=t+Ii,h=e.firstCreatePass?qX(f,e,n,i,r,o,s,a,l):e.data[f];du(h,!1);let p=CN(e,n,h,t);Wv()&&Jv(e,n,p,h),rf(p,n);let g=iN(p,n,p,h);return n[f]=g,sC(n,g),gX(g,h,n),Vv(h)&&Kv(e,n,h),l!=null&&aC(n,h,u),h}function ke(n,e,t,i,r,o,s,a){let l=dn(),u=Di(),f=Xd(u.consts,o);return SN(l,u,n,e,t,i,r,f,s,a),ke}var CN=TN;function TN(n,e,t,i){return ac(!0),e[Qn].createComment("")}function XX(n,e,t,i){let r=e[Ls],o=!r||tf()||pu(t)||Mp(r,i);if(ac(o),o)return TN(n,e);let s=r.data[N7]?.[i]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=ty(r,n,e,t);qv(r,i,a);let l=KS(r,i);return ny(l,a)}function YX(){CN=XX}var xC=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var AN=new Ie("");var ZX=(()=>{class n{static \u0275prov=De({token:n,providedIn:"root",factory:()=>new uS})}return n})(),uS=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function lc(n){return!!n&&typeof n.then=="function"}function wC(n){return!!n&&typeof n.subscribe=="function"}var KX=new Ie("");var IN=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=K(KX,{optional:!0})??[];injector=K(Jo);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=Mo(this.injector,r);if(lc(o))t.push(o);else if(wC(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sf=new Ie("");function JX(){DE(()=>{throw new Ce(600,!1)})}function QX(n){return n.isBoundToModule}var eY=10;var Us=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=K(g7);afterRenderManager=K(U7);zonelessEnabled=K(GS);rootEffectScheduler=K(ZX);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Fn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=K(fl).hasPendingTasks.pipe(lt(t=>!t));constructor(){K($v,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=K(_r);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Jo.NULL){Jn(10);let o=t instanceof cN;if(!this._injector.get(IN).done){let g="";throw new Ce(405,g)}let a;o?a=t:a=this._injector.get(iy).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=QX(a)?void 0:this._injector.get(Zd),u=i||a.selector,f=a.create(r,[],u,l),h=f.location.nativeElement,p=f.injector.get(AN,null);return p?.registerApplication(h),f.onDestroy(()=>{this.detachView(f.hostView),lv(this.components,f),p?.unregisterApplication(h)}),this._loadComponent(f),Jn(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Jn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(cO.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Ce(101,!1);let t=gn(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,gn(t),this.afterTick.next(),Jn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(oc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<eY;)Jn(14),this.synchronizeOnce(),Jn(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)tY(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Hv(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;lv(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(sf,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>lv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ce(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function tY(n,e,t,i){if(!t&&!Hv(n))return;QO(n,e,t&&!i?0:1)}function To(n,e,t,i){let r=dn(),o=Gv();if(ul(r,o,e)){let s=Di(),a=US();q9(a,r,n,e,t,i)}return To}function nY(n,e,t,i){return ul(n,Gv(),t)?e+_p(t)+i:wa}function iv(n,e){return n<<17|e<<2}function cu(n){return n>>17&32767}function iY(n){return(n&2)==2}function rY(n,e){return n&131071|e<<17}function dS(n){return n|2}function Kd(n){return(n&131068)>>2}function fM(n,e){return n&-131069|e<<2}function oY(n){return(n&1)===1}function fS(n){return n|1}function sY(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=cu(s),l=Kd(s);n[i]=t;let u=!1,f;if(Array.isArray(t)){let h=t;f=h[1],(f===null||xp(h,f)>0)&&(u=!0)}else f=t;if(r)if(l!==0){let p=cu(n[a+1]);n[i+1]=iv(p,a),p!==0&&(n[p+1]=fM(n[p+1],i)),n[a+1]=rY(n[a+1],i)}else n[i+1]=iv(a,0),a!==0&&(n[a+1]=fM(n[a+1],i)),a=i;else n[i+1]=iv(l,0),a===0?a=i:n[l+1]=fM(n[l+1],i),l=i;u&&(n[i+1]=dS(n[i+1])),M4(n,f,i,!0),M4(n,f,i,!1),aY(e,f,n,i,o),s=iv(a,l),o?e.classBindings=s:e.styleBindings=s}function aY(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&xp(o,e)>=0&&(t[i+1]=fS(t[i+1]))}function M4(n,e,t,i){let r=n[t+1],o=e===null,s=i?cu(r):Kd(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];lY(l,e)&&(a=!0,n[s+1]=i?fS(u):dS(u)),s=i?cu(u):Kd(u)}a&&(n[t+1]=i?dS(r):fS(r))}function lY(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?xp(n,e)>=0:!1}var Wi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function DN(n){return n.substring(Wi.key,Wi.keyEnd)}function cY(n){return n.substring(Wi.value,Wi.valueEnd)}function uY(n){return ON(n),RN(n,Jd(n,0,Wi.textEnd))}function RN(n,e){let t=Wi.textEnd;return t===e?-1:(e=Wi.keyEnd=fY(n,Wi.key=e,t),Jd(n,e,t))}function dY(n){return ON(n),PN(n,Jd(n,0,Wi.textEnd))}function PN(n,e){let t=Wi.textEnd,i=Wi.key=Jd(n,e,t);return t===i?-1:(i=Wi.keyEnd=hY(n,i,t),i=S4(n,i,t,58),i=Wi.value=Jd(n,i,t),i=Wi.valueEnd=pY(n,i,t),S4(n,i,t,59))}function ON(n){Wi.key=0,Wi.keyEnd=0,Wi.value=0,Wi.valueEnd=0,Wi.textEnd=n.length}function Jd(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function fY(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function hY(n,e,t){let i;for(;e<t&&((i=n.charCodeAt(e))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)e++;return e}function S4(n,e,t,i){return e=Jd(n,e,t),e<t&&e++,e}function pY(n,e,t){let i=-1,r=-1,o=-1,s=e,a=s;for(;s<t;){let l=n.charCodeAt(s++);if(l===59)return a;l===34||l===39?a=s=C4(n,l,s,t):e===s-4&&o===85&&r===82&&i===76&&l===40?a=s=C4(n,41,s,t):l>32&&(a=s),o=r,r=i,i=l&-33}return a}function C4(n,e,t,i){let r=-1,o=t;for(;o<i;){let s=n.charCodeAt(o++);if(s==e&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function ne(n,e,t){let i=dn(),r=Gv();if(ul(i,r,e)){let o=Di(),s=US();HO(o,s,i,n,e,i[Qn],t,!1)}return ne}function hS(n,e,t,i,r){cC(e,n,t,r?"class":"style",i)}function ni(n,e,t){return LN(n,e,t,!1),ni}function Sn(n,e){return LN(n,e,null,!0),Sn}function NN(n){kN(VN,mY,n,!1)}function mY(n,e){for(let t=dY(e);t>=0;t=PN(e,t))VN(n,DN(e),cY(e))}function FN(n){kN(bY,gY,n,!0)}function gY(n,e){for(let t=uY(e);t>=0;t=RN(e,t))kv(n,DN(e),!0)}function LN(n,e,t,i){let r=dn(),o=Di(),s=x3(2);if(o.firstUpdatePass&&BN(o,n,s,i),e!==wa&&ul(r,s,e)){let a=o.data[fu()];HN(o,a,r,r[Qn],n,r[s+1]=MY(e,t),i,s)}}function kN(n,e,t,i){let r=Di(),o=x3(2);r.firstUpdatePass&&BN(r,null,o,i);let s=dn();if(t!==wa&&ul(s,o,t)){let a=r.data[fu()];if(zN(a,i)&&!UN(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=gM(l,t||"")),hS(r,a,s,t,i)}else EY(r,a,s,s[Qn],s[o+1],s[o+1]=wY(n,e,t),i,o)}}function UN(n,e){return e>=n.expandoStartIndex}function BN(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[fu()],s=UN(n,t);zN(o,i)&&e===null&&!s&&(e=!1),e=vY(r,o,e,i),sY(r,o,e,t,s,i)}}function vY(n,e,t,i){let r=j$(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=hM(null,n,e,t,i),t=gp(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=hM(r,n,e,t,i),o===null){let l=yY(n,e,i);l!==void 0&&Array.isArray(l)&&(l=hM(null,n,e,l[1],i),l=gp(l,e.attrs,i),_Y(n,e,i,l))}else o=xY(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function yY(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Kd(i)!==0)return n[cu(i)]}function _Y(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[cu(r)]=i}function xY(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=gp(i,s,t)}return gp(i,e.attrs,t)}function hM(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=gp(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function gp(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),kv(n,s,t?!0:e[++o]))}return n===void 0?null:n}function wY(n,e,t){if(t==null||t==="")return Kr;let i=[],r=es(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function VN(n,e,t){kv(n,e,es(t))}function bY(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&kv(n,i,t)}function EY(n,e,t,i,r,o,s,a){r===wa&&(r=Kr);let l=0,u=0,f=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;f!==null||h!==null;){let p=l<r.length?r[l+1]:void 0,g=u<o.length?o[u+1]:void 0,v=null,w;f===h?(l+=2,u+=2,p!==g&&(v=h,w=g)):h===null||f!==null&&f<h?(l+=2,v=f):(u+=2,v=h,w=g),v!==null&&HN(n,e,t,i,v,w,s,a),f=l<r.length?r[l]:null,h=u<o.length?o[u]:null}}function HN(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],f=oY(u)?T4(l,e,t,r,Kd(u),s):void 0;if(!Pv(f)){Pv(o)||iY(u)&&(o=T4(l,null,t,r,a,s));let h=f3(fu(),t);dq(i,s,h,r,o)}}function T4(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let l=n[r],u=Array.isArray(l),f=u?l[1]:l,h=f===null,p=t[r+1];p===wa&&(p=h?Kr:void 0);let g=h?QE(p,i):f===i?p:void 0;if(u&&!Pv(g)&&(g=QE(l,i)),Pv(g)&&(a=g,s))return a;let v=n[r+1];r=s?cu(v):Kd(v)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=QE(l,i))}return a}function Pv(n){return n!==void 0}function MY(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Jr(es(n)))),n}function zN(n,e){return(n.flags&(e?8:16))!==0}function R(n,e,t,i){let r=dn(),o=Di(),s=Ii+n,a=r[Qn],l=o.firstCreatePass?dN(s,o,r,e,lC,PS(),t,i):o.data[s],u=jN(o,r,l,a,e,n);r[s]=u;let f=Vv(l);return du(l,!0),FO(a,u,l),!pu(l)&&Wv()&&Jv(o,r,u,l),(R$()===0||f)&&rf(u,r),P$(),f&&(Kv(o,r,l),JS(o,l,r)),i!==null&&aC(r,l),R}function P(){let n=Rr();OS()?NS():(n=n.parent,du(n,!1));let e=n;N$(e)&&L$(),O$();let t=Di();return t.firstCreatePass&&fN(t,e),e.classesWithoutHost!=null&&Y$(e)&&hS(t,e,dn(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Z$(e)&&hS(t,e,dn(),e.stylesWithoutHost,!1),P}function we(n,e,t,i){return R(n,e,t,i),P(),we}var jN=(n,e,t,i,r,o)=>(ac(!0),nC(i,r,T3()));function SY(n,e,t,i,r,o){let s=e[Ls],a=!s||tf()||pu(t)||Mp(s,o);if(ac(a),a)return nC(i,r,T3());let l=ty(s,n,e,t);return hO(s,o)&&qv(s,o,l.nextSibling),s&&(Y3(t)||Z3(l))&&uu(t)&&(F$(t),NO(l)),l}function CY(){jN=SY}function TY(n,e,t,i,r){let o=e.consts,s=Xd(o,i),a=Cp(e,n,8,"ng-container",s);s!==null&&eS(a,s,!0);let l=Xd(o,r);return PS()&&mC(e,t,a,l,lC),a.mergedAttrs=Yd(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function oy(n,e,t){let i=dn(),r=Di(),o=n+Ii,s=r.firstCreatePass?TY(o,r,i,e,t):r.data[o];du(s,!0);let a=GN(r,i,s,n);return i[o]=a,Wv()&&Jv(r,i,a,s),rf(a,i),Vv(s)&&(Kv(r,i,s),JS(r,s,i)),t!=null&&aC(i,s),oy}function sy(){let n=Rr(),e=Di();return OS()?NS():(n=n.parent,du(n,!1)),e.firstCreatePass&&(HS(e,n),AS(n)&&e.queries.elementEnd(n)),sy}function cc(n,e,t){return oy(n,e,t),sy(),cc}var GN=(n,e,t,i)=>(ac(!0),PO(e[Qn],""));function AY(n,e,t,i){let r,o=e[Ls],s=!o||tf()||Mp(o,i)||pu(t);if(ac(s),s)return PO(e[Qn],"");let a=ty(o,n,e,t),l=$7(o,i);return qv(o,i,a),r=ny(l,a),r}function IY(){GN=AY}function Rt(){return dn()}var Ov="en-US";var DY=Ov;function RY(n){typeof n=="string"&&(DY=n.toLowerCase().replace(/_/g,"-"))}function A4(n,e,t){return function i(r){if(r===Function)return t;let o=uu(n)?ya(n.index,e):e;pC(o,5);let s=e[eo],a=I4(e,s,t,r),l=i.__ngNextListenerFn__;for(;l;)a=I4(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function I4(n,e,t,i){let r=gn(null);try{return Jn(6,e,t),t(i)!==!1}catch(o){return PY(n,o),!1}finally{Jn(7,e,t),gn(r)}}function PY(n,e){let t=n[ru],i=t?t.get(al,null):null;i&&i.handleError(e)}function D4(n,e,t,i,r,o){let s=e[t],a=e[Kt],u=a.data[t].outputs[i],f=s[u],h=a.firstCreatePass?RS(a):null,p=DS(e),g=f.subscribe(o),v=p.length;p.push(o,g),h&&h.push(r,n.index,v,-(v+1))}var OY=new Map;function Re(n,e,t,i){let r=dn(),o=Di(),s=Rr();return WN(o,r,r[Qn],s,n,e,i),Re}function NY(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[mv],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function WN(n,e,t,i,r,o,s){let a=Vv(i),u=n.firstCreatePass?RS(n):null,f=DS(e),h=!0;if(i.type&3||s){let p=Bs(i,e),g=s?s(p):p,v=f.length,w=s?_=>s(ks(_[i.index])):i.index,y=null;if(!s&&a&&(y=NY(n,e,r,i.index)),y!==null){let _=y.__ngLastListenerFn__||y;_.__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,h=!1}else{o=A4(i,e,o);let _=e[ru].get(bp);OY.get(_)?.(g,r,o);let E=t.listen(g,r,o);f.push(o,E),u&&u.push(r,w,v,v+1)}}else o=A4(i,e,o);if(h){let p=i.outputs?.[r],g=i.hostDirectiveOutputs?.[r];if(g&&g.length)for(let v=0;v<g.length;v+=2){let w=g[v],y=g[v+1];D4(i,e,w,y,r,o)}if(p&&p.length)for(let v of p)D4(i,e,v,r,r,o)}}function _e(n=1){return W$(n)}function FY(n,e){let t=null,i=S9(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(i===null?DO(n,o,!0):A9(i,o))return r}return t}function $N(n){let e=dn()[to][io];if(!e.projection){let t=n?n.length:1,i=e.projection=a$(t,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?FY(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function qN(n,e=0,t,i,r,o){let s=dn(),a=Di(),l=i?n+1:null;l!==null&&SN(s,a,l,i,r,o,null,t);let u=Cp(a,Ii+n,16,null,t||null);u.projection===null&&(u.projection=e),NS();let h=!s[Ls]||tf();s[to][io].projection[u.projection]===null&&l!==null?LY(s,a,l):h&&!pu(u)&&cq(a,s,u)}function LY(n,e,t){let i=Ii+t,r=e.data[i],o=n[i],s=KM(o,r.tView.ssrId),a=zO(n,r,void 0,{dehydratedView:s});rN(o,a,0,qM(r,s))}function bC(n,e,t,i){CX(n,e,t,i)}function Ri(n,e,t){SX(n,e,t)}function si(n){let e=dn(),t=Di(),i=w3();FS(i+1);let r=vC(t,i);if(n.dirty&&C$(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=IX(e,i);n.reset(o,_7),n.notifyOnChanges()}return!0}return!1}function ai(){return MX(dn(),w3())}function kY(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Nr(n){let e=U$();return p3(e,Ii+n)}function te(n,e=""){let t=dn(),i=Di(),r=n+Ii,o=i.firstCreatePass?Cp(i,r,1,e,null):i.data[r],s=XN(i,t,o,e,n);t[r]=s,Wv()&&Jv(i,t,s,o),du(o,!1)}var XN=(n,e,t,i,r)=>(ac(!0),RO(e[Qn],i));function UY(n,e,t,i,r){let o=e[Ls],s=!o||tf()||pu(t)||Mp(o,r);return ac(s),s?RO(e[Qn],i):ty(o,n,e,t)}function BY(){XN=UY}function Ln(n){return cr("",n,""),Ln}function cr(n,e,t){let i=dn(),r=nY(i,n,e,t);return r!==wa&&VY(i,fu(),r),cr}function VY(n,e,t){let i=f3(e,n);P9(n[Qn],i,t)}function ts(n,e,t){X3(e)&&(e=e());let i=dn(),r=Gv();if(ul(i,r,e)){let o=Di(),s=US();HO(o,s,i,n,e,i[Qn],t,!1)}return ts}function Hs(n,e){let t=X3(n);return t&&n.set(e),t}function ns(n,e){let t=dn(),i=Di(),r=Rr();return WN(i,t,t[Qn],r,n,e),ns}function HY(n,e,t){let i=Di();if(i.firstCreatePass){let r=va(n);pS(t,i.data,i.blueprint,r,!0),pS(e,i.data,i.blueprint,r,!1)}}function pS(n,e,t,i,r){if(n=or(n),Array.isArray(n))for(let o=0;o<n.length;o++)pS(n[o],e,t,i,r);else{let o=Di(),s=dn(),a=Rr(),l=$d(n)?n:or(n.provide),u=i3(n),f=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if($d(n)||!n.multi){let g=new lu(u,r,de),v=mM(l,e,r?f:f+p,h);v===-1?(AM(wv(a,s),o,l),pM(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[v]=g,s[v]=g)}else{let g=mM(l,e,f+p,h),v=mM(l,e,f,f+p),w=g>=0&&t[g],y=v>=0&&t[v];if(r&&!y||!r&&!w){AM(wv(a,s),o,l);let _=GY(r?jY:zY,t.length,r,i,u);!r&&y&&(t[v].providerFactory=_),pM(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),s.push(_)}else{let _=YN(t[r?v:g],u,!r&&i);pM(o,n,g>-1?g:v,_)}!r&&i&&y&&t[v].componentProviders++}}}function pM(n,e,t,i){let r=$d(e),o=m$(e);if(r||o){let l=(o?or(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[i,l]):u[f+1].push(i,l)}else u.push(t,l)}}}function YN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function mM(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function zY(n,e,t,i){return mS(this.multi,[])}function jY(n,e,t,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=dp(t,t[Kt],this.providerFactory.index,i);o=a.slice(0,s),mS(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],mS(r,o);return o}function mS(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function GY(n,e,t,i,r){let o=new lu(n,t,de);return o.multi=[],o.index=e,o.componentProviders=0,YN(o,r,i&&!t),o}function xi(n,e=[]){return t=>{t.providersResolver=(i,r)=>HY(i,r?r(n):n,e)}}function mu(n,e,t){let i=jv()+n,r=dn();return r[i]===wa?_C(r,i,t?e.call(t):e()):WX(r,i)}function Fr(n,e,t,i){return KN(dn(),jv(),n,e,t,i)}function ay(n,e,t,i,r){return WY(dn(),jv(),n,e,t,i,r)}function ZN(n,e){let t=n[e];return t===wa?void 0:t}function KN(n,e,t,i,r,o){let s=e+t;return ul(n,s,r)?_C(n,s+1,o?i.call(o,r):i(r)):ZN(n,s+1)}function WY(n,e,t,i,r,o,s){let a=e+t;return $X(n,a,r,o)?_C(n,a+2,s?i.call(s,r,o):i(r,o)):ZN(n,a+2)}function Ea(n,e){let t=Di(),i,r=n+Ii;t.firstCreatePass?(i=$Y(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=nu(i.type,!0)),s,a=Zr(de);try{let l=xv(!1),u=o();return xv(l),kY(t,dn(),r,u),u}finally{Zr(a)}}function $Y(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Ma(n,e,t){let i=n+Ii,r=dn(),o=p3(r,i);return qY(r,i)?KN(r,jv(),e,o.transform,t,o):o.transform(t)}function qY(n,e){return n[Kt].data[e].pure}function ro(n,e){return ey(n,e)}var vp=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},JN=new vp("19.2.9"),gS=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},QN=(()=>{class n{compileModuleSync(t){return new lS(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=J4(t),o=AO(r.declarations).reduce((s,a)=>{let l=Wd(a);return l&&s.push(new mp(l)),s},[]);return new gS(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XY=(()=>{class n{zone=K(Wn);changeDetectionScheduler=K(fp);applicationRef=K(Us);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YY({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Wn(wt(Oe({},ZY()),{scheduleInRootZone:t})),[{provide:Wn,useFactory:n},{provide:iu,multi:!0,useFactory:()=>{let i=K(XY,{optional:!0});return()=>i.initialize()}},{provide:iu,multi:!0,useFactory:()=>{let i=K(KY);return()=>{i.initialize()}}},e===!0?{provide:z3,useValue:!0}:[],{provide:j3,useValue:t??H3}]}function ZY(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var KY=(()=>{class n{subscription=new vi;initialized=!1;zone=K(Wn);pendingTasks=K(fl);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Wn.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Wn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var JY=(()=>{class n{appRef=K(Us);taskService=K(fl);ngZone=K(Wn);zonelessEnabled=K(GS);tracing=K($v,{optional:!0});disableScheduling=K(z3,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new vi;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ev):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(K(j3,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof OM||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?t4:G3;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ev+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,t4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QY(){return typeof $localize<"u"&&$localize.locale||Ov}var EC=new Ie("",{providedIn:"root",factory:()=>K(EC,ln.Optional|ln.SkipSelf)||QY()});var vS=new Ie(""),eZ=new Ie("");function ip(n){return!n.moduleRef}function tZ(n){let e=ip(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Wn);return t.run(()=>{ip(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(al,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),ip(n)){let o=()=>e.destroy(),s=n.platformInjector.get(vS);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(vS);s.add(o),n.moduleRef.onDestroy(()=>{lv(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return iZ(i,t,()=>{let o=e.get(IN);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(EC,Ov);if(RY(s||Ov),!e.get(eZ,!0))return ip(n)?e.get(Us):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ip(n)){let l=e.get(Us);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return nZ(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function nZ(n,e){let t=n.injector.get(Us);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Ce(-403,!1);e.push(n)}function iZ(n,e,t){try{let i=t();return lc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var cv=null;function rZ(n=[],e){return Jo.create({name:e,providers:[{provide:Uv,useValue:"platform"},{provide:vS,useValue:new Set([()=>cv=null])},...n]})}function oZ(n=[]){if(cv)return cv;let e=rZ(n);return cv=e,JX(),sZ(e),e}function sZ(n){let e=n.get(qS,null);Mo(n,()=>{e?.forEach(t=>t())})}var Qi=(()=>{class n{static __NG_ELEMENT_ID__=aZ}return n})();function aZ(n){return lZ(Rr(),dn(),(n&16)===16)}function lZ(n,e,t){if(uu(n)&&!t){let i=ya(n.index,e);return new pp(i,i)}else if(n.type&175){let i=e[to];return new pp(i,e)}return null}var yS=class{constructor(){}supports(e){return MN(e)}create(e){return new _S(e)}},cZ=(n,e)=>e,_S=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||cZ}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<R4(i,r,o)?t:i,a=R4(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,f=l-r;if(u!=f){for(let p=0;p<u;p++){let g=p<o.length?o[p]:o[p]=0,v=g+p;f<=v&&v<u&&(o[p]=g+1)}let h=s.previousIndex;o[h]=f-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!MN(e))throw new Ce(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,jX(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new xS(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Nv),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Nv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},xS=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},wS=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Nv=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new wS,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function R4(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function P4(){return new MC([new yS])}var MC=(()=>{class n{factories;static \u0275prov=De({token:n,providedIn:"root",factory:P4});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||P4()),deps:[[n,new r$,new X4]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new Ce(901,!1)}}return n})();function eF(n){Jn(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=oZ(i),o=[YY({}),{provide:fp,useExisting:JY},...t||[]],s=new Rv({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return tZ({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Jn(9)}}var O4=!1;function uZ(){O4||(O4=!0,z7(),CY(),BY(),IY(),YX(),_X(),$q(),H9())}function dZ(n){return n.whenStable()}function tF(){let n=[{provide:Q0,useFactory:()=>{let e=!0;return e=!!K(Ep,{optional:!0})?.get(uO,null),e&&hu("NgHydration"),e}},{provide:iu,useValue:()=>{Bq(!1),K(Q0)&&(X7(wp()),uZ())},multi:!0}];return n.push({provide:lO,useFactory:()=>K(Q0)},{provide:sf,useFactory:()=>{if(K(Q0)){let e=K(Us);return()=>{dZ(e).then(()=>{e.destroyed||jq(e)})}}return()=>{}},multi:!0}),sc(n)}function af(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Lr(n){return OE(n)}function ml(n,e){return IE(n,e?.equal)}var N4=class{[Yo];constructor(e){this[Yo]=e}destroy(){this[Yo].destroy()}};var fn=new Ie("");var rF=null;function is(){return rF}function SC(n){rF??=n}var Tp=class{},CC=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:()=>K(oF),providedIn:"platform"})}return n})();var oF=(()=>{class n extends CC{_location;_history;_doc=K(fn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return is().getBaseHref(this._doc)}onPopState(t){let i=is().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=is().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function sF(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function nF(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function uc(n){return n&&n[0]!=="?"?`?${n}`:n}var lf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:()=>K(lF),providedIn:"root"})}return n})(),aF=new Ie(""),lF=(()=>{class n extends lf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??K(fn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sF(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+uc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+uc(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+uc(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(ze(CC),ze(aF,8))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oo=(()=>{class n{_subject=new Fn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=pZ(nF(iF(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+uc(i))}normalize(t){return n.stripTrailingSlash(hZ(this._basePath,iF(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uc(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=uc;static joinWithSlash=sF;static stripTrailingSlash=nF;static \u0275fac=function(i){return new(i||n)(ze(lf))};static \u0275prov=De({token:n,factory:()=>fZ(),providedIn:"root"})}return n})();function fZ(){return new oo(ze(lf))}function hZ(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function iF(n){return n.replace(/\/index.html$/,"")}function pZ(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var TC=/\s+/,cF=[],Ao=(()=>{class n{_ngEl;_renderer;initialClasses=cF;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(TC):cF}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(TC):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(TC).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(de(nn),de(wr))};static \u0275dir=Ut({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var ly=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wi=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new ly(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),uF(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);uF(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(de(ba),de(xr),de(MC))};static \u0275dir=Ut({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function uF(n,e){n.context.$implicit=e.item}var Tn=(()=>{class n{_viewContainer;_context=new cy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){dF(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){dF(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(de(ba),de(xr))};static \u0275dir=Ut({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),cy=class{$implicit=null;ngIf=null};function dF(n,e){if(n&&!n.createEmbeddedView)throw new Ce(2020,!1)}var gl=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(de(ba))};static \u0275dir=Ut({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[ar]})}return n})();function mZ(n,e){return new Ce(2100,!1)}var AC=class{createSubscription(e,t){return Lr(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){Lr(()=>e.unsubscribe())}},IC=class{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}},gZ=new IC,vZ=new AC,DC=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(lc(t))return gZ;if(wC(t))return vZ;throw mZ(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(de(Qi,16))};static \u0275pipe=of({name:"async",type:n,pure:!1})}return n})();var Ap=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=Dr({})}return n})();function Ip(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var uy="browser",fF="server";function Dp(n){return n===uy}function cf(n){return n===fF}var gu=class{};var vu=new Ie(""),NC=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Ce(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(ze(vu),ze(Wn))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})(),uf=class{_doc;constructor(e){this._doc=e}manager},dy="ng-app-id";function hF(n){for(let e of n)e.remove()}function pF(n,e){let t=e.createElement("style");return t.textContent=n,t}function yZ(n,e,t,i){let r=n.head?.querySelectorAll(`style[${dy}="${e}"],link[${dy}="${e}"]`);if(r)for(let o of r)o.removeAttribute(dy),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function PC(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var FC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=cf(o),yZ(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,pF);i?.forEach(r=>this.addUsage(r,this.external,PC))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(hF(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])hF(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,pF(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,PC(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(dy,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(ze(fn),ze(bp),ze(YS,8),ze(So))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})(),RC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},LC=/%COMP%/g;var gF="%COMP%",_Z=`_nghost-${gF}`,xZ=`_ngcontent-${gF}`,wZ=!0,bZ=new Ie("",{providedIn:"root",factory:()=>wZ});function EZ(n){return xZ.replace(LC,n)}function MZ(n){return _Z.replace(LC,n)}function vF(n,e){return e.map(t=>t.replace(LC,n))}var Np=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=cf(a),this.defaultRenderer=new Pp(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===_a.ShadowDom&&(i=wt(Oe({},i),{encapsulation:_a.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof fy?r.applyToHost(t):r instanceof Op&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(i.encapsulation){case _a.Emulated:o=new fy(l,u,i,this.appId,f,s,a,h,p);break;case _a.ShadowDom:return new OC(l,u,t,i,s,a,this.nonce,h,p);default:o=new Op(l,u,i,f,s,a,h,p);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(ze(NC),ze(FC),ze(bp),ze(bZ),ze(fn),ze(So),ze(Wn),ze(YS),ze($v,8))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})(),Pp=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(RC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(mF(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(mF(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ce(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=RC[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=RC[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(cl.DashCase|cl.Important)?e.style.setProperty(t,i,r&cl.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&cl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=is().getGlobalEventTarget(this.doc,e),!e))throw new Ce(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function mF(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var OC=class extends Pp{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=vF(r.id,f);for(let p of f){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=PC(p,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Op=class extends Pp{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let f=i.styles;this.styles=u?vF(u,f):f,this.styleUrls=i.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},fy=class extends Op{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,l,u){let f=r+"-"+i.id;super(e,t,i,o,s,a,l,u,f),this.contentAttr=EZ(f),this.hostAttr=MZ(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var hy=class n extends Tp{supportsDOMEvents=!0;static makeCurrent(){SC(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=SZ();return t==null?null:CZ(t)}resetBaseElement(){Fp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ip(document.cookie,e)}},Fp=null;function SZ(){return Fp=Fp||document.querySelector("base"),Fp?Fp.getAttribute("href"):null}function CZ(n){return new URL(n,document.baseURI).pathname}var TZ=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})(),_F=(()=>{class n extends uf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(ze(fn))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})(),yF=["alt","control","meta","shift"],AZ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},IZ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xF=(()=>{class n extends uf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>is().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),yF.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=AZ[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),yF.forEach(s=>{if(s!==r){let a=IZ[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(ze(fn))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})();function Lp(n,e){return eF(Oe({rootComponent:n},DZ(e)))}function DZ(n){return{appProviders:[...FZ,...n?.providers??[]],platformProviders:NZ}}function RZ(){hy.makeCurrent()}function PZ(){return new al}function OZ(){return nO(document),document}var NZ=[{provide:So,useValue:uy},{provide:qS,useValue:RZ,multi:!0},{provide:fn,useFactory:OZ}];var FZ=[{provide:Uv,useValue:"root"},{provide:al,useFactory:PZ},{provide:vu,useClass:_F,multi:!0,deps:[fn]},{provide:vu,useClass:xF,multi:!0,deps:[fn]},Np,FC,NC,{provide:oc,useExisting:Np},{provide:gu,useClass:TZ},[]];var ff=class{},kp=class{},vl=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var my=class{encodeKey(e){return wF(e)}encodeValue(e){return wF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function LZ(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var kZ=/%(\d[a-f0-9])/gi,UZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wF(n){return encodeURIComponent(n).replace(kZ,(e,t)=>UZ[t]??e)}function py(n){return`${n}`}var Jt=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new my,e.fromString){if(e.fromObject)throw new Ce(2805,!1);this.map=LZ(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(py):[py(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(py(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(py(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var gy=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function BZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function bF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function EF(n){return typeof Blob<"u"&&n instanceof Blob}function MF(n){return typeof FormData<"u"&&n instanceof FormData}function VZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var SF="Content-Type",CF="Accept",AF="X-Request-URL",IF="text/plain",DF="application/json",HZ=`${DF}, ${IF}, */*`,df=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(BZ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new vl,this.context??=new gy,!this.params)this.params=new Jt,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||bF(this.body)||EF(this.body)||MF(this.body)||VZ(this.body)?this.body:this.body instanceof Jt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||MF(this.body)?null:EF(this.body)?this.body.type||null:bF(this.body)?null:typeof this.body=="string"?IF:this.body instanceof Jt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?DF:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,f=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),u)),e.setParams&&(f=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),f)),new n(t,i,s,{params:f,headers:u,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},yu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(yu||{}),hf=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new vl,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},vy=class n extends hf{constructor(e={}){super(e)}type=yu.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_u=class n extends hf{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=yu.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Up=class extends hf{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},zZ=200,jZ=204;function kC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Li=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof df)o=t;else{let l;r.headers instanceof vl?l=r.headers:l=new vl(r.headers);let u;r.params&&(r.params instanceof Jt?u=r.params:u=new Jt({fromObject:r.params})),o=new df(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Ct(o).pipe(nc(l=>this.handler.handle(l)));if(t instanceof df||r.observe==="events")return s;let a=s.pipe(Gn(l=>l instanceof _u));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Ce(2806,!1);return l.body}));case"blob":return a.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Ce(2807,!1);return l.body}));case"text":return a.pipe(lt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Ce(2808,!1);return l.body}));case"json":default:return a.pipe(lt(l=>l.body))}case"response":return a;default:throw new Ce(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Jt().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,kC(r,i))}post(t,i,r={}){return this.request("POST",t,kC(r,i))}put(t,i,r={}){return this.request("PUT",t,kC(r,i))}static \u0275fac=function(i){return new(i||n)(ze(ff))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})();var GZ=new Ie("");function RF(n,e){return e(n)}function WZ(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function $Z(n,e,t){return(i,r)=>Mo(t,()=>e(i,o=>n(o,r)))}var _y=new Ie(""),BC=new Ie(""),VC=new Ie(""),HC=new Ie("",{providedIn:"root",factory:()=>!0});function qZ(){let n=null;return(e,t)=>{n===null&&(n=(K(_y,{optional:!0})??[]).reduceRight(WZ,RF));let i=K(fl);if(K(HC)){let o=i.add();return n(e,t).pipe(ic(()=>i.remove(o)))}else return n(e,t)}}var yy=(()=>{class n extends ff{backend;injector;chain=null;pendingTasks=K(fl);contributeToStability=K(HC);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(BC),...this.injector.get(VC,[])]));this.chain=i.reduceRight((r,o)=>$Z(r,o,this.injector),RF)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(ic(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(ze(kp),ze(_r))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})();var XZ=/^\)\]\}',?\n/,YZ=RegExp(`^${AF}:`,"m");function ZZ(n){return"responseURL"in n&&n.responseURL?n.responseURL:YZ.test(n.getAllResponseHeaders())?n.getResponseHeader(AF):null}var UC=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Ce(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Kn(i.\u0275loadImpl()):Ct(null)).pipe(_i(()=>new Ft(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((w,y)=>s.setRequestHeader(w,y.join(","))),t.headers.has(CF)||s.setRequestHeader(CF,HZ),!t.headers.has(SF)){let w=t.detectContentTypeHeader();w!==null&&s.setRequestHeader(SF,w)}if(t.responseType){let w=t.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let w=s.statusText||"OK",y=new vl(s.getAllResponseHeaders()),_=ZZ(s)||t.url;return l=new vy({headers:y,status:s.status,statusText:w,url:_}),l},f=()=>{let{headers:w,status:y,statusText:_,url:T}=u(),E=null;y!==jZ&&(E=typeof s.response>"u"?s.responseText:s.response),y===0&&(y=E?zZ:0);let M=y>=200&&y<300;if(t.responseType==="json"&&typeof E=="string"){let V=E;E=E.replace(XZ,"");try{E=E!==""?JSON.parse(E):null}catch(F){E=V,M&&(M=!1,E={error:F,text:E})}}M?(o.next(new _u({body:E,headers:w,status:y,statusText:_,url:T||void 0})),o.complete()):o.error(new Up({error:E,headers:w,status:y,statusText:_,url:T||void 0}))},h=w=>{let{url:y}=u(),_=new Up({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});o.error(_)},p=!1,g=w=>{p||(o.next(u()),p=!0);let y={type:yu.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(y.total=w.total),t.responseType==="text"&&s.responseText&&(y.partialText=s.responseText),o.next(y)},v=w=>{let y={type:yu.UploadProgress,loaded:w.loaded};w.lengthComputable&&(y.total=w.total),o.next(y)};return s.addEventListener("load",f),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:yu.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",f),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(ze(gu))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})(),PF=new Ie(""),KZ="XSRF-TOKEN",JZ=new Ie("",{providedIn:"root",factory:()=>KZ}),QZ="X-XSRF-TOKEN",eK=new Ie("",{providedIn:"root",factory:()=>QZ}),Bp=class{},tK=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ip(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(ze(fn),ze(So),ze(JZ))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})();function nK(n,e){let t=n.url.toLowerCase();if(!K(PF)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=K(Bp).getToken(),r=K(eK);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var zC=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(zC||{});function iK(n,e){return{\u0275kind:n,\u0275providers:e}}function jC(...n){let e=[Li,UC,yy,{provide:ff,useExisting:yy},{provide:kp,useFactory:()=>K(GZ,{optional:!0})??K(UC)},{provide:BC,useValue:nK,multi:!0},{provide:PF,useValue:!0},{provide:Bp,useClass:tK}];for(let t of n)e.push(...t.\u0275providers);return sc(e)}var TF=new Ie("");function GC(){return iK(zC.LegacyInterceptors,[{provide:TF,useFactory:qZ},{provide:BC,useExisting:TF,multi:!0}])}var rK=new Ie(""),oK="b",sK="h",aK="s",lK="st",cK="u",uK="rt",WC=new Ie(""),dK=["GET","HEAD"];function fK(n,e){let p=K(WC),{isCacheActive:t}=p,i=Md(p,["isCacheActive"]),{transferCache:r,method:o}=n;if(!t||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!dK.includes(o)||!i.includeRequestsWithAuthHeaders&&hK(n)||i.filter?.(n)===!1)return e(n);let s=K(Ep);if(K(rK,{optional:!0}))throw new Ce(2803,!1);let l=n.url,u=pK(n,l),f=s.get(u,null),h=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(h=r.includeHeaders),f){let{[oK]:g,[uK]:v,[sK]:w,[aK]:y,[lK]:_,[cK]:T}=f,E=g;switch(v){case"arraybuffer":E=new TextEncoder().encode(g).buffer;break;case"blob":E=new Blob([g]);break}let M=new vl(w);return Ct(new _u({body:E,headers:M,status:y,statusText:_,url:T}))}return e(n).pipe(hi(g=>{g instanceof _u}))}function hK(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function OF(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function pK(n,e){let{params:t,method:i,responseType:r}=n,o=OF(t),s=n.serializeBody();s instanceof URLSearchParams?s=OF(s):typeof s!="string"&&(s="");let a=[i,r,e,s,o].join("|"),l=mK(a);return l}function mK(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function NF(n){return[{provide:WC,useFactory:()=>(hu("NgHttpTransferCache"),Oe({isCacheActive:!0},n))},{provide:VC,useValue:fK,multi:!0},{provide:sf,multi:!0,useFactory:()=>{let e=K(Us),t=K(WC);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var FF=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(ze(fn))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=ze(gK),r},providedIn:"root"})}return n})(),gK=(()=>{class n extends qC{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Vs.NONE:return i;case Vs.HTML:return hl(i,"HTML")?es(i):QS(this._doc,String(i)).toString();case Vs.STYLE:return hl(i,"Style")?es(i):i;case Vs.SCRIPT:if(hl(i,"Script"))return es(i);throw new Ce(5200,!1);case Vs.URL:return hl(i,"URL")?es(i):Yv(String(i));case Vs.RESOURCE_URL:if(hl(i,"ResourceURL"))return es(i);throw new Ce(5201,!1);default:throw new Ce(5202,!1)}}bypassSecurityTrustHtml(t){return gO(t)}bypassSecurityTrustStyle(t){return vO(t)}bypassSecurityTrustScript(t){return yO(t)}bypassSecurityTrustUrl(t){return _O(t)}bypassSecurityTrustResourceUrl(t){return xO(t)}static \u0275fac=function(i){return new(i||n)(ze(fn))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$C=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}($C||{});function LF(...n){let e=[],t=new Set;for(let{\u0275providers:r,\u0275kind:o}of n)t.add(o),r.length&&e.push(r);let i=t.has($C.HttpTransferCacheOptions);return sc([[],tF(),t.has($C.NoHttpTransferCache)||i?[]:NF({}),e])}var XC=class extends CustomEvent{constructor(e,o){var s=o,{clientX:t,clientY:i}=s,r=Md(s,["clientX","clientY"]);super(e,wt(Oe({},r),{detail:{clientX:t,clientY:i}}))}},vK=({userAgent:n,maxTouchPoints:e})=>/ipad|iphone|ipod/i.test(n)||/^((?!chrome|android).)*safari/i.test(n)&&e>1,yK=700,UF=typeof navigator>"u"?null:navigator,_K=15,YC=class{constructor(){this.isIOS=!!UF&&vK(UF)}addEventListener(e,t,i){let r=this.isIOS?this.listenTouchEvents(e):this.listenContextmenuEvent(e);return e.addEventListener("longtap",i),()=>{r(),e.removeEventListener("longtap",i)}}supports(e){return e==="longtap"}listenContextmenuEvent(e){return this.manager.addEventListener(e,"contextmenu.prevent.stop",({clientX:t,clientY:i})=>{this.dispatchLongtapEvent(e,t,i)})}listenTouchEvents(e){let t=null,i=null,r=()=>{clearTimeout(t),i=null,t=null},o=this.manager.addEventListener(e,"touchstart.zoneless.passive",({touches:u})=>{let f=u[0];if(!f)return;let{clientX:h,clientY:p}=f;i={clientX:h,clientY:p},t=setTimeout(()=>{this.dispatchLongtapEvent(e,h,p),r()},yK)}),s=this.manager.addEventListener(e,"touchmove.zoneless.passive",({touches:u})=>{let f=u[0];if(!f||!i)return;let{clientX:h,clientY:p}=f;Math.hypot(h-i.clientX,p-i.clientY)<=_K||r()}),a=this.manager.addEventListener(e,"touchcancel.zoneless.passive",r),l=this.manager.addEventListener(e,"touchend.zoneless.passive",r);return()=>{o(),s(),a(),l()}}dispatchLongtapEvent(e,t,i){e.dispatchEvent(new XC("longtap",{clientX:t,clientY:i,bubbles:!1,cancelable:!1,composed:!1}))}},xy=class{supports(e){return this.regExp.test(e)}getDelay(e){let t=this.regExp.exec(e);if(!t?.groups)throw new Error(`Invalid event: ${e}`);let{time:i,units:r}=t.groups;switch(r){case"ms":return Number(i);case"s":return Number(i)*1e3;default:throw new Error(`Invalid event: ${e}`)}}unwrap(e){return e.replace(this.regExp,"")}},ZC=class extends xy{constructor(){super(...arguments),this.regExp=/\.debounce~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,i){let r,o=this.manager.addEventListener(e,this.unwrap(t),s=>{clearTimeout(r),r=setTimeout(()=>{i(s)},this.getDelay(t))});return()=>{clearTimeout(r),o()}}},_l=class{supports(e){return e.includes(this.modifier)}unwrap(e){return e.split(".").filter(t=>!this.modifier.includes(t)).join(".")}},xK=new Ie("",{factory:()=>{let n=K(fn);return e=>e==="body"?n.body:n.defaultView[e]||n.createElement("div")}}),wK=(()=>{class n extends _l{constructor(){super(...arguments),this.handler=K(xK),this.modifier=">"}addEventListener(t,i,r){return this.manager.addEventListener(this.handler(i.split(">")[0]),i.split(">")?.[1]??"",r)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})()}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})(),bK=(()=>{class n extends _l{constructor(){super(...arguments),this.modifier="capture.once.passive"}supports(t){return t.includes(".")&&!this.unwrap(t).includes(".")}addEventListener(t,i,r){let o=this.unwrap(i),s=i.includes(".capture");return t.addEventListener(o,r,{capture:s,once:i.includes(".once"),passive:i.includes(".passive")}),()=>t.removeEventListener(o,r,{capture:s})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})()}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})(),EK=(()=>{class n extends _l{constructor(){super(...arguments),this.modifier=".prevent"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.preventDefault(),r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})()}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})(),MK=(()=>{class n extends _l{constructor(){super(...arguments),this.modifier="resize"}supports(t){return t==="resize"}addEventListener(t,i,r){if(typeof ResizeObserver>"u"||!(t instanceof Element))return t.addEventListener(i,r),()=>t.removeEventListener(i,r);let o=new ResizeObserver(r);return o.observe(t),()=>o.disconnect()}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})()}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})(),SK=(()=>{class n extends _l{constructor(){super(...arguments),this.modifier=".self"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.target===o.currentTarget&&r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})()}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})(),BF=(()=>{class n extends _l{constructor(){super(...arguments),this.modifier=".silent"}addEventListener(t,i,r){return n.ngZone=this.manager.getZone(),n.ngZone.runOutsideAngular(()=>this.manager.addEventListener(t,this.unwrap(i),r))}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})()}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})(),CK=(()=>{class n extends _l{constructor(){super(...arguments),this.modifier=".stop"}addEventListener(t,i,r){return this.manager.addEventListener(t,this.unwrap(i),o=>{o.stopPropagation(),r(o)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})()}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})(),KC=class extends xy{constructor(){super(...arguments),this.regExp=/\.throttle~(?<time>\d+)(?<units>ms|s)/}addEventListener(e,t,i){let r,o=this.manager.addEventListener(e,this.unwrap(t),s=>{r===void 0&&(i(s),r=setTimeout(()=>{r=void 0},this.getDelay(t)))});return()=>{clearTimeout(r),o()}}},TK=(()=>{class n extends BF{constructor(){super(...arguments),this.modifier=".zoneless"}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})()}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})(),AK=[BF,TK,wK,bK,EK,MK,SK,CK,YC,ZC,KC],IK=AK.map(n=>({provide:vu,multi:!0,useClass:n}));function VF(){return IK}var Yt="primary",Qp=Symbol("RouteTitle"),nT=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function bu(n){return new nT(n)}function XF(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function DK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sa(n[t],e[t]))return!1;return!0}function Sa(n,e){let t=n?iT(n):void 0,i=e?iT(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!YF(n[r],e[r]))return!1;return!0}function iT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function YF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function ZF(n){return n.length>0?n[n.length-1]:null}function hc(n){return WE(n)?n:lc(n)?Kn(Promise.resolve(n)):Ct(n)}var RK={exact:JF,subset:QF},KF={exact:PK,subset:OK,ignored:()=>!0};function HF(n,e,t){return RK[t.paths](n.root,e.root,t.matrixParams)&&KF[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function PK(n,e){return Sa(n,e)}function JF(n,e,t){if(!xu(n.segments,e.segments)||!Ey(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!JF(n.children[i],e.children[i],t))return!1;return!0}function OK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>YF(n[t],e[t]))}function QF(n,e,t){return e2(n,e,e.segments,t)}function e2(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!xu(r,t)||e.hasChildren()||!Ey(r,t,i))}else if(n.segments.length===t.length){if(!xu(n.segments,t)||!Ey(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!QF(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!xu(n.segments,r)||!Ey(n.segments,r,i)||!n.children[Yt]?!1:e2(n.children[Yt],e,o,i)}}function Ey(n,e,t){return e.every((i,r)=>KF[t](n[r].parameters,i.parameters))}var Ta=class{root;queryParams;fragment;_queryParamMap;constructor(e=new An([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=bu(this.queryParams),this._queryParamMap}toString(){return LK.serialize(this)}},An=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return My(this)}},dc=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=bu(this.parameters),this._parameterMap}toString(){return n2(this)}};function NK(n,e){return xu(n,e)&&n.every((t,i)=>Sa(t.parameters,e[i].parameters))}function xu(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function FK(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Yt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Yt&&(t=t.concat(e(r,i)))}),t}var em=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:()=>new Eu,providedIn:"root"})}return n})(),Eu=class{parse(e){let t=new oT(e);return new Ta(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Vp(e.root,!0)}`,i=BK(e.queryParams),r=typeof e.fragment=="string"?`#${kK(e.fragment)}`:"";return`${t}${i}${r}`}},LK=new Eu;function My(n){return n.segments.map(e=>n2(e)).join("/")}function Vp(n,e){if(!n.hasChildren())return My(n);if(e){let t=n.children[Yt]?Vp(n.children[Yt],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Yt&&i.push(`${r}:${Vp(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=FK(n,(i,r)=>r===Yt?[Vp(n.children[Yt],!1)]:[`${r}:${Vp(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Yt]!=null?`${My(n)}/${t[0]}`:`${My(n)}/(${t.join("//")})`}}function t2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wy(n){return t2(n).replace(/%3B/gi,";")}function kK(n){return encodeURI(n)}function rT(n){return t2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sy(n){return decodeURIComponent(n)}function zF(n){return Sy(n.replace(/\+/g,"%20"))}function n2(n){return`${rT(n.path)}${UK(n.parameters)}`}function UK(n){return Object.entries(n).map(([e,t])=>`;${rT(e)}=${rT(t)}`).join("")}function BK(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${wy(t)}=${wy(r)}`).join("&"):`${wy(t)}=${wy(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var VK=/^[^\/()?;#]+/;function JC(n){let e=n.match(VK);return e?e[0]:""}var HK=/^[^\/()?;=#]+/;function zK(n){let e=n.match(HK);return e?e[0]:""}var jK=/^[^=?&#]+/;function GK(n){let e=n.match(jK);return e?e[0]:""}var WK=/^[^&#]+/;function $K(n){let e=n.match(WK);return e?e[0]:""}var oT=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new An([],{}):new An([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Yt]=new An(e,t)),i}parseSegment(){let e=JC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(e),new dc(Sy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=zK(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=JC(this.remaining);r&&(i=r,this.capture(i))}e[Sy(t)]=Sy(i)}parseQueryParam(e){let t=GK(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=$K(this.remaining);s&&(i=s,this.capture(i))}let r=zF(t),o=zF(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=JC(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ce(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Yt);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Yt]:new An([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ce(4011,!1)}};function i2(n){return n.segments.length>0?new An([],{[Yt]:n}):n}function r2(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=r2(r);if(i===Yt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new An(n.segments,e);return qK(t)}function qK(n){if(n.numberOfChildren===1&&n.children[Yt]){let e=n.children[Yt];return new An(n.segments.concat(e.segments),e.children)}return n}function fc(n){return n instanceof Ta}function o2(n,e,t=null,i=null){let r=s2(n);return a2(r,e,t,i)}function s2(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new An(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=i2(i);return e??r}function a2(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return QC(r,r,r,t,i);let o=XK(e);if(o.toRoot())return QC(r,r,new An([],{}),t,i);let s=YK(o,r,n),a=s.processChildren?zp(s.segmentGroup,s.index,o.commands):c2(s.segmentGroup,s.index,o.commands);return QC(r,s.segmentGroup,a,t,i)}function Ty(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gp(n){return typeof n=="object"&&n!=null&&n.outlets}function QC(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===e?s=t:s=l2(n,e,t);let a=i2(r2(s));return new Ta(a,o,r)}function l2(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=l2(o,e,t)}),new An(n.segments,i)}var Ay=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ty(i[0]))throw new Ce(4003,!1);let r=i.find(Gp);if(r&&r!==ZF(i))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ay(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Ay(t,e,i)}var gf=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function YK(n,e,t){if(n.isAbsolute)return new gf(e,!0,0);if(!t)return new gf(e,!1,NaN);if(t.parent===null)return new gf(t,!0,0);let i=Ty(n.commands[0])?0:1,r=t.segments.length-1+i;return ZK(t,r,n.numberOfDoubleDots)}function ZK(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ce(4005,!1);r=i.segments.length}return new gf(i,!1,r-o)}function KK(n){return Gp(n[0])?n[0].outlets:{[Yt]:n}}function c2(n,e,t){if(n??=new An([],{}),n.segments.length===0&&n.hasChildren())return zp(n,e,t);let i=JK(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new An(n.segments.slice(0,i.pathIndex),{});return o.children[Yt]=new An(n.segments.slice(i.pathIndex),n.children),zp(o,0,r)}else return i.match&&r.length===0?new An(n.segments,{}):i.match&&!n.hasChildren()?sT(n,e,t):i.match?zp(n,0,r):sT(n,e,t)}function zp(n,e,t){if(t.length===0)return new An(n.segments,{});{let i=KK(t),r={};if(Object.keys(i).some(o=>o!==Yt)&&n.children[Yt]&&n.numberOfChildren===1&&n.children[Yt].segments.length===0){let o=zp(n.children[Yt],e,t);return new An(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=c2(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new An(n.segments,r)}}function JK(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(Gp(a))break;let l=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!GF(l,u,s))return o;i+=2}else{if(!GF(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function sT(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Gp(o)){let l=QK(o.outlets);return new An(i,l)}if(r===0&&Ty(t[0])){let l=n.segments[e];i.push(new dc(l.path,jF(t[0]))),r++;continue}let s=Gp(o)?o.outlets[Yt]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&Ty(a)?(i.push(new dc(s,jF(a))),r+=2):(i.push(new dc(s,{})),r++)}return new An(i,{})}function QK(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=sT(new An([],{}),0,i))}),e}function jF(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function GF(n,e,t){return n==t.path&&Sa(e,t.parameters)}var Cy="imperative",er=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(er||{}),Do=class{id;url;constructor(e,t){this.id=e,this.url=t}},Mu=class extends Do{type=er.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Aa=class extends Do{urlAfterRedirects;type=er.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},so=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(so||{}),Wp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wp||{}),Ca=class extends Do{reason;code;type=er.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xl=class extends Do{reason;code;type=er.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},yf=class extends Do{error;target;type=er.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$p=class extends Do{urlAfterRedirects;state;type=er.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iy=class extends Do{urlAfterRedirects;state;type=er.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dy=class extends Do{urlAfterRedirects;state;shouldActivate;type=er.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ry=class extends Do{urlAfterRedirects;state;type=er.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Py=class extends Do{urlAfterRedirects;state;type=er.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Oy=class{route;type=er.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ny=class{route;type=er.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fy=class{snapshot;type=er.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ly=class{snapshot;type=er.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ky=class{snapshot;type=er.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uy=class{snapshot;type=er.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var qp=class{},_f=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function eJ(n,e){return n.providers&&!n._injector&&(n._injector=ry(n.providers,e,`Route: ${n.path}`)),n._injector??e}function zs(n){return n.outlet||Yt}function tJ(n,e){let t=n.filter(i=>zs(i)===e);return t.push(...n.filter(i=>zs(i)!==e)),t}function tm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var By=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return tm(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new bf(this.rootInjector)}},bf=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new By(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(ze(_r))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=aT(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=aT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=lT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return lT(e,this._root).map(t=>t.value)}};function aT(n,e){if(n===e.value)return e;for(let t of e.children){let i=aT(n,t);if(i)return i}return null}function lT(n,e){if(n===e.value)return[e];for(let t of e.children){let i=lT(n,t);if(i.length)return i.unshift(e),i}return[]}var Io=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function mf(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Xp=class extends Vy{snapshot;constructor(e,t){super(e),this.snapshot=t,gT(this,e)}toString(){return this.snapshot.toString()}};function u2(n){let e=nJ(n),t=new ti([new dc("",{})]),i=new ti({}),r=new ti({}),o=new ti({}),s=new ti(""),a=new ur(t,i,o,s,r,Yt,n,e.root);return a.snapshot=e.root,new Xp(new Io(a,[]),e)}function nJ(n){let e={},t={},i={},r="",o=new wu([],e,i,r,t,Yt,n,null,{});return new Yp("",new Io(o,[]))}var ur=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(lt(u=>u[Qp]))??Ct(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(lt(e=>bu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(lt(e=>bu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hy(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:Oe(Oe({},e.params),n.params),data:Oe(Oe({},e.data),n.data),resolve:Oe(Oe(Oe(Oe({},n.data),e.data),r?.data),n._resolvedData)}:i={params:Oe({},n.params),data:Oe({},n.data),resolve:Oe(Oe({},n.data),n._resolvedData??{})},r&&f2(r)&&(i.resolve[Qp]=r.title),i}var wu=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Qp]}constructor(e,t,i,r,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=bu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=bu(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Yp=class extends Vy{url;constructor(e,t){super(t),this.url=e,gT(this,t)}toString(){return d2(this._root)}};function gT(n,e){e.value._routerState=n,e.children.forEach(t=>gT(n,t))}function d2(n){let e=n.children.length>0?` { ${n.children.map(d2).join(", ")} } `:"";return`${n.value}${e}`}function eT(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sa(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Sa(e.params,t.params)||n.paramsSubject.next(t.params),DK(e.url,t.url)||n.urlSubject.next(t.url),Sa(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function cT(n,e){let t=Sa(n.params,e.params)&&NK(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||cT(n.parent,e.parent))}function f2(n){return typeof n.title=="string"||n.title===null}var h2=new Ie(""),nm=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Yt;activateEvents=new Pn;deactivateEvents=new Pn;attachEvents=new Pn;detachEvents=new Pn;routerOutletData=$3(void 0);parentContexts=K(bf);location=K(ba);changeDetector=K(Qi);inputBinder=K(Wy,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Ce(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new uT(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ut({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ar]})}return n})(),uT=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===ur?this.route:e===bf?this.childContexts:e===h2?this.outletData:this.parent.get(e,t)}},Wy=new Ie("");function iJ(n,e,t){let i=Zp(n,e._root,t?t._root:void 0);return new Xp(i,e)}function Zp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=rJ(n,e,t);return new Io(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Zp(n,a)),s}}let i=oJ(e.value),r=e.children.map(o=>Zp(n,o));return new Io(i,r)}}function rJ(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Zp(n,i,r);return Zp(n,i)})}function oJ(n){return new ur(new ti(n.url),new ti(n.params),new ti(n.queryParams),new ti(n.fragment),new ti(n.data),n.outlet,n.component,n)}var xf=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},p2="ngNavigationCancelingError";function zy(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=fc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=m2(!1,so.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function m2(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[p2]=!0,t.cancellationCode=e,t}function sJ(n){return g2(n)&&fc(n.url)}function g2(n){return!!n&&n[p2]}var aJ=(n,e,t,i)=>lt(r=>(new dT(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),dT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),eT(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=mf(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=mf(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=mf(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=mf(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Uy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ly(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(eT(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),eT(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},jy=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},vf=class{component;route;constructor(e,t){this.component=e,this.route=t}};function lJ(n,e,t){let i=n._root,r=e?e._root:null;return Hp(i,r,t,[i.value])}function cJ(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ef(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!V4(n)?n:e.get(n):i}function Hp(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=mf(e);return n.children.forEach(s=>{uJ(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>jp(a,t.getContext(s),r)),r}function uJ(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=dJ(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new jy(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Hp(n,e,a?a.children:null,i,r):Hp(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new vf(a.outlet.component,s))}else s&&jp(e,a,r),r.canActivateChecks.push(new jy(i)),o.component?Hp(n,null,a?a.children:null,i,r):Hp(n,null,t,i,r);return r}function dJ(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!xu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xu(n.url,e.url)||!Sa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cT(n,e)||!Sa(n.queryParams,e.queryParams);case"paramsChange":default:return!cT(n,e)}}function jp(n,e,t){let i=mf(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?jp(s,e.children.getContext(o),t):jp(s,null,t):jp(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new vf(e.outlet.component,r)):t.canDeactivateChecks.push(new vf(null,r)):t.canDeactivateChecks.push(new vf(null,r))}function im(n){return typeof n=="function"}function fJ(n){return typeof n=="boolean"}function hJ(n){return n&&im(n.canLoad)}function pJ(n){return n&&im(n.canActivate)}function mJ(n){return n&&im(n.canActivateChild)}function gJ(n){return n&&im(n.canDeactivate)}function vJ(n){return n&&im(n.canMatch)}function v2(n){return n instanceof Is||n?.name==="EmptyError"}var by=Symbol("INITIAL_VALUE");function wf(){return _i(n=>kd(n.map(e=>e.pipe(bo(1),Ps(by)))).pipe(lt(e=>{for(let t of e)if(t!==!0){if(t===by)return by;if(t===!1||yJ(t))return t}return!0}),Gn(e=>e!==by),bo(1)))}function yJ(n){return fc(n)||n instanceof xf}function _J(n,e){return Ai(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Ct(wt(Oe({},t),{guardsResult:!0})):xJ(s,i,r,n).pipe(Ai(a=>a&&fJ(a)?wJ(i,o,n,e):Ct(a)),lt(a=>wt(Oe({},t),{guardsResult:a})))})}function xJ(n,e,t,i){return Kn(n).pipe(Ai(r=>CJ(r.component,r.route,t,e,i)),il(r=>r!==!0,!0))}function wJ(n,e,t,i){return Kn(e).pipe(nc(r=>Qc(EJ(r.route.parent,i),bJ(r.route,i),SJ(n,r.path,t),MJ(n,r.route,t))),il(r=>r!==!0,!0))}function bJ(n,e){return n!==null&&e&&e(new ky(n)),Ct(!0)}function EJ(n,e){return n!==null&&e&&e(new Fy(n)),Ct(!0)}function MJ(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Ct(!0);let r=i.map(o=>Z0(()=>{let s=tm(e)??t,a=Ef(o,s),l=pJ(a)?a.canActivate(e,n):Mo(s,()=>a(e,n));return hc(l).pipe(il())}));return Ct(r).pipe(wf())}function SJ(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>cJ(s)).filter(s=>s!==null).map(s=>Z0(()=>{let a=s.guards.map(l=>{let u=tm(s.node)??t,f=Ef(l,u),h=mJ(f)?f.canActivateChild(i,n):Mo(u,()=>f(i,n));return hc(h).pipe(il())});return Ct(a).pipe(wf())}));return Ct(o).pipe(wf())}function CJ(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Ct(!0);let s=o.map(a=>{let l=tm(e)??r,u=Ef(a,l),f=gJ(u)?u.canDeactivate(n,e,t,i):Mo(l,()=>u(n,e,t,i));return hc(f).pipe(il())});return Ct(s).pipe(wf())}function TJ(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Ct(!0);let o=r.map(s=>{let a=Ef(s,n),l=hJ(a)?a.canLoad(e,t):Mo(n,()=>a(e,t));return hc(l)});return Ct(o).pipe(wf(),y2(i))}function y2(n){return Zh(hi(e=>{if(typeof e!="boolean")throw zy(n,e)}),lt(e=>e===!0))}function AJ(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Ct(!0);let o=r.map(s=>{let a=Ef(s,n),l=vJ(a)?a.canMatch(e,t):Mo(n,()=>a(e,t));return hc(l)});return Ct(o).pipe(wf(),y2(i))}var Kp=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Jp=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function pf(n){return tc(new Kp(n))}function IJ(n){return tc(new Ce(4e3,!1))}function DJ(n){return tc(m2(!1,so.GuardRejected))}var fT=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Ct(i);if(r.numberOfChildren>1||!r.children[Yt])return IJ(`${e.redirectTo}`);r=r.children[Yt]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let a=t,{queryParams:l,fragment:u,routeConfig:f,url:h,outlet:p,params:g,data:v,title:w}=r,y=Mo(o,()=>a({params:g,data:v,queryParams:l,fragment:u,routeConfig:f,url:h,outlet:p,title:w}));if(y instanceof Ta)throw new Jp(y);t=y}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Jp(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Ta(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new An(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ce(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},hT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RJ(n,e,t,i,r){let o=_2(n,e,t);return o.matched?(i=eJ(e,i),AJ(i,e,t,r).pipe(lt(s=>s===!0?o:Oe({},hT)))):Ct(o)}function _2(n,e,t){if(e.path==="**")return PJ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Oe({},hT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||XF)(t,n,e);if(!r)return Oe({},hT);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?Oe(Oe({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function PJ(n){return{matched:!0,parameters:n.length>0?ZF(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function WF(n,e,t,i){return t.length>0&&FJ(n,t,i)?{segmentGroup:new An(e,NJ(i,new An(t,n.children))),slicedSegments:[]}:t.length===0&&LJ(n,t,i)?{segmentGroup:new An(n.segments,OJ(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new An(n.segments,n.children),slicedSegments:t}}function OJ(n,e,t,i){let r={};for(let o of t)if($y(n,e,o)&&!i[zs(o)]){let s=new An([],{});r[zs(o)]=s}return Oe(Oe({},i),r)}function NJ(n,e){let t={};t[Yt]=e;for(let i of n)if(i.path===""&&zs(i)!==Yt){let r=new An([],{});t[zs(i)]=r}return t}function FJ(n,e,t){return t.some(i=>$y(n,e,i)&&zs(i)!==Yt)}function LJ(n,e,t){return t.some(i=>$y(n,e,i))}function $y(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function kJ(n,e,t){return e.length===0&&!n.children[t]}var pT=class{};function UJ(n,e,t,i,r,o,s="emptyOnly"){return new mT(n,e,t,i,r,s,o).recognize()}var BJ=31,mT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new fT(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ce(4002,`'${e.segmentGroup}'`)}recognize(){let e=WF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(lt(({children:t,rootSnapshot:i})=>{let r=new Io(i,t),o=new Yp("",r),s=o2(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new wu([],Object.freeze({}),Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Yt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Yt,t).pipe(lt(i=>({children:i,rootSnapshot:t})),Rs(i=>{if(i instanceof Jp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Kp?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(lt(s=>s instanceof Io?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Kn(o).pipe(nc(s=>{let a=i.children[s],l=tJ(t,s);return this.processSegmentGroup(e,l,a,s,r)}),YE((s,a)=>(s.push(...a),s)),nl(null),XE(),Ai(s=>{if(s===null)return pf(i);let a=x2(s);return VJ(a),Ct(a)}))}processSegment(e,t,i,r,o,s,a){return Kn(t).pipe(nc(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,o,s,a).pipe(Rs(u=>{if(u instanceof Kp)return Ct(null);throw u}))),il(l=>!!l),Rs(l=>{if(v2(l))return kJ(i,r,o)?Ct(new pT):pf(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,l){return zs(i)!==s&&(s===Yt||!$y(r,o,i))?pf(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,l):pf(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:h,remainingSegments:p}=_2(t,r,o);if(!l)return pf(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>BJ&&(this.allowRedirects=!1));let g=new wu(o,u,Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,$F(r),zs(r),r.component??r._loadedComponent??null,r,qF(r)),v=Hy(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(v.params),g.data=Object.freeze(v.data);let w=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(r,w).pipe(Ai(y=>this.processSegment(e,i,t,y.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=RJ(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(_i(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(_i(({routes:u})=>{let f=i._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=l,v=new wu(p,h,Object.freeze(Oe({},this.urlTree.queryParams)),this.urlTree.fragment,$F(i),zs(i),i.component??i._loadedComponent??null,i,qF(i)),w=Hy(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);let{segmentGroup:y,slicedSegments:_}=WF(t,p,g,u);if(_.length===0&&y.hasChildren())return this.processChildren(f,u,y,v).pipe(lt(E=>new Io(v,E)));if(u.length===0&&_.length===0)return Ct(new Io(v,[]));let T=zs(i)===o;return this.processSegment(f,u,y,_,T?Yt:o,!0,v).pipe(lt(E=>new Io(v,E instanceof Io?[E]:[])))}))):pf(t)))}getChildConfig(e,t,i){return t.children?Ct({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Ct({routes:t._loadedRoutes,injector:t._loadedInjector}):TJ(e,t,i,this.urlSerializer).pipe(Ai(r=>r?this.configLoader.loadChildren(e,t).pipe(hi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):DJ(t))):Ct({routes:[],injector:e})}};function VJ(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}function HJ(n){let e=n.value.routeConfig;return e&&e.path===""}function x2(n){let e=[],t=new Set;for(let i of n){if(!HJ(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=x2(i.children);e.push(new Io(i.value,r))}return e.filter(i=>!t.has(i))}function $F(n){return n.data||{}}function qF(n){return n.resolve||{}}function zJ(n,e,t,i,r,o){return Ai(s=>UJ(n,e,t,i,s.extractedUrl,r,o).pipe(lt(({state:a,tree:l})=>wt(Oe({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function jJ(n,e){return Ai(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ct(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of w2(l))s.add(u);let a=0;return Kn(s).pipe(nc(l=>o.has(l)?GJ(l,i,n,e):(l.data=Hy(l,l.parent,n).resolve,Ct(void 0))),hi(()=>a++),Ud(1),Ai(l=>a===s.size?Ct(t):yi))})}function w2(n){let e=n.children.map(t=>w2(t)).flat();return[n,...e]}function GJ(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!f2(r)&&(o[Qp]=r.title),WJ(o,n,e,i).pipe(lt(s=>(n._resolvedData=s,n.data=Hy(n,n.parent,t).resolve,null)))}function WJ(n,e,t,i){let r=iT(n);if(r.length===0)return Ct({});let o={};return Kn(r).pipe(Ai(s=>$J(n[s],e,t,i).pipe(il(),hi(a=>{if(a instanceof xf)throw zy(new Eu,a);o[s]=a}))),Ud(1),lt(()=>o),Rs(s=>v2(s)?yi:tc(s)))}function $J(n,e,t,i){let r=tm(e)??i,o=Ef(n,r),s=o.resolve?o.resolve(e,t):Mo(r,()=>o(e,t));return hc(s)}function tT(n){return _i(e=>{let t=n(e);return t?Kn(t).pipe(lt(()=>e)):Ct(e)})}var vT=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Yt);return i}getResolvedTitleForRoute(t){return t.data[Qp]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:()=>K(b2),providedIn:"root"})}return n})(),b2=(()=>{class n extends vT{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(ze(FF))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rm=new Ie("",{providedIn:"root",factory:()=>({})}),yT=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=vn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&we(0,"router-outlet")},dependencies:[nm],encapsulation:2})}return n})();function _T(n){let e=n.children&&n.children.map(_T),t=e?wt(Oe({},n),{children:e}):Oe({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=yT),t}var om=new Ie(""),E2=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=K(QN);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=hc(t.loadComponent()).pipe(lt(S2),hi(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ic(()=>{this.componentLoaders.delete(t)})),r=new Dd(i,()=>new Fn).pipe(Id());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=M2(i,this.compiler,t,this.onLoadEndListener).pipe(ic(()=>{this.childrenLoaders.delete(i)})),s=new Dd(o,()=>new Fn).pipe(Id());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function M2(n,e,t,i){return hc(n.loadChildren()).pipe(lt(S2),Ai(r=>r instanceof yC||Array.isArray(r)?Ct(r):Kn(e.compileModuleAsync(r))),lt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(om,[],{optional:!0,self:!0}).flat()),{routes:s.map(_T),injector:o}}))}function qJ(n){return n&&typeof n=="object"&&"default"in n}function S2(n){return qJ(n)?n.default:n}var qy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:()=>K(XJ),providedIn:"root"})}return n})(),XJ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C2=new Ie("");var T2=new Ie(""),A2=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Fn;transitionAbortSubject=new Fn;configLoader=K(E2);environmentInjector=K(_r);destroyRef=K(dl);urlSerializer=K(em);rootContexts=K(bf);location=K(oo);inputBindingEnabled=K(Wy,{optional:!0})!==null;titleStrategy=K(vT);options=K(rm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=K(qy);createViewTransition=K(C2,{optional:!0});navigationErrorHandler=K(T2,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ct(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new Oy(r)),i=r=>this.events.next(new Ny(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(wt(Oe({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(t){return this.transitions=new ti(null),this.transitions.pipe(Gn(i=>i!==null),_i(i=>{let r=!1,o=!1;return Ct(i).pipe(_i(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",so.SupersededByNewNavigation),yi;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?wt(Oe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload"){let u="";return this.events.next(new xl(s.id,this.urlSerializer.serialize(s.rawUrl),u,Wp.IgnoredSameUrlNavigation)),s.resolve(!1),yi}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Ct(s).pipe(_i(u=>(this.events.next(new Mu(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?yi:Promise.resolve(u))),zJ(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),hi(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=wt(Oe({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let f=new $p(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:f,source:h,restoredState:p,extras:g}=s,v=new Mu(u,this.urlSerializer.serialize(f),h,p);this.events.next(v);let w=u2(this.rootComponentType).snapshot;return this.currentTransition=i=wt(Oe({},s),{targetSnapshot:w,urlAfterRedirects:f,extras:wt(Oe({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Ct(i)}else{let u="";return this.events.next(new xl(s.id,this.urlSerializer.serialize(s.extractedUrl),u,Wp.IgnoredByUrlHandlingStrategy)),s.resolve(!1),yi}}),hi(s=>{let a=new Iy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),lt(s=>(this.currentTransition=i=wt(Oe({},s),{guards:lJ(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),_J(this.environmentInjector,s=>this.events.next(s)),hi(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw zy(this.urlSerializer,s.guardsResult);let a=new Dy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Gn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",so.GuardRejected),!1)),tT(s=>{if(s.guards.canActivateChecks.length!==0)return Ct(s).pipe(hi(a=>{let l=new Ry(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),_i(a=>{let l=!1;return Ct(a).pipe(jJ(this.paramsInheritanceStrategy,this.environmentInjector),hi({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",so.NoDataFromResolver)}}))}),hi(a=>{let l=new Py(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),tT(s=>{let a=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(hi(f=>{l.component=f}),lt(()=>{})));for(let f of l.children)u.push(...a(f));return u};return kd(a(s.targetSnapshot.root)).pipe(nl(null),bo(1))}),tT(()=>this.afterPreactivation()),_i(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?Kn(l).pipe(lt(()=>i)):Ct(i)}),lt(s=>{let a=iJ(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=wt(Oe({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),hi(()=>{this.events.next(new qp)}),aJ(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),bo(1),hi({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Aa(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),Zo(this.transitionAbortSubject.pipe(hi(s=>{throw s}))),ic(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",so.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Rs(s=>{if(this.destroyed)return i.resolve(!1),yi;if(o=!0,g2(s))this.events.next(new Ca(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),sJ(s)?this.events.next(new _f(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new yf(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let l=Mo(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof xf){let{message:u,cancellationCode:f}=zy(this.urlSerializer,l);this.events.next(new Ca(i.id,this.urlSerializer.serialize(i.extractedUrl),u,f)),this.events.next(new _f(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return yi}))}))}cancelNavigationTransition(t,i,r){let o=new Ca(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YJ(n){return n!==Cy}var I2=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:()=>K(ZJ),providedIn:"root"})}return n})(),Gy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},ZJ=(()=>{class n extends Gy{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})();static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),D2=(()=>{class n{urlSerializer=K(em);options=K(rm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=K(oo);urlHandlingStrategy=K(qy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ta;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof Ta?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=u2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:()=>K(KJ),providedIn:"root"})}return n})(),KJ=(()=>{class n extends D2{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Mu?this.updateStateMemento():t instanceof xl?this.commitTransition(i):t instanceof $p?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof qp?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Ca&&(t.code===so.GuardRejected||t.code===so.NoDataFromResolver)?this.restoreHistory(i):t instanceof yf?this.restoreHistory(i,!0):t instanceof Aa&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=Oe(Oe({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",l)}else{let a=Oe(Oe({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})();static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xT(n,e){n.events.pipe(Gn(t=>t instanceof Aa||t instanceof Ca||t instanceof yf||t instanceof xl),lt(t=>t instanceof Aa||t instanceof xl?0:(t instanceof Ca?t.code===so.Redirect||t.code===so.SupersededByNewNavigation:!1)?2:1),Gn(t=>t!==2),bo(1)).subscribe(()=>{e()})}var JJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=K(xC);stateManager=K(D2);options=K(rm,{optional:!0})||{};pendingTasks=K(fl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=K(A2);urlSerializer=K(em);location=K(oo);urlHandlingStrategy=K(qy);_events=new Fn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=K(I2);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=K(om,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!K(Wy,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new vi;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ca&&i.code!==so.Redirect&&i.code!==so.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Aa)this.navigated=!0;else if(i instanceof _f){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=Oe({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||YJ(r.source)},s);this.scheduleNavigation(a,Cy,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}tQ(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cy,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=Oe({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_T),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=Oe(Oe({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let h;try{let p=r?r.snapshot:this.routerState.snapshot.root;h=s2(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return a2(h,t,f,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=fc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Cy,null,i)}navigate(t,i={skipLocationChange:!1}){return eQ(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=Oe({},JJ):i===!1?r=Oe({},QJ):r=i,fc(t))return HF(this.currentUrlTree,t,r);let o=this.parseUrl(t);return HF(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((h,p)=>{a=h,l=p});let f=this.pendingTasks.add();return xT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eQ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ce(4008,!1)}function tQ(n){return!(n instanceof qp)&&!(n instanceof _f)}var rs=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Fn;constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Aa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(fc(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:TO(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:fc(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(de(dr),de(ur),jS("tabindex"),de(wr),de(nn),de(lf))};static \u0275dir=Ut({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&Re("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&To("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",af],skipLocationChange:[2,"skipLocationChange","skipLocationChange",af],replaceUrl:[2,"replaceUrl","replaceUrl",af],routerLink:"routerLink"},features:[ar]})}return n})();var iQ=new Ie("");function wT(n,...e){return sc([{provide:om,multi:!0,useValue:n},[],{provide:ur,useFactory:rQ,deps:[dr]},{provide:sf,multi:!0,useFactory:oQ},e.map(t=>t.\u0275providers)])}function rQ(n){return n.routerState.root}function oQ(){let n=K(Jo);return e=>{let t=n.get(Us);if(e!==t.components[0])return;let i=n.get(dr),r=n.get(sQ);n.get(aQ)===1&&i.initialNavigation(),n.get(lQ,null,ln.Optional)?.setUpPreloading(),n.get(iQ,null,ln.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var sQ=new Ie("",{factory:()=>new Fn}),aQ=new Ie("",{providedIn:"root",factory:()=>1});var lQ=new Ie("");function sm(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&TS(sm);let i=t?e?.injector?.get(dl)??K(dl):null,r=cQ(e?.equal),o;e?.requireSync?o=Qo({kind:0},{equal:r}):o=Qo({kind:1,value:e?.initialValue},{equal:r});let s=n.subscribe({next:a=>o.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;o.set({kind:2,error:a})}});if(e?.requireSync&&o().kind===0)throw new Ce(601,!1);return i?.onDestroy(s.unsubscribe.bind(s)),ml(()=>{let a=o();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new Ce(601,!1)}},{equal:e?.equal})}function cQ(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var mbe=parseInt(JN.major,10)>=19?{}:{allowSignalWrites:!0},P2={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},O2=new hp;var gbe=wt(Oe({},P2),{toJSON:()=>P2}),am=()=>!1,bT=()=>!0;var z2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(de(wr),de(nn))};static \u0275dir=Ut({type:n})}return n})(),s_=(()=>{class n extends z2{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})();static \u0275dir=Ut({type:n,features:[Fi]})}return n})(),Cf=new Ie("");var uQ={provide:Cf,useExisting:no(()=>os),multi:!0};function dQ(){let n=is()?is().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var fQ=new Ie(""),os=(()=>{class n extends z2{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!dQ())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(de(wr),de(nn),de(fQ,8))};static \u0275dir=Ut({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Re("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[xi([uQ]),Fi]})}return n})();function MT(n){return n==null||ST(n)===0}function ST(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Tu=new Ie(""),a_=new Ie(""),hQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Et=class{static min(e){return j2(e)}static max(e){return G2(e)}static required(e){return pQ(e)}static requiredTrue(e){return mQ(e)}static email(e){return gQ(e)}static minLength(e){return vQ(e)}static maxLength(e){return W2(e)}static pattern(e){return yQ(e)}static nullValidator(e){return Yy()}static compose(e){return K2(e)}static composeAsync(e){return J2(e)}};function j2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function G2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function pQ(n){return MT(n.value)?{required:!0}:null}function mQ(n){return n.value===!0?null:{required:!0}}function gQ(n){return MT(n.value)||hQ.test(n.value)?null:{email:!0}}function vQ(n){return e=>{let t=e.value?.length??ST(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function W2(n){return e=>{let t=e.value?.length??ST(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function yQ(n){if(!n)return Yy;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(MT(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function Yy(n){return null}function $2(n){return n!=null}function q2(n){return lc(n)?Kn(n):n}function X2(n){let e={};return n.forEach(t=>{e=t!=null?Oe(Oe({},e),t):e}),Object.keys(e).length===0?null:e}function Y2(n,e){return e.map(t=>t(n))}function _Q(n){return!n.validate}function Z2(n){return n.map(e=>_Q(e)?e:t=>e.validate(t))}function K2(n){if(!n)return null;let e=n.filter($2);return e.length==0?null:function(t){return X2(Y2(t,e))}}function CT(n){return n!=null?K2(Z2(n)):null}function J2(n){if(!n)return null;let e=n.filter($2);return e.length==0?null:function(t){let i=Y2(t,e).map(q2);return $E(i).pipe(lt(X2))}}function TT(n){return n!=null?J2(Z2(n)):null}function N2(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Q2(n){return n._rawValidators}function eL(n){return n._rawAsyncValidators}function ET(n){return n?Array.isArray(n)?n:[n]:[]}function Zy(n,e){return Array.isArray(n)?n.includes(e):n===e}function F2(n,e){let t=ET(e);return ET(n).forEach(r=>{Zy(t,r)||t.push(r)}),t}function L2(n,e){return ET(e).filter(t=>!Zy(n,t))}var Ky=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},wl=class extends Ky{name;get formDirective(){return null}get path(){return null}},Cu=class extends Ky{_parent=null;name=null;valueAccessor=null},Jy=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},xQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Nbe=wt(Oe({},xQ),{"[class.ng-submitted]":"isSubmitted"}),Ia=(()=>{class n extends Jy{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(de(Cu,2))};static \u0275dir=Ut({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Sn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Fi]})}return n})(),Da=(()=>{class n extends Jy{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(de(wl,10))};static \u0275dir=Ut({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Sn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Fi]})}return n})();var lm="VALID",Xy="INVALID",Mf="PENDING",cm="DISABLED",pc=class{},Qy=class extends pc{value;source;constructor(e,t){super(),this.value=e,this.source=t}},dm=class extends pc{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},fm=class extends pc{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Sf=class extends pc{status;source;constructor(e,t){super(),this.status=e,this.source=t}},e_=class extends pc{source;constructor(e){super(),this.source=e}},t_=class extends pc{source;constructor(e){super(),this.source=e}};function tL(n){return(l_(n)?n.validators:n)||null}function wQ(n){return Array.isArray(n)?CT(n):n||null}function nL(n,e){return(l_(e)?e.asyncValidators:n)||null}function bQ(n){return Array.isArray(n)?TT(n):n||null}function l_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function EQ(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ce(1e3,"");if(!i[t])throw new Ce(1001,"")}function MQ(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Ce(1002,"")})}var n_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Lr(this.statusReactive)}set status(e){Lr(()=>this.statusReactive.set(e))}_status=ml(()=>this.statusReactive());statusReactive=Qo(void 0);get valid(){return this.status===lm}get invalid(){return this.status===Xy}get pending(){return this.status==Mf}get disabled(){return this.status===cm}get enabled(){return this.status!==cm}errors;get pristine(){return Lr(this.pristineReactive)}set pristine(e){Lr(()=>this.pristineReactive.set(e))}_pristine=ml(()=>this.pristineReactive());pristineReactive=Qo(!0);get dirty(){return!this.pristine}get touched(){return Lr(this.touchedReactive)}set touched(e){Lr(()=>this.touchedReactive.set(e))}_touched=ml(()=>this.touchedReactive());touchedReactive=Qo(!1);get untouched(){return!this.touched}_events=new Fn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(F2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(F2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(L2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(L2(e,this._rawAsyncValidators))}hasValidator(e){return Zy(this._rawValidators,e)}hasAsyncValidator(e){return Zy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(wt(Oe({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new fm(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new fm(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(wt(Oe({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new dm(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new dm(!0,i))}markAsPending(e={}){this.status=Mf;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sf(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(wt(Oe({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cm,this.errors=null,this._forEachChild(r=>{r.disable(wt(Oe({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qy(this.value,i)),this._events.next(new Sf(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(wt(Oe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=lm,this._forEachChild(i=>{i.enable(wt(Oe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(wt(Oe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lm||this.status===Mf)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qy(this.value,t)),this._events.next(new Sf(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(wt(Oe({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cm:lm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Mf,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=q2(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Sf(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Pn,this.statusChanges=new Pn}_calculateStatus(){return this._allControlsDisabled()?cm:this.errors?Xy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mf)?Mf:this._anyControlsHaveStatus(Xy)?Xy:lm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new dm(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new fm(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){l_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=wQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=bQ(this._rawAsyncValidators)}},ki=class extends n_{constructor(e,t,i){super(tL(t),nL(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){MQ(this,!0,e),Object.keys(e).forEach(i=>{EQ(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var hm=new Ie("",{providedIn:"root",factory:()=>c_}),c_="always";function iL(n,e){return[...e.path,n]}function i_(n,e,t=c_){AT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),CQ(n,e),AQ(n,e),TQ(n,e),SQ(n,e)}function k2(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),o_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function r_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function SQ(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function AT(n,e){let t=Q2(n);e.validator!==null?n.setValidators(N2(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=eL(n);e.asyncValidator!==null?n.setAsyncValidators(N2(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();r_(e._rawValidators,r),r_(e._rawAsyncValidators,r)}function o_(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=Q2(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=eL(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return r_(e._rawValidators,i),r_(e._rawAsyncValidators,i),t}function CQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&rL(n,e)})}function TQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&rL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function rL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function AQ(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function oL(n,e){n==null,AT(n,e)}function IQ(n,e){return o_(n,e)}function sL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function DQ(n){return Object.getPrototypeOf(n.constructor)===s_}function aL(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function lL(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===os?t=o:DQ(o)?i=o:r=o}),r||i||t||null}function RQ(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var PQ={provide:wl,useExisting:no(()=>IT)},um=Promise.resolve(),IT=(()=>{class n extends wl{callSetDisabledState;get submitted(){return Lr(this.submittedReactive)}_submitted=ml(()=>this.submittedReactive());submittedReactive=Qo(!1);_directives=new Set;form;ngSubmit=new Pn;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new ki({},CT(t),TT(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){um.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),i_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){um.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){um.then(()=>{let i=this._findContainer(t.path),r=new ki({});oL(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){um.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){um.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),aL(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new e_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new t_(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(de(Tu,10),de(a_,10),de(hm,8))};static \u0275dir=Ut({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&Re("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xi([PQ]),Fi]})}return n})();function U2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function B2(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var kn=class extends n_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(tL(t),nL(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),l_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(B2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){U2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){U2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){B2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OQ=n=>n instanceof kn;var NQ={provide:Cu,useExisting:no(()=>pm)},V2=Promise.resolve(),pm=(()=>{class n extends Cu{_changeDetectorRef;callSetDisabledState;control=new kn;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Pn;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=lL(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),sL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){i_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){V2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&af(i);V2.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?iL(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(de(wl,9),de(Tu,10),de(a_,10),de(Cf,10),de(Qi,8),de(hm,8))};static \u0275dir=Ut({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[xi([NQ]),Fi,ar]})}return n})();var Ra=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ut({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),FQ={provide:Cf,useExisting:no(()=>mm),multi:!0},mm=(()=>{class n extends s_{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})();static \u0275dir=Ut({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&Re("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[xi([FQ]),Fi]})}return n})();var cL=new Ie("");var LQ={provide:wl,useExisting:no(()=>js)},js=(()=>{class n extends wl{callSetDisabledState;get submitted(){return Lr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ml(()=>this._submittedReactive());_submittedReactive=Qo(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Pn;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(o_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return i_(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){k2(t.control||null,t,!1),RQ(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),aL(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new e_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new t_(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(k2(i||null,t),OQ(r)&&(i_(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);oL(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&IQ(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){AT(this.form,this),this._oldForm&&o_(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(de(Tu,10),de(a_,10),de(hm,8))};static \u0275dir=Ut({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Re("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xi([LQ]),Fi,ar]})}return n})();var kQ={provide:Cu,useExisting:no(()=>Gs)},Gs=(()=>{class n extends Cu{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Pn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=lL(this,o)}ngOnChanges(t){this._added||this._setUpControl(),sL(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return iL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(de(wl,13),de(Tu,10),de(a_,10),de(Cf,10),de(cL,8))};static \u0275dir=Ut({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[xi([kQ]),Fi,ar]})}return n})();var UQ={provide:Cf,useExisting:no(()=>u_),multi:!0};function uL(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function BQ(n){return n.split(":")[0]}var u_=(()=>{class n extends s_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=uL(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=BQ(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})();static \u0275dir=Ut({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&Re("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[xi([UQ]),Fi]})}return n})(),dL=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(uL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(de(nn),de(wr),de(u_,9))};static \u0275dir=Ut({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),VQ={provide:Cf,useExisting:no(()=>fL),multi:!0};function H2(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function HQ(n){return n.split(":")[0]}var fL=(()=>{class n extends s_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);r.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=HQ(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})();static \u0275dir=Ut({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&Re("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[xi([VQ]),Fi]})}return n})(),hL=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(H2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(H2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(de(nn),de(wr),de(fL,9))};static \u0275dir=Ut({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function zQ(n){return typeof n=="number"?n:parseInt(n,10)}function pL(n){return typeof n=="number"?n:parseFloat(n)}var DT=(()=>{class n{_validator=Yy;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Yy,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ut({type:n,features:[ar]})}return n})(),jQ={provide:Tu,useExisting:no(()=>RT),multi:!0},RT=(()=>{class n extends DT{max;inputName="max";normalizeInput=t=>pL(t);createValidator=t=>G2(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})();static \u0275dir=Ut({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&To("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[xi([jQ]),Fi]})}return n})(),GQ={provide:Tu,useExisting:no(()=>gm),multi:!0},gm=(()=>{class n extends DT{min;inputName="min";normalizeInput=t=>pL(t);createValidator=t=>j2(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})();static \u0275dir=Ut({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&To("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[xi([GQ]),Fi]})}return n})();var WQ={provide:Tu,useExisting:no(()=>PT),multi:!0},PT=(()=>{class n extends DT{maxlength;inputName="maxlength";normalizeInput=t=>zQ(t);createValidator=t=>W2(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ni(n)))(r||n)}})();static \u0275dir=Ut({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&To("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[xi([WQ]),Fi]})}return n})();var mL=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=Dr({})}return n})();var d_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hm,useValue:t.callSetDisabledState??c_}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=Dr({imports:[mL]})}return n})(),ss=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:cL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:hm,useValue:t.callSetDisabledState??c_}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Or({type:n});static \u0275inj=Dr({imports:[mL]})}return n})();function OT(n,e,t){return Math.min(t,Math.max(e,n))}function h_(n){return n===void 0?new Ie(""):fr(()=>n)}function fr(n){return n?new Ie("",{factory:n}):new Ie("")}function vL(n){return n!=null}function $Q(n){let e=[],t=!1,i;return function(...o){return t&&e.length===o.length&&o.every((a,l)=>a===e[l])||(e=o,i=n.apply(this,o),t=!0),i}}function gL(n,e,t=!0){return function(){let r=n.call(this);return Object.defineProperty(this,e,{enumerable:t,value:r}),r}}function yL(n,e,t){if(typeof n=="function"){let l=e;if(l.kind==="getter")return gL(n,l.name);if(l.kind==="method")return $Q(n);throw new f_}let{get:i,enumerable:r,value:o}=t,s=e;if(i)return{configurable:!0,enumerable:r,get:gL(i,s,r)};if(typeof o!="function")throw new f_;let a=o;return{configurable:!0,enumerable:r,get(){let l=[],u=!1,f,h=(...p)=>(u&&l.length===p.length&&p.every((v,w)=>v===l[w])||(l=p,f=a.apply(this,p),u=!0),f);return Object.defineProperty(this,s,{configurable:!0,value:h}),h}}}var f_=class extends Error{constructor(){super("")}};var Vbe=fr(()=>{let n=new Map;return K(dl).onDestroy(()=>n.forEach(e=>e.destroy())),n});function ii(n,e,t={}){return Ds(n,e,t)}function _L(n,e=Boolean){return Zh(_i(t=>e(t)?n(t):yi))}var Xbe={now:Qh.now.bind(Qh),schedule(n,e,t){return Qh.schedule(function(i){return Lr(()=>n.call(this,i))},e,t)}};var NT=class{constructor(e,t=tl){this.zoneConditionFn=e,this.scheduler=t}now(){return this.scheduler.now()}schedule(...e){return this.zoneConditionFn(()=>this.scheduler.schedule(...e))}};function p_(n=K(Wn),e=tl){return new NT(n.runOutsideAngular.bind(n),e)}var jt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(jt||{}),as="*";function FT(n,e){return{type:jt.Trigger,name:n,definitions:e,options:{}}}function m_(n,e=null){return{type:jt.Animate,styles:e,timings:n}}function xL(n,e=null){return{type:jt.Sequence,steps:n,options:e}}function mc(n){return{type:jt.Style,styles:n,offset:null}}function LT(n,e,t){return{type:jt.State,name:n,styles:e,options:t}}function g_(n,e,t=null){return{type:jt.Transition,expr:n,animation:e,options:t}}var Pa=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Au=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Tf="!";var ls=new Ie("[WA_WINDOW]",{factory:()=>{let{defaultView:n}=K(fn);if(!n)throw new Error("Window is not available");return n}}),Ro=ls,cEe=new Ie("[WA_ANIMATION_FRAME]",{factory:()=>{let{requestAnimationFrame:n,cancelAnimationFrame:e}=K(Ro);return new Ft(i=>{let r=NaN,o=s=>{i.next(s),r=n(o)};return r=n(o),()=>{e(r)}}).pipe(pa())}});var uEe=new Ie("[WA_CACHES]",{factory:()=>K(Ro).caches});var dEe=new Ie("[WA_CRYPTO]",{factory:()=>K(Ro).crypto});var fEe=new Ie("[WA_CSS]",{factory:()=>K(Ro).CSS??{escape:n=>n,supports:()=>!1}});var hEe=new Ie("[WA_HISTORY]",{factory:()=>K(Ro).history});var pEe=new Ie("[WA_LOCAL_STORAGE]",{factory:()=>K(Ro).localStorage});var mEe=new Ie("[WA_LOCATION]",{factory:()=>K(Ro).location});var Af=new Ie("[WA_NAVIGATOR]",{factory:()=>K(Ro).navigator}),wL=Af,gEe=new Ie("[WA_MEDIA_DEVICES]",{factory:()=>K(wL).mediaDevices});var vEe=new Ie("[WA_NETWORK_INFORMATION]",{factory:()=>K(Af).connection||null});var bL=new Ie("[WA_PAGE_VISIBILITY]",{factory:()=>{let n=K(fn);return Ds(n,"visibilitychange").pipe(Ps(0),lt(()=>n.visibilityState!=="hidden"),ep(),np({refCount:!1,bufferSize:1}))}});var yEe=new Ie("[WA_PERFORMANCE]",{factory:()=>K(Ro).performance});var _Ee=new Ie("[WA_SCREEN]",{factory:()=>K(Ro).screen});var xEe=new Ie("[WA_SESSION_STORAGE]",{factory:()=>K(Ro).sessionStorage});var wEe=new Ie("[WA_SPEECH_RECOGNITION]: [SPEECH_RECOGNITION]",{factory:()=>{let n=K(Ro);return n.speechRecognition||n.webkitSpeechRecognition||null}});var bEe=new Ie("[WA_SPEECH_SYNTHESIS]",{factory:()=>K(Ro).speechSynthesis});var If=new Ie("[WA_USER_AGENT]",{factory:()=>K(wL).userAgent});var qQ=/^((?!chrome|android).)*safari/i,XQ=/ipad|iphone|ipod/i;function kT({userAgent:n,maxTouchPoints:e}){return XQ.test(n)||qQ.test(n)&&e>1}var YQ=new Ie("",{factory:()=>kT(K(Af))}),ZQ=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/,KQ=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/,JQ=new Ie("",{factory:()=>ZQ.test(K(If).toLowerCase())||KQ.test(K(If).slice(0,4).toLowerCase())}),AEe=new Ie("",{factory:()=>K(JQ)&&!K(YQ)});var IEe=new Ie("",{factory:()=>{let n=K(ls).matchMedia("(pointer: coarse)");return sm(Ds(n,"change").pipe(lt(()=>n.matches)),{initialValue:n.matches})}}),DEe=new Ie("",{factory:()=>!!K(ls)?.webkitConvertPointFromNodeToPage});function EL(n){let e=n?.ownerDocument.defaultView;return!!n&&!!e&&n instanceof e.HTMLElement}function v_(n){return n.composedPath()[0]}function UT(n){return"getRootNode"in n&&n.isConnected?n.getRootNode():n.ownerDocument}function gc(){return K(nn).nativeElement}function QQ(n){if(n.hasAttribute("disabled")||n.getAttribute("tabIndex")==="-1")return!1;if(EL(n)&&n.isContentEditable||n.getAttribute("tabIndex")==="0")return!0;switch(n.tagName){case"A":case"LINK":return n.hasAttribute("href");case"AUDIO":case"VIDEO":return n.hasAttribute("controls");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;case"INPUT":return n.getAttribute("type")!=="hidden";default:return!1}}function ML(n){return!n.hasAttribute("disabled")&&(n.getAttribute("tabIndex")==="-1"||QQ(n))}function SL(n){return new Ce(3e3,!1)}function eee(){return new Ce(3100,!1)}function tee(){return new Ce(3101,!1)}function nee(n){return new Ce(3001,!1)}function iee(n){return new Ce(3003,!1)}function ree(n){return new Ce(3004,!1)}function TL(n,e){return new Ce(3005,!1)}function AL(){return new Ce(3006,!1)}function IL(){return new Ce(3007,!1)}function DL(n,e){return new Ce(3008,!1)}function RL(n){return new Ce(3002,!1)}function PL(n,e,t,i,r){return new Ce(3010,!1)}function OL(){return new Ce(3011,!1)}function NL(){return new Ce(3012,!1)}function FL(){return new Ce(3200,!1)}function LL(){return new Ce(3202,!1)}function kL(){return new Ce(3013,!1)}function UL(n){return new Ce(3014,!1)}function BL(n){return new Ce(3015,!1)}function VL(n){return new Ce(3016,!1)}function HL(n,e){return new Ce(3404,!1)}function oee(n){return new Ce(3502,!1)}function zL(n){return new Ce(3503,!1)}function jL(){return new Ce(3300,!1)}function GL(n){return new Ce(3504,!1)}function WL(n){return new Ce(3301,!1)}function $L(n,e){return new Ce(3302,!1)}function qL(n){return new Ce(3303,!1)}function XL(n,e){return new Ce(3400,!1)}function YL(n){return new Ce(3401,!1)}function ZL(n){return new Ce(3402,!1)}function KL(n,e){return new Ce(3505,!1)}function bl(n){switch(n.length){case 0:return new Pa;case 1:return n[0];default:return new Au(n)}}function zT(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let u=l.get("offset"),f=u==s,h=f&&a||new Map;l.forEach((p,g)=>{let v=g,w=p;if(g!=="offset")switch(v=n.normalizePropertyName(v,r),w){case Tf:w=t.get(g);break;case as:w=i.get(g);break;default:w=n.normalizeStyleValue(g,v,w,r);break}h.set(v,w)}),f||o.push(h),a=h,s=u}),r.length)throw oee(r);return o}function y_(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&BT(t,"start",n)));break;case"done":n.onDone(()=>i(t&&BT(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&BT(t,"destroy",n)));break}}function BT(n,e,t){let i=t.totalTime,r=!!t.disabled,o=__(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function __(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function ao(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function jT(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var see=typeof document>"u"?null:document.documentElement;function x_(n){let e=n.parentNode||n.host||null;return e===see?null:e}function aee(n){return n.substring(1,6)=="ebkit"}var Iu=null,CL=!1;function JL(n){Iu||(Iu=lee()||{},CL=Iu.style?"WebkitAppearance"in Iu.style:!1);let e=!0;return Iu.style&&!aee(n)&&(e=n in Iu.style,!e&&CL&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Iu.style)),e}function lee(){return typeof document<"u"?document.body:null}function GT(n,e){for(;e;){if(e===n)return!0;e=x_(e)}return!1}function WT(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var cee=1e3,$T="{{",uee="}}",qT="ng-enter",w_="ng-leave",ym="ng-trigger",_m=".ng-trigger",XT="ng-animating",b_=".ng-animating";function Oa(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:VT(parseFloat(e[1]),e[2])}function VT(n,e){switch(e){case"s":return n*cee;default:return n}}function xm(n,e,t){return n.hasOwnProperty("duration")?n:dee(n,e,t)}function dee(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(SL(n)),{duration:0,delay:0,easing:""};r=VT(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=VT(parseFloat(l),a[4]));let u=a[5];u&&(s=u)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(eee()),a=!0),o<0&&(e.push(tee()),a=!0),a&&e.splice(l,0,SL(n))}return{duration:r,delay:o,easing:s}}function QL(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ws(n,e,t){e.forEach((i,r)=>{let o=E_(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function vc(n,e){e.forEach((t,i)=>{let r=E_(i);n.style[r]=""})}function Df(n){return Array.isArray(n)?n.length==1?n[0]:xL(n):n}function ek(n,e,t){let i=e.params||{},r=YT(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(nee(o))})}var HT=new RegExp(`${$T}\\s*(.+?)\\s*${uee}`,"g");function YT(n){let e=[];if(typeof n=="string"){let t;for(;t=HT.exec(n);)e.push(t[1]);HT.lastIndex=0}return e}function Rf(n,e,t){let i=`${n}`,r=i.replace(HT,(o,s)=>{let a=e[s];return a==null&&(t.push(iee(s)),a=""),a.toString()});return r==i?n:r}var fee=/-+([a-z0-9])/g;function E_(n){return n.replace(fee,(...e)=>e[1].toUpperCase())}function tk(n,e){return n===0||e===0}function nk(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,M_(n,a)))}}return e}function lo(n,e,t){switch(e.type){case jt.Trigger:return n.visitTrigger(e,t);case jt.State:return n.visitState(e,t);case jt.Transition:return n.visitTransition(e,t);case jt.Sequence:return n.visitSequence(e,t);case jt.Group:return n.visitGroup(e,t);case jt.Animate:return n.visitAnimate(e,t);case jt.Keyframes:return n.visitKeyframes(e,t);case jt.Style:return n.visitStyle(e,t);case jt.Reference:return n.visitReference(e,t);case jt.AnimateChild:return n.visitAnimateChild(e,t);case jt.AnimateRef:return n.visitAnimateRef(e,t);case jt.Query:return n.visitQuery(e,t);case jt.Stagger:return n.visitStagger(e,t);default:throw ree(e.type)}}function M_(n,e){return window.getComputedStyle(n)[e]}var f1=(()=>{class n{validateStyleProperty(t){return JL(t)}containsElement(t,i){return GT(t,i)}getParentElement(t){return x_(t)}query(t,i,r){return WT(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new Pa(r,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})(),Ru=class{static NOOP=new f1},Pu=class{};var hee=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),I_=class extends Pu{normalizePropertyName(e,t){return E_(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(hee.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(TL(e,i))}return s+o}};var D_="*";function pee(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>mee(i,t,e)):t.push(n),t}function mee(n,e,t){if(n[0]==":"){let l=gee(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(BL(n)),e;let r=i[1],o=i[2],s=i[3];e.push(ik(r,s));let a=r==D_&&s==D_;o[0]=="<"&&!a&&e.push(ik(s,r))}function gee(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(VL(n)),"* => *"}}var S_=new Set(["true","1"]),C_=new Set(["false","0"]);function ik(n,e){let t=S_.has(n)||C_.has(n),i=S_.has(e)||C_.has(e);return(r,o)=>{let s=n==D_||n==r,a=e==D_||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?S_.has(n):C_.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?S_.has(e):C_.has(e)),s&&a}}var hk=":self",vee=new RegExp(`s*${hk}s*,?`,"g");function pk(n,e,t,i){return new t1(n).build(e,t,i)}var rk="",t1=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new n1(t);return this._resetContextStyleTimingState(r),lo(this,Df(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=rk,e.collectedStyles=new Map,e.collectedStyles.set(rk,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(AL()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==jt.State){let l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(f=>{l.name=f,o.push(this.visitState(l,t))}),l.name=u}else if(a.type==jt.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(IL())}),{type:jt.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{YT(l).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(DL(e.name,[...o.values()]))}return{type:jt.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=lo(this,Df(e.animation),t),r=pee(e.expr,t.errors);return{type:jt.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Du(e.options)}}visitSequence(e,t){return{type:jt.Sequence,steps:e.steps.map(i=>lo(this,i,t)),options:Du(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=lo(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:jt.Group,steps:o,options:Du(e.options)}}visitAnimate(e,t){let i=wee(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:mc({});if(o.type==jt.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};i.easing&&(u.easing=i.easing),s=mc(u)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:jt.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===as?i.push(a):t.errors.push(RL(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf($T)>=0){o=!0;break}}}),{type:jt.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(l),h=!0;f&&(o!=r&&o>=f.startTime&&r<=f.endTime&&(t.errors.push(PL(l,f.startTime,f.endTime,o,r)),h=!1),o=f.startTime),h&&u.set(l,{startTime:o,endTime:r}),t.options&&ek(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:jt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(OL()),i;let r=1,o=0,s=[],a=!1,l=!1,u=0,f=e.steps.map(_=>{let T=this._makeStyleAst(_,t),E=T.offset!=null?T.offset:xee(T.styles),M=0;return E!=null&&(o++,M=T.offset=E),l=l||M<0||M>1,a=a||M<u,u=M,s.push(M),T});l&&t.errors.push(NL()),a&&t.errors.push(FL());let h=e.steps.length,p=0;o>0&&o<h?t.errors.push(LL()):o==0&&(p=r/(h-1));let g=h-1,v=t.currentTime,w=t.currentAnimateTimings,y=w.duration;return f.forEach((_,T)=>{let E=p>0?T==g?1:p*T:s[T],M=E*y;t.currentTime=v+w.delay+M,w.duration=M,this._validateStyleAst(_,t),_.offset=E,i.styles.push(_)}),i}visitReference(e,t){return{type:jt.Reference,animation:lo(this,Df(e.animation),t),options:Du(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:jt.AnimateChild,options:Du(e.options)}}visitAnimateRef(e,t){return{type:jt.AnimateRef,animation:this.visitReference(e.animation,t),options:Du(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=yee(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,ao(t.collectedStyles,t.currentQuerySelector,new Map);let a=lo(this,Df(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:jt.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Du(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(kL());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:xm(e.timings,t.errors,!0);return{type:jt.Stagger,animation:lo(this,Df(e.animation),t),timings:i,options:null}}};function yee(n){let e=!!n.split(/\s*,\s*/).find(t=>t==hk);return e&&(n=n.replace(vee,"")),n=n.replace(/@\*/g,_m).replace(/@\w+/g,t=>_m+"-"+t.slice(1)).replace(/:animating/g,b_),[n,e]}function _ee(n){return n?Oe({},n):null}var n1=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function xee(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function wee(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=xm(n,e).duration;return ZT(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=ZT(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=xm(t,e);return ZT(r.duration,r.delay,r.easing)}function Du(n){return n?(n=Oe({},n),n.params&&(n.params=_ee(n.params))):n={},n}function ZT(n,e,t){return{duration:n,delay:e,easing:t}}function h1(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var bm=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},bee=1,Eee=":enter",Mee=new RegExp(Eee,"g"),See=":leave",Cee=new RegExp(See,"g");function mk(n,e,t,i,r,o=new Map,s=new Map,a,l,u=[]){return new i1().buildKeyframes(n,e,t,i,r,o,s,a,l,u)}var i1=class{buildKeyframes(e,t,i,r,o,s,a,l,u,f=[]){u=u||new bm;let h=new r1(e,t,u,r,o,f,[]);h.options=l;let p=l.delay?Oa(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,l),lo(this,i,h);let g=h.timelines.filter(v=>v.containsAnimation());if(g.length&&a.size){let v;for(let w=g.length-1;w>=0;w--){let y=g[w];if(y.element===t){v=y;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,h.errors,l)}return g.length?g.map(v=>v.buildKeyframes()):[h1(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:Oa(Rf(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?Oa(i.duration):null,a=i.delay!=null?Oa(i.delay):null;return s!==0&&e.forEach(l=>{let u=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),lo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==jt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=R_);let s=Oa(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>lo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Oa(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),lo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Rf(i,t.params,t.errors):i;return xm(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==jt.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let u=l.offset||0;a.forwardTime(u*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Oa(r.delay):0;o&&(t.previousNode.type===jt.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=R_);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,f)=>{t.currentQueryIndex=f;let h=t.createSubContext(e.options,u);o&&h.delayNextStep(o),u===t.element&&(l=h.currentTimeline),lo(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let p=h.currentTimeline.currentTime;s=Math.max(s,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let f=t.currentTimeline;l&&f.delayNextStep(l);let h=f.currentTime;lo(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}},R_={},r1=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=R_;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new P_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Oa(i.duration)),i.delay!=null&&(r.delay=Oa(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Rf(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=R_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new o1(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(Mee,"."+this._enterClassName),e=e.replace(Cee,"."+this._leaveClassName);let l=i!=1,u=this._driver.query(this.element,e,l);i!==0&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!o&&a.length==0&&s.push(UL(t)),a}},P_=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=bee,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||as),this._currentKeyframe.set(t,as);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=Tee(e,this._globalTimelineStyles);for(let[a,l]of s){let u=Rf(l,o,i);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??as),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let u=new Map([...this._backFill,...a]);u.forEach((f,h)=>{f===Tf?e.add(h):f===as&&t.add(h)}),i||u.set("offset",l/this.duration),r.push(u)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return h1(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},o1=class extends P_{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let u=new Map(e[0]);u.set("offset",ok(a)),o.push(u);let f=e.length-1;for(let h=1;h<=f;h++){let p=new Map(e[h]),g=p.get("offset"),v=t+g*i;p.set("offset",ok(v/s)),o.push(p)}i=s,t=0,r="",e=o}return h1(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function ok(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Tee(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,as)}else for(let[o,s]of r)t.set(o,s)}),t}function sk(n,e,t,i,r,o,s,a,l,u,f,h,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:f,totalTime:h,errors:p}}var KT={},O_=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return Aee(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,u,f){let h=[],p=this.ast.options&&this.ast.options.params||KT,g=a&&a.params||KT,v=this.buildStyles(i,g,h),w=l&&l.params||KT,y=this.buildStyles(r,w,h),_=new Set,T=new Map,E=new Map,M=r==="void",V={params:gk(w,p),delay:this.ast.options?.delay},F=f?[]:mk(e,t,this.ast.animation,o,s,v,y,V,u,h),L=0;return F.forEach(G=>{L=Math.max(G.duration+G.delay,L)}),h.length?sk(t,this._triggerName,i,r,M,v,y,[],[],T,E,L,h):(F.forEach(G=>{let O=G.element,I=ao(T,O,new Set);G.preStyleProps.forEach(he=>I.add(he));let z=ao(E,O,new Set);G.postStyleProps.forEach(he=>z.add(he)),O!==t&&_.add(O)}),sk(t,this._triggerName,i,r,M,v,y,F,[..._.values()],T,E,L))}};function Aee(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function gk(n,e){let t=Oe({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var s1=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=gk(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Rf(s,r,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}};function Iee(n,e,t){return new a1(n,e,t)}var a1=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new s1(r.style,o,i))}),ak(this.states,"true","1"),ak(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new O_(e,r,this.states))}),this.fallbackTransition=Dee(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function Dee(n,e,t){let i=[(s,a)=>!0],r={type:jt.Sequence,steps:[],options:null},o={type:jt.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new O_(n,o,e)}function ak(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var Ree=new bm,l1=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],o=pk(this._driver,t,i,r);if(i.length)throw zL(i);this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=zT(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=mk(this._driver,t,o,qT,w_,new Map,new Map,i,Ree,r),s.forEach(f=>{let h=ao(a,f.element,new Map);f.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(jL()),s=[]),r.length)throw GL(r);a.forEach((f,h)=>{f.forEach((p,g)=>{f.set(g,this._driver.computeStyle(h,g,as))})});let l=s.map(f=>{let h=a.get(f.element);return this._buildPlayer(f,new Map,h)}),u=bl(l);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw WL(e);return t}listen(e,t,i,r){let o=__(t,"","","");return y_(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},lk="ng-animate-queued",Pee=".ng-animate-queued",JT="ng-animate-disabled",Oee=".ng-animate-disabled",Nee="ng-star-inserted",Fee=".ng-star-inserted",Lee=[],vk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},kee={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$s="__ng_removed",Em=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Bee(r),i){let o=e,{value:s}=o,a=Md(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},wm="void",QT=new Em(wm),c1=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,cs(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw $L(i,t);if(i==null||i.length==0)throw qL(t);if(!Vee(i))throw XL(i,t);let o=ao(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=ao(this._engine.statesByElement,e,new Map);return a.has(t)||(cs(e,ym),cs(e,ym+"-"+t),a.set(t,QT)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw YL(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new Mm(this.id,t,e),a=this._engine.statesByElement.get(e);a||(cs(e,ym),cs(e,ym+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),u=new Em(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=QT),!(u.value===wm)&&l.value===u.value){if(!jee(l.params,u.params)){let w=[],y=o.matchStyles(l.value,l.params,w),_=o.matchStyles(u.value,u.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{vc(e,y),Ws(e,_)})}return}let p=ao(this._engine.playersByElement,e,[]);p.forEach(w=>{w.namespaceId==this.id&&w.triggerName==t&&w.queued&&w.destroy()});let g=o.matchTransition(l.value,u.value,e,u.params),v=!1;if(!g){if(!r)return;g=o.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:u,player:s,isFallbackTransition:v}),v||(cs(e,lk),s.onStart(()=>{Pf(e,lk)})),s.onDone(()=>{let w=this.players.indexOf(s);w>=0&&this.players.splice(w,1);let y=this._engine.playersByElement.get(e);if(y){let _=y.indexOf(s);_>=0&&y.splice(_,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,_m,!0);i.forEach(r=>{if(r[$s])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,u)=>{if(s.set(u,l.value),this._triggers.has(u)){let f=this.trigger(e,u,wm,r);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&bl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,u=i.get(s)||QT,f=new Em(wm),h=new Mm(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:u,toState:f,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[$s];(!o||o===vk)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){cs(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=__(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,y_(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},u1=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new c1(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let u=i.indexOf(l);i.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(T_(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!T_(t))return;let o=t[$s];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),cs(e,JT)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Pf(e,JT))}removeNode(e,t,i){if(T_(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[$s]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return T_(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,_m,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,b_,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return bl(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[$s];if(t&&t.setForRemoval){if(e[$s]=vk,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(JT)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Oee,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];cs(r,Nee)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?bl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw ZL(e)}_flushAnimations(e,t){let i=new bm,r=[],o=new Map,s=[],a=new Map,l=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(q=>{f.add(q);let ie=this.driver.query(q,Pee,!0);for(let $=0;$<ie.length;$++)f.add(ie[$])});let h=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=dk(p,this.collectedEnterElements),v=new Map,w=0;g.forEach((q,ie)=>{let $=qT+w++;v.set(ie,$),q.forEach(ge=>cs(ge,$))});let y=[],_=new Set,T=new Set;for(let q=0;q<this.collectedLeaveElements.length;q++){let ie=this.collectedLeaveElements[q],$=ie[$s];$&&$.setForRemoval&&(y.push(ie),_.add(ie),$.hasAnimation?this.driver.query(ie,Fee,!0).forEach(ge=>_.add(ge)):T.add(ie))}let E=new Map,M=dk(p,Array.from(_));M.forEach((q,ie)=>{let $=w_+w++;E.set(ie,$),q.forEach(ge=>cs(ge,$))}),e.push(()=>{g.forEach((q,ie)=>{let $=v.get(ie);q.forEach(ge=>Pf(ge,$))}),M.forEach((q,ie)=>{let $=E.get(ie);q.forEach(ge=>Pf(ge,$))}),y.forEach(q=>{this.processLeaveNode(q)})});let V=[],F=[];for(let q=this._namespaceList.length-1;q>=0;q--)this._namespaceList[q].drainQueuedTransitions(t).forEach($=>{let ge=$.player,Ue=$.element;if(V.push(ge),this.collectedEnterElements.length){let se=Ue[$s];if(se&&se.setForMove){if(se.previousTriggersValues&&se.previousTriggersValues.has($.triggerName)){let He=se.previousTriggersValues.get($.triggerName),je=this.statesByElement.get($.element);if(je&&je.has($.triggerName)){let Fe=je.get($.triggerName);Fe.value=He,je.set($.triggerName,Fe)}}ge.destroy();return}}let tt=!h||!this.driver.containsElement(h,Ue),me=E.get(Ue),re=v.get(Ue),U=this._buildInstruction($,i,re,me,tt);if(U.errors&&U.errors.length){F.push(U);return}if(tt){ge.onStart(()=>vc(Ue,U.fromStyles)),ge.onDestroy(()=>Ws(Ue,U.toStyles)),r.push(ge);return}if($.isFallbackTransition){ge.onStart(()=>vc(Ue,U.fromStyles)),ge.onDestroy(()=>Ws(Ue,U.toStyles)),r.push(ge);return}let Z=[];U.timelines.forEach(se=>{se.stretchStartingKeyframe=!0,this.disabledNodes.has(se.element)||Z.push(se)}),U.timelines=Z,i.append(Ue,U.timelines);let ve={instruction:U,player:ge,element:Ue};s.push(ve),U.queriedElements.forEach(se=>ao(a,se,[]).push(ge)),U.preStyleProps.forEach((se,He)=>{if(se.size){let je=l.get(He);je||l.set(He,je=new Set),se.forEach((Fe,rt)=>je.add(rt))}}),U.postStyleProps.forEach((se,He)=>{let je=u.get(He);je||u.set(He,je=new Set),se.forEach((Fe,rt)=>je.add(rt))})});if(F.length){let q=[];F.forEach(ie=>{q.push(KL(ie.triggerName,ie.errors))}),V.forEach(ie=>ie.destroy()),this.reportError(q)}let L=new Map,G=new Map;s.forEach(q=>{let ie=q.element;i.has(ie)&&(G.set(ie,ie),this._beforeAnimationBuild(q.player.namespaceId,q.instruction,L))}),r.forEach(q=>{let ie=q.element;this._getPreviousPlayers(ie,!1,q.namespaceId,q.triggerName,null).forEach(ge=>{ao(L,ie,[]).push(ge),ge.destroy()})});let O=y.filter(q=>fk(q,l,u)),I=new Map;uk(I,this.driver,T,u,as).forEach(q=>{fk(q,l,u)&&O.push(q)});let he=new Map;g.forEach((q,ie)=>{uk(he,this.driver,new Set(q),l,Tf)}),O.forEach(q=>{let ie=I.get(q),$=he.get(q);I.set(q,new Map([...ie?.entries()??[],...$?.entries()??[]]))});let ae=[],Te=[],be={};s.forEach(q=>{let{element:ie,player:$,instruction:ge}=q;if(i.has(ie)){if(f.has(ie)){$.onDestroy(()=>Ws(ie,ge.toStyles)),$.disabled=!0,$.overrideTotalTime(ge.totalTime),r.push($);return}let Ue=be;if(G.size>1){let me=ie,re=[];for(;me=me.parentNode;){let U=G.get(me);if(U){Ue=U;break}re.push(me)}re.forEach(U=>G.set(U,Ue))}let tt=this._buildAnimation($.namespaceId,ge,L,o,he,I);if($.setRealPlayer(tt),Ue===be)ae.push($);else{let me=this.playersByElement.get(Ue);me&&me.length&&($.parentPlayer=bl(me)),r.push($)}}else vc(ie,ge.fromStyles),$.onDestroy(()=>Ws(ie,ge.toStyles)),Te.push($),f.has(ie)&&r.push($)}),Te.forEach(q=>{let ie=o.get(q.element);if(ie&&ie.length){let $=bl(ie);q.setRealPlayer($)}}),r.forEach(q=>{q.parentPlayer?q.syncPlayerEvents(q.parentPlayer):q.destroy()});for(let q=0;q<y.length;q++){let ie=y[q],$=ie[$s];if(Pf(ie,w_),$&&$.hasAnimation)continue;let ge=[];if(a.size){let tt=a.get(ie);tt&&tt.length&&ge.push(...tt);let me=this.driver.query(ie,b_,!0);for(let re=0;re<me.length;re++){let U=a.get(me[re]);U&&U.length&&ge.push(...U)}}let Ue=ge.filter(tt=>!tt.destroyed);Ue.length?Hee(this,ie,Ue):this.processLeaveNode(ie)}return y.length=0,ae.forEach(q=>{this.players.push(q),q.onDone(()=>{q.destroy();let ie=this.players.indexOf(q);this.players.splice(ie,1)}),q.play()}),ae}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==wm;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||s.push(u)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let u=l.element,f=u!==o,h=ao(i,u,[]);this._getPreviousPlayers(u,f,s,a,t.toState).forEach(g=>{let v=g.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),g.destroy(),h.push(g)})}vc(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,l=t.element,u=[],f=new Set,h=new Set,p=t.timelines.map(v=>{let w=v.element;f.add(w);let y=w[$s];if(y&&y.removedBeforeQueried)return new Pa(v.duration,v.delay);let _=w!==l,T=zee((i.get(w)||Lee).map(L=>L.getRealPlayer())).filter(L=>{let G=L;return G.element?G.element===w:!1}),E=o.get(w),M=s.get(w),V=zT(this._normalizer,v.keyframes,E,M),F=this._buildPlayer(v,V,T);if(v.subTimeline&&r&&h.add(w),_){let L=new Mm(e,a,w);L.setRealPlayer(F),u.push(L)}return F});u.forEach(v=>{ao(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>Uee(this.playersByQueriedElement,v.element,v))}),f.forEach(v=>cs(v,XT));let g=bl(p);return g.onDestroy(()=>{f.forEach(v=>Pf(v,XT)),Ws(l,t.toStyles)}),h.forEach(v=>{ao(r,v,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Pa(e.duration,e.delay)}},Mm=class{namespaceId;triggerName;element;_player=new Pa;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>y_(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ao(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Uee(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Bee(n){return n??null}function T_(n){return n&&n.nodeType===1}function Vee(n){return n=="start"||n=="done"}function ck(n,e){let t=n.style.display;return n.style.display=e??"none",t}function uk(n,e,t,i,r){let o=[];t.forEach(l=>o.push(ck(l)));let s=[];i.forEach((l,u)=>{let f=new Map;l.forEach(h=>{let p=e.computeStyle(u,h,r);f.set(h,p),(!p||p.length==0)&&(u[$s]=kee,s.push(u))}),n.set(u,f)});let a=0;return t.forEach(l=>ck(l,o[a++])),s}function dk(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let u=a.parentNode;return t.has(u)?l=u:r.has(u)?l=i:l=s(u),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==i&&t.get(l).push(a)}),t}function cs(n,e){n.classList?.add(e)}function Pf(n,e){n.classList?.remove(e)}function Hee(n,e,t){bl(t).onDone(()=>n.processLeaveNode(e))}function zee(n){let e=[];return yk(n,e),e}function yk(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Au?yk(i.players,e):e.push(i)}}function jee(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function fk(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var yc=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new u1(e.body,t,i),this._timelineEngine=new l1(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],u=[],f=pk(this._driver,o,l,u);if(l.length)throw HL(r,l);a=Iee(r,f,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=jT(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=jT(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Gee(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=e1(e[0]),e.length>1&&(i=e1(e[e.length-1]))):e instanceof Map&&(t=e1(e)),t||i?new Wee(n,t,i):null}var Wee=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Ws(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ws(this._element,this._initialStyles),this._endStyles&&(Ws(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(vc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(vc(this._element,this._endStyles),this._endStyles=null),Ws(this._element,this._initialStyles),this._state=3)}}return n})();function e1(n){let e=null;return n.forEach((t,i)=>{$ee(i)&&(e=e||new Map,e.set(i,t))}),e}function $ee(n){return n==="display"||n==="position"}var N_=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:M_(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},F_=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return GT(e,t)}getParentElement(e){return x_(e)}query(e,t,i){return WT(e,t,i)}computeStyle(e,t,i){return M_(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let u=new Map,f=s.filter(g=>g instanceof N_);tk(i,r)&&f.forEach(g=>{g.currentSnapshot.forEach((v,w)=>u.set(w,v))});let h=QL(t).map(g=>new Map(g));h=nk(e,h,u);let p=Gee(e,h);return new N_(e,h,l,p)}};var A_="@",_k="@.disabled",L_=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==A_&&t==_k?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},d1=class extends L_{factory;constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==A_?t.charAt(1)=="."&&t==_k?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==A_){let o=qee(e),s=t.slice(1),a="";return s.charAt(0)!=A_&&([s,a]=Xee(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,i,l)})}return this.delegate.listen(e,t,i,r)}};function qee(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Xee(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var k_=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,f=u.get(r);if(!f){let h=()=>u.delete(r);f=new L_(i,r,this.engine,h),u.set(r,f)}return f}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new d1(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Zee=fr(()=>{let n={onRemovalComplete:()=>{}},e=new ti(null),t=K(yc,{optional:!0})||n,{onRemovalComplete:i=n.onRemovalComplete}=t;return t.onRemovalComplete=(r,o)=>{e.next(r),i.call(t,r,o)},e.pipe(_i(r=>ha(0).pipe(lt(()=>null),Ps(r))),pa())});function xk(n,e=null){return UT(n).activeElement!==n&&!n.matches(":disabled")&&!e?.contains(n)&&ML(n)}function Kee(n){return wo(ii(n,"focusin").pipe(lt(({target:e})=>e)),ii(n,"focusout").pipe(Gn(({target:e,relatedTarget:t})=>!!t&&xk(e)),lt(({relatedTarget:e})=>e)))}var oMe=fr(()=>{let n=K(Zee),e=K(ls),t=K(fn),i=K(Wn),r=ii(e,"focusout",{capture:!0}),o=ii(e,"focusin",{capture:!0}),s=ii(e,"blur"),a=ii(e,"mousedown"),l=ii(e,"mouseup");return wo(r.pipe(Zo(a),Bd({delay:()=>l}),JE(n),Gn(([u,f])=>xk(v_(u),f)),lt(([{relatedTarget:u}])=>u)),s.pipe(lt(()=>t.activeElement),Gn(u=>!!u?.matches("iframe"))),o.pipe(_i(u=>{let f=v_(u),h=UT(f)||t;return h===t?Ct(f):Kee(h).pipe(Ps(f))})),a.pipe(_i(u=>{let f=v_(u);return!t.activeElement||t.activeElement===t.body?Ct(f):r.pipe(bo(1),lt(()=>f),Zo(ha(0,p_(i))))}))).pipe(ep(),pa())}),sMe=fr(()=>K(fn).querySelector("base")?.href??""),Jee=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/,Qee=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/,p1=fr(()=>Jee.test(K(If).toLowerCase())||Qee.test(K(If).slice(0,4).toLowerCase())),wk=fr(()=>kT(K(Af))),ete=fr(()=>K(p1)&&!K(wk)),aMe=fr(()=>!!K(ls)?.webkitConvertPointFromNodeToPage),lMe=fr(()=>K(wk)?"ios":K(ete)?"android":"web"),cMe=fr(()=>{let n=K(ls).matchMedia("(pointer: coarse)");return sm(Ds(n,"change").pipe(lt(()=>n.matches)),{initialValue:n.matches})}),tte=fr(()=>!!K(ls).Cypress),nte=fr(am),uMe=fr(()=>K(tte)||K(nte)),dMe=h_(null);var fMe=fr(()=>Dp(K(So))?new Range:{}),hMe=fr(()=>{let n=K(ls);return ii(n,"resize").pipe(Ps(null),lt(()=>{let e=Math.max(n.document.documentElement.clientWidth||0,n.innerWidth||0,n.visualViewport?.width||0),t=Math.max(n.document.documentElement.clientHeight||0,n.innerHeight||0,n.visualViewport?.height||0),i={width:e,height:t,top:0,left:0,right:e,bottom:t,x:0,y:0};return wt(Oe({},i),{toJSON:()=>JSON.stringify(i)})}),np({bufferSize:1,refCount:!0}))});var ite=typeof IntersectionObserver<"u"?IntersectionObserver:class{root=null;rootMargin="";thresholds=[];observe(){}unobserve(){}disconnect(){}takeRecords(){return[]}},rte=new Ie("[WA_INTERSECTION_ROOT]"),ote=rte,ste="0px 0px 0px 0px",Ek=ste,bMe=new Ie("[WA_INTERSECTION_ROOT_MARGIN]",{providedIn:"root",factory:()=>Ek});function ate(){return K(nn).nativeElement.getAttribute("waIntersectionRootMargin")||Ek}var lte=0,Mk=lte,EMe=new Ie("[WA_INTERSECTION_THRESHOLD]",{providedIn:"root",factory:()=>Mk});function cte(){return K(nn).nativeElement.getAttribute("waIntersectionThreshold")?.split(",").map(parseFloat)||Mk}var m1=(()=>{class n extends ite{callbacks=new Map;margin="";threshold="";constructor(){let t=K(ote,{optional:!0});super(i=>{this.callbacks.forEach((r,o)=>{let s=i.filter(({target:a})=>a===o);return s.length&&r(s,this)})},{root:t?.nativeElement,rootMargin:ate(),threshold:cte()})}observe(t,i=()=>{}){super.observe(t),this.callbacks.set(t,i)}unobserve(t){super.unobserve(t),this.callbacks.delete(t)}ngOnDestroy(){this.disconnect()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ut({type:n,selectors:[["","waIntersectionObserver",""]],inputs:{margin:[0,"waIntersectionRootMargin","margin"],threshold:[0,"waIntersectionThreshold","threshold"]},exportAs:["IntersectionObserver"],features:[Fi]})}return n})();var bk=(()=>{class n extends Ft{constructor(){let t=K(nn).nativeElement,i=K(m1);return super(r=>(i.observe(t,o=>{r.next(o)}),()=>{i.unobserve(t)})),this.pipe(pa())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})(),Sk=(()=>{class n{waIntersectionObservee=K(bk);static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ut({type:n,selectors:[["","waIntersectionObservee",""]],outputs:{waIntersectionObservee:"waIntersectionObservee"},features:[xi([bk])]})}return n})();var MMe=new Ie("[WA_INTERSECTION_OBSERVER_SUPPORT]: [INTERSECTION_OBSERVER_SUPPORT]",{providedIn:"root",factory:()=>!!K(ls).IntersectionObserver});var U_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ut({type:n,selectors:[["","tuiItem",""]]})}}return n})();var Ck=(()=>{class n extends Ft{constructor(){let t=gc(),i=K(fn);super(r=>wo(ii(t,"touchstart",{passive:!0}),ii(t,"mousedown")).pipe(_i(()=>wo(ii(i,"touchmove",{passive:!0}).pipe(Gn(({touches:o})=>o.length<2),lt(({touches:o})=>o[0])),ii(i,"mousemove"))),tp(),lt(([o,s])=>{let a=(s?.clientX??0)-(o?.clientX??0),l=(s?.clientY??0)-(o?.clientY??0);return[a,l]}),Zo(wo(ii(i,"touchend"),ii(i,"mouseup"))),Bd()).subscribe(r))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})(),Tk=(()=>{class n{constructor(){this.tuiPan=K(Ck)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ut({type:n,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},features:[xi([Ck])]})}}return n})();var g1=h_({timeout:500,threshold:30}),Ak=(()=>{class n extends Ft{constructor(){let t=K(fn),i=gc(),{timeout:r,threshold:o}=K(g1);super(s=>wo(ii(i,"touchstart",{passive:!0}),ii(t,"touchend")).pipe(tp(),Gn(([a,l])=>!!a.touches.length&&a.touches[0]?.identifier===l.changedTouches[0]?.identifier),lt(([a,l])=>{let u=a.touches[0]?.clientX??0,f=a.touches[0]?.clientY??0,h=l.changedTouches[0]?.clientX??0,p=l.changedTouches[0]?.clientY??0,g=u-h,v=f-p,w=l.timeStamp-a.timeStamp;return(Math.abs(g)>o||Math.abs(v)>o)&&w<r?{direction:fte(g,v),events:[a,l]}:null}),Gn(vL)).subscribe(s))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=De({token:n,factory:n.\u0275fac})}}return n})();function fte(n,e){return Math.abs(e)>Math.abs(n)?e>0?"top":"bottom":n>0?"left":"right"}var Ik=(()=>{class n{constructor(){this.tuiSwipe=K(Ak)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ut({type:n,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[xi([Ak])]})}}return n})();function hte(n,e){n&1&&cc(0)}function pte(n,e){if(n&1){let t=Rt();R(0,"fieldset",5),Re("waIntersectionObservee",function(r){let o=Be(t).index,s=_e();return Ve(r[0]&&s.onIntersection(r[0],o))}),cc(1,6),P()}if(n&2){let t=e.$implicit,i=e.index,r=_e();NN(r.getStyle(r.itemsCount)),ne("disabled",r.isDisabled(i)),W(),ne("ngTemplateOutlet",t)}}var v1=(()=>{class n extends Ft{constructor(){super(t=>this.output$.subscribe(t)),this.el=gc(),this.platform=K(So),this.visible$=K(bL),this.duration$=new ti(0),this.running$=wo(ii(this.el,"mouseenter").pipe(lt(am)),ii(this.el,"touchstart").pipe(lt(am)),ii(this.el,"touchend").pipe(lt(bT)),ii(this.el,"mouseleave").pipe(lt(bT)),this.visible$),this.output$=cf(this.platform)?yi:kd([this.duration$,this.running$]).pipe(_L(([t])=>qE(t),t=>t.every(Boolean)))}set duration(t){this.duration$.next(Number.isNaN(t)?this.duration$.value:t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ut({type:n,inputs:{duration:"duration"},features:[Fi]})}}return n})(),mte=(()=>{class n{constructor(){this.tuiCarouselAutoscroll=K(v1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ut({type:n,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}})}}return n})(),gte=(()=>{class n{constructor(){this.el=gc(),this.tuiCarouselScroll=ii(this.el,"wheel").pipe(Gn(({deltaX:t})=>Math.abs(t)>20),KE(500,p_()),lt(({deltaX:t})=>Math.sign(t)),hi(()=>{this.el.scrollLeft=10}))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ut({type:n,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}})}}return n})(),Dk=(()=>{class n{constructor(){this.el=gc(),this.cdr=K(Qi),this.isMobile=K(p1),this.directive=K(v1),this.translate=0,this.items=O2,this.transitioned=!0,this.index=0,this.draggable=!1,this.itemsCount=1,this.indexChange=new Pn,this.shift=new Pn}set indexSetter(t){this.index=t,this.directive.duration=NaN}next(){this.items&&this.index===this.items.length-this.itemsCount||this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}get transform(){return`translateX(${100*this.x}%)`}getStyle(t){let i=`${100/t}%`;return{flexBasis:i,minWidth:i,maxWidth:i}}onTransitioned(t){this.transitioned=t,t||(this.translate=this.computedTranslate),this.onShift()}isDisabled(t){return t<this.index||t>=this.index+this.itemsCount}onIntersection({intersectionRatio:t},i){t&&t>=.5&&!this.transitioned&&this.updateIndex(this.index<i?i-this.itemsCount+1:i)}onScroll(t){this.isMobile||(t>0?this.next():this.prev())}onPan(t){if(!this.computedDraggable)return;let i=1-this.items.length/this.itemsCount;this.translate=OT(t/this.el.clientWidth+this.translate,i,0),this.onShift()}onSwipe(t){t==="left"?this.next():t==="right"&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}onShift(){this.shift.emit(Math.abs(this.x%1+.5)*2)}get x(){return this.transitioned?this.computedTranslate:this.translate}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(t){this.index=OT(t,0,this.items.length-1),this.indexChange.emit(this.index),this.cdr.markForCheck()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=vn({type:n,selectors:[["tui-carousel"]],contentQueries:function(i,r,o){if(i&1&&bC(o,U_,4,xr),i&2){let s;si(s=ai())&&(r.items=s)}},hostVars:4,hostBindings:function(i,r){i&1&&Re("touchstart",function(){return r.onTransitioned(!1)})("touchend",function(){return r.onTransitioned(!0)})("mousedown",function(){return r.onTransitioned(!1)})("mouseup.zoneless",function(){return r.onTransitioned(!0)},!1,Pr),i&2&&Sn("_transitioned",r.transitioned)("_draggable",r.draggable)},inputs:{draggable:"draggable",itemsCount:"itemsCount",indexSetter:[0,"index","indexSetter"]},outputs:{indexChange:"indexChange",shift:"shift"},features:[xi([{provide:g1,useValue:{timeout:200,threshold:30}}]),bN([{directive:v1,inputs:["duration","duration"]}])],decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionObserver","","waIntersectionThreshold","0.5",1,"t-wrapper"],[1,"t-items",3,"tuiCarouselAutoscroll","tuiPan","tuiSwipe"],["class","t-item",3,"disabled","style","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"waIntersectionObservee","disabled"],[3,"ngTemplateOutlet"]],template:function(i,r){i&1&&(ke(0,hte,1,0,"ng-container",0),Ea(1,"async"),R(2,"div",1),Re("tuiCarouselScroll",function(s){return r.onScroll(s)}),R(3,"div",2)(4,"div",3),Re("tuiCarouselAutoscroll",function(){return r.onAutoscroll()})("tuiPan",function(s){return r.onPan(s[0])})("tuiSwipe",function(s){return r.onSwipe(s.direction)}),ke(5,pte,2,4,"fieldset",4),P()()()),i&2&&(ne("ngIf",Ma(1,4,r.items.changes)),W(4),ni("transform",r.transform),W(),ne("ngForOf",r.items))},dependencies:[DC,wi,Tn,gl,mte,gte,Tk,Ik,m1,Sk],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}  [tuiCarouselButtons] [tuiIconButton]{border-radius:100%}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-inline-size:100%;max-inline-size:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:sticky;left:0;right:0;min-inline-size:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;touch-action:pan-y}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{display:none}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-inline-size:1rem}'],changeDetection:0})}}return EP([yL],n.prototype,"getStyle",null),n})();function vte(n,e){if(n&1){let t=Rt();R(0,"button",7),Re("click",function(){Be(t);let r=_e(2).index,o=_e(2);return Ve(o.changeMainImage(r))}),te(1),P()}if(n&2){let t=_e(2).index,i=_e(2);W(),Ln(i.imagesData.idMainImage===t?"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F":"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439")}}function yte(n,e){if(n&1&&(R(0,"div",4),we(1,"img",5),ke(2,vte,2,1,"button",6),P()),n&2){let t=_e(),i=t.$implicit,r=t.index,o=_e(2);Sn("active",r===o.index+1),W(),ne("src",i,lr),W(),ne("ngIf",o.changeModeSlider)}}function _te(n,e){n&1&&(oy(0),ke(1,yte,3,4,"div",3),sy())}function xte(n,e){if(n&1){let t=Rt();R(0,"tui-carousel",1),ns("indexChange",function(r){Be(t);let o=_e();return Hs(o.index,r)||(o.index=r),Ve(r)}),ke(1,_te,2,0,"ng-container",2),P()}if(n&2){let t=_e();ne("draggable",!0)("itemsCount",t.isMobileView?1:3),ts("index",t.index),W(),ne("ngForOf",t.imagesData.images)}}var B_=(()=>{class n{index=0;isMobileView=!1;imagesData;changeModeSlider=!1;ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=768}changeMainImage(t){this.imagesData.idMainImage=t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=vn({type:n,selectors:[["app-image-slider"]],hostBindings:function(i,r){i&1&&Re("resize",function(s){return r.checkViewport(s)},!1,Co)},inputs:{imagesData:"imagesData",changeModeSlider:"changeModeSlider"},decls:1,vars:1,consts:[[3,"draggable","itemsCount","index","indexChange",4,"ngIf"],[3,"indexChange","draggable","itemsCount","index"],[4,"ngFor","ngForOf"],["alt","","draggable","false","class","item",3,"active",4,"tuiItem"],["alt","","draggable","false",1,"item"],[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(i,r){i&1&&ke(0,xte,2,4,"tui-carousel",0),i&2&&ne("ngIf",r.imagesData)},dependencies:[Tn,wi,U_,Dk],styles:["tui-carousel[_ngcontent-%COMP%]{width:100%;max-width:90vw}.item[_ngcontent-%COMP%]{transition:box-shadow .3s,transform .3s;margin:2rem auto;width:100%;aspect-ratio:1;border-radius:20px;background-color:#fff;display:grid;place-items:center;outline:none;border:none}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:90%;pointer-events:none}.item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{grid-area:1/1/2/2;align-self:flex-end;margin-bottom:10px;background:none;outline:none;border:none;font-family:Courier New,Courier,monospace;cursor:pointer}"]})}return n})();var Rk=gE(y1());var V_=(()=>{class n{constructor(){}el=K(nn);mobileView=!1;ngOnInit(){this.mobileView&&this.el.nativeElement.addEventListener("input",this.onInput.bind(this.el.nativeElement))}onInput(t){let i=t.target;(0,Rk.throttle)(()=>{i.style.height="auto",i.style.height=i.scrollHeight+"px"},250)()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ut({type:n,selectors:[["","appAutoHeight",""]],inputs:{mobileView:"mobileView"}})}return n})();var Ok=gE(Pk());var H_=(()=>{class n{compressImage(t){return console.log(typeof t),new Promise((i,r)=>{new Ok.default(t,{quality:.6,success:o=>{i(o)},error:o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0436\u0430\u0442\u0438\u044F:",o.message),r(o)}})})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var z_="http://localhost:4200/",ri=z_+"api/";var Nf=(()=>{class n{httpModule;baseServiceUrl=ri+"category/";constructor(t){this.httpModule=t}GETgetAllCategories(){return tn(this.httpModule.get(this.baseServiceUrl+"all"))}static \u0275fac=function(i){return new(i||n)(ze(Li))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bi=(()=>{class n{errorSubject=new ti("");error$=this.errorSubject.asObservable();setError(t,i){this.errorSubject.next(t),setTimeout(()=>this.clearError(),i)}clearError(){this.errorSubject.next("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wte=["colorModule"],bte=["shopsModule"],Ete=["additionalModule"],Mte=()=>({standalone:!0}),b1=n=>({invalid:n});function Ste(n,e){if(n&1){let t=Rt();R(0,"button",29),Re("click",function(){Be(t);let r=_e();return Ve(r.removeImages())}),we(1,"img",30),P()}}function Cte(n,e){if(n&1&&we(0,"app-image-slider",31),n&2){let t=_e();ne("imagesData",t.furnitureData.colors[t.currentColorId].imagesData)("changeModeSlider",!0)}}function Tte(n,e){if(n&1){let t=Rt();R(0,"div",32)(1,"input",33),Re("input",function(r){Be(t);let o=_e();return Ve(o.onInputImages(r))}),P(),we(2,"img",34),P()}}function Ate(n,e){if(n&1){let t=Rt();R(0,"button",37),Re("click",function(){let r=Be(t).index,o=_e(2);return Ve(o.openFurnitureVariant(r))}),P()}if(n&2){let t=e.$implicit,i=e.index;ni("background-color",t.color),To("data-idColor",i)}}function Ite(n,e){if(n&1&&(R(0,"span",35),ke(1,Ate,1,3,"button",36),P()),n&2){let t=_e();ni("--total-items",t.furnitureData.colors.length.toString()),W(),ne("ngForOf",t.furnitureData.colors)}}function Dte(n,e){if(n&1){let t=Rt();R(0,"button",38),Re("click",function(){let r=Be(t).index,o=_e();return Ve(o.openShopsModule(r))}),R(1,"div",39),te(2),P(),R(3,"div",40),we(4,"img",41),P()()}if(n&2){let t=e.$implicit;W(2),Ln(t.cost)}}function Rte(n,e){n&1&&cc(0)}function Pte(n,e){n&1&&(R(0,"span",52),te(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 "),P())}function Ote(n,e){if(n&1){let t=Rt();R(0,"form",42),Re("ngSubmit",function(){Be(t);let r=_e();return Ve(r.addColor())}),R(1,"button",43),Re("click",function(){Be(t);let r=_e();return Ve(r.closeAddModule())}),we(2,"img",44),P(),R(3,"span",45)(4,"h2",46),te(5,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043C\u0435\u0431\u0435\u043B\u0438"),P(),R(6,"span",47)(7,"label",48),te(8,"\u0426\u0432\u0435\u0442"),P(),we(9,"input",49),ke(10,Pte,2,0,"span",50),P(),R(11,"button",51),te(12,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),P()()()}if(n&2){let t,i=_e();ne("formGroup",i.colorForm),W(10),ne("ngIf",((t=i.colorForm.get("color"))==null?null:t.invalid)&&(((t=i.colorForm.get("color"))==null?null:t.dirty)||((t=i.colorForm.get("color"))==null?null:t.touched))),W(),ne("disabled",!i.colorForm.valid)}}function Nte(n,e){n&1&&(R(0,"span",52),te(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0443\u044E \u0446\u0435\u043D\u0443 "),P())}function Fte(n,e){n&1&&(R(0,"span",52),te(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 "),P())}function Lte(n,e){if(n&1){let t=Rt();R(0,"button",60),Re("click",function(){Be(t);let r=_e(2);return Ve(r.deleteShop())}),we(1,"img",61),P()}}function kte(n,e){if(n&1){let t=Rt();R(0,"form",42),Re("ngSubmit",function(){Be(t);let r=_e();return Ve(r.addShop())}),R(1,"button",43),Re("click",function(){Be(t);let r=_e();return Ve(r.closeAddModule())}),we(2,"img",44),P(),R(3,"span",45)(4,"h2",46),te(5,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430"),P(),R(6,"span",47)(7,"label",53),te(8,"\u0426\u0435\u043D\u0430"),P(),we(9,"input",54),ke(10,Nte,2,0,"span",50),P(),R(11,"span",47)(12,"label",55),te(13,"\u0421\u0441\u044B\u043B\u043A\u0430"),P(),we(14,"input",56),ke(15,Fte,2,0,"span",50),P(),R(16,"span",57)(17,"button",58),te(18,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),P(),ke(19,Lte,2,0,"button",59),P()()()}if(n&2){let t,i,r=_e();ne("formGroup",r.shopForm),W(10),ne("ngIf",((t=r.shopForm.get("cost"))==null?null:t.invalid)&&(((t=r.shopForm.get("cost"))==null?null:t.dirty)||((t=r.shopForm.get("cost"))==null?null:t.touched))),W(5),ne("ngIf",((i=r.shopForm.get("url"))==null?null:i.invalid)&&(((i=r.shopForm.get("url"))==null?null:i.dirty)||((i=r.shopForm.get("url"))==null?null:i.touched))),W(2),ne("disabled",!r.shopForm.valid),W(2),ne("ngIf",r.lastClickedShop!==void 0)}}function Ute(n,e){if(n&1&&(R(0,"option",73),te(1),P()),n&2){let t=e.$implicit;ne("value",t.name),W(),Ln(t.translateOne)}}function Bte(n,e){n&1&&(R(0,"span",52),te(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443 "),P())}function Vte(n,e){n&1&&(R(0,"span",52),te(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443 "),P())}function Hte(n,e){n&1&&(R(0,"span",52),te(1," \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443 "),P())}function zte(n,e){if(n&1){let t=Rt();R(0,"span",47)(1,"label",64),te(2,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F"),P(),R(3,"select",65),ns("ngModelChange",function(r){Be(t);let o=_e(2);return Hs(o.furnitureData.additionalData.category,r)||(o.furnitureData.additionalData.category=r),Ve(r)}),ke(4,Ute,2,2,"option",66),P(),R(5,"label",67),te(6,"\u0428\u0438\u0440\u0438\u043D\u0430"),P(),we(7,"input",68),ke(8,Bte,2,0,"span",50),R(9,"label",69),te(10,"\u0414\u043B\u0438\u043D\u0430"),P(),we(11,"input",70),ke(12,Vte,2,0,"span",50),R(13,"label",71),te(14,"\u0412\u044B\u0441\u043E\u0442\u0430"),P(),we(15,"input",72),ke(16,Hte,2,0,"span",50),P()}if(n&2){let t,i,r,o,s,a,l=_e(2);W(3),ne("ngModelOptions",mu(9,Mte)),ts("ngModel",l.furnitureData.additionalData.category),W(),ne("ngForOf",l.categoriesArray),W(3),ne("ngClass",Fr(10,b1,((t=l.proportionsForm.get("width"))==null?null:t.invalid)&&(((t=l.proportionsForm.get("width"))==null?null:t.dirty)||((t=l.proportionsForm.get("width"))==null?null:t.touched)))),W(),ne("ngIf",((i=l.proportionsForm.get("width"))==null?null:i.invalid)&&(((i=l.proportionsForm.get("width"))==null?null:i.dirty)||((i=l.proportionsForm.get("width"))==null?null:i.touched))),W(3),ne("ngClass",Fr(12,b1,((r=l.proportionsForm.get("length"))==null?null:r.invalid)&&(((r=l.proportionsForm.get("length"))==null?null:r.dirty)||((r=l.proportionsForm.get("length"))==null?null:r.touched)))),W(),ne("ngIf",((o=l.proportionsForm.get("length"))==null?null:o.invalid)&&(((o=l.proportionsForm.get("length"))==null?null:o.dirty)||((o=l.proportionsForm.get("length"))==null?null:o.touched))),W(3),ne("ngClass",Fr(14,b1,((s=l.proportionsForm.get("height"))==null?null:s.invalid)&&(((s=l.proportionsForm.get("height"))==null?null:s.dirty)||((s=l.proportionsForm.get("height"))==null?null:s.touched)))),W(),ne("ngIf",((a=l.proportionsForm.get("height"))==null?null:a.invalid)&&(((a=l.proportionsForm.get("height"))==null?null:a.dirty)||((a=l.proportionsForm.get("height"))==null?null:a.touched)))}}function jte(n,e){if(n&1){let t=Rt();R(0,"form",42),Re("ngSubmit",function(){Be(t);let r=_e();return Ve(r.saveAdditional())}),R(1,"button",43),Re("click",function(){Be(t);let r=_e();return Ve(r.closeAddModule())}),we(2,"img",44),P(),R(3,"span",45)(4,"h2",46),te(5,"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"),P(),ke(6,zte,17,16,"span",62),R(7,"button",63),te(8,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),P()()()}if(n&2){let t=_e();ne("formGroup",t.proportionsForm),W(6),ne("ngIf",t.categoriesArray!==void 0),W(),ne("disabled",t.proportionsForm.invalid)}}var Cm=(()=>{class n{elementRef;changeDetectorRef;clientImageControl;categoryService;errorHandler;constructor(t,i,r,o,s){this.elementRef=t,this.changeDetectorRef=i,this.clientImageControl=r,this.categoryService=o,this.errorHandler=s}addModule;isMobileView=!1;lastClickedShop=void 0;lastClickedColor=void 0;addModuleTemplate;addColorVisible=!1;categoriesArray=[];currentColorId=void 0;furnitureModelInput;furnitureData;colorModuleTemplate;shopsModuleTemplate;additionalModuleTemplate;ngOnInit(){this.initCategories(),this.checkViewport()}ngAfterViewInit(){this.addModule=this.elementRef.nativeElement.querySelector(".addModule"),this.furnitureModelInput=this.elementRef.nativeElement.querySelector(".furnitureModelInput")}initCategories(){return at(this,null,function*(){try{this.categoriesArray=(yield this.categoryService.GETgetAllCategories()).categoryArray}catch{this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439",5e3)}})}onInputImages(t){return at(this,null,function*(){let r=t.target.files;if(!(!r||this.currentColorId===void 0))try{let o=[];for(let s=0;s<r.length;s++){let a=yield this.clientImageControl.compressImage(r[s]);a&&o.push(URL.createObjectURL(a))}this.furnitureData.colors[this.currentColorId].imagesData.images=o}catch{this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439",5e3)}})}checkViewport(){this.isMobileView=window.innerWidth<=600}numberValidator(t){let i=t.value;return i!==null&&isNaN(i)?{notANumber:!0}:null}removeImages(){this.currentColorId===void 0||!this.furnitureData.colors[this.currentColorId].imagesData.images||(this.furnitureData.colors[this.currentColorId].imagesData.images.length=0)}saveAdditional(){if(this.proportionsForm.invalid){this.proportionsForm.markAllAsTouched(),this.errorHandler.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B",5e3);return}let{width:t,length:i,height:r}=this.proportionsForm.value;t&&i&&r&&(this.furnitureData.proportions={width:t,length:i,height:r}),this.closeAddModule()}openFurnitureVariant(t){let i=this.elementRef.nativeElement.querySelector(".colors"),r=i.querySelector(`[data-idColor="${t}"]`),o=i.querySelectorAll(".colorVariant"),s=[],a=[];o.forEach((l,u)=>{u>+t?a=[...a,l]:u<+t&&(s=[...s,l])}),[r,...a,...s].forEach((l,u)=>{l.style.setProperty("--index",(u+1).toString())}),setTimeout(()=>{r.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+t,r.style.setProperty("margin-right","0")},1250)}addColor(){let t=this.colorForm.value.color;if(!t){this.errorHandler.setError("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0446\u0432\u0435\u0442",5e3);return}let i={color:t,imagesData:{images:[],idMainImage:0}};this.furnitureData.colors.push(i),this.colorForm.patchValue({color:""}),this.currentColorId=this.furnitureData.colors.length-1,setTimeout(()=>{this.closeAddModule(),this.openFurnitureVariant(this.currentColorId)},0)}closeAddModule(){this.addModule.classList.add("disabled")}addShop(){if(this.lastClickedShop!==void 0){this.furnitureData.shops[this.lastClickedShop]={cost:this.shopForm.value.cost,url:this.shopForm.value.url};return}this.furnitureData.shops.push({cost:this.shopForm.value.cost,url:this.shopForm.value.url}),this.closeAddModule()}deleteShop(){this.lastClickedShop!=null&&this.lastClickedShop>=0&&this.lastClickedShop<this.furnitureData.shops.length&&(this.furnitureData.shops.splice(this.lastClickedShop,1),this.changeDetectorRef.detectChanges(),this.lastClickedShop=void 0)}openColorModule(t){t&&t.preventDefault(),this.addModuleTemplate=this.colorModuleTemplate,this.addModule.classList.remove("disabled"),setTimeout(()=>{this.elementRef.nativeElement.querySelector(".addModuleInput").focus()},10)}deleteColor(){let t=this.currentColorId;this.currentColorId=0,this.furnitureData.colors=this.furnitureData.colors.filter((i,r)=>r!==t)}openShopsModule(t){t!==void 0?(this.lastClickedShop=t,this.shopForm.patchValue({cost:this.furnitureData.shops[t].cost,url:this.furnitureData.shops[t].url})):(this.lastClickedShop=void 0,this.shopForm.patchValue({cost:null,url:""})),this.addModuleTemplate=this.shopsModuleTemplate,this.addModule.classList.remove("disabled")}openAdditional(){this.proportionsForm.patchValue({width:this.furnitureData.proportions.width,length:this.furnitureData.proportions.length,height:this.furnitureData.proportions.height}),this.furnitureData.proportions.width===null&&this.proportionsForm.get("width")?.markAsTouched(),this.furnitureData.proportions.length===null&&this.proportionsForm.get("length")?.markAsTouched(),this.furnitureData.proportions.height===null&&this.proportionsForm.get("height")?.markAsTouched(),this.addModuleTemplate=this.additionalModuleTemplate,this.addModule.classList.remove("disabled")}colorForm=new ki({color:new kn("",[Et.required])});shopForm=new ki({cost:new kn(null,[Et.required,this.numberValidator]),url:new kn("",[Et.required])});proportionsForm=new ki({width:new kn(null,[Et.required,Et.min(0)]),length:new kn(null,[Et.required,Et.min(0)]),height:new kn(null,[Et.required,Et.min(0)])});static \u0275fac=function(i){return new(i||n)(de(nn),de(Qi),de(H_),de(Nf),de(bi))};static \u0275cmp=vn({type:n,selectors:[["app-create-furniture"]],viewQuery:function(i,r){if(i&1&&(Ri(wte,5),Ri(bte,5),Ri(Ete,5)),i&2){let o;si(o=ai())&&(r.colorModuleTemplate=o.first),si(o=ai())&&(r.shopsModuleTemplate=o.first),si(o=ai())&&(r.additionalModuleTemplate=o.first)}},hostBindings:function(i,r){i&1&&Re("resize",function(s){return r.ngOnInit(s)},!1,Co)},inputs:{furnitureData:"furnitureData"},decls:36,vars:9,consts:[["colorModule",""],["shopsModule",""],["additionalModule",""],[1,"body",3,"click"],["placeholder","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle",3,"ngModelChange","ngModel"],[1,"imageSlideSpan"],["class","editImagesBtn",3,"click",4,"ngIf"],[3,"imagesData","changeModeSlider",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"leftPiece"],[1,"colorSlider"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0446\u0432\u0435\u0442",1,"addColorBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"],["class","colors",3,"--total-items",4,"ngIf"],["type","file","accept",".obj","id","furnitureModel","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C 3D \u043C\u043E\u0434\u0435\u043B\u044C",1,"furnitureModelInput"],[1,"informationSpan"],[1,"descriptionSpan"],[1,"descriptionTitle"],["appAutoHeight","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435...","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"descriptionInformation",3,"ngModelChange","mobileView","ngModel"],[1,"rightFunctionalSection"],[1,"shopsTitle"],[1,"shopsSpan"],[1,"shopsListSpan"],["class","shopFunctions","title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",3,"click",4,"ngFor","ngForOf"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"addShopButton",3,"click"],["title","\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",1,"additionalFunctions",3,"click"],[1,"addModule","disabled"],[4,"ngTemplateOutlet"],[1,"editImagesBtn",3,"click"],["loading","lazy","alt","edit","src","/assets/images/editIcon.svg","alt",""],[3,"imagesData","changeModeSlider"],[1,"uploadImagesDiv"],["multiple","","type","file","accept",".png,.jpeg,.jpg","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"uploadImagesInput",3,"input"],["loading","lazy","src","/assets/images/uploadIcon.png","alt","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",1,"uploadImagesIcon"],[1,"colors"],["class","colorVariant","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",3,"background-color","click",4,"ngFor","ngForOf"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",1,"colorVariant",3,"click"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"shopFunctions",3,"click"],[1,"furnitureCost"],[1,"linkShop"],["loading","lazy","src","/assets/images/linkIcon.svg","alt","\u0421\u0441\u044B\u043B\u043A\u0430"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","colorVariant",1,"inputLabel"],["formControlName","color","placeholder","\u041D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C \u0438\u043B\u0438 #hex","id","colorVariant","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 #hex \u0438\u043B\u0438 \u043D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C",1,"addModuleInput"],["class","error-message",4,"ngIf"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0446\u0432\u0435\u0442",1,"submitAddModuleFormBtn",3,"disabled"],[1,"error-message"],["for","cost",1,"inputLabel"],["formControlName","cost","id","cost","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0435\u043D\u0443",1,"addModuleInput"],["for","url",1,"inputLabel"],["formControlName","url","id","url","type","text","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"submitAddModuleFormBtn",3,"disabled"],["class","deleteItemAddModuleBtn","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",3,"click",4,"ngIf"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt","\u0423\u0434\u0430\u043B\u0438\u0442\u044C"],["class","addModuleInputSpan",4,"ngIf"],["type","submit","title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E",1,"submitAddModuleFormBtn","additionalBtn",3,"disabled"],["for","category",1,"inputLabel"],["aria-placeholder","\u0414\u0438\u0432\u0430\u043D","name","category","id","category","title","\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",1,"categorySelect",3,"ngModelChange","ngModelOptions","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","width",1,"inputLabel"],["formControlName","width","placeholder","1.7","id","width","type","number","min","0","step","0.01","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443",1,"addModuleInput",3,"ngClass"],["for","length",1,"inputLabel"],["formControlName","length","placeholder","1.5","id","length","type","number","min","0","step","0.01","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443",1,"addModuleInput",3,"ngClass"],["for","height",1,"inputLabel"],["formControlName","height","placeholder","1","id","height","type","number","min","0","step","0.01","title","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443",1,"addModuleInput",3,"ngClass"],[3,"value"]],template:function(i,r){if(i&1){let o=Rt();R(0,"span",3),Re("click",function(a){let l;return Be(o),Ve((l=r.currentColorId)!==null&&l!==void 0?l:r.openColorModule(a))}),R(1,"input",4),ns("ngModelChange",function(a){return Be(o),Hs(r.furnitureData.name,a)||(r.furnitureData.name=a),Ve(a)}),P(),R(2,"span",5),ke(3,Ste,2,0,"button",6)(4,Cte,1,2,"app-image-slider",7),P(),ke(5,Tte,3,0,"div",8),R(6,"span",9)(7,"span",10)(8,"span",11)(9,"button",12),Re("click",function(a){return Be(o),Ve(r.openColorModule(a))}),we(10,"img",13),P(),ke(11,Ite,2,3,"span",14),P(),we(12,"input",15),P(),R(13,"span",16)(14,"span",17)(15,"div",18),te(16,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),P(),R(17,"textarea",19),ns("ngModelChange",function(a){return Be(o),Hs(r.furnitureData.description,a)||(r.furnitureData.description=a),Ve(a)}),P()(),R(18,"span",20)(19,"div",21),te(20,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),P(),R(21,"span",22)(22,"span",23),ke(23,Dte,5,1,"button",24),P(),R(24,"button",25),Re("click",function(){return Be(o),Ve(r.openShopsModule())}),we(25,"img",13),P()(),R(26,"button",26),Re("click",function(){return Be(o),Ve(r.openAdditional())}),te(27," \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F "),P()()()()(),R(28,"div",27),ke(29,Rte,1,0,"ng-container",28),P(),ke(30,Ote,13,3,"ng-template",null,0,ro)(32,kte,20,5,"ng-template",null,1,ro)(34,jte,9,3,"ng-template",null,2,ro)}i&2&&(W(),ts("ngModel",r.furnitureData.name),W(2),ne("ngIf",r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length>0),W(),ne("ngIf",r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length>0),W(),ne("ngIf",r.currentColorId===void 0||r.currentColorId!==void 0&&r.furnitureData.colors[r.currentColorId].imagesData.images.length<=0),W(6),ne("ngIf",r.furnitureData.colors!==void 0),W(6),ne("mobileView",r.isMobileView),ts("ngModel",r.furnitureData.description),W(6),ne("ngForOf",r.furnitureData.shops),W(6),ne("ngTemplateOutlet",r.addModuleTemplate))},dependencies:[Ao,V_,B_,wi,Tn,ss,Ra,dL,hL,os,mm,u_,Ia,Da,gm,js,Gs,gl,d_,pm],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}button[_ngcontent-%COMP%]:not(.colorVariant), .furnitureModelInput[_ngcontent-%COMP%]{transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:not(.colorVariant):hover, .furnitureModelInput[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.body[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;gap:30px;margin:60px auto 0}.imageSlideSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.editImagesBtn[_ngcontent-%COMP%]{aspect-ratio:1;border:none;background:none;grid-area:1/1/2/2;align-self:start;z-index:4;justify-self:end;margin-top:-10px;margin-right:-10px}@media (max-width: 768px){.editImagesBtn[_ngcontent-%COMP%]{margin:0}}.editImagesBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;cursor:pointer}app-image-slider[_ngcontent-%COMP%]{width:100%;display:block;grid-area:1/1/2/2}.leftPiece[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0 auto;width:fit-content;background:none;border:none;outline:none;font-size:1.5vw}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:300px;aspect-ratio:1;position:relative;--radius: 60px}.colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out;box-shadow:0 0 3px #fff}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:40px;aspect-ratio:1;z-index:3;background-color:#000;border:none;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.addColorBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:75%}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;min-width:350px;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd;cursor:pointer}.categorySelect[_ngcontent-%COMP%]{background:none;border:1px solid #888888;border-radius:10px;padding:10px;background-color:#000;color:#fff;cursor:pointer}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center;font-size:28px}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:10px;padding:15px;width:100%;border:none;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px;min-height:300px;background:none;border:none;outline:none;resize:vertical}.rightFunctionalSection[_ngcontent-%COMP%]{width:40%;display:flex;height:100%;flex-direction:column;gap:20px}.additionalFunctions[_ngcontent-%COMP%]{width:100%;background-color:#a3b18a;border-radius:10px;border:none;color:#fff;font-size:115%;line-height:50px;height:50px;cursor:pointer}.shopsSpan[_ngcontent-%COMP%]{width:100%;height:calc(100% - 60px);display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#000;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;border:2px solid rgba(163,177,138,.3)}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#000;border-radius:0 10px 10px 0;place-content:center;display:flex;border:2px solid rgba(163,177,138,.3)}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.addShopButton[_ngcontent-%COMP%]{background-color:#000;border:2px solid rgba(163,177,138,.3);display:flex;place-content:center;border-radius:10px;height:45px;cursor:pointer}.addShopButton[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px}.functionShopsModuleBtns[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{border-radius:10px;background-color:#a3b18a;height:50px;width:20%;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:50%}.furnitureModelInput[_ngcontent-%COMP%]{color:#fff;cursor:pointer;border-radius:10px;box-shadow:0 0 5px #fff;height:30px;padding:10px;align-content:center;justify-content:center;display:flex}.furnitureModelInput[_ngcontent-%COMP%]::file-selector-button{color:transparent;border-radius:50%;height:100%;aspect-ratio:1;border:none;background-color:transparent;background-image:url(/assets/images/addIcon.svg);background-repeat:no-repeat}.furnitureModelLabel[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1200px){.furnitureTitle[_ngcontent-%COMP%]{font-size:2vw}}@media (max-width: 1000px){app-create-furniture[_ngcontent-%COMP%]{width:calc(100% - 10px)}.leftPiece[_ngcontent-%COMP%]{gap:30px}.colorSlider[_ngcontent-%COMP%]{height:150px}.furnitureModelInput[_ngcontent-%COMP%]{height:25px}.furnitureTitle[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){.rightFunctionalSection[_ngcontent-%COMP%]{gap:10px}.furnitureTitle[_ngcontent-%COMP%]{font-size:3vw}.leftPiece[_ngcontent-%COMP%]{gap:0}.shopsTitle[_ngcontent-%COMP%], .descriptionTitle[_ngcontent-%COMP%]{border-radius:10px}.body[_ngcontent-%COMP%]{max-width:400px;margin-top:30px;gap:15px}.furnitureTitle[_ngcontent-%COMP%]{font-size:1.5rem;width:90%}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.colorSlider[_ngcontent-%COMP%]{width:100%;height:200px;margin-bottom:20px}.informationSpan[_ngcontent-%COMP%]{width:100%;flex-direction:column}.descriptionSpan[_ngcontent-%COMP%], .rightFunctionalSection[_ngcontent-%COMP%]{width:100%}.addModuleFormContent[_ngcontent-%COMP%]{width:calc(85vw - 40px);min-width:none;padding:20px}.shopsSpan[_ngcontent-%COMP%]{height:auto}.furnitureModelInput[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-top:10px}}.error-message[_ngcontent-%COMP%]{color:#f44;font-size:.8rem;margin-top:5px}.invalid[_ngcontent-%COMP%]{border-color:#f44!important;box-shadow:0 0 5px #ff444480}.addModuleInput.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#f44}']})}return n})();var Ff=(()=>{class n{transform(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=of({name:"costFormat",type:n,pure:!0})}return n})();var Fk=new Ie("WindowToken",typeof window<"u"&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var Lk=(()=>{class n{constructor(t,i,r){this.ngZone=t,this.document=i,this.window=r,this.copySubject=new Fn,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(t){this.config=t}copy(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});let i=this.copyFromContent(t);return i?this.pushCopyResponse({content:t,isSuccess:i}):this.pushCopyResponse({isSuccess:!1,content:t})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(t,i=!0){try{this.selectTarget(t);let r=this.copyText();return this.clearSelection(i?t:void 0,this.window),r&&this.isCopySuccessInIE11()}catch{return!1}}isCopySuccessInIE11(){let t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}copyFromContent(t,i=this.document.body){if(this.tempTextArea&&!i.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{i.appendChild(this.tempTextArea)}catch{throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;let r=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),r}destroy(t=this.document.body){this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(t,i){t&&t.focus(),i.getSelection()?.removeAllRanges()}createTempTextArea(t,i){let r=t.documentElement.getAttribute("dir")==="rtl",o;o=t.createElement("textarea"),o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[r?"right":"left"]="-9999px";let s=i.pageYOffset||t.documentElement.scrollTop;return o.style.top=s+"px",o.setAttribute("readonly",""),o}pushCopyResponse(t){this.copySubject.observers.length>0&&this.ngZone.run(()=>{this.copySubject.next(t)})}pushCopyReponse(t){this.pushCopyResponse(t)}}return n.\u0275fac=function(t){return new(t||n)(ze(Wn),ze(fn),ze(Fk,8))},n.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _c=(()=>{class n{httpModule;baseServiceUrl=ri+"furniture/card";constructor(t){this.httpModule=t}GETfurnitureCard(t,i){return at(this,null,function*(){let r=new Jt().set("furnitureCardId",t);i!==void 0&&(r=r.set("jwt",i));try{let o=yield tn(this.httpModule.get(this.baseServiceUrl,{params:r}));if(!o?.furnitureCard)throw new Error("Invalid response structure: furnitureCard missing");return{furnitureCard:wt(Oe({},o.furnitureCard),{colors:o.furnitureCard.colors.map(a=>({color:a.color,imagesData:{idMainImage:a.imagesData.idMainImage,images:a.imagesData.images.map(l=>ri+l)}}))}),authorMatched:o.authorMatched}}catch(o){throw console.error("Error in GETfurnitureCard:",o),o}})}POSTcreateFurnitureCard(t,i){let r=new Jt().set("jwt",i);return tn(this.httpModule.post(this.baseServiceUrl,t,{params:r}))}PUTupdateFurnitureCard(t,i,r){let o=new Jt().set("jwt",r).set("furnitureId",i);return tn(this.httpModule.put(this.baseServiceUrl,t,{params:o}))}DELETEfurnitureCard(t,i){let r=new Jt().set("jwt",t).set("furnitureCardId",i);return tn(this.httpModule.delete(this.baseServiceUrl,{params:r}))}static \u0275fac=function(i){return new(i||n)(ze(Li))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wte(n,e){if(n&1&&we(0,"app-image-slider",18),n&2){let t=_e(2);ne("imagesData",t.furnitureData.colors[t.currentColorId].imagesData)}}function $te(n,e){n&1&&(R(0,"div",19),we(1,"input",20)(2,"img",21),P())}function qte(n,e){if(n&1){let t=Rt();R(0,"button",22),Re("click",function(r){Be(t);let o=_e(2);return Ve(o.openFurnitureVariant(r.target))}),P()}if(n&2){let t=e.$implicit,i=e.index;ni("background-color",t.color),To("data-idColor",i)}}function Xte(n,e){if(n&1){let t=Rt();R(0,"span",23)(1,"a",24),te(2),Ea(3,"costFormat"),P(),R(4,"button",25),Re("click",function(){let r=Be(t).$implicit,o=_e(2);return Ve(o.copyShopLink(r.url))}),we(5,"img",26),P()()}if(n&2){let t=e.$implicit;W(),ne("href",t.url,lr),W(),Ln(Ma(3,3,t.cost)),W(2),ne("title","\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443: "+t.url)}}function Yte(n,e){if(n&1&&(R(0,"span",1)(1,"h1",2),te(2),P(),ke(3,Wte,1,1,"app-image-slider",3)(4,$te,3,0,"div",4),R(5,"span",5)(6,"span",6),we(7,"img",7),R(8,"span",8),ke(9,qte,1,3,"button",9),P()(),R(10,"span",10)(11,"span",11)(12,"div",12),te(13,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),P(),R(14,"div",13),te(15),P()(),R(16,"span",14)(17,"div",15),te(18,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B"),P(),R(19,"span",16),ke(20,Xte,6,5,"span",17),P()()()()()),n&2){let t=_e();W(2),Ln(t.furnitureData.name),W(),ne("ngIf",t.furnitureData.colors[t.currentColorId].imagesData),W(),ne("ngIf",!t.furnitureData.colors[t.currentColorId].imagesData),W(4),ni("--total-items",t.furnitureData.colors.length.toString()),W(),ne("ngForOf",t.furnitureData.colors),W(6),Ln(t.proccessDescription(t.furnitureData.description,t.furnitureData.proportions)),W(5),ne("ngForOf",t.furnitureData.shops)}}var j_=(()=>{class n{elementRef;clipboardService;furnitureCardService;errorHandler;constructor(t,i,r,o){this.elementRef=t,this.clipboardService=i,this.furnitureCardService=r,this.errorHandler=o}currentColorId=0;furnitureId;furnitureData;ngOnChanges(t){return at(this,null,function*(){if(this.furnitureId!==void 0)try{this.furnitureData=(yield this.furnitureCardService.GETfurnitureCard(this.furnitureId)).furnitureCard}catch(i){console.log(i)}})}openFurnitureVariant(t){let i=t,r=this.elementRef.nativeElement.querySelector(".colors"),o=i.getAttribute("data-idcolor");if(!o)return;let s=r.querySelectorAll(".colorVariant"),a=[],l=[];s.forEach((u,f)=>{f>+o?l=[...l,u]:f<+o&&(a=[...a,u])}),[i,...l,...a].forEach((u,f)=>{u.style.setProperty("--index",(f+1).toString())}),setTimeout(()=>{i.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+o,i.style.setProperty("margin-right","0")},1250)}proccessDescription(t,i){return`\u0428\u0438\u0440\u0438\u043D\u0430: ${i.width}\u043C
\u0414\u043B\u0438\u043D\u0430: ${i.length}\u043C
\u0412\u044B\u0441\u043E\u0442\u0430: ${i.height}\u043C
${t}`}copyShopLink(t){this.clipboardService.copyFromContent(t)}static \u0275fac=function(i){return new(i||n)(de(nn),de(Lk),de(_c),de(bi))};static \u0275cmp=vn({type:n,selectors:[["app-view-furniture"]],inputs:{furnitureId:"furnitureId",furnitureData:"furnitureData"},features:[ar],decls:1,vars:1,consts:[["class","body",4,"ngIf"],[1,"body"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle"],[3,"imagesData",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"colorSlider"],["loading","lazy","src","assets/images/paletteIcon.svg","alt","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0432\u0435\u0442","title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0432\u0435\u0442",1,"addColorBtn"],[1,"colors"],["class","colorVariant","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",3,"background-color","click",4,"ngFor","ngForOf"],[1,"informationSpan"],[1,"descriptionSpan"],["title","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",1,"descriptionTitle"],["title","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"descriptionInformation"],[1,"shopsSpan"],["title","\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",1,"shopsTitle"],[1,"shopsListSpan"],["class","shopFunctions",4,"ngFor","ngForOf"],[3,"imagesData"],[1,"uploadImagesDiv"],["type","file","accept",".png,.jpeg","title","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",1,"uploadImagesInput"],["loading","lazy","src","assets/images/uploadIcon.png","alt","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",1,"uploadImagesIcon"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442",1,"colorVariant",3,"click"],[1,"shopFunctions"],["title","\u0426\u0435\u043D\u0430",1,"furnitureCost",3,"href"],[1,"linkShop",3,"click","title"],["loading","lazy","src","assets/images/linkIcon.svg","alt","\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443"]],template:function(i,r){i&1&&ke(0,Yte,21,8,"span",0),i&2&&ne("ngIf",r.furnitureData)},dependencies:[B_,wi,Tn,ss,Ff],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;gap:30px;margin-bottom:15px;position:relative}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:200px;aspect-ratio:1;position:relative;--radius: 60px}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;box-shadow:0 0 10px #fff;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:30px;aspect-ratio:1;z-index:3;padding:5px;background-color:#000;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px;white-space:pre-line;font-size:16px}.shopsSpan[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#a3b18a;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;box-shadow:0 0 10px #fff;border:none;text-decoration:none}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#a3b18a;border-radius:0 10px 10px 0;border:none;place-content:center;display:flex;box-shadow:0 0 10px #fff;transition:all .5s ease-in-out;cursor:copy}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}@media (max-width: 1200px){.furnitureTitle[_ngcontent-%COMP%]{font-size:2vw}}@media (max-width: 1000px){app-view-furniture[_ngcontent-%COMP%]{width:calc(100% - 10px)}.colorSlider[_ngcontent-%COMP%]{height:200px}.furnitureTitle[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){.body[_ngcontent-%COMP%]{max-width:400px;margin:30px auto;gap:15px}.furnitureTitle[_ngcontent-%COMP%]{font-size:1.5rem;width:90%}.footer[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.colorSlider[_ngcontent-%COMP%]{width:100%;height:200px;margin-bottom:20px}.informationSpan[_ngcontent-%COMP%]{width:100%;flex-direction:column}.descriptionSpan[_ngcontent-%COMP%], .shopsSpan[_ngcontent-%COMP%]{width:100%}.descriptionTitle[_ngcontent-%COMP%], .shopsTitle[_ngcontent-%COMP%]{border-radius:10px}.descriptionInformation[_ngcontent-%COMP%]{padding:0 10px}}']})}return n})();var jx="176",Oc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Nc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CU=0,pA=1,TU=2;var mA=1,AU=2,Va=3,Js=0,Hr=1,gs=2,kl=0,Uu=1,gA=2,vA=3,yA=4,IU=5,Ac=100,DU=101,RU=102,PU=103,OU=104,NU=200,FU=201,LU=202,kU=203,yx=204,_x=205,UU=206,BU=207,VU=208,HU=209,zU=210,jU=211,GU=212,WU=213,$U=214,Gx=0,Wx=1,$x=2,Bu=3,qx=4,Xx=5,Yx=6,Zx=7,mg=0,qU=1,XU=2,Ul=0,YU=1,ZU=2,KU=3,JU=4,QU=5,eB=6,tB=7,J1="attached",nB="detached",Q1=300,Qu=301,ed=302,uh=303,Kx=304,gg=306,Qs=1e3,No=1001,Zf=1002,hr=1003,Jx=1004;var td=1005;var Ur=1006,dh=1007;var ia=1008;var ra=1009,_A=1010,xA=1011,fh=1012,Qx=1013,Fc=1014,vs=1015,hh=1016,ew=1017,tw=1018,ph=1020,wA=35902,bA=1021,EA=1022,ko=1023,Kf=1026,mh=1027,nw=1028,iw=1029,MA=1030,rw=1031;var ow=1033,vg=33776,yg=33777,_g=33778,xg=33779,sw=35840,aw=35841,lw=35842,cw=35843,uw=36196,dw=37492,fw=37496,hw=37808,pw=37809,mw=37810,gw=37811,vw=37812,yw=37813,_w=37814,xw=37815,ww=37816,bw=37817,Ew=37818,Mw=37819,Sw=37820,Cw=37821,wg=36492,Tw=36494,Aw=36495,SA=36283,Iw=36284,Dw=36285,Rw=36286;var Vu=2300,Hu=2301,vx=2302,eA=2400,tA=2401,nA=2402,iB=2500;var CA=0,bg=1,gh=2,rB=3200,oB=3201;var Eg=0,sB=1,Bl="",_n="srgb",pr="srgb-linear",Vm="linear",Vn="srgb";var ku=7680;var iA=519,aB=512,lB=513,cB=514,TA=515,uB=516,dB=517,fB=518,hB=519,xx=35044;var AA="300 es",Na=2e3,Hm=2001;var Fa=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},br=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],kk=1234567,Lm=Math.PI/180,zu=180/Math.PI;function fs(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(br[n&255]+br[n>>8&255]+br[n>>16&255]+br[n>>24&255]+"-"+br[e&255]+br[e>>8&255]+"-"+br[e>>16&15|64]+br[e>>24&255]+"-"+br[t&63|128]+br[t>>8&255]+"-"+br[t>>16&255]+br[t>>24&255]+br[i&255]+br[i>>8&255]+br[i>>16&255]+br[i>>24&255]).toLowerCase()}function Qt(n,e,t){return Math.max(e,Math.min(t,n))}function IA(n,e){return(n%e+e)%e}function Zte(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Kte(n,e,t){return n!==e?(t-n)/(e-n):0}function km(n,e,t){return(1-t)*n+t*e}function Jte(n,e,t,i){return km(n,e,1-Math.exp(-t*i))}function Qte(n,e=1){return e-Math.abs(IA(n,e*2)-e)}function ene(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function tne(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function nne(n,e){return n+Math.floor(Math.random()*(e-n+1))}function ine(n,e){return n+Math.random()*(e-n)}function rne(n){return n*(.5-Math.random())}function one(n){n!==void 0&&(kk=n);let e=kk+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function sne(n){return n*Lm}function ane(n){return n*zu}function lne(n){return(n&n-1)===0&&n!==0}function cne(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function une(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function dne(n,e,t,i,r){let o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),u=o((e+i)/2),f=s((e+i)/2),h=o((e-i)/2),p=s((e-i)/2),g=o((i-e)/2),v=s((i-e)/2);switch(r){case"XYX":n.set(a*f,l*h,l*p,a*u);break;case"YZY":n.set(l*p,a*f,l*h,a*u);break;case"ZXZ":n.set(l*h,l*p,a*f,a*u);break;case"XZX":n.set(a*f,l*v,l*g,a*u);break;case"YXY":n.set(l*g,a*f,l*v,a*u);break;case"ZYZ":n.set(l*v,l*g,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ks(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Un(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var qn={DEG2RAD:Lm,RAD2DEG:zu,generateUUID:fs,clamp:Qt,euclideanModulo:IA,mapLinear:Zte,inverseLerp:Kte,lerp:km,damp:Jte,pingpong:Qte,smoothstep:ene,smootherstep:tne,randInt:nne,randFloat:ine,randFloatSpread:rne,seededRandom:one,degToRad:sne,radToDeg:ane,isPowerOfTwo:lne,ceilPowerOfTwo:cne,floorPowerOfTwo:une,setQuaternionFromProperEuler:dne,normalize:Un,denormalize:Ks},We=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Gt=class n{constructor(e,t,i,r,o,s,a,l,u){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,u)}set(e,t,i,r,o,s,a,l,u){let f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=o,f[5]=l,f[6]=i,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],u=i[1],f=i[4],h=i[7],p=i[2],g=i[5],v=i[8],w=r[0],y=r[3],_=r[6],T=r[1],E=r[4],M=r[7],V=r[2],F=r[5],L=r[8];return o[0]=s*w+a*T+l*V,o[3]=s*y+a*E+l*F,o[6]=s*_+a*M+l*L,o[1]=u*w+f*T+h*V,o[4]=u*y+f*E+h*F,o[7]=u*_+f*M+h*L,o[2]=p*w+g*T+v*V,o[5]=p*y+g*E+v*F,o[8]=p*_+g*M+v*L,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8];return t*s*f-t*a*u-i*o*f+i*a*l+r*o*u-r*s*l}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=f*s-a*u,p=a*l-f*o,g=u*o-s*l,v=t*h+i*p+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);let w=1/v;return e[0]=h*w,e[1]=(r*u-f*i)*w,e[2]=(a*i-r*s)*w,e[3]=p*w,e[4]=(f*t-r*l)*w,e[5]=(r*o-a*t)*w,e[6]=g*w,e[7]=(i*l-u*t)*w,e[8]=(s*t-i*o)*w,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){let l=Math.cos(o),u=Math.sin(o);return this.set(i*l,i*u,-i*(l*s+u*a)+s+e,-r*u,r*l,-r*(-u*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(M1.makeScale(e,t)),this}rotate(e){return this.premultiply(M1.makeRotation(-e)),this}translate(e,t){return this.premultiply(M1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},M1=new Gt;function DA(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Jf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function pB(){let n=Jf("canvas");return n.style.display="block",n}var Uk={};function Mg(n){n in Uk||(Uk[n]=!0,console.warn(n))}function mB(n,e,t){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}}setTimeout(o,t)})}function gB(n){let e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function vB(n){let e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var Bk=new Gt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Vk=new Gt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function fne(){let n={enabled:!0,workingColorSpace:pr,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===Vn&&(r.r=Dl(r.r),r.g=Dl(r.g),r.b=Dl(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Vn&&(r.r=Yf(r.r),r.g=Yf(r.g),r.b=Yf(r.b))),r},fromWorkingColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},toWorkingColorSpace:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Bl?Vm:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[pr]:{primaries:e,whitePoint:i,transfer:Vm,toXYZ:Bk,fromXYZ:Vk,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:_n},outputColorSpaceConfig:{drawingBufferColorSpace:_n}},[_n]:{primaries:e,whitePoint:i,transfer:Vn,toXYZ:Bk,fromXYZ:Vk,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:_n}}}),n}var Bt=fne();function Dl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Yf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var Lf,wx=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Lf===void 0&&(Lf=Jf("canvas")),Lf.width=e.width,Lf.height=e.height;let r=Lf.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Lf}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Jf("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Dl(o[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Dl(t[i]/255)*255):t[i]=Dl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},hne=0,Qf=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:hne++}),this.uuid=fs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(S1(r[s].image)):o.push(S1(r[s]))}else o=S1(r);i.url=o}return t||(e.images[this.uuid]=i),i}};function S1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?wx.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var pne=0,zr=(()=>{class n extends Fa{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=No,o=No,s=Ur,a=ia,l=ko,u=ra,f=n.DEFAULT_ANISOTROPY,h=Bl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pne++}),this.uuid=fs(),this.name="",this.source=new Qf(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new We(0,0),this.repeat=new We(1,1),this.center=new We(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Q1)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Qs:t.x=t.x-Math.floor(t.x);break;case No:t.x=t.x<0?0:1;break;case Zf:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Qs:t.y=t.y-Math.floor(t.y);break;case No:t.y=t.y<0?0:1;break;case Zf:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=Q1,n.DEFAULT_ANISOTROPY=1,n})(),rn=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o,l=e.elements,u=l[0],f=l[4],h=l[8],p=l[1],g=l[5],v=l[9],w=l[2],y=l[6],_=l[10];if(Math.abs(f-p)<.01&&Math.abs(h-w)<.01&&Math.abs(v-y)<.01){if(Math.abs(f+p)<.1&&Math.abs(h+w)<.1&&Math.abs(v+y)<.1&&Math.abs(u+g+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let E=(u+1)/2,M=(g+1)/2,V=(_+1)/2,F=(f+p)/4,L=(h+w)/4,G=(v+y)/4;return E>M&&E>V?E<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(E),r=F/i,o=L/i):M>V?M<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(M),i=F/r,o=G/r):V<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(V),i=L/o,r=G/o),this.set(i,r,o,t),this}let T=Math.sqrt((y-v)*(y-v)+(h-w)*(h-w)+(p-f)*(p-f));return Math.abs(T)<.001&&(T=1),this.x=(y-v)/T,this.y=(h-w)/T,this.z=(p-f)/T,this.w=Math.acos((u+g+_-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this.z=Qt(this.z,e.z,t.z),this.w=Qt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this.z=Qt(this.z,e,t),this.w=Qt(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},bx=class extends Fa{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new rn(0,0,e,t),this.scissorTest=!1,this.viewport=new rn(0,0,e,t);let r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ur,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);let o=new zr(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new Qf(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},La=class extends bx{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},zm=class extends zr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=hr,this.minFilter=hr,this.wrapR=No,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var Ex=class extends zr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=hr,this.minFilter=hr,this.wrapR=No,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var li=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],u=i[r+1],f=i[r+2],h=i[r+3],p=o[s+0],g=o[s+1],v=o[s+2],w=o[s+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=g,e[t+2]=v,e[t+3]=w;return}if(h!==w||l!==p||u!==g||f!==v){let y=1-a,_=l*p+u*g+f*v+h*w,T=_>=0?1:-1,E=1-_*_;if(E>Number.EPSILON){let V=Math.sqrt(E),F=Math.atan2(V,_*T);y=Math.sin(y*F)/V,a=Math.sin(a*F)/V}let M=a*T;if(l=l*y+p*M,u=u*y+g*M,f=f*y+v*M,h=h*y+w*M,y===1-a){let V=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=V,u*=V,f*=V,h*=V}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,o,s){let a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],h=o[s],p=o[s+1],g=o[s+2],v=o[s+3];return e[t]=a*v+f*h+l*g-u*p,e[t+1]=l*v+f*p+u*h-a*g,e[t+2]=u*v+f*g+a*p-l*h,e[t+3]=f*v-a*h-l*p-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),h=a(o/2),p=l(i/2),g=l(r/2),v=l(o/2);switch(s){case"XYZ":this._x=p*f*h+u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h-p*g*v;break;case"YXZ":this._x=p*f*h+u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h+p*g*v;break;case"ZXY":this._x=p*f*h-u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h-p*g*v;break;case"ZYX":this._x=p*f*h-u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h+p*g*v;break;case"YZX":this._x=p*f*h+u*g*v,this._y=u*g*h+p*f*v,this._z=u*f*v-p*g*h,this._w=u*f*h-p*g*v;break;case"XZY":this._x=p*f*h-u*g*v,this._y=u*g*h-p*f*v,this._z=u*f*v+p*g*h,this._w=u*f*h+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],u=t[2],f=t[6],h=t[10],p=i+a+h;if(p>0){let g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-l)*g,this._y=(o-u)*g,this._z=(s-r)*g}else if(i>a&&i>h){let g=2*Math.sqrt(1+i-a-h);this._w=(f-l)/g,this._x=.25*g,this._y=(r+s)/g,this._z=(o+u)/g}else if(a>h){let g=2*Math.sqrt(1+a-i-h);this._w=(o-u)/g,this._x=(r+s)/g,this._y=.25*g,this._z=(l+f)/g}else{let g=2*Math.sqrt(1+h-i-a);this._w=(s-r)/g,this._x=(o+u)/g,this._y=(l+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qt(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,u=t._z,f=t._w;return this._x=i*f+s*a+r*u-o*l,this._y=r*f+s*l+o*a-i*u,this._z=o*f+s*u+i*l-r*a,this._w=s*f-i*a-r*l-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let g=1-t;return this._w=g*s+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*o+t*this._z,this.normalize(),this}let u=Math.sqrt(l),f=Math.atan2(u,a),h=Math.sin((1-t)*f)/u,p=Math.sin(t*f)/u;return this._w=s*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=o*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},B=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Hk.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Hk.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,u=2*(s*r-a*i),f=2*(a*t-o*r),h=2*(o*i-s*t);return this.x=t+l*u+s*h-a*f,this.y=i+l*f+a*u-o*h,this.z=r+l*h+o*f-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this.z=Qt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this.z=Qt(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return C1.copy(this).projectOnVector(e),this.sub(C1)}reflect(e){return this.sub(C1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},C1=new B,Hk=new li,Br=class{constructor(e=new B(1/0,1/0,1/0),t=new B(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Xs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Xs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Xs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Xs):Xs.fromBufferAttribute(o,s),Xs.applyMatrix4(e.matrixWorld),this.expandByPoint(Xs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),G_.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),G_.copy(i.boundingBox)),G_.applyMatrix4(e.matrixWorld),this.union(G_)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Xs),Xs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Tm),W_.subVectors(this.max,Tm),kf.subVectors(e.a,Tm),Uf.subVectors(e.b,Tm),Bf.subVectors(e.c,Tm),xc.subVectors(Uf,kf),wc.subVectors(Bf,Uf),Ou.subVectors(kf,Bf);let t=[0,-xc.z,xc.y,0,-wc.z,wc.y,0,-Ou.z,Ou.y,xc.z,0,-xc.x,wc.z,0,-wc.x,Ou.z,0,-Ou.x,-xc.y,xc.x,0,-wc.y,wc.x,0,-Ou.y,Ou.x,0];return!T1(t,kf,Uf,Bf,W_)||(t=[1,0,0,0,1,0,0,0,1],!T1(t,kf,Uf,Bf,W_))?!1:($_.crossVectors(xc,wc),t=[$_.x,$_.y,$_.z],T1(t,kf,Uf,Bf,W_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Xs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Xs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(El[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),El[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),El[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),El[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),El[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),El[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),El[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),El[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(El),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},El=[new B,new B,new B,new B,new B,new B,new B,new B],Xs=new B,G_=new Br,kf=new B,Uf=new B,Bf=new B,xc=new B,wc=new B,Ou=new B,Tm=new B,W_=new B,$_=new B,Nu=new B;function T1(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Nu.fromArray(n,o);let a=r.x*Math.abs(Nu.x)+r.y*Math.abs(Nu.y)+r.z*Math.abs(Nu.z),l=e.dot(Nu),u=t.dot(Nu),f=i.dot(Nu);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}var mne=new Br,Am=new B,A1=new B,co=class{constructor(e=new B,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):mne.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Am.subVectors(e,this.center);let t=Am.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Am,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(A1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Am.copy(e.center).add(A1)),this.expandByPoint(Am.copy(e.center).sub(A1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ml=new B,I1=new B,q_=new B,bc=new B,D1=new B,X_=new B,R1=new B,ka=class{constructor(e=new B,t=new B(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ml)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Ml.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ml.copy(this.origin).addScaledVector(this.direction,t),Ml.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){I1.copy(e).add(t).multiplyScalar(.5),q_.copy(t).sub(e).normalize(),bc.copy(this.origin).sub(I1);let o=e.distanceTo(t)*.5,s=-this.direction.dot(q_),a=bc.dot(this.direction),l=-bc.dot(q_),u=bc.lengthSq(),f=Math.abs(1-s*s),h,p,g,v;if(f>0)if(h=s*l-a,p=s*a-l,v=o*f,h>=0)if(p>=-v)if(p<=v){let w=1/f;h*=w,p*=w,g=h*(h+s*p+2*a)+p*(s*h+p+2*l)+u}else p=o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;else p=-o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;else p<=-v?(h=Math.max(0,-(-s*o+a)),p=h>0?-o:Math.min(Math.max(-o,-l),o),g=-h*h+p*(p+2*l)+u):p<=v?(h=0,p=Math.min(Math.max(-o,-l),o),g=p*(p+2*l)+u):(h=Math.max(0,-(s*o+a)),p=h>0?o:Math.min(Math.max(-o,-l),o),g=-h*h+p*(p+2*l)+u);else p=s>0?-o:o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(I1).addScaledVector(q_,p),g}intersectSphere(e,t){Ml.subVectors(e.center,this.origin);let i=Ml.dot(this.direction),r=Ml.dot(Ml)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l,u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),f>=0?(o=(e.min.y-p.y)*f,s=(e.max.y-p.y)*f):(o=(e.max.y-p.y)*f,s=(e.min.y-p.y)*f),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ml)!==null}intersectTriangle(e,t,i,r,o){D1.subVectors(t,e),X_.subVectors(i,e),R1.crossVectors(D1,X_);let s=this.direction.dot(R1),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;bc.subVectors(this.origin,e);let l=a*this.direction.dot(X_.crossVectors(bc,X_));if(l<0)return null;let u=a*this.direction.dot(D1.cross(bc));if(u<0||l+u>s)return null;let f=-a*bc.dot(R1);return f<0?null:this.at(f/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ct=class n{constructor(e,t,i,r,o,s,a,l,u,f,h,p,g,v,w,y){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,u,f,h,p,g,v,w,y)}set(e,t,i,r,o,s,a,l,u,f,h,p,g,v,w,y){let _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=o,_[5]=s,_[9]=a,_[13]=l,_[2]=u,_[6]=f,_[10]=h,_[14]=p,_[3]=g,_[7]=v,_[11]=w,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Vf.setFromMatrixColumn(e,0).length(),o=1/Vf.setFromMatrixColumn(e,1).length(),s=1/Vf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(o),h=Math.sin(o);if(e.order==="XYZ"){let p=s*f,g=s*h,v=a*f,w=a*h;t[0]=l*f,t[4]=-l*h,t[8]=u,t[1]=g+v*u,t[5]=p-w*u,t[9]=-a*l,t[2]=w-p*u,t[6]=v+g*u,t[10]=s*l}else if(e.order==="YXZ"){let p=l*f,g=l*h,v=u*f,w=u*h;t[0]=p+w*a,t[4]=v*a-g,t[8]=s*u,t[1]=s*h,t[5]=s*f,t[9]=-a,t[2]=g*a-v,t[6]=w+p*a,t[10]=s*l}else if(e.order==="ZXY"){let p=l*f,g=l*h,v=u*f,w=u*h;t[0]=p-w*a,t[4]=-s*h,t[8]=v+g*a,t[1]=g+v*a,t[5]=s*f,t[9]=w-p*a,t[2]=-s*u,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){let p=s*f,g=s*h,v=a*f,w=a*h;t[0]=l*f,t[4]=v*u-g,t[8]=p*u+w,t[1]=l*h,t[5]=w*u+p,t[9]=g*u-v,t[2]=-u,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){let p=s*l,g=s*u,v=a*l,w=a*u;t[0]=l*f,t[4]=w-p*h,t[8]=v*h+g,t[1]=h,t[5]=s*f,t[9]=-a*f,t[2]=-u*f,t[6]=g*h+v,t[10]=p-w*h}else if(e.order==="XZY"){let p=s*l,g=s*u,v=a*l,w=a*u;t[0]=l*f,t[4]=-h,t[8]=u*f,t[1]=p*h+w,t[5]=s*f,t[9]=g*h-v,t[2]=v*h-g,t[6]=a*f,t[10]=w*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gne,e,vne)}lookAt(e,t,i){let r=this.elements;return Po.subVectors(e,t),Po.lengthSq()===0&&(Po.z=1),Po.normalize(),Ec.crossVectors(i,Po),Ec.lengthSq()===0&&(Math.abs(i.z)===1?Po.x+=1e-4:Po.z+=1e-4,Po.normalize(),Ec.crossVectors(i,Po)),Ec.normalize(),Y_.crossVectors(Po,Ec),r[0]=Ec.x,r[4]=Y_.x,r[8]=Po.x,r[1]=Ec.y,r[5]=Y_.y,r[9]=Po.y,r[2]=Ec.z,r[6]=Y_.z,r[10]=Po.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],u=i[12],f=i[1],h=i[5],p=i[9],g=i[13],v=i[2],w=i[6],y=i[10],_=i[14],T=i[3],E=i[7],M=i[11],V=i[15],F=r[0],L=r[4],G=r[8],O=r[12],I=r[1],z=r[5],he=r[9],ae=r[13],Te=r[2],be=r[6],q=r[10],ie=r[14],$=r[3],ge=r[7],Ue=r[11],tt=r[15];return o[0]=s*F+a*I+l*Te+u*$,o[4]=s*L+a*z+l*be+u*ge,o[8]=s*G+a*he+l*q+u*Ue,o[12]=s*O+a*ae+l*ie+u*tt,o[1]=f*F+h*I+p*Te+g*$,o[5]=f*L+h*z+p*be+g*ge,o[9]=f*G+h*he+p*q+g*Ue,o[13]=f*O+h*ae+p*ie+g*tt,o[2]=v*F+w*I+y*Te+_*$,o[6]=v*L+w*z+y*be+_*ge,o[10]=v*G+w*he+y*q+_*Ue,o[14]=v*O+w*ae+y*ie+_*tt,o[3]=T*F+E*I+M*Te+V*$,o[7]=T*L+E*z+M*be+V*ge,o[11]=T*G+E*he+M*q+V*Ue,o[15]=T*O+E*ae+M*ie+V*tt,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],u=e[13],f=e[2],h=e[6],p=e[10],g=e[14],v=e[3],w=e[7],y=e[11],_=e[15];return v*(+o*l*h-r*u*h-o*a*p+i*u*p+r*a*g-i*l*g)+w*(+t*l*g-t*u*p+o*s*p-r*s*g+r*u*f-o*l*f)+y*(+t*u*h-t*a*g-o*s*h+i*s*g+o*a*f-i*u*f)+_*(-r*a*f-t*l*h+t*a*p+r*s*h-i*s*p+i*l*f)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=e[9],p=e[10],g=e[11],v=e[12],w=e[13],y=e[14],_=e[15],T=h*y*u-w*p*u+w*l*g-a*y*g-h*l*_+a*p*_,E=v*p*u-f*y*u-v*l*g+s*y*g+f*l*_-s*p*_,M=f*w*u-v*h*u+v*a*g-s*w*g-f*a*_+s*h*_,V=v*h*l-f*w*l-v*a*p+s*w*p+f*a*y-s*h*y,F=t*T+i*E+r*M+o*V;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let L=1/F;return e[0]=T*L,e[1]=(w*p*o-h*y*o-w*r*g+i*y*g+h*r*_-i*p*_)*L,e[2]=(a*y*o-w*l*o+w*r*u-i*y*u-a*r*_+i*l*_)*L,e[3]=(h*l*o-a*p*o-h*r*u+i*p*u+a*r*g-i*l*g)*L,e[4]=E*L,e[5]=(f*y*o-v*p*o+v*r*g-t*y*g-f*r*_+t*p*_)*L,e[6]=(v*l*o-s*y*o-v*r*u+t*y*u+s*r*_-t*l*_)*L,e[7]=(s*p*o-f*l*o+f*r*u-t*p*u-s*r*g+t*l*g)*L,e[8]=M*L,e[9]=(v*h*o-f*w*o-v*i*g+t*w*g+f*i*_-t*h*_)*L,e[10]=(s*w*o-v*a*o+v*i*u-t*w*u-s*i*_+t*a*_)*L,e[11]=(f*a*o-s*h*o-f*i*u+t*h*u+s*i*g-t*a*g)*L,e[12]=V*L,e[13]=(f*w*r-v*h*r+v*i*p-t*w*p-f*i*y+t*h*y)*L,e[14]=(v*a*r-s*w*r-v*i*l+t*w*l+s*i*y-t*a*y)*L,e[15]=(s*h*r-f*a*r+f*i*l-t*h*l-s*i*p+t*a*p)*L,this}scale(e){let t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,u=o*s,f=o*a;return this.set(u*s+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*s,0,u*l-r*a,f*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,u=o+o,f=s+s,h=a+a,p=o*u,g=o*f,v=o*h,w=s*f,y=s*h,_=a*h,T=l*u,E=l*f,M=l*h,V=i.x,F=i.y,L=i.z;return r[0]=(1-(w+_))*V,r[1]=(g+M)*V,r[2]=(v-E)*V,r[3]=0,r[4]=(g-M)*F,r[5]=(1-(p+_))*F,r[6]=(y+T)*F,r[7]=0,r[8]=(v+E)*L,r[9]=(y-T)*L,r[10]=(1-(p+w))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,o=Vf.set(r[0],r[1],r[2]).length(),s=Vf.set(r[4],r[5],r[6]).length(),a=Vf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Ys.copy(this);let u=1/o,f=1/s,h=1/a;return Ys.elements[0]*=u,Ys.elements[1]*=u,Ys.elements[2]*=u,Ys.elements[4]*=f,Ys.elements[5]*=f,Ys.elements[6]*=f,Ys.elements[8]*=h,Ys.elements[9]*=h,Ys.elements[10]*=h,t.setFromRotationMatrix(Ys),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=Na){let l=this.elements,u=2*o/(t-e),f=2*o/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r),g,v;if(a===Na)g=-(s+o)/(s-o),v=-2*s*o/(s-o);else if(a===Hm)g=-s/(s-o),v=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=Na){let l=this.elements,u=1/(t-e),f=1/(i-r),h=1/(s-o),p=(t+e)*u,g=(i+r)*f,v,w;if(a===Na)v=(s+o)*h,w=-2*h;else if(a===Hm)v=o*h,w=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=w,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Vf=new B,Ys=new ct,gne=new B(0,0,0),vne=new B(1,1,1),Ec=new B,Y_=new B,Po=new B,zk=new ct,jk=new li,nr=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let o=t.elements,s=o[0],a=o[4],l=o[8],u=o[1],f=o[5],h=o[9],p=o[2],g=o[6],v=o[10];switch(i){case"XYZ":this._y=Math.asin(Qt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(g,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Qt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Qt(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Qt(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(Qt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-Qt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return zk.makeRotationFromQuaternion(t),this.setFromRotationMatrix(zk,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return jk.setFromEuler(this),this.setFromQuaternion(jk,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),eh=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},yne=0,Gk=new B,Hf=new li,Sl=new ct,Z_=new B,Im=new B,_ne=new B,xne=new li,Wk=new B(1,0,0),$k=new B(0,1,0),qk=new B(0,0,1),Xk={type:"added"},wne={type:"removed"},zf={type:"childadded",child:null},P1={type:"childremoved",child:null},ci=(()=>{class n extends Fa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yne++}),this.uuid=fs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new B,i=new nr,r=new li,o=new B(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ct},normalMatrix:{value:new Gt}}),this.matrix=new ct,this.matrixWorld=new ct,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new eh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Hf.setFromAxisAngle(t,i),this.quaternion.multiply(Hf),this}rotateOnWorldAxis(t,i){return Hf.setFromAxisAngle(t,i),this.quaternion.premultiply(Hf),this}rotateX(t){return this.rotateOnAxis(Wk,t)}rotateY(t){return this.rotateOnAxis($k,t)}rotateZ(t){return this.rotateOnAxis(qk,t)}translateOnAxis(t,i){return Gk.copy(t).applyQuaternion(this.quaternion),this.position.add(Gk.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Wk,t)}translateY(t){return this.translateOnAxis($k,t)}translateZ(t){return this.translateOnAxis(qk,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Sl.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Z_.copy(t):Z_.set(t,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),Im.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sl.lookAt(Im,Z_,this.up):Sl.lookAt(Z_,Im,this.up),this.quaternion.setFromRotationMatrix(Sl),o&&(Sl.extractRotation(o.matrixWorld),Hf.setFromRotationMatrix(Sl),this.quaternion.premultiply(Hf.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Xk),zf.child=t,this.dispatchEvent(zf),zf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(wne),P1.child=t,this.dispatchEvent(P1),P1.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Sl.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Sl.multiply(t.parent.matrixWorld)),t.applyMatrix4(Sl),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Xk),zf.child=t,this.dispatchEvent(zf),zf.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Im,t,_ne),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Im,xne,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(l=>wt(Oe({},l),{boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),o.instanceInfo=this._instanceInfo.map(l=>Oe({},l)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(t),o.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(o.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let u=l.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){let p=u[f];s(t.shapes,p)}else s(t.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(t.materials,this.material[u]));o.material=l}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let u=this.animations[l];o.animations.push(s(t.animations,u))}}if(i){let l=a(t.geometries),u=a(t.materials),f=a(t.textures),h=a(t.images),p=a(t.shapes),g=a(t.skeletons),v=a(t.animations),w=a(t.nodes);l.length>0&&(r.geometries=l),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),w.length>0&&(r.nodes=w)}return r.object=o,r;function a(l){let u=[];for(let f in l){let h=l[f];delete h.metadata,u.push(h)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let o=t.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new B(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Zs=new B,Cl=new B,O1=new B,Tl=new B,jf=new B,Gf=new B,Yk=new B,N1=new B,F1=new B,L1=new B,k1=new rn,U1=new rn,B1=new rn,Cc=class n{constructor(e=new B,t=new B,i=new B){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Zs.subVectors(e,t),r.cross(Zs);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){Zs.subVectors(r,t),Cl.subVectors(i,t),O1.subVectors(e,t);let s=Zs.dot(Zs),a=Zs.dot(Cl),l=Zs.dot(O1),u=Cl.dot(Cl),f=Cl.dot(O1),h=s*u-a*a;if(h===0)return o.set(0,0,0),null;let p=1/h,g=(u*l-a*f)*p,v=(s*f-a*l)*p;return o.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Tl)===null?!1:Tl.x>=0&&Tl.y>=0&&Tl.x+Tl.y<=1}static getInterpolation(e,t,i,r,o,s,a,l){return this.getBarycoord(e,t,i,r,Tl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Tl.x),l.addScaledVector(s,Tl.y),l.addScaledVector(a,Tl.z),l)}static getInterpolatedAttribute(e,t,i,r,o,s){return k1.setScalar(0),U1.setScalar(0),B1.setScalar(0),k1.fromBufferAttribute(e,t),U1.fromBufferAttribute(e,i),B1.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(k1,o.x),s.addScaledVector(U1,o.y),s.addScaledVector(B1,o.z),s}static isFrontFacing(e,t,i,r){return Zs.subVectors(i,t),Cl.subVectors(e,t),Zs.cross(Cl).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zs.subVectors(this.c,this.b),Cl.subVectors(this.a,this.b),Zs.cross(Cl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,o=this.c,s,a;jf.subVectors(r,i),Gf.subVectors(o,i),N1.subVectors(e,i);let l=jf.dot(N1),u=Gf.dot(N1);if(l<=0&&u<=0)return t.copy(i);F1.subVectors(e,r);let f=jf.dot(F1),h=Gf.dot(F1);if(f>=0&&h<=f)return t.copy(r);let p=l*h-f*u;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(i).addScaledVector(jf,s);L1.subVectors(e,o);let g=jf.dot(L1),v=Gf.dot(L1);if(v>=0&&g<=v)return t.copy(o);let w=g*u-l*v;if(w<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(i).addScaledVector(Gf,a);let y=f*v-g*h;if(y<=0&&h-f>=0&&g-v>=0)return Yk.subVectors(o,r),a=(h-f)/(h-f+(g-v)),t.copy(r).addScaledVector(Yk,a);let _=1/(y+w+p);return s=w*_,a=p*_,t.copy(i).addScaledVector(jf,s).addScaledVector(Gf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},yB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mc={h:0,s:0,l:0},K_={h:0,s:0,l:0};function V1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var ft=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=_n){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Bt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Bt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Bt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Bt.workingColorSpace){if(e=IA(e,1),t=Qt(t,0,1),i=Qt(i,0,1),t===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=V1(s,o,e+1/3),this.g=V1(s,o,e),this.b=V1(s,o,e-1/3)}return Bt.toWorkingColorSpace(this,r),this}setStyle(e,t=_n){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=_n){let i=yB[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Dl(e.r),this.g=Dl(e.g),this.b=Dl(e.b),this}copyLinearToSRGB(e){return this.r=Yf(e.r),this.g=Yf(e.g),this.b=Yf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=_n){return Bt.fromWorkingColorSpace(Er.copy(this),e),Math.round(Qt(Er.r*255,0,255))*65536+Math.round(Qt(Er.g*255,0,255))*256+Math.round(Qt(Er.b*255,0,255))}getHexString(e=_n){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Bt.workingColorSpace){Bt.fromWorkingColorSpace(Er.copy(this),t);let i=Er.r,r=Er.g,o=Er.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,u,f=(a+s)/2;if(a===s)l=0,u=0;else{let h=s-a;switch(u=f<=.5?h/(s+a):h/(2-s-a),s){case i:l=(r-o)/h+(r<o?6:0);break;case r:l=(o-i)/h+2;break;case o:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=Bt.workingColorSpace){return Bt.fromWorkingColorSpace(Er.copy(this),t),e.r=Er.r,e.g=Er.g,e.b=Er.b,e}getStyle(e=_n){Bt.fromWorkingColorSpace(Er.copy(this),e);let t=Er.r,i=Er.g,r=Er.b;return e!==_n?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Mc),this.setHSL(Mc.h+e,Mc.s+t,Mc.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Mc),e.getHSL(K_);let i=km(Mc.h,K_.h,t),r=km(Mc.s,K_.s,t),o=km(Mc.l,K_.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Er=new ft;ft.NAMES=yB;var bne=0,$i=class extends Fa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bne++}),this.uuid=fs(),this.name="",this.type="Material",this.blending=Uu,this.side=Js,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=yx,this.blendDst=_x,this.blendEquation=Ac,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ft(0,0,0),this.blendAlpha=0,this.depthFunc=Bu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ku,this.stencilZFail=ku,this.stencilZPass=ku,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Uu&&(i.blending=this.blending),this.side!==Js&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==yx&&(i.blendSrc=this.blendSrc),this.blendDst!==_x&&(i.blendDst=this.blendDst),this.blendEquation!==Ac&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Bu&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==iA&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ku&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ku&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ku&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(t){let o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Fo=class extends $i{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nr,this.combine=mg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var Ui=new B,J_=new We,Ene=0,Bi=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Ene++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=xx,this.updateRanges=[],this.gpuType=vs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)J_.fromBufferAttribute(this,t),J_.applyMatrix3(e),this.setXY(t,J_.x,J_.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ui.fromBufferAttribute(this,t),Ui.applyMatrix3(e),this.setXYZ(t,Ui.x,Ui.y,Ui.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ui.fromBufferAttribute(this,t),Ui.applyMatrix4(e),this.setXYZ(t,Ui.x,Ui.y,Ui.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ui.fromBufferAttribute(this,t),Ui.applyNormalMatrix(e),this.setXYZ(t,Ui.x,Ui.y,Ui.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ui.fromBufferAttribute(this,t),Ui.transformDirection(e),this.setXYZ(t,Ui.x,Ui.y,Ui.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ks(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Un(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ks(t,this.array)),t}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ks(t,this.array)),t}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ks(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ks(t,this.array)),t}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array),o=Un(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==xx&&(e.usage=this.usage),e}};var ju=class extends Bi{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var jm=class extends Bi{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var On=class extends Bi{constructor(e,t,i){super(new Float32Array(e),t,i)}},Mne=0,us=new ct,H1=new ci,Wf=new B,Oo=new Br,Dm=new Br,tr=new B,Pi=class n extends Fa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Mne++}),this.uuid=fs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(DA(e)?jm:ju)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new Gt().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return us.makeRotationFromQuaternion(e),this.applyMatrix4(us),this}rotateX(e){return us.makeRotationX(e),this.applyMatrix4(us),this}rotateY(e){return us.makeRotationY(e),this.applyMatrix4(us),this}rotateZ(e){return us.makeRotationZ(e),this.applyMatrix4(us),this}translate(e,t,i){return us.makeTranslation(e,t,i),this.applyMatrix4(us),this}scale(e,t,i){return us.makeScale(e,t,i),this.applyMatrix4(us),this}lookAt(e){return H1.lookAt(e),H1.updateMatrix(),this.applyMatrix4(H1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wf).negate(),this.translate(Wf.x,Wf.y,Wf.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new On(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Br);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new B(-1/0,-1/0,-1/0),new B(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let o=t[i];Oo.setFromBufferAttribute(o),this.morphTargetsRelative?(tr.addVectors(this.boundingBox.min,Oo.min),this.boundingBox.expandByPoint(tr),tr.addVectors(this.boundingBox.max,Oo.max),this.boundingBox.expandByPoint(tr)):(this.boundingBox.expandByPoint(Oo.min),this.boundingBox.expandByPoint(Oo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new B,1/0);return}if(e){let i=this.boundingSphere.center;if(Oo.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];Dm.setFromBufferAttribute(a),this.morphTargetsRelative?(tr.addVectors(Oo.min,Dm.min),Oo.expandByPoint(tr),tr.addVectors(Oo.max,Dm.max),Oo.expandByPoint(tr)):(Oo.expandByPoint(Dm.min),Oo.expandByPoint(Dm.max))}Oo.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)tr.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(tr));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)tr.fromBufferAttribute(a,u),l&&(Wf.fromBufferAttribute(e,u),tr.add(Wf)),r=Math.max(r,i.distanceToSquared(tr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Bi(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let G=0;G<i.count;G++)a[G]=new B,l[G]=new B;let u=new B,f=new B,h=new B,p=new We,g=new We,v=new We,w=new B,y=new B;function _(G,O,I){u.fromBufferAttribute(i,G),f.fromBufferAttribute(i,O),h.fromBufferAttribute(i,I),p.fromBufferAttribute(o,G),g.fromBufferAttribute(o,O),v.fromBufferAttribute(o,I),f.sub(u),h.sub(u),g.sub(p),v.sub(p);let z=1/(g.x*v.y-v.x*g.y);isFinite(z)&&(w.copy(f).multiplyScalar(v.y).addScaledVector(h,-g.y).multiplyScalar(z),y.copy(h).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(z),a[G].add(w),a[O].add(w),a[I].add(w),l[G].add(y),l[O].add(y),l[I].add(y))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let G=0,O=T.length;G<O;++G){let I=T[G],z=I.start,he=I.count;for(let ae=z,Te=z+he;ae<Te;ae+=3)_(e.getX(ae+0),e.getX(ae+1),e.getX(ae+2))}let E=new B,M=new B,V=new B,F=new B;function L(G){V.fromBufferAttribute(r,G),F.copy(V);let O=a[G];E.copy(O),E.sub(V.multiplyScalar(V.dot(O))).normalize(),M.crossVectors(F,O);let z=M.dot(l[G])<0?-1:1;s.setXYZW(G,E.x,E.y,E.z,z)}for(let G=0,O=T.length;G<O;++G){let I=T[G],z=I.start,he=I.count;for(let ae=z,Te=z+he;ae<Te;ae+=3)L(e.getX(ae+0)),L(e.getX(ae+1)),L(e.getX(ae+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Bi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);let r=new B,o=new B,s=new B,a=new B,l=new B,u=new B,f=new B,h=new B;if(e)for(let p=0,g=e.count;p<g;p+=3){let v=e.getX(p+0),w=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,v),o.fromBufferAttribute(t,w),s.fromBufferAttribute(t,y),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,w),u.fromBufferAttribute(i,y),a.add(f),l.add(f),u.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(w,l.x,l.y,l.z),i.setXYZ(y,u.x,u.y,u.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),o.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)tr.fromBufferAttribute(e,t),tr.normalize(),e.setXYZ(t,tr.x,tr.y,tr.z)}toNonIndexed(){function e(a,l){let u=a.array,f=a.itemSize,h=a.normalized,p=new u.constructor(l.length*f),g=0,v=0;for(let w=0,y=l.length;w<y;w++){a.isInterleavedBufferAttribute?g=l[w]*a.data.stride+a.offset:g=l[w]*f;for(let _=0;_<f;_++)p[v++]=u[g++]}return new Bi(p,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],u=e(l,i);t.setAttribute(a,u)}let o=this.morphAttributes;for(let a in o){let l=[],u=o[a];for(let f=0,h=u.length;f<h;f++){let p=u[f],g=e(p,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let u=s[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let l in i){let u=i[l];e.data.attributes[l]=u.toJSON(e.data)}let r={},o=!1;for(let l in this.morphAttributes){let u=this.morphAttributes[l],f=[];for(let h=0,p=u.length;h<p;h++){let g=u[h];f.push(g.toJSON(e.data))}f.length>0&&(r[l]=f,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let u in r){let f=r[u];this.setAttribute(u,f.clone(t))}let o=e.morphAttributes;for(let u in o){let f=[],h=o[u];for(let p=0,g=h.length;p<g;p++)f.push(h[p].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let u=0,f=s.length;u<f;u++){let h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},Zk=new ct,Fu=new ka,Q_=new co,Kk=new B,ex=new B,tx=new B,nx=new B,z1=new B,ix=new B,Jk=new B,rx=new B,ui=class extends ci{constructor(e=new Pi,t=new Fo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){ix.set(0,0,0);for(let l=0,u=o.length;l<u;l++){let f=a[l],h=o[l];f!==0&&(z1.fromBufferAttribute(h,e),s?ix.addScaledVector(z1,f):ix.addScaledVector(z1.sub(t),f))}t.add(ix)}return t}raycast(e,t){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Q_.copy(i.boundingSphere),Q_.applyMatrix4(o),Fu.copy(e.ray).recast(e.near),!(Q_.containsPoint(Fu.origin)===!1&&(Fu.intersectSphere(Q_,Kk)===null||Fu.origin.distanceToSquared(Kk)>(e.far-e.near)**2))&&(Zk.copy(o).invert(),Fu.copy(e.ray).applyMatrix4(Zk),!(i.boundingBox!==null&&Fu.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Fu)))}_computeIntersections(e,t,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,f=o.attributes.uv1,h=o.attributes.normal,p=o.groups,g=o.drawRange;if(a!==null)if(Array.isArray(s))for(let v=0,w=p.length;v<w;v++){let y=p[v],_=s[y.materialIndex],T=Math.max(y.start,g.start),E=Math.min(a.count,Math.min(y.start+y.count,g.start+g.count));for(let M=T,V=E;M<V;M+=3){let F=a.getX(M),L=a.getX(M+1),G=a.getX(M+2);r=ox(this,_,e,i,u,f,h,F,L,G),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{let v=Math.max(0,g.start),w=Math.min(a.count,g.start+g.count);for(let y=v,_=w;y<_;y+=3){let T=a.getX(y),E=a.getX(y+1),M=a.getX(y+2);r=ox(this,s,e,i,u,f,h,T,E,M),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let v=0,w=p.length;v<w;v++){let y=p[v],_=s[y.materialIndex],T=Math.max(y.start,g.start),E=Math.min(l.count,Math.min(y.start+y.count,g.start+g.count));for(let M=T,V=E;M<V;M+=3){let F=M,L=M+1,G=M+2;r=ox(this,_,e,i,u,f,h,F,L,G),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{let v=Math.max(0,g.start),w=Math.min(l.count,g.start+g.count);for(let y=v,_=w;y<_;y+=3){let T=y,E=y+1,M=y+2;r=ox(this,s,e,i,u,f,h,T,E,M),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}};function Sne(n,e,t,i,r,o,s,a){let l;if(e.side===Hr?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,e.side===Js,a),l===null)return null;rx.copy(a),rx.applyMatrix4(n.matrixWorld);let u=t.ray.origin.distanceTo(rx);return u<t.near||u>t.far?null:{distance:u,point:rx.clone(),object:n}}function ox(n,e,t,i,r,o,s,a,l,u){n.getVertexPosition(a,ex),n.getVertexPosition(l,tx),n.getVertexPosition(u,nx);let f=Sne(n,e,t,i,ex,tx,nx,Jk);if(f){let h=new B;Cc.getBarycoord(Jk,ex,tx,nx,h),r&&(f.uv=Cc.getInterpolatedAttribute(r,a,l,u,h,new We)),o&&(f.uv1=Cc.getInterpolatedAttribute(o,a,l,u,h,new We)),s&&(f.normal=Cc.getInterpolatedAttribute(s,a,l,u,h,new B),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));let p={a,b:l,c:u,normal:new B,materialIndex:0};Cc.getNormal(ex,tx,nx,p.normal),f.face=p,f.barycoord=h}return f}var th=class n extends Pi{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],u=[],f=[],h=[],p=0,g=0;v("z","y","x",-1,-1,i,t,e,s,o,0),v("z","y","x",1,-1,i,t,-e,s,o,1),v("x","z","y",1,1,e,i,t,r,s,2),v("x","z","y",1,-1,e,i,-t,r,s,3),v("x","y","z",1,-1,e,t,i,r,o,4),v("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new On(u,3)),this.setAttribute("normal",new On(f,3)),this.setAttribute("uv",new On(h,2));function v(w,y,_,T,E,M,V,F,L,G,O){let I=M/L,z=V/G,he=M/2,ae=V/2,Te=F/2,be=L+1,q=G+1,ie=0,$=0,ge=new B;for(let Ue=0;Ue<q;Ue++){let tt=Ue*z-ae;for(let me=0;me<be;me++){let re=me*I-he;ge[w]=re*T,ge[y]=tt*E,ge[_]=Te,u.push(ge.x,ge.y,ge.z),ge[w]=0,ge[y]=0,ge[_]=F>0?1:-1,f.push(ge.x,ge.y,ge.z),h.push(me/L),h.push(1-Ue/G),ie+=1}}for(let Ue=0;Ue<G;Ue++)for(let tt=0;tt<L;tt++){let me=p+tt+be*Ue,re=p+tt+be*(Ue+1),U=p+(tt+1)+be*(Ue+1),Z=p+(tt+1)+be*Ue;l.push(me,re,Z),l.push(re,U,Z),$+=6}a.addGroup(g,$,O),g+=$,p+=ie}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function nd(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Sr(n){let e={};for(let t=0;t<n.length;t++){let i=nd(n[t]);for(let r in i)e[r]=i[r]}return e}function Cne(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function RA(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Bt.workingColorSpace}var _B={clone:nd,merge:Sr},Tne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ane=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,ea=class extends $i{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Tne,this.fragmentShader=Ane,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=nd(e.uniforms),this.uniformsGroups=Cne(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Gm=class extends ci{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ct,this.projectionMatrix=new ct,this.projectionMatrixInverse=new ct,this.coordinateSystem=Na}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Sc=new B,Qk=new We,eU=new We,Ei=class extends Gm{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=zu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Lm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return zu*2*Math.atan(Math.tan(Lm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Sc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Sc.x,Sc.y).multiplyScalar(-e/Sc.z),Sc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Sc.x,Sc.y).multiplyScalar(-e/Sc.z)}getViewSize(e,t){return this.getViewBounds(e,Qk,eU),t.subVectors(eU,Qk)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Lm*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},$f=-90,qf=1,Mx=class extends ci{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Ei($f,qf,e,t);r.layers=this.layers,this.add(r);let o=new Ei($f,qf,e,t);o.layers=this.layers,this.add(o);let s=new Ei($f,qf,e,t);s.layers=this.layers,this.add(s);let a=new Ei($f,qf,e,t);a.layers=this.layers,this.add(a);let l=new Ei($f,qf,e,t);l.layers=this.layers,this.add(l);let u=new Ei($f,qf,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,l]=t;for(let u of t)this.remove(u);if(e===Na)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Hm)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,u,f]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;let w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(h,p,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}},Wm=class extends zr{constructor(e=[],t=Qu,i,r,o,s,a,l,u,f){super(e,t,i,r,o,s,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Sx=class extends La{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Wm(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ur}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new th(5,5,5),o=new ea({name:"CubemapFromEquirect",uniforms:nd(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Hr,blending:kl});o.uniforms.tEquirect.value=t;let s=new ui(r,o),a=t.minFilter;return t.minFilter===ia&&(t.minFilter=Ur),new Mx(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}},Mr=class extends ci{constructor(){super(),this.isGroup=!0,this.type="Group"}},Ine={type:"move"},nh=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Mr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Mr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new B,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new B),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Mr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new B,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new B),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(let w of e.hand.values()){let y=t.getJointPose(w,i),_=this._getHandJoint(u,w);y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=y.radius),_.visible=y!==null}let f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=f.position.distanceTo(h.position),g=.02,v=.005;u.inputState.pinching&&p>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ine)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Mr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var $m=class extends ci{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new nr,this.environmentIntensity=1,this.environmentRotation=new nr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},ih=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=xx,this.updateRanges=[],this.version=0,this.uuid=fs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},kr=new B,rh=class n{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)kr.fromBufferAttribute(this,t),kr.applyMatrix4(e),this.setXYZ(t,kr.x,kr.y,kr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)kr.fromBufferAttribute(this,t),kr.applyNormalMatrix(e),this.setXYZ(t,kr.x,kr.y,kr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)kr.fromBufferAttribute(this,t),kr.transformDirection(e),this.setXYZ(t,kr.x,kr.y,kr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ks(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Un(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ks(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ks(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ks(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ks(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),i=Un(i,this.array),r=Un(r,this.array),o=Un(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new Bi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var tU=new B,nU=new rn,iU=new rn,Dne=new B,rU=new ct,sx=new B,j1=new co,oU=new ct,G1=new ka,Gu=class extends ui{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=J1,this.bindMatrix=new ct,this.bindMatrixInverse=new ct,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Br),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,sx),this.boundingBox.expandByPoint(sx)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new co),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,sx),this.boundingSphere.expandByPoint(sx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),j1.copy(this.boundingSphere),j1.applyMatrix4(r),e.ray.intersectsSphere(j1)!==!1&&(oU.copy(r).invert(),G1.copy(e.ray).applyMatrix4(oU),!(this.boundingBox!==null&&G1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,G1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new rn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===J1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===nB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let i=this.skeleton,r=this.geometry;nU.fromBufferAttribute(r.attributes.skinIndex,e),iU.fromBufferAttribute(r.attributes.skinWeight,e),tU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){let s=iU.getComponent(o);if(s!==0){let a=nU.getComponent(o);rU.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Dne.copy(tU).applyMatrix4(rU),s)}}return t.applyMatrix4(this.bindMatrixInverse)}},Rl=class extends ci{constructor(){super(),this.isBone=!0,this.type="Bone"}},qm=class extends zr{constructor(e=null,t=1,i=1,r,o,s,a,l,u=hr,f=hr,h,p){super(null,s,a,l,u,f,r,o,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},sU=new ct,Rne=new ct,Wu=class n{constructor(e=[],t=[]){this.uuid=fs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ct)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new ct;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:Rne;sU.multiplyMatrices(a,t[o]),sU.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new qm(t,e,e,ko,vs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let o=e.bones[i],s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Rl),this.bones.push(s),this.boneInverses.push(new ct().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,o=t.length;r<o;r++){let s=t[r];e.bones.push(s.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},Ic=class extends Bi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Xf=new ct,aU=new ct,ax=[],lU=new Br,Pne=new ct,Rm=new ui,Pm=new co,Xm=class extends ui{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ic(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Pne)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Br),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xf),lU.copy(e.boundingBox).applyMatrix4(Xf),this.boundingBox.union(lU)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new co),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xf),Pm.copy(e.boundingSphere).applyMatrix4(Xf),this.boundingSphere.union(Pm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=e*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(e,t){let i=this.matrixWorld,r=this.count;if(Rm.geometry=this.geometry,Rm.material=this.material,Rm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Pm.copy(this.boundingSphere),Pm.applyMatrix4(i),e.ray.intersectsSphere(Pm)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Xf),aU.multiplyMatrices(i,Xf),Rm.matrixWorld=aU,Rm.raycast(e,ax);for(let s=0,a=ax.length;s<a;s++){let l=ax[s];l.instanceId=o,l.object=this,t.push(l)}ax.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ic(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new qm(new Float32Array(r*this.count),r,this.count,nw,vs));let o=this.morphTexture.source.data.data,s=0;for(let u=0;u<i.length;u++)s+=i[u];let a=this.geometry.morphTargetsRelative?1:1-s,l=r*e;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}},W1=new B,One=new B,Nne=new Gt,ds=class{constructor(e=new B(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=W1.subVectors(i,t).cross(One.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(W1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||Nne.getNormalMatrix(e),r=this.coplanarPoint(W1).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Lu=new co,lx=new B,oh=class{constructor(e=new ds,t=new ds,i=new ds,r=new ds,o=new ds,s=new ds){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Na){let i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],u=r[4],f=r[5],h=r[6],p=r[7],g=r[8],v=r[9],w=r[10],y=r[11],_=r[12],T=r[13],E=r[14],M=r[15];if(i[0].setComponents(l-o,p-u,y-g,M-_).normalize(),i[1].setComponents(l+o,p+u,y+g,M+_).normalize(),i[2].setComponents(l+s,p+f,y+v,M+T).normalize(),i[3].setComponents(l-s,p-f,y-v,M-T).normalize(),i[4].setComponents(l-a,p-h,y-w,M-E).normalize(),t===Na)i[5].setComponents(l+a,p+h,y+w,M+E).normalize();else if(t===Hm)i[5].setComponents(a,h,w,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Lu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Lu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Lu)}intersectsSprite(e){return Lu.center.set(0,0,0),Lu.radius=.7071067811865476,Lu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lu)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(lx.x=r.normal.x>0?e.max.x:e.min.x,lx.y=r.normal.y>0?e.max.y:e.min.y,lx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(lx)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var hs=class extends $i{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ft(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Cx=new B,Tx=new B,cU=new ct,Om=new ka,cx=new co,$1=new B,uU=new B,Pl=class extends ci{constructor(e=new Pi,t=new hs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)Cx.fromBufferAttribute(t,r-1),Tx.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Cx.distanceTo(Tx);e.setAttribute("lineDistance",new On(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),cx.copy(i.boundingSphere),cx.applyMatrix4(r),cx.radius+=o,e.ray.intersectsSphere(cx)===!1)return;cU.copy(r).invert(),Om.copy(e.ray).applyMatrix4(cU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){let g=Math.max(0,s.start),v=Math.min(f.count,s.start+s.count);for(let w=g,y=v-1;w<y;w+=u){let _=f.getX(w),T=f.getX(w+1),E=ux(this,e,Om,l,_,T,w);E&&t.push(E)}if(this.isLineLoop){let w=f.getX(v-1),y=f.getX(g),_=ux(this,e,Om,l,w,y,v-1);_&&t.push(_)}}else{let g=Math.max(0,s.start),v=Math.min(p.count,s.start+s.count);for(let w=g,y=v-1;w<y;w+=u){let _=ux(this,e,Om,l,w,w+1,w);_&&t.push(_)}if(this.isLineLoop){let w=ux(this,e,Om,l,v-1,g,v-1);w&&t.push(w)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function ux(n,e,t,i,r,o,s){let a=n.geometry.attributes.position;if(Cx.fromBufferAttribute(a,r),Tx.fromBufferAttribute(a,o),t.distanceSqToSegment(Cx,Tx,$1,uU)>i)return;$1.applyMatrix4(n.matrixWorld);let u=e.ray.origin.distanceTo($1);if(!(u<e.near||u>e.far))return{distance:u,point:uU.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}var dU=new B,fU=new B,Dc=class extends Pl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)dU.fromBufferAttribute(t,r),fU.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+dU.distanceTo(fU);e.setAttribute("lineDistance",new On(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Ym=class extends Pl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},ta=class extends $i{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},hU=new ct,rA=new ka,dx=new co,fx=new B,Ol=class extends ci{constructor(e=new Pi,t=new ta){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),dx.copy(i.boundingSphere),dx.applyMatrix4(r),dx.radius+=o,e.ray.intersectsSphere(dx)===!1)return;hU.copy(r).invert(),rA.copy(e.ray).applyMatrix4(hU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){let p=Math.max(0,s.start),g=Math.min(u.count,s.start+s.count);for(let v=p,w=g;v<w;v++){let y=u.getX(v);fx.fromBufferAttribute(h,y),pU(fx,y,l,r,e,t,this)}}else{let p=Math.max(0,s.start),g=Math.min(h.count,s.start+s.count);for(let v=p,w=g;v<w;v++)fx.fromBufferAttribute(h,v),pU(fx,v,l,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function pU(n,e,t,i,r,o,s){let a=rA.distanceSqToPoint(n);if(a<t){let l=new B;rA.closestPointToPoint(n,l),l.applyMatrix4(i);let u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}var Zm=class extends zr{constructor(e,t,i=Fc,r,o,s,a=hr,l=hr,u,f=Kf){if(f!==Kf&&f!==mh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,o,s,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Qf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};var Vr=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(r),t.push(o),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let i=this.getLengths(),r=0,o=i.length,s;t?s=t:s=e*i[o-1];let a=0,l=o-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-s,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(o-1);let f=i[r],p=i[r+1]-f,g=(s-f)/p;return(r+g)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),l=t||(s.isVector2?new We:new B);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){let i=new B,r=[],o=[],s=[],a=new B,l=new ct;for(let g=0;g<=e;g++){let v=g/e;r[g]=this.getTangentAt(v,new B)}o[0]=new B,s[0]=new B;let u=Number.MAX_VALUE,f=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=u&&(u=f,i.set(1,0,0)),h<=u&&(u=h,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let g=1;g<=e;g++){if(o[g]=o[g-1].clone(),s[g]=s[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();let v=Math.acos(Qt(r[g-1].dot(r[g]),-1,1));o[g].applyMatrix4(l.makeRotationAxis(a,v))}s[g].crossVectors(r[g],o[g])}if(t===!0){let g=Math.acos(Qt(o[0].dot(o[e]),-1,1));g/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(g=-g);for(let v=1;v<=e;v++)o[v].applyMatrix4(l.makeRotationAxis(r[v],g*v)),s[v].crossVectors(r[v],o[v])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},sh=class extends Vr{constructor(e=0,t=0,i=1,r=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new We){let i=t,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let f=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,g=u-this.aY;l=p*f-g*h+this.aX,u=p*h+g*f+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Ax=class extends sh{constructor(e,t,i,r,o,s){super(e,t,i,i,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function PA(){let n=0,e=0,t=0,i=0;function r(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){r(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,f,h){let p=(s-o)/u-(a-o)/(u+f)+(a-s)/f,g=(a-s)/f-(l-s)/(f+h)+(l-a)/h;p*=f,g*=f,r(s,a,p,g)},calc:function(o){let s=o*o,a=s*o;return n+e*o+t*s+i*a}}}var hx=new B,q1=new PA,X1=new PA,Y1=new PA,Ix=class extends Vr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new B){let i=t,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let u,f;this.closed||a>0?u=r[(a-1)%o]:(hx.subVectors(r[0],r[1]).add(r[0]),u=hx);let h=r[a%o],p=r[(a+1)%o];if(this.closed||a+2<o?f=r[(a+2)%o]:(hx.subVectors(r[o-1],r[o-2]).add(r[o-1]),f=hx),this.curveType==="centripetal"||this.curveType==="chordal"){let g=this.curveType==="chordal"?.5:.25,v=Math.pow(u.distanceToSquared(h),g),w=Math.pow(h.distanceToSquared(p),g),y=Math.pow(p.distanceToSquared(f),g);w<1e-4&&(w=1),v<1e-4&&(v=w),y<1e-4&&(y=w),q1.initNonuniformCatmullRom(u.x,h.x,p.x,f.x,v,w,y),X1.initNonuniformCatmullRom(u.y,h.y,p.y,f.y,v,w,y),Y1.initNonuniformCatmullRom(u.z,h.z,p.z,f.z,v,w,y)}else this.curveType==="catmullrom"&&(q1.initCatmullRom(u.x,h.x,p.x,f.x,this.tension),X1.initCatmullRom(u.y,h.y,p.y,f.y,this.tension),Y1.initCatmullRom(u.z,h.z,p.z,f.z,this.tension));return i.set(q1.calc(l),X1.calc(l),Y1.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new B().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function mU(n,e,t,i,r){let o=(i-e)*.5,s=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+o+s)*l+(-3*t+3*i-2*o-s)*a+o*n+t}function Fne(n,e){let t=1-n;return t*t*e}function Lne(n,e){return 2*(1-n)*n*e}function kne(n,e){return n*n*e}function Um(n,e,t,i){return Fne(n,e)+Lne(n,t)+kne(n,i)}function Une(n,e){let t=1-n;return t*t*t*e}function Bne(n,e){let t=1-n;return 3*t*t*n*e}function Vne(n,e){return 3*(1-n)*n*n*e}function Hne(n,e){return n*n*n*e}function Bm(n,e,t,i,r){return Une(n,e)+Bne(n,t)+Vne(n,i)+Hne(n,r)}var Km=class extends Vr{constructor(e=new We,t=new We,i=new We,r=new We){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new We){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Bm(e,r.x,o.x,s.x,a.x),Bm(e,r.y,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Dx=class extends Vr{constructor(e=new B,t=new B,i=new B,r=new B){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new B){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Bm(e,r.x,o.x,s.x,a.x),Bm(e,r.y,o.y,s.y,a.y),Bm(e,r.z,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Jm=class extends Vr{constructor(e=new We,t=new We){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new We){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new We){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Rx=class extends Vr{constructor(e=new B,t=new B){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new B){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new B){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Qm=class extends Vr{constructor(e=new We,t=new We,i=new We){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new We){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(Um(e,r.x,o.x,s.x),Um(e,r.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Px=class extends Vr{constructor(e=new B,t=new B,i=new B){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new B){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(Um(e,r.x,o.x,s.x),Um(e,r.y,o.y,s.y),Um(e,r.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},eg=class extends Vr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new We){let i=t,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[s===0?s:s-1],u=r[s],f=r[s>r.length-2?r.length-1:s+1],h=r[s>r.length-3?r.length-1:s+2];return i.set(mU(a,l.x,u.x,f.x,h.x),mU(a,l.y,u.y,f.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new We().fromArray(r))}return this}},gU=Object.freeze({__proto__:null,ArcCurve:Ax,CatmullRomCurve3:Ix,CubicBezierCurve:Km,CubicBezierCurve3:Dx,EllipseCurve:sh,LineCurve:Jm,LineCurve3:Rx,QuadraticBezierCurve:Qm,QuadraticBezierCurve3:Px,SplineCurve:eg}),Ox=class extends Vr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new gU[i](t,e))}return this}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=i){let s=r[o]-i,a=this.curves[o],l=a.getLength(),u=l===0?0:1-s/l;return a.getPointAt(u,t)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let u=0;u<l.length;u++){let f=l[u];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new gU[r.type]().fromJSON(r))}return this}},tg=class extends Ox{constructor(e){super(),this.type="Path",this.currentPoint=new We,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new Jm(this.currentPoint.clone(),new We(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let o=new Qm(this.currentPoint.clone(),new We(e,t),new We(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,o,s){let a=new Km(this.currentPoint.clone(),new We(e,t),new We(i,r),new We(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new eg(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,o,s){let a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,o,s),this}absarc(e,t,i,r,o,s){return this.absellipse(e,t,i,i,r,o,s),this}ellipse(e,t,i,r,o,s,a,l){let u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,i,r,o,s,a,l),this}absellipse(e,t,i,r,o,s,a,l){let u=new sh(e,t,i,r,o,s,a,l);if(this.curves.length>0){let h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);let f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},ah=class extends tg{constructor(e){super(e),this.uuid=fs(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new tg().fromJSON(r))}return this}};function zne(n,e,t=2){let i=e&&e.length,r=i?e[0]*t:n.length,o=xB(n,0,r,t,!0),s=[];if(!o||o.next===o.prev)return s;let a,l,u;if(i&&(o=qne(n,e,o,t)),n.length>80*t){a=1/0,l=1/0;let f=-1/0,h=-1/0;for(let p=t;p<r;p+=t){let g=n[p],v=n[p+1];g<a&&(a=g),v<l&&(l=v),g>f&&(f=g),v>h&&(h=v)}u=Math.max(f-a,h-l),u=u!==0?32767/u:0}return ng(o,s,t,a,l,u,0),s}function xB(n,e,t,i,r){let o;if(r===rie(n,e,t,i)>0)for(let s=e;s<t;s+=i)o=vU(s/i|0,n[s],n[s+1],o);else for(let s=t-i;s>=e;s-=i)o=vU(s/i|0,n[s],n[s+1],o);return o&&lh(o,o.next)&&(rg(o),o=o.next),o}function $u(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(lh(t,t.next)||pi(t.prev,t,t.next)===0)){if(rg(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ng(n,e,t,i,r,o,s){if(!n)return;!s&&o&&Jne(n,i,r,o);let a=n;for(;n.prev!==n.next;){let l=n.prev,u=n.next;if(o?Gne(n,i,r,o):jne(n)){e.push(l.i,n.i,u.i),rg(n),n=u.next,a=u.next;continue}if(n=u,n===a){s?s===1?(n=Wne($u(n),e),ng(n,e,t,i,r,o,2)):s===2&&$ne(n,e,t,i,r,o):ng($u(n),e,t,i,r,o,1);break}}}function jne(n){let e=n.prev,t=n,i=n.next;if(pi(e,t,i)>=0)return!1;let r=e.x,o=t.x,s=i.x,a=e.y,l=t.y,u=i.y,f=Math.min(r,o,s),h=Math.min(a,l,u),p=Math.max(r,o,s),g=Math.max(a,l,u),v=i.next;for(;v!==e;){if(v.x>=f&&v.x<=p&&v.y>=h&&v.y<=g&&Fm(r,a,o,l,s,u,v.x,v.y)&&pi(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Gne(n,e,t,i){let r=n.prev,o=n,s=n.next;if(pi(r,o,s)>=0)return!1;let a=r.x,l=o.x,u=s.x,f=r.y,h=o.y,p=s.y,g=Math.min(a,l,u),v=Math.min(f,h,p),w=Math.max(a,l,u),y=Math.max(f,h,p),_=oA(g,v,e,t,i),T=oA(w,y,e,t,i),E=n.prevZ,M=n.nextZ;for(;E&&E.z>=_&&M&&M.z<=T;){if(E.x>=g&&E.x<=w&&E.y>=v&&E.y<=y&&E!==r&&E!==s&&Fm(a,f,l,h,u,p,E.x,E.y)&&pi(E.prev,E,E.next)>=0||(E=E.prevZ,M.x>=g&&M.x<=w&&M.y>=v&&M.y<=y&&M!==r&&M!==s&&Fm(a,f,l,h,u,p,M.x,M.y)&&pi(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;E&&E.z>=_;){if(E.x>=g&&E.x<=w&&E.y>=v&&E.y<=y&&E!==r&&E!==s&&Fm(a,f,l,h,u,p,E.x,E.y)&&pi(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;M&&M.z<=T;){if(M.x>=g&&M.x<=w&&M.y>=v&&M.y<=y&&M!==r&&M!==s&&Fm(a,f,l,h,u,p,M.x,M.y)&&pi(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function Wne(n,e){let t=n;do{let i=t.prev,r=t.next.next;!lh(i,r)&&bB(i,t,t.next,r)&&ig(i,r)&&ig(r,i)&&(e.push(i.i,t.i,r.i),rg(t),rg(t.next),t=n=r),t=t.next}while(t!==n);return $u(t)}function $ne(n,e,t,i,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&tie(s,a)){let l=EB(s,a);s=$u(s,s.next),l=$u(l,l.next),ng(s,e,t,i,r,o,0),ng(l,e,t,i,r,o,0);return}a=a.next}s=s.next}while(s!==n)}function qne(n,e,t,i){let r=[];for(let o=0,s=e.length;o<s;o++){let a=e[o]*i,l=o<s-1?e[o+1]*i:n.length,u=xB(n,a,l,i,!1);u===u.next&&(u.steiner=!0),r.push(eie(u))}r.sort(Xne);for(let o=0;o<r.length;o++)t=Yne(r[o],t);return t}function Xne(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){let i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function Yne(n,e){let t=Zne(n,e);if(!t)return e;let i=EB(t,n);return $u(i,i.next),$u(t,t.next)}function Zne(n,e){let t=e,i=n.x,r=n.y,o=-1/0,s;if(lh(n,t))return t;do{if(lh(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){let h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>o&&(o=h,s=t.x<t.next.x?t:t.next,h===i))return s}t=t.next}while(t!==e);if(!s)return null;let a=s,l=s.x,u=s.y,f=1/0;t=s;do{if(i>=t.x&&t.x>=l&&i!==t.x&&wB(r<u?i:o,r,l,u,r<u?o:i,r,t.x,t.y)){let h=Math.abs(r-t.y)/(i-t.x);ig(t,n)&&(h<f||h===f&&(t.x>s.x||t.x===s.x&&Kne(s,t)))&&(s=t,f=h)}t=t.next}while(t!==a);return s}function Kne(n,e){return pi(n.prev,n,e.prev)<0&&pi(e.next,n,n.next)<0}function Jne(n,e,t,i){let r=n;do r.z===0&&(r.z=oA(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Qne(r)}function Qne(n){let e,t=1;do{let i=n,r;n=null;let o=null;for(e=0;i;){e++;let s=i,a=0;for(let u=0;u<t&&(a++,s=s.nextZ,!!s);u++);let l=t;for(;a>0||l>0&&s;)a!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,l--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;i=s}o.nextZ=null,t*=2}while(e>1);return n}function oA(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function eie(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function wB(n,e,t,i,r,o,s,a){return(r-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(i-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(r-s)*(i-a)}function Fm(n,e,t,i,r,o,s,a){return!(n===s&&e===a)&&wB(n,e,t,i,r,o,s,a)}function tie(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!nie(n,e)&&(ig(n,e)&&ig(e,n)&&iie(n,e)&&(pi(n.prev,n,e.prev)||pi(n,e.prev,e))||lh(n,e)&&pi(n.prev,n,n.next)>0&&pi(e.prev,e,e.next)>0)}function pi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function lh(n,e){return n.x===e.x&&n.y===e.y}function bB(n,e,t,i){let r=mx(pi(n,e,t)),o=mx(pi(n,e,i)),s=mx(pi(t,i,n)),a=mx(pi(t,i,e));return!!(r!==o&&s!==a||r===0&&px(n,t,e)||o===0&&px(n,i,e)||s===0&&px(t,n,i)||a===0&&px(t,e,i))}function px(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function mx(n){return n>0?1:n<0?-1:0}function nie(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&bB(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ig(n,e){return pi(n.prev,n,n.next)<0?pi(n,e,n.next)>=0&&pi(n,n.prev,e)>=0:pi(n,e,n.prev)<0||pi(n,n.next,e)<0}function iie(n,e){let t=n,i=!1,r=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function EB(n,e){let t=sA(n.i,n.x,n.y),i=sA(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function vU(n,e,t,i){let r=sA(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function rg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function sA(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function rie(n,e,t,i){let r=0;for(let o=e,s=t-i;o<t;o+=i)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var aA=class{static triangulate(e,t,i=2){return zne(e,t,i)}},Tc=class n{static area(e){let t=e.length,i=0;for(let r=t-1,o=0;o<t;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],r=[],o=[];yU(e),_U(i,e);let s=e.length;t.forEach(yU);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,_U(i,t[l]);let a=aA.triangulate(i,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}};function yU(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function _U(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var og=class n extends Pi{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,h=e/a,p=t/l,g=[],v=[],w=[],y=[];for(let _=0;_<f;_++){let T=_*p-s;for(let E=0;E<u;E++){let M=E*h-o;v.push(M,-T,0),w.push(0,0,1),y.push(E/a),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let T=0;T<a;T++){let E=T+u*_,M=T+u*(_+1),V=T+1+u*(_+1),F=T+1+u*_;g.push(E,M,F),g.push(M,V,F)}this.setIndex(g),this.setAttribute("position",new On(v,3)),this.setAttribute("normal",new On(w,3)),this.setAttribute("uv",new On(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var sg=class n extends Pi{constructor(e=new ah([new We(0,.5),new We(-.5,-.5),new We(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let i=[],r=[],o=[],s=[],a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new On(r,3)),this.setAttribute("normal",new On(o,3)),this.setAttribute("uv",new On(s,2));function u(f){let h=r.length/3,p=f.extractPoints(t),g=p.shape,v=p.holes;Tc.isClockWise(g)===!1&&(g=g.reverse());for(let y=0,_=v.length;y<_;y++){let T=v[y];Tc.isClockWise(T)===!0&&(v[y]=T.reverse())}let w=Tc.triangulateShape(g,v);for(let y=0,_=v.length;y<_;y++){let T=v[y];g=g.concat(T)}for(let y=0,_=g.length;y<_;y++){let T=g[y];r.push(T.x,T.y,0),o.push(0,0,1),s.push(T.x,T.y)}for(let y=0,_=w.length;y<_;y++){let T=w[y],E=T[0]+h,M=T[1]+h,V=T[2]+h;i.push(E,M,V),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return oie(t,e)}static fromJSON(e,t){let i=[];for(let r=0,o=e.shapes.length;r<o;r++){let s=t[e.shapes[r]];i.push(s)}return new n(i,e.curveSegments)}};function oie(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){let r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}var qu=class extends $i{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ft(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eg,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},uo=class extends qu{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new We(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ft(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ft(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ft(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},Ua=class extends $i{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ft(16777215),this.specular=new ft(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eg,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nr,this.combine=mg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var ag=class extends $i{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eg,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nr,this.combine=mg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Nx=class extends $i{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=rB,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Fx=class extends $i{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function gx(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function sie(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function aie(n){function e(r,o){return n[r]-n[o]}let t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function xU(n,e,t){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=t[o]*e;for(let l=0;l!==e;++l)r[s++]=n[a+l]}return r}function MB(n,e,t,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(e.push(o.time),t.push(...s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(e.push(o.time),t.push(s)),o=n[r++];while(o!==void 0)}var Nl=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=o)){let a=t[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Lx=class extends Nl{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:eA,endingEnd:eA}}intervalChanged_(e,t,i){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case tA:o=e,a=2*t-i;break;case nA:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case tA:s=e,l=2*i-t;break;case nA:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}let u=(i-t)*.5,f=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),w=v*v,y=w*v,_=-p*y+2*p*w-p*v,T=(1+p)*y+(-1.5-2*p)*w+(-.5+p)*v+1,E=(-1-g)*y+(1.5+g)*w+.5*v,M=g*y-g*w;for(let V=0;V!==a;++V)o[V]=_*s[f+V]+T*s[u+V]+E*s[l+V]+M*s[h+V];return o}},kx=class extends Nl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=(i-t)/(r-t),h=1-f;for(let p=0;p!==a;++p)o[p]=s[u+p]*h+s[l+p]*f;return o}},Ux=class extends Nl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},fo=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gx(t,this.TimeBufferType),this.values=gx(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:gx(e.times,Array),values:gx(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Ux(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Lx(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Vu:t=this.InterpolantFactoryMethodDiscrete;break;case Hu:t=this.InterpolantFactoryMethodLinear;break;case vx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Vu;case this.InterpolantFactoryMethodLinear:return Hu;case this.InterpolantFactoryMethodSmooth:return vx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(r!==void 0&&sie(r))for(let a=0,l=r.length;a!==l;++a){let u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===vx,o=e.length-1,s=1;for(let a=1;a<o;++a){let l=!1,u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)l=!0;else{let h=a*i,p=h-i,g=h+i;for(let v=0;v!==i;++v){let w=t[h+v];if(w!==t[p+v]||w!==t[g+v]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];let h=a*i,p=s*i;for(let g=0;g!==i;++g)t[p+g]=t[h+g]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,u=0;u!==i;++u)t[l+u]=t[a+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};fo.prototype.ValueTypeName="";fo.prototype.TimeBufferType=Float32Array;fo.prototype.ValueBufferType=Float32Array;fo.prototype.DefaultInterpolation=Hu;var Fl=class extends fo{constructor(e,t,i){super(e,t,i)}};Fl.prototype.ValueTypeName="bool";Fl.prototype.ValueBufferType=Array;Fl.prototype.DefaultInterpolation=Vu;Fl.prototype.InterpolantFactoryMethodLinear=void 0;Fl.prototype.InterpolantFactoryMethodSmooth=void 0;var lg=class extends fo{constructor(e,t,i,r){super(e,t,i,r)}};lg.prototype.ValueTypeName="color";var ps=class extends fo{constructor(e,t,i,r){super(e,t,i,r)}};ps.prototype.ValueTypeName="number";var Bx=class extends Nl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t),u=e*a;for(let f=u+a;u!==f;u+=4)li.slerpFlat(o,0,s,u-a,s,u,l);return o}},Lo=class extends fo{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new Bx(this.times,this.values,this.getValueSize(),e)}};Lo.prototype.ValueTypeName="quaternion";Lo.prototype.InterpolantFactoryMethodSmooth=void 0;var Ll=class extends fo{constructor(e,t,i){super(e,t,i)}};Ll.prototype.ValueTypeName="string";Ll.prototype.ValueBufferType=Array;Ll.prototype.DefaultInterpolation=Vu;Ll.prototype.InterpolantFactoryMethodLinear=void 0;Ll.prototype.InterpolantFactoryMethodSmooth=void 0;var ms=class extends fo{constructor(e,t,i,r){super(e,t,i,r)}};ms.prototype.ValueTypeName="vector";var Xu=class{constructor(e="",t=-1,i=[],r=iB){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=fs(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(cie(i[s]).scale(r));let o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)t.push(fo.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let o=t.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);let f=aie(l);l=xU(l,1,f),u=xU(u,1,f),!r&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new ps(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){let u=e[a],f=u.name.match(o);if(f&&f.length>1){let h=f[1],p=r[h];p||(r[h]=p=[]),p.push(u)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(h,p,g,v,w){if(g.length!==0){let y=[],_=[];MB(g,y,_,v),y.length!==0&&w.push(new h(p,y,_))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,l=e.length||-1,u=e.hierarchy||[];for(let h=0;h<u.length;h++){let p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){let g={},v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let w=0;w<p[v].morphTargets.length;w++)g[p[v].morphTargets[w]]=-1;for(let w in g){let y=[],_=[];for(let T=0;T!==p[v].morphTargets.length;++T){let E=p[v];y.push(E.time),_.push(E.morphTarget===w?1:0)}r.push(new ps(".morphTargetInfluence["+w+"]",y,_))}l=g.length*s}else{let g=".bones["+t[h].name+"]";i(ms,g+".position",p,"pos",r),i(Lo,g+".quaternion",p,"rot",r),i(ms,g+".scale",p,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function lie(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ps;case"vector":case"vector2":case"vector3":case"vector4":return ms;case"color":return lg;case"quaternion":return Lo;case"bool":case"boolean":return Fl;case"string":return Ll}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function cie(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=lie(n.type);if(n.times===void 0){let t=[],i=[];MB(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var Il={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},Vx=class{constructor(e,t,i){let r=this,o=!1,s=0,a=0,l,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,o===!1&&r.onStart!==void 0&&r.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,r.onProgress!==void 0&&r.onProgress(f,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){let h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,p=u.length;h<p;h+=2){let g=u[h],v=u[h+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null}}},SB=new Vx,Uo=(()=>{class n{constructor(t){this.manager=t!==void 0?t:SB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Al={},lA=class extends Error{constructor(e,t){super(e),this.response=t}},Ba=class extends Uo{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=Il.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Al[e]!==void 0){Al[e].push({onLoad:t,onProgress:i,onError:r});return}Al[e]=[],Al[e].push({onLoad:t,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let f=Al[e],h=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),g=p?parseInt(p):0,v=g!==0,w=0,y=new ReadableStream({start(_){T();function T(){h.read().then(({done:E,value:M})=>{if(E)_.close();else{w+=M.byteLength;let V=new ProgressEvent("progress",{lengthComputable:v,loaded:w,total:g});for(let F=0,L=f.length;F<L;F++){let G=f[F];G.onProgress&&G.onProgress(V)}_.enqueue(M),T()}},E=>{_.error(E)})}}});return new Response(y)}else throw new lA(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a==="")return u.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,g=new TextDecoder(p);return u.arrayBuffer().then(v=>g.decode(v))}}}).then(u=>{Il.add(e,u);let f=Al[e];delete Al[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onLoad&&g.onLoad(u)}}).catch(u=>{let f=Al[e];if(f===void 0)throw this.manager.itemError(e),u;delete Al[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var Hx=class extends Uo{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Il.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;let a=Jf("img");function l(){f(),Il.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(h){f(),r&&r(h),o.manager.itemError(e),o.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}};var Yu=class extends Uo{constructor(e){super(e)}load(e,t,i,r){let o=new zr,s=new Hx(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},i,r),o}},Rc=class extends ci{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ft(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}},cg=class extends Rc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ft(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},Z1=new ct,wU=new B,bU=new B,ug=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new We(512,512),this.mapType=ra,this.map=null,this.mapPass=null,this.matrix=new ct,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oh,this._frameExtents=new We(1,1),this._viewportCount=1,this._viewports=[new rn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;wU.setFromMatrixPosition(e.matrixWorld),t.position.copy(wU),bU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(bU),t.updateMatrixWorld(),Z1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z1),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Z1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},cA=class extends ug{constructor(){super(new Ei(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=zu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Zu=class extends Rc{constructor(e,t,i=0,r=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.target=new ci,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new cA}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},EU=new ct,Nm=new B,K1=new B,uA=class extends ug{constructor(){super(new Ei(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new We(4,2),this._viewportCount=6,this._viewports=[new rn(2,1,1,1),new rn(0,1,1,1),new rn(3,1,1,1),new rn(1,1,1,1),new rn(3,0,1,1),new rn(1,0,1,1)],this._cubeDirections=[new B(1,0,0),new B(-1,0,0),new B(0,0,1),new B(0,0,-1),new B(0,1,0),new B(0,-1,0)],this._cubeUps=[new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,0,1),new B(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Nm.setFromMatrixPosition(e.matrixWorld),i.position.copy(Nm),K1.copy(i.position),K1.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(K1),i.updateMatrixWorld(),r.makeTranslation(-Nm.x,-Nm.y,-Nm.z),EU.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(EU)}},Pc=class extends Rc{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new uA}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Ku=class extends Gm{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-e,s=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},dA=class extends ug{constructor(){super(new Ku(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Ju=class extends Rc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.target=new ci,this.shadow=new dA}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},dg=class extends Rc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var na=class{static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var fg=class extends Uo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Il.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(u=>{t&&t(u),o.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Il.add(e,u),t&&t(u),o.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Il.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Il.add(e,l),o.manager.itemStart(e)}};var zx=class extends Ei{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var OA="\\[\\]\\.:\\/",uie=new RegExp("["+OA+"]","g"),NA="[^"+OA+"]",die="[^"+OA.replace("\\.","")+"]",fie=/((?:WC+[\/:])*)/.source.replace("WC",NA),hie=/(WCOD+)?/.source.replace("WCOD",die),pie=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",NA),mie=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",NA),gie=new RegExp("^"+fie+hie+pie+mie+"$"),vie=["material","materials","bones","map"],fA=class{constructor(e,t,i){let r=i||Bn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Bn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(uie,"")}static parseTrackName(t){let i=gie.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);vie.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let u=r(l.children);if(u)return u}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===f){f=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}let a=t[o];if(a===void 0){let f=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+o+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=fA,n})();Bn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Bn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Bn.prototype.GetterByBindingType=[Bn.prototype._getValue_direct,Bn.prototype._getValue_array,Bn.prototype._getValue_arrayElement,Bn.prototype._getValue_toArray];Bn.prototype.SetterByBindingTypeAndVersioning=[[Bn.prototype._setValue_direct,Bn.prototype._setValue_direct_setNeedsUpdate,Bn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Bn.prototype._setValue_array,Bn.prototype._setValue_array_setNeedsUpdate,Bn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Bn.prototype._setValue_arrayElement,Bn.prototype._setValue_arrayElement_setNeedsUpdate,Bn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Bn.prototype._setValue_fromArray,Bn.prototype._setValue_fromArray_setNeedsUpdate,Bn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var $Se=new Float32Array(1);var MU=new ct,hg=class{constructor(e,t,i=0,r=1/0){this.ray=new ka(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new eh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return MU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(MU),this}intersectObject(e,t=!0,i=[]){return hA(e,this,i,t),i.sort(SU),i}intersectObjects(e,t=!0,i=[]){for(let r=0,o=e.length;r<o;r++)hA(e[r],this,i,t);return i.sort(SU),i}};function SU(n,e){return n.distance-e.distance}function hA(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)hA(o[s],e,t,!0)}}var ch=class{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Qt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Qt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var pg=class extends Fa{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function FA(n,e,t,i){let r=yie(i);switch(t){case bA:return n*e;case nw:return n*e/r.components*r.byteLength;case iw:return n*e/r.components*r.byteLength;case MA:return n*e*2/r.components*r.byteLength;case rw:return n*e*2/r.components*r.byteLength;case EA:return n*e*3/r.components*r.byteLength;case ko:return n*e*4/r.components*r.byteLength;case ow:return n*e*4/r.components*r.byteLength;case vg:case yg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case _g:case xg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case aw:case cw:return Math.max(n,16)*Math.max(e,8)/4;case sw:case lw:return Math.max(n,8)*Math.max(e,8)/2;case uw:case dw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case fw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case hw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case pw:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case mw:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case gw:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case vw:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case yw:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case _w:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case xw:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case ww:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case bw:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Ew:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Mw:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Sw:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Cw:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case wg:case Tw:case Aw:return Math.ceil(n/4)*Math.ceil(e/4)*16;case SA:case Iw:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Dw:case Rw:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function yie(n){switch(n){case ra:case _A:return{byteLength:1,components:1};case fh:case xA:case hh:return{byteLength:2,components:1};case ew:case tw:return{byteLength:2,components:4};case Fc:case Qx:case vs:return{byteLength:4,components:1};case wA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jx);function YB(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function _ie(n){let e=new WeakMap;function t(a,l){let u=a.array,f=a.usage,h=u.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,u,f),a.onUploadCallback();let g;if(u instanceof Float32Array)g=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=n.SHORT;else if(u instanceof Uint32Array)g=n.UNSIGNED_INT;else if(u instanceof Int32Array)g=n.INT;else if(u instanceof Int8Array)g=n.BYTE;else if(u instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,u){let f=l.array,h=l.updateRanges;if(n.bindBuffer(u,a),h.length===0)n.bufferSubData(u,0,f);else{h.sort((g,v)=>g.start-v.start);let p=0;for(let g=1;g<h.length;g++){let v=h[p],w=h[g];w.start<=v.start+v.count+1?v.count=Math.max(v.count,w.start+w.count-v.start):(++p,h[p]=w)}h.length=p+1;for(let g=0,v=h.length;g<v;g++){let w=h[g];n.bufferSubData(u,w.start*f.BYTES_PER_ELEMENT,f,w.start,w.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:o,update:s}}var xie=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wie=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,bie=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Eie=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Mie=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Sie=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Cie=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Tie=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Aie=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Iie=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Die=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Rie=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Pie=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Oie=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Nie=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Fie=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Lie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,kie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Uie=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Bie=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Vie=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Hie=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,zie=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jie=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Gie=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Wie=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$ie=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,qie=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Xie=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Yie=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Zie="gl_FragColor = linearToOutputTexel( gl_FragColor );",Kie=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Jie=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Qie=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ere=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tre=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ire=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rre=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ore=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,sre=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,are=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lre=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cre=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ure=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dre=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,fre=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,hre=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,pre=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,mre=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gre=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vre=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,yre=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_re=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xre=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wre=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,bre=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Ere=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Mre=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Sre=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Cre=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Tre=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Are=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Ire=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dre=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Rre=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Pre=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Ore=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Nre=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Fre=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Lre=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kre=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ure=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Bre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Hre=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zre=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jre=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Gre=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Wre=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$re=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,qre=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Xre=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Yre=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Zre=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Kre=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Jre=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Qre=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eoe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,toe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,noe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,ioe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,roe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ooe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,soe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,aoe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,loe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,coe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uoe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,doe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,foe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,hoe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,poe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,moe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,goe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,voe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,yoe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,_oe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xoe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,woe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,boe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Eoe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Moe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Soe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Coe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Toe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Aoe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Ioe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Doe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Roe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Poe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ooe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Noe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Foe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Loe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,koe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Uoe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Boe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Voe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Hoe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zoe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,joe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Goe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Woe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$oe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qoe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Xoe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Yoe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zoe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Koe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Joe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,on={alphahash_fragment:xie,alphahash_pars_fragment:wie,alphamap_fragment:bie,alphamap_pars_fragment:Eie,alphatest_fragment:Mie,alphatest_pars_fragment:Sie,aomap_fragment:Cie,aomap_pars_fragment:Tie,batching_pars_vertex:Aie,batching_vertex:Iie,begin_vertex:Die,beginnormal_vertex:Rie,bsdfs:Pie,iridescence_fragment:Oie,bumpmap_pars_fragment:Nie,clipping_planes_fragment:Fie,clipping_planes_pars_fragment:Lie,clipping_planes_pars_vertex:kie,clipping_planes_vertex:Uie,color_fragment:Bie,color_pars_fragment:Vie,color_pars_vertex:Hie,color_vertex:zie,common:jie,cube_uv_reflection_fragment:Gie,defaultnormal_vertex:Wie,displacementmap_pars_vertex:$ie,displacementmap_vertex:qie,emissivemap_fragment:Xie,emissivemap_pars_fragment:Yie,colorspace_fragment:Zie,colorspace_pars_fragment:Kie,envmap_fragment:Jie,envmap_common_pars_fragment:Qie,envmap_pars_fragment:ere,envmap_pars_vertex:tre,envmap_physical_pars_fragment:fre,envmap_vertex:nre,fog_vertex:ire,fog_pars_vertex:rre,fog_fragment:ore,fog_pars_fragment:sre,gradientmap_pars_fragment:are,lightmap_pars_fragment:lre,lights_lambert_fragment:cre,lights_lambert_pars_fragment:ure,lights_pars_begin:dre,lights_toon_fragment:hre,lights_toon_pars_fragment:pre,lights_phong_fragment:mre,lights_phong_pars_fragment:gre,lights_physical_fragment:vre,lights_physical_pars_fragment:yre,lights_fragment_begin:_re,lights_fragment_maps:xre,lights_fragment_end:wre,logdepthbuf_fragment:bre,logdepthbuf_pars_fragment:Ere,logdepthbuf_pars_vertex:Mre,logdepthbuf_vertex:Sre,map_fragment:Cre,map_pars_fragment:Tre,map_particle_fragment:Are,map_particle_pars_fragment:Ire,metalnessmap_fragment:Dre,metalnessmap_pars_fragment:Rre,morphinstance_vertex:Pre,morphcolor_vertex:Ore,morphnormal_vertex:Nre,morphtarget_pars_vertex:Fre,morphtarget_vertex:Lre,normal_fragment_begin:kre,normal_fragment_maps:Ure,normal_pars_fragment:Bre,normal_pars_vertex:Vre,normal_vertex:Hre,normalmap_pars_fragment:zre,clearcoat_normal_fragment_begin:jre,clearcoat_normal_fragment_maps:Gre,clearcoat_pars_fragment:Wre,iridescence_pars_fragment:$re,opaque_fragment:qre,packing:Xre,premultiplied_alpha_fragment:Yre,project_vertex:Zre,dithering_fragment:Kre,dithering_pars_fragment:Jre,roughnessmap_fragment:Qre,roughnessmap_pars_fragment:eoe,shadowmap_pars_fragment:toe,shadowmap_pars_vertex:noe,shadowmap_vertex:ioe,shadowmask_pars_fragment:roe,skinbase_vertex:ooe,skinning_pars_vertex:soe,skinning_vertex:aoe,skinnormal_vertex:loe,specularmap_fragment:coe,specularmap_pars_fragment:uoe,tonemapping_fragment:doe,tonemapping_pars_fragment:foe,transmission_fragment:hoe,transmission_pars_fragment:poe,uv_pars_fragment:moe,uv_pars_vertex:goe,uv_vertex:voe,worldpos_vertex:yoe,background_vert:_oe,background_frag:xoe,backgroundCube_vert:woe,backgroundCube_frag:boe,cube_vert:Eoe,cube_frag:Moe,depth_vert:Soe,depth_frag:Coe,distanceRGBA_vert:Toe,distanceRGBA_frag:Aoe,equirect_vert:Ioe,equirect_frag:Doe,linedashed_vert:Roe,linedashed_frag:Poe,meshbasic_vert:Ooe,meshbasic_frag:Noe,meshlambert_vert:Foe,meshlambert_frag:Loe,meshmatcap_vert:koe,meshmatcap_frag:Uoe,meshnormal_vert:Boe,meshnormal_frag:Voe,meshphong_vert:Hoe,meshphong_frag:zoe,meshphysical_vert:joe,meshphysical_frag:Goe,meshtoon_vert:Woe,meshtoon_frag:$oe,points_vert:qoe,points_frag:Xoe,shadow_vert:Yoe,shadow_frag:Zoe,sprite_vert:Koe,sprite_frag:Joe},Qe={common:{diffuse:{value:new ft(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Gt},alphaMap:{value:null},alphaMapTransform:{value:new Gt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Gt}},envmap:{envMap:{value:null},envMapRotation:{value:new Gt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Gt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Gt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Gt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Gt},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Gt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Gt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Gt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Gt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ft(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ft(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Gt},alphaTest:{value:0},uvTransform:{value:new Gt}},sprite:{diffuse:{value:new ft(16777215)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Gt},alphaMap:{value:null},alphaMapTransform:{value:new Gt},alphaTest:{value:0}}},Ha={basic:{uniforms:Sr([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.fog]),vertexShader:on.meshbasic_vert,fragmentShader:on.meshbasic_frag},lambert:{uniforms:Sr([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,Qe.lights,{emissive:{value:new ft(0)}}]),vertexShader:on.meshlambert_vert,fragmentShader:on.meshlambert_frag},phong:{uniforms:Sr([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,Qe.lights,{emissive:{value:new ft(0)},specular:{value:new ft(1118481)},shininess:{value:30}}]),vertexShader:on.meshphong_vert,fragmentShader:on.meshphong_frag},standard:{uniforms:Sr([Qe.common,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.roughnessmap,Qe.metalnessmap,Qe.fog,Qe.lights,{emissive:{value:new ft(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag},toon:{uniforms:Sr([Qe.common,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.gradientmap,Qe.fog,Qe.lights,{emissive:{value:new ft(0)}}]),vertexShader:on.meshtoon_vert,fragmentShader:on.meshtoon_frag},matcap:{uniforms:Sr([Qe.common,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,{matcap:{value:null}}]),vertexShader:on.meshmatcap_vert,fragmentShader:on.meshmatcap_frag},points:{uniforms:Sr([Qe.points,Qe.fog]),vertexShader:on.points_vert,fragmentShader:on.points_frag},dashed:{uniforms:Sr([Qe.common,Qe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:on.linedashed_vert,fragmentShader:on.linedashed_frag},depth:{uniforms:Sr([Qe.common,Qe.displacementmap]),vertexShader:on.depth_vert,fragmentShader:on.depth_frag},normal:{uniforms:Sr([Qe.common,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,{opacity:{value:1}}]),vertexShader:on.meshnormal_vert,fragmentShader:on.meshnormal_frag},sprite:{uniforms:Sr([Qe.sprite,Qe.fog]),vertexShader:on.sprite_vert,fragmentShader:on.sprite_frag},background:{uniforms:{uvTransform:{value:new Gt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:on.background_vert,fragmentShader:on.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Gt}},vertexShader:on.backgroundCube_vert,fragmentShader:on.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:on.cube_vert,fragmentShader:on.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:on.equirect_vert,fragmentShader:on.equirect_frag},distanceRGBA:{uniforms:Sr([Qe.common,Qe.displacementmap,{referencePosition:{value:new B},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:on.distanceRGBA_vert,fragmentShader:on.distanceRGBA_frag},shadow:{uniforms:Sr([Qe.lights,Qe.fog,{color:{value:new ft(0)},opacity:{value:1}}]),vertexShader:on.shadow_vert,fragmentShader:on.shadow_frag}};Ha.physical={uniforms:Sr([Ha.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Gt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Gt},clearcoatNormalScale:{value:new We(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Gt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Gt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Gt},sheen:{value:0},sheenColor:{value:new ft(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Gt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Gt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Gt},transmissionSamplerSize:{value:new We},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Gt},attenuationDistance:{value:0},attenuationColor:{value:new ft(0)},specularColor:{value:new ft(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Gt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Gt},anisotropyVector:{value:new We},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Gt}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag};var Pw={r:0,b:0,g:0},id=new nr,Qoe=new ct;function ese(n,e,t,i,r,o,s){let a=new ft(0),l=o===!0?0:1,u,f,h=null,p=0,g=null;function v(E){let M=E.isScene===!0?E.background:null;return M&&M.isTexture&&(M=(E.backgroundBlurriness>0?t:e).get(M)),M}function w(E){let M=!1,V=v(E);V===null?_(a,l):V&&V.isColor&&(_(V,1),M=!0);let F=n.xr.getEnvironmentBlendMode();F==="additive"?i.buffers.color.setClear(0,0,0,1,s):F==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||M)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(E,M){let V=v(M);V&&(V.isCubeTexture||V.mapping===gg)?(f===void 0&&(f=new ui(new th(1,1,1),new ea({name:"BackgroundCubeMaterial",uniforms:nd(Ha.backgroundCube.uniforms),vertexShader:Ha.backgroundCube.vertexShader,fragmentShader:Ha.backgroundCube.fragmentShader,side:Hr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(F,L,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),id.copy(M.backgroundRotation),id.x*=-1,id.y*=-1,id.z*=-1,V.isCubeTexture&&V.isRenderTargetTexture===!1&&(id.y*=-1,id.z*=-1),f.material.uniforms.envMap.value=V,f.material.uniforms.flipEnvMap.value=V.isCubeTexture&&V.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(Qoe.makeRotationFromEuler(id)),f.material.toneMapped=Bt.getTransfer(V.colorSpace)!==Vn,(h!==V||p!==V.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,h=V,p=V.version,g=n.toneMapping),f.layers.enableAll(),E.unshift(f,f.geometry,f.material,0,0,null)):V&&V.isTexture&&(u===void 0&&(u=new ui(new og(2,2),new ea({name:"BackgroundMaterial",uniforms:nd(Ha.background.uniforms),vertexShader:Ha.background.vertexShader,fragmentShader:Ha.background.fragmentShader,side:Js,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=V,u.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,u.material.toneMapped=Bt.getTransfer(V.colorSpace)!==Vn,V.matrixAutoUpdate===!0&&V.updateMatrix(),u.material.uniforms.uvTransform.value.copy(V.matrix),(h!==V||p!==V.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,h=V,p=V.version,g=n.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function _(E,M){E.getRGB(Pw,RA(n)),i.buffers.color.setClear(Pw.r,Pw.g,Pw.b,M,s)}function T(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(E,M=1){a.set(E),l=M,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,_(a,l)},render:w,addToRenderList:y,dispose:T}}function tse(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null),o=r,s=!1;function a(I,z,he,ae,Te){let be=!1,q=h(ae,he,z);o!==q&&(o=q,u(o.object)),be=g(I,ae,he,Te),be&&v(I,ae,he,Te),Te!==null&&e.update(Te,n.ELEMENT_ARRAY_BUFFER),(be||s)&&(s=!1,M(I,z,he,ae),Te!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Te).buffer))}function l(){return n.createVertexArray()}function u(I){return n.bindVertexArray(I)}function f(I){return n.deleteVertexArray(I)}function h(I,z,he){let ae=he.wireframe===!0,Te=i[I.id];Te===void 0&&(Te={},i[I.id]=Te);let be=Te[z.id];be===void 0&&(be={},Te[z.id]=be);let q=be[ae];return q===void 0&&(q=p(l()),be[ae]=q),q}function p(I){let z=[],he=[],ae=[];for(let Te=0;Te<t;Te++)z[Te]=0,he[Te]=0,ae[Te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:he,attributeDivisors:ae,object:I,attributes:{},index:null}}function g(I,z,he,ae){let Te=o.attributes,be=z.attributes,q=0,ie=he.getAttributes();for(let $ in ie)if(ie[$].location>=0){let Ue=Te[$],tt=be[$];if(tt===void 0&&($==="instanceMatrix"&&I.instanceMatrix&&(tt=I.instanceMatrix),$==="instanceColor"&&I.instanceColor&&(tt=I.instanceColor)),Ue===void 0||Ue.attribute!==tt||tt&&Ue.data!==tt.data)return!0;q++}return o.attributesNum!==q||o.index!==ae}function v(I,z,he,ae){let Te={},be=z.attributes,q=0,ie=he.getAttributes();for(let $ in ie)if(ie[$].location>=0){let Ue=be[$];Ue===void 0&&($==="instanceMatrix"&&I.instanceMatrix&&(Ue=I.instanceMatrix),$==="instanceColor"&&I.instanceColor&&(Ue=I.instanceColor));let tt={};tt.attribute=Ue,Ue&&Ue.data&&(tt.data=Ue.data),Te[$]=tt,q++}o.attributes=Te,o.attributesNum=q,o.index=ae}function w(){let I=o.newAttributes;for(let z=0,he=I.length;z<he;z++)I[z]=0}function y(I){_(I,0)}function _(I,z){let he=o.newAttributes,ae=o.enabledAttributes,Te=o.attributeDivisors;he[I]=1,ae[I]===0&&(n.enableVertexAttribArray(I),ae[I]=1),Te[I]!==z&&(n.vertexAttribDivisor(I,z),Te[I]=z)}function T(){let I=o.newAttributes,z=o.enabledAttributes;for(let he=0,ae=z.length;he<ae;he++)z[he]!==I[he]&&(n.disableVertexAttribArray(he),z[he]=0)}function E(I,z,he,ae,Te,be,q){q===!0?n.vertexAttribIPointer(I,z,he,Te,be):n.vertexAttribPointer(I,z,he,ae,Te,be)}function M(I,z,he,ae){w();let Te=ae.attributes,be=he.getAttributes(),q=z.defaultAttributeValues;for(let ie in be){let $=be[ie];if($.location>=0){let ge=Te[ie];if(ge===void 0&&(ie==="instanceMatrix"&&I.instanceMatrix&&(ge=I.instanceMatrix),ie==="instanceColor"&&I.instanceColor&&(ge=I.instanceColor)),ge!==void 0){let Ue=ge.normalized,tt=ge.itemSize,me=e.get(ge);if(me===void 0)continue;let re=me.buffer,U=me.type,Z=me.bytesPerElement,ve=U===n.INT||U===n.UNSIGNED_INT||ge.gpuType===Qx;if(ge.isInterleavedBufferAttribute){let se=ge.data,He=se.stride,je=ge.offset;if(se.isInstancedInterleavedBuffer){for(let Fe=0;Fe<$.locationSize;Fe++)_($.location+Fe,se.meshPerAttribute);I.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Fe=0;Fe<$.locationSize;Fe++)y($.location+Fe);n.bindBuffer(n.ARRAY_BUFFER,re);for(let Fe=0;Fe<$.locationSize;Fe++)E($.location+Fe,tt/$.locationSize,U,Ue,He*Z,(je+tt/$.locationSize*Fe)*Z,ve)}else{if(ge.isInstancedBufferAttribute){for(let se=0;se<$.locationSize;se++)_($.location+se,ge.meshPerAttribute);I.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let se=0;se<$.locationSize;se++)y($.location+se);n.bindBuffer(n.ARRAY_BUFFER,re);for(let se=0;se<$.locationSize;se++)E($.location+se,tt/$.locationSize,U,Ue,tt*Z,tt/$.locationSize*se*Z,ve)}}else if(q!==void 0){let Ue=q[ie];if(Ue!==void 0)switch(Ue.length){case 2:n.vertexAttrib2fv($.location,Ue);break;case 3:n.vertexAttrib3fv($.location,Ue);break;case 4:n.vertexAttrib4fv($.location,Ue);break;default:n.vertexAttrib1fv($.location,Ue)}}}}T()}function V(){G();for(let I in i){let z=i[I];for(let he in z){let ae=z[he];for(let Te in ae)f(ae[Te].object),delete ae[Te];delete z[he]}delete i[I]}}function F(I){if(i[I.id]===void 0)return;let z=i[I.id];for(let he in z){let ae=z[he];for(let Te in ae)f(ae[Te].object),delete ae[Te];delete z[he]}delete i[I.id]}function L(I){for(let z in i){let he=i[z];if(he[I.id]===void 0)continue;let ae=he[I.id];for(let Te in ae)f(ae[Te].object),delete ae[Te];delete he[I.id]}}function G(){O(),s=!0,o!==r&&(o=r,u(o.object))}function O(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:G,resetDefaultState:O,dispose:V,releaseStatesOfGeometry:F,releaseStatesOfProgram:L,initAttributes:w,enableAttribute:y,disableUnusedAttributes:T}}function nse(n,e,t){let i;function r(u){i=u}function o(u,f){n.drawArrays(i,u,f),t.update(f,i,1)}function s(u,f,h){h!==0&&(n.drawArraysInstanced(i,u,f,h),t.update(f,i,h))}function a(u,f,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,f,0,h);let g=0;for(let v=0;v<h;v++)g+=f[v];t.update(g,i,1)}function l(u,f,h,p){if(h===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<u.length;v++)s(u[v],f[v],p[v]);else{g.multiDrawArraysInstancedWEBGL(i,u,0,f,0,p,0,h);let v=0;for(let w=0;w<h;w++)v+=f[w]*p[w];t.update(v,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function ise(n,e,t,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(L){return!(L!==ko&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(L){let G=L===hh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==ra&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==vs&&!G)}function l(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp",f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);let h=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),V=v>0,F=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:p,maxTextures:g,maxVertexTextures:v,maxTextureSize:w,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:T,maxVaryings:E,maxFragmentUniforms:M,vertexTextures:V,maxSamples:F}}function rse(n){let e=this,t=null,i=0,r=!1,o=!1,s=new ds,a=new Gt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){let g=h.length!==0||p||i!==0||r;return r=p,i=h.length,g},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,p){t=f(h,p,0)},this.setState=function(h,p,g){let v=h.clippingPlanes,w=h.clipIntersection,y=h.clipShadows,_=n.get(h);if(!r||v===null||v.length===0||o&&!y)o?f(null):u();else{let T=o?0:i,E=T*4,M=_.clippingState||null;l.value=M,M=f(v,p,E,g);for(let V=0;V!==E;++V)M[V]=t[V];_.clippingState=M,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=T}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(h,p,g,v){let w=h!==null?h.length:0,y=null;if(w!==0){if(y=l.value,v!==!0||y===null){let _=g+w*4,T=p.matrixWorldInverse;a.getNormalMatrix(T),(y===null||y.length<_)&&(y=new Float32Array(_));for(let E=0,M=g;E!==w;++E,M+=4)s.copy(h[E]).applyMatrix4(T,a),s.normal.toArray(y,M),y[M+3]=s.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,y}}function ose(n){let e=new WeakMap;function t(s,a){return a===uh?s.mapping=Qu:a===Kx&&(s.mapping=ed),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===uh||a===Kx)if(e.has(s)){let l=e.get(s).texture;return t(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new Sx(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",r),t(u.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}var yh=4,CB=[.125,.215,.35,.446,.526,.582],sd=20,LA=new Ku,TB=new ft,kA=null,UA=0,BA=0,VA=!1,od=(1+Math.sqrt(5))/2,vh=1/od,AB=[new B(-od,vh,0),new B(od,vh,0),new B(-vh,0,od),new B(vh,0,od),new B(0,od,-vh),new B(0,od,vh),new B(-1,1,-1),new B(1,1,-1),new B(-1,1,1),new B(1,1,1)],sse=new B,Fw=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,o={}){let{size:s=256,position:a=sse}=o;kA=this._renderer.getRenderTarget(),UA=this._renderer.getActiveCubeFace(),BA=this._renderer.getActiveMipmapLevel(),VA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=RB(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=DB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(kA,UA,BA),this._renderer.xr.enabled=VA,e.scissorTest=!1,Ow(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Qu||e.mapping===ed?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),kA=this._renderer.getRenderTarget(),UA=this._renderer.getActiveCubeFace(),BA=this._renderer.getActiveMipmapLevel(),VA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ur,minFilter:Ur,generateMipmaps:!1,type:hh,format:ko,colorSpace:pr,depthBuffer:!1},r=IB(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=IB(e,t,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ase(o)),this._blurMaterial=lse(o,e,t)}return r}_compileMaterial(e){let t=new ui(this._lodPlanes[0],e);this._renderer.compile(t,LA)}_sceneToCubeUV(e,t,i,r,o){let l=new Ei(90,1,t,i),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,g=h.toneMapping;h.getClearColor(TB),h.toneMapping=Ul,h.autoClear=!1;let v=new Fo({name:"PMREM.Background",side:Hr,depthWrite:!1,depthTest:!1}),w=new ui(new th,v),y=!1,_=e.background;_?_.isColor&&(v.color.copy(_),e.background=null,y=!0):(v.color.copy(TB),y=!0);for(let T=0;T<6;T++){let E=T%3;E===0?(l.up.set(0,u[T],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+f[T],o.y,o.z)):E===1?(l.up.set(0,0,u[T]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+f[T],o.z)):(l.up.set(0,u[T],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+f[T]));let M=this._cubeSize;Ow(r,E*M,T>2?M:0,M,M),h.setRenderTarget(r),y&&h.render(w,l),h.render(e,l)}w.geometry.dispose(),w.material.dispose(),h.toneMapping=g,h.autoClear=p,e.background=_}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Qu||e.mapping===ed;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=RB()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=DB());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new ui(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let l=this._cubeSize;Ow(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,LA)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=AB[(r-o-1)%AB.length];this._blur(e,o-1,o,s,a)}t.autoClear=i}_blur(e,t,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){let l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,h=new ui(this._lodPlanes[r],u),p=u.uniforms,g=this._sizeLods[i]-1,v=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*sd-1),w=o/v,y=isFinite(o)?1+Math.floor(f*w):sd;y>sd&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${sd}`);let _=[],T=0;for(let L=0;L<sd;++L){let G=L/w,O=Math.exp(-G*G/2);_.push(O),L===0?T+=O:L<y&&(T+=2*O)}for(let L=0;L<_.length;L++)_[L]=_[L]/T;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=_,p.latitudinal.value=s==="latitudinal",a&&(p.poleAxis.value=a);let{_lodMax:E}=this;p.dTheta.value=v,p.mipInt.value=E-i;let M=this._sizeLods[r],V=3*M*(r>E-yh?r-E+yh:0),F=4*(this._cubeSize-M);Ow(t,V,F,3*M,2*M),l.setRenderTarget(t),l.render(h,LA)}};function ase(n){let e=[],t=[],i=[],r=n,o=n-yh+1+CB.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);t.push(a);let l=1/a;s>n-yh?l=CB[s-n+yh-1]:s===0&&(l=0),i.push(l);let u=1/(a-2),f=-u,h=1+u,p=[f,f,h,f,h,h,f,f,h,h,f,h],g=6,v=6,w=3,y=2,_=1,T=new Float32Array(w*v*g),E=new Float32Array(y*v*g),M=new Float32Array(_*v*g);for(let F=0;F<g;F++){let L=F%3*2/3-1,G=F>2?0:-1,O=[L,G,0,L+2/3,G,0,L+2/3,G+1,0,L,G,0,L+2/3,G+1,0,L,G+1,0];T.set(O,w*v*F),E.set(p,y*v*F);let I=[F,F,F,F,F,F];M.set(I,_*v*F)}let V=new Pi;V.setAttribute("position",new Bi(T,w)),V.setAttribute("uv",new Bi(E,y)),V.setAttribute("faceIndex",new Bi(M,_)),e.push(V),r>yh&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function IB(n,e,t){let i=new La(n,e,t);return i.texture.mapping=gg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ow(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function lse(n,e,t){let i=new Float32Array(sd),r=new B(0,1,0);return new ea({name:"SphericalGaussianBlur",defines:{n:sd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ZA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:kl,depthTest:!1,depthWrite:!1})}function DB(){return new ea({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ZA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:kl,depthTest:!1,depthWrite:!1})}function RB(){return new ea({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ZA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:kl,depthTest:!1,depthWrite:!1})}function ZA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cse(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let l=a.mapping,u=l===uh||l===Kx,f=l===Qu||l===ed;if(u||f){let h=e.get(a),p=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new Fw(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{let g=a.image;return u&&g&&g.height>0||f&&g&&r(g)?(t===null&&(t=new Fw(n)),h=u?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let l=0,u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function o(a){let l=a.target;l.removeEventListener("dispose",o);let u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function use(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&Mg("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function dse(n,e,t,i){let r={},o=new WeakMap;function s(h){let p=h.target;p.index!==null&&e.remove(p.index);for(let v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",s),delete r[p.id];let g=o.get(p);g&&(e.remove(g),o.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",s),r[p.id]=!0,t.memory.geometries++),p}function l(h){let p=h.attributes;for(let g in p)e.update(p[g],n.ARRAY_BUFFER)}function u(h){let p=[],g=h.index,v=h.attributes.position,w=0;if(g!==null){let T=g.array;w=g.version;for(let E=0,M=T.length;E<M;E+=3){let V=T[E+0],F=T[E+1],L=T[E+2];p.push(V,F,F,L,L,V)}}else if(v!==void 0){let T=v.array;w=v.version;for(let E=0,M=T.length/3-1;E<M;E+=3){let V=E+0,F=E+1,L=E+2;p.push(V,F,F,L,L,V)}}else return;let y=new(DA(p)?jm:ju)(p,1);y.version=w;let _=o.get(h);_&&e.remove(_),o.set(h,y)}function f(h){let p=o.get(h);if(p){let g=h.index;g!==null&&p.version<g.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:f}}function fse(n,e,t){let i;function r(p){i=p}let o,s;function a(p){o=p.type,s=p.bytesPerElement}function l(p,g){n.drawElements(i,g,o,p*s),t.update(g,i,1)}function u(p,g,v){v!==0&&(n.drawElementsInstanced(i,g,o,p*s,v),t.update(g,i,v))}function f(p,g,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,o,p,0,v);let y=0;for(let _=0;_<v;_++)y+=g[_];t.update(y,i,1)}function h(p,g,v,w){if(v===0)return;let y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<p.length;_++)u(p[_]/s,g[_],w[_]);else{y.multiDrawElementsInstancedWEBGL(i,g,0,o,p,0,w,0,v);let _=0;for(let T=0;T<v;T++)_+=g[T]*w[T];t.update(_,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function hse(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function pse(n,e,t){let i=new WeakMap,r=new rn;function o(s,a,l){let u=s.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0,p=i.get(a);if(p===void 0||p.count!==h){let I=function(){G.dispose(),i.delete(a),a.removeEventListener("dispose",I)};var g=I;p!==void 0&&p.texture.dispose();let v=a.morphAttributes.position!==void 0,w=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],T=a.morphAttributes.normal||[],E=a.morphAttributes.color||[],M=0;v===!0&&(M=1),w===!0&&(M=2),y===!0&&(M=3);let V=a.attributes.position.count*M,F=1;V>e.maxTextureSize&&(F=Math.ceil(V/e.maxTextureSize),V=e.maxTextureSize);let L=new Float32Array(V*F*4*h),G=new zm(L,V,F,h);G.type=vs,G.needsUpdate=!0;let O=M*4;for(let z=0;z<h;z++){let he=_[z],ae=T[z],Te=E[z],be=V*F*4*z;for(let q=0;q<he.count;q++){let ie=q*O;v===!0&&(r.fromBufferAttribute(he,q),L[be+ie+0]=r.x,L[be+ie+1]=r.y,L[be+ie+2]=r.z,L[be+ie+3]=0),w===!0&&(r.fromBufferAttribute(ae,q),L[be+ie+4]=r.x,L[be+ie+5]=r.y,L[be+ie+6]=r.z,L[be+ie+7]=0),y===!0&&(r.fromBufferAttribute(Te,q),L[be+ie+8]=r.x,L[be+ie+9]=r.y,L[be+ie+10]=r.z,L[be+ie+11]=Te.itemSize===4?r.w:1)}}p={count:h,texture:G,size:new We(V,F)},i.set(a,p),a.addEventListener("dispose",I)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let v=0;for(let y=0;y<u.length;y++)v+=u[y];let w=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",w),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:o}}function mse(n,e,t,i){let r=new WeakMap;function o(l){let u=i.render.frame,f=l.geometry,h=e.get(l,f);if(r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){let p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return h}function s(){r=new WeakMap}function a(l){let u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:o,dispose:s}}var ZB=new zr,PB=new Zm(1,1),KB=new zm,JB=new Ex,QB=new Wm,OB=[],NB=[],FB=new Float32Array(16),LB=new Float32Array(9),kB=new Float32Array(4);function xh(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,o=OB[r];if(o===void 0&&(o=new Float32Array(r),OB[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function qi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Xi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function kw(n,e){let t=NB[e];t===void 0&&(t=new Int32Array(e),NB[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function gse(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function vse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qi(t,e))return;n.uniform2fv(this.addr,e),Xi(t,e)}}function yse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(qi(t,e))return;n.uniform3fv(this.addr,e),Xi(t,e)}}function _se(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qi(t,e))return;n.uniform4fv(this.addr,e),Xi(t,e)}}function xse(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(qi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Xi(t,e)}else{if(qi(t,i))return;kB.set(i),n.uniformMatrix2fv(this.addr,!1,kB),Xi(t,i)}}function wse(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(qi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Xi(t,e)}else{if(qi(t,i))return;LB.set(i),n.uniformMatrix3fv(this.addr,!1,LB),Xi(t,i)}}function bse(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(qi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Xi(t,e)}else{if(qi(t,i))return;FB.set(i),n.uniformMatrix4fv(this.addr,!1,FB),Xi(t,i)}}function Ese(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Mse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qi(t,e))return;n.uniform2iv(this.addr,e),Xi(t,e)}}function Sse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qi(t,e))return;n.uniform3iv(this.addr,e),Xi(t,e)}}function Cse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qi(t,e))return;n.uniform4iv(this.addr,e),Xi(t,e)}}function Tse(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Ase(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qi(t,e))return;n.uniform2uiv(this.addr,e),Xi(t,e)}}function Ise(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qi(t,e))return;n.uniform3uiv(this.addr,e),Xi(t,e)}}function Dse(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qi(t,e))return;n.uniform4uiv(this.addr,e),Xi(t,e)}}function Rse(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(PB.compareFunction=TA,o=PB):o=ZB,t.setTexture2D(e||o,r)}function Pse(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||JB,r)}function Ose(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||QB,r)}function Nse(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||KB,r)}function Fse(n){switch(n){case 5126:return gse;case 35664:return vse;case 35665:return yse;case 35666:return _se;case 35674:return xse;case 35675:return wse;case 35676:return bse;case 5124:case 35670:return Ese;case 35667:case 35671:return Mse;case 35668:case 35672:return Sse;case 35669:case 35673:return Cse;case 5125:return Tse;case 36294:return Ase;case 36295:return Ise;case 36296:return Dse;case 35678:case 36198:case 36298:case 36306:case 35682:return Rse;case 35679:case 36299:case 36307:return Pse;case 35680:case 36300:case 36308:case 36293:return Ose;case 36289:case 36303:case 36311:case 36292:return Nse}}function Lse(n,e){n.uniform1fv(this.addr,e)}function kse(n,e){let t=xh(e,this.size,2);n.uniform2fv(this.addr,t)}function Use(n,e){let t=xh(e,this.size,3);n.uniform3fv(this.addr,t)}function Bse(n,e){let t=xh(e,this.size,4);n.uniform4fv(this.addr,t)}function Vse(n,e){let t=xh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Hse(n,e){let t=xh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function zse(n,e){let t=xh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function jse(n,e){n.uniform1iv(this.addr,e)}function Gse(n,e){n.uniform2iv(this.addr,e)}function Wse(n,e){n.uniform3iv(this.addr,e)}function $se(n,e){n.uniform4iv(this.addr,e)}function qse(n,e){n.uniform1uiv(this.addr,e)}function Xse(n,e){n.uniform2uiv(this.addr,e)}function Yse(n,e){n.uniform3uiv(this.addr,e)}function Zse(n,e){n.uniform4uiv(this.addr,e)}function Kse(n,e,t){let i=this.cache,r=e.length,o=kw(t,r);qi(i,o)||(n.uniform1iv(this.addr,o),Xi(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||ZB,o[s])}function Jse(n,e,t){let i=this.cache,r=e.length,o=kw(t,r);qi(i,o)||(n.uniform1iv(this.addr,o),Xi(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||JB,o[s])}function Qse(n,e,t){let i=this.cache,r=e.length,o=kw(t,r);qi(i,o)||(n.uniform1iv(this.addr,o),Xi(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||QB,o[s])}function eae(n,e,t){let i=this.cache,r=e.length,o=kw(t,r);qi(i,o)||(n.uniform1iv(this.addr,o),Xi(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||KB,o[s])}function tae(n){switch(n){case 5126:return Lse;case 35664:return kse;case 35665:return Use;case 35666:return Bse;case 35674:return Vse;case 35675:return Hse;case 35676:return zse;case 5124:case 35670:return jse;case 35667:case 35671:return Gse;case 35668:case 35672:return Wse;case 35669:case 35673:return $se;case 5125:return qse;case 36294:return Xse;case 36295:return Yse;case 36296:return Zse;case 35678:case 36198:case 36298:case 36306:case 35682:return Kse;case 35679:case 36299:case 36307:return Jse;case 35680:case 36300:case 36308:case 36293:return Qse;case 36289:case 36303:case 36311:case 36292:return eae}}var zA=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Fse(t.type)}},jA=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=tae(t.type)}},GA=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,t[a.id],i)}}},HA=/(\w+)(\])?(\[|\.)?/g;function UB(n,e){n.seq.push(e),n.map[e.id]=e}function nae(n,e,t){let i=n.name,r=i.length;for(HA.lastIndex=0;;){let o=HA.exec(i),s=HA.lastIndex,a=o[1],l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===r){UB(t,u===void 0?new zA(a,n,e):new jA(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new GA(a),UB(t,h)),t=h}}}var _h=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=e.getActiveUniform(t,r),s=e.getUniformLocation(t,o.name);nae(o,s,this)}}setValue(e,t,i,r){let o=this.map[t];o!==void 0&&o.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){let a=t[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function BB(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var iae=37297,rae=0;function oae(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join(`
`)}var VB=new Gt;function sae(n){Bt._getMatrix(VB,Bt.workingColorSpace,n);let e=`mat3( ${VB.elements.map(t=>t.toFixed(4))} )`;switch(Bt.getTransfer(n)){case Vm:return[e,"LinearTransferOETF"];case Vn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function HB(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+oae(n.getShaderSource(e),s)}else return r}function aae(n,e){let t=sae(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function lae(n,e){let t;switch(e){case YU:t="Linear";break;case ZU:t="Reinhard";break;case KU:t="Cineon";break;case JU:t="ACESFilmic";break;case eB:t="AgX";break;case tB:t="Neutral";break;case QU:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var Nw=new B;function cae(){Bt.getLuminanceCoefficients(Nw);let n=Nw.x.toFixed(4),e=Nw.y.toFixed(4),t=Nw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function uae(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Sg).join(`
`)}function dae(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function fae(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function Sg(n){return n!==""}function zB(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jB(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var hae=/^[ \t]*#include +<([\w\d./]+)>/gm;function WA(n){return n.replace(hae,mae)}var pae=new Map;function mae(n,e){let t=on[e];if(t===void 0){let i=pae.get(e);if(i!==void 0)t=on[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return WA(t)}var gae=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function GB(n){return n.replace(gae,vae)}function vae(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function WB(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function yae(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===mA?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===AU?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Va&&(e="SHADOWMAP_TYPE_VSM"),e}function _ae(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Qu:case ed:e="ENVMAP_TYPE_CUBE";break;case gg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function xae(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ed:e="ENVMAP_MODE_REFRACTION";break}return e}function wae(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case mg:e="ENVMAP_BLENDING_MULTIPLY";break;case qU:e="ENVMAP_BLENDING_MIX";break;case XU:e="ENVMAP_BLENDING_ADD";break}return e}function bae(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Eae(n,e,t,i){let r=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,l=yae(t),u=_ae(t),f=xae(t),h=wae(t),p=bae(t),g=uae(t),v=dae(o),w=r.createProgram(),y,_,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Sg).join(`
`),y.length>0&&(y+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Sg).join(`
`),_.length>0&&(_+=`
`)):(y=[WB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sg).join(`
`),_=[WB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ul?"#define TONE_MAPPING":"",t.toneMapping!==Ul?on.tonemapping_pars_fragment:"",t.toneMapping!==Ul?lae("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",on.colorspace_pars_fragment,aae("linearToOutputTexel",t.outputColorSpace),cae(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Sg).join(`
`)),s=WA(s),s=zB(s,t),s=jB(s,t),a=WA(a),a=zB(a,t),a=jB(a,t),s=GB(s),a=GB(a),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,y=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===AA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===AA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);let E=T+y+s,M=T+_+a,V=BB(r,r.VERTEX_SHADER,E),F=BB(r,r.FRAGMENT_SHADER,M);r.attachShader(w,V),r.attachShader(w,F),t.index0AttributeName!==void 0?r.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function L(z){if(n.debug.checkShaderErrors){let he=r.getProgramInfoLog(w).trim(),ae=r.getShaderInfoLog(V).trim(),Te=r.getShaderInfoLog(F).trim(),be=!0,q=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(be=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,w,V,F);else{let ie=HB(r,V,"vertex"),$=HB(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+z.name+`
Material Type: `+z.type+`

Program Info Log: `+he+`
`+ie+`
`+$)}else he!==""?console.warn("THREE.WebGLProgram: Program Info Log:",he):(ae===""||Te==="")&&(q=!1);q&&(z.diagnostics={runnable:be,programLog:he,vertexShader:{log:ae,prefix:y},fragmentShader:{log:Te,prefix:_}})}r.deleteShader(V),r.deleteShader(F),G=new _h(r,w),O=fae(r,w)}let G;this.getUniforms=function(){return G===void 0&&L(this),G};let O;this.getAttributes=function(){return O===void 0&&L(this),O};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=r.getProgramParameter(w,iae)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=rae++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=V,this.fragmentShader=F,this}var Mae=0,$A=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new qA(e),t.set(e,i)),i}},qA=class{constructor(e){this.id=Mae++,this.code=e,this.usedTimes=0}};function Sae(n,e,t,i,r,o,s){let a=new eh,l=new $A,u=new Set,f=[],h=r.logarithmicDepthBuffer,p=r.vertexTextures,g=r.precision,v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(O){return u.add(O),O===0?"uv":`uv${O}`}function y(O,I,z,he,ae){let Te=he.fog,be=ae.geometry,q=O.isMeshStandardMaterial?he.environment:null,ie=(O.isMeshStandardMaterial?t:e).get(O.envMap||q),$=ie&&ie.mapping===gg?ie.image.height:null,ge=v[O.type];O.precision!==null&&(g=r.getMaxPrecision(O.precision),g!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",g,"instead."));let Ue=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,tt=Ue!==void 0?Ue.length:0,me=0;be.morphAttributes.position!==void 0&&(me=1),be.morphAttributes.normal!==void 0&&(me=2),be.morphAttributes.color!==void 0&&(me=3);let re,U,Z,ve;if(ge){let xn=Ha[ge];re=xn.vertexShader,U=xn.fragmentShader}else re=O.vertexShader,U=O.fragmentShader,l.update(O),Z=l.getVertexShaderID(O),ve=l.getFragmentShaderID(O);let se=n.getRenderTarget(),He=n.state.buffers.depth.getReversed(),je=ae.isInstancedMesh===!0,Fe=ae.isBatchedMesh===!0,rt=!!O.map,pt=!!O.matcap,ut=!!ie,H=!!O.aoMap,qt=!!O.lightMap,Ge=!!O.bumpMap,At=!!O.normalMap,Xe=!!O.displacementMap,Vt=!!O.emissiveMap,ht=!!O.metalnessMap,N=!!O.roughnessMap,S=O.anisotropy>0,oe=O.clearcoat>0,xe=O.dispersion>0,Ae=O.iridescence>0,fe=O.sheen>0,$e=O.transmission>0,qe=S&&!!O.anisotropyMap,gt=oe&&!!O.clearcoatMap,vt=oe&&!!O.clearcoatNormalMap,Ne=oe&&!!O.clearcoatRoughnessMap,nt=Ae&&!!O.iridescenceMap,yt=Ae&&!!O.iridescenceThicknessMap,bt=fe&&!!O.sheenColorMap,it=fe&&!!O.sheenRoughnessMap,sn=!!O.specularMap,Ht=!!O.specularColorMap,Dn=!!O.specularIntensityMap,X=$e&&!!O.transmissionMap,Ze=$e&&!!O.thicknessMap,pe=!!O.gradientMap,Se=!!O.alphaMap,et=O.alphaTest>0,Ye=!!O.alphaHash,Ot=!!O.extensions,zn=Ul;O.toneMapped&&(se===null||se.isXRRenderTarget===!0)&&(zn=n.toneMapping);let Mi={shaderID:ge,shaderType:O.type,shaderName:O.name,vertexShader:re,fragmentShader:U,defines:O.defines,customVertexShaderID:Z,customFragmentShaderID:ve,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:g,batching:Fe,batchingColor:Fe&&ae._colorsTexture!==null,instancing:je,instancingColor:je&&ae.instanceColor!==null,instancingMorph:je&&ae.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:se===null?n.outputColorSpace:se.isXRRenderTarget===!0?se.texture.colorSpace:pr,alphaToCoverage:!!O.alphaToCoverage,map:rt,matcap:pt,envMap:ut,envMapMode:ut&&ie.mapping,envMapCubeUVHeight:$,aoMap:H,lightMap:qt,bumpMap:Ge,normalMap:At,displacementMap:p&&Xe,emissiveMap:Vt,normalMapObjectSpace:At&&O.normalMapType===sB,normalMapTangentSpace:At&&O.normalMapType===Eg,metalnessMap:ht,roughnessMap:N,anisotropy:S,anisotropyMap:qe,clearcoat:oe,clearcoatMap:gt,clearcoatNormalMap:vt,clearcoatRoughnessMap:Ne,dispersion:xe,iridescence:Ae,iridescenceMap:nt,iridescenceThicknessMap:yt,sheen:fe,sheenColorMap:bt,sheenRoughnessMap:it,specularMap:sn,specularColorMap:Ht,specularIntensityMap:Dn,transmission:$e,transmissionMap:X,thicknessMap:Ze,gradientMap:pe,opaque:O.transparent===!1&&O.blending===Uu&&O.alphaToCoverage===!1,alphaMap:Se,alphaTest:et,alphaHash:Ye,combine:O.combine,mapUv:rt&&w(O.map.channel),aoMapUv:H&&w(O.aoMap.channel),lightMapUv:qt&&w(O.lightMap.channel),bumpMapUv:Ge&&w(O.bumpMap.channel),normalMapUv:At&&w(O.normalMap.channel),displacementMapUv:Xe&&w(O.displacementMap.channel),emissiveMapUv:Vt&&w(O.emissiveMap.channel),metalnessMapUv:ht&&w(O.metalnessMap.channel),roughnessMapUv:N&&w(O.roughnessMap.channel),anisotropyMapUv:qe&&w(O.anisotropyMap.channel),clearcoatMapUv:gt&&w(O.clearcoatMap.channel),clearcoatNormalMapUv:vt&&w(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ne&&w(O.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&w(O.iridescenceMap.channel),iridescenceThicknessMapUv:yt&&w(O.iridescenceThicknessMap.channel),sheenColorMapUv:bt&&w(O.sheenColorMap.channel),sheenRoughnessMapUv:it&&w(O.sheenRoughnessMap.channel),specularMapUv:sn&&w(O.specularMap.channel),specularColorMapUv:Ht&&w(O.specularColorMap.channel),specularIntensityMapUv:Dn&&w(O.specularIntensityMap.channel),transmissionMapUv:X&&w(O.transmissionMap.channel),thicknessMapUv:Ze&&w(O.thicknessMap.channel),alphaMapUv:Se&&w(O.alphaMap.channel),vertexTangents:!!be.attributes.tangent&&(At||S),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,pointsUvs:ae.isPoints===!0&&!!be.attributes.uv&&(rt||Se),fog:!!Te,useFog:O.fog===!0,fogExp2:!!Te&&Te.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:He,skinning:ae.isSkinnedMesh===!0,morphTargets:be.morphAttributes.position!==void 0,morphNormals:be.morphAttributes.normal!==void 0,morphColors:be.morphAttributes.color!==void 0,morphTargetsCount:tt,morphTextureStride:me,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&z.length>0,shadowMapType:n.shadowMap.type,toneMapping:zn,decodeVideoTexture:rt&&O.map.isVideoTexture===!0&&Bt.getTransfer(O.map.colorSpace)===Vn,decodeVideoTextureEmissive:Vt&&O.emissiveMap.isVideoTexture===!0&&Bt.getTransfer(O.emissiveMap.colorSpace)===Vn,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===gs,flipSided:O.side===Hr,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Ot&&O.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ot&&O.extensions.multiDraw===!0||Fe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return Mi.vertexUv1s=u.has(1),Mi.vertexUv2s=u.has(2),Mi.vertexUv3s=u.has(3),u.clear(),Mi}function _(O){let I=[];if(O.shaderID?I.push(O.shaderID):(I.push(O.customVertexShaderID),I.push(O.customFragmentShaderID)),O.defines!==void 0)for(let z in O.defines)I.push(z),I.push(O.defines[z]);return O.isRawShaderMaterial===!1&&(T(I,O),E(I,O),I.push(n.outputColorSpace)),I.push(O.customProgramCacheKey),I.join()}function T(O,I){O.push(I.precision),O.push(I.outputColorSpace),O.push(I.envMapMode),O.push(I.envMapCubeUVHeight),O.push(I.mapUv),O.push(I.alphaMapUv),O.push(I.lightMapUv),O.push(I.aoMapUv),O.push(I.bumpMapUv),O.push(I.normalMapUv),O.push(I.displacementMapUv),O.push(I.emissiveMapUv),O.push(I.metalnessMapUv),O.push(I.roughnessMapUv),O.push(I.anisotropyMapUv),O.push(I.clearcoatMapUv),O.push(I.clearcoatNormalMapUv),O.push(I.clearcoatRoughnessMapUv),O.push(I.iridescenceMapUv),O.push(I.iridescenceThicknessMapUv),O.push(I.sheenColorMapUv),O.push(I.sheenRoughnessMapUv),O.push(I.specularMapUv),O.push(I.specularColorMapUv),O.push(I.specularIntensityMapUv),O.push(I.transmissionMapUv),O.push(I.thicknessMapUv),O.push(I.combine),O.push(I.fogExp2),O.push(I.sizeAttenuation),O.push(I.morphTargetsCount),O.push(I.morphAttributeCount),O.push(I.numDirLights),O.push(I.numPointLights),O.push(I.numSpotLights),O.push(I.numSpotLightMaps),O.push(I.numHemiLights),O.push(I.numRectAreaLights),O.push(I.numDirLightShadows),O.push(I.numPointLightShadows),O.push(I.numSpotLightShadows),O.push(I.numSpotLightShadowsWithMaps),O.push(I.numLightProbes),O.push(I.shadowMapType),O.push(I.toneMapping),O.push(I.numClippingPlanes),O.push(I.numClipIntersection),O.push(I.depthPacking)}function E(O,I){a.disableAll(),I.supportsVertexTextures&&a.enable(0),I.instancing&&a.enable(1),I.instancingColor&&a.enable(2),I.instancingMorph&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),I.dispersion&&a.enable(20),I.batchingColor&&a.enable(21),O.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.reverseDepthBuffer&&a.enable(4),I.skinning&&a.enable(5),I.morphTargets&&a.enable(6),I.morphNormals&&a.enable(7),I.morphColors&&a.enable(8),I.premultipliedAlpha&&a.enable(9),I.shadowMapEnabled&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),I.decodeVideoTextureEmissive&&a.enable(20),I.alphaToCoverage&&a.enable(21),O.push(a.mask)}function M(O){let I=v[O.type],z;if(I){let he=Ha[I];z=_B.clone(he.uniforms)}else z=O.uniforms;return z}function V(O,I){let z;for(let he=0,ae=f.length;he<ae;he++){let Te=f[he];if(Te.cacheKey===I){z=Te,++z.usedTimes;break}}return z===void 0&&(z=new Eae(n,I,O,o),f.push(z)),z}function F(O){if(--O.usedTimes===0){let I=f.indexOf(O);f[I]=f[f.length-1],f.pop(),O.destroy()}}function L(O){l.remove(O)}function G(){l.dispose()}return{getParameters:y,getProgramCacheKey:_,getUniforms:M,acquireProgram:V,releaseProgram:F,releaseShaderCache:L,programs:f,dispose:G}}function Cae(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,l){n.get(s)[a]=l}function o(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:o}}function Tae(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function $B(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function qB(){let n=[],e=0,t=[],i=[],r=[];function o(){e=0,t.length=0,i.length=0,r.length=0}function s(h,p,g,v,w,y){let _=n[e];return _===void 0?(_={id:h.id,object:h,geometry:p,material:g,groupOrder:v,renderOrder:h.renderOrder,z:w,group:y},n[e]=_):(_.id=h.id,_.object=h,_.geometry=p,_.material=g,_.groupOrder=v,_.renderOrder=h.renderOrder,_.z=w,_.group=y),e++,_}function a(h,p,g,v,w,y){let _=s(h,p,g,v,w,y);g.transmission>0?i.push(_):g.transparent===!0?r.push(_):t.push(_)}function l(h,p,g,v,w,y){let _=s(h,p,g,v,w,y);g.transmission>0?i.unshift(_):g.transparent===!0?r.unshift(_):t.unshift(_)}function u(h,p){t.length>1&&t.sort(h||Tae),i.length>1&&i.sort(p||$B),r.length>1&&r.sort(p||$B)}function f(){for(let h=e,p=n.length;h<p;h++){let g=n[h];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:f,sort:u}}function Aae(){let n=new WeakMap;function e(i,r){let o=n.get(i),s;return o===void 0?(s=new qB,n.set(i,[s])):r>=o.length?(s=new qB,o.push(s)):s=o[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Iae(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new B,color:new ft};break;case"SpotLight":t={position:new B,direction:new B,color:new ft,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new B,color:new ft,distance:0,decay:0};break;case"HemisphereLight":t={direction:new B,skyColor:new ft,groundColor:new ft};break;case"RectAreaLight":t={color:new ft,position:new B,halfWidth:new B,halfHeight:new B};break}return n[e.id]=t,t}}}function Dae(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var Rae=0;function Pae(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Oae(n){let e=new Iae,t=Dae(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new B);let r=new B,o=new ct,s=new ct;function a(u){let f=0,h=0,p=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let g=0,v=0,w=0,y=0,_=0,T=0,E=0,M=0,V=0,F=0,L=0;u.sort(Pae);for(let O=0,I=u.length;O<I;O++){let z=u[O],he=z.color,ae=z.intensity,Te=z.distance,be=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)f+=he.r*ae,h+=he.g*ae,p+=he.b*ae;else if(z.isLightProbe){for(let q=0;q<9;q++)i.probe[q].addScaledVector(z.sh.coefficients[q],ae);L++}else if(z.isDirectionalLight){let q=e.get(z);if(q.color.copy(z.color).multiplyScalar(z.intensity),z.castShadow){let ie=z.shadow,$=t.get(z);$.shadowIntensity=ie.intensity,$.shadowBias=ie.bias,$.shadowNormalBias=ie.normalBias,$.shadowRadius=ie.radius,$.shadowMapSize=ie.mapSize,i.directionalShadow[g]=$,i.directionalShadowMap[g]=be,i.directionalShadowMatrix[g]=z.shadow.matrix,T++}i.directional[g]=q,g++}else if(z.isSpotLight){let q=e.get(z);q.position.setFromMatrixPosition(z.matrixWorld),q.color.copy(he).multiplyScalar(ae),q.distance=Te,q.coneCos=Math.cos(z.angle),q.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),q.decay=z.decay,i.spot[w]=q;let ie=z.shadow;if(z.map&&(i.spotLightMap[V]=z.map,V++,ie.updateMatrices(z),z.castShadow&&F++),i.spotLightMatrix[w]=ie.matrix,z.castShadow){let $=t.get(z);$.shadowIntensity=ie.intensity,$.shadowBias=ie.bias,$.shadowNormalBias=ie.normalBias,$.shadowRadius=ie.radius,$.shadowMapSize=ie.mapSize,i.spotShadow[w]=$,i.spotShadowMap[w]=be,M++}w++}else if(z.isRectAreaLight){let q=e.get(z);q.color.copy(he).multiplyScalar(ae),q.halfWidth.set(z.width*.5,0,0),q.halfHeight.set(0,z.height*.5,0),i.rectArea[y]=q,y++}else if(z.isPointLight){let q=e.get(z);if(q.color.copy(z.color).multiplyScalar(z.intensity),q.distance=z.distance,q.decay=z.decay,z.castShadow){let ie=z.shadow,$=t.get(z);$.shadowIntensity=ie.intensity,$.shadowBias=ie.bias,$.shadowNormalBias=ie.normalBias,$.shadowRadius=ie.radius,$.shadowMapSize=ie.mapSize,$.shadowCameraNear=ie.camera.near,$.shadowCameraFar=ie.camera.far,i.pointShadow[v]=$,i.pointShadowMap[v]=be,i.pointShadowMatrix[v]=z.shadow.matrix,E++}i.point[v]=q,v++}else if(z.isHemisphereLight){let q=e.get(z);q.skyColor.copy(z.color).multiplyScalar(ae),q.groundColor.copy(z.groundColor).multiplyScalar(ae),i.hemi[_]=q,_++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Qe.LTC_FLOAT_1,i.rectAreaLTC2=Qe.LTC_FLOAT_2):(i.rectAreaLTC1=Qe.LTC_HALF_1,i.rectAreaLTC2=Qe.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;let G=i.hash;(G.directionalLength!==g||G.pointLength!==v||G.spotLength!==w||G.rectAreaLength!==y||G.hemiLength!==_||G.numDirectionalShadows!==T||G.numPointShadows!==E||G.numSpotShadows!==M||G.numSpotMaps!==V||G.numLightProbes!==L)&&(i.directional.length=g,i.spot.length=w,i.rectArea.length=y,i.point.length=v,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=M+V-F,i.spotLightMap.length=V,i.numSpotLightShadowsWithMaps=F,i.numLightProbes=L,G.directionalLength=g,G.pointLength=v,G.spotLength=w,G.rectAreaLength=y,G.hemiLength=_,G.numDirectionalShadows=T,G.numPointShadows=E,G.numSpotShadows=M,G.numSpotMaps=V,G.numLightProbes=L,i.version=Rae++)}function l(u,f){let h=0,p=0,g=0,v=0,w=0,y=f.matrixWorldInverse;for(let _=0,T=u.length;_<T;_++){let E=u[_];if(E.isDirectionalLight){let M=i.directional[h];M.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(y),h++}else if(E.isSpotLight){let M=i.spot[g];M.position.setFromMatrixPosition(E.matrixWorld),M.position.applyMatrix4(y),M.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(y),g++}else if(E.isRectAreaLight){let M=i.rectArea[v];M.position.setFromMatrixPosition(E.matrixWorld),M.position.applyMatrix4(y),s.identity(),o.copy(E.matrixWorld),o.premultiply(y),s.extractRotation(o),M.halfWidth.set(E.width*.5,0,0),M.halfHeight.set(0,E.height*.5,0),M.halfWidth.applyMatrix4(s),M.halfHeight.applyMatrix4(s),v++}else if(E.isPointLight){let M=i.point[p];M.position.setFromMatrixPosition(E.matrixWorld),M.position.applyMatrix4(y),p++}else if(E.isHemisphereLight){let M=i.hemi[w];M.direction.setFromMatrixPosition(E.matrixWorld),M.direction.transformDirection(y),w++}}}return{setup:a,setupView:l,state:i}}function XB(n){let e=new Oae(n),t=[],i=[];function r(f){u.camera=f,t.length=0,i.length=0}function o(f){t.push(f)}function s(f){i.push(f)}function a(){e.setup(t)}function l(f){e.setupView(t,f)}let u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function Nae(n){let e=new WeakMap;function t(r,o=0){let s=e.get(r),a;return s===void 0?(a=new XB(n),e.set(r,[a])):o>=s.length?(a=new XB(n),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var Fae=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Lae=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function kae(n,e,t){let i=new oh,r=new We,o=new We,s=new rn,a=new Nx({depthPacking:oB}),l=new Fx,u={},f=t.maxTextureSize,h={[Js]:Hr,[Hr]:Js,[gs]:gs},p=new ea({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:Fae,fragmentShader:Lae}),g=p.clone();g.defines.HORIZONTAL_PASS=1;let v=new Pi;v.setAttribute("position",new Bi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let w=new ui(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mA;let _=this.type;this.render=function(F,L,G){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||F.length===0)return;let O=n.getRenderTarget(),I=n.getActiveCubeFace(),z=n.getActiveMipmapLevel(),he=n.state;he.setBlending(kl),he.buffers.color.setClear(1,1,1,1),he.buffers.depth.setTest(!0),he.setScissorTest(!1);let ae=_!==Va&&this.type===Va,Te=_===Va&&this.type!==Va;for(let be=0,q=F.length;be<q;be++){let ie=F[be],$=ie.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;r.copy($.mapSize);let ge=$.getFrameExtents();if(r.multiply(ge),o.copy($.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(o.x=Math.floor(f/ge.x),r.x=o.x*ge.x,$.mapSize.x=o.x),r.y>f&&(o.y=Math.floor(f/ge.y),r.y=o.y*ge.y,$.mapSize.y=o.y)),$.map===null||ae===!0||Te===!0){let tt=this.type!==Va?{minFilter:hr,magFilter:hr}:{};$.map!==null&&$.map.dispose(),$.map=new La(r.x,r.y,tt),$.map.texture.name=ie.name+".shadowMap",$.camera.updateProjectionMatrix()}n.setRenderTarget($.map),n.clear();let Ue=$.getViewportCount();for(let tt=0;tt<Ue;tt++){let me=$.getViewport(tt);s.set(o.x*me.x,o.y*me.y,o.x*me.z,o.y*me.w),he.viewport(s),$.updateMatrices(ie,tt),i=$.getFrustum(),M(L,G,$.camera,ie,this.type)}$.isPointLightShadow!==!0&&this.type===Va&&T($,G),$.needsUpdate=!1}_=this.type,y.needsUpdate=!1,n.setRenderTarget(O,I,z)};function T(F,L){let G=e.update(w);p.defines.VSM_SAMPLES!==F.blurSamples&&(p.defines.VSM_SAMPLES=F.blurSamples,g.defines.VSM_SAMPLES=F.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new La(r.x,r.y)),p.uniforms.shadow_pass.value=F.map.texture,p.uniforms.resolution.value=F.mapSize,p.uniforms.radius.value=F.radius,n.setRenderTarget(F.mapPass),n.clear(),n.renderBufferDirect(L,null,G,p,w,null),g.uniforms.shadow_pass.value=F.mapPass.texture,g.uniforms.resolution.value=F.mapSize,g.uniforms.radius.value=F.radius,n.setRenderTarget(F.map),n.clear(),n.renderBufferDirect(L,null,G,g,w,null)}function E(F,L,G,O){let I=null,z=G.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(z!==void 0)I=z;else if(I=G.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){let he=I.uuid,ae=L.uuid,Te=u[he];Te===void 0&&(Te={},u[he]=Te);let be=Te[ae];be===void 0&&(be=I.clone(),Te[ae]=be,L.addEventListener("dispose",V)),I=be}if(I.visible=L.visible,I.wireframe=L.wireframe,O===Va?I.side=L.shadowSide!==null?L.shadowSide:L.side:I.side=L.shadowSide!==null?L.shadowSide:h[L.side],I.alphaMap=L.alphaMap,I.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,I.map=L.map,I.clipShadows=L.clipShadows,I.clippingPlanes=L.clippingPlanes,I.clipIntersection=L.clipIntersection,I.displacementMap=L.displacementMap,I.displacementScale=L.displacementScale,I.displacementBias=L.displacementBias,I.wireframeLinewidth=L.wireframeLinewidth,I.linewidth=L.linewidth,G.isPointLight===!0&&I.isMeshDistanceMaterial===!0){let he=n.properties.get(I);he.light=G}return I}function M(F,L,G,O,I){if(F.visible===!1)return;if(F.layers.test(L.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&I===Va)&&(!F.frustumCulled||i.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,F.matrixWorld);let ae=e.update(F),Te=F.material;if(Array.isArray(Te)){let be=ae.groups;for(let q=0,ie=be.length;q<ie;q++){let $=be[q],ge=Te[$.materialIndex];if(ge&&ge.visible){let Ue=E(F,ge,O,I);F.onBeforeShadow(n,F,L,G,ae,Ue,$),n.renderBufferDirect(G,null,ae,Ue,F,$),F.onAfterShadow(n,F,L,G,ae,Ue,$)}}}else if(Te.visible){let be=E(F,Te,O,I);F.onBeforeShadow(n,F,L,G,ae,be,null),n.renderBufferDirect(G,null,ae,be,F,null),F.onAfterShadow(n,F,L,G,ae,be,null)}}let he=F.children;for(let ae=0,Te=he.length;ae<Te;ae++)M(he[ae],L,G,O,I)}function V(F){F.target.removeEventListener("dispose",V);for(let G in u){let O=u[G],I=F.target.uuid;I in O&&(O[I].dispose(),delete O[I])}}}var Uae={[Gx]:Wx,[$x]:Yx,[qx]:Zx,[Bu]:Xx,[Wx]:Gx,[Yx]:$x,[Zx]:qx,[Xx]:Bu};function Bae(n,e){function t(){let X=!1,Ze=new rn,pe=null,Se=new rn(0,0,0,0);return{setMask:function(et){pe!==et&&!X&&(n.colorMask(et,et,et,et),pe=et)},setLocked:function(et){X=et},setClear:function(et,Ye,Ot,zn,Mi){Mi===!0&&(et*=zn,Ye*=zn,Ot*=zn),Ze.set(et,Ye,Ot,zn),Se.equals(Ze)===!1&&(n.clearColor(et,Ye,Ot,zn),Se.copy(Ze))},reset:function(){X=!1,pe=null,Se.set(-1,0,0,0)}}}function i(){let X=!1,Ze=!1,pe=null,Se=null,et=null;return{setReversed:function(Ye){if(Ze!==Ye){let Ot=e.get("EXT_clip_control");Ye?Ot.clipControlEXT(Ot.LOWER_LEFT_EXT,Ot.ZERO_TO_ONE_EXT):Ot.clipControlEXT(Ot.LOWER_LEFT_EXT,Ot.NEGATIVE_ONE_TO_ONE_EXT),Ze=Ye;let zn=et;et=null,this.setClear(zn)}},getReversed:function(){return Ze},setTest:function(Ye){Ye?se(n.DEPTH_TEST):He(n.DEPTH_TEST)},setMask:function(Ye){pe!==Ye&&!X&&(n.depthMask(Ye),pe=Ye)},setFunc:function(Ye){if(Ze&&(Ye=Uae[Ye]),Se!==Ye){switch(Ye){case Gx:n.depthFunc(n.NEVER);break;case Wx:n.depthFunc(n.ALWAYS);break;case $x:n.depthFunc(n.LESS);break;case Bu:n.depthFunc(n.LEQUAL);break;case qx:n.depthFunc(n.EQUAL);break;case Xx:n.depthFunc(n.GEQUAL);break;case Yx:n.depthFunc(n.GREATER);break;case Zx:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Se=Ye}},setLocked:function(Ye){X=Ye},setClear:function(Ye){et!==Ye&&(Ze&&(Ye=1-Ye),n.clearDepth(Ye),et=Ye)},reset:function(){X=!1,pe=null,Se=null,et=null,Ze=!1}}}function r(){let X=!1,Ze=null,pe=null,Se=null,et=null,Ye=null,Ot=null,zn=null,Mi=null;return{setTest:function(xn){X||(xn?se(n.STENCIL_TEST):He(n.STENCIL_TEST))},setMask:function(xn){Ze!==xn&&!X&&(n.stencilMask(xn),Ze=xn)},setFunc:function(xn,Zi,Gr){(pe!==xn||Se!==Zi||et!==Gr)&&(n.stencilFunc(xn,Zi,Gr),pe=xn,Se=Zi,et=Gr)},setOp:function(xn,Zi,Gr){(Ye!==xn||Ot!==Zi||zn!==Gr)&&(n.stencilOp(xn,Zi,Gr),Ye=xn,Ot=Zi,zn=Gr)},setLocked:function(xn){X=xn},setClear:function(xn){Mi!==xn&&(n.clearStencil(xn),Mi=xn)},reset:function(){X=!1,Ze=null,pe=null,Se=null,et=null,Ye=null,Ot=null,zn=null,Mi=null}}}let o=new t,s=new i,a=new r,l=new WeakMap,u=new WeakMap,f={},h={},p=new WeakMap,g=[],v=null,w=!1,y=null,_=null,T=null,E=null,M=null,V=null,F=null,L=new ft(0,0,0),G=0,O=!1,I=null,z=null,he=null,ae=null,Te=null,be=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),q=!1,ie=0,$=n.getParameter(n.VERSION);$.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec($)[1]),q=ie>=1):$.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),q=ie>=2);let ge=null,Ue={},tt=n.getParameter(n.SCISSOR_BOX),me=n.getParameter(n.VIEWPORT),re=new rn().fromArray(tt),U=new rn().fromArray(me);function Z(X,Ze,pe,Se){let et=new Uint8Array(4),Ye=n.createTexture();n.bindTexture(X,Ye),n.texParameteri(X,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(X,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ot=0;Ot<pe;Ot++)X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY?n.texImage3D(Ze,0,n.RGBA,1,1,Se,0,n.RGBA,n.UNSIGNED_BYTE,et):n.texImage2D(Ze+Ot,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,et);return Ye}let ve={};ve[n.TEXTURE_2D]=Z(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=Z(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[n.TEXTURE_2D_ARRAY]=Z(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=Z(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),se(n.DEPTH_TEST),s.setFunc(Bu),Ge(!1),At(pA),se(n.CULL_FACE),H(kl);function se(X){f[X]!==!0&&(n.enable(X),f[X]=!0)}function He(X){f[X]!==!1&&(n.disable(X),f[X]=!1)}function je(X,Ze){return h[X]!==Ze?(n.bindFramebuffer(X,Ze),h[X]=Ze,X===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Ze),X===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Ze),!0):!1}function Fe(X,Ze){let pe=g,Se=!1;if(X){pe=p.get(Ze),pe===void 0&&(pe=[],p.set(Ze,pe));let et=X.textures;if(pe.length!==et.length||pe[0]!==n.COLOR_ATTACHMENT0){for(let Ye=0,Ot=et.length;Ye<Ot;Ye++)pe[Ye]=n.COLOR_ATTACHMENT0+Ye;pe.length=et.length,Se=!0}}else pe[0]!==n.BACK&&(pe[0]=n.BACK,Se=!0);Se&&n.drawBuffers(pe)}function rt(X){return v!==X?(n.useProgram(X),v=X,!0):!1}let pt={[Ac]:n.FUNC_ADD,[DU]:n.FUNC_SUBTRACT,[RU]:n.FUNC_REVERSE_SUBTRACT};pt[PU]=n.MIN,pt[OU]=n.MAX;let ut={[NU]:n.ZERO,[FU]:n.ONE,[LU]:n.SRC_COLOR,[yx]:n.SRC_ALPHA,[zU]:n.SRC_ALPHA_SATURATE,[VU]:n.DST_COLOR,[UU]:n.DST_ALPHA,[kU]:n.ONE_MINUS_SRC_COLOR,[_x]:n.ONE_MINUS_SRC_ALPHA,[HU]:n.ONE_MINUS_DST_COLOR,[BU]:n.ONE_MINUS_DST_ALPHA,[jU]:n.CONSTANT_COLOR,[GU]:n.ONE_MINUS_CONSTANT_COLOR,[WU]:n.CONSTANT_ALPHA,[$U]:n.ONE_MINUS_CONSTANT_ALPHA};function H(X,Ze,pe,Se,et,Ye,Ot,zn,Mi,xn){if(X===kl){w===!0&&(He(n.BLEND),w=!1);return}if(w===!1&&(se(n.BLEND),w=!0),X!==IU){if(X!==y||xn!==O){if((_!==Ac||M!==Ac)&&(n.blendEquation(n.FUNC_ADD),_=Ac,M=Ac),xn)switch(X){case Uu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case gA:n.blendFunc(n.ONE,n.ONE);break;case vA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case yA:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}else switch(X){case Uu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case gA:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case vA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case yA:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}T=null,E=null,V=null,F=null,L.set(0,0,0),G=0,y=X,O=xn}return}et=et||Ze,Ye=Ye||pe,Ot=Ot||Se,(Ze!==_||et!==M)&&(n.blendEquationSeparate(pt[Ze],pt[et]),_=Ze,M=et),(pe!==T||Se!==E||Ye!==V||Ot!==F)&&(n.blendFuncSeparate(ut[pe],ut[Se],ut[Ye],ut[Ot]),T=pe,E=Se,V=Ye,F=Ot),(zn.equals(L)===!1||Mi!==G)&&(n.blendColor(zn.r,zn.g,zn.b,Mi),L.copy(zn),G=Mi),y=X,O=!1}function qt(X,Ze){X.side===gs?He(n.CULL_FACE):se(n.CULL_FACE);let pe=X.side===Hr;Ze&&(pe=!pe),Ge(pe),X.blending===Uu&&X.transparent===!1?H(kl):H(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.blendColor,X.blendAlpha,X.premultipliedAlpha),s.setFunc(X.depthFunc),s.setTest(X.depthTest),s.setMask(X.depthWrite),o.setMask(X.colorWrite);let Se=X.stencilWrite;a.setTest(Se),Se&&(a.setMask(X.stencilWriteMask),a.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),a.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),Vt(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),X.alphaToCoverage===!0?se(n.SAMPLE_ALPHA_TO_COVERAGE):He(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ge(X){I!==X&&(X?n.frontFace(n.CW):n.frontFace(n.CCW),I=X)}function At(X){X!==CU?(se(n.CULL_FACE),X!==z&&(X===pA?n.cullFace(n.BACK):X===TU?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):He(n.CULL_FACE),z=X}function Xe(X){X!==he&&(q&&n.lineWidth(X),he=X)}function Vt(X,Ze,pe){X?(se(n.POLYGON_OFFSET_FILL),(ae!==Ze||Te!==pe)&&(n.polygonOffset(Ze,pe),ae=Ze,Te=pe)):He(n.POLYGON_OFFSET_FILL)}function ht(X){X?se(n.SCISSOR_TEST):He(n.SCISSOR_TEST)}function N(X){X===void 0&&(X=n.TEXTURE0+be-1),ge!==X&&(n.activeTexture(X),ge=X)}function S(X,Ze,pe){pe===void 0&&(ge===null?pe=n.TEXTURE0+be-1:pe=ge);let Se=Ue[pe];Se===void 0&&(Se={type:void 0,texture:void 0},Ue[pe]=Se),(Se.type!==X||Se.texture!==Ze)&&(ge!==pe&&(n.activeTexture(pe),ge=pe),n.bindTexture(X,Ze||ve[X]),Se.type=X,Se.texture=Ze)}function oe(){let X=Ue[ge];X!==void 0&&X.type!==void 0&&(n.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)}function xe(){try{n.compressedTexImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ae(){try{n.compressedTexImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function fe(){try{n.texSubImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function $e(){try{n.texSubImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function qe(){try{n.compressedTexSubImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function gt(){try{n.compressedTexSubImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function vt(){try{n.texStorage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ne(){try{n.texStorage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function nt(){try{n.texImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function yt(){try{n.texImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function bt(X){re.equals(X)===!1&&(n.scissor(X.x,X.y,X.z,X.w),re.copy(X))}function it(X){U.equals(X)===!1&&(n.viewport(X.x,X.y,X.z,X.w),U.copy(X))}function sn(X,Ze){let pe=u.get(Ze);pe===void 0&&(pe=new WeakMap,u.set(Ze,pe));let Se=pe.get(X);Se===void 0&&(Se=n.getUniformBlockIndex(Ze,X.name),pe.set(X,Se))}function Ht(X,Ze){let Se=u.get(Ze).get(X);l.get(Ze)!==Se&&(n.uniformBlockBinding(Ze,Se,X.__bindingPointIndex),l.set(Ze,Se))}function Dn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},ge=null,Ue={},h={},p=new WeakMap,g=[],v=null,w=!1,y=null,_=null,T=null,E=null,M=null,V=null,F=null,L=new ft(0,0,0),G=0,O=!1,I=null,z=null,he=null,ae=null,Te=null,re.set(0,0,n.canvas.width,n.canvas.height),U.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:se,disable:He,bindFramebuffer:je,drawBuffers:Fe,useProgram:rt,setBlending:H,setMaterial:qt,setFlipSided:Ge,setCullFace:At,setLineWidth:Xe,setPolygonOffset:Vt,setScissorTest:ht,activeTexture:N,bindTexture:S,unbindTexture:oe,compressedTexImage2D:xe,compressedTexImage3D:Ae,texImage2D:nt,texImage3D:yt,updateUBOMapping:sn,uniformBlockBinding:Ht,texStorage2D:vt,texStorage3D:Ne,texSubImage2D:fe,texSubImage3D:$e,compressedTexSubImage2D:qe,compressedTexSubImage3D:gt,scissor:bt,viewport:it,reset:Dn}}function Vae(n,e,t,i,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new We,f=new WeakMap,h,p=new WeakMap,g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(N,S){return g?new OffscreenCanvas(N,S):Jf("canvas")}function w(N,S,oe){let xe=1,Ae=ht(N);if((Ae.width>oe||Ae.height>oe)&&(xe=oe/Math.max(Ae.width,Ae.height)),xe<1)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){let fe=Math.floor(xe*Ae.width),$e=Math.floor(xe*Ae.height);h===void 0&&(h=v(fe,$e));let qe=S?v(fe,$e):h;return qe.width=fe,qe.height=$e,qe.getContext("2d").drawImage(N,0,0,fe,$e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ae.width+"x"+Ae.height+") to ("+fe+"x"+$e+")."),qe}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ae.width+"x"+Ae.height+")."),N;return N}function y(N){return N.generateMipmaps}function _(N){n.generateMipmap(N)}function T(N){return N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:N.isWebGL3DRenderTarget?n.TEXTURE_3D:N.isWebGLArrayRenderTarget||N.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(N,S,oe,xe,Ae=!1){if(N!==null){if(n[N]!==void 0)return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let fe=S;if(S===n.RED&&(oe===n.FLOAT&&(fe=n.R32F),oe===n.HALF_FLOAT&&(fe=n.R16F),oe===n.UNSIGNED_BYTE&&(fe=n.R8)),S===n.RED_INTEGER&&(oe===n.UNSIGNED_BYTE&&(fe=n.R8UI),oe===n.UNSIGNED_SHORT&&(fe=n.R16UI),oe===n.UNSIGNED_INT&&(fe=n.R32UI),oe===n.BYTE&&(fe=n.R8I),oe===n.SHORT&&(fe=n.R16I),oe===n.INT&&(fe=n.R32I)),S===n.RG&&(oe===n.FLOAT&&(fe=n.RG32F),oe===n.HALF_FLOAT&&(fe=n.RG16F),oe===n.UNSIGNED_BYTE&&(fe=n.RG8)),S===n.RG_INTEGER&&(oe===n.UNSIGNED_BYTE&&(fe=n.RG8UI),oe===n.UNSIGNED_SHORT&&(fe=n.RG16UI),oe===n.UNSIGNED_INT&&(fe=n.RG32UI),oe===n.BYTE&&(fe=n.RG8I),oe===n.SHORT&&(fe=n.RG16I),oe===n.INT&&(fe=n.RG32I)),S===n.RGB_INTEGER&&(oe===n.UNSIGNED_BYTE&&(fe=n.RGB8UI),oe===n.UNSIGNED_SHORT&&(fe=n.RGB16UI),oe===n.UNSIGNED_INT&&(fe=n.RGB32UI),oe===n.BYTE&&(fe=n.RGB8I),oe===n.SHORT&&(fe=n.RGB16I),oe===n.INT&&(fe=n.RGB32I)),S===n.RGBA_INTEGER&&(oe===n.UNSIGNED_BYTE&&(fe=n.RGBA8UI),oe===n.UNSIGNED_SHORT&&(fe=n.RGBA16UI),oe===n.UNSIGNED_INT&&(fe=n.RGBA32UI),oe===n.BYTE&&(fe=n.RGBA8I),oe===n.SHORT&&(fe=n.RGBA16I),oe===n.INT&&(fe=n.RGBA32I)),S===n.RGB&&oe===n.UNSIGNED_INT_5_9_9_9_REV&&(fe=n.RGB9_E5),S===n.RGBA){let $e=Ae?Vm:Bt.getTransfer(xe);oe===n.FLOAT&&(fe=n.RGBA32F),oe===n.HALF_FLOAT&&(fe=n.RGBA16F),oe===n.UNSIGNED_BYTE&&(fe=$e===Vn?n.SRGB8_ALPHA8:n.RGBA8),oe===n.UNSIGNED_SHORT_4_4_4_4&&(fe=n.RGBA4),oe===n.UNSIGNED_SHORT_5_5_5_1&&(fe=n.RGB5_A1)}return(fe===n.R16F||fe===n.R32F||fe===n.RG16F||fe===n.RG32F||fe===n.RGBA16F||fe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),fe}function M(N,S){let oe;return N?S===null||S===Fc||S===ph?oe=n.DEPTH24_STENCIL8:S===vs?oe=n.DEPTH32F_STENCIL8:S===fh&&(oe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):S===null||S===Fc||S===ph?oe=n.DEPTH_COMPONENT24:S===vs?oe=n.DEPTH_COMPONENT32F:S===fh&&(oe=n.DEPTH_COMPONENT16),oe}function V(N,S){return y(N)===!0||N.isFramebufferTexture&&N.minFilter!==hr&&N.minFilter!==Ur?Math.log2(Math.max(S.width,S.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?S.mipmaps.length:1}function F(N){let S=N.target;S.removeEventListener("dispose",F),G(S),S.isVideoTexture&&f.delete(S)}function L(N){let S=N.target;S.removeEventListener("dispose",L),I(S)}function G(N){let S=i.get(N);if(S.__webglInit===void 0)return;let oe=N.source,xe=p.get(oe);if(xe){let Ae=xe[S.__cacheKey];Ae.usedTimes--,Ae.usedTimes===0&&O(N),Object.keys(xe).length===0&&p.delete(oe)}i.remove(N)}function O(N){let S=i.get(N);n.deleteTexture(S.__webglTexture);let oe=N.source,xe=p.get(oe);delete xe[S.__cacheKey],s.memory.textures--}function I(N){let S=i.get(N);if(N.depthTexture&&(N.depthTexture.dispose(),i.remove(N.depthTexture)),N.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++){if(Array.isArray(S.__webglFramebuffer[xe]))for(let Ae=0;Ae<S.__webglFramebuffer[xe].length;Ae++)n.deleteFramebuffer(S.__webglFramebuffer[xe][Ae]);else n.deleteFramebuffer(S.__webglFramebuffer[xe]);S.__webglDepthbuffer&&n.deleteRenderbuffer(S.__webglDepthbuffer[xe])}else{if(Array.isArray(S.__webglFramebuffer))for(let xe=0;xe<S.__webglFramebuffer.length;xe++)n.deleteFramebuffer(S.__webglFramebuffer[xe]);else n.deleteFramebuffer(S.__webglFramebuffer);if(S.__webglDepthbuffer&&n.deleteRenderbuffer(S.__webglDepthbuffer),S.__webglMultisampledFramebuffer&&n.deleteFramebuffer(S.__webglMultisampledFramebuffer),S.__webglColorRenderbuffer)for(let xe=0;xe<S.__webglColorRenderbuffer.length;xe++)S.__webglColorRenderbuffer[xe]&&n.deleteRenderbuffer(S.__webglColorRenderbuffer[xe]);S.__webglDepthRenderbuffer&&n.deleteRenderbuffer(S.__webglDepthRenderbuffer)}let oe=N.textures;for(let xe=0,Ae=oe.length;xe<Ae;xe++){let fe=i.get(oe[xe]);fe.__webglTexture&&(n.deleteTexture(fe.__webglTexture),s.memory.textures--),i.remove(oe[xe])}i.remove(N)}let z=0;function he(){z=0}function ae(){let N=z;return N>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+r.maxTextures),z+=1,N}function Te(N){let S=[];return S.push(N.wrapS),S.push(N.wrapT),S.push(N.wrapR||0),S.push(N.magFilter),S.push(N.minFilter),S.push(N.anisotropy),S.push(N.internalFormat),S.push(N.format),S.push(N.type),S.push(N.generateMipmaps),S.push(N.premultiplyAlpha),S.push(N.flipY),S.push(N.unpackAlignment),S.push(N.colorSpace),S.join()}function be(N,S){let oe=i.get(N);if(N.isVideoTexture&&Xe(N),N.isRenderTargetTexture===!1&&N.version>0&&oe.__version!==N.version){let xe=N.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{U(oe,N,S);return}}t.bindTexture(n.TEXTURE_2D,oe.__webglTexture,n.TEXTURE0+S)}function q(N,S){let oe=i.get(N);if(N.version>0&&oe.__version!==N.version){U(oe,N,S);return}t.bindTexture(n.TEXTURE_2D_ARRAY,oe.__webglTexture,n.TEXTURE0+S)}function ie(N,S){let oe=i.get(N);if(N.version>0&&oe.__version!==N.version){U(oe,N,S);return}t.bindTexture(n.TEXTURE_3D,oe.__webglTexture,n.TEXTURE0+S)}function $(N,S){let oe=i.get(N);if(N.version>0&&oe.__version!==N.version){Z(oe,N,S);return}t.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture,n.TEXTURE0+S)}let ge={[Qs]:n.REPEAT,[No]:n.CLAMP_TO_EDGE,[Zf]:n.MIRRORED_REPEAT},Ue={[hr]:n.NEAREST,[Jx]:n.NEAREST_MIPMAP_NEAREST,[td]:n.NEAREST_MIPMAP_LINEAR,[Ur]:n.LINEAR,[dh]:n.LINEAR_MIPMAP_NEAREST,[ia]:n.LINEAR_MIPMAP_LINEAR},tt={[aB]:n.NEVER,[hB]:n.ALWAYS,[lB]:n.LESS,[TA]:n.LEQUAL,[cB]:n.EQUAL,[fB]:n.GEQUAL,[uB]:n.GREATER,[dB]:n.NOTEQUAL};function me(N,S){if(S.type===vs&&e.has("OES_texture_float_linear")===!1&&(S.magFilter===Ur||S.magFilter===dh||S.magFilter===td||S.magFilter===ia||S.minFilter===Ur||S.minFilter===dh||S.minFilter===td||S.minFilter===ia)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(N,n.TEXTURE_WRAP_S,ge[S.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,ge[S.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,ge[S.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,Ue[S.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,Ue[S.minFilter]),S.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,tt[S.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(S.magFilter===hr||S.minFilter!==td&&S.minFilter!==ia||S.type===vs&&e.has("OES_texture_float_linear")===!1)return;if(S.anisotropy>1||i.get(S).__currentAnisotropy){let oe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(N,oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(S.anisotropy,r.getMaxAnisotropy())),i.get(S).__currentAnisotropy=S.anisotropy}}}function re(N,S){let oe=!1;N.__webglInit===void 0&&(N.__webglInit=!0,S.addEventListener("dispose",F));let xe=S.source,Ae=p.get(xe);Ae===void 0&&(Ae={},p.set(xe,Ae));let fe=Te(S);if(fe!==N.__cacheKey){Ae[fe]===void 0&&(Ae[fe]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,oe=!0),Ae[fe].usedTimes++;let $e=Ae[N.__cacheKey];$e!==void 0&&(Ae[N.__cacheKey].usedTimes--,$e.usedTimes===0&&O(S)),N.__cacheKey=fe,N.__webglTexture=Ae[fe].texture}return oe}function U(N,S,oe){let xe=n.TEXTURE_2D;(S.isDataArrayTexture||S.isCompressedArrayTexture)&&(xe=n.TEXTURE_2D_ARRAY),S.isData3DTexture&&(xe=n.TEXTURE_3D);let Ae=re(N,S),fe=S.source;t.bindTexture(xe,N.__webglTexture,n.TEXTURE0+oe);let $e=i.get(fe);if(fe.version!==$e.__version||Ae===!0){t.activeTexture(n.TEXTURE0+oe);let qe=Bt.getPrimaries(Bt.workingColorSpace),gt=S.colorSpace===Bl?null:Bt.getPrimaries(S.colorSpace),vt=S.colorSpace===Bl||qe===gt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,S.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,S.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,S.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,vt);let Ne=w(S.image,!1,r.maxTextureSize);Ne=Vt(S,Ne);let nt=o.convert(S.format,S.colorSpace),yt=o.convert(S.type),bt=E(S.internalFormat,nt,yt,S.colorSpace,S.isVideoTexture);me(xe,S);let it,sn=S.mipmaps,Ht=S.isVideoTexture!==!0,Dn=$e.__version===void 0||Ae===!0,X=fe.dataReady,Ze=V(S,Ne);if(S.isDepthTexture)bt=M(S.format===mh,S.type),Dn&&(Ht?t.texStorage2D(n.TEXTURE_2D,1,bt,Ne.width,Ne.height):t.texImage2D(n.TEXTURE_2D,0,bt,Ne.width,Ne.height,0,nt,yt,null));else if(S.isDataTexture)if(sn.length>0){Ht&&Dn&&t.texStorage2D(n.TEXTURE_2D,Ze,bt,sn[0].width,sn[0].height);for(let pe=0,Se=sn.length;pe<Se;pe++)it=sn[pe],Ht?X&&t.texSubImage2D(n.TEXTURE_2D,pe,0,0,it.width,it.height,nt,yt,it.data):t.texImage2D(n.TEXTURE_2D,pe,bt,it.width,it.height,0,nt,yt,it.data);S.generateMipmaps=!1}else Ht?(Dn&&t.texStorage2D(n.TEXTURE_2D,Ze,bt,Ne.width,Ne.height),X&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ne.width,Ne.height,nt,yt,Ne.data)):t.texImage2D(n.TEXTURE_2D,0,bt,Ne.width,Ne.height,0,nt,yt,Ne.data);else if(S.isCompressedTexture)if(S.isCompressedArrayTexture){Ht&&Dn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,bt,sn[0].width,sn[0].height,Ne.depth);for(let pe=0,Se=sn.length;pe<Se;pe++)if(it=sn[pe],S.format!==ko)if(nt!==null)if(Ht){if(X)if(S.layerUpdates.size>0){let et=FA(it.width,it.height,S.format,S.type);for(let Ye of S.layerUpdates){let Ot=it.data.subarray(Ye*et/it.data.BYTES_PER_ELEMENT,(Ye+1)*et/it.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,Ye,it.width,it.height,1,nt,Ot)}S.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,0,it.width,it.height,Ne.depth,nt,it.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,pe,bt,it.width,it.height,Ne.depth,0,it.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ht?X&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,0,it.width,it.height,Ne.depth,nt,yt,it.data):t.texImage3D(n.TEXTURE_2D_ARRAY,pe,bt,it.width,it.height,Ne.depth,0,nt,yt,it.data)}else{Ht&&Dn&&t.texStorage2D(n.TEXTURE_2D,Ze,bt,sn[0].width,sn[0].height);for(let pe=0,Se=sn.length;pe<Se;pe++)it=sn[pe],S.format!==ko?nt!==null?Ht?X&&t.compressedTexSubImage2D(n.TEXTURE_2D,pe,0,0,it.width,it.height,nt,it.data):t.compressedTexImage2D(n.TEXTURE_2D,pe,bt,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ht?X&&t.texSubImage2D(n.TEXTURE_2D,pe,0,0,it.width,it.height,nt,yt,it.data):t.texImage2D(n.TEXTURE_2D,pe,bt,it.width,it.height,0,nt,yt,it.data)}else if(S.isDataArrayTexture)if(Ht){if(Dn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,bt,Ne.width,Ne.height,Ne.depth),X)if(S.layerUpdates.size>0){let pe=FA(Ne.width,Ne.height,S.format,S.type);for(let Se of S.layerUpdates){let et=Ne.data.subarray(Se*pe/Ne.data.BYTES_PER_ELEMENT,(Se+1)*pe/Ne.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Se,Ne.width,Ne.height,1,nt,yt,et)}S.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ne.width,Ne.height,Ne.depth,nt,yt,Ne.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,bt,Ne.width,Ne.height,Ne.depth,0,nt,yt,Ne.data);else if(S.isData3DTexture)Ht?(Dn&&t.texStorage3D(n.TEXTURE_3D,Ze,bt,Ne.width,Ne.height,Ne.depth),X&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ne.width,Ne.height,Ne.depth,nt,yt,Ne.data)):t.texImage3D(n.TEXTURE_3D,0,bt,Ne.width,Ne.height,Ne.depth,0,nt,yt,Ne.data);else if(S.isFramebufferTexture){if(Dn)if(Ht)t.texStorage2D(n.TEXTURE_2D,Ze,bt,Ne.width,Ne.height);else{let pe=Ne.width,Se=Ne.height;for(let et=0;et<Ze;et++)t.texImage2D(n.TEXTURE_2D,et,bt,pe,Se,0,nt,yt,null),pe>>=1,Se>>=1}}else if(sn.length>0){if(Ht&&Dn){let pe=ht(sn[0]);t.texStorage2D(n.TEXTURE_2D,Ze,bt,pe.width,pe.height)}for(let pe=0,Se=sn.length;pe<Se;pe++)it=sn[pe],Ht?X&&t.texSubImage2D(n.TEXTURE_2D,pe,0,0,nt,yt,it):t.texImage2D(n.TEXTURE_2D,pe,bt,nt,yt,it);S.generateMipmaps=!1}else if(Ht){if(Dn){let pe=ht(Ne);t.texStorage2D(n.TEXTURE_2D,Ze,bt,pe.width,pe.height)}X&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,nt,yt,Ne)}else t.texImage2D(n.TEXTURE_2D,0,bt,nt,yt,Ne);y(S)&&_(xe),$e.__version=fe.version,S.onUpdate&&S.onUpdate(S)}N.__version=S.version}function Z(N,S,oe){if(S.image.length!==6)return;let xe=re(N,S),Ae=S.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+oe);let fe=i.get(Ae);if(Ae.version!==fe.__version||xe===!0){t.activeTexture(n.TEXTURE0+oe);let $e=Bt.getPrimaries(Bt.workingColorSpace),qe=S.colorSpace===Bl?null:Bt.getPrimaries(S.colorSpace),gt=S.colorSpace===Bl||$e===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,S.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,S.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,S.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,gt);let vt=S.isCompressedTexture||S.image[0].isCompressedTexture,Ne=S.image[0]&&S.image[0].isDataTexture,nt=[];for(let Se=0;Se<6;Se++)!vt&&!Ne?nt[Se]=w(S.image[Se],!0,r.maxCubemapSize):nt[Se]=Ne?S.image[Se].image:S.image[Se],nt[Se]=Vt(S,nt[Se]);let yt=nt[0],bt=o.convert(S.format,S.colorSpace),it=o.convert(S.type),sn=E(S.internalFormat,bt,it,S.colorSpace),Ht=S.isVideoTexture!==!0,Dn=fe.__version===void 0||xe===!0,X=Ae.dataReady,Ze=V(S,yt);me(n.TEXTURE_CUBE_MAP,S);let pe;if(vt){Ht&&Dn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,sn,yt.width,yt.height);for(let Se=0;Se<6;Se++){pe=nt[Se].mipmaps;for(let et=0;et<pe.length;et++){let Ye=pe[et];S.format!==ko?bt!==null?Ht?X&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et,0,0,Ye.width,Ye.height,bt,Ye.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et,sn,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ht?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et,0,0,Ye.width,Ye.height,bt,it,Ye.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et,sn,Ye.width,Ye.height,0,bt,it,Ye.data)}}}else{if(pe=S.mipmaps,Ht&&Dn){pe.length>0&&Ze++;let Se=ht(nt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,sn,Se.width,Se.height)}for(let Se=0;Se<6;Se++)if(Ne){Ht?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,nt[Se].width,nt[Se].height,bt,it,nt[Se].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,sn,nt[Se].width,nt[Se].height,0,bt,it,nt[Se].data);for(let et=0;et<pe.length;et++){let Ot=pe[et].image[Se].image;Ht?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et+1,0,0,Ot.width,Ot.height,bt,it,Ot.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et+1,sn,Ot.width,Ot.height,0,bt,it,Ot.data)}}else{Ht?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,bt,it,nt[Se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,sn,bt,it,nt[Se]);for(let et=0;et<pe.length;et++){let Ye=pe[et];Ht?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et+1,0,0,bt,it,Ye.image[Se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,et+1,sn,bt,it,Ye.image[Se])}}}y(S)&&_(n.TEXTURE_CUBE_MAP),fe.__version=Ae.version,S.onUpdate&&S.onUpdate(S)}N.__version=S.version}function ve(N,S,oe,xe,Ae,fe){let $e=o.convert(oe.format,oe.colorSpace),qe=o.convert(oe.type),gt=E(oe.internalFormat,$e,qe,oe.colorSpace),vt=i.get(S),Ne=i.get(oe);if(Ne.__renderTarget=S,!vt.__hasExternalTextures){let nt=Math.max(1,S.width>>fe),yt=Math.max(1,S.height>>fe);Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY?t.texImage3D(Ae,fe,gt,nt,yt,S.depth,0,$e,qe,null):t.texImage2D(Ae,fe,gt,nt,yt,0,$e,qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,N),At(S)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xe,Ae,Ne.__webglTexture,0,Ge(S)):(Ae===n.TEXTURE_2D||Ae>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ae<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,xe,Ae,Ne.__webglTexture,fe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function se(N,S,oe){if(n.bindRenderbuffer(n.RENDERBUFFER,N),S.depthBuffer){let xe=S.depthTexture,Ae=xe&&xe.isDepthTexture?xe.type:null,fe=M(S.stencilBuffer,Ae),$e=S.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=Ge(S);At(S)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,fe,S.width,S.height):oe?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,fe,S.width,S.height):n.renderbufferStorage(n.RENDERBUFFER,fe,S.width,S.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,$e,n.RENDERBUFFER,N)}else{let xe=S.textures;for(let Ae=0;Ae<xe.length;Ae++){let fe=xe[Ae],$e=o.convert(fe.format,fe.colorSpace),qe=o.convert(fe.type),gt=E(fe.internalFormat,$e,qe,fe.colorSpace),vt=Ge(S);oe&&At(S)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,vt,gt,S.width,S.height):At(S)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,vt,gt,S.width,S.height):n.renderbufferStorage(n.RENDERBUFFER,gt,S.width,S.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function He(N,S){if(S&&S.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!(S.depthTexture&&S.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let xe=i.get(S.depthTexture);xe.__renderTarget=S,(!xe.__webglTexture||S.depthTexture.image.width!==S.width||S.depthTexture.image.height!==S.height)&&(S.depthTexture.image.width=S.width,S.depthTexture.image.height=S.height,S.depthTexture.needsUpdate=!0),be(S.depthTexture,0);let Ae=xe.__webglTexture,fe=Ge(S);if(S.depthTexture.format===Kf)At(S)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ae,0,fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ae,0);else if(S.depthTexture.format===mh)At(S)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ae,0,fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ae,0);else throw new Error("Unknown depthTexture format")}function je(N){let S=i.get(N),oe=N.isWebGLCubeRenderTarget===!0;if(S.__boundDepthTexture!==N.depthTexture){let xe=N.depthTexture;if(S.__depthDisposeCallback&&S.__depthDisposeCallback(),xe){let Ae=()=>{delete S.__boundDepthTexture,delete S.__depthDisposeCallback,xe.removeEventListener("dispose",Ae)};xe.addEventListener("dispose",Ae),S.__depthDisposeCallback=Ae}S.__boundDepthTexture=xe}if(N.depthTexture&&!S.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");let xe=N.texture.mipmaps;xe&&xe.length>0?He(S.__webglFramebuffer[0],N):He(S.__webglFramebuffer,N)}else if(oe){S.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)if(t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer[xe]),S.__webglDepthbuffer[xe]===void 0)S.__webglDepthbuffer[xe]=n.createRenderbuffer(),se(S.__webglDepthbuffer[xe],N,!1);else{let Ae=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=S.__webglDepthbuffer[xe];n.bindRenderbuffer(n.RENDERBUFFER,fe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ae,n.RENDERBUFFER,fe)}}else{let xe=N.texture.mipmaps;if(xe&&xe.length>0?t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer),S.__webglDepthbuffer===void 0)S.__webglDepthbuffer=n.createRenderbuffer(),se(S.__webglDepthbuffer,N,!1);else{let Ae=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=S.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,fe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ae,n.RENDERBUFFER,fe)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Fe(N,S,oe){let xe=i.get(N);S!==void 0&&ve(xe.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),oe!==void 0&&je(N)}function rt(N){let S=N.texture,oe=i.get(N),xe=i.get(S);N.addEventListener("dispose",L);let Ae=N.textures,fe=N.isWebGLCubeRenderTarget===!0,$e=Ae.length>1;if($e||(xe.__webglTexture===void 0&&(xe.__webglTexture=n.createTexture()),xe.__version=S.version,s.memory.textures++),fe){oe.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)if(S.mipmaps&&S.mipmaps.length>0){oe.__webglFramebuffer[qe]=[];for(let gt=0;gt<S.mipmaps.length;gt++)oe.__webglFramebuffer[qe][gt]=n.createFramebuffer()}else oe.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(S.mipmaps&&S.mipmaps.length>0){oe.__webglFramebuffer=[];for(let qe=0;qe<S.mipmaps.length;qe++)oe.__webglFramebuffer[qe]=n.createFramebuffer()}else oe.__webglFramebuffer=n.createFramebuffer();if($e)for(let qe=0,gt=Ae.length;qe<gt;qe++){let vt=i.get(Ae[qe]);vt.__webglTexture===void 0&&(vt.__webglTexture=n.createTexture(),s.memory.textures++)}if(N.samples>0&&At(N)===!1){oe.__webglMultisampledFramebuffer=n.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let qe=0;qe<Ae.length;qe++){let gt=Ae[qe];oe.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,oe.__webglColorRenderbuffer[qe]);let vt=o.convert(gt.format,gt.colorSpace),Ne=o.convert(gt.type),nt=E(gt.internalFormat,vt,Ne,gt.colorSpace,N.isXRRenderTarget===!0),yt=Ge(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,nt,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,oe.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(oe.__webglDepthRenderbuffer=n.createRenderbuffer(),se(oe.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(fe){t.bindTexture(n.TEXTURE_CUBE_MAP,xe.__webglTexture),me(n.TEXTURE_CUBE_MAP,S);for(let qe=0;qe<6;qe++)if(S.mipmaps&&S.mipmaps.length>0)for(let gt=0;gt<S.mipmaps.length;gt++)ve(oe.__webglFramebuffer[qe][gt],N,S,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,gt);else ve(oe.__webglFramebuffer[qe],N,S,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);y(S)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if($e){for(let qe=0,gt=Ae.length;qe<gt;qe++){let vt=Ae[qe],Ne=i.get(vt);t.bindTexture(n.TEXTURE_2D,Ne.__webglTexture),me(n.TEXTURE_2D,vt),ve(oe.__webglFramebuffer,N,vt,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),y(vt)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(qe=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,xe.__webglTexture),me(qe,S),S.mipmaps&&S.mipmaps.length>0)for(let gt=0;gt<S.mipmaps.length;gt++)ve(oe.__webglFramebuffer[gt],N,S,n.COLOR_ATTACHMENT0,qe,gt);else ve(oe.__webglFramebuffer,N,S,n.COLOR_ATTACHMENT0,qe,0);y(S)&&_(qe),t.unbindTexture()}N.depthBuffer&&je(N)}function pt(N){let S=N.textures;for(let oe=0,xe=S.length;oe<xe;oe++){let Ae=S[oe];if(y(Ae)){let fe=T(N),$e=i.get(Ae).__webglTexture;t.bindTexture(fe,$e),_(fe),t.unbindTexture()}}}let ut=[],H=[];function qt(N){if(N.samples>0){if(At(N)===!1){let S=N.textures,oe=N.width,xe=N.height,Ae=n.COLOR_BUFFER_BIT,fe=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,$e=i.get(N),qe=S.length>1;if(qe)for(let vt=0;vt<S.length;vt++)t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+vt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+vt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,$e.__webglMultisampledFramebuffer);let gt=N.texture.mipmaps;gt&&gt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglFramebuffer);for(let vt=0;vt<S.length;vt++){if(N.resolveDepthBuffer&&(N.depthBuffer&&(Ae|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&N.resolveStencilBuffer&&(Ae|=n.STENCIL_BUFFER_BIT)),qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,$e.__webglColorRenderbuffer[vt]);let Ne=i.get(S[vt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ne,0)}n.blitFramebuffer(0,0,oe,xe,0,0,oe,xe,Ae,n.NEAREST),l===!0&&(ut.length=0,H.length=0,ut.push(n.COLOR_ATTACHMENT0+vt),N.depthBuffer&&N.resolveDepthBuffer===!1&&(ut.push(fe),H.push(fe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,H)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ut))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let vt=0;vt<S.length;vt++){t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+vt,n.RENDERBUFFER,$e.__webglColorRenderbuffer[vt]);let Ne=i.get(S[vt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+vt,n.TEXTURE_2D,Ne,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglMultisampledFramebuffer)}else if(N.depthBuffer&&N.resolveDepthBuffer===!1&&l){let S=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[S])}}}function Ge(N){return Math.min(r.maxSamples,N.samples)}function At(N){let S=i.get(N);return N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&S.__useRenderToTexture!==!1}function Xe(N){let S=s.render.frame;f.get(N)!==S&&(f.set(N,S),N.update())}function Vt(N,S){let oe=N.colorSpace,xe=N.format,Ae=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||oe!==pr&&oe!==Bl&&(Bt.getTransfer(oe)===Vn?(xe!==ko||Ae!==ra)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),S}function ht(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(u.width=N.naturalWidth||N.width,u.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(u.width=N.displayWidth,u.height=N.displayHeight):(u.width=N.width,u.height=N.height),u}this.allocateTextureUnit=ae,this.resetTextureUnits=he,this.setTexture2D=be,this.setTexture2DArray=q,this.setTexture3D=ie,this.setTextureCube=$,this.rebindTextures=Fe,this.setupRenderTarget=rt,this.updateRenderTargetMipmap=pt,this.updateMultisampleRenderTarget=qt,this.setupDepthRenderbuffer=je,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=At}function Hae(n,e){function t(i,r=Bl){let o,s=Bt.getTransfer(r);if(i===ra)return n.UNSIGNED_BYTE;if(i===ew)return n.UNSIGNED_SHORT_4_4_4_4;if(i===tw)return n.UNSIGNED_SHORT_5_5_5_1;if(i===wA)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===_A)return n.BYTE;if(i===xA)return n.SHORT;if(i===fh)return n.UNSIGNED_SHORT;if(i===Qx)return n.INT;if(i===Fc)return n.UNSIGNED_INT;if(i===vs)return n.FLOAT;if(i===hh)return n.HALF_FLOAT;if(i===bA)return n.ALPHA;if(i===EA)return n.RGB;if(i===ko)return n.RGBA;if(i===Kf)return n.DEPTH_COMPONENT;if(i===mh)return n.DEPTH_STENCIL;if(i===nw)return n.RED;if(i===iw)return n.RED_INTEGER;if(i===MA)return n.RG;if(i===rw)return n.RG_INTEGER;if(i===ow)return n.RGBA_INTEGER;if(i===vg||i===yg||i===_g||i===xg)if(s===Vn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===vg)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===yg)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===_g)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===xg)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===vg)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===yg)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===_g)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===xg)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===sw||i===aw||i===lw||i===cw)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===sw)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===aw)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===lw)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===cw)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===uw||i===dw||i===fw)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===uw||i===dw)return s===Vn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===fw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===hw||i===pw||i===mw||i===gw||i===vw||i===yw||i===_w||i===xw||i===ww||i===bw||i===Ew||i===Mw||i===Sw||i===Cw)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===hw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===pw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===mw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===gw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===vw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===yw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===_w)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===xw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ww)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===bw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Ew)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Mw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Sw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Cw)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===wg||i===Tw||i===Aw)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===wg)return s===Vn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Tw)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Aw)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===SA||i===Iw||i===Dw||i===Rw)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===wg)return o.COMPRESSED_RED_RGTC1_EXT;if(i===Iw)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Dw)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Rw)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===ph?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var zae=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,jae=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,XA=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){let r=new zr,o=e.properties.get(r);o.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new ea({vertexShader:zae,fragmentShader:jae,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ui(new og(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},YA=class extends Fa{constructor(e,t){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,u=null,f=null,h=null,p=null,g=null,v=null,w=new XA,y=t.getContextAttributes(),_=null,T=null,E=[],M=[],V=new We,F=null,L=new Ei;L.viewport=new rn;let G=new Ei;G.viewport=new rn;let O=[L,G],I=new zx,z=null,he=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(U){let Z=E[U];return Z===void 0&&(Z=new nh,E[U]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(U){let Z=E[U];return Z===void 0&&(Z=new nh,E[U]=Z),Z.getGripSpace()},this.getHand=function(U){let Z=E[U];return Z===void 0&&(Z=new nh,E[U]=Z),Z.getHandSpace()};function ae(U){let Z=M.indexOf(U.inputSource);if(Z===-1)return;let ve=E[Z];ve!==void 0&&(ve.update(U.inputSource,U.frame,u||s),ve.dispatchEvent({type:U.type,data:U.inputSource}))}function Te(){r.removeEventListener("select",ae),r.removeEventListener("selectstart",ae),r.removeEventListener("selectend",ae),r.removeEventListener("squeeze",ae),r.removeEventListener("squeezestart",ae),r.removeEventListener("squeezeend",ae),r.removeEventListener("end",Te),r.removeEventListener("inputsourceschange",be);for(let U=0;U<E.length;U++){let Z=M[U];Z!==null&&(M[U]=null,E[U].disconnect(Z))}z=null,he=null,w.reset(),e.setRenderTarget(_),g=null,p=null,h=null,r=null,T=null,re.stop(),i.isPresenting=!1,e.setPixelRatio(F),e.setSize(V.width,V.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(U){o=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(U){a=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(U){u=U},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=function(U){return at(this,null,function*(){if(r=U,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",ae),r.addEventListener("selectstart",ae),r.addEventListener("selectend",ae),r.addEventListener("squeeze",ae),r.addEventListener("squeezestart",ae),r.addEventListener("squeezeend",ae),r.addEventListener("end",Te),r.addEventListener("inputsourceschange",be),y.xrCompatible!==!0&&(yield t.makeXRCompatible()),F=e.getPixelRatio(),e.getSize(V),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ve=null,se=null,He=null;y.depth&&(He=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ve=y.stencil?mh:Kf,se=y.stencil?ph:Fc);let je={colorFormat:t.RGBA8,depthFormat:He,scaleFactor:o};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer(je),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),T=new La(p.textureWidth,p.textureHeight,{format:ko,type:ra,depthTexture:new Zm(p.textureWidth,p.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,ve),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{let ve={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};g=new XRWebGLLayer(r,t,ve),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),T=new La(g.framebufferWidth,g.framebufferHeight,{format:ko,type:ra,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=yield r.requestReferenceSpace(a),re.setContext(r),re.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function be(U){for(let Z=0;Z<U.removed.length;Z++){let ve=U.removed[Z],se=M.indexOf(ve);se>=0&&(M[se]=null,E[se].disconnect(ve))}for(let Z=0;Z<U.added.length;Z++){let ve=U.added[Z],se=M.indexOf(ve);if(se===-1){for(let je=0;je<E.length;je++)if(je>=M.length){M.push(ve),se=je;break}else if(M[je]===null){M[je]=ve,se=je;break}if(se===-1)break}let He=E[se];He&&He.connect(ve)}}let q=new B,ie=new B;function $(U,Z,ve){q.setFromMatrixPosition(Z.matrixWorld),ie.setFromMatrixPosition(ve.matrixWorld);let se=q.distanceTo(ie),He=Z.projectionMatrix.elements,je=ve.projectionMatrix.elements,Fe=He[14]/(He[10]-1),rt=He[14]/(He[10]+1),pt=(He[9]+1)/He[5],ut=(He[9]-1)/He[5],H=(He[8]-1)/He[0],qt=(je[8]+1)/je[0],Ge=Fe*H,At=Fe*qt,Xe=se/(-H+qt),Vt=Xe*-H;if(Z.matrixWorld.decompose(U.position,U.quaternion,U.scale),U.translateX(Vt),U.translateZ(Xe),U.matrixWorld.compose(U.position,U.quaternion,U.scale),U.matrixWorldInverse.copy(U.matrixWorld).invert(),He[10]===-1)U.projectionMatrix.copy(Z.projectionMatrix),U.projectionMatrixInverse.copy(Z.projectionMatrixInverse);else{let ht=Fe+Xe,N=rt+Xe,S=Ge-Vt,oe=At+(se-Vt),xe=pt*rt/N*ht,Ae=ut*rt/N*ht;U.projectionMatrix.makePerspective(S,oe,xe,Ae,ht,N),U.projectionMatrixInverse.copy(U.projectionMatrix).invert()}}function ge(U,Z){Z===null?U.matrixWorld.copy(U.matrix):U.matrixWorld.multiplyMatrices(Z.matrixWorld,U.matrix),U.matrixWorldInverse.copy(U.matrixWorld).invert()}this.updateCamera=function(U){if(r===null)return;let Z=U.near,ve=U.far;w.texture!==null&&(w.depthNear>0&&(Z=w.depthNear),w.depthFar>0&&(ve=w.depthFar)),I.near=G.near=L.near=Z,I.far=G.far=L.far=ve,(z!==I.near||he!==I.far)&&(r.updateRenderState({depthNear:I.near,depthFar:I.far}),z=I.near,he=I.far),L.layers.mask=U.layers.mask|2,G.layers.mask=U.layers.mask|4,I.layers.mask=L.layers.mask|G.layers.mask;let se=U.parent,He=I.cameras;ge(I,se);for(let je=0;je<He.length;je++)ge(He[je],se);He.length===2?$(I,L,G):I.projectionMatrix.copy(L.projectionMatrix),Ue(U,I,se)};function Ue(U,Z,ve){ve===null?U.matrix.copy(Z.matrixWorld):(U.matrix.copy(ve.matrixWorld),U.matrix.invert(),U.matrix.multiply(Z.matrixWorld)),U.matrix.decompose(U.position,U.quaternion,U.scale),U.updateMatrixWorld(!0),U.projectionMatrix.copy(Z.projectionMatrix),U.projectionMatrixInverse.copy(Z.projectionMatrixInverse),U.isPerspectiveCamera&&(U.fov=zu*2*Math.atan(1/U.projectionMatrix.elements[5]),U.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(U){l=U,p!==null&&(p.fixedFoveation=U),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=U)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(I)};let tt=null;function me(U,Z){if(f=Z.getViewerPose(u||s),v=Z,f!==null){let ve=f.views;g!==null&&(e.setRenderTargetFramebuffer(T,g.framebuffer),e.setRenderTarget(T));let se=!1;ve.length!==I.cameras.length&&(I.cameras.length=0,se=!0);for(let Fe=0;Fe<ve.length;Fe++){let rt=ve[Fe],pt=null;if(g!==null)pt=g.getViewport(rt);else{let H=h.getViewSubImage(p,rt);pt=H.viewport,Fe===0&&(e.setRenderTargetTextures(T,H.colorTexture,H.depthStencilTexture),e.setRenderTarget(T))}let ut=O[Fe];ut===void 0&&(ut=new Ei,ut.layers.enable(Fe),ut.viewport=new rn,O[Fe]=ut),ut.matrix.fromArray(rt.transform.matrix),ut.matrix.decompose(ut.position,ut.quaternion,ut.scale),ut.projectionMatrix.fromArray(rt.projectionMatrix),ut.projectionMatrixInverse.copy(ut.projectionMatrix).invert(),ut.viewport.set(pt.x,pt.y,pt.width,pt.height),Fe===0&&(I.matrix.copy(ut.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),se===!0&&I.cameras.push(ut)}let He=r.enabledFeatures;if(He&&He.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&h){let Fe=h.getDepthInformation(ve[0]);Fe&&Fe.isValid&&Fe.texture&&w.init(e,Fe,r.renderState)}}for(let ve=0;ve<E.length;ve++){let se=M[ve],He=E[ve];se!==null&&He!==void 0&&He.update(se,Z,u||s)}tt&&tt(U,Z),Z.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Z}),v=null}let re=new YB;re.setAnimationLoop(me),this.setAnimationLoop=function(U){tt=U},this.dispose=function(){}}},rd=new nr,Gae=new ct;function Wae(n,e){function t(y,_){y.matrixAutoUpdate===!0&&y.updateMatrix(),_.value.copy(y.matrix)}function i(y,_){_.color.getRGB(y.fogColor.value,RA(n)),_.isFog?(y.fogNear.value=_.near,y.fogFar.value=_.far):_.isFogExp2&&(y.fogDensity.value=_.density)}function r(y,_,T,E,M){_.isMeshBasicMaterial||_.isMeshLambertMaterial?o(y,_):_.isMeshToonMaterial?(o(y,_),h(y,_)):_.isMeshPhongMaterial?(o(y,_),f(y,_)):_.isMeshStandardMaterial?(o(y,_),p(y,_),_.isMeshPhysicalMaterial&&g(y,_,M)):_.isMeshMatcapMaterial?(o(y,_),v(y,_)):_.isMeshDepthMaterial?o(y,_):_.isMeshDistanceMaterial?(o(y,_),w(y,_)):_.isMeshNormalMaterial?o(y,_):_.isLineBasicMaterial?(s(y,_),_.isLineDashedMaterial&&a(y,_)):_.isPointsMaterial?l(y,_,T,E):_.isSpriteMaterial?u(y,_):_.isShadowMaterial?(y.color.value.copy(_.color),y.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function o(y,_){y.opacity.value=_.opacity,_.color&&y.diffuse.value.copy(_.color),_.emissive&&y.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.bumpMap&&(y.bumpMap.value=_.bumpMap,t(_.bumpMap,y.bumpMapTransform),y.bumpScale.value=_.bumpScale,_.side===Hr&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,t(_.normalMap,y.normalMapTransform),y.normalScale.value.copy(_.normalScale),_.side===Hr&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,t(_.displacementMap,y.displacementMapTransform),y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,y.emissiveMapTransform)),_.specularMap&&(y.specularMap.value=_.specularMap,t(_.specularMap,y.specularMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);let T=e.get(_),E=T.envMap,M=T.envMapRotation;E&&(y.envMap.value=E,rd.copy(M),rd.x*=-1,rd.y*=-1,rd.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(rd.y*=-1,rd.z*=-1),y.envMapRotation.value.setFromMatrix4(Gae.makeRotationFromEuler(rd)),y.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=_.reflectivity,y.ior.value=_.ior,y.refractionRatio.value=_.refractionRatio),_.lightMap&&(y.lightMap.value=_.lightMap,y.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,y.lightMapTransform)),_.aoMap&&(y.aoMap.value=_.aoMap,y.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,y.aoMapTransform))}function s(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform))}function a(y,_){y.dashSize.value=_.dashSize,y.totalSize.value=_.dashSize+_.gapSize,y.scale.value=_.scale}function l(y,_,T,E){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.size.value=_.size*T,y.scale.value=E*.5,_.map&&(y.map.value=_.map,t(_.map,y.uvTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function u(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.rotation.value=_.rotation,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function f(y,_){y.specular.value.copy(_.specular),y.shininess.value=Math.max(_.shininess,1e-4)}function h(y,_){_.gradientMap&&(y.gradientMap.value=_.gradientMap)}function p(y,_){y.metalness.value=_.metalness,_.metalnessMap&&(y.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,y.metalnessMapTransform)),y.roughness.value=_.roughness,_.roughnessMap&&(y.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,y.roughnessMapTransform)),_.envMap&&(y.envMapIntensity.value=_.envMapIntensity)}function g(y,_,T){y.ior.value=_.ior,_.sheen>0&&(y.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),y.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(y.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,y.sheenColorMapTransform)),_.sheenRoughnessMap&&(y.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,y.sheenRoughnessMapTransform))),_.clearcoat>0&&(y.clearcoat.value=_.clearcoat,y.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(y.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,y.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(y.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Hr&&y.clearcoatNormalScale.value.negate())),_.dispersion>0&&(y.dispersion.value=_.dispersion),_.iridescence>0&&(y.iridescence.value=_.iridescence,y.iridescenceIOR.value=_.iridescenceIOR,y.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(y.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,y.iridescenceMapTransform)),_.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),_.transmission>0&&(y.transmission.value=_.transmission,y.transmissionSamplerMap.value=T.texture,y.transmissionSamplerSize.value.set(T.width,T.height),_.transmissionMap&&(y.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,y.transmissionMapTransform)),y.thickness.value=_.thickness,_.thicknessMap&&(y.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=_.attenuationDistance,y.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(y.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(y.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=_.specularIntensity,y.specularColor.value.copy(_.specularColor),_.specularColorMap&&(y.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,y.specularColorMapTransform)),_.specularIntensityMap&&(y.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,_){_.matcap&&(y.matcap.value=_.matcap)}function w(y,_){let T=e.get(_).light;y.referencePosition.value.setFromMatrixPosition(T.matrixWorld),y.nearDistance.value=T.shadow.camera.near,y.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function $ae(n,e,t,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(T,E){let M=E.program;i.uniformBlockBinding(T,M)}function u(T,E){let M=r[T.id];M===void 0&&(v(T),M=f(T),r[T.id]=M,T.addEventListener("dispose",y));let V=E.program;i.updateUBOMapping(T,V);let F=e.render.frame;o[T.id]!==F&&(p(T),o[T.id]=F)}function f(T){let E=h();T.__bindingPointIndex=E;let M=n.createBuffer(),V=T.__size,F=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,M),n.bufferData(n.UNIFORM_BUFFER,V,F),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,M),M}function h(){for(let T=0;T<a;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(T){let E=r[T.id],M=T.uniforms,V=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let F=0,L=M.length;F<L;F++){let G=Array.isArray(M[F])?M[F]:[M[F]];for(let O=0,I=G.length;O<I;O++){let z=G[O];if(g(z,F,O,V)===!0){let he=z.__offset,ae=Array.isArray(z.value)?z.value:[z.value],Te=0;for(let be=0;be<ae.length;be++){let q=ae[be],ie=w(q);typeof q=="number"||typeof q=="boolean"?(z.__data[0]=q,n.bufferSubData(n.UNIFORM_BUFFER,he+Te,z.__data)):q.isMatrix3?(z.__data[0]=q.elements[0],z.__data[1]=q.elements[1],z.__data[2]=q.elements[2],z.__data[3]=0,z.__data[4]=q.elements[3],z.__data[5]=q.elements[4],z.__data[6]=q.elements[5],z.__data[7]=0,z.__data[8]=q.elements[6],z.__data[9]=q.elements[7],z.__data[10]=q.elements[8],z.__data[11]=0):(q.toArray(z.__data,Te),Te+=ie.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,he,z.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(T,E,M,V){let F=T.value,L=E+"_"+M;if(V[L]===void 0)return typeof F=="number"||typeof F=="boolean"?V[L]=F:V[L]=F.clone(),!0;{let G=V[L];if(typeof F=="number"||typeof F=="boolean"){if(G!==F)return V[L]=F,!0}else if(G.equals(F)===!1)return G.copy(F),!0}return!1}function v(T){let E=T.uniforms,M=0,V=16;for(let L=0,G=E.length;L<G;L++){let O=Array.isArray(E[L])?E[L]:[E[L]];for(let I=0,z=O.length;I<z;I++){let he=O[I],ae=Array.isArray(he.value)?he.value:[he.value];for(let Te=0,be=ae.length;Te<be;Te++){let q=ae[Te],ie=w(q),$=M%V,ge=$%ie.boundary,Ue=$+ge;M+=ge,Ue!==0&&V-Ue<ie.storage&&(M+=V-Ue),he.__data=new Float32Array(ie.storage/Float32Array.BYTES_PER_ELEMENT),he.__offset=M,M+=ie.storage}}}let F=M%V;return F>0&&(M+=V-F),T.__size=M,T.__cache={},this}function w(T){let E={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(E.boundary=4,E.storage=4):T.isVector2?(E.boundary=8,E.storage=8):T.isVector3||T.isColor?(E.boundary=16,E.storage=12):T.isVector4?(E.boundary=16,E.storage=16):T.isMatrix3?(E.boundary=48,E.storage=48):T.isMatrix4?(E.boundary=64,E.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),E}function y(T){let E=T.target;E.removeEventListener("dispose",y);let M=s.indexOf(E.__bindingPointIndex);s.splice(M,1),n.deleteBuffer(r[E.id]),delete r[E.id],delete o[E.id]}function _(){for(let T in r)n.deleteBuffer(r[T]);s=[],r={},o={}}return{bind:l,update:u,dispose:_}}var Lw=class{constructor(e={}){let{canvas:t=pB(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=s;let v=new Uint32Array(4),w=new Int32Array(4),y=null,_=null,T=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Ul,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let M=this,V=!1;this._outputColorSpace=_n;let F=0,L=0,G=null,O=-1,I=null,z=new rn,he=new rn,ae=null,Te=new ft(0),be=0,q=t.width,ie=t.height,$=1,ge=null,Ue=null,tt=new rn(0,0,q,ie),me=new rn(0,0,q,ie),re=!1,U=new oh,Z=!1,ve=!1,se=new ct,He=new ct,je=new B,Fe=new rn,rt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},pt=!1;function ut(){return G===null?$:1}let H=i;function qt(A,J){return t.getContext(A,J)}try{let A={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${jx}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",et,!1),t.addEventListener("webglcontextcreationerror",Ye,!1),H===null){let J="webgl2";if(H=qt(J,A),H===null)throw qt(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(A){throw console.error("THREE.WebGLRenderer: "+A.message),A}let Ge,At,Xe,Vt,ht,N,S,oe,xe,Ae,fe,$e,qe,gt,vt,Ne,nt,yt,bt,it,sn,Ht,Dn,X;function Ze(){Ge=new use(H),Ge.init(),Ht=new Hae(H,Ge),At=new ise(H,Ge,e,Ht),Xe=new Bae(H,Ge),At.reverseDepthBuffer&&p&&Xe.buffers.depth.setReversed(!0),Vt=new hse(H),ht=new Cae,N=new Vae(H,Ge,Xe,ht,At,Ht,Vt),S=new ose(M),oe=new cse(M),xe=new _ie(H),Dn=new tse(H,xe),Ae=new dse(H,xe,Vt,Dn),fe=new mse(H,Ae,xe,Vt),bt=new pse(H,At,N),Ne=new rse(ht),$e=new Sae(M,S,oe,Ge,At,Dn,Ne),qe=new Wae(M,ht),gt=new Aae,vt=new Nae(Ge),yt=new ese(M,S,oe,Xe,fe,g,l),nt=new kae(M,fe,At),X=new $ae(H,Vt,At,Xe),it=new nse(H,Ge,Vt),sn=new fse(H,Ge,Vt),Vt.programs=$e.programs,M.capabilities=At,M.extensions=Ge,M.properties=ht,M.renderLists=gt,M.shadowMap=nt,M.state=Xe,M.info=Vt}Ze();let pe=new YA(M,H);this.xr=pe,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){let A=Ge.get("WEBGL_lose_context");A&&A.loseContext()},this.forceContextRestore=function(){let A=Ge.get("WEBGL_lose_context");A&&A.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(A){A!==void 0&&($=A,this.setSize(q,ie,!1))},this.getSize=function(A){return A.set(q,ie)},this.setSize=function(A,J,le=!0){if(pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=A,ie=J,t.width=Math.floor(A*$),t.height=Math.floor(J*$),le===!0&&(t.style.width=A+"px",t.style.height=J+"px"),this.setViewport(0,0,A,J)},this.getDrawingBufferSize=function(A){return A.set(q*$,ie*$).floor()},this.setDrawingBufferSize=function(A,J,le){q=A,ie=J,$=le,t.width=Math.floor(A*le),t.height=Math.floor(J*le),this.setViewport(0,0,A,J)},this.getCurrentViewport=function(A){return A.copy(z)},this.getViewport=function(A){return A.copy(tt)},this.setViewport=function(A,J,le,ce){A.isVector4?tt.set(A.x,A.y,A.z,A.w):tt.set(A,J,le,ce),Xe.viewport(z.copy(tt).multiplyScalar($).round())},this.getScissor=function(A){return A.copy(me)},this.setScissor=function(A,J,le,ce){A.isVector4?me.set(A.x,A.y,A.z,A.w):me.set(A,J,le,ce),Xe.scissor(he.copy(me).multiplyScalar($).round())},this.getScissorTest=function(){return re},this.setScissorTest=function(A){Xe.setScissorTest(re=A)},this.setOpaqueSort=function(A){ge=A},this.setTransparentSort=function(A){Ue=A},this.getClearColor=function(A){return A.copy(yt.getClearColor())},this.setClearColor=function(){yt.setClearColor(...arguments)},this.getClearAlpha=function(){return yt.getClearAlpha()},this.setClearAlpha=function(){yt.setClearAlpha(...arguments)},this.clear=function(A=!0,J=!0,le=!0){let ce=0;if(A){let ee=!1;if(G!==null){let Le=G.texture.format;ee=Le===ow||Le===rw||Le===iw}if(ee){let Le=G.texture.type,Ke=Le===ra||Le===Fc||Le===fh||Le===ph||Le===ew||Le===tw,ot=yt.getClearColor(),dt=yt.getClearAlpha(),Lt=ot.r,Nt=ot.g,_t=ot.b;Ke?(v[0]=Lt,v[1]=Nt,v[2]=_t,v[3]=dt,H.clearBufferuiv(H.COLOR,0,v)):(w[0]=Lt,w[1]=Nt,w[2]=_t,w[3]=dt,H.clearBufferiv(H.COLOR,0,w))}else ce|=H.COLOR_BUFFER_BIT}J&&(ce|=H.DEPTH_BUFFER_BIT),le&&(ce|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",et,!1),t.removeEventListener("webglcontextcreationerror",Ye,!1),yt.dispose(),gt.dispose(),vt.dispose(),ht.dispose(),S.dispose(),oe.dispose(),fe.dispose(),Dn.dispose(),X.dispose(),$e.dispose(),pe.dispose(),pe.removeEventListener("sessionstart",Uc),pe.removeEventListener("sessionend",aa),Bo.stop()};function Se(A){A.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),V=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),V=!1;let A=Vt.autoReset,J=nt.enabled,le=nt.autoUpdate,ce=nt.needsUpdate,ee=nt.type;Ze(),Vt.autoReset=A,nt.enabled=J,nt.autoUpdate=le,nt.needsUpdate=ce,nt.type=ee}function Ye(A){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",A.statusMessage)}function Ot(A){let J=A.target;J.removeEventListener("dispose",Ot),zn(J)}function zn(A){Mi(A),ht.remove(A)}function Mi(A){let J=ht.get(A).programs;J!==void 0&&(J.forEach(function(le){$e.releaseProgram(le)}),A.isShaderMaterial&&$e.releaseShaderCache(A))}this.renderBufferDirect=function(A,J,le,ce,ee,Le){J===null&&(J=rt);let Ke=ee.isMesh&&ee.matrixWorld.determinant()<0,ot=ib(A,J,le,ce,ee);Xe.setMaterial(ce,Ke);let dt=le.index,Lt=1;if(ce.wireframe===!0){if(dt=Ae.getWireframeAttribute(le),dt===void 0)return;Lt=2}let Nt=le.drawRange,_t=le.attributes.position,pn=Nt.start*Lt,bn=(Nt.start+Nt.count)*Lt;Le!==null&&(pn=Math.max(pn,Le.start*Lt),bn=Math.min(bn,(Le.start+Le.count)*Lt)),dt!==null?(pn=Math.max(pn,0),bn=Math.min(bn,dt.count)):_t!=null&&(pn=Math.max(pn,0),bn=Math.min(bn,_t.count));let di=bn-pn;if(di<0||di===1/0)return;Dn.setup(ee,ce,ot,le,dt);let Xn,wn=it;if(dt!==null&&(Xn=xe.get(dt),wn=sn,wn.setIndex(Xn)),ee.isMesh)ce.wireframe===!0?(Xe.setLineWidth(ce.wireframeLinewidth*ut()),wn.setMode(H.LINES)):wn.setMode(H.TRIANGLES);else if(ee.isLine){let xt=ce.linewidth;xt===void 0&&(xt=1),Xe.setLineWidth(xt*ut()),ee.isLineSegments?wn.setMode(H.LINES):ee.isLineLoop?wn.setMode(H.LINE_LOOP):wn.setMode(H.LINE_STRIP)}else ee.isPoints?wn.setMode(H.POINTS):ee.isSprite&&wn.setMode(H.TRIANGLES);if(ee.isBatchedMesh)if(ee._multiDrawInstances!==null)Mg("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),wn.renderMultiDrawInstances(ee._multiDrawStarts,ee._multiDrawCounts,ee._multiDrawCount,ee._multiDrawInstances);else if(Ge.get("WEBGL_multi_draw"))wn.renderMultiDraw(ee._multiDrawStarts,ee._multiDrawCounts,ee._multiDrawCount);else{let xt=ee._multiDrawStarts,mi=ee._multiDrawCounts,En=ee._multiDrawCount,po=dt?xe.get(dt).bytesPerElement:1,ja=ht.get(ce).currentProgram.getUniforms();for(let mr=0;mr<En;mr++)ja.setValue(H,"_gl_DrawID",mr),wn.render(xt[mr]/po,mi[mr])}else if(ee.isInstancedMesh)wn.renderInstances(pn,di,ee.count);else if(le.isInstancedBufferGeometry){let xt=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,mi=Math.min(le.instanceCount,xt);wn.renderInstances(pn,di,mi)}else wn.render(pn,di)};function xn(A,J,le){A.transparent===!0&&A.side===gs&&A.forceSinglePass===!1?(A.side=Hr,A.needsUpdate=!0,cd(A,J,le),A.side=Js,A.needsUpdate=!0,cd(A,J,le),A.side=gs):cd(A,J,le)}this.compile=function(A,J,le=null){le===null&&(le=A),_=vt.get(le),_.init(J),E.push(_),le.traverseVisible(function(ee){ee.isLight&&ee.layers.test(J.layers)&&(_.pushLight(ee),ee.castShadow&&_.pushShadow(ee))}),A!==le&&A.traverseVisible(function(ee){ee.isLight&&ee.layers.test(J.layers)&&(_.pushLight(ee),ee.castShadow&&_.pushShadow(ee))}),_.setupLights();let ce=new Set;return A.traverse(function(ee){if(!(ee.isMesh||ee.isPoints||ee.isLine||ee.isSprite))return;let Le=ee.material;if(Le)if(Array.isArray(Le))for(let Ke=0;Ke<Le.length;Ke++){let ot=Le[Ke];xn(ot,le,ee),ce.add(ot)}else xn(Le,le,ee),ce.add(Le)}),_=E.pop(),ce},this.compileAsync=function(A,J,le=null){let ce=this.compile(A,J,le);return new Promise(ee=>{function Le(){if(ce.forEach(function(Ke){ht.get(Ke).currentProgram.isReady()&&ce.delete(Ke)}),ce.size===0){ee(A);return}setTimeout(Le,10)}Ge.get("KHR_parallel_shader_compile")!==null?Le():setTimeout(Le,10)})};let Zi=null;function Gr(A){Zi&&Zi(A)}function Uc(){Bo.stop()}function aa(){Bo.start()}let Bo=new YB;Bo.setAnimationLoop(Gr),typeof self<"u"&&Bo.setContext(self),this.setAnimationLoop=function(A){Zi=A,pe.setAnimationLoop(A),A===null?Bo.stop():Bo.start()},pe.addEventListener("sessionstart",Uc),pe.addEventListener("sessionend",aa),this.render=function(A,J){if(J!==void 0&&J.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(V===!0)return;if(A.matrixWorldAutoUpdate===!0&&A.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),pe.enabled===!0&&pe.isPresenting===!0&&(pe.cameraAutoUpdate===!0&&pe.updateCamera(J),J=pe.getCamera()),A.isScene===!0&&A.onBeforeRender(M,A,J,G),_=vt.get(A,E.length),_.init(J),E.push(_),He.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),U.setFromProjectionMatrix(He),ve=this.localClippingEnabled,Z=Ne.init(this.clippingPlanes,ve),y=gt.get(A,T.length),y.init(),T.push(y),pe.enabled===!0&&pe.isPresenting===!0){let Le=M.xr.getDepthSensingMesh();Le!==null&&jl(Le,J,-1/0,M.sortObjects)}jl(A,J,0,M.sortObjects),y.finish(),M.sortObjects===!0&&y.sort(ge,Ue),pt=pe.enabled===!1||pe.isPresenting===!1||pe.hasDepthSensing()===!1,pt&&yt.addToRenderList(y,A),this.info.render.frame++,Z===!0&&Ne.beginShadows();let le=_.state.shadowsArray;nt.render(le,A,J),Z===!0&&Ne.endShadows(),this.info.autoReset===!0&&this.info.reset();let ce=y.opaque,ee=y.transmissive;if(_.setupLights(),J.isArrayCamera){let Le=J.cameras;if(ee.length>0)for(let Ke=0,ot=Le.length;Ke<ot;Ke++){let dt=Le[Ke];Gl(ce,ee,A,dt)}pt&&yt.render(A);for(let Ke=0,ot=Le.length;Ke<ot;Ke++){let dt=Le[Ke];bs(y,A,dt,dt.viewport)}}else ee.length>0&&Gl(ce,ee,A,J),pt&&yt.render(A),bs(y,A,J);G!==null&&L===0&&(N.updateMultisampleRenderTarget(G),N.updateRenderTargetMipmap(G)),A.isScene===!0&&A.onAfterRender(M,A,J),Dn.resetDefaultState(),O=-1,I=null,E.pop(),E.length>0?(_=E[E.length-1],Z===!0&&Ne.setGlobalState(M.clippingPlanes,_.state.camera)):_=null,T.pop(),T.length>0?y=T[T.length-1]:y=null};function jl(A,J,le,ce){if(A.visible===!1)return;if(A.layers.test(J.layers)){if(A.isGroup)le=A.renderOrder;else if(A.isLOD)A.autoUpdate===!0&&A.update(J);else if(A.isLight)_.pushLight(A),A.castShadow&&_.pushShadow(A);else if(A.isSprite){if(!A.frustumCulled||U.intersectsSprite(A)){ce&&Fe.setFromMatrixPosition(A.matrixWorld).applyMatrix4(He);let Ke=fe.update(A),ot=A.material;ot.visible&&y.push(A,Ke,ot,le,Fe.z,null)}}else if((A.isMesh||A.isLine||A.isPoints)&&(!A.frustumCulled||U.intersectsObject(A))){let Ke=fe.update(A),ot=A.material;if(ce&&(A.boundingSphere!==void 0?(A.boundingSphere===null&&A.computeBoundingSphere(),Fe.copy(A.boundingSphere.center)):(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),Fe.copy(Ke.boundingSphere.center)),Fe.applyMatrix4(A.matrixWorld).applyMatrix4(He)),Array.isArray(ot)){let dt=Ke.groups;for(let Lt=0,Nt=dt.length;Lt<Nt;Lt++){let _t=dt[Lt],pn=ot[_t.materialIndex];pn&&pn.visible&&y.push(A,Ke,pn,le,Fe.z,_t)}}else ot.visible&&y.push(A,Ke,ot,le,Fe.z,null)}}let Le=A.children;for(let Ke=0,ot=Le.length;Ke<ot;Ke++)jl(Le[Ke],J,le,ce)}function bs(A,J,le,ce){let ee=A.opaque,Le=A.transmissive,Ke=A.transparent;_.setupLightsView(le),Z===!0&&Ne.setGlobalState(M.clippingPlanes,le),ce&&Xe.viewport(z.copy(ce)),ee.length>0&&Vo(ee,J,le),Le.length>0&&Vo(Le,J,le),Ke.length>0&&Vo(Ke,J,le),Xe.buffers.depth.setTest(!0),Xe.buffers.depth.setMask(!0),Xe.buffers.color.setMask(!0),Xe.setPolygonOffset(!1)}function Gl(A,J,le,ce){if((le.isScene===!0?le.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[ce.id]===void 0&&(_.state.transmissionRenderTarget[ce.id]=new La(1,1,{generateMipmaps:!0,type:Ge.has("EXT_color_buffer_half_float")||Ge.has("EXT_color_buffer_float")?hh:ra,minFilter:ia,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Bt.workingColorSpace}));let Le=_.state.transmissionRenderTarget[ce.id],Ke=ce.viewport||z;Le.setSize(Ke.z*M.transmissionResolutionScale,Ke.w*M.transmissionResolutionScale);let ot=M.getRenderTarget();M.setRenderTarget(Le),M.getClearColor(Te),be=M.getClearAlpha(),be<1&&M.setClearColor(16777215,.5),M.clear(),pt&&yt.render(le);let dt=M.toneMapping;M.toneMapping=Ul;let Lt=ce.viewport;if(ce.viewport!==void 0&&(ce.viewport=void 0),_.setupLightsView(ce),Z===!0&&Ne.setGlobalState(M.clippingPlanes,ce),Vo(A,le,ce),N.updateMultisampleRenderTarget(Le),N.updateRenderTargetMipmap(Le),Ge.has("WEBGL_multisampled_render_to_texture")===!1){let Nt=!1;for(let _t=0,pn=J.length;_t<pn;_t++){let bn=J[_t],di=bn.object,Xn=bn.geometry,wn=bn.material,xt=bn.group;if(wn.side===gs&&di.layers.test(ce.layers)){let mi=wn.side;wn.side=Hr,wn.needsUpdate=!0,Rg(di,le,ce,Xn,wn,xt),wn.side=mi,wn.needsUpdate=!0,Nt=!0}}Nt===!0&&(N.updateMultisampleRenderTarget(Le),N.updateRenderTargetMipmap(Le))}M.setRenderTarget(ot),M.setClearColor(Te,be),Lt!==void 0&&(ce.viewport=Lt),M.toneMapping=dt}function Vo(A,J,le){let ce=J.isScene===!0?J.overrideMaterial:null;for(let ee=0,Le=A.length;ee<Le;ee++){let Ke=A[ee],ot=Ke.object,dt=Ke.geometry,Lt=Ke.group,Nt=Ke.material;Nt.allowOverride===!0&&ce!==null&&(Nt=ce),ot.layers.test(le.layers)&&Rg(ot,J,le,dt,Nt,Lt)}}function Rg(A,J,le,ce,ee,Le){A.onBeforeRender(M,J,le,ce,ee,Le),A.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,A.matrixWorld),A.normalMatrix.getNormalMatrix(A.modelViewMatrix),ee.onBeforeRender(M,J,le,ce,A,Le),ee.transparent===!0&&ee.side===gs&&ee.forceSinglePass===!1?(ee.side=Hr,ee.needsUpdate=!0,M.renderBufferDirect(le,J,ce,ee,A,Le),ee.side=Js,ee.needsUpdate=!0,M.renderBufferDirect(le,J,ce,ee,A,Le),ee.side=gs):M.renderBufferDirect(le,J,ce,ee,A,Le),A.onAfterRender(M,J,le,ce,ee,Le)}function cd(A,J,le){J.isScene!==!0&&(J=rt);let ce=ht.get(A),ee=_.state.lights,Le=_.state.shadowsArray,Ke=ee.state.version,ot=$e.getParameters(A,ee.state,Le,J,le),dt=$e.getProgramCacheKey(ot),Lt=ce.programs;ce.environment=A.isMeshStandardMaterial?J.environment:null,ce.fog=J.fog,ce.envMap=(A.isMeshStandardMaterial?oe:S).get(A.envMap||ce.environment),ce.envMapRotation=ce.environment!==null&&A.envMap===null?J.environmentRotation:A.envMapRotation,Lt===void 0&&(A.addEventListener("dispose",Ot),Lt=new Map,ce.programs=Lt);let Nt=Lt.get(dt);if(Nt!==void 0){if(ce.currentProgram===Nt&&ce.lightsStateVersion===Ke)return Pg(A,ot),Nt}else ot.uniforms=$e.getUniforms(A),A.onBeforeCompile(ot,M),Nt=$e.acquireProgram(ot,dt),Lt.set(dt,Nt),ce.uniforms=ot.uniforms;let _t=ce.uniforms;return(!A.isShaderMaterial&&!A.isRawShaderMaterial||A.clipping===!0)&&(_t.clippingPlanes=Ne.uniform),Pg(A,ot),ce.needsLights=ob(A),ce.lightsStateVersion=Ke,ce.needsLights&&(_t.ambientLightColor.value=ee.state.ambient,_t.lightProbe.value=ee.state.probe,_t.directionalLights.value=ee.state.directional,_t.directionalLightShadows.value=ee.state.directionalShadow,_t.spotLights.value=ee.state.spot,_t.spotLightShadows.value=ee.state.spotShadow,_t.rectAreaLights.value=ee.state.rectArea,_t.ltc_1.value=ee.state.rectAreaLTC1,_t.ltc_2.value=ee.state.rectAreaLTC2,_t.pointLights.value=ee.state.point,_t.pointLightShadows.value=ee.state.pointShadow,_t.hemisphereLights.value=ee.state.hemi,_t.directionalShadowMap.value=ee.state.directionalShadowMap,_t.directionalShadowMatrix.value=ee.state.directionalShadowMatrix,_t.spotShadowMap.value=ee.state.spotShadowMap,_t.spotLightMatrix.value=ee.state.spotLightMatrix,_t.spotLightMap.value=ee.state.spotLightMap,_t.pointShadowMap.value=ee.state.pointShadowMap,_t.pointShadowMatrix.value=ee.state.pointShadowMatrix),ce.currentProgram=Nt,ce.uniformsList=null,Nt}function Ih(A){if(A.uniformsList===null){let J=A.currentProgram.getUniforms();A.uniformsList=_h.seqWithValue(J.seq,A.uniforms)}return A.uniformsList}function Pg(A,J){let le=ht.get(A);le.outputColorSpace=J.outputColorSpace,le.batching=J.batching,le.batchingColor=J.batchingColor,le.instancing=J.instancing,le.instancingColor=J.instancingColor,le.instancingMorph=J.instancingMorph,le.skinning=J.skinning,le.morphTargets=J.morphTargets,le.morphNormals=J.morphNormals,le.morphColors=J.morphColors,le.morphTargetsCount=J.morphTargetsCount,le.numClippingPlanes=J.numClippingPlanes,le.numIntersection=J.numClipIntersection,le.vertexAlphas=J.vertexAlphas,le.vertexTangents=J.vertexTangents,le.toneMapping=J.toneMapping}function ib(A,J,le,ce,ee){J.isScene!==!0&&(J=rt),N.resetTextureUnits();let Le=J.fog,Ke=ce.isMeshStandardMaterial?J.environment:null,ot=G===null?M.outputColorSpace:G.isXRRenderTarget===!0?G.texture.colorSpace:pr,dt=(ce.isMeshStandardMaterial?oe:S).get(ce.envMap||Ke),Lt=ce.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,Nt=!!le.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),_t=!!le.morphAttributes.position,pn=!!le.morphAttributes.normal,bn=!!le.morphAttributes.color,di=Ul;ce.toneMapped&&(G===null||G.isXRRenderTarget===!0)&&(di=M.toneMapping);let Xn=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,wn=Xn!==void 0?Xn.length:0,xt=ht.get(ce),mi=_.state.lights;if(Z===!0&&(ve===!0||A!==I)){let Hi=A===I&&ce.id===O;Ne.setState(ce,A,Hi)}let En=!1;ce.version===xt.__version?(xt.needsLights&&xt.lightsStateVersion!==mi.state.version||xt.outputColorSpace!==ot||ee.isBatchedMesh&&xt.batching===!1||!ee.isBatchedMesh&&xt.batching===!0||ee.isBatchedMesh&&xt.batchingColor===!0&&ee.colorTexture===null||ee.isBatchedMesh&&xt.batchingColor===!1&&ee.colorTexture!==null||ee.isInstancedMesh&&xt.instancing===!1||!ee.isInstancedMesh&&xt.instancing===!0||ee.isSkinnedMesh&&xt.skinning===!1||!ee.isSkinnedMesh&&xt.skinning===!0||ee.isInstancedMesh&&xt.instancingColor===!0&&ee.instanceColor===null||ee.isInstancedMesh&&xt.instancingColor===!1&&ee.instanceColor!==null||ee.isInstancedMesh&&xt.instancingMorph===!0&&ee.morphTexture===null||ee.isInstancedMesh&&xt.instancingMorph===!1&&ee.morphTexture!==null||xt.envMap!==dt||ce.fog===!0&&xt.fog!==Le||xt.numClippingPlanes!==void 0&&(xt.numClippingPlanes!==Ne.numPlanes||xt.numIntersection!==Ne.numIntersection)||xt.vertexAlphas!==Lt||xt.vertexTangents!==Nt||xt.morphTargets!==_t||xt.morphNormals!==pn||xt.morphColors!==bn||xt.toneMapping!==di||xt.morphTargetsCount!==wn)&&(En=!0):(En=!0,xt.__version=ce.version);let po=xt.currentProgram;En===!0&&(po=cd(ce,J,ee));let ja=!1,mr=!1,Ga=!1,Yn=po.getUniforms(),Cr=xt.uniforms;if(Xe.useProgram(po.program)&&(ja=!0,mr=!0,Ga=!0),ce.id!==O&&(O=ce.id,mr=!0),ja||I!==A){Xe.buffers.depth.getReversed()?(se.copy(A.projectionMatrix),gB(se),vB(se),Yn.setValue(H,"projectionMatrix",se)):Yn.setValue(H,"projectionMatrix",A.projectionMatrix),Yn.setValue(H,"viewMatrix",A.matrixWorldInverse);let Si=Yn.map.cameraPosition;Si!==void 0&&Si.setValue(H,je.setFromMatrixPosition(A.matrixWorld)),At.logarithmicDepthBuffer&&Yn.setValue(H,"logDepthBufFC",2/(Math.log(A.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&Yn.setValue(H,"isOrthographic",A.isOrthographicCamera===!0),I!==A&&(I=A,mr=!0,Ga=!0)}if(ee.isSkinnedMesh){Yn.setOptional(H,ee,"bindMatrix"),Yn.setOptional(H,ee,"bindMatrixInverse");let Hi=ee.skeleton;Hi&&(Hi.boneTexture===null&&Hi.computeBoneTexture(),Yn.setValue(H,"boneTexture",Hi.boneTexture,N))}ee.isBatchedMesh&&(Yn.setOptional(H,ee,"batchingTexture"),Yn.setValue(H,"batchingTexture",ee._matricesTexture,N),Yn.setOptional(H,ee,"batchingIdTexture"),Yn.setValue(H,"batchingIdTexture",ee._indirectTexture,N),Yn.setOptional(H,ee,"batchingColorTexture"),ee._colorsTexture!==null&&Yn.setValue(H,"batchingColorTexture",ee._colorsTexture,N));let gr=le.morphAttributes;if((gr.position!==void 0||gr.normal!==void 0||gr.color!==void 0)&&bt.update(ee,le,po),(mr||xt.receiveShadow!==ee.receiveShadow)&&(xt.receiveShadow=ee.receiveShadow,Yn.setValue(H,"receiveShadow",ee.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(Cr.envMap.value=dt,Cr.flipEnvMap.value=dt.isCubeTexture&&dt.isRenderTargetTexture===!1?-1:1),ce.isMeshStandardMaterial&&ce.envMap===null&&J.environment!==null&&(Cr.envMapIntensity.value=J.environmentIntensity),mr&&(Yn.setValue(H,"toneMappingExposure",M.toneMappingExposure),xt.needsLights&&rb(Cr,Ga),Le&&ce.fog===!0&&qe.refreshFogUniforms(Cr,Le),qe.refreshMaterialUniforms(Cr,ce,$,ie,_.state.transmissionRenderTarget[A.id]),_h.upload(H,Ih(xt),Cr,N)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(_h.upload(H,Ih(xt),Cr,N),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&Yn.setValue(H,"center",ee.center),Yn.setValue(H,"modelViewMatrix",ee.modelViewMatrix),Yn.setValue(H,"normalMatrix",ee.normalMatrix),Yn.setValue(H,"modelMatrix",ee.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){let Hi=ce.uniformsGroups;for(let Si=0,dd=Hi.length;Si<dd;Si++){let la=Hi[Si];X.update(la,po),X.bind(la,po)}}return po}function rb(A,J){A.ambientLightColor.needsUpdate=J,A.lightProbe.needsUpdate=J,A.directionalLights.needsUpdate=J,A.directionalLightShadows.needsUpdate=J,A.pointLights.needsUpdate=J,A.pointLightShadows.needsUpdate=J,A.spotLights.needsUpdate=J,A.spotLightShadows.needsUpdate=J,A.rectAreaLights.needsUpdate=J,A.hemisphereLights.needsUpdate=J}function ob(A){return A.isMeshLambertMaterial||A.isMeshToonMaterial||A.isMeshPhongMaterial||A.isMeshStandardMaterial||A.isShadowMaterial||A.isShaderMaterial&&A.lights===!0}this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(A,J,le){let ce=ht.get(A);ce.__autoAllocateDepthBuffer=A.resolveDepthBuffer===!1,ce.__autoAllocateDepthBuffer===!1&&(ce.__useRenderToTexture=!1),ht.get(A.texture).__webglTexture=J,ht.get(A.depthTexture).__webglTexture=ce.__autoAllocateDepthBuffer?void 0:le,ce.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(A,J){let le=ht.get(A);le.__webglFramebuffer=J,le.__useDefaultFramebuffer=J===void 0};let sb=H.createFramebuffer();this.setRenderTarget=function(A,J=0,le=0){G=A,F=J,L=le;let ce=!0,ee=null,Le=!1,Ke=!1;if(A){let dt=ht.get(A);if(dt.__useDefaultFramebuffer!==void 0)Xe.bindFramebuffer(H.FRAMEBUFFER,null),ce=!1;else if(dt.__webglFramebuffer===void 0)N.setupRenderTarget(A);else if(dt.__hasExternalTextures)N.rebindTextures(A,ht.get(A.texture).__webglTexture,ht.get(A.depthTexture).__webglTexture);else if(A.depthBuffer){let _t=A.depthTexture;if(dt.__boundDepthTexture!==_t){if(_t!==null&&ht.has(_t)&&(A.width!==_t.image.width||A.height!==_t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");N.setupDepthRenderbuffer(A)}}let Lt=A.texture;(Lt.isData3DTexture||Lt.isDataArrayTexture||Lt.isCompressedArrayTexture)&&(Ke=!0);let Nt=ht.get(A).__webglFramebuffer;A.isWebGLCubeRenderTarget?(Array.isArray(Nt[J])?ee=Nt[J][le]:ee=Nt[J],Le=!0):A.samples>0&&N.useMultisampledRTT(A)===!1?ee=ht.get(A).__webglMultisampledFramebuffer:Array.isArray(Nt)?ee=Nt[le]:ee=Nt,z.copy(A.viewport),he.copy(A.scissor),ae=A.scissorTest}else z.copy(tt).multiplyScalar($).floor(),he.copy(me).multiplyScalar($).floor(),ae=re;if(le!==0&&(ee=sb),Xe.bindFramebuffer(H.FRAMEBUFFER,ee)&&ce&&Xe.drawBuffers(A,ee),Xe.viewport(z),Xe.scissor(he),Xe.setScissorTest(ae),Le){let dt=ht.get(A.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+J,dt.__webglTexture,le)}else if(Ke){let dt=ht.get(A.texture),Lt=J;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,dt.__webglTexture,le,Lt)}else if(A!==null&&le!==0){let dt=ht.get(A.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,dt.__webglTexture,le)}O=-1},this.readRenderTargetPixels=function(A,J,le,ce,ee,Le,Ke){if(!(A&&A.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=ht.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&Ke!==void 0&&(ot=ot[Ke]),ot){Xe.bindFramebuffer(H.FRAMEBUFFER,ot);try{let dt=A.texture,Lt=dt.format,Nt=dt.type;if(!At.textureFormatReadable(Lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!At.textureTypeReadable(Nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}J>=0&&J<=A.width-ce&&le>=0&&le<=A.height-ee&&H.readPixels(J,le,ce,ee,Ht.convert(Lt),Ht.convert(Nt),Le)}finally{let dt=G!==null?ht.get(G).__webglFramebuffer:null;Xe.bindFramebuffer(H.FRAMEBUFFER,dt)}}},this.readRenderTargetPixelsAsync=function(A,J,le,ce,ee,Le,Ke){return at(this,null,function*(){if(!(A&&A.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ot=ht.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&Ke!==void 0&&(ot=ot[Ke]),ot)if(J>=0&&J<=A.width-ce&&le>=0&&le<=A.height-ee){Xe.bindFramebuffer(H.FRAMEBUFFER,ot);let dt=A.texture,Lt=dt.format,Nt=dt.type;if(!At.textureFormatReadable(Lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!At.textureTypeReadable(Nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let _t=H.createBuffer();H.bindBuffer(H.PIXEL_PACK_BUFFER,_t),H.bufferData(H.PIXEL_PACK_BUFFER,Le.byteLength,H.STREAM_READ),H.readPixels(J,le,ce,ee,Ht.convert(Lt),Ht.convert(Nt),0);let pn=G!==null?ht.get(G).__webglFramebuffer:null;Xe.bindFramebuffer(H.FRAMEBUFFER,pn);let bn=H.fenceSync(H.SYNC_GPU_COMMANDS_COMPLETE,0);return H.flush(),yield mB(H,bn,4),H.bindBuffer(H.PIXEL_PACK_BUFFER,_t),H.getBufferSubData(H.PIXEL_PACK_BUFFER,0,Le),H.deleteBuffer(_t),H.deleteSync(bn),Le}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(A,J=null,le=0){let ce=Math.pow(2,-le),ee=Math.floor(A.image.width*ce),Le=Math.floor(A.image.height*ce),Ke=J!==null?J.x:0,ot=J!==null?J.y:0;N.setTexture2D(A,0),H.copyTexSubImage2D(H.TEXTURE_2D,le,0,0,Ke,ot,ee,Le),Xe.unbindTexture()};let ab=H.createFramebuffer(),ud=H.createFramebuffer();this.copyTextureToTexture=function(A,J,le=null,ce=null,ee=0,Le=null){Le===null&&(ee!==0?(Mg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Le=ee,ee=0):Le=0);let Ke,ot,dt,Lt,Nt,_t,pn,bn,di,Xn=A.isCompressedTexture?A.mipmaps[Le]:A.image;if(le!==null)Ke=le.max.x-le.min.x,ot=le.max.y-le.min.y,dt=le.isBox3?le.max.z-le.min.z:1,Lt=le.min.x,Nt=le.min.y,_t=le.isBox3?le.min.z:0;else{let gr=Math.pow(2,-ee);Ke=Math.floor(Xn.width*gr),ot=Math.floor(Xn.height*gr),A.isDataArrayTexture?dt=Xn.depth:A.isData3DTexture?dt=Math.floor(Xn.depth*gr):dt=1,Lt=0,Nt=0,_t=0}ce!==null?(pn=ce.x,bn=ce.y,di=ce.z):(pn=0,bn=0,di=0);let wn=Ht.convert(J.format),xt=Ht.convert(J.type),mi;J.isData3DTexture?(N.setTexture3D(J,0),mi=H.TEXTURE_3D):J.isDataArrayTexture||J.isCompressedArrayTexture?(N.setTexture2DArray(J,0),mi=H.TEXTURE_2D_ARRAY):(N.setTexture2D(J,0),mi=H.TEXTURE_2D),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,J.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,J.unpackAlignment);let En=H.getParameter(H.UNPACK_ROW_LENGTH),po=H.getParameter(H.UNPACK_IMAGE_HEIGHT),ja=H.getParameter(H.UNPACK_SKIP_PIXELS),mr=H.getParameter(H.UNPACK_SKIP_ROWS),Ga=H.getParameter(H.UNPACK_SKIP_IMAGES);H.pixelStorei(H.UNPACK_ROW_LENGTH,Xn.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Xn.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Lt),H.pixelStorei(H.UNPACK_SKIP_ROWS,Nt),H.pixelStorei(H.UNPACK_SKIP_IMAGES,_t);let Yn=A.isDataArrayTexture||A.isData3DTexture,Cr=J.isDataArrayTexture||J.isData3DTexture;if(A.isDepthTexture){let gr=ht.get(A),Hi=ht.get(J),Si=ht.get(gr.__renderTarget),dd=ht.get(Hi.__renderTarget);Xe.bindFramebuffer(H.READ_FRAMEBUFFER,Si.__webglFramebuffer),Xe.bindFramebuffer(H.DRAW_FRAMEBUFFER,dd.__webglFramebuffer);for(let la=0;la<dt;la++)Yn&&(H.framebufferTextureLayer(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,ht.get(A).__webglTexture,ee,_t+la),H.framebufferTextureLayer(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,ht.get(J).__webglTexture,Le,di+la)),H.blitFramebuffer(Lt,Nt,Ke,ot,pn,bn,Ke,ot,H.DEPTH_BUFFER_BIT,H.NEAREST);Xe.bindFramebuffer(H.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(H.DRAW_FRAMEBUFFER,null)}else if(ee!==0||A.isRenderTargetTexture||ht.has(A)){let gr=ht.get(A),Hi=ht.get(J);Xe.bindFramebuffer(H.READ_FRAMEBUFFER,ab),Xe.bindFramebuffer(H.DRAW_FRAMEBUFFER,ud);for(let Si=0;Si<dt;Si++)Yn?H.framebufferTextureLayer(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,gr.__webglTexture,ee,_t+Si):H.framebufferTexture2D(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,gr.__webglTexture,ee),Cr?H.framebufferTextureLayer(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,Hi.__webglTexture,Le,di+Si):H.framebufferTexture2D(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Hi.__webglTexture,Le),ee!==0?H.blitFramebuffer(Lt,Nt,Ke,ot,pn,bn,Ke,ot,H.COLOR_BUFFER_BIT,H.NEAREST):Cr?H.copyTexSubImage3D(mi,Le,pn,bn,di+Si,Lt,Nt,Ke,ot):H.copyTexSubImage2D(mi,Le,pn,bn,Lt,Nt,Ke,ot);Xe.bindFramebuffer(H.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(H.DRAW_FRAMEBUFFER,null)}else Cr?A.isDataTexture||A.isData3DTexture?H.texSubImage3D(mi,Le,pn,bn,di,Ke,ot,dt,wn,xt,Xn.data):J.isCompressedArrayTexture?H.compressedTexSubImage3D(mi,Le,pn,bn,di,Ke,ot,dt,wn,Xn.data):H.texSubImage3D(mi,Le,pn,bn,di,Ke,ot,dt,wn,xt,Xn):A.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,Le,pn,bn,Ke,ot,wn,xt,Xn.data):A.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,Le,pn,bn,Xn.width,Xn.height,wn,Xn.data):H.texSubImage2D(H.TEXTURE_2D,Le,pn,bn,Ke,ot,wn,xt,Xn);H.pixelStorei(H.UNPACK_ROW_LENGTH,En),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,po),H.pixelStorei(H.UNPACK_SKIP_PIXELS,ja),H.pixelStorei(H.UNPACK_SKIP_ROWS,mr),H.pixelStorei(H.UNPACK_SKIP_IMAGES,Ga),Le===0&&J.generateMipmaps&&H.generateMipmap(mi),Xe.unbindTexture()},this.copyTextureToTexture3D=function(A,J,le=null,ce=null,ee=0){return Mg('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(A,J,le,ce,ee)},this.initRenderTarget=function(A){ht.get(A).__webglFramebuffer===void 0&&N.setupRenderTarget(A)},this.initTexture=function(A){A.isCubeTexture?N.setTextureCube(A,0):A.isData3DTexture?N.setTexture3D(A,0):A.isDataArrayTexture||A.isCompressedArrayTexture?N.setTexture2DArray(A,0):N.setTexture2D(A,0),Xe.unbindTexture()},this.resetState=function(){F=0,L=0,G=null,Xe.reset(),Dn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Na}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=Bt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Bt._getUnpackColorSpace()}};var eV={type:"change"},JA={type:"start"},nV={type:"end"},Uw=new ka,tV=new ds,Xae=Math.cos(70*qn.DEG2RAD),Yi=new B,ho=2*Math.PI,Hn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},KA=1e-6,Bw=class extends pg{constructor(e,t=null){super(e,t),this.state=Hn.NONE,this.target=new B,this.cursor=new B,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Oc.ROTATE,MIDDLE:Oc.DOLLY,RIGHT:Oc.PAN},this.touches={ONE:Nc.ROTATE,TWO:Nc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new B,this._lastQuaternion=new li,this._lastTargetPosition=new B,this._quat=new li().setFromUnitVectors(e.up,new B(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new ch,this._sphericalDelta=new ch,this._scale=1,this._panOffset=new B,this._rotateStart=new We,this._rotateEnd=new We,this._rotateDelta=new We,this._panStart=new We,this._panEnd=new We,this._panDelta=new We,this._dollyStart=new We,this._dollyEnd=new We,this._dollyDelta=new We,this._dollyDirection=new B,this._mouse=new We,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Zae.bind(this),this._onPointerDown=Yae.bind(this),this._onPointerUp=Kae.bind(this),this._onContextMenu=rle.bind(this),this._onMouseWheel=ele.bind(this),this._onKeyDown=tle.bind(this),this._onTouchStart=nle.bind(this),this._onTouchMove=ile.bind(this),this._onMouseDown=Jae.bind(this),this._onMouseMove=Qae.bind(this),this._interceptControlDown=ole.bind(this),this._interceptControlUp=sle.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(eV),this.update(),this.state=Hn.NONE}update(e=null){let t=this.object.position;Yi.copy(t).sub(this.target),Yi.applyQuaternion(this._quat),this._spherical.setFromVector3(Yi),this.autoRotate&&this.state===Hn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=ho:i>Math.PI&&(i-=ho),r<-Math.PI?r+=ho:r>Math.PI&&(r-=ho),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(Yi.setFromSpherical(this._spherical),Yi.applyQuaternion(this._quatInverse),t.copy(this.target).add(Yi),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){let a=Yi.length();s=this._clampDistance(a*this._scale);let l=a-s;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),o=!!l}else if(this.object.isOrthographicCamera){let a=new B(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=l!==this.object.zoom;let u=new B(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),s=Yi.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(Uw.origin.copy(this.object.position),Uw.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Uw.direction))<Xae?this.object.lookAt(this.target):(tV.setFromNormalAndCoplanarPoint(this.object.up,this.target),Uw.intersectPlane(tV,this.target))))}else if(this.object.isOrthographicCamera){let s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>KA||8*(1-this._lastQuaternion.dot(this.object.quaternion))>KA||this._lastTargetPosition.distanceToSquared(this.target)>KA?(this.dispatchEvent(eV),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?ho/60*this.autoRotateSpeed*e:ho/60/60*this.autoRotateSpeed}_getZoomScale(e){let t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Yi.setFromMatrixColumn(t,0),Yi.multiplyScalar(-e),this._panOffset.add(Yi)}_panUp(e,t){this.screenSpacePanning===!0?Yi.setFromMatrixColumn(t,1):(Yi.setFromMatrixColumn(t,0),Yi.crossVectors(this.object.up,Yi)),Yi.multiplyScalar(e),this._panOffset.add(Yi)}_pan(e,t){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;Yi.copy(r).sub(this.target);let o=Yi.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/i.clientHeight,this.object.matrix),this._panUp(2*t*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=e-i.left,o=t-i.top,s=i.width,a=i.height;this._mouse.x=r/s*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(ho*this._rotateDelta.x/t.clientHeight),this._rotateUp(ho*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(ho*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-ho*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(ho*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-ho*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{let i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),o=.5*(e.pageY+i.y);this._rotateEnd.set(r,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(ho*this._rotateDelta.x/t.clientHeight),this._rotateUp(ho*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let s=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new We,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){let t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function Yae(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function Zae(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function Kae(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(nV),this.state=Hn.NONE;break;case 1:let e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function Jae(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Oc.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Hn.DOLLY;break;case Oc.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Hn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Hn.ROTATE}break;case Oc.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Hn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Hn.PAN}break;default:this.state=Hn.NONE}this.state!==Hn.NONE&&this.dispatchEvent(JA)}function Qae(n){switch(this.state){case Hn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Hn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Hn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function ele(n){this.enabled===!1||this.enableZoom===!1||this.state!==Hn.NONE||(n.preventDefault(),this.dispatchEvent(JA),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(nV))}function tle(n){this.enabled!==!1&&this._handleKeyDown(n)}function nle(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Nc.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Hn.TOUCH_ROTATE;break;case Nc.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Hn.TOUCH_PAN;break;default:this.state=Hn.NONE}break;case 2:switch(this.touches.TWO){case Nc.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Hn.TOUCH_DOLLY_PAN;break;case Nc.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Hn.TOUCH_DOLLY_ROTATE;break;default:this.state=Hn.NONE}break;default:this.state=Hn.NONE}this.state!==Hn.NONE&&this.dispatchEvent(JA)}function ile(n){switch(this._trackPointer(n),this.state){case Hn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Hn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Hn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Hn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Hn.NONE}}function rle(n){this.enabled!==!1&&n.preventDefault()}function ole(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function sle(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var ale=["overlay"],lle=["*"];function cle(n,e){n&1&&we(0,"div")}function ule(n,e){if(n&1&&(R(0,"div"),ke(1,cle,1,0,"div",6),P()),n&2){let t=_e(2);FN(t.spinner.class),ni("color",t.spinner.color),W(),ne("ngForOf",t.spinner.divArray)}}function dle(n,e){if(n&1&&(we(0,"div",7),Ea(1,"safeHtml")),n&2){let t=_e(2);ne("innerHTML",Ma(1,1,t.template),CO)}}function fle(n,e){if(n&1&&(R(0,"div",2,0),ke(2,ule,2,5,"div",3)(3,dle,2,3,"div",4),R(4,"div",5),qN(5),P()()),n&2){let t=_e();ni("background-color",t.spinner.bdColor)("z-index",t.spinner.zIndex)("position",t.spinner.fullScreen?"fixed":"absolute"),ne("@.disabled",t.disableAnimation)("@fadeIn","in"),W(2),ne("ngIf",!t.template),W(),ne("ngIf",t.template),W(),ni("z-index",t.spinner.zIndex)}}var hle={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},QA={BD_COLOR:"rgba(51,51,51,0.8)",SPINNER_COLOR:"#fff",Z_INDEX:99999},eI="primary",ad=class n{constructor(e){Object.assign(this,e)}static create(e){return!e?.template&&!e?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new n(e)}},tI=(()=>{class n{constructor(){this.spinnerObservable=new ti(null)}getSpinner(t){return this.spinnerObservable.asObservable().pipe(Gn(i=>i&&i.name===t))}show(t=eI,i){return new Promise((r,o)=>{setTimeout(()=>{i&&Object.keys(i).length?(i.name=t,this.spinnerObservable.next(new ad(wt(Oe({},i),{show:!0}))),r(!0)):(this.spinnerObservable.next(new ad({name:t,show:!0})),r(!0))},10)})}hide(t=eI,i=10){return new Promise((r,o)=>{setTimeout(()=>{this.spinnerObservable.next(new ad({name:t,show:!1})),r(!0)},i)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iV=new Ie("NGX_SPINNER_CONFIG"),ple=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return t?this.sanitizer.bypassSecurityTrustHtml(t):""}static{this.\u0275fac=function(i){return new(i||n)(de(qC,16))}}static{this.\u0275pipe=of({name:"safeHtml",type:n,pure:!0})}}return n})(),rV=(()=>{class n{constructor(t,i,r,o){this.spinnerService=t,this.changeDetector=i,this.elementRef=r,this.globalConfig=o,this.disableAnimation=!1,this.spinner=new ad,this.ngUnsubscribe=new Fn,this.setDefaultOptions=()=>{let{type:s}=this.globalConfig??{};this.spinner=ad.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??s,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor=QA.BD_COLOR,this.zIndex=QA.Z_INDEX,this.color=QA.SPINNER_COLOR,this.size="large",this.fullScreen=!0,this.name=eI,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(Zo(this.ngUnsubscribe)).subscribe(t=>{this.setDefaultOptions(),Object.assign(this.spinner,t),t.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(t){return t===this.elementRef.nativeElement.parentElement?!0:t.parentNode&&this.isSpinnerZone(t.parentNode)}ngOnChanges(t){for(let i in t)if(i){let r=t[i];if(r.isFirstChange())return;typeof r.currentValue<"u"&&r.currentValue!==r.previousValue&&r.currentValue!==""&&(this.spinner[i]=r.currentValue,i==="showSpinner"&&(r.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),i==="name"&&this.initObservable())}}getClass(t,i){this.spinner.divCount=hle[t],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((o,s)=>s);let r="";switch(i.toLowerCase()){case"small":r="la-sm";break;case"medium":r="la-2x";break;case"large":r="la-3x";break;default:break}return"la-"+t+" "+r}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static{this.\u0275fac=function(i){return new(i||n)(de(tI),de(Qi),de(nn),de(iV,8))}}static{this.\u0275cmp=vn({type:n,selectors:[["ngx-spinner"]],viewQuery:function(i,r){if(i&1&&Ri(ale,5),i&2){let o;si(o=ai())&&(r.spinnerDOM=o.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[ar],ngContentSelectors:lle,decls:1,vars:1,consts:[["overlay",""],["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(i,r){i&1&&($N(),ke(0,fle,6,12,"div",1)),i&2&&ne("ngIf",r.spinner.show)},dependencies:[ple,Tn,wi],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[FT("fadeIn",[LT("in",mc({opacity:1})),g_(":enter",[mc({opacity:0}),m_(300)]),g_(":leave",m_(200,mc({opacity:0})))])]},changeDetection:0})}}return n})(),oV=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:iV,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Or({type:n})}static{this.\u0275inj=Dr({})}}return n})();function nI(n,e){if(e===CA)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===gh||e===bg){let t=n.getIndex();if(t===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);n.setIndex(s),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=t.count-2,r=[];if(e===gh)for(let s=1;s<=i;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Vw=class extends Uo{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new cI(t)}),this.register(function(t){return new uI(t)}),this.register(function(t){return new _I(t)}),this.register(function(t){return new xI(t)}),this.register(function(t){return new wI(t)}),this.register(function(t){return new fI(t)}),this.register(function(t){return new hI(t)}),this.register(function(t){return new pI(t)}),this.register(function(t){return new mI(t)}),this.register(function(t){return new lI(t)}),this.register(function(t){return new gI(t)}),this.register(function(t){return new dI(t)}),this.register(function(t){return new yI(t)}),this.register(function(t){return new vI(t)}),this.register(function(t){return new sI(t)}),this.register(function(t){return new bI(t)}),this.register(function(t){return new EI(t)})}load(e,t,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let u=na.extractUrlBase(e);s=na.resolveURL(u,this.path)}else s=na.extractUrlBase(e);this.manager.itemStart(e);let a=function(u){r?r(u):console.error(u),o.manager.itemError(e),o.manager.itemEnd(e)},l=new Ba(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{o.parse(u,s,function(f){t(f),o.manager.itemEnd(e)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let o,s={},a={},l=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===uV){try{s[hn.KHR_BINARY_GLTF]=new MI(e)}catch(h){r&&r(h);return}o=JSON.parse(s[hn.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new RI(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){let h=this.pluginCallbacks[f](u);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){let h=o.extensionsUsed[f],p=o.extensionsRequired||[];switch(h){case hn.KHR_MATERIALS_UNLIT:s[h]=new aI;break;case hn.KHR_DRACO_MESH_COMPRESSION:s[h]=new SI(o,this.dracoLoader);break;case hn.KHR_TEXTURE_TRANSFORM:s[h]=new CI;break;case hn.KHR_MESH_QUANTIZATION:s[h]=new TI;break;default:p.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(i,r)}parseAsync(e,t){let i=this;return new Promise(function(r,o){i.parse(e,t,r,o)})}};function gle(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var hn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},sI=class{constructor(e){this.parser=e,this.name=hn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){let o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let t=this.parser,i="light:"+e,r=t.cache.get(i);if(r)return r;let o=t.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],u,f=new ft(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],pr);let h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new Ju(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Pc(f),u.distance=h;break;case"spot":u=new Zu(f),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),Vl(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,o=i.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},aI=class{constructor(){this.name=hn.KHR_MATERIALS_UNLIT}getMaterialType(){return Fo}extendParams(e,t,i){let r=[];e.color=new ft(1,1,1),e.opacity=1;let o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],pr),e.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",o.baseColorTexture,_n))}return Promise.all(r)}},lI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}},cI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new We(a,a)}return Promise.all(o)}},uI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_DISPERSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},dI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},fI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_SHEEN}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];t.sheenColor=new ft(0,0,0),t.sheenRoughness=0,t.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],pr)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,_n)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},hI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},pI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_VOLUME}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return t.attenuationColor=new ft().setRGB(a[0],a[1],a[2],pr),Promise.all(o)}},mI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_IOR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},gI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_SPECULAR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return t.specularColor=new ft().setRGB(a[0],a[1],a[2],pr),s.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,_n)),Promise.all(o)}},vI=class{constructor(e){this.parser=e,this.name=hn.EXT_MATERIALS_BUMP}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(o)}},yI=class{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:uo}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},_I=class{constructor(e){this.parser=e,this.name=hn.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,s)}},xI=class{constructor(e){this.parser=e,this.name=hn.EXT_TEXTURE_WEBP}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return i.loadTextureImage(e,s.source,l)}},wI=class{constructor(e){this.parser=e,this.name=hn.EXT_TEXTURE_AVIF}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return i.loadTextureImage(e,s.source,l)}},bI=class{constructor(e){this.name=hn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let l=r.byteOffset||0,u=r.byteLength||0,f=r.count,h=r.byteStride,p=new Uint8Array(a,l,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,h,p,r.mode,r.filter).then(function(g){return g.buffer}):s.ready.then(function(){let g=new ArrayBuffer(f*h);return s.decodeGltfBuffer(new Uint8Array(g),f,h,p,r.mode,r.filter),g})})}else return null}},EI=class{constructor(e){this.name=hn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=t.meshes[i.mesh];for(let u of r.primitives)if(u.mode!==ys.TRIANGLES&&u.mode!==ys.TRIANGLE_STRIP&&u.mode!==ys.TRIANGLE_FAN&&u.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],l={};for(let u in s)a.push(this.parser.getDependency("accessor",s[u]).then(f=>(l[u]=f,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{let f=u.pop(),h=f.isGroup?f.children:[f],p=u[0].count,g=[];for(let v of h){let w=new ct,y=new B,_=new li,T=new B(1,1,1),E=new Xm(v.geometry,v.material,p);for(let M=0;M<p;M++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,M),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,M),l.SCALE&&T.fromBufferAttribute(l.SCALE,M),E.setMatrixAt(M,w.compose(y,_,T));for(let M in l)if(M==="_COLOR_0"){let V=l[M];E.instanceColor=new Ic(V.array,V.itemSize,V.normalized)}else M!=="TRANSLATION"&&M!=="ROTATION"&&M!=="SCALE"&&v.geometry.setAttribute(M,l[M]);ci.prototype.copy.call(E,v),this.parser.assignFinalMaterial(E),g.push(E)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}},uV="glTF",Cg=12,sV={JSON:1313821514,BIN:5130562},MI=class{constructor(e){this.name=hn.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,Cg),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==uV)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-Cg,o=new DataView(e,Cg),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let l=o.getUint32(s,!0);if(s+=4,l===sV.JSON){let u=new Uint8Array(e,Cg+s,a);this.content=i.decode(u)}else if(l===sV.BIN){let u=Cg+s;this.body=e.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},SI=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=hn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},l={},u={};for(let f in s){let h=II[f]||f.toLowerCase();a[h]=s[f]}for(let f in e.attributes){let h=II[f]||f.toLowerCase();if(s[f]!==void 0){let p=i.accessors[e.attributes[f]],g=wh[p.componentType];u[h]=g.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",o).then(function(f){return new Promise(function(h,p){r.decodeDracoFile(f,function(g){for(let v in g.attributes){let w=g.attributes[v],y=l[v];y!==void 0&&(w.normalized=y)}h(g)},a,u,pr,p)})})}},CI=class{constructor(){this.name=hn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},TI=class{constructor(){this.name=hn.KHR_MESH_QUANTIZATION}},Hw=class extends Nl{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)t[s]=i[o+s];return t}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,f=r-t,h=(i-t)/f,p=h*h,g=p*h,v=e*u,w=v-u,y=-2*g+3*p,_=g-p,T=1-y,E=_-p+h;for(let M=0;M!==a;M++){let V=s[w+M+a],F=s[w+M+l]*f,L=s[v+M+a],G=s[v+M]*f;o[M]=T*V+E*F+y*L+_*G}return o}},vle=new li,AI=class extends Hw{interpolate_(e,t,i,r){let o=super.interpolate_(e,t,i,r);return vle.fromArray(o).normalize().toArray(o),o}},ys={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},wh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},aV={9728:hr,9729:Ur,9984:Jx,9985:dh,9986:td,9987:ia},lV={33071:No,33648:Zf,10497:Qs},iI={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},II={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Lc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},yle={CUBICSPLINE:void 0,LINEAR:Hu,STEP:Vu},rI={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function _le(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new qu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Js})),n.DefaultMaterial}function ld(n,e,t){for(let i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Vl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function xle(n,e,t){let i=!1,r=!1,o=!1;for(let u=0,f=e.length;u<f;u++){let h=e[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],l=[];for(let u=0,f=e.length;u<f;u++){let h=e[u];if(i){let p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;s.push(p)}if(r){let p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(o){let p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(u){let f=u[0],h=u[1],p=u[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=h),o&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function wle(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ble(n){let e,t=n.extensions&&n.extensions[hn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+oI(t.attributes):e=n.indices+":"+oI(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+oI(n.targets[i]);return e}function oI(n){let e="",t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function DI(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ele(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var Mle=new ct,RI=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new gle,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new Yu(this.options.manager):this.textureLoader=new fg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ba(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return ld(o,a,r),Vl(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(let l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){let s=t[r].joints;for(let a=0,l=s.length;a<l;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){let s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let r=i.clone(),o=(s,a)=>{let l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(let[u,f]of s.children.entries())o(f,a.children[u])};return o(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let r=e(t[i]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let r=0;r<t.length;r++){let o=e(t[r]);o&&i.push(o)}return i}getDependency(e,t){let i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[hn.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(na.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){let r=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(e){let t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let s=iI[r.type],a=wh[r.componentType],l=r.normalized===!0,u=new a(r.count*s);return Promise.resolve(new Bi(u,s,l))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],l=iI[r.type],u=wh[r.componentType],f=u.BYTES_PER_ELEMENT,h=f*l,p=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0,w,y;if(g&&g!==h){let _=Math.floor(p/g),T="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count,E=t.cache.get(T);E||(w=new u(a,_*g,r.count*g/f),E=new ih(w,g/f),t.cache.add(T,E)),y=new rh(E,l,p%g/f,v)}else a===null?w=new u(r.count*l):w=new u(a,p,r.count*l),y=new Bi(w,l,v);if(r.sparse!==void 0){let _=iI.SCALAR,T=wh[r.sparse.indices.componentType],E=r.sparse.indices.byteOffset||0,M=r.sparse.values.byteOffset||0,V=new T(s[1],E,r.sparse.count*_),F=new u(s[2],M,r.sparse.count*l);a!==null&&(y=new Bi(y.array.slice(),y.itemSize,y.normalized)),y.normalized=!1;for(let L=0,G=V.length;L<G;L++){let O=V[L];if(y.setX(O,F[L*l]),l>=2&&y.setY(O,F[L*l+1]),l>=3&&y.setZ(O,F[L*l+2]),l>=4&&y.setW(O,F[L*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}y.normalized=v}return y})}loadTexture(e){let t=this.json,i=this.options,o=t.textures[e].source,s=t.images[o],a=this.textureLoader;if(s.uri){let l=i.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,i){let r=this,o=this.json,s=o.textures[e],a=o.images[t],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=s.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);let p=(o.samplers||{})[s.sampler]||{};return f.magFilter=aV[p.magFilter]||Ur,f.minFilter=aV[p.minFilter]||ia,f.wrapS=lV[p.wrapS]||Qs,f.wrapT=lV[p.wrapT]||Qs,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==hr&&f.minFilter!==Ur,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){let i=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());let s=r.images[e],a=self.URL||self.webkitURL,l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=i.getDependency("bufferView",s.bufferView).then(function(h){u=!0;let p=new Blob([h],{type:s.mimeType});return l=a.createObjectURL(p),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let f=Promise.resolve(l).then(function(h){return new Promise(function(p,g){let v=p;t.isImageBitmapLoader===!0&&(v=function(w){let y=new zr(w);y.needsUpdate=!0,p(y)}),t.load(na.resolveURL(h,o.path),v,void 0,g)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),Vl(h,s),h.userData.mimeType=s.mimeType||Ele(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[hn.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[hn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let l=o.associations.get(s);s=o.extensions[hn.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return r!==void 0&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){let t=e.geometry,i=e.material,r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new ta,$i.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){let a="LineBasicMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new hs,$i.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return qu}loadMaterial(e){let t=this,i=this.json,r=this.extensions,o=i.materials[e],s,a={},l=o.extensions||{},u=[];if(l[hn.KHR_MATERIALS_UNLIT]){let h=r[hn.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),u.push(h.extendParams(a,o,t))}else{let h=o.pbrMetallicRoughness||{};if(a.color=new ft(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){let p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],pr),a.opacity=p[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,_n)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=gs);let f=o.alphaMode||rI.OPAQUE;if(f===rI.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===rI.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Fo&&(u.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new We(1,1),o.normalTexture.scale!==void 0)){let h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==Fo&&(u.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Fo){let h=o.emissiveFactor;a.emissive=new ft().setRGB(h[0],h[1],h[2],pr)}return o.emissiveTexture!==void 0&&s!==Fo&&u.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,_n)),Promise.all(u).then(function(){let h=new s(a);return o.name&&(h.name=o.name),Vl(h,o),t.associations.set(h,{materials:e}),o.extensions&&ld(r,h,o),h})}createUniqueName(e){let t=Bn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[hn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return cV(l,a,t)})}let s=[];for(let a=0,l=e.length;a<l;a++){let u=e[a],f=ble(u),h=r[f];if(h)s.push(h.promise);else{let p;u.extensions&&u.extensions[hn.KHR_DRACO_MESH_COMPRESSION]?p=o(u):p=cV(new Pi,u,t),r[f]={primitive:u,promise:p},s.push(p)}}return Promise.all(s)}loadMesh(e){let t=this,i=this.json,r=this.extensions,o=i.meshes[e],s=o.primitives,a=[];for(let l=0,u=s.length;l<u;l++){let f=s[l].material===void 0?_le(this.cache):this.getDependency("material",s[l].material);a.push(f)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(l){let u=l.slice(0,l.length-1),f=l[l.length-1],h=[];for(let g=0,v=f.length;g<v;g++){let w=f[g],y=s[g],_,T=u[g];if(y.mode===ys.TRIANGLES||y.mode===ys.TRIANGLE_STRIP||y.mode===ys.TRIANGLE_FAN||y.mode===void 0)_=o.isSkinnedMesh===!0?new Gu(w,T):new ui(w,T),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),y.mode===ys.TRIANGLE_STRIP?_.geometry=nI(_.geometry,bg):y.mode===ys.TRIANGLE_FAN&&(_.geometry=nI(_.geometry,gh));else if(y.mode===ys.LINES)_=new Dc(w,T);else if(y.mode===ys.LINE_STRIP)_=new Pl(w,T);else if(y.mode===ys.LINE_LOOP)_=new Ym(w,T);else if(y.mode===ys.POINTS)_=new Ol(w,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(_.geometry.morphAttributes).length>0&&wle(_,o),_.name=t.createUniqueName(o.name||"mesh_"+e),Vl(_,o),y.extensions&&ld(r,_,y),t.assignFinalMaterial(_),h.push(_)}for(let g=0,v=h.length;g<v;g++)t.associations.set(h[g],{meshes:e,primitives:g});if(h.length===1)return o.extensions&&ld(r,h[0],o),h[0];let p=new Mr;o.extensions&&ld(r,p,o),t.associations.set(p,{meshes:e});for(let g=0,v=h.length;g<v;g++)p.add(h[g]);return p})}loadCamera(e){let t,i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Ei(qn.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Ku(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Vl(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let r=0,o=t.joints.length;r<o;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],l=[];for(let u=0,f=s.length;u<f;u++){let h=s[u];if(h){a.push(h);let p=new ct;o!==null&&p.fromArray(o.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Wu(a,l)})}loadAnimation(e){let t=this.json,i=this,r=t.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],l=[],u=[],f=[];for(let h=0,p=r.channels.length;h<p;h++){let g=r.channels[h],v=r.samplers[g.sampler],w=g.target,y=w.node,_=r.parameters!==void 0?r.parameters[v.input]:v.input,T=r.parameters!==void 0?r.parameters[v.output]:v.output;w.node!==void 0&&(s.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",T)),u.push(v),f.push(w))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f)]).then(function(h){let p=h[0],g=h[1],v=h[2],w=h[3],y=h[4],_=[];for(let T=0,E=p.length;T<E;T++){let M=p[T],V=g[T],F=v[T],L=w[T],G=y[T];if(M===void 0)continue;M.updateMatrix&&M.updateMatrix();let O=i._createAnimationTracks(M,V,F,L,G);if(O)for(let I=0;I<O.length;I++)_.push(O[I])}return new Xu(o,void 0,_)})}createNodeMesh(e){let t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(e){let t=this.json,i=this,r=t.nodes[e],o=i._loadNodeShallow(e),s=[],a=r.children||[];for(let u=0,f=a.length;u<f;u++)s.push(i.getDependency("node",a[u]));let l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),l]).then(function(u){let f=u[0],h=u[1],p=u[2];p!==null&&f.traverse(function(g){g.isSkinnedMesh&&g.bind(p,Mle)});for(let g=0,v=h.length;g<v;g++)f.add(h[g]);return f})}_loadNodeShallow(e){let t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=t.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(u){return r._getNodeRef(r.cameraCache,o.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let f;if(o.isBone===!0?f=new Rl:u.length>1?f=new Mr:u.length===1?f=u[0]:f=new ci,f!==u[0])for(let h=0,p=u.length;h<p;h++)f.add(u[h]);if(o.name&&(f.userData.name=o.name,f.name=s),Vl(f,o),o.extensions&&ld(i,f,o),o.matrix!==void 0){let h=new ct;h.fromArray(o.matrix),f.applyMatrix4(h)}else o.translation!==void 0&&f.position.fromArray(o.translation),o.rotation!==void 0&&f.quaternion.fromArray(o.rotation),o.scale!==void 0&&f.scale.fromArray(o.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],r=this,o=new Mr;i.name&&(o.name=r.createUniqueName(i.name)),Vl(o,i),i.extensions&&ld(t,o,i);let s=i.nodes||[],a=[];for(let l=0,u=s.length;l<u;l++)a.push(r.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let f=0,h=l.length;f<h;f++)o.add(l[f]);let u=f=>{let h=new Map;for(let[p,g]of r.associations)(p instanceof $i||p instanceof zr)&&h.set(p,g);return f.traverse(p=>{let g=r.associations.get(p);g!=null&&h.set(p,g)}),h};return r.associations=u(o),o})}_createAnimationTracks(e,t,i,r,o){let s=[],a=e.name?e.name:e.uuid,l=[];Lc[o.path]===Lc.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let u;switch(Lc[o.path]){case Lc.weights:u=ps;break;case Lc.rotation:u=Lo;break;case Lc.translation:case Lc.scale:u=ms;break;default:switch(i.itemSize){case 1:u=ps;break;case 2:case 3:default:u=ms;break}break}let f=r.interpolation!==void 0?yle[r.interpolation]:Hu,h=this._getArrayFromAccessor(i);for(let p=0,g=l.length;p<g;p++){let v=new u(l[p]+"."+Lc[o.path],t.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),s.push(v)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let i=DI(t.constructor),r=new Float32Array(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=t[o]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){let r=this instanceof Lo?AI:Hw;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function Sle(n,e,t){let i=e.attributes,r=new Br;if(i.POSITION!==void 0){let a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new B(l[0],l[1],l[2]),new B(u[0],u[1],u[2])),a.normalized){let f=DI(wh[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let a=new B,l=new B;for(let u=0,f=o.length;u<f;u++){let h=o[u];if(h.POSITION!==void 0){let p=t.json.accessors[h.POSITION],g=p.min,v=p.max;if(g!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),p.normalized){let w=DI(wh[p.componentType]);l.multiplyScalar(w)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new co;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function cV(n,e,t){let i=e.attributes,r=[];function o(s,a){return t.getDependency("accessor",s).then(function(l){n.setAttribute(a,l)})}for(let s in i){let a=II[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(e.indices!==void 0&&!n.index){let s=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return Bt.workingColorSpace!==pr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Bt.workingColorSpace}" not supported.`),Vl(n,e),Sle(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?xle(n,e.targets,t):n})}function dV(n,e){let t=new Vw(e);return new Promise((i,r)=>{t.load(n,o=>{i(o.scene)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var _s=Uint8Array,bh=Uint16Array,Cle=Int32Array,fV=new _s([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hV=new _s([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tle=new _s([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pV=function(n,e){for(var t=new bh(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Cle(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},mV=pV(fV,2),gV=mV.b,Ale=mV.r;gV[28]=258,Ale[258]=28;var vV=pV(hV,0),Ile=vV.b,Z1e=vV.r,NI=new bh(32768);for(In=0;In<32768;++In)Hl=(In&43690)>>1|(In&21845)<<1,Hl=(Hl&52428)>>2|(Hl&13107)<<2,Hl=(Hl&61680)>>4|(Hl&3855)<<4,NI[In]=((Hl&65280)>>8|(Hl&255)<<8)>>1;var Hl,In,Tg=function(n,e,t){for(var i=n.length,r=0,o=new bh(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new bh(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new bh(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],f=e-n[r],h=s[n[r]-1]++<<f,p=h|(1<<f)-1;h<=p;++h)a[NI[h]>>l]=u}else for(a=new bh(i),r=0;r<i;++r)n[r]&&(a[r]=NI[s[n[r]-1]++]>>15-n[r]);return a},Ag=new _s(288);for(In=0;In<144;++In)Ag[In]=8;var In;for(In=144;In<256;++In)Ag[In]=9;var In;for(In=256;In<280;++In)Ag[In]=7;var In;for(In=280;In<288;++In)Ag[In]=8;var In,yV=new _s(32);for(In=0;In<32;++In)yV[In]=5;var In;var Dle=Tg(Ag,9,1);var Rle=Tg(yV,5,1),PI=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},oa=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},OI=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Ple=function(n){return(n+7)/8|0},Ole=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new _s(n.subarray(e,t))};var Nle=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],sa=function(n,e,t){var i=new Error(e||Nle[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,sa),!t)throw i;return i},Fle=function(n,e,t,i){var r=n.length,o=i?i.length:0;if(!r||e.f&&!e.l)return t||new _s(0);var s=!t,a=s||e.i!=2,l=e.i;s&&(t=new _s(r*3));var u=function(rt){var pt=t.length;if(rt>pt){var ut=new _s(Math.max(pt*2,rt));ut.set(t),t=ut}},f=e.f||0,h=e.p||0,p=e.b||0,g=e.l,v=e.d,w=e.m,y=e.n,_=r*8;do{if(!g){f=oa(n,h,1);var T=oa(n,h+1,3);if(h+=3,T)if(T==1)g=Dle,v=Rle,w=9,y=5;else if(T==2){var F=oa(n,h,31)+257,L=oa(n,h+10,15)+4,G=F+oa(n,h+5,31)+1;h+=14;for(var O=new _s(G),I=new _s(19),z=0;z<L;++z)I[Tle[z]]=oa(n,h+z*3,7);h+=L*3;for(var he=PI(I),ae=(1<<he)-1,Te=Tg(I,he,1),z=0;z<G;){var be=Te[oa(n,h,ae)];h+=be&15;var E=be>>4;if(E<16)O[z++]=E;else{var q=0,ie=0;for(E==16?(ie=3+oa(n,h,3),h+=2,q=O[z-1]):E==17?(ie=3+oa(n,h,7),h+=3):E==18&&(ie=11+oa(n,h,127),h+=7);ie--;)O[z++]=q}}var $=O.subarray(0,F),ge=O.subarray(F);w=PI($),y=PI(ge),g=Tg($,w,1),v=Tg(ge,y,1)}else sa(1);else{var E=Ple(h)+4,M=n[E-4]|n[E-3]<<8,V=E+M;if(V>r){l&&sa(0);break}a&&u(p+M),t.set(n.subarray(E,V),p),e.b=p+=M,e.p=h=V*8,e.f=f;continue}if(h>_){l&&sa(0);break}}a&&u(p+131072);for(var Ue=(1<<w)-1,tt=(1<<y)-1,me=h;;me=h){var q=g[OI(n,h)&Ue],re=q>>4;if(h+=q&15,h>_){l&&sa(0);break}if(q||sa(2),re<256)t[p++]=re;else if(re==256){me=h,g=null;break}else{var U=re-254;if(re>264){var z=re-257,Z=fV[z];U=oa(n,h,(1<<Z)-1)+gV[z],h+=Z}var ve=v[OI(n,h)&tt],se=ve>>4;ve||sa(3),h+=ve&15;var ge=Ile[se];if(se>3){var Z=hV[se];ge+=OI(n,h)&(1<<Z)-1,h+=Z}if(h>_){l&&sa(0);break}a&&u(p+131072);var He=p+U;if(p<ge){var je=o-ge,Fe=Math.min(ge,He);for(je+p<0&&sa(3);p<Fe;++p)t[p]=i[je+p]}for(;p<He;++p)t[p]=t[p-ge]}}e.l=g,e.p=me,e.b=p,e.f=f,g&&(f=1,e.m=w,e.d=v,e.n=y)}while(!f);return p!=t.length&&s?Ole(t,0,p):t.subarray(0,p)};var Lle=new _s(0);var kle=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&sa(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&sa(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function _V(n,e){return Fle(n.subarray(kle(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var Ule=typeof TextDecoder<"u"&&new TextDecoder,Ble=0;try{Ule.decode(Lle,{stream:!0}),Ble=1}catch{}function xV(n,e,t){let i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,o=i,s=Math.floor((r+o)/2);for(;e<t[s]||e>=t[s+1];)e<t[s]?o=s:r=s,s=Math.floor((r+o)/2);return s}function Hle(n,e,t,i){let r=[],o=[],s=[];r[0]=1;for(let a=1;a<=t;++a){o[a]=e-i[n+1-a],s[a]=i[n+a]-e;let l=0;for(let u=0;u<a;++u){let f=s[u+1],h=o[a-u],p=r[u]/(f+h);r[u]=l+f*p,l=h*p}r[a]=l}return r}function wV(n,e,t,i){let r=xV(n,i,e),o=Hle(r,i,n,e),s=new rn(0,0,0,0);for(let a=0;a<=n;++a){let l=t[r-n+a],u=o[a],f=l.w*u;s.x+=l.x*f,s.y+=l.y*f,s.z+=l.z*f,s.w+=l.w*u}return s}function zle(n,e,t,i,r){let o=[];for(let h=0;h<=t;++h)o[h]=0;let s=[];for(let h=0;h<=i;++h)s[h]=o.slice(0);let a=[];for(let h=0;h<=t;++h)a[h]=o.slice(0);a[0][0]=1;let l=o.slice(0),u=o.slice(0);for(let h=1;h<=t;++h){l[h]=e-r[n+1-h],u[h]=r[n+h]-e;let p=0;for(let g=0;g<h;++g){let v=u[g+1],w=l[h-g];a[h][g]=v+w;let y=a[g][h-1]/a[h][g];a[g][h]=p+v*y,p=w*y}a[h][h]=p}for(let h=0;h<=t;++h)s[0][h]=a[h][t];for(let h=0;h<=t;++h){let p=0,g=1,v=[];for(let w=0;w<=t;++w)v[w]=o.slice(0);v[0][0]=1;for(let w=1;w<=i;++w){let y=0,_=h-w,T=t-w;h>=w&&(v[g][0]=v[p][0]/a[T+1][_],y=v[g][0]*a[_][T]);let E=_>=-1?1:-_,M=h-1<=T?w-1:t-h;for(let F=E;F<=M;++F)v[g][F]=(v[p][F]-v[p][F-1])/a[T+1][_+F],y+=v[g][F]*a[_+F][T];h<=T&&(v[g][w]=-v[p][w-1]/a[T+1][h],y+=v[g][w]*a[h][T]),s[w][h]=y;let V=p;p=g,g=V}}let f=t;for(let h=1;h<=i;++h){for(let p=0;p<=t;++p)s[h][p]*=f;f*=t-h}return s}function jle(n,e,t,i,r){let o=r<n?r:n,s=[],a=xV(n,i,e),l=zle(a,i,n,o,e),u=[];for(let f=0;f<t.length;++f){let h=t[f].clone(),p=h.w;h.x*=p,h.y*=p,h.z*=p,u[f]=h}for(let f=0;f<=o;++f){let h=u[a-n].clone().multiplyScalar(l[f][0]);for(let p=1;p<=n;++p)h.add(u[a-n+p].clone().multiplyScalar(l[f][p]));s[f]=h}for(let f=o+1;f<=r+1;++f)s[f]=new rn(0,0,0);return s}function Gle(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function Wle(n){let e=n.length,t=[],i=[];for(let o=0;o<e;++o){let s=n[o];t[o]=new B(s.x,s.y,s.z),i[o]=s.w}let r=[];for(let o=0;o<e;++o){let s=t[o].clone();for(let a=1;a<=o;++a)s.sub(r[o-a].clone().multiplyScalar(Gle(o,a)*i[a]));r[o]=s.divideScalar(i[0])}return r}function bV(n,e,t,i,r){let o=jle(n,e,t,i,r);return Wle(o)}var zw=class extends Vr{constructor(e,t,i,r,o){super();let s=t?t.length-1:0,a=i?i.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=o||s;for(let l=0;l<a;++l){let u=i[l];this.controlPoints[l]=new rn(u.x,u.y,u.z,u.w)}}getPoint(e,t=new B){let i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=wV(this.degree,this.knots,this.controlPoints,r);return o.w!==1&&o.divideScalar(o.w),i.set(o.x,o.y,o.z)}getTangent(e,t=new B){let i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=bV(this.degree,this.knots,this.controlPoints,r,1);return i.copy(o[1]).normalize(),i}toJSON(){let e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(t=>t.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(t=>new rn(t[0],t[1],t[2],t[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}};var cn,Oi,jr,Gw=class extends Uo{constructor(e){super(e)}load(e,t,i,r){let o=this,s=o.path===""?na.extractUrlBase(e):o.path,a=new Ba(this.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(l){try{t(o.parse(l,s))}catch(u){r?r(u):console.error(u),o.manager.itemError(e)}},i,r)}parse(e,t){if(qle(e))cn=new HI().parse(e);else{let r=SV(e);if(!Xle(r))throw new Error("THREE.FBXLoader: Unknown format.");if(EV(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+EV(r));cn=new VI().parse(r)}let i=new Yu(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new kI(i,this.manager).parse(cn)}},kI=class{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Oi=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),o=new UI().parse(r);return this.parseScene(r,o,i),jr}parseConnections(){let e=new Map;return"Connections"in cn&&cn.Connections.connections.forEach(function(i){let r=i[0],o=i[1],s=i[2];e.has(r)||e.set(r,{parents:[],children:[]});let a={ID:o,relationship:s};e.get(r).parents.push(a),e.has(o)||e.set(o,{parents:[],children:[]});let l={ID:r,relationship:s};e.get(o).children.push(l)}),e}parseImages(){let e={},t={};if("Video"in cn.Objects){let i=cn.Objects.Video;for(let r in i){let o=i[r],s=parseInt(r);if(e[s]=o.RelativeFilename||o.Filename,"Content"in o){let a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,l=typeof o.Content=="string"&&o.Content!=="";if(a||l){let u=this.parseImage(i[r]);t[o.RelativeFilename||o.Filename]=u}}}}for(let i in e){let r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){let t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase(),o;switch(r){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+o+";base64,"+t;{let s=new Uint8Array(t);return window.URL.createObjectURL(new Blob([s],{type:o}))}}parseTextures(e){let t=new Map;if("Texture"in cn.Objects){let i=cn.Objects.Texture;for(let r in i){let o=this.parseTexture(i[r],e);t.set(parseInt(r),o)}}return t}parseTexture(e,t){let i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;let r=e.WrapModeU,o=e.WrapModeV,s=r!==void 0?r.value:0,a=o!==void 0?o.value:0;if(i.wrapS=s===0?Qs:No,i.wrapT=a===0?Qs:No,"Scaling"in e){let l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){let l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){let i=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),r=e.FileName.split(".").pop().toLowerCase(),o=i.has(r)?this.manager.getHandler(`.${r}`):this.textureLoader;if(!o)return console.warn(`FBXLoader: ${r.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new zr;let s=o.path;s||o.setPath(this.textureLoader.path);let a=Oi.get(e.id).children,l;a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(l=t[a[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&o.setPath(void 0));let u=o.load(l);return o.setPath(s),u}parseMaterials(e){let t=new Map;if("Material"in cn.Objects){let i=cn.Objects.Material;for(let r in i){let o=this.parseMaterial(i[r],e);o!==null&&t.set(parseInt(r),o)}}return t}parseMaterial(e,t){let i=e.id,r=e.attrName,o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!Oi.has(i))return null;let s=this.parseParameters(e,t,i),a;switch(o.toLowerCase()){case"phong":a=new Ua;break;case"lambert":a=new ag;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),a=new Ua;break}return a.setValues(s),a.name=r,a}parseParameters(e,t,i){let r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=Bt.toWorkingColorSpace(new ft().fromArray(e.Diffuse.value),_n):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=Bt.toWorkingColorSpace(new ft().fromArray(e.DiffuseColor.value),_n)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=Bt.toWorkingColorSpace(new ft().fromArray(e.Emissive.value),_n):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=Bt.toWorkingColorSpace(new ft().fromArray(e.EmissiveColor.value),_n)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),r.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),(r.opacity===1||r.opacity===0)&&(r.opacity=e.Opacity?parseFloat(e.Opacity.value):null,r.opacity===null&&(r.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=Bt.toWorkingColorSpace(new ft().fromArray(e.Specular.value),_n):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=Bt.toWorkingColorSpace(new ft().fromArray(e.SpecularColor.value),_n));let o=this;return Oi.get(i).children.forEach(function(s){let a=s.relationship;switch(a){case"Bump":r.bumpMap=o.getTexture(t,s.ID);break;case"Maya|TEX_ao_map":r.aoMap=o.getTexture(t,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=o.getTexture(t,s.ID),r.map!==void 0&&(r.map.colorSpace=_n);break;case"DisplacementColor":r.displacementMap=o.getTexture(t,s.ID);break;case"EmissiveColor":r.emissiveMap=o.getTexture(t,s.ID),r.emissiveMap!==void 0&&(r.emissiveMap.colorSpace=_n);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=o.getTexture(t,s.ID);break;case"ReflectionColor":r.envMap=o.getTexture(t,s.ID),r.envMap!==void 0&&(r.envMap.mapping=uh,r.envMap.colorSpace=_n);break;case"SpecularColor":r.specularMap=o.getTexture(t,s.ID),r.specularMap!==void 0&&(r.specularMap.colorSpace=_n);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=o.getTexture(t,s.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in cn.Objects&&t in cn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Oi.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in cn.Objects){let i=cn.Objects.Deformer;for(let r in i){let o=i[r],s=Oi.get(parseInt(r));if(o.attrType==="Skin"){let a=this.parseSkeleton(s,i);a.ID=r,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=s.parents[0].ID,e[r]=a}else if(o.attrType==="BlendShape"){let a={id:r};a.rawTargets=this.parseMorphTargets(s,i),a.id=r,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let i=[];return e.children.forEach(function(r){let o=t[r.ID];if(o.attrType!=="Cluster")return;let s={ID:r.ID,indices:[],weights:[],transformLink:new ct().fromArray(o.TransformLink.a)};"Indexes"in o&&(s.indices=o.Indexes.a,s.weights=o.Weights.a),i.push(s)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){let i=[];for(let r=0;r<e.children.length;r++){let o=e.children[r],s=t[o.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;a.geoID=Oi.get(parseInt(o.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){jr=new Mr;let r=this.parseModels(e.skeletons,t,i),o=cn.Objects.Model,s=this;r.forEach(function(l){let u=o[l.ID];s.setLookAtProperties(l,u),Oi.get(l.ID).parents.forEach(function(h){let p=r.get(h.ID);p!==void 0&&p.add(l)}),l.parent===null&&jr.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.addGlobalSceneSettings(),jr.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);let u=MV(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});let a=new BI().parse();jr.children.length===1&&jr.children[0].isGroup&&(jr.children[0].animations=a,jr=jr.children[0]),jr.animations=a}parseModels(e,t,i){let r=new Map,o=cn.Objects.Model;for(let s in o){let a=parseInt(s),l=o[s],u=Oi.get(a),f=this.buildSkeleton(u,e,a,l.attrName);if(!f){switch(l.attrType){case"Camera":f=this.createCamera(u);break;case"Light":f=this.createLight(u);break;case"Mesh":f=this.createMesh(u,t,i);break;case"NurbsCurve":f=this.createCurve(u,t);break;case"LimbNode":case"Root":f=new Rl;break;case"Null":default:f=new Mr;break}f.name=l.attrName?Bn.sanitizeNodeName(l.attrName):"",f.userData.originalName=l.attrName,f.ID=a}this.getTransformData(f,l),r.set(a,f)}return r}buildSkeleton(e,t,i,r){let o=null;return e.parents.forEach(function(s){for(let a in t){let l=t[a];l.rawBones.forEach(function(u,f){if(u.ID===s.ID){let h=o;o=new Rl,o.matrixWorld.copy(u.transformLink),o.name=r?Bn.sanitizeNodeName(r):"",o.userData.originalName=r,o.ID=i,l.bones[f]=o,h!==null&&o.add(h)}})}}),o}createCamera(e){let t,i;if(e.children.forEach(function(r){let o=cn.Objects.NodeAttribute[r.ID];o!==void 0&&(i=o)}),i===void 0)t=new ci;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let o=1;i.NearPlane!==void 0&&(o=i.NearPlane.value/1e3);let s=1e3;i.FarPlane!==void 0&&(s=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);let u=a/l,f=45;i.FieldOfView!==void 0&&(f=i.FieldOfView.value);let h=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new Ei(f,u,o,s),h!==null&&t.setFocalLength(h);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new ci;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new ci;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){let o=cn.Objects.NodeAttribute[r.ID];o!==void 0&&(i=o)}),i===void 0)t=new ci;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let o=16777215;i.Color!==void 0&&(o=Bt.toWorkingColorSpace(new ft().fromArray(i.Color.value),_n));let s=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(s=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);let l=1;switch(r){case 0:t=new Pc(o,s,a,l);break;case 1:t=new Ju(o,s);break;case 2:let u=Math.PI/3;i.InnerAngle!==void 0&&(u=qn.degToRad(i.InnerAngle.value));let f=0;i.OuterAngle!==void 0&&(f=qn.degToRad(i.OuterAngle.value),f=Math.max(f,1)),t=new Zu(o,s,a,u,f,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Pc(o,s);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,o=null,s=null,a=[];if(e.children.forEach(function(l){t.has(l.ID)&&(o=t.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?s=a:a.length>0?s=a[0]:(s=new Ua({name:Uo.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(s)),"color"in o.attributes&&a.forEach(function(l){l.vertexColors=!0}),o.groups.length>0){let l=!1;for(let u=0,f=o.groups.length;u<f;u++){let h=o.groups[u];(h.materialIndex<0||h.materialIndex>=a.length)&&(h.materialIndex=a.length,l=!0)}if(l){let u=new Ua;a.push(u)}}return o.FBX_Deformer?(r=new Gu(o,s),r.normalizeSkinWeights()):r=new ui(o,s),r}createCurve(e,t){let i=e.children.reduce(function(o,s){return t.has(s.ID)&&(o=t.get(s.ID)),o},null),r=new hs({name:Uo.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Pl(i,r)}getTransformData(e,t){let i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=Ig(t.RotationOrder.value):i.eulerOrder=Ig(0),"Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Oi.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){let o=cn.Objects.Model[r.ID];if("Lcl_Translation"in o){let s=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),jr.add(e.target)):e.lookAt(new B().fromArray(s))}}})}bindSkeleton(e,t,i){let r=this.parsePoseNodes();for(let o in e){let s=e[o];Oi.get(parseInt(s.ID)).parents.forEach(function(l){if(t.has(l.ID)){let u=l.ID;Oi.get(u).parents.forEach(function(h){i.has(h.ID)&&i.get(h.ID).bind(new Wu(s.bones),r[h.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in cn.Objects){let t=cn.Objects.Pose;for(let i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){let r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(o){e[o.Node]=new ct().fromArray(o.Matrix.a)}):e[r.Node]=new ct().fromArray(r.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in cn){if("AmbientColor"in cn.GlobalSettings){let e=cn.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){let o=new ft().setRGB(t,i,r,_n);jr.add(new dg(o,1))}}"UnitScaleFactor"in cn.GlobalSettings&&(jr.userData.unitScaleFactor=cn.GlobalSettings.UnitScaleFactor.value)}}},UI=class{constructor(){this.negativeMaterialIndices=!1}parse(e){let t=new Map;if("Geometry"in cn.Objects){let i=cn.Objects.Geometry;for(let r in i){let o=Oi.get(parseInt(r)),s=this.parseGeometry(o,i[r],e);t.set(parseInt(r),s)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){let r=i.skeletons,o=[],s=e.parents.map(function(h){return cn.Objects.Model[h.ID]});if(s.length===0)return;let a=e.children.reduce(function(h,p){return r[p.ID]!==void 0&&(h=r[p.ID]),h},null);e.children.forEach(function(h){i.morphTargets[h.ID]!==void 0&&o.push(i.morphTargets[h.ID])});let l=s[0],u={};"RotationOrder"in l&&(u.eulerOrder=Ig(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);let f=MV(u);return this.genGeometry(t,a,o,f)}genGeometry(e,t,i,r){let o=new Pi;e.attrName&&(o.name=e.attrName);let s=this.parseGeoNode(e,t),a=this.genBuffers(s),l=new On(a.vertex,3);if(l.applyMatrix4(r),o.setAttribute("position",l),a.colors.length>0&&o.setAttribute("color",new On(a.colors,3)),t&&(o.setAttribute("skinIndex",new ju(a.weightsIndices,4)),o.setAttribute("skinWeight",new On(a.vertexWeights,4)),o.FBX_Deformer=t),a.normal.length>0){let u=new Gt().getNormalMatrix(r),f=new On(a.normal,3);f.applyNormalMatrix(u),o.setAttribute("normal",f)}if(a.uvs.forEach(function(u,f){let h=f===0?"uv":`uv${f}`;o.setAttribute(h,new On(a.uvs[f],2))}),s.material&&s.material.mappingType!=="AllSame"){let u=a.materialIndex[0],f=0;if(a.materialIndex.forEach(function(h,p){h!==u&&(o.addGroup(f,p-f,u),u=h,f=p)}),o.groups.length>0){let h=o.groups[o.groups.length-1],p=h.start+h.count;p!==a.materialIndex.length&&o.addGroup(p,a.materialIndex.length-p,u)}o.groups.length===0&&o.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(o,e,i,r),o}parseGeoNode(e,t){let i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,o){r.indices.forEach(function(s,a){i.weightTable[s]===void 0&&(i.weightTable[s]=[]),i.weightTable[s].push({id:o,weight:r.weights[a]})})})),i}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,r=0,o=!1,s=[],a=[],l=[],u=[],f=[],h=[],p=this;return e.vertexIndices.forEach(function(g,v){let w,y=!1;g<0&&(g=g^-1,y=!0);let _=[],T=[];if(s.push(g*3,g*3+1,g*3+2),e.color){let E=jw(v,i,g,e.color);l.push(E[0],E[1],E[2])}if(e.skeleton){if(e.weightTable[g]!==void 0&&e.weightTable[g].forEach(function(E){T.push(E.weight),_.push(E.id)}),T.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);let E=[0,0,0,0],M=[0,0,0,0];T.forEach(function(V,F){let L=V,G=_[F];M.forEach(function(O,I,z){if(L>O){z[I]=L,L=O;let he=E[I];E[I]=G,G=he}})}),_=E,T=M}for(;T.length<4;)T.push(0),_.push(0);for(let E=0;E<4;++E)f.push(T[E]),h.push(_[E])}if(e.normal){let E=jw(v,i,g,e.normal);a.push(E[0],E[1],E[2])}e.material&&e.material.mappingType!=="AllSame"&&(w=jw(v,i,g,e.material)[0],w<0&&(p.negativeMaterialIndices=!0,w=0)),e.uv&&e.uv.forEach(function(E,M){let V=jw(v,i,g,E);u[M]===void 0&&(u[M]=[]),u[M].push(V[0]),u[M].push(V[1])}),r++,y&&(p.genFace(t,e,s,w,a,l,u,f,h,r),i++,r=0,s=[],a=[],l=[],u=[],f=[],h=[])}),t}getNormalNewell(e){let t=new B(0,0,0);for(let i=0;i<e.length;i++){let r=e[i],o=e[(i+1)%e.length];t.x+=(r.y-o.y)*(r.z+o.z),t.y+=(r.z-o.z)*(r.x+o.x),t.z+=(r.x-o.x)*(r.y+o.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){let t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new B(0,1,0):new B(0,0,1)).cross(t).normalize(),o=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:o}}flattenVertex(e,t,i){return new We(e.dot(t),e.dot(i))}genFace(e,t,i,r,o,s,a,l,u,f){let h;if(f>3){let p=[],g=t.baseVertexPositions||t.vertexPositions;for(let _=0;_<i.length;_+=3)p.push(new B(g[i[_]],g[i[_+1]],g[i[_+2]]));let{tangent:v,bitangent:w}=this.getNormalTangentAndBitangent(p),y=[];for(let _ of p)y.push(this.flattenVertex(_,v,w));h=Tc.triangulateShape(y,[])}else h=[[0,1,2]];for(let[p,g,v]of h)e.vertex.push(t.vertexPositions[i[p*3]]),e.vertex.push(t.vertexPositions[i[p*3+1]]),e.vertex.push(t.vertexPositions[i[p*3+2]]),e.vertex.push(t.vertexPositions[i[g*3]]),e.vertex.push(t.vertexPositions[i[g*3+1]]),e.vertex.push(t.vertexPositions[i[g*3+2]]),e.vertex.push(t.vertexPositions[i[v*3]]),e.vertex.push(t.vertexPositions[i[v*3+1]]),e.vertex.push(t.vertexPositions[i[v*3+2]]),t.skeleton&&(e.vertexWeights.push(l[p*4]),e.vertexWeights.push(l[p*4+1]),e.vertexWeights.push(l[p*4+2]),e.vertexWeights.push(l[p*4+3]),e.vertexWeights.push(l[g*4]),e.vertexWeights.push(l[g*4+1]),e.vertexWeights.push(l[g*4+2]),e.vertexWeights.push(l[g*4+3]),e.vertexWeights.push(l[v*4]),e.vertexWeights.push(l[v*4+1]),e.vertexWeights.push(l[v*4+2]),e.vertexWeights.push(l[v*4+3]),e.weightsIndices.push(u[p*4]),e.weightsIndices.push(u[p*4+1]),e.weightsIndices.push(u[p*4+2]),e.weightsIndices.push(u[p*4+3]),e.weightsIndices.push(u[g*4]),e.weightsIndices.push(u[g*4+1]),e.weightsIndices.push(u[g*4+2]),e.weightsIndices.push(u[g*4+3]),e.weightsIndices.push(u[v*4]),e.weightsIndices.push(u[v*4+1]),e.weightsIndices.push(u[v*4+2]),e.weightsIndices.push(u[v*4+3])),t.color&&(e.colors.push(s[p*3]),e.colors.push(s[p*3+1]),e.colors.push(s[p*3+2]),e.colors.push(s[g*3]),e.colors.push(s[g*3+1]),e.colors.push(s[g*3+2]),e.colors.push(s[v*3]),e.colors.push(s[v*3+1]),e.colors.push(s[v*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(o[p*3]),e.normal.push(o[p*3+1]),e.normal.push(o[p*3+2]),e.normal.push(o[g*3]),e.normal.push(o[g*3+1]),e.normal.push(o[g*3+2]),e.normal.push(o[v*3]),e.normal.push(o[v*3+1]),e.normal.push(o[v*3+2])),t.uv&&t.uv.forEach(function(w,y){e.uvs[y]===void 0&&(e.uvs[y]=[]),e.uvs[y].push(a[y][p*2]),e.uvs[y].push(a[y][p*2+1]),e.uvs[y].push(a[y][g*2]),e.uvs[y].push(a[y][g*2+1]),e.uvs[y].push(a[y][v*2]),e.uvs[y].push(a[y][v*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let o=this;i.forEach(function(s){s.rawTargets.forEach(function(a){let l=cn.Objects.Geometry[a.geoID];l!==void 0&&o.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,i,r,o){let s=t.Vertices!==void 0?t.Vertices.a:[],a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=i.Vertices!==void 0?i.Vertices.a:[],u=i.Indexes!==void 0?i.Indexes.a:[],f=e.attributes.position.count*3,h=new Float32Array(f);for(let w=0;w<u.length;w++){let y=u[w]*3;h[y]=l[w*3],h[y+1]=l[w*3+1],h[y+2]=l[w*3+2]}let p={vertexIndices:a,vertexPositions:h,baseVertexPositions:s},g=this.genBuffers(p),v=new On(g.vertex,3);v.name=o||i.attrName,v.applyMatrix4(r),e.morphAttributes.position.push(v)}parseNormals(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a,o=[];return i==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:o,mappingType:t,referenceType:i}}parseUVs(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a,o=[];return i==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:r,indices:o,mappingType:t,referenceType:i}}parseVertexColors(e){let t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a,o=[];i==="IndexToDirect"&&(o=e.ColorIndex.a);for(let s=0,a=new ft;s<r.length;s+=4)a.fromArray(r,s),Bt.toWorkingColorSpace(a,_n),a.toArray(r,s);return{dataSize:4,buffer:r,indices:o,mappingType:t,referenceType:i}}parseMaterialIndices(e){let t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};let r=e.Materials.a,o=[];for(let s=0;s<r.length;++s)o.push(s);return{dataSize:1,buffer:r,indices:o,mappingType:t,referenceType:i}}parseNurbsGeometry(e){let t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Pi;let i=t-1,r=e.KnotVector.a,o=[],s=e.Points.a;for(let h=0,p=s.length;h<p;h+=4)o.push(new rn().fromArray(s,h));let a,l;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let h=0;h<i;++h)o.push(o[h])}let f=new zw(i,r,o,a,l).getPoints(o.length*12);return new Pi().setFromPoints(f)}},BI=class{parse(){let e=[],t=this.parseClips();if(t!==void 0)for(let i in t){let r=t[i],o=this.addClip(r);e.push(o)}return e}parseClips(){if(cn.Objects.AnimationCurve===void 0)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=cn.Objects.AnimationCurveNode,t=new Map;for(let i in e){let r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){let o={id:r.id,attr:r.attrName,curves:{}};t.set(o.id,o)}}return t}parseAnimationCurves(e){let t=cn.Objects.AnimationCurve;for(let i in t){let r={id:t[i].id,times:t[i].KeyTime.a.map(Yle),values:t[i].KeyValueFloat.a},o=Oi.get(r.id);if(o!==void 0){let s=o.parents[0].ID,a=o.parents[0].relationship;a.match(/X/)?e.get(s).curves.x=r:a.match(/Y/)?e.get(s).curves.y=r:a.match(/Z/)?e.get(s).curves.z=r:a.match(/DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=r)}}}parseAnimationLayers(e){let t=cn.Objects.AnimationLayer,i=new Map;for(let r in t){let o=[],s=Oi.get(parseInt(r));s!==void 0&&(s.children.forEach(function(l,u){if(e.has(l.ID)){let f=e.get(l.ID);if(f.curves.x!==void 0||f.curves.y!==void 0||f.curves.z!==void 0){if(o[u]===void 0){let h=Oi.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(h!==void 0){let p=cn.Objects.Model[h.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}let g={modelName:p.attrName?Bn.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};jr.traverse(function(v){v.ID===p.id&&(g.transform=v.matrix,v.userData.transformData&&(g.eulerOrder=v.userData.transformData.eulerOrder))}),g.transform||(g.transform=new ct),"PreRotation"in p&&(g.preRotation=p.PreRotation.value),"PostRotation"in p&&(g.postRotation=p.PostRotation.value),o[u]=g}}o[u]&&(o[u][f.attr]=f)}else if(f.curves.morph!==void 0){if(o[u]===void 0){let h=Oi.get(l.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID,p=Oi.get(h).parents[0].ID,g=Oi.get(p).parents[0].ID,v=Oi.get(g).parents[0].ID,w=cn.Objects.Model[v],y={modelName:w.attrName?Bn.sanitizeNodeName(w.attrName):"",morphName:cn.Objects.Deformer[h].attrName};o[u]=y}o[u][f.attr]=f}}}),i.set(parseInt(r),o))}return i}parseAnimStacks(e){let t=cn.Objects.AnimationStack,i={};for(let r in t){let o=Oi.get(parseInt(r)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=e.get(o[0].ID);i[r]={name:t[r].attrName,layer:s}}return i}addClip(e){let t=[],i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new Xu(e.name,-1,t)}generateTracks(e){let t=[],i=new B,r=new B;if(e.transform&&e.transform.decompose(i,new li,r),i=i.toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){let o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){let o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,r){let o=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(o,t,i);return new ms(e+"."+r,o,s)}generateRotationTrack(e,t,i,r,o){let s,a;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){let p=this.interpolateRotations(t.x,t.y,t.z,o);s=p[0],a=p[1]}let l=Ig(0);i!==void 0&&(i=i.map(qn.degToRad),i.push(l),i=new nr().fromArray(i),i=new li().setFromEuler(i)),r!==void 0&&(r=r.map(qn.degToRad),r.push(l),r=new nr().fromArray(r),r=new li().setFromEuler(r).invert());let u=new li,f=new nr,h=[];if(!a||!s)return new Lo(e+".quaternion",[0],[0]);for(let p=0;p<a.length;p+=3)f.set(a[p],a[p+1],a[p+2],o),u.setFromEuler(f),i!==void 0&&u.premultiply(i),r!==void 0&&u.multiply(r),p>2&&new li().fromArray(h,(p-3)/3*4).dot(u)<0&&u.set(-u.x,-u.y,-u.z,-u.w),u.toArray(h,p/3*4);return new Lo(e+".quaternion",s,h)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,i=t.values.map(function(o){return o/100}),r=jr.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ps(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let o=1;o<t.length;o++){let s=t[o];s!==r&&(t[i]=s,r=s,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){let r=i,o=[],s=-1,a=-1,l=-1;return e.forEach(function(u){if(t.x&&(s=t.x.times.indexOf(u)),t.y&&(a=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),s!==-1){let f=t.x.values[s];o.push(f),r[0]=f}else o.push(r[0]);if(a!==-1){let f=t.y.values[a];o.push(f),r[1]=f}else o.push(r[1]);if(l!==-1){let f=t.z.values[l];o.push(f),r[2]=f}else o.push(r[2])}),o}interpolateRotations(e,t,i,r){let o=[],s=[];o.push(e.times[0]),s.push(qn.degToRad(e.values[0])),s.push(qn.degToRad(t.values[0])),s.push(qn.degToRad(i.values[0]));for(let a=1;a<e.values.length;a++){let l=[e.values[a-1],t.values[a-1],i.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;let u=l.map(qn.degToRad),f=[e.values[a],t.values[a],i.values[a]];if(isNaN(f[0])||isNaN(f[1])||isNaN(f[2]))continue;let h=f.map(qn.degToRad),p=[f[0]-l[0],f[1]-l[1],f[2]-l[2]],g=[Math.abs(p[0]),Math.abs(p[1]),Math.abs(p[2])];if(g[0]>=180||g[1]>=180||g[2]>=180){let w=Math.max(...g)/180,y=new nr(...u,r),_=new nr(...h,r),T=new li().setFromEuler(y),E=new li().setFromEuler(_);T.dot(E)&&E.set(-E.x,-E.y,-E.z,-E.w);let M=e.times[a-1],V=e.times[a]-M,F=new li,L=new nr;for(let G=0;G<1;G+=1/w)F.copy(T.clone().slerp(E.clone(),G)),o.push(M+G*V),L.setFromQuaternion(F,r),s.push(L.x),s.push(L.y),s.push(L.z)}else o.push(e.times[a]),s.push(qn.degToRad(e.values[a])),s.push(qn.degToRad(t.values[a])),s.push(qn.degToRad(i.values[a]))}return[o,s]}},VI=class{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new $w,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,o){let s=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(s||a)return;let l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),f=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):u?t.parseNodeProperty(r,u,i[++o]):f?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){let i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:i},s=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,o):i in a?(i==="PoseNode"?a.PoseNode.push(o):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),s.id!==""&&(a[i][s.id]=o)):typeof s.id=="number"?(a[i]={},a[i][s.id]=o):i!=="Properties70"&&(i==="PoseNode"?a[i]=[o]:a[i]=o),typeof s.id=="number"&&(o.id=s.id),s.name!==""&&(o.attrName=s.name),s.type!==""&&(o.attrType=s.type),this.pushStack(o)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),o=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&o===","&&(o=i.replace(/"/g,"").replace(/,$/,"").trim());let s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,r,o);return}if(r==="C"){let l=o.split(",").slice(1),u=parseInt(l[0]),f=parseInt(l[1]),h=o.split(",").slice(3);h=h.map(function(p){return p.trim().replace(/^"/,"")}),r="connections",o=[u,f],Kle(o,h),s[r]===void 0&&(s[r]=[])}r==="Node"&&(s.id=o),r in s&&Array.isArray(s[r])?s[r].push(o):r!=="a"?s[r]=o:s.a=o,this.setCurrentProp(s,r),r==="a"&&o.slice(-1)!==","&&(s.a=LI(o))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=LI(t.a))}parseNodeSpecialProperty(e,t,i){let r=i.split('",').map(function(f){return f.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=r[0],s=r[1],a=r[2],l=r[3],u=r[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=LI(u);break}this.getPrevNode()[o]={type:s,type2:a,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),o)}},HI=class{parse(e){let t=new Ww(e);t.skip(23);let i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);let r=new $w;for(;!this.endOfContent(t);){let o=this.parseNode(t,i);o!==null&&r.add(o.name,o)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let i={},r=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let s=e.getUint8(),a=e.getString(s);if(r===0)return null;let l=[];for(let p=0;p<o;p++)l.push(this.parseProperty(e));let u=l.length>0?l[0]:"",f=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(i.singleProperty=o===1&&e.getOffset()===r;r>e.getOffset();){let p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,i,p)}return i.propertyList=l,typeof u=="number"&&(i.id=u),f!==""&&(i.attrName=f),h!==""&&(i.attrType=h),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){let r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){let r=[];i.propertyList.forEach(function(o,s){s!==0&&r.push(o)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(o){t[o]=i[o]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],o=i.propertyList[1],s=i.propertyList[2],a=i.propertyList[3],l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:o,type2:s,flag:a,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){let t=e.getString(1),i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":let r=e.getUint32(),o=e.getUint32(),s=e.getUint32();if(o===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}let a=_V(new Uint8Array(e.getArrayBuffer(s))),l=new Ww(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},Ww=class{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){let t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let r=i.indexOf(0);return r>=0&&(i=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(i)}},$w=class{add(e,t){this[e]=t}};function qle(n){let e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===SV(n,0,e.length)}function Xle(n){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],t=0;function i(r){let o=n[r-1];return n=n.slice(t+r),t++,o}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function EV(n){let e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Yle(n){return n/46186158e3}var Zle=[];function jw(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);let o=r*i.dataSize,s=o+i.dataSize;return Jle(Zle,i.buffer,o,s)}var FI=new nr,Eh=new B;function MV(n){let e=new ct,t=new ct,i=new ct,r=new ct,o=new ct,s=new ct,a=new ct,l=new ct,u=new ct,f=new ct,h=new ct,p=new ct,g=n.inheritType?n.inheritType:0;n.translation&&e.setPosition(Eh.fromArray(n.translation));let v=Ig(0);if(n.preRotation){let z=n.preRotation.map(qn.degToRad);z.push(v),t.makeRotationFromEuler(FI.fromArray(z))}if(n.rotation){let z=n.rotation.map(qn.degToRad);z.push(n.eulerOrder||v),i.makeRotationFromEuler(FI.fromArray(z))}if(n.postRotation){let z=n.postRotation.map(qn.degToRad);z.push(v),r.makeRotationFromEuler(FI.fromArray(z)),r.invert()}n.scale&&o.scale(Eh.fromArray(n.scale)),n.scalingOffset&&a.setPosition(Eh.fromArray(n.scalingOffset)),n.scalingPivot&&s.setPosition(Eh.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Eh.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(Eh.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(h.copy(n.parentMatrix),f.copy(n.parentMatrixWorld));let w=t.clone().multiply(i).multiply(r),y=new ct;y.extractRotation(f);let _=new ct;_.copyPosition(f);let T=_.clone().invert().multiply(f),E=y.clone().invert().multiply(T),M=o,V=new ct;if(g===0)V.copy(y).multiply(w).multiply(E).multiply(M);else if(g===1)V.copy(y).multiply(E).multiply(w).multiply(M);else{let he=new ct().scale(new B().setFromMatrixScale(h)).clone().invert(),ae=E.clone().multiply(he);V.copy(y).multiply(w).multiply(ae).multiply(M)}let F=u.clone().invert(),L=s.clone().invert(),G=e.clone().multiply(l).multiply(u).multiply(t).multiply(i).multiply(r).multiply(F).multiply(a).multiply(s).multiply(o).multiply(L),O=new ct().copyPosition(G),I=f.clone().multiply(O);return p.copyPosition(I),G=p.clone().multiply(V),G.premultiply(f.invert()),G}function Ig(n){n=n||0;let e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function LI(n){return n.split(",").map(function(t){return parseFloat(t)})}function SV(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function Kle(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function Jle(n,e,t,i){for(let r=t,o=0;r<i;r++,o++)n[o]=e[r];return n}function CV(n,e){let t=new Gw(e);return new Promise((i,r)=>{t.load(n,o=>{i(o)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var Qle=/^[og]\s*(.+)?/,ece=/^mtllib /,tce=/^usemtl /,nce=/^usemap /,TV=/\s+/,AV=new B,zI=new B,IV=new B,DV=new B,xs=new B,qw=new ft;function ice(){let n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}let i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,o){let s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);let a={index:this.materials.length,name:r||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:s!==void 0?s.smooth:this.smooth,groupStart:s!==void 0?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){let u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){let o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),r&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},i&&i.name&&typeof i.clone=="function"){let r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){let i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){let r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){let r=this.normals,o=this.object.geometry.normals;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){let r=this.vertices,o=this.object.geometry.normals;AV.fromArray(r,e),zI.fromArray(r,t),IV.fromArray(r,i),xs.subVectors(IV,zI),DV.subVectors(AV,zI),xs.cross(DV),xs.normalize(),o.push(xs.x,xs.y,xs.z),o.push(xs.x,xs.y,xs.z),o.push(xs.x,xs.y,xs.z)},addColor:function(e,t,i){let r=this.colors,o=this.object.geometry.colors;r[e]!==void 0&&o.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&o.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&o.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){let r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0],r[e+1]),o.push(r[t+0],r[t+1]),o.push(r[i+0],r[i+1])},addDefaultUV:function(){let e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){let t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,o,s,a,l,u){let f=this.vertices.length,h=this.parseVertexIndex(e,f),p=this.parseVertexIndex(t,f),g=this.parseVertexIndex(i,f);if(this.addVertex(h,p,g),this.addColor(h,p,g),a!==void 0&&a!==""){let v=this.normals.length;h=this.parseNormalIndex(a,v),p=this.parseNormalIndex(l,v),g=this.parseNormalIndex(u,v),this.addNormal(h,p,g)}else this.addFaceNormal(h,p,g);if(r!==void 0&&r!==""){let v=this.uvs.length;h=this.parseUVIndex(r,v),p=this.parseUVIndex(o,v),g=this.parseUVIndex(s,v),this.addUV(h,p,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";let t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){let o=this.parseVertexIndex(e[i],t);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";let i=this.vertices.length,r=this.uvs.length;for(let o=0,s=e.length;o<s;o++)this.addVertexLine(this.parseVertexIndex(e[o],i));for(let o=0,s=t.length;o<s;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return n.startObject("",!1),n}var Xw=class extends Uo{constructor(e){super(e),this.materials=null}load(e,t,i,r){let o=this,s=new Ba(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){let t=new ice;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));let i=e.split(`
`),r=[];for(let a=0,l=i.length;a<l;a++){let u=i[a].trimStart();if(u.length===0)continue;let f=u.charAt(0);if(f!=="#")if(f==="v"){let h=u.split(TV);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(qw.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]),_n),t.colors.push(qw.r,qw.g,qw.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(f==="f"){let p=u.slice(1).trim().split(TV),g=[];for(let w=0,y=p.length;w<y;w++){let _=p[w];if(_.length>0){let T=_.split("/");g.push(T)}}let v=g[0];for(let w=1,y=g.length-1;w<y;w++){let _=g[w],T=g[w+1];t.addFace(v[0],_[0],T[0],v[1],_[1],T[1],v[2],_[2],T[2])}}else if(f==="l"){let h=u.substring(1).trim().split(" "),p=[],g=[];if(u.indexOf("/")===-1)p=h;else for(let v=0,w=h.length;v<w;v++){let y=h[v].split("/");y[0]!==""&&p.push(y[0]),y[1]!==""&&g.push(y[1])}t.addLineGeometry(p,g)}else if(f==="p"){let p=u.slice(1).trim().split(" ");t.addPointGeometry(p)}else if((r=Qle.exec(u))!==null){let h=(" "+r[0].slice(1).trim()).slice(1);t.startObject(h)}else if(tce.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(ece.test(u))t.materialLibraries.push(u.substring(7).trim());else if(nce.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(f==="s"){if(r=u.split(" "),r.length>1){let p=r[1].trim().toLowerCase();t.object.smooth=p!=="0"&&p!=="off"}else t.object.smooth=!0;let h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();let o=new Mr;if(o.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let a=0,l=t.objects.length;a<l;a++){let u=t.objects[a],f=u.geometry,h=u.materials,p=f.type==="Line",g=f.type==="Points",v=!1;if(f.vertices.length===0)continue;let w=new Pi;w.setAttribute("position",new On(f.vertices,3)),f.normals.length>0&&w.setAttribute("normal",new On(f.normals,3)),f.colors.length>0&&(v=!0,w.setAttribute("color",new On(f.colors,3))),f.hasUVIndices===!0&&w.setAttribute("uv",new On(f.uvs,2));let y=[];for(let T=0,E=h.length;T<E;T++){let M=h[T],V=M.name+"_"+M.smooth+"_"+v,F=t.materials[V];if(this.materials!==null){if(F=this.materials.create(M.name),p&&F&&!(F instanceof hs)){let L=new hs;$i.prototype.copy.call(L,F),L.color.copy(F.color),F=L}else if(g&&F&&!(F instanceof ta)){let L=new ta({size:10,sizeAttenuation:!1});$i.prototype.copy.call(L,F),L.color.copy(F.color),L.map=F.map,F=L}}F===void 0&&(p?F=new hs:g?F=new ta({size:1,sizeAttenuation:!1}):F=new Ua,F.name=M.name,F.flatShading=!M.smooth,F.vertexColors=v,t.materials[V]=F),y.push(F)}let _;if(y.length>1){for(let T=0,E=h.length;T<E;T++){let M=h[T];w.addGroup(M.groupStart,M.groupCount,T)}p?_=new Dc(w,y):g?_=new Ol(w,y):_=new ui(w,y)}else p?_=new Dc(w,y[0]):g?_=new Ol(w,y[0]):_=new ui(w,y[0]);_.name=u.name,o.add(_)}else if(t.vertices.length>0){let a=new ta({size:1,sizeAttenuation:!1}),l=new Pi;l.setAttribute("position",new On(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new On(t.colors,3)),a.vertexColors=!0);let u=new Ol(l,a);o.add(u)}return o}};function RV(n,e){return at(this,null,function*(){let t=new Xw(e);try{return yield new Promise((r,o)=>{t.load(n,s=>{r(s)},void 0,s=>{s instanceof Error?o(s):o(new Error("An unknown error occurred"))})})}catch(i){throw console.error("Error loading OBJ model:",i),i}})}function PV(n,e){return at(this,null,function*(){let t=n.type,i;if(console.log(n),t.includes("gltf")||t.includes("glb")?i="gltf":t.includes("fbx")?i="fbx":t.includes("obj")&&(i="obj"),!i)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0442\u0438\u043F \u043C\u043E\u0434\u0435\u043B\u0438 \u043F\u043E MIME-\u0442\u0438\u043F\u0443.");let r=URL.createObjectURL(n),o;try{switch(i){case"gltf":case"glb":o=dV(r,e);break;case"fbx":o=CV(r,e);break;case"obj":o=RV(r,e);break;default:throw new Error("\u041D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043C\u043E\u0434\u0435\u043B\u0438: "+i)}return yield o}finally{URL.revokeObjectURL(r)}})}var Mh=(()=>{class n{httpModule;baseServiceUrl=ri+"furniture/model";constructor(t){this.httpModule=t}GETfurnitureModel(t,i){let r=new Jt().set("jwt",t).set("furnitureId",i);return tn(this.httpModule.get(this.baseServiceUrl,{params:r,responseType:"blob"}))}POSTuploadFurnitureModel(t,i,r){let o=new FormData;o.append("model",t);let s=new Jt().set("jwt",i).set("furnitureId",r).set("fileName",t.name);return tn(this.httpModule.post(this.baseServiceUrl,o,{params:s}))}DELETEfurnitureModel(t,i){let r=new Jt().set("jwt",t).set("furnitureId",i);return tn(this.httpModule.delete(this.baseServiceUrl,{params:r}))}static \u0275fac=function(i){return new(i||n)(ze(Li))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var NV=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=Dp(this.platformId)}static getCookieRegExp(t){let i=t.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return this.documentIsAccessible?(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie)):!1}get(t){if(this.check(t)){t=encodeURIComponent(t);let r=n.getCookieRegExp(t).exec(this.document.cookie);return r&&r[1]?n.safeDecodeURIComponent(r[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let t={},i=this.document;return i.cookie&&i.cookie!==""&&i.cookie.split(";").forEach(r=>{let[o,s]=r.split("=");t[n.safeDecodeURIComponent(o.replace(/^ /,""))]=n.safeDecodeURIComponent(s)}),t}set(t,i,r,o,s,a,l,u){if(!this.documentIsAccessible)return;if(typeof r=="number"||r instanceof Date||o||s||a||l){let p={expires:r,path:o,domain:s,secure:a,sameSite:l||"Lax",partitioned:u};this.set(t,i,p);return}let f=encodeURIComponent(t)+"="+encodeURIComponent(i)+";",h=r||{};if(h.expires)if(typeof h.expires=="number"){let p=new Date(new Date().getTime()+h.expires*1e3*60*60*24);f+="expires="+p.toUTCString()+";"}else f+="expires="+h.expires.toUTCString()+";";h.path&&(f+="path="+h.path+";"),h.domain&&(f+="domain="+h.domain+";"),h.secure===!1&&h.sameSite==="None"&&(h.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),h.secure&&(f+="secure;"),h.sameSite||(h.sameSite="Lax"),f+="sameSite="+h.sameSite+";",h.partitioned&&(f+="Partitioned;"),this.document.cookie=f}delete(t,i,r,o,s="Lax"){if(!this.documentIsAccessible)return;let a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:r,secure:o,sameSite:s})}deleteAll(t,i,r,o="Lax"){if(!this.documentIsAccessible)return;let s=this.getAll();for(let a in s)s.hasOwnProperty(a)&&this.delete(a,t,i,r,o)}static{this.\u0275fac=function(i){return new(i||n)(ze(fn),ze(So))}}static{this.\u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Vi=(()=>{class n{cookieService;constructor(t){this.cookieService=t}setJwt(t,i){let r=new Date;i==="long"?r.setDate(r.getDate()+7):r.setMinutes(r.getMinutes()+10),this.cookieService.set("jwt",t,{expires:r,path:"/",sameSite:"Strict"})}deleteJwt(){this.cookieService.delete("jwt","/")}setGuideRule(){this.cookieService.set("guideInclude","false",{expires:new Date().getDate()+7,path:"/",sameSite:"Strict"})}getGuideRule(){return this.cookieService.get("guideInclude")}deleteGuideRule(){this.cookieService.delete("guideInclude","/")}getJwt(){return this.cookieService.get("jwt")}setUserType(t){this.cookieService.set("accountType",t,{expires:new Date().getDate()+7,path:"/",sameSite:"Strict"})}getUserType(){return this.cookieService.get("accountType")}deleteUserType(){this.cookieService.delete("accountType")}static \u0275fac=function(i){return new(i||n)(ze(NV))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FV=(()=>{class n{constructor(){}createReport(t,i){this.createReportHTML(t,i)}createReportHTML(t,i){let r=new FileReader;r.onload=()=>{let o=r.result,s=this.generateHtmlContent(t,o);this.openHtmlInNewTab(t.name,s)},r.readAsDataURL(i)}generateHtmlContent(t,i){return`
      <!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>\u041E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435 ${t.name}</title>
    <style>
        @font-face {
            font-family: 'Calypso';
            src: url('http://localhost:4200/assets/fonts/Calypso.ttf') format('truetype');
        }

        @font-face {
            font-family: 'Courier New';
            src: url('http://localhost:4200/assets/fonts/Courier New.ttf') format('truetype');
        }

        body {
            margin: 0;
            padding: 40px;
            background-color: black;
            color: #DAD7CD;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
        }

        .title {
            font-family: 'Calypso', sans-serif;
            text-align: center;
            font-size: 3rem;
            margin-bottom: 40px;
            color: #A3B18A;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .renderTitle {
            font-family: 'Courier New', monospace;
            font-weight: 400;
            font-size: 1.5rem;
            margin: 30px 0 15px;
            color: #A3B18A;
            border-bottom: 2px solid #A3B18A;
            padding-bottom: 8px;
            width:fit-content;
            align-self: center;
        }

        .furnituresSpanTitle {
            font-family: 'Calypso', sans-serif;
            font-size: 2rem;
            margin: 40px 0 20px;
            color: #A3B18A;
            display: block;
            text-align: center;
        }

        .furniture {
            display: flex;
            flex-direction: column;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }

        .furnitureTitle {
            font-family: 'Courier New', monospace;
            font-weight: 400;
            margin: 0 auto 15px;
            font-size: 1.3rem;
            color: #DAD7CD;
        }

        .furnitureImage {
            margin: 0 auto;
            max-width: 100%;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .furnitureFooter {
            display: flex;
            gap: 30px;
            flex-direction: row;
            justify-content: center;
            flex-wrap: wrap;
        }

        .paramsTitle,
        .shopsTitle {
            font-family: 'Calypso', sans-serif;
            font-size: 1.2rem;
            color: #A3B18A;
            margin-bottom: 15px;
        }

        .paramsSpan {
            width: fit-content;
            min-width: 200px;
        }

        .paramsList {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .paramsItem {
            margin-bottom: 8px;
            position: relative;
            padding-left: 20px;
        }

        .shopsSpan {
            min-width: 200px;
        }

        a {
            display: inline-block;
            background-color: white;
            color: black;
            text-decoration: none;
            padding: 5px 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            width:250px;
            max-width: 250px;
            text-align: center;
            font-family: 'Courier New';
            font-weight: 400;
            font-size: 0.8rem
        }

        a:hover {
            background-color: transparent;
            color: white;
            border-color: white;
        }

        img {
            width: 100%;
            max-height: 500px;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
        }

        .openLink {
            width:250px;
            max-width: 250px;
            margin: 0 auto;
            margin-top: 20px;
        }
        .furnitureLink{
            background-color: #A3B18A;
            color:white;
            &:hover{
                background-color: #344E41;
                border: 2px solid #344E41;
            }
        }

        @media (max-width: 768px) {
            .furnitureFooter {
                flex-direction: column;
                align-items: center;
                gap: 20px;
                width: 100%;
            }

            .paramsSpan,
            .shopsSpan {
                width: 90%;
            }

            .openLink,.shopLink {
                box-sizing: border-box;
                width: 100%;
            }

            .title {
                font-size: 2rem;
            }

            body {
                padding: 20px;
            }
        }
    </style>
</head>
<h1 class="title">\u041E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435<br>first</h1>
<h2 class="renderTitle">\u0412\u0438\u0434 \u0441\u0432\u0435\u0440\u0445\u0443</h2>
<img src="${i}"
    alt="Room render">

<h2 class="furnituresSpanTitle">\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043D\u0430\u044F \u043C\u0435\u0431\u0435\u043B\u044C</h2>
${t.furnitures.map(r=>`
    <span class="furniture">
    <h3 class="furnitureTitle"> Onte Bucle White </h3>
    <img class= "furnitureImage"
        src = "${r.previewUrl}"
        alt = "Onte Bucle White" loading = "lazy">
    <span class="furnitureFooter" >
    <span class="paramsSpan" >
    <p class="paramsTitle"> \u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B </p>
    <ul class= "paramsList">
    <li class="paramsItem"> \u0428\u0438\u0440\u0438\u043D\u0430: ${t.proportions.width}\u043C </li>
    <li class= "paramsItem"> \u0412\u044B\u0441\u043E\u0442\u0430: ${t.proportions.height}\u043C </li>
    <li class= "paramsItem"> \u0414\u043B\u0438\u043D\u0430: ${t.proportions.length}\u043C </li>
    </ul>
    </span>
    <span class= "shopsSpan" >
    ${r.shops.map(o=>`
        <p class="shopsTitle"> \u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B </p>
        <span >
      <a class="shopLink" href = "${o.url}">
      ${this.costPipe(o.cost)}
      </a>
      </span>
      `).join("")}
    </span>
    </span>
    <a class= "openLink furnitureLink" href = "${z_}shop/${r.category}/${r.furnitureId}"> \u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C </a>
    </span>
    `).join("")}
<a class="openLink planLink" href="${z_}plan">\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043F\u0440\u043E\u0435\u043A\u0442</a>

</html>
    `}costPipe(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}openHtmlInNewTab(t,i){let r=new Blob([i],{type:"text/html"}),o=URL.createObjectURL(r);window.open(o,"_blank"),this.downloadHtml(t,o)}downloadHtml(t,i){let r=document.createElement("a");r.href=i,r.download=t+"-report.html",r.click(),URL.revokeObjectURL(i)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sh=(()=>{class n{httpModule;reportService;baseServiceUrl=ri+"projects/";constructor(t,i){this.httpModule=t,this.reportService=i}POSTcreateProject(t,i){let r=new Jt().set("jwt",t).set("name",i);return tn(this.httpModule.post(this.baseServiceUrl,r))}DELETEdeleteProject(t,i){let r=new Jt().set("jwt",t).set("projectId",i);return tn(this.httpModule.delete(this.baseServiceUrl,{params:r}))}GETgetProject(t,i){let r=new Jt().set("jwt",t).set("projectId",i);return tn(this.httpModule.get(this.baseServiceUrl,{params:r}))}PUTupdateProject(t,i,r){let o=new Jt().set("jwt",t).set("projectId",i).set("name",r.name).set("rooms",JSON.stringify(r.rooms));return tn(this.httpModule.put(this.baseServiceUrl,o))}GETgetReportOfRoom(t,i,r){return at(this,null,function*(){let o=new Jt().set("jwt",t).set("roomId",i),s=yield tn(this.httpModule.get(this.baseServiceUrl+"room",{params:o}));s.furnitures=s.furnitures.map(a=>(a.previewUrl=ri+a.previewUrl,a)),console.log(s),this.reportService.createReport(s,r)})}static \u0275fac=function(i){return new(i||n)(ze(Li),ze(FV))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sce(n,e){if(n&1){let t=Rt();R(0,"button",9),Re("click",function(){Be(t);let r=_e();return Ve(r.deleteModel())}),R(1,"p"),te(2,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),P(),we(3,"img",10),P()}}function ace(n,e){if(n&1){let t=Rt();R(0,"button",11),Re("click",function(){Be(t);let r=_e();return Ve(r.getReport())}),R(1,"p"),te(2,"\u041E\u0442\u0447\u0435\u0442"),P(),we(3,"img",12),P()}}var Yw=(()=>{class n{elementRef;spinner;furnitureModelService;furnitureCardService;accountCookieService;projectService;route;errorHandler;location;constructor(t,i,r,o,s,a,l,u,f){this.elementRef=t,this.spinner=i,this.furnitureModelService=r,this.furnitureCardService=o,this.accountCookieService=s,this.projectService=a,this.route=l,this.errorHandler=u,this.location=f}roomData;saveObjectsEmitter=new Pn;renderer;camera;scene;controls;animationFrameId=null;canvasRatioOfWindow=1.5;roomProportions;raycaster=new hg;mouse=new We;rectangleMesh;targetobject=void 0;ngAfterViewInit(){this.initThreeJs()}ngOnChanges(t){if(this.roomData=t.roomData.currentValue,console.log(this.roomData),!this.roomData||this.scene===void 0||this.roomData===t.roomData.previousValue)return;t.roomData.previousValue!==void 0&&this.clearRoom(),this.camera.position.set(0,5,0),this.camera.rotation.set(qn.degToRad(-90),0,0),this.roomProportions=this.roomData.roomProportions,this.createRoom(),this.rectangleMesh.rotation.x=qn.degToRad(-90);let i=Oe({objects:this.roomData.objects},this.roomData.roomProportions);if(this.getObjectSize(this.rectangleMesh).width===0)return;this.loadRoom(i);let r=this.route.snapshot.params.furnitureId;!r||t.roomData.previousValue||(this.fixPath(),this.addModel(r,!0))}loadFurnitureModel(t,i,r,o,s){return at(this,null,function*(){try{let a=yield PV(t);s?this.addObjectToScene(a,i,r,s):this.addObjectToScene(a,i,r),o&&this.saveRoom()}catch{}})}addModel(t,i,r){return at(this,null,function*(){let o=this.accountCookieService.getJwt();if(o)try{i&&this.spinner.show();let s=(yield this.furnitureCardService.GETfurnitureCard(t)).furnitureCard.proportions,a=yield this.furnitureModelService.GETfurnitureModel(o,t);yield this.loadFurnitureModel(a,s,t,i,r),this.spinner.hide()}catch(s){this.spinner.hide(),this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043C\u043E\u0434\u0435\u043B\u0438",5e3),console.log(s)}})}fixPath(){let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t)}initThreeJs(){this.scene=new $m,this.camera=new Ei(75,window.innerWidth/window.innerHeight,.1,1e3);let t=new cg(11184810,0,2);this.scene.add(t),this.renderer=new Lw({antialias:!0,alpha:!1});let i=this.elementRef.nativeElement.querySelector("#canvasContainer");this.camera.position.z=5,this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),i.appendChild(this.renderer.domElement),this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}createRoundedRectangleGeometry(t,i,r,o){let s=new ah;return s.moveTo(-t/2+r,-i/2),s.lineTo(t/2-r,-i/2),s.quadraticCurveTo(t/2,-i/2,t/2,-i/2+r),s.lineTo(t/2,i/2-r),s.quadraticCurveTo(t/2,i/2,t/2-r,i/2),s.lineTo(-t/2+r,i/2),s.quadraticCurveTo(-t/2,i/2,-t/2,i/2-r),s.lineTo(-t/2,-i/2+r),s.quadraticCurveTo(-t/2,-i/2,-t/2+r,-i/2),new sg(s,o)}createRoom(){if(!this.roomData)return;let t=this.roomData.roomProportions,i=.1;this.controls=new Bw(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.15,this.controls.enableZoom=!0,this.controls.minDistance=1,this.controls.maxDistance=10;let r=5;this.controls.maxPolarAngle=qn.degToRad(90-r),this.createRoomShape(t.width,t.length,i),this.rectangleMesh.name="roomFloorBase",this.rectangleMesh}calculateObjectSaveData(t){let i=this.getObjectSize(this.rectangleMesh),r=t.position;return{objectId:t.userData.id,xMetersDistance:r.x/i.width*this.roomProportions.width,zMetersDistance:r.z/i.length*this.roomProportions.length,yRotate:t.rotation.y}}calculateMoveObjectData(t){let i=this.getObjectSize(this.rectangleMesh);return{xDistance:t.xMetersDistance*i.width/this.roomProportions.width,zDistance:t.zMetersDistance*i.length/this.roomProportions.length,yRotate:t.yRotate}}createRoomShape(t,i,r){let o=this.calculateFrustumBounds(),s=t/i,a,l;s<=1?(a=o.height*s,l=o.height):(a=o.width,l=o.width/s);let f=this.createRoundedRectangleGeometry(a*.9,l*.9,r,10),h=new Fo({color:3427905});this.rectangleMesh=new ui(f,h),this.scene.add(this.rectangleMesh),this.renderer.render(this.scene,this.camera),this.rectangleMesh.updateMatrixWorld(!0)}calculateFrustumBounds(){let t=this.camera.position.y,i=qn.degToRad(this.camera.fov),r=2*Math.tan(i/2)*Math.abs(t);return{width:r*this.camera.aspect,height:r}}addObjectToScene(t,i,r,o){t.userData={id:r},this.scaleImportModel(t,i),this.scene.add(t),this.renderer.render(this.scene,this.camera),o&&(t.position.set(o.xDistance,0,o.zDistance),t.rotation.y=o.yRotate)}getObjectSize(t){let r=new Br().setFromObject(t).getSize(new B);return{width:r.x,length:r.z,height:r.y}}scaleImportModel(t,i){let r=this.getObjectSize(t),o=this.getObjectSize(this.rectangleMesh),s=r.width>r.length?o.width/r.width:o.length/r.length,l=(r.width>r.length?i.width/this.roomProportions.width:i.length/this.roomProportions.length)*s;t.scale.set(l,l,l)}loadRoom(t){return at(this,null,function*(){if(this.accountCookieService.getJwt()){this.spinner.show();for(let r of t.objects)yield this.addModel(r.objectId,!1,this.calculateMoveObjectData(r));this.spinner.hide()}})}clearRoom(){for(let t=this.scene.children.length-1;t>=0;t--){let i=this.scene.children[t];i.type!=="Scene"&&i.type!=="HemisphereLight"&&this.scene.remove(i)}}onResize(t){this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.render(this.scene,this.camera)}onMouseClick(t){if(this.targetobject){this.targetobject=void 0;return}let i=t.target.getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1,o=-(t.clientY-i.top)/i.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let a=this.raycaster.intersectObjects(this.scene.children).find(l=>l.object.name!=="roomFloorBase"&&l.object.type!=="Scene"&&l.object.type!=="HemisphereLight")?.object;a&&(this.targetobject=a.parent?a.parent:a)}rotateTargetObject(t){if(!this.targetobject)return;let i=-.05;switch(t.key){case"q":case"\u0439":this.targetobject.rotation.y-=i;break;case"e":case"\u0443":this.targetobject.rotation.y+=i}}onMousemove(t){if(!this.targetobject)return;let i=t.target.getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1,o=-(t.clientY-i.top)/i.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let s=this.raycaster.intersectObject(this.rectangleMesh);if(s.length===0)return;let a=s[0].point.x,l=s[0].point.z,u=this.getObjectSize(this.rectangleMesh),f=this.getObjectSize(this.targetobject),h=-u.width/2+f.width/2,p=u.width/2-f.width/2,g=a;g<h?g=h:g>p&&(g=p);let v=-u.length/2+f.length/2,w=u.length/2-f.length/2,y=l;y<v?y=v:y>w&&(y=w),this.targetobject.position.set(g,0,y)}getReport(){return at(this,null,function*(){let t=this.accountCookieService.getJwt();if(!t||!this.roomData?._id)return;let i=this.camera.position.clone(),r=this.camera.rotation.clone();this.camera.position.set(0,7,0),this.camera.rotation.set(qn.degToRad(-90),0,0),this.renderer.render(this.scene,this.camera);let o=this.renderer.domElement.toDataURL("image/png"),s=yield fetch(o);this.camera.position.copy(i),this.camera.rotation.copy(r),s.ok||this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0440\u0435\u043D\u0434\u0435\u0440\u0435",5e3);let a=yield s.blob();this.projectService.GETgetReportOfRoom(t,this.roomData?._id,a)})}deleteModel(){this.targetobject&&this.scene.remove(this.targetobject)}saveRoom(){if(!this.roomData)return;let t=this.scene.children.filter(r=>r.name!=="roomFloorBase"&&r.type!=="Scene"&&r.type!=="HemisphereLight").map(r=>this.calculateObjectSaveData(r)),i=t;this.roomData.objects=t,this.saveObjectsEmitter.emit(i)}static \u0275fac=function(i){return new(i||n)(de(nn),de(tI),de(Mh),de(_c),de(Vi),de(Sh),de(ur),de(bi),de(oo))};static \u0275cmp=vn({type:n,selectors:[["app-scene"]],hostBindings:function(i,r){i&1&&Re("resize",function(s){return r.onResize(s)},!1,Co)("click",function(s){return r.onMouseClick(s)})("keydown",function(s){return r.rotateTargetObject(s)},!1,Co)("mousemove",function(s){return r.onMousemove(s)})},inputs:{roomData:"roomData"},outputs:{saveObjectsEmitter:"saveObjectsEmitter"},features:[ar],decls:12,vars:2,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","none"],[1,"Loader"],[2,"font-size","20px","color","white"],["id","canvasContainer"],[1,"functionalsBtnsTemplate"],["title","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u043E\u043C\u043D\u0430\u0442\u0443",3,"click"],[1,"changeBtns"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",3,"click",4,"ngIf"],["title","\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u043E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435",3,"click",4,"ngIf"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",3,"click"],["src","/assets/images/deleteIcon.svg","alt",""],["title","\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u043E\u0442\u0447\u0435\u0442 \u043F\u043E \u043A\u043E\u043C\u043D\u0430\u0442\u0435",3,"click"],["src","/assets/images/uploadIcon.png","alt",""]],template:function(i,r){i&1&&(R(0,"ngx-spinner",0),we(1,"div",1),R(2,"p",2),te(3,"Loading..."),P()(),R(4,"div",3)(5,"span",4)(6,"button",5),Re("click",function(){return r.saveRoom()}),R(7,"p"),te(8,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),P()(),R(9,"span",6),ke(10,sce,4,0,"button",7)(11,ace,4,0,"button",8),P()()()),i&2&&(W(10),ne("ngIf",r.targetobject!==void 0),W(),ne("ngIf",r.targetobject===void 0))},dependencies:[oV,rV,Tn],styles:['.Loader[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;max-width:14.6rem;margin-top:7.3rem;margin-bottom:7.3rem}.Loader[_ngcontent-%COMP%]:before, .Loader[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%;animation-duration:1.8s;animation-iteration-count:infinite;animation-timing-function:ease-in-out;filter:drop-shadow(0 0 .7555555556rem rgba(255,255,255,.75))}.Loader[_ngcontent-%COMP%]:before{width:100%;padding-bottom:100%;box-shadow:inset 0 0 0 1.7rem #fff;animation-name:_ngcontent-%COMP%_pulsA}.Loader[_ngcontent-%COMP%]:after{width:calc(100% - 3.4rem);padding-bottom:calc(100% - 3.4rem);box-shadow:0 0 #fff;animation-name:_ngcontent-%COMP%_pulsB}@keyframes _ngcontent-%COMP%_pulsA{0%{box-shadow:inset 0 0 0 1.7rem #fff;opacity:1}50%,to{box-shadow:inset 0 0 #fff;opacity:0}}@keyframes _ngcontent-%COMP%_pulsB{0%,50%{box-shadow:0 0 #fff;opacity:0}to{box-shadow:0 0 0 1.7rem #fff;opacity:1}}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}[_nghost-%COMP%]{display:block;height:100%}.funcBtnsSpan[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);bottom:50px;display:flex;gap:10px}.funcBtn[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:15px;border-radius:10px;border:none;font-family:arial;font-weight:1000;width:25vw;cursor:pointer}#canvasContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:calc(100% - 55px) 50px;gap:5px}.functionalsBtnsTemplate[_ngcontent-%COMP%]{grid-area:2/1/3/2;width:410px;height:50px;justify-self:center;overflow:hidden;display:flex;gap:10px}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;height:100%;justify-content:center;background-color:#000;border-radius:10px;border:2px solid rgba(163,177,138,.5);cursor:pointer;transition:border .3s ease-in-out;display:flex;gap:10px;align-items:center}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:27px;margin-bottom:3px}.functionalsBtnsTemplate[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border:2px solid rgba(163,177,138,.8)}']})}return n})();var kV=gE(y1());var lce=["scene"],cce=["roomsGuideTemplate1"],uce=["roomsGuideTemplate2"],dce=["roomGuideTemplate"];function fce(n,e){n&1&&(R(0,"span",30),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0.1 \u0434\u043E 10 "),P())}function hce(n,e){n&1&&(R(0,"span",30),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0.1 \u0434\u043E 10 "),P())}function pce(n,e){n&1&&(R(0,"span",30),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0.1 \u0434\u043E 10 "),P())}function mce(n,e){n&1&&(R(0,"span",30),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B (\u0434\u043E 20) "),P())}function gce(n,e){if(n&1){let t=Rt();R(0,"button",31),Re("click",function(){Be(t);let r=_e();return Ve(r.deleteRoom())}),we(1,"img",32),P()}}function vce(n,e){if(n&1){let t=Rt();R(0,"button",33),Re("touchstart",function(r){let o=Be(t).index,s=_e();return Ve(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("keydown.enter",function(r){let o=Be(t).index,s=_e();return Ve(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("mousedown",function(r){let o=Be(t).index,s=_e();return Ve(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())}),te(1),P()}if(n&2){let t=e.$implicit,i=e.index,r=_e();ni("grid-area",t.gridArea)("display",(r.currentViewRoom===i||r.currentViewRoom===void 0)&&!r.sceneOpenToggle?"block":"none"),To("data-index",i),W(),cr(" ",t.name," ")}}function yce(n,e){if(n&1&&(R(0,"a",36),te(1),P()),n&2){let t=e.$implicit;ne("href","/shop/"+t.name,lr),W(),cr(" ",t.translateMany," ")}}function _ce(n,e){if(n&1&&(R(0,"span",34),ke(1,yce,2,2,"a",35),P()),n&2){let t=_e();W(),ne("ngForOf",t.categoryArray)}}function xce(n,e){if(n&1){let t=Rt();R(0,"div",37)(1,"div",38),we(2,"span",39),R(3,"img",40),Re("click",function(){Be(t);let r=_e();return Ve(r.closeGuide())}),P()()()}if(n&2){let t=_e();W(2),ne("ngTemplateOutlet",t.guideTemplate)}}function wce(n,e){n&1&&(R(0,"div",41)(1,"div",42)(2,"p",43),te(3,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043E\u0434\u0438\u043D \u0440\u0430\u0437 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442e \u0434\u043B\u044F \u0441\u043C\u0435\u043D\u044B \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F"),P(),R(4,"div",44),we(5,"img",45),P()(),R(6,"div",46),we(7,"div",47),P(),R(8,"div",42)(9,"p",43),te(10,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0434\u0432\u0430 \u0440\u0430\u0437\u0430 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442e \u0434\u043B\u044F \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043C\u0435\u0431\u0435\u043B\u0438"),P(),R(11,"div",44),we(12,"img",48),P()()())}function bce(n,e){n&1&&(R(0,"div",41)(1,"div",42)(2,"p",43),te(3,"\u0417\u0430\u0436\u043C\u0438\u0442\u0435 \u041B\u041A\u041C \u043D\u0430 \u043A\u043E\u043C\u043D\u0430\u0442\u0435 \u0438 \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0439\u0442\u0435"),P(),R(4,"div",49),we(5,"img",50),P()(),R(6,"div",46),we(7,"div",47),R(8,"span",51),te(9,"\u0418\u041B\u0418"),P(),we(10,"div",47),P(),R(11,"div",42)(12,"p",43),te(13,"\u041D\u0430\u0432\u0435\u0434\u0438\u0442\u0435\u0441\u044C \u043D\u0430 TAB \u0438 \u0441 \u0437\u0430\u0436\u0430\u0442\u044B\u043C ENTER \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 \u0441\u0442\u0440\u0435\u043B\u043E\u0447\u043A\u0438"),P(),R(14,"div",52),we(15,"img",53),R(16,"div",54),we(17,"img",55),R(18,"div",56),we(19,"img",57)(20,"img",58)(21,"img",59),P()()()()())}function Ece(n,e){n&1&&(R(0,"div",41)(1,"div",42)(2,"p",43),te(3,"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u041B\u041A\u041C \u043D\u0430 \u043C\u0435\u0431\u0435\u043B\u0438 \u0434\u043B\u044F \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F"),P(),R(4,"div",44),we(5,"img",45),P()(),R(6,"div",46),we(7,"div",47),P(),R(8,"div",42)(9,"p",43),te(10,"\u0412 \u0440\u0435\u0436\u0438\u043C\u0435 \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 Q \u0438 E \u0434\u043B\u044F \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430 \u043C\u0435\u0431\u0435\u043B\u0438"),P(),R(11,"div",52)(12,"div",54)(13,"div",56),we(14,"img",60)(15,"img",61),P()()()()())}var Ch=(()=>{class n{renderer;elementRef;categoryService;location;errorHandler;cdr;accountCookieService;constructor(t,i,r,o,s,a,l){this.renderer=t,this.elementRef=i,this.categoryService=r,this.location=o,this.errorHandler=s,this.cdr=a,this.accountCookieService=l}previousGridArea;roomSpan;roomSpanSettings;isDragging=!1;isClick=!1;clickTimer;isDoubleClick=!1;toggleModuleButton;formElement;oldSizeViewRoom=void 0;lastPlanHouse=void 0;categoryArray=[];isGuideIncluded=!1;isGuideVisible=!0;currentViewRoom=void 0;sceneOpenToggle=!1;currentIdClickedRoom=void 0;guideTemplate;planHouse;sceneComponent;initialized=new Pn;planHouseEmitter=new Pn;callSaveEmitter=new Pn;roomsGuideTemplate1;roomsGuideTemplate2;roomGuideTemplate;ngOnInit(){this.checkGuideInclude(),this.initCategories()}ngAfterViewInit(){this.elementRef.nativeElement.parentElement.classList.contains("projectPreviewSpan")&&(this.isGuideIncluded=!1),this.guideTemplate=this.roomsGuideTemplate1,this.cdr.detectChanges(),this.roomSpan=this.elementRef.nativeElement.querySelector(".roomSpan"),this.calculateRoomSpanSettings(),this.formElement=this.elementRef.nativeElement.querySelector("form"),this.toggleModuleButton=this.elementRef.nativeElement.querySelector(".addModuleBtn"),this.initialized.emit()}initCategories(){return at(this,null,function*(){this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray})}showGuide(){this.isGuideVisible=!0}checkGuideInclude(){this.isGuideIncluded=this.accountCookieService.getGuideRule()!=="false"}emitPlanHouse(){this.planHouseEmitter.emit(this.planHouse)}saveHouse(){this.callSaveEmitter.emit()}numberValidator(){return t=>{let i=t.value;return!isNaN(parseFloat(i))&&isFinite(i)?null:{notANumber:{value:t.value}}}}findFreeSpace(t){let r=Array.from({length:10},()=>Array(10).fill(!1));this.planHouse.forEach(o=>{let[s,a,l,u]=o.gridArea.split("/").map(Number);for(let f=s-1;f<l-1;f++)for(let h=a-1;h<u-1;h++)r[f][h]=!0});for(let o=0;o<=10-t.length;o++)for(let s=0;s<=10-t.width;s++){let a=!0;for(let l=o;l<o+t.length;l++){for(let u=s;u<s+t.width;u++)if(r[l][u]){a=!1;break}if(!a)break}if(a){for(let l=o;l<o+t.length;l++)for(let u=s;u<s+t.width;u++)r[l][u]=!0;return`${o+1} / ${s+1} / ${o+t.length+1} / ${s+t.width+1}`}}return this.errorHandler.setError("\u041D\u0435\u0442 \u043C\u0435\u0441\u0442\u0430",15e3),!1}calculateRoomSpanSettings(){let t=this.roomSpan.getBoundingClientRect();this.roomSpanSettings={startX:t.left,startY:t.top-document.documentElement.scrollTop,endX:t.width+t.left,endY:t.height+t.top,gap:+window.getComputedStyle(this.roomSpan).getPropertyValue("gap").slice(0,-2)}}isAreaOccupied(t,i){let[r,o,s,a]=t.split("/").map(Number);for(let l=0;l<this.planHouse.length;l++){if(l===i)continue;let[u,f,h,p]=this.planHouse[l].gridArea.split("/").map(Number);if(r<h&&s>u&&o<p&&a>f)return!0}return!1}calculateGridArea(t,i){if(this.currentIdClickedRoom===void 0)return;let r=this.planHouse[this.currentIdClickedRoom].roomProportions,o=t-this.roomSpanSettings.startX,s=i-this.roomSpanSettings.startY-document.documentElement.scrollTop,a=(this.roomSpanSettings.endX-this.roomSpanSettings.startX)/10+this.roomSpanSettings.gap,l=Math.floor(o/a)+1,u=Math.floor(s/a)+1,f=l+Math.round(r.width)-1,h=u+Math.round(r.length)-1;if(!(f>10||h>10))return`${u} / ${l} / ${h+1} / ${f+1}`}resetRoomPosition(t,i){let r=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(r){let o=this.calculateGridArea(t,i);o&&!this.isAreaOccupied(o,this.currentIdClickedRoom)?(this.renderer.setStyle(r,"grid-area",o),this.planHouse[this.currentIdClickedRoom].gridArea=o):this.renderer.setStyle(r,"grid-area",this.previousGridArea),this.renderer.removeStyle(r,"background-color"),this.renderer.removeStyle(r,"z-index"),this.currentIdClickedRoom=void 0}}onMouseLeave(t){this.isDragging&&this.currentIdClickedRoom!==void 0&&this.onMouseUp(t)}onMouseUp(t){if(this.sceneOpenToggle!==!0&&this.currentViewRoom===void 0){if(this.isDragging&&this.currentIdClickedRoom!==void 0){if(this.isDragging=!1,t instanceof MouseEvent&&this.resetRoomPosition(t.clientX,t.clientY),typeof TouchEvent<"u"&&t instanceof TouchEvent){let r=t.changedTouches[0];this.resetRoomPosition(r.clientX,r.clientY)}let i=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');i&&(this.renderer.removeStyle(i,"cursor"),this.renderer.removeStyle(i,"background-color")),this.currentIdClickedRoom=void 0,this.emitPlanHouse()}this.clickTimer=setTimeout(()=>{if(this.isClick&&!this.isDragging){if(this.currentIdClickedRoom==null)return;this.toggleOpenRoomModule(this.currentIdClickedRoom)}this.isClick=!1,this.isDoubleClick=!1,this.isDragging=!1,clearTimeout(this.clickTimer)},250)}}onMouseMove(t){if(t.preventDefault(),this.isDragging&&this.currentIdClickedRoom!==void 0){let i=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(!i)return;let r=t instanceof MouseEvent?this.calculateGridArea(t.clientX,t.clientY):this.calculateGridArea(t.changedTouches[0].clientX,t.changedTouches[0].clientY);this.renderer.setStyle(i,"z-index","4"),r&&(this.renderer.setStyle(i,"grid-area",r),this.isAreaOccupied(r,this.currentIdClickedRoom)?this.renderer.setStyle(i,"background-color","#F18DC4"):this.renderer.setStyle(i,"background-color","#A3B18A"))}}moveRoom(t){if(this.currentIdClickedRoom===void 0||!this.isDragging)return;let i=this.elementRef.nativeElement.querySelector(`[data-index="${this.currentIdClickedRoom}"]`),[r,o,s,a]=this.planHouse[this.currentIdClickedRoom].gridArea.split("/").map(Number);switch(t.key){case"ArrowUp":r-=1,s-=1;break;case"ArrowDown":r+=1,s+=1;break;case"ArrowRight":o+=1,a+=1;break;case"ArrowLeft":o-=1,a-=1;break}if(r<1||o<1||s>11||a>11)return;let l=`${r} / ${o} / ${s} / ${a}`;this.isAreaOccupied(l,this.currentIdClickedRoom)||(this.renderer.setStyle(i,"grid-area",l),this.planHouse[this.currentIdClickedRoom].gridArea=l)}onContextMenu(t){t.preventDefault()}onScroll=(0,kV.throttle)(()=>{this.currentIdClickedRoom!==void 0&&this.calculateRoomSpanSettings()},100);escapeDraggingMode(){console.log("keyup",this.currentIdClickedRoom),this.isDragging=!1,this.currentIdClickedRoom=void 0;let t=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');console.log(t),t&&(this.renderer.removeStyle(t,"background-color"),this.renderer.removeStyle(t,"cursor"))}clickRoom(t,i){if(this.currentViewRoom!==void 0)return;this.currentIdClickedRoom=i;let r=t.target;this.previousGridArea=window.getComputedStyle(r).getPropertyValue("grid-area"),this.isClick&&!this.isDragging?(this.isDoubleClick=!0,this.isClick=!1,this.openViewRoom(this.currentIdClickedRoom)):this.isClick=!0,setTimeout(()=>{this.isDoubleClick||!this.isClick||(this.calculateRoomSpanSettings(),this.renderer.setStyle(r,"cursor","grabbing"),this.isDragging=!0,this.renderer.setStyle(r,"background-color","#A3B18A"),this.currentIdClickedRoom=i,this.isClick=!1)},350)}closeGuide(){this.accountCookieService.setGuideRule(),this.isGuideVisible=!1,this.guideTemplate==this.roomsGuideTemplate1&&(this.guideTemplate=this.roomsGuideTemplate2,this.showGuide())}turnoffGuides(t){t?(this.accountCookieService.setGuideRule(),this.sceneOpenToggle===!0&&this.currentViewRoom!==void 0&&(this.guideTemplate=this.roomGuideTemplate)):this.accountCookieService.deleteGuideRule(),this.checkGuideInclude()}updateRoomObjects(t){this.currentViewRoom!==void 0&&(this.planHouse[this.currentViewRoom].objects=t,this.emitPlanHouse(),this.saveHouse())}openScene(){this.isGuideIncluded&&(this.guideTemplate=this.roomGuideTemplate,this.showGuide());let t=this.location.path()+"/"+this.currentViewRoom;this.location.replaceState(t),this.sceneOpenToggle=!0}closeScene(){let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t),this.sceneComponent.saveRoom(),this.sceneOpenToggle=!1}closeViewRoom(){let t=this.roomSpan.querySelector(`[data-index="${this.currentViewRoom}"]`);!t||!this.oldSizeViewRoom||(this.currentViewRoom=void 0,this.currentIdClickedRoom=void 0,this.renderer.setStyle(t,"width",this.oldSizeViewRoom.width+"px"),this.renderer.setStyle(t,"height",this.oldSizeViewRoom.height+"px"),this.renderer.removeStyle(t,"border"),this.renderer.removeClass(t,"roomView"),this.renderer.setStyle(this.roomSpan,"display","grid"),setTimeout(()=>{this.renderer.removeStyle(t,"width"),this.renderer.removeStyle(t,"height")},750))}updateRoom(){if(!(this.currentIdClickedRoom===void 0||!this.roomForm.value.name)){if(this.roomForm.value.name===this.planHouse[this.currentIdClickedRoom].name){this.toggleOpenRoomModule();return}this.planHouse[this.currentIdClickedRoom].name=this.roomForm.value.name,this.roomForm.patchValue({width:null,height:null,length:null,name:""}),this.emitPlanHouse(),this.toggleOpenRoomModule(),this.saveHouse()}}addRoom(){let{width:t,length:i,height:r,name:o}=this.roomForm.value;this.toggleOpenRoomModule();let s={name:o,roomProportions:{width:+t,height:+r,length:+i},objects:[],gridArea:""},a=this.findFreeSpace(s.roomProportions);a&&(s.gridArea=a,this.planHouse=[...this.planHouse,s],this.emitPlanHouse(),this.saveHouse())}deleteRoom(){this.currentIdClickedRoom!==void 0&&(this.planHouse.splice(this.currentIdClickedRoom,1),this.currentIdClickedRoom=void 0,this.toggleOpenRoomModule(),this.emitPlanHouse(),this.saveHouse(),this.toggleControls(!0))}toggleControls(t){t?(this.roomForm.get("width")?.enable(),this.roomForm.get("height")?.enable(),this.roomForm.get("length")?.enable()):(this.roomForm.get("width")?.disable(),this.roomForm.get("height")?.disable(),this.roomForm.get("length")?.disable())}toggleOpenRoomModule(t){if(this.toggleModuleButton){if(t!==void 0){let{width:i,height:r,length:o}=this.planHouse[t].roomProportions;this.roomForm.patchValue({width:i,height:r,length:o,name:this.planHouse[t].name}),this.toggleControls(this.currentIdClickedRoom===void 0),this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg");return}this.formElement.classList.contains("openAddModule")?(this.formElement.classList.remove("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","0deg"),this.currentIdClickedRoom=void 0,this.roomForm.patchValue({width:null,height:null,length:null,name:""})):(this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg"))}}openViewRoom(t){this.formElement.classList.remove("openAddModule"),this.currentViewRoom=t,this.lastPlanHouse=this.planHouse[t];let i=this.roomSpan.querySelector(`[data-index="${t}"]`),{width:r,height:o}=i.getBoundingClientRect(),{width:s,height:a}=this.roomSpan.getBoundingClientRect();this.oldSizeViewRoom={height:o,width:r},this.renderer.setStyle(i,"width",r+"px"),this.renderer.setStyle(i,"height",o+"px"),setTimeout(()=>{let l=r>o?s/2/r:a/2/o;this.renderer.setStyle(i,"width",r*l+"px"),this.renderer.setStyle(i,"height",o*l+"px"),this.renderer.setStyle(i,"border","white 3px dashed"),this.renderer.addClass(i,"roomView"),this.renderer.setStyle(this.roomSpan,"display","flex")},0)}roomForm=new ki({width:new kn(null,[Et.required,Et.min(1),Et.max(10),Et.pattern(/^\d*\.?\d+$/)]),height:new kn(null,[Et.required,Et.min(1),Et.max(5),Et.pattern(/^\d*\.?\d+$/)]),length:new kn(null,[Et.required,Et.min(1),Et.max(10),Et.pattern(/^\d*\.?\d+$/)]),name:new kn("",[Et.required,Et.maxLength(20)])});static \u0275fac=function(i){return new(i||n)(de(wr),de(nn),de(Nf),de(oo),de(bi),de(Qi),de(Vi))};static \u0275cmp=vn({type:n,selectors:[["app-plan-house"]],viewQuery:function(i,r){if(i&1&&(Ri(lce,5),Ri(cce,7),Ri(uce,7),Ri(dce,7)),i&2){let o;si(o=ai())&&(r.sceneComponent=o.first),si(o=ai())&&(r.roomsGuideTemplate1=o.first),si(o=ai())&&(r.roomsGuideTemplate2=o.first),si(o=ai())&&(r.roomGuideTemplate=o.first)}},hostBindings:function(i,r){i&1&&Re("mouseleave",function(s){return r.onMouseLeave(s)},!1,Pr)("touchend",function(s){return r.onMouseUp(s)},!1,Pr)("keyup.Enter",function(s){return r.onMouseUp(s)},!1,Pr)("mouseup",function(s){return r.onMouseUp(s)},!1,Pr)("touchmove",function(s){return r.onMouseMove(s)},!1,Pr)("mousemove",function(s){return r.onMouseMove(s)},!1,Pr)("keydown.ArrowUp",function(s){return r.moveRoom(s)},!1,Pr)("keydown.ArrowDown",function(s){return r.moveRoom(s)},!1,Pr)("keydown.ArrowRight",function(s){return r.moveRoom(s)},!1,Pr)("keydown.ArrowLeft",function(s){return r.moveRoom(s)},!1,Pr)("contextmenu",function(s){return r.onContextMenu(s)},!1,Pr)("scroll",function(){return r.onScroll()},!1,Co)("keydown.Escape",function(){return r.escapeDraggingMode()},!1,Pr)},inputs:{planHouse:"planHouse"},outputs:{initialized:"initialized",planHouseEmitter:"planHouseEmitter",callSaveEmitter:"callSaveEmitter"},decls:46,vars:23,consts:[["scene",""],["roomsGuideTemplate1",""],["roomsGuideTemplate2",""],["roomGuideTemplate",""],[1,"planHouseModule"],[1,"addModuleSpan"],["type","button","tabindex","0",1,"addModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","",2,"transition","all 0.5s","pointer-events","none"],[1,"addModuleFormContent",3,"ngSubmit","formGroup"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","width",1,"inputLabel"],["placeholder","5","formControlName","width","max","10","min","0.1","id","width","type","number","step","0.1",1,"addModuleInput"],["class","validation-error",4,"ngIf"],["for","length",1,"inputLabel"],["placeholder","3","formControlName","length","max","10","min","0.1","id","length","type","number","step","0.1",1,"addModuleInput"],["for","height",1,"inputLabel"],["placeholder","2.5","formControlName","height","max","10","min","0.1","id","height","type","number","step","0.1",1,"addModuleInput"],["for","name",1,"inputLabel"],["placeholder","\u0413\u043E\u0441\u0442\u0438\u043D\u0430\u044F","formControlName","name","id","name","type","text",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],["class","deleteItemAddModuleBtn",3,"click",4,"ngIf"],[1,"workArea"],[1,"guideSwitcher",3,"click","title"],[3,"saveObjectsEmitter","roomData"],[1,"roomSpan"],["class","room",3,"grid-area","display","touchstart","keydown.enter","mousedown",4,"ngFor","ngForOf"],["class","furnitureCategoriesButtonsSpan",4,"ngIf"],["class","guideOverlay",4,"ngIf"],[1,"validation-error"],[1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt",""],[1,"room",3,"touchstart","keydown.enter","mousedown"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton",3,"href",4,"ngFor","ngForOf"],[1,"furnitureCategoryButton",3,"href"],[1,"guideOverlay"],[1,"guideSpan"],[1,"guideWindow",3,"ngTemplateOutlet"],["src","assets/images/addIcon.svg","alt","Close",1,"closeIcon",3,"click"],[1,"guideContainer"],[1,"guideSection"],[1,"guideText"],[1,"animationContainer",2,"display","flex","justify-content","center"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","pressMouse"],[1,"dividerWithText"],[1,"dividerLine"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","pressMousetwice"],[1,"animationContainer"],["src","assets/images/mouse.svg","alt","Mouse",1,"mouse","xMouse"],[1,"dividerText"],[1,"keyboardHint"],["src","assets/images/enter.svg","alt","Enter",1,"enterKey"],[1,"arrowsWrapper"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","top",2,"rotate","90deg"],[1,"middleArrows"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","left"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","bottom",2,"rotate","270deg"],["src","assets/images/arrowLeft.svg","alt","<--",1,"arrowKey","right",2,"rotate","180deg"],["src","assets/images/qButton.svg","alt","q",1,"arrowKey","left",2,"width","50px"],["src","assets/images/eButton.svg","alt","e",1,"arrowKey","right",2,"width","50px"]],template:function(i,r){if(i&1){let o=Rt();R(0,"span",4)(1,"span",5)(2,"button",6),Re("click",function(){return Be(o),Ve(r.currentViewRoom===void 0?r.toggleOpenRoomModule():r.sceneOpenToggle===!0?r.closeScene():r.closeViewRoom())}),we(3,"img",7),P(),R(4,"form",8),Re("ngSubmit",function(){return Be(o),Ve(r.currentIdClickedRoom===void 0?r.addRoom():r.updateRoom())}),R(5,"h2",9),te(6,"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u043A\u043E\u043C\u043D\u0430\u0442\u044B"),P(),R(7,"span",10)(8,"label",11),te(9,"\u0428\u0438\u0440\u0438\u043D\u0430(\u043C)"),P(),we(10,"input",12),ke(11,fce,2,0,"span",13),P(),R(12,"span",10)(13,"label",14),te(14,"\u0414\u043B\u0438\u043D\u0430(\u043C)"),P(),we(15,"input",15),ke(16,hce,2,0,"span",13),P(),R(17,"span",10)(18,"label",16),te(19,"\u0412\u044B\u0441\u043E\u0442\u0430(\u043C)"),P(),we(20,"input",17),ke(21,pce,2,0,"span",13),P(),R(22,"span",10)(23,"label",18),te(24,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),P(),we(25,"input",19),ke(26,mce,2,0,"span",13),P(),R(27,"span",20)(28,"button",21),te(29,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"),P(),ke(30,gce,2,0,"button",22),P()()(),R(31,"span",23)(32,"button",24),Re("click",function(){return Be(o),Ve(r.turnoffGuides(!!r.isGuideIncluded))}),te(33),P(),R(34,"app-scene",25,0),Re("saveObjectsEmitter",function(a){return Be(o),Ve(r.updateRoomObjects(a))}),P(),R(36,"span",26),ke(37,vce,2,6,"button",27)(38,_ce,2,1,"span",28),P()()(),ke(39,xce,4,1,"div",29)(40,wce,13,0,"ng-template",null,1,ro)(42,bce,22,0,"ng-template",null,2,ro)(44,Ece,16,0,"ng-template",null,3,ro)}if(i&2){let o,s,a,l;W(2),ni("rotate",r.currentViewRoom===void 0?"0deg":"225deg"),W(2),ni("opacity",r.currentViewRoom===void 0?1:0),ne("formGroup",r.roomForm),W(7),ne("ngIf",((o=r.roomForm.get("width"))==null?null:o.invalid)&&((o=r.roomForm.get("width"))==null?null:o.touched)),W(5),ne("ngIf",((s=r.roomForm.get("length"))==null?null:s.invalid)&&((s=r.roomForm.get("length"))==null?null:s.touched)),W(5),ne("ngIf",((a=r.roomForm.get("height"))==null?null:a.invalid)&&((a=r.roomForm.get("height"))==null?null:a.touched)),W(5),ne("ngIf",((l=r.roomForm.get("name"))==null?null:l.invalid)&&((l=r.roomForm.get("name"))==null?null:l.touched)),W(2),ne("disabled",!r.roomForm.valid),W(2),ne("ngIf",r.currentIdClickedRoom!==void 0),W(2),ne("title",r.isGuideIncluded?"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C":"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C"),W(),cr(" \u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438 \u043F\u043E \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044E ",r.isGuideIncluded?"\u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B":"\u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u044B"," "),W(),ni("opacity",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0)("z-index",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0),ne("roomData",r.currentViewRoom!==void 0?r.planHouse[r.currentViewRoom]:r.lastPlanHouse),W(2),Sn("viewRoomSmallScreen",r.currentViewRoom!==void 0),W(),ne("ngForOf",r.planHouse),W(),ne("ngIf",!r.sceneOpenToggle&&r.currentViewRoom!==void 0),W(),ne("ngIf",r.isGuideVisible&&r.isGuideIncluded)}},dependencies:[gl,wi,ss,Ra,os,mm,Ia,Da,gm,RT,js,Gs,Tn,Yw],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.workArea[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;grid-area:1/1/2/2}app-scene[_ngcontent-%COMP%]{grid-area:1/1/2/2}.roomSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;gap:10px;grid-template-columns:repeat(10,calc(10% - 10px));grid-template-rows:repeat(10,calc(10% - 10px));aspect-ratio:1;justify-content:space-around;z-index:0}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;cursor:pointer;z-index:3;border:none;transition:all .75s ease-in-out,background-color .4s ease-in-out;color:#dad7cd;font-size:1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.guideSwitcher[_ngcontent-%COMP%]{grid-area:1/1/2/2;height:40px;width:fit-content;padding:10px;align-self:flex-start;justify-self:center;background:none;border:none;border-bottom:1px solid transparent;cursor:pointer;color:gray;margin-top:-45px;transition:all .3s ease-in-out;position:relative}.guideSwitcher[_ngcontent-%COMP%]:hover{color:#fff!important;border-bottom-color:#fff}.guideSwitcher[_ngcontent-%COMP%]:hover:after{width:100%}.guideSwitcher[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:1px;background:#fff;transition:width .3s ease-in-out}.dividerWithText[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.dividerLine[_ngcontent-%COMP%]{flex:1;height:2px;background-color:#1f1f1f}.dividerText[_ngcontent-%COMP%]{padding:0 10px;color:#666;font-size:14px}.planHouseModule[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-template-columns:1fr}.roomView[_ngcontent-%COMP%]{margin-left:30px;align-self:start;margin-top:30px}.addModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:5;width:35px;aspect-ratio:1;margin-top:10px;justify-self:end;cursor:pointer;rotate:45deg;transition:all .4s ease-in-out}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.addModuleSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;min-width:300px;width:35%;justify-self:end;padding-right:30px;height:fit-content;margin-top:30px;margin-right:30px}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:calc(100% - 60px);padding:0 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 5px #fff;overflow:hidden;transition:all .4s ease-in-out;max-height:0;border-radius:10px;background-color:#000;z-index:4}.openAddModule[_ngcontent-%COMP%]{max-height:1000px;padding:30px 45px}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleInput.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff6b6b;background-color:#ff6b6b0d}.validation-error[_ngcontent-%COMP%]{color:#ff6b6b;font-size:12px;margin-top:4px;display:block;height:16px}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.functionShopsModuleBtns[_ngcontent-%COMP%]{display:flex;gap:10px}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:10px;padding:15px;width:100%;border:none;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{width:20%;height:50px;display:flex;align-items:center;justify-content:center;border-radius:15px;background-color:#a3b18a;border:none;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:25px}.none[_ngcontent-%COMP%]{display:none}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;height:250px;margin-top:100px;max-height:400px;padding:15px;overflow-y:scroll;overflow-x:hidden;width:30%}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;flex-shrink:0;color:#fff;cursor:pointer;border:none;text-decoration:none;transition:all .3s ease-in-out}.furnitureCategoryButton[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@media (max-width: 768px){.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{width:100%}.viewRoomSmallScreen[_ngcontent-%COMP%]{flex-direction:column}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(30% - 5px)}.addModuleSpan[_ngcontent-%COMP%]{margin-right:0;padding-right:0}.workArea[_ngcontent-%COMP%]{flex-direction:column}}.furnitureCategory[_ngcontent-%COMP%]{grid-area:1/1/2/2;background-color:#000;z-index:4;display:flex;flex-direction:column;gap:30px;height:0px;padding:0 10px;overflow:hidden;transition:all .5s ease-in-out}.furnitureCategoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.furnitureList[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.openFurniturelist[_ngcontent-%COMP%]{height:100%;padding:50px 10px 10px}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);display:flex;gap:10px;flex-direction:column;align-items:center}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}.guideContainer[_ngcontent-%COMP%]{background-color:#000;border-radius:12px;padding:1.5rem;color:#dad7cd;display:flex;flex-direction:column;gap:1.5rem;max-width:100%;box-sizing:border-box}.guideSection[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;flex:1}.guideText[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,1.3rem);margin:0;color:#a3b18a;text-align:center;line-height:1.4}.animationContainer[_ngcontent-%COMP%]{position:relative;width:140px;aspect-ratio:1;margin:.5rem 0}.mouse[_ngcontent-%COMP%]{position:absolute;width:40px}.xMouse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_crossAnimation 3s infinite ease-in-out}.pressMouse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pressAnimation 1.5s infinite ease-in-out}.pressMousetwice[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pressAnimationTwice 1.5s infinite ease-in-out}@keyframes _ngcontent-%COMP%_pressAnimation{0%,40%{transform:translateY(0)}20%{transform:translateY(10px)}}@keyframes _ngcontent-%COMP%_pressAnimationTwice{0%,30%,60%{transform:translateY(0)}15%,45%{transform:translateY(10px)}}.keyboardHint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;width:100%;max-width:300px;justify-content:center}.enterKey[_ngcontent-%COMP%]{width:100px;aspect-ratio:2}.middleArrows[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.arrowsWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.arrowKey[_ngcontent-%COMP%]{width:40px;aspect-ratio:1;opacity:.5;transition:opacity .3s}.arrowKey.top[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 0s}.arrowKey.right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite .5s}.arrowKey.bottom[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 1s}.arrowKey.left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseArrow 2s infinite 1.5s}@keyframes _ngcontent-%COMP%_crossAnimation{0%,to{transform:translateY(50%)}25%{transform:translate(100px,50%)}50%{transform:translate(50px)}75%{transform:translate(50px,100%)}}@keyframes _ngcontent-%COMP%_pulseArrow{0%,to{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}.guideOverlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background-color:#000000b3;z-index:10}.guideOverlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.guideSpan[_ngcontent-%COMP%]{position:relative;background-color:#000;border-radius:12px;padding:2rem;max-width:90%;width:50%;max-height:90vh;overflow-y:auto;box-shadow:0 0 20px #a3b18a4d}.closeIcon[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;width:1.5rem;height:1.5rem;cursor:pointer;rotate:45deg;transition:transform .2s}.closeIcon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@media (max-width: 768px){.guideContainer[_ngcontent-%COMP%]{padding:1rem;gap:1rem}.animationContainer[_ngcontent-%COMP%]{max-width:150px}.keyboardHint[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.arrowsWrapper[_ngcontent-%COMP%]{width:60%}.guideSpan[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width: 480px){.guideText[_ngcontent-%COMP%]{font-size:.9rem}.animationContainer[_ngcontent-%COMP%]{max-width:120px}}']})}return n})();function Th(){return/windows nt|macintosh|x11|linux/.test(navigator.userAgent.toLowerCase())}var Zw=(()=>{class n{httpModule;constructor(t){this.httpModule=t}baseServiceUrl=ri+"finder?q=";GETfindFurnitures(t){return tn(this.httpModule.get(this.baseServiceUrl+t))}static \u0275fac=function(i){return new(i||n)(ze(Li))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kc=(()=>{class n{httpModule;baseServiceUrl=ri+"furniture/images/";constructor(t){this.httpModule=t}GETaccountAvatar(t){return`${ri}avatar?jwt=${t}`}POSTuploadUserAvatar(t,i){let r=new FormData;r.append("image",t);let o=new Jt().set("jwt",i);return tn(this.httpModule.post(`${ri}avatar/upload`,r,{params:o}))}POSTuploadProjectImages(t,i,r,o){let s=new FormData;console.log(i.images),i.images.forEach(l=>s.append("images",l));let a=new Jt().set("furnitureCardId",o).set("color",t).set("idMainImage",i.idMainImage).set("jwt",r);return tn(this.httpModule.post(this.baseServiceUrl+"upload/images",s,{params:a}))}DELETEprojectColor(t,i,r){let o=new Jt().set("jwt",t).set("furnitureCardId",i).set("color",r);return tn(this.httpModule.delete(this.baseServiceUrl+"delete/color",{params:o}))}DELETEproject(t,i){let r=new Jt().set("jwt",t).set("furnitureCardId",i);return tn(this.httpModule.delete(this.baseServiceUrl+"delete/project",{params:r}))}GETallProjectImages(t,i){let r=new Jt().set("furnitureCardId",t).set("color",i);return tn(this.httpModule.get(this.baseServiceUrl+"all",{params:r}))}GETmainImage(t,i){return`${this.baseServiceUrl}main?furnitureCardId=${t}&color=${i}`}static \u0275fac=function(i){return new(i||n)(ze(Li))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sce=(n,e)=>({variantCardDesktop:n,variantCardMobile:e});function Cce(n,e){n&1&&(R(0,"h3"),te(1,"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E :("),P())}function Tce(n,e){if(n&1&&(R(0,"span",10)(1,"div")(2,"h3",11),te(3),P(),R(4,"a",12),te(5),Ea(6,"costFormat"),P()(),we(7,"img",13),P()),n&2){let t=e.$implicit,i=_e();ne("ngClass",ay(7,Sce,i.checkDesktop(),!i.checkDesktop())),W(3),Ln(t.name),W(),ne("href",i.getUrl(t.id,t.category),lr),W(),cr("",Ma(6,5,t.cost)," \u20BD"),W(2),ne("src",i.getImage(t.id,t.colorRequest),lr)}}var UV=(()=>{class n{finderService;elementRef;renderer;imageService;constructor(t,i,r,o){this.finderService=t,this.elementRef=i,this.renderer=r,this.imageService=o}variantsSpan;inputElement;foundFurniture;debounceTimer=null;ngAfterViewInit(){this.variantsSpan=this.elementRef.nativeElement.querySelector(".variantsSpan"),this.inputElement=this.elementRef.nativeElement.querySelector(".finderInput")}findFurnitures(t){return at(this,null,function*(){let i=yield this.finderService.GETfindFurnitures(t);this.openFoundResultsList(),i.length>0?(this.closeFoundResultsList(),setTimeout(()=>{this.foundFurniture=i,this.openFoundResultsList()},400)):this.foundFurniture!==void 0?this.foundFurniture.length=0:this.foundFurniture=[]})}openFoundResultsList(){this.variantsSpan!==void 0&&this.renderer.addClass(this.variantsSpan,"variantsSpanOpen")}closeFoundResultsList(){this.variantsSpan!==void 0&&this.renderer.removeClass(this.variantsSpan,"variantsSpanOpen")}checkDesktop=Th;clearInput(){this.inputElement.value="",this.closeFoundResultsList()}inputProcess(){let t=this.inputElement.value;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{if(t.length===0){this.closeFoundResultsList();return}this.findFurnitures(t)},300)}getImage(t,i){return this.imageService.GETmainImage(t,i)}getUrl(t,i){return`shop/${i??"all"}/${t}`}static \u0275fac=function(i){return new(i||n)(de(Zw),de(nn),de(wr),de(kc))};static \u0275cmp=vn({type:n,selectors:[["app-finder"]],decls:10,vars:2,consts:[[1,"finder"],[1,"finderSpan"],["routerLink","/shop","title","\u041F\u043E\u0438\u0441\u043A",1,"finderBtn","btn"],["loading","lazy","src","/assets/images/searchIcon.svg","alt","search"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438","type","text",1,"finderInput",3,"input"],["title","\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043F\u043E\u043B\u0435",1,"closeBtn","btn",3,"click"],["src","/assets/images/cancelIcon.svg","alt",""],[1,"variantsSpan"],[4,"ngIf"],["class","variantCard",3,"ngClass",4,"ngFor","ngForOf"],[1,"variantCard",3,"ngClass"],[1,"cardName"],[1,"cardCost",3,"href"],["alt","",1,"cardImage",3,"src"]],template:function(i,r){i&1&&(R(0,"span",0)(1,"span",1)(2,"button",2),we(3,"img",3),P(),R(4,"input",4),Re("input",function(){return r.inputProcess()}),P(),R(5,"button",5),Re("click",function(){return r.clearInput()}),we(6,"img",6),P()(),R(7,"span",7),ke(8,Cce,2,0,"h3",8)(9,Tce,8,10,"span",9),P()()),i&2&&(W(8),ne("ngIf",r.foundFurniture!==void 0&&r.foundFurniture.length===0),W(),ne("ngForOf",r.foundFurniture))},dependencies:[Ao,wi,Tn,rs,Ff],styles:['@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.finder[_ngcontent-%COMP%]{width:100%;min-height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto 1fr}.finderSpan[_ngcontent-%COMP%]{width:100%;height:48px;display:flex;gap:10px;border-radius:15px;background-color:#fff;padding:0 10px;z-index:3;grid-area:1/1/2/2;align-items:center;justify-content:space-around}.btn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{aspect-ratio:1;background:none;border:none;cursor:pointer}.finderBtn[_ngcontent-%COMP%]{height:90%}.closeBtn[_ngcontent-%COMP%]{height:50%;align-self:center;filter:opacity(.75)}.finderInput[_ngcontent-%COMP%]{width:75%;background:none;border:none;outline:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.variantsSpan[_ngcontent-%COMP%]{transition:all .5s ease-in-out;overflow:hidden;max-height:0;grid-area:1/1/2/2;background-color:#000;border-radius:15px;box-shadow:0 0 5px #fff;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:10px;box-sizing:border-box;width:calc(100% + 20px);z-index:2}.variantsSpanOpen[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.variantsSpanOpen[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;padding:60px 10px 10px;overflow-y:scroll;max-height:400px}.variantCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;height:80%;transition:all .5s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}.cardCost[_ngcontent-%COMP%]{border-radius:5px;color:gray;transition:all .5s ease-in-out;cursor:pointer;text-decoration:none;font-variant-numeric:tabular-nums}.variantCardDesktop[_ngcontent-%COMP%]:hover{height:90%}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardCost[_ngcontent-%COMP%]{padding:15px 45px;color:#000;background-color:#fff}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardName[_ngcontent-%COMP%]{margin-bottom:25px}.variantCardDesktop[_ngcontent-%COMP%]:hover   .cardImage[_ngcontent-%COMP%]{height:65%}.variantCardMobile[_ngcontent-%COMP%]{height:90%}.variantCardMobile[_ngcontent-%COMP%]   .cardCost[_ngcontent-%COMP%]{margin-top:10px;display:block;padding:0 45px;height:50px;line-height:50px;color:#000;background-color:#fff;font-size:18px}.variantCardMobile[_ngcontent-%COMP%]   .cardName[_ngcontent-%COMP%]{font-size:23px;margin-bottom:50px}.variantCardMobile[_ngcontent-%COMP%]   .cardImage[_ngcontent-%COMP%]{height:65%}.cardImage[_ngcontent-%COMP%]{height:60%;width:fit-content;transition:all .5s ease-in-out}.cardName[_ngcontent-%COMP%]{color:#fff;transition:all .5s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin:5px 0}.variantsSpan[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff}']})}return n})();function Ace(n,e){if(n&1){let t=Rt();R(0,"button",5),Re("click",function(){Be(t);let r=_e();return Ve(r.toggleMenu())}),we(1,"img",6),P()}if(n&2){let t=_e();Sn("active",t.menuOpen)}}function Ice(n,e){n&1&&(R(0,"div",7),we(1,"app-finder"),R(2,"span",8)(3,"a",9),we(4,"img",10),P(),R(5,"a",11),BS(),R(6,"svg",12),we(7,"path",13),P()(),VS(),R(8,"a",14),we(9,"img",15),P(),R(10,"a",16),we(11,"img",17),P()()())}function Dce(n,e){n&1&&(R(0,"div",18),we(1,"app-finder"),R(2,"a",19),we(3,"img",10),R(4,"div"),te(5,"\u0410\u043A\u043A\u0430\u0443\u043D\u0442"),P()(),R(6,"a",20),BS(),R(7,"svg",12),we(8,"path",13),P(),VS(),R(9,"div"),te(10,"\u041F\u043B\u0430\u043D"),P()(),R(11,"a",21),we(12,"img",15),R(13,"div"),te(14,"\u041C\u0435\u0431\u0435\u043B\u044C"),P()(),R(15,"a",22),we(16,"img",17),R(17,"div"),te(18,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D"),P()()())}var ws=(()=>{class n{menuOpen=!1;isMobileView=!1;ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=750,this.isMobileView||(this.menuOpen=!1)}toggleMenu(){this.menuOpen=!this.menuOpen}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=vn({type:n,selectors:[["app-navigation-panel"]],hostBindings:function(i,r){i&1&&Re("resize",function(s){return r.checkViewport(s)},!1,Co)},decls:6,vars:3,consts:[[1,"navigationSpan"],["routerLink","/",1,"homeBtn","navigationBtn"],["class","hamburger-menu",3,"active","click",4,"ngIf"],["class","desktop-content",4,"ngIf"],["class","mobile-menu",4,"ngIf"],[1,"hamburger-menu",3,"click"],["ng","","loading","lazy","src","/assets/images/hamburgerMenuIcon.svg","alt","menu"],[1,"desktop-content"],[1,"mainBtns"],["routerLink","/account",1,"accountBtn","navigationBtn"],["loading","lazy","src","/assets/images/accountIcon.svg","alt","account"],["routerLink","/plan",1,"createBtn","navigationBtn"],["viewBox","0 0 32 32"],["d","M28,14H18V4c0-1.104-0.896-2-2-2s-2,0.896-2,2v10H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h10v10c0,1.104,0.896,2,2,2 s2-0.896,2-2V18h10c1.104,0,2-0.896,2-2S29.104,14,28,14z","fill","#DAD7CD"],["routerLink","/create/new",1,"navigationBtn"],["loading","lazy","src","/assets/images/furnitureIcon.svg","alt","furniture"],["routerLink","/shop",1,"navigationBtn"],["loading","lazy","src","/assets/images/shopIcon.svg","alt","shop"],[1,"mobile-menu"],["routerLink","/account",1,"mobile-menu-item"],["routerLink","/plan",1,"mobile-menu-item"],["routerLink","/create/new",1,"mobile-menu-item"],["routerLink","/shop",1,"mobile-menu-item"]],template:function(i,r){i&1&&(R(0,"span",0)(1,"a",1),te(2,"HQ"),P(),ke(3,Ace,2,2,"button",2)(4,Ice,12,0,"div",3)(5,Dce,19,0,"div",4),P()),i&2&&(W(3),ne("ngIf",r.isMobileView),W(),ne("ngIf",!r.isMobileView),W(),ne("ngIf",r.isMobileView&&r.menuOpen))},dependencies:[rs,UV,Tn],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.desktop-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:80%;height:100%}.navigationBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{height:100%}app-finder[_ngcontent-%COMP%]{height:80%;width:60%}.homeBtn[_ngcontent-%COMP%]{color:#dad7cd;font-family:Gloock;font-size:27.5px;text-decoration:none;align-content:center}.navigationSpan[_ngcontent-%COMP%]{display:flex;background-color:#000;border-radius:10px;gap:5px;justify-content:space-around;width:calc(90vw - 30px);min-width:550px;margin:0 auto;height:60px;align-items:center;border:1px solid rgba(163,177,138,.3);position:relative}@media (max-width: 750px){.navigationSpan[_ngcontent-%COMP%]{justify-content:space-between;padding:0 15px;width:calc(90vw - 30px);min-width:auto}}.navigationBtn[_ngcontent-%COMP%]{height:80%;background:none;border:none;cursor:pointer}.mainBtns[_ngcontent-%COMP%]{height:75%;display:flex;gap:15px;align-items:center}.createBtn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:sepia(4%)}.hamburger-menu[_ngcontent-%COMP%]{display:none;background:none;border:none;cursor:pointer;padding:0;height:30px;width:30px;transition:all .5s ease-in-out}.hamburger-menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.hamburger-menu.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(64%) sepia(11%) saturate(1233%) hue-rotate(71deg) brightness(92%) contrast(86%)}@media (max-width: 750px){.hamburger-menu[_ngcontent-%COMP%]{display:block}}.mobile-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:100%;margin-top:10px;left:0;right:0;background-color:#000;border-radius:10px;padding:15px;flex-direction:column;gap:15px;z-index:100;border:1px solid rgba(163,177,138,.3)}.mobile-menu[_ngcontent-%COMP%]   app-finder[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-bottom:10px;height:40px}.mobile-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#dad7cd;text-decoration:none;padding:8px}.mobile-menu-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .mobile-menu-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.mobile-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 750px){.desktop-content[_ngcontent-%COMP%]{display:none}.mobile-menu[_ngcontent-%COMP%]{display:flex}}']})}return n})();var Rce={images:["/assets/images/sofaSliderPhotos/1.png","/assets/images/sofaSliderPhotos/2.png","/assets/images/sofaSliderPhotos/3.png","/assets/images/sofaSliderPhotos/4.png"],idMainImage:0},BV={name:"Onte Bucle White",colors:[{color:"#FFC2CC",imagesData:Rce}],description:`\u041C\u0435\u0445\u0430\u043D\u0438\u0437\u043C: \u043F\u0430\u043D\u0442\u043E\u0433\u0440\u0430\u0444
\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0442 \u043F\u043E\u043B\u0430: 12 \u0441\u043C
\u042F\u0449\u0438\u043A \u0434\u043B\u044F \u0431\u0435\u043B\u044C\u044F: \u0434\u0430
\u041C\u0430\u043A\u0441. \u043D\u0430\u0433\u0440\u0443\u0437\u043A\u0430: 100 \u043A\u0433`,shops:[{cost:125990,url:"https://www.divan.ru/blagoveshchensk/product/divan-uglovoj-onte-bucle-white"},{cost:84990,url:"https://avtorm.ru/catalog/product-divan-uglovoy-onte-bucle-white"}],additionalData:{category:"sofa"},proportions:{width:1,height:1,length:1}},VV=[{name:"\u041F\u0440\u0438\u0445\u043E\u0436\u0430\u044F",objects:[],gridArea:"1 / 1 / 3 / 4",roomProportions:{width:3,length:2,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:"3 / 1 / 4 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:" 4 / 1 / 5 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0413\u043E\u0441\u0442\u0438\u043D\u043D\u0430\u044F",objects:[],gridArea:"5 / 1 / 8 / 5",roomProportions:{width:4,length:3,height:3}},{name:"\u0421\u043F\u0430\u043B\u044C\u043D\u044F",objects:[],gridArea:" 3 / 2 / 5 / 4",roomProportions:{width:2,length:2,height:3}}];var HV=n=>({activeChapterBtn:n}),zV=n=>({opacityDisable:n});function Pce(n,e){n&1&&(R(0,"span",24)(1,"div",25)(2,"span",26),we(3,"div")(4,"div")(5,"div")(6,"div"),P()(),R(7,"span",27)(8,"span",28),we(9,"div",29)(10,"div",30)(11,"div",31)(12,"div",32),P(),R(13,"h1",33),te(14,"HOUSEQUALITY"),P(),R(15,"span",34)(16,"button",35),te(17,"Shop"),P(),R(18,"button",36),te(19,"Furniture"),P(),R(20,"button",37),te(21,"Project"),P(),R(22,"button",38),te(23,"Profile"),P()()()())}function Oce(n,e){n&1&&(R(0,"a",39),te(1,"\u041F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u043A\u0430"),P())}var jV=(()=>{class n{elementRef;router;constructor(t,i){this.elementRef=t,this.router=i}furnitureTemplate="create";furnitureExampleData=BV;planHouseExampleData=VV;isMobileView=!1;ngAfterViewInit(){this.elementRef.nativeElement.querySelectorAll("app-create-furniture,app-plan-house").forEach(t=>{t.querySelectorAll("*").forEach(i=>{i.setAttribute("tabindex","-1"),i.style.pointerEvents="none"})})}ngOnInit(){this.checkViewport()}checkViewport(){this.isMobileView=window.innerWidth<=600}focusFinder(){let t=this.elementRef.nativeElement.querySelector(".finderInput");t&&t.focus()}openViewFurniture(){this.furnitureTemplate="view"}openCreateFurniture(){this.furnitureTemplate="create"}navigateToPage(t){this.router.navigateByUrl(t)}static \u0275fac=function(i){return new(i||n)(de(nn),de(dr))};static \u0275cmp=vn({type:n,selectors:[["app-main-page"]],hostBindings:function(i,r){i&1&&Re("resize",function(s){return r.checkViewport(s)},!1,Co)},decls:60,vars:17,consts:[["class","startScreenSpan",4,"ngIf"],[1,"mainInformation"],[1,"projectPreviewSpan"],[1,"someSpan"],[1,"chapterTitle",2,"margin-bottom","0"],[1,"descriptionText"],[1,"exampleFunctions"],[1,"quarter-circle","figureFunction"],[1,"exampleFunctionTitle"],[1,"exampleFunctionDescription"],[1,"square","figureFunction",2,"border-radius","20px"],[1,"chapterTitle"],[1,"chapterChangeBtnsSpan"],[1,"changeChapterBtn",3,"click","ngClass"],[1,"furnitureModule"],[1,"furnitureModuleVariant",3,"click","furnitureData","ngClass"],[3,"click","planHouse"],[1,"footerColumnsSpan"],[1,"footerColumn"],[1,"footerMenuBtn",2,"color","#DAD7CD",3,"click"],["routerLink","/account",1,"footerMenuBtn"],["routerLink","/create/new",1,"footerMenuBtn",2,"color","#DAD7CD"],["routerLink","/plan","class","footerMenuBtn",4,"ngIf"],[1,"projectFooterTitle"],[1,"startScreenSpan"],[1,"circleDecoration"],[1,"circleDecorationSpan"],[1,"startInformationSpan"],[1,"decorationFigures"],[1,"quarter-circle"],[1,"square"],[1,"parallelogram"],[1,"circle"],[1,"projectTitle"],[1,"navigationStartMenu"],["routerLink","/shop",1,"startNavigationBtn"],["routerLink","/create/new",1,"startNavigationBtn"],["routerLink","/plan",1,"startNavigationBtn"],["routerLink","/account",1,"startNavigationBtn"],["routerLink","/plan",1,"footerMenuBtn"]],template:function(i,r){i&1&&(ke(0,Pce,24,0,"span",0),R(1,"span",1),we(2,"app-navigation-panel"),R(3,"span",2)(4,"span",3)(5,"h2",4),te(6,"\u0412\u0430\u0448 \u0438\u0434\u0435\u0430\u043B\u044C\u043D\u044B\u0439 \u0434\u043E\u043C"),P(),R(7,"h3",5),te(8,"HouseQuality - \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u0430 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0438\u0434\u0435\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u0434\u043E\u043C\u0430. \u0417\u0430\u0439\u0434\u0438\u0442\u0435 \u0432 \u043D\u0430\u0448 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u0446\u0438\u0444\u0440\u043E\u0432\u043E\u0433\u043E \u0434\u0438\u0437\u0430\u0439\u043D\u0430 \u0438 \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0441\u0432\u043E\u0435 \u043F\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435!"),P(),R(9,"span",6)(10,"div",7)(11,"h2",8),te(12,"\u0421\u0442\u0438\u043B\u044C"),P(),R(13,"h3",9),te(14,"\u0412\u0430\u0448\u0430 \u0438\u0434\u0435\u044F"),P()(),R(15,"div",10)(16,"h2",8),te(17,"\u0414\u043E\u043C"),P(),R(18,"h3",9),te(19,"\u0412\u0430\u0448\u0430 \u0437\u043E\u043D\u0430"),P()(),R(20,"div",7)(21,"h2",8),te(22,"\u041F\u043B\u0430\u043D"),P(),R(23,"h3",9),te(24,"\u041D\u043E\u0432\u044B\u0439 \u0432\u0438\u0434"),P()(),R(25,"div",10)(26,"h2",8),te(27,"\u041C\u0435\u0431\u0435\u043B\u044C"),P(),R(28,"h3",9),te(29,"\u0411\u043E\u043B\u044C\u0448\u043E\u0439 \u0432\u044B\u0431\u043E\u0440"),P()()()(),R(30,"span",3)(31,"h2",11),te(32,"\u0421\u043E\u0437\u0434\u0430\u0435\u043C \u0438 \u0432\u043E\u043F\u043B\u043E\u0449\u0430\u0435\u043C \u0432\u0430\u0448\u0438 \u043C\u0435\u0447\u0442\u044B"),P(),R(33,"span",12)(34,"button",13),Re("click",function(){return r.openCreateFurniture()}),te(35,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),P(),R(36,"button",13),Re("click",function(){return r.openViewFurniture()}),te(37,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),P()()(),R(38,"span",14)(39,"app-create-furniture",15),Re("click",function(){return r.navigateToPage("/create/new")}),P(),R(40,"app-view-furniture",15),Re("click",function(){return r.navigateToPage("/shop")}),P()(),R(41,"span",3)(42,"h2",11),te(43,"\u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u0441\u0432\u043E\u0439 \u0434\u043E\u043C"),P(),R(44,"h3",5),te(45,"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B \u0438 \u043F\u0435\u0440\u0435\u0434\u0432\u0438\u043D\u044C\u0442\u0435 \u0438\u0445"),P()(),R(46,"app-plan-house",16),Re("click",function(){return r.navigateToPage("/plan")}),P()()(),R(47,"footer")(48,"span",17)(49,"span",18)(50,"a",19),Re("click",function(){return r.focusFinder()}),te(51,"\u041D\u0430\u0439\u0442\u0438 \u043C\u0435\u0431\u0435\u043B\u044C"),P(),R(52,"a",20),te(53,"\u0410\u043A\u043A\u0430\u0443\u043D\u0442"),P()(),R(54,"span",18)(55,"a",21),te(56,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C"),P(),ke(57,Oce,2,0,"a",22),P()(),R(58,"h2",23),te(59,"HouseQuality 2025"),P()()),i&2&&(ne("ngIf",!r.isMobileView),W(34),ne("ngClass",Fr(9,HV,r.furnitureTemplate==="create")),W(2),ne("ngClass",Fr(11,HV,r.furnitureTemplate==="view")),W(3),ne("furnitureData",r.furnitureExampleData)("ngClass",Fr(13,zV,r.furnitureTemplate==="view")),W(),ne("furnitureData",r.furnitureExampleData)("ngClass",Fr(15,zV,r.furnitureTemplate==="create")),W(6),ne("planHouse",r.planHouseExampleData),W(11),ne("ngIf",!r.isMobileView))},dependencies:[Cm,j_,Ch,Ao,ws,rs,Tn],styles:['@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.startScreenSpan[_ngcontent-%COMP%]{width:100vw;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;padding-top:5vh;overflow:hidden;background:#a3b18a;background:linear-gradient(0deg,#a3b18a,#dad7cd)}@media (max-width: 600px){.startScreenSpan[_ngcontent-%COMP%]{padding-top:3vh}}.circleDecoration[_ngcontent-%COMP%]{grid-area:1/1/2/2}.circleDecorationSpan[_ngcontent-%COMP%]{clip-path:inset(0 0 50% 0);margin-bottom:-50%;display:grid;aspect-ratio:1;place-items:center;content-visibility:auto}.circleDecorationSpan[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#3a5a40;border-radius:50%;grid-area:1/1/2/2;aspect-ratio:1;animation:_ngcontent-%COMP%_wave 2s infinite ease-in-out}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){opacity:1;width:50%;animation-delay:0s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){opacity:.8;width:65%;animation-delay:.3s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){opacity:.6;width:80%;animation-delay:.6s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){opacity:.4;width:95%;animation-delay:.9s}@keyframes _ngcontent-%COMP%_wave{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.decorationFigures[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:30px;height:45px;width:350px;grid-area:1/1/2/2;z-index:1;justify-content:center}@media (max-width: 600px){.decorationFigures[_ngcontent-%COMP%]{width:280px;gap:15px;height:35px}}.parallelogram[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1/2;transform:skew(-20deg);background-color:#344e41;height:100%}.quarter-circle[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:100% 10px 10px;background-color:#344e41;height:100%}.square[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1;background-color:#344e41;height:100%}.circle[_ngcontent-%COMP%]{width:39px;height:39px;position:relative;border:3px solid #344E41;border-radius:50%}.circle[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:#344e41;border-radius:50%;clip-path:inset(0 50% 0 0)}.circle[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:transparent;border-radius:50%}.startInformationSpan[_ngcontent-%COMP%]{display:flex;gap:20px;flex-direction:column;align-items:center;grid-area:1/1/2/2;z-index:1;margin-top:10px}@media (max-width: 600px){.startInformationSpan[_ngcontent-%COMP%]{gap:15px;margin-top:5px}}.projectTitle[_ngcontent-%COMP%]{font-family:Gloock;font-size:8vw;font-weight:400;color:#000}@media (max-width: 600px){.projectTitle[_ngcontent-%COMP%]{font-size:12vw}}.navigationStartMenu[_ngcontent-%COMP%]{display:flex;gap:10px}@media (max-width: 768px){.navigationStartMenu[_ngcontent-%COMP%]{display:none}}.startNavigationBtn[_ngcontent-%COMP%]{padding:5px;background:none;border:none;font-size:1.75vw;cursor:pointer;text-decoration:none;color:#000}.mainInformation[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;align-items:center;gap:50px;padding:50px;width:calc(100vw - 100px)}@media (max-width: 600px){.mainInformation[_ngcontent-%COMP%]{padding:30px 15px;width:calc(100vw - 30px);gap:30px}}.someSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;justify-content:start}@media (max-width: 600px){.someSpan[_ngcontent-%COMP%]{width:100%;align-items:center;text-align:center}}.chapterTitle[_ngcontent-%COMP%]{font-family:Calypso;font-weight:700;font:3.5vw/1 Calypso;color:#dad7cd;width:60%}@media (max-width: 1024px){.chapterTitle[_ngcontent-%COMP%]{font-size:5vw}}@media (max-width: 768px){.chapterTitle[_ngcontent-%COMP%]{font-size:6vw}}@media (max-width: 600px){.chapterTitle[_ngcontent-%COMP%]{font-size:7vw;width:90%}}.descriptionText[_ngcontent-%COMP%]{color:#a3b18a;width:50%;font-size:20px}@media (max-width: 768px){.descriptionText[_ngcontent-%COMP%]{width:65%}}@media (max-width: 600px){.descriptionText[_ngcontent-%COMP%]{width:90%;font-size:4vw}}.exampleFunctions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:50px;font-size:15px}@media (max-width: 768px){.exampleFunctions[_ngcontent-%COMP%]{width:350px}}@media (max-width: 600px){.exampleFunctions[_ngcontent-%COMP%]{height:auto;flex-wrap:wrap;gap:20px;justify-content:center}}.figureFunction[_ngcontent-%COMP%]{display:flex;height:150px;flex-direction:column;justify-content:center;gap:5px;background-color:#344e41b3}.figureFunction[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:left;margin-left:-10px}@media (max-width: 600px){.figureFunction[_ngcontent-%COMP%]{width:40%;height:120px}}.exampleFunctionTitle[_ngcontent-%COMP%]{font-family:Calypso;font-weight:700;font-size:25px;color:#dad7cd;margin:0 0 0 -10px;cursor:default}@media (max-width: 600px){.exampleFunctionTitle[_ngcontent-%COMP%]{font-size:5vw}}.exampleFunctionDescription[_ngcontent-%COMP%]{color:#a3b18a}@media (max-width: 600px){.exampleFunctionDescription[_ngcontent-%COMP%]{font-size:3.5vw}}.chapterChangeBtnsSpan[_ngcontent-%COMP%]{display:flex;gap:30px;width:450px}@media (max-width: 600px){.chapterChangeBtnsSpan[_ngcontent-%COMP%]{justify-content:center;width:100%;gap:15px}}.changeChapterBtn[_ngcontent-%COMP%]{line-height:50px;cursor:pointer;background-color:#344e41;color:#fff;border:none;border-radius:10px;width:50%;aspect-ratio:4;font-size:1.15rem;transition:all .5s ease-in-out}@media (max-width: 600px){.changeChapterBtn[_ngcontent-%COMP%]{font-size:15px;padding:10px;width:calc(50% - 20px);height:50px;line-height:normal}}.projectPreviewSpan[_ngcontent-%COMP%]{width:80%;min-width:550px}@media (max-width: 1100px){.projectPreviewSpan[_ngcontent-%COMP%]{width:100%}}@media (max-width: 600px){.projectPreviewSpan[_ngcontent-%COMP%]{min-width:auto}}.activeChapterBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#000}.furnitureModule[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center}.furnitureModuleVariant[_ngcontent-%COMP%]{display:block;grid-area:1/1/2/2;transition:all .5s ease-in-out;width:100%;z-index:1}.opacityDisable[_ngcontent-%COMP%]{opacity:0;z-index:-1}app-plan-house[_ngcontent-%COMP%]{margin-top:50px;width:calc(100vw - 100px)}@media (max-width: 600px){app-plan-house[_ngcontent-%COMP%]{width:100%}}footer[_ngcontent-%COMP%]{width:calc(100vw - 200px);background-color:#000;padding:100px;display:flex;flex-direction:column;gap:50px}@media (max-width: 600px){footer[_ngcontent-%COMP%]{width:calc(100vw - 40px);padding:50px 20px;gap:30px}}.footerColumnsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}@media (max-width: 600px){.footerColumnsSpan[_ngcontent-%COMP%]{flex-direction:column;gap:30px}}.footerColumn[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}@media (max-width: 600px){.footerColumn[_ngcontent-%COMP%]{align-items:center}}.footerColumn[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none}.footerMenuBtn[_ngcontent-%COMP%]{background:none;color:#a3b18a;font-size:18px;border:none;text-align:start;cursor:pointer}@media (max-width: 600px){.footerMenuBtn[_ngcontent-%COMP%]{font-size:4.5vw;text-align:center}}.projectFooterTitle[_ngcontent-%COMP%]{color:#a3b18a;color:1.15vw;font-weight:400;text-align:center;cursor:default}@media (max-width: 600px){.projectFooterTitle[_ngcontent-%COMP%]{font-size:4.5vw}}app-navigation-panel[_ngcontent-%COMP%]{margin-left:calc(-50vw + 50%);position:sticky;top:30px;z-index:6;width:100%}@media (max-width: 600px){app-navigation-panel[_ngcontent-%COMP%]{top:15px}}app-view-furniture[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%], app-plan-house[_ngcontent-%COMP%]{display:block;cursor:pointer;width:100%}']})}return n})();function Kw(n){return n.accountType==="email"}var za=(()=>{class n{httpModule;accountCookieService;baseServiceUrl=ri+"account";constructor(t,i){this.httpModule=t,this.accountCookieService=i}POSTcreateAccount(t){let i=new Jt().set("accountType",t.accountType).set("nickname",t.nickname);return Kw(t)&&(i=i.set("email",t.email).set("password",t.password)),tn(this.httpModule.post(this.baseServiceUrl,i))}DELETEaccountJwt(t){let i=new Jt().set("jwt",t);return tn(this.httpModule.delete(this.baseServiceUrl+"/jwt/delete",{params:i}))}PUTupdateSecondaryAccountData(t){let i=new Jt().set("nickname",t.nickname).set("jwt",t.jwt);return tn(this.httpModule.put(this.baseServiceUrl,i))}DELETEaccount(t){let i=new Jt().set("jwt",t);return tn(this.httpModule.delete(this.baseServiceUrl,{params:i}))}GETaccount(t){return at(this,null,function*(){let i=new Jt().set("jwt",t);try{let{accountData:r}=yield tn(this.httpModule.get(this.baseServiceUrl,{params:i}));return r.furnitures=r.furnitures.map(o=>wt(Oe({},o),{previewUrl:ri+o.previewUrl})),{accountData:r}}catch(r){throw console.error("Error in GETfurnitureCard:",r),r}})}checkJwt(){return!!this.accountCookieService.getJwt()}static \u0275fac=function(i){return new(i||n)(ze(Li),ze(Vi))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ah=(()=>{class n{httpModule;baseServiceUrl=ri+"auth/";constructor(t){this.httpModule=t}POSTcreateLongJWT(t){let i=new Jt().set("accountType",t.accountType);return Kw(t)&&(i=i.set("email",t.email).set("password",t.password)),tn(this.httpModule.post(this.baseServiceUrl+"jwt/long",i))}POSTcreateShortJWT(t){let i=new Jt().set("email",t);return tn(this.httpModule.post(this.baseServiceUrl+"jwt/temporary",i))}PUTupdateBaseData(t){let i=new Jt().set("accountType",t.accountType).set("jwt",t.jwt);return Kw(t)&&(i=i.set("password",t.password)),tn(this.httpModule.put(this.baseServiceUrl+"account",i))}GETrequestPasswordCode(t){let i=new Jt().set("email",t);return tn(this.httpModule.get(this.baseServiceUrl+"account/code",{params:i}))}static \u0275fac=function(i){return new(i||n)(ze(Li))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nce(n,e){if(n&1&&we(0,"div",43),n&2){let t=e.$implicit;ni("grid-area",t.gridArea)}}function Fce(n,e){if(n&1){let t=Rt();R(0,"div",39),Re("click",function(){let r=Be(t).index,o=_e(2);return Ve(o.openProject(r))}),R(1,"h4",40),te(2),P(),R(3,"div",41),ke(4,Nce,1,2,"div",42),P()()}if(n&2){let t=e.$implicit;W(2),Ln(t.name),W(2),ne("ngForOf",t.rooms)}}function Lce(n,e){if(n&1&&(R(0,"a",44)(1,"h4",45),te(2),P(),we(3,"img",46),P()),n&2){let t=e.$implicit;ne("routerLink","/create/"+t._id),W(2),Ln(t.name),W(),ne("src",t.previewUrl,lr)}}function kce(n,e){if(n&1){let t=Rt();R(0,"div",14)(1,"div",15)(2,"div",16),we(3,"img",17),R(4,"label",18)(5,"input",19),Re("change",function(r){Be(t);let o=_e();return Ve(o.uploadAvatar(r))}),P(),we(6,"img",20),P()(),R(7,"div",21)(8,"h2",22),te(9),P(),R(10,"div",23)(11,"div",24)(12,"span",25),te(13,"\u041F\u0440\u043E\u0435\u043A\u0442\u044B:"),P(),R(14,"span",26),te(15),P()(),R(16,"div",24)(17,"span",25),te(18,"\u041C\u0435\u0431\u0435\u043B\u044C:"),P(),R(19,"span",26),te(20),P()(),R(21,"div",24)(22,"span",25),te(23,"Email:"),P(),R(24,"span",26),te(25),P()()()(),R(26,"div",27)(27,"button",28),Re("click",function(){Be(t);let r=_e();return Ve(r.openEditForm())}),we(28,"img",29),P(),R(29,"button",30),Re("click",function(){Be(t);let r=_e();return Ve(r.logout())}),we(30,"img",31),P()()(),R(31,"div",32)(32,"h3",33),te(33,"\u041C\u043E\u0438 \u043F\u0440\u043E\u0435\u043A\u0442\u044B"),P(),R(34,"div",34),ke(35,Fce,5,2,"div",35),P()(),R(36,"div",36)(37,"h3",33),te(38,"\u041C\u043E\u044F \u043C\u0435\u0431\u0435\u043B\u044C"),P(),R(39,"div",37),ke(40,Lce,4,3,"a",38),P()()()}if(n&2){let t=_e();W(3),ne("src",t.accountData.avatarUrl,lr),W(6),Ln(t.accountData.nickname),W(6),Ln(t.accountData.projects.length),W(5),Ln(t.accountData.furnitures.length),W(5),Ln(t.accountData.email),W(10),ne("ngForOf",t.accountData.projects),W(5),ne("ngForOf",t.accountData.furnitures)}}function Uce(n,e){n&1&&(R(0,"div",47),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),P())}function Bce(n,e){n&1&&(R(0,"div",47),te(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),P())}function Vce(n,e){if(n&1&&(R(0,"div",8)(1,"label",48),te(2,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),P(),we(3,"input",49),ke(4,Bce,2,0,"div",11),P()),n&2){let t,i,r=_e();W(3),Sn("invalid",((t=r.editForm.get("password"))==null?null:t.invalid)&&((t=r.editForm.get("password"))==null?null:t.touched)),W(),ne("ngIf",((i=r.editForm.get("password"))==null?null:i.invalid)&&((i=r.editForm.get("password"))==null?null:i.touched))}}var WV=(()=>{class n{accountService;router;accountCookieService;imageServerControlService;imageClientControlService;authService;errorHandler;constructor(t,i,r,o,s,a,l){this.accountService=t,this.router=i,this.accountCookieService=r,this.imageServerControlService=o,this.imageClientControlService=s,this.authService=a,this.errorHandler=l}accountData;isEditFormOpen=!1;editForm;ngOnInit(){this.checkAuthAndLoadData(),this.initEditForm()}updateSecondaryAccountData(t){return at(this,null,function*(){if(!this.accountData)return;let i={jwt:t,nickname:this.editForm.value.nickname};try{yield this.accountService.PUTupdateSecondaryAccountData(i),this.accountData.nickname=this.editForm.value.nickname}catch(r){throw this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043D\u0438\u043A\u043D\u0435\u0439\u043C\u0430",5e3),console.error(r),r}})}saveChanges(){return at(this,null,function*(){if(!this.accountData||!this.editForm.valid){this.errorHandler.setError("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u044B",5e3);return}let t=this.accountCookieService.getJwt(),i=this.accountCookieService.getUserType();if(!t||!i){this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0443\u0442\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438",5e3);return}try{yield this.updateSecondaryAccountData(t),yield this.updateBaseDataIfNeeded(t,i),this.closeEditForm()}catch(r){this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445",5e3),console.error(r)}})}updateBaseDataIfNeeded(t,i){return at(this,null,function*(){if(this.accountData?.password===void 0||!this.editForm.value.password||i==="google")return;let r={jwt:t,accountType:i,password:this.editForm.value.password};try{yield this.authService.PUTupdateBaseData(r),this.accountData.password=this.editForm.value.password}catch(o){throw this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0430\u0440\u043E\u043B\u044F",5e3),console.error(o),o}})}loadUserData(t){return at(this,null,function*(){try{let i=(yield this.accountService.GETaccount(t)).accountData;this.accountData={email:i.email,nickname:i.nickname,projects:i.projects,avatarUrl:this.imageServerControlService.GETaccountAvatar(t),furnitures:i.furnitures},i.password!==void 0&&(this.accountData.password=i.password)}catch(i){console.error(i)}})}uploadAvatar(t){return at(this,null,function*(){let i=this.accountCookieService.getJwt();if(!i||!this.accountData)return;let o=t.target.files?.[0];if(!o){this.errorHandler.setError("\u0424\u0430\u0439\u043B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D",5e3);return}try{let s=yield this.imageClientControlService.compressImage(o);if(!s){this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0436\u0430\u0442\u0438\u044F \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",5e3);return}yield this.imageServerControlService.POSTuploadUserAvatar(s,i),this.accountData.avatarUrl=URL.createObjectURL(s)}catch(s){this.errorHandler.setError("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430",5e3),console.error(s)}})}checkAuthAndLoadData(){let t=this.accountCookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.loadUserData(t)}initEditForm(){this.editForm=new ki({nickname:new kn(this.accountData?.nickname,[Et.required,Et.minLength(3),Et.maxLength(30)])}),this.accountCookieService.getUserType()==="email"&&this.editForm.addControl("password",new kn(this.accountData?.password,[Et.required,Et.minLength(6)]))}openEditForm(){if(!this.accountData){this.errorHandler.setError("\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B",5e3);return}this.isEditFormOpen=!0}closeEditForm(){this.isEditFormOpen=!1,this.accountData&&(this.accountData.nickname!=this.editForm.value.nickname,this.accountData.password&&this.accountData.password!=this.editForm.value.password),this.editForm.reset()}openProject(t){this.router.navigateByUrl("/plan/"+t)}logout(){this.accountCookieService.deleteJwt(),this.accountCookieService.deleteUserType(),this.router.navigateByUrl("/")}static \u0275fac=function(i){return new(i||n)(de(za),de(dr),de(Vi),de(kc),de(H_),de(Ah),de(bi))};static \u0275cmp=vn({type:n,selectors:[["app-account-page"]],decls:18,vars:9,consts:[[1,"account-page"],["class","account-container",4,"ngIf"],[1,"edit-modal"],[1,"modal-content"],[1,"close-btn",3,"click"],["src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"edit-form",3,"ngSubmit","formGroup"],[1,"form-title"],[1,"form-group"],["for","nickname"],["id","nickname","formControlName","nickname"],["class","error-message",4,"ngIf"],["class","form-group",4,"ngIf"],["type","submit",1,"save-btn",3,"disabled"],[1,"account-container"],[1,"profile-card"],[1,"avatar-container"],["alt","\u0410\u0432\u0430\u0442\u0430\u0440",1,"avatar-image",3,"src"],[1,"avatar-edit-btn"],["type","file","id","avatarInput","accept",".png,.jpeg,.jpg",3,"change"],["src","/assets/images/editIcon.svg","alt","\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0430\u0432\u0430\u0442\u0430\u0440"],[1,"profile-info"],[1,"profile-name"],[1,"profile-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"profile-actions"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C",1,"edit-btn",2,"width","27px",3,"click"],["src","/assets/images/editIcon.svg","alt","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"],["title","\u0412\u044B\u0439\u0442\u0438",1,"logout-btn",2,"width","35px",3,"click"],["src","/assets/images/logoutIcon.svg","alt","\u0412\u044B\u0439\u0442\u0438"],[1,"projects-section"],[1,"section-title"],[1,"projects-grid"],["class","project-card",3,"click",4,"ngFor","ngForOf"],[1,"furniture-section"],[1,"furniture-grid"],["class","furniture-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"project-card",3,"click"],[1,"project-name"],[1,"project-scheme"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"room"],[1,"furniture-card",3,"routerLink"],[1,"furniture-name"],["alt","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438",1,"furniture-image",3,"src"],[1,"error-message"],["for","password"],["id","password","type","password","formControlName","password"]],template:function(i,r){if(i&1&&(R(0,"div",0),we(1,"app-navigation-panel"),ke(2,kce,41,7,"div",1),R(3,"div",2)(4,"div",3)(5,"button",4),Re("click",function(){return r.closeEditForm()}),we(6,"img",5),P(),R(7,"form",6),Re("ngSubmit",function(){return r.saveChanges()}),R(8,"h3",7),te(9,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"),P(),R(10,"div",8)(11,"label",9),te(12,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),P(),we(13,"input",10),ke(14,Uce,2,0,"div",11),P(),ke(15,Vce,5,3,"div",12),R(16,"button",13),te(17," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),P()()()()()),i&2){let o,s;W(2),ne("ngIf",r.accountData),W(),Sn("active",r.isEditFormOpen),W(4),ne("formGroup",r.editForm),W(6),Sn("invalid",((o=r.editForm.get("nickname"))==null?null:o.invalid)&&((o=r.editForm.get("nickname"))==null?null:o.touched)),W(),ne("ngIf",((s=r.editForm.get("nickname"))==null?null:s.invalid)&&((s=r.editForm.get("nickname"))==null?null:s.touched)),W(),ne("ngIf",r.editForm.get("password")),W(),ne("disabled",!r.editForm.valid)}},dependencies:[ws,wi,Tn,ss,Ra,os,Ia,Da,js,Gs,Ap,rs],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.account-page[_ngcontent-%COMP%]{background:#000;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:30px 20px;font-family:Courier New,Courier,monospace;color:#dad7cd}.account-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin-top:30px}.profile-card[_ngcontent-%COMP%]{background:#000000b3;border-radius:15px;padding:30px;display:flex;align-items:flex-start;gap:30px;margin-bottom:30px;border:1px solid rgba(163,177,138,.3);position:relative}.avatar-container[_ngcontent-%COMP%]{position:relative;width:250px;aspect-ratio:1;flex-shrink:0}.avatar-container[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:50%;object-fit:cover}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;background:#344e41;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;border:2px solid black;transition:all .3s}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#436554}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.avatar-container[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;padding:10px;aspect-ratio:1}.profile-info[_ngcontent-%COMP%]{flex-grow:1}.profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;font-size:2rem;margin-bottom:15px;color:#a3b18a;text-shadow:0 0 10px rgba(163,177,138,.3)}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:fit-content;flex-wrap:wrap;gap:20px}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{background:#a3b18a1a;padding:8px 15px;border-radius:20px;border:1px solid rgba(163,177,138,.3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#a3b18a}.stat-item[_ngcontent-%COMP%]{max-width:min(750px,100vw - 500px)}.profile-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;transition:all .3s}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);opacity:.8}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1}.section-title[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;font-size:1.8rem;margin-bottom:20px;color:#a3b18a;text-shadow:0 0 5px rgba(163,177,138,.3);padding-bottom:10px;border-bottom:1px solid rgba(163,177,138,.3)}.projects-section[_ngcontent-%COMP%], .furniture-section[_ngcontent-%COMP%]{background:#000000b3;border-radius:15px;padding:25px;margin-bottom:30px;box-shadow:0 5px 15px #0000004d;border:1px solid rgba(163,177,138,.3)}.projects-grid[_ngcontent-%COMP%], .furniture-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.project-card[_ngcontent-%COMP%]{background:#a3b18a1a;border-radius:10px;padding:15px;cursor:pointer;transition:all .3s;border:1px solid rgba(163,177,138,.2)}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #a3b18a33;border-color:#a3b18a}.project-card[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:15px;color:#dad7cd;text-align:center}.project-card[_ngcontent-%COMP%]   .project-scheme[_ngcontent-%COMP%]{display:grid;width:100%;aspect-ratio:1;gap:5px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.project-card[_ngcontent-%COMP%]   .project-scheme[_ngcontent-%COMP%]   .room[_ngcontent-%COMP%]{background:#344e41;border-radius:3px;transition:all .3s}.furniture-card[_ngcontent-%COMP%]{background:#a3b18a1a;border-radius:10px;padding:15px;text-decoration:none;transition:all .3s;border:1px solid rgba(163,177,138,.2);display:flex;flex-direction:column;align-items:center}.furniture-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #a3b18a33;border-color:#a3b18a}.furniture-card[_ngcontent-%COMP%]   .furniture-name[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:15px;color:#dad7cd;text-align:center}.furniture-card[_ngcontent-%COMP%]   .furniture-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:5px}.edit-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:all .3s;z-index:1000}.edit-modal.active[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.edit-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#000;border-radius:15px;padding:30px;width:90%;max-width:500px;position:relative;box-shadow:0 0 20px #a3b18a4d;border:1px solid #A3B18A;box-sizing:border-box}.edit-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:none;border:none;cursor:pointer}.edit-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px;rotate:45deg;transition:all .3s}.edit-modal[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{font-family:Calypso,sans-serif;color:#a3b18a;text-align:center;margin-bottom:25px;font-size:1.8rem}.edit-modal[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:#dad7cd}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(163,177,138,.5);border-radius:5px;padding:12px 15px;color:#dad7cd;font-family:Courier New,Courier,monospace;transition:all .3s}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#a3b18a;box-shadow:0 0 0 2px #a3b18a33}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background:#ff6b6b1a;animation:_ngcontent-%COMP%_shake .5s ease}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.8rem;margin-top:3px}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:#a3b18a;color:#000;border:none;border-radius:5px;padding:15px;font-family:Courier New,Courier,monospace;font-size:1.1rem;cursor:pointer;transition:all .3s;margin-top:10px}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #a3b18a66}.edit-modal[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:disabled{background:#344e41;color:#00000080;cursor:not-allowed}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}20%,60%{transform:translate(-5px)}40%,80%{transform:translate(5px)}}@media (max-width: 900px){.stat-item[_ngcontent-%COMP%]{max-width:calc(100vw - 150px)}.profile-card[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{width:100%}.profile-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-stats[_ngcontent-%COMP%]{margin:0 auto}.profile-card[_ngcontent-%COMP%]   .profile-actions[_ngcontent-%COMP%]{flex-direction:row;width:100%;justify-content:center}.projects-grid[_ngcontent-%COMP%], .furniture-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}}@media (max-width: 600px){.account-page[_ngcontent-%COMP%]{padding:20px}.avatar-container[_ngcontent-%COMP%]{width:200px}.stat-item[_ngcontent-%COMP%]{max-width:calc(100vw - 100px)}.profile-card[_ngcontent-%COMP%]{padding:20px 0}.projects-section[_ngcontent-%COMP%], .furniture-section[_ngcontent-%COMP%]{padding:20px}.profile-name[_ngcontent-%COMP%], .section-title[_ngcontent-%COMP%]{font-size:1.5rem!important}.modal-content[_ngcontent-%COMP%]{width:95%!important;padding:20px!important}}']})}return n})();var Hce=["signup"],zce=["signin"],jce=["code"],Gce=["changePassword"],Wce=["requestPasswordChange"],Qw=()=>({standalone:!0});function $ce(n,e){n&1&&cc(0)}function qce(n,e){n&1&&(R(0,"div",23),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 4-\u0437\u043D\u0430\u0447\u043D\u044B\u0439 \u043A\u043E\u0434 "),P())}function Xce(n,e){if(n&1){let t=Rt();R(0,"form",13),Re("ngSubmit",function(){Be(t);let r=_e();return Ve(r.checkMatchCodes())}),R(1,"h2",14),te(2,"\u0421\u043C\u0435\u043D\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"),P(),R(3,"span",15)(4,"label",16),te(5,"\u041A\u043E\u0434 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F"),P(),R(6,"span",17)(7,"input",18,5),Re("input",function(){Be(t);let r=Nr(8),o=Nr(10),s=_e();return Ve(s.onInput(r,o))})("keyup.backspace",function(){Be(t);let r=Nr(8),o=_e();return Ve(o.onBackspace(r,r))}),ns("ngModelChange",function(r){Be(t);let o=_e();return Hs(o.inputValues[0],r)||(o.inputValues[0]=r),Ve(r)}),P(),R(9,"input",18,6),Re("input",function(){Be(t);let r=Nr(10),o=Nr(12),s=_e();return Ve(s.onInput(r,o))})("keyup.backspace",function(){Be(t);let r=Nr(8),o=Nr(10),s=_e();return Ve(s.onBackspace(o,r))}),ns("ngModelChange",function(r){Be(t);let o=_e();return Hs(o.inputValues[1],r)||(o.inputValues[1]=r),Ve(r)}),P(),R(11,"input",18,7),Re("input",function(){Be(t);let r=Nr(12),o=Nr(14),s=_e();return Ve(s.onInput(r,o))})("keyup.backspace",function(){Be(t);let r=Nr(10),o=Nr(12),s=_e();return Ve(s.onBackspace(o,r))}),ns("ngModelChange",function(r){Be(t);let o=_e();return Hs(o.inputValues[2],r)||(o.inputValues[2]=r),Ve(r)}),P(),R(13,"input",18,8),Re("input",function(){Be(t);let r=Nr(14),o=_e();return Ve(o.onInput(r,null))})("keyup.backspace",function(){Be(t);let r=Nr(12),o=Nr(14),s=_e();return Ve(s.onBackspace(o,r))}),ns("ngModelChange",function(r){Be(t);let o=_e();return Hs(o.inputValues[3],r)||(o.inputValues[3]=r),Ve(r)}),P()(),ke(15,qce,2,0,"div",19),P(),R(16,"span",20)(17,"button",21),Re("click",function(){Be(t);let r=_e();return Ve(r.changeTemplate("signin"))}),te(18,"\u042F \u0432\u0441\u043F\u043E\u043C\u043D\u0438\u043B \u043F\u0430\u0440\u043E\u043B\u044C"),P()(),R(19,"button",22),te(20),P()()}if(n&2){let t,i,r,o,s,a=_e();W(7),Sn("invalid",((t=a.codeForm.get("code"))==null?null:t.invalid)&&((t=a.codeForm.get("code"))==null?null:t.touched)),ts("ngModel",a.inputValues[0]),ne("ngModelOptions",mu(19,Qw)),W(2),Sn("invalid",((i=a.codeForm.get("code"))==null?null:i.invalid)&&((i=a.codeForm.get("code"))==null?null:i.touched)),ts("ngModel",a.inputValues[1]),ne("ngModelOptions",mu(20,Qw)),W(2),Sn("invalid",((r=a.codeForm.get("code"))==null?null:r.invalid)&&((r=a.codeForm.get("code"))==null?null:r.touched)),ts("ngModel",a.inputValues[2]),ne("ngModelOptions",mu(21,Qw)),W(2),Sn("invalid",((o=a.codeForm.get("code"))==null?null:o.invalid)&&((o=a.codeForm.get("code"))==null?null:o.touched)),ts("ngModel",a.inputValues[3]),ne("ngModelOptions",mu(22,Qw)),W(2),ne("ngIf",((s=a.codeForm.get("code"))==null?null:s.invalid)&&((s=a.codeForm.get("code"))==null?null:s.touched)),W(4),ne("disabled",!a.codeForm.valid),W(),cr(" ",a.codeForm.valid?"\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C":"\u041D\u0435\u043F\u043E\u043B\u043D\u044B\u0439 \u043A\u043E\u0434"," ")}}function Yce(n,e){n&1&&(R(0,"div",23),te(1," Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D "),P())}function Zce(n,e){n&1&&(R(0,"div",23),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),P())}function Kce(n,e){n&1&&(R(0,"div",23),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C "),P())}function Jce(n,e){if(n&1){let t=Rt();R(0,"form",24),Re("ngSubmit",function(){Be(t);let r=_e();return Ve(r.signinUser())}),R(1,"h2",14),te(2,"\u0412\u0445\u043E\u0434"),P(),R(3,"span",25)(4,"label",26),te(5,"Email"),P(),we(6,"input",27),ke(7,Yce,2,0,"div",19)(8,Zce,2,0,"div",19),P(),R(9,"span",25)(10,"label",28),te(11,"\u041F\u0430\u0440\u043E\u043B\u044C"),P(),we(12,"input",29),ke(13,Kce,2,0,"div",19),P(),R(14,"span",20)(15,"button",21),Re("click",function(){Be(t);let r=_e();return Ve(r.changeTemplate("signup"))}),te(16,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),P(),R(17,"button",21),Re("click",function(){Be(t);let r=_e();return Ve(r.changeTemplate("requestChange"))}),te(18,"\u0417\u0430\u0431\u044B\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?"),P()(),R(19,"button",22),te(20),P()()}if(n&2){let t,i,r,o,s,a=_e();ne("formGroup",a.signinForm),W(6),Sn("invalid",((t=a.signinForm.get("email"))==null?null:t.invalid)&&((t=a.signinForm.get("email"))==null?null:t.touched)),W(),ne("ngIf",((i=a.signinForm.get("email"))==null||i.errors==null?null:i.errors.required)&&((i=a.signinForm.get("email"))==null?null:i.touched)),W(),ne("ngIf",((r=a.signinForm.get("email"))==null||r.errors==null?null:r.errors.email)&&((r=a.signinForm.get("email"))==null?null:r.touched)),W(4),Sn("invalid",((o=a.signinForm.get("password"))==null?null:o.invalid)&&((o=a.signinForm.get("password"))==null?null:o.touched)),W(),ne("ngIf",((s=a.signinForm.get("password"))==null?null:s.invalid)&&((s=a.signinForm.get("password"))==null?null:s.touched)),W(6),ne("disabled",!a.signinForm.valid),W(),cr(" ",a.signinForm.valid?"\u0412\u043E\u0439\u0442\u0438":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}function Qce(n,e){n&1&&(R(0,"div",23),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),P())}function eue(n,e){if(n&1){let t=Rt();R(0,"form",24),Re("ngSubmit",function(){Be(t);let r=_e();return Ve(r.requestChangeCode())}),R(1,"h2",14),te(2,"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F"),P(),R(3,"div",25)(4,"label",30),te(5,"Email"),P(),we(6,"input",31),ke(7,Qce,2,0,"div",19),P(),R(8,"div",20)(9,"button",21),Re("click",function(){Be(t);let r=_e();return Ve(r.changeTemplate("signin"))}),te(10,"\u041D\u0430\u0437\u0430\u0434 \u043A \u0432\u0445\u043E\u0434\u0443"),P()(),R(11,"button",22),te(12," \u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u043A\u043E\u0434 "),P()()}if(n&2){let t,i,r=_e();ne("formGroup",r.requestChangeForm),W(6),Sn("invalid",((t=r.requestChangeForm.get("email"))==null?null:t.invalid)&&((t=r.requestChangeForm.get("email"))==null?null:t.touched)),W(),ne("ngIf",((i=r.requestChangeForm.get("email"))==null?null:i.invalid)&&((i=r.requestChangeForm.get("email"))==null?null:i.touched)),W(4),ne("disabled",r.requestChangeForm.invalid)}}function tue(n,e){n&1&&(R(0,"div",23),te(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),P())}function nue(n,e){n&1&&(R(0,"div",23),te(1," \u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442 "),P())}function iue(n,e){if(n&1){let t=Rt();R(0,"form",24),Re("ngSubmit",function(){Be(t);let r=_e();return Ve(r.changePasswordUser())}),R(1,"h2",14),te(2,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),P(),R(3,"span",25)(4,"label",32),te(5,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),P(),we(6,"input",33),ke(7,tue,2,0,"div",19),P(),R(8,"span",25)(9,"label",34),te(10,"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C"),P(),we(11,"input",35),ke(12,nue,2,0,"div",19),P(),R(13,"button",22),te(14),P()()}if(n&2){let t,i,r,o,s=_e();ne("formGroup",s.changePasswordForm),W(6),Sn("invalid",((t=s.changePasswordForm.get("newPassword"))==null?null:t.invalid)&&((t=s.changePasswordForm.get("newPassword"))==null?null:t.touched)),W(),ne("ngIf",((i=s.changePasswordForm.get("newPassword"))==null?null:i.invalid)&&((i=s.changePasswordForm.get("newPassword"))==null?null:i.touched)),W(4),Sn("invalid",(((r=s.changePasswordForm.get("repeatPassword"))==null?null:r.invalid)||(s.changePasswordForm.errors==null?null:s.changePasswordForm.errors.mismatch))&&((r=s.changePasswordForm.get("repeatPassword"))==null?null:r.touched)),W(),ne("ngIf",(s.changePasswordForm.errors==null?null:s.changePasswordForm.errors.mismatch)&&((o=s.changePasswordForm.get("repeatPassword"))==null?null:o.touched)),W(),ne("disabled",!s.changePasswordForm.valid),W(),cr(" ",s.changePasswordForm.valid?"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}function rue(n,e){n&1&&(R(0,"div",23),te(1," Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D "),P())}function oue(n,e){n&1&&(R(0,"div",23),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email "),P())}function sue(n,e){n&1&&(R(0,"div",23),te(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),P())}function aue(n,e){n&1&&(R(0,"div",23),te(1," \u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 "),P())}function lue(n,e){if(n&1){let t=Rt();R(0,"form",24),Re("ngSubmit",function(){Be(t);let r=_e();return Ve(r.signUpUser())}),R(1,"h2",14),te(2,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),P(),R(3,"span",25)(4,"label",26),te(5,"Email"),P(),we(6,"input",27),ke(7,rue,2,0,"div",19)(8,oue,2,0,"div",19),P(),R(9,"span",25)(10,"label",36),te(11,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),P(),we(12,"input",37),ke(13,sue,2,0,"div",19),P(),R(14,"span",25)(15,"label",28),te(16,"\u041F\u0430\u0440\u043E\u043B\u044C"),P(),we(17,"input",29),ke(18,aue,2,0,"div",19),P(),R(19,"span",20)(20,"button",21),Re("click",function(){Be(t);let r=_e();return Ve(r.changeTemplate("signin"))}),te(21,"\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442?"),P()(),R(22,"button",22),te(23),P()()}if(n&2){let t,i,r,o,s,a,l,u=_e();ne("formGroup",u.signupForm),W(6),Sn("invalid",((t=u.signupForm.get("email"))==null?null:t.invalid)&&((t=u.signupForm.get("email"))==null?null:t.touched)),W(),ne("ngIf",((i=u.signupForm.get("email"))==null||i.errors==null?null:i.errors.required)&&((i=u.signupForm.get("email"))==null?null:i.touched)),W(),ne("ngIf",((r=u.signupForm.get("email"))==null||r.errors==null?null:r.errors.email)&&((r=u.signupForm.get("email"))==null?null:r.touched)),W(4),Sn("invalid",((o=u.signupForm.get("nickname"))==null?null:o.invalid)&&((o=u.signupForm.get("nickname"))==null?null:o.touched)),W(),ne("ngIf",((s=u.signupForm.get("nickname"))==null?null:s.invalid)&&((s=u.signupForm.get("nickname"))==null?null:s.touched)),W(4),Sn("invalid",((a=u.signupForm.get("password"))==null?null:a.invalid)&&((a=u.signupForm.get("password"))==null?null:a.touched)),W(),ne("ngIf",((l=u.signupForm.get("password"))==null?null:l.invalid)&&((l=u.signupForm.get("password"))==null?null:l.touched)),W(4),ne("disabled",!u.signupForm.valid),W(),cr(" ",u.signupForm.valid?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F":"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0444\u043E\u0440\u043C\u0443"," ")}}var $V=(()=>{class n{accountService;authService;router;errorHandler;accountCookieService;cdr;constructor(t,i,r,o,s,a){this.accountService=t,this.authService=i,this.router=r,this.errorHandler=o,this.accountCookieService=s,this.cdr=a}currentFormTemplate;inputValues=new Array(4).fill("");currentChangeCode;currentJwtToken;signupTemplate;signinTemplate;codeTemplate;changePasswordTemplate;requestPasswordChangeTemplate;ngAfterViewInit(){this.currentFormTemplate=this.signinTemplate,this.cdr.detectChanges()}requestChangeCode(){return at(this,null,function*(){if(!this.requestChangeForm.invalid)try{this.currentChangeCode=(yield this.authService.GETrequestPasswordCode(this.requestChangeForm.value.email)).resetCode,this.changeTemplate("code")}catch(t){console.log(t)}})}signinUser(){return at(this,null,function*(){if(this.signinForm.invalid)return;let t={email:this.signinForm.value.email,password:this.signinForm.value.password,accountType:"email"};try{let i=(yield this.authService.POSTcreateLongJWT(t)).jwt;this.accountCookieService.setJwt(i,"long"),this.accountCookieService.setUserType("email"),this.router.navigateByUrl("/account")}catch(i){console.log(i)}})}signUpUser(){return at(this,null,function*(){if(!this.signupForm.invalid)try{let t={email:this.signupForm.value.email,password:this.signupForm.value.password,nickname:this.signupForm.value.nickname,accountType:"email"};yield this.accountService.POSTcreateAccount(t);let i=(yield this.authService.POSTcreateLongJWT(t)).jwt;this.accountCookieService.setJwt(i,"long"),this.accountCookieService.setUserType("email"),this.router.navigateByUrl("/account")}catch(t){console.log(t)}})}changePasswordUser(){return at(this,null,function*(){if(this.changePasswordForm.invalid||!this.currentJwtToken)return;let t={password:this.changePasswordForm.value.newPassword,accountType:"email",jwt:this.currentJwtToken};try{yield this.authService.PUTupdateBaseData(t),this.changeTemplate("signin")}catch(i){console.log(i)}})}checkMatchCodes(){return at(this,null,function*(){if(this.codeForm.value.code===this.currentChangeCode)try{this.currentJwtToken=(yield this.authService.POSTcreateShortJWT(this.requestChangeForm.value.email)).jwt,this.changeTemplate("changePassword")}catch(t){console.log(t)}else this.errorHandler.setError("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043E\u0434",2500)})}passwordMatchValidator=t=>{let i=t;return i.get("newPassword")?.value===i.get("repeatPassword")?.value?null:{mismatch:!0}};onInput(t,i){this.codeForm.patchValue({code:this.inputValues.join("")}),i&&t.value&&i.focus()}onBackspace(t,i){!t.value&&i&&i.focus(),this.codeForm.patchValue({code:this.inputValues.join("")})}changeTemplate(t){let i={requestChange:this.requestPasswordChangeTemplate,code:this.codeTemplate,signin:this.signinTemplate,signup:this.signupTemplate,changePassword:this.changePasswordTemplate};this.currentFormTemplate=i[t]||this.signinTemplate}signupForm=new ki({email:new kn("",[Et.required,Et.email]),nickname:new kn("",[Et.required]),password:new kn("",[Et.required,Et.minLength(6)])});codeForm=new ki({code:new kn("",[Et.required,Et.minLength(4)])});changePasswordForm=new ki({newPassword:new kn("",[Et.required,Et.minLength(6)]),repeatPassword:new kn("",[Et.required,Et.minLength(6)])},{validators:this.passwordMatchValidator});signinForm=new ki({email:new kn("",[Et.required,Et.email]),password:new kn("",[Et.required])});requestChangeForm=new ki({email:new kn("",[Et.required,Et.email])});static \u0275fac=function(i){return new(i||n)(de(za),de(Ah),de(dr),de(bi),de(Vi),de(Qi))};static \u0275cmp=vn({type:n,selectors:[["app-login-page"]],viewQuery:function(i,r){if(i&1&&(Ri(Hce,5,xr),Ri(zce,5,xr),Ri(jce,5,xr),Ri(Gce,5,xr),Ri(Wce,5,xr)),i&2){let o;si(o=ai())&&(r.signupTemplate=o.first),si(o=ai())&&(r.signinTemplate=o.first),si(o=ai())&&(r.codeTemplate=o.first),si(o=ai())&&(r.changePasswordTemplate=o.first),si(o=ai())&&(r.requestPasswordChangeTemplate=o.first)}},decls:15,vars:1,consts:[["code",""],["signin",""],["requestPasswordChange",""],["changePassword",""],["signup",""],["input1",""],["input2",""],["input3",""],["input4",""],[1,"body"],[1,"login-container"],[1,"formModule"],[4,"ngTemplateOutlet"],[1,"addModuleSpan",3,"ngSubmit"],[1,"addModuleTitle"],[1,"addModuleInputSpan",2,"align-items","center"],["for","#input1",1,"inputLabel"],[1,"input-group"],["type","text","maxlength","1",3,"input","keyup.backspace","ngModelChange","ngModel","ngModelOptions"],["class","error-message",4,"ngIf"],[1,"additionalFuntions"],["type","button",3,"click"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],[1,"error-message"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],[1,"addModuleInputSpan"],["for","email",1,"inputLabel"],["formControlName","email","id","email","type","email",1,"addModuleInput"],["for","password",1,"inputLabel"],["formControlName","password","id","password","type","password",1,"addModuleInput"],[1,"inputLabel"],["formControlName","email","type","email",1,"addModuleInput"],["for","newPassword",1,"inputLabel"],["formControlName","newPassword","id","newPassword","type","password",1,"addModuleInput"],["for","repeatPassword",1,"inputLabel"],["formControlName","repeatPassword","id","repeatPassword","type","password",1,"addModuleInput"],["for","nickname",1,"inputLabel"],["formControlName","nickname","id","nickname","type","text",1,"addModuleInput"]],template:function(i,r){i&1&&(R(0,"span",9),we(1,"app-navigation-panel"),R(2,"div",10)(3,"div",11),ke(4,$ce,1,0,"ng-container",12),P()()(),ke(5,Xce,21,23,"ng-template",null,0,ro)(7,Jce,21,10,"ng-template",null,1,ro)(9,eue,13,5,"ng-template",null,2,ro)(11,iue,15,9,"ng-template",null,3,ro)(13,lue,24,13,"ng-template",null,4,ro)),i&2&&(W(4),ne("ngTemplateOutlet",r.currentFormTemplate))},dependencies:[ws,ss,Ra,os,Ia,Da,PT,js,Gs,gl,d_,pm,IT,Tn],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.body[_ngcontent-%COMP%]{padding:0;margin:0;min-height:100vh;display:flex;flex-direction:column;align-items:center;background-color:#000;background-size:cover;position:relative}.login-container[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:auto;padding:20px}.formModule[_ngcontent-%COMP%]{background-color:#000;border-radius:10px;padding:30px;width:calc(100% - 60px);box-shadow:0 0 5px #fff;border:1px solid rgba(255,255,255,.1)}.addModuleTitle[_ngcontent-%COMP%]{color:#dad7cd;text-align:center;font-size:2rem;margin-bottom:30px;font-weight:400}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;position:relative}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd;margin-bottom:8px;font-size:.9rem}.addModuleInput[_ngcontent-%COMP%]{background-color:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:5px;padding:12px 15px;color:#dad7cd;font-size:1rem;transition:all .3s ease}.addModuleInput[_ngcontent-%COMP%]:focus{outline:none;border-color:#a3b18a;box-shadow:0 0 0 2px #a3b18a33}.addModuleInput.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background-color:#ff6b6b1a}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.8rem;margin-top:5px}.input-group[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:20px}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;aspect-ratio:1;text-align:center;font-size:24px;font-family:Courier New,monospace;background:#ffffff1a;border:2px solid #A3B18A;border-radius:12px;color:#dad7cd;transition:all .3s ease;outline:none}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#b1bd9c;box-shadow:0 0 0 3px #a3b18a33;transform:translateY(-2px)}.input-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b;background:#ff6b6b1a;animation:_ngcontent-%COMP%_shake .5s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}20%,60%{transform:translate(-5px)}40%,80%{transform:translate(5px)}}.submitAddModuleFormBtn[_ngcontent-%COMP%]{width:100%;padding:15px;background-color:#a3b18a;color:#000;border:none;border-radius:5px;font-size:1rem;cursor:pointer;transition:all .3s ease;margin-top:10px}.submitAddModuleFormBtn[_ngcontent-%COMP%]:hover{background-color:#acb996}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#a3b18a80;cursor:not-allowed}.additionalFuntions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:20px 0}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#dad7cd;cursor:pointer;font-size:.9rem;padding:5px 0;position:relative}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:1px;background:#dad7cd;transition:width .3s}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:after{width:100%}@media (max-width: 768px){.formModule[_ngcontent-%COMP%]{padding:20px}.addModuleTitle[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:10px}.additionalFuntions[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}']})}return n})();var cue=["planHouse"],GI=n=>({disabled:n});function uue(n,e){n&1&&(R(0,"p",6),te(1,"\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u044D\u0442\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0441 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0445 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u0435\u043D. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440."),P())}function due(n,e){if(n&1&&we(0,"div",23),n&2){let t=e.$implicit;ni("grid-area",t.gridArea)}}function fue(n,e){if(n&1){let t=Rt();R(0,"button",16),Re("click",function(){let r=Be(t).index,o=_e(3);return Ve(o.openProject(r))}),R(1,"span",17)(2,"h3",18),te(3),P(),R(4,"div",19),ke(5,due,1,2,"div",20),P()(),R(6,"button",21),Re("click",function(){let r=Be(t).index,o=_e(3);return Ve(o.deleteProject(r))}),we(7,"img",22),P()()}if(n&2){let t=e.$implicit;W(3),Ln(t.name),W(2),ne("ngForOf",t.rooms)}}function hue(n,e){if(n&1){let t=Rt();R(0,"span",12),ke(1,fue,8,2,"button",13),R(2,"button",14),Re("click",function(){Be(t);let r=_e(2);return Ve(r.openAddModule())}),R(3,"h3"),te(4,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C"),P(),we(5,"img",15),P()()}if(n&2){let t=_e(2);ne("ngClass",Fr(2,GI,t.currentProjectId!==void 0)),W(),ne("ngForOf",t.accountData.projects)}}function pue(n,e){if(n&1){let t=Rt();R(0,"button",24),Re("click",function(){Be(t);let r=_e(2);return Ve(r.closeProject())}),we(1,"img",15),P()}}function mue(n,e){if(n&1){let t=Rt();R(0,"app-plan-house",25,0),Re("callSaveEmitter",function(){Be(t);let r=_e(2);return Ve(r.saveProject())})("planHouseEmitter",function(r){Be(t);let o=_e(2);return Ve(o.updatePlanData(r))}),P()}if(n&2){let t=_e(2);ne("ngClass",Fr(2,GI,t.currentProjectId===void 0))("planHouse",t.accountData.projects[t.currentProjectId].rooms)}}function gue(n,e){if(n&1&&(R(0,"span",7),ke(1,hue,6,4,"span",8),R(2,"span",9),ke(3,pue,2,0,"button",10)(4,mue,2,4,"app-plan-house",11),P()()),n&2){let t=_e();W(),ne("ngIf",t.accountData!==void 0),W(),ne("ngClass",Fr(4,GI,t.currentProjectId===void 0)),W(),ne("ngIf",t.getCurrentViewRoom()==null),W(),ne("ngIf",t.currentProjectId!==void 0)}}function vue(n,e){if(n&1){let t=Rt();R(0,"form",26),Re("ngSubmit",function(){Be(t);let r=_e();return Ve(r.createProject())}),R(1,"button",27),Re("click",function(){Be(t);let r=_e();return Ve(r.closeAddModule())}),we(2,"img",28),P(),R(3,"span",29)(4,"h2",30),te(5,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043B\u0430\u043D\u0430"),P(),R(6,"span",31)(7,"label",32),te(8,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),P(),we(9,"input",33),P(),R(10,"button",34),te(11,"Continue"),P()()()}if(n&2){let t=_e();ne("formGroup",t.projectNameForm),W(10),ne("disabled",!t.projectNameForm.valid)}}var Dg=(()=>{class n{accountService;accountCookieService;router;route;elemenetRef;renderer;projectService;errorHandler;location;constructor(t,i,r,o,s,a,l,u,f){this.accountService=t,this.accountCookieService=i,this.router=r,this.route=o,this.elemenetRef=s,this.renderer=a,this.projectService=l,this.errorHandler=u,this.location=f}hasRoomIdBeenProcessed=!1;addModule;currentPlanHouse;accountData;currentProjectId=void 0;planHouse;ngOnInit(){let t=this.accountCookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.pageInit(t)}ngAfterViewInit(){this.addModule=this.elemenetRef.nativeElement.querySelector(".addModule")}ngAfterViewChecked(){if(this.hasRoomIdBeenProcessed||!this.planHouse||!this.route.snapshot.params.roomId)return;let t=parseInt(this.route.snapshot.params.roomId);setTimeout(()=>{typeof t=="number"&&(this.planHouse.currentViewRoom=t,this.planHouse.currentIdClickedRoom=t,this.planHouse.openViewRoom(t),this.planHouse.sceneOpenToggle=!0,this.planHouse.guideTemplate=this.planHouse.roomGuideTemplate,this.hasRoomIdBeenProcessed=!0)},0)}pageInit(t){return at(this,null,function*(){try{this.accountData=(yield this.accountService.GETaccount(t)).accountData,console.log(this.accountData),this.route.paramMap.subscribe(i=>{if(i.get("planId")===null)return;let r=parseInt(i.get("planId"));this.accountData.projects.length>=r&&r>=0&&(this.currentProjectId=r)})}catch(i){console.log(i)}})}createProject(){return at(this,null,function*(){this.closeAddModule();let t=this.accountCookieService.getJwt();if(!(!this.projectNameForm.value||!this.projectNameForm.value.name||!t))try{this.accountData.projects=[...this.accountData.projects,(yield this.projectService.POSTcreateProject(t,this.projectNameForm.value.name)).projectData]}catch(i){console.log(i)}})}saveProject(){return at(this,null,function*(){if(this.currentProjectId===void 0)return;let t=this.accountData.projects[this.currentProjectId]._id,i=this.currentPlanHouse;if(i===void 0)return;let r=this.accountCookieService.getJwt();if(!r)return;let o={rooms:i,name:this.accountData.projects[this.currentProjectId].name};try{yield this.projectService.PUTupdateProject(r,t,o)}catch(s){console.log(s)}})}deleteProject(t){return at(this,null,function*(){let i=this.accountCookieService.getJwt(),r=this.accountData.projects[t]._id;!i||!r||(yield this.projectService.DELETEdeleteProject(i,r),this.accountData.projects.splice(t,1))})}checkDesktop=Th;getCurrentViewRoom(){if(this.planHouse!==void 0)return this.planHouse.currentViewRoom}updatePlanData(t){this.currentPlanHouse=t,this.accountData.projects[this.currentProjectId].rooms=t}closeAddModule(){this.addModule&&this.renderer.addClass(this.addModule,"disabled")}openAddModule(){this.addModule&&this.renderer.removeClass(this.addModule,"disabled")}closeProject(){this.saveProject(),this.currentProjectId=void 0;let t=this.location.path().split("/").slice(0,-1).join("/");this.location.replaceState(t)}openProject(t){let i=this.location.path()+"/"+t;this.location.replaceState(i),this.currentProjectId=t}projectNameForm=new ki({name:new kn("",[Et.required])});static \u0275fac=function(i){return new(i||n)(de(za),de(Vi),de(dr),de(ur),de(nn),de(wr),de(Sh),de(bi),de(oo))};static \u0275cmp=vn({type:n,selectors:[["app-plan-house-page"]],viewQuery:function(i,r){if(i&1&&Ri(cue,5),i&2){let o;si(o=ai())&&(r.planHouse=o.first)}},decls:6,vars:3,consts:[["planHouse",""],[1,"body"],["class","mobileAlert",4,"ngIf"],["class","functionalModule",4,"ngIf"],[1,"addModule","disabled"],["class","addModuleSpan",3,"formGroup","ngSubmit",4,"ngIf"],[1,"mobileAlert"],[1,"functionalModule"],["class","chooseProjectSpan",3,"ngClass",4,"ngIf"],[1,"planModule",3,"ngClass"],[3,"click",4,"ngIf"],[3,"ngClass","planHouse","callSaveEmitter","planHouseEmitter",4,"ngIf"],[1,"chooseProjectSpan",3,"ngClass"],["class","projectCard",3,"click",4,"ngFor","ngForOf"],[1,"addProjectCard","projectCard",3,"click"],["src","/assets/images/addIcon.svg","alt",""],[1,"projectCard",3,"click"],[1,"mainProjectInformation"],[1,"projectTitle"],[1,"projectSchem"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"deleteProjectBtn",3,"click"],["src","/assets/images/deleteIcon.svg","alt",""],[1,"room"],[3,"click"],[3,"callSaveEmitter","planHouseEmitter","ngClass","planHouse"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt",""],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","name",1,"inputLabel"],["formControlName","name","id","name","type","text",1,"addModuleInput"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"]],template:function(i,r){i&1&&(R(0,"span",1),we(1,"app-navigation-panel"),ke(2,uue,2,0,"p",2)(3,gue,5,6,"span",3),P(),R(4,"span",4),ke(5,vue,12,2,"form",5),P()),i&2&&(W(2),ne("ngIf",!r.checkDesktop()),W(),ne("ngIf",r.checkDesktop()),W(2),ne("ngIf",r.accountData))},dependencies:[ws,Ch,wi,Tn,ss,Ra,os,Ia,Da,js,Gs,Ao],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.planModule[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;flex-direction:row;gap:10px;width:100%;transition:all .5s ease-in-out}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:35px;height:35px;background:none;border:none;cursor:pointer}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}app-plan-house[_ngcontent-%COMP%]{width:90%}.body[_ngcontent-%COMP%]{background-color:#000;gap:60px;display:flex;flex-direction:column;align-items:center;min-height:100vh}.chooseProjectSpan[_ngcontent-%COMP%]{width:calc(100% - 60px);z-index:0;gap:10px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;transition:all .5s ease-in-out;grid-area:1/1/2/2}@media (max-width: 1024px){.chooseProjectSpan[_ngcontent-%COMP%]{justify-content:center}}.projectCard[_ngcontent-%COMP%]{width:45%;position:relative;aspect-ratio:4/3;display:flex;justify-content:space-between;align-items:center;flex-direction:column;gap:10px;border-radius:10px;border:none;box-shadow:0 0 10px #fff;background-color:#000;cursor:pointer;overflow:hidden}@media (max-width: 1024px){.projectCard[_ngcontent-%COMP%]{width:clamp(450px,70%,700px)}}.deleteProjectBtn[_ngcontent-%COMP%]{height:35px;align-self:flex-end;margin:10px;background:none;border:none;aspect-ratio:1;cursor:pointer}.mainProjectInformation[_ngcontent-%COMP%]{display:flex;height:90%;width:100%;flex-direction:column;align-items:center}.addProjectCard[_ngcontent-%COMP%]{justify-content:center;background-color:#344e41;box-shadow:none}.projectCard[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-size:2em;color:#fff}.addProjectCard[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.projectTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;font-weight:700;font-size:20px}.projectSchem[_ngcontent-%COMP%]{display:grid;height:80%;aspect-ratio:1;gap:7px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:5px}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.functionalModule[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;align-items:flex-start;justify-items:center;width:90vw}@media (max-width: 768px){.functionalModule[_ngcontent-%COMP%]{width:calc(100vw - 10px)}}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.dividerWithText[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.dividerLine[_ngcontent-%COMP%]{flex:1;height:2px;background-color:#1f1f1f}.dividerText[_ngcontent-%COMP%]{padding:0 10px;color:#666;font-size:14px;text-transform:uppercase}.mobileAlert[_ngcontent-%COMP%]{color:#fff;width:300px;font-size:20px}']})}return n})();function yue(n,e){if(n&1){let t=Rt();R(0,"button",7),Re("click",function(){Be(t);let r=_e();return Ve(r.deleteColor())}),we(1,"img",8),P()}if(n&2){let t=_e();ni("background-color",t.deleteColorCalculate())}}var qV=(()=>{class n{route;cookieService;furnitureCardService;serverImageControl;router;furnitureModelService;errorHandler;constructor(t,i,r,o,s,a,l){this.route=t,this.cookieService=i,this.furnitureCardService=r,this.serverImageControl=o,this.router=s,this.furnitureModelService=a,this.errorHandler=l}idPage;createFurnitureComponent;furnitureData={name:"",description:"",colors:[],shops:[],additionalData:{},proportions:{width:null,height:null,length:null}};ngOnInit(){let t=this.cookieService.getJwt();if(!t){this.router.navigateByUrl("/login");return}this.idPage=this.route.snapshot.paramMap.get("id"),this.idPage!=="new"&&this.pageInit(t)}pageInit(t){return at(this,null,function*(){try{let i=yield this.furnitureCardService.GETfurnitureCard(this.idPage,t);if(i.authorMatched===!1){this.router.navigateByUrl("/create/new");return}this.furnitureData=i.furnitureCard,this.createFurnitureComponent.currentColorId=0}catch(i){console.log(i)}})}transformUrlArrayToBlob(t){return at(this,null,function*(){return yield Promise.all(t.map(r=>at(null,null,function*(){return yield(yield fetch(r.toString())).blob()})))})}deleteFurnitureCard(){return at(this,null,function*(){let t=this.cookieService.getJwt();if(t)try{yield this.furnitureModelService.DELETEfurnitureModel(t,this.idPage),yield this.serverImageControl.DELETEproject(t,this.idPage),yield this.furnitureCardService.DELETEfurnitureCard(t,this.idPage),this.router.navigateByUrl("/account")}catch(i){console.log(i)}})}createFurnitureCard(){return at(this,null,function*(){let t=this.cookieService.getJwt();if(!(!this.checkValid("create")||!t))try{let i=this.createFurnitureComponent.furnitureData,r=(yield this.furnitureCardService.POSTcreateFurnitureCard(i,t)).furnitureData._id;i.colors.forEach(s=>at(this,null,function*(){let l={images:yield this.transformUrlArrayToBlob(s.imagesData.images),idMainImage:s.imagesData.idMainImage};yield this.serverImageControl.POSTuploadProjectImages(s.color,l,t,r)}));let o=this.createFurnitureComponent.furnitureModelInput.files[0];yield this.furnitureModelService.POSTuploadFurnitureModel(o,t,r),this.router.navigateByUrl("/account")}catch(i){console.log(i)}})}updateFurnitureCard(){return at(this,null,function*(){let t=this.cookieService.getJwt();if(!(!this.checkValid("update")||!t))try{let i=this.createFurnitureComponent.furnitureData;console.log(i),yield this.furnitureCardService.PUTupdateFurnitureCard(i,this.idPage,t),i.colors.forEach(o=>at(this,null,function*(){if(o.imagesData.images.length===0)return;let a={images:yield this.transformUrlArrayToBlob(o.imagesData.images),idMainImage:o.imagesData.idMainImage};yield this.serverImageControl.POSTuploadProjectImages(o.color,a,t,this.idPage)}));let r=this.createFurnitureComponent.furnitureModelInput.files;r[0]&&(yield this.furnitureModelService.POSTuploadFurnitureModel(r[0],t,this.idPage))}catch(i){console.log(i)}})}checkValid(t){let{colors:i,shops:r,proportions:o}=this.furnitureData,s=this.createFurnitureComponent.furnitureModelInput.files[0];if(i.length==0)return this.createFurnitureComponent.openColorModule(),!1;if(!o.height||!o.width||!o.length)return this.createFurnitureComponent.openAdditional(),this.errorHandler.setError("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B",5e3),!1;if(!s&&t==="create")return this.errorHandler.setError("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 3D \u043C\u043E\u0434\u0435\u043B\u044C",5e3),!1;if(r.length==0)return this.errorHandler.setError("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",5e3),!1;for(let a of i)if(a.imagesData.images.length==0&&t==="create")return this.errorHandler.setError("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",5e3),!1;return!0}clearFurnitureCard(){this.createFurnitureComponent.currentColorId=void 0,this.furnitureData={name:"",description:"",colors:[],shops:[],additionalData:{},proportions:{width:0,height:0,length:0}}}deleteColorCalculate(){if(!(!this.createFurnitureComponent||this.createFurnitureComponent.currentColorId===void 0))return this.createFurnitureComponent.furnitureData.colors[this.createFurnitureComponent.currentColorId].color}deleteColor(){this.createFurnitureComponent.furnitureData.colors.length<=1||this.createFurnitureComponent.deleteColor()}getCurrentColorId(){if(this.createFurnitureComponent)return this.createFurnitureComponent.currentColorId}static \u0275fac=function(i){return new(i||n)(de(ur),de(Vi),de(_c),de(kc),de(dr),de(Mh),de(bi))};static \u0275cmp=vn({type:n,selectors:[["app-create-furniture-page"]],viewQuery:function(i,r){if(i&1&&Ri(Cm,5),i&2){let o;si(o=ai())&&(r.createFurnitureComponent=o.first)}},decls:9,vars:7,consts:[[1,"body"],[3,"furnitureData"],[1,"functionalBtns"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0446\u0432\u0435\u0442","class","functionalBtn deleteBtn deleteColorBtn colorCircle",3,"background-color","click",4,"ngIf"],[1,"functionalBtn","confirmBtn",3,"click"],[1,"functionalBtn","deleteBtn",3,"title"],["alt","",3,"click","src"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0446\u0432\u0435\u0442",1,"functionalBtn","deleteBtn","deleteColorBtn","colorCircle",3,"click"],["src","/assets/images/cancelIcon.svg","alt","x","srcset",""]],template:function(i,r){i&1&&(R(0,"span",0),we(1,"app-navigation-panel")(2,"app-create-furniture",1),R(3,"span",2),ke(4,yue,2,2,"button",3),R(5,"button",4),Re("click",function(){return r.idPage==="new"?r.createFurnitureCard():r.updateFurnitureCard()}),te(6),P(),R(7,"button",5)(8,"img",6),Re("click",function(){return r.idPage==="new"?r.clearFurnitureCard():r.deleteFurnitureCard()}),P()()()()),i&2&&(W(2),ne("furnitureData",r.furnitureData),W(2),ne("ngIf",r.getCurrentColorId()!==void 0),W(2),cr(" ",r.idPage==="new"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C":"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"," "),W(),ne("title",r.idPage==="new"?"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u043E\u0440\u043C\u0443":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443 \u043C\u0435\u0431\u0435\u043B\u0438"),W(),ni("rotate",r.idPage==="new"?"45deg":"0deg"),ne("src","assets/images/"+(r.idPage==="new"?"addIcon.svg":"deleteIcon.svg"),lr))},dependencies:[ws,Cm,Tn],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}button[_ngcontent-%COMP%]{transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.body[_ngcontent-%COMP%]{min-height:100vh;background-color:#000;width:100vw;display:flex;flex-direction:column;align-items:center}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}app-navigation-panel[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%]{width:80%}.confirmBtn[_ngcontent-%COMP%]{width:75%;color:#fff;padding:15px}.functionalBtns[_ngcontent-%COMP%]{margin-top:20px;width:clamp(300px,30vw,400px);display:flex;height:50px;gap:10px;justify-content:center;margin-bottom:30px}.functionalBtn[_ngcontent-%COMP%]{height:100%;border-radius:10px;background-color:#344e41;border:none;cursor:pointer}.deleteBtn[_ngcontent-%COMP%]{aspect-ratio:1;padding:1em;display:flex;align-items:center;justify-content:center}.colorCircle[_ngcontent-%COMP%]{border-radius:100%;height:100%;aspect-ratio:1;display:flex;align-items:center;justify-content:center;transition:all .3s ease-in-out;box-shadow:0 0 5px #fff}.colorCircle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;height:50%}.deleteColorBtn[_ngcontent-%COMP%]{padding:5px;background-color:transparent}@media (max-width: 1440px){app-create-furniture[_ngcontent-%COMP%]{width:90%}}@media (max-width: 600px){.body[_ngcontent-%COMP%]{width:100vw;padding:0 10px;box-sizing:border-box}app-navigation-panel[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%]{width:100%}.functionalBtns[_ngcontent-%COMP%]{width:100%;max-width:400px;gap:5px}.confirmBtn[_ngcontent-%COMP%]{width:100%;padding:10px}}']})}return n})();var eb=(()=>{class n{httpModule;baseServiceUrl=ri+"shop/";constructor(t){this.httpModule=t}GETgetCategoryData(t,i){return at(this,null,function*(){try{let{resultsArray:r}=yield tn(this.httpModule.get(`${this.baseServiceUrl}category?category=${t}&startRange=${i}`));return r=r.map(o=>wt(Oe({},o),{previewUrl:ri+o.previewUrl})),{resultsArray:r}}catch(r){throw console.error(r),r}})}GETgetAllFurnitures(t){return at(this,null,function*(){try{let{resultsArray:i}=yield tn(this.httpModule.get(`${this.baseServiceUrl}all?startRange=${t}`));return i=i.map(r=>wt(Oe({},r),{previewUrl:ri+r.previewUrl})),{resultsArray:i}}catch(i){throw console.error(i),i}})}static \u0275fac=function(i){return new(i||n)(ze(Li))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xue=n=>({disabled:n});function wue(n,e){if(n&1&&(R(0,"h1",8),te(1),P()),n&2){let t=_e();W(),Ln(t.currentCategoryId!==void 0?t.categoryArray[t.currentCategoryId].translateMany:"\u0412\u0441\u0435")}}function bue(n,e){if(n&1){let t=Rt();R(0,"span",12)(1,"button",13),Re("click",function(){Be(t);let r=_e(2);return Ve(r.closeFurniture())}),we(2,"img",14),P(),R(3,"span",15),we(4,"app-view-furniture",16),R(5,"button",17),Re("click",function(){Be(t);let r=_e(2);return Ve(r.openAddModule())}),te(6,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),P()()()}if(n&2){let t=_e(2);W(4),ne("furnitureId",t.furnitureId)}}function Eue(n,e){if(n&1){let t=Rt();R(0,"button",25),Re("click",function(){let r=Be(t).index,o=_e(3);return Ve(o.changeCategory(r))}),te(1),P()}if(n&2){let t=e.$implicit,i=e.index,r=_e(3);Sn("active",r.currentCategoryId===i),W(),cr(" ",t.translateOne," ")}}function Mue(n,e){if(n&1&&(R(0,"div",26)(1,"h2",27),te(2),P(),we(3,"img",28),R(4,"a",29),te(5),Ea(6,"costFormat"),P()()),n&2){let t,i=e.$implicit,r=_e(3);W(2),Ln(i.name),W(),ne("src",i.previewUrl,lr),W(),ne("routerLink",r.checkDesktop()?"/shop/"+((t=r.categoryName)!==null&&t!==void 0?t:"all")+"/"+i.furnitureId:"/plan"),W(),Ln(Ma(6,4,i.cost))}}function Sue(n,e){if(n&1){let t=Rt();R(0,"span",18)(1,"span",19)(2,"span",20),ke(3,Eue,2,3,"button",21),R(4,"button",22),Re("click",function(){Be(t);let r=_e(2);return Ve(r.changeCategory(void 0))}),te(5," \u0412\u0441\u0435 "),P()()(),R(6,"span",23),ke(7,Mue,7,6,"div",24),P()()}if(n&2){let t=_e(2);W(3),ne("ngForOf",t.categoryArray),W(),Sn("active",t.currentCategoryId==null),W(3),ne("ngForOf",t.furnituresArray)("ngForTrackBy",t.trackByFn)}}function Cue(n,e){if(n&1&&(R(0,"span",9),ke(1,bue,7,1,"span",10)(2,Sue,8,5,"span",11),P()),n&2){let t=_e();W(),ne("ngIf",t.furnitureId),W(),ne("ngIf",!t.furnitureId)}}function Tue(n,e){if(n&1&&(R(0,"a",36),te(1),P()),n&2){let t=e.$implicit,i=e.index,r=_e().index,o=_e(2);ne("routerLink",o.getPlanUrl(r,i)),W(),Ln(t.name)}}function Aue(n,e){if(n&1&&(R(0,"span")(1,"h3",34),te(2),P(),ke(3,Tue,2,2,"a",35),P()),n&2){let t=e.$implicit;W(2),Ln(t.name),W(),ne("ngForOf",t.rooms)}}function Iue(n,e){n&1&&(R(0,"a",37),te(1,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D"),P())}function Due(n,e){if(n&1&&(R(0,"span",30)(1,"h2",31),te(2,"\u041F\u0440\u043E\u0435\u043A\u0442\u044B"),P(),ke(3,Aue,4,2,"span",32)(4,Iue,2,0,"a",33),P()),n&2){let t=_e();W(3),ne("ngForOf",t.accountProjects),W(),ne("ngIf",t.accountProjects.length==0)}}var tb=(()=>{class n{route;shopService;router;accountService;accountCookieService;errorHandler;categoryService;location;elementRef;constructor(t,i,r,o,s,a,l,u,f){this.route=t,this.shopService=i,this.router=r,this.accountService=o,this.accountCookieService=s,this.errorHandler=a,this.categoryService=l,this.location=u,this.elementRef=f}furnitureId;categoryName;accountProjects;currentCategoryId;furnituresArray=[];openAddModuleToggle=!1;categoryArray=[];ngOnInit(){this.processRouteParams(),console.log("init")}initCategories(){return at(this,null,function*(){try{this.categoryArray=(yield this.categoryService.GETgetAllCategories()).categoryArray,this.categoryArray.forEach((t,i)=>{this.categoryName===t.name&&(this.currentCategoryId=i)})}catch(t){console.log(t)}})}furnituresInit(){return at(this,null,function*(){if(this.furnitureId){let t=this.accountCookieService.getJwt();if(!t)return;try{this.accountProjects=(yield this.accountService.GETaccount(t)).accountData.projects}catch(i){console.log(i)}}else this.categoryName!==void 0?yield this.requestCategoryFurnitures(this.categoryName,0):yield this.requestAllFurnitures(0)})}requestCategoryFurnitures(t,i){return at(this,null,function*(){let r=(yield this.shopService.GETgetCategoryData(t,i)).resultsArray;this.furnituresArray=[...this.furnituresArray,...r]})}requestAllFurnitures(t){return at(this,null,function*(){let i=(yield this.shopService.GETgetAllFurnitures(t)).resultsArray;this.furnituresArray=[...this.furnituresArray,...i]})}processRouteParams(){let t=this.route.snapshot.params;this.furnitureId=t.furnitureId,this.categoryName=t.category,this.furnituresInit(),this.initCategories()}setScrollObserver(){let t=this.elementRef.nativeElement.querySelector(".category"),i=t.querySelectorAll(".furnitureItem"),r=0,o={root:t,rootMargin:"0px",threshold:.5},s=(l,u)=>{l.forEach(f=>at(this,null,function*(){if(f.isIntersecting){let h=f.target;(Array.from(i).indexOf(h)+1)%8===0&&!h.dataset.observed&&(h.dataset.observed="true",r++,this.categoryName!==void 0?yield this.requestCategoryFurnitures(this.categoryName,this.furnituresArray.length):yield this.requestAllFurnitures(this.furnituresArray.length))}}))},a=new IntersectionObserver(s,o);i.forEach(l=>a.observe(l))}openAddModule(){this.openAddModuleToggle=!0}closeAddModule(){this.openAddModuleToggle=!1}checkDesktop=Th;changeCategory(t){this.furnituresArray.length=0,this.currentCategoryId=t;let i=this.location.path();t!==void 0?(this.categoryName=this.categoryArray[t].name,i+="/"+this.categoryArray[t].name):(this.categoryName=void 0,i="/shop"),this.location.replaceState(i),this.furnituresInit()}closeFurniture(){this.router.navigateByUrl("/shop"+(this.categoryName==="all"?"":"/"+this.categoryName))}getPlanUrl(t,i){return`/plan/${t}/${i}/${this.furnitureId}`}trackByFn(t,i){return i.id}static \u0275fac=function(i){return new(i||n)(de(ur),de(eb),de(dr),de(za),de(Vi),de(bi),de(Nf),de(oo),de(nn))};static \u0275cmp=vn({type:n,selectors:[["app-shop-page"]],decls:9,vars:6,consts:[[1,"body"],["class","categoryTitle","title","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",4,"ngIf"],["class","shopModule",4,"ngIf"],[1,"addModule",3,"ngClass"],[1,"addModuleSpan"],["type","button","title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],["class","addModuleFormContent",4,"ngIf"],["title","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",1,"categoryTitle"],[1,"shopModule"],["class","viewFurnitureSpan",4,"ngIf"],["class","mainArea",4,"ngIf"],[1,"viewFurnitureSpan"],["title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"closeFurniture",3,"click"],["src","/assets/images/addIcon.svg","alt","\u0417\u0430\u043A\u0440\u044B\u0442\u044C"],[1,"furnitureCard"],[3,"furnitureId"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0431\u0435\u043B\u044C",1,"chooseAddProjectBtn",3,"click"],[1,"mainArea"],[1,"params"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton","title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",3,"active","click",4,"ngFor","ngForOf"],["title","\u0412\u0441\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",1,"furnitureCategoryButton",3,"click"],[1,"category"],["class","furnitureItem",4,"ngFor","ngForOf","ngForTrackBy"],["title","\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",1,"furnitureCategoryButton",3,"click"],[1,"furnitureItem"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureTitle"],["loading","lazy","alt","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438","title","\u041F\u0440\u0435\u0432\u044C\u044E \u043C\u0435\u0431\u0435\u043B\u0438",1,"furniturePreview",3,"src"],["title","\u0426\u0435\u043D\u0430 \u043C\u0435\u0431\u0435\u043B\u0438",1,"furnitureLink",3,"routerLink"],[1,"addModuleFormContent"],["title","\u041F\u0440\u043E\u0435\u043A\u0442\u044B",1,"addModuleTitle"],[4,"ngFor","ngForOf"],["routerLink","/plan","class","noProjectsBtn","title","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D",4,"ngIf"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B",3,"routerLink",4,"ngFor","ngForOf"],["title","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u043D\u0430\u0442\u044B",3,"routerLink"],["routerLink","/plan","title","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043B\u0430\u043D",1,"noProjectsBtn"]],template:function(i,r){i&1&&(R(0,"span",0),we(1,"app-navigation-panel"),ke(2,wue,2,1,"h1",1)(3,Cue,3,2,"span",2),P(),R(4,"span",3)(5,"span",4)(6,"button",5),Re("click",function(){return r.closeAddModule()}),we(7,"img",6),P(),ke(8,Due,5,2,"span",7),P()()),i&2&&(W(2),ne("ngIf",!r.furnitureId),W(),ne("ngIf",r.furnituresArray),W(),ne("ngClass",Fr(4,xue,!r.openAddModuleToggle)),W(4),ne("ngIf",r.accountProjects))},dependencies:[ws,wi,Tn,j_,rs,Ao,Ff],styles:['@charset "UTF-8";@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.furnitureLink[_ngcontent-%COMP%], .furnitureCategoryButton[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.furnitureLink[_ngcontent-%COMP%]:hover, .furnitureCategoryButton[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px;z-index:10}.body[_ngcontent-%COMP%]{min-height:calc(100vh - 30px);background-color:#000;display:flex;align-items:center;flex-direction:column;gap:30px;padding-bottom:30px}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:30%;justify-content:center;height:fit-content}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;color:#fff;cursor:pointer;border:none}.furnitureCategoryButton.active[_ngcontent-%COMP%]{background-color:#a3b18a;color:#000}.shopModule[_ngcontent-%COMP%]{width:90%;margin:0 auto;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;z-index:1}.category[_ngcontent-%COMP%]{width:75%;height:60vh;transition:all .5s ease-in-out;overflow-y:scroll;display:flex;flex-wrap:wrap;justify-content:space-around;z-index:1}.categoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.params[_ngcontent-%COMP%]{width:20%;display:flex;gap:10px}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);max-width:60%;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:space-between}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%;border-radius:10px}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:100%;justify-content:start;padding-top:5px;padding-right:5px;max-height:400px;overflow-y:scroll}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;flex-shrink:0;color:#fff;cursor:pointer;border:none}.closeFurniture[_ngcontent-%COMP%]{background:none;border:none;width:35px;aspect-ratio:1;align-self:flex-start;cursor:pointer;grid-area:1/1/2/2;z-index:2}.closeFurniture[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}.viewFurnitureSpan[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;gap:10px;grid-area:1/1/2/2}.mainArea[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex}app-view-furniture[_ngcontent-%COMP%]{width:95%}.furnitureCard[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%;display:flex;flex-direction:column;align-items:center;z-index:1}.chooseAddProjectBtn[_ngcontent-%COMP%]{width:clamp(250px,35%,320px);padding:15px;background-color:#a3b18a;color:#dad7cd;border-radius:10px;border:none;cursor:pointer}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;align-items:center;gap:15px;box-shadow:0 0 10px #fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.disabled[_ngcontent-%COMP%]{opacity:0;z-index:0}.addModuleFormContent[_ngcontent-%COMP%]{padding-top:20px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px;color:#dad7cd;border-radius:10px;text-decoration:none;text-align:center}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{background-color:#a3b18a;width:calc(100% - 20px);margin-bottom:0;cursor:default}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background-color:#344e41;width:calc(80% - 20px);align-self:end;margin-top:5px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.noProjectsBtn[_ngcontent-%COMP%]{color:#dad7cd;text-align:center;width:50%;padding:15px 10px;background-color:#344e41;border-radius:10px;text-decoration:none;transition:background-color .3s ease-in-out}.noProjectsBtn[_ngcontent-%COMP%]:hover{background-color:#a3b18a}@media (max-width: 768px){.category[_ngcontent-%COMP%], .params[_ngcontent-%COMP%], .furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{width:100%}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(20% - 5px)}.mainArea[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 600px){.category[_ngcontent-%COMP%]{max-height:50vh;margin-top:15px}.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(25% - 5px)}.furnitureItem[_ngcontent-%COMP%]{flex:auto;width:100%;max-width:none}.chooseAddProjectBtn[_ngcontent-%COMP%]{width:calc(100% - 20px);max-width:400px}}@media (max-width: 500px){.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(33% - 5px)}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{max-height:250px}}@media (max-width: 370px){.furnitureCategoryButton[_ngcontent-%COMP%]{width:calc(50% - 5px)}}']})}return n})();var XV=[{component:jV,path:""},{component:WV,path:"account"},{component:$V,path:"login"},{component:Dg,path:"plan"},{component:Dg,path:"plan/:planId"},{component:Dg,path:"plan/:planId/:roomId"},{component:Dg,path:"plan/:planId/:roomId/:furnitureId"},{component:qV,path:"create/:id"},{component:tb,path:"shop"},{component:tb,path:"shop/:category"},{component:tb,path:"shop/:category/:furnitureId"}];var Rue=(()=>{class n extends yc{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(ze(fn),ze(Ru),ze(Pu))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})();function Pue(){return new I_}function Oue(n,e,t){return new k_(n,e,t)}var YV=[{provide:Pu,useFactory:Pue},{provide:yc,useClass:Rue},{provide:oc,useFactory:Oue,deps:[Np,yc,Wn]}],SDe=[{provide:Ru,useClass:f1},{provide:XS,useValue:"NoopAnimations"},...YV],Nue=[{provide:Ru,useFactory:()=>new F_},{provide:XS,useFactory:()=>"BrowserAnimations"},...YV];function ZV(){return hu("NgEagerAnimations"),[...Nue]}var Fue=(n,e)=>({appearBody:n,disappearBody:e}),WI=(()=>{class n{errorService;cookieService;constructor(t,i){this.errorService=t,this.cookieService=i}errorMessage;ngOnInit(){this.errorService.error$.subscribe(t=>{this.errorMessage=t})}reloadPage(){window.location.reload()}logout(){this.cookieService.deleteJwt(),this.cookieService.deleteUserType(),this.reloadPage()}static \u0275fac=function(i){return new(i||n)(de(bi),de(Vi))};static \u0275cmp=vn({type:n,selectors:[["app-error-handler"]],decls:11,vars:5,consts:[[1,"body",3,"ngClass"],[1,"textSpan"],[1,"title"],[1,"errorMessage"],[1,"btnsSpan"],[1,"solutionBtn",3,"click"],["loading","lazy","src","/assets/images/reloadIcon.svg","alt",""],["loading","lazy","src","/assets/images/logoutIcon.svg","alt",""]],template:function(i,r){i&1&&(R(0,"span",0)(1,"span",1)(2,"h2",2),te(3,"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A"),P(),R(4,"h3",3),te(5),P()(),R(6,"span",4)(7,"button",5),Re("click",function(){return r.reloadPage()}),we(8,"img",6),P(),R(9,"button",5),Re("click",function(){return r.logout()}),we(10,"img",7),P()()()),i&2&&(ne("ngClass",ay(2,Fue,r.errorMessage&&r.errorMessage.length>0,r.errorMessage&&r.errorMessage.length<1)),W(5),Ln(r.errorMessage))},dependencies:[Ao],styles:['@font-face{font-family:Calypso;src:url(/assets/fonts/Calypso.ttf) format("truetype");font-weight:400}@font-face{font-family:Courier New;src:url(/assets/fonts/Courier\\ New.ttf) format("truetype");font-weight:400}*[_ngcontent-%COMP%]{font-family:Courier New,Courier}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{border-radius:10px;border:1px solid rgba(163,177,138,.3);background-color:#000;width:clamp(250px,30vw,350px);display:flex;flex-direction:row;padding:0 10px;justify-content:space-around;position:fixed;bottom:0;opacity:0;left:50%;transform:translate(-50%);transition:all .5s ease-in-out}.appearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_appearHandler .5s forwards}.disappearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_disappearHandler .5s forwards}.textSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;padding:10px 0;font-size:105%;width:60%;justify-content:center}.title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:17px}.errorMessage[_ngcontent-%COMP%]{color:red;margin:0;width:100%;font-weight:400;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.solutionBtn[_ngcontent-%COMP%]{width:100%;height:100%;background:none;margin:0;border:none;cursor:pointer}.solutionBtn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}.btnsSpan[_ngcontent-%COMP%]{display:flex;justify-self:flex-end;width:26%}@keyframes _ngcontent-%COMP%_appearHandler{0%{opacity:0;bottom:0}to{opacity:1;bottom:50px}}@keyframes _ngcontent-%COMP%_disappearHandler{0%{opacity:1;bottom:50px}to{opacity:0;bottom:-100%}}']})}return n})();var nb=(()=>{class n{title="HouseQuality";static \u0275fac=function(i){return new(i||n)};static \u0275cmp=vn({type:n,selectors:[["app-root"]],features:[xi([V_,WI,za,Ah,Vi,kc,Sh,Ch,Yw,_c,Mh,eb,Zw,Location])],decls:2,vars:0,template:function(i,r){i&1&&we(0,"router-outlet")(1,"app-error-handler")},dependencies:[nm,WI],encapsulation:2})}return n})();var KV=(()=>{class n{errorHandler;constructor(t){this.errorHandler=t}intercept(t,i){return i.handle(t).pipe(Rs(r=>(this.errorHandler.setError(r.error.message,5e3),tc(()=>r))))}static \u0275fac=function(i){return new(i||n)(ze(bi))};static \u0275prov=De({token:n,factory:n.\u0275fac})}return n})();var $I={providers:[wT(XV),LF(),ZV(),jC(GC()),VF(),{provide:_y,useClass:KV,multi:!0}]};Lp(nb,$I).catch(n=>console.error(n));Lp(nb,$I).then(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/model-scw.js",{scope:"/"}).then(n=>{}).catch(n=>{})}).catch(n=>console.error(n));
