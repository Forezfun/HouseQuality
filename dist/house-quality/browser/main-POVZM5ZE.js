var N5=Object.create;var vw=Object.defineProperty,L5=Object.defineProperties,k5=Object.getOwnPropertyDescriptor,B5=Object.getOwnPropertyDescriptors,V5=Object.getOwnPropertyNames,_m=Object.getOwnPropertySymbols,z5=Object.getPrototypeOf,_w=Object.prototype.hasOwnProperty,vD=Object.prototype.propertyIsEnumerable;var yD=(i,e,t)=>e in i?vw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ze=(i,e)=>{for(var t in e||={})_w.call(e,t)&&yD(i,t,e[t]);if(_m)for(var t of _m(e))vD.call(e,t)&&yD(i,t,e[t]);return i},Zt=(i,e)=>L5(i,B5(e));var wm=(i,e)=>{var t={};for(var n in i)_w.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&_m)for(var n of _m(i))e.indexOf(n)<0&&vD.call(i,n)&&(t[n]=i[n]);return t};var _D=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var H5=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of V5(e))!_w.call(i,r)&&r!==t&&vw(i,r,{get:()=>e[r],enumerable:!(n=k5(e,r))||n.enumerable});return i};var wD=(i,e,t)=>(t=i!=null?N5(z5(i)):{},H5(e||!i||!i.__esModule?vw(t,"default",{value:i,enumerable:!0}):t,i));var gn=(i,e,t)=>new Promise((n,r)=>{var o=c=>{try{a(t.next(c))}catch(u){r(u)}},s=c=>{try{a(t.throw(c))}catch(u){r(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(i,e)).next())});var pO=_D((xb,Mb)=>{"use strict";(function(i,e){typeof xb=="object"&&typeof Mb<"u"?Mb.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis<"u"?globalThis:i||self,i.Compressor=e())})(xb,function(){"use strict";function i(he,ee){var k=Object.keys(he);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(he);ee&&(q=q.filter(function(pe){return Object.getOwnPropertyDescriptor(he,pe).enumerable})),k.push.apply(k,q)}return k}function e(he){for(var ee=1;ee<arguments.length;ee++){var k=arguments[ee]!=null?arguments[ee]:{};ee%2?i(Object(k),!0).forEach(function(q){o(he,q,k[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(he,Object.getOwnPropertyDescriptors(k)):i(Object(k)).forEach(function(q){Object.defineProperty(he,q,Object.getOwnPropertyDescriptor(k,q))})}return he}function t(he,ee){if(!(he instanceof ee))throw new TypeError("Cannot call a class as a function")}function n(he,ee){for(var k=0;k<ee.length;k++){var q=ee[k];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(he,c(q.key),q)}}function r(he,ee,k){return ee&&n(he.prototype,ee),k&&n(he,k),Object.defineProperty(he,"prototype",{writable:!1}),he}function o(he,ee,k){return ee=c(ee),ee in he?Object.defineProperty(he,ee,{value:k,enumerable:!0,configurable:!0,writable:!0}):he[ee]=k,he}function s(){return s=Object.assign?Object.assign.bind():function(he){for(var ee=1;ee<arguments.length;ee++){var k=arguments[ee];for(var q in k)Object.prototype.hasOwnProperty.call(k,q)&&(he[q]=k[q])}return he},s.apply(this,arguments)}function a(he,ee){if(typeof he!="object"||he===null)return he;var k=he[Symbol.toPrimitive];if(k!==void 0){var q=k.call(he,ee||"default");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ee==="string"?String:Number)(he)}function c(he){var ee=a(he,"string");return typeof ee=="symbol"?ee:String(ee)}var u={exports:{}};(function(he){typeof window>"u"||function(ee){var k=ee.HTMLCanvasElement&&ee.HTMLCanvasElement.prototype,q=ee.Blob&&function(){try{return!!new Blob}catch{return!1}}(),pe=q&&ee.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),ae=ee.BlobBuilder||ee.WebKitBlobBuilder||ee.MozBlobBuilder||ee.MSBlobBuilder,We=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,Pe=(q||ae)&&ee.atob&&ee.ArrayBuffer&&ee.Uint8Array&&function(ke){var et,O,gt,At,ut,Ce,Xt,nt,st;if(et=ke.match(We),!et)throw new Error("invalid data URI");for(O=et[2]?et[1]:"text/plain"+(et[3]||";charset=US-ASCII"),gt=!!et[4],At=ke.slice(et[0].length),gt?ut=atob(At):ut=decodeURIComponent(At),Ce=new ArrayBuffer(ut.length),Xt=new Uint8Array(Ce),nt=0;nt<ut.length;nt+=1)Xt[nt]=ut.charCodeAt(nt);return q?new Blob([pe?Xt:Ce],{type:O}):(st=new ae,st.append(Ce),st.getBlob(O))};ee.HTMLCanvasElement&&!k.toBlob&&(k.mozGetAsFile?k.toBlob=function(ke,et,O){var gt=this;setTimeout(function(){O&&k.toDataURL&&Pe?ke(Pe(gt.toDataURL(et,O))):ke(gt.mozGetAsFile("blob",et))})}:k.toDataURL&&Pe&&(k.msToBlob?k.toBlob=function(ke,et,O){var gt=this;setTimeout(function(){(et&&et!=="image/png"||O)&&k.toDataURL&&Pe?ke(Pe(gt.toDataURL(et,O))):ke(gt.msToBlob(et))})}:k.toBlob=function(ke,et,O){var gt=this;setTimeout(function(){ke(Pe(gt.toDataURL(et,O)))})})),he.exports?he.exports=Pe:ee.dataURLtoBlob=Pe}(window)})(u);var f=u.exports,h=function(ee){return typeof Blob>"u"?!1:ee instanceof Blob||Object.prototype.toString.call(ee)==="[object Blob]"},p={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},g=typeof window<"u"&&typeof window.document<"u",y=g?window:{},x=function(ee){return ee>0&&ee<1/0},v=Array.prototype.slice;function _(he){return Array.from?Array.from(he):v.call(he)}var C=/^image\/.+$/;function M(he){return C.test(he)}function S(he){var ee=M(he)?he.substr(6):"";return ee==="jpeg"&&(ee="jpg"),".".concat(ee)}var H=String.fromCharCode;function P(he,ee,k){var q="",pe;for(k+=ee,pe=ee;pe<k;pe+=1)q+=H(he.getUint8(pe));return q}var F=y.btoa;function $(he,ee){for(var k=[],q=8192,pe=new Uint8Array(he);pe.length>0;)k.push(H.apply(null,_(pe.subarray(0,q)))),pe=pe.subarray(q);return"data:".concat(ee,";base64,").concat(F(k.join("")))}function U(he){var ee=new DataView(he),k;try{var q,pe,ae;if(ee.getUint8(0)===255&&ee.getUint8(1)===216)for(var We=ee.byteLength,Pe=2;Pe+1<We;){if(ee.getUint8(Pe)===255&&ee.getUint8(Pe+1)===225){pe=Pe;break}Pe+=1}if(pe){var ke=pe+4,et=pe+10;if(P(ee,ke,4)==="Exif"){var O=ee.getUint16(et);if(q=O===18761,(q||O===19789)&&ee.getUint16(et+2,q)===42){var gt=ee.getUint32(et+4,q);gt>=8&&(ae=et+gt)}}}if(ae){var At=ee.getUint16(ae,q),ut,Ce;for(Ce=0;Ce<At;Ce+=1)if(ut=ae+Ce*12+2,ee.getUint16(ut,q)===274){ut+=8,k=ee.getUint16(ut,q),ee.setUint16(ut,1,q);break}}}catch{k=1}return k}function D(he){var ee=0,k=1,q=1;switch(he){case 2:k=-1;break;case 3:ee=-180;break;case 4:q=-1;break;case 5:ee=90,q=-1;break;case 6:ee=90;break;case 7:ee=90,k=-1;break;case 8:ee=-90;break}return{rotate:ee,scaleX:k,scaleY:q}}var j=/\.\d*(?:0|9){12}\d*$/;function le(he){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return j.test(he)?Math.round(he*ee)/ee:he}function re(he){var ee=he.aspectRatio,k=he.height,q=he.width,pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",ae=x(q),We=x(k);if(ae&&We){var Pe=k*ee;(pe==="contain"||pe==="none")&&Pe>q||pe==="cover"&&Pe<q?k=q/ee:q=k*ee}else ae?k=q/ee:We&&(q=k*ee);return{width:q,height:k}}function xe(he){for(var ee=_(new Uint8Array(he)),k=ee.length,q=[],pe=0;pe+3<k;){var ae=ee[pe],We=ee[pe+1];if(ae===255&&We===218)break;if(ae===255&&We===216)pe+=2;else{var Pe=ee[pe+2]*256+ee[pe+3],ke=pe+Pe+2,et=ee.slice(pe,ke);q.push(et),pe=ke}}return q.reduce(function(O,gt){return gt[0]===255&&gt[1]===225?O.concat(gt):O},[])}function ve(he,ee){var k=_(new Uint8Array(he));if(k[2]!==255||k[3]!==224)return he;var q=k[4]*256+k[5],pe=[255,216].concat(ee,k.slice(4+q));return new Uint8Array(pe)}var W=y.ArrayBuffer,Q=y.FileReader,X=y.URL||y.webkitURL,me=/\.\w+$/,Le=y.Compressor,$e=function(){function he(ee,k){t(this,he),this.file=ee,this.exif=[],this.image=new Image,this.options=e(e({},p),k),this.aborted=!1,this.result=null,this.init()}return r(he,[{key:"init",value:function(){var k=this,q=this.file,pe=this.options;if(!h(q)){this.fail(new Error("The first argument must be a File or Blob object."));return}var ae=q.type;if(!M(ae)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!X||!Q){this.fail(new Error("The current browser does not support image compression."));return}W||(pe.checkOrientation=!1,pe.retainExif=!1);var We=ae==="image/jpeg",Pe=We&&pe.checkOrientation,ke=We&&pe.retainExif;if(X&&!Pe&&!ke)this.load({url:X.createObjectURL(q)});else{var et=new Q;this.reader=et,et.onload=function(O){var gt=O.target,At=gt.result,ut={},Ce=1;Pe&&(Ce=U(At),Ce>1&&s(ut,D(Ce))),ke&&(k.exif=xe(At)),Pe||ke?!X||Ce>1?ut.url=$(At,ae):ut.url=X.createObjectURL(q):ut.url=At,k.load(ut)},et.onabort=function(){k.fail(new Error("Aborted to read the image with FileReader."))},et.onerror=function(){k.fail(new Error("Failed to read the image with FileReader."))},et.onloadend=function(){k.reader=null},Pe||ke?et.readAsArrayBuffer(q):et.readAsDataURL(q)}}},{key:"load",value:function(k){var q=this,pe=this.file,ae=this.image;ae.onload=function(){q.draw(e(e({},k),{},{naturalWidth:ae.naturalWidth,naturalHeight:ae.naturalHeight}))},ae.onabort=function(){q.fail(new Error("Aborted to load the image."))},ae.onerror=function(){q.fail(new Error("Failed to load the image."))},y.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(y.navigator.userAgent)&&(ae.crossOrigin="anonymous"),ae.alt=pe.name,ae.src=k.url}},{key:"draw",value:function(k){var q=this,pe=k.naturalWidth,ae=k.naturalHeight,We=k.rotate,Pe=We===void 0?0:We,ke=k.scaleX,et=ke===void 0?1:ke,O=k.scaleY,gt=O===void 0?1:O,At=this.file,ut=this.image,Ce=this.options,Xt=document.createElement("canvas"),nt=Xt.getContext("2d"),st=Math.abs(Pe)%180===90,N=(Ce.resize==="contain"||Ce.resize==="cover")&&x(Ce.width)&&x(Ce.height),A=Math.max(Ce.maxWidth,0)||1/0,ie=Math.max(Ce.maxHeight,0)||1/0,Se=Math.max(Ce.minWidth,0)||0,Te=Math.max(Ce.minHeight,0)||0,Me=pe/ae,qe=Ce.width,Re=Ce.height;if(st){var Ye=[ie,A];A=Ye[0],ie=Ye[1];var xt=[Te,Se];Se=xt[0],Te=xt[1];var Oe=[Re,qe];qe=Oe[0],Re=Oe[1]}N&&(Me=qe/Re);var Ze=re({aspectRatio:Me,width:A,height:ie},"contain");A=Ze.width,ie=Ze.height;var Rt=re({aspectRatio:Me,width:Se,height:Te},"cover");if(Se=Rt.width,Te=Rt.height,N){var mt=re({aspectRatio:Me,width:qe,height:Re},Ce.resize);qe=mt.width,Re=mt.height}else{var tt=re({aspectRatio:Me,width:qe,height:Re}),yt=tt.width;qe=yt===void 0?pe:yt;var Mt=tt.height;Re=Mt===void 0?ae:Mt}qe=Math.floor(le(Math.min(Math.max(qe,Se),A))),Re=Math.floor(le(Math.min(Math.max(Re,Te),ie)));var An=-qe/2,E=-Re/2,te=qe,ne=Re,ue=[];if(N){var De=0,dt=0,_t=pe,Tn=ae,Hn=re({aspectRatio:Me,width:pe,height:ae},{contain:"cover",cover:"contain"}[Ce.resize]);_t=Hn.width,Tn=Hn.height,De=(pe-_t)/2,dt=(ae-Tn)/2,ue.push(De,dt,_t,Tn)}if(ue.push(An,E,te,ne),st){var Yt=[Re,qe];qe=Yt[0],Re=Yt[1]}Xt.width=qe,Xt.height=Re,M(Ce.mimeType)||(Ce.mimeType=At.type);var jn="transparent";At.size>Ce.convertSize&&Ce.convertTypes.indexOf(Ce.mimeType)>=0&&(Ce.mimeType="image/jpeg");var Rn=Ce.mimeType==="image/jpeg";if(Rn&&(jn="#fff"),nt.fillStyle=jn,nt.fillRect(0,0,qe,Re),Ce.beforeDraw&&Ce.beforeDraw.call(this,nt,Xt),!this.aborted&&(nt.save(),nt.translate(qe/2,Re/2),nt.rotate(Pe*Math.PI/180),nt.scale(et,gt),nt.drawImage.apply(nt,[ut].concat(ue)),nt.restore(),Ce.drew&&Ce.drew.call(this,nt,Xt),!this.aborted)){var kr=function(zi){if(!q.aborted){var ho=function(po){return q.done({naturalWidth:pe,naturalHeight:ae,result:po})};if(zi&&Rn&&Ce.retainExif&&q.exif&&q.exif.length>0){var Ms=function(po){return ho(f($(ve(po,q.exif),Ce.mimeType)))};if(zi.arrayBuffer)zi.arrayBuffer().then(Ms).catch(function(){q.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var Br=new Q;q.reader=Br,Br.onload=function(Ha){var po=Ha.target;Ms(po.result)},Br.onabort=function(){q.fail(new Error("Aborted to read the compressed image with FileReader."))},Br.onerror=function(){q.fail(new Error("Failed to read the compressed image with FileReader."))},Br.onloadend=function(){q.reader=null},Br.readAsArrayBuffer(zi)}}else ho(zi)}};Xt.toBlob?Xt.toBlob(kr,Ce.mimeType,Ce.quality):kr(f(Xt.toDataURL(Ce.mimeType,Ce.quality)))}}},{key:"done",value:function(k){var q=k.naturalWidth,pe=k.naturalHeight,ae=k.result,We=this.file,Pe=this.image,ke=this.options;if(X&&Pe.src.indexOf("blob:")===0&&X.revokeObjectURL(Pe.src),ae)if(ke.strict&&!ke.retainExif&&ae.size>We.size&&ke.mimeType===We.type&&!(ke.width>q||ke.height>pe||ke.minWidth>q||ke.minHeight>pe||ke.maxWidth<q||ke.maxHeight<pe))ae=We;else{var et=new Date;ae.lastModified=et.getTime(),ae.lastModifiedDate=et,ae.name=We.name,ae.name&&ae.type!==We.type&&(ae.name=ae.name.replace(me,S(ae.type)))}else ae=We;this.result=ae,ke.success&&ke.success.call(this,ae)}},{key:"fail",value:function(k){var q=this.options;if(q.error)q.error.call(this,k);else throw k}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Le,he}},{key:"setDefaults",value:function(k){s(p,k)}}]),he}();return $e})});var Q3=_D((of,bp)=>{"use strict";(function(){var i,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,c="__lodash_placeholder__",u=1,f=2,h=4,p=1,g=2,y=1,x=2,v=4,_=8,C=16,M=32,S=64,H=128,P=256,F=512,$=30,U="...",D=800,j=16,le=1,re=2,xe=3,ve=1/0,W=9007199254740991,Q=17976931348623157e292,X=NaN,me=4294967295,Le=me-1,$e=me>>>1,he=[["ary",H],["bind",y],["bindKey",x],["curry",_],["curryRight",C],["flip",F],["partial",M],["partialRight",S],["rearg",P]],ee="[object Arguments]",k="[object Array]",q="[object AsyncFunction]",pe="[object Boolean]",ae="[object Date]",We="[object DOMException]",Pe="[object Error]",ke="[object Function]",et="[object GeneratorFunction]",O="[object Map]",gt="[object Number]",At="[object Null]",ut="[object Object]",Ce="[object Promise]",Xt="[object Proxy]",nt="[object RegExp]",st="[object Set]",N="[object String]",A="[object Symbol]",ie="[object Undefined]",Se="[object WeakMap]",Te="[object WeakSet]",Me="[object ArrayBuffer]",qe="[object DataView]",Re="[object Float32Array]",Ye="[object Float64Array]",xt="[object Int8Array]",Oe="[object Int16Array]",Ze="[object Int32Array]",Rt="[object Uint8Array]",mt="[object Uint8ClampedArray]",tt="[object Uint16Array]",yt="[object Uint32Array]",Mt=/\b__p \+= '';/g,An=/\b(__p \+=) '' \+/g,E=/(__e\(.*?\)|\b__t\)) \+\n'';/g,te=/&(?:amp|lt|gt|quot|#39);/g,ne=/[&<>"']/g,ue=RegExp(te.source),De=RegExp(ne.source),dt=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,Tn=/<%=([\s\S]+?)%>/g,Hn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yt=/^\w*$/,jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rn=/[\\^$.*+?()[\]{}|]/g,kr=RegExp(Rn.source),ei=/^\s+/,zi=/\s/,ho=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ms=/\{\n\/\* \[wrapped with (.+)\] \*/,Br=/,? & /,Ha=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,po=/[()=,{}\[\]\/\s]/,Rp=/\\(\\)?/g,Up=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fp=/\w*$/,a_=/^[-+]0x[0-9a-f]+$/i,c_=/^0b[01]+$/i,R=/^\[object .+?Constructor\]$/,Z=/^0o[0-7]+$/i,oe=/^(?:0|[1-9]\d*)$/,se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,J=/($^)/,Ve=/['\n\r\u2028\u2029\\]/g,Qe="\\ud800-\\udfff",at="\\u0300-\\u036f",lt="\\ufe20-\\ufe2f",St="\\u20d0-\\u20ff",Ct=at+lt+St,vt="\\u2700-\\u27bf",dn="a-z\\xdf-\\xf6\\xf8-\\xff",Gn="\\xac\\xb1\\xd7\\xf7",Wn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",nr="\\u2000-\\u206f",mn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ht="A-Z\\xc0-\\xd6\\xd8-\\xde",di="\\ufe0e\\ufe0f",fn=Gn+Wn+nr+mn,ir="['\u2019]",ja="["+Qe+"]",Xi="["+fn+"]",Ga="["+Ct+"]",Xn="\\d+",bs="["+vt+"]",au="["+dn+"]",rr="[^"+Qe+fn+Xn+vt+dn+ht+"]",Jc="\\ud83c[\\udffb-\\udfff]",l_="(?:"+Ga+"|"+Jc+")",uf="[^"+Qe+"]",u_="(?:\\ud83c[\\udde6-\\uddff]){2}",d_="[\\ud800-\\udbff][\\udc00-\\udfff]",cu="["+ht+"]",iA="\\u200d",rA="(?:"+au+"|"+rr+")",BL="(?:"+cu+"|"+rr+")",oA="(?:"+ir+"(?:d|ll|m|re|s|t|ve))?",sA="(?:"+ir+"(?:D|LL|M|RE|S|T|VE))?",aA=l_+"?",cA="["+di+"]?",VL="(?:"+iA+"(?:"+[uf,u_,d_].join("|")+")"+cA+aA+")*",zL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",HL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lA=cA+aA+VL,jL="(?:"+[bs,u_,d_].join("|")+")"+lA,GL="(?:"+[uf+Ga+"?",Ga,u_,d_,ja].join("|")+")",WL=RegExp(ir,"g"),$L=RegExp(Ga,"g"),f_=RegExp(Jc+"(?="+Jc+")|"+GL+lA,"g"),qL=RegExp([cu+"?"+au+"+"+oA+"(?="+[Xi,cu,"$"].join("|")+")",BL+"+"+sA+"(?="+[Xi,cu+rA,"$"].join("|")+")",cu+"?"+rA+"+"+oA,cu+"+"+sA,HL,zL,Xn,jL].join("|"),"g"),XL=RegExp("["+iA+Qe+Ct+di+"]"),YL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ZL=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],KL=-1,Ln={};Ln[Re]=Ln[Ye]=Ln[xt]=Ln[Oe]=Ln[Ze]=Ln[Rt]=Ln[mt]=Ln[tt]=Ln[yt]=!0,Ln[ee]=Ln[k]=Ln[Me]=Ln[pe]=Ln[qe]=Ln[ae]=Ln[Pe]=Ln[ke]=Ln[O]=Ln[gt]=Ln[ut]=Ln[nt]=Ln[st]=Ln[N]=Ln[Se]=!1;var Pn={};Pn[ee]=Pn[k]=Pn[Me]=Pn[qe]=Pn[pe]=Pn[ae]=Pn[Re]=Pn[Ye]=Pn[xt]=Pn[Oe]=Pn[Ze]=Pn[O]=Pn[gt]=Pn[ut]=Pn[nt]=Pn[st]=Pn[N]=Pn[A]=Pn[Rt]=Pn[mt]=Pn[tt]=Pn[yt]=!0,Pn[Pe]=Pn[ke]=Pn[Se]=!1;var JL={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},QL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ek={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tk={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nk=parseFloat,ik=parseInt,uA=typeof global=="object"&&global&&global.Object===Object&&global,rk=typeof self=="object"&&self&&self.Object===Object&&self,Ri=uA||rk||Function("return this")(),h_=typeof of=="object"&&of&&!of.nodeType&&of,Qc=h_&&typeof bp=="object"&&bp&&!bp.nodeType&&bp,dA=Qc&&Qc.exports===h_,p_=dA&&uA.process,mo=function(){try{var Y=Qc&&Qc.require&&Qc.require("util").types;return Y||p_&&p_.binding&&p_.binding("util")}catch{}}(),fA=mo&&mo.isArrayBuffer,hA=mo&&mo.isDate,pA=mo&&mo.isMap,mA=mo&&mo.isRegExp,gA=mo&&mo.isSet,yA=mo&&mo.isTypedArray;function Vr(Y,ye,ce){switch(ce.length){case 0:return Y.call(ye);case 1:return Y.call(ye,ce[0]);case 2:return Y.call(ye,ce[0],ce[1]);case 3:return Y.call(ye,ce[0],ce[1],ce[2])}return Y.apply(ye,ce)}function ok(Y,ye,ce,it){for(var It=-1,vn=Y==null?0:Y.length;++It<vn;){var wi=Y[It];ye(it,wi,ce(wi),Y)}return it}function go(Y,ye){for(var ce=-1,it=Y==null?0:Y.length;++ce<it&&ye(Y[ce],ce,Y)!==!1;);return Y}function sk(Y,ye){for(var ce=Y==null?0:Y.length;ce--&&ye(Y[ce],ce,Y)!==!1;);return Y}function vA(Y,ye){for(var ce=-1,it=Y==null?0:Y.length;++ce<it;)if(!ye(Y[ce],ce,Y))return!1;return!0}function Wa(Y,ye){for(var ce=-1,it=Y==null?0:Y.length,It=0,vn=[];++ce<it;){var wi=Y[ce];ye(wi,ce,Y)&&(vn[It++]=wi)}return vn}function Pp(Y,ye){var ce=Y==null?0:Y.length;return!!ce&&lu(Y,ye,0)>-1}function m_(Y,ye,ce){for(var it=-1,It=Y==null?0:Y.length;++it<It;)if(ce(ye,Y[it]))return!0;return!1}function $n(Y,ye){for(var ce=-1,it=Y==null?0:Y.length,It=Array(it);++ce<it;)It[ce]=ye(Y[ce],ce,Y);return It}function $a(Y,ye){for(var ce=-1,it=ye.length,It=Y.length;++ce<it;)Y[It+ce]=ye[ce];return Y}function g_(Y,ye,ce,it){var It=-1,vn=Y==null?0:Y.length;for(it&&vn&&(ce=Y[++It]);++It<vn;)ce=ye(ce,Y[It],It,Y);return ce}function ak(Y,ye,ce,it){var It=Y==null?0:Y.length;for(it&&It&&(ce=Y[--It]);It--;)ce=ye(ce,Y[It],It,Y);return ce}function y_(Y,ye){for(var ce=-1,it=Y==null?0:Y.length;++ce<it;)if(ye(Y[ce],ce,Y))return!0;return!1}var ck=v_("length");function lk(Y){return Y.split("")}function uk(Y){return Y.match(Ha)||[]}function _A(Y,ye,ce){var it;return ce(Y,function(It,vn,wi){if(ye(It,vn,wi))return it=vn,!1}),it}function Op(Y,ye,ce,it){for(var It=Y.length,vn=ce+(it?1:-1);it?vn--:++vn<It;)if(ye(Y[vn],vn,Y))return vn;return-1}function lu(Y,ye,ce){return ye===ye?Mk(Y,ye,ce):Op(Y,wA,ce)}function dk(Y,ye,ce,it){for(var It=ce-1,vn=Y.length;++It<vn;)if(it(Y[It],ye))return It;return-1}function wA(Y){return Y!==Y}function xA(Y,ye){var ce=Y==null?0:Y.length;return ce?w_(Y,ye)/ce:X}function v_(Y){return function(ye){return ye==null?i:ye[Y]}}function __(Y){return function(ye){return Y==null?i:Y[ye]}}function MA(Y,ye,ce,it,It){return It(Y,function(vn,wi,Un){ce=it?(it=!1,vn):ye(ce,vn,wi,Un)}),ce}function fk(Y,ye){var ce=Y.length;for(Y.sort(ye);ce--;)Y[ce]=Y[ce].value;return Y}function w_(Y,ye){for(var ce,it=-1,It=Y.length;++it<It;){var vn=ye(Y[it]);vn!==i&&(ce=ce===i?vn:ce+vn)}return ce}function x_(Y,ye){for(var ce=-1,it=Array(Y);++ce<Y;)it[ce]=ye(ce);return it}function hk(Y,ye){return $n(ye,function(ce){return[ce,Y[ce]]})}function bA(Y){return Y&&Y.slice(0,AA(Y)+1).replace(ei,"")}function zr(Y){return function(ye){return Y(ye)}}function M_(Y,ye){return $n(ye,function(ce){return Y[ce]})}function df(Y,ye){return Y.has(ye)}function EA(Y,ye){for(var ce=-1,it=Y.length;++ce<it&&lu(ye,Y[ce],0)>-1;);return ce}function SA(Y,ye){for(var ce=Y.length;ce--&&lu(ye,Y[ce],0)>-1;);return ce}function pk(Y,ye){for(var ce=Y.length,it=0;ce--;)Y[ce]===ye&&++it;return it}var mk=__(JL),gk=__(QL);function yk(Y){return"\\"+tk[Y]}function vk(Y,ye){return Y==null?i:Y[ye]}function uu(Y){return XL.test(Y)}function _k(Y){return YL.test(Y)}function wk(Y){for(var ye,ce=[];!(ye=Y.next()).done;)ce.push(ye.value);return ce}function b_(Y){var ye=-1,ce=Array(Y.size);return Y.forEach(function(it,It){ce[++ye]=[It,it]}),ce}function CA(Y,ye){return function(ce){return Y(ye(ce))}}function qa(Y,ye){for(var ce=-1,it=Y.length,It=0,vn=[];++ce<it;){var wi=Y[ce];(wi===ye||wi===c)&&(Y[ce]=c,vn[It++]=ce)}return vn}function Np(Y){var ye=-1,ce=Array(Y.size);return Y.forEach(function(it){ce[++ye]=it}),ce}function xk(Y){var ye=-1,ce=Array(Y.size);return Y.forEach(function(it){ce[++ye]=[it,it]}),ce}function Mk(Y,ye,ce){for(var it=ce-1,It=Y.length;++it<It;)if(Y[it]===ye)return it;return-1}function bk(Y,ye,ce){for(var it=ce+1;it--;)if(Y[it]===ye)return it;return it}function du(Y){return uu(Y)?Sk(Y):ck(Y)}function Ho(Y){return uu(Y)?Ck(Y):lk(Y)}function AA(Y){for(var ye=Y.length;ye--&&zi.test(Y.charAt(ye)););return ye}var Ek=__(ek);function Sk(Y){for(var ye=f_.lastIndex=0;f_.test(Y);)++ye;return ye}function Ck(Y){return Y.match(f_)||[]}function Ak(Y){return Y.match(qL)||[]}var Tk=function Y(ye){ye=ye==null?Ri:Xa.defaults(Ri.Object(),ye,Xa.pick(Ri,ZL));var ce=ye.Array,it=ye.Date,It=ye.Error,vn=ye.Function,wi=ye.Math,Un=ye.Object,E_=ye.RegExp,Dk=ye.String,yo=ye.TypeError,Lp=ce.prototype,Ik=vn.prototype,fu=Un.prototype,kp=ye["__core-js_shared__"],Bp=Ik.toString,En=fu.hasOwnProperty,Rk=0,TA=function(){var l=/[^.]+$/.exec(kp&&kp.keys&&kp.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Vp=fu.toString,Uk=Bp.call(Un),Fk=Ri._,Pk=E_("^"+Bp.call(En).replace(Rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zp=dA?ye.Buffer:i,Ya=ye.Symbol,Hp=ye.Uint8Array,DA=zp?zp.allocUnsafe:i,jp=CA(Un.getPrototypeOf,Un),IA=Un.create,RA=fu.propertyIsEnumerable,Gp=Lp.splice,UA=Ya?Ya.isConcatSpreadable:i,ff=Ya?Ya.iterator:i,el=Ya?Ya.toStringTag:i,Wp=function(){try{var l=ol(Un,"defineProperty");return l({},"",{}),l}catch{}}(),Ok=ye.clearTimeout!==Ri.clearTimeout&&ye.clearTimeout,Nk=it&&it.now!==Ri.Date.now&&it.now,Lk=ye.setTimeout!==Ri.setTimeout&&ye.setTimeout,$p=wi.ceil,qp=wi.floor,S_=Un.getOwnPropertySymbols,kk=zp?zp.isBuffer:i,FA=ye.isFinite,Bk=Lp.join,Vk=CA(Un.keys,Un),xi=wi.max,Yi=wi.min,zk=it.now,Hk=ye.parseInt,PA=wi.random,jk=Lp.reverse,C_=ol(ye,"DataView"),hf=ol(ye,"Map"),A_=ol(ye,"Promise"),hu=ol(ye,"Set"),pf=ol(ye,"WeakMap"),mf=ol(Un,"create"),Xp=pf&&new pf,pu={},Gk=sl(C_),Wk=sl(hf),$k=sl(A_),qk=sl(hu),Xk=sl(pf),Yp=Ya?Ya.prototype:i,gf=Yp?Yp.valueOf:i,OA=Yp?Yp.toString:i;function T(l){if(ti(l)&&!Ut(l)&&!(l instanceof en)){if(l instanceof vo)return l;if(En.call(l,"__wrapped__"))return NT(l)}return new vo(l)}var mu=function(){function l(){}return function(d){if(!Yn(d))return{};if(IA)return IA(d);l.prototype=d;var m=new l;return l.prototype=i,m}}();function Zp(){}function vo(l,d){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=i}T.templateSettings={escape:dt,evaluate:_t,interpolate:Tn,variable:"",imports:{_:T}},T.prototype=Zp.prototype,T.prototype.constructor=T,vo.prototype=mu(Zp.prototype),vo.prototype.constructor=vo;function en(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function Yk(){var l=new en(this.__wrapped__);return l.__actions__=xr(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=xr(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=xr(this.__views__),l}function Zk(){if(this.__filtered__){var l=new en(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function Kk(){var l=this.__wrapped__.value(),d=this.__dir__,m=Ut(l),w=d<0,b=m?l.length:0,I=lV(0,b,this.__views__),L=I.start,G=I.end,K=G-L,we=w?G:L-1,be=this.__iteratees__,Ae=be.length,Ke=0,ft=Yi(K,this.__takeCount__);if(!m||!w&&b==K&&ft==K)return oT(l,this.__actions__);var bt=[];e:for(;K--&&Ke<ft;){we+=d;for(var Ht=-1,Et=l[we];++Ht<Ae;){var Jt=be[Ht],rn=Jt.iteratee,Gr=Jt.type,ar=rn(Et);if(Gr==re)Et=ar;else if(!ar){if(Gr==le)continue e;break e}}bt[Ke++]=Et}return bt}en.prototype=mu(Zp.prototype),en.prototype.constructor=en;function tl(l){var d=-1,m=l==null?0:l.length;for(this.clear();++d<m;){var w=l[d];this.set(w[0],w[1])}}function Jk(){this.__data__=mf?mf(null):{},this.size=0}function Qk(l){var d=this.has(l)&&delete this.__data__[l];return this.size-=d?1:0,d}function eB(l){var d=this.__data__;if(mf){var m=d[l];return m===s?i:m}return En.call(d,l)?d[l]:i}function tB(l){var d=this.__data__;return mf?d[l]!==i:En.call(d,l)}function nB(l,d){var m=this.__data__;return this.size+=this.has(l)?0:1,m[l]=mf&&d===i?s:d,this}tl.prototype.clear=Jk,tl.prototype.delete=Qk,tl.prototype.get=eB,tl.prototype.has=tB,tl.prototype.set=nB;function ta(l){var d=-1,m=l==null?0:l.length;for(this.clear();++d<m;){var w=l[d];this.set(w[0],w[1])}}function iB(){this.__data__=[],this.size=0}function rB(l){var d=this.__data__,m=Kp(d,l);if(m<0)return!1;var w=d.length-1;return m==w?d.pop():Gp.call(d,m,1),--this.size,!0}function oB(l){var d=this.__data__,m=Kp(d,l);return m<0?i:d[m][1]}function sB(l){return Kp(this.__data__,l)>-1}function aB(l,d){var m=this.__data__,w=Kp(m,l);return w<0?(++this.size,m.push([l,d])):m[w][1]=d,this}ta.prototype.clear=iB,ta.prototype.delete=rB,ta.prototype.get=oB,ta.prototype.has=sB,ta.prototype.set=aB;function na(l){var d=-1,m=l==null?0:l.length;for(this.clear();++d<m;){var w=l[d];this.set(w[0],w[1])}}function cB(){this.size=0,this.__data__={hash:new tl,map:new(hf||ta),string:new tl}}function lB(l){var d=lm(this,l).delete(l);return this.size-=d?1:0,d}function uB(l){return lm(this,l).get(l)}function dB(l){return lm(this,l).has(l)}function fB(l,d){var m=lm(this,l),w=m.size;return m.set(l,d),this.size+=m.size==w?0:1,this}na.prototype.clear=cB,na.prototype.delete=lB,na.prototype.get=uB,na.prototype.has=dB,na.prototype.set=fB;function nl(l){var d=-1,m=l==null?0:l.length;for(this.__data__=new na;++d<m;)this.add(l[d])}function hB(l){return this.__data__.set(l,s),this}function pB(l){return this.__data__.has(l)}nl.prototype.add=nl.prototype.push=hB,nl.prototype.has=pB;function jo(l){var d=this.__data__=new ta(l);this.size=d.size}function mB(){this.__data__=new ta,this.size=0}function gB(l){var d=this.__data__,m=d.delete(l);return this.size=d.size,m}function yB(l){return this.__data__.get(l)}function vB(l){return this.__data__.has(l)}function _B(l,d){var m=this.__data__;if(m instanceof ta){var w=m.__data__;if(!hf||w.length<t-1)return w.push([l,d]),this.size=++m.size,this;m=this.__data__=new na(w)}return m.set(l,d),this.size=m.size,this}jo.prototype.clear=mB,jo.prototype.delete=gB,jo.prototype.get=yB,jo.prototype.has=vB,jo.prototype.set=_B;function NA(l,d){var m=Ut(l),w=!m&&al(l),b=!m&&!w&&ec(l),I=!m&&!w&&!b&&_u(l),L=m||w||b||I,G=L?x_(l.length,Dk):[],K=G.length;for(var we in l)(d||En.call(l,we))&&!(L&&(we=="length"||b&&(we=="offset"||we=="parent")||I&&(we=="buffer"||we=="byteLength"||we=="byteOffset")||sa(we,K)))&&G.push(we);return G}function LA(l){var d=l.length;return d?l[k_(0,d-1)]:i}function wB(l,d){return um(xr(l),il(d,0,l.length))}function xB(l){return um(xr(l))}function T_(l,d,m){(m!==i&&!Go(l[d],m)||m===i&&!(d in l))&&ia(l,d,m)}function yf(l,d,m){var w=l[d];(!(En.call(l,d)&&Go(w,m))||m===i&&!(d in l))&&ia(l,d,m)}function Kp(l,d){for(var m=l.length;m--;)if(Go(l[m][0],d))return m;return-1}function MB(l,d,m,w){return Za(l,function(b,I,L){d(w,b,m(b),L)}),w}function kA(l,d){return l&&Ss(d,Ui(d),l)}function bB(l,d){return l&&Ss(d,br(d),l)}function ia(l,d,m){d=="__proto__"&&Wp?Wp(l,d,{configurable:!0,enumerable:!0,value:m,writable:!0}):l[d]=m}function D_(l,d){for(var m=-1,w=d.length,b=ce(w),I=l==null;++m<w;)b[m]=I?i:lw(l,d[m]);return b}function il(l,d,m){return l===l&&(m!==i&&(l=l<=m?l:m),d!==i&&(l=l>=d?l:d)),l}function _o(l,d,m,w,b,I){var L,G=d&u,K=d&f,we=d&h;if(m&&(L=b?m(l,w,b,I):m(l)),L!==i)return L;if(!Yn(l))return l;var be=Ut(l);if(be){if(L=dV(l),!G)return xr(l,L)}else{var Ae=Zi(l),Ke=Ae==ke||Ae==et;if(ec(l))return cT(l,G);if(Ae==ut||Ae==ee||Ke&&!b){if(L=K||Ke?{}:AT(l),!G)return K?eV(l,bB(L,l)):QB(l,kA(L,l))}else{if(!Pn[Ae])return b?l:{};L=fV(l,Ae,G)}}I||(I=new jo);var ft=I.get(l);if(ft)return ft;I.set(l,L),nD(l)?l.forEach(function(Et){L.add(_o(Et,d,m,Et,l,I))}):eD(l)&&l.forEach(function(Et,Jt){L.set(Jt,_o(Et,d,m,Jt,l,I))});var bt=we?K?Y_:X_:K?br:Ui,Ht=be?i:bt(l);return go(Ht||l,function(Et,Jt){Ht&&(Jt=Et,Et=l[Jt]),yf(L,Jt,_o(Et,d,m,Jt,l,I))}),L}function EB(l){var d=Ui(l);return function(m){return BA(m,l,d)}}function BA(l,d,m){var w=m.length;if(l==null)return!w;for(l=Un(l);w--;){var b=m[w],I=d[b],L=l[b];if(L===i&&!(b in l)||!I(L))return!1}return!0}function VA(l,d,m){if(typeof l!="function")throw new yo(r);return Ef(function(){l.apply(i,m)},d)}function vf(l,d,m,w){var b=-1,I=Pp,L=!0,G=l.length,K=[],we=d.length;if(!G)return K;m&&(d=$n(d,zr(m))),w?(I=m_,L=!1):d.length>=t&&(I=df,L=!1,d=new nl(d));e:for(;++b<G;){var be=l[b],Ae=m==null?be:m(be);if(be=w||be!==0?be:0,L&&Ae===Ae){for(var Ke=we;Ke--;)if(d[Ke]===Ae)continue e;K.push(be)}else I(d,Ae,w)||K.push(be)}return K}var Za=hT(Es),zA=hT(R_,!0);function SB(l,d){var m=!0;return Za(l,function(w,b,I){return m=!!d(w,b,I),m}),m}function Jp(l,d,m){for(var w=-1,b=l.length;++w<b;){var I=l[w],L=d(I);if(L!=null&&(G===i?L===L&&!jr(L):m(L,G)))var G=L,K=I}return K}function CB(l,d,m,w){var b=l.length;for(m=Vt(m),m<0&&(m=-m>b?0:b+m),w=w===i||w>b?b:Vt(w),w<0&&(w+=b),w=m>w?0:rD(w);m<w;)l[m++]=d;return l}function HA(l,d){var m=[];return Za(l,function(w,b,I){d(w,b,I)&&m.push(w)}),m}function Hi(l,d,m,w,b){var I=-1,L=l.length;for(m||(m=pV),b||(b=[]);++I<L;){var G=l[I];d>0&&m(G)?d>1?Hi(G,d-1,m,w,b):$a(b,G):w||(b[b.length]=G)}return b}var I_=pT(),jA=pT(!0);function Es(l,d){return l&&I_(l,d,Ui)}function R_(l,d){return l&&jA(l,d,Ui)}function Qp(l,d){return Wa(d,function(m){return aa(l[m])})}function rl(l,d){d=Ja(d,l);for(var m=0,w=d.length;l!=null&&m<w;)l=l[Cs(d[m++])];return m&&m==w?l:i}function GA(l,d,m){var w=d(l);return Ut(l)?w:$a(w,m(l))}function or(l){return l==null?l===i?ie:At:el&&el in Un(l)?cV(l):xV(l)}function U_(l,d){return l>d}function AB(l,d){return l!=null&&En.call(l,d)}function TB(l,d){return l!=null&&d in Un(l)}function DB(l,d,m){return l>=Yi(d,m)&&l<xi(d,m)}function F_(l,d,m){for(var w=m?m_:Pp,b=l[0].length,I=l.length,L=I,G=ce(I),K=1/0,we=[];L--;){var be=l[L];L&&d&&(be=$n(be,zr(d))),K=Yi(be.length,K),G[L]=!m&&(d||b>=120&&be.length>=120)?new nl(L&&be):i}be=l[0];var Ae=-1,Ke=G[0];e:for(;++Ae<b&&we.length<K;){var ft=be[Ae],bt=d?d(ft):ft;if(ft=m||ft!==0?ft:0,!(Ke?df(Ke,bt):w(we,bt,m))){for(L=I;--L;){var Ht=G[L];if(!(Ht?df(Ht,bt):w(l[L],bt,m)))continue e}Ke&&Ke.push(bt),we.push(ft)}}return we}function IB(l,d,m,w){return Es(l,function(b,I,L){d(w,m(b),I,L)}),w}function _f(l,d,m){d=Ja(d,l),l=RT(l,d);var w=l==null?l:l[Cs(xo(d))];return w==null?i:Vr(w,l,m)}function WA(l){return ti(l)&&or(l)==ee}function RB(l){return ti(l)&&or(l)==Me}function UB(l){return ti(l)&&or(l)==ae}function wf(l,d,m,w,b){return l===d?!0:l==null||d==null||!ti(l)&&!ti(d)?l!==l&&d!==d:FB(l,d,m,w,wf,b)}function FB(l,d,m,w,b,I){var L=Ut(l),G=Ut(d),K=L?k:Zi(l),we=G?k:Zi(d);K=K==ee?ut:K,we=we==ee?ut:we;var be=K==ut,Ae=we==ut,Ke=K==we;if(Ke&&ec(l)){if(!ec(d))return!1;L=!0,be=!1}if(Ke&&!be)return I||(I=new jo),L||_u(l)?ET(l,d,m,w,b,I):sV(l,d,K,m,w,b,I);if(!(m&p)){var ft=be&&En.call(l,"__wrapped__"),bt=Ae&&En.call(d,"__wrapped__");if(ft||bt){var Ht=ft?l.value():l,Et=bt?d.value():d;return I||(I=new jo),b(Ht,Et,m,w,I)}}return Ke?(I||(I=new jo),aV(l,d,m,w,b,I)):!1}function PB(l){return ti(l)&&Zi(l)==O}function P_(l,d,m,w){var b=m.length,I=b,L=!w;if(l==null)return!I;for(l=Un(l);b--;){var G=m[b];if(L&&G[2]?G[1]!==l[G[0]]:!(G[0]in l))return!1}for(;++b<I;){G=m[b];var K=G[0],we=l[K],be=G[1];if(L&&G[2]){if(we===i&&!(K in l))return!1}else{var Ae=new jo;if(w)var Ke=w(we,be,K,l,d,Ae);if(!(Ke===i?wf(be,we,p|g,w,Ae):Ke))return!1}}return!0}function $A(l){if(!Yn(l)||gV(l))return!1;var d=aa(l)?Pk:R;return d.test(sl(l))}function OB(l){return ti(l)&&or(l)==nt}function NB(l){return ti(l)&&Zi(l)==st}function LB(l){return ti(l)&&gm(l.length)&&!!Ln[or(l)]}function qA(l){return typeof l=="function"?l:l==null?Er:typeof l=="object"?Ut(l)?ZA(l[0],l[1]):YA(l):mD(l)}function O_(l){if(!bf(l))return Vk(l);var d=[];for(var m in Un(l))En.call(l,m)&&m!="constructor"&&d.push(m);return d}function kB(l){if(!Yn(l))return wV(l);var d=bf(l),m=[];for(var w in l)w=="constructor"&&(d||!En.call(l,w))||m.push(w);return m}function N_(l,d){return l<d}function XA(l,d){var m=-1,w=Mr(l)?ce(l.length):[];return Za(l,function(b,I,L){w[++m]=d(b,I,L)}),w}function YA(l){var d=K_(l);return d.length==1&&d[0][2]?DT(d[0][0],d[0][1]):function(m){return m===l||P_(m,l,d)}}function ZA(l,d){return Q_(l)&&TT(d)?DT(Cs(l),d):function(m){var w=lw(m,l);return w===i&&w===d?uw(m,l):wf(d,w,p|g)}}function em(l,d,m,w,b){l!==d&&I_(d,function(I,L){if(b||(b=new jo),Yn(I))BB(l,d,L,m,em,w,b);else{var G=w?w(tw(l,L),I,L+"",l,d,b):i;G===i&&(G=I),T_(l,L,G)}},br)}function BB(l,d,m,w,b,I,L){var G=tw(l,m),K=tw(d,m),we=L.get(K);if(we){T_(l,m,we);return}var be=I?I(G,K,m+"",l,d,L):i,Ae=be===i;if(Ae){var Ke=Ut(K),ft=!Ke&&ec(K),bt=!Ke&&!ft&&_u(K);be=K,Ke||ft||bt?Ut(G)?be=G:oi(G)?be=xr(G):ft?(Ae=!1,be=cT(K,!0)):bt?(Ae=!1,be=lT(K,!0)):be=[]:Sf(K)||al(K)?(be=G,al(G)?be=oD(G):(!Yn(G)||aa(G))&&(be=AT(K))):Ae=!1}Ae&&(L.set(K,be),b(be,K,w,I,L),L.delete(K)),T_(l,m,be)}function KA(l,d){var m=l.length;if(m)return d+=d<0?m:0,sa(d,m)?l[d]:i}function JA(l,d,m){d.length?d=$n(d,function(I){return Ut(I)?function(L){return rl(L,I.length===1?I[0]:I)}:I}):d=[Er];var w=-1;d=$n(d,zr(wt()));var b=XA(l,function(I,L,G){var K=$n(d,function(we){return we(I)});return{criteria:K,index:++w,value:I}});return fk(b,function(I,L){return JB(I,L,m)})}function VB(l,d){return QA(l,d,function(m,w){return uw(l,w)})}function QA(l,d,m){for(var w=-1,b=d.length,I={};++w<b;){var L=d[w],G=rl(l,L);m(G,L)&&xf(I,Ja(L,l),G)}return I}function zB(l){return function(d){return rl(d,l)}}function L_(l,d,m,w){var b=w?dk:lu,I=-1,L=d.length,G=l;for(l===d&&(d=xr(d)),m&&(G=$n(l,zr(m)));++I<L;)for(var K=0,we=d[I],be=m?m(we):we;(K=b(G,be,K,w))>-1;)G!==l&&Gp.call(G,K,1),Gp.call(l,K,1);return l}function eT(l,d){for(var m=l?d.length:0,w=m-1;m--;){var b=d[m];if(m==w||b!==I){var I=b;sa(b)?Gp.call(l,b,1):z_(l,b)}}return l}function k_(l,d){return l+qp(PA()*(d-l+1))}function HB(l,d,m,w){for(var b=-1,I=xi($p((d-l)/(m||1)),0),L=ce(I);I--;)L[w?I:++b]=l,l+=m;return L}function B_(l,d){var m="";if(!l||d<1||d>W)return m;do d%2&&(m+=l),d=qp(d/2),d&&(l+=l);while(d);return m}function Gt(l,d){return nw(IT(l,d,Er),l+"")}function jB(l){return LA(wu(l))}function GB(l,d){var m=wu(l);return um(m,il(d,0,m.length))}function xf(l,d,m,w){if(!Yn(l))return l;d=Ja(d,l);for(var b=-1,I=d.length,L=I-1,G=l;G!=null&&++b<I;){var K=Cs(d[b]),we=m;if(K==="__proto__"||K==="constructor"||K==="prototype")return l;if(b!=L){var be=G[K];we=w?w(be,K,G):i,we===i&&(we=Yn(be)?be:sa(d[b+1])?[]:{})}yf(G,K,we),G=G[K]}return l}var tT=Xp?function(l,d){return Xp.set(l,d),l}:Er,WB=Wp?function(l,d){return Wp(l,"toString",{configurable:!0,enumerable:!1,value:fw(d),writable:!0})}:Er;function $B(l){return um(wu(l))}function wo(l,d,m){var w=-1,b=l.length;d<0&&(d=-d>b?0:b+d),m=m>b?b:m,m<0&&(m+=b),b=d>m?0:m-d>>>0,d>>>=0;for(var I=ce(b);++w<b;)I[w]=l[w+d];return I}function qB(l,d){var m;return Za(l,function(w,b,I){return m=d(w,b,I),!m}),!!m}function tm(l,d,m){var w=0,b=l==null?w:l.length;if(typeof d=="number"&&d===d&&b<=$e){for(;w<b;){var I=w+b>>>1,L=l[I];L!==null&&!jr(L)&&(m?L<=d:L<d)?w=I+1:b=I}return b}return V_(l,d,Er,m)}function V_(l,d,m,w){var b=0,I=l==null?0:l.length;if(I===0)return 0;d=m(d);for(var L=d!==d,G=d===null,K=jr(d),we=d===i;b<I;){var be=qp((b+I)/2),Ae=m(l[be]),Ke=Ae!==i,ft=Ae===null,bt=Ae===Ae,Ht=jr(Ae);if(L)var Et=w||bt;else we?Et=bt&&(w||Ke):G?Et=bt&&Ke&&(w||!ft):K?Et=bt&&Ke&&!ft&&(w||!Ht):ft||Ht?Et=!1:Et=w?Ae<=d:Ae<d;Et?b=be+1:I=be}return Yi(I,Le)}function nT(l,d){for(var m=-1,w=l.length,b=0,I=[];++m<w;){var L=l[m],G=d?d(L):L;if(!m||!Go(G,K)){var K=G;I[b++]=L===0?0:L}}return I}function iT(l){return typeof l=="number"?l:jr(l)?X:+l}function Hr(l){if(typeof l=="string")return l;if(Ut(l))return $n(l,Hr)+"";if(jr(l))return OA?OA.call(l):"";var d=l+"";return d=="0"&&1/l==-ve?"-0":d}function Ka(l,d,m){var w=-1,b=Pp,I=l.length,L=!0,G=[],K=G;if(m)L=!1,b=m_;else if(I>=t){var we=d?null:rV(l);if(we)return Np(we);L=!1,b=df,K=new nl}else K=d?[]:G;e:for(;++w<I;){var be=l[w],Ae=d?d(be):be;if(be=m||be!==0?be:0,L&&Ae===Ae){for(var Ke=K.length;Ke--;)if(K[Ke]===Ae)continue e;d&&K.push(Ae),G.push(be)}else b(K,Ae,m)||(K!==G&&K.push(Ae),G.push(be))}return G}function z_(l,d){return d=Ja(d,l),l=RT(l,d),l==null||delete l[Cs(xo(d))]}function rT(l,d,m,w){return xf(l,d,m(rl(l,d)),w)}function nm(l,d,m,w){for(var b=l.length,I=w?b:-1;(w?I--:++I<b)&&d(l[I],I,l););return m?wo(l,w?0:I,w?I+1:b):wo(l,w?I+1:0,w?b:I)}function oT(l,d){var m=l;return m instanceof en&&(m=m.value()),g_(d,function(w,b){return b.func.apply(b.thisArg,$a([w],b.args))},m)}function H_(l,d,m){var w=l.length;if(w<2)return w?Ka(l[0]):[];for(var b=-1,I=ce(w);++b<w;)for(var L=l[b],G=-1;++G<w;)G!=b&&(I[b]=vf(I[b]||L,l[G],d,m));return Ka(Hi(I,1),d,m)}function sT(l,d,m){for(var w=-1,b=l.length,I=d.length,L={};++w<b;){var G=w<I?d[w]:i;m(L,l[w],G)}return L}function j_(l){return oi(l)?l:[]}function G_(l){return typeof l=="function"?l:Er}function Ja(l,d){return Ut(l)?l:Q_(l,d)?[l]:OT(xn(l))}var XB=Gt;function Qa(l,d,m){var w=l.length;return m=m===i?w:m,!d&&m>=w?l:wo(l,d,m)}var aT=Ok||function(l){return Ri.clearTimeout(l)};function cT(l,d){if(d)return l.slice();var m=l.length,w=DA?DA(m):new l.constructor(m);return l.copy(w),w}function W_(l){var d=new l.constructor(l.byteLength);return new Hp(d).set(new Hp(l)),d}function YB(l,d){var m=d?W_(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.byteLength)}function ZB(l){var d=new l.constructor(l.source,Fp.exec(l));return d.lastIndex=l.lastIndex,d}function KB(l){return gf?Un(gf.call(l)):{}}function lT(l,d){var m=d?W_(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.length)}function uT(l,d){if(l!==d){var m=l!==i,w=l===null,b=l===l,I=jr(l),L=d!==i,G=d===null,K=d===d,we=jr(d);if(!G&&!we&&!I&&l>d||I&&L&&K&&!G&&!we||w&&L&&K||!m&&K||!b)return 1;if(!w&&!I&&!we&&l<d||we&&m&&b&&!w&&!I||G&&m&&b||!L&&b||!K)return-1}return 0}function JB(l,d,m){for(var w=-1,b=l.criteria,I=d.criteria,L=b.length,G=m.length;++w<L;){var K=uT(b[w],I[w]);if(K){if(w>=G)return K;var we=m[w];return K*(we=="desc"?-1:1)}}return l.index-d.index}function dT(l,d,m,w){for(var b=-1,I=l.length,L=m.length,G=-1,K=d.length,we=xi(I-L,0),be=ce(K+we),Ae=!w;++G<K;)be[G]=d[G];for(;++b<L;)(Ae||b<I)&&(be[m[b]]=l[b]);for(;we--;)be[G++]=l[b++];return be}function fT(l,d,m,w){for(var b=-1,I=l.length,L=-1,G=m.length,K=-1,we=d.length,be=xi(I-G,0),Ae=ce(be+we),Ke=!w;++b<be;)Ae[b]=l[b];for(var ft=b;++K<we;)Ae[ft+K]=d[K];for(;++L<G;)(Ke||b<I)&&(Ae[ft+m[L]]=l[b++]);return Ae}function xr(l,d){var m=-1,w=l.length;for(d||(d=ce(w));++m<w;)d[m]=l[m];return d}function Ss(l,d,m,w){var b=!m;m||(m={});for(var I=-1,L=d.length;++I<L;){var G=d[I],K=w?w(m[G],l[G],G,m,l):i;K===i&&(K=l[G]),b?ia(m,G,K):yf(m,G,K)}return m}function QB(l,d){return Ss(l,J_(l),d)}function eV(l,d){return Ss(l,ST(l),d)}function im(l,d){return function(m,w){var b=Ut(m)?ok:MB,I=d?d():{};return b(m,l,wt(w,2),I)}}function gu(l){return Gt(function(d,m){var w=-1,b=m.length,I=b>1?m[b-1]:i,L=b>2?m[2]:i;for(I=l.length>3&&typeof I=="function"?(b--,I):i,L&&sr(m[0],m[1],L)&&(I=b<3?i:I,b=1),d=Un(d);++w<b;){var G=m[w];G&&l(d,G,w,I)}return d})}function hT(l,d){return function(m,w){if(m==null)return m;if(!Mr(m))return l(m,w);for(var b=m.length,I=d?b:-1,L=Un(m);(d?I--:++I<b)&&w(L[I],I,L)!==!1;);return m}}function pT(l){return function(d,m,w){for(var b=-1,I=Un(d),L=w(d),G=L.length;G--;){var K=L[l?G:++b];if(m(I[K],K,I)===!1)break}return d}}function tV(l,d,m){var w=d&y,b=Mf(l);function I(){var L=this&&this!==Ri&&this instanceof I?b:l;return L.apply(w?m:this,arguments)}return I}function mT(l){return function(d){d=xn(d);var m=uu(d)?Ho(d):i,w=m?m[0]:d.charAt(0),b=m?Qa(m,1).join(""):d.slice(1);return w[l]()+b}}function yu(l){return function(d){return g_(hD(fD(d).replace(WL,"")),l,"")}}function Mf(l){return function(){var d=arguments;switch(d.length){case 0:return new l;case 1:return new l(d[0]);case 2:return new l(d[0],d[1]);case 3:return new l(d[0],d[1],d[2]);case 4:return new l(d[0],d[1],d[2],d[3]);case 5:return new l(d[0],d[1],d[2],d[3],d[4]);case 6:return new l(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new l(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var m=mu(l.prototype),w=l.apply(m,d);return Yn(w)?w:m}}function nV(l,d,m){var w=Mf(l);function b(){for(var I=arguments.length,L=ce(I),G=I,K=vu(b);G--;)L[G]=arguments[G];var we=I<3&&L[0]!==K&&L[I-1]!==K?[]:qa(L,K);if(I-=we.length,I<m)return wT(l,d,rm,b.placeholder,i,L,we,i,i,m-I);var be=this&&this!==Ri&&this instanceof b?w:l;return Vr(be,this,L)}return b}function gT(l){return function(d,m,w){var b=Un(d);if(!Mr(d)){var I=wt(m,3);d=Ui(d),m=function(G){return I(b[G],G,b)}}var L=l(d,m,w);return L>-1?b[I?d[L]:L]:i}}function yT(l){return oa(function(d){var m=d.length,w=m,b=vo.prototype.thru;for(l&&d.reverse();w--;){var I=d[w];if(typeof I!="function")throw new yo(r);if(b&&!L&&cm(I)=="wrapper")var L=new vo([],!0)}for(w=L?w:m;++w<m;){I=d[w];var G=cm(I),K=G=="wrapper"?Z_(I):i;K&&ew(K[0])&&K[1]==(H|_|M|P)&&!K[4].length&&K[9]==1?L=L[cm(K[0])].apply(L,K[3]):L=I.length==1&&ew(I)?L[G]():L.thru(I)}return function(){var we=arguments,be=we[0];if(L&&we.length==1&&Ut(be))return L.plant(be).value();for(var Ae=0,Ke=m?d[Ae].apply(this,we):be;++Ae<m;)Ke=d[Ae].call(this,Ke);return Ke}})}function rm(l,d,m,w,b,I,L,G,K,we){var be=d&H,Ae=d&y,Ke=d&x,ft=d&(_|C),bt=d&F,Ht=Ke?i:Mf(l);function Et(){for(var Jt=arguments.length,rn=ce(Jt),Gr=Jt;Gr--;)rn[Gr]=arguments[Gr];if(ft)var ar=vu(Et),Wr=pk(rn,ar);if(w&&(rn=dT(rn,w,b,ft)),I&&(rn=fT(rn,I,L,ft)),Jt-=Wr,ft&&Jt<we){var si=qa(rn,ar);return wT(l,d,rm,Et.placeholder,m,rn,si,G,K,we-Jt)}var Wo=Ae?m:this,la=Ke?Wo[l]:l;return Jt=rn.length,G?rn=MV(rn,G):bt&&Jt>1&&rn.reverse(),be&&K<Jt&&(rn.length=K),this&&this!==Ri&&this instanceof Et&&(la=Ht||Mf(la)),la.apply(Wo,rn)}return Et}function vT(l,d){return function(m,w){return IB(m,l,d(w),{})}}function om(l,d){return function(m,w){var b;if(m===i&&w===i)return d;if(m!==i&&(b=m),w!==i){if(b===i)return w;typeof m=="string"||typeof w=="string"?(m=Hr(m),w=Hr(w)):(m=iT(m),w=iT(w)),b=l(m,w)}return b}}function $_(l){return oa(function(d){return d=$n(d,zr(wt())),Gt(function(m){var w=this;return l(d,function(b){return Vr(b,w,m)})})})}function sm(l,d){d=d===i?" ":Hr(d);var m=d.length;if(m<2)return m?B_(d,l):d;var w=B_(d,$p(l/du(d)));return uu(d)?Qa(Ho(w),0,l).join(""):w.slice(0,l)}function iV(l,d,m,w){var b=d&y,I=Mf(l);function L(){for(var G=-1,K=arguments.length,we=-1,be=w.length,Ae=ce(be+K),Ke=this&&this!==Ri&&this instanceof L?I:l;++we<be;)Ae[we]=w[we];for(;K--;)Ae[we++]=arguments[++G];return Vr(Ke,b?m:this,Ae)}return L}function _T(l){return function(d,m,w){return w&&typeof w!="number"&&sr(d,m,w)&&(m=w=i),d=ca(d),m===i?(m=d,d=0):m=ca(m),w=w===i?d<m?1:-1:ca(w),HB(d,m,w,l)}}function am(l){return function(d,m){return typeof d=="string"&&typeof m=="string"||(d=Mo(d),m=Mo(m)),l(d,m)}}function wT(l,d,m,w,b,I,L,G,K,we){var be=d&_,Ae=be?L:i,Ke=be?i:L,ft=be?I:i,bt=be?i:I;d|=be?M:S,d&=~(be?S:M),d&v||(d&=~(y|x));var Ht=[l,d,b,ft,Ae,bt,Ke,G,K,we],Et=m.apply(i,Ht);return ew(l)&&UT(Et,Ht),Et.placeholder=w,FT(Et,l,d)}function q_(l){var d=wi[l];return function(m,w){if(m=Mo(m),w=w==null?0:Yi(Vt(w),292),w&&FA(m)){var b=(xn(m)+"e").split("e"),I=d(b[0]+"e"+(+b[1]+w));return b=(xn(I)+"e").split("e"),+(b[0]+"e"+(+b[1]-w))}return d(m)}}var rV=hu&&1/Np(new hu([,-0]))[1]==ve?function(l){return new hu(l)}:mw;function xT(l){return function(d){var m=Zi(d);return m==O?b_(d):m==st?xk(d):hk(d,l(d))}}function ra(l,d,m,w,b,I,L,G){var K=d&x;if(!K&&typeof l!="function")throw new yo(r);var we=w?w.length:0;if(we||(d&=~(M|S),w=b=i),L=L===i?L:xi(Vt(L),0),G=G===i?G:Vt(G),we-=b?b.length:0,d&S){var be=w,Ae=b;w=b=i}var Ke=K?i:Z_(l),ft=[l,d,m,w,b,be,Ae,I,L,G];if(Ke&&_V(ft,Ke),l=ft[0],d=ft[1],m=ft[2],w=ft[3],b=ft[4],G=ft[9]=ft[9]===i?K?0:l.length:xi(ft[9]-we,0),!G&&d&(_|C)&&(d&=~(_|C)),!d||d==y)var bt=tV(l,d,m);else d==_||d==C?bt=nV(l,d,G):(d==M||d==(y|M))&&!b.length?bt=iV(l,d,m,w):bt=rm.apply(i,ft);var Ht=Ke?tT:UT;return FT(Ht(bt,ft),l,d)}function MT(l,d,m,w){return l===i||Go(l,fu[m])&&!En.call(w,m)?d:l}function bT(l,d,m,w,b,I){return Yn(l)&&Yn(d)&&(I.set(d,l),em(l,d,i,bT,I),I.delete(d)),l}function oV(l){return Sf(l)?i:l}function ET(l,d,m,w,b,I){var L=m&p,G=l.length,K=d.length;if(G!=K&&!(L&&K>G))return!1;var we=I.get(l),be=I.get(d);if(we&&be)return we==d&&be==l;var Ae=-1,Ke=!0,ft=m&g?new nl:i;for(I.set(l,d),I.set(d,l);++Ae<G;){var bt=l[Ae],Ht=d[Ae];if(w)var Et=L?w(Ht,bt,Ae,d,l,I):w(bt,Ht,Ae,l,d,I);if(Et!==i){if(Et)continue;Ke=!1;break}if(ft){if(!y_(d,function(Jt,rn){if(!df(ft,rn)&&(bt===Jt||b(bt,Jt,m,w,I)))return ft.push(rn)})){Ke=!1;break}}else if(!(bt===Ht||b(bt,Ht,m,w,I))){Ke=!1;break}}return I.delete(l),I.delete(d),Ke}function sV(l,d,m,w,b,I,L){switch(m){case qe:if(l.byteLength!=d.byteLength||l.byteOffset!=d.byteOffset)return!1;l=l.buffer,d=d.buffer;case Me:return!(l.byteLength!=d.byteLength||!I(new Hp(l),new Hp(d)));case pe:case ae:case gt:return Go(+l,+d);case Pe:return l.name==d.name&&l.message==d.message;case nt:case N:return l==d+"";case O:var G=b_;case st:var K=w&p;if(G||(G=Np),l.size!=d.size&&!K)return!1;var we=L.get(l);if(we)return we==d;w|=g,L.set(l,d);var be=ET(G(l),G(d),w,b,I,L);return L.delete(l),be;case A:if(gf)return gf.call(l)==gf.call(d)}return!1}function aV(l,d,m,w,b,I){var L=m&p,G=X_(l),K=G.length,we=X_(d),be=we.length;if(K!=be&&!L)return!1;for(var Ae=K;Ae--;){var Ke=G[Ae];if(!(L?Ke in d:En.call(d,Ke)))return!1}var ft=I.get(l),bt=I.get(d);if(ft&&bt)return ft==d&&bt==l;var Ht=!0;I.set(l,d),I.set(d,l);for(var Et=L;++Ae<K;){Ke=G[Ae];var Jt=l[Ke],rn=d[Ke];if(w)var Gr=L?w(rn,Jt,Ke,d,l,I):w(Jt,rn,Ke,l,d,I);if(!(Gr===i?Jt===rn||b(Jt,rn,m,w,I):Gr)){Ht=!1;break}Et||(Et=Ke=="constructor")}if(Ht&&!Et){var ar=l.constructor,Wr=d.constructor;ar!=Wr&&"constructor"in l&&"constructor"in d&&!(typeof ar=="function"&&ar instanceof ar&&typeof Wr=="function"&&Wr instanceof Wr)&&(Ht=!1)}return I.delete(l),I.delete(d),Ht}function oa(l){return nw(IT(l,i,BT),l+"")}function X_(l){return GA(l,Ui,J_)}function Y_(l){return GA(l,br,ST)}var Z_=Xp?function(l){return Xp.get(l)}:mw;function cm(l){for(var d=l.name+"",m=pu[d],w=En.call(pu,d)?m.length:0;w--;){var b=m[w],I=b.func;if(I==null||I==l)return b.name}return d}function vu(l){var d=En.call(T,"placeholder")?T:l;return d.placeholder}function wt(){var l=T.iteratee||hw;return l=l===hw?qA:l,arguments.length?l(arguments[0],arguments[1]):l}function lm(l,d){var m=l.__data__;return mV(d)?m[typeof d=="string"?"string":"hash"]:m.map}function K_(l){for(var d=Ui(l),m=d.length;m--;){var w=d[m],b=l[w];d[m]=[w,b,TT(b)]}return d}function ol(l,d){var m=vk(l,d);return $A(m)?m:i}function cV(l){var d=En.call(l,el),m=l[el];try{l[el]=i;var w=!0}catch{}var b=Vp.call(l);return w&&(d?l[el]=m:delete l[el]),b}var J_=S_?function(l){return l==null?[]:(l=Un(l),Wa(S_(l),function(d){return RA.call(l,d)}))}:gw,ST=S_?function(l){for(var d=[];l;)$a(d,J_(l)),l=jp(l);return d}:gw,Zi=or;(C_&&Zi(new C_(new ArrayBuffer(1)))!=qe||hf&&Zi(new hf)!=O||A_&&Zi(A_.resolve())!=Ce||hu&&Zi(new hu)!=st||pf&&Zi(new pf)!=Se)&&(Zi=function(l){var d=or(l),m=d==ut?l.constructor:i,w=m?sl(m):"";if(w)switch(w){case Gk:return qe;case Wk:return O;case $k:return Ce;case qk:return st;case Xk:return Se}return d});function lV(l,d,m){for(var w=-1,b=m.length;++w<b;){var I=m[w],L=I.size;switch(I.type){case"drop":l+=L;break;case"dropRight":d-=L;break;case"take":d=Yi(d,l+L);break;case"takeRight":l=xi(l,d-L);break}}return{start:l,end:d}}function uV(l){var d=l.match(Ms);return d?d[1].split(Br):[]}function CT(l,d,m){d=Ja(d,l);for(var w=-1,b=d.length,I=!1;++w<b;){var L=Cs(d[w]);if(!(I=l!=null&&m(l,L)))break;l=l[L]}return I||++w!=b?I:(b=l==null?0:l.length,!!b&&gm(b)&&sa(L,b)&&(Ut(l)||al(l)))}function dV(l){var d=l.length,m=new l.constructor(d);return d&&typeof l[0]=="string"&&En.call(l,"index")&&(m.index=l.index,m.input=l.input),m}function AT(l){return typeof l.constructor=="function"&&!bf(l)?mu(jp(l)):{}}function fV(l,d,m){var w=l.constructor;switch(d){case Me:return W_(l);case pe:case ae:return new w(+l);case qe:return YB(l,m);case Re:case Ye:case xt:case Oe:case Ze:case Rt:case mt:case tt:case yt:return lT(l,m);case O:return new w;case gt:case N:return new w(l);case nt:return ZB(l);case st:return new w;case A:return KB(l)}}function hV(l,d){var m=d.length;if(!m)return l;var w=m-1;return d[w]=(m>1?"& ":"")+d[w],d=d.join(m>2?", ":" "),l.replace(ho,`{
/* [wrapped with `+d+`] */
`)}function pV(l){return Ut(l)||al(l)||!!(UA&&l&&l[UA])}function sa(l,d){var m=typeof l;return d=d??W,!!d&&(m=="number"||m!="symbol"&&oe.test(l))&&l>-1&&l%1==0&&l<d}function sr(l,d,m){if(!Yn(m))return!1;var w=typeof d;return(w=="number"?Mr(m)&&sa(d,m.length):w=="string"&&d in m)?Go(m[d],l):!1}function Q_(l,d){if(Ut(l))return!1;var m=typeof l;return m=="number"||m=="symbol"||m=="boolean"||l==null||jr(l)?!0:Yt.test(l)||!Hn.test(l)||d!=null&&l in Un(d)}function mV(l){var d=typeof l;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?l!=="__proto__":l===null}function ew(l){var d=cm(l),m=T[d];if(typeof m!="function"||!(d in en.prototype))return!1;if(l===m)return!0;var w=Z_(m);return!!w&&l===w[0]}function gV(l){return!!TA&&TA in l}var yV=kp?aa:yw;function bf(l){var d=l&&l.constructor,m=typeof d=="function"&&d.prototype||fu;return l===m}function TT(l){return l===l&&!Yn(l)}function DT(l,d){return function(m){return m==null?!1:m[l]===d&&(d!==i||l in Un(m))}}function vV(l){var d=pm(l,function(w){return m.size===a&&m.clear(),w}),m=d.cache;return d}function _V(l,d){var m=l[1],w=d[1],b=m|w,I=b<(y|x|H),L=w==H&&m==_||w==H&&m==P&&l[7].length<=d[8]||w==(H|P)&&d[7].length<=d[8]&&m==_;if(!(I||L))return l;w&y&&(l[2]=d[2],b|=m&y?0:v);var G=d[3];if(G){var K=l[3];l[3]=K?dT(K,G,d[4]):G,l[4]=K?qa(l[3],c):d[4]}return G=d[5],G&&(K=l[5],l[5]=K?fT(K,G,d[6]):G,l[6]=K?qa(l[5],c):d[6]),G=d[7],G&&(l[7]=G),w&H&&(l[8]=l[8]==null?d[8]:Yi(l[8],d[8])),l[9]==null&&(l[9]=d[9]),l[0]=d[0],l[1]=b,l}function wV(l){var d=[];if(l!=null)for(var m in Un(l))d.push(m);return d}function xV(l){return Vp.call(l)}function IT(l,d,m){return d=xi(d===i?l.length-1:d,0),function(){for(var w=arguments,b=-1,I=xi(w.length-d,0),L=ce(I);++b<I;)L[b]=w[d+b];b=-1;for(var G=ce(d+1);++b<d;)G[b]=w[b];return G[d]=m(L),Vr(l,this,G)}}function RT(l,d){return d.length<2?l:rl(l,wo(d,0,-1))}function MV(l,d){for(var m=l.length,w=Yi(d.length,m),b=xr(l);w--;){var I=d[w];l[w]=sa(I,m)?b[I]:i}return l}function tw(l,d){if(!(d==="constructor"&&typeof l[d]=="function")&&d!="__proto__")return l[d]}var UT=PT(tT),Ef=Lk||function(l,d){return Ri.setTimeout(l,d)},nw=PT(WB);function FT(l,d,m){var w=d+"";return nw(l,hV(w,bV(uV(w),m)))}function PT(l){var d=0,m=0;return function(){var w=zk(),b=j-(w-m);if(m=w,b>0){if(++d>=D)return arguments[0]}else d=0;return l.apply(i,arguments)}}function um(l,d){var m=-1,w=l.length,b=w-1;for(d=d===i?w:d;++m<d;){var I=k_(m,b),L=l[I];l[I]=l[m],l[m]=L}return l.length=d,l}var OT=vV(function(l){var d=[];return l.charCodeAt(0)===46&&d.push(""),l.replace(jn,function(m,w,b,I){d.push(b?I.replace(Rp,"$1"):w||m)}),d});function Cs(l){if(typeof l=="string"||jr(l))return l;var d=l+"";return d=="0"&&1/l==-ve?"-0":d}function sl(l){if(l!=null){try{return Bp.call(l)}catch{}try{return l+""}catch{}}return""}function bV(l,d){return go(he,function(m){var w="_."+m[0];d&m[1]&&!Pp(l,w)&&l.push(w)}),l.sort()}function NT(l){if(l instanceof en)return l.clone();var d=new vo(l.__wrapped__,l.__chain__);return d.__actions__=xr(l.__actions__),d.__index__=l.__index__,d.__values__=l.__values__,d}function EV(l,d,m){(m?sr(l,d,m):d===i)?d=1:d=xi(Vt(d),0);var w=l==null?0:l.length;if(!w||d<1)return[];for(var b=0,I=0,L=ce($p(w/d));b<w;)L[I++]=wo(l,b,b+=d);return L}function SV(l){for(var d=-1,m=l==null?0:l.length,w=0,b=[];++d<m;){var I=l[d];I&&(b[w++]=I)}return b}function CV(){var l=arguments.length;if(!l)return[];for(var d=ce(l-1),m=arguments[0],w=l;w--;)d[w-1]=arguments[w];return $a(Ut(m)?xr(m):[m],Hi(d,1))}var AV=Gt(function(l,d){return oi(l)?vf(l,Hi(d,1,oi,!0)):[]}),TV=Gt(function(l,d){var m=xo(d);return oi(m)&&(m=i),oi(l)?vf(l,Hi(d,1,oi,!0),wt(m,2)):[]}),DV=Gt(function(l,d){var m=xo(d);return oi(m)&&(m=i),oi(l)?vf(l,Hi(d,1,oi,!0),i,m):[]});function IV(l,d,m){var w=l==null?0:l.length;return w?(d=m||d===i?1:Vt(d),wo(l,d<0?0:d,w)):[]}function RV(l,d,m){var w=l==null?0:l.length;return w?(d=m||d===i?1:Vt(d),d=w-d,wo(l,0,d<0?0:d)):[]}function UV(l,d){return l&&l.length?nm(l,wt(d,3),!0,!0):[]}function FV(l,d){return l&&l.length?nm(l,wt(d,3),!0):[]}function PV(l,d,m,w){var b=l==null?0:l.length;return b?(m&&typeof m!="number"&&sr(l,d,m)&&(m=0,w=b),CB(l,d,m,w)):[]}function LT(l,d,m){var w=l==null?0:l.length;if(!w)return-1;var b=m==null?0:Vt(m);return b<0&&(b=xi(w+b,0)),Op(l,wt(d,3),b)}function kT(l,d,m){var w=l==null?0:l.length;if(!w)return-1;var b=w-1;return m!==i&&(b=Vt(m),b=m<0?xi(w+b,0):Yi(b,w-1)),Op(l,wt(d,3),b,!0)}function BT(l){var d=l==null?0:l.length;return d?Hi(l,1):[]}function OV(l){var d=l==null?0:l.length;return d?Hi(l,ve):[]}function NV(l,d){var m=l==null?0:l.length;return m?(d=d===i?1:Vt(d),Hi(l,d)):[]}function LV(l){for(var d=-1,m=l==null?0:l.length,w={};++d<m;){var b=l[d];w[b[0]]=b[1]}return w}function VT(l){return l&&l.length?l[0]:i}function kV(l,d,m){var w=l==null?0:l.length;if(!w)return-1;var b=m==null?0:Vt(m);return b<0&&(b=xi(w+b,0)),lu(l,d,b)}function BV(l){var d=l==null?0:l.length;return d?wo(l,0,-1):[]}var VV=Gt(function(l){var d=$n(l,j_);return d.length&&d[0]===l[0]?F_(d):[]}),zV=Gt(function(l){var d=xo(l),m=$n(l,j_);return d===xo(m)?d=i:m.pop(),m.length&&m[0]===l[0]?F_(m,wt(d,2)):[]}),HV=Gt(function(l){var d=xo(l),m=$n(l,j_);return d=typeof d=="function"?d:i,d&&m.pop(),m.length&&m[0]===l[0]?F_(m,i,d):[]});function jV(l,d){return l==null?"":Bk.call(l,d)}function xo(l){var d=l==null?0:l.length;return d?l[d-1]:i}function GV(l,d,m){var w=l==null?0:l.length;if(!w)return-1;var b=w;return m!==i&&(b=Vt(m),b=b<0?xi(w+b,0):Yi(b,w-1)),d===d?bk(l,d,b):Op(l,wA,b,!0)}function WV(l,d){return l&&l.length?KA(l,Vt(d)):i}var $V=Gt(zT);function zT(l,d){return l&&l.length&&d&&d.length?L_(l,d):l}function qV(l,d,m){return l&&l.length&&d&&d.length?L_(l,d,wt(m,2)):l}function XV(l,d,m){return l&&l.length&&d&&d.length?L_(l,d,i,m):l}var YV=oa(function(l,d){var m=l==null?0:l.length,w=D_(l,d);return eT(l,$n(d,function(b){return sa(b,m)?+b:b}).sort(uT)),w});function ZV(l,d){var m=[];if(!(l&&l.length))return m;var w=-1,b=[],I=l.length;for(d=wt(d,3);++w<I;){var L=l[w];d(L,w,l)&&(m.push(L),b.push(w))}return eT(l,b),m}function iw(l){return l==null?l:jk.call(l)}function KV(l,d,m){var w=l==null?0:l.length;return w?(m&&typeof m!="number"&&sr(l,d,m)?(d=0,m=w):(d=d==null?0:Vt(d),m=m===i?w:Vt(m)),wo(l,d,m)):[]}function JV(l,d){return tm(l,d)}function QV(l,d,m){return V_(l,d,wt(m,2))}function e4(l,d){var m=l==null?0:l.length;if(m){var w=tm(l,d);if(w<m&&Go(l[w],d))return w}return-1}function t4(l,d){return tm(l,d,!0)}function n4(l,d,m){return V_(l,d,wt(m,2),!0)}function i4(l,d){var m=l==null?0:l.length;if(m){var w=tm(l,d,!0)-1;if(Go(l[w],d))return w}return-1}function r4(l){return l&&l.length?nT(l):[]}function o4(l,d){return l&&l.length?nT(l,wt(d,2)):[]}function s4(l){var d=l==null?0:l.length;return d?wo(l,1,d):[]}function a4(l,d,m){return l&&l.length?(d=m||d===i?1:Vt(d),wo(l,0,d<0?0:d)):[]}function c4(l,d,m){var w=l==null?0:l.length;return w?(d=m||d===i?1:Vt(d),d=w-d,wo(l,d<0?0:d,w)):[]}function l4(l,d){return l&&l.length?nm(l,wt(d,3),!1,!0):[]}function u4(l,d){return l&&l.length?nm(l,wt(d,3)):[]}var d4=Gt(function(l){return Ka(Hi(l,1,oi,!0))}),f4=Gt(function(l){var d=xo(l);return oi(d)&&(d=i),Ka(Hi(l,1,oi,!0),wt(d,2))}),h4=Gt(function(l){var d=xo(l);return d=typeof d=="function"?d:i,Ka(Hi(l,1,oi,!0),i,d)});function p4(l){return l&&l.length?Ka(l):[]}function m4(l,d){return l&&l.length?Ka(l,wt(d,2)):[]}function g4(l,d){return d=typeof d=="function"?d:i,l&&l.length?Ka(l,i,d):[]}function rw(l){if(!(l&&l.length))return[];var d=0;return l=Wa(l,function(m){if(oi(m))return d=xi(m.length,d),!0}),x_(d,function(m){return $n(l,v_(m))})}function HT(l,d){if(!(l&&l.length))return[];var m=rw(l);return d==null?m:$n(m,function(w){return Vr(d,i,w)})}var y4=Gt(function(l,d){return oi(l)?vf(l,d):[]}),v4=Gt(function(l){return H_(Wa(l,oi))}),_4=Gt(function(l){var d=xo(l);return oi(d)&&(d=i),H_(Wa(l,oi),wt(d,2))}),w4=Gt(function(l){var d=xo(l);return d=typeof d=="function"?d:i,H_(Wa(l,oi),i,d)}),x4=Gt(rw);function M4(l,d){return sT(l||[],d||[],yf)}function b4(l,d){return sT(l||[],d||[],xf)}var E4=Gt(function(l){var d=l.length,m=d>1?l[d-1]:i;return m=typeof m=="function"?(l.pop(),m):i,HT(l,m)});function jT(l){var d=T(l);return d.__chain__=!0,d}function S4(l,d){return d(l),l}function dm(l,d){return d(l)}var C4=oa(function(l){var d=l.length,m=d?l[0]:0,w=this.__wrapped__,b=function(I){return D_(I,l)};return d>1||this.__actions__.length||!(w instanceof en)||!sa(m)?this.thru(b):(w=w.slice(m,+m+(d?1:0)),w.__actions__.push({func:dm,args:[b],thisArg:i}),new vo(w,this.__chain__).thru(function(I){return d&&!I.length&&I.push(i),I}))});function A4(){return jT(this)}function T4(){return new vo(this.value(),this.__chain__)}function D4(){this.__values__===i&&(this.__values__=iD(this.value()));var l=this.__index__>=this.__values__.length,d=l?i:this.__values__[this.__index__++];return{done:l,value:d}}function I4(){return this}function R4(l){for(var d,m=this;m instanceof Zp;){var w=NT(m);w.__index__=0,w.__values__=i,d?b.__wrapped__=w:d=w;var b=w;m=m.__wrapped__}return b.__wrapped__=l,d}function U4(){var l=this.__wrapped__;if(l instanceof en){var d=l;return this.__actions__.length&&(d=new en(this)),d=d.reverse(),d.__actions__.push({func:dm,args:[iw],thisArg:i}),new vo(d,this.__chain__)}return this.thru(iw)}function F4(){return oT(this.__wrapped__,this.__actions__)}var P4=im(function(l,d,m){En.call(l,m)?++l[m]:ia(l,m,1)});function O4(l,d,m){var w=Ut(l)?vA:SB;return m&&sr(l,d,m)&&(d=i),w(l,wt(d,3))}function N4(l,d){var m=Ut(l)?Wa:HA;return m(l,wt(d,3))}var L4=gT(LT),k4=gT(kT);function B4(l,d){return Hi(fm(l,d),1)}function V4(l,d){return Hi(fm(l,d),ve)}function z4(l,d,m){return m=m===i?1:Vt(m),Hi(fm(l,d),m)}function GT(l,d){var m=Ut(l)?go:Za;return m(l,wt(d,3))}function WT(l,d){var m=Ut(l)?sk:zA;return m(l,wt(d,3))}var H4=im(function(l,d,m){En.call(l,m)?l[m].push(d):ia(l,m,[d])});function j4(l,d,m,w){l=Mr(l)?l:wu(l),m=m&&!w?Vt(m):0;var b=l.length;return m<0&&(m=xi(b+m,0)),ym(l)?m<=b&&l.indexOf(d,m)>-1:!!b&&lu(l,d,m)>-1}var G4=Gt(function(l,d,m){var w=-1,b=typeof d=="function",I=Mr(l)?ce(l.length):[];return Za(l,function(L){I[++w]=b?Vr(d,L,m):_f(L,d,m)}),I}),W4=im(function(l,d,m){ia(l,m,d)});function fm(l,d){var m=Ut(l)?$n:XA;return m(l,wt(d,3))}function $4(l,d,m,w){return l==null?[]:(Ut(d)||(d=d==null?[]:[d]),m=w?i:m,Ut(m)||(m=m==null?[]:[m]),JA(l,d,m))}var q4=im(function(l,d,m){l[m?0:1].push(d)},function(){return[[],[]]});function X4(l,d,m){var w=Ut(l)?g_:MA,b=arguments.length<3;return w(l,wt(d,4),m,b,Za)}function Y4(l,d,m){var w=Ut(l)?ak:MA,b=arguments.length<3;return w(l,wt(d,4),m,b,zA)}function Z4(l,d){var m=Ut(l)?Wa:HA;return m(l,mm(wt(d,3)))}function K4(l){var d=Ut(l)?LA:jB;return d(l)}function J4(l,d,m){(m?sr(l,d,m):d===i)?d=1:d=Vt(d);var w=Ut(l)?wB:GB;return w(l,d)}function Q4(l){var d=Ut(l)?xB:$B;return d(l)}function ez(l){if(l==null)return 0;if(Mr(l))return ym(l)?du(l):l.length;var d=Zi(l);return d==O||d==st?l.size:O_(l).length}function tz(l,d,m){var w=Ut(l)?y_:qB;return m&&sr(l,d,m)&&(d=i),w(l,wt(d,3))}var nz=Gt(function(l,d){if(l==null)return[];var m=d.length;return m>1&&sr(l,d[0],d[1])?d=[]:m>2&&sr(d[0],d[1],d[2])&&(d=[d[0]]),JA(l,Hi(d,1),[])}),hm=Nk||function(){return Ri.Date.now()};function iz(l,d){if(typeof d!="function")throw new yo(r);return l=Vt(l),function(){if(--l<1)return d.apply(this,arguments)}}function $T(l,d,m){return d=m?i:d,d=l&&d==null?l.length:d,ra(l,H,i,i,i,i,d)}function qT(l,d){var m;if(typeof d!="function")throw new yo(r);return l=Vt(l),function(){return--l>0&&(m=d.apply(this,arguments)),l<=1&&(d=i),m}}var ow=Gt(function(l,d,m){var w=y;if(m.length){var b=qa(m,vu(ow));w|=M}return ra(l,w,d,m,b)}),XT=Gt(function(l,d,m){var w=y|x;if(m.length){var b=qa(m,vu(XT));w|=M}return ra(d,w,l,m,b)});function YT(l,d,m){d=m?i:d;var w=ra(l,_,i,i,i,i,i,d);return w.placeholder=YT.placeholder,w}function ZT(l,d,m){d=m?i:d;var w=ra(l,C,i,i,i,i,i,d);return w.placeholder=ZT.placeholder,w}function KT(l,d,m){var w,b,I,L,G,K,we=0,be=!1,Ae=!1,Ke=!0;if(typeof l!="function")throw new yo(r);d=Mo(d)||0,Yn(m)&&(be=!!m.leading,Ae="maxWait"in m,I=Ae?xi(Mo(m.maxWait)||0,d):I,Ke="trailing"in m?!!m.trailing:Ke);function ft(si){var Wo=w,la=b;return w=b=i,we=si,L=l.apply(la,Wo),L}function bt(si){return we=si,G=Ef(Jt,d),be?ft(si):L}function Ht(si){var Wo=si-K,la=si-we,gD=d-Wo;return Ae?Yi(gD,I-la):gD}function Et(si){var Wo=si-K,la=si-we;return K===i||Wo>=d||Wo<0||Ae&&la>=I}function Jt(){var si=hm();if(Et(si))return rn(si);G=Ef(Jt,Ht(si))}function rn(si){return G=i,Ke&&w?ft(si):(w=b=i,L)}function Gr(){G!==i&&aT(G),we=0,w=K=b=G=i}function ar(){return G===i?L:rn(hm())}function Wr(){var si=hm(),Wo=Et(si);if(w=arguments,b=this,K=si,Wo){if(G===i)return bt(K);if(Ae)return aT(G),G=Ef(Jt,d),ft(K)}return G===i&&(G=Ef(Jt,d)),L}return Wr.cancel=Gr,Wr.flush=ar,Wr}var rz=Gt(function(l,d){return VA(l,1,d)}),oz=Gt(function(l,d,m){return VA(l,Mo(d)||0,m)});function sz(l){return ra(l,F)}function pm(l,d){if(typeof l!="function"||d!=null&&typeof d!="function")throw new yo(r);var m=function(){var w=arguments,b=d?d.apply(this,w):w[0],I=m.cache;if(I.has(b))return I.get(b);var L=l.apply(this,w);return m.cache=I.set(b,L)||I,L};return m.cache=new(pm.Cache||na),m}pm.Cache=na;function mm(l){if(typeof l!="function")throw new yo(r);return function(){var d=arguments;switch(d.length){case 0:return!l.call(this);case 1:return!l.call(this,d[0]);case 2:return!l.call(this,d[0],d[1]);case 3:return!l.call(this,d[0],d[1],d[2])}return!l.apply(this,d)}}function az(l){return qT(2,l)}var cz=XB(function(l,d){d=d.length==1&&Ut(d[0])?$n(d[0],zr(wt())):$n(Hi(d,1),zr(wt()));var m=d.length;return Gt(function(w){for(var b=-1,I=Yi(w.length,m);++b<I;)w[b]=d[b].call(this,w[b]);return Vr(l,this,w)})}),sw=Gt(function(l,d){var m=qa(d,vu(sw));return ra(l,M,i,d,m)}),JT=Gt(function(l,d){var m=qa(d,vu(JT));return ra(l,S,i,d,m)}),lz=oa(function(l,d){return ra(l,P,i,i,i,d)});function uz(l,d){if(typeof l!="function")throw new yo(r);return d=d===i?d:Vt(d),Gt(l,d)}function dz(l,d){if(typeof l!="function")throw new yo(r);return d=d==null?0:xi(Vt(d),0),Gt(function(m){var w=m[d],b=Qa(m,0,d);return w&&$a(b,w),Vr(l,this,b)})}function fz(l,d,m){var w=!0,b=!0;if(typeof l!="function")throw new yo(r);return Yn(m)&&(w="leading"in m?!!m.leading:w,b="trailing"in m?!!m.trailing:b),KT(l,d,{leading:w,maxWait:d,trailing:b})}function hz(l){return $T(l,1)}function pz(l,d){return sw(G_(d),l)}function mz(){if(!arguments.length)return[];var l=arguments[0];return Ut(l)?l:[l]}function gz(l){return _o(l,h)}function yz(l,d){return d=typeof d=="function"?d:i,_o(l,h,d)}function vz(l){return _o(l,u|h)}function _z(l,d){return d=typeof d=="function"?d:i,_o(l,u|h,d)}function wz(l,d){return d==null||BA(l,d,Ui(d))}function Go(l,d){return l===d||l!==l&&d!==d}var xz=am(U_),Mz=am(function(l,d){return l>=d}),al=WA(function(){return arguments}())?WA:function(l){return ti(l)&&En.call(l,"callee")&&!RA.call(l,"callee")},Ut=ce.isArray,bz=fA?zr(fA):RB;function Mr(l){return l!=null&&gm(l.length)&&!aa(l)}function oi(l){return ti(l)&&Mr(l)}function Ez(l){return l===!0||l===!1||ti(l)&&or(l)==pe}var ec=kk||yw,Sz=hA?zr(hA):UB;function Cz(l){return ti(l)&&l.nodeType===1&&!Sf(l)}function Az(l){if(l==null)return!0;if(Mr(l)&&(Ut(l)||typeof l=="string"||typeof l.splice=="function"||ec(l)||_u(l)||al(l)))return!l.length;var d=Zi(l);if(d==O||d==st)return!l.size;if(bf(l))return!O_(l).length;for(var m in l)if(En.call(l,m))return!1;return!0}function Tz(l,d){return wf(l,d)}function Dz(l,d,m){m=typeof m=="function"?m:i;var w=m?m(l,d):i;return w===i?wf(l,d,i,m):!!w}function aw(l){if(!ti(l))return!1;var d=or(l);return d==Pe||d==We||typeof l.message=="string"&&typeof l.name=="string"&&!Sf(l)}function Iz(l){return typeof l=="number"&&FA(l)}function aa(l){if(!Yn(l))return!1;var d=or(l);return d==ke||d==et||d==q||d==Xt}function QT(l){return typeof l=="number"&&l==Vt(l)}function gm(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=W}function Yn(l){var d=typeof l;return l!=null&&(d=="object"||d=="function")}function ti(l){return l!=null&&typeof l=="object"}var eD=pA?zr(pA):PB;function Rz(l,d){return l===d||P_(l,d,K_(d))}function Uz(l,d,m){return m=typeof m=="function"?m:i,P_(l,d,K_(d),m)}function Fz(l){return tD(l)&&l!=+l}function Pz(l){if(yV(l))throw new It(n);return $A(l)}function Oz(l){return l===null}function Nz(l){return l==null}function tD(l){return typeof l=="number"||ti(l)&&or(l)==gt}function Sf(l){if(!ti(l)||or(l)!=ut)return!1;var d=jp(l);if(d===null)return!0;var m=En.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&Bp.call(m)==Uk}var cw=mA?zr(mA):OB;function Lz(l){return QT(l)&&l>=-W&&l<=W}var nD=gA?zr(gA):NB;function ym(l){return typeof l=="string"||!Ut(l)&&ti(l)&&or(l)==N}function jr(l){return typeof l=="symbol"||ti(l)&&or(l)==A}var _u=yA?zr(yA):LB;function kz(l){return l===i}function Bz(l){return ti(l)&&Zi(l)==Se}function Vz(l){return ti(l)&&or(l)==Te}var zz=am(N_),Hz=am(function(l,d){return l<=d});function iD(l){if(!l)return[];if(Mr(l))return ym(l)?Ho(l):xr(l);if(ff&&l[ff])return wk(l[ff]());var d=Zi(l),m=d==O?b_:d==st?Np:wu;return m(l)}function ca(l){if(!l)return l===0?l:0;if(l=Mo(l),l===ve||l===-ve){var d=l<0?-1:1;return d*Q}return l===l?l:0}function Vt(l){var d=ca(l),m=d%1;return d===d?m?d-m:d:0}function rD(l){return l?il(Vt(l),0,me):0}function Mo(l){if(typeof l=="number")return l;if(jr(l))return X;if(Yn(l)){var d=typeof l.valueOf=="function"?l.valueOf():l;l=Yn(d)?d+"":d}if(typeof l!="string")return l===0?l:+l;l=bA(l);var m=c_.test(l);return m||Z.test(l)?ik(l.slice(2),m?2:8):a_.test(l)?X:+l}function oD(l){return Ss(l,br(l))}function jz(l){return l?il(Vt(l),-W,W):l===0?l:0}function xn(l){return l==null?"":Hr(l)}var Gz=gu(function(l,d){if(bf(d)||Mr(d)){Ss(d,Ui(d),l);return}for(var m in d)En.call(d,m)&&yf(l,m,d[m])}),sD=gu(function(l,d){Ss(d,br(d),l)}),vm=gu(function(l,d,m,w){Ss(d,br(d),l,w)}),Wz=gu(function(l,d,m,w){Ss(d,Ui(d),l,w)}),$z=oa(D_);function qz(l,d){var m=mu(l);return d==null?m:kA(m,d)}var Xz=Gt(function(l,d){l=Un(l);var m=-1,w=d.length,b=w>2?d[2]:i;for(b&&sr(d[0],d[1],b)&&(w=1);++m<w;)for(var I=d[m],L=br(I),G=-1,K=L.length;++G<K;){var we=L[G],be=l[we];(be===i||Go(be,fu[we])&&!En.call(l,we))&&(l[we]=I[we])}return l}),Yz=Gt(function(l){return l.push(i,bT),Vr(aD,i,l)});function Zz(l,d){return _A(l,wt(d,3),Es)}function Kz(l,d){return _A(l,wt(d,3),R_)}function Jz(l,d){return l==null?l:I_(l,wt(d,3),br)}function Qz(l,d){return l==null?l:jA(l,wt(d,3),br)}function eH(l,d){return l&&Es(l,wt(d,3))}function tH(l,d){return l&&R_(l,wt(d,3))}function nH(l){return l==null?[]:Qp(l,Ui(l))}function iH(l){return l==null?[]:Qp(l,br(l))}function lw(l,d,m){var w=l==null?i:rl(l,d);return w===i?m:w}function rH(l,d){return l!=null&&CT(l,d,AB)}function uw(l,d){return l!=null&&CT(l,d,TB)}var oH=vT(function(l,d,m){d!=null&&typeof d.toString!="function"&&(d=Vp.call(d)),l[d]=m},fw(Er)),sH=vT(function(l,d,m){d!=null&&typeof d.toString!="function"&&(d=Vp.call(d)),En.call(l,d)?l[d].push(m):l[d]=[m]},wt),aH=Gt(_f);function Ui(l){return Mr(l)?NA(l):O_(l)}function br(l){return Mr(l)?NA(l,!0):kB(l)}function cH(l,d){var m={};return d=wt(d,3),Es(l,function(w,b,I){ia(m,d(w,b,I),w)}),m}function lH(l,d){var m={};return d=wt(d,3),Es(l,function(w,b,I){ia(m,b,d(w,b,I))}),m}var uH=gu(function(l,d,m){em(l,d,m)}),aD=gu(function(l,d,m,w){em(l,d,m,w)}),dH=oa(function(l,d){var m={};if(l==null)return m;var w=!1;d=$n(d,function(I){return I=Ja(I,l),w||(w=I.length>1),I}),Ss(l,Y_(l),m),w&&(m=_o(m,u|f|h,oV));for(var b=d.length;b--;)z_(m,d[b]);return m});function fH(l,d){return cD(l,mm(wt(d)))}var hH=oa(function(l,d){return l==null?{}:VB(l,d)});function cD(l,d){if(l==null)return{};var m=$n(Y_(l),function(w){return[w]});return d=wt(d),QA(l,m,function(w,b){return d(w,b[0])})}function pH(l,d,m){d=Ja(d,l);var w=-1,b=d.length;for(b||(b=1,l=i);++w<b;){var I=l==null?i:l[Cs(d[w])];I===i&&(w=b,I=m),l=aa(I)?I.call(l):I}return l}function mH(l,d,m){return l==null?l:xf(l,d,m)}function gH(l,d,m,w){return w=typeof w=="function"?w:i,l==null?l:xf(l,d,m,w)}var lD=xT(Ui),uD=xT(br);function yH(l,d,m){var w=Ut(l),b=w||ec(l)||_u(l);if(d=wt(d,4),m==null){var I=l&&l.constructor;b?m=w?new I:[]:Yn(l)?m=aa(I)?mu(jp(l)):{}:m={}}return(b?go:Es)(l,function(L,G,K){return d(m,L,G,K)}),m}function vH(l,d){return l==null?!0:z_(l,d)}function _H(l,d,m){return l==null?l:rT(l,d,G_(m))}function wH(l,d,m,w){return w=typeof w=="function"?w:i,l==null?l:rT(l,d,G_(m),w)}function wu(l){return l==null?[]:M_(l,Ui(l))}function xH(l){return l==null?[]:M_(l,br(l))}function MH(l,d,m){return m===i&&(m=d,d=i),m!==i&&(m=Mo(m),m=m===m?m:0),d!==i&&(d=Mo(d),d=d===d?d:0),il(Mo(l),d,m)}function bH(l,d,m){return d=ca(d),m===i?(m=d,d=0):m=ca(m),l=Mo(l),DB(l,d,m)}function EH(l,d,m){if(m&&typeof m!="boolean"&&sr(l,d,m)&&(d=m=i),m===i&&(typeof d=="boolean"?(m=d,d=i):typeof l=="boolean"&&(m=l,l=i)),l===i&&d===i?(l=0,d=1):(l=ca(l),d===i?(d=l,l=0):d=ca(d)),l>d){var w=l;l=d,d=w}if(m||l%1||d%1){var b=PA();return Yi(l+b*(d-l+nk("1e-"+((b+"").length-1))),d)}return k_(l,d)}var SH=yu(function(l,d,m){return d=d.toLowerCase(),l+(m?dD(d):d)});function dD(l){return dw(xn(l).toLowerCase())}function fD(l){return l=xn(l),l&&l.replace(se,mk).replace($L,"")}function CH(l,d,m){l=xn(l),d=Hr(d);var w=l.length;m=m===i?w:il(Vt(m),0,w);var b=m;return m-=d.length,m>=0&&l.slice(m,b)==d}function AH(l){return l=xn(l),l&&De.test(l)?l.replace(ne,gk):l}function TH(l){return l=xn(l),l&&kr.test(l)?l.replace(Rn,"\\$&"):l}var DH=yu(function(l,d,m){return l+(m?"-":"")+d.toLowerCase()}),IH=yu(function(l,d,m){return l+(m?" ":"")+d.toLowerCase()}),RH=mT("toLowerCase");function UH(l,d,m){l=xn(l),d=Vt(d);var w=d?du(l):0;if(!d||w>=d)return l;var b=(d-w)/2;return sm(qp(b),m)+l+sm($p(b),m)}function FH(l,d,m){l=xn(l),d=Vt(d);var w=d?du(l):0;return d&&w<d?l+sm(d-w,m):l}function PH(l,d,m){l=xn(l),d=Vt(d);var w=d?du(l):0;return d&&w<d?sm(d-w,m)+l:l}function OH(l,d,m){return m||d==null?d=0:d&&(d=+d),Hk(xn(l).replace(ei,""),d||0)}function NH(l,d,m){return(m?sr(l,d,m):d===i)?d=1:d=Vt(d),B_(xn(l),d)}function LH(){var l=arguments,d=xn(l[0]);return l.length<3?d:d.replace(l[1],l[2])}var kH=yu(function(l,d,m){return l+(m?"_":"")+d.toLowerCase()});function BH(l,d,m){return m&&typeof m!="number"&&sr(l,d,m)&&(d=m=i),m=m===i?me:m>>>0,m?(l=xn(l),l&&(typeof d=="string"||d!=null&&!cw(d))&&(d=Hr(d),!d&&uu(l))?Qa(Ho(l),0,m):l.split(d,m)):[]}var VH=yu(function(l,d,m){return l+(m?" ":"")+dw(d)});function zH(l,d,m){return l=xn(l),m=m==null?0:il(Vt(m),0,l.length),d=Hr(d),l.slice(m,m+d.length)==d}function HH(l,d,m){var w=T.templateSettings;m&&sr(l,d,m)&&(d=i),l=xn(l),d=vm({},d,w,MT);var b=vm({},d.imports,w.imports,MT),I=Ui(b),L=M_(b,I),G,K,we=0,be=d.interpolate||J,Ae="__p += '",Ke=E_((d.escape||J).source+"|"+be.source+"|"+(be===Tn?Up:J).source+"|"+(d.evaluate||J).source+"|$","g"),ft="//# sourceURL="+(En.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++KL+"]")+`
`;l.replace(Ke,function(Et,Jt,rn,Gr,ar,Wr){return rn||(rn=Gr),Ae+=l.slice(we,Wr).replace(Ve,yk),Jt&&(G=!0,Ae+=`' +
__e(`+Jt+`) +
'`),ar&&(K=!0,Ae+=`';
`+ar+`;
__p += '`),rn&&(Ae+=`' +
((__t = (`+rn+`)) == null ? '' : __t) +
'`),we=Wr+Et.length,Et}),Ae+=`';
`;var bt=En.call(d,"variable")&&d.variable;if(!bt)Ae=`with (obj) {
`+Ae+`
}
`;else if(po.test(bt))throw new It(o);Ae=(K?Ae.replace(Mt,""):Ae).replace(An,"$1").replace(E,"$1;"),Ae="function("+(bt||"obj")+`) {
`+(bt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(K?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ae+`return __p
}`;var Ht=pD(function(){return vn(I,ft+"return "+Ae).apply(i,L)});if(Ht.source=Ae,aw(Ht))throw Ht;return Ht}function jH(l){return xn(l).toLowerCase()}function GH(l){return xn(l).toUpperCase()}function WH(l,d,m){if(l=xn(l),l&&(m||d===i))return bA(l);if(!l||!(d=Hr(d)))return l;var w=Ho(l),b=Ho(d),I=EA(w,b),L=SA(w,b)+1;return Qa(w,I,L).join("")}function $H(l,d,m){if(l=xn(l),l&&(m||d===i))return l.slice(0,AA(l)+1);if(!l||!(d=Hr(d)))return l;var w=Ho(l),b=SA(w,Ho(d))+1;return Qa(w,0,b).join("")}function qH(l,d,m){if(l=xn(l),l&&(m||d===i))return l.replace(ei,"");if(!l||!(d=Hr(d)))return l;var w=Ho(l),b=EA(w,Ho(d));return Qa(w,b).join("")}function XH(l,d){var m=$,w=U;if(Yn(d)){var b="separator"in d?d.separator:b;m="length"in d?Vt(d.length):m,w="omission"in d?Hr(d.omission):w}l=xn(l);var I=l.length;if(uu(l)){var L=Ho(l);I=L.length}if(m>=I)return l;var G=m-du(w);if(G<1)return w;var K=L?Qa(L,0,G).join(""):l.slice(0,G);if(b===i)return K+w;if(L&&(G+=K.length-G),cw(b)){if(l.slice(G).search(b)){var we,be=K;for(b.global||(b=E_(b.source,xn(Fp.exec(b))+"g")),b.lastIndex=0;we=b.exec(be);)var Ae=we.index;K=K.slice(0,Ae===i?G:Ae)}}else if(l.indexOf(Hr(b),G)!=G){var Ke=K.lastIndexOf(b);Ke>-1&&(K=K.slice(0,Ke))}return K+w}function YH(l){return l=xn(l),l&&ue.test(l)?l.replace(te,Ek):l}var ZH=yu(function(l,d,m){return l+(m?" ":"")+d.toUpperCase()}),dw=mT("toUpperCase");function hD(l,d,m){return l=xn(l),d=m?i:d,d===i?_k(l)?Ak(l):uk(l):l.match(d)||[]}var pD=Gt(function(l,d){try{return Vr(l,i,d)}catch(m){return aw(m)?m:new It(m)}}),KH=oa(function(l,d){return go(d,function(m){m=Cs(m),ia(l,m,ow(l[m],l))}),l});function JH(l){var d=l==null?0:l.length,m=wt();return l=d?$n(l,function(w){if(typeof w[1]!="function")throw new yo(r);return[m(w[0]),w[1]]}):[],Gt(function(w){for(var b=-1;++b<d;){var I=l[b];if(Vr(I[0],this,w))return Vr(I[1],this,w)}})}function QH(l){return EB(_o(l,u))}function fw(l){return function(){return l}}function e5(l,d){return l==null||l!==l?d:l}var t5=yT(),n5=yT(!0);function Er(l){return l}function hw(l){return qA(typeof l=="function"?l:_o(l,u))}function i5(l){return YA(_o(l,u))}function r5(l,d){return ZA(l,_o(d,u))}var o5=Gt(function(l,d){return function(m){return _f(m,l,d)}}),s5=Gt(function(l,d){return function(m){return _f(l,m,d)}});function pw(l,d,m){var w=Ui(d),b=Qp(d,w);m==null&&!(Yn(d)&&(b.length||!w.length))&&(m=d,d=l,l=this,b=Qp(d,Ui(d)));var I=!(Yn(m)&&"chain"in m)||!!m.chain,L=aa(l);return go(b,function(G){var K=d[G];l[G]=K,L&&(l.prototype[G]=function(){var we=this.__chain__;if(I||we){var be=l(this.__wrapped__),Ae=be.__actions__=xr(this.__actions__);return Ae.push({func:K,args:arguments,thisArg:l}),be.__chain__=we,be}return K.apply(l,$a([this.value()],arguments))})}),l}function a5(){return Ri._===this&&(Ri._=Fk),this}function mw(){}function c5(l){return l=Vt(l),Gt(function(d){return KA(d,l)})}var l5=$_($n),u5=$_(vA),d5=$_(y_);function mD(l){return Q_(l)?v_(Cs(l)):zB(l)}function f5(l){return function(d){return l==null?i:rl(l,d)}}var h5=_T(),p5=_T(!0);function gw(){return[]}function yw(){return!1}function m5(){return{}}function g5(){return""}function y5(){return!0}function v5(l,d){if(l=Vt(l),l<1||l>W)return[];var m=me,w=Yi(l,me);d=wt(d),l-=me;for(var b=x_(w,d);++m<l;)d(m);return b}function _5(l){return Ut(l)?$n(l,Cs):jr(l)?[l]:xr(OT(xn(l)))}function w5(l){var d=++Rk;return xn(l)+d}var x5=om(function(l,d){return l+d},0),M5=q_("ceil"),b5=om(function(l,d){return l/d},1),E5=q_("floor");function S5(l){return l&&l.length?Jp(l,Er,U_):i}function C5(l,d){return l&&l.length?Jp(l,wt(d,2),U_):i}function A5(l){return xA(l,Er)}function T5(l,d){return xA(l,wt(d,2))}function D5(l){return l&&l.length?Jp(l,Er,N_):i}function I5(l,d){return l&&l.length?Jp(l,wt(d,2),N_):i}var R5=om(function(l,d){return l*d},1),U5=q_("round"),F5=om(function(l,d){return l-d},0);function P5(l){return l&&l.length?w_(l,Er):0}function O5(l,d){return l&&l.length?w_(l,wt(d,2)):0}return T.after=iz,T.ary=$T,T.assign=Gz,T.assignIn=sD,T.assignInWith=vm,T.assignWith=Wz,T.at=$z,T.before=qT,T.bind=ow,T.bindAll=KH,T.bindKey=XT,T.castArray=mz,T.chain=jT,T.chunk=EV,T.compact=SV,T.concat=CV,T.cond=JH,T.conforms=QH,T.constant=fw,T.countBy=P4,T.create=qz,T.curry=YT,T.curryRight=ZT,T.debounce=KT,T.defaults=Xz,T.defaultsDeep=Yz,T.defer=rz,T.delay=oz,T.difference=AV,T.differenceBy=TV,T.differenceWith=DV,T.drop=IV,T.dropRight=RV,T.dropRightWhile=UV,T.dropWhile=FV,T.fill=PV,T.filter=N4,T.flatMap=B4,T.flatMapDeep=V4,T.flatMapDepth=z4,T.flatten=BT,T.flattenDeep=OV,T.flattenDepth=NV,T.flip=sz,T.flow=t5,T.flowRight=n5,T.fromPairs=LV,T.functions=nH,T.functionsIn=iH,T.groupBy=H4,T.initial=BV,T.intersection=VV,T.intersectionBy=zV,T.intersectionWith=HV,T.invert=oH,T.invertBy=sH,T.invokeMap=G4,T.iteratee=hw,T.keyBy=W4,T.keys=Ui,T.keysIn=br,T.map=fm,T.mapKeys=cH,T.mapValues=lH,T.matches=i5,T.matchesProperty=r5,T.memoize=pm,T.merge=uH,T.mergeWith=aD,T.method=o5,T.methodOf=s5,T.mixin=pw,T.negate=mm,T.nthArg=c5,T.omit=dH,T.omitBy=fH,T.once=az,T.orderBy=$4,T.over=l5,T.overArgs=cz,T.overEvery=u5,T.overSome=d5,T.partial=sw,T.partialRight=JT,T.partition=q4,T.pick=hH,T.pickBy=cD,T.property=mD,T.propertyOf=f5,T.pull=$V,T.pullAll=zT,T.pullAllBy=qV,T.pullAllWith=XV,T.pullAt=YV,T.range=h5,T.rangeRight=p5,T.rearg=lz,T.reject=Z4,T.remove=ZV,T.rest=uz,T.reverse=iw,T.sampleSize=J4,T.set=mH,T.setWith=gH,T.shuffle=Q4,T.slice=KV,T.sortBy=nz,T.sortedUniq=r4,T.sortedUniqBy=o4,T.split=BH,T.spread=dz,T.tail=s4,T.take=a4,T.takeRight=c4,T.takeRightWhile=l4,T.takeWhile=u4,T.tap=S4,T.throttle=fz,T.thru=dm,T.toArray=iD,T.toPairs=lD,T.toPairsIn=uD,T.toPath=_5,T.toPlainObject=oD,T.transform=yH,T.unary=hz,T.union=d4,T.unionBy=f4,T.unionWith=h4,T.uniq=p4,T.uniqBy=m4,T.uniqWith=g4,T.unset=vH,T.unzip=rw,T.unzipWith=HT,T.update=_H,T.updateWith=wH,T.values=wu,T.valuesIn=xH,T.without=y4,T.words=hD,T.wrap=pz,T.xor=v4,T.xorBy=_4,T.xorWith=w4,T.zip=x4,T.zipObject=M4,T.zipObjectDeep=b4,T.zipWith=E4,T.entries=lD,T.entriesIn=uD,T.extend=sD,T.extendWith=vm,pw(T,T),T.add=x5,T.attempt=pD,T.camelCase=SH,T.capitalize=dD,T.ceil=M5,T.clamp=MH,T.clone=gz,T.cloneDeep=vz,T.cloneDeepWith=_z,T.cloneWith=yz,T.conformsTo=wz,T.deburr=fD,T.defaultTo=e5,T.divide=b5,T.endsWith=CH,T.eq=Go,T.escape=AH,T.escapeRegExp=TH,T.every=O4,T.find=L4,T.findIndex=LT,T.findKey=Zz,T.findLast=k4,T.findLastIndex=kT,T.findLastKey=Kz,T.floor=E5,T.forEach=GT,T.forEachRight=WT,T.forIn=Jz,T.forInRight=Qz,T.forOwn=eH,T.forOwnRight=tH,T.get=lw,T.gt=xz,T.gte=Mz,T.has=rH,T.hasIn=uw,T.head=VT,T.identity=Er,T.includes=j4,T.indexOf=kV,T.inRange=bH,T.invoke=aH,T.isArguments=al,T.isArray=Ut,T.isArrayBuffer=bz,T.isArrayLike=Mr,T.isArrayLikeObject=oi,T.isBoolean=Ez,T.isBuffer=ec,T.isDate=Sz,T.isElement=Cz,T.isEmpty=Az,T.isEqual=Tz,T.isEqualWith=Dz,T.isError=aw,T.isFinite=Iz,T.isFunction=aa,T.isInteger=QT,T.isLength=gm,T.isMap=eD,T.isMatch=Rz,T.isMatchWith=Uz,T.isNaN=Fz,T.isNative=Pz,T.isNil=Nz,T.isNull=Oz,T.isNumber=tD,T.isObject=Yn,T.isObjectLike=ti,T.isPlainObject=Sf,T.isRegExp=cw,T.isSafeInteger=Lz,T.isSet=nD,T.isString=ym,T.isSymbol=jr,T.isTypedArray=_u,T.isUndefined=kz,T.isWeakMap=Bz,T.isWeakSet=Vz,T.join=jV,T.kebabCase=DH,T.last=xo,T.lastIndexOf=GV,T.lowerCase=IH,T.lowerFirst=RH,T.lt=zz,T.lte=Hz,T.max=S5,T.maxBy=C5,T.mean=A5,T.meanBy=T5,T.min=D5,T.minBy=I5,T.stubArray=gw,T.stubFalse=yw,T.stubObject=m5,T.stubString=g5,T.stubTrue=y5,T.multiply=R5,T.nth=WV,T.noConflict=a5,T.noop=mw,T.now=hm,T.pad=UH,T.padEnd=FH,T.padStart=PH,T.parseInt=OH,T.random=EH,T.reduce=X4,T.reduceRight=Y4,T.repeat=NH,T.replace=LH,T.result=pH,T.round=U5,T.runInContext=Y,T.sample=K4,T.size=ez,T.snakeCase=kH,T.some=tz,T.sortedIndex=JV,T.sortedIndexBy=QV,T.sortedIndexOf=e4,T.sortedLastIndex=t4,T.sortedLastIndexBy=n4,T.sortedLastIndexOf=i4,T.startCase=VH,T.startsWith=zH,T.subtract=F5,T.sum=P5,T.sumBy=O5,T.template=HH,T.times=v5,T.toFinite=ca,T.toInteger=Vt,T.toLength=rD,T.toLower=jH,T.toNumber=Mo,T.toSafeInteger=jz,T.toString=xn,T.toUpper=GH,T.trim=WH,T.trimEnd=$H,T.trimStart=qH,T.truncate=XH,T.unescape=YH,T.uniqueId=w5,T.upperCase=ZH,T.upperFirst=dw,T.each=GT,T.eachRight=WT,T.first=VT,pw(T,function(){var l={};return Es(T,function(d,m){En.call(T.prototype,m)||(l[m]=d)}),l}(),{chain:!1}),T.VERSION=e,go(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){T[l].placeholder=T}),go(["drop","take"],function(l,d){en.prototype[l]=function(m){m=m===i?1:xi(Vt(m),0);var w=this.__filtered__&&!d?new en(this):this.clone();return w.__filtered__?w.__takeCount__=Yi(m,w.__takeCount__):w.__views__.push({size:Yi(m,me),type:l+(w.__dir__<0?"Right":"")}),w},en.prototype[l+"Right"]=function(m){return this.reverse()[l](m).reverse()}}),go(["filter","map","takeWhile"],function(l,d){var m=d+1,w=m==le||m==xe;en.prototype[l]=function(b){var I=this.clone();return I.__iteratees__.push({iteratee:wt(b,3),type:m}),I.__filtered__=I.__filtered__||w,I}}),go(["head","last"],function(l,d){var m="take"+(d?"Right":"");en.prototype[l]=function(){return this[m](1).value()[0]}}),go(["initial","tail"],function(l,d){var m="drop"+(d?"":"Right");en.prototype[l]=function(){return this.__filtered__?new en(this):this[m](1)}}),en.prototype.compact=function(){return this.filter(Er)},en.prototype.find=function(l){return this.filter(l).head()},en.prototype.findLast=function(l){return this.reverse().find(l)},en.prototype.invokeMap=Gt(function(l,d){return typeof l=="function"?new en(this):this.map(function(m){return _f(m,l,d)})}),en.prototype.reject=function(l){return this.filter(mm(wt(l)))},en.prototype.slice=function(l,d){l=Vt(l);var m=this;return m.__filtered__&&(l>0||d<0)?new en(m):(l<0?m=m.takeRight(-l):l&&(m=m.drop(l)),d!==i&&(d=Vt(d),m=d<0?m.dropRight(-d):m.take(d-l)),m)},en.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},en.prototype.toArray=function(){return this.take(me)},Es(en.prototype,function(l,d){var m=/^(?:filter|find|map|reject)|While$/.test(d),w=/^(?:head|last)$/.test(d),b=T[w?"take"+(d=="last"?"Right":""):d],I=w||/^find/.test(d);b&&(T.prototype[d]=function(){var L=this.__wrapped__,G=w?[1]:arguments,K=L instanceof en,we=G[0],be=K||Ut(L),Ae=function(Jt){var rn=b.apply(T,$a([Jt],G));return w&&Ke?rn[0]:rn};be&&m&&typeof we=="function"&&we.length!=1&&(K=be=!1);var Ke=this.__chain__,ft=!!this.__actions__.length,bt=I&&!Ke,Ht=K&&!ft;if(!I&&be){L=Ht?L:new en(this);var Et=l.apply(L,G);return Et.__actions__.push({func:dm,args:[Ae],thisArg:i}),new vo(Et,Ke)}return bt&&Ht?l.apply(this,G):(Et=this.thru(Ae),bt?w?Et.value()[0]:Et.value():Et)})}),go(["pop","push","shift","sort","splice","unshift"],function(l){var d=Lp[l],m=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",w=/^(?:pop|shift)$/.test(l);T.prototype[l]=function(){var b=arguments;if(w&&!this.__chain__){var I=this.value();return d.apply(Ut(I)?I:[],b)}return this[m](function(L){return d.apply(Ut(L)?L:[],b)})}}),Es(en.prototype,function(l,d){var m=T[d];if(m){var w=m.name+"";En.call(pu,w)||(pu[w]=[]),pu[w].push({name:d,func:m})}}),pu[rm(i,x).name]=[{name:"wrapper",func:i}],en.prototype.clone=Yk,en.prototype.reverse=Zk,en.prototype.value=Kk,T.prototype.at=C4,T.prototype.chain=A4,T.prototype.commit=T4,T.prototype.next=D4,T.prototype.plant=R4,T.prototype.reverse=U4,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=F4,T.prototype.first=T.prototype.head,ff&&(T.prototype[ff]=I4),T},Xa=Tk();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ri._=Xa,define(function(){return Xa})):Qc?((Qc.exports=Xa)._=Xa,h_._=Xa):Ri._=Xa}).call(of)});function xD(i,e){return Object.is(i,e)}var Mi=null,xm=!1,Mm=1,ua=Symbol("SIGNAL");function hn(i){let e=Mi;return Mi=i,e}function MD(){return Mi}var Af={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Mw(i){if(xm)throw new Error("");if(Mi===null)return;Mi.consumerOnSignalRead(i);let e=Mi.nextProducerIndex++;if(Cm(Mi),e<Mi.producerNode.length&&Mi.producerNode[e]!==i&&Cf(Mi)){let t=Mi.producerNode[e];Sm(t,Mi.producerIndexOfThis[e])}Mi.producerNode[e]!==i&&(Mi.producerNode[e]=i,Mi.producerIndexOfThis[e]=Cf(Mi)?CD(i,Mi,e):0),Mi.producerLastReadVersion[e]=i.version}function j5(){Mm++}function bD(i){if(!(Cf(i)&&!i.dirty)&&!(!i.dirty&&i.lastCleanEpoch===Mm)){if(!i.producerMustRecompute(i)&&!Ew(i)){i.dirty=!1,i.lastCleanEpoch=Mm;return}i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=Mm}}function ED(i){if(i.liveConsumerNode===void 0)return;let e=xm;xm=!0;try{for(let t of i.liveConsumerNode)t.dirty||G5(t)}finally{xm=e}}function SD(){return Mi?.consumerAllowSignalWrites!==!1}function G5(i){i.dirty=!0,ED(i),i.consumerMarkedDirty?.(i)}function Em(i){return i&&(i.nextProducerIndex=0),hn(i)}function bw(i,e){if(hn(e),!(!i||i.producerNode===void 0||i.producerIndexOfThis===void 0||i.producerLastReadVersion===void 0)){if(Cf(i))for(let t=i.nextProducerIndex;t<i.producerNode.length;t++)Sm(i.producerNode[t],i.producerIndexOfThis[t]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Ew(i){Cm(i);for(let e=0;e<i.producerNode.length;e++){let t=i.producerNode[e],n=i.producerLastReadVersion[e];if(n!==t.version||(bD(t),n!==t.version))return!0}return!1}function Sw(i){if(Cm(i),Cf(i))for(let e=0;e<i.producerNode.length;e++)Sm(i.producerNode[e],i.producerIndexOfThis[e]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function CD(i,e,t){if(AD(i),i.liveConsumerNode.length===0&&TD(i))for(let n=0;n<i.producerNode.length;n++)i.producerIndexOfThis[n]=CD(i.producerNode[n],i,n);return i.liveConsumerIndexOfThis.push(t),i.liveConsumerNode.push(e)-1}function Sm(i,e){if(AD(i),i.liveConsumerNode.length===1&&TD(i))for(let n=0;n<i.producerNode.length;n++)Sm(i.producerNode[n],i.producerIndexOfThis[n]);let t=i.liveConsumerNode.length-1;if(i.liveConsumerNode[e]=i.liveConsumerNode[t],i.liveConsumerIndexOfThis[e]=i.liveConsumerIndexOfThis[t],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,e<i.liveConsumerNode.length){let n=i.liveConsumerIndexOfThis[e],r=i.liveConsumerNode[e];Cm(r),r.producerIndexOfThis[n]=e}}function Cf(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Cm(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}function AD(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}function TD(i){return i.producerNode!==void 0}function DD(i){let e=Object.create(W5);e.computation=i;let t=()=>{if(bD(e),Mw(e),e.value===bm)throw e.error;return e.value};return t[ua]=e,t}var ww=Symbol("UNSET"),xw=Symbol("COMPUTING"),bm=Symbol("ERRORED"),W5=Zt(ze({},Af),{value:ww,dirty:!0,error:null,equal:xD,producerMustRecompute(i){return i.value===ww||i.value===xw},producerRecomputeValue(i){if(i.value===xw)throw new Error("Detected cycle in computations.");let e=i.value;i.value=xw;let t=Em(i),n;try{n=i.computation()}catch(r){n=bm,i.error=r}finally{bw(i,t)}if(e!==ww&&e!==bm&&n!==bm&&i.equal(e,n)){i.value=e;return}i.value=n,i.version++}});function $5(){throw new Error}var ID=$5;function RD(){ID()}function UD(i){ID=i}var q5=null;function FD(i){let e=Object.create(OD);e.value=i;let t=()=>(Mw(e),e.value);return t[ua]=e,t}function Cw(i,e){SD()||RD(),i.equal(i.value,e)||(i.value=e,X5(i))}function PD(i,e){SD()||RD(),Cw(i,e(i.value))}var OD=Zt(ze({},Af),{equal:xD,value:void 0});function X5(i){i.version++,j5(),ED(i),q5?.()}function Ft(i){return typeof i=="function"}function xu(i){let t=i(n=>{Error.call(n),n.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Am=xu(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((n,r)=>`${r+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Tf(i,e){if(i){let t=i.indexOf(e);0<=t&&i.splice(t,1)}}var fi=class i{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:n}=this;if(Ft(n))try{n()}catch(o){e=o instanceof Am?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{ND(o)}catch(s){e=e??[],s instanceof Am?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Am(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ND(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Tf(t,e)}remove(e){let{_finalizers:t}=this;t&&Tf(t,e),e instanceof i&&e._removeParent(this)}};fi.EMPTY=(()=>{let i=new fi;return i.closed=!0,i})();var Aw=fi.EMPTY;function Tm(i){return i instanceof fi||i&&"closed"in i&&Ft(i.remove)&&Ft(i.add)&&Ft(i.unsubscribe)}function ND(i){Ft(i)?i():i.unsubscribe()}var $o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mu={setTimeout(i,e,...t){let{delegate:n}=Mu;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){let{delegate:e}=Mu;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function Dm(i){Mu.setTimeout(()=>{let{onUnhandledError:e}=$o;if(e)e(i);else throw i})}function Df(){}var LD=Tw("C",void 0,void 0);function kD(i){return Tw("E",void 0,i)}function BD(i){return Tw("N",i,void 0)}function Tw(i,e,t){return{kind:i,value:e,error:t}}var cl=null;function bu(i){if($o.useDeprecatedSynchronousErrorHandling){let e=!cl;if(e&&(cl={errorThrown:!1,error:null}),i(),e){let{errorThrown:t,error:n}=cl;if(cl=null,t)throw n}}else i()}function VD(i){$o.useDeprecatedSynchronousErrorHandling&&cl&&(cl.errorThrown=!0,cl.error=i)}var ll=class extends fi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tm(e)&&e.add(this)):this.destination=K5}static create(e,t,n){return new tc(e,t,n)}next(e){this.isStopped?Iw(BD(e),this):this._next(e)}error(e){this.isStopped?Iw(kD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Iw(LD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Y5=Function.prototype.bind;function Dw(i,e){return Y5.call(i,e)}var Rw=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){Im(n)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){Im(n)}else Im(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Im(t)}}},tc=class extends ll{constructor(e,t,n){super();let r;if(Ft(e)||!e)r={next:e??void 0,error:t??void 0,complete:n??void 0};else{let o;this&&$o.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Dw(e.next,o),error:e.error&&Dw(e.error,o),complete:e.complete&&Dw(e.complete,o)}):r=e}this.destination=new Rw(r)}};function Im(i){$o.useDeprecatedSynchronousErrorHandling?VD(i):Dm(i)}function Z5(i){throw i}function Iw(i,e){let{onStoppedNotification:t}=$o;t&&Mu.setTimeout(()=>t(i,e))}var K5={closed:!0,next:Df,error:Z5,complete:Df};var Eu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $r(i){return i}function Uw(...i){return Fw(i)}function Fw(i){return i.length===0?$r:i.length===1?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}var an=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){let n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){let o=Q5(t)?t:new tc(t,n,r);return bu(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return n=zD(n),new n((r,o)=>{let s=new tc({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)}[Eu](){return this}pipe(...t){return Fw(t)(this)}toPromise(t){return t=zD(t),new t((n,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>n(o))})}}return i.create=e=>new i(e),i})();function zD(i){var e;return(e=i??$o.Promise)!==null&&e!==void 0?e:Promise}function J5(i){return i&&Ft(i.next)&&Ft(i.error)&&Ft(i.complete)}function Q5(i){return i&&i instanceof ll||J5(i)&&Tm(i)}function Pw(i){return Ft(i?.lift)}function cn(i){return e=>{if(Pw(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function tn(i,e,t,n,r){return new Ow(i,e,t,n,r)}var Ow=class extends ll{constructor(e,t,n,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Su(){return cn((i,e)=>{let t=null;i._refCount++;let n=tn(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount){t=null;return}let r=i._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}var Cu=class extends an{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Pw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fi;let t=this.getSubject();e.add(this.source.subscribe(tn(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fi.EMPTY)}return e}refCount(){return Su()(this)}};var HD=xu(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ni=(()=>{class i extends an{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let n=new Rm(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new HD}next(t){bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(t)}})}error(t){bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:n,isStopped:r,observers:o}=this;return n||r?Aw:(this.currentObservers=null,o.push(t),new fi(()=>{this.currentObservers=null,Tf(o,t)}))}_checkFinalizedStatuses(t){let{hasError:n,thrownError:r,isStopped:o}=this;n?t.error(r):o&&t.complete()}asObservable(){let t=new an;return t.source=this,t}}return i.create=(e,t)=>new Rm(e,t),i})(),Rm=class extends ni{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.next)===null||n===void 0||n.call(t,e)}error(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.error)===null||n===void 0||n.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,n;return(n=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&n!==void 0?n:Aw}};var ai=class extends ni{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}};var qr=new an(i=>i.complete());function jD(i){return i&&Ft(i.schedule)}function GD(i){return i[i.length-1]}function Um(i){return Ft(GD(i))?i.pop():void 0}function nc(i){return jD(GD(i))?i.pop():void 0}function $D(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(n.next(f))}catch(h){s(h)}}function c(f){try{u(n.throw(f))}catch(h){s(h)}}function u(f){f.done?o(f.value):r(f.value).then(a,c)}u((n=n.apply(i,e||[])).next())})}function WD(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ul(i){return this instanceof ul?(this.v=i,this):new ul(i)}function qD(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,o=[];return r={},a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(y){return Promise.resolve(y).then(g,h)}}function a(g,y){n[g]&&(r[g]=function(x){return new Promise(function(v,_){o.push([g,x,v,_])>1||c(g,x)})},y&&(r[g]=y(r[g])))}function c(g,y){try{u(n[g](y))}catch(x){p(o[0][3],x)}}function u(g){g.value instanceof ul?Promise.resolve(g.value.v).then(f,h):p(o[0][2],g)}function f(g){c("next",g)}function h(g){c("throw",g)}function p(g,y){g(y),o.shift(),o.length&&c(o[0][0],o[0][1])}}function XD(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof WD=="function"?WD(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(a,c){s=i[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Fm=i=>i&&typeof i.length=="number"&&typeof i!="function";function Pm(i){return Ft(i?.then)}function Om(i){return Ft(i[Eu])}function Nm(i){return Symbol.asyncIterator&&Ft(i?.[Symbol.asyncIterator])}function Lm(i){return new TypeError(`You provided ${i!==null&&typeof i=="object"?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ej(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var km=ej();function Bm(i){return Ft(i?.[km])}function Vm(i){return qD(this,arguments,function*(){let t=i.getReader();try{for(;;){let{value:n,done:r}=yield ul(t.read());if(r)return yield ul(void 0);yield yield ul(n)}}finally{t.releaseLock()}})}function zm(i){return Ft(i?.getReader)}function hi(i){if(i instanceof an)return i;if(i!=null){if(Om(i))return tj(i);if(Fm(i))return nj(i);if(Pm(i))return ij(i);if(Nm(i))return YD(i);if(Bm(i))return rj(i);if(zm(i))return oj(i)}throw Lm(i)}function tj(i){return new an(e=>{let t=i[Eu]();if(Ft(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nj(i){return new an(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}function ij(i){return new an(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Dm)})}function rj(i){return new an(e=>{for(let t of i)if(e.next(t),e.closed)return;e.complete()})}function YD(i){return new an(e=>{sj(i,e).catch(t=>e.error(t))})}function oj(i){return YD(Vm(i))}function sj(i,e){var t,n,r,o;return $D(this,void 0,void 0,function*(){try{for(t=XD(i);n=yield t.next(),!n.done;){let s=n.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Sr(i,e,t,n=0,r=!1){let o=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(o),!r)return o}function Hm(i,e=0){return cn((t,n)=>{t.subscribe(tn(n,r=>Sr(n,i,()=>n.next(r),e),()=>Sr(n,i,()=>n.complete(),e),r=>Sr(n,i,()=>n.error(r),e)))})}function jm(i,e=0){return cn((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function ZD(i,e){return hi(i).pipe(jm(e),Hm(e))}function KD(i,e){return hi(i).pipe(jm(e),Hm(e))}function JD(i,e){return new an(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}function QD(i,e){return new an(t=>{let n;return Sr(t,e,()=>{n=i[km](),Sr(t,e,()=>{let r,o;try{({value:r,done:o}=n.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>Ft(n?.return)&&n.return()})}function Gm(i,e){if(!i)throw new Error("Iterable cannot be null");return new an(t=>{Sr(t,e,()=>{let n=i[Symbol.asyncIterator]();Sr(t,e,()=>{n.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function eI(i,e){return Gm(Vm(i),e)}function tI(i,e){if(i!=null){if(Om(i))return ZD(i,e);if(Fm(i))return JD(i,e);if(Pm(i))return KD(i,e);if(Nm(i))return Gm(i,e);if(Bm(i))return QD(i,e);if(zm(i))return eI(i,e)}throw Lm(i)}function Zn(i,e){return e?tI(i,e):hi(i)}function Tt(...i){let e=nc(i);return Zn(i,e)}function Au(i,e){let t=Ft(i)?i:()=>i,n=r=>r.error(t());return new an(e?r=>e.schedule(n,0,r):n)}function Nw(i){return!!i&&(i instanceof an||Ft(i.lift)&&Ft(i.subscribe))}var qo=xu(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function Lw(i,e){let t=typeof e=="object";return new Promise((n,r)=>{let o=new tc({next:s=>{n(s),o.unsubscribe()},error:r,complete:()=>{t?n(e.defaultValue):r(new qo)}});i.subscribe(o)})}function Ot(i,e){return cn((t,n)=>{let r=0;t.subscribe(tn(n,o=>{n.next(i.call(e,o,r++))}))})}var{isArray:aj}=Array;function cj(i,e){return aj(e)?i(...e):i(e)}function Wm(i){return Ot(e=>cj(i,e))}var{isArray:lj}=Array,{getPrototypeOf:uj,prototype:dj,keys:fj}=Object;function $m(i){if(i.length===1){let e=i[0];if(lj(e))return{args:e,keys:null};if(hj(e)){let t=fj(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}function hj(i){return i&&typeof i=="object"&&uj(i)===dj}function qm(i,e){return i.reduce((t,n,r)=>(t[n]=e[r],t),{})}function Xm(...i){let e=nc(i),t=Um(i),{args:n,keys:r}=$m(i);if(n.length===0)return Zn([],e);let o=new an(pj(n,e,r?s=>qm(r,s):$r));return t?o.pipe(Wm(t)):o}function pj(i,e,t=$r){return n=>{nI(e,()=>{let{length:r}=i,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)nI(e,()=>{let u=Zn(i[c],e),f=!1;u.subscribe(tn(n,h=>{o[c]=h,f||(f=!0,a--),a||n.next(t(o.slice()))},()=>{--s||n.complete()}))},n)},n)}}function nI(i,e,t){i?Sr(t,i,e):e()}function iI(i,e,t,n,r,o,s,a){let c=[],u=0,f=0,h=!1,p=()=>{h&&!c.length&&!u&&e.complete()},g=x=>u<n?y(x):c.push(x),y=x=>{o&&e.next(x),u++;let v=!1;hi(t(x,f++)).subscribe(tn(e,_=>{r?.(_),o?g(_):e.next(_)},()=>{v=!0},void 0,()=>{if(v)try{for(u--;c.length&&u<n;){let _=c.shift();s?Sr(e,s,()=>y(_)):y(_)}p()}catch(_){e.error(_)}}))};return i.subscribe(tn(e,g,()=>{h=!0,p()})),()=>{a?.()}}function bi(i,e,t=1/0){return Ft(e)?bi((n,r)=>Ot((o,s)=>e(n,o,r,s))(hi(i(n,r))),t):(typeof e=="number"&&(t=e),cn((n,r)=>iI(n,r,i,t)))}function kw(i=1/0){return bi($r,i)}function rI(){return kw(1)}function Tu(...i){return rI()(Zn(i,nc(i)))}function Ym(i){return new an(e=>{hi(i()).subscribe(e)})}function Bw(...i){let e=Um(i),{args:t,keys:n}=$m(i),r=new an(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let f=0;f<s;f++){let h=!1;hi(t[f]).subscribe(tn(o,p=>{h||(h=!0,u--),a[f]=p},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(n?qm(n,a):a),o.complete())}))}});return e?r.pipe(Wm(e)):r}function cr(i,e){return cn((t,n)=>{let r=0;t.subscribe(tn(n,o=>i.call(e,o,r++)&&n.next(o)))})}function ic(i){return cn((e,t)=>{let n=null,r=!1,o;n=e.subscribe(tn(t,void 0,void 0,s=>{o=hi(i(s,ic(i)(e))),n?(n.unsubscribe(),n=null,o.subscribe(t)):r=!0})),r&&(n.unsubscribe(),n=null,o.subscribe(t))})}function oI(i,e,t,n,r){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(tn(s,f=>{let h=u++;c=a?i(c,f,h):(a=!0,f),n&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function rc(i,e){return Ft(e)?bi(i,e,1):bi(i,1)}function oc(i){return cn((e,t)=>{let n=!1;e.subscribe(tn(t,r=>{n=!0,t.next(r)},()=>{n||t.next(i),t.complete()}))})}function da(i){return i<=0?()=>qr:cn((e,t)=>{let n=0;e.subscribe(tn(t,r=>{++n<=i&&(t.next(r),i<=n&&t.complete())}))})}function Vw(i){return Ot(()=>i)}function Zm(i=mj){return cn((e,t)=>{let n=!1;e.subscribe(tn(t,r=>{n=!0,t.next(r)},()=>n?t.complete():t.error(i())))})}function mj(){return new qo}function sc(i){return cn((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}function Xo(i,e){let t=arguments.length>=2;return n=>n.pipe(i?cr((r,o)=>i(r,o,n)):$r,da(1),t?oc(e):Zm(()=>new qo))}function Du(i){return i<=0?()=>qr:cn((e,t)=>{let n=[];e.subscribe(tn(t,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(let r of n)t.next(r);t.complete()},void 0,()=>{n=null}))})}function zw(i,e){let t=arguments.length>=2;return n=>n.pipe(i?cr((r,o)=>i(r,o,n)):$r,Du(1),t?oc(e):Zm(()=>new qo))}function Hw(i,e){return cn(oI(i,e,arguments.length>=2,!0))}function jw(...i){let e=nc(i);return cn((t,n)=>{(e?Tu(i,t,e):Tu(i,t)).subscribe(n)})}function Xr(i,e){return cn((t,n)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&n.complete();t.subscribe(tn(n,c=>{r?.unsubscribe();let u=0,f=o++;hi(i(c,f)).subscribe(r=tn(n,h=>n.next(e?e(c,h,f,u++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function If(i){return cn((e,t)=>{hi(i).subscribe(tn(t,()=>t.complete(),Df)),!t.closed&&e.subscribe(t)})}function Ei(i,e,t){let n=Ft(i)||e||t?{next:i,error:e,complete:t}:i;return n?cn((r,o)=>{var s;(s=n.subscribe)===null||s===void 0||s.call(n);let a=!0;r.subscribe(tn(o,c=>{var u;(u=n.next)===null||u===void 0||u.call(n,c),o.next(c)},()=>{var c;a=!1,(c=n.complete)===null||c===void 0||c.call(n),o.complete()},c=>{var u;a=!1,(u=n.error)===null||u===void 0||u.call(n,c),o.error(c)},()=>{var c,u;a&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):$r}var $I="https://g.co/ng/security#xss",Ne=class extends Error{constructor(e,t){super(Ng(e,t)),this.code=e}};function Ng(i,e){return`${`NG0${Math.abs(i)}`}${e?": "+e:""}`}function Gf(i){return{toString:i}.toString()}var Km="__parameters__";function gj(i){return function(...t){if(i){let n=i(...t);for(let r in n)this[r]=n[r]}}}function qI(i,e,t){return Gf(()=>{let n=gj(e);function r(...o){if(this instanceof r)return n.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,u,f){let h=c.hasOwnProperty(Km)?c[Km]:Object.defineProperty(c,Km,{value:[]})[Km];for(;h.length<=f;)h.push(null);return(h[f]=h[f]||[]).push(s),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}var Ff=globalThis;function Fn(i){for(let e in i)if(i[e]===Fn)return e;throw Error("Could not find renamed property on target object.")}function yj(i,e){for(let t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function dr(i){if(typeof i=="string")return i;if(Array.isArray(i))return"["+i.map(dr).join(", ")+"]";if(i==null)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;let e=i.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function sx(i,e){return i==null||i===""?e===null?"":e:e==null||e===""?i:i+" "+e}var vj=Fn({__forward_ref__:Fn});function ts(i){return i.__forward_ref__=ts,i.toString=function(){return dr(this())},i}function lr(i){return XI(i)?i():i}function XI(i){return typeof i=="function"&&i.hasOwnProperty(vj)&&i.__forward_ref__===ts}function Be(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ir(i){return{providers:i.providers||[],imports:i.imports||[]}}function Lg(i){return sI(i,ZI)||sI(i,KI)}function YI(i){return Lg(i)!==null}function sI(i,e){return i.hasOwnProperty(e)?i[e]:null}function _j(i){let e=i&&(i[ZI]||i[KI]);return e||null}function aI(i){return i&&(i.hasOwnProperty(cI)||i.hasOwnProperty(wj))?i[cI]:null}var ZI=Fn({\u0275prov:Fn}),cI=Fn({\u0275inj:Fn}),KI=Fn({ngInjectableDef:Fn}),wj=Fn({ngInjectorDef:Fn}),ct=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Be({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function JI(i){return i&&!!i.\u0275providers}var xj=Fn({\u0275cmp:Fn}),Mj=Fn({\u0275dir:Fn}),bj=Fn({\u0275pipe:Fn}),Ej=Fn({\u0275mod:Fn}),dg=Fn({\u0275fac:Fn}),Uf=Fn({__NG_ELEMENT_ID__:Fn}),lI=Fn({__NG_ENV_ID__:Fn});function Wf(i){return typeof i=="string"?i:i==null?"":String(i)}function Sj(i){return typeof i=="function"?i.name||i.toString():typeof i=="object"&&i!=null&&typeof i.type=="function"?i.type.name||i.type.toString():Wf(i)}function Cj(i,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new Ne(-200,i)}function f1(i,e){throw new Ne(-201,!1)}var Wt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Wt||{}),ax;function QI(){return ax}function Cr(i){let e=ax;return ax=i,e}function e2(i,e,t){let n=Lg(i);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(t&Wt.Optional)return null;if(e!==void 0)return e;f1(i,"Injector")}var Aj={},Pf=Aj,cx="__NG_DI_FLAG__",fg="ngTempTokenPath",Tj="ngTokenPath",Dj=/\n/gm,Ij="\u0275",uI="__source",Fu;function Rj(){return Fu}function ac(i){let e=Fu;return Fu=i,e}function Uj(i,e=Wt.Default){if(Fu===void 0)throw new Ne(-203,!1);return Fu===null?e2(i,void 0,e):Fu.get(i,e&Wt.Optional?null:void 0,e)}function Xe(i,e=Wt.Default){return(QI()||Uj)(lr(i),e)}function Ue(i,e=Wt.Default){return Xe(i,kg(e))}function kg(i){return typeof i>"u"||typeof i=="number"?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function lx(i){let e=[];for(let t=0;t<i.length;t++){let n=lr(i[t]);if(Array.isArray(n)){if(n.length===0)throw new Ne(900,!1);let r,o=Wt.Default;for(let s=0;s<n.length;s++){let a=n[s],c=Fj(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(Xe(r,o))}else e.push(Xe(n))}return e}function t2(i,e){return i[cx]=e,i.prototype[cx]=e,i}function Fj(i){return i[cx]}function Pj(i,e,t,n){let r=i[fg];throw e[uI]&&r.unshift(e[uI]),i.message=Oj(`
`+i.message,r,t,n),i[Tj]=r,i[fg]=null,i}function Oj(i,e,t,n=null){i=i&&i.charAt(0)===`
`&&i.charAt(1)==Ij?i.slice(2):i;let r=dr(e);if(Array.isArray(e))r=e.map(dr).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):dr(a)))}r=`{${o.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(Dj,`
  `)}`}var h1=t2(qI("Optional"),8);var n2=t2(qI("SkipSelf"),4);function hl(i,e){let t=i.hasOwnProperty(dg);return t?i[dg]:null}function Nj(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],o=e[n];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function Lj(i){return i.flat(Number.POSITIVE_INFINITY)}function p1(i,e){i.forEach(t=>Array.isArray(t)?p1(t,e):e(t))}function i2(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function hg(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function kj(i,e){let t=[];for(let n=0;n<i;n++)t.push(e);return t}function Bj(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(r===1)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;){let o=r-2;i[r]=i[o],r--}i[e]=t,i[e+1]=n}}function m1(i,e,t){let n=$f(i,e);return n>=0?i[n|1]=t:(n=~n,Bj(i,n,e,t)),n}function Gw(i,e){let t=$f(i,e);if(t>=0)return i[t|1]}function $f(i,e){return Vj(i,e,1)}function Vj(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){let o=n+(r-n>>1),s=i[o<<t];if(e===s)return o<<t;s>e?r=o:n=o+1}return~(r<<t)}var Ou={},ur=[],pl=new ct(""),r2=new ct("",-1),o2=new ct(""),pg=class{get(e,t=Pf){if(t===Pf){let n=new Error(`NullInjectorError: No provider for ${dr(e)}!`);throw n.name="NullInjectorError",n}return t}},s2=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(s2||{}),Is=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Is||{}),lc=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(lc||{});function zj(i,e,t){let n=i.length;for(;;){let r=i.indexOf(e,t);if(r===-1)return r;if(r===0||i.charCodeAt(r-1)<=32){let o=e.length;if(r+o===n||i.charCodeAt(r+o)<=32)return r}t=r+1}}function ux(i,e,t){let n=0;for(;n<t.length;){let r=t[n];if(typeof r=="number"){if(r!==0)break;n++;let o=t[n++],s=t[n++],a=t[n++];i.setAttribute(e,s,a,o)}else{let o=r,s=t[++n];Hj(o)?i.setProperty(e,o,s):i.setAttribute(e,o,s),n++}}return n}function a2(i){return i===3||i===4||i===6}function Hj(i){return i.charCodeAt(0)===64}function Of(i,e){if(!(e===null||e.length===0))if(i===null||i.length===0)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){let r=e[n];typeof r=="number"?t=r:t===0||(t===-1||t===2?dI(i,t,r,null,e[++n]):dI(i,t,r,null,null))}}return i}function dI(i,e,t,n,r){let o=0,s=i.length;if(e===-1)s=-1;else for(;o<i.length;){let a=i[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<i.length;){let a=i[o];if(typeof a=="number")break;if(a===t){if(n===null){r!==null&&(i[o+1]=r);return}else if(n===i[o+1]){i[o+2]=r;return}}o++,n!==null&&o++,r!==null&&o++}s!==-1&&(i.splice(s,0,e),o=s+1),i.splice(o++,0,t),n!==null&&i.splice(o++,0,n),r!==null&&i.splice(o++,0,r)}var c2="ng-template";function jj(i,e,t,n){let r=0;if(n){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&zj(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(g1(i))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function g1(i){return i.type===4&&i.value!==c2}function Gj(i,e,t){let n=i.type===4&&!t?c2:i.value;return e===n}function Wj(i,e,t){let n=4,r=i.attrs,o=r!==null?Xj(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Yo(n)&&!Yo(c))return!1;if(s&&Yo(c))continue;s=!1,n=c|n&1;continue}if(!s)if(n&4){if(n=2|n&1,c!==""&&!Gj(i,c,t)||c===""&&e.length===1){if(Yo(n))return!1;s=!0}}else if(n&8){if(r===null||!jj(i,r,c,t)){if(Yo(n))return!1;s=!0}}else{let u=e[++a],f=$j(c,r,g1(i),t);if(f===-1){if(Yo(n))return!1;s=!0;continue}if(u!==""){let h;if(f>o?h="":h=r[f+1].toLowerCase(),n&2&&u!==h){if(Yo(n))return!1;s=!0}}}}return Yo(n)||s}function Yo(i){return(i&1)===0}function $j(i,e,t,n){if(e===null)return-1;let r=0;if(n||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===i)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return Yj(e,i)}function l2(i,e,t=!1){for(let n=0;n<e.length;n++)if(Wj(i,e[n],t))return!0;return!1}function qj(i){let e=i.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function Xj(i){for(let e=0;e<i.length;e++){let t=i[e];if(a2(t))return e}return i.length}function Yj(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){let n=i[t];if(typeof n=="number")return-1;if(n===e)return t;t++}return-1}function Zj(i,e){e:for(let t=0;t<e.length;t++){let n=e[t];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function fI(i,e){return i?":not("+e.trim()+")":e}function Kj(i){let e=i[0],t=1,n=2,r="",o=!1;for(;t<i.length;){let s=i[t];if(typeof s=="string")if(n&2){let a=i[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else n&8?r+="."+s:n&4&&(r+=" "+s);else r!==""&&!Yo(s)&&(e+=fI(o,r),r=""),n=s,o=o||!Yo(n);t++}return r!==""&&(e+=fI(o,r)),e}function Jj(i){return i.map(Kj).join(",")}function Qj(i){let e=[],t=[],n=1,r=2;for(;n<i.length;){let o=i[n];if(typeof o=="string")r===2?o!==""&&e.push(o,i[++n]):r===8&&t.push(o);else{if(!Yo(r))break;r=o}n++}return{attrs:e,classes:t}}function ln(i){return Gf(()=>{let e=p2(i),t=Zt(ze({},e),{decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===s2.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||Is.Emulated,styles:i.styles||ur,_:null,schemas:i.schemas||null,tView:null,id:""});m2(t);let n=i.dependencies;return t.directiveDefs=pI(n,!1),t.pipeDefs=pI(n,!0),t.id=n8(t),t})}function e8(i){return ml(i)||u2(i)}function t8(i){return i!==null}function Rr(i){return Gf(()=>({type:i.type,bootstrap:i.bootstrap||ur,declarations:i.declarations||ur,imports:i.imports||ur,exports:i.exports||ur,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function hI(i,e){if(i==null)return Ou;let t={};for(let n in i)if(i.hasOwnProperty(n)){let r=i[n],o,s,a=lc.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(t[o]=a!==lc.None?[n,a]:n,e[o]=s):t[o]=n}return t}function Nn(i){return Gf(()=>{let e=p2(i);return m2(e),e})}function y1(i){return{type:i.type,name:i.name,factory:null,pure:i.pure!==!1,standalone:i.standalone===!0,onDestroy:i.type.prototype.ngOnDestroy||null}}function ml(i){return i[xj]||null}function u2(i){return i[Mj]||null}function d2(i){return i[bj]||null}function f2(i){let e=ml(i)||u2(i)||d2(i);return e!==null?e.standalone:!1}function h2(i,e){let t=i[Ej]||null;if(!t&&e===!0)throw new Error(`Type ${dr(i)} does not have '\u0275mod' property.`);return t}function p2(i){let e={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:i.inputs||Ou,exportAs:i.exportAs||null,standalone:i.standalone===!0,signals:i.signals===!0,selectors:i.selectors||ur,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hI(i.inputs,e),outputs:hI(i.outputs),debugInfo:null}}function m2(i){i.features?.forEach(e=>e(i))}function pI(i,e){if(!i)return null;let t=e?d2:e8;return()=>(typeof i=="function"?i():i).map(n=>t(n)).filter(t8)}function n8(i){let e=0,t=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function mc(i){return{\u0275providers:i}}function i8(...i){return{\u0275providers:g2(!0,i),\u0275fromNgModule:!0}}function g2(i,...e){let t=[],n=new Set,r,o=s=>{t.push(s)};return p1(e,s=>{let a=s;dx(a,o,[],n)&&(r||=[],r.push(a))}),r!==void 0&&y2(r,o),t}function y2(i,e){for(let t=0;t<i.length;t++){let{ngModule:n,providers:r}=i[t];v1(r,o=>{e(o,n)})}}function dx(i,e,t,n){if(i=lr(i),!i)return!1;let r=null,o=aI(i),s=!o&&ml(i);if(!o&&!s){let c=i.ngModule;if(o=aI(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=i}let a=n.has(r);if(s){if(a)return!1;if(n.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)dx(u,e,t,n)}}else if(o){if(o.imports!=null&&!a){n.add(r);let u;try{p1(o.imports,f=>{dx(f,e,t,n)&&(u||=[],u.push(f))})}finally{}u!==void 0&&y2(u,e)}if(!a){let u=hl(r)||(()=>new r);e({provide:r,useFactory:u,deps:ur},r),e({provide:o2,useValue:r,multi:!0},r),e({provide:pl,useValue:()=>Xe(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let u=i;v1(c,f=>{e(f,u)})}}else return!1;return r!==i&&i.providers!==void 0}function v1(i,e){for(let t of i)JI(t)&&(t=t.\u0275providers),Array.isArray(t)?v1(t,e):e(t)}var r8=Fn({provide:String,useValue:Fn});function v2(i){return i!==null&&typeof i=="object"&&r8 in i}function o8(i){return!!(i&&i.useExisting)}function s8(i){return!!(i&&i.useFactory)}function Nu(i){return typeof i=="function"}function a8(i){return!!i.useClass}var Bg=new ct(""),sg={},c8={},Ww;function _1(){return Ww===void 0&&(Ww=new pg),Ww}var Tr=class{},Nf=class extends Tr{get destroyed(){return this._destroyed}constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hx(e,s=>this.processProvider(s)),this.records.set(r2,Iu(void 0,this)),r.has("environment")&&this.records.set(Tr,Iu(void 0,this));let o=this.records.get(Bg);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(o2,ur,Wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=hn(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),hn(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=ac(this),n=Cr(void 0),r;try{return e()}finally{ac(t),Cr(n)}}get(e,t=Pf,n=Wt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lI))return e[lI](this);n=kg(n);let r,o=ac(this),s=Cr(void 0);try{if(!(n&Wt.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=h8(e)&&Lg(e);u&&this.injectableDefInScope(u)?c=Iu(fx(e),sg):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=n&Wt.Self?_1():this.parent;return t=n&Wt.Optional&&t===Pf?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[fg]=a[fg]||[]).unshift(dr(e)),o)throw a;return Pj(a,e,"R3InjectorError",this.source)}else throw a}finally{Cr(s),ac(o)}}resolveInjectorInitializers(){let e=hn(null),t=ac(this),n=Cr(void 0),r;try{let o=this.get(pl,ur,Wt.Self);for(let s of o)s()}finally{ac(t),Cr(n),hn(e)}}toString(){let e=[],t=this.records;for(let n of t.keys())e.push(dr(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processProvider(e){e=lr(e);let t=Nu(e)?e:lr(e&&e.provide),n=u8(e);if(!Nu(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Iu(void 0,sg,!0),r.factory=()=>lx(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t){let n=hn(null);try{return t.value===sg&&(t.value=c8,t.value=t.factory()),typeof t.value=="object"&&t.value&&f8(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{hn(n)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=lr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function fx(i){let e=Lg(i),t=e!==null?e.factory:hl(i);if(t!==null)return t;if(i instanceof ct)throw new Ne(204,!1);if(i instanceof Function)return l8(i);throw new Ne(204,!1)}function l8(i){if(i.length>0)throw new Ne(204,!1);let t=_j(i);return t!==null?()=>t.factory(i):()=>new i}function u8(i){if(v2(i))return Iu(void 0,i.useValue);{let e=_2(i);return Iu(e,sg)}}function _2(i,e,t){let n;if(Nu(i)){let r=lr(i);return hl(r)||fx(r)}else if(v2(i))n=()=>lr(i.useValue);else if(s8(i))n=()=>i.useFactory(...lx(i.deps||[]));else if(o8(i))n=()=>Xe(lr(i.useExisting));else{let r=lr(i&&(i.useClass||i.provide));if(d8(i))n=()=>new r(...lx(i.deps));else return hl(r)||fx(r)}return n}function Iu(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function d8(i){return!!i.deps}function f8(i){return i!==null&&typeof i=="object"&&typeof i.ngOnDestroy=="function"}function h8(i){return typeof i=="function"||typeof i=="object"&&i instanceof ct}function hx(i,e){for(let t of i)Array.isArray(t)?hx(t,e):t&&JI(t)?hx(t.\u0275providers,e):e(t)}function ns(i,e){i instanceof Nf&&i.assertNotDestroyed();let t,n=ac(i),r=Cr(void 0);try{return e()}finally{ac(n),Cr(r)}}function p8(){return QI()!==void 0||Rj()!=null}function m8(i){return typeof i=="function"}var Yr=0,Pt=1,Dt=2,ji=3,Ko=4,Ur=5,Jo=6,mg=7,Qo=8,Lu=9,Rs=10,On=11,Lf=12,mI=13,Hu=14,Dr=15,gl=16,Ru=17,fa=18,Vg=19,w2=20,cc=21,$w=22,bo=23,pi=25,x2=1,kf=6,ha=7,gg=8,ku=9,Ar=10,yg=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(yg||{});function Ds(i){return Array.isArray(i)&&typeof i[x2]=="object"}function Fs(i){return Array.isArray(i)&&i[x2]===!0}function w1(i){return(i.flags&4)!==0}function qf(i){return i.componentOffset>-1}function zg(i){return(i.flags&1)===1}function uc(i){return!!i.template}function vg(i){return(i[Dt]&512)!==0}var px=class{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}};function M2(i,e,t,n){e!==null?e.applyValueToInputSignal(e,n):i[t]=n}function Si(){return b2}function b2(i){return i.type.prototype.ngOnChanges&&(i.setInput=y8),g8}Si.ngInherit=!0;function g8(){let i=S2(this),e=i?.current;if(e){let t=i.previous;if(t===Ou)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function y8(i,e,t,n,r){let o=this.declaredInputs[n],s=S2(i)||v8(i,{previous:Ou,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new px(u&&u.currentValue,t,c===Ou),M2(i,e,r,t)}var E2="__ngSimpleChanges__";function S2(i){return i[E2]||null}function v8(i,e){return i[E2]=e}var gI=null;var As=function(i,e,t){gI?.(i,e,t)},C2="svg",_8="math";function es(i){for(;Array.isArray(i);)i=i[Yr];return i}function A2(i,e){return es(e[i])}function Kr(i,e){return es(e[i.index])}function T2(i,e){return i.data[e]}function D2(i,e){return i[e]}function gc(i,e){let t=e[i];return Ds(t)?t:t[Yr]}function w8(i){return(i[Dt]&4)===4}function x1(i){return(i[Dt]&128)===128}function x8(i){return Fs(i[ji])}function Bu(i,e){return e==null?null:i[e]}function I2(i){i[Ru]=0}function R2(i){i[Dt]&1024||(i[Dt]|=1024,x1(i)&&Hg(i))}function M8(i,e){for(;i>0;)e=e[Hu],i--;return e}function Bf(i){return!!(i[Dt]&9216||i[bo]?.dirty)}function mx(i){i[Rs].changeDetectionScheduler?.notify(7),i[Dt]&64&&(i[Dt]|=1024),Bf(i)&&Hg(i)}function Hg(i){i[Rs].changeDetectionScheduler?.notify(0);let e=yl(i);for(;e!==null&&!(e[Dt]&8192||(e[Dt]|=8192,!x1(e)));)e=yl(e)}function U2(i,e){if((i[Dt]&256)===256)throw new Ne(911,!1);i[cc]===null&&(i[cc]=[]),i[cc].push(e)}function b8(i,e){if(i[cc]===null)return;let t=i[cc].indexOf(e);t!==-1&&i[cc].splice(t,1)}function yl(i){let e=i[ji];return Fs(e)?e[ji]:e}var Nt={lFrame:z2(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var F2=!1;function E8(){return Nt.lFrame.elementDepthCount}function S8(){Nt.lFrame.elementDepthCount++}function C8(){Nt.lFrame.elementDepthCount--}function P2(){return Nt.bindingsEnabled}function ju(){return Nt.skipHydrationRootTNode!==null}function A8(i){return Nt.skipHydrationRootTNode===i}function T8(i){Nt.skipHydrationRootTNode=i}function D8(){Nt.skipHydrationRootTNode=null}function Kt(){return Nt.lFrame.lView}function mi(){return Nt.lFrame.tView}function He(i){return Nt.lFrame.contextLView=i,i[Qo]}function je(i){return Nt.lFrame.contextLView=null,i}function Ki(){let i=O2();for(;i!==null&&i.type===64;)i=i.parent;return i}function O2(){return Nt.lFrame.currentTNode}function I8(){let i=Nt.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}function bl(i,e){let t=Nt.lFrame;t.currentTNode=i,t.isParent=e}function M1(){return Nt.lFrame.isParent}function b1(){Nt.lFrame.isParent=!1}function R8(){return Nt.lFrame.contextLView}function N2(){return F2}function yI(i){F2=i}function Xf(){let i=Nt.lFrame,e=i.bindingRootIndex;return e===-1&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function U8(i){return Nt.lFrame.bindingIndex=i}function jg(){return Nt.lFrame.bindingIndex++}function L2(i){let e=Nt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function F8(){return Nt.lFrame.inI18n}function P8(i,e){let t=Nt.lFrame;t.bindingIndex=t.bindingRootIndex=i,gx(e)}function O8(){return Nt.lFrame.currentDirectiveIndex}function gx(i){Nt.lFrame.currentDirectiveIndex=i}function N8(i){let e=Nt.lFrame.currentDirectiveIndex;return e===-1?null:i[e]}function k2(){return Nt.lFrame.currentQueryIndex}function E1(i){Nt.lFrame.currentQueryIndex=i}function L8(i){let e=i[Pt];return e.type===2?e.declTNode:e.type===1?i[Ur]:null}function B2(i,e,t){if(t&Wt.SkipSelf){let r=e,o=i;for(;r=r.parent,r===null&&!(t&Wt.Host);)if(r=L8(o),r===null||(o=o[Hu],r.type&10))break;if(r===null)return!1;e=r,i=o}let n=Nt.lFrame=V2();return n.currentTNode=e,n.lView=i,!0}function S1(i){let e=V2(),t=i[Pt];Nt.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function V2(){let i=Nt.lFrame,e=i===null?null:i.child;return e===null?z2(i):e}function z2(i){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return i!==null&&(i.child=e),e}function H2(){let i=Nt.lFrame;return Nt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}var j2=H2;function C1(){let i=H2();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function k8(i){return(Nt.lFrame.contextLView=M8(i,Nt.lFrame.contextLView))[Qo]}function El(){return Nt.lFrame.selectedIndex}function vl(i){Nt.lFrame.selectedIndex=i}function A1(){let i=Nt.lFrame;return T2(i.tView,i.selectedIndex)}function Gg(){Nt.lFrame.currentNamespace=C2}function G2(){B8()}function B8(){Nt.lFrame.currentNamespace=null}function W2(){return Nt.lFrame.currentNamespace}var $2=!0;function Wg(){return $2}function yc(i){$2=i}function V8(i,e,t){let{ngOnChanges:n,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(n){let s=b2(e);(t.preOrderHooks??=[]).push(i,s),(t.preOrderCheckHooks??=[]).push(i,s)}r&&(t.preOrderHooks??=[]).push(0-i,r),o&&((t.preOrderHooks??=[]).push(i,o),(t.preOrderCheckHooks??=[]).push(i,o))}function $g(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){let o=i.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(i.contentHooks??=[]).push(-t,s),a&&((i.contentHooks??=[]).push(t,a),(i.contentCheckHooks??=[]).push(t,a)),c&&(i.viewHooks??=[]).push(-t,c),u&&((i.viewHooks??=[]).push(t,u),(i.viewCheckHooks??=[]).push(t,u)),f!=null&&(i.destroyHooks??=[]).push(t,f)}}function ag(i,e,t){q2(i,e,3,t)}function cg(i,e,t,n){(i[Dt]&3)===t&&q2(i,e,t,n)}function qw(i,e){let t=i[Dt];(t&3)===e&&(t&=16383,t+=1,i[Dt]=t)}function q2(i,e,t,n){let r=n!==void 0?i[Ru]&65535:0,o=n??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],n!=null&&a>=n)break}else e[c]<0&&(i[Ru]+=65536),(a<o||o==-1)&&(z8(i,t,e,c),i[Ru]=(i[Ru]&4294901760)+c+2),c++}function vI(i,e){As(4,i,e);let t=hn(null);try{e.call(i)}finally{hn(t),As(5,i,e)}}function z8(i,e,t,n){let r=t[n]<0,o=t[n+1],s=r?-t[n]:t[n],a=i[s];r?i[Dt]>>14<i[Ru]>>16&&(i[Dt]&3)===e&&(i[Dt]+=16384,vI(a,o)):vI(a,o)}var Pu=-1,_l=class{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}};function H8(i){return i instanceof _l}function j8(i){return(i.flags&8)!==0}function G8(i){return(i.flags&16)!==0}var Xw={},yx=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){n=kg(n);let r=this.injector.get(e,Xw,n);return r!==Xw||t===Xw?r:this.parentInjector.get(e,t,n)}};function X2(i){return i!==Pu}function _g(i){return i&32767}function W8(i){return i>>16}function wg(i,e){let t=W8(i),n=e;for(;t>0;)n=n[Hu],t--;return n}var vx=!0;function xg(i){let e=vx;return vx=i,e}var $8=256,Y2=$8-1,Z2=5,q8=0,Ts={};function X8(i,e,t){let n;typeof t=="string"?n=t.charCodeAt(0)||0:t.hasOwnProperty(Uf)&&(n=t[Uf]),n==null&&(n=t[Uf]=q8++);let r=n&Y2,o=1<<r;e.data[i+(r>>Z2)]|=o}function Mg(i,e){let t=K2(i,e);if(t!==-1)return t;let n=e[Pt];n.firstCreatePass&&(i.injectorIndex=e.length,Yw(n.data,i),Yw(e,null),Yw(n.blueprint,null));let r=T1(i,e),o=i.injectorIndex;if(X2(r)){let s=_g(r),a=wg(r,e),c=a[Pt].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=r,o}function Yw(i,e){i.push(0,0,0,0,0,0,0,0,e)}function K2(i,e){return i.injectorIndex===-1||i.parent&&i.parent.injectorIndex===i.injectorIndex||e[i.injectorIndex+8]===null?-1:i.injectorIndex}function T1(i,e){if(i.parent&&i.parent.injectorIndex!==-1)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;r!==null;){if(n=nR(r),n===null)return Pu;if(t++,r=r[Hu],n.injectorIndex!==-1)return n.injectorIndex|t<<16}return Pu}function _x(i,e,t){X8(i,e,t)}function Y8(i,e){if(e==="class")return i.classes;if(e==="style")return i.styles;let t=i.attrs;if(t){let n=t.length,r=0;for(;r<n;){let o=t[r];if(a2(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<n&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function J2(i,e,t){if(t&Wt.Optional||i!==void 0)return i;f1(e,"NodeInjector")}function Q2(i,e,t,n){if(t&Wt.Optional&&n===void 0&&(n=null),!(t&(Wt.Self|Wt.Host))){let r=i[Lu],o=Cr(void 0);try{return r?r.get(e,n,t&Wt.Optional):e2(e,n,t&Wt.Optional)}finally{Cr(o)}}return J2(n,e,t)}function eR(i,e,t,n=Wt.Default,r){if(i!==null){if(e[Dt]&2048&&!(n&Wt.Self)){let s=Q8(i,e,t,n,Ts);if(s!==Ts)return s}let o=tR(i,e,t,n,Ts);if(o!==Ts)return o}return Q2(e,t,n,r)}function tR(i,e,t,n,r){let o=K8(t);if(typeof o=="function"){if(!B2(e,i,n))return n&Wt.Host?J2(r,t,n):Q2(e,t,n,r);try{let s;if(s=o(n),s==null&&!(n&Wt.Optional))f1(t);else return s}finally{j2()}}else if(typeof o=="number"){let s=null,a=K2(i,e),c=Pu,u=n&Wt.Host?e[Dr][Ur]:null;for((a===-1||n&Wt.SkipSelf)&&(c=a===-1?T1(i,e):e[a+8],c===Pu||!wI(n,!1)?a=-1:(s=e[Pt],a=_g(c),e=wg(c,e)));a!==-1;){let f=e[Pt];if(_I(o,a,f.data)){let h=Z8(a,e,t,s,n,u);if(h!==Ts)return h}c=e[a+8],c!==Pu&&wI(n,e[Pt].data[a+8]===u)&&_I(o,a,e)?(s=f,a=_g(c),e=wg(c,e)):a=-1}}return r}function Z8(i,e,t,n,r,o){let s=e[Pt],a=s.data[i+8],c=n==null?qf(a)&&vx:n!=s&&(a.type&3)!==0,u=r&Wt.Host&&o===a,f=lg(a,s,t,c,u);return f!==null?wl(e,s,f,a):Ts}function lg(i,e,t,n,r){let o=i.providerIndexes,s=e.data,a=o&1048575,c=i.directiveStart,u=i.directiveEnd,f=o>>20,h=n?a:a+f,p=r?a+f:u;for(let g=h;g<p;g++){let y=s[g];if(g<c&&t===y||g>=c&&y.type===t)return g}if(r){let g=s[c];if(g&&uc(g)&&g.type===t)return c}return null}function wl(i,e,t,n){let r=i[t],o=e.data;if(H8(r)){let s=r;s.resolving&&Cj(Sj(o[t]));let a=xg(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Cr(s.injectImpl):null,f=B2(i,n,Wt.Default);try{r=i[t]=s.factory(void 0,o,i,n),e.firstCreatePass&&t>=n.directiveStart&&V8(t,o[t],e)}finally{u!==null&&Cr(u),xg(a),s.resolving=!1,j2()}}return r}function K8(i){if(typeof i=="string")return i.charCodeAt(0)||0;let e=i.hasOwnProperty(Uf)?i[Uf]:void 0;return typeof e=="number"?e>=0?e&Y2:J8:e}function _I(i,e,t){let n=1<<i;return!!(t[e+(i>>Z2)]&n)}function wI(i,e){return!(i&Wt.Self)&&!(i&Wt.Host&&e)}var fl=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return eR(this._tNode,this._lView,e,kg(n),t)}};function J8(){return new fl(Ki(),Kt())}function vc(i){return Gf(()=>{let e=i.prototype.constructor,t=e[dg]||wx(e),n=Object.prototype,r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){let o=r[dg]||wx(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function wx(i){return XI(i)?()=>{let e=wx(lr(i));return e&&e()}:hl(i)}function Q8(i,e,t,n,r){let o=i,s=e;for(;o!==null&&s!==null&&s[Dt]&2048&&!(s[Dt]&512);){let a=tR(o,s,t,n|Wt.Self,Ts);if(a!==Ts)return a;let c=o.parent;if(!c){let u=s[w2];if(u){let f=u.get(t,Ts,n);if(f!==Ts)return f}c=nR(s),s=s[Hu]}o=c}return r}function nR(i){let e=i[Pt],t=e.type;return t===2?e.declTNode:t===1?i[Ur]:null}function D1(i){return Y8(Ki(),i)}function xI(i,e=null,t=null,n){let r=iR(i,e,t,n);return r.resolveInjectorInitializers(),r}function iR(i,e=null,t=null,n,r=new Set){let o=[t||ur,i8(i)];return n=n||(typeof i=="object"?void 0:dr(i)),new Nf(o,e||_1(),n||null,r)}var dl=class dl{static create(e,t){if(Array.isArray(e))return xI({name:""},t,e,"");{let n=e.name??"";return xI({name:n},e.parent,e.providers,n)}}};dl.THROW_IF_NOT_FOUND=Pf,dl.NULL=new pg,dl.\u0275prov=Be({token:dl,providedIn:"any",factory:()=>Xe(r2)}),dl.__NG_ELEMENT_ID__=-1;var Us=dl;var eG=new ct("");eG.__NG_ELEMENT_ID__=i=>{let e=Ki();if(e===null)throw new Ne(204,!1);if(e.type&2)return e.value;if(i&Wt.Optional)return null;throw new Ne(204,!1)};var tG="ngOriginalError";function Zw(i){return i[tG]}var rR=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nG,e.__NG_ENV_ID__=n=>n;let i=e;return i})(),xx=class extends rR{constructor(e){super(),this._lView=e}onDestroy(e){return U2(this._lView,e),()=>b8(this._lView,e)}};function nG(){return new xx(Kt())}var ya=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ai(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=Be({token:e,providedIn:"root",factory:()=>new e});let i=e;return i})();var Mx=class extends ni{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,p8()&&(this.destroyRef=Ue(rR,{optional:!0})??void 0,this.pendingTasks=Ue(ya,{optional:!0})??void 0)}emit(e){let t=hn(null);try{super.next(e)}finally{hn(t)}}subscribe(e,t,n){let r=e,o=t||(()=>null),s=n;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof fi&&e.add(a),a}wrapInTimeout(e){return t=>{let n=this.pendingTasks?.add();setTimeout(()=>{e(t),n!==void 0&&this.pendingTasks?.remove(n)})}}},_n=Mx;function bg(...i){}function oR(i){let e,t;function n(){i=bg;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{i(),n()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{i(),n()})),()=>n()}function MI(i){return queueMicrotask(()=>i()),()=>{i=bg}}var kn=class i{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),typeof Zone>"u")throw new Ne(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.callbackScheduled=!1,oG(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!i.isInAngularZone())throw new Ne(909,!1)}static assertNotInAngularZone(){if(i.isInAngularZone())throw new Ne(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,iG,bg,bg);try{return o.runTask(s,t,n)}finally{o.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}},iG={};function I1(i){if(i._nesting==0&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function rG(i){i.isCheckStableRunning||i.callbackScheduled||(i.callbackScheduled=!0,Zone.root.run(()=>{oR(()=>{i.callbackScheduled=!1,bx(i),i.isCheckStableRunning=!0,I1(i),i.isCheckStableRunning=!1})}),bx(i))}function oG(i){let e=()=>{rG(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,o,s,a)=>{if(sG(a))return t.invokeTask(r,o,s,a);try{return bI(i),t.invokeTask(r,o,s,a)}finally{(i.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||i.shouldCoalesceRunChangeDetection)&&e(),EI(i)}},onInvoke:(t,n,r,o,s,a,c)=>{try{return bI(i),t.invoke(r,o,s,a,c)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!aG(a)&&e(),EI(i)}},onHasTask:(t,n,r,o)=>{t.hasTask(r,o),n===r&&(o.change=="microTask"?(i._hasPendingMicrotasks=o.microTask,bx(i),I1(i)):o.change=="macroTask"&&(i.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,n,r,o)=>(t.handleError(r,o),i.runOutsideAngular(()=>i.onError.emit(o)),!1)})}function bx(i){i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&i.callbackScheduled===!0?i.hasPendingMicrotasks=!0:i.hasPendingMicrotasks=!1}function bI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function EI(i){i._nesting--,I1(i)}var Ex=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}};function sG(i){return sR(i,"__ignore_ng_zone__")}function aG(i){return sR(i,"__scheduler_tick__")}function sR(i,e){return!Array.isArray(i)||i.length!==1?!1:i[0]?.data?.[e]===!0}var dc=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Zw(e);for(;t&&Zw(t);)t=Zw(t);return t||null}},cG=new ct("",{providedIn:"root",factory:()=>{let i=Ue(kn),e=Ue(dc);return t=>i.runOutsideAngular(()=>e.handleError(t))}});function lG(){return Gu(Ki(),Kt())}function Gu(i,e){return new on(Kr(i,e))}var on=(()=>{let e=class e{constructor(n){this.nativeElement=n}};e.__NG_ELEMENT_ID__=lG;let i=e;return i})();function uG(i){return i instanceof on?i.nativeElement:i}function dG(){return this._results[Symbol.iterator]()}var Sx=class i{get changes(){return this._changes??=new _n}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=i.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=dG)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let n=Lj(e);(this._changesDetected=!Nj(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},fG="ngSkipHydration",hG="ngskiphydration";function aR(i){let e=i.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let n=e[t];if(typeof n=="number")return!1;if(typeof n=="string"&&n.toLowerCase()===hG)return!0}return!1}function cR(i){return i.hasAttribute(fG)}function Eg(i){return(i.flags&128)===128}function pG(i){if(Eg(i))return!0;let e=i.parent;for(;e;){if(Eg(i)||aR(e))return!0;e=e.parent}return!1}var lR=new Map,mG=0;function gG(){return mG++}function yG(i){lR.set(i[Vg],i)}function vG(i){lR.delete(i[Vg])}var SI="__ngContext__";function fc(i,e){Ds(e)?(i[SI]=e[Vg],yG(e)):i[SI]=e}function uR(i){return fR(i[Lf])}function dR(i){return fR(i[Ko])}function fR(i){for(;i!==null&&!Fs(i);)i=i[Ko];return i}var Cx;function hR(i){Cx=i}function Yf(){if(Cx!==void 0)return Cx;if(typeof document<"u")return document;throw new Ne(210,!1)}var qg=new ct("",{providedIn:"root",factory:()=>_G}),_G="ng",R1=new ct(""),Jr=new ct("",{providedIn:"platform",factory:()=>"unknown"});var U1=new ct(""),F1=new ct("",{providedIn:"root",factory:()=>Yf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function wG(){let i=new Wu;return Ue(Jr)==="browser"&&(i.store=xG(Yf(),Ue(qg))),i}var Wu=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=Be({token:e,providedIn:"root",factory:wG});let i=e;return i})();function xG(i,e){let t=i.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(n){console.warn("Exception while restoring TransferState for app "+e,n)}return{}}var pR="h",mR="b",Ax=function(i){return i.FirstChild="f",i.NextSibling="n",i}(Ax||{}),MG="e",bG="t",P1="c",gR="x",Sg="r",EG="i",SG="n",yR="d";var CG="__nghData__",vR=CG,Kw="ngh",AG="nghm",_R=()=>null;function TG(i,e,t=!1){let n=i.getAttribute(Kw);if(n==null)return null;let[r,o]=n.split("|");if(n=t?o:r,!n)return null;let s=o?`|${o}`:"",a=t?r:s,c={};if(n!==""){let f=e.get(Wu,null,{optional:!0});f!==null&&(c=f.get(vR,[])[Number(n)])}let u={data:c,firstChild:i.firstChild??null};return t&&(u.firstChild=i,Xg(u,0,i.nextSibling)),a?i.setAttribute(Kw,a):i.removeAttribute(Kw),u}function DG(){_R=TG}function O1(i,e,t=!1){return _R(i,e,t)}function IG(i){let e=i._lView;return e[Pt].type===2?null:(vg(e)&&(e=e[pi]),e)}function RG(i){return i.textContent?.replace(/\s/gm,"")}function UG(i){let e=Yf(),t=e.createNodeIterator(i,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=RG(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),n,r=[];for(;n=t.nextNode();)r.push(n);for(let o of r)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Xg(i,e,t){i.segmentHeads??={},i.segmentHeads[e]=t}function Tx(i,e){return i.segmentHeads?.[e]??null}function FG(i,e){let t=i.data,n=t[MG]?.[e]??null;return n===null&&t[P1]?.[e]&&(n=N1(i,e)),n}function wR(i,e){return i.data[P1]?.[e]??null}function N1(i,e){let t=wR(i,e)??[],n=0;for(let r of t)n+=r[Sg]*(r[gR]??1);return n}function PG(i){if(typeof i.disconnectedNodes>"u"){let e=i.data[yR];i.disconnectedNodes=e?new Set(e):null}return i.disconnectedNodes}function Yg(i,e){if(typeof i.disconnectedNodes>"u"){let t=i.data[yR];i.disconnectedNodes=t?new Set(t):null}return!!PG(i)?.has(e)}var Jm=new ct(""),xR=!1,MR=new ct("",{providedIn:"root",factory:()=>xR});var Qm;function OG(){if(Qm===void 0&&(Qm=null,Ff.trustedTypes))try{Qm=Ff.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Qm}function Zg(i){return OG()?.createHTML(i)||i}var eg;function bR(){if(eg===void 0&&(eg=null,Ff.trustedTypes))try{eg=Ff.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return eg}function CI(i){return bR()?.createHTML(i)||i}function AI(i){return bR()?.createScriptURL(i)||i}var pa=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$I})`}},Dx=class extends pa{getTypeName(){return"HTML"}},Ix=class extends pa{getTypeName(){return"Style"}},Rx=class extends pa{getTypeName(){return"Script"}},Ux=class extends pa{getTypeName(){return"URL"}},Fx=class extends pa{getTypeName(){return"ResourceURL"}};function Eo(i){return i instanceof pa?i.changingThisBreaksApplicationSecurity:i}function va(i,e){let t=NG(i);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${$I})`)}return t===e}function NG(i){return i instanceof pa&&i.getTypeName()||null}function ER(i){return new Dx(i)}function SR(i){return new Ix(i)}function CR(i){return new Rx(i)}function AR(i){return new Ux(i)}function TR(i){return new Fx(i)}function LG(i){let e=new Ox(i);return kG()?new Px(e):e}var Px=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Zg(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Ox=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Zg(e),t}};function kG(){try{return!!new window.DOMParser().parseFromString(Zg(""),"text/html")}catch{return!1}}var BG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Kg(i){return i=String(i),i.match(BG)?i:"unsafe:"+i}function _a(i){let e={};for(let t of i.split(","))e[t]=!0;return e}function Zf(...i){let e={};for(let t of i)for(let n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}var DR=_a("area,br,col,hr,img,wbr"),IR=_a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),RR=_a("rp,rt"),VG=Zf(RR,IR),zG=Zf(IR,_a("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),HG=Zf(RR,_a("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),TI=Zf(DR,zG,HG,VG),UR=_a("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jG=_a("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),GG=_a("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),WG=Zf(UR,jG,GG),$G=_a("script,style,template"),Nx=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild){r.push(t),t=YG(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=XG(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=DI(e).toLowerCase();if(!TI.hasOwnProperty(t))return this.sanitizedSomething=!0,!$G.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let n=e.attributes;for(let r=0;r<n.length;r++){let o=n.item(r),s=o.name,a=s.toLowerCase();if(!WG.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;UR[a]&&(c=Kg(c)),this.buf.push(" ",s,'="',II(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=DI(e).toLowerCase();TI.hasOwnProperty(t)&&!DR.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(II(e))}};function qG(i,e){return(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function XG(i){let e=i.nextSibling;if(e&&i!==e.previousSibling)throw FR(e);return e}function YG(i){let e=i.firstChild;if(e&&qG(i,e))throw FR(e);return e}function DI(i){let e=i.nodeName;return typeof e=="string"?e:"FORM"}function FR(i){return new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`)}var ZG=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,KG=/([^\#-~ |!])/g;function II(i){return i.replace(/&/g,"&amp;").replace(ZG,function(e){let t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+((t-55296)*1024+(n-56320)+65536)+";"}).replace(KG,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var tg;function L1(i,e){let t=null;try{tg=tg||LG(i);let n=e?String(e):"";t=tg.getInertBodyElement(n);let r=5,o=n;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,n=o,o=t.innerHTML,t=tg.getInertBodyElement(n)}while(n!==o);let a=new Nx().sanitizeChildren(RI(t)||t);return Zg(a)}finally{if(t){let n=RI(t)||t;for(;n.firstChild;)n.firstChild.remove()}}}function RI(i){return"content"in i&&JG(i)?i.content:null}function JG(i){return i.nodeType===Node.ELEMENT_NODE&&i.nodeName==="TEMPLATE"}var is=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(is||{});function PR(i){let e=k1();return e?CI(e.sanitize(is.HTML,i)||""):va(i,"HTML")?CI(Eo(i)):L1(Yf(),Wf(i))}function Gi(i){let e=k1();return e?e.sanitize(is.URL,i)||"":va(i,"URL")?Eo(i):Kg(Wf(i))}function QG(i){let e=k1();if(e)return AI(e.sanitize(is.RESOURCE_URL,i)||"");if(va(i,"ResourceURL"))return AI(Eo(i));throw new Ne(904,!1)}function e6(i,e){return e==="src"&&(i==="embed"||i==="frame"||i==="iframe"||i==="media"||i==="script")||e==="href"&&(i==="base"||i==="link")?QG:Gi}function OR(i,e,t){return e6(e,t)(i)}function k1(){let i=Kt();return i&&i[Rs].sanitizer}var t6=/^>|^->|<!--|-->|--!>|<!-$/g,n6=/(<|>)/g,i6="\u200B$1\u200B";function r6(i){return i.replace(t6,e=>e.replace(n6,i6))}function Kf(i){return i.ownerDocument.defaultView}function fr(i){return i.ownerDocument}function o6(i){return i.ownerDocument.body}function NR(i){return i instanceof Function?i():i}function ng(i){return(i??Ue(Us)).get(Jr)==="browser"}var ma=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(ma||{}),s6;function B1(i,e){return s6(i,e)}function Uu(i,e,t,n,r){if(n!=null){let o,s=!1;Fs(n)?o=n:Ds(n)&&(s=!0,n=n[Yr]);let a=es(n);i===0&&t!==null?r==null?jR(e,t,a):Cg(e,t,a,r||null,!0):i===1&&t!==null?Cg(e,t,a,r||null,!0):i===2?H1(e,a,s):i===3&&e.destroyNode(a),o!=null&&_6(e,i,o,t,r)}}function LR(i,e){return i.createText(e)}function a6(i,e,t){i.setValue(e,t)}function kR(i,e){return i.createComment(r6(e))}function V1(i,e,t){return i.createElement(e,t)}function c6(i,e){BR(i,e),e[Yr]=null,e[Ur]=null}function l6(i,e,t,n,r,o){n[Yr]=r,n[Ur]=e,Qg(i,n,t,1,r,o)}function BR(i,e){e[Rs].changeDetectionScheduler?.notify(8),Qg(i,e,e[On],2,null,null)}function u6(i){let e=i[Lf];if(!e)return Jw(i[Pt],i);for(;e;){let t=null;if(Ds(e))t=e[Lf];else{let n=e[Ar];n&&(t=n)}if(!t){for(;e&&!e[Ko]&&e!==i;)Ds(e)&&Jw(e[Pt],e),e=e[ji];e===null&&(e=i),Ds(e)&&Jw(e[Pt],e),t=e&&e[Ko]}e=t}}function d6(i,e,t,n){let r=Ar+n,o=t.length;n>0&&(t[r-1][Ko]=e),n<o-Ar?(e[Ko]=t[r],i2(t,Ar+n,e)):(t.push(e),e[Ko]=null),e[ji]=t;let s=e[gl];s!==null&&t!==s&&VR(s,e);let a=e[fa];a!==null&&a.insertView(i),mx(e),e[Dt]|=128}function VR(i,e){let t=i[ku],n=e[ji];if(Ds(n))i[Dt]|=yg.HasTransplantedViews;else{let r=n[ji][Dr];e[Dr]!==r&&(i[Dt]|=yg.HasTransplantedViews)}t===null?i[ku]=[e]:t.push(e)}function z1(i,e){let t=i[ku],n=t.indexOf(e);t.splice(n,1)}function Lx(i,e){if(i.length<=Ar)return;let t=Ar+e,n=i[t];if(n){let r=n[gl];r!==null&&r!==i&&z1(r,n),e>0&&(i[t-1][Ko]=n[Ko]);let o=hg(i,Ar+e);c6(n[Pt],n);let s=o[fa];s!==null&&s.detachView(o[Pt]),n[ji]=null,n[Ko]=null,n[Dt]&=-129}return n}function zR(i,e){if(!(e[Dt]&256)){let t=e[On];t.destroyNode&&Qg(i,e,t,3,null,null),u6(e)}}function Jw(i,e){if(e[Dt]&256)return;let t=hn(null);try{e[Dt]&=-129,e[Dt]|=256,e[bo]&&Sw(e[bo]),h6(i,e),f6(i,e),e[Pt].type===1&&e[On].destroy();let n=e[gl];if(n!==null&&Fs(e[ji])){n!==e[ji]&&z1(n,e);let r=e[fa];r!==null&&r.detachView(i)}vG(e)}finally{hn(t)}}function f6(i,e){let t=i.cleanup,n=e[mg];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?n[s]():n[-s].unsubscribe(),o+=2}else{let s=n[t[o+1]];t[o].call(s)}n!==null&&(e[mg]=null);let r=e[cc];if(r!==null){e[cc]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function h6(i,e){let t;if(i!=null&&(t=i.destroyHooks)!=null)for(let n=0;n<t.length;n+=2){let r=e[t[n]];if(!(r instanceof _l)){let o=t[n+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];As(4,a,c);try{c.call(a)}finally{As(5,a,c)}}else{As(4,r,o);try{o.call(r)}finally{As(5,r,o)}}}}}function HR(i,e,t){return p6(i,e.parent,t)}function p6(i,e,t){let n=e;for(;n!==null&&n.type&168;)e=n,n=e.parent;if(n===null)return t[Yr];{let{componentOffset:r}=n;if(r>-1){let{encapsulation:o}=i.data[n.directiveStart+r];if(o===Is.None||o===Is.Emulated)return null}return Kr(n,t)}}function Cg(i,e,t,n,r){i.insertBefore(e,t,n,r)}function jR(i,e,t){i.appendChild(e,t)}function UI(i,e,t,n,r){n!==null?Cg(i,e,t,n,r):jR(i,e,t)}function GR(i,e){return i.parentNode(e)}function m6(i,e){return i.nextSibling(e)}function WR(i,e,t){return y6(i,e,t)}function g6(i,e,t){return i.type&40?Kr(i,t):null}var y6=g6,FI;function Jg(i,e,t,n){let r=HR(i,n,e),o=e[On],s=n.parent||e[Ur],a=WR(s,n,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)UI(o,r,t[c],a,!1);else UI(o,r,t,a,!1);FI!==void 0&&FI(o,n,e,t,r)}function Rf(i,e){if(e!==null){let t=e.type;if(t&3)return Kr(e,i);if(t&4)return kx(-1,i[e.index]);if(t&8){let n=e.child;if(n!==null)return Rf(i,n);{let r=i[e.index];return Fs(r)?kx(-1,r):es(r)}}else{if(t&128)return Rf(i,e.next);if(t&32)return B1(e,i)()||es(i[e.index]);{let n=$R(i,e);if(n!==null){if(Array.isArray(n))return n[0];let r=yl(i[Dr]);return Rf(r,n)}else return Rf(i,e.next)}}}return null}function $R(i,e){if(e!==null){let n=i[Dr][Ur],r=e.projection;return n.projection[r]}return null}function kx(i,e){let t=Ar+i+1;if(t<e.length){let n=e[t],r=n[Pt].firstChild;if(r!==null)return Rf(n,r)}return e[ha]}function H1(i,e,t){i.removeChild(null,e,t)}function qR(i){i.textContent=""}function j1(i,e,t,n,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=n[t.index],c=t.type;if(s&&e===0&&(a&&fc(es(a),n),t.flags|=2),(t.flags&32)!==32)if(c&8)j1(i,e,t.child,n,r,o,!1),Uu(e,i,r,a,o);else if(c&32){let u=B1(t,n),f;for(;f=u();)Uu(e,i,r,f,o);Uu(e,i,r,a,o)}else c&16?XR(i,e,n,t,r,o):Uu(e,i,r,a,o);t=s?t.projectionNext:t.next}}function Qg(i,e,t,n,r,o){j1(t,n,i.firstChild,e,r,o,!1)}function v6(i,e,t){let n=e[On],r=HR(i,t,e),o=t.parent||e[Ur],s=WR(o,t,e);XR(n,0,e,t,r,s)}function XR(i,e,t,n,r,o){let s=t[Dr],c=s[Ur].projection[n.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let f=c[u];Uu(e,i,r,f,o)}else{let u=c,f=s[ji];Eg(n)&&(u.flags|=128),j1(i,e,u,f,r,o,!0)}}function _6(i,e,t,n,r){let o=t[ha],s=es(t);o!==s&&Uu(e,i,n,o,r);for(let a=Ar;a<t.length;a++){let c=t[a];Qg(c[Pt],c,i,e,n,o)}}function w6(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let o=n.indexOf("-")===-1?void 0:ma.DashCase;r==null?i.removeStyle(t,n,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ma.Important),i.setStyle(t,n,r,o))}}function x6(i,e,t){i.setAttribute(e,"style",t)}function YR(i,e,t){t===""?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function ZR(i,e,t){let{mergedAttrs:n,classes:r,styles:o}=t;n!==null&&ux(i,e,n),r!==null&&YR(i,e,r),o!==null&&x6(i,e,o)}var Ps={};function de(i=1){KR(mi(),Kt(),El()+i,!1)}function KR(i,e,t,n){if(!n)if((e[Dt]&3)===3){let o=i.preOrderCheckHooks;o!==null&&ag(e,o,t)}else{let o=i.preOrderHooks;o!==null&&cg(e,o,0,t)}vl(t)}function fe(i,e=Wt.Default){let t=Kt();if(t===null)return Xe(i,e);let n=Ki();return eR(n,t,lr(i),e)}function JR(i,e,t,n,r,o){let s=hn(null);try{let a=null;r&lc.SignalBased&&(a=e[n][ua]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&lc.HasDecoratorInputTransform&&(o=i.inputTransforms[n].call(e,o)),i.setInput!==null?i.setInput(e,a,o,t,n):M2(e,a,n,o)}finally{hn(s)}}function M6(i,e){let t=i.hostBindingOpCodes;if(t!==null)try{for(let n=0;n<t.length;n++){let r=t[n];if(r<0)vl(~r);else{let o=r,s=t[++n],a=t[++n];P8(s,o);let c=e[o];a(2,c)}}}finally{vl(-1)}}function e0(i,e,t,n,r,o,s,a,c,u,f){let h=e.blueprint.slice();return h[Yr]=r,h[Dt]=n|4|128|8|64,(u!==null||i&&i[Dt]&2048)&&(h[Dt]|=2048),I2(h),h[ji]=h[Hu]=i,h[Qo]=t,h[Rs]=s||i&&i[Rs],h[On]=a||i&&i[On],h[Lu]=c||i&&i[Lu]||null,h[Ur]=o,h[Vg]=gG(),h[Jo]=f,h[w2]=u,h[Dr]=e.type==2?i[Dr]:h,h}function $u(i,e,t,n,r){let o=i.data[e];if(o===null)o=b6(i,e,t,n,r),F8()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=n,o.attrs=r;let s=I8();o.injectorIndex=s===null?-1:s.injectorIndex}return bl(o,!0),o}function b6(i,e,t,n,r){let o=O2(),s=M1(),a=s?o:o&&o.parent,c=i.data[e]=I6(i,a,t,e,n,r);return i.firstChild===null&&(i.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function QR(i,e,t,n){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function eU(i,e,t,n,r){let o=El(),s=n&2;try{vl(-1),s&&e.length>pi&&KR(i,e,pi,!1),As(s?2:0,r),t(n,r)}finally{vl(o),As(s?3:1,r)}}function G1(i,e,t){if(w1(e)){let n=hn(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=i.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{hn(n)}}}function W1(i,e,t){P2()&&(N6(i,e,t,Kr(t,e)),(t.flags&64)===64&&oU(i,e,t))}function $1(i,e,t=Kr){let n=e.localNames;if(n!==null){let r=e.index+1;for(let o=0;o<n.length;o+=2){let s=n[o+1],a=s===-1?t(e,i):i[s];i[r++]=a}}}function tU(i){let e=i.tView;return e===null||e.incompleteFirstPass?i.tView=q1(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):e}function q1(i,e,t,n,r,o,s,a,c,u,f){let h=pi+n,p=h+r,g=E6(h,p),y=typeof u=="function"?u():u;return g[Pt]={type:i,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:f}}function E6(i,e){let t=[];for(let n=0;n<e;n++)t.push(n<i?null:Ps);return t}function S6(i,e,t,n){let o=n.get(MR,xR)||t===Is.ShadowDom,s=i.selectRootElement(e,o);return C6(s),s}function C6(i){nU(i)}var nU=()=>null;function A6(i){cR(i)?qR(i):UG(i)}function T6(){nU=A6}function D6(i,e,t,n){let r=cU(e);r.push(t),i.firstCreatePass&&lU(i).push(n,r.length-1)}function I6(i,e,t,n,r,o){let s=e?e.injectorIndex:-1,a=0;return ju()&&(a|=128),{type:t,index:n,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function PI(i,e,t,n,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;n??={};let a,c=lc.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}i===0?OI(n,t,u,a,c):OI(n,t,u,a)}return n}function OI(i,e,t,n,r){let o;i.hasOwnProperty(t)?(o=i[t]).push(e,n):o=i[t]=[e,n],r!==void 0&&o.push(r)}function R6(i,e,t){let n=e.directiveStart,r=e.directiveEnd,o=i.data,s=e.attrs,a=[],c=null,u=null;for(let f=n;f<r;f++){let h=o[f],p=t?t.get(h):null,g=p?p.inputs:null,y=p?p.outputs:null;c=PI(0,h.inputs,f,c,g),u=PI(1,h.outputs,f,u,y);let x=c!==null&&s!==null&&!g1(e)?q6(c,f,s):null;a.push(x)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function U6(i){return i==="class"?"className":i==="for"?"htmlFor":i==="formaction"?"formAction":i==="innerHtml"?"innerHTML":i==="readonly"?"readOnly":i==="tabindex"?"tabIndex":i}function iU(i,e,t,n,r,o,s,a){let c=Kr(e,t),u=e.inputs,f;!a&&u!=null&&(f=u[n])?(Y1(i,t,f,n,r),qf(e)&&F6(t,e.index)):e.type&3?(n=U6(n),r=s!=null?s(r,e.value||"",n):r,o.setProperty(c,n,r)):e.type&12}function F6(i,e){let t=gc(e,i);t[Dt]&16||(t[Dt]|=64)}function X1(i,e,t,n){if(P2()){let r=n===null?null:{"":-1},o=k6(i,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&rU(i,e,t,s,r,a),r&&B6(t,n,r)}t.mergedAttrs=Of(t.mergedAttrs,t.attrs)}function rU(i,e,t,n,r,o){for(let u=0;u<n.length;u++)_x(Mg(t,e),i,n[u].type);z6(t,i.data.length,n.length);for(let u=0;u<n.length;u++){let f=n[u];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,c=QR(i,e,n.length,null);for(let u=0;u<n.length;u++){let f=n[u];t.mergedAttrs=Of(t.mergedAttrs,f.hostAttrs),H6(i,t,e,c,f),V6(c,f,r),f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let h=f.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((i.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}R6(i,t,o)}function P6(i,e,t,n,r){let o=r.hostBindings;if(o){let s=i.hostBindingOpCodes;s===null&&(s=i.hostBindingOpCodes=[]);let a=~e.index;O6(s)!=a&&s.push(a),s.push(t,n,o)}}function O6(i){let e=i.length;for(;e>0;){let t=i[--e];if(typeof t=="number"&&t<0)return t}return 0}function N6(i,e,t,n){let r=t.directiveStart,o=t.directiveEnd;qf(t)&&j6(e,t,i.data[r+t.componentOffset]),i.firstCreatePass||Mg(t,e),fc(n,e);let s=t.initialInputs;for(let a=r;a<o;a++){let c=i.data[a],u=wl(e,i,a,t);if(fc(u,e),s!==null&&$6(e,a-r,u,c,t,s),uc(c)){let f=gc(t.index,e);f[Qo]=wl(e,i,a,t)}}}function oU(i,e,t){let n=t.directiveStart,r=t.directiveEnd,o=t.index,s=O8();try{vl(o);for(let a=n;a<r;a++){let c=i.data[a],u=e[a];gx(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&L6(c,u)}}finally{vl(-1),gx(s)}}function L6(i,e){i.hostBindings!==null&&i.hostBindings(1,e)}function k6(i,e){let t=i.directiveRegistry,n=null,r=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(l2(e,s.selectors,!1))if(n||(n=[]),uc(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),n.unshift(...a,s);let c=a.length;Bx(i,e,c)}else n.unshift(s),Bx(i,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,n,r),n.push(s)}return n===null?null:[n,r]}function Bx(i,e,t){e.componentOffset=t,(i.components??=[]).push(e.index)}function B6(i,e,t){if(e){let n=i.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new Ne(-301,!1);n.push(e[r],o)}}}function V6(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;uc(e)&&(t[""]=i)}}function z6(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}function H6(i,e,t,n,r){i.data[n]=r;let o=r.factory||(r.factory=hl(r.type,!0)),s=new _l(o,uc(r),fe);i.blueprint[n]=s,t[n]=s,P6(i,e,n,QR(i,t,r.hostVars,Ps),r)}function j6(i,e,t){let n=Kr(e,i),r=tU(t),o=i[Rs].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=t0(i,e0(i,r,null,s,n,e,null,o.createRenderer(n,t),null,null,null));i[e.index]=a}function G6(i,e,t,n,r,o){let s=Kr(i,e);W6(e[On],s,o,i.value,t,n,r)}function W6(i,e,t,n,r,o,s){if(o==null)i.removeAttribute(e,r,t);else{let a=s==null?Wf(o):s(o,n||"",r);i.setAttribute(e,r,a,t)}}function $6(i,e,t,n,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],f=s[a++],h=s[a++];JR(n,t,c,u,f,h)}}function q6(i,e,t){let n=null,r=0;for(;r<t.length;){let o=t[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(i.hasOwnProperty(o)){n===null&&(n=[]);let s=i[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){n.push(o,s[a+1],s[a+2],t[r+1]);break}}r+=2}return n}function sU(i,e,t,n){return[i,!0,0,e,null,n,null,t,null,null]}function aU(i,e){let t=i.contentQueries;if(t!==null){let n=hn(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=i.data[s];E1(o),a.contentQueries(2,e[s],s)}}}finally{hn(n)}}}function t0(i,e){return i[Lf]?i[mI][Ko]=e:i[Lf]=e,i[mI]=e,e}function Vx(i,e,t){E1(0);let n=hn(null);try{e(i,t)}finally{hn(n)}}function cU(i){return i[mg]??=[]}function lU(i){return i.cleanup??=[]}function uU(i,e){let t=i[Lu],n=t?t.get(dc,null):null;n&&n.handleError(e)}function Y1(i,e,t,n,r){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],u=e[s],f=i.data[s];JR(f,u,n,a,c,r)}}function X6(i,e,t){let n=A2(e,i);a6(i[On],n,t)}function Y6(i,e){let t=gc(e,i),n=t[Pt];Z6(n,t);let r=t[Yr];r!==null&&t[Jo]===null&&(t[Jo]=O1(r,t[Lu])),Z1(n,t,t[Qo])}function Z6(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])}function Z1(i,e,t){S1(e);try{let n=i.viewQuery;n!==null&&Vx(1,n,t);let r=i.template;r!==null&&eU(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),e[fa]?.finishViewCreation(i),i.staticContentQueries&&aU(i,e),i.staticViewQueries&&Vx(2,i.viewQuery,t);let o=i.components;o!==null&&K6(e,o)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[Dt]&=-5,C1()}}function K6(i,e){for(let t=0;t<e.length;t++)Y6(i,e[t])}function dU(i,e,t,n){let r=hn(null);try{let o=e.tView,a=i[Dt]&4096?4096:16,c=e0(i,o,t,a,null,e,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),u=i[e.index];c[gl]=u;let f=i[fa];return f!==null&&(c[fa]=f.createEmbeddedView(o)),Z1(o,c,t),c}finally{hn(r)}}function zx(i,e){return!e||e.firstChild===null||Eg(i)}function fU(i,e,t,n=!0){let r=e[Pt];if(d6(r,e,i,t),n){let s=kx(t,i),a=e[On],c=GR(a,i[ha]);c!==null&&l6(r,i[Ur],a,e,c,s)}let o=e[Jo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ag(i,e,t,n,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&n.push(es(o)),Fs(o)&&J6(o,n);let s=t.type;if(s&8)Ag(i,e,t.child,n);else if(s&32){let a=B1(t,e),c;for(;c=a();)n.push(c)}else if(s&16){let a=$R(e,t);if(Array.isArray(a))n.push(...a);else{let c=yl(e[Dr]);Ag(c[Pt],c,a,n,!0)}}t=r?t.projectionNext:t.next}return n}function J6(i,e){for(let t=Ar;t<i.length;t++){let n=i[t],r=n[Pt].firstChild;r!==null&&Ag(n[Pt],n,r,e)}i[ha]!==i[Yr]&&e.push(i[ha])}var hU=[];function Q6(i){return i[bo]??eW(i)}function eW(i){let e=hU.pop()??Object.create(nW);return e.lView=i,e}function tW(i){i.lView[bo]!==i&&(i.lView=null,hU.push(i))}var nW=Zt(ze({},Af),{consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Hg(i.lView)},consumerOnSignalRead(){this.lView[bo]=this}});function iW(i){let e=i[bo]??Object.create(rW);return e.lView=i,e}var rW=Zt(ze({},Af),{consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{let e=yl(i.lView);for(;e&&!pU(e[Pt]);)e=yl(e);e&&R2(e)},consumerOnSignalRead(){this.lView[bo]=this}});function pU(i){return i.type!==2}var oW=100;function mU(i,e=!0,t=0){let n=i[Rs],r=n.rendererFactory,o=!1;o||r.begin?.();try{sW(i,t)}catch(s){throw e&&uU(i,s),s}finally{o||(r.end?.(),n.inlineEffectRunner?.flush())}}function sW(i,e){let t=N2();try{yI(!0),Hx(i,e);let n=0;for(;Bf(i);){if(n===oW)throw new Ne(103,!1);n++,Hx(i,1)}}finally{yI(t)}}function aW(i,e,t,n){let r=e[Dt];if((r&256)===256)return;let o=!1,s=!1;!o&&e[Rs].inlineEffectRunner?.flush(),S1(e);let a=!0,c=null,u=null;o||(pU(i)?(u=Q6(e),c=Em(u)):MD()===null?(a=!1,u=iW(e),c=Em(u)):e[bo]&&(Sw(e[bo]),e[bo]=null));try{I2(e),U8(i.bindingStartIndex),t!==null&&eU(i,e,t,2,n);let f=(r&3)===3;if(!o)if(f){let g=i.preOrderCheckHooks;g!==null&&ag(e,g,null)}else{let g=i.preOrderHooks;g!==null&&cg(e,g,0,null),qw(e,0)}if(s||cW(e),gU(e,0),i.contentQueries!==null&&aU(i,e),!o)if(f){let g=i.contentCheckHooks;g!==null&&ag(e,g)}else{let g=i.contentHooks;g!==null&&cg(e,g,1),qw(e,1)}M6(i,e);let h=i.components;h!==null&&vU(e,h,0);let p=i.viewQuery;if(p!==null&&Vx(2,p,n),!o)if(f){let g=i.viewCheckHooks;g!==null&&ag(e,g)}else{let g=i.viewHooks;g!==null&&cg(e,g,2),qw(e,2)}if(i.firstUpdatePass===!0&&(i.firstUpdatePass=!1),e[$w]){for(let g of e[$w])g();e[$w]=null}o||(e[Dt]&=-73)}catch(f){throw o||Hg(e),f}finally{u!==null&&(bw(u,c),a&&tW(u)),C1()}}function gU(i,e){for(let t=uR(i);t!==null;t=dR(t))for(let n=Ar;n<t.length;n++){let r=t[n];yU(r,e)}}function cW(i){for(let e=uR(i);e!==null;e=dR(e)){if(!(e[Dt]&yg.HasTransplantedViews))continue;let t=e[ku];for(let n=0;n<t.length;n++){let r=t[n];R2(r)}}}function lW(i,e,t){let n=gc(e,i);yU(n,t)}function yU(i,e){x1(i)&&Hx(i,e)}function Hx(i,e){let n=i[Pt],r=i[Dt],o=i[bo],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Ew(o)),s||=!1,o&&(o.dirty=!1),i[Dt]&=-9217,s)aW(n,i,n.template,i[Qo]);else if(r&8192){gU(i,1);let a=n.components;a!==null&&vU(i,a,1)}}function vU(i,e,t){for(let n=0;n<e.length;n++)lW(i,e[n],t)}function K1(i,e){let t=N2()?64:1088;for(i[Rs].changeDetectionScheduler?.notify(e);i;){i[Dt]|=t;let n=yl(i);if(vg(i)&&!n)return i;i=n}return null}var xl=class{get rootNodes(){let e=this._lView,t=e[Pt];return Ag(t,e,t.firstChild,[])}constructor(e,t,n=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qo]}set context(e){this._lView[Qo]=e}get destroyed(){return(this._lView[Dt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ji];if(Fs(e)){let t=e[gg],n=t?t.indexOf(this):-1;n>-1&&(Lx(e,n),hg(t,n))}this._attachedToViewContainer=!1}zR(this._lView[Pt],this._lView)}onDestroy(e){U2(this._lView,e)}markForCheck(){K1(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Dt]&=-129}reattach(){mx(this._lView),this._lView[Dt]|=128}detectChanges(){this._lView[Dt]|=1024,mU(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=vg(this._lView),t=this._lView[gl];t!==null&&!e&&z1(t,this._lView),BR(this._lView[Pt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ne(902,!1);this._appRef=e;let t=vg(this._lView),n=this._lView[gl];n!==null&&!t&&VR(n,this._lView),mx(this._lView)}},Zr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=fW;let i=e;return i})(),uW=Zr,dW=class extends uW{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,n){let r=dU(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:n});return new xl(r)}};function fW(){return n0(Ki(),Kt())}function n0(i,e){return i.type&4?new dW(e,i,Gu(i,e)):null}var hW=new RegExp(`^(\\d+)*(${mR}|${pR})*(.*)`);function pW(i){let e=i.match(hW),[t,n,r,o]=e,s=n?parseInt(n,10):r,a=[];for(let[c,u,f]of o.matchAll(/(f|n)(\d*)/g)){let h=parseInt(f,10)||1;a.push(u,h)}return[s,...a]}function mW(i){return!i.prev&&i.parent?.type===8}function Qw(i){return i.index-pi}function gW(i,e){let t=i.i18nNodes;if(t)return t.get(e)}function i0(i,e,t,n){let r=Qw(n),o=gW(i,r);if(o===void 0){let s=i.data[SG];if(s?.[r])o=vW(s[r],t);else if(e.firstChild===n)o=i.firstChild;else{let a=n.prev===null,c=n.prev??n.parent;if(mW(n)){let u=Qw(n.parent);o=Tx(i,u)}else{let u=Kr(c,t);if(a)o=u.firstChild;else{let f=Qw(c),h=Tx(i,f);if(c.type===2&&h){let g=N1(i,f)+1;o=r0(g,h)}else o=u.nextSibling}}}}return o}function r0(i,e){let t=e;for(let n=0;n<i;n++)t=t.nextSibling;return t}function yW(i,e){let t=i;for(let n=0;n<e.length;n+=2){let r=e[n],o=e[n+1];for(let s=0;s<o;s++)switch(r){case Ax.FirstChild:t=t.firstChild;break;case Ax.NextSibling:t=t.nextSibling;break}}return t}function vW(i,e){let[t,...n]=pW(i),r;if(t===pR)r=e[Dr][Yr];else if(t===mR)r=o6(e[Dr][Yr]);else{let o=Number(t);r=es(e[o+pi])}return yW(r,n)}var _W=!1;function wW(i){_W=i}function xW(i){let e=i[Jo];if(e){let{i18nNodes:t,dehydratedIcuData:n}=e;if(t&&n){let r=i[On];for(let o of n.values())MW(r,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function MW(i,e,t){for(let n of t.node.cases[t.case]){let r=e.get(n.index-pi);r&&H1(i,r,!1)}}function _U(i){let e=i[kf]??[],n=i[ji][On];for(let r of e)bW(r,n);i[kf]=ur}function bW(i,e){let t=0,n=i.firstChild;if(n){let r=i.data[Sg];for(;t<r;){let o=n.nextSibling;H1(e,n,!1),n=o,t++}}}function wU(i){_U(i);for(let e=Ar;e<i.length;e++)Tg(i[e])}function Tg(i){xW(i);let e=i[Pt];for(let t=pi;t<e.bindingStartIndex;t++)if(Fs(i[t])){let n=i[t];wU(n)}else Ds(i[t])&&Tg(i[t])}function EW(i){let e=i._views;for(let t of e){let n=IG(t);if(n!==null&&n[Yr]!==null)if(Ds(n))Tg(n);else{let r=n[Yr];Tg(r),wU(n)}}}function SW(i,e){let t=[];for(let n of e)for(let r=0;r<(n[gR]??1);r++){let o={data:n,firstChild:null};n[Sg]>0&&(o.firstChild=i,i=r0(n[Sg],i)),t.push(o)}return[i,t]}var xU=()=>null;function CW(i,e){let t=i[kf];return!e||t===null||t.length===0?null:t[0].data[EG]===e?t.shift():(_U(i),null)}function AW(){xU=CW}function jx(i,e){return xU(i,e)}var Vf=class{},MU=new ct("",{providedIn:"root",factory:()=>!1});var bU=new ct(""),Gx=class{},Dg=class{};function TW(i){let e=Error(`No component factory found for ${dr(i)}.`);return e[DW]=i,e}var DW="ngComponent";var Wx=class{resolveComponentFactory(e){throw TW(e)}},sM=class sM{};sM.NULL=new Wx;var Vu=sM,hc=class{},Ci=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>IW();let i=e;return i})();function IW(){let i=Kt(),e=Ki(),t=gc(e.index,i);return(Ds(t)?t:i)[On]}var RW=(()=>{let e=class e{};e.\u0275prov=Be({token:e,providedIn:"root",factory:()=>null});let i=e;return i})();var NI=new Set;function wa(i){NI.has(i)||(NI.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}var EU=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Be({token:e,providedIn:"root",factory:()=>new e});let i=e;return i})();function Ig(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=sx(r,a);else if(o==2){let c=a,u=e[++s];n=sx(n,c+": "+u+";")}}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}var Rg=class extends Vu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ml(e);return new zf(t,this.ngModule)}};function LI(i,e){let t=[];for(let n in i){if(!i.hasOwnProperty(n))continue;let r=i[n];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:lc.None;e?t.push({propName:s,templateName:n,isSignal:(a&lc.SignalBased)!==0}):t.push({propName:s,templateName:n})}return t}function UW(i){let e=i.toLowerCase();return e==="svg"?C2:e==="math"?_8:null}var zf=class extends Dg{get inputs(){let e=this.componentDef,t=e.inputTransforms,n=LI(e.inputs,!0);if(t!==null)for(let r of n)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return n}get outputs(){return LI(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Jj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,n,r){let o=hn(null);try{r=r||this.ngModule;let s=r instanceof Tr?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new yx(e,s):e,c=a.get(hc,null);if(c===null)throw new Ne(407,!1);let u=a.get(RW,null),f=a.get(EU,null),h=a.get(Vf,null),p={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:h},g=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",x=n?S6(g,n,this.componentDef.encapsulation,a):V1(g,y,UW(y)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let _=null;x!==null&&(_=O1(x,a,!0));let C=q1(0,null,null,1,0,null,null,null,null,null,null),M=e0(null,C,null,v,null,null,p,g,a,null,_);S1(M);let S,H;try{let P=this.componentDef,F,$=null;P.findHostDirectiveDefs?(F=[],$=new Map,P.findHostDirectiveDefs(P,F,$),F.push(P)):F=[P];let U=FW(M,x),D=PW(U,x,P,F,M,p,g);H=T2(C,pi),x&&LW(g,P,x,n),t!==void 0&&kW(H,this.ngContentSelectors,t),S=NW(D,P,F,$,M,[BW]),Z1(C,M,null)}finally{C1()}return new $x(this.componentType,S,Gu(H,M),M,H)}finally{hn(o)}}},$x=class extends Gx{constructor(e,t,n,r,o){super(),this.location=n,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new xl(r,void 0,!1),this.componentType=e}setInput(e,t){let n=this._tNode.inputs,r;if(n!==null&&(r=n[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Y1(o[Pt],o,r,e,t),this.previousInputValues.set(e,t);let s=gc(this._tNode.index,o);K1(s,1)}}get injector(){return new fl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FW(i,e){let t=i[Pt],n=pi;return i[n]=e,$u(t,n,2,"#host",null)}function PW(i,e,t,n,r,o,s){let a=r[Pt];OW(n,i,e,s);let c=null;e!==null&&(c=O1(e,r[Lu]));let u=o.rendererFactory.createRenderer(e,t),f=16;t.signals?f=4096:t.onPush&&(f=64);let h=e0(r,tU(t),null,f,r[i.index],i,o,u,null,null,c);return a.firstCreatePass&&Bx(a,i,n.length-1),t0(r,h),r[i.index]=h}function OW(i,e,t,n){for(let r of i)e.mergedAttrs=Of(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Ig(e,e.mergedAttrs,!0),t!==null&&ZR(n,t,e))}function NW(i,e,t,n,r,o){let s=Ki(),a=r[Pt],c=Kr(s,r);rU(a,r,s,t,null,n);for(let f=0;f<t.length;f++){let h=s.directiveStart+f,p=wl(r,a,h,s);fc(p,r)}oU(a,r,s),c&&fc(c,r);let u=wl(r,a,s.directiveStart+s.componentOffset,s);if(i[Qo]=r[Qo]=u,o!==null)for(let f of o)f(u,e);return G1(a,s,r),u}function LW(i,e,t,n){if(n)ux(i,t,["ng-version","18.1.4"]);else{let{attrs:r,classes:o}=Qj(e.selectors[0]);r&&ux(i,t,r),o&&o.length>0&&YR(i,t,o.join(" "))}}function kW(i,e,t){let n=i.projection=[];for(let r=0;r<e.length;r++){let o=t[r];n.push(o!=null?Array.from(o):null)}}function BW(){let i=Ki();$g(Kt()[Pt],i)}var Os=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=VW;let i=e;return i})();function VW(){let i=Ki();return CU(i,Kt())}var zW=Os,SU=class extends zW{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Gu(this._hostTNode,this._hostLView)}get injector(){return new fl(this._hostTNode,this._hostLView)}get parentInjector(){let e=T1(this._hostTNode,this._hostLView);if(X2(e)){let t=wg(e,this._hostLView),n=_g(e),r=t[Pt].data[n+8];return new fl(r,t)}else return new fl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=kI(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ar}createEmbeddedView(e,t,n){let r,o;typeof n=="number"?r=n:n!=null&&(r=n.index,o=n.injector);let s=jx(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,zx(this._hostTNode,s)),a}createComponent(e,t,n,r,o){let s=e&&!m8(e),a;if(s)a=t;else{let y=t||{};a=y.index,n=y.injector,r=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let c=s?e:new zf(ml(e)),u=n||this.parentInjector;if(!o&&c.ngModule==null){let x=(s?u:this.parentInjector).get(Tr,null);x&&(o=x)}let f=ml(c.componentType??{}),h=jx(this._lContainer,f?.id??null),p=h?.firstChild??null,g=c.create(u,r,p,o);return this.insertImpl(g.hostView,a,zx(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,n){let r=e._lView;if(x8(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[ji],u=new SU(c,c[Ur],c[ji]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return fU(s,r,o,n),e.attachToViewContainerRef(),i2(ex(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=kI(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),n=Lx(this._lContainer,t);n&&(hg(ex(this._lContainer),t),zR(n[Pt],n))}detach(e){let t=this._adjustIndex(e,-1),n=Lx(this._lContainer,t);return n&&hg(ex(this._lContainer),t)!=null?new xl(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function kI(i){return i[gg]}function ex(i){return i[gg]||(i[gg]=[])}function CU(i,e){let t,n=e[i.index];return Fs(n)?t=n:(t=sU(n,e,null,i),e[i.index]=t,t0(e,t)),AU(t,e,i,n),new SU(t,i,e)}function HW(i,e){let t=i[On],n=t.createComment(""),r=Kr(e,i),o=GR(t,r);return Cg(t,o,n,m6(t,r),!1),n}var AU=TU,J1=()=>!1;function jW(i,e,t){return J1(i,e,t)}function TU(i,e,t,n){if(i[ha])return;let r;t.type&8?r=es(n):r=HW(e,t),i[ha]=r}function GW(i,e,t){if(i[ha]&&i[kf])return!0;let n=t[Jo],r=e.index-pi;if(!n||pG(e)||Yg(n,r))return!1;let s=Tx(n,r),a=n.data[P1]?.[r],[c,u]=SW(s,a);return i[ha]=c,i[kf]=u,!0}function WW(i,e,t,n){J1(i,t,e)||TU(i,e,t,n)}function $W(){AU=WW,J1=GW}var qx=class i{constructor(e){this.queryList=e,this.matches=null}clone(){return new i(this.queryList)}setDirty(){this.queryList.setDirty()}},Xx=class i{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let n=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<n;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new i(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Q1(e,t).matches!==null&&this.queries[t].setDirty()}},Yx=class{constructor(e,t,n=null){this.flags=t,this.read=n,typeof e=="string"?this.predicate=e9(e):this.predicate=e}},Zx=class i{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){let r=t!==null?t.length:0,o=this.getByIndex(n).embeddedTView(e,r);o&&(o.indexInDeclarationView=n,t!==null?t.push(o):t=[o])}return t!==null?new i(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Kx=class i{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new i(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,n=e.parent;for(;n!==null&&n.type&8&&n.index!==t;)n=n.parent;return t===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){let o=n[r];this.matchTNodeWithReadOption(e,t,qW(t,o)),this.matchTNodeWithReadOption(e,t,lg(t,e,o,!1,!1))}else n===Zr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,lg(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(n!==null){let r=this.metadata.read;if(r!==null)if(r===on||r===Os||r===Zr&&t.type&4)this.addMatch(t.index,-2);else{let o=lg(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,n)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function qW(i,e){let t=i.localNames;if(t!==null){for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1]}return null}function XW(i,e){return i.type&11?Gu(i,e):i.type&4?n0(i,e):null}function YW(i,e,t,n){return t===-1?XW(e,i):t===-2?ZW(i,e,n):wl(i,i[Pt],t,e)}function ZW(i,e,t){if(t===on)return Gu(e,i);if(t===Zr)return n0(e,i);if(t===Os)return CU(e,i)}function DU(i,e,t,n){let r=e[fa].queries[n];if(r.matches===null){let o=i.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let f=o[u];a.push(YW(e,f,s[c+1],t.metadata.read))}}r.matches=a}return r.matches}function Jx(i,e,t,n){let r=i.queries.getByIndex(t),o=r.matches;if(o!==null){let s=DU(i,e,r,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)n.push(s[a/2]);else{let u=o[a+1],f=e[-c];for(let h=Ar;h<f.length;h++){let p=f[h];p[gl]===p[ji]&&Jx(p[Pt],p,u,n)}if(f[ku]!==null){let h=f[ku];for(let p=0;p<h.length;p++){let g=h[p];Jx(g[Pt],g,u,n)}}}}}return n}function KW(i,e){return i[fa].queries[e].queryList}function JW(i,e,t){let n=new Sx((t&4)===4);return D6(i,e,n,n.destroy),(e[fa]??=new Xx).queries.push(new qx(n))-1}function QW(i,e,t){let n=mi();return n.firstCreatePass&&(t9(n,new Yx(i,e,t),-1),(e&2)===2&&(n.staticViewQueries=!0)),JW(n,Kt(),e)}function e9(i){return i.split(",").map(e=>e.trim())}function t9(i,e,t){i.queries===null&&(i.queries=new Zx),i.queries.track(new Kx(e,t))}function Q1(i,e){return i.queries.getByIndex(e)}function n9(i,e){let t=i[Pt],n=Q1(t,e);return n.crossesNgTemplate?Jx(t,i,e,[]):DU(t,i,n,e)}function i9(i){return typeof i=="function"&&i[ua]!==void 0}function qu(i,e){wa("NgSignals");let t=FD(i),n=t[ua];return e?.equal&&(n.equal=e.equal),t.set=r=>Cw(n,r),t.update=r=>PD(n,r),t.asReadonly=r9.bind(t),t}function r9(){let i=this[ua];if(i.readonlyFn===void 0){let e=()=>this();e[ua]=i,i.readonlyFn=e}return i.readonlyFn}function IU(i){return i9(i)&&typeof i.set=="function"}function o9(i){return Object.getPrototypeOf(i.prototype).constructor}function Qr(i){let e=o9(i.type),t=!0,n=[i];for(;e;){let r;if(uc(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ne(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);let s=i;s.inputs=ig(i.inputs),s.inputTransforms=ig(i.inputTransforms),s.declaredInputs=ig(i.declaredInputs),s.outputs=ig(i.outputs);let a=r.hostBindings;a&&u9(i,a);let c=r.viewQuery,u=r.contentQueries;if(c&&c9(i,c),u&&l9(i,u),s9(i,r),yj(i.outputs,r.outputs),uc(r)&&r.data.animation){let f=i.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(i),a===Qr&&(t=!1)}}e=Object.getPrototypeOf(e)}a9(n)}function s9(i,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||i.inputs.hasOwnProperty(t))continue;let n=e.inputs[t];if(n!==void 0&&(i.inputs[t]=n,i.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(n)?n[0]:n;if(!e.inputTransforms.hasOwnProperty(r))continue;i.inputTransforms??={},i.inputTransforms[r]=e.inputTransforms[r]}}}function a9(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){let r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=Of(r.hostAttrs,t=Of(t,r.hostAttrs))}}function ig(i){return i===Ou?{}:i===ur?[]:i}function c9(i,e){let t=i.viewQuery;t?i.viewQuery=(n,r)=>{e(n,r),t(n,r)}:i.viewQuery=e}function l9(i,e){let t=i.contentQueries;t?i.contentQueries=(n,r,o)=>{e(n,r,o),t(n,r,o)}:i.contentQueries=e}function u9(i,e){let t=i.hostBindings;t?i.hostBindings=(n,r)=>{e(n,r),t(n,r)}:i.hostBindings=e}function eM(i){let e=i.inputConfig,t={};for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];Array.isArray(r)&&r[3]&&(t[n]=r[3])}i.inputTransforms=t}var pc=class{},Hf=class{};var Qx=class extends pc{constructor(e,t,n){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Rg(this);let r=h2(e);this._bootstrapComponents=NR(r.bootstrap),this._r3Injector=iR(e,t,[{provide:pc,useValue:this},{provide:Vu,useValue:this.componentFactoryResolver},...n],dr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},e1=class extends Hf{constructor(e){super(),this.moduleType=e}create(e){return new Qx(this.moduleType,e,[])}};var Ug=class extends pc{constructor(e){super(),this.componentFactoryResolver=new Rg(this),this.instance=null;let t=new Nf([...e.providers,{provide:pc,useValue:this},{provide:Vu,useValue:this.componentFactoryResolver}],e.parent||_1(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tM(i,e,t=null){return new Ug({providers:i,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function RU(i){return f9(i)?Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i:!1}function d9(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{let t=i[Symbol.iterator](),n;for(;!(n=t.next()).done;)e(n.value)}}function f9(i){return i!==null&&(typeof i=="function"||typeof i=="object")}function o0(i,e,t){return i[e]=t}function h9(i,e){return i[e]}function ga(i,e,t){let n=i[e];return Object.is(n,t)?!1:(i[e]=t,!0)}function t1(i,e,t,n){let r=ga(i,e,t);return ga(i,e+1,n)||r}function p9(i,e,t,n,r,o){let s=t1(i,e,t,n);return t1(i,e+2,r,o)||s}function Jf(i){return(i.flags&32)===32}function m9(i,e,t,n,r,o,s,a,c){let u=e.consts,f=$u(e,i,4,s||null,a||null);X1(e,t,f,Bu(u,c)),$g(e,f);let h=f.tView=q1(2,f,n,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,f),h.queries=e.queries.embeddedTView(f)),f}function UU(i,e,t,n,r,o,s,a,c,u){let f=t+pi,h=e.firstCreatePass?m9(f,e,i,n,r,o,s,a,c):e.data[f];bl(h,!1);let p=FU(e,i,h,t);Wg()&&Jg(e,i,p,h),fc(p,i);let g=sU(p,i,p,h);return i[f]=g,t0(i,g),jW(g,h,i),zg(h)&&W1(e,i,h),c!=null&&$1(i,h,u),h}function pt(i,e,t,n,r,o,s,a){let c=Kt(),u=mi(),f=Bu(u.consts,o);return UU(c,u,i,e,t,n,r,f,s,a),pt}var FU=PU;function PU(i,e,t,n){return yc(!0),e[On].createComment("")}function g9(i,e,t,n){let r=e[Jo],o=!r||ju()||Jf(t)||Yg(r,n);if(yc(o),o)return PU(i,e,t,n);let s=r.data[bG]?.[n]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=i0(r,i,e,t);Xg(r,n,a);let c=N1(r,n);return r0(c,a)}function y9(){FU=g9}function eo(i,e,t,n){let r=Kt(),o=jg();if(ga(r,o,e)){let s=mi(),a=A1();G6(a,r,i,e,t,n)}return eo}function v9(i,e,t,n){return ga(i,jg(),t)?e+Wf(t)+n:Ps}function rg(i,e){return i<<17|e<<2}function Ml(i){return i>>17&32767}function _9(i){return(i&2)==2}function w9(i,e){return i&131071|e<<17}function n1(i){return i|2}function zu(i){return(i&131068)>>2}function tx(i,e){return i&-131069|e<<2}function x9(i){return(i&1)===1}function i1(i){return i|1}function M9(i,e,t,n,r,o){let s=o?e.classBindings:e.styleBindings,a=Ml(s),c=zu(s);i[n]=t;let u=!1,f;if(Array.isArray(t)){let h=t;f=h[1],(f===null||$f(h,f)>0)&&(u=!0)}else f=t;if(r)if(c!==0){let p=Ml(i[a+1]);i[n+1]=rg(p,a),p!==0&&(i[p+1]=tx(i[p+1],n)),i[a+1]=w9(i[a+1],n)}else i[n+1]=rg(a,0),a!==0&&(i[a+1]=tx(i[a+1],n)),a=n;else i[n+1]=rg(c,0),a===0?a=n:i[c+1]=tx(i[c+1],n),c=n;u&&(i[n+1]=n1(i[n+1])),BI(i,f,n,!0),BI(i,f,n,!1),b9(e,f,i,n,o),s=rg(a,c),o?e.classBindings=s:e.styleBindings=s}function b9(i,e,t,n,r){let o=r?i.residualClasses:i.residualStyles;o!=null&&typeof e=="string"&&$f(o,e)>=0&&(t[n+1]=i1(t[n+1]))}function BI(i,e,t,n){let r=i[t+1],o=e===null,s=n?Ml(r):zu(r),a=!1;for(;s!==0&&(a===!1||o);){let c=i[s],u=i[s+1];E9(c,e)&&(a=!0,i[s+1]=n?i1(u):n1(u)),s=n?Ml(u):zu(u)}a&&(i[t+1]=n?n1(r):i1(r))}function E9(i,e){return i===null||e==null||(Array.isArray(i)?i[1]:i)===e?!0:Array.isArray(i)&&typeof e=="string"?$f(i,e)>=0:!1}var Zo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function S9(i){return i.substring(Zo.key,Zo.keyEnd)}function C9(i){return A9(i),OU(i,NU(i,0,Zo.textEnd))}function OU(i,e){let t=Zo.textEnd;return t===e?-1:(e=Zo.keyEnd=T9(i,Zo.key=e,t),NU(i,e,t))}function A9(i){Zo.key=0,Zo.keyEnd=0,Zo.value=0,Zo.valueEnd=0,Zo.textEnd=i.length}function NU(i,e,t){for(;e<t&&i.charCodeAt(e)<=32;)e++;return e}function T9(i,e,t){for(;e<t&&i.charCodeAt(e)>32;)e++;return e}function _e(i,e,t){let n=Kt(),r=jg();if(ga(n,r,e)){let o=mi(),s=A1();iU(o,s,n,i,e,n[On],t,!1)}return _e}function r1(i,e,t,n,r){let o=e.inputs,s=r?"class":"style";Y1(i,t,o[s],s,n)}function qn(i,e,t){return kU(i,e,t,!1),qn}function s0(i,e){return kU(i,e,null,!0),s0}function LU(i){I9(N9,D9,i,!0)}function D9(i,e){for(let t=C9(e);t>=0;t=OU(e,t))m1(i,S9(e),!0)}function kU(i,e,t,n){let r=Kt(),o=mi(),s=L2(2);if(o.firstUpdatePass&&VU(o,i,s,n),e!==Ps&&ga(r,s,e)){let a=o.data[El()];zU(o,a,r,r[On],i,r[s+1]=k9(e,t),n,s)}}function I9(i,e,t,n){let r=mi(),o=L2(2);r.firstUpdatePass&&VU(r,null,o,n);let s=Kt();if(t!==Ps&&ga(s,o,t)){let a=r.data[El()];if(HU(a,n)&&!BU(r,o)){let c=n?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=sx(c,t||"")),r1(r,a,s,t,n)}else L9(r,a,s,s[On],s[o+1],s[o+1]=O9(i,e,t),n,o)}}function BU(i,e){return e>=i.expandoStartIndex}function VU(i,e,t,n){let r=i.data;if(r[t+1]===null){let o=r[El()],s=BU(i,t);HU(o,n)&&e===null&&!s&&(e=!1),e=R9(r,o,e,n),M9(r,o,e,t,s,n)}}function R9(i,e,t,n){let r=N8(i),o=n?e.residualClasses:e.residualStyles;if(r===null)(n?e.classBindings:e.styleBindings)===0&&(t=nx(null,i,e,t,n),t=jf(t,e.attrs,n),o=null);else{let s=e.directiveStylingLast;if(s===-1||i[s]!==r)if(t=nx(r,i,e,t,n),o===null){let c=U9(i,e,n);c!==void 0&&Array.isArray(c)&&(c=nx(null,i,e,c[1],n),c=jf(c,e.attrs,n),F9(i,e,n,c))}else o=P9(i,e,n)}return o!==void 0&&(n?e.residualClasses=o:e.residualStyles=o),t}function U9(i,e,t){let n=t?e.classBindings:e.styleBindings;if(zu(n)!==0)return i[Ml(n)]}function F9(i,e,t,n){let r=t?e.classBindings:e.styleBindings;i[Ml(r)]=n}function P9(i,e,t){let n,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=i[o].hostAttrs;n=jf(n,s,t)}return jf(n,e.attrs,t)}function nx(i,e,t,n,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],n=jf(n,o.hostAttrs,r),o!==i);)a++;return i!==null&&(t.directiveStylingLast=a),n}function jf(i,e,t){let n=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===n&&(Array.isArray(i)||(i=i===void 0?[]:["",i]),m1(i,s,t?!0:e[++o]))}return i===void 0?null:i}function O9(i,e,t){if(t==null||t==="")return ur;let n=[],r=Eo(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)i(n,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&i(n,o,r[o]);else typeof r=="string"&&e(n,r);return n}function N9(i,e,t){let n=String(e);n!==""&&!n.includes(" ")&&m1(i,n,t)}function L9(i,e,t,n,r,o,s,a){r===Ps&&(r=ur);let c=0,u=0,f=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;f!==null||h!==null;){let p=c<r.length?r[c+1]:void 0,g=u<o.length?o[u+1]:void 0,y=null,x;f===h?(c+=2,u+=2,p!==g&&(y=h,x=g)):h===null||f!==null&&f<h?(c+=2,y=f):(u+=2,y=h,x=g),y!==null&&zU(i,e,t,n,y,x,s,a),f=c<r.length?r[c]:null,h=u<o.length?o[u]:null}}function zU(i,e,t,n,r,o,s,a){if(!(e.type&3))return;let c=i.data,u=c[a+1],f=x9(u)?VI(c,e,t,r,zu(u),s):void 0;if(!Fg(f)){Fg(o)||_9(u)&&(o=VI(c,null,t,r,a,s));let h=A2(El(),t);w6(n,s,h,r,o)}}function VI(i,e,t,n,r,o){let s=e===null,a;for(;r>0;){let c=i[r],u=Array.isArray(c),f=u?c[1]:c,h=f===null,p=t[r+1];p===Ps&&(p=h?ur:void 0);let g=h?Gw(p,n):f===n?p:void 0;if(u&&!Fg(g)&&(g=Gw(c,n)),Fg(g)&&(a=g,s))return a;let y=i[r+1];r=s?Ml(y):zu(y)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Gw(c,n))}return a}function Fg(i){return i!==void 0}function k9(i,e){return i==null||i===""||(typeof e=="string"?i=i+e:typeof i=="object"&&(i=dr(Eo(i)))),i}function HU(i,e){return(i.flags&(e?8:16))!==0}function B9(i,e,t,n,r,o){let s=e.consts,a=Bu(s,r),c=$u(e,i,2,n,a);return X1(e,t,c,Bu(s,o)),c.attrs!==null&&Ig(c,c.attrs,!1),c.mergedAttrs!==null&&Ig(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function B(i,e,t,n){let r=Kt(),o=mi(),s=pi+i,a=r[On],c=o.firstCreatePass?B9(s,o,r,e,t,n):o.data[s],u=jU(o,r,c,a,e,i);r[s]=u;let f=zg(c);return bl(c,!0),ZR(a,u,c),!Jf(c)&&Wg()&&Jg(o,r,u,c),E8()===0&&fc(u,r),S8(),f&&(W1(o,r,c),G1(o,c,r)),n!==null&&$1(r,c),B}function V(){let i=Ki();M1()?b1():(i=i.parent,bl(i,!1));let e=i;A8(e)&&D8(),C8();let t=mi();return t.firstCreatePass&&($g(t,i),w1(i)&&t.queries.elementEnd(i)),e.classesWithoutHost!=null&&j8(e)&&r1(t,e,Kt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&G8(e)&&r1(t,e,Kt(),e.stylesWithoutHost,!1),V}function Ie(i,e,t,n){return B(i,e,t,n),V(),Ie}var jU=(i,e,t,n,r,o)=>(yc(!0),V1(n,r,W2()));function V9(i,e,t,n,r,o){let s=e[Jo],a=!s||ju()||Jf(t)||Yg(s,o);if(yc(a),a)return V1(n,r,W2());let c=i0(s,i,e,t);return wR(s,o)&&Xg(s,o,c.nextSibling),s&&(aR(t)||cR(c))&&qf(t)&&(T8(t),qR(c)),c}function z9(){jU=V9}function H9(i,e,t,n,r){let o=e.consts,s=Bu(o,n),a=$u(e,i,8,"ng-container",s);s!==null&&Ig(a,s,!0);let c=Bu(o,r);return X1(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function a0(i,e,t){let n=Kt(),r=mi(),o=i+pi,s=r.firstCreatePass?H9(o,r,n,e,t):r.data[o];bl(s,!0);let a=GU(r,n,s,i);return n[o]=a,Wg()&&Jg(r,n,a,s),fc(a,n),zg(s)&&(W1(r,n,s),G1(r,s,n)),t!=null&&$1(n,s),a0}function c0(){let i=Ki(),e=mi();return M1()?b1():(i=i.parent,bl(i,!1)),e.firstCreatePass&&($g(e,i),w1(i)&&e.queries.elementEnd(i)),c0}function Qf(i,e,t){return a0(i,e,t),c0(),Qf}var GU=(i,e,t,n)=>(yc(!0),kR(e[On],""));function j9(i,e,t,n){let r,o=e[Jo],s=!o||ju()||Jf(t);if(yc(s),s)return kR(e[On],"");let a=i0(o,i,e,t),c=FG(o,n);return Xg(o,n,a),r=r0(c,a),r}function G9(){GU=j9}function Lt(){return Kt()}var Pg="en-US";var W9=Pg;function $9(i){typeof i=="string"&&(W9=i.toLowerCase().replace(/_/g,"-"))}var q9=(i,e,t)=>{};function Fe(i,e,t,n){let r=Kt(),o=mi(),s=Ki();return WU(o,r,r[On],s,i,e,n),Fe}function X9(i,e,t,n){let r=i.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===n){let a=e[mg],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function WU(i,e,t,n,r,o,s){let a=zg(n),u=i.firstCreatePass&&lU(i),f=e[Qo],h=cU(e),p=!0;if(n.type&3||s){let x=Kr(n,e),v=s?s(x):x,_=h.length,C=s?S=>s(es(S[n.index])):n.index,M=null;if(!s&&a&&(M=X9(i,e,r,n.index)),M!==null){let S=M.__ngLastListenerFn__||M;S.__ngNextListenerFn__=o,M.__ngLastListenerFn__=o,p=!1}else{o=HI(n,e,f,o),q9(x,r,o);let S=t.listen(v,r,o);h.push(o,S),u&&u.push(r,C,_,_+1)}}else o=HI(n,e,f,o);let g=n.outputs,y;if(p&&g!==null&&(y=g[r])){let x=y.length;if(x)for(let v=0;v<x;v+=2){let _=y[v],C=y[v+1],H=e[_][C].subscribe(o),P=h.length;h.push(o,H),u&&u.push(r,n.index,P,-(P+1))}}}function zI(i,e,t,n){let r=hn(null);try{return As(6,e,t),t(n)!==!1}catch(o){return uU(i,o),!1}finally{As(7,e,t),hn(r)}}function HI(i,e,t,n){return function r(o){if(o===Function)return n;let s=i.componentOffset>-1?gc(i.index,e):e;K1(s,5);let a=zI(e,t,n,o),c=r.__ngNextListenerFn__;for(;c;)a=zI(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Ee(i=1){return k8(i)}function Y9(i,e){let t=null,n=qj(i);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(n===null?l2(i,o,!0):Zj(n,o))return r}return t}function $U(i){let e=Kt()[Dr][Ur];if(!e.projection){let t=i?i.length:1,n=e.projection=kj(t,null),r=n.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=i?Y9(o,i):0;s!==null&&(r[s]?r[s].projectionNext=o:n[s]=o,r[s]=o)}o=o.next}}}function qU(i,e=0,t,n,r,o){let s=Kt(),a=mi(),c=n?i+1:null;c!==null&&UU(s,a,c,n,r,o,null,t);let u=$u(a,pi+i,16,null,t||null);u.projection===null&&(u.projection=e),b1();let h=!s[Jo]||ju();s[Dr][Ur].projection[u.projection]===null&&c!==null?Z9(s,a,c):h&&(u.flags&32)!==32&&v6(a,s,u)}function Z9(i,e,t){let n=pi+t,r=e.data[n],o=i[n],s=jx(o,r.tView.ssrId),a=dU(i,r,void 0,{dehydratedView:s});fU(o,a,0,zx(r,s))}function Wi(i,e,t){QW(i,e,t)}function Fi(i){let e=Kt(),t=mi(),n=k2();E1(n+1);let r=Q1(t,n);if(i.dirty&&w8(e)===((r.metadata.flags&2)===2)){if(r.matches===null)i.reset([]);else{let o=n9(e,n);i.reset(o,uG),i.notifyOnChanges()}return!0}return!1}function Pi(){return KW(Kt(),k2())}function K9(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}function hr(i){let e=R8();return D2(e,pi+i)}function ge(i,e=""){let t=Kt(),n=mi(),r=i+pi,o=n.firstCreatePass?$u(n,r,1,e,null):n.data[r],s=XU(n,t,o,e,i);t[r]=s,Wg()&&Jg(n,t,s,o),bl(o,!1)}var XU=(i,e,t,n,r)=>(yc(!0),LR(e[On],n));function J9(i,e,t,n,r){let o=e[Jo],s=!o||ju()||Jf(t)||Yg(o,r);return yc(s),s?LR(e[On],n):i0(o,i,e,t)}function Q9(){XU=J9}function Mn(i){return pr("",i,""),Mn}function pr(i,e,t){let n=Kt(),r=v9(n,i,e,t);return r!==Ps&&X6(n,El(),r),pr}function to(i,e,t){IU(e)&&(e=e());let n=Kt(),r=jg();if(ga(n,r,e)){let o=mi(),s=A1();iU(o,s,n,i,e,n[On],t,!1)}return to}function So(i,e){let t=IU(i);return t&&i.set(e),t}function no(i,e){let t=Kt(),n=mi(),r=Ki();return WU(n,t,t[On],r,i,e),no}function e7(i,e,t){let n=mi();if(n.firstCreatePass){let r=uc(i);o1(t,n.data,n.blueprint,r,!0),o1(e,n.data,n.blueprint,r,!1)}}function o1(i,e,t,n,r){if(i=lr(i),Array.isArray(i))for(let o=0;o<i.length;o++)o1(i[o],e,t,n,r);else{let o=mi(),s=Kt(),a=Ki(),c=Nu(i)?i:lr(i.provide),u=_2(i),f=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(Nu(i)||!i.multi){let g=new _l(u,r,fe),y=rx(c,e,r?f:f+p,h);y===-1?(_x(Mg(a,s),o,c),ix(o,i,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[y]=g,s[y]=g)}else{let g=rx(c,e,f+p,h),y=rx(c,e,f,f+p),x=g>=0&&t[g],v=y>=0&&t[y];if(r&&!v||!r&&!x){_x(Mg(a,s),o,c);let _=i7(r?n7:t7,t.length,r,n,u);!r&&v&&(t[y].providerFactory=_),ix(o,i,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),s.push(_)}else{let _=YU(t[r?y:g],u,!r&&n);ix(o,i,g>-1?g:y,_)}!r&&n&&v&&t[y].componentProviders++}}}function ix(i,e,t,n){let r=Nu(e),o=a8(e);if(r||o){let c=(o?lr(e.useClass):e).prototype.ngOnDestroy;if(c){let u=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[n,c]):u[f+1].push(n,c)}else u.push(t,c)}}}function YU(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function rx(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function t7(i,e,t,n){return s1(this.multi,[])}function n7(i,e,t,n){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=wl(t,t[Pt],this.providerFactory.index,n);o=a.slice(0,s),s1(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],s1(r,o);return o}function s1(i,e){for(let t=0;t<i.length;t++){let n=i[t];e.push(n())}return e}function i7(i,e,t,n,r){let o=new _l(i,t,fe);return o.multi=[],o.index=e,o.componentProviders=0,YU(o,r,n&&!t),o}function rs(i,e=[]){return t=>{t.providersResolver=(n,r)=>e7(n,r?r(i):i,e)}}var r7=(()=>{let e=class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=g2(!1,n.type),o=r.length>0?tM([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Be({token:e,providedIn:"environment",factory:()=>new e(Xe(Tr))});let i=e;return i})();function un(i){wa("NgStandalone"),i.getStandaloneInjector=e=>e.get(r7).getOrCreateStandaloneInjector(i)}function eh(i,e,t){let n=Xf()+i,r=Kt();return r[n]===Ps?o0(r,n,t?e.call(t):e()):h9(r,n)}function os(i,e,t,n){return JU(Kt(),Xf(),i,e,t,n)}function ZU(i,e,t,n,r){return o7(Kt(),Xf(),i,e,t,n,r)}function KU(i,e,t,n,r,o,s){return s7(Kt(),Xf(),i,e,t,n,r,o,s)}function nM(i,e){let t=i[e];return t===Ps?void 0:t}function JU(i,e,t,n,r,o){let s=e+t;return ga(i,s,r)?o0(i,s+1,o?n.call(o,r):n(r)):nM(i,s+1)}function o7(i,e,t,n,r,o,s){let a=e+t;return t1(i,a,r,o)?o0(i,a+2,s?n.call(s,r,o):n(r,o)):nM(i,a+2)}function s7(i,e,t,n,r,o,s,a,c){let u=e+t;return p9(i,u,r,o,s,a)?o0(i,u+4,c?n.call(c,r,o,s,a):n(r,o,s,a)):nM(i,u+4)}function QU(i,e){let t=mi(),n,r=i+pi;t.firstCreatePass?(n=a7(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks??=[]).push(r,n.onDestroy)):n=t.data[r];let o=n.factory||(n.factory=hl(n.type,!0)),s,a=Cr(fe);try{let c=xg(!1),u=o();return xg(c),K9(t,Kt(),r,u),u}finally{Cr(a)}}function a7(i,e){if(e)for(let t=e.length-1;t>=0;t--){let n=e[t];if(i===n.name)return n}}function eF(i,e,t){let n=i+pi,r=Kt(),o=D2(r,n);return c7(r,n)?JU(r,Xf(),e,o.transform,t,o):o.transform(t)}function c7(i,e){return i[Pt].data[e].pure}function xa(i,e){return n0(i,e)}var l0=(()=>{let e=class e{log(n){console.log(n)}warn(n){console.warn(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"platform"});let i=e;return i})();var tF=new ct("");function Sl(i){return!!i&&typeof i.then=="function"}function nF(i){return!!i&&typeof i.subscribe=="function"}var iF=new ct(""),rF=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Ue(iF,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let s=o();if(Sl(s))n.push(s);else if(nF(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});n.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Xu=new ct("");function l7(){UD(()=>{throw new Ne(600,!1)})}function u7(i){return i.isBoundToModule}var d7=10;function f7(i,e,t){try{let n=t();return Sl(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}var Ma=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ue(cG),this.afterRenderEffectManager=Ue(EU),this.zonelessEnabled=Ue(MU),this.externalTestViews=new Set,this.beforeRender=new ni,this.afterTick=new ni,this.componentTypes=[],this.components=[],this.isStable=Ue(ya).hasPendingTasks.pipe(Ot(n=>!n)),this._injector=Ue(Tr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let o=n instanceof Dg;if(!this._injector.get(rF).done){let g=!o&&f2(n),y=!1;throw new Ne(405,y)}let a;o?a=n:a=this._injector.get(Vu).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let c=u7(a)?void 0:this._injector.get(pc),u=r||a.selector,f=a.create(Us.NULL,[],u,c),h=f.location.nativeElement,p=f.injector.get(tF,null);return p?.registerApplication(h),f.onDestroy(()=>{this.detachView(f.hostView),ox(this.components,f),p?.unregisterApplication(h)}),this._loadComponent(f),f}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new Ne(101,!1);let r=hn(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,hn(r),this.afterTick.next()}}detectChangesInAttachedViews(n){let r=null;this._injector.destroyed||(r=this._injector.get(hc,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<d7;){let a=o===0;if(n||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)h7(c,u,a,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Bf(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>Bf(c))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ox(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Xu,[]);[...this._bootstrapListeners,...r].forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ox(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Ne(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function ox(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}var og;function u0(i){og??=new WeakMap;let e=og.get(i);if(e)return e;let t=i.isStable.pipe(Xo(n=>n)).toPromise().then(()=>{});return og.set(i,t),i.onDestroy(()=>og?.delete(i)),t}function h7(i,e,t,n){if(!t&&!Bf(i))return;mU(i,e,t&&!n?0:1)}var a1=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},iM=(()=>{let e=class e{compileModuleSync(n){return new e1(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=h2(n),s=NR(o.declarations).reduce((a,c)=>{let u=ml(c);return u&&a.push(new zf(u)),a},[]);return new a1(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var p7=(()=>{let e=class e{constructor(){this.zone=Ue(kn),this.changeDetectionScheduler=Ue(Vf),this.applicationRef=Ue(Ma)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function m7({ngZoneFactory:i,ignoreChangesOutsideZone:e}){return i??=()=>new kn(g7()),[{provide:kn,useFactory:i},{provide:pl,multi:!0,useFactory:()=>{let t=Ue(p7,{optional:!0});return()=>t.initialize()}},{provide:pl,multi:!0,useFactory:()=>{let t=Ue(y7);return()=>{t.initialize()}}},e===!0?{provide:bU,useValue:!0}:[]]}function g7(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}var y7=(()=>{let e=class e{constructor(){this.subscription=new fi,this.initialized=!1,this.zone=Ue(kn),this.pendingTasks=Ue(ya)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{kn.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{kn.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var v7=(()=>{let e=class e{constructor(){this.appRef=Ue(Ma),this.taskService=Ue(ya),this.ngZone=Ue(kn),this.zonelessEnabled=Ue(MU),this.disableScheduling=Ue(bU,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new fi,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ex||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?MI:oR;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&kn.isInAngularZone())}tick(n){if(this.runningTick||this.appRef.destroyed)return;let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(n)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(r),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,MI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function _7(){return typeof $localize<"u"&&$localize.locale||Pg}var rM=new ct("",{providedIn:"root",factory:()=>Ue(rM,Wt.Optional|Wt.SkipSelf)||_7()});var oF=new ct("");var ug=null;function w7(i=[],e){return Us.create({name:e,providers:[{provide:Bg,useValue:"platform"},{provide:oF,useValue:new Set([()=>ug=null])},...i]})}function x7(i=[]){if(ug)return ug;let e=w7(i);return ug=e,l7(),M7(e),e}function M7(i){i.get(R1,null)?.forEach(t=>t())}var io=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=b7;let i=e;return i})();function b7(i){return E7(Ki(),Kt(),(i&16)===16)}function E7(i,e,t){if(qf(i)&&!t){let n=gc(i.index,e);return new xl(n,n)}else if(i.type&175){let n=e[Dr];return new xl(n,e)}return null}var c1=class{constructor(){}supports(e){return RU(e)}create(e){return new l1(e)}},S7=(i,e)=>e,l1=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||S7}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,o=null;for(;t||n;){let s=!n||t&&t.currentIndex<jI(n,r,o)?t:n,a=jI(s,r,o),c=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,f=c-r;if(u!=f){for(let p=0;p<u;p++){let g=p<o.length?o[p]:o[p]=0,y=g+p;f<=y&&y<u&&(o[p]=g+1)}let h=s.previousIndex;o[h]=f-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!RU(e))throw new Ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,n=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),n=!0):(n&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,d9(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),n=!0):(n&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(n,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new u1(t,n),o,r)),e}_verifyReinsertion(e,t,n,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Og),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,n=e._next;return t===null?this._itHead=n:t._next=n,n===null?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Og),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},u1=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},d1=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;n!==null;n=n._nextDup)if((t===null||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){let t=e._prevDup,n=e._nextDup;return t===null?this._head=n:t._nextDup=n,n===null?this._tail=t:n._prevDup=t,this._head===null}},Og=class{constructor(){this.map=new Map}put(e){let t=e.trackById,n=this.map.get(t);n||(n=new d1,this.map.set(t,n)),n.add(e)}get(e,t){let n=e,r=this.map.get(n);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function jI(i,e,t){let n=i.previousIndex;if(n===null)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}function GI(){return new oM([new c1])}var oM=(()=>{let e=class e{constructor(n){this.factories=n}static create(n,r){if(r!=null){let o=r.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||GI()),deps:[[e,new n2,new h1]]}}find(n){let r=this.factories.find(o=>o.supports(n));if(r!=null)return r;throw new Ne(901,!1)}};e.\u0275prov=Be({token:e,providedIn:"root",factory:GI});let i=e;return i})();function sF(i){try{let{rootComponent:e,appProviders:t,platformProviders:n}=i,r=x7(n),o=[m7({}),{provide:Vf,useExisting:v7},...t||[]],a=new Ug({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(kn);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(dc,null),f;c.runOutsideAngular(()=>{f=c.onError.subscribe({next:g=>{u.handleError(g)}})});let h=()=>a.destroy(),p=r.get(oF);return p.add(h),a.onDestroy(()=>{f.unsubscribe(),p.delete(h)}),f7(u,c,()=>{let g=a.get(rF);return g.runInitializers(),g.donePromise.then(()=>{let y=a.get(rM,Pg);$9(y||Pg);let x=a.get(Ma);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}var aF=new ct("");var WI=!1;function C7(){WI||(WI=!0,DG(),z9(),Q9(),G9(),y9(),$W(),AW(),T6())}function A7(i,e){return u0(i)}function cF(){return mc([{provide:Jm,useFactory:()=>{let i=!0;return ng()&&(i=!!Ue(Wu,{optional:!0})?.get(vR,null)),i&&wa("NgHydration"),i}},{provide:pl,useValue:()=>{wW(!1),ng()&&Ue(Jm)&&(T7(),C7())},multi:!0},{provide:MR,useFactory:()=>ng()&&Ue(Jm)},{provide:Xu,useFactory:()=>{if(ng()&&Ue(Jm)){let i=Ue(Ma),e=Ue(Us);return()=>{A7(i,e).then(()=>{EW(i)})}}return()=>{}},multi:!0}])}function T7(){let i=Yf(),e;for(let t of i.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===AG){e=t;break}if(!e)throw new Ne(-507,!1)}function Cl(i){return typeof i=="boolean"?i:i!=null&&i!=="false"}function Yu(i,e){wa("NgSignals");let t=DD(i);return e?.equal&&(t[ua].equal=e.equal),t}function Ns(i){let e=hn(null);try{return i()}finally{hn(e)}}var pF=null;function ba(){return pF}function mF(i){pF??=i}var d0=class{};var ii=new ct(""),gF=(()=>{let e=class e{historyGo(n){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:()=>Ue(D7),providedIn:"platform"});let i=e;return i})();var D7=(()=>{let e=class e extends gF{constructor(){super(),this._doc=Ue(ii),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ba().getBaseHref(this._doc)}onPopState(n){let r=ba().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ba().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:()=>new e,providedIn:"platform"});let i=e;return i})();function yF(i,e){if(i.length==0)return e;if(e.length==0)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?i+e.substring(1):t==1?i+e:i+"/"+e}function lF(i){let e=i.match(/#|\?|$/),t=e&&e.index||i.length,n=t-(i[t-1]==="/"?1:0);return i.slice(0,n)+i.slice(t)}function Al(i){return i&&i[0]!=="?"?"?"+i:i}var Ku=(()=>{let e=class e{historyGo(n){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:()=>Ue(vF),providedIn:"root"});let i=e;return i})(),I7=new ct(""),vF=(()=>{let e=class e extends Ku{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ue(ii).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return yF(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Al(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,s){let a=this.prepareExternalUrl(o+Al(s));this._platformLocation.pushState(n,r,a)}replaceState(n,r,o,s){let a=this.prepareExternalUrl(o+Al(s));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}};e.\u0275fac=function(r){return new(r||e)(Xe(gF),Xe(I7,8))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var th=(()=>{let e=class e{constructor(n){this._subject=new _n,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=F7(lF(uF(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Al(r))}normalize(n){return e.stripTrailingSlash(U7(this._basePath,uF(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Al(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Al(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}};e.normalizeQueryParams=Al,e.joinWithSlash=yF,e.stripTrailingSlash=lF,e.\u0275fac=function(r){return new(r||e)(Xe(Ku))},e.\u0275prov=Be({token:e,factory:()=>R7(),providedIn:"root"});let i=e;return i})();function R7(){return new th(Xe(Ku))}function U7(i,e){if(!i||!e.startsWith(i))return e;let t=e.substring(i.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function uF(i){return i.replace(/\/index.html$/,"")}function F7(i){if(new RegExp("^(https?:)?//").test(i)){let[,t]=i.split(/\/\/[^\/]+/);return t}return i}function f0(i,e){e=encodeURIComponent(e);for(let t of i.split(";")){let n=t.indexOf("="),[r,o]=n==-1?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var aM=/\s+/,dF=[],Ls=(()=>{let e=class e{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=dF,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(aM):dF}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(aM):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let o=this.stateMap.get(n);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],o=n[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(aM).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(r){return new(r||e)(fe(on),fe(Ci))},e.\u0275dir=Nn({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let i=e;return i})();var cM=class{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Oi=(()=>{let e=class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new cM(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),fF(c,o)}});for(let o=0,s=r.length;o<s;o++){let c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);fF(s,o)})}static ngTemplateContextGuard(n,r){return!0}};e.\u0275fac=function(r){return new(r||e)(fe(Os),fe(Zr),fe(oM))},e.\u0275dir=Nn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let i=e;return i})();function fF(i,e){i.context.$implicit=e.item}var gi=(()=>{let e=class e{constructor(n,r){this._viewContainer=n,this._context=new lM,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){hF("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){hF("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}};e.\u0275fac=function(r){return new(r||e)(fe(Os),fe(Zr))},e.\u0275dir=Nn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let i=e;return i})(),lM=class{constructor(){this.$implicit=null,this.ngIf=null}};function hF(i,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${i} must be a TemplateRef, but received '${dr(e)}'.`)}var h0=(()=>{let e=class e{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(this._shouldRecreateView(n)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,r,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,o):!1,get:(n,r,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,o)}})}};e.\u0275fac=function(r){return new(r||e)(fe(Os))},e.\u0275dir=Nn({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Si]});let i=e;return i})();var Ju=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rr({type:e}),e.\u0275inj=Ir({});let i=e;return i})(),dM="browser",P7="server";function _F(i){return i===dM}function nh(i){return i===P7}var Zu=class{};var rh=class{},g0=class{},ks=class i{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let n=t.indexOf(":");if(n>0){let r=t.slice(0,n),o=r.toLowerCase(),s=t.slice(n+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,n)=>{this.setHeaderEntries(n,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,n])=>{this.setHeaderEntries(t,n)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new i;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let n=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var hM=class{encodeKey(e){return xF(e)}encodeValue(e){return xF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function O7(i,e){let t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var N7=/%(\d[a-f0-9])/gi,L7={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xF(i){return encodeURIComponent(i).replace(N7,(e,t)=>L7[t]??e)}function p0(i){return`${i}`}var $t=class i{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new hM,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=O7(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let n=e.fromObject[t],r=Array.isArray(n)?n.map(p0):[p0(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(n=>{let r=e[n];Array.isArray(r)?r.forEach(o=>{t.push({param:n,value:o,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new i({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(p0(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let n=this.map.get(e.param)||[],r=n.indexOf(p0(e.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var pM=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function k7(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function MF(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function bF(i){return typeof Blob<"u"&&i instanceof Blob}function EF(i){return typeof FormData<"u"&&i instanceof FormData}function B7(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var ih=class i{constructor(e,t,n,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(k7(this.method)||r?(this.body=n!==void 0?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ks,this.context??=new pM,!this.params)this.params=new $t,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||MF(this.body)||bF(this.body)||EF(this.body)||B7(this.body)?this.body:this.body instanceof $t?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||EF(this.body)?null:bF(this.body)?this.body.type||null:MF(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof $t?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,f=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),u)),e.setParams&&(f=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),f)),new i(t,n,s,{params:f,headers:u,context:h,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}},wc=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(wc||{}),oh=class{constructor(e,t=200,n="OK"){this.headers=e.headers||new ks,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},y0=class i extends oh{constructor(e={}){super(e),this.type=wc.ResponseHeader}clone(e={}){return new i({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Tl=class i extends oh{constructor(e={}){super(e),this.type=wc.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new i({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_c=class extends oh{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},NF=200,V7=204;function fM(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var $i=(()=>{let e=class e{constructor(n){this.handler=n}request(n,r,o={}){let s;if(n instanceof ih)s=n;else{let u;o.headers instanceof ks?u=o.headers:u=new ks(o.headers);let f;o.params&&(o.params instanceof $t?f=o.params:f=new $t({fromObject:o.params})),s=new ih(n,r,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:f,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=Tt(s).pipe(rc(u=>this.handler.handle(u)));if(n instanceof ih||o.observe==="events")return a;let c=a.pipe(cr(u=>u instanceof Tl));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(Ot(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(Ot(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(Ot(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(Ot(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new $t().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,fM(o,r))}post(n,r,o={}){return this.request("POST",n,fM(o,r))}put(n,r,o={}){return this.request("PUT",n,fM(o,r))}};e.\u0275fac=function(r){return new(r||e)(Xe(rh))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),z7=/^\)\]\}',?\n/,H7="X-Request-URL";function SF(i){if(i.url)return i.url;let e=H7.toLocaleLowerCase();return i.headers.get(e)}var j7=(()=>{let e=class e{constructor(){this.fetchImpl=Ue(mM,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=Ue(kn)}handle(n){return new an(r=>{let o=new AbortController;return this.doRequest(n,o.signal,r).then(gM,s=>r.error(new _c({error:s}))),()=>o.abort()})}doRequest(n,r,o){return gn(this,null,function*(){let s=this.createRequestInit(n),a;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,ze({signal:r},s)));G7(y),o.next({type:wc.Sent}),a=yield y}catch(y){o.error(new _c({error:y,status:y.status??0,statusText:y.statusText,url:n.urlWithParams,headers:y.headers}));return}let c=new ks(a.headers),u=a.statusText,f=SF(a)??n.urlWithParams,h=a.status,p=null;if(n.reportProgress&&o.next(new y0({headers:c,status:h,statusText:u,url:f})),a.body){let y=a.headers.get("content-length"),x=[],v=a.body.getReader(),_=0,C,M,S=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>gn(this,null,function*(){for(;;){let{done:P,value:F}=yield v.read();if(P)break;if(x.push(F),_+=F.length,n.reportProgress){M=n.responseType==="text"?(M??"")+(C??=new TextDecoder).decode(F,{stream:!0}):void 0;let $=()=>o.next({type:wc.DownloadProgress,total:y?+y:void 0,loaded:_,partialText:M});S?S.run($):$()}}}));let H=this.concatChunks(x,_);try{let P=a.headers.get("Content-Type")??"";p=this.parseBody(n,H,P)}catch(P){o.error(new _c({error:P,headers:new ks(a.headers),status:a.status,statusText:a.statusText,url:SF(a)??n.urlWithParams}));return}}h===0&&(h=p?NF:0),h>=200&&h<300?(o.next(new Tl({body:p,headers:c,status:h,statusText:u,url:f})),o.complete()):o.error(new _c({error:p,headers:c,status:h,statusText:u,url:f}))})}parseBody(n,r,o){switch(n.responseType){case"json":let s=new TextDecoder().decode(r).replace(z7,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:o});case"arraybuffer":return r.buffer}}createRequestInit(n){let r={},o=n.withCredentials?"include":void 0;if(n.headers.forEach((s,a)=>r[s]=a.join(",")),n.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!n.headers.has("Content-Type")){let s=n.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:o}}concatChunks(n,r){let o=new Uint8Array(r),s=0;for(let a of n)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),mM=class{};function gM(){}function G7(i){i.then(gM,gM)}function LF(i,e){return e(i)}function W7(i,e){return(t,n)=>e.intercept(t,{handle:r=>i(r,n)})}function $7(i,e,t){return(n,r)=>ns(t,()=>e(n,o=>i(o,r)))}var q7=new ct(""),yM=new ct(""),kF=new ct(""),BF=new ct("",{providedIn:"root",factory:()=>!0});function X7(){let i=null;return(e,t)=>{i===null&&(i=(Ue(q7,{optional:!0})??[]).reduceRight(W7,LF));let n=Ue(ya);if(Ue(BF)){let o=n.add();return i(e,t).pipe(sc(()=>n.remove(o)))}else return i(e,t)}}var CF=(()=>{let e=class e extends rh{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=Ue(ya),this.contributeToStability=Ue(BF)}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(yM),...this.injector.get(kF,[])]));this.chain=r.reduceRight((o,s)=>$7(o,s,this.injector),LF)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,o=>this.backend.handle(o)).pipe(sc(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}};e.\u0275fac=function(r){return new(r||e)(Xe(g0),Xe(Tr))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})();var Y7=/^\)\]\}',?\n/;function Z7(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}var AF=(()=>{let e=class e{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new Ne(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Zn(r.\u0275loadImpl()):Tt(null)).pipe(Xr(()=>new an(s=>{let a=r.build();if(a.open(n.method,n.urlWithParams),n.withCredentials&&(a.withCredentials=!0),n.headers.forEach((v,_)=>a.setRequestHeader(v,_.join(","))),n.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let v=n.detectContentTypeHeader();v!==null&&a.setRequestHeader("Content-Type",v)}if(n.responseType){let v=n.responseType.toLowerCase();a.responseType=v!=="json"?v:"text"}let c=n.serializeBody(),u=null,f=()=>{if(u!==null)return u;let v=a.statusText||"OK",_=new ks(a.getAllResponseHeaders()),C=Z7(a)||n.url;return u=new y0({headers:_,status:a.status,statusText:v,url:C}),u},h=()=>{let{headers:v,status:_,statusText:C,url:M}=f(),S=null;_!==V7&&(S=typeof a.response>"u"?a.responseText:a.response),_===0&&(_=S?NF:0);let H=_>=200&&_<300;if(n.responseType==="json"&&typeof S=="string"){let P=S;S=S.replace(Y7,"");try{S=S!==""?JSON.parse(S):null}catch(F){S=P,H&&(H=!1,S={error:F,text:S})}}H?(s.next(new Tl({body:S,headers:v,status:_,statusText:C,url:M||void 0})),s.complete()):s.error(new _c({error:S,headers:v,status:_,statusText:C,url:M||void 0}))},p=v=>{let{url:_}=f(),C=new _c({error:v,status:a.status||0,statusText:a.statusText||"Unknown Error",url:_||void 0});s.error(C)},g=!1,y=v=>{g||(s.next(f()),g=!0);let _={type:wc.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(_.total=v.total),n.responseType==="text"&&a.responseText&&(_.partialText=a.responseText),s.next(_)},x=v=>{let _={type:wc.UploadProgress,loaded:v.loaded};v.lengthComputable&&(_.total=v.total),s.next(_)};return a.addEventListener("load",h),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),n.reportProgress&&(a.addEventListener("progress",y),c!==null&&a.upload&&a.upload.addEventListener("progress",x)),a.send(c),s.next({type:wc.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",h),a.removeEventListener("timeout",p),n.reportProgress&&(a.removeEventListener("progress",y),c!==null&&a.upload&&a.upload.removeEventListener("progress",x)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(Xe(Zu))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),VF=new ct(""),K7="XSRF-TOKEN",J7=new ct("",{providedIn:"root",factory:()=>K7}),Q7="X-XSRF-TOKEN",e$=new ct("",{providedIn:"root",factory:()=>Q7}),v0=class{},t$=(()=>{let e=class e{constructor(n,r,o){this.doc=n,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=f0(n,this.cookieName),this.lastCookieString=n),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(Xe(ii),Xe(Jr),Xe(J7))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})();function n$(i,e){let t=i.url.toLowerCase();if(!Ue(VF)||i.method==="GET"||i.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(i);let n=Ue(v0).getToken(),r=Ue(e$);return n!=null&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),e(i)}var zF=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(zF||{});function i$(i,e){return{\u0275kind:i,\u0275providers:e}}function r$(...i){let e=[$i,AF,CF,{provide:rh,useExisting:CF},{provide:g0,useFactory:()=>Ue(j7,{optional:!0})??Ue(AF)},{provide:yM,useValue:n$,multi:!0},{provide:VF,useValue:!0},{provide:v0,useClass:t$}];for(let t of i)e.push(...t.\u0275providers);return mc(e)}var TF=new ct("");function o$(){return i$(zF.LegacyInterceptors,[{provide:TF,useFactory:X7},{provide:yM,useExisting:TF,multi:!0}])}var HF=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rr({type:e}),e.\u0275inj=Ir({providers:[r$(o$())]});let i=e;return i})();var s$=new ct(""),DF="b",IF="h",RF="s",UF="st",FF="u",PF="rt",m0=new ct(""),a$=["GET","HEAD"];function c$(i,e){let g=Ue(m0),{isCacheActive:t}=g,n=wm(g,["isCacheActive"]),{transferCache:r,method:o}=i;if(!t||r===!1||o==="POST"&&!n.includePostRequests&&!r||o!=="POST"&&!a$.includes(o)||!n.includeRequestsWithAuthHeaders&&l$(i)||n.filter?.(i)===!1)return e(i);let s=Ue(Wu),a=Ue(s$,{optional:!0}),c=nh(Ue(Jr));if(a&&!c)throw new Ne(2803,!1);let u=c&&a?h$(i.url,a):i.url,f=d$(i,u),h=s.get(f,null),p=n.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(p=r.includeHeaders),h){let{[DF]:y,[PF]:x,[IF]:v,[RF]:_,[UF]:C,[FF]:M}=h,S=y;switch(x){case"arraybuffer":S=new TextEncoder().encode(y).buffer;break;case"blob":S=new Blob([y]);break}let H=new ks(v);return Tt(new Tl({body:S,headers:H,status:_,statusText:C,url:M}))}return e(i).pipe(Ei(y=>{y instanceof Tl&&c&&s.set(f,{[DF]:y.body,[IF]:u$(y.headers,p),[RF]:y.status,[UF]:y.statusText,[FF]:u,[PF]:i.responseType})}))}function l$(i){return i.headers.has("authorization")||i.headers.has("proxy-authorization")}function u$(i,e){if(!e)return{};let t={};for(let n of e){let r=i.getAll(n);r!==null&&(t[n]=r)}return t}function OF(i){return[...i.keys()].sort().map(e=>`${e}=${i.getAll(e)}`).join("&")}function d$(i,e){let{params:t,method:n,responseType:r}=i,o=OF(t),s=i.serializeBody();s instanceof URLSearchParams?s=OF(s):typeof s!="string"&&(s="");let a=[n,r,e,s,o].join("|"),c=f$(a);return c}function f$(i){let e=0;for(let t of i)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function jF(i){return[{provide:m0,useFactory:()=>(wa("NgHttpTransferCache"),ze({isCacheActive:!0},i))},{provide:kF,useValue:c$,multi:!0,deps:[Wu,m0]},{provide:Xu,multi:!0,useFactory:()=>{let e=Ue(Ma),t=Ue(m0);return()=>{u0(e).then(()=>{t.isCacheActive=!1})}}}]}function h$(i,e){let t=new URL(i,"resolve://").origin,n=e[t];return n?i.replace(t,n):i}var wM=class extends d0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},xM=class i extends wM{static makeCurrent(){mF(new i)}onAndCancel(e,t,n){return e.addEventListener(t,n),()=>{e.removeEventListener(t,n)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=p$();return t==null?null:m$(t)}resetBaseElement(){sh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return f0(document.cookie,e)}},sh=null;function p$(){return sh=sh||document.querySelector("base"),sh?sh.getAttribute("href"):null}function m$(i){return new URL(i,document.baseURI).pathname}var g$=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),_0=new ct(""),$F=(()=>{let e=class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new Ne(5101,!1);return this._eventNameToPlugin.set(n,r),r}};e.\u0275fac=function(r){return new(r||e)(Xe(_0),Xe(kn))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),ah=class{constructor(e){this._doc=e}},vM="ng-app-id",qF=(()=>{let e=class e{constructor(n,r,o,s={}){this.doc=n,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nh(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(o=>o.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${vM}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(n,r){let o=this.styleRef;if(o.has(n)){let s=o.get(n);return s.usage+=r,s.usage}return o.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===n)return o.delete(r),s.removeAttribute(vM),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(vM,this.appId),n.appendChild(a),a}}addStyleToHost(n,r){let o=this.getStyleElement(n,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(Xe(ii),Xe(qg),Xe(F1,8),Xe(Jr))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),_M={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},EM=/%COMP%/g,XF="%COMP%",y$=`_nghost-${XF}`,v$=`_ngcontent-${XF}`,_$=!0,w$=new ct("",{providedIn:"root",factory:()=>_$});function x$(i){return v$.replace(EM,i)}function M$(i){return y$.replace(EM,i)}function YF(i,e){return e.map(t=>t.replace(EM,i))}var w0=(()=>{let e=class e{constructor(n,r,o,s,a,c,u,f=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=nh(c),this.defaultRenderer=new ch(n,a,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Is.ShadowDom&&(r=Zt(ze({},r),{encapsulation:Is.Emulated}));let o=this.getOrCreateRenderer(n,r);return o instanceof x0?o.applyToHost(n):o instanceof lh&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Is.Emulated:s=new x0(u,f,r,this.appId,h,a,c,p);break;case Is.ShadowDom:return new MM(u,f,n,r,a,c,this.nonce,p);default:s=new lh(u,f,r,h,a,c,p);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(Xe($F),Xe(qF),Xe(qg),Xe(w$),Xe(ii),Xe(Jr),Xe(kn),Xe(F1))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),ch=class{constructor(e,t,n,r){this.eventManager=e,this.doc=t,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(_M[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(GF(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(GF(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){t.remove()}selectRootElement(e,t){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new Ne(-5104,!1);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;let o=_M[r];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){let r=_M[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(ma.DashCase|ma.Important)?e.style.setProperty(t,n,r&ma.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&ma.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e!=null&&(e[t]=n)}setValue(e,t){e.nodeValue=t}listen(e,t,n){if(typeof e=="string"&&(e=ba().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(n))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function GF(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var MM=class extends ch{constructor(e,t,n,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=YF(r.id,r.styles);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},lh=class extends ch{constructor(e,t,n,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?YF(c,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},x0=class extends lh{constructor(e,t,n,r,o,s,a,c){let u=r+"-"+n.id;super(e,t,n,o,s,a,c,u),this.contentAttr=x$(u),this.hostAttr=M$(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}},b$=(()=>{let e=class e extends ah{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(Xe(ii))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),E$=(()=>{let e=class e extends ah{constructor(n){super(n),this.delegate=Ue(aF,{optional:!0})}supports(n){return this.delegate?this.delegate.supports(n):!1}addEventListener(n,r,o){return this.delegate.addEventListener(n,r,o)}removeEventListener(n,r,o){return this.delegate.removeEventListener(n,r,o)}};e.\u0275fac=function(r){return new(r||e)(Xe(ii))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),WF=["alt","control","meta","shift"],S$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},C$={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},A$=(()=>{let e=class e extends ah{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ba().onAndCancel(n,s.domEventName,a))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),WF.forEach(f=>{let h=r.indexOf(f);h>-1&&(r.splice(h,1),a+=f+".")}),a+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(n,r){let o=S$[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(o=n.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),WF.forEach(a=>{if(a!==o){let c=C$[a];c(n)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(n,r,o){return s=>{e.matchEventFullKeyCode(s,n)&&o.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}};e.\u0275fac=function(r){return new(r||e)(Xe(ii))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})();function M0(i,e){return sF(ze({rootComponent:i},T$(e)))}function T$(i){return{appProviders:[...F$,...i?.providers??[]],platformProviders:U$}}function D$(){xM.makeCurrent()}function I$(){return new dc}function R$(){return hR(document),document}var U$=[{provide:Jr,useValue:dM},{provide:R1,useValue:D$,multi:!0},{provide:ii,useFactory:R$,deps:[]}];var F$=[{provide:Bg,useValue:"root"},{provide:dc,useFactory:I$,deps:[]},{provide:_0,useClass:b$,multi:!0,deps:[ii,kn,Jr]},{provide:_0,useClass:A$,multi:!0,deps:[ii]},{provide:_0,useClass:E$,multi:!0},w0,qF,$F,{provide:hc,useExisting:w0},{provide:Zu,useClass:g$,deps:[]},[]];var ZF=(()=>{let e=class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}};e.\u0275fac=function(r){return new(r||e)(Xe(ii))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var SM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=Xe(P$),o},providedIn:"root"});let i=e;return i})(),P$=(()=>{let e=class e extends SM{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case is.NONE:return r;case is.HTML:return va(r,"HTML")?Eo(r):L1(this._doc,String(r)).toString();case is.STYLE:return va(r,"Style")?Eo(r):r;case is.SCRIPT:if(va(r,"Script"))return Eo(r);throw new Ne(5200,!1);case is.URL:return va(r,"URL")?Eo(r):Kg(String(r));case is.RESOURCE_URL:if(va(r,"ResourceURL"))return Eo(r);throw new Ne(5201,!1);default:throw new Ne(5202,!1)}}bypassSecurityTrustHtml(n){return ER(n)}bypassSecurityTrustStyle(n){return SR(n)}bypassSecurityTrustScript(n){return CR(n)}bypassSecurityTrustUrl(n){return AR(n)}bypassSecurityTrustResourceUrl(n){return TR(n)}};e.\u0275fac=function(r){return new(r||e)(Xe(ii))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),bM=function(i){return i[i.NoHttpTransferCache=0]="NoHttpTransferCache",i[i.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",i[i.I18nSupport=2]="I18nSupport",i[i.EventReplay=3]="EventReplay",i}(bM||{});function KF(...i){let e=[],t=new Set,n=t.has(bM.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of i)t.add(o),r.length&&e.push(r);return mc([[],cF(),t.has(bM.NoHttpTransferCache)||n?[]:jF({}),e])}var zt="primary",Sh=Symbol("RouteTitle"),IM=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function rd(i){return new IM(i)}function O$(i,e,t){let n=t.path.split("/");if(n.length>i.length||t.pathMatch==="full"&&(e.hasChildren()||n.length<i.length))return null;let r={};for(let o=0;o<n.length;o++){let s=n[o],a=i[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function N$(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!Bs(i[t],e[t]))return!1;return!0}function Bs(i,e){let t=i?RM(i):void 0,n=e?RM(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!sP(i[r],e[r]))return!1;return!0}function RM(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function sP(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;let t=[...i].sort(),n=[...e].sort();return t.every((r,o)=>n[o]===r)}else return i===e}function aP(i){return i.length>0?i[i.length-1]:null}function bc(i){return Nw(i)?i:Sl(i)?Zn(Promise.resolve(i)):Tt(i)}var L$={exact:lP,subset:uP},cP={exact:k$,subset:B$,ignored:()=>!0};function QF(i,e,t){return L$[t.paths](i.root,e.root,t.matrixParams)&&cP[t.queryParams](i.queryParams,e.queryParams)&&!(t.fragment==="exact"&&i.fragment!==e.fragment)}function k$(i,e){return Bs(i,e)}function lP(i,e,t){if(!Il(i.segments,e.segments)||!S0(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!i.children[n]||!lP(i.children[n],e.children[n],t))return!1;return!0}function B$(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>sP(i[t],e[t]))}function uP(i,e,t){return dP(i,e,e.segments,t)}function dP(i,e,t,n){if(i.segments.length>t.length){let r=i.segments.slice(0,t.length);return!(!Il(r,t)||e.hasChildren()||!S0(r,t,n))}else if(i.segments.length===t.length){if(!Il(i.segments,t)||!S0(i.segments,t,n))return!1;for(let r in e.children)if(!i.children[r]||!uP(i.children[r],e.children[r],n))return!1;return!0}else{let r=t.slice(0,i.segments.length),o=t.slice(i.segments.length);return!Il(i.segments,r)||!S0(i.segments,r,n)||!i.children[zt]?!1:dP(i.children[zt],e,o,n)}}function S0(i,e,t){return e.every((n,r)=>cP[t](i[r].parameters,n.parameters))}var Sa=class{constructor(e=new bn([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap??=rd(this.queryParams),this._queryParamMap}toString(){return H$.serialize(this)}},bn=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return C0(this)}},Dl=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=rd(this.parameters),this._parameterMap}toString(){return hP(this)}};function V$(i,e){return Il(i,e)&&i.every((t,n)=>Bs(t.parameters,e[n].parameters))}function Il(i,e){return i.length!==e.length?!1:i.every((t,n)=>t.path===e[n].path)}function z$(i,e){let t=[];return Object.entries(i.children).forEach(([n,r])=>{n===zt&&(t=t.concat(e(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==zt&&(t=t.concat(e(r,n)))}),t}var ib=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:()=>new gh,providedIn:"root"});let i=e;return i})(),gh=class{parse(e){let t=new FM(e);return new Sa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${uh(e.root,!0)}`,n=W$(e.queryParams),r=typeof e.fragment=="string"?`#${j$(e.fragment)}`:"";return`${t}${n}${r}`}},H$=new gh;function C0(i){return i.segments.map(e=>hP(e)).join("/")}function uh(i,e){if(!i.hasChildren())return C0(i);if(e){let t=i.children[zt]?uh(i.children[zt],!1):"",n=[];return Object.entries(i.children).forEach(([r,o])=>{r!==zt&&n.push(`${r}:${uh(o,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}else{let t=z$(i,(n,r)=>r===zt?[uh(i.children[zt],!1)]:[`${r}:${uh(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[zt]!=null?`${C0(i)}/${t[0]}`:`${C0(i)}/(${t.join("//")})`}}function fP(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function b0(i){return fP(i).replace(/%3B/gi,";")}function j$(i){return encodeURI(i)}function UM(i){return fP(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function A0(i){return decodeURIComponent(i)}function eP(i){return A0(i.replace(/\+/g,"%20"))}function hP(i){return`${UM(i.path)}${G$(i.parameters)}`}function G$(i){return Object.entries(i).map(([e,t])=>`;${UM(e)}=${UM(t)}`).join("")}function W$(i){let e=Object.entries(i).map(([t,n])=>Array.isArray(n)?n.map(r=>`${b0(t)}=${b0(r)}`).join("&"):`${b0(t)}=${b0(n)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var $$=/^[^\/()?;#]+/;function CM(i){let e=i.match($$);return e?e[0]:""}var q$=/^[^\/()?;=#]+/;function X$(i){let e=i.match(q$);return e?e[0]:""}var Y$=/^[^=?&#]+/;function Z$(i){let e=i.match(Y$);return e?e[0]:""}var K$=/^[^&#]+/;function J$(i){let e=i.match(K$);return e?e[0]:""}var FM=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[zt]=new bn(e,t)),n}parseSegment(){let e=CM(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ne(4009,!1);return this.capture(e),new Dl(A0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=X$(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let r=CM(this.remaining);r&&(n=r,this.capture(n))}e[A0(t)]=A0(n)}parseQueryParam(e){let t=Z$(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let s=J$(this.remaining);s&&(n=s,this.capture(n))}let r=eP(t),o=eP(n);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=CM(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ne(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=zt);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[zt]:new bn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ne(4011,!1)}};function pP(i){return i.segments.length>0?new bn([],{[zt]:i}):i}function mP(i){let e={};for(let[n,r]of Object.entries(i.children)){let o=mP(r);if(n===zt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[n]=o)}let t=new bn(i.segments,e);return Q$(t)}function Q$(i){if(i.numberOfChildren===1&&i.children[zt]){let e=i.children[zt];return new bn(i.segments.concat(e.segments),e.children)}return i}function Rl(i){return i instanceof Sa}function eq(i,e,t=null,n=null){let r=gP(i);return yP(r,e,t,n)}function gP(i){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new bn(o.url,s);return o===i&&(e=a),a}let n=t(i.root),r=pP(n);return e??r}function yP(i,e,t,n){let r=i;for(;r.parent;)r=r.parent;if(e.length===0)return AM(r,r,r,t,n);let o=tq(e);if(o.toRoot())return AM(r,r,new bn([],{}),t,n);let s=nq(o,r,i),a=s.processChildren?hh(s.segmentGroup,s.index,o.commands):_P(s.segmentGroup,s.index,o.commands);return AM(r,s.segmentGroup,a,t,n)}function T0(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function yh(i){return typeof i=="object"&&i!=null&&i.outlets}function AM(i,e,t,n,r){let o={};n&&Object.entries(n).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;i===e?s=t:s=vP(i,e,t);let a=pP(mP(s));return new Sa(a,o,r)}function vP(i,e,t){let n={};return Object.entries(i.children).forEach(([r,o])=>{o===e?n[r]=t:n[r]=vP(o,e,t)}),new bn(i.segments,n)}var D0=class{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&T0(n[0]))throw new Ne(4003,!1);let r=n.find(yh);if(r&&r!==aP(n))throw new Ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tq(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new D0(!0,0,i);let e=0,t=!1,n=i.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new D0(t,e,n)}var td=class{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}};function nq(i,e,t){if(i.isAbsolute)return new td(e,!0,0);if(!t)return new td(e,!1,NaN);if(t.parent===null)return new td(t,!0,0);let n=T0(i.commands[0])?0:1,r=t.segments.length-1+n;return iq(t,r,i.numberOfDoubleDots)}function iq(i,e,t){let n=i,r=e,o=t;for(;o>r;){if(o-=r,n=n.parent,!n)throw new Ne(4005,!1);r=n.segments.length}return new td(n,!1,r-o)}function rq(i){return yh(i[0])?i[0].outlets:{[zt]:i}}function _P(i,e,t){if(i??=new bn([],{}),i.segments.length===0&&i.hasChildren())return hh(i,e,t);let n=oq(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let o=new bn(i.segments.slice(0,n.pathIndex),{});return o.children[zt]=new bn(i.segments.slice(n.pathIndex),i.children),hh(o,0,r)}else return n.match&&r.length===0?new bn(i.segments,{}):n.match&&!i.hasChildren()?PM(i,e,t):n.match?hh(i,0,r):PM(i,e,t)}function hh(i,e,t){if(t.length===0)return new bn(i.segments,{});{let n=rq(t),r={};if(Object.keys(n).some(o=>o!==zt)&&i.children[zt]&&i.numberOfChildren===1&&i.children[zt].segments.length===0){let o=hh(i.children[zt],e,t);return new bn(i.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=_P(i.children[o],e,s))}),Object.entries(i.children).forEach(([o,s])=>{n[o]===void 0&&(r[o]=s)}),new bn(i.segments,r)}}function oq(i,e,t){let n=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return o;let s=i.segments[r],a=t[n];if(yh(a))break;let c=`${a}`,u=n<t.length-1?t[n+1]:null;if(r>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!nP(c,u,s))return o;n+=2}else{if(!nP(c,{},s))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function PM(i,e,t){let n=i.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(yh(o)){let c=sq(o.outlets);return new bn(n,c)}if(r===0&&T0(t[0])){let c=i.segments[e];n.push(new Dl(c.path,tP(t[0]))),r++;continue}let s=yh(o)?o.outlets[zt]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&T0(a)?(n.push(new Dl(s,tP(a))),r+=2):(n.push(new Dl(s,{})),r++)}return new bn(n,{})}function sq(i){let e={};return Object.entries(i).forEach(([t,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[t]=PM(new bn([],{}),0,n))}),e}function tP(i){let e={};return Object.entries(i).forEach(([t,n])=>e[t]=`${n}`),e}function nP(i,e,t){return i==t.path&&Bs(e,t.parameters)}var ph="imperative",qi=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(qi||{}),Co=class{constructor(e,t){this.id=e,this.url=t}},vh=class extends Co{constructor(e,t,n="imperative",r=null){super(e,t),this.type=qi.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mc=class extends Co{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=qi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},oo=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(oo||{}),OM=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(OM||{}),Ea=class extends Co{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=qi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ul=class extends Co{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=qi.NavigationSkipped}},_h=class extends Co{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=qi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},I0=class extends Co{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=qi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},NM=class extends Co{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=qi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},LM=class extends Co{constructor(e,t,n,r,o){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o,this.type=qi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kM=class extends Co{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=qi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},BM=class extends Co{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=qi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},VM=class{constructor(e){this.route=e,this.type=qi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zM=class{constructor(e){this.route=e,this.type=qi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},HM=class{constructor(e){this.snapshot=e,this.type=qi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jM=class{constructor(e){this.snapshot=e,this.type=qi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},GM=class{constructor(e){this.snapshot=e,this.type=qi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},WM=class{constructor(e){this.snapshot=e,this.type=qi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var wh=class{},od=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function aq(i,e){return i.providers&&!i._injector&&(i._injector=tM(i.providers,e,`Route: ${i.path}`)),i._injector??e}function ss(i){return i.outlet||zt}function cq(i,e){let t=i.filter(n=>ss(n)===e);return t.push(...i.filter(n=>ss(n)!==e)),t}function Ch(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var $M=class{get injector(){return Ch(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new L0(this.rootInjector),this.attachRef=null}},L0=(()=>{let e=class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new $M(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}};e.\u0275fac=function(r){return new(r||e)(Xe(Tr))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),R0=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=qM(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){let t=qM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=XM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return XM(e,this._root).map(t=>t.value)}};function qM(i,e){if(i===e.value)return e;for(let t of e.children){let n=qM(i,t);if(n)return n}return null}function XM(i,e){if(i===e.value)return[e];for(let t of e.children){let n=XM(i,t);if(n.length)return n.unshift(e),n}return[]}var ro=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ed(i){let e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}var U0=class extends R0{constructor(e,t){super(e),this.snapshot=t,rb(this,e)}toString(){return this.snapshot.toString()}};function wP(i){let e=lq(i),t=new ai([new Dl("",{})]),n=new ai({}),r=new ai({}),o=new ai({}),s=new ai(""),a=new mr(t,n,o,s,r,zt,i,e.root);return a.snapshot=e.root,new U0(new ro(a,[]),e)}function lq(i){let e={},t={},n={},r="",o=new nd([],e,n,r,t,zt,i,null,{});return new P0("",new ro(o,[]))}var mr=class{constructor(e,t,n,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ot(u=>u[Sh]))??Tt(void 0),this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ot(e=>rd(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ot(e=>rd(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function F0(i,e,t="emptyOnly"){let n,{routeConfig:r}=i;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:ze(ze({},e.params),i.params),data:ze(ze({},e.data),i.data),resolve:ze(ze(ze(ze({},i.data),e.data),r?.data),i._resolvedData)}:n={params:ze({},i.params),data:ze({},i.data),resolve:ze(ze({},i.data),i._resolvedData??{})},r&&MP(r)&&(n.resolve[Sh]=r.title),n}var nd=class{get title(){return this.data?.[Sh]}constructor(e,t,n,r,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rd(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},P0=class extends R0{constructor(e,t){super(t),this.url=e,rb(this,t)}toString(){return xP(this._root)}};function rb(i,e){e.value._routerState=i,e.children.forEach(t=>rb(i,t))}function xP(i){let e=i.children.length>0?` { ${i.children.map(xP).join(", ")} } `:"";return`${i.value}${e}`}function TM(i){if(i.snapshot){let e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,Bs(e.queryParams,t.queryParams)||i.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&i.fragmentSubject.next(t.fragment),Bs(e.params,t.params)||i.paramsSubject.next(t.params),N$(e.url,t.url)||i.urlSubject.next(t.url),Bs(e.data,t.data)||i.dataSubject.next(t.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function YM(i,e){let t=Bs(i.params,e.params)&&V$(i.url,e.url),n=!i.parent!=!e.parent;return t&&!n&&(!i.parent||YM(i.parent,e.parent))}function MP(i){return typeof i.title=="string"||i.title===null}var ob=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=zt,this.activateEvents=new _n,this.deactivateEvents=new _n,this.attachEvents=new _n,this.detachEvents=new _n,this.parentContexts=Ue(L0),this.location=Ue(Os),this.changeDetector=Ue(io),this.inputBinder=Ue(sb,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ne(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Ne(4013,!1);this._activatedRoute=n;let o=this.location,a=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new ZM(n,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Nn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Si]});let i=e;return i})(),ZM=class i{__ngOutletInjector(e){return new i(this.route,this.childContexts,e)}constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===mr?this.route:e===L0?this.childContexts:this.parent.get(e,t)}},sb=new ct("");function uq(i,e,t){let n=xh(i,e._root,t?t._root:void 0);return new U0(n,e)}function xh(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){let n=t.value;n._futureSnapshot=e.value;let r=dq(i,e,t);return new ro(n,r)}else{if(i.shouldAttach(e.value)){let o=i.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>xh(i,a)),s}}let n=fq(e.value),r=e.children.map(o=>xh(i,o));return new ro(n,r)}}function dq(i,e,t){return e.children.map(n=>{for(let r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return xh(i,n,r);return xh(i,n)})}function fq(i){return new mr(new ai(i.url),new ai(i.params),new ai(i.queryParams),new ai(i.fragment),new ai(i.data),i.outlet,i.component,i)}var Mh=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},bP="ngNavigationCancelingError";function O0(i,e){let{redirectTo:t,navigationBehaviorOptions:n}=Rl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=EP(!1,oo.Redirect);return r.url=t,r.navigationBehaviorOptions=n,r}function EP(i,e){let t=new Error(`NavigationCancelingError: ${i||""}`);return t[bP]=!0,t.cancellationCode=e,t}function hq(i){return SP(i)&&Rl(i.url)}function SP(i){return!!i&&i[bP]}var pq=(i,e,t,n)=>Ot(r=>(new KM(e,r.targetRouterState,r.currentRouterState,t,n).activate(i),r)),KM=class{constructor(e,t,n,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),TM(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){let r=ed(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],n),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(e,t,n){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,n);else o&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,o=ed(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(n&&n.outlet){let s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,o=ed(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,t,n){let r=ed(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new WM(o.value.snapshot))}),e.children.length&&this.forwardEvent(new jM(e.value.snapshot))}activateRoutes(e,t,n){let r=e.value,o=t?t.value:null;if(TM(r),r===o)if(r.component){let s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,n);else if(r.component){let s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),TM(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,n)}},N0=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},id=class{constructor(e,t){this.component=e,this.route=t}};function mq(i,e,t){let n=i._root,r=e?e._root:null;return dh(n,r,t,[n.value])}function gq(i){let e=i.routeConfig?i.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:i,guards:e}}function ad(i,e){let t=Symbol(),n=e.get(i,t);return n===t?typeof i=="function"&&!YI(i)?i:e.get(i):n}function dh(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=ed(e);return i.children.forEach(s=>{yq(s,o[s.value.outlet],t,n.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>mh(a,t.getContext(s),r)),r}function yq(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=i.value,s=e?e.value:null,a=t?t.getContext(i.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=vq(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new N0(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?dh(i,e,a?a.children:null,n,r):dh(i,e,t,n,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new id(a.outlet.component,s))}else s&&mh(e,a,r),r.canActivateChecks.push(new N0(n)),o.component?dh(i,null,a?a.children:null,n,r):dh(i,null,t,n,r);return r}function vq(i,e,t){if(typeof t=="function")return t(i,e);switch(t){case"pathParamsChange":return!Il(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Il(i.url,e.url)||!Bs(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!YM(i,e)||!Bs(i.queryParams,e.queryParams);case"paramsChange":default:return!YM(i,e)}}function mh(i,e,t){let n=ed(i),r=i.value;Object.entries(n).forEach(([o,s])=>{r.component?e?mh(s,e.children.getContext(o),t):mh(s,null,t):mh(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new id(e.outlet.component,r)):t.canDeactivateChecks.push(new id(null,r)):t.canDeactivateChecks.push(new id(null,r))}function Ah(i){return typeof i=="function"}function _q(i){return typeof i=="boolean"}function wq(i){return i&&Ah(i.canLoad)}function xq(i){return i&&Ah(i.canActivate)}function Mq(i){return i&&Ah(i.canActivateChild)}function bq(i){return i&&Ah(i.canDeactivate)}function Eq(i){return i&&Ah(i.canMatch)}function CP(i){return i instanceof qo||i?.name==="EmptyError"}var E0=Symbol("INITIAL_VALUE");function sd(){return Xr(i=>Xm(i.map(e=>e.pipe(da(1),jw(E0)))).pipe(Ot(e=>{for(let t of e)if(t!==!0){if(t===E0)return E0;if(t===!1||Sq(t))return t}return!0}),cr(e=>e!==E0),da(1)))}function Sq(i){return Rl(i)||i instanceof Mh}function Cq(i,e){return bi(t=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Tt(Zt(ze({},t),{guardsResult:!0})):Aq(s,n,r,i).pipe(bi(a=>a&&_q(a)?Tq(n,o,i,e):Tt(a)),Ot(a=>Zt(ze({},t),{guardsResult:a})))})}function Aq(i,e,t,n){return Zn(i).pipe(bi(r=>Fq(r.component,r.route,t,e,n)),Xo(r=>r!==!0,!0))}function Tq(i,e,t,n){return Zn(e).pipe(rc(r=>Tu(Iq(r.route.parent,n),Dq(r.route,n),Uq(i,r.path,t),Rq(i,r.route,t))),Xo(r=>r!==!0,!0))}function Dq(i,e){return i!==null&&e&&e(new GM(i)),Tt(!0)}function Iq(i,e){return i!==null&&e&&e(new HM(i)),Tt(!0)}function Rq(i,e,t){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return Tt(!0);let r=n.map(o=>Ym(()=>{let s=Ch(e)??t,a=ad(o,s),c=xq(a)?a.canActivate(e,i):ns(s,()=>a(e,i));return bc(c).pipe(Xo())}));return Tt(r).pipe(sd())}function Uq(i,e,t){let n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>gq(s)).filter(s=>s!==null).map(s=>Ym(()=>{let a=s.guards.map(c=>{let u=Ch(s.node)??t,f=ad(c,u),h=Mq(f)?f.canActivateChild(n,i):ns(u,()=>f(n,i));return bc(h).pipe(Xo())});return Tt(a).pipe(sd())}));return Tt(o).pipe(sd())}function Fq(i,e,t,n,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Tt(!0);let s=o.map(a=>{let c=Ch(e)??r,u=ad(a,c),f=bq(u)?u.canDeactivate(i,e,t,n):ns(c,()=>u(i,e,t,n));return bc(f).pipe(Xo())});return Tt(s).pipe(sd())}function Pq(i,e,t,n){let r=e.canLoad;if(r===void 0||r.length===0)return Tt(!0);let o=r.map(s=>{let a=ad(s,i),c=wq(a)?a.canLoad(e,t):ns(i,()=>a(e,t));return bc(c)});return Tt(o).pipe(sd(),AP(n))}function AP(i){return Uw(Ei(e=>{if(typeof e!="boolean")throw O0(i,e)}),Ot(e=>e===!0))}function Oq(i,e,t,n){let r=e.canMatch;if(!r||r.length===0)return Tt(!0);let o=r.map(s=>{let a=ad(s,i),c=Eq(a)?a.canMatch(e,t):ns(i,()=>a(e,t));return bc(c)});return Tt(o).pipe(sd(),AP(n))}var bh=class{constructor(e){this.segmentGroup=e||null}},Eh=class extends Error{constructor(e){super(),this.urlTree=e}};function Qu(i){return Au(new bh(i))}function Nq(i){return Au(new Ne(4e3,!1))}function Lq(i){return Au(EP(!1,oo.GuardRejected))}var JM=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return Tt(n);if(r.numberOfChildren>1||!r.children[zt])return Nq(`${e.redirectTo}`);r=r.children[zt]}}applyRedirectCommands(e,t,n,r,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:f,url:h,outlet:p,params:g,data:y,title:x}=r,v=ns(o,()=>a({params:g,data:y,queryParams:c,fragment:u,routeConfig:f,url:h,outlet:p,title:x}));if(v instanceof Sa)throw new Eh(v);t=v}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n);if(t[0]==="/")throw new Eh(s);return s}applyRedirectCreateUrlTree(e,t,n,r){let o=this.createSegmentGroup(e,t.root,n,r);return new Sa(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let n={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);n[r]=t[a]}else n[r]=o}),n}createSegmentGroup(e,t,n,r){let o=this.createSegments(e,t.segments,n,r),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,n,r)}),new bn(o,s)}createSegments(e,t,n,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,n))}findPosParam(e,t,n){let r=n[t.path.substring(1)];if(!r)throw new Ne(4001,!1);return r}findOrReturn(e,t){let n=0;for(let r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}},QM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kq(i,e,t,n,r){let o=ab(i,e,t);return o.matched?(n=aq(e,n),Oq(n,e,t,r).pipe(Ot(s=>s===!0?o:ze({},QM)))):Tt(o)}function ab(i,e,t){if(e.path==="**")return Bq(t);if(e.path==="")return e.pathMatch==="full"&&(i.hasChildren()||t.length>0)?ze({},QM):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||O$)(t,i,e);if(!r)return ze({},QM);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?ze(ze({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Bq(i){return{matched:!0,parameters:i.length>0?aP(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function iP(i,e,t,n){return t.length>0&&Hq(i,t,n)?{segmentGroup:new bn(e,zq(n,new bn(t,i.children))),slicedSegments:[]}:t.length===0&&jq(i,t,n)?{segmentGroup:new bn(i.segments,Vq(i,t,n,i.children)),slicedSegments:t}:{segmentGroup:new bn(i.segments,i.children),slicedSegments:t}}function Vq(i,e,t,n){let r={};for(let o of t)if(k0(i,e,o)&&!n[ss(o)]){let s=new bn([],{});r[ss(o)]=s}return ze(ze({},n),r)}function zq(i,e){let t={};t[zt]=e;for(let n of i)if(n.path===""&&ss(n)!==zt){let r=new bn([],{});t[ss(n)]=r}return t}function Hq(i,e,t){return t.some(n=>k0(i,e,n)&&ss(n)!==zt)}function jq(i,e,t){return t.some(n=>k0(i,e,n))}function k0(i,e,t){return(i.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Gq(i,e,t,n){return ss(i)!==n&&(n===zt||!k0(e,t,i))?!1:ab(e,i,t).matched}function Wq(i,e,t){return e.length===0&&!i.children[t]}var eb=class{};function $q(i,e,t,n,r,o,s="emptyOnly"){return new tb(i,e,t,n,r,s,o).recognize()}var qq=31,tb=class{constructor(e,t,n,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new JM(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=iP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ot(({children:t,rootSnapshot:n})=>{let r=new ro(n,t),o=new P0("",r),s=eq(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new nd([],Object.freeze({}),Object.freeze(ze({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),zt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,zt,t).pipe(Ot(n=>({children:n,rootSnapshot:t})),ic(n=>{if(n instanceof Eh)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof bh?this.noMatchError(n):n}))}processSegmentGroup(e,t,n,r,o){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,t,n,o):this.processSegment(e,t,n,n.segments,r,!0,o).pipe(Ot(s=>s instanceof ro?[s]:[]))}processChildren(e,t,n,r){let o=[];for(let s of Object.keys(n.children))s==="primary"?o.unshift(s):o.push(s);return Zn(o).pipe(rc(s=>{let a=n.children[s],c=cq(t,s);return this.processSegmentGroup(e,c,a,s,r)}),Hw((s,a)=>(s.push(...a),s)),oc(null),zw(),bi(s=>{if(s===null)return Qu(n);let a=TP(s);return Xq(a),Tt(a)}))}processSegment(e,t,n,r,o,s,a){return Zn(t).pipe(rc(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,n,r,o,s,a).pipe(ic(u=>{if(u instanceof bh)return Tt(null);throw u}))),Xo(c=>!!c),ic(c=>{if(CP(c))return Wq(n,r,o)?Tt(new eb):Qu(n);throw c}))}processSegmentAgainstRoute(e,t,n,r,o,s,a,c){return Gq(n,r,o,s)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,n,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,n,o,s,c):Qu(r):Qu(r)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,o,s,a){let{matched:c,parameters:u,consumedSegments:f,positionalParamSegments:h,remainingSegments:p}=ab(t,r,o);if(!c)return Qu(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>qq&&(this.allowRedirects=!1));let g=new nd(o,u,Object.freeze(ze({},this.urlTree.queryParams)),this.urlTree.fragment,rP(r),ss(r),r.component??r._loadedComponent??null,r,oP(r)),y=F0(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(y.params),g.data=Object.freeze(y.data);let x=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(r,x).pipe(bi(v=>this.processSegment(e,n,t,v.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,n,r,o,s){let a=kq(t,n,r,e,this.urlSerializer);return n.path==="**"&&(t.children={}),a.pipe(Xr(c=>c.matched?(e=n._injector??e,this.getChildConfig(e,n,r).pipe(Xr(({routes:u})=>{let f=n._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=c,y=new nd(p,h,Object.freeze(ze({},this.urlTree.queryParams)),this.urlTree.fragment,rP(n),ss(n),n.component??n._loadedComponent??null,n,oP(n)),x=F0(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(x.params),y.data=Object.freeze(x.data);let{segmentGroup:v,slicedSegments:_}=iP(t,p,g,u);if(_.length===0&&v.hasChildren())return this.processChildren(f,u,v,y).pipe(Ot(M=>new ro(y,M)));if(u.length===0&&_.length===0)return Tt(new ro(y,[]));let C=ss(n)===o;return this.processSegment(f,u,v,_,C?zt:o,!0,y).pipe(Ot(M=>new ro(y,M instanceof ro?[M]:[])))}))):Qu(t)))}getChildConfig(e,t,n){return t.children?Tt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Tt({routes:t._loadedRoutes,injector:t._loadedInjector}):Pq(e,t,n,this.urlSerializer).pipe(bi(r=>r?this.configLoader.loadChildren(e,t).pipe(Ei(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Lq(t))):Tt({routes:[],injector:e})}};function Xq(i){i.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}function Yq(i){let e=i.value.routeConfig;return e&&e.path===""}function TP(i){let e=[],t=new Set;for(let n of i){if(!Yq(n)){e.push(n);continue}let r=e.find(o=>n.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...n.children),t.add(r)):e.push(n)}for(let n of t){let r=TP(n.children);e.push(new ro(n.value,r))}return e.filter(n=>!t.has(n))}function rP(i){return i.data||{}}function oP(i){return i.resolve||{}}function Zq(i,e,t,n,r,o){return bi(s=>$q(i,e,t,n,s.extractedUrl,r,o).pipe(Ot(({state:a,tree:c})=>Zt(ze({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Kq(i,e){return bi(t=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return Tt(t);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of DP(c))s.add(u);let a=0;return Zn(s).pipe(rc(c=>o.has(c)?Jq(c,n,i,e):(c.data=F0(c,c.parent,i).resolve,Tt(void 0))),Ei(()=>a++),Du(1),bi(c=>a===s.size?Tt(t):qr))})}function DP(i){let e=i.children.map(t=>DP(t)).flat();return[i,...e]}function Jq(i,e,t,n){let r=i.routeConfig,o=i._resolve;return r?.title!==void 0&&!MP(r)&&(o[Sh]=r.title),Qq(o,i,e,n).pipe(Ot(s=>(i._resolvedData=s,i.data=F0(i,i.parent,t).resolve,null)))}function Qq(i,e,t,n){let r=RM(i);if(r.length===0)return Tt({});let o={};return Zn(r).pipe(bi(s=>eX(i[s],e,t,n).pipe(Xo(),Ei(a=>{if(a instanceof Mh)throw O0(new gh,a);o[s]=a}))),Du(1),Vw(o),ic(s=>CP(s)?qr:Au(s)))}function eX(i,e,t,n){let r=Ch(e)??n,o=ad(i,r),s=o.resolve?o.resolve(e,t):ns(r,()=>o(e,t));return bc(s)}function DM(i){return Xr(e=>{let t=i(e);return t?Zn(t).pipe(Ot(()=>e)):Tt(e)})}var IP=(()=>{let e=class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===zt);return r}getResolvedTitleForRoute(n){return n.data[Sh]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:()=>Ue(tX),providedIn:"root"});let i=e;return i})(),tX=(()=>{let e=class e extends IP{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(Xe(ZF))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),cb=new ct("",{providedIn:"root",factory:()=>({})}),nX=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ln({type:e,selectors:[["ng-component"]],standalone:!0,features:[un],decls:1,vars:0,template:function(r,o){r&1&&Ie(0,"router-outlet")},dependencies:[ob],encapsulation:2});let i=e;return i})();function lb(i){let e=i.children&&i.children.map(lb),t=e?Zt(ze({},i),{children:e}):ze({},i);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=nX),t}var ub=new ct(""),iX=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ue(iM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Tt(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=bc(n.loadComponent()).pipe(Ot(RP),Ei(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),sc(()=>{this.componentLoaders.delete(n)})),o=new Cu(r,()=>new ni).pipe(Su());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=rX(r,this.compiler,n,this.onLoadEndListener).pipe(sc(()=>{this.childrenLoaders.delete(r)})),a=new Cu(s,()=>new ni).pipe(Su());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function rX(i,e,t,n){return bc(i.loadChildren()).pipe(Ot(RP),bi(r=>r instanceof Hf||Array.isArray(r)?Tt(r):Zn(e.compileModuleAsync(r))),Ot(r=>{n&&n(i);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(ub,[],{optional:!0,self:!0}).flat()),{routes:s.map(lb),injector:o}}))}function oX(i){return i&&typeof i=="object"&&"default"in i}function RP(i){return oX(i)?i.default:i}var db=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:()=>Ue(sX),providedIn:"root"});let i=e;return i})(),sX=(()=>{let e=class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),aX=new ct("");var cX=new ct(""),lX=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ni,this.transitionAbortSubject=new ni,this.configLoader=Ue(iX),this.environmentInjector=Ue(Tr),this.urlSerializer=Ue(ib),this.rootContexts=Ue(L0),this.location=Ue(th),this.inputBindingEnabled=Ue(sb,{optional:!0})!==null,this.titleStrategy=Ue(IP),this.options=Ue(cb,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Ue(db),this.createViewTransition=Ue(aX,{optional:!0}),this.navigationErrorHandler=Ue(cX,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Tt(void 0),this.rootComponentType=null;let n=o=>this.events.next(new VM(o)),r=o=>this.events.next(new zM(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Zt(ze(ze({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,o){return this.transitions=new ai({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ph,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(cr(s=>s.id!==0),Ot(s=>Zt(ze({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Xr(s=>{let a=!1,c=!1;return Tt(s).pipe(Xr(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",oo.SupersededByNewNavigation),qr;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Zt(ze({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!f&&h!=="reload"){let p="";return this.events.next(new Ul(u.id,this.urlSerializer.serialize(u.rawUrl),p,OM.IgnoredSameUrlNavigation)),u.resolve(!1),qr}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Tt(u).pipe(Xr(p=>{let g=this.transitions?.getValue();return this.events.next(new vh(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?qr:Promise.resolve(p)}),Zq(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ei(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Zt(ze({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let g=new I0(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:g,source:y,restoredState:x,extras:v}=u,_=new vh(p,this.urlSerializer.serialize(g),y,x);this.events.next(_);let C=wP(this.rootComponentType).snapshot;return this.currentTransition=s=Zt(ze({},u),{targetSnapshot:C,urlAfterRedirects:g,extras:Zt(ze({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Tt(s)}else{let p="";return this.events.next(new Ul(u.id,this.urlSerializer.serialize(u.extractedUrl),p,OM.IgnoredByUrlHandlingStrategy)),u.resolve(!1),qr}}),Ei(u=>{let f=new NM(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),Ot(u=>(this.currentTransition=s=Zt(ze({},u),{guards:mq(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),Cq(this.environmentInjector,u=>this.events.next(u)),Ei(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw O0(this.urlSerializer,u.guardsResult);let f=new LM(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),cr(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",oo.GuardRejected),!1)),DM(u=>{if(u.guards.canActivateChecks.length)return Tt(u).pipe(Ei(f=>{let h=new kM(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}),Xr(f=>{let h=!1;return Tt(f).pipe(Kq(this.paramsInheritanceStrategy,this.environmentInjector),Ei({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(f,"",oo.NoDataFromResolver)}}))}),Ei(f=>{let h=new BM(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}))}),DM(u=>{let f=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ei(g=>{h.component=g}),Ot(()=>{})));for(let g of h.children)p.push(...f(g));return p};return Xm(f(u.targetSnapshot.root)).pipe(oc(null),da(1))}),DM(()=>this.afterPreactivation()),Xr(()=>{let{currentSnapshot:u,targetSnapshot:f}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,f.root);return h?Zn(h).pipe(Ot(()=>s)):Tt(s)}),Ot(u=>{let f=uq(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Zt(ze({},u),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,s}),Ei(()=>{this.events.next(new wh)}),pq(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),da(1),Ei({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),If(this.transitionAbortSubject.pipe(Ei(u=>{throw u}))),sc(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",oo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ic(u=>{if(c=!0,SP(u))this.events.next(new Ea(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),hq(u)?this.events.next(new od(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let f=new _h(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=ns(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(h instanceof Mh){let{message:p,cancellationCode:g}=O0(this.urlSerializer,h);this.events.next(new Ea(s.id,this.urlSerializer.serialize(s.extractedUrl),p,g)),this.events.next(new od(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(f);let p=n.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return qr}))}))}cancelNavigationTransition(n,r,o){let s=new Ea(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function uX(i){return i!==ph}var dX=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:()=>Ue(fX),providedIn:"root"});let i=e;return i})(),nb=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},fX=(()=>{let e=class e extends nb{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=vc(e)))(o||e)}})(),e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),UP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:()=>Ue(hX),providedIn:"root"});let i=e;return i})(),hX=(()=>{let e=class e extends UP{constructor(){super(...arguments),this.location=Ue(th),this.urlSerializer=Ue(ib),this.options=Ue(cb,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Ue(db),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sa,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=wP(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof vh)this.stateMemento=this.createStateMemento();else if(n instanceof Ul)this.rawUrlTree=r.initialUrl;else if(n instanceof I0){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??o,r)}}else n instanceof wh?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Ea&&(n.code===oo.GuardRejected||n.code===oo.NoDataFromResolver)?this.restoreHistory(r):n instanceof _h?this.restoreHistory(r,!0):n instanceof Mc&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let o=n instanceof Sa?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=ze(ze({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=ze(ze({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=vc(e)))(o||e)}})(),e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),fh=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(fh||{});function pX(i,e){i.events.pipe(cr(t=>t instanceof Mc||t instanceof Ea||t instanceof _h||t instanceof Ul),Ot(t=>t instanceof Mc||t instanceof Ul?fh.COMPLETE:(t instanceof Ea?t.code===oo.Redirect||t.code===oo.SupersededByNewNavigation:!1)?fh.REDIRECTING:fh.FAILED),cr(t=>t!==fh.REDIRECTING),da(1)).subscribe(()=>{e()})}function mX(i){throw i}var gX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gr=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Ue(l0),this.stateManager=Ue(UP),this.options=Ue(cb,{optional:!0})||{},this.pendingTasks=Ue(ya),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Ue(lX),this.urlSerializer=Ue(ib),this.location=Ue(th),this.urlHandlingStrategy=Ue(db),this._events=new ni,this.errorHandler=this.options.errorHandler||mX,this.navigated=!1,this.routeReuseStrategy=Ue(dX),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Ue(ub,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Ue(sb,{optional:!0}),this.eventsSubscription=new fi,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ea&&r.code!==oo.Redirect&&r.code!==oo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Mc)this.navigated=!0;else if(r instanceof od){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u=ze({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||uX(o.source)},a);this.scheduleNavigation(c,ph,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}_X(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ph,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=ze({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(lb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=r,f=u?this.currentUrlTree.fragment:a,h=null;switch(c){case"merge":h=ze(ze({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=o?o.snapshot:this.routerState.snapshot.root;p=gP(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return yP(p,n,h,f??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=Rl(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ph,null,r)}navigate(n,r={skipLocationChange:!1}){return vX(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=ze({},gX):r===!1?o=ze({},yX):o=r,Rl(n))return QF(this.currentUrlTree,n,o);let s=this.parseUrl(n);return QF(this.currentUrlTree,s,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(n,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,f;a?(c=a.resolve,u=a.reject,f=a.promise):f=new Promise((p,g)=>{c=p,u=g});let h=this.pendingTasks.add();return pX(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:c,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(p=>Promise.reject(p))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function vX(i){for(let e=0;e<i.length;e++)if(i[e]==null)throw new Ne(4008,!1)}function _X(i){return!(i instanceof wh)&&!(i instanceof od)}var Ec=(()=>{let e=class e{constructor(n,r,o,s,a,c){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.onChanges=new ni,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(f=>{f instanceof Mc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Rl(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(n!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:OR(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,n,r):o.removeAttribute(s,n)}get urlTree(){return this.routerLinkInput===null?null:Rl(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(fe(gr),fe(mr),D1("tabindex"),fe(Ci),fe(on),fe(Ku))},e.\u0275dir=Nn({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&Fe("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&eo("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Cl],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Cl],replaceUrl:[2,"replaceUrl","replaceUrl",Cl],routerLink:"routerLink"},standalone:!0,features:[eM,Si]});let i=e;return i})();var wX=new ct("");function FP(i,...e){return mc([{provide:ub,multi:!0,useValue:i},[],{provide:mr,useFactory:xX,deps:[gr]},{provide:Xu,multi:!0,useFactory:MX},e.map(t=>t.\u0275providers)])}function xX(i){return i.routerState.root}function MX(){let i=Ue(Us);return e=>{let t=i.get(Ma);if(e!==t.components[0])return;let n=i.get(gr),r=i.get(bX);i.get(EX)===1&&n.initialNavigation(),i.get(SX,null,Wt.Optional)?.setUpPreloading(),i.get(wX,null,Wt.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var bX=new ct("",{factory:()=>new ni}),EX=new ct("",{providedIn:"root",factory:()=>1});var SX=new ct("");var CX=(i,e,t,n)=>({mainImage:i,sideImage:e,leftSide:t,rightSide:n});function AX(i,e){if(i&1){let t=Lt();B(0,"div",4)(1,"img",5),Fe("click",function(r){He(t);let o=Ee(3);return je(o.changeImage(r))}),V()()}if(i&2){let t=Ee(),n=t.$implicit,r=t.index,o=Ee(2);_e("ngClass",KU(3,CX,o.visibleId[0]==r,o.visibleId[1]==r||o.visibleId[2]==r,o.visibleId[2]==r,o.visibleId[1]==r)),de(),_e("src",n,Gi),eo("data-id",r)}}function TX(i,e){if(i&1&&(a0(0),pt(1,AX,2,8,"div",3),c0()),i&2){let t=e.index,n=Ee(2);de(),_e("ngIf",n.visibleId.includes(t))}}function DX(i,e){if(i&1&&(B(0,"span",1),pt(1,TX,2,1,"ng-container",2),V()),i&2){let t=Ee();de(),_e("ngForOf",t.imagesArray.images)}}var B0=(()=>{class i{imagesArray;idMainImageEmitter=new _n;visibleId=[];ngOnChanges(t){t.imagesArray&&this.imagesArray&&this.changeVisibleId(+this.imagesArray.idMainImage)}changeImage(t){let n=+t.target.getAttribute("data-id");this.changeVisibleId(n),this.idMainImageEmitter.emit(this.visibleId[0])}changeVisibleId(t){this.visibleId=[t],this.visibleId.push(t===this.imagesArray.images.length-1?0:t+1),this.visibleId.push(t===0?this.imagesArray.images.length-1:t-1)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=ln({type:i,selectors:[["app-image-slider"]],inputs:{imagesArray:"imagesArray"},outputs:{idMainImageEmitter:"idMainImageEmitter"},standalone:!0,features:[Si,un],decls:1,vars:1,consts:[["class","showImagesSpan",4,"ngIf"],[1,"showImagesSpan"],[4,"ngFor","ngForOf"],["class","imgShell",3,"ngClass",4,"ngIf"],[1,"imgShell",3,"ngClass"],["loading","lazy","alt","(",1,"showImage",3,"click","src"]],template:function(n,r){n&1&&pt(0,DX,2,1,"span",0),n&2&&_e("ngIf",r.imagesArray)},dependencies:[gi,Oi,Ls],styles:[".showImagesSpan[_ngcontent-%COMP%]{width:100%;height:30vh;background-color:transparent;display:flex;justify-content:center;align-items:center;gap:5%;color:#fff}.showImage[_ngcontent-%COMP%]{width:100%}.imgShell[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:20px;background-color:#fff;transition:all .5s ease-in-out;cursor:pointer;display:flex;align-items:center;outline:none;border:none}.sideImage[_ngcontent-%COMP%]{align-self:center;filter:opacity(.7);height:75%}.mainImage[_ngcontent-%COMP%]{box-shadow:0 0 10px #fff;order:2;justify-self:center;height:100%;aspect-ratio:1}.imgShell[_ngcontent-%COMP%]:hover{filter:opacity(1)}.leftSide[_ngcontent-%COMP%]{order:1}.rightSide[_ngcontent-%COMP%]{order:3}"]})}return i})();var HP=(()=>{let e=class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}};e.\u0275fac=function(r){return new(r||e)(fe(Ci),fe(on))},e.\u0275dir=Nn({type:e});let i=e;return i})(),mb=(()=>{let e=class e extends HP{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=vc(e)))(o||e)}})(),e.\u0275dir=Nn({type:e,features:[Qr]});let i=e;return i})(),Fh=new ct("");var IX={provide:Fh,useExisting:ts(()=>Ao),multi:!0};function RX(){let i=ba()?ba().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var UX=new ct(""),Ao=(()=>{let e=class e extends HP{constructor(n,r,o){super(n,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!RX())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}};e.\u0275fac=function(r){return new(r||e)(fe(Ci),fe(on),fe(UX,8))},e.\u0275dir=Nn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Fe("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[rs([IX]),Qr]});let i=e;return i})();function Sc(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function jP(i){return i!=null&&typeof i.length=="number"}var Ph=new ct(""),Z0=new ct(""),FX=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Dn=class{static min(e){return PX(e)}static max(e){return OX(e)}static required(e){return NX(e)}static requiredTrue(e){return LX(e)}static email(e){return kX(e)}static minLength(e){return BX(e)}static maxLength(e){return GP(e)}static pattern(e){return VX(e)}static nullValidator(e){return z0(e)}static compose(e){return ZP(e)}static composeAsync(e){return KP(e)}};function PX(i){return e=>{if(Sc(e.value)||Sc(i))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function OX(i){return e=>{if(Sc(e.value)||Sc(i))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function NX(i){return Sc(i.value)?{required:!0}:null}function LX(i){return i.value===!0?null:{required:!0}}function kX(i){return Sc(i.value)||FX.test(i.value)?null:{email:!0}}function BX(i){return e=>Sc(e.value)||!jP(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}function GP(i){return e=>jP(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}function VX(i){if(!i)return z0;let e,t;return typeof i=="string"?(t="",i.charAt(0)!=="^"&&(t+="^"),t+=i,i.charAt(i.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(Sc(n.value))return null;let r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function z0(i){return null}function WP(i){return i!=null}function $P(i){return Sl(i)?Zn(i):i}function qP(i){let e={};return i.forEach(t=>{e=t!=null?ze(ze({},e),t):e}),Object.keys(e).length===0?null:e}function XP(i,e){return e.map(t=>t(i))}function zX(i){return!i.validate}function YP(i){return i.map(e=>zX(e)?e:t=>e.validate(t))}function ZP(i){if(!i)return null;let e=i.filter(WP);return e.length==0?null:function(t){return qP(XP(t,e))}}function gb(i){return i!=null?ZP(YP(i)):null}function KP(i){if(!i)return null;let e=i.filter(WP);return e.length==0?null:function(t){let n=XP(t,e).map($P);return Bw(n).pipe(Ot(qP))}}function yb(i){return i!=null?KP(YP(i)):null}function PP(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function JP(i){return i._rawValidators}function QP(i){return i._rawAsyncValidators}function fb(i){return i?Array.isArray(i)?i:[i]:[]}function H0(i,e){return Array.isArray(i)?i.includes(e):i===e}function OP(i,e){let t=fb(e);return fb(i).forEach(r=>{H0(t,r)||t.push(r)}),t}function NP(i,e){return fb(e).filter(t=>!H0(i,t))}var j0=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ca=class extends j0{get formDirective(){return null}get path(){return null}},Pl=class extends j0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},G0=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},HX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ihe=Zt(ze({},HX),{"[class.ng-submitted]":"isSubmitted"}),Vs=(()=>{let e=class e extends G0{constructor(n){super(n)}};e.\u0275fac=function(r){return new(r||e)(fe(Pl,2))},e.\u0275dir=Nn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&s0("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Qr]});let i=e;return i})(),zs=(()=>{let e=class e extends G0{constructor(n){super(n)}};e.\u0275fac=function(r){return new(r||e)(fe(Ca,10))},e.\u0275dir=Nn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&s0("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Qr]});let i=e;return i})();var Th="VALID",V0="INVALID",cd="PENDING",Dh="DISABLED",Cc=class{},W0=class extends Cc{constructor(e,t){super(),this.value=e,this.source=t}},Rh=class extends Cc{constructor(e,t){super(),this.pristine=e,this.source=t}},Uh=class extends Cc{constructor(e,t){super(),this.touched=e,this.source=t}},ld=class extends Cc{constructor(e,t){super(),this.status=e,this.source=t}},hb=class extends Cc{constructor(e){super(),this.source=e}},pb=class extends Cc{constructor(e){super(),this.source=e}};function eO(i){return(K0(i)?i.validators:i)||null}function jX(i){return Array.isArray(i)?gb(i):i||null}function tO(i,e){return(K0(e)?e.asyncValidators:i)||null}function GX(i){return Array.isArray(i)?yb(i):i||null}function K0(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function WX(i,e,t){let n=i.controls;if(!(e?Object.keys(n):n).length)throw new Ne(1e3,"");if(!n[t])throw new Ne(1001,"")}function $X(i,e,t){i._forEachChild((n,r)=>{if(t[r]===void 0)throw new Ne(1002,"")})}var $0=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Yu(()=>this.statusReactive()),this.statusReactive=qu(void 0),this._pristine=Yu(()=>this.pristineReactive()),this.pristineReactive=qu(!0),this._touched=Yu(()=>this.touchedReactive()),this.touchedReactive=qu(!1),this._events=new ni,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ns(this.statusReactive)}set status(e){Ns(()=>this.statusReactive.set(e))}get valid(){return this.status===Th}get invalid(){return this.status===V0}get pending(){return this.status==cd}get disabled(){return this.status===Dh}get enabled(){return this.status!==Dh}get pristine(){return Ns(this.pristineReactive)}set pristine(e){Ns(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ns(this.touchedReactive)}set touched(e){Ns(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(OP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(OP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(NP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(NP(e,this._rawAsyncValidators))}hasValidator(e){return H0(this._rawValidators,e)}hasAsyncValidator(e){return H0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Zt(ze({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Uh(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new Uh(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Zt(ze({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Rh(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new Rh(!0,n))}markAsPending(e={}){this.status=cd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ld(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Zt(ze({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Dh,this.errors=null,this._forEachChild(r=>{r.disable(Zt(ze({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new W0(this.value,n)),this._events.next(new ld(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Zt(ze({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Th,this._forEachChild(n=>{n.enable(Zt(ze({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Zt(ze({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Th||this.status===cd)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new W0(this.value,t)),this._events.next(new ld(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Zt(ze({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dh:Th}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=cd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=$P(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new ld(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new _n,this.statusChanges=new _n}_calculateStatus(){return this._allControlsDisabled()?Dh:this.errors?V0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cd)?cd:this._anyControlsHaveStatus(V0)?V0:Th}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Rh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Uh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){K0(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=jX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=GX(this._rawAsyncValidators)}},Ni=class extends $0{constructor(e,t,n){super(eO(t),tO(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){$X(this,!0,e),Object.keys(e).forEach(n=>{WX(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,o)=>{n=t(n,r,o)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Oh=new ct("CallSetDisabledState",{providedIn:"root",factory:()=>J0}),J0="always";function nO(i,e){return[...e.path,i]}function q0(i,e,t=J0){vb(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),XX(i,e),ZX(i,e),YX(i,e),qX(i,e)}function LP(i,e,t=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Y0(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function X0(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qX(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function vb(i,e){let t=JP(i);e.validator!==null?i.setValidators(PP(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=QP(i);e.asyncValidator!==null?i.setAsyncValidators(PP(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();X0(e._rawValidators,r),X0(e._rawAsyncValidators,r)}function Y0(i,e){let t=!1;if(i!==null){if(e.validator!==null){let r=JP(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,i.setValidators(o))}}if(e.asyncValidator!==null){let r=QP(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,i.setAsyncValidators(o))}}}let n=()=>{};return X0(e._rawValidators,n),X0(e._rawAsyncValidators,n),t}function XX(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&iO(i,e)})}function YX(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&iO(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function iO(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function ZX(i,e){let t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function rO(i,e){i==null,vb(i,e)}function KX(i,e){return Y0(i,e)}function oO(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function JX(i){return Object.getPrototypeOf(i.constructor)===mb}function sO(i,e){i._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function aO(i,e){if(!e)return null;Array.isArray(e);let t,n,r;return e.forEach(o=>{o.constructor===Ao?t=o:JX(o)?n=o:r=o}),r||n||t||null}function QX(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}var eY={provide:Ca,useExisting:ts(()=>_b)},Ih=Promise.resolve(),_b=(()=>{let e=class e extends Ca{get submitted(){return Ns(this.submittedReactive)}constructor(n,r,o){super(),this.callSetDisabledState=o,this._submitted=Yu(()=>this.submittedReactive()),this.submittedReactive=qu(!1),this._directives=new Set,this.ngSubmit=new _n,this.form=new Ni({},gb(n),yb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Ih.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),q0(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Ih.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Ih.then(()=>{let r=this._findContainer(n.path),o=new Ni({});rO(o,n),r.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Ih.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Ih.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),sO(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}};e.\u0275fac=function(r){return new(r||e)(fe(Ph,10),fe(Z0,10),fe(Oh,8))},e.\u0275dir=Nn({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&Fe("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rs([eY]),Qr]});let i=e;return i})();function kP(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function BP(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Bn=class extends $0{constructor(e=null,t,n){super(eO(t),tO(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),K0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(BP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){BP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var tY=i=>i instanceof Bn;var nY={provide:Pl,useExisting:ts(()=>Nh)},VP=Promise.resolve(),Nh=(()=>{let e=class e extends Pl{constructor(n,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Bn,this._registered=!1,this.name="",this.update=new _n,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=aO(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),oO(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){q0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){VP.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,o=r!==0&&Cl(r);VP.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?nO(n,this._parent):[n]}};e.\u0275fac=function(r){return new(r||e)(fe(Ca,9),fe(Ph,10),fe(Z0,10),fe(Fh,10),fe(io,8),fe(Oh,8))},e.\u0275dir=Nn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rs([nY]),Qr,Si]});let i=e;return i})(),Hs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Nn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let i=e;return i})();var cO=new ct("");var iY={provide:Ca,useExisting:ts(()=>as)},as=(()=>{let e=class e extends Ca{get submitted(){return Ns(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}constructor(n,r,o){super(),this.callSetDisabledState=o,this._submitted=Yu(()=>this._submittedReactive()),this._submittedReactive=qu(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _n,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Y0(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return q0(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){LP(n.control||null,n,!1),QX(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),sO(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new hb(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this._submittedReactive.set(!1),this.form._events.next(new pb(this.form))}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,o=this.form.get(n.path);r!==o&&(LP(r||null,n),tY(o)&&(q0(o,n,this.callSetDisabledState),n.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);rO(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&KX(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vb(this.form,this),this._oldForm&&Y0(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(fe(Ph,10),fe(Z0,10),fe(Oh,8))},e.\u0275dir=Nn({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&Fe("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rs([iY]),Qr,Si]});let i=e;return i})();var rY={provide:Pl,useExisting:ts(()=>cs)},cs=(()=>{let e=class e extends Pl{set isDisabled(n){}constructor(n,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new _n,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=aO(this,s)}ngOnChanges(n){this._added||this._setUpControl(),oO(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return nO(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(fe(Ca,13),fe(Ph,10),fe(Z0,10),fe(Fh,10),fe(cO,8))},e.\u0275dir=Nn({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[rs([rY]),Qr,Si]});let i=e;return i})(),oY={provide:Fh,useExisting:ts(()=>Q0),multi:!0};function lO(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function sY(i){return i.split(":")[0]}var Q0=(()=>{let e=class e extends mb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),o=lO(r,n);this.setProperty("value",o)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=sY(n);return this._optionMap.has(r)?this._optionMap.get(r):n}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=vc(e)))(o||e)}})(),e.\u0275dir=Nn({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&Fe("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[rs([oY]),Qr]});let i=e;return i})(),uO=(()=>{let e=class e{constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(lO(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(fe(on),fe(Ci),fe(Q0,9))},e.\u0275dir=Nn({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})(),aY={provide:Fh,useExisting:ts(()=>dO),multi:!0};function zP(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function cY(i){return i.split(":")[0]}var dO=(()=>{let e=class e extends mb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let o=n.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let u=a[c],f=this._getOptionValue(u.value);o.push(f)}}else{let a=r.options;for(let c=0;c<a.length;c++){let u=a[c];if(u.selected){let f=this._getOptionValue(u.value);o.push(f)}}}this.value=o,n(o)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=cY(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=vc(e)))(o||e)}})(),e.\u0275dir=Nn({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&Fe("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[rs([aY]),Qr]});let i=e;return i})(),fO=(()=>{let e=class e{constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(zP(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(zP(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(fe(on),fe(Ci),fe(dO,9))},e.\u0275dir=Nn({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})();function lY(i){return typeof i=="number"?i:parseInt(i,10)}var uY=(()=>{let e=class e{constructor(){this._validator=z0}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):z0,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Nn({type:e,features:[Si]});let i=e;return i})();var dY={provide:Ph,useExisting:ts(()=>wb),multi:!0},wb=(()=>{let e=class e extends uY{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=n=>lY(n),this.createValidator=n=>GP(n)}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=vc(e)))(o||e)}})(),e.\u0275dir=Nn({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&eo("maxlength",o._enabled?o.maxlength:null)},inputs:{maxlength:"maxlength"},features:[rs([dY]),Qr]});let i=e;return i})();var hO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rr({type:e}),e.\u0275inj=Ir({});let i=e;return i})();var ey=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:[{provide:Oh,useValue:n.callSetDisabledState??J0}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rr({type:e}),e.\u0275inj=Ir({imports:[hO]});let i=e;return i})(),To=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:[{provide:cO,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Oh,useValue:n.callSetDisabledState??J0}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rr({type:e}),e.\u0275inj=Ir({imports:[hO]});let i=e;return i})();var mO=wD(pO());var ty=(()=>{class i{compressImage(t){return console.log(typeof t),new Promise((n,r)=>{new mO.default(t,{quality:.6,success:o=>{n(o)},error:o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0436\u0430\u0442\u0438\u044F:",o.message),r(o)}})})}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var fY=["colorModule"],hY=["shopsModule"],pY=["additionalModule"];function mY(i,e){if(i&1){let t=Lt();B(0,"button",31),Fe("click",function(){He(t);let r=Ee();return je(r.removeImages())}),Ie(1,"img",32),V()}}function gY(i,e){if(i&1){let t=Lt();B(0,"app-image-slider",33),Fe("idMainImageEmitter",function(r){He(t);let o=Ee();return je(o.changeIdMainImage(r))}),V()}if(i&2){let t=Ee();_e("imagesArray",t.colorsClientData[t.currentColorId].imagesData)}}function yY(i,e){if(i&1){let t=Lt();B(0,"div",34)(1,"input",35),Fe("input",function(r){He(t);let o=Ee();return je(o.onInputImages(r))}),V(),Ie(2,"img",36),V()}}function vY(i,e){if(i&1){let t=Lt();B(0,"button",37),Fe("click",function(){let r=He(t).index,o=Ee();return je(o.openFurnitureVariant(r))}),V()}if(i&2){let t=e.$implicit,n=e.index;qn("background-color",t.color),eo("data-idColor",n)}}function _Y(i,e){if(i&1){let t=Lt();B(0,"button",38),Fe("click",function(){let r=He(t).index,o=Ee();return je(o.openShopsModule(r))}),B(1,"div",39),ge(2),V(),B(3,"div",40),Ie(4,"img",41),V()()}if(i&2){let t=e.$implicit;de(2),Mn(t.cost)}}function wY(i,e){i&1&&Qf(0)}function xY(i,e){if(i&1){let t=Lt();B(0,"form",42),Fe("ngSubmit",function(){He(t);let r=Ee();return je(r.addColor())}),B(1,"button",43),Fe("click",function(){He(t);let r=Ee();return je(r.closeAddModule())}),Ie(2,"img",44),V(),B(3,"span",45)(4,"h2",46),ge(5,"Furniture variant"),V(),B(6,"span",47)(7,"label",48),ge(8,"Color"),V(),Ie(9,"input",49),V(),B(10,"button",50),ge(11,"Continue"),V()()()}if(i&2){let t=Ee();_e("formGroup",t.colorForm),de(10),_e("disabled",!t.colorForm.valid)}}function MY(i,e){if(i&1){let t=Lt();B(0,"button",57),Fe("click",function(){He(t);let r=Ee(2);return je(r.deleteShop())}),Ie(1,"img",58),V()}}function bY(i,e){if(i&1){let t=Lt();B(0,"form",42),Fe("ngSubmit",function(){He(t);let r=Ee();return je(r.addShop())}),B(1,"button",43),Fe("click",function(){He(t);let r=Ee();return je(r.closeAddModule())}),Ie(2,"img",44),V(),B(3,"span",45)(4,"h2",46),ge(5,"Shop variant"),V(),B(6,"span",47)(7,"label",51),ge(8,"Cost"),V(),Ie(9,"input",52),V(),B(10,"span",47)(11,"label",53),ge(12,"Link"),V(),Ie(13,"input",54),V(),B(14,"span",55)(15,"button",50),ge(16,"Continue"),V(),pt(17,MY,2,0,"button",56),V()()()}if(i&2){let t=Ee();_e("formGroup",t.shopForm),de(15),_e("disabled",!t.shopForm.valid),de(2),_e("ngIf",t.lastClickedShop!==void 0)}}function EY(i,e){if(i&1&&(B(0,"option",71),ge(1),V()),i&2){let t=e.$implicit;_e("value",t),de(),Mn(t)}}function SY(i,e){if(i&1){let t=Lt();B(0,"span",47)(1,"label",62),ge(2,"Category"),V(),B(3,"select",63),no("ngModelChange",function(r){He(t);let o=Ee(2);return So(o.furnitureData.category,r)||(o.furnitureData.category=r),je(r)}),pt(4,EY,2,2,"option",64),V(),B(5,"label",65),ge(6,"Width"),V(),B(7,"input",66),no("ngModelChange",function(r){He(t);let o=Ee(2);return So(o.furnitureData.proportions.width,r)||(o.furnitureData.proportions.width=r),je(r)}),V(),B(8,"label",67),ge(9,"Length"),V(),B(10,"input",68),no("ngModelChange",function(r){He(t);let o=Ee(2);return So(o.furnitureData.proportions.length,r)||(o.furnitureData.proportions.length=r),je(r)}),V(),B(11,"label",69),ge(12,"Height"),V(),B(13,"input",70),no("ngModelChange",function(r){He(t);let o=Ee(2);return So(o.furnitureData.proportions.height,r)||(o.furnitureData.proportions.height=r),je(r)}),V()()}if(i&2){let t=Ee(2);de(3),to("ngModel",t.furnitureData.category),de(),_e("ngForOf",t.categoriesArray),de(3),to("ngModel",t.furnitureData.proportions.width),de(3),to("ngModel",t.furnitureData.proportions.length),de(3),to("ngModel",t.furnitureData.proportions.height)}}function CY(i,e){if(i&1){let t=Lt();B(0,"span",59),Fe("ngSubmit",function(){He(t);let r=Ee();return je(r.addShop())}),B(1,"button",43),Fe("click",function(){He(t);let r=Ee();return je(r.closeAddModule())}),Ie(2,"img",44),V(),B(3,"span",45)(4,"h2",46),ge(5,"Additional"),V(),pt(6,SY,14,5,"span",60),B(7,"button",61),Fe("click",function(){He(t);let r=Ee();return je(r.closeAddModule())}),ge(8,"Save"),V()()()}if(i&2){let t=Ee();de(6),_e("ngIf",t.categoriesArray!==void 0)}}var kh=(()=>{class i{elementRef;changeDetectorRef;clientImageControl;constructor(t,n,r){this.elementRef=t,this.changeDetectorRef=n,this.clientImageControl=r}colorModuleTemplate;shopsModuleTemplate;additionalModuleTemplate;lastClickedShop=void 0;lastClickedColor=void 0;addModuleTemplate;furnitureModelInput;addColorVisible=!1;addModule;currentColorId=void 0;colorsClientData=[];furnitureData;categoriesArray=["sofa","chair","lamp","table"];onInputImages(t){return gn(this,null,function*(){let r=t.target.files;if(!r||this.currentColorId===void 0)return;let o=[];for(let s=0;s<r.length;s++){let a=yield this.clientImageControl.compressImage(r[s]);a&&o.push(a)}this.furnitureData.colors[this.currentColorId].imagesData.images=o,this.colorsClientData[this.currentColorId].imagesData.images=o.map(s=>URL.createObjectURL(s))})}removeImages(){this.currentColorId===void 0||!this.furnitureData.colors[this.currentColorId].imagesData.images||(this.furnitureData.colors[this.currentColorId].imagesData.images.length=0,this.colorsClientData[this.currentColorId].imagesData.images.length=0)}colorForm=new Ni({color:new Bn("",[Dn.required])});shopForm=new Ni({cost:new Bn(null,[Dn.required,this.numberValidator]),url:new Bn("",[Dn.required])});numberValidator(t){let n=t.value;return n!==null&&isNaN(n)?{notANumber:!0}:null}addColor(){let t=this.colorForm.value.color;if(!t)return;let n={color:t,imagesData:{images:[],idMainImage:0}};this.furnitureData.colors.push(n),this.colorsClientData.push(n),this.colorForm.patchValue({color:""}),this.currentColorId=this.furnitureData.colors.length-1,setTimeout(()=>{this.closeAddModule(),this.openFurnitureVariant(this.currentColorId)},0)}ngAfterViewInit(){this.addModule=this.elementRef.nativeElement.querySelector(".addModule"),this.furnitureModelInput=this.elementRef.nativeElement.querySelector(".furnitureModelInput")}closeAddModule(){this.addModule.classList.add("disabled")}openColorModule(t){t.preventDefault(),this.addModuleTemplate=this.colorModuleTemplate,this.addModule.classList.remove("disabled"),setTimeout(()=>{this.elementRef.nativeElement.querySelector(".addModuleInput").focus()},0)}addShop(){if(this.lastClickedShop){this.furnitureData.shops[this.lastClickedShop]={cost:this.shopForm.value.cost,url:this.shopForm.value.url};return}this.furnitureData.shops.push({cost:this.shopForm.value.cost,url:this.shopForm.value.url}),this.closeAddModule()}deleteShop(){this.lastClickedShop!=null&&this.lastClickedShop>=0&&this.lastClickedShop<this.furnitureData.shops.length&&(this.furnitureData.shops.splice(this.lastClickedShop,1),this.changeDetectorRef.detectChanges(),this.lastClickedShop=void 0)}deleteColor(){let t=this.currentColorId;this.currentColorId=0,this.colorsClientData=this.colorsClientData.filter((n,r)=>r!==t),this.furnitureData.colors=this.furnitureData.colors.filter((n,r)=>r!==t)}openShopsModule(t){t!==void 0?(this.lastClickedShop=t,this.shopForm.patchValue({cost:this.furnitureData.shops[t].cost,url:this.furnitureData.shops[t].url})):(this.lastClickedShop=void 0,this.shopForm.patchValue({cost:null,url:""})),this.addModuleTemplate=this.shopsModuleTemplate,this.addModule.classList.remove("disabled")}openAdditional(){this.addModuleTemplate=this.additionalModuleTemplate,this.addModule.classList.remove("disabled")}openFurnitureVariant(t){let n=this.elementRef.nativeElement.querySelector(".colors"),r=n.querySelector(`[data-idColor="${t}"]`),o=n.querySelectorAll(".colorVariant"),s=[],a=[];o.forEach((c,u)=>{u>+t?a=[...a,c]:u<+t&&(s=[...s,c])}),[r,...a,...s].forEach((c,u)=>{c.style.setProperty("--index",(u+1).toString())}),setTimeout(()=>{r.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+t,r.style.setProperty("margin-right","0")},1250)}changeIdMainImage(t){this.currentColorId===void 0||this.furnitureData.colors[this.currentColorId].imagesData.idMainImage===void 0||(this.furnitureData.colors[this.currentColorId].imagesData.idMainImage=t)}static \u0275fac=function(n){return new(n||i)(fe(on),fe(io),fe(ty))};static \u0275cmp=ln({type:i,selectors:[["app-create-furniture"]],viewQuery:function(n,r){if(n&1&&(Wi(fY,5),Wi(hY,5),Wi(pY,5)),n&2){let o;Fi(o=Pi())&&(r.colorModuleTemplate=o.first),Fi(o=Pi())&&(r.shopsModuleTemplate=o.first),Fi(o=Pi())&&(r.additionalModuleTemplate=o.first)}},inputs:{colorsClientData:"colorsClientData",furnitureData:"furnitureData"},standalone:!0,features:[un],decls:37,vars:10,consts:[["colorModule",""],["shopsModule",""],["additionalModule",""],[1,"body",3,"click"],["placeholder","Name",1,"furnitureTitle",3,"ngModelChange","ngModel"],[1,"imageSlideSpan"],["class","editImagesBtn",3,"click",4,"ngIf"],[3,"imagesArray","idMainImageEmitter",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"leftPiece"],[1,"colorSlider"],[1,"addColorBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","add"],[1,"colors"],["class","colorVariant",3,"background-color","click",4,"ngFor","ngForOf"],["type","file","accept",".obj","id","furnitureModel",1,"furnitureModelInput"],[1,"informationSpan"],[1,"descriptionSpan"],[1,"descriptionTitle"],["placeholder","Some description",1,"descriptionInformation",3,"ngModelChange","ngModel"],[1,"rightFunctionalSection"],[1,"shopsTitle"],[1,"shopsSpan"],[1,"shopsListSpan"],["class","shopFunctions",3,"click",4,"ngFor","ngForOf"],[1,"addShopButton",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","open"],[1,"additionalFunctions",3,"click"],[1,"addModule","disabled"],[4,"ngTemplateOutlet"],[1,"editImagesBtn",3,"click"],["loading","lazy","alt","editImages","src","/assets/images/editIcon.svg","alt",""],[3,"idMainImageEmitter","imagesArray"],[1,"uploadImagesDiv"],["multiple","","type","file","accept",".png,.jpeg,.jpg",1,"uploadImagesInput",3,"input"],["loading","lazy","src","/assets/images/uploadIcon.png","alt","",1,"uploadImagesIcon"],[1,"colorVariant",3,"click"],[1,"shopFunctions",3,"click"],[1,"furnitureCost"],[1,"linkShop"],["loading","lazy","src","/assets/images/linkIcon.svg","alt",""],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt",""],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","colorVariant",1,"inputLabel"],["formControlName","color","id","colorVariant","type","text",1,"addModuleInput"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],["for","cost",1,"inputLabel"],["formControlName","cost","id","cost","type","text",1,"addModuleInput"],["for","url",1,"inputLabel"],["formControlName","url","id","url","type","text",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["class","deleteItemAddModuleBtn",3,"click",4,"ngIf"],[1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt",""],[1,"addModuleSpan",3,"ngSubmit"],["class","addModuleInputSpan",4,"ngIf"],[1,"submitAddModuleFormBtn","additionalBtn",3,"click"],["for","category",1,"inputLabel"],["aria-placeholder","Sofa","name","category","id","category",1,"categorySelect",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","width",1,"inputLabel"],["id","width","type","text",1,"addModuleInput",3,"ngModelChange","ngModel"],["for","length",1,"inputLabel"],["id","length","type","text",1,"addModuleInput",3,"ngModelChange","ngModel"],["for","height",1,"inputLabel"],["id","height","type","text",1,"addModuleInput",3,"ngModelChange","ngModel"],[3,"value"]],template:function(n,r){if(n&1){let o=Lt();B(0,"span",3),Fe("click",function(a){let c;return He(o),je((c=r.currentColorId)!==null&&c!==void 0?c:r.openColorModule(a))}),B(1,"input",4),no("ngModelChange",function(a){return He(o),So(r.furnitureData.name,a)||(r.furnitureData.name=a),je(a)}),V(),B(2,"span",5),pt(3,mY,2,0,"button",6)(4,gY,1,1,"app-image-slider",7),V(),pt(5,yY,3,0,"div",8),B(6,"span",9)(7,"span",10)(8,"span",11)(9,"button",12),Fe("click",function(a){return He(o),je(r.openColorModule(a))}),Ie(10,"img",13),V(),B(11,"span",14),pt(12,vY,1,3,"button",15),V()(),Ie(13,"input",16),V(),B(14,"span",17)(15,"span",18)(16,"div",19),ge(17,"Description"),V(),B(18,"textarea",20),no("ngModelChange",function(a){return He(o),So(r.furnitureData.description,a)||(r.furnitureData.description=a),je(a)}),V()(),B(19,"span",21)(20,"div",22),ge(21,"Shops"),V(),B(22,"span",23)(23,"span",24),pt(24,_Y,5,1,"button",25),V(),B(25,"button",26),Fe("click",function(){return He(o),je(r.openShopsModule())}),Ie(26,"img",27),V()(),B(27,"button",28),Fe("click",function(){return He(o),je(r.openAdditional())}),ge(28," Additional "),V()()()()(),B(29,"div",29),pt(30,wY,1,0,"ng-container",30),V(),pt(31,xY,12,2,"ng-template",null,0,xa)(33,bY,18,3,"ng-template",null,1,xa)(35,CY,9,1,"ng-template",null,2,xa)}n&2&&(de(),to("ngModel",r.furnitureData.name),de(2),_e("ngIf",r.currentColorId!==void 0&&r.colorsClientData[r.currentColorId].imagesData.images.length>0),de(),_e("ngIf",r.currentColorId!==void 0&&r.colorsClientData[r.currentColorId].imagesData.images.length>0),de(),_e("ngIf",r.currentColorId===void 0||r.currentColorId!==void 0&&r.colorsClientData[r.currentColorId].imagesData.images.length<=0),de(6),qn("--total-items",r.furnitureData.colors.length.toString()),de(),_e("ngForOf",r.furnitureData.colors),de(6),to("ngModel",r.furnitureData.description),de(6),_e("ngForOf",r.furnitureData.shops),de(6),_e("ngTemplateOutlet",r.addModuleTemplate))},dependencies:[B0,Oi,gi,To,Hs,uO,fO,Ao,Q0,Vs,zs,as,cs,h0,ey,Nh],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{margin-top:60px;background-color:#000;display:flex;flex-direction:column;gap:30px}.imageSlideSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.editImagesBtn[_ngcontent-%COMP%]{aspect-ratio:1;border:none;background:none;grid-area:1/1/2/2;align-self:start;z-index:6;justify-self:end}.editImagesBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px;cursor:pointer}app-image-slider[_ngcontent-%COMP%]{width:100%;display:block;grid-area:1/1/2/2}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0 auto;width:fit-content;background:none;border:none;outline:none;font-size:1.5vw}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:300px;aspect-ratio:1;position:relative;--radius: 60px}.colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out;box-shadow:0 0 3px #fff}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:40px;aspect-ratio:1;z-index:3;background-color:#000;border:none;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.addColorBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:75%}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.categorySelect[_ngcontent-%COMP%]{background:none;border:1px solid #888888;border-radius:10px;padding:10px 0}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;margin-bottom:20px;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px;background:none;border:none;outline:none}.rightFunctionalSection[_ngcontent-%COMP%]{width:40%;display:flex;height:100%;flex-direction:column;gap:20px}.additionalFunctions[_ngcontent-%COMP%]{width:100%;background-color:#a3b18a;border-radius:10px;border:none;color:#fff;font-size:medium;padding:10px 0;cursor:pointer}.shopsSpan[_ngcontent-%COMP%]{width:100%;height:calc(100% - 60px);display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#000;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;box-shadow:0 0 10px #fff}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#000;border-radius:0 10px 10px 0;border:none;place-content:center;display:flex;box-shadow:0 0 10px #fff}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.addShopButton[_ngcontent-%COMP%]{background-color:#000;box-shadow:0 0 10px #fff;display:flex;place-content:center;border-radius:10px;border:none;height:45px;cursor:pointer}.addShopButton[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px}.functionShopsModuleBtns[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{border-radius:10px;background-color:#a3b18a;height:50px;width:20%;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:50%}.furnitureModelInput[_ngcontent-%COMP%]{color:#fff;cursor:pointer;border-radius:10px;box-shadow:0 0 5px #fff;height:30px;padding:10px;align-content:center;justify-content:center;display:flex}.furnitureModelInput[_ngcontent-%COMP%]::file-selector-button{color:transparent;border-radius:50%;height:100%;aspect-ratio:1;border:none;background-color:transparent;background-image:url(/assets/images/addIcon.svg);background-repeat:no-repeat}.furnitureModelLabel[_ngcontent-%COMP%]{color:#fff}']})}return i})();var yO=new ct("WindowToken",typeof window<"u"&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var vO=(()=>{class i{constructor(t,n,r){this.ngZone=t,this.document=n,this.window=r,this.copySubject=new ni,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(t){this.config=t}copy(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});let n=this.copyFromContent(t);return n?this.pushCopyResponse({content:t,isSuccess:n}):this.pushCopyResponse({isSuccess:!1,content:t})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(t,n=!0){try{this.selectTarget(t);let r=this.copyText();return this.clearSelection(n?t:void 0,this.window),r&&this.isCopySuccessInIE11()}catch{return!1}}isCopySuccessInIE11(){let t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}copyFromContent(t,n=this.document.body){if(this.tempTextArea&&!n.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{n.appendChild(this.tempTextArea)}catch{throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;let r=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),r}destroy(t=this.document.body){this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(t,n){t&&t.focus(),n.getSelection()?.removeAllRanges()}createTempTextArea(t,n){let r=t.documentElement.getAttribute("dir")==="rtl",o;o=t.createElement("textarea"),o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[r?"right":"left"]="-9999px";let s=n.pageYOffset||t.documentElement.scrollTop;return o.style.top=s+"px",o.setAttribute("readonly",""),o}pushCopyResponse(t){this.copySubject.observers.length>0&&this.ngZone.run(()=>{this.copySubject.next(t)})}pushCopyReponse(t){this.pushCopyResponse(t)}}return i.\u0275fac=function(t){return new(t||i)(Xe(kn),Xe(ii),Xe(yO,8))},i.\u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var yn="https://housequality.site/api/";var Ac=(()=>{class i{httpModule;baseUrl=yn+"furniture/card/";constructor(t){this.httpModule=t}GETfurnitureCard(t,n){let r=new $t().set("furnitureCardId",t);return n!==void 0&&(r=r.set("jwtToken",n)),this.httpModule.get(`${this.baseUrl}`,{params:r})}POSTcreateFurnitureCard(t,n,r){let o=new $t().set("jwtToken",t);return r!==void 0&&(o=o.set("additionalData",JSON.stringify(r))),this.httpModule.post(`${this.baseUrl}`,n,{params:o})}PUTupdateFurnitureCard(t,n,r){let o=new $t().set("jwtToken",t);return r!==void 0&&(o=o.set("additionalData",JSON.stringify(r))),this.httpModule.put(`${this.baseUrl}`,n,{params:o})}DELETEfurnitureCard(t,n){let r=new $t().set("jwtToken",t).set("furnitureCardId",n);return this.httpModule.delete(`${this.baseUrl}`,{params:r})}GETshopData(t){return this.httpModule.get(`${this.baseUrl}shop?furnitureCardId=${t}`)}static \u0275fac=function(n){return new(n||i)(Xe($i))};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var js=(()=>{class i{httpModule;constructor(t){this.httpModule=t}GETuserAvatar(t){return`${yn}avatar?jwtToken=${t}`}POSTloadUserAvatar(t,n){let r=new FormData;r.append("image",t);let o=new $t().set("jwtToken",n);return this.httpModule.post(`${yn}avatar/upload`,r,{params:o})}POSTloadProjectImages(t,n,r,o,s){let a=new FormData;console.log(t),t.forEach(u=>a.append("images",u));let c=new $t().set("furnitureCardId",r).set("color",o).set("idMainImage",s);return this.httpModule.post(`${yn}furniture/images/upload/images?jwtToken=${n}`,a,{params:c})}DELETEprojectColor(t,n,r){let o=new $t().set("jwtToken",t).set("furnitureCardId",n).set("color",r);return this.httpModule.delete(`${yn}furniture/images/delete/color`,{params:o})}DELETEproject(t,n){let r=new $t().set("jwtToken",t).set("furnitureCardId",n);return this.httpModule.delete(`${yn}furniture/images/delete/project`,{params:r})}GETallProjectImages(t,n){return gn(this,null,function*(){let r=new $t().set("furnitureCardId",t).set("color",n);try{return yield this.httpModule.get(`${yn}furniture/images/all`,{params:r}).toPromise()}catch(o){throw console.error("Error fetching project images:",o),o}})}GETmainImage(t,n){return`${yn}furniture/images/main?furnitureCardId=${t}&color=${n}`}GETsimpleImage(t){return`${yn}furniture/images/simple?filePath=${t}`}static \u0275fac=function(n){return new(n||i)(Xe($i))};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ji=(()=>{class i{errorSubject=new ai("");error$=this.errorSubject.asObservable();setError(t,n){this.errorSubject.next(t),setTimeout(()=>this.clearError(),n)}clearError(){this.errorSubject.next("")}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function TY(i,e){if(i&1&&Ie(0,"app-image-slider",18),i&2){let t=Ee(2);_e("imagesArray",t.furnitureData.colors[t.currentColorId].imagesData)}}function DY(i,e){i&1&&(B(0,"div",19),Ie(1,"input",20)(2,"img",21),V())}function IY(i,e){if(i&1){let t=Lt();B(0,"button",22),Fe("click",function(r){He(t);let o=Ee(2);return je(o.openFurnitureVariant(r.target))}),V()}if(i&2){let t=e.$implicit,n=e.index;qn("background-color",t.color),eo("data-idColor",n)}}function RY(i,e){if(i&1){let t=Lt();B(0,"span",23)(1,"a",24),ge(2),V(),B(3,"button",25),Fe("click",function(){let r=He(t).$implicit,o=Ee(2);return je(o.copyShopLink(r.url))}),Ie(4,"img",26),V()()}if(i&2){let t=e.$implicit;de(),_e("href",t.url,Gi),de(),Mn(t.cost),de(),_e("title",t.url)}}function UY(i,e){if(i&1&&(B(0,"span",1)(1,"h1",2),ge(2),V(),pt(3,TY,1,1,"app-image-slider",3)(4,DY,3,0,"div",4),B(5,"span",5)(6,"span",6),Ie(7,"img",7),B(8,"span",8),pt(9,IY,1,3,"button",9),V()(),B(10,"span",10)(11,"span",11)(12,"div",12),ge(13,"Description"),V(),B(14,"div",13),ge(15),V()(),B(16,"span",14)(17,"div",15),ge(18,"Shops"),V(),B(19,"span",16),pt(20,RY,5,3,"span",17),V()()()()()),i&2){let t=Ee();de(2),Mn(t.furnitureData.name),de(),_e("ngIf",t.furnitureData.colors[t.currentColorId].imagesData),de(),_e("ngIf",!t.furnitureData.colors[t.currentColorId].imagesData),de(4),qn("--total-items",t.furnitureData.colors.length.toString()),de(),_e("ngForOf",t.furnitureData.colors),de(6),Mn(t.furnitureData.description),de(5),_e("ngForOf",t.furnitureData.shops)}}var iy=(()=>{class i{elementRef;clipboardService;furnitureCardService;imagesServerControl;errorHandler;furnitureId;furnitureData;constructor(t,n,r,o,s){this.elementRef=t,this.clipboardService=n,this.furnitureCardService=r,this.imagesServerControl=o,this.errorHandler=s}ngOnChanges(t){this.furnitureId!==void 0&&this.furnitureCardService.GETfurnitureCard(this.furnitureId,"").subscribe({next:n=>{this.furnitureData=n.furnitureCard,n.furnitureCard.colors.forEach((r,o)=>gn(this,null,function*(){if(!this.furnitureData)return;let s=yield this.imagesServerControl.GETallProjectImages(this.furnitureId,r.color),a=s.imagesURLS;this.furnitureData.colors[o].imagesData={idMainImage:s.idMainImage,images:a.map(c=>this.imagesServerControl.GETsimpleImage(c))}}))},error:n=>{console.log(n),this.errorHandler.setError("Error while receiving furniture",5e3)}})}currentColorId=0;openFurnitureVariant(t){let n=t,r=this.elementRef.nativeElement.querySelector(".colors"),o=n.getAttribute("data-idcolor");if(!o)return;let s=r.querySelectorAll(".colorVariant"),a=[],c=[];s.forEach((u,f)=>{f>+o?c=[...c,u]:f<+o&&(a=[...a,u])}),[n,...c,...a].forEach((u,f)=>{u.style.setProperty("--index",(f+1).toString())}),setTimeout(()=>{n.style.setProperty("margin-right","115px")},500),setTimeout(()=>{this.currentColorId=+o,n.style.setProperty("margin-right","0")},1250)}copyShopLink(t){this.clipboardService.copyFromContent(t)}static \u0275fac=function(n){return new(n||i)(fe(on),fe(vO),fe(Ac),fe(js),fe(Ji))};static \u0275cmp=ln({type:i,selectors:[["app-view-furniture"]],inputs:{furnitureId:"furnitureId",furnitureData:"furnitureData"},standalone:!0,features:[Si,un],decls:1,vars:1,consts:[["class","body",4,"ngIf"],[1,"body"],[1,"furnitureTitle"],[3,"imagesArray",4,"ngIf"],["class","uploadImagesDiv",4,"ngIf"],[1,"footer"],[1,"colorSlider"],["loading","lazy","src","assets/images/paletteIcon.svg","alt","add",1,"addColorBtn"],[1,"colors"],["class","colorVariant",3,"background-color","click",4,"ngFor","ngForOf"],[1,"informationSpan"],[1,"descriptionSpan"],[1,"descriptionTitle"],[1,"descriptionInformation"],[1,"shopsSpan"],[1,"shopsTitle"],[1,"shopsListSpan"],["class","shopFunctions",4,"ngFor","ngForOf"],[3,"imagesArray"],[1,"uploadImagesDiv"],["type","file","accept",".png,.jpeg",1,"uploadImagesInput"],["loading","lazy","src","assets/images/uploadIcon.png","alt","",1,"uploadImagesIcon"],[1,"colorVariant",3,"click"],[1,"shopFunctions"],[1,"furnitureCost",3,"href"],[1,"linkShop",3,"click","title"],["loading","lazy","src","assets/images/linkIcon.svg","alt",""]],template:function(n,r){n&1&&pt(0,UY,21,8,"span",0),n&2&&_e("ngIf",r.furnitureData)},dependencies:[B0,Oi,gi,To],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;gap:30px;padding:50px 50px 15px;position:relative}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:0}.uploadImagesDiv[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:60px;place-items:center;margin:60px auto}.uploadImagesInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;border:none;background:none;width:100%;height:100%;cursor:pointer;opacity:0}.uploadImagesIcon[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%}.colorSlider[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;width:30%;height:300px;aspect-ratio:1;position:relative;--radius: 60px}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]{--angle: calc(360deg / var(--total-items) * (var(--index) - 1));transform:rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)))}.colors[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all .5s ease-in-out}.colorVariant[_ngcontent-%COMP%]{cursor:pointer;box-shadow:0 0 10px #fff;position:absolute;width:40px;aspect-ratio:1;border:5px solid black;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;transition:all .5s ease-in-out}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(1){--index: 1}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(2){--index: 2}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(3){--index: 3}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(4){--index: 4}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(5){--index: 5}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(6){--index: 6}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(7){--index: 7}.colors[_ngcontent-%COMP%] > .colorVariant[_ngcontent-%COMP%]:nth-child(8){--index: 8}.addColorBtn[_ngcontent-%COMP%]{border-radius:50%;grid-area:1/1/2/2;width:30px;aspect-ratio:1;z-index:3;padding:5px;background-color:#000;display:flex;place-content:center;cursor:pointer;box-shadow:0 0 10px #fff}.footer[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#000}.informationSpan[_ngcontent-%COMP%]{display:flex;gap:5px;width:75%}.descriptionSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:60%}.descriptionTitle[_ngcontent-%COMP%]{background-color:#344e41;color:#fff;border-radius:10px 0 0 10px;padding:15px;width:calc(100% - 30px);text-align:center}.descriptionInformation[_ngcontent-%COMP%]{color:#fff;padding:0 10px}.shopsSpan[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;gap:10px;transition:all .5s ease-in-out}.shopsTitle[_ngcontent-%COMP%]{width:calc(100% - 30px);text-align:center;background-color:#344e41;border-radius:0 10px 10px 0;padding:15px;color:#fff}.shopFunctions[_ngcontent-%COMP%]{width:100%;display:flex;gap:5px;height:45px;background:none;padding:0;border:none;border-radius:10px;cursor:pointer}.furnitureCost[_ngcontent-%COMP%]{width:75%;background-color:#a3b18a;color:#fff;border-radius:10px 0 0 10px;align-content:center;text-align:center;box-shadow:0 0 10px #fff;border:none;text-decoration:none}.shopsListSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.linkShop[_ngcontent-%COMP%]{width:25%;background-color:#a3b18a;border-radius:0 10px 10px 0;border:none;place-content:center;display:flex;box-shadow:0 0 10px #fff;transition:all .5s ease-in-out;cursor:copy}.linkShop[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}']})}return i})();var gS="167",Kl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Jl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FY=0,_O=1,PY=2;var GN=1,OY=2,Fa=3,$s=0,Pr=1,hs=2,Lc=0,Ud=1,wO=2,xO=3,MO=4,NY=5,Hl=100,LY=101,kY=102,BY=103,VY=104,zY=200,HY=201,jY=202,GY=203,iE=204,rE=205,WY=206,$Y=207,qY=208,XY=209,YY=210,ZY=211,KY=212,JY=213,QY=214,eZ=0,tZ=1,nZ=2,Vy=3,iZ=4,rZ=5,oZ=6,sZ=7,vv=0,aZ=1,cZ=2,kc=0,lZ=1,uZ=2,dZ=3,fZ=4,hZ=5,pZ=6,mZ=7,bO="attached",gZ="detached",EO=300,Ld=301,kd=302,tp=303,oE=304,_v=306,qs=1e3,Io=1001,np=1002,tr=1003,yS=1004;var Td=1005;var Fr=1006,Yh=1007;var Ws=1008;var Oa=1009,WN=1010,$N=1011,ip=1012,vS=1013,Wl=1014,ms=1015,yp=1016,_S=1017,wS=1018,Bd=1020,qN=35902,XN=1021,YN=1022,Ro=1023,ZN=1024,KN=1025,Fd=1026,Vd=1027,xS=1028,MS=1029,JN=1030,bS=1031;var ES=1033,Oy=33776,Ny=33777,Ly=33778,ky=33779,sE=35840,aE=35841,cE=35842,lE=35843,uE=36196,dE=37492,fE=37496,hE=37808,pE=37809,mE=37810,gE=37811,yE=37812,vE=37813,_E=37814,wE=37815,xE=37816,ME=37817,bE=37818,EE=37819,SE=37820,CE=37821,By=36492,AE=36494,TE=36495,QN=36283,DE=36284,IE=36285,RE=36286;var zd=2300,Hd=2301,Eb=2302,SO=2400,CO=2401,AO=2402,yZ=2500;var e3=0,wv=1,vp=2,vZ=3200,_Z=3201;var xv=0,wZ=1,Oc="",ci="srgb",Bi="srgb-linear",SS="display-p3",Mv="display-p3-linear",zy="linear",Vn="srgb",Hy="rec709",jy="p3";var ud=7680;var TO=519,xZ=512,MZ=513,bZ=514,t3=515,EZ=516,SZ=517,CZ=518,AZ=519,UE=35044;var DO="300 es",Pa=2e3,Gy=2001,Xs=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let n=this._listeners[e.type];if(n!==void 0){e.target=this;let r=n.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},Qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],IO=1234567,Zh=Math.PI/180,jd=180/Math.PI;function Uo(){let i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Qi[i&255]+Qi[i>>8&255]+Qi[i>>16&255]+Qi[i>>24&255]+"-"+Qi[e&255]+Qi[e>>8&255]+"-"+Qi[e>>16&15|64]+Qi[e>>24&255]+"-"+Qi[t&63|128]+Qi[t>>8&255]+"-"+Qi[t>>16&255]+Qi[t>>24&255]+Qi[n&255]+Qi[n>>8&255]+Qi[n>>16&255]+Qi[n>>24&255]).toLowerCase()}function Ai(i,e,t){return Math.max(e,Math.min(t,i))}function CS(i,e){return(i%e+e)%e}function TZ(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function DZ(i,e,t){return i!==e?(t-i)/(e-i):0}function Kh(i,e,t){return(1-t)*i+t*e}function IZ(i,e,t,n){return Kh(i,e,1-Math.exp(-t*n))}function RZ(i,e=1){return e-Math.abs(CS(i,e*2)-e)}function UZ(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function FZ(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function PZ(i,e){return i+Math.floor(Math.random()*(e-i+1))}function OZ(i,e){return i+Math.random()*(e-i)}function NZ(i){return i*(.5-Math.random())}function LZ(i){i!==void 0&&(IO=i);let e=IO+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function kZ(i){return i*Zh}function BZ(i){return i*jd}function VZ(i){return(i&i-1)===0&&i!==0}function zZ(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function HZ(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function jZ(i,e,t,n,r){let o=Math.cos,s=Math.sin,a=o(t/2),c=s(t/2),u=o((e+n)/2),f=s((e+n)/2),h=o((e-n)/2),p=s((e-n)/2),g=o((n-e)/2),y=s((n-e)/2);switch(r){case"XYX":i.set(a*f,c*h,c*p,a*u);break;case"YZY":i.set(c*p,a*f,c*h,a*u);break;case"ZXZ":i.set(c*h,c*p,a*f,a*u);break;case"XZX":i.set(a*f,c*y,c*g,a*u);break;case"YXY":i.set(c*g,a*f,c*y,a*u);break;case"ZYZ":i.set(c*y,c*g,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ps(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Sn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}var zn={DEG2RAD:Zh,RAD2DEG:jd,generateUUID:Uo,clamp:Ai,euclideanModulo:CS,mapLinear:TZ,inverseLerp:DZ,lerp:Kh,damp:IZ,pingpong:RZ,smoothstep:UZ,smootherstep:FZ,randInt:PZ,randFloat:OZ,randFloatSpread:NZ,seededRandom:LZ,degToRad:kZ,radToDeg:BZ,isPowerOfTwo:VZ,ceilPowerOfTwo:zZ,floorPowerOfTwo:HZ,setQuaternionFromProperEuler:jZ,normalize:Sn,denormalize:ps},Ge=class i{constructor(e=0,t=0){i.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(Ai(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*n-s*r+e.x,this.y=o*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},kt=class i{constructor(e,t,n,r,o,s,a,c,u){i.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,o,s,a,c,u)}set(e,t,n,r,o,s,a,c,u){let f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=o,f[5]=c,f[6]=n,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,o=this.elements,s=n[0],a=n[3],c=n[6],u=n[1],f=n[4],h=n[7],p=n[2],g=n[5],y=n[8],x=r[0],v=r[3],_=r[6],C=r[1],M=r[4],S=r[7],H=r[2],P=r[5],F=r[8];return o[0]=s*x+a*C+c*H,o[3]=s*v+a*M+c*P,o[6]=s*_+a*S+c*F,o[1]=u*x+f*C+h*H,o[4]=u*v+f*M+h*P,o[7]=u*_+f*S+h*F,o[2]=p*x+g*C+y*H,o[5]=p*v+g*M+y*P,o[8]=p*_+g*S+y*F,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],f=e[8];return t*s*f-t*a*u-n*o*f+n*a*c+r*o*u-r*s*c}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],f=e[8],h=f*s-a*u,p=a*c-f*o,g=u*o-s*c,y=t*h+n*p+r*g;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);let x=1/y;return e[0]=h*x,e[1]=(r*u-f*n)*x,e[2]=(a*n-r*s)*x,e[3]=p*x,e[4]=(f*t-r*c)*x,e[5]=(r*o-a*t)*x,e[6]=g*x,e[7]=(n*c-u*t)*x,e[8]=(s*t-n*o)*x,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,o,s,a){let c=Math.cos(o),u=Math.sin(o);return this.set(n*c,n*u,-n*(c*s+u*a)+s+e,-r*u,r*c,-r*(-u*s+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Sb.makeScale(e,t)),this}rotate(e){return this.premultiply(Sb.makeRotation(-e)),this}translate(e,t){return this.premultiply(Sb.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Sb=new kt;function n3(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function rp(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function GZ(){let i=rp("canvas");return i.style.display="block",i}var RO={};function Pd(i){i in RO||(RO[i]=!0,console.warn(i))}function WZ(i,e,t){return new Promise(function(n,r){function o(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:n()}}setTimeout(o,t)})}var UO=new kt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),FO=new kt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Bh={[Bi]:{transfer:zy,primaries:Hy,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i,fromReference:i=>i},[ci]:{transfer:Vn,primaries:Hy,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[Mv]:{transfer:zy,primaries:jy,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.applyMatrix3(FO),fromReference:i=>i.applyMatrix3(UO)},[SS]:{transfer:Vn,primaries:jy,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.convertSRGBToLinear().applyMatrix3(FO),fromReference:i=>i.applyMatrix3(UO).convertLinearToSRGB()}},$Z=new Set([Bi,Mv]),pn={enabled:!0,_workingColorSpace:Bi,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!$Z.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;let n=Bh[e].toReference,r=Bh[t].fromReference;return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return Bh[i].primaries},getTransfer:function(i){return i===Oc?zy:Bh[i].transfer},getLuminanceCoefficients:function(i,e=this._workingColorSpace){return i.fromArray(Bh[e].luminanceCoefficients)}};function Od(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Cb(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}var dd,FE=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{dd===void 0&&(dd=rp("canvas")),dd.width=e.width,dd.height=e.height;let n=dd.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=dd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=rp("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Od(o[s]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Od(t[n]/255)*255):t[n]=Od(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},qZ=0,Wy=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:qZ++}),this.uuid=Uo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(Ab(r[s].image)):o.push(Ab(r[s]))}else o=Ab(r);n.url=o}return t||(e.images[this.uuid]=n),n}};function Ab(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?FE.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var XZ=0,Lr=(()=>{class i extends Xs{constructor(t=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=Io,o=Io,s=Fr,a=Ws,c=Ro,u=Oa,f=i.DEFAULT_ANISOTROPY,h=Oc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:XZ++}),this.uuid=Uo(),this.name="",this.source=new Wy(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=c,this.internalFormat=null,this.type=u,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let n=t===void 0||typeof t=="string";if(!n&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==EO)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case qs:t.x=t.x-Math.floor(t.x);break;case Io:t.x=t.x<0?0:1;break;case np:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case qs:t.y=t.y-Math.floor(t.y);break;case Io:t.y=t.y<0?0:1;break;case np:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=EO,i.DEFAULT_ANISOTROPY=1,i})(),sn=class i{constructor(e=0,t=0,n=0,r=1){i.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,o,c=e.elements,u=c[0],f=c[4],h=c[8],p=c[1],g=c[5],y=c[9],x=c[2],v=c[6],_=c[10];if(Math.abs(f-p)<.01&&Math.abs(h-x)<.01&&Math.abs(y-v)<.01){if(Math.abs(f+p)<.1&&Math.abs(h+x)<.1&&Math.abs(y+v)<.1&&Math.abs(u+g+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let M=(u+1)/2,S=(g+1)/2,H=(_+1)/2,P=(f+p)/4,F=(h+x)/4,$=(y+v)/4;return M>S&&M>H?M<.01?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(M),r=P/n,o=F/n):S>H?S<.01?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(S),n=P/r,o=$/r):H<.01?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(H),n=F/o,r=$/o),this.set(n,r,o,t),this}let C=Math.sqrt((v-y)*(v-y)+(h-x)*(h-x)+(p-f)*(p-f));return Math.abs(C)<.001&&(C=1),this.x=(v-y)/C,this.y=(h-x)/C,this.z=(p-f)/C,this.w=Math.acos((u+g+_-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},PE=class extends Xs{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t);let r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);let o=new Lr(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);o.flipY=!1,o.generateMipmaps=n.generateMipmaps,o.internalFormat=n.internalFormat,this.textures=[];let s=n.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Wy(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Na=class extends PE{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}},$y=class extends Lr{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=tr,this.minFilter=tr,this.wrapR=Io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var OE=class extends Lr{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=tr,this.minFilter=tr,this.wrapR=Io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Qn=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,o,s,a){let c=n[r+0],u=n[r+1],f=n[r+2],h=n[r+3],p=o[s+0],g=o[s+1],y=o[s+2],x=o[s+3];if(a===0){e[t+0]=c,e[t+1]=u,e[t+2]=f,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=g,e[t+2]=y,e[t+3]=x;return}if(h!==x||c!==p||u!==g||f!==y){let v=1-a,_=c*p+u*g+f*y+h*x,C=_>=0?1:-1,M=1-_*_;if(M>Number.EPSILON){let H=Math.sqrt(M),P=Math.atan2(H,_*C);v=Math.sin(v*P)/H,a=Math.sin(a*P)/H}let S=a*C;if(c=c*v+p*S,u=u*v+g*S,f=f*v+y*S,h=h*v+x*S,v===1-a){let H=1/Math.sqrt(c*c+u*u+f*f+h*h);c*=H,u*=H,f*=H,h*=H}}e[t]=c,e[t+1]=u,e[t+2]=f,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,o,s){let a=n[r],c=n[r+1],u=n[r+2],f=n[r+3],h=o[s],p=o[s+1],g=o[s+2],y=o[s+3];return e[t]=a*y+f*h+c*g-u*p,e[t+1]=c*y+f*p+u*h-a*g,e[t+2]=u*y+f*g+a*p-c*h,e[t+3]=f*y-a*h-c*p-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let n=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,c=Math.sin,u=a(n/2),f=a(r/2),h=a(o/2),p=c(n/2),g=c(r/2),y=c(o/2);switch(s){case"XYZ":this._x=p*f*h+u*g*y,this._y=u*g*h-p*f*y,this._z=u*f*y+p*g*h,this._w=u*f*h-p*g*y;break;case"YXZ":this._x=p*f*h+u*g*y,this._y=u*g*h-p*f*y,this._z=u*f*y-p*g*h,this._w=u*f*h+p*g*y;break;case"ZXY":this._x=p*f*h-u*g*y,this._y=u*g*h+p*f*y,this._z=u*f*y+p*g*h,this._w=u*f*h-p*g*y;break;case"ZYX":this._x=p*f*h-u*g*y,this._y=u*g*h+p*f*y,this._z=u*f*y-p*g*h,this._w=u*f*h+p*g*y;break;case"YZX":this._x=p*f*h+u*g*y,this._y=u*g*h+p*f*y,this._z=u*f*y-p*g*h,this._w=u*f*h-p*g*y;break;case"XZY":this._x=p*f*h-u*g*y,this._y=u*g*h-p*f*y,this._z=u*f*y+p*g*h,this._w=u*f*h+p*g*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],o=t[8],s=t[1],a=t[5],c=t[9],u=t[2],f=t[6],h=t[10],p=n+a+h;if(p>0){let g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-c)*g,this._y=(o-u)*g,this._z=(s-r)*g}else if(n>a&&n>h){let g=2*Math.sqrt(1+n-a-h);this._w=(f-c)/g,this._x=.25*g,this._y=(r+s)/g,this._z=(o+u)/g}else if(a>h){let g=2*Math.sqrt(1+a-n-h);this._w=(o-u)/g,this._x=(r+s)/g,this._y=.25*g,this._z=(c+f)/g}else{let g=2*Math.sqrt(1+h-n-a);this._w=(s-r)/g,this._x=(o+u)/g,this._y=(c+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ai(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(n===0)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,o=e._z,s=e._w,a=t._x,c=t._y,u=t._z,f=t._w;return this._x=n*f+s*a+r*u-o*c,this._y=r*f+s*c+o*a-n*u,this._z=o*f+s*u+n*c-r*a,this._w=s*f-n*a-r*c-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let n=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+n*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=o,this;let c=1-a*a;if(c<=Number.EPSILON){let g=1-t;return this._w=g*s+t*this._w,this._x=g*n+t*this._x,this._y=g*r+t*this._y,this._z=g*o+t*this._z,this.normalize(),this}let u=Math.sqrt(c),f=Math.atan2(u,a),h=Math.sin((1-t)*f)/u,p=Math.sin(t*f)/u;return this._w=s*h+this._w*p,this._x=n*h+this._x*p,this._y=r*h+this._y*p,this._z=o*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},z=class i{constructor(e=0,t=0,n=0){i.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(PO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(PO.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*r,this.y=o[1]*t+o[4]*n+o[7]*r,this.z=o[2]*t+o[5]*n+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*n+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*n+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,o=e.x,s=e.y,a=e.z,c=e.w,u=2*(s*r-a*n),f=2*(a*t-o*r),h=2*(o*n-s*t);return this.x=t+c*u+s*h-a*f,this.y=n+c*f+a*u-o*h,this.z=r+c*h+o*f-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r,this.y=o[1]*t+o[5]*n+o[9]*r,this.z=o[2]*t+o[6]*n+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,o=e.z,s=t.x,a=t.y,c=t.z;return this.x=r*c-o*a,this.y=o*s-n*c,this.z=n*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Tb.copy(this).projectOnVector(e),this.sub(Tb)}reflect(e){return this.sub(Tb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(Ai(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},Tb=new z,PO=new Qn,Or=class{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ls.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ls.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=ls.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(n!==void 0){let o=n.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,ls):ls.fromBufferAttribute(o,s),ls.applyMatrix4(e.matrixWorld),this.expandByPoint(ls);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ry.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),ry.copy(n.boundingBox)),ry.applyMatrix4(e.matrixWorld),this.union(ry)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ls),ls.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vh),oy.subVectors(this.max,Vh),fd.subVectors(e.a,Vh),hd.subVectors(e.b,Vh),pd.subVectors(e.c,Vh),Dc.subVectors(hd,fd),Ic.subVectors(pd,hd),Ol.subVectors(fd,pd);let t=[0,-Dc.z,Dc.y,0,-Ic.z,Ic.y,0,-Ol.z,Ol.y,Dc.z,0,-Dc.x,Ic.z,0,-Ic.x,Ol.z,0,-Ol.x,-Dc.y,Dc.x,0,-Ic.y,Ic.x,0,-Ol.y,Ol.x,0];return!Db(t,fd,hd,pd,oy)||(t=[1,0,0,0,1,0,0,0,1],!Db(t,fd,hd,pd,oy))?!1:(sy.crossVectors(Dc,Ic),t=[sy.x,sy.y,sy.z],Db(t,fd,hd,pd,oy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ls).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ls).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Aa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Aa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Aa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Aa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Aa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Aa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Aa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Aa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Aa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Aa=[new z,new z,new z,new z,new z,new z,new z,new z],ls=new z,ry=new Or,fd=new z,hd=new z,pd=new z,Dc=new z,Ic=new z,Ol=new z,Vh=new z,oy=new z,sy=new z,Nl=new z;function Db(i,e,t,n,r){for(let o=0,s=i.length-3;o<=s;o+=3){Nl.fromArray(i,o);let a=r.x*Math.abs(Nl.x)+r.y*Math.abs(Nl.y)+r.z*Math.abs(Nl.z),c=e.dot(Nl),u=t.dot(Nl),f=n.dot(Nl);if(Math.max(-Math.max(c,u,f),Math.min(c,u,f))>a)return!1}return!0}var YZ=new Or,zh=new z,Ib=new z,co=class{constructor(e=new z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;t!==void 0?n.copy(t):YZ.setFromPoints(e).getCenter(n);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;zh.subVectors(e,this.center);let t=zh.lengthSq();if(t>this.radius*this.radius){let n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(zh,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Ib.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(zh.copy(e.center).add(Ib)),this.expandByPoint(zh.copy(e.center).sub(Ib))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ta=new z,Rb=new z,ay=new z,Rc=new z,Ub=new z,cy=new z,Fb=new z,La=class{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ta)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Ta.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ta.copy(this.origin).addScaledVector(this.direction,t),Ta.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Rb.copy(e).add(t).multiplyScalar(.5),ay.copy(t).sub(e).normalize(),Rc.copy(this.origin).sub(Rb);let o=e.distanceTo(t)*.5,s=-this.direction.dot(ay),a=Rc.dot(this.direction),c=-Rc.dot(ay),u=Rc.lengthSq(),f=Math.abs(1-s*s),h,p,g,y;if(f>0)if(h=s*c-a,p=s*a-c,y=o*f,h>=0)if(p>=-y)if(p<=y){let x=1/f;h*=x,p*=x,g=h*(h+s*p+2*a)+p*(s*h+p+2*c)+u}else p=o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*c)+u;else p=-o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*c)+u;else p<=-y?(h=Math.max(0,-(-s*o+a)),p=h>0?-o:Math.min(Math.max(-o,-c),o),g=-h*h+p*(p+2*c)+u):p<=y?(h=0,p=Math.min(Math.max(-o,-c),o),g=p*(p+2*c)+u):(h=Math.max(0,-(s*o+a)),p=h>0?o:Math.min(Math.max(-o,-c),o),g=-h*h+p*(p+2*c)+u);else p=s>0?-o:o,h=Math.max(0,-(s*p+a)),g=-h*h+p*(p+2*c)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(Rb).addScaledVector(ay,p),g}intersectSphere(e,t){Ta.subVectors(e.center,this.origin);let n=Ta.dot(this.direction),r=Ta.dot(Ta)-n*n,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=n-s,c=n+s;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,o,s,a,c,u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(n=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(n=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),f>=0?(o=(e.min.y-p.y)*f,s=(e.max.y-p.y)*f):(o=(e.max.y-p.y)*f,s=(e.min.y-p.y)*f),n>s||o>r||((o>n||isNaN(n))&&(n=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(e.min.z-p.z)*h,c=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,c=(e.min.z-p.z)*h),n>c||a>r)||((a>n||n!==n)&&(n=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Ta)!==null}intersectTriangle(e,t,n,r,o){Ub.subVectors(t,e),cy.subVectors(n,e),Fb.crossVectors(Ub,cy);let s=this.direction.dot(Fb),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Rc.subVectors(this.origin,e);let c=a*this.direction.dot(cy.crossVectors(Rc,cy));if(c<0)return null;let u=a*this.direction.dot(Ub.cross(Rc));if(u<0||c+u>s)return null;let f=-a*Rc.dot(Fb);return f<0?null:this.at(f/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ot=class i{constructor(e,t,n,r,o,s,a,c,u,f,h,p,g,y,x,v){i.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,o,s,a,c,u,f,h,p,g,y,x,v)}set(e,t,n,r,o,s,a,c,u,f,h,p,g,y,x,v){let _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=o,_[5]=s,_[9]=a,_[13]=c,_[2]=u,_[6]=f,_[10]=h,_[14]=p,_[3]=g,_[7]=y,_[11]=x,_[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new i().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/md.setFromMatrixColumn(e,0).length(),o=1/md.setFromMatrixColumn(e,1).length(),s=1/md.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,o=e.z,s=Math.cos(n),a=Math.sin(n),c=Math.cos(r),u=Math.sin(r),f=Math.cos(o),h=Math.sin(o);if(e.order==="XYZ"){let p=s*f,g=s*h,y=a*f,x=a*h;t[0]=c*f,t[4]=-c*h,t[8]=u,t[1]=g+y*u,t[5]=p-x*u,t[9]=-a*c,t[2]=x-p*u,t[6]=y+g*u,t[10]=s*c}else if(e.order==="YXZ"){let p=c*f,g=c*h,y=u*f,x=u*h;t[0]=p+x*a,t[4]=y*a-g,t[8]=s*u,t[1]=s*h,t[5]=s*f,t[9]=-a,t[2]=g*a-y,t[6]=x+p*a,t[10]=s*c}else if(e.order==="ZXY"){let p=c*f,g=c*h,y=u*f,x=u*h;t[0]=p-x*a,t[4]=-s*h,t[8]=y+g*a,t[1]=g+y*a,t[5]=s*f,t[9]=x-p*a,t[2]=-s*u,t[6]=a,t[10]=s*c}else if(e.order==="ZYX"){let p=s*f,g=s*h,y=a*f,x=a*h;t[0]=c*f,t[4]=y*u-g,t[8]=p*u+x,t[1]=c*h,t[5]=x*u+p,t[9]=g*u-y,t[2]=-u,t[6]=a*c,t[10]=s*c}else if(e.order==="YZX"){let p=s*c,g=s*u,y=a*c,x=a*u;t[0]=c*f,t[4]=x-p*h,t[8]=y*h+g,t[1]=h,t[5]=s*f,t[9]=-a*f,t[2]=-u*f,t[6]=g*h+y,t[10]=p-x*h}else if(e.order==="XZY"){let p=s*c,g=s*u,y=a*c,x=a*u;t[0]=c*f,t[4]=-h,t[8]=u*f,t[1]=p*h+x,t[5]=s*f,t[9]=g*h-y,t[2]=y*h-g,t[6]=a*f,t[10]=x*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZZ,e,KZ)}lookAt(e,t,n){let r=this.elements;return so.subVectors(e,t),so.lengthSq()===0&&(so.z=1),so.normalize(),Uc.crossVectors(n,so),Uc.lengthSq()===0&&(Math.abs(n.z)===1?so.x+=1e-4:so.z+=1e-4,so.normalize(),Uc.crossVectors(n,so)),Uc.normalize(),ly.crossVectors(so,Uc),r[0]=Uc.x,r[4]=ly.x,r[8]=so.x,r[1]=Uc.y,r[5]=ly.y,r[9]=so.y,r[2]=Uc.z,r[6]=ly.z,r[10]=so.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,o=this.elements,s=n[0],a=n[4],c=n[8],u=n[12],f=n[1],h=n[5],p=n[9],g=n[13],y=n[2],x=n[6],v=n[10],_=n[14],C=n[3],M=n[7],S=n[11],H=n[15],P=r[0],F=r[4],$=r[8],U=r[12],D=r[1],j=r[5],le=r[9],re=r[13],xe=r[2],ve=r[6],W=r[10],Q=r[14],X=r[3],me=r[7],Le=r[11],$e=r[15];return o[0]=s*P+a*D+c*xe+u*X,o[4]=s*F+a*j+c*ve+u*me,o[8]=s*$+a*le+c*W+u*Le,o[12]=s*U+a*re+c*Q+u*$e,o[1]=f*P+h*D+p*xe+g*X,o[5]=f*F+h*j+p*ve+g*me,o[9]=f*$+h*le+p*W+g*Le,o[13]=f*U+h*re+p*Q+g*$e,o[2]=y*P+x*D+v*xe+_*X,o[6]=y*F+x*j+v*ve+_*me,o[10]=y*$+x*le+v*W+_*Le,o[14]=y*U+x*re+v*Q+_*$e,o[3]=C*P+M*D+S*xe+H*X,o[7]=C*F+M*j+S*ve+H*me,o[11]=C*$+M*le+S*W+H*Le,o[15]=C*U+M*re+S*Q+H*$e,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],o=e[12],s=e[1],a=e[5],c=e[9],u=e[13],f=e[2],h=e[6],p=e[10],g=e[14],y=e[3],x=e[7],v=e[11],_=e[15];return y*(+o*c*h-r*u*h-o*a*p+n*u*p+r*a*g-n*c*g)+x*(+t*c*g-t*u*p+o*s*p-r*s*g+r*u*f-o*c*f)+v*(+t*u*h-t*a*g-o*s*h+n*s*g+o*a*f-n*u*f)+_*(-r*a*f-t*c*h+t*a*p+r*s*h-n*s*p+n*c*f)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],f=e[8],h=e[9],p=e[10],g=e[11],y=e[12],x=e[13],v=e[14],_=e[15],C=h*v*u-x*p*u+x*c*g-a*v*g-h*c*_+a*p*_,M=y*p*u-f*v*u-y*c*g+s*v*g+f*c*_-s*p*_,S=f*x*u-y*h*u+y*a*g-s*x*g-f*a*_+s*h*_,H=y*h*c-f*x*c-y*a*p+s*x*p+f*a*v-s*h*v,P=t*C+n*M+r*S+o*H;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let F=1/P;return e[0]=C*F,e[1]=(x*p*o-h*v*o-x*r*g+n*v*g+h*r*_-n*p*_)*F,e[2]=(a*v*o-x*c*o+x*r*u-n*v*u-a*r*_+n*c*_)*F,e[3]=(h*c*o-a*p*o-h*r*u+n*p*u+a*r*g-n*c*g)*F,e[4]=M*F,e[5]=(f*v*o-y*p*o+y*r*g-t*v*g-f*r*_+t*p*_)*F,e[6]=(y*c*o-s*v*o-y*r*u+t*v*u+s*r*_-t*c*_)*F,e[7]=(s*p*o-f*c*o+f*r*u-t*p*u-s*r*g+t*c*g)*F,e[8]=S*F,e[9]=(y*h*o-f*x*o-y*n*g+t*x*g+f*n*_-t*h*_)*F,e[10]=(s*x*o-y*a*o+y*n*u-t*x*u-s*n*_+t*a*_)*F,e[11]=(f*a*o-s*h*o-f*n*u+t*h*u+s*n*g-t*a*g)*F,e[12]=H*F,e[13]=(f*x*r-y*h*r+y*n*p-t*x*p-f*n*v+t*h*v)*F,e[14]=(y*a*r-s*x*r-y*n*c+t*x*c+s*n*v-t*a*v)*F,e[15]=(s*h*r-f*a*r+f*n*c-t*h*c-s*n*p+t*a*p)*F,this}scale(e){let t=this.elements,n=e.x,r=e.y,o=e.z;return t[0]*=n,t[4]*=r,t[8]*=o,t[1]*=n,t[5]*=r,t[9]*=o,t[2]*=n,t[6]*=r,t[10]*=o,t[3]*=n,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),o=1-n,s=e.x,a=e.y,c=e.z,u=o*s,f=o*a;return this.set(u*s+n,u*a-r*c,u*c+r*a,0,u*a+r*c,f*a+n,f*c-r*s,0,u*c-r*a,f*c+r*s,o*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,o,s){return this.set(1,n,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,o=t._x,s=t._y,a=t._z,c=t._w,u=o+o,f=s+s,h=a+a,p=o*u,g=o*f,y=o*h,x=s*f,v=s*h,_=a*h,C=c*u,M=c*f,S=c*h,H=n.x,P=n.y,F=n.z;return r[0]=(1-(x+_))*H,r[1]=(g+S)*H,r[2]=(y-M)*H,r[3]=0,r[4]=(g-S)*P,r[5]=(1-(p+_))*P,r[6]=(v+C)*P,r[7]=0,r[8]=(y+M)*F,r[9]=(v-C)*F,r[10]=(1-(p+x))*F,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,o=md.set(r[0],r[1],r[2]).length(),s=md.set(r[4],r[5],r[6]).length(),a=md.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],us.copy(this);let u=1/o,f=1/s,h=1/a;return us.elements[0]*=u,us.elements[1]*=u,us.elements[2]*=u,us.elements[4]*=f,us.elements[5]*=f,us.elements[6]*=f,us.elements[8]*=h,us.elements[9]*=h,us.elements[10]*=h,t.setFromRotationMatrix(us),n.x=o,n.y=s,n.z=a,this}makePerspective(e,t,n,r,o,s,a=Pa){let c=this.elements,u=2*o/(t-e),f=2*o/(n-r),h=(t+e)/(t-e),p=(n+r)/(n-r),g,y;if(a===Pa)g=-(s+o)/(s-o),y=-2*s*o/(s-o);else if(a===Gy)g=-s/(s-o),y=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=h,c[12]=0,c[1]=0,c[5]=f,c[9]=p,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=y,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,r,o,s,a=Pa){let c=this.elements,u=1/(t-e),f=1/(n-r),h=1/(s-o),p=(t+e)*u,g=(n+r)*f,y,x;if(a===Pa)y=(s+o)*h,x=-2*h;else if(a===Gy)y=o*h,x=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-p,c[1]=0,c[5]=2*f,c[9]=0,c[13]=-g,c[2]=0,c[6]=0,c[10]=x,c[14]=-y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},md=new z,us=new ot,ZZ=new z(0,0,0),KZ=new z(1,1,1),Uc=new z,ly=new z,so=new z,OO=new ot,NO=new Qn,vi=(()=>{class i{constructor(t=0,n=0,r=0,o=i.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,o=this._order){return this._x=t,this._y=n,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){let o=t.elements,s=o[0],a=o[4],c=o[8],u=o[1],f=o[5],h=o[9],p=o[2],g=o[6],y=o[10];switch(n){case"XYZ":this._y=Math.asin(Ai(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,y),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(g,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Ai(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(c,y),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ai(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,y),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Ai(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(Ai(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(c,y));break;case"XZY":this._z=Math.asin(-Ai(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,f),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-h,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return OO.makeRotationFromQuaternion(t),this.setFromRotationMatrix(OO,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return NO.setFromEuler(this),this.setFromQuaternion(NO,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})(),op=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},JZ=0,LO=new z,gd=new Qn,Da=new ot,uy=new z,Hh=new z,QZ=new z,eK=new Qn,kO=new z(1,0,0),BO=new z(0,1,0),VO=new z(0,0,1),zO={type:"added"},tK={type:"removed"},yd={type:"childadded",child:null},Pb={type:"childremoved",child:null},ri=(()=>{class i extends Xs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:JZ++}),this.uuid=Uo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();let t=new z,n=new vi,r=new Qn,o=new z(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ot},normalMatrix:{value:new kt}}),this.matrix=new ot,this.matrixWorld=new ot,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new op,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return gd.setFromAxisAngle(t,n),this.quaternion.multiply(gd),this}rotateOnWorldAxis(t,n){return gd.setFromAxisAngle(t,n),this.quaternion.premultiply(gd),this}rotateX(t){return this.rotateOnAxis(kO,t)}rotateY(t){return this.rotateOnAxis(BO,t)}rotateZ(t){return this.rotateOnAxis(VO,t)}translateOnAxis(t,n){return LO.copy(t).applyQuaternion(this.quaternion),this.position.add(LO.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(kO,t)}translateY(t){return this.translateOnAxis(BO,t)}translateZ(t){return this.translateOnAxis(VO,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Da.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?uy.copy(t):uy.set(t,n,r);let o=this.parent;this.updateWorldMatrix(!0,!1),Hh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Da.lookAt(Hh,uy,this.up):Da.lookAt(uy,Hh,this.up),this.quaternion.setFromRotationMatrix(Da),o&&(Da.extractRotation(o.matrixWorld),gd.setFromRotationMatrix(Da),this.quaternion.premultiply(gd.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(zO),yd.child=t,this.dispatchEvent(yd),yd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(tK),Pb.child=t,this.dispatchEvent(Pb),Pb.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Da.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Da.multiply(t.parent.matrixWorld)),t.applyMatrix4(Da),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(zO),yd.child=t,this.dispatchEvent(yd),yd.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(t,n);if(a!==void 0)return a}}getObjectsByProperty(t,n,r=[]){this[t]===n&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,n,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hh,t,QZ),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hh,eK,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);let n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverseVisible(t)}traverseAncestors(t){let n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].updateMatrixWorld(t)}updateWorldMatrix(t,n){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){let n=t===void 0||typeof t=="string",r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(c,u){return c[u.uuid]===void 0&&(c[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let u=c.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){let p=u[f];s(t.shapes,p)}else s(t.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let u=0,f=this.material.length;u<f;u++)c.push(s(t.materials,this.material[u]));o.material=c}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++){let u=this.animations[c];o.animations.push(s(t.animations,u))}}if(n){let c=a(t.geometries),u=a(t.materials),f=a(t.textures),h=a(t.images),p=a(t.shapes),g=a(t.skeletons),y=a(t.animations),x=a(t.nodes);c.length>0&&(r.geometries=c),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),y.length>0&&(r.animations=y),x.length>0&&(r.nodes=x)}return r.object=o,r;function a(c){let u=[];for(let f in c){let h=c[f];delete h.metadata,u.push(h)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(let r=0;r<t.children.length;r++){let o=t.children[r];this.add(o.clone())}return this}}return i.DEFAULT_UP=new z(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})(),ds=new z,Ia=new z,Ob=new z,Ra=new z,vd=new z,_d=new z,HO=new z,Nb=new z,Lb=new z,kb=new z,Dd=class i{constructor(e=new z,t=new z,n=new z){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ds.subVectors(e,t),r.cross(ds);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,n,r,o){ds.subVectors(r,t),Ia.subVectors(n,t),Ob.subVectors(e,t);let s=ds.dot(ds),a=ds.dot(Ia),c=ds.dot(Ob),u=Ia.dot(Ia),f=Ia.dot(Ob),h=s*u-a*a;if(h===0)return o.set(0,0,0),null;let p=1/h,g=(u*c-a*f)*p,y=(s*f-a*c)*p;return o.set(1-g-y,y,g)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Ra)===null?!1:Ra.x>=0&&Ra.y>=0&&Ra.x+Ra.y<=1}static getInterpolation(e,t,n,r,o,s,a,c){return this.getBarycoord(e,t,n,r,Ra)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,Ra.x),c.addScaledVector(s,Ra.y),c.addScaledVector(a,Ra.z),c)}static isFrontFacing(e,t,n,r){return ds.subVectors(n,t),Ia.subVectors(e,t),ds.cross(Ia).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ds.subVectors(this.c,this.b),Ia.subVectors(this.a,this.b),ds.cross(Ia).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return i.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return i.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,o){return i.getInterpolation(e,this.a,this.b,this.c,t,n,r,o)}containsPoint(e){return i.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return i.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n=this.a,r=this.b,o=this.c,s,a;vd.subVectors(r,n),_d.subVectors(o,n),Nb.subVectors(e,n);let c=vd.dot(Nb),u=_d.dot(Nb);if(c<=0&&u<=0)return t.copy(n);Lb.subVectors(e,r);let f=vd.dot(Lb),h=_d.dot(Lb);if(f>=0&&h<=f)return t.copy(r);let p=c*h-f*u;if(p<=0&&c>=0&&f<=0)return s=c/(c-f),t.copy(n).addScaledVector(vd,s);kb.subVectors(e,o);let g=vd.dot(kb),y=_d.dot(kb);if(y>=0&&g<=y)return t.copy(o);let x=g*u-c*y;if(x<=0&&u>=0&&y<=0)return a=u/(u-y),t.copy(n).addScaledVector(_d,a);let v=f*y-g*h;if(v<=0&&h-f>=0&&g-y>=0)return HO.subVectors(o,r),a=(h-f)/(h-f+(g-y)),t.copy(r).addScaledVector(HO,a);let _=1/(v+x+p);return s=x*_,a=p*_,t.copy(n).addScaledVector(vd,s).addScaledVector(_d,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},i3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fc={h:0,s:0,l:0},dy={h:0,s:0,l:0};function Bb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}var rt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ci){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,pn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=pn.workingColorSpace){return this.r=e,this.g=t,this.b=n,pn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=pn.workingColorSpace){if(e=CS(e,1),t=Ai(t,0,1),n=Ai(n,0,1),t===0)this.r=this.g=this.b=n;else{let o=n<=.5?n*(1+t):n+t-n*t,s=2*n-o;this.r=Bb(s,o,e+1/3),this.g=Bb(s,o,e),this.b=Bb(s,o,e-1/3)}return pn.toWorkingColorSpace(this,r),this}setStyle(e,t=ci){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ci){let n=i3[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Od(e.r),this.g=Od(e.g),this.b=Od(e.b),this}copyLinearToSRGB(e){return this.r=Cb(e.r),this.g=Cb(e.g),this.b=Cb(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ci){return pn.fromWorkingColorSpace(er.copy(this),e),Math.round(Ai(er.r*255,0,255))*65536+Math.round(Ai(er.g*255,0,255))*256+Math.round(Ai(er.b*255,0,255))}getHexString(e=ci){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=pn.workingColorSpace){pn.fromWorkingColorSpace(er.copy(this),t);let n=er.r,r=er.g,o=er.b,s=Math.max(n,r,o),a=Math.min(n,r,o),c,u,f=(a+s)/2;if(a===s)c=0,u=0;else{let h=s-a;switch(u=f<=.5?h/(s+a):h/(2-s-a),s){case n:c=(r-o)/h+(r<o?6:0);break;case r:c=(o-n)/h+2;break;case o:c=(n-r)/h+4;break}c/=6}return e.h=c,e.s=u,e.l=f,e}getRGB(e,t=pn.workingColorSpace){return pn.fromWorkingColorSpace(er.copy(this),t),e.r=er.r,e.g=er.g,e.b=er.b,e}getStyle(e=ci){pn.fromWorkingColorSpace(er.copy(this),e);let t=er.r,n=er.g,r=er.b;return e!==ci?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Fc),this.setHSL(Fc.h+e,Fc.s+t,Fc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Fc),e.getHSL(dy);let n=Kh(Fc.h,dy.h,t),r=Kh(Fc.s,dy.s,t),o=Kh(Fc.l,dy.l,t);return this.setHSL(n,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*n+o[6]*r,this.g=o[1]*t+o[4]*n+o[7]*r,this.b=o[2]*t+o[5]*n+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},er=new rt;rt.NAMES=i3;var nK=0,ki=class extends Xs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nK++}),this.uuid=Uo(),this.name="",this.type="Material",this.blending=Ud,this.side=$s,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=iE,this.blendDst=rE,this.blendEquation=Hl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new rt(0,0,0),this.blendAlpha=0,this.depthFunc=Vy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=TO,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ud,this.stencilZFail=ud,this.stencilZPass=ud,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ud&&(n.blending=this.blending),this.side!==$s&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==iE&&(n.blendSrc=this.blendSrc),this.blendDst!==rE&&(n.blendDst=this.blendDst),this.blendEquation!==Hl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Vy&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==TO&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ud&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ud&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ud&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(o){let s=[];for(let a in o){let c=o[a];delete c.metadata,s.push(c)}return s}if(t){let o=r(e.textures),s=r(e.images);o.length>0&&(n.textures=o),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(t!==null){let r=t.length;n=new Array(r);for(let o=0;o!==r;++o)n[o]=t[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}},Fo=class extends ki{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new vi,this.combine=vv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var yi=new z,fy=new Ge,Ti=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=UE,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ms,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Pd("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)fy.fromBufferAttribute(this,t),fy.applyMatrix3(e),this.setXY(t,fy.x,fy.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix3(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix4(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.applyNormalMatrix(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.transformDirection(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ps(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ps(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ps(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ps(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ps(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array),o=Sn(o,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==UE&&(e.usage=this.usage),e}};var Gd=class extends Ti{constructor(e,t,n){super(new Uint16Array(e),t,n)}};var qy=class extends Ti{constructor(e,t,n){super(new Uint32Array(e),t,n)}};var Cn=class extends Ti{constructor(e,t,n){super(new Float32Array(e),t,n)}},iK=0,Do=new ot,Vb=new ri,wd=new z,ao=new Or,jh=new Or,Li=new z,_i=class i extends Xs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:iK++}),this.uuid=Uo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(n3(e)?qy:Gd)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(n!==void 0){let o=new kt().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Do.makeRotationFromQuaternion(e),this.applyMatrix4(Do),this}rotateX(e){return Do.makeRotationX(e),this.applyMatrix4(Do),this}rotateY(e){return Do.makeRotationY(e),this.applyMatrix4(Do),this}rotateZ(e){return Do.makeRotationZ(e),this.applyMatrix4(Do),this}translate(e,t,n){return Do.makeTranslation(e,t,n),this.applyMatrix4(Do),this}scale(e,t,n){return Do.makeScale(e,t,n),this.applyMatrix4(Do),this}lookAt(e){return Vb.lookAt(e),Vb.updateMatrix(),this.applyMatrix4(Vb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wd).negate(),this.translate(wd.x,wd.y,wd.z),this}setFromPoints(e){let t=[];for(let n=0,r=e.length;n<r;n++){let o=e[n];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Cn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Or);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){let o=t[n];ao.setFromBufferAttribute(o),this.morphTargetsRelative?(Li.addVectors(this.boundingBox.min,ao.min),this.boundingBox.expandByPoint(Li),Li.addVectors(this.boundingBox.max,ao.max),this.boundingBox.expandByPoint(Li)):(this.boundingBox.expandByPoint(ao.min),this.boundingBox.expandByPoint(ao.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new z,1/0);return}if(e){let n=this.boundingSphere.center;if(ao.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];jh.setFromBufferAttribute(a),this.morphTargetsRelative?(Li.addVectors(ao.min,jh.min),ao.expandByPoint(Li),Li.addVectors(ao.max,jh.max),ao.expandByPoint(Li)):(ao.expandByPoint(jh.min),ao.expandByPoint(jh.max))}ao.getCenter(n);let r=0;for(let o=0,s=e.count;o<s;o++)Li.fromBufferAttribute(e,o),r=Math.max(r,n.distanceToSquared(Li));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],c=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)Li.fromBufferAttribute(a,u),c&&(wd.fromBufferAttribute(e,u),Li.add(wd)),r=Math.max(r,n.distanceToSquared(Li))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=t.position,r=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ti(new Float32Array(4*n.count),4));let s=this.getAttribute("tangent"),a=[],c=[];for(let $=0;$<n.count;$++)a[$]=new z,c[$]=new z;let u=new z,f=new z,h=new z,p=new Ge,g=new Ge,y=new Ge,x=new z,v=new z;function _($,U,D){u.fromBufferAttribute(n,$),f.fromBufferAttribute(n,U),h.fromBufferAttribute(n,D),p.fromBufferAttribute(o,$),g.fromBufferAttribute(o,U),y.fromBufferAttribute(o,D),f.sub(u),h.sub(u),g.sub(p),y.sub(p);let j=1/(g.x*y.y-y.x*g.y);isFinite(j)&&(x.copy(f).multiplyScalar(y.y).addScaledVector(h,-g.y).multiplyScalar(j),v.copy(h).multiplyScalar(g.x).addScaledVector(f,-y.x).multiplyScalar(j),a[$].add(x),a[U].add(x),a[D].add(x),c[$].add(v),c[U].add(v),c[D].add(v))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let $=0,U=C.length;$<U;++$){let D=C[$],j=D.start,le=D.count;for(let re=j,xe=j+le;re<xe;re+=3)_(e.getX(re+0),e.getX(re+1),e.getX(re+2))}let M=new z,S=new z,H=new z,P=new z;function F($){H.fromBufferAttribute(r,$),P.copy(H);let U=a[$];M.copy(U),M.sub(H.multiplyScalar(H.dot(U))).normalize(),S.crossVectors(P,U);let j=S.dot(c[$])<0?-1:1;s.setXYZW($,M.x,M.y,M.z,j)}for(let $=0,U=C.length;$<U;++$){let D=C[$],j=D.start,le=D.count;for(let re=j,xe=j+le;re<xe;re+=3)F(e.getX(re+0)),F(e.getX(re+1)),F(e.getX(re+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ti(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let p=0,g=n.count;p<g;p++)n.setXYZ(p,0,0,0);let r=new z,o=new z,s=new z,a=new z,c=new z,u=new z,f=new z,h=new z;if(e)for(let p=0,g=e.count;p<g;p+=3){let y=e.getX(p+0),x=e.getX(p+1),v=e.getX(p+2);r.fromBufferAttribute(t,y),o.fromBufferAttribute(t,x),s.fromBufferAttribute(t,v),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),a.fromBufferAttribute(n,y),c.fromBufferAttribute(n,x),u.fromBufferAttribute(n,v),a.add(f),c.add(f),u.add(f),n.setXYZ(y,a.x,a.y,a.z),n.setXYZ(x,c.x,c.y,c.z),n.setXYZ(v,u.x,u.y,u.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),o.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),n.setXYZ(p+0,f.x,f.y,f.z),n.setXYZ(p+1,f.x,f.y,f.z),n.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Li.fromBufferAttribute(e,t),Li.normalize(),e.setXYZ(t,Li.x,Li.y,Li.z)}toNonIndexed(){function e(a,c){let u=a.array,f=a.itemSize,h=a.normalized,p=new u.constructor(c.length*f),g=0,y=0;for(let x=0,v=c.length;x<v;x++){a.isInterleavedBufferAttribute?g=c[x]*a.data.stride+a.offset:g=c[x]*f;for(let _=0;_<f;_++)p[y++]=u[g++]}return new Ti(p,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new i,n=this.index.array,r=this.attributes;for(let a in r){let c=r[a],u=e(c,n);t.setAttribute(a,u)}let o=this.morphAttributes;for(let a in o){let c=[],u=o[a];for(let f=0,h=u.length;f<h;f++){let p=u[f],g=e(p,n);c.push(g)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,c=s.length;a<c;a++){let u=s[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let c in n){let u=n[c];e.data.attributes[c]=u.toJSON(e.data)}let r={},o=!1;for(let c in this.morphAttributes){let u=this.morphAttributes[c],f=[];for(let h=0,p=u.length;h<p;h++){let g=u[h];f.push(g.toJSON(e.data))}f.length>0&&(r[c]=f,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;n!==null&&this.setIndex(n.clone(t));let r=e.attributes;for(let u in r){let f=r[u];this.setAttribute(u,f.clone(t))}let o=e.morphAttributes;for(let u in o){let f=[],h=o[u];for(let p=0,g=h.length;p<g;p++)f.push(h[p].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let u=0,f=s.length;u<f;u++){let h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},jO=new ot,Ll=new La,hy=new co,GO=new z,xd=new z,Md=new z,bd=new z,zb=new z,py=new z,my=new Ge,gy=new Ge,yy=new Ge,WO=new z,$O=new z,qO=new z,vy=new z,_y=new z,Jn=class extends ri{constructor(e=new _i,t=new Fo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,o=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){py.set(0,0,0);for(let c=0,u=o.length;c<u;c++){let f=a[c],h=o[c];f!==0&&(zb.fromBufferAttribute(h,e),s?py.addScaledVector(zb,f):py.addScaledVector(zb.sub(t),f))}t.add(py)}return t}raycast(e,t){let n=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),hy.copy(n.boundingSphere),hy.applyMatrix4(o),Ll.copy(e.ray).recast(e.near),!(hy.containsPoint(Ll.origin)===!1&&(Ll.intersectSphere(hy,GO)===null||Ll.origin.distanceToSquared(GO)>(e.far-e.near)**2))&&(jO.copy(o).invert(),Ll.copy(e.ray).applyMatrix4(jO),!(n.boundingBox!==null&&Ll.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Ll)))}_computeIntersections(e,t,n){let r,o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,u=o.attributes.uv,f=o.attributes.uv1,h=o.attributes.normal,p=o.groups,g=o.drawRange;if(a!==null)if(Array.isArray(s))for(let y=0,x=p.length;y<x;y++){let v=p[y],_=s[v.materialIndex],C=Math.max(v.start,g.start),M=Math.min(a.count,Math.min(v.start+v.count,g.start+g.count));for(let S=C,H=M;S<H;S+=3){let P=a.getX(S),F=a.getX(S+1),$=a.getX(S+2);r=wy(this,_,e,n,u,f,h,P,F,$),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{let y=Math.max(0,g.start),x=Math.min(a.count,g.start+g.count);for(let v=y,_=x;v<_;v+=3){let C=a.getX(v),M=a.getX(v+1),S=a.getX(v+2);r=wy(this,s,e,n,u,f,h,C,M,S),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let y=0,x=p.length;y<x;y++){let v=p[y],_=s[v.materialIndex],C=Math.max(v.start,g.start),M=Math.min(c.count,Math.min(v.start+v.count,g.start+g.count));for(let S=C,H=M;S<H;S+=3){let P=S,F=S+1,$=S+2;r=wy(this,_,e,n,u,f,h,P,F,$),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{let y=Math.max(0,g.start),x=Math.min(c.count,g.start+g.count);for(let v=y,_=x;v<_;v+=3){let C=v,M=v+1,S=v+2;r=wy(this,s,e,n,u,f,h,C,M,S),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}}};function rK(i,e,t,n,r,o,s,a){let c;if(e.side===Pr?c=n.intersectTriangle(s,o,r,!0,a):c=n.intersectTriangle(r,o,s,e.side===$s,a),c===null)return null;_y.copy(a),_y.applyMatrix4(i.matrixWorld);let u=t.ray.origin.distanceTo(_y);return u<t.near||u>t.far?null:{distance:u,point:_y.clone(),object:i}}function wy(i,e,t,n,r,o,s,a,c,u){i.getVertexPosition(a,xd),i.getVertexPosition(c,Md),i.getVertexPosition(u,bd);let f=rK(i,e,t,n,xd,Md,bd,vy);if(f){r&&(my.fromBufferAttribute(r,a),gy.fromBufferAttribute(r,c),yy.fromBufferAttribute(r,u),f.uv=Dd.getInterpolation(vy,xd,Md,bd,my,gy,yy,new Ge)),o&&(my.fromBufferAttribute(o,a),gy.fromBufferAttribute(o,c),yy.fromBufferAttribute(o,u),f.uv1=Dd.getInterpolation(vy,xd,Md,bd,my,gy,yy,new Ge)),s&&(WO.fromBufferAttribute(s,a),$O.fromBufferAttribute(s,c),qO.fromBufferAttribute(s,u),f.normal=Dd.getInterpolation(vy,xd,Md,bd,WO,$O,qO,new z),f.normal.dot(n.direction)>0&&f.normal.multiplyScalar(-1));let h={a,b:c,c:u,normal:new z,materialIndex:0};Dd.getNormal(xd,Md,bd,h.normal),f.face=h}return f}var sp=class i extends _i{constructor(e=1,t=1,n=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let c=[],u=[],f=[],h=[],p=0,g=0;y("z","y","x",-1,-1,n,t,e,s,o,0),y("z","y","x",1,-1,n,t,-e,s,o,1),y("x","z","y",1,1,e,n,t,r,s,2),y("x","z","y",1,-1,e,n,-t,r,s,3),y("x","y","z",1,-1,e,t,n,r,o,4),y("x","y","z",-1,-1,e,t,-n,r,o,5),this.setIndex(c),this.setAttribute("position",new Cn(u,3)),this.setAttribute("normal",new Cn(f,3)),this.setAttribute("uv",new Cn(h,2));function y(x,v,_,C,M,S,H,P,F,$,U){let D=S/F,j=H/$,le=S/2,re=H/2,xe=P/2,ve=F+1,W=$+1,Q=0,X=0,me=new z;for(let Le=0;Le<W;Le++){let $e=Le*j-re;for(let he=0;he<ve;he++){let ee=he*D-le;me[x]=ee*C,me[v]=$e*M,me[_]=xe,u.push(me.x,me.y,me.z),me[x]=0,me[v]=0,me[_]=P>0?1:-1,f.push(me.x,me.y,me.z),h.push(he/F),h.push(1-Le/$),Q+=1}}for(let Le=0;Le<$;Le++)for(let $e=0;$e<F;$e++){let he=p+$e+ve*Le,ee=p+$e+ve*(Le+1),k=p+($e+1)+ve*(Le+1),q=p+($e+1)+ve*Le;c.push(he,ee,q),c.push(ee,k,q),X+=6}a.addGroup(g,X,U),g+=X,p+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Wd(i){let e={};for(let t in i){e[t]={};for(let n in i[t]){let r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function vr(i){let e={};for(let t=0;t<i.length;t++){let n=Wd(i[t]);for(let r in n)e[r]=n[r]}return e}function oK(i){let e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function r3(i){let e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:pn.workingColorSpace}var sK={clone:Wd,merge:vr},aK=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cK=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Ys=class extends ki{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=aK,this.fragmentShader=cK,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wd(e.uniforms),this.uniformsGroups=oK(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},Xy=class extends ri{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ot,this.projectionMatrix=new ot,this.projectionMatrixInverse=new ot,this.coordinateSystem=Pa}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Pc=new z,XO=new Ge,YO=new Ge,li=class extends Xy{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=jd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Zh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jd*2*Math.atan(Math.tan(Zh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Pc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Pc.x,Pc.y).multiplyScalar(-e/Pc.z),Pc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Pc.x,Pc.y).multiplyScalar(-e/Pc.z)}getViewSize(e,t){return this.getViewBounds(e,XO,YO),t.subVectors(YO,XO)}setViewOffset(e,t,n,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Zh*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let c=s.fullWidth,u=s.fullHeight;o+=s.offsetX*r/c,t-=s.offsetY*n/u,r*=s.width/c,n*=s.height/u}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Ed=-90,Sd=1,NE=class extends ri{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new li(Ed,Sd,e,t);r.layers=this.layers,this.add(r);let o=new li(Ed,Sd,e,t);o.layers=this.layers,this.add(o);let s=new li(Ed,Sd,e,t);s.layers=this.layers,this.add(s);let a=new li(Ed,Sd,e,t);a.layers=this.layers,this.add(a);let c=new li(Ed,Sd,e,t);c.layers=this.layers,this.add(c);let u=new li(Ed,Sd,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,r,o,s,a,c]=t;for(let u of t)this.remove(u);if(e===Pa)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Gy)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,c,u,f]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;let x=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,o),e.setRenderTarget(n,1,r),e.render(t,s),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,c),e.setRenderTarget(n,4,r),e.render(t,u),n.texture.generateMipmaps=x,e.setRenderTarget(n,5,r),e.render(t,f),e.setRenderTarget(h,p,g),e.xr.enabled=y,n.texture.needsPMREMUpdate=!0}},Yy=class extends Lr{constructor(e,t,n,r,o,s,a,c,u,f){e=e!==void 0?e:[],t=t!==void 0?t:Ld,super(e,t,n,r,o,s,a,c,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},LE=class extends Na{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Yy(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Fr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new sp(5,5,5),o=new Ys({name:"CubemapFromEquirect",uniforms:Wd(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Pr,blending:Lc});o.uniforms.tEquirect.value=t;let s=new Jn(r,o),a=t.minFilter;return t.minFilter===Ws&&(t.minFilter=Fr),new NE(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(o)}},Hb=new z,lK=new z,uK=new kt,fs=class{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=Hb.subVectors(n,t).cross(lK.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(Hb),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(n,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||uK.getNormalMatrix(e),r=this.coplanarPoint(Hb).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},kl=new co,xy=new z,ap=class{constructor(e=new fs,t=new fs,n=new fs,r=new fs,o=new fs,s=new fs){this.planes=[e,t,n,r,o,s]}set(e,t,n,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Pa){let n=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],c=r[3],u=r[4],f=r[5],h=r[6],p=r[7],g=r[8],y=r[9],x=r[10],v=r[11],_=r[12],C=r[13],M=r[14],S=r[15];if(n[0].setComponents(c-o,p-u,v-g,S-_).normalize(),n[1].setComponents(c+o,p+u,v+g,S+_).normalize(),n[2].setComponents(c+s,p+f,v+y,S+C).normalize(),n[3].setComponents(c-s,p-f,v-y,S-C).normalize(),n[4].setComponents(c-a,p-h,v-x,S-M).normalize(),t===Pa)n[5].setComponents(c+a,p+h,v+x,S+M).normalize();else if(t===Gy)n[5].setComponents(a,h,x,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),kl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),kl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(kl)}intersectsSprite(e){return kl.center.set(0,0,0),kl.radius=.7071067811865476,kl.applyMatrix4(e.matrixWorld),this.intersectsSphere(kl)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(xy.x=r.normal.x>0?e.max.x:e.min.x,xy.y=r.normal.y>0?e.max.y:e.min.y,xy.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(xy)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function o3(){let i=null,e=!1,t=null,n=null;function r(o,s){t(o,s),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){i=o}}}function dK(i){let e=new WeakMap;function t(a,c){let u=a.array,f=a.usage,h=u.byteLength,p=i.createBuffer();i.bindBuffer(c,p),i.bufferData(c,u,f),a.onUploadCallback();let g;if(u instanceof Float32Array)g=i.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?g=i.HALF_FLOAT:g=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=i.SHORT;else if(u instanceof Uint32Array)g=i.UNSIGNED_INT;else if(u instanceof Int32Array)g=i.INT;else if(u instanceof Int8Array)g=i.BYTE;else if(u instanceof Uint8Array)g=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function n(a,c,u){let f=c.array,h=c._updateRange,p=c.updateRanges;if(i.bindBuffer(u,a),h.count===-1&&p.length===0&&i.bufferSubData(u,0,f),p.length!==0){for(let g=0,y=p.length;g<y;g++){let x=p[g];i.bufferSubData(u,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}c.clearUpdateRanges()}h.count!==-1&&(i.bufferSubData(u,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count),h.count=-1),c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(i.deleteBuffer(c.buffer),e.delete(a))}function s(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let u=e.get(a);if(u===void 0)e.set(a,t(a,c));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,a,c),u.version=a.version}}return{get:r,remove:o,update:s}}var Zy=class i extends _i{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(n),c=Math.floor(r),u=a+1,f=c+1,h=e/a,p=t/c,g=[],y=[],x=[],v=[];for(let _=0;_<f;_++){let C=_*p-s;for(let M=0;M<u;M++){let S=M*h-o;y.push(S,-C,0),x.push(0,0,1),v.push(M/a),v.push(1-_/c)}}for(let _=0;_<c;_++)for(let C=0;C<a;C++){let M=C+u*_,S=C+u*(_+1),H=C+1+u*(_+1),P=C+1+u*_;g.push(M,S,P),g.push(S,H,P)}this.setIndex(g),this.setAttribute("position",new Cn(y,3)),this.setAttribute("normal",new Cn(x,3)),this.setAttribute("uv",new Cn(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.widthSegments,e.heightSegments)}},fK=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,hK=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,pK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gK=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,yK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,vK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_K=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,wK=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,xK=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,MK=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,bK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,EK=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,SK=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,CK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,AK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,TK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,DK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,IK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,RK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,UK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,FK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,PK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,OK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,NK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,LK=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,kK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,BK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,VK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,zK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,HK="gl_FragColor = linearToOutputTexel( gl_FragColor );",jK=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,GK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,WK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,$K=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,qK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,XK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,YK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ZK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,KK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,JK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,QK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,eJ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,tJ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,nJ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,iJ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,rJ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,oJ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,sJ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,aJ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cJ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lJ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,uJ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dJ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,fJ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,hJ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,pJ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,mJ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gJ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yJ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,vJ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_J=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,wJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,xJ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,MJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,bJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,EJ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,SJ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,CJ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,AJ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,TJ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,DJ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,IJ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,RJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,UJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FJ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,PJ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,OJ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,NJ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,LJ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,kJ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,BJ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,VJ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,zJ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,HJ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,jJ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,GJ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,WJ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,$J=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,qJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,XJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,YJ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ZJ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,KJ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,JJ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,QJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,eQ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,tQ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nQ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iQ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,rQ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,oQ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,sQ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,aQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,lQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,uQ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,dQ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fQ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pQ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gQ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yQ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,vQ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,_Q=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,wQ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,xQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,MQ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bQ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,EQ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,SQ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,CQ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AQ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TQ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DQ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,IQ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RQ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,UQ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,FQ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PQ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OQ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,NQ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LQ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kQ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BQ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,VQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zQ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HQ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jQ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jt={alphahash_fragment:fK,alphahash_pars_fragment:hK,alphamap_fragment:pK,alphamap_pars_fragment:mK,alphatest_fragment:gK,alphatest_pars_fragment:yK,aomap_fragment:vK,aomap_pars_fragment:_K,batching_pars_vertex:wK,batching_vertex:xK,begin_vertex:MK,beginnormal_vertex:bK,bsdfs:EK,iridescence_fragment:SK,bumpmap_pars_fragment:CK,clipping_planes_fragment:AK,clipping_planes_pars_fragment:TK,clipping_planes_pars_vertex:DK,clipping_planes_vertex:IK,color_fragment:RK,color_pars_fragment:UK,color_pars_vertex:FK,color_vertex:PK,common:OK,cube_uv_reflection_fragment:NK,defaultnormal_vertex:LK,displacementmap_pars_vertex:kK,displacementmap_vertex:BK,emissivemap_fragment:VK,emissivemap_pars_fragment:zK,colorspace_fragment:HK,colorspace_pars_fragment:jK,envmap_fragment:GK,envmap_common_pars_fragment:WK,envmap_pars_fragment:$K,envmap_pars_vertex:qK,envmap_physical_pars_fragment:rJ,envmap_vertex:XK,fog_vertex:YK,fog_pars_vertex:ZK,fog_fragment:KK,fog_pars_fragment:JK,gradientmap_pars_fragment:QK,lightmap_pars_fragment:eJ,lights_lambert_fragment:tJ,lights_lambert_pars_fragment:nJ,lights_pars_begin:iJ,lights_toon_fragment:oJ,lights_toon_pars_fragment:sJ,lights_phong_fragment:aJ,lights_phong_pars_fragment:cJ,lights_physical_fragment:lJ,lights_physical_pars_fragment:uJ,lights_fragment_begin:dJ,lights_fragment_maps:fJ,lights_fragment_end:hJ,logdepthbuf_fragment:pJ,logdepthbuf_pars_fragment:mJ,logdepthbuf_pars_vertex:gJ,logdepthbuf_vertex:yJ,map_fragment:vJ,map_pars_fragment:_J,map_particle_fragment:wJ,map_particle_pars_fragment:xJ,metalnessmap_fragment:MJ,metalnessmap_pars_fragment:bJ,morphinstance_vertex:EJ,morphcolor_vertex:SJ,morphnormal_vertex:CJ,morphtarget_pars_vertex:AJ,morphtarget_vertex:TJ,normal_fragment_begin:DJ,normal_fragment_maps:IJ,normal_pars_fragment:RJ,normal_pars_vertex:UJ,normal_vertex:FJ,normalmap_pars_fragment:PJ,clearcoat_normal_fragment_begin:OJ,clearcoat_normal_fragment_maps:NJ,clearcoat_pars_fragment:LJ,iridescence_pars_fragment:kJ,opaque_fragment:BJ,packing:VJ,premultiplied_alpha_fragment:zJ,project_vertex:HJ,dithering_fragment:jJ,dithering_pars_fragment:GJ,roughnessmap_fragment:WJ,roughnessmap_pars_fragment:$J,shadowmap_pars_fragment:qJ,shadowmap_pars_vertex:XJ,shadowmap_vertex:YJ,shadowmask_pars_fragment:ZJ,skinbase_vertex:KJ,skinning_pars_vertex:JJ,skinning_vertex:QJ,skinnormal_vertex:eQ,specularmap_fragment:tQ,specularmap_pars_fragment:nQ,tonemapping_fragment:iQ,tonemapping_pars_fragment:rQ,transmission_fragment:oQ,transmission_pars_fragment:sQ,uv_pars_fragment:aQ,uv_pars_vertex:cQ,uv_vertex:lQ,worldpos_vertex:uQ,background_vert:dQ,background_frag:fQ,backgroundCube_vert:hQ,backgroundCube_frag:pQ,cube_vert:mQ,cube_frag:gQ,depth_vert:yQ,depth_frag:vQ,distanceRGBA_vert:_Q,distanceRGBA_frag:wQ,equirect_vert:xQ,equirect_frag:MQ,linedashed_vert:bQ,linedashed_frag:EQ,meshbasic_vert:SQ,meshbasic_frag:CQ,meshlambert_vert:AQ,meshlambert_frag:TQ,meshmatcap_vert:DQ,meshmatcap_frag:IQ,meshnormal_vert:RQ,meshnormal_frag:UQ,meshphong_vert:FQ,meshphong_frag:PQ,meshphysical_vert:OQ,meshphysical_frag:NQ,meshtoon_vert:LQ,meshtoon_frag:kQ,points_vert:BQ,points_frag:VQ,shadow_vert:zQ,shadow_frag:HQ,sprite_vert:jQ,sprite_frag:GQ},Je={common:{diffuse:{value:new rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new kt}},envmap:{envMap:{value:null},envMapRotation:{value:new kt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new kt},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0},uvTransform:{value:new kt}},sprite:{diffuse:{value:new rt(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}}},Gs={basic:{uniforms:vr([Je.common,Je.specularmap,Je.envmap,Je.aomap,Je.lightmap,Je.fog]),vertexShader:jt.meshbasic_vert,fragmentShader:jt.meshbasic_frag},lambert:{uniforms:vr([Je.common,Je.specularmap,Je.envmap,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.fog,Je.lights,{emissive:{value:new rt(0)}}]),vertexShader:jt.meshlambert_vert,fragmentShader:jt.meshlambert_frag},phong:{uniforms:vr([Je.common,Je.specularmap,Je.envmap,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.fog,Je.lights,{emissive:{value:new rt(0)},specular:{value:new rt(1118481)},shininess:{value:30}}]),vertexShader:jt.meshphong_vert,fragmentShader:jt.meshphong_frag},standard:{uniforms:vr([Je.common,Je.envmap,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.roughnessmap,Je.metalnessmap,Je.fog,Je.lights,{emissive:{value:new rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag},toon:{uniforms:vr([Je.common,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.gradientmap,Je.fog,Je.lights,{emissive:{value:new rt(0)}}]),vertexShader:jt.meshtoon_vert,fragmentShader:jt.meshtoon_frag},matcap:{uniforms:vr([Je.common,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.fog,{matcap:{value:null}}]),vertexShader:jt.meshmatcap_vert,fragmentShader:jt.meshmatcap_frag},points:{uniforms:vr([Je.points,Je.fog]),vertexShader:jt.points_vert,fragmentShader:jt.points_frag},dashed:{uniforms:vr([Je.common,Je.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jt.linedashed_vert,fragmentShader:jt.linedashed_frag},depth:{uniforms:vr([Je.common,Je.displacementmap]),vertexShader:jt.depth_vert,fragmentShader:jt.depth_frag},normal:{uniforms:vr([Je.common,Je.bumpmap,Je.normalmap,Je.displacementmap,{opacity:{value:1}}]),vertexShader:jt.meshnormal_vert,fragmentShader:jt.meshnormal_frag},sprite:{uniforms:vr([Je.sprite,Je.fog]),vertexShader:jt.sprite_vert,fragmentShader:jt.sprite_frag},background:{uniforms:{uvTransform:{value:new kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:jt.background_vert,fragmentShader:jt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new kt}},vertexShader:jt.backgroundCube_vert,fragmentShader:jt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:jt.cube_vert,fragmentShader:jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:jt.equirect_vert,fragmentShader:jt.equirect_frag},distanceRGBA:{uniforms:vr([Je.common,Je.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:jt.distanceRGBA_vert,fragmentShader:jt.distanceRGBA_frag},shadow:{uniforms:vr([Je.lights,Je.fog,{color:{value:new rt(0)},opacity:{value:1}}]),vertexShader:jt.shadow_vert,fragmentShader:jt.shadow_frag}};Gs.physical={uniforms:vr([Gs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new kt},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new kt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new kt},sheen:{value:0},sheenColor:{value:new rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new kt},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new kt},attenuationDistance:{value:0},attenuationColor:{value:new rt(0)},specularColor:{value:new rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new kt},anisotropyVector:{value:new Ge},anisotropyMap:{value:null},anisotropyMapTransform:{value:new kt}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag};var My={r:0,b:0,g:0},Bl=new vi,WQ=new ot;function $Q(i,e,t,n,r,o,s){let a=new rt(0),c=o===!0?0:1,u,f,h=null,p=0,g=null;function y(C){let M=C.isScene===!0?C.background:null;return M&&M.isTexture&&(M=(C.backgroundBlurriness>0?t:e).get(M)),M}function x(C){let M=!1,S=y(C);S===null?_(a,c):S&&S.isColor&&(_(S,1),M=!0);let H=i.xr.getEnvironmentBlendMode();H==="additive"?n.buffers.color.setClear(0,0,0,1,s):H==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,s),(i.autoClear||M)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function v(C,M){let S=y(M);S&&(S.isCubeTexture||S.mapping===_v)?(f===void 0&&(f=new Jn(new sp(1,1,1),new Ys({name:"BackgroundCubeMaterial",uniforms:Wd(Gs.backgroundCube.uniforms),vertexShader:Gs.backgroundCube.vertexShader,fragmentShader:Gs.backgroundCube.fragmentShader,side:Pr,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(H,P,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Bl.copy(M.backgroundRotation),Bl.x*=-1,Bl.y*=-1,Bl.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Bl.y*=-1,Bl.z*=-1),f.material.uniforms.envMap.value=S,f.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(WQ.makeRotationFromEuler(Bl)),f.material.toneMapped=pn.getTransfer(S.colorSpace)!==Vn,(h!==S||p!==S.version||g!==i.toneMapping)&&(f.material.needsUpdate=!0,h=S,p=S.version,g=i.toneMapping),f.layers.enableAll(),C.unshift(f,f.geometry,f.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new Jn(new Zy(2,2),new Ys({name:"BackgroundMaterial",uniforms:Wd(Gs.background.uniforms),vertexShader:Gs.background.vertexShader,fragmentShader:Gs.background.fragmentShader,side:$s,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=S,u.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,u.material.toneMapped=pn.getTransfer(S.colorSpace)!==Vn,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(h!==S||p!==S.version||g!==i.toneMapping)&&(u.material.needsUpdate=!0,h=S,p=S.version,g=i.toneMapping),u.layers.enableAll(),C.unshift(u,u.geometry,u.material,0,0,null))}function _(C,M){C.getRGB(My,r3(i)),n.buffers.color.setClear(My.r,My.g,My.b,M,s)}return{getClearColor:function(){return a},setClearColor:function(C,M=1){a.set(C),c=M,_(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(C){c=C,_(a,c)},render:x,addToRenderList:v}}function qQ(i,e){let t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=p(null),o=r,s=!1;function a(D,j,le,re,xe){let ve=!1,W=h(re,le,j);o!==W&&(o=W,u(o.object)),ve=g(D,re,le,xe),ve&&y(D,re,le,xe),xe!==null&&e.update(xe,i.ELEMENT_ARRAY_BUFFER),(ve||s)&&(s=!1,S(D,j,le,re),xe!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(xe).buffer))}function c(){return i.createVertexArray()}function u(D){return i.bindVertexArray(D)}function f(D){return i.deleteVertexArray(D)}function h(D,j,le){let re=le.wireframe===!0,xe=n[D.id];xe===void 0&&(xe={},n[D.id]=xe);let ve=xe[j.id];ve===void 0&&(ve={},xe[j.id]=ve);let W=ve[re];return W===void 0&&(W=p(c()),ve[re]=W),W}function p(D){let j=[],le=[],re=[];for(let xe=0;xe<t;xe++)j[xe]=0,le[xe]=0,re[xe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:le,attributeDivisors:re,object:D,attributes:{},index:null}}function g(D,j,le,re){let xe=o.attributes,ve=j.attributes,W=0,Q=le.getAttributes();for(let X in Q)if(Q[X].location>=0){let Le=xe[X],$e=ve[X];if($e===void 0&&(X==="instanceMatrix"&&D.instanceMatrix&&($e=D.instanceMatrix),X==="instanceColor"&&D.instanceColor&&($e=D.instanceColor)),Le===void 0||Le.attribute!==$e||$e&&Le.data!==$e.data)return!0;W++}return o.attributesNum!==W||o.index!==re}function y(D,j,le,re){let xe={},ve=j.attributes,W=0,Q=le.getAttributes();for(let X in Q)if(Q[X].location>=0){let Le=ve[X];Le===void 0&&(X==="instanceMatrix"&&D.instanceMatrix&&(Le=D.instanceMatrix),X==="instanceColor"&&D.instanceColor&&(Le=D.instanceColor));let $e={};$e.attribute=Le,Le&&Le.data&&($e.data=Le.data),xe[X]=$e,W++}o.attributes=xe,o.attributesNum=W,o.index=re}function x(){let D=o.newAttributes;for(let j=0,le=D.length;j<le;j++)D[j]=0}function v(D){_(D,0)}function _(D,j){let le=o.newAttributes,re=o.enabledAttributes,xe=o.attributeDivisors;le[D]=1,re[D]===0&&(i.enableVertexAttribArray(D),re[D]=1),xe[D]!==j&&(i.vertexAttribDivisor(D,j),xe[D]=j)}function C(){let D=o.newAttributes,j=o.enabledAttributes;for(let le=0,re=j.length;le<re;le++)j[le]!==D[le]&&(i.disableVertexAttribArray(le),j[le]=0)}function M(D,j,le,re,xe,ve,W){W===!0?i.vertexAttribIPointer(D,j,le,xe,ve):i.vertexAttribPointer(D,j,le,re,xe,ve)}function S(D,j,le,re){x();let xe=re.attributes,ve=le.getAttributes(),W=j.defaultAttributeValues;for(let Q in ve){let X=ve[Q];if(X.location>=0){let me=xe[Q];if(me===void 0&&(Q==="instanceMatrix"&&D.instanceMatrix&&(me=D.instanceMatrix),Q==="instanceColor"&&D.instanceColor&&(me=D.instanceColor)),me!==void 0){let Le=me.normalized,$e=me.itemSize,he=e.get(me);if(he===void 0)continue;let ee=he.buffer,k=he.type,q=he.bytesPerElement,pe=k===i.INT||k===i.UNSIGNED_INT||me.gpuType===vS;if(me.isInterleavedBufferAttribute){let ae=me.data,We=ae.stride,Pe=me.offset;if(ae.isInstancedInterleavedBuffer){for(let ke=0;ke<X.locationSize;ke++)_(X.location+ke,ae.meshPerAttribute);D.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let ke=0;ke<X.locationSize;ke++)v(X.location+ke);i.bindBuffer(i.ARRAY_BUFFER,ee);for(let ke=0;ke<X.locationSize;ke++)M(X.location+ke,$e/X.locationSize,k,Le,We*q,(Pe+$e/X.locationSize*ke)*q,pe)}else{if(me.isInstancedBufferAttribute){for(let ae=0;ae<X.locationSize;ae++)_(X.location+ae,me.meshPerAttribute);D.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let ae=0;ae<X.locationSize;ae++)v(X.location+ae);i.bindBuffer(i.ARRAY_BUFFER,ee);for(let ae=0;ae<X.locationSize;ae++)M(X.location+ae,$e/X.locationSize,k,Le,$e*q,$e/X.locationSize*ae*q,pe)}}else if(W!==void 0){let Le=W[Q];if(Le!==void 0)switch(Le.length){case 2:i.vertexAttrib2fv(X.location,Le);break;case 3:i.vertexAttrib3fv(X.location,Le);break;case 4:i.vertexAttrib4fv(X.location,Le);break;default:i.vertexAttrib1fv(X.location,Le)}}}}C()}function H(){$();for(let D in n){let j=n[D];for(let le in j){let re=j[le];for(let xe in re)f(re[xe].object),delete re[xe];delete j[le]}delete n[D]}}function P(D){if(n[D.id]===void 0)return;let j=n[D.id];for(let le in j){let re=j[le];for(let xe in re)f(re[xe].object),delete re[xe];delete j[le]}delete n[D.id]}function F(D){for(let j in n){let le=n[j];if(le[D.id]===void 0)continue;let re=le[D.id];for(let xe in re)f(re[xe].object),delete re[xe];delete le[D.id]}}function $(){U(),s=!0,o!==r&&(o=r,u(o.object))}function U(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:$,resetDefaultState:U,dispose:H,releaseStatesOfGeometry:P,releaseStatesOfProgram:F,initAttributes:x,enableAttribute:v,disableUnusedAttributes:C}}function XQ(i,e,t){let n;function r(u){n=u}function o(u,f){i.drawArrays(n,u,f),t.update(f,n,1)}function s(u,f,h){h!==0&&(i.drawArraysInstanced(n,u,f,h),t.update(f,n,h))}function a(u,f,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,f,0,h);let g=0;for(let y=0;y<h;y++)g+=f[y];t.update(g,n,1)}function c(u,f,h,p){if(h===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let y=0;y<u.length;y++)s(u[y],f[y],p[y]);else{g.multiDrawArraysInstancedWEBGL(n,u,0,f,0,p,0,h);let y=0;for(let x=0;x<h;x++)y+=f[x];for(let x=0;x<p.length;x++)t.update(y,n,p[x])}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function YQ(i,e,t,n){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let P=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){return!(P!==Ro&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(P){let F=P===yp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Oa&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==ms&&!F)}function c(P){if(P==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp",f=c(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);let h=t.logarithmicDepthBuffer===!0,p=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),g=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=i.getParameter(i.MAX_TEXTURE_SIZE),x=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),v=i.getParameter(i.MAX_VERTEX_ATTRIBS),_=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),C=i.getParameter(i.MAX_VARYING_VECTORS),M=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),S=g>0,H=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:x,maxAttributes:v,maxVertexUniforms:_,maxVaryings:C,maxFragmentUniforms:M,vertexTextures:S,maxSamples:H}}function ZQ(i){let e=this,t=null,n=0,r=!1,o=!1,s=new fs,a=new kt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){let g=h.length!==0||p||n!==0||r;return r=p,n=h.length,g},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,p){t=f(h,p,0)},this.setState=function(h,p,g){let y=h.clippingPlanes,x=h.clipIntersection,v=h.clipShadows,_=i.get(h);if(!r||y===null||y.length===0||o&&!v)o?f(null):u();else{let C=o?0:n,M=C*4,S=_.clippingState||null;c.value=S,S=f(y,p,M,g);for(let H=0;H!==M;++H)S[H]=t[H];_.clippingState=S,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=C}};function u(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(h,p,g,y){let x=h!==null?h.length:0,v=null;if(x!==0){if(v=c.value,y!==!0||v===null){let _=g+x*4,C=p.matrixWorldInverse;a.getNormalMatrix(C),(v===null||v.length<_)&&(v=new Float32Array(_));for(let M=0,S=g;M!==x;++M,S+=4)s.copy(h[M]).applyMatrix4(C,a),s.normal.toArray(v,S),v[S+3]=s.constant}c.value=v,c.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,v}}function KQ(i){let e=new WeakMap;function t(s,a){return a===tp?s.mapping=Ld:a===oE&&(s.mapping=kd),s}function n(s){if(s&&s.isTexture){let a=s.mapping;if(a===tp||a===oE)if(e.has(s)){let c=e.get(s).texture;return t(c,s.mapping)}else{let c=s.image;if(c&&c.height>0){let u=new LE(c.height);return u.fromEquirectangularTexture(i,s),e.set(s,u),s.addEventListener("dispose",r),t(u.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function o(){e=new WeakMap}return{get:n,dispose:o}}var Bc=class extends Xy{constructor(e=-1,t=1,n=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=n-e,s=n+e,a=r+t,c=r-t;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=f*this.view.offsetY,c=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Id=4,ZO=[.125,.215,.35,.446,.526,.582],jl=20,jb=new Bc,KO=new rt,Gb=null,Wb=0,$b=0,qb=!1,zl=(1+Math.sqrt(5))/2,Cd=1/zl,JO=[new z(-zl,Cd,0),new z(zl,Cd,0),new z(-Cd,0,zl),new z(Cd,0,zl),new z(0,zl,-Cd),new z(0,zl,Cd),new z(-1,1,-1),new z(1,1,-1),new z(-1,1,1),new z(1,1,1)],Ky=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Gb=this._renderer.getRenderTarget(),Wb=this._renderer.getActiveCubeFace(),$b=this._renderer.getActiveMipmapLevel(),qb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=tN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=eN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Gb,Wb,$b),this._renderer.xr.enabled=qb,e.scissorTest=!1,by(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ld||e.mapping===kd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Gb=this._renderer.getRenderTarget(),Wb=this._renderer.getActiveCubeFace(),$b=this._renderer.getActiveMipmapLevel(),qb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Fr,minFilter:Fr,generateMipmaps:!1,type:yp,format:Ro,colorSpace:Bi,depthBuffer:!1},r=QO(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=QO(e,t,n);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=JQ(o)),this._blurMaterial=QQ(o,e,t)}return r}_compileMaterial(e){let t=new Jn(this._lodPlanes[0],e);this._renderer.compile(t,jb)}_sceneToCubeUV(e,t,n,r){let a=new li(90,1,t,n),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,p=f.toneMapping;f.getClearColor(KO),f.toneMapping=kc,f.autoClear=!1;let g=new Fo({name:"PMREM.Background",side:Pr,depthWrite:!1,depthTest:!1}),y=new Jn(new sp,g),x=!1,v=e.background;v?v.isColor&&(g.color.copy(v),e.background=null,x=!0):(g.color.copy(KO),x=!0);for(let _=0;_<6;_++){let C=_%3;C===0?(a.up.set(0,c[_],0),a.lookAt(u[_],0,0)):C===1?(a.up.set(0,0,c[_]),a.lookAt(0,u[_],0)):(a.up.set(0,c[_],0),a.lookAt(0,0,u[_]));let M=this._cubeSize;by(r,C*M,_>2?M:0,M,M),f.setRenderTarget(r),x&&f.render(y,a),f.render(e,a)}y.geometry.dispose(),y.material.dispose(),f.toneMapping=p,f.autoClear=h,e.background=v}_textureToCubeUV(e,t){let n=this._renderer,r=e.mapping===Ld||e.mapping===kd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=tN()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=eN());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new Jn(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let c=this._cubeSize;by(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(s,jb)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=JO[(r-o-1)%JO.length];this._blur(e,o-1,o,s,a)}t.autoClear=n}_blur(e,t,n,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",o),this._halfBlur(s,e,n,n,r,"longitudinal",o)}_halfBlur(e,t,n,r,o,s,a){let c=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,h=new Jn(this._lodPlanes[r],u),p=u.uniforms,g=this._sizeLods[n]-1,y=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*jl-1),x=o/y,v=isFinite(o)?1+Math.floor(f*x):jl;v>jl&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${jl}`);let _=[],C=0;for(let F=0;F<jl;++F){let $=F/x,U=Math.exp(-$*$/2);_.push(U),F===0?C+=U:F<v&&(C+=2*U)}for(let F=0;F<_.length;F++)_[F]=_[F]/C;p.envMap.value=e.texture,p.samples.value=v,p.weights.value=_,p.latitudinal.value=s==="latitudinal",a&&(p.poleAxis.value=a);let{_lodMax:M}=this;p.dTheta.value=y,p.mipInt.value=M-n;let S=this._sizeLods[r],H=3*S*(r>M-Id?r-M+Id:0),P=4*(this._cubeSize-S);by(t,H,P,3*S,2*S),c.setRenderTarget(t),c.render(h,jb)}};function JQ(i){let e=[],t=[],n=[],r=i,o=i-Id+1+ZO.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);t.push(a);let c=1/a;s>i-Id?c=ZO[s-i+Id-1]:s===0&&(c=0),n.push(c);let u=1/(a-2),f=-u,h=1+u,p=[f,f,h,f,h,h,f,f,h,h,f,h],g=6,y=6,x=3,v=2,_=1,C=new Float32Array(x*y*g),M=new Float32Array(v*y*g),S=new Float32Array(_*y*g);for(let P=0;P<g;P++){let F=P%3*2/3-1,$=P>2?0:-1,U=[F,$,0,F+2/3,$,0,F+2/3,$+1,0,F,$,0,F+2/3,$+1,0,F,$+1,0];C.set(U,x*y*P),M.set(p,v*y*P);let D=[P,P,P,P,P,P];S.set(D,_*y*P)}let H=new _i;H.setAttribute("position",new Ti(C,x)),H.setAttribute("uv",new Ti(M,v)),H.setAttribute("faceIndex",new Ti(S,_)),e.push(H),r>Id&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function QO(i,e,t){let n=new Na(i,e,t);return n.texture.mapping=_v,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function by(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function QQ(i,e,t){let n=new Float32Array(jl),r=new z(0,1,0);return new Ys({name:"SphericalGaussianBlur",defines:{n:jl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:AS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Lc,depthTest:!1,depthWrite:!1})}function eN(){return new Ys({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:AS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Lc,depthTest:!1,depthWrite:!1})}function tN(){return new Ys({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:AS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Lc,depthTest:!1,depthWrite:!1})}function AS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function eee(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){let c=a.mapping,u=c===tp||c===oE,f=c===Ld||c===kd;if(u||f){let h=e.get(a),p=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new Ky(i)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{let g=a.image;return u&&g&&g.height>0||f&&g&&r(g)?(t===null&&(t=new Ky(i)),h=u?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let c=0,u=6;for(let f=0;f<u;f++)a[f]!==void 0&&c++;return c===u}function o(a){let c=a.target;c.removeEventListener("dispose",o);let u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:s}}function tee(i){let e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){let r=t(n);return r===null&&Pd("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function nee(i,e,t,n){let r={},o=new WeakMap;function s(h){let p=h.target;p.index!==null&&e.remove(p.index);for(let y in p.attributes)e.remove(p.attributes[y]);for(let y in p.morphAttributes){let x=p.morphAttributes[y];for(let v=0,_=x.length;v<_;v++)e.remove(x[v])}p.removeEventListener("dispose",s),delete r[p.id];let g=o.get(p);g&&(e.remove(g),o.delete(p)),n.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",s),r[p.id]=!0,t.memory.geometries++),p}function c(h){let p=h.attributes;for(let y in p)e.update(p[y],i.ARRAY_BUFFER);let g=h.morphAttributes;for(let y in g){let x=g[y];for(let v=0,_=x.length;v<_;v++)e.update(x[v],i.ARRAY_BUFFER)}}function u(h){let p=[],g=h.index,y=h.attributes.position,x=0;if(g!==null){let C=g.array;x=g.version;for(let M=0,S=C.length;M<S;M+=3){let H=C[M+0],P=C[M+1],F=C[M+2];p.push(H,P,P,F,F,H)}}else if(y!==void 0){let C=y.array;x=y.version;for(let M=0,S=C.length/3-1;M<S;M+=3){let H=M+0,P=M+1,F=M+2;p.push(H,P,P,F,F,H)}}else return;let v=new(n3(p)?qy:Gd)(p,1);v.version=x;let _=o.get(h);_&&e.remove(_),o.set(h,v)}function f(h){let p=o.get(h);if(p){let g=h.index;g!==null&&p.version<g.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:c,getWireframeAttribute:f}}function iee(i,e,t){let n;function r(p){n=p}let o,s;function a(p){o=p.type,s=p.bytesPerElement}function c(p,g){i.drawElements(n,g,o,p*s),t.update(g,n,1)}function u(p,g,y){y!==0&&(i.drawElementsInstanced(n,g,o,p*s,y),t.update(g,n,y))}function f(p,g,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,g,0,o,p,0,y);let v=0;for(let _=0;_<y;_++)v+=g[_];t.update(v,n,1)}function h(p,g,y,x){if(y===0)return;let v=e.get("WEBGL_multi_draw");if(v===null)for(let _=0;_<p.length;_++)u(p[_]/s,g[_],x[_]);else{v.multiDrawElementsInstancedWEBGL(n,g,0,o,p,0,x,0,y);let _=0;for(let C=0;C<y;C++)_+=g[C];for(let C=0;C<x.length;C++)t.update(_,n,x[C])}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function ree(i){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,s,a){switch(t.calls++,s){case i.TRIANGLES:t.triangles+=a*(o/3);break;case i.LINES:t.lines+=a*(o/2);break;case i.LINE_STRIP:t.lines+=a*(o-1);break;case i.LINE_LOOP:t.lines+=a*o;break;case i.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function oee(i,e,t){let n=new WeakMap,r=new sn;function o(s,a,c){let u=s.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0,p=n.get(a);if(p===void 0||p.count!==h){let D=function(){$.dispose(),n.delete(a),a.removeEventListener("dispose",D)};var g=D;p!==void 0&&p.texture.dispose();let y=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],C=a.morphAttributes.normal||[],M=a.morphAttributes.color||[],S=0;y===!0&&(S=1),x===!0&&(S=2),v===!0&&(S=3);let H=a.attributes.position.count*S,P=1;H>e.maxTextureSize&&(P=Math.ceil(H/e.maxTextureSize),H=e.maxTextureSize);let F=new Float32Array(H*P*4*h),$=new $y(F,H,P,h);$.type=ms,$.needsUpdate=!0;let U=S*4;for(let j=0;j<h;j++){let le=_[j],re=C[j],xe=M[j],ve=H*P*4*j;for(let W=0;W<le.count;W++){let Q=W*U;y===!0&&(r.fromBufferAttribute(le,W),F[ve+Q+0]=r.x,F[ve+Q+1]=r.y,F[ve+Q+2]=r.z,F[ve+Q+3]=0),x===!0&&(r.fromBufferAttribute(re,W),F[ve+Q+4]=r.x,F[ve+Q+5]=r.y,F[ve+Q+6]=r.z,F[ve+Q+7]=0),v===!0&&(r.fromBufferAttribute(xe,W),F[ve+Q+8]=r.x,F[ve+Q+9]=r.y,F[ve+Q+10]=r.z,F[ve+Q+11]=xe.itemSize===4?r.w:1)}}p={count:h,texture:$,size:new Ge(H,P)},n.set(a,p),a.addEventListener("dispose",D)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(i,"morphTexture",s.morphTexture,t);else{let y=0;for(let v=0;v<u.length;v++)y+=u[v];let x=a.morphTargetsRelative?1:1-y;c.getUniforms().setValue(i,"morphTargetBaseInfluence",x),c.getUniforms().setValue(i,"morphTargetInfluences",u)}c.getUniforms().setValue(i,"morphTargetsTexture",p.texture,t),c.getUniforms().setValue(i,"morphTargetsTextureSize",p.size)}return{update:o}}function see(i,e,t,n){let r=new WeakMap;function o(c){let u=n.render.frame,f=c.geometry,h=e.get(c,f);if(r.get(h)!==u&&(e.update(h),r.set(h,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==u&&(t.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,i.ARRAY_BUFFER),r.set(c,u))),c.isSkinnedMesh){let p=c.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return h}function s(){r=new WeakMap}function a(c){let u=c.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:o,dispose:s}}var Jy=class extends Lr{constructor(e,t,n,r,o,s,a,c,u,f=Fd){if(f!==Fd&&f!==Vd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&f===Fd&&(n=Wl),n===void 0&&f===Vd&&(n=Bd),super(null,r,o,s,a,c,f,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:tr,this.minFilter=c!==void 0?c:tr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},s3=new Lr,nN=new Jy(1,1),a3=new $y,c3=new OE,l3=new Yy,iN=[],rN=[],oN=new Float32Array(16),sN=new Float32Array(9),aN=new Float32Array(4);function Qd(i,e,t){let n=i[0];if(n<=0||n>0)return i;let r=e*t,o=iN[r];if(o===void 0&&(o=new Float32Array(r),iN[r]=o),e!==0){n.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,i[s].toArray(o,a)}return o}function Di(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Ii(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function bv(i,e){let t=rN[e];t===void 0&&(t=new Int32Array(e),rN[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function aee(i,e){let t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function cee(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Di(t,e))return;i.uniform2fv(this.addr,e),Ii(t,e)}}function lee(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Di(t,e))return;i.uniform3fv(this.addr,e),Ii(t,e)}}function uee(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Di(t,e))return;i.uniform4fv(this.addr,e),Ii(t,e)}}function dee(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Di(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ii(t,e)}else{if(Di(t,n))return;aN.set(n),i.uniformMatrix2fv(this.addr,!1,aN),Ii(t,n)}}function fee(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Di(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ii(t,e)}else{if(Di(t,n))return;sN.set(n),i.uniformMatrix3fv(this.addr,!1,sN),Ii(t,n)}}function hee(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Di(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ii(t,e)}else{if(Di(t,n))return;oN.set(n),i.uniformMatrix4fv(this.addr,!1,oN),Ii(t,n)}}function pee(i,e){let t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function mee(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Di(t,e))return;i.uniform2iv(this.addr,e),Ii(t,e)}}function gee(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Di(t,e))return;i.uniform3iv(this.addr,e),Ii(t,e)}}function yee(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Di(t,e))return;i.uniform4iv(this.addr,e),Ii(t,e)}}function vee(i,e){let t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function _ee(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Di(t,e))return;i.uniform2uiv(this.addr,e),Ii(t,e)}}function wee(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Di(t,e))return;i.uniform3uiv(this.addr,e),Ii(t,e)}}function xee(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Di(t,e))return;i.uniform4uiv(this.addr,e),Ii(t,e)}}function Mee(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let o;this.type===i.SAMPLER_2D_SHADOW?(nN.compareFunction=t3,o=nN):o=s3,t.setTexture2D(e||o,r)}function bee(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||c3,r)}function Eee(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||l3,r)}function See(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||a3,r)}function Cee(i){switch(i){case 5126:return aee;case 35664:return cee;case 35665:return lee;case 35666:return uee;case 35674:return dee;case 35675:return fee;case 35676:return hee;case 5124:case 35670:return pee;case 35667:case 35671:return mee;case 35668:case 35672:return gee;case 35669:case 35673:return yee;case 5125:return vee;case 36294:return _ee;case 36295:return wee;case 36296:return xee;case 35678:case 36198:case 36298:case 36306:case 35682:return Mee;case 35679:case 36299:case 36307:return bee;case 35680:case 36300:case 36308:case 36293:return Eee;case 36289:case 36303:case 36311:case 36292:return See}}function Aee(i,e){i.uniform1fv(this.addr,e)}function Tee(i,e){let t=Qd(e,this.size,2);i.uniform2fv(this.addr,t)}function Dee(i,e){let t=Qd(e,this.size,3);i.uniform3fv(this.addr,t)}function Iee(i,e){let t=Qd(e,this.size,4);i.uniform4fv(this.addr,t)}function Ree(i,e){let t=Qd(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Uee(i,e){let t=Qd(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Fee(i,e){let t=Qd(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Pee(i,e){i.uniform1iv(this.addr,e)}function Oee(i,e){i.uniform2iv(this.addr,e)}function Nee(i,e){i.uniform3iv(this.addr,e)}function Lee(i,e){i.uniform4iv(this.addr,e)}function kee(i,e){i.uniform1uiv(this.addr,e)}function Bee(i,e){i.uniform2uiv(this.addr,e)}function Vee(i,e){i.uniform3uiv(this.addr,e)}function zee(i,e){i.uniform4uiv(this.addr,e)}function Hee(i,e,t){let n=this.cache,r=e.length,o=bv(t,r);Di(n,o)||(i.uniform1iv(this.addr,o),Ii(n,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||s3,o[s])}function jee(i,e,t){let n=this.cache,r=e.length,o=bv(t,r);Di(n,o)||(i.uniform1iv(this.addr,o),Ii(n,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||c3,o[s])}function Gee(i,e,t){let n=this.cache,r=e.length,o=bv(t,r);Di(n,o)||(i.uniform1iv(this.addr,o),Ii(n,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||l3,o[s])}function Wee(i,e,t){let n=this.cache,r=e.length,o=bv(t,r);Di(n,o)||(i.uniform1iv(this.addr,o),Ii(n,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||a3,o[s])}function $ee(i){switch(i){case 5126:return Aee;case 35664:return Tee;case 35665:return Dee;case 35666:return Iee;case 35674:return Ree;case 35675:return Uee;case 35676:return Fee;case 5124:case 35670:return Pee;case 35667:case 35671:return Oee;case 35668:case 35672:return Nee;case 35669:case 35673:return Lee;case 5125:return kee;case 36294:return Bee;case 36295:return Vee;case 36296:return zee;case 35678:case 36198:case 36298:case 36306:case 35682:return Hee;case 35679:case 36299:case 36307:return jee;case 35680:case 36300:case 36308:case 36293:return Gee;case 36289:case 36303:case 36311:case 36292:return Wee}}var kE=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Cee(t.type)}},BE=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=$ee(t.type)}},VE=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,t[a.id],n)}}},Xb=/(\w+)(\])?(\[|\.)?/g;function cN(i,e){i.seq.push(e),i.map[e.id]=e}function qee(i,e,t){let n=i.name,r=n.length;for(Xb.lastIndex=0;;){let o=Xb.exec(n),s=Xb.lastIndex,a=o[1],c=o[2]==="]",u=o[3];if(c&&(a=a|0),u===void 0||u==="["&&s+2===r){cN(t,u===void 0?new kE(a,i,e):new BE(a,i,e));break}else{let h=t.map[a];h===void 0&&(h=new VE(a),cN(t,h)),t=h}}}var Nd=class{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let o=e.getActiveUniform(t,r),s=e.getUniformLocation(t,o.name);qee(o,s,this)}}setValue(e,t,n,r){let o=this.map[t];o!==void 0&&o.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let o=0,s=t.length;o!==s;++o){let a=t[o],c=n[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in t&&n.push(s)}return n}};function lN(i,e,t){let n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}var Xee=37297,Yee=0;function Zee(i,e){let t=i.split(`
`),n=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){let a=s+1;n.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return n.join(`
`)}function Kee(i){let e=pn.getPrimaries(pn.workingColorSpace),t=pn.getPrimaries(i),n;switch(e===t?n="":e===jy&&t===Hy?n="LinearDisplayP3ToLinearSRGB":e===Hy&&t===jy&&(n="LinearSRGBToLinearDisplayP3"),i){case Bi:case Mv:return[n,"LinearTransferOETF"];case ci:case SS:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}function uN(i,e,t){let n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+Zee(i.getShaderSource(e),s)}else return r}function Jee(i,e){let t=Kee(e);return`vec4 ${i}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Qee(i,e){let t;switch(e){case lZ:t="Linear";break;case uZ:t="Reinhard";break;case dZ:t="OptimizedCineon";break;case fZ:t="ACESFilmic";break;case pZ:t="AgX";break;case mZ:t="Neutral";break;case hZ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var Ey=new z;function ete(){pn.getLuminanceCoefficients(Ey);let i=Ey.x.toFixed(4),e=Ey.y.toFixed(4),t=Ey.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function tte(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Xh).join(`
`)}function nte(i){let e=[];for(let t in i){let n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function ite(i,e){let t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){let o=i.getActiveAttrib(e,r),s=o.name,a=1;o.type===i.FLOAT_MAT2&&(a=2),o.type===i.FLOAT_MAT3&&(a=3),o.type===i.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:i.getAttribLocation(e,s),locationSize:a}}return t}function Xh(i){return i!==""}function dN(i,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function fN(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var rte=/^[ \t]*#include +<([\w\d./]+)>/gm;function zE(i){return i.replace(rte,ste)}var ote=new Map;function ste(i,e){let t=jt[e];if(t===void 0){let n=ote.get(e);if(n!==void 0)t=jt[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return zE(t)}var ate=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hN(i){return i.replace(ate,cte)}function cte(i,e,t,n){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function pN(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function lte(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===GN?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===OY?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Fa&&(e="SHADOWMAP_TYPE_VSM"),e}function ute(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Ld:case kd:e="ENVMAP_TYPE_CUBE";break;case _v:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dte(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case kd:e="ENVMAP_MODE_REFRACTION";break}return e}function fte(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case vv:e="ENVMAP_BLENDING_MULTIPLY";break;case aZ:e="ENVMAP_BLENDING_MIX";break;case cZ:e="ENVMAP_BLENDING_ADD";break}return e}function hte(i){let e=i.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function pte(i,e,t,n){let r=i.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,c=lte(t),u=ute(t),f=dte(t),h=fte(t),p=hte(t),g=tte(t),y=nte(o),x=r.createProgram(),v,_,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Xh).join(`
`),v.length>0&&(v+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Xh).join(`
`),_.length>0&&(_+=`
`)):(v=[pN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xh).join(`
`),_=[pN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==kc?"#define TONE_MAPPING":"",t.toneMapping!==kc?jt.tonemapping_pars_fragment:"",t.toneMapping!==kc?Qee("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",jt.colorspace_pars_fragment,Jee("linearToOutputTexel",t.outputColorSpace),ete(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Xh).join(`
`)),s=zE(s),s=dN(s,t),s=fN(s,t),a=zE(a),a=dN(a,t),a=fN(a,t),s=hN(s),a=hN(a),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,v=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,_=["#define varying in",t.glslVersion===DO?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===DO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);let M=C+v+s,S=C+_+a,H=lN(r,r.VERTEX_SHADER,M),P=lN(r,r.FRAGMENT_SHADER,S);r.attachShader(x,H),r.attachShader(x,P),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function F(j){if(i.debug.checkShaderErrors){let le=r.getProgramInfoLog(x).trim(),re=r.getShaderInfoLog(H).trim(),xe=r.getShaderInfoLog(P).trim(),ve=!0,W=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(ve=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,x,H,P);else{let Q=uN(r,H,"vertex"),X=uN(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+le+`
`+Q+`
`+X)}else le!==""?console.warn("THREE.WebGLProgram: Program Info Log:",le):(re===""||xe==="")&&(W=!1);W&&(j.diagnostics={runnable:ve,programLog:le,vertexShader:{log:re,prefix:v},fragmentShader:{log:xe,prefix:_}})}r.deleteShader(H),r.deleteShader(P),$=new Nd(r,x),U=ite(r,x)}let $;this.getUniforms=function(){return $===void 0&&F(this),$};let U;this.getAttributes=function(){return U===void 0&&F(this),U};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(x,Xee)),D},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Yee++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=H,this.fragmentShader=P,this}var mte=0,HE=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return n===void 0&&(n=new jE(e),t.set(e,n)),n}},jE=class{constructor(e){this.id=mte++,this.code=e,this.usedTimes=0}};function gte(i,e,t,n,r,o,s){let a=new op,c=new HE,u=new Set,f=[],h=r.logarithmicDepthBuffer,p=r.vertexTextures,g=r.precision,y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(U){return u.add(U),U===0?"uv":`uv${U}`}function v(U,D,j,le,re){let xe=le.fog,ve=re.geometry,W=U.isMeshStandardMaterial?le.environment:null,Q=(U.isMeshStandardMaterial?t:e).get(U.envMap||W),X=Q&&Q.mapping===_v?Q.image.height:null,me=y[U.type];U.precision!==null&&(g=r.getMaxPrecision(U.precision),g!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",g,"instead."));let Le=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,$e=Le!==void 0?Le.length:0,he=0;ve.morphAttributes.position!==void 0&&(he=1),ve.morphAttributes.normal!==void 0&&(he=2),ve.morphAttributes.color!==void 0&&(he=3);let ee,k,q,pe;if(me){let Yt=Gs[me];ee=Yt.vertexShader,k=Yt.fragmentShader}else ee=U.vertexShader,k=U.fragmentShader,c.update(U),q=c.getVertexShaderID(U),pe=c.getFragmentShaderID(U);let ae=i.getRenderTarget(),We=re.isInstancedMesh===!0,Pe=re.isBatchedMesh===!0,ke=!!U.map,et=!!U.matcap,O=!!Q,gt=!!U.aoMap,At=!!U.lightMap,ut=!!U.bumpMap,Ce=!!U.normalMap,Xt=!!U.displacementMap,nt=!!U.emissiveMap,st=!!U.metalnessMap,N=!!U.roughnessMap,A=U.anisotropy>0,ie=U.clearcoat>0,Se=U.dispersion>0,Te=U.iridescence>0,Me=U.sheen>0,qe=U.transmission>0,Re=A&&!!U.anisotropyMap,Ye=ie&&!!U.clearcoatMap,xt=ie&&!!U.clearcoatNormalMap,Oe=ie&&!!U.clearcoatRoughnessMap,Ze=Te&&!!U.iridescenceMap,Rt=Te&&!!U.iridescenceThicknessMap,mt=Me&&!!U.sheenColorMap,tt=Me&&!!U.sheenRoughnessMap,yt=!!U.specularMap,Mt=!!U.specularColorMap,An=!!U.specularIntensityMap,E=qe&&!!U.transmissionMap,te=qe&&!!U.thicknessMap,ne=!!U.gradientMap,ue=!!U.alphaMap,De=U.alphaTest>0,dt=!!U.alphaHash,_t=!!U.extensions,Tn=kc;U.toneMapped&&(ae===null||ae.isXRRenderTarget===!0)&&(Tn=i.toneMapping);let Hn={shaderID:me,shaderType:U.type,shaderName:U.name,vertexShader:ee,fragmentShader:k,defines:U.defines,customVertexShaderID:q,customFragmentShaderID:pe,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:g,batching:Pe,batchingColor:Pe&&re._colorsTexture!==null,instancing:We,instancingColor:We&&re.instanceColor!==null,instancingMorph:We&&re.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:ae===null?i.outputColorSpace:ae.isXRRenderTarget===!0?ae.texture.colorSpace:Bi,alphaToCoverage:!!U.alphaToCoverage,map:ke,matcap:et,envMap:O,envMapMode:O&&Q.mapping,envMapCubeUVHeight:X,aoMap:gt,lightMap:At,bumpMap:ut,normalMap:Ce,displacementMap:p&&Xt,emissiveMap:nt,normalMapObjectSpace:Ce&&U.normalMapType===wZ,normalMapTangentSpace:Ce&&U.normalMapType===xv,metalnessMap:st,roughnessMap:N,anisotropy:A,anisotropyMap:Re,clearcoat:ie,clearcoatMap:Ye,clearcoatNormalMap:xt,clearcoatRoughnessMap:Oe,dispersion:Se,iridescence:Te,iridescenceMap:Ze,iridescenceThicknessMap:Rt,sheen:Me,sheenColorMap:mt,sheenRoughnessMap:tt,specularMap:yt,specularColorMap:Mt,specularIntensityMap:An,transmission:qe,transmissionMap:E,thicknessMap:te,gradientMap:ne,opaque:U.transparent===!1&&U.blending===Ud&&U.alphaToCoverage===!1,alphaMap:ue,alphaTest:De,alphaHash:dt,combine:U.combine,mapUv:ke&&x(U.map.channel),aoMapUv:gt&&x(U.aoMap.channel),lightMapUv:At&&x(U.lightMap.channel),bumpMapUv:ut&&x(U.bumpMap.channel),normalMapUv:Ce&&x(U.normalMap.channel),displacementMapUv:Xt&&x(U.displacementMap.channel),emissiveMapUv:nt&&x(U.emissiveMap.channel),metalnessMapUv:st&&x(U.metalnessMap.channel),roughnessMapUv:N&&x(U.roughnessMap.channel),anisotropyMapUv:Re&&x(U.anisotropyMap.channel),clearcoatMapUv:Ye&&x(U.clearcoatMap.channel),clearcoatNormalMapUv:xt&&x(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&x(U.clearcoatRoughnessMap.channel),iridescenceMapUv:Ze&&x(U.iridescenceMap.channel),iridescenceThicknessMapUv:Rt&&x(U.iridescenceThicknessMap.channel),sheenColorMapUv:mt&&x(U.sheenColorMap.channel),sheenRoughnessMapUv:tt&&x(U.sheenRoughnessMap.channel),specularMapUv:yt&&x(U.specularMap.channel),specularColorMapUv:Mt&&x(U.specularColorMap.channel),specularIntensityMapUv:An&&x(U.specularIntensityMap.channel),transmissionMapUv:E&&x(U.transmissionMap.channel),thicknessMapUv:te&&x(U.thicknessMap.channel),alphaMapUv:ue&&x(U.alphaMap.channel),vertexTangents:!!ve.attributes.tangent&&(Ce||A),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4,pointsUvs:re.isPoints===!0&&!!ve.attributes.uv&&(ke||ue),fog:!!xe,useFog:U.fog===!0,fogExp2:!!xe&&xe.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:re.isSkinnedMesh===!0,morphTargets:ve.morphAttributes.position!==void 0,morphNormals:ve.morphAttributes.normal!==void 0,morphColors:ve.morphAttributes.color!==void 0,morphTargetsCount:$e,morphTextureStride:he,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:U.dithering,shadowMapEnabled:i.shadowMap.enabled&&j.length>0,shadowMapType:i.shadowMap.type,toneMapping:Tn,decodeVideoTexture:ke&&U.map.isVideoTexture===!0&&pn.getTransfer(U.map.colorSpace)===Vn,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===hs,flipSided:U.side===Pr,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:_t&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(_t&&U.extensions.multiDraw===!0||Pe)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return Hn.vertexUv1s=u.has(1),Hn.vertexUv2s=u.has(2),Hn.vertexUv3s=u.has(3),u.clear(),Hn}function _(U){let D=[];if(U.shaderID?D.push(U.shaderID):(D.push(U.customVertexShaderID),D.push(U.customFragmentShaderID)),U.defines!==void 0)for(let j in U.defines)D.push(j),D.push(U.defines[j]);return U.isRawShaderMaterial===!1&&(C(D,U),M(D,U),D.push(i.outputColorSpace)),D.push(U.customProgramCacheKey),D.join()}function C(U,D){U.push(D.precision),U.push(D.outputColorSpace),U.push(D.envMapMode),U.push(D.envMapCubeUVHeight),U.push(D.mapUv),U.push(D.alphaMapUv),U.push(D.lightMapUv),U.push(D.aoMapUv),U.push(D.bumpMapUv),U.push(D.normalMapUv),U.push(D.displacementMapUv),U.push(D.emissiveMapUv),U.push(D.metalnessMapUv),U.push(D.roughnessMapUv),U.push(D.anisotropyMapUv),U.push(D.clearcoatMapUv),U.push(D.clearcoatNormalMapUv),U.push(D.clearcoatRoughnessMapUv),U.push(D.iridescenceMapUv),U.push(D.iridescenceThicknessMapUv),U.push(D.sheenColorMapUv),U.push(D.sheenRoughnessMapUv),U.push(D.specularMapUv),U.push(D.specularColorMapUv),U.push(D.specularIntensityMapUv),U.push(D.transmissionMapUv),U.push(D.thicknessMapUv),U.push(D.combine),U.push(D.fogExp2),U.push(D.sizeAttenuation),U.push(D.morphTargetsCount),U.push(D.morphAttributeCount),U.push(D.numDirLights),U.push(D.numPointLights),U.push(D.numSpotLights),U.push(D.numSpotLightMaps),U.push(D.numHemiLights),U.push(D.numRectAreaLights),U.push(D.numDirLightShadows),U.push(D.numPointLightShadows),U.push(D.numSpotLightShadows),U.push(D.numSpotLightShadowsWithMaps),U.push(D.numLightProbes),U.push(D.shadowMapType),U.push(D.toneMapping),U.push(D.numClippingPlanes),U.push(D.numClipIntersection),U.push(D.depthPacking)}function M(U,D){a.disableAll(),D.supportsVertexTextures&&a.enable(0),D.instancing&&a.enable(1),D.instancingColor&&a.enable(2),D.instancingMorph&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),D.batching&&a.enable(19),D.dispersion&&a.enable(20),D.batchingColor&&a.enable(21),U.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.doubleSided&&a.enable(10),D.flipSided&&a.enable(11),D.useDepthPacking&&a.enable(12),D.dithering&&a.enable(13),D.transmission&&a.enable(14),D.sheen&&a.enable(15),D.opaque&&a.enable(16),D.pointsUvs&&a.enable(17),D.decodeVideoTexture&&a.enable(18),D.alphaToCoverage&&a.enable(19),U.push(a.mask)}function S(U){let D=y[U.type],j;if(D){let le=Gs[D];j=sK.clone(le.uniforms)}else j=U.uniforms;return j}function H(U,D){let j;for(let le=0,re=f.length;le<re;le++){let xe=f[le];if(xe.cacheKey===D){j=xe,++j.usedTimes;break}}return j===void 0&&(j=new pte(i,D,U,o),f.push(j)),j}function P(U){if(--U.usedTimes===0){let D=f.indexOf(U);f[D]=f[f.length-1],f.pop(),U.destroy()}}function F(U){c.remove(U)}function $(){c.dispose()}return{getParameters:v,getProgramCacheKey:_,getUniforms:S,acquireProgram:H,releaseProgram:P,releaseShaderCache:F,programs:f,dispose:$}}function yte(){let i=new WeakMap;function e(o){let s=i.get(o);return s===void 0&&(s={},i.set(o,s)),s}function t(o){i.delete(o)}function n(o,s,a){i.get(o)[s]=a}function r(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function vte(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function mN(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function gN(){let i=[],e=0,t=[],n=[],r=[];function o(){e=0,t.length=0,n.length=0,r.length=0}function s(h,p,g,y,x,v){let _=i[e];return _===void 0?(_={id:h.id,object:h,geometry:p,material:g,groupOrder:y,renderOrder:h.renderOrder,z:x,group:v},i[e]=_):(_.id=h.id,_.object=h,_.geometry=p,_.material=g,_.groupOrder=y,_.renderOrder=h.renderOrder,_.z=x,_.group=v),e++,_}function a(h,p,g,y,x,v){let _=s(h,p,g,y,x,v);g.transmission>0?n.push(_):g.transparent===!0?r.push(_):t.push(_)}function c(h,p,g,y,x,v){let _=s(h,p,g,y,x,v);g.transmission>0?n.unshift(_):g.transparent===!0?r.unshift(_):t.unshift(_)}function u(h,p){t.length>1&&t.sort(h||vte),n.length>1&&n.sort(p||mN),r.length>1&&r.sort(p||mN)}function f(){for(let h=e,p=i.length;h<p;h++){let g=i[h];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:n,transparent:r,init:o,push:a,unshift:c,finish:f,sort:u}}function _te(){let i=new WeakMap;function e(n,r){let o=i.get(n),s;return o===void 0?(s=new gN,i.set(n,[s])):r>=o.length?(s=new gN,o.push(s)):s=o[r],s}function t(){i=new WeakMap}return{get:e,dispose:t}}function wte(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new rt};break;case"SpotLight":t={position:new z,direction:new z,color:new rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new rt,groundColor:new rt};break;case"RectAreaLight":t={color:new rt,position:new z,halfWidth:new z,halfHeight:new z};break}return i[e.id]=t,t}}}function xte(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}var Mte=0;function bte(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Ete(i){let e=new wte,t=xte(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new z);let r=new z,o=new ot,s=new ot;function a(u){let f=0,h=0,p=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let g=0,y=0,x=0,v=0,_=0,C=0,M=0,S=0,H=0,P=0,F=0;u.sort(bte);for(let U=0,D=u.length;U<D;U++){let j=u[U],le=j.color,re=j.intensity,xe=j.distance,ve=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)f+=le.r*re,h+=le.g*re,p+=le.b*re;else if(j.isLightProbe){for(let W=0;W<9;W++)n.probe[W].addScaledVector(j.sh.coefficients[W],re);F++}else if(j.isDirectionalLight){let W=e.get(j);if(W.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){let Q=j.shadow,X=t.get(j);X.shadowIntensity=Q.intensity,X.shadowBias=Q.bias,X.shadowNormalBias=Q.normalBias,X.shadowRadius=Q.radius,X.shadowMapSize=Q.mapSize,n.directionalShadow[g]=X,n.directionalShadowMap[g]=ve,n.directionalShadowMatrix[g]=j.shadow.matrix,C++}n.directional[g]=W,g++}else if(j.isSpotLight){let W=e.get(j);W.position.setFromMatrixPosition(j.matrixWorld),W.color.copy(le).multiplyScalar(re),W.distance=xe,W.coneCos=Math.cos(j.angle),W.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),W.decay=j.decay,n.spot[x]=W;let Q=j.shadow;if(j.map&&(n.spotLightMap[H]=j.map,H++,Q.updateMatrices(j),j.castShadow&&P++),n.spotLightMatrix[x]=Q.matrix,j.castShadow){let X=t.get(j);X.shadowIntensity=Q.intensity,X.shadowBias=Q.bias,X.shadowNormalBias=Q.normalBias,X.shadowRadius=Q.radius,X.shadowMapSize=Q.mapSize,n.spotShadow[x]=X,n.spotShadowMap[x]=ve,S++}x++}else if(j.isRectAreaLight){let W=e.get(j);W.color.copy(le).multiplyScalar(re),W.halfWidth.set(j.width*.5,0,0),W.halfHeight.set(0,j.height*.5,0),n.rectArea[v]=W,v++}else if(j.isPointLight){let W=e.get(j);if(W.color.copy(j.color).multiplyScalar(j.intensity),W.distance=j.distance,W.decay=j.decay,j.castShadow){let Q=j.shadow,X=t.get(j);X.shadowIntensity=Q.intensity,X.shadowBias=Q.bias,X.shadowNormalBias=Q.normalBias,X.shadowRadius=Q.radius,X.shadowMapSize=Q.mapSize,X.shadowCameraNear=Q.camera.near,X.shadowCameraFar=Q.camera.far,n.pointShadow[y]=X,n.pointShadowMap[y]=ve,n.pointShadowMatrix[y]=j.shadow.matrix,M++}n.point[y]=W,y++}else if(j.isHemisphereLight){let W=e.get(j);W.skyColor.copy(j.color).multiplyScalar(re),W.groundColor.copy(j.groundColor).multiplyScalar(re),n.hemi[_]=W,_++}}v>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Je.LTC_FLOAT_1,n.rectAreaLTC2=Je.LTC_FLOAT_2):(n.rectAreaLTC1=Je.LTC_HALF_1,n.rectAreaLTC2=Je.LTC_HALF_2)),n.ambient[0]=f,n.ambient[1]=h,n.ambient[2]=p;let $=n.hash;($.directionalLength!==g||$.pointLength!==y||$.spotLength!==x||$.rectAreaLength!==v||$.hemiLength!==_||$.numDirectionalShadows!==C||$.numPointShadows!==M||$.numSpotShadows!==S||$.numSpotMaps!==H||$.numLightProbes!==F)&&(n.directional.length=g,n.spot.length=x,n.rectArea.length=v,n.point.length=y,n.hemi.length=_,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=M,n.pointShadowMap.length=M,n.spotShadow.length=S,n.spotShadowMap.length=S,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=M,n.spotLightMatrix.length=S+H-P,n.spotLightMap.length=H,n.numSpotLightShadowsWithMaps=P,n.numLightProbes=F,$.directionalLength=g,$.pointLength=y,$.spotLength=x,$.rectAreaLength=v,$.hemiLength=_,$.numDirectionalShadows=C,$.numPointShadows=M,$.numSpotShadows=S,$.numSpotMaps=H,$.numLightProbes=F,n.version=Mte++)}function c(u,f){let h=0,p=0,g=0,y=0,x=0,v=f.matrixWorldInverse;for(let _=0,C=u.length;_<C;_++){let M=u[_];if(M.isDirectionalLight){let S=n.directional[h];S.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(v),h++}else if(M.isSpotLight){let S=n.spot[g];S.position.setFromMatrixPosition(M.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(v),g++}else if(M.isRectAreaLight){let S=n.rectArea[y];S.position.setFromMatrixPosition(M.matrixWorld),S.position.applyMatrix4(v),s.identity(),o.copy(M.matrixWorld),o.premultiply(v),s.extractRotation(o),S.halfWidth.set(M.width*.5,0,0),S.halfHeight.set(0,M.height*.5,0),S.halfWidth.applyMatrix4(s),S.halfHeight.applyMatrix4(s),y++}else if(M.isPointLight){let S=n.point[p];S.position.setFromMatrixPosition(M.matrixWorld),S.position.applyMatrix4(v),p++}else if(M.isHemisphereLight){let S=n.hemi[x];S.direction.setFromMatrixPosition(M.matrixWorld),S.direction.transformDirection(v),x++}}}return{setup:a,setupView:c,state:n}}function yN(i){let e=new Ete(i),t=[],n=[];function r(f){u.camera=f,t.length=0,n.length=0}function o(f){t.push(f)}function s(f){n.push(f)}function a(){e.setup(t)}function c(f){e.setupView(t,f)}let u={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function Ste(i){let e=new WeakMap;function t(r,o=0){let s=e.get(r),a;return s===void 0?(a=new yN(i),e.set(r,[a])):o>=s.length?(a=new yN(i),s.push(a)):a=s[o],a}function n(){e=new WeakMap}return{get:t,dispose:n}}var GE=class extends ki{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vZ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},WE=class extends ki{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Cte=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ate=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Tte(i,e,t){let n=new ap,r=new Ge,o=new Ge,s=new sn,a=new GE({depthPacking:_Z}),c=new WE,u={},f=t.maxTextureSize,h={[$s]:Pr,[Pr]:$s,[hs]:hs},p=new Ys({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:Cte,fragmentShader:Ate}),g=p.clone();g.defines.HORIZONTAL_PASS=1;let y=new _i;y.setAttribute("position",new Ti(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let x=new Jn(y,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=GN;let _=this.type;this.render=function(P,F,$){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||P.length===0)return;let U=i.getRenderTarget(),D=i.getActiveCubeFace(),j=i.getActiveMipmapLevel(),le=i.state;le.setBlending(Lc),le.buffers.color.setClear(1,1,1,1),le.buffers.depth.setTest(!0),le.setScissorTest(!1);let re=_!==Fa&&this.type===Fa,xe=_===Fa&&this.type!==Fa;for(let ve=0,W=P.length;ve<W;ve++){let Q=P[ve],X=Q.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;r.copy(X.mapSize);let me=X.getFrameExtents();if(r.multiply(me),o.copy(X.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(o.x=Math.floor(f/me.x),r.x=o.x*me.x,X.mapSize.x=o.x),r.y>f&&(o.y=Math.floor(f/me.y),r.y=o.y*me.y,X.mapSize.y=o.y)),X.map===null||re===!0||xe===!0){let $e=this.type!==Fa?{minFilter:tr,magFilter:tr}:{};X.map!==null&&X.map.dispose(),X.map=new Na(r.x,r.y,$e),X.map.texture.name=Q.name+".shadowMap",X.camera.updateProjectionMatrix()}i.setRenderTarget(X.map),i.clear();let Le=X.getViewportCount();for(let $e=0;$e<Le;$e++){let he=X.getViewport($e);s.set(o.x*he.x,o.y*he.y,o.x*he.z,o.y*he.w),le.viewport(s),X.updateMatrices(Q,$e),n=X.getFrustum(),S(F,$,X.camera,Q,this.type)}X.isPointLightShadow!==!0&&this.type===Fa&&C(X,$),X.needsUpdate=!1}_=this.type,v.needsUpdate=!1,i.setRenderTarget(U,D,j)};function C(P,F){let $=e.update(x);p.defines.VSM_SAMPLES!==P.blurSamples&&(p.defines.VSM_SAMPLES=P.blurSamples,g.defines.VSM_SAMPLES=P.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Na(r.x,r.y)),p.uniforms.shadow_pass.value=P.map.texture,p.uniforms.resolution.value=P.mapSize,p.uniforms.radius.value=P.radius,i.setRenderTarget(P.mapPass),i.clear(),i.renderBufferDirect(F,null,$,p,x,null),g.uniforms.shadow_pass.value=P.mapPass.texture,g.uniforms.resolution.value=P.mapSize,g.uniforms.radius.value=P.radius,i.setRenderTarget(P.map),i.clear(),i.renderBufferDirect(F,null,$,g,x,null)}function M(P,F,$,U){let D=null,j=$.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(j!==void 0)D=j;else if(D=$.isPointLight===!0?c:a,i.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){let le=D.uuid,re=F.uuid,xe=u[le];xe===void 0&&(xe={},u[le]=xe);let ve=xe[re];ve===void 0&&(ve=D.clone(),xe[re]=ve,F.addEventListener("dispose",H)),D=ve}if(D.visible=F.visible,D.wireframe=F.wireframe,U===Fa?D.side=F.shadowSide!==null?F.shadowSide:F.side:D.side=F.shadowSide!==null?F.shadowSide:h[F.side],D.alphaMap=F.alphaMap,D.alphaTest=F.alphaTest,D.map=F.map,D.clipShadows=F.clipShadows,D.clippingPlanes=F.clippingPlanes,D.clipIntersection=F.clipIntersection,D.displacementMap=F.displacementMap,D.displacementScale=F.displacementScale,D.displacementBias=F.displacementBias,D.wireframeLinewidth=F.wireframeLinewidth,D.linewidth=F.linewidth,$.isPointLight===!0&&D.isMeshDistanceMaterial===!0){let le=i.properties.get(D);le.light=$}return D}function S(P,F,$,U,D){if(P.visible===!1)return;if(P.layers.test(F.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&D===Fa)&&(!P.frustumCulled||n.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,P.matrixWorld);let re=e.update(P),xe=P.material;if(Array.isArray(xe)){let ve=re.groups;for(let W=0,Q=ve.length;W<Q;W++){let X=ve[W],me=xe[X.materialIndex];if(me&&me.visible){let Le=M(P,me,U,D);P.onBeforeShadow(i,P,F,$,re,Le,X),i.renderBufferDirect($,null,re,Le,P,X),P.onAfterShadow(i,P,F,$,re,Le,X)}}}else if(xe.visible){let ve=M(P,xe,U,D);P.onBeforeShadow(i,P,F,$,re,ve,null),i.renderBufferDirect($,null,re,ve,P,null),P.onAfterShadow(i,P,F,$,re,ve,null)}}let le=P.children;for(let re=0,xe=le.length;re<xe;re++)S(le[re],F,$,U,D)}function H(P){P.target.removeEventListener("dispose",H);for(let $ in u){let U=u[$],D=P.target.uuid;D in U&&(U[D].dispose(),delete U[D])}}}function Dte(i){function e(){let E=!1,te=new sn,ne=null,ue=new sn(0,0,0,0);return{setMask:function(De){ne!==De&&!E&&(i.colorMask(De,De,De,De),ne=De)},setLocked:function(De){E=De},setClear:function(De,dt,_t,Tn,Hn){Hn===!0&&(De*=Tn,dt*=Tn,_t*=Tn),te.set(De,dt,_t,Tn),ue.equals(te)===!1&&(i.clearColor(De,dt,_t,Tn),ue.copy(te))},reset:function(){E=!1,ne=null,ue.set(-1,0,0,0)}}}function t(){let E=!1,te=null,ne=null,ue=null;return{setTest:function(De){De?pe(i.DEPTH_TEST):ae(i.DEPTH_TEST)},setMask:function(De){te!==De&&!E&&(i.depthMask(De),te=De)},setFunc:function(De){if(ne!==De){switch(De){case eZ:i.depthFunc(i.NEVER);break;case tZ:i.depthFunc(i.ALWAYS);break;case nZ:i.depthFunc(i.LESS);break;case Vy:i.depthFunc(i.LEQUAL);break;case iZ:i.depthFunc(i.EQUAL);break;case rZ:i.depthFunc(i.GEQUAL);break;case oZ:i.depthFunc(i.GREATER);break;case sZ:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ne=De}},setLocked:function(De){E=De},setClear:function(De){ue!==De&&(i.clearDepth(De),ue=De)},reset:function(){E=!1,te=null,ne=null,ue=null}}}function n(){let E=!1,te=null,ne=null,ue=null,De=null,dt=null,_t=null,Tn=null,Hn=null;return{setTest:function(Yt){E||(Yt?pe(i.STENCIL_TEST):ae(i.STENCIL_TEST))},setMask:function(Yt){te!==Yt&&!E&&(i.stencilMask(Yt),te=Yt)},setFunc:function(Yt,jn,Rn){(ne!==Yt||ue!==jn||De!==Rn)&&(i.stencilFunc(Yt,jn,Rn),ne=Yt,ue=jn,De=Rn)},setOp:function(Yt,jn,Rn){(dt!==Yt||_t!==jn||Tn!==Rn)&&(i.stencilOp(Yt,jn,Rn),dt=Yt,_t=jn,Tn=Rn)},setLocked:function(Yt){E=Yt},setClear:function(Yt){Hn!==Yt&&(i.clearStencil(Yt),Hn=Yt)},reset:function(){E=!1,te=null,ne=null,ue=null,De=null,dt=null,_t=null,Tn=null,Hn=null}}}let r=new e,o=new t,s=new n,a=new WeakMap,c=new WeakMap,u={},f={},h=new WeakMap,p=[],g=null,y=!1,x=null,v=null,_=null,C=null,M=null,S=null,H=null,P=new rt(0,0,0),F=0,$=!1,U=null,D=null,j=null,le=null,re=null,xe=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ve=!1,W=0,Q=i.getParameter(i.VERSION);Q.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(Q)[1]),ve=W>=1):Q.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),ve=W>=2);let X=null,me={},Le=i.getParameter(i.SCISSOR_BOX),$e=i.getParameter(i.VIEWPORT),he=new sn().fromArray(Le),ee=new sn().fromArray($e);function k(E,te,ne,ue){let De=new Uint8Array(4),dt=i.createTexture();i.bindTexture(E,dt),i.texParameteri(E,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(E,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let _t=0;_t<ne;_t++)E===i.TEXTURE_3D||E===i.TEXTURE_2D_ARRAY?i.texImage3D(te,0,i.RGBA,1,1,ue,0,i.RGBA,i.UNSIGNED_BYTE,De):i.texImage2D(te+_t,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,De);return dt}let q={};q[i.TEXTURE_2D]=k(i.TEXTURE_2D,i.TEXTURE_2D,1),q[i.TEXTURE_CUBE_MAP]=k(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),q[i.TEXTURE_2D_ARRAY]=k(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),q[i.TEXTURE_3D]=k(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),pe(i.DEPTH_TEST),o.setFunc(Vy),ut(!1),Ce(_O),pe(i.CULL_FACE),gt(Lc);function pe(E){u[E]!==!0&&(i.enable(E),u[E]=!0)}function ae(E){u[E]!==!1&&(i.disable(E),u[E]=!1)}function We(E,te){return f[E]!==te?(i.bindFramebuffer(E,te),f[E]=te,E===i.DRAW_FRAMEBUFFER&&(f[i.FRAMEBUFFER]=te),E===i.FRAMEBUFFER&&(f[i.DRAW_FRAMEBUFFER]=te),!0):!1}function Pe(E,te){let ne=p,ue=!1;if(E){ne=h.get(te),ne===void 0&&(ne=[],h.set(te,ne));let De=E.textures;if(ne.length!==De.length||ne[0]!==i.COLOR_ATTACHMENT0){for(let dt=0,_t=De.length;dt<_t;dt++)ne[dt]=i.COLOR_ATTACHMENT0+dt;ne.length=De.length,ue=!0}}else ne[0]!==i.BACK&&(ne[0]=i.BACK,ue=!0);ue&&i.drawBuffers(ne)}function ke(E){return g!==E?(i.useProgram(E),g=E,!0):!1}let et={[Hl]:i.FUNC_ADD,[LY]:i.FUNC_SUBTRACT,[kY]:i.FUNC_REVERSE_SUBTRACT};et[BY]=i.MIN,et[VY]=i.MAX;let O={[zY]:i.ZERO,[HY]:i.ONE,[jY]:i.SRC_COLOR,[iE]:i.SRC_ALPHA,[YY]:i.SRC_ALPHA_SATURATE,[qY]:i.DST_COLOR,[WY]:i.DST_ALPHA,[GY]:i.ONE_MINUS_SRC_COLOR,[rE]:i.ONE_MINUS_SRC_ALPHA,[XY]:i.ONE_MINUS_DST_COLOR,[$Y]:i.ONE_MINUS_DST_ALPHA,[ZY]:i.CONSTANT_COLOR,[KY]:i.ONE_MINUS_CONSTANT_COLOR,[JY]:i.CONSTANT_ALPHA,[QY]:i.ONE_MINUS_CONSTANT_ALPHA};function gt(E,te,ne,ue,De,dt,_t,Tn,Hn,Yt){if(E===Lc){y===!0&&(ae(i.BLEND),y=!1);return}if(y===!1&&(pe(i.BLEND),y=!0),E!==NY){if(E!==x||Yt!==$){if((v!==Hl||M!==Hl)&&(i.blendEquation(i.FUNC_ADD),v=Hl,M=Hl),Yt)switch(E){case Ud:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case wO:i.blendFunc(i.ONE,i.ONE);break;case xO:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case MO:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",E);break}else switch(E){case Ud:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case wO:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case xO:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case MO:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",E);break}_=null,C=null,S=null,H=null,P.set(0,0,0),F=0,x=E,$=Yt}return}De=De||te,dt=dt||ne,_t=_t||ue,(te!==v||De!==M)&&(i.blendEquationSeparate(et[te],et[De]),v=te,M=De),(ne!==_||ue!==C||dt!==S||_t!==H)&&(i.blendFuncSeparate(O[ne],O[ue],O[dt],O[_t]),_=ne,C=ue,S=dt,H=_t),(Tn.equals(P)===!1||Hn!==F)&&(i.blendColor(Tn.r,Tn.g,Tn.b,Hn),P.copy(Tn),F=Hn),x=E,$=!1}function At(E,te){E.side===hs?ae(i.CULL_FACE):pe(i.CULL_FACE);let ne=E.side===Pr;te&&(ne=!ne),ut(ne),E.blending===Ud&&E.transparent===!1?gt(Lc):gt(E.blending,E.blendEquation,E.blendSrc,E.blendDst,E.blendEquationAlpha,E.blendSrcAlpha,E.blendDstAlpha,E.blendColor,E.blendAlpha,E.premultipliedAlpha),o.setFunc(E.depthFunc),o.setTest(E.depthTest),o.setMask(E.depthWrite),r.setMask(E.colorWrite);let ue=E.stencilWrite;s.setTest(ue),ue&&(s.setMask(E.stencilWriteMask),s.setFunc(E.stencilFunc,E.stencilRef,E.stencilFuncMask),s.setOp(E.stencilFail,E.stencilZFail,E.stencilZPass)),nt(E.polygonOffset,E.polygonOffsetFactor,E.polygonOffsetUnits),E.alphaToCoverage===!0?pe(i.SAMPLE_ALPHA_TO_COVERAGE):ae(i.SAMPLE_ALPHA_TO_COVERAGE)}function ut(E){U!==E&&(E?i.frontFace(i.CW):i.frontFace(i.CCW),U=E)}function Ce(E){E!==FY?(pe(i.CULL_FACE),E!==D&&(E===_O?i.cullFace(i.BACK):E===PY?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):ae(i.CULL_FACE),D=E}function Xt(E){E!==j&&(ve&&i.lineWidth(E),j=E)}function nt(E,te,ne){E?(pe(i.POLYGON_OFFSET_FILL),(le!==te||re!==ne)&&(i.polygonOffset(te,ne),le=te,re=ne)):ae(i.POLYGON_OFFSET_FILL)}function st(E){E?pe(i.SCISSOR_TEST):ae(i.SCISSOR_TEST)}function N(E){E===void 0&&(E=i.TEXTURE0+xe-1),X!==E&&(i.activeTexture(E),X=E)}function A(E,te,ne){ne===void 0&&(X===null?ne=i.TEXTURE0+xe-1:ne=X);let ue=me[ne];ue===void 0&&(ue={type:void 0,texture:void 0},me[ne]=ue),(ue.type!==E||ue.texture!==te)&&(X!==ne&&(i.activeTexture(ne),X=ne),i.bindTexture(E,te||q[E]),ue.type=E,ue.texture=te)}function ie(){let E=me[X];E!==void 0&&E.type!==void 0&&(i.bindTexture(E.type,null),E.type=void 0,E.texture=void 0)}function Se(){try{i.compressedTexImage2D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function Te(){try{i.compressedTexImage3D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function Me(){try{i.texSubImage2D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function qe(){try{i.texSubImage3D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function Re(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function Ye(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function xt(){try{i.texStorage2D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function Oe(){try{i.texStorage3D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function Ze(){try{i.texImage2D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function Rt(){try{i.texImage3D.apply(i,arguments)}catch(E){console.error("THREE.WebGLState:",E)}}function mt(E){he.equals(E)===!1&&(i.scissor(E.x,E.y,E.z,E.w),he.copy(E))}function tt(E){ee.equals(E)===!1&&(i.viewport(E.x,E.y,E.z,E.w),ee.copy(E))}function yt(E,te){let ne=c.get(te);ne===void 0&&(ne=new WeakMap,c.set(te,ne));let ue=ne.get(E);ue===void 0&&(ue=i.getUniformBlockIndex(te,E.name),ne.set(E,ue))}function Mt(E,te){let ue=c.get(te).get(E);a.get(te)!==ue&&(i.uniformBlockBinding(te,ue,E.__bindingPointIndex),a.set(te,ue))}function An(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},X=null,me={},f={},h=new WeakMap,p=[],g=null,y=!1,x=null,v=null,_=null,C=null,M=null,S=null,H=null,P=new rt(0,0,0),F=0,$=!1,U=null,D=null,j=null,le=null,re=null,he.set(0,0,i.canvas.width,i.canvas.height),ee.set(0,0,i.canvas.width,i.canvas.height),r.reset(),o.reset(),s.reset()}return{buffers:{color:r,depth:o,stencil:s},enable:pe,disable:ae,bindFramebuffer:We,drawBuffers:Pe,useProgram:ke,setBlending:gt,setMaterial:At,setFlipSided:ut,setCullFace:Ce,setLineWidth:Xt,setPolygonOffset:nt,setScissorTest:st,activeTexture:N,bindTexture:A,unbindTexture:ie,compressedTexImage2D:Se,compressedTexImage3D:Te,texImage2D:Ze,texImage3D:Rt,updateUBOMapping:yt,uniformBlockBinding:Mt,texStorage2D:xt,texStorage3D:Oe,texSubImage2D:Me,texSubImage3D:qe,compressedTexSubImage2D:Re,compressedTexSubImage3D:Ye,scissor:mt,viewport:tt,reset:An}}function vN(i,e,t,n){let r=Ite(n);switch(t){case XN:return i*e;case ZN:return i*e;case KN:return i*e*2;case xS:return i*e/r.components*r.byteLength;case MS:return i*e/r.components*r.byteLength;case JN:return i*e*2/r.components*r.byteLength;case bS:return i*e*2/r.components*r.byteLength;case YN:return i*e*3/r.components*r.byteLength;case Ro:return i*e*4/r.components*r.byteLength;case ES:return i*e*4/r.components*r.byteLength;case Oy:case Ny:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Ly:case ky:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case aE:case lE:return Math.max(i,16)*Math.max(e,8)/4;case sE:case cE:return Math.max(i,8)*Math.max(e,8)/2;case uE:case dE:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case fE:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case hE:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case pE:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case mE:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case gE:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case yE:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case vE:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case _E:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case wE:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case xE:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case ME:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case bE:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case EE:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case SE:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case CE:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case By:case AE:case TE:return Math.ceil(i/4)*Math.ceil(e/4)*16;case QN:case DE:return Math.ceil(i/4)*Math.ceil(e/4)*8;case IE:case RE:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Ite(i){switch(i){case Oa:case WN:return{byteLength:1,components:1};case ip:case $N:case yp:return{byteLength:2,components:1};case _S:case wS:return{byteLength:2,components:4};case Wl:case vS:case ms:return{byteLength:4,components:1};case qN:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}function Rte(i,e,t,n,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ge,f=new WeakMap,h,p=new WeakMap,g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(N,A){return g?new OffscreenCanvas(N,A):rp("canvas")}function x(N,A,ie){let Se=1,Te=st(N);if((Te.width>ie||Te.height>ie)&&(Se=ie/Math.max(Te.width,Te.height)),Se<1)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){let Me=Math.floor(Se*Te.width),qe=Math.floor(Se*Te.height);h===void 0&&(h=y(Me,qe));let Re=A?y(Me,qe):h;return Re.width=Me,Re.height=qe,Re.getContext("2d").drawImage(N,0,0,Me,qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+Me+"x"+qe+")."),Re}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),N;return N}function v(N){return N.generateMipmaps&&N.minFilter!==tr&&N.minFilter!==Fr}function _(N){i.generateMipmap(N)}function C(N,A,ie,Se,Te=!1){if(N!==null){if(i[N]!==void 0)return i[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let Me=A;if(A===i.RED&&(ie===i.FLOAT&&(Me=i.R32F),ie===i.HALF_FLOAT&&(Me=i.R16F),ie===i.UNSIGNED_BYTE&&(Me=i.R8)),A===i.RED_INTEGER&&(ie===i.UNSIGNED_BYTE&&(Me=i.R8UI),ie===i.UNSIGNED_SHORT&&(Me=i.R16UI),ie===i.UNSIGNED_INT&&(Me=i.R32UI),ie===i.BYTE&&(Me=i.R8I),ie===i.SHORT&&(Me=i.R16I),ie===i.INT&&(Me=i.R32I)),A===i.RG&&(ie===i.FLOAT&&(Me=i.RG32F),ie===i.HALF_FLOAT&&(Me=i.RG16F),ie===i.UNSIGNED_BYTE&&(Me=i.RG8)),A===i.RG_INTEGER&&(ie===i.UNSIGNED_BYTE&&(Me=i.RG8UI),ie===i.UNSIGNED_SHORT&&(Me=i.RG16UI),ie===i.UNSIGNED_INT&&(Me=i.RG32UI),ie===i.BYTE&&(Me=i.RG8I),ie===i.SHORT&&(Me=i.RG16I),ie===i.INT&&(Me=i.RG32I)),A===i.RGB&&ie===i.UNSIGNED_INT_5_9_9_9_REV&&(Me=i.RGB9_E5),A===i.RGBA){let qe=Te?zy:pn.getTransfer(Se);ie===i.FLOAT&&(Me=i.RGBA32F),ie===i.HALF_FLOAT&&(Me=i.RGBA16F),ie===i.UNSIGNED_BYTE&&(Me=qe===Vn?i.SRGB8_ALPHA8:i.RGBA8),ie===i.UNSIGNED_SHORT_4_4_4_4&&(Me=i.RGBA4),ie===i.UNSIGNED_SHORT_5_5_5_1&&(Me=i.RGB5_A1)}return(Me===i.R16F||Me===i.R32F||Me===i.RG16F||Me===i.RG32F||Me===i.RGBA16F||Me===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Me}function M(N,A){let ie;return N?A===null||A===Wl||A===Bd?ie=i.DEPTH24_STENCIL8:A===ms?ie=i.DEPTH32F_STENCIL8:A===ip&&(ie=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):A===null||A===Wl||A===Bd?ie=i.DEPTH_COMPONENT24:A===ms?ie=i.DEPTH_COMPONENT32F:A===ip&&(ie=i.DEPTH_COMPONENT16),ie}function S(N,A){return v(N)===!0||N.isFramebufferTexture&&N.minFilter!==tr&&N.minFilter!==Fr?Math.log2(Math.max(A.width,A.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?A.mipmaps.length:1}function H(N){let A=N.target;A.removeEventListener("dispose",H),F(A),A.isVideoTexture&&f.delete(A)}function P(N){let A=N.target;A.removeEventListener("dispose",P),U(A)}function F(N){let A=n.get(N);if(A.__webglInit===void 0)return;let ie=N.source,Se=p.get(ie);if(Se){let Te=Se[A.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&$(N),Object.keys(Se).length===0&&p.delete(ie)}n.remove(N)}function $(N){let A=n.get(N);i.deleteTexture(A.__webglTexture);let ie=N.source,Se=p.get(ie);delete Se[A.__cacheKey],s.memory.textures--}function U(N){let A=n.get(N);if(N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(A.__webglFramebuffer[Se]))for(let Te=0;Te<A.__webglFramebuffer[Se].length;Te++)i.deleteFramebuffer(A.__webglFramebuffer[Se][Te]);else i.deleteFramebuffer(A.__webglFramebuffer[Se]);A.__webglDepthbuffer&&i.deleteRenderbuffer(A.__webglDepthbuffer[Se])}else{if(Array.isArray(A.__webglFramebuffer))for(let Se=0;Se<A.__webglFramebuffer.length;Se++)i.deleteFramebuffer(A.__webglFramebuffer[Se]);else i.deleteFramebuffer(A.__webglFramebuffer);if(A.__webglDepthbuffer&&i.deleteRenderbuffer(A.__webglDepthbuffer),A.__webglMultisampledFramebuffer&&i.deleteFramebuffer(A.__webglMultisampledFramebuffer),A.__webglColorRenderbuffer)for(let Se=0;Se<A.__webglColorRenderbuffer.length;Se++)A.__webglColorRenderbuffer[Se]&&i.deleteRenderbuffer(A.__webglColorRenderbuffer[Se]);A.__webglDepthRenderbuffer&&i.deleteRenderbuffer(A.__webglDepthRenderbuffer)}let ie=N.textures;for(let Se=0,Te=ie.length;Se<Te;Se++){let Me=n.get(ie[Se]);Me.__webglTexture&&(i.deleteTexture(Me.__webglTexture),s.memory.textures--),n.remove(ie[Se])}n.remove(N)}let D=0;function j(){D=0}function le(){let N=D;return N>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+r.maxTextures),D+=1,N}function re(N){let A=[];return A.push(N.wrapS),A.push(N.wrapT),A.push(N.wrapR||0),A.push(N.magFilter),A.push(N.minFilter),A.push(N.anisotropy),A.push(N.internalFormat),A.push(N.format),A.push(N.type),A.push(N.generateMipmaps),A.push(N.premultiplyAlpha),A.push(N.flipY),A.push(N.unpackAlignment),A.push(N.colorSpace),A.join()}function xe(N,A){let ie=n.get(N);if(N.isVideoTexture&&Xt(N),N.isRenderTargetTexture===!1&&N.version>0&&ie.__version!==N.version){let Se=N.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ee(ie,N,A);return}}t.bindTexture(i.TEXTURE_2D,ie.__webglTexture,i.TEXTURE0+A)}function ve(N,A){let ie=n.get(N);if(N.version>0&&ie.__version!==N.version){ee(ie,N,A);return}t.bindTexture(i.TEXTURE_2D_ARRAY,ie.__webglTexture,i.TEXTURE0+A)}function W(N,A){let ie=n.get(N);if(N.version>0&&ie.__version!==N.version){ee(ie,N,A);return}t.bindTexture(i.TEXTURE_3D,ie.__webglTexture,i.TEXTURE0+A)}function Q(N,A){let ie=n.get(N);if(N.version>0&&ie.__version!==N.version){k(ie,N,A);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ie.__webglTexture,i.TEXTURE0+A)}let X={[qs]:i.REPEAT,[Io]:i.CLAMP_TO_EDGE,[np]:i.MIRRORED_REPEAT},me={[tr]:i.NEAREST,[yS]:i.NEAREST_MIPMAP_NEAREST,[Td]:i.NEAREST_MIPMAP_LINEAR,[Fr]:i.LINEAR,[Yh]:i.LINEAR_MIPMAP_NEAREST,[Ws]:i.LINEAR_MIPMAP_LINEAR},Le={[xZ]:i.NEVER,[AZ]:i.ALWAYS,[MZ]:i.LESS,[t3]:i.LEQUAL,[bZ]:i.EQUAL,[CZ]:i.GEQUAL,[EZ]:i.GREATER,[SZ]:i.NOTEQUAL};function $e(N,A){if(A.type===ms&&e.has("OES_texture_float_linear")===!1&&(A.magFilter===Fr||A.magFilter===Yh||A.magFilter===Td||A.magFilter===Ws||A.minFilter===Fr||A.minFilter===Yh||A.minFilter===Td||A.minFilter===Ws)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(N,i.TEXTURE_WRAP_S,X[A.wrapS]),i.texParameteri(N,i.TEXTURE_WRAP_T,X[A.wrapT]),(N===i.TEXTURE_3D||N===i.TEXTURE_2D_ARRAY)&&i.texParameteri(N,i.TEXTURE_WRAP_R,X[A.wrapR]),i.texParameteri(N,i.TEXTURE_MAG_FILTER,me[A.magFilter]),i.texParameteri(N,i.TEXTURE_MIN_FILTER,me[A.minFilter]),A.compareFunction&&(i.texParameteri(N,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(N,i.TEXTURE_COMPARE_FUNC,Le[A.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(A.magFilter===tr||A.minFilter!==Td&&A.minFilter!==Ws||A.type===ms&&e.has("OES_texture_float_linear")===!1)return;if(A.anisotropy>1||n.get(A).__currentAnisotropy){let ie=e.get("EXT_texture_filter_anisotropic");i.texParameterf(N,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(A.anisotropy,r.getMaxAnisotropy())),n.get(A).__currentAnisotropy=A.anisotropy}}}function he(N,A){let ie=!1;N.__webglInit===void 0&&(N.__webglInit=!0,A.addEventListener("dispose",H));let Se=A.source,Te=p.get(Se);Te===void 0&&(Te={},p.set(Se,Te));let Me=re(A);if(Me!==N.__cacheKey){Te[Me]===void 0&&(Te[Me]={texture:i.createTexture(),usedTimes:0},s.memory.textures++,ie=!0),Te[Me].usedTimes++;let qe=Te[N.__cacheKey];qe!==void 0&&(Te[N.__cacheKey].usedTimes--,qe.usedTimes===0&&$(A)),N.__cacheKey=Me,N.__webglTexture=Te[Me].texture}return ie}function ee(N,A,ie){let Se=i.TEXTURE_2D;(A.isDataArrayTexture||A.isCompressedArrayTexture)&&(Se=i.TEXTURE_2D_ARRAY),A.isData3DTexture&&(Se=i.TEXTURE_3D);let Te=he(N,A),Me=A.source;t.bindTexture(Se,N.__webglTexture,i.TEXTURE0+ie);let qe=n.get(Me);if(Me.version!==qe.__version||Te===!0){t.activeTexture(i.TEXTURE0+ie);let Re=pn.getPrimaries(pn.workingColorSpace),Ye=A.colorSpace===Oc?null:pn.getPrimaries(A.colorSpace),xt=A.colorSpace===Oc||Re===Ye?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,A.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,A.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);let Oe=x(A.image,!1,r.maxTextureSize);Oe=nt(A,Oe);let Ze=o.convert(A.format,A.colorSpace),Rt=o.convert(A.type),mt=C(A.internalFormat,Ze,Rt,A.colorSpace,A.isVideoTexture);$e(Se,A);let tt,yt=A.mipmaps,Mt=A.isVideoTexture!==!0,An=qe.__version===void 0||Te===!0,E=Me.dataReady,te=S(A,Oe);if(A.isDepthTexture)mt=M(A.format===Vd,A.type),An&&(Mt?t.texStorage2D(i.TEXTURE_2D,1,mt,Oe.width,Oe.height):t.texImage2D(i.TEXTURE_2D,0,mt,Oe.width,Oe.height,0,Ze,Rt,null));else if(A.isDataTexture)if(yt.length>0){Mt&&An&&t.texStorage2D(i.TEXTURE_2D,te,mt,yt[0].width,yt[0].height);for(let ne=0,ue=yt.length;ne<ue;ne++)tt=yt[ne],Mt?E&&t.texSubImage2D(i.TEXTURE_2D,ne,0,0,tt.width,tt.height,Ze,Rt,tt.data):t.texImage2D(i.TEXTURE_2D,ne,mt,tt.width,tt.height,0,Ze,Rt,tt.data);A.generateMipmaps=!1}else Mt?(An&&t.texStorage2D(i.TEXTURE_2D,te,mt,Oe.width,Oe.height),E&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Oe.width,Oe.height,Ze,Rt,Oe.data)):t.texImage2D(i.TEXTURE_2D,0,mt,Oe.width,Oe.height,0,Ze,Rt,Oe.data);else if(A.isCompressedTexture)if(A.isCompressedArrayTexture){Mt&&An&&t.texStorage3D(i.TEXTURE_2D_ARRAY,te,mt,yt[0].width,yt[0].height,Oe.depth);for(let ne=0,ue=yt.length;ne<ue;ne++)if(tt=yt[ne],A.format!==Ro)if(Ze!==null)if(Mt){if(E)if(A.layerUpdates.size>0){let De=vN(tt.width,tt.height,A.format,A.type);for(let dt of A.layerUpdates){let _t=tt.data.subarray(dt*De/tt.data.BYTES_PER_ELEMENT,(dt+1)*De/tt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ne,0,0,dt,tt.width,tt.height,1,Ze,_t,0,0)}A.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ne,0,0,0,tt.width,tt.height,Oe.depth,Ze,tt.data,0,0)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ne,mt,tt.width,tt.height,Oe.depth,0,tt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Mt?E&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,ne,0,0,0,tt.width,tt.height,Oe.depth,Ze,Rt,tt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,ne,mt,tt.width,tt.height,Oe.depth,0,Ze,Rt,tt.data)}else{Mt&&An&&t.texStorage2D(i.TEXTURE_2D,te,mt,yt[0].width,yt[0].height);for(let ne=0,ue=yt.length;ne<ue;ne++)tt=yt[ne],A.format!==Ro?Ze!==null?Mt?E&&t.compressedTexSubImage2D(i.TEXTURE_2D,ne,0,0,tt.width,tt.height,Ze,tt.data):t.compressedTexImage2D(i.TEXTURE_2D,ne,mt,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Mt?E&&t.texSubImage2D(i.TEXTURE_2D,ne,0,0,tt.width,tt.height,Ze,Rt,tt.data):t.texImage2D(i.TEXTURE_2D,ne,mt,tt.width,tt.height,0,Ze,Rt,tt.data)}else if(A.isDataArrayTexture)if(Mt){if(An&&t.texStorage3D(i.TEXTURE_2D_ARRAY,te,mt,Oe.width,Oe.height,Oe.depth),E)if(A.layerUpdates.size>0){let ne=vN(Oe.width,Oe.height,A.format,A.type);for(let ue of A.layerUpdates){let De=Oe.data.subarray(ue*ne/Oe.data.BYTES_PER_ELEMENT,(ue+1)*ne/Oe.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,ue,Oe.width,Oe.height,1,Ze,Rt,De)}A.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,Ze,Rt,Oe.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,mt,Oe.width,Oe.height,Oe.depth,0,Ze,Rt,Oe.data);else if(A.isData3DTexture)Mt?(An&&t.texStorage3D(i.TEXTURE_3D,te,mt,Oe.width,Oe.height,Oe.depth),E&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,Ze,Rt,Oe.data)):t.texImage3D(i.TEXTURE_3D,0,mt,Oe.width,Oe.height,Oe.depth,0,Ze,Rt,Oe.data);else if(A.isFramebufferTexture){if(An)if(Mt)t.texStorage2D(i.TEXTURE_2D,te,mt,Oe.width,Oe.height);else{let ne=Oe.width,ue=Oe.height;for(let De=0;De<te;De++)t.texImage2D(i.TEXTURE_2D,De,mt,ne,ue,0,Ze,Rt,null),ne>>=1,ue>>=1}}else if(yt.length>0){if(Mt&&An){let ne=st(yt[0]);t.texStorage2D(i.TEXTURE_2D,te,mt,ne.width,ne.height)}for(let ne=0,ue=yt.length;ne<ue;ne++)tt=yt[ne],Mt?E&&t.texSubImage2D(i.TEXTURE_2D,ne,0,0,Ze,Rt,tt):t.texImage2D(i.TEXTURE_2D,ne,mt,Ze,Rt,tt);A.generateMipmaps=!1}else if(Mt){if(An){let ne=st(Oe);t.texStorage2D(i.TEXTURE_2D,te,mt,ne.width,ne.height)}E&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ze,Rt,Oe)}else t.texImage2D(i.TEXTURE_2D,0,mt,Ze,Rt,Oe);v(A)&&_(Se),qe.__version=Me.version,A.onUpdate&&A.onUpdate(A)}N.__version=A.version}function k(N,A,ie){if(A.image.length!==6)return;let Se=he(N,A),Te=A.source;t.bindTexture(i.TEXTURE_CUBE_MAP,N.__webglTexture,i.TEXTURE0+ie);let Me=n.get(Te);if(Te.version!==Me.__version||Se===!0){t.activeTexture(i.TEXTURE0+ie);let qe=pn.getPrimaries(pn.workingColorSpace),Re=A.colorSpace===Oc?null:pn.getPrimaries(A.colorSpace),Ye=A.colorSpace===Oc||qe===Re?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,A.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,A.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ye);let xt=A.isCompressedTexture||A.image[0].isCompressedTexture,Oe=A.image[0]&&A.image[0].isDataTexture,Ze=[];for(let ue=0;ue<6;ue++)!xt&&!Oe?Ze[ue]=x(A.image[ue],!0,r.maxCubemapSize):Ze[ue]=Oe?A.image[ue].image:A.image[ue],Ze[ue]=nt(A,Ze[ue]);let Rt=Ze[0],mt=o.convert(A.format,A.colorSpace),tt=o.convert(A.type),yt=C(A.internalFormat,mt,tt,A.colorSpace),Mt=A.isVideoTexture!==!0,An=Me.__version===void 0||Se===!0,E=Te.dataReady,te=S(A,Rt);$e(i.TEXTURE_CUBE_MAP,A);let ne;if(xt){Mt&&An&&t.texStorage2D(i.TEXTURE_CUBE_MAP,te,yt,Rt.width,Rt.height);for(let ue=0;ue<6;ue++){ne=Ze[ue].mipmaps;for(let De=0;De<ne.length;De++){let dt=ne[De];A.format!==Ro?mt!==null?Mt?E&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,De,0,0,dt.width,dt.height,mt,dt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,De,yt,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Mt?E&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,De,0,0,dt.width,dt.height,mt,tt,dt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,De,yt,dt.width,dt.height,0,mt,tt,dt.data)}}}else{if(ne=A.mipmaps,Mt&&An){ne.length>0&&te++;let ue=st(Ze[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,te,yt,ue.width,ue.height)}for(let ue=0;ue<6;ue++)if(Oe){Mt?E&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,0,0,Ze[ue].width,Ze[ue].height,mt,tt,Ze[ue].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,yt,Ze[ue].width,Ze[ue].height,0,mt,tt,Ze[ue].data);for(let De=0;De<ne.length;De++){let _t=ne[De].image[ue].image;Mt?E&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,De+1,0,0,_t.width,_t.height,mt,tt,_t.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,De+1,yt,_t.width,_t.height,0,mt,tt,_t.data)}}else{Mt?E&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,0,0,mt,tt,Ze[ue]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,yt,mt,tt,Ze[ue]);for(let De=0;De<ne.length;De++){let dt=ne[De];Mt?E&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,De+1,0,0,mt,tt,dt.image[ue]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,De+1,yt,mt,tt,dt.image[ue])}}}v(A)&&_(i.TEXTURE_CUBE_MAP),Me.__version=Te.version,A.onUpdate&&A.onUpdate(A)}N.__version=A.version}function q(N,A,ie,Se,Te,Me){let qe=o.convert(ie.format,ie.colorSpace),Re=o.convert(ie.type),Ye=C(ie.internalFormat,qe,Re,ie.colorSpace);if(!n.get(A).__hasExternalTextures){let Oe=Math.max(1,A.width>>Me),Ze=Math.max(1,A.height>>Me);Te===i.TEXTURE_3D||Te===i.TEXTURE_2D_ARRAY?t.texImage3D(Te,Me,Ye,Oe,Ze,A.depth,0,qe,Re,null):t.texImage2D(Te,Me,Ye,Oe,Ze,0,qe,Re,null)}t.bindFramebuffer(i.FRAMEBUFFER,N),Ce(A)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Se,Te,n.get(ie).__webglTexture,0,ut(A)):(Te===i.TEXTURE_2D||Te>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Se,Te,n.get(ie).__webglTexture,Me),t.bindFramebuffer(i.FRAMEBUFFER,null)}function pe(N,A,ie){if(i.bindRenderbuffer(i.RENDERBUFFER,N),A.depthBuffer){let Se=A.depthTexture,Te=Se&&Se.isDepthTexture?Se.type:null,Me=M(A.stencilBuffer,Te),qe=A.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Re=ut(A);Ce(A)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Re,Me,A.width,A.height):ie?i.renderbufferStorageMultisample(i.RENDERBUFFER,Re,Me,A.width,A.height):i.renderbufferStorage(i.RENDERBUFFER,Me,A.width,A.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,qe,i.RENDERBUFFER,N)}else{let Se=A.textures;for(let Te=0;Te<Se.length;Te++){let Me=Se[Te],qe=o.convert(Me.format,Me.colorSpace),Re=o.convert(Me.type),Ye=C(Me.internalFormat,qe,Re,Me.colorSpace),xt=ut(A);ie&&Ce(A)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,xt,Ye,A.width,A.height):Ce(A)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,xt,Ye,A.width,A.height):i.renderbufferStorage(i.RENDERBUFFER,Ye,A.width,A.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ae(N,A){if(A&&A.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,N),!(A.depthTexture&&A.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(A.depthTexture).__webglTexture||A.depthTexture.image.width!==A.width||A.depthTexture.image.height!==A.height)&&(A.depthTexture.image.width=A.width,A.depthTexture.image.height=A.height,A.depthTexture.needsUpdate=!0),xe(A.depthTexture,0);let Se=n.get(A.depthTexture).__webglTexture,Te=ut(A);if(A.depthTexture.format===Fd)Ce(A)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Se,0,Te):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Se,0);else if(A.depthTexture.format===Vd)Ce(A)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Se,0,Te):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function We(N){let A=n.get(N),ie=N.isWebGLCubeRenderTarget===!0;if(N.depthTexture&&!A.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");ae(A.__webglFramebuffer,N)}else if(ie){A.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)t.bindFramebuffer(i.FRAMEBUFFER,A.__webglFramebuffer[Se]),A.__webglDepthbuffer[Se]=i.createRenderbuffer(),pe(A.__webglDepthbuffer[Se],N,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,A.__webglFramebuffer),A.__webglDepthbuffer=i.createRenderbuffer(),pe(A.__webglDepthbuffer,N,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function Pe(N,A,ie){let Se=n.get(N);A!==void 0&&q(Se.__webglFramebuffer,N,N.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ie!==void 0&&We(N)}function ke(N){let A=N.texture,ie=n.get(N),Se=n.get(A);N.addEventListener("dispose",P);let Te=N.textures,Me=N.isWebGLCubeRenderTarget===!0,qe=Te.length>1;if(qe||(Se.__webglTexture===void 0&&(Se.__webglTexture=i.createTexture()),Se.__version=A.version,s.memory.textures++),Me){ie.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)if(A.mipmaps&&A.mipmaps.length>0){ie.__webglFramebuffer[Re]=[];for(let Ye=0;Ye<A.mipmaps.length;Ye++)ie.__webglFramebuffer[Re][Ye]=i.createFramebuffer()}else ie.__webglFramebuffer[Re]=i.createFramebuffer()}else{if(A.mipmaps&&A.mipmaps.length>0){ie.__webglFramebuffer=[];for(let Re=0;Re<A.mipmaps.length;Re++)ie.__webglFramebuffer[Re]=i.createFramebuffer()}else ie.__webglFramebuffer=i.createFramebuffer();if(qe)for(let Re=0,Ye=Te.length;Re<Ye;Re++){let xt=n.get(Te[Re]);xt.__webglTexture===void 0&&(xt.__webglTexture=i.createTexture(),s.memory.textures++)}if(N.samples>0&&Ce(N)===!1){ie.__webglMultisampledFramebuffer=i.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let Re=0;Re<Te.length;Re++){let Ye=Te[Re];ie.__webglColorRenderbuffer[Re]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ie.__webglColorRenderbuffer[Re]);let xt=o.convert(Ye.format,Ye.colorSpace),Oe=o.convert(Ye.type),Ze=C(Ye.internalFormat,xt,Oe,Ye.colorSpace,N.isXRRenderTarget===!0),Rt=ut(N);i.renderbufferStorageMultisample(i.RENDERBUFFER,Rt,Ze,N.width,N.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Re,i.RENDERBUFFER,ie.__webglColorRenderbuffer[Re])}i.bindRenderbuffer(i.RENDERBUFFER,null),N.depthBuffer&&(ie.__webglDepthRenderbuffer=i.createRenderbuffer(),pe(ie.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Me){t.bindTexture(i.TEXTURE_CUBE_MAP,Se.__webglTexture),$e(i.TEXTURE_CUBE_MAP,A);for(let Re=0;Re<6;Re++)if(A.mipmaps&&A.mipmaps.length>0)for(let Ye=0;Ye<A.mipmaps.length;Ye++)q(ie.__webglFramebuffer[Re][Ye],N,A,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Ye);else q(ie.__webglFramebuffer[Re],N,A,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0);v(A)&&_(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(qe){for(let Re=0,Ye=Te.length;Re<Ye;Re++){let xt=Te[Re],Oe=n.get(xt);t.bindTexture(i.TEXTURE_2D,Oe.__webglTexture),$e(i.TEXTURE_2D,xt),q(ie.__webglFramebuffer,N,xt,i.COLOR_ATTACHMENT0+Re,i.TEXTURE_2D,0),v(xt)&&_(i.TEXTURE_2D)}t.unbindTexture()}else{let Re=i.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(Re=N.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Re,Se.__webglTexture),$e(Re,A),A.mipmaps&&A.mipmaps.length>0)for(let Ye=0;Ye<A.mipmaps.length;Ye++)q(ie.__webglFramebuffer[Ye],N,A,i.COLOR_ATTACHMENT0,Re,Ye);else q(ie.__webglFramebuffer,N,A,i.COLOR_ATTACHMENT0,Re,0);v(A)&&_(Re),t.unbindTexture()}N.depthBuffer&&We(N)}function et(N){let A=N.textures;for(let ie=0,Se=A.length;ie<Se;ie++){let Te=A[ie];if(v(Te)){let Me=N.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,qe=n.get(Te).__webglTexture;t.bindTexture(Me,qe),_(Me),t.unbindTexture()}}}let O=[],gt=[];function At(N){if(N.samples>0){if(Ce(N)===!1){let A=N.textures,ie=N.width,Se=N.height,Te=i.COLOR_BUFFER_BIT,Me=N.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,qe=n.get(N),Re=A.length>1;if(Re)for(let Ye=0;Ye<A.length;Ye++)t.bindFramebuffer(i.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ye,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,qe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ye,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,qe.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,qe.__webglFramebuffer);for(let Ye=0;Ye<A.length;Ye++){if(N.resolveDepthBuffer&&(N.depthBuffer&&(Te|=i.DEPTH_BUFFER_BIT),N.stencilBuffer&&N.resolveStencilBuffer&&(Te|=i.STENCIL_BUFFER_BIT)),Re){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,qe.__webglColorRenderbuffer[Ye]);let xt=n.get(A[Ye]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,xt,0)}i.blitFramebuffer(0,0,ie,Se,0,0,ie,Se,Te,i.NEAREST),c===!0&&(O.length=0,gt.length=0,O.push(i.COLOR_ATTACHMENT0+Ye),N.depthBuffer&&N.resolveDepthBuffer===!1&&(O.push(Me),gt.push(Me),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,gt)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,O))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Re)for(let Ye=0;Ye<A.length;Ye++){t.bindFramebuffer(i.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ye,i.RENDERBUFFER,qe.__webglColorRenderbuffer[Ye]);let xt=n.get(A[Ye]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,qe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ye,i.TEXTURE_2D,xt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,qe.__webglMultisampledFramebuffer)}else if(N.depthBuffer&&N.resolveDepthBuffer===!1&&c){let A=N.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[A])}}}function ut(N){return Math.min(r.maxSamples,N.samples)}function Ce(N){let A=n.get(N);return N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&A.__useRenderToTexture!==!1}function Xt(N){let A=s.render.frame;f.get(N)!==A&&(f.set(N,A),N.update())}function nt(N,A){let ie=N.colorSpace,Se=N.format,Te=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||ie!==Bi&&ie!==Oc&&(pn.getTransfer(ie)===Vn?(Se!==Ro||Te!==Oa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ie)),A}function st(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(u.width=N.naturalWidth||N.width,u.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(u.width=N.displayWidth,u.height=N.displayHeight):(u.width=N.width,u.height=N.height),u}this.allocateTextureUnit=le,this.resetTextureUnits=j,this.setTexture2D=xe,this.setTexture2DArray=ve,this.setTexture3D=W,this.setTextureCube=Q,this.rebindTextures=Pe,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=et,this.updateMultisampleRenderTarget=At,this.setupDepthRenderbuffer=We,this.setupFrameBufferTexture=q,this.useMultisampledRTT=Ce}function Ute(i,e){function t(n,r=Oc){let o,s=pn.getTransfer(r);if(n===Oa)return i.UNSIGNED_BYTE;if(n===_S)return i.UNSIGNED_SHORT_4_4_4_4;if(n===wS)return i.UNSIGNED_SHORT_5_5_5_1;if(n===qN)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===WN)return i.BYTE;if(n===$N)return i.SHORT;if(n===ip)return i.UNSIGNED_SHORT;if(n===vS)return i.INT;if(n===Wl)return i.UNSIGNED_INT;if(n===ms)return i.FLOAT;if(n===yp)return i.HALF_FLOAT;if(n===XN)return i.ALPHA;if(n===YN)return i.RGB;if(n===Ro)return i.RGBA;if(n===ZN)return i.LUMINANCE;if(n===KN)return i.LUMINANCE_ALPHA;if(n===Fd)return i.DEPTH_COMPONENT;if(n===Vd)return i.DEPTH_STENCIL;if(n===xS)return i.RED;if(n===MS)return i.RED_INTEGER;if(n===JN)return i.RG;if(n===bS)return i.RG_INTEGER;if(n===ES)return i.RGBA_INTEGER;if(n===Oy||n===Ny||n===Ly||n===ky)if(s===Vn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(n===Oy)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ny)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ly)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ky)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(n===Oy)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ny)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ly)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ky)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===sE||n===aE||n===cE||n===lE)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(n===sE)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===aE)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===cE)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===lE)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===uE||n===dE||n===fE)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(n===uE||n===dE)return s===Vn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===fE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===hE||n===pE||n===mE||n===gE||n===yE||n===vE||n===_E||n===wE||n===xE||n===ME||n===bE||n===EE||n===SE||n===CE)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(n===hE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===pE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===mE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===gE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===yE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===vE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===_E)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===wE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===xE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ME)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===bE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===EE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===SE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===CE)return s===Vn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===By||n===AE||n===TE)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(n===By)return s===Vn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===AE)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===TE)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===QN||n===DE||n===IE||n===RE)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(n===By)return o.COMPRESSED_RED_RGTC1_EXT;if(n===DE)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===IE)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===RE)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Bd?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}var $E=class extends li{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},_r=class extends ri{constructor(){super(),this.isGroup=!0,this.type="Group"}},Fte={type:"move"},Jh=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _r,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _r,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _r,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,o=null,s=null,a=this._targetRay,c=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(let x of e.hand.values()){let v=t.getJointPose(x,n),_=this._getHandJoint(u,x);v!==null&&(_.matrix.fromArray(v.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=v.radius),_.visible=v!==null}let f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=f.position.distanceTo(h.position),g=.02,y=.005;u.inputState.pinching&&p>g+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=g-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,n),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Fte)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let n=new _r;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}},Pte=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Ote=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,qE=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){let r=new Lr,o=e.properties.get(r);o.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,n=new Ys({vertexShader:Pte,fragmentShader:Ote,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Jn(new Zy(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},XE=class extends Xs{constructor(e,t){super();let n=this,r=null,o=1,s=null,a="local-floor",c=1,u=null,f=null,h=null,p=null,g=null,y=null,x=new qE,v=t.getContextAttributes(),_=null,C=null,M=[],S=[],H=new Ge,P=null,F=new li;F.layers.enable(1),F.viewport=new sn;let $=new li;$.layers.enable(2),$.viewport=new sn;let U=[F,$],D=new $E;D.layers.enable(1),D.layers.enable(2);let j=null,le=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(k){let q=M[k];return q===void 0&&(q=new Jh,M[k]=q),q.getTargetRaySpace()},this.getControllerGrip=function(k){let q=M[k];return q===void 0&&(q=new Jh,M[k]=q),q.getGripSpace()},this.getHand=function(k){let q=M[k];return q===void 0&&(q=new Jh,M[k]=q),q.getHandSpace()};function re(k){let q=S.indexOf(k.inputSource);if(q===-1)return;let pe=M[q];pe!==void 0&&(pe.update(k.inputSource,k.frame,u||s),pe.dispatchEvent({type:k.type,data:k.inputSource}))}function xe(){r.removeEventListener("select",re),r.removeEventListener("selectstart",re),r.removeEventListener("selectend",re),r.removeEventListener("squeeze",re),r.removeEventListener("squeezestart",re),r.removeEventListener("squeezeend",re),r.removeEventListener("end",xe),r.removeEventListener("inputsourceschange",ve);for(let k=0;k<M.length;k++){let q=S[k];q!==null&&(S[k]=null,M[k].disconnect(q))}j=null,le=null,x.reset(),e.setRenderTarget(_),g=null,p=null,h=null,r=null,C=null,ee.stop(),n.isPresenting=!1,e.setPixelRatio(P),e.setSize(H.width,H.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(k){o=k,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(k){a=k,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(k){u=k},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return h},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=function(k){return gn(this,null,function*(){if(r=k,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",re),r.addEventListener("selectstart",re),r.addEventListener("selectend",re),r.addEventListener("squeeze",re),r.addEventListener("squeezestart",re),r.addEventListener("squeezeend",re),r.addEventListener("end",xe),r.addEventListener("inputsourceschange",ve),v.xrCompatible!==!0&&(yield t.makeXRCompatible()),P=e.getPixelRatio(),e.getSize(H),r.renderState.layers===void 0){let q={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o};g=new XRWebGLLayer(r,t,q),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),C=new Na(g.framebufferWidth,g.framebufferHeight,{format:Ro,type:Oa,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let q=null,pe=null,ae=null;v.depth&&(ae=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,q=v.stencil?Vd:Fd,pe=v.stencil?Bd:Wl);let We={colorFormat:t.RGBA8,depthFormat:ae,scaleFactor:o};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer(We),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),C=new Na(p.textureWidth,p.textureHeight,{format:Ro,type:Oa,depthTexture:new Jy(p.textureWidth,p.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,q),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(c),u=null,s=yield r.requestReferenceSpace(a),ee.setContext(r),ee.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function ve(k){for(let q=0;q<k.removed.length;q++){let pe=k.removed[q],ae=S.indexOf(pe);ae>=0&&(S[ae]=null,M[ae].disconnect(pe))}for(let q=0;q<k.added.length;q++){let pe=k.added[q],ae=S.indexOf(pe);if(ae===-1){for(let Pe=0;Pe<M.length;Pe++)if(Pe>=S.length){S.push(pe),ae=Pe;break}else if(S[Pe]===null){S[Pe]=pe,ae=Pe;break}if(ae===-1)break}let We=M[ae];We&&We.connect(pe)}}let W=new z,Q=new z;function X(k,q,pe){W.setFromMatrixPosition(q.matrixWorld),Q.setFromMatrixPosition(pe.matrixWorld);let ae=W.distanceTo(Q),We=q.projectionMatrix.elements,Pe=pe.projectionMatrix.elements,ke=We[14]/(We[10]-1),et=We[14]/(We[10]+1),O=(We[9]+1)/We[5],gt=(We[9]-1)/We[5],At=(We[8]-1)/We[0],ut=(Pe[8]+1)/Pe[0],Ce=ke*At,Xt=ke*ut,nt=ae/(-At+ut),st=nt*-At;q.matrixWorld.decompose(k.position,k.quaternion,k.scale),k.translateX(st),k.translateZ(nt),k.matrixWorld.compose(k.position,k.quaternion,k.scale),k.matrixWorldInverse.copy(k.matrixWorld).invert();let N=ke+nt,A=et+nt,ie=Ce-st,Se=Xt+(ae-st),Te=O*et/A*N,Me=gt*et/A*N;k.projectionMatrix.makePerspective(ie,Se,Te,Me,N,A),k.projectionMatrixInverse.copy(k.projectionMatrix).invert()}function me(k,q){q===null?k.matrixWorld.copy(k.matrix):k.matrixWorld.multiplyMatrices(q.matrixWorld,k.matrix),k.matrixWorldInverse.copy(k.matrixWorld).invert()}this.updateCamera=function(k){if(r===null)return;x.texture!==null&&(k.near=x.depthNear,k.far=x.depthFar),D.near=$.near=F.near=k.near,D.far=$.far=F.far=k.far,(j!==D.near||le!==D.far)&&(r.updateRenderState({depthNear:D.near,depthFar:D.far}),j=D.near,le=D.far,F.near=j,F.far=le,$.near=j,$.far=le,F.updateProjectionMatrix(),$.updateProjectionMatrix(),k.updateProjectionMatrix());let q=k.parent,pe=D.cameras;me(D,q);for(let ae=0;ae<pe.length;ae++)me(pe[ae],q);pe.length===2?X(D,F,$):D.projectionMatrix.copy(F.projectionMatrix),Le(k,D,q)};function Le(k,q,pe){pe===null?k.matrix.copy(q.matrixWorld):(k.matrix.copy(pe.matrixWorld),k.matrix.invert(),k.matrix.multiply(q.matrixWorld)),k.matrix.decompose(k.position,k.quaternion,k.scale),k.updateMatrixWorld(!0),k.projectionMatrix.copy(q.projectionMatrix),k.projectionMatrixInverse.copy(q.projectionMatrixInverse),k.isPerspectiveCamera&&(k.fov=jd*2*Math.atan(1/k.projectionMatrix.elements[5]),k.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(p===null&&g===null))return c},this.setFoveation=function(k){c=k,p!==null&&(p.fixedFoveation=k),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=k)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(D)};let $e=null;function he(k,q){if(f=q.getViewerPose(u||s),y=q,f!==null){let pe=f.views;g!==null&&(e.setRenderTargetFramebuffer(C,g.framebuffer),e.setRenderTarget(C));let ae=!1;pe.length!==D.cameras.length&&(D.cameras.length=0,ae=!0);for(let Pe=0;Pe<pe.length;Pe++){let ke=pe[Pe],et=null;if(g!==null)et=g.getViewport(ke);else{let gt=h.getViewSubImage(p,ke);et=gt.viewport,Pe===0&&(e.setRenderTargetTextures(C,gt.colorTexture,p.ignoreDepthValues?void 0:gt.depthStencilTexture),e.setRenderTarget(C))}let O=U[Pe];O===void 0&&(O=new li,O.layers.enable(Pe),O.viewport=new sn,U[Pe]=O),O.matrix.fromArray(ke.transform.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale),O.projectionMatrix.fromArray(ke.projectionMatrix),O.projectionMatrixInverse.copy(O.projectionMatrix).invert(),O.viewport.set(et.x,et.y,et.width,et.height),Pe===0&&(D.matrix.copy(O.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),ae===!0&&D.cameras.push(O)}let We=r.enabledFeatures;if(We&&We.includes("depth-sensing")){let Pe=h.getDepthInformation(pe[0]);Pe&&Pe.isValid&&Pe.texture&&x.init(e,Pe,r.renderState)}}for(let pe=0;pe<M.length;pe++){let ae=S[pe],We=M[pe];ae!==null&&We!==void 0&&We.update(ae,q,u||s)}$e&&$e(k,q),q.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:q}),y=null}let ee=new o3;ee.setAnimationLoop(he),this.setAnimationLoop=function(k){$e=k},this.dispose=function(){}}},Vl=new vi,Nte=new ot;function Lte(i,e){function t(v,_){v.matrixAutoUpdate===!0&&v.updateMatrix(),_.value.copy(v.matrix)}function n(v,_){_.color.getRGB(v.fogColor.value,r3(i)),_.isFog?(v.fogNear.value=_.near,v.fogFar.value=_.far):_.isFogExp2&&(v.fogDensity.value=_.density)}function r(v,_,C,M,S){_.isMeshBasicMaterial||_.isMeshLambertMaterial?o(v,_):_.isMeshToonMaterial?(o(v,_),h(v,_)):_.isMeshPhongMaterial?(o(v,_),f(v,_)):_.isMeshStandardMaterial?(o(v,_),p(v,_),_.isMeshPhysicalMaterial&&g(v,_,S)):_.isMeshMatcapMaterial?(o(v,_),y(v,_)):_.isMeshDepthMaterial?o(v,_):_.isMeshDistanceMaterial?(o(v,_),x(v,_)):_.isMeshNormalMaterial?o(v,_):_.isLineBasicMaterial?(s(v,_),_.isLineDashedMaterial&&a(v,_)):_.isPointsMaterial?c(v,_,C,M):_.isSpriteMaterial?u(v,_):_.isShadowMaterial?(v.color.value.copy(_.color),v.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function o(v,_){v.opacity.value=_.opacity,_.color&&v.diffuse.value.copy(_.color),_.emissive&&v.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(v.map.value=_.map,t(_.map,v.mapTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,t(_.alphaMap,v.alphaMapTransform)),_.bumpMap&&(v.bumpMap.value=_.bumpMap,t(_.bumpMap,v.bumpMapTransform),v.bumpScale.value=_.bumpScale,_.side===Pr&&(v.bumpScale.value*=-1)),_.normalMap&&(v.normalMap.value=_.normalMap,t(_.normalMap,v.normalMapTransform),v.normalScale.value.copy(_.normalScale),_.side===Pr&&v.normalScale.value.negate()),_.displacementMap&&(v.displacementMap.value=_.displacementMap,t(_.displacementMap,v.displacementMapTransform),v.displacementScale.value=_.displacementScale,v.displacementBias.value=_.displacementBias),_.emissiveMap&&(v.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,v.emissiveMapTransform)),_.specularMap&&(v.specularMap.value=_.specularMap,t(_.specularMap,v.specularMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest);let C=e.get(_),M=C.envMap,S=C.envMapRotation;M&&(v.envMap.value=M,Vl.copy(S),Vl.x*=-1,Vl.y*=-1,Vl.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Vl.y*=-1,Vl.z*=-1),v.envMapRotation.value.setFromMatrix4(Nte.makeRotationFromEuler(Vl)),v.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=_.reflectivity,v.ior.value=_.ior,v.refractionRatio.value=_.refractionRatio),_.lightMap&&(v.lightMap.value=_.lightMap,v.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,v.lightMapTransform)),_.aoMap&&(v.aoMap.value=_.aoMap,v.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,v.aoMapTransform))}function s(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,_.map&&(v.map.value=_.map,t(_.map,v.mapTransform))}function a(v,_){v.dashSize.value=_.dashSize,v.totalSize.value=_.dashSize+_.gapSize,v.scale.value=_.scale}function c(v,_,C,M){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.size.value=_.size*C,v.scale.value=M*.5,_.map&&(v.map.value=_.map,t(_.map,v.uvTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,t(_.alphaMap,v.alphaMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest)}function u(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.rotation.value=_.rotation,_.map&&(v.map.value=_.map,t(_.map,v.mapTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,t(_.alphaMap,v.alphaMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest)}function f(v,_){v.specular.value.copy(_.specular),v.shininess.value=Math.max(_.shininess,1e-4)}function h(v,_){_.gradientMap&&(v.gradientMap.value=_.gradientMap)}function p(v,_){v.metalness.value=_.metalness,_.metalnessMap&&(v.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,v.metalnessMapTransform)),v.roughness.value=_.roughness,_.roughnessMap&&(v.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,v.roughnessMapTransform)),_.envMap&&(v.envMapIntensity.value=_.envMapIntensity)}function g(v,_,C){v.ior.value=_.ior,_.sheen>0&&(v.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),v.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(v.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,v.sheenColorMapTransform)),_.sheenRoughnessMap&&(v.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,v.sheenRoughnessMapTransform))),_.clearcoat>0&&(v.clearcoat.value=_.clearcoat,v.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(v.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,v.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(v.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Pr&&v.clearcoatNormalScale.value.negate())),_.dispersion>0&&(v.dispersion.value=_.dispersion),_.iridescence>0&&(v.iridescence.value=_.iridescence,v.iridescenceIOR.value=_.iridescenceIOR,v.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(v.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,v.iridescenceMapTransform)),_.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),_.transmission>0&&(v.transmission.value=_.transmission,v.transmissionSamplerMap.value=C.texture,v.transmissionSamplerSize.value.set(C.width,C.height),_.transmissionMap&&(v.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,v.transmissionMapTransform)),v.thickness.value=_.thickness,_.thicknessMap&&(v.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=_.attenuationDistance,v.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(v.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(v.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=_.specularIntensity,v.specularColor.value.copy(_.specularColor),_.specularColorMap&&(v.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,v.specularColorMapTransform)),_.specularIntensityMap&&(v.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,v.specularIntensityMapTransform))}function y(v,_){_.matcap&&(v.matcap.value=_.matcap)}function x(v,_){let C=e.get(_).light;v.referencePosition.value.setFromMatrixPosition(C.matrixWorld),v.nearDistance.value=C.shadow.camera.near,v.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function kte(i,e,t,n){let r={},o={},s=[],a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function c(C,M){let S=M.program;n.uniformBlockBinding(C,S)}function u(C,M){let S=r[C.id];S===void 0&&(y(C),S=f(C),r[C.id]=S,C.addEventListener("dispose",v));let H=M.program;n.updateUBOMapping(C,H);let P=e.render.frame;o[C.id]!==P&&(p(C),o[C.id]=P)}function f(C){let M=h();C.__bindingPointIndex=M;let S=i.createBuffer(),H=C.__size,P=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,S),i.bufferData(i.UNIFORM_BUFFER,H,P),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,M,S),S}function h(){for(let C=0;C<a;C++)if(s.indexOf(C)===-1)return s.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(C){let M=r[C.id],S=C.uniforms,H=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,M);for(let P=0,F=S.length;P<F;P++){let $=Array.isArray(S[P])?S[P]:[S[P]];for(let U=0,D=$.length;U<D;U++){let j=$[U];if(g(j,P,U,H)===!0){let le=j.__offset,re=Array.isArray(j.value)?j.value:[j.value],xe=0;for(let ve=0;ve<re.length;ve++){let W=re[ve],Q=x(W);typeof W=="number"||typeof W=="boolean"?(j.__data[0]=W,i.bufferSubData(i.UNIFORM_BUFFER,le+xe,j.__data)):W.isMatrix3?(j.__data[0]=W.elements[0],j.__data[1]=W.elements[1],j.__data[2]=W.elements[2],j.__data[3]=0,j.__data[4]=W.elements[3],j.__data[5]=W.elements[4],j.__data[6]=W.elements[5],j.__data[7]=0,j.__data[8]=W.elements[6],j.__data[9]=W.elements[7],j.__data[10]=W.elements[8],j.__data[11]=0):(W.toArray(j.__data,xe),xe+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,le,j.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function g(C,M,S,H){let P=C.value,F=M+"_"+S;if(H[F]===void 0)return typeof P=="number"||typeof P=="boolean"?H[F]=P:H[F]=P.clone(),!0;{let $=H[F];if(typeof P=="number"||typeof P=="boolean"){if($!==P)return H[F]=P,!0}else if($.equals(P)===!1)return $.copy(P),!0}return!1}function y(C){let M=C.uniforms,S=0,H=16;for(let F=0,$=M.length;F<$;F++){let U=Array.isArray(M[F])?M[F]:[M[F]];for(let D=0,j=U.length;D<j;D++){let le=U[D],re=Array.isArray(le.value)?le.value:[le.value];for(let xe=0,ve=re.length;xe<ve;xe++){let W=re[xe],Q=x(W),X=S%H,me=X%Q.boundary,Le=X+me;S+=me,Le!==0&&H-Le<Q.storage&&(S+=H-Le),le.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),le.__offset=S,S+=Q.storage}}}let P=S%H;return P>0&&(S+=H-P),C.__size=S,C.__cache={},this}function x(C){let M={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(M.boundary=4,M.storage=4):C.isVector2?(M.boundary=8,M.storage=8):C.isVector3||C.isColor?(M.boundary=16,M.storage=12):C.isVector4?(M.boundary=16,M.storage=16):C.isMatrix3?(M.boundary=48,M.storage=48):C.isMatrix4?(M.boundary=64,M.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),M}function v(C){let M=C.target;M.removeEventListener("dispose",v);let S=s.indexOf(M.__bindingPointIndex);s.splice(S,1),i.deleteBuffer(r[M.id]),delete r[M.id],delete o[M.id]}function _(){for(let C in r)i.deleteBuffer(r[C]);s=[],r={},o={}}return{bind:c,update:u,dispose:_}}var Qy=class{constructor(e={}){let{canvas:t=GZ(),context:n=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let p;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=n.getContextAttributes().alpha}else p=s;let g=new Uint32Array(4),y=new Int32Array(4),x=null,v=null,_=[],C=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ci,this.toneMapping=kc,this.toneMappingExposure=1;let M=this,S=!1,H=0,P=0,F=null,$=-1,U=null,D=new sn,j=new sn,le=null,re=new rt(0),xe=0,ve=t.width,W=t.height,Q=1,X=null,me=null,Le=new sn(0,0,ve,W),$e=new sn(0,0,ve,W),he=!1,ee=new ap,k=!1,q=!1,pe=new ot,ae=new z,We=new sn,Pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ke=!1;function et(){return F===null?Q:1}let O=n;function gt(R,Z){return t.getContext(R,Z)}try{let R={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${gS}`),t.addEventListener("webglcontextlost",ne,!1),t.addEventListener("webglcontextrestored",ue,!1),t.addEventListener("webglcontextcreationerror",De,!1),O===null){let Z="webgl2";if(O=gt(Z,R),O===null)throw gt(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(R){throw console.error("THREE.WebGLRenderer: "+R.message),R}let At,ut,Ce,Xt,nt,st,N,A,ie,Se,Te,Me,qe,Re,Ye,xt,Oe,Ze,Rt,mt,tt,yt,Mt,An;function E(){At=new tee(O),At.init(),yt=new Ute(O,At),ut=new YQ(O,At,e,yt),Ce=new Dte(O),Xt=new ree(O),nt=new yte,st=new Rte(O,At,Ce,nt,ut,yt,Xt),N=new KQ(M),A=new eee(M),ie=new dK(O),Mt=new qQ(O,ie),Se=new nee(O,ie,Xt,Mt),Te=new see(O,Se,ie,Xt),Rt=new oee(O,ut,st),xt=new ZQ(nt),Me=new gte(M,N,A,At,ut,Mt,xt),qe=new Lte(M,nt),Re=new _te,Ye=new Ste(At),Ze=new $Q(M,N,A,Ce,Te,p,c),Oe=new Tte(M,Te,ut),An=new kte(O,Xt,ut,Ce),mt=new XQ(O,At,Xt),tt=new iee(O,At,Xt),Xt.programs=Me.programs,M.capabilities=ut,M.extensions=At,M.properties=nt,M.renderLists=Re,M.shadowMap=Oe,M.state=Ce,M.info=Xt}E();let te=new XE(M,O);this.xr=te,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){let R=At.get("WEBGL_lose_context");R&&R.loseContext()},this.forceContextRestore=function(){let R=At.get("WEBGL_lose_context");R&&R.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(R){R!==void 0&&(Q=R,this.setSize(ve,W,!1))},this.getSize=function(R){return R.set(ve,W)},this.setSize=function(R,Z,oe=!0){if(te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ve=R,W=Z,t.width=Math.floor(R*Q),t.height=Math.floor(Z*Q),oe===!0&&(t.style.width=R+"px",t.style.height=Z+"px"),this.setViewport(0,0,R,Z)},this.getDrawingBufferSize=function(R){return R.set(ve*Q,W*Q).floor()},this.setDrawingBufferSize=function(R,Z,oe){ve=R,W=Z,Q=oe,t.width=Math.floor(R*oe),t.height=Math.floor(Z*oe),this.setViewport(0,0,R,Z)},this.getCurrentViewport=function(R){return R.copy(D)},this.getViewport=function(R){return R.copy(Le)},this.setViewport=function(R,Z,oe,se){R.isVector4?Le.set(R.x,R.y,R.z,R.w):Le.set(R,Z,oe,se),Ce.viewport(D.copy(Le).multiplyScalar(Q).round())},this.getScissor=function(R){return R.copy($e)},this.setScissor=function(R,Z,oe,se){R.isVector4?$e.set(R.x,R.y,R.z,R.w):$e.set(R,Z,oe,se),Ce.scissor(j.copy($e).multiplyScalar(Q).round())},this.getScissorTest=function(){return he},this.setScissorTest=function(R){Ce.setScissorTest(he=R)},this.setOpaqueSort=function(R){X=R},this.setTransparentSort=function(R){me=R},this.getClearColor=function(R){return R.copy(Ze.getClearColor())},this.setClearColor=function(){Ze.setClearColor.apply(Ze,arguments)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(){Ze.setClearAlpha.apply(Ze,arguments)},this.clear=function(R=!0,Z=!0,oe=!0){let se=0;if(R){let J=!1;if(F!==null){let Ve=F.texture.format;J=Ve===ES||Ve===bS||Ve===MS}if(J){let Ve=F.texture.type,Qe=Ve===Oa||Ve===Wl||Ve===ip||Ve===Bd||Ve===_S||Ve===wS,at=Ze.getClearColor(),lt=Ze.getClearAlpha(),St=at.r,Ct=at.g,vt=at.b;Qe?(g[0]=St,g[1]=Ct,g[2]=vt,g[3]=lt,O.clearBufferuiv(O.COLOR,0,g)):(y[0]=St,y[1]=Ct,y[2]=vt,y[3]=lt,O.clearBufferiv(O.COLOR,0,y))}else se|=O.COLOR_BUFFER_BIT}Z&&(se|=O.DEPTH_BUFFER_BIT),oe&&(se|=O.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),O.clear(se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ne,!1),t.removeEventListener("webglcontextrestored",ue,!1),t.removeEventListener("webglcontextcreationerror",De,!1),Re.dispose(),Ye.dispose(),nt.dispose(),N.dispose(),A.dispose(),Te.dispose(),Mt.dispose(),An.dispose(),Me.dispose(),te.dispose(),te.removeEventListener("sessionstart",Rn),te.removeEventListener("sessionend",kr),ei.stop()};function ne(R){R.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function ue(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;let R=Xt.autoReset,Z=Oe.enabled,oe=Oe.autoUpdate,se=Oe.needsUpdate,J=Oe.type;E(),Xt.autoReset=R,Oe.enabled=Z,Oe.autoUpdate=oe,Oe.needsUpdate=se,Oe.type=J}function De(R){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",R.statusMessage)}function dt(R){let Z=R.target;Z.removeEventListener("dispose",dt),_t(Z)}function _t(R){Tn(R),nt.remove(R)}function Tn(R){let Z=nt.get(R).programs;Z!==void 0&&(Z.forEach(function(oe){Me.releaseProgram(oe)}),R.isShaderMaterial&&Me.releaseShaderCache(R))}this.renderBufferDirect=function(R,Z,oe,se,J,Ve){Z===null&&(Z=Pe);let Qe=J.isMesh&&J.matrixWorld.determinant()<0,at=Fp(R,Z,oe,se,J);Ce.setMaterial(se,Qe);let lt=oe.index,St=1;if(se.wireframe===!0){if(lt=Se.getWireframeAttribute(oe),lt===void 0)return;St=2}let Ct=oe.drawRange,vt=oe.attributes.position,dn=Ct.start*St,Gn=(Ct.start+Ct.count)*St;Ve!==null&&(dn=Math.max(dn,Ve.start*St),Gn=Math.min(Gn,(Ve.start+Ve.count)*St)),lt!==null?(dn=Math.max(dn,0),Gn=Math.min(Gn,lt.count)):vt!=null&&(dn=Math.max(dn,0),Gn=Math.min(Gn,vt.count));let Wn=Gn-dn;if(Wn<0||Wn===1/0)return;Mt.setup(J,se,at,oe,lt);let nr,mn=mt;if(lt!==null&&(nr=ie.get(lt),mn=tt,mn.setIndex(nr)),J.isMesh)se.wireframe===!0?(Ce.setLineWidth(se.wireframeLinewidth*et()),mn.setMode(O.LINES)):mn.setMode(O.TRIANGLES);else if(J.isLine){let ht=se.linewidth;ht===void 0&&(ht=1),Ce.setLineWidth(ht*et()),J.isLineSegments?mn.setMode(O.LINES):J.isLineLoop?mn.setMode(O.LINE_LOOP):mn.setMode(O.LINE_STRIP)}else J.isPoints?mn.setMode(O.POINTS):J.isSprite&&mn.setMode(O.TRIANGLES);if(J.isBatchedMesh)if(J._multiDrawInstances!==null)mn.renderMultiDrawInstances(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount,J._multiDrawInstances);else if(At.get("WEBGL_multi_draw"))mn.renderMultiDraw(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount);else{let ht=J._multiDrawStarts,di=J._multiDrawCounts,fn=J._multiDrawCount,ir=lt?ie.get(lt).bytesPerElement:1,ja=nt.get(se).currentProgram.getUniforms();for(let Xi=0;Xi<fn;Xi++)ja.setValue(O,"_gl_DrawID",Xi),mn.render(ht[Xi]/ir,di[Xi])}else if(J.isInstancedMesh)mn.renderInstances(dn,Wn,J.count);else if(oe.isInstancedBufferGeometry){let ht=oe._maxInstanceCount!==void 0?oe._maxInstanceCount:1/0,di=Math.min(oe.instanceCount,ht);mn.renderInstances(dn,Wn,di)}else mn.render(dn,Wn)};function Hn(R,Z,oe){R.transparent===!0&&R.side===hs&&R.forceSinglePass===!1?(R.side=Pr,R.needsUpdate=!0,po(R,Z,oe),R.side=$s,R.needsUpdate=!0,po(R,Z,oe),R.side=hs):po(R,Z,oe)}this.compile=function(R,Z,oe=null){oe===null&&(oe=R),v=Ye.get(oe),v.init(Z),C.push(v),oe.traverseVisible(function(J){J.isLight&&J.layers.test(Z.layers)&&(v.pushLight(J),J.castShadow&&v.pushShadow(J))}),R!==oe&&R.traverseVisible(function(J){J.isLight&&J.layers.test(Z.layers)&&(v.pushLight(J),J.castShadow&&v.pushShadow(J))}),v.setupLights();let se=new Set;return R.traverse(function(J){let Ve=J.material;if(Ve)if(Array.isArray(Ve))for(let Qe=0;Qe<Ve.length;Qe++){let at=Ve[Qe];Hn(at,oe,J),se.add(at)}else Hn(Ve,oe,J),se.add(Ve)}),C.pop(),v=null,se},this.compileAsync=function(R,Z,oe=null){let se=this.compile(R,Z,oe);return new Promise(J=>{function Ve(){if(se.forEach(function(Qe){nt.get(Qe).currentProgram.isReady()&&se.delete(Qe)}),se.size===0){J(R);return}setTimeout(Ve,10)}At.get("KHR_parallel_shader_compile")!==null?Ve():setTimeout(Ve,10)})};let Yt=null;function jn(R){Yt&&Yt(R)}function Rn(){ei.stop()}function kr(){ei.start()}let ei=new o3;ei.setAnimationLoop(jn),typeof self<"u"&&ei.setContext(self),this.setAnimationLoop=function(R){Yt=R,te.setAnimationLoop(R),R===null?ei.stop():ei.start()},te.addEventListener("sessionstart",Rn),te.addEventListener("sessionend",kr),this.render=function(R,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;if(R.matrixWorldAutoUpdate===!0&&R.updateMatrixWorld(),Z.parent===null&&Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),te.enabled===!0&&te.isPresenting===!0&&(te.cameraAutoUpdate===!0&&te.updateCamera(Z),Z=te.getCamera()),R.isScene===!0&&R.onBeforeRender(M,R,Z,F),v=Ye.get(R,C.length),v.init(Z),C.push(v),pe.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),ee.setFromProjectionMatrix(pe),q=this.localClippingEnabled,k=xt.init(this.clippingPlanes,q),x=Re.get(R,_.length),x.init(),_.push(x),te.enabled===!0&&te.isPresenting===!0){let Ve=M.xr.getDepthSensingMesh();Ve!==null&&zi(Ve,Z,-1/0,M.sortObjects)}zi(R,Z,0,M.sortObjects),x.finish(),M.sortObjects===!0&&x.sort(X,me),ke=te.enabled===!1||te.isPresenting===!1||te.hasDepthSensing()===!1,ke&&Ze.addToRenderList(x,R),this.info.render.frame++,k===!0&&xt.beginShadows();let oe=v.state.shadowsArray;Oe.render(oe,R,Z),k===!0&&xt.endShadows(),this.info.autoReset===!0&&this.info.reset();let se=x.opaque,J=x.transmissive;if(v.setupLights(),Z.isArrayCamera){let Ve=Z.cameras;if(J.length>0)for(let Qe=0,at=Ve.length;Qe<at;Qe++){let lt=Ve[Qe];Ms(se,J,R,lt)}ke&&Ze.render(R);for(let Qe=0,at=Ve.length;Qe<at;Qe++){let lt=Ve[Qe];ho(x,R,lt,lt.viewport)}}else J.length>0&&Ms(se,J,R,Z),ke&&Ze.render(R),ho(x,R,Z);F!==null&&(st.updateMultisampleRenderTarget(F),st.updateRenderTargetMipmap(F)),R.isScene===!0&&R.onAfterRender(M,R,Z),Mt.resetDefaultState(),$=-1,U=null,C.pop(),C.length>0?(v=C[C.length-1],k===!0&&xt.setGlobalState(M.clippingPlanes,v.state.camera)):v=null,_.pop(),_.length>0?x=_[_.length-1]:x=null};function zi(R,Z,oe,se){if(R.visible===!1)return;if(R.layers.test(Z.layers)){if(R.isGroup)oe=R.renderOrder;else if(R.isLOD)R.autoUpdate===!0&&R.update(Z);else if(R.isLight)v.pushLight(R),R.castShadow&&v.pushShadow(R);else if(R.isSprite){if(!R.frustumCulled||ee.intersectsSprite(R)){se&&We.setFromMatrixPosition(R.matrixWorld).applyMatrix4(pe);let Qe=Te.update(R),at=R.material;at.visible&&x.push(R,Qe,at,oe,We.z,null)}}else if((R.isMesh||R.isLine||R.isPoints)&&(!R.frustumCulled||ee.intersectsObject(R))){let Qe=Te.update(R),at=R.material;if(se&&(R.boundingSphere!==void 0?(R.boundingSphere===null&&R.computeBoundingSphere(),We.copy(R.boundingSphere.center)):(Qe.boundingSphere===null&&Qe.computeBoundingSphere(),We.copy(Qe.boundingSphere.center)),We.applyMatrix4(R.matrixWorld).applyMatrix4(pe)),Array.isArray(at)){let lt=Qe.groups;for(let St=0,Ct=lt.length;St<Ct;St++){let vt=lt[St],dn=at[vt.materialIndex];dn&&dn.visible&&x.push(R,Qe,dn,oe,We.z,vt)}}else at.visible&&x.push(R,Qe,at,oe,We.z,null)}}let Ve=R.children;for(let Qe=0,at=Ve.length;Qe<at;Qe++)zi(Ve[Qe],Z,oe,se)}function ho(R,Z,oe,se){let J=R.opaque,Ve=R.transmissive,Qe=R.transparent;v.setupLightsView(oe),k===!0&&xt.setGlobalState(M.clippingPlanes,oe),se&&Ce.viewport(D.copy(se)),J.length>0&&Br(J,Z,oe),Ve.length>0&&Br(Ve,Z,oe),Qe.length>0&&Br(Qe,Z,oe),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function Ms(R,Z,oe,se){if((oe.isScene===!0?oe.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[se.id]===void 0&&(v.state.transmissionRenderTarget[se.id]=new Na(1,1,{generateMipmaps:!0,type:At.has("EXT_color_buffer_half_float")||At.has("EXT_color_buffer_float")?yp:Oa,minFilter:Ws,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:pn.workingColorSpace}));let Ve=v.state.transmissionRenderTarget[se.id],Qe=se.viewport||D;Ve.setSize(Qe.z,Qe.w);let at=M.getRenderTarget();M.setRenderTarget(Ve),M.getClearColor(re),xe=M.getClearAlpha(),xe<1&&M.setClearColor(16777215,.5),M.clear(),ke&&Ze.render(oe);let lt=M.toneMapping;M.toneMapping=kc;let St=se.viewport;if(se.viewport!==void 0&&(se.viewport=void 0),v.setupLightsView(se),k===!0&&xt.setGlobalState(M.clippingPlanes,se),Br(R,oe,se),st.updateMultisampleRenderTarget(Ve),st.updateRenderTargetMipmap(Ve),At.has("WEBGL_multisampled_render_to_texture")===!1){let Ct=!1;for(let vt=0,dn=Z.length;vt<dn;vt++){let Gn=Z[vt],Wn=Gn.object,nr=Gn.geometry,mn=Gn.material,ht=Gn.group;if(mn.side===hs&&Wn.layers.test(se.layers)){let di=mn.side;mn.side=Pr,mn.needsUpdate=!0,Ha(Wn,oe,se,nr,mn,ht),mn.side=di,mn.needsUpdate=!0,Ct=!0}}Ct===!0&&(st.updateMultisampleRenderTarget(Ve),st.updateRenderTargetMipmap(Ve))}M.setRenderTarget(at),M.setClearColor(re,xe),St!==void 0&&(se.viewport=St),M.toneMapping=lt}function Br(R,Z,oe){let se=Z.isScene===!0?Z.overrideMaterial:null;for(let J=0,Ve=R.length;J<Ve;J++){let Qe=R[J],at=Qe.object,lt=Qe.geometry,St=se===null?Qe.material:se,Ct=Qe.group;at.layers.test(oe.layers)&&Ha(at,Z,oe,lt,St,Ct)}}function Ha(R,Z,oe,se,J,Ve){R.onBeforeRender(M,Z,oe,se,J,Ve),R.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,R.matrixWorld),R.normalMatrix.getNormalMatrix(R.modelViewMatrix),J.transparent===!0&&J.side===hs&&J.forceSinglePass===!1?(J.side=Pr,J.needsUpdate=!0,M.renderBufferDirect(oe,Z,se,J,R,Ve),J.side=$s,J.needsUpdate=!0,M.renderBufferDirect(oe,Z,se,J,R,Ve),J.side=hs):M.renderBufferDirect(oe,Z,se,J,R,Ve),R.onAfterRender(M,Z,oe,se,J,Ve)}function po(R,Z,oe){Z.isScene!==!0&&(Z=Pe);let se=nt.get(R),J=v.state.lights,Ve=v.state.shadowsArray,Qe=J.state.version,at=Me.getParameters(R,J.state,Ve,Z,oe),lt=Me.getProgramCacheKey(at),St=se.programs;se.environment=R.isMeshStandardMaterial?Z.environment:null,se.fog=Z.fog,se.envMap=(R.isMeshStandardMaterial?A:N).get(R.envMap||se.environment),se.envMapRotation=se.environment!==null&&R.envMap===null?Z.environmentRotation:R.envMapRotation,St===void 0&&(R.addEventListener("dispose",dt),St=new Map,se.programs=St);let Ct=St.get(lt);if(Ct!==void 0){if(se.currentProgram===Ct&&se.lightsStateVersion===Qe)return Up(R,at),Ct}else at.uniforms=Me.getUniforms(R),R.onBeforeCompile(at,M),Ct=Me.acquireProgram(at,lt),St.set(lt,Ct),se.uniforms=at.uniforms;let vt=se.uniforms;return(!R.isShaderMaterial&&!R.isRawShaderMaterial||R.clipping===!0)&&(vt.clippingPlanes=xt.uniform),Up(R,at),se.needsLights=c_(R),se.lightsStateVersion=Qe,se.needsLights&&(vt.ambientLightColor.value=J.state.ambient,vt.lightProbe.value=J.state.probe,vt.directionalLights.value=J.state.directional,vt.directionalLightShadows.value=J.state.directionalShadow,vt.spotLights.value=J.state.spot,vt.spotLightShadows.value=J.state.spotShadow,vt.rectAreaLights.value=J.state.rectArea,vt.ltc_1.value=J.state.rectAreaLTC1,vt.ltc_2.value=J.state.rectAreaLTC2,vt.pointLights.value=J.state.point,vt.pointLightShadows.value=J.state.pointShadow,vt.hemisphereLights.value=J.state.hemi,vt.directionalShadowMap.value=J.state.directionalShadowMap,vt.directionalShadowMatrix.value=J.state.directionalShadowMatrix,vt.spotShadowMap.value=J.state.spotShadowMap,vt.spotLightMatrix.value=J.state.spotLightMatrix,vt.spotLightMap.value=J.state.spotLightMap,vt.pointShadowMap.value=J.state.pointShadowMap,vt.pointShadowMatrix.value=J.state.pointShadowMatrix),se.currentProgram=Ct,se.uniformsList=null,Ct}function Rp(R){if(R.uniformsList===null){let Z=R.currentProgram.getUniforms();R.uniformsList=Nd.seqWithValue(Z.seq,R.uniforms)}return R.uniformsList}function Up(R,Z){let oe=nt.get(R);oe.outputColorSpace=Z.outputColorSpace,oe.batching=Z.batching,oe.batchingColor=Z.batchingColor,oe.instancing=Z.instancing,oe.instancingColor=Z.instancingColor,oe.instancingMorph=Z.instancingMorph,oe.skinning=Z.skinning,oe.morphTargets=Z.morphTargets,oe.morphNormals=Z.morphNormals,oe.morphColors=Z.morphColors,oe.morphTargetsCount=Z.morphTargetsCount,oe.numClippingPlanes=Z.numClippingPlanes,oe.numIntersection=Z.numClipIntersection,oe.vertexAlphas=Z.vertexAlphas,oe.vertexTangents=Z.vertexTangents,oe.toneMapping=Z.toneMapping}function Fp(R,Z,oe,se,J){Z.isScene!==!0&&(Z=Pe),st.resetTextureUnits();let Ve=Z.fog,Qe=se.isMeshStandardMaterial?Z.environment:null,at=F===null?M.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:Bi,lt=(se.isMeshStandardMaterial?A:N).get(se.envMap||Qe),St=se.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,Ct=!!oe.attributes.tangent&&(!!se.normalMap||se.anisotropy>0),vt=!!oe.morphAttributes.position,dn=!!oe.morphAttributes.normal,Gn=!!oe.morphAttributes.color,Wn=kc;se.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(Wn=M.toneMapping);let nr=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,mn=nr!==void 0?nr.length:0,ht=nt.get(se),di=v.state.lights;if(k===!0&&(q===!0||R!==U)){let rr=R===U&&se.id===$;xt.setState(se,R,rr)}let fn=!1;se.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==di.state.version||ht.outputColorSpace!==at||J.isBatchedMesh&&ht.batching===!1||!J.isBatchedMesh&&ht.batching===!0||J.isBatchedMesh&&ht.batchingColor===!0&&J.colorTexture===null||J.isBatchedMesh&&ht.batchingColor===!1&&J.colorTexture!==null||J.isInstancedMesh&&ht.instancing===!1||!J.isInstancedMesh&&ht.instancing===!0||J.isSkinnedMesh&&ht.skinning===!1||!J.isSkinnedMesh&&ht.skinning===!0||J.isInstancedMesh&&ht.instancingColor===!0&&J.instanceColor===null||J.isInstancedMesh&&ht.instancingColor===!1&&J.instanceColor!==null||J.isInstancedMesh&&ht.instancingMorph===!0&&J.morphTexture===null||J.isInstancedMesh&&ht.instancingMorph===!1&&J.morphTexture!==null||ht.envMap!==lt||se.fog===!0&&ht.fog!==Ve||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==xt.numPlanes||ht.numIntersection!==xt.numIntersection)||ht.vertexAlphas!==St||ht.vertexTangents!==Ct||ht.morphTargets!==vt||ht.morphNormals!==dn||ht.morphColors!==Gn||ht.toneMapping!==Wn||ht.morphTargetsCount!==mn)&&(fn=!0):(fn=!0,ht.__version=se.version);let ir=ht.currentProgram;fn===!0&&(ir=po(se,Z,J));let ja=!1,Xi=!1,Ga=!1,Xn=ir.getUniforms(),bs=ht.uniforms;if(Ce.useProgram(ir.program)&&(ja=!0,Xi=!0,Ga=!0),se.id!==$&&($=se.id,Xi=!0),ja||U!==R){Xn.setValue(O,"projectionMatrix",R.projectionMatrix),Xn.setValue(O,"viewMatrix",R.matrixWorldInverse);let rr=Xn.map.cameraPosition;rr!==void 0&&rr.setValue(O,ae.setFromMatrixPosition(R.matrixWorld)),ut.logarithmicDepthBuffer&&Xn.setValue(O,"logDepthBufFC",2/(Math.log(R.far+1)/Math.LN2)),(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial)&&Xn.setValue(O,"isOrthographic",R.isOrthographicCamera===!0),U!==R&&(U=R,Xi=!0,Ga=!0)}if(J.isSkinnedMesh){Xn.setOptional(O,J,"bindMatrix"),Xn.setOptional(O,J,"bindMatrixInverse");let rr=J.skeleton;rr&&(rr.boneTexture===null&&rr.computeBoneTexture(),Xn.setValue(O,"boneTexture",rr.boneTexture,st))}J.isBatchedMesh&&(Xn.setOptional(O,J,"batchingTexture"),Xn.setValue(O,"batchingTexture",J._matricesTexture,st),Xn.setOptional(O,J,"batchingIdTexture"),Xn.setValue(O,"batchingIdTexture",J._indirectTexture,st),Xn.setOptional(O,J,"batchingColorTexture"),J._colorsTexture!==null&&Xn.setValue(O,"batchingColorTexture",J._colorsTexture,st));let au=oe.morphAttributes;if((au.position!==void 0||au.normal!==void 0||au.color!==void 0)&&Rt.update(J,oe,ir),(Xi||ht.receiveShadow!==J.receiveShadow)&&(ht.receiveShadow=J.receiveShadow,Xn.setValue(O,"receiveShadow",J.receiveShadow)),se.isMeshGouraudMaterial&&se.envMap!==null&&(bs.envMap.value=lt,bs.flipEnvMap.value=lt.isCubeTexture&&lt.isRenderTargetTexture===!1?-1:1),se.isMeshStandardMaterial&&se.envMap===null&&Z.environment!==null&&(bs.envMapIntensity.value=Z.environmentIntensity),Xi&&(Xn.setValue(O,"toneMappingExposure",M.toneMappingExposure),ht.needsLights&&a_(bs,Ga),Ve&&se.fog===!0&&qe.refreshFogUniforms(bs,Ve),qe.refreshMaterialUniforms(bs,se,Q,W,v.state.transmissionRenderTarget[R.id]),Nd.upload(O,Rp(ht),bs,st)),se.isShaderMaterial&&se.uniformsNeedUpdate===!0&&(Nd.upload(O,Rp(ht),bs,st),se.uniformsNeedUpdate=!1),se.isSpriteMaterial&&Xn.setValue(O,"center",J.center),Xn.setValue(O,"modelViewMatrix",J.modelViewMatrix),Xn.setValue(O,"normalMatrix",J.normalMatrix),Xn.setValue(O,"modelMatrix",J.matrixWorld),se.isShaderMaterial||se.isRawShaderMaterial){let rr=se.uniformsGroups;for(let Jc=0,l_=rr.length;Jc<l_;Jc++){let uf=rr[Jc];An.update(uf,ir),An.bind(uf,ir)}}return ir}function a_(R,Z){R.ambientLightColor.needsUpdate=Z,R.lightProbe.needsUpdate=Z,R.directionalLights.needsUpdate=Z,R.directionalLightShadows.needsUpdate=Z,R.pointLights.needsUpdate=Z,R.pointLightShadows.needsUpdate=Z,R.spotLights.needsUpdate=Z,R.spotLightShadows.needsUpdate=Z,R.rectAreaLights.needsUpdate=Z,R.hemisphereLights.needsUpdate=Z}function c_(R){return R.isMeshLambertMaterial||R.isMeshToonMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isShadowMaterial||R.isShaderMaterial&&R.lights===!0}this.getActiveCubeFace=function(){return H},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(R,Z,oe){nt.get(R.texture).__webglTexture=Z,nt.get(R.depthTexture).__webglTexture=oe;let se=nt.get(R);se.__hasExternalTextures=!0,se.__autoAllocateDepthBuffer=oe===void 0,se.__autoAllocateDepthBuffer||At.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),se.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(R,Z){let oe=nt.get(R);oe.__webglFramebuffer=Z,oe.__useDefaultFramebuffer=Z===void 0},this.setRenderTarget=function(R,Z=0,oe=0){F=R,H=Z,P=oe;let se=!0,J=null,Ve=!1,Qe=!1;if(R){let lt=nt.get(R);lt.__useDefaultFramebuffer!==void 0?(Ce.bindFramebuffer(O.FRAMEBUFFER,null),se=!1):lt.__webglFramebuffer===void 0?st.setupRenderTarget(R):lt.__hasExternalTextures&&st.rebindTextures(R,nt.get(R.texture).__webglTexture,nt.get(R.depthTexture).__webglTexture);let St=R.texture;(St.isData3DTexture||St.isDataArrayTexture||St.isCompressedArrayTexture)&&(Qe=!0);let Ct=nt.get(R).__webglFramebuffer;R.isWebGLCubeRenderTarget?(Array.isArray(Ct[Z])?J=Ct[Z][oe]:J=Ct[Z],Ve=!0):R.samples>0&&st.useMultisampledRTT(R)===!1?J=nt.get(R).__webglMultisampledFramebuffer:Array.isArray(Ct)?J=Ct[oe]:J=Ct,D.copy(R.viewport),j.copy(R.scissor),le=R.scissorTest}else D.copy(Le).multiplyScalar(Q).floor(),j.copy($e).multiplyScalar(Q).floor(),le=he;if(Ce.bindFramebuffer(O.FRAMEBUFFER,J)&&se&&Ce.drawBuffers(R,J),Ce.viewport(D),Ce.scissor(j),Ce.setScissorTest(le),Ve){let lt=nt.get(R.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+Z,lt.__webglTexture,oe)}else if(Qe){let lt=nt.get(R.texture),St=Z||0;O.framebufferTextureLayer(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,lt.__webglTexture,oe||0,St)}$=-1},this.readRenderTargetPixels=function(R,Z,oe,se,J,Ve,Qe){if(!(R&&R.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let at=nt.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&Qe!==void 0&&(at=at[Qe]),at){Ce.bindFramebuffer(O.FRAMEBUFFER,at);try{let lt=R.texture,St=lt.format,Ct=lt.type;if(!ut.textureFormatReadable(St)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ut.textureTypeReadable(Ct)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=R.width-se&&oe>=0&&oe<=R.height-J&&O.readPixels(Z,oe,se,J,yt.convert(St),yt.convert(Ct),Ve)}finally{let lt=F!==null?nt.get(F).__webglFramebuffer:null;Ce.bindFramebuffer(O.FRAMEBUFFER,lt)}}},this.readRenderTargetPixelsAsync=function(R,Z,oe,se,J,Ve,Qe){return gn(this,null,function*(){if(!(R&&R.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let at=nt.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&Qe!==void 0&&(at=at[Qe]),at){Ce.bindFramebuffer(O.FRAMEBUFFER,at);try{let lt=R.texture,St=lt.format,Ct=lt.type;if(!ut.textureFormatReadable(St))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ut.textureTypeReadable(Ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Z>=0&&Z<=R.width-se&&oe>=0&&oe<=R.height-J){let vt=O.createBuffer();O.bindBuffer(O.PIXEL_PACK_BUFFER,vt),O.bufferData(O.PIXEL_PACK_BUFFER,Ve.byteLength,O.STREAM_READ),O.readPixels(Z,oe,se,J,yt.convert(St),yt.convert(Ct),0),O.flush();let dn=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);yield WZ(O,dn,4);try{O.bindBuffer(O.PIXEL_PACK_BUFFER,vt),O.getBufferSubData(O.PIXEL_PACK_BUFFER,0,Ve)}finally{O.deleteBuffer(vt),O.deleteSync(dn)}return Ve}}finally{let lt=F!==null?nt.get(F).__webglFramebuffer:null;Ce.bindFramebuffer(O.FRAMEBUFFER,lt)}}})},this.copyFramebufferToTexture=function(R,Z=null,oe=0){R.isTexture!==!0&&(Pd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Z=arguments[0]||null,R=arguments[1]);let se=Math.pow(2,-oe),J=Math.floor(R.image.width*se),Ve=Math.floor(R.image.height*se),Qe=Z!==null?Z.x:0,at=Z!==null?Z.y:0;st.setTexture2D(R,0),O.copyTexSubImage2D(O.TEXTURE_2D,oe,0,0,Qe,at,J,Ve),Ce.unbindTexture()},this.copyTextureToTexture=function(R,Z,oe=null,se=null,J=0){R.isTexture!==!0&&(Pd("WebGLRenderer: copyTextureToTexture function signature has changed."),se=arguments[0]||null,R=arguments[1],Z=arguments[2],J=arguments[3]||0,oe=null);let Ve,Qe,at,lt,St,Ct;oe!==null?(Ve=oe.max.x-oe.min.x,Qe=oe.max.y-oe.min.y,at=oe.min.x,lt=oe.min.y):(Ve=R.image.width,Qe=R.image.height,at=0,lt=0),se!==null?(St=se.x,Ct=se.y):(St=0,Ct=0);let vt=yt.convert(Z.format),dn=yt.convert(Z.type);st.setTexture2D(Z,0),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,Z.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,Z.unpackAlignment);let Gn=O.getParameter(O.UNPACK_ROW_LENGTH),Wn=O.getParameter(O.UNPACK_IMAGE_HEIGHT),nr=O.getParameter(O.UNPACK_SKIP_PIXELS),mn=O.getParameter(O.UNPACK_SKIP_ROWS),ht=O.getParameter(O.UNPACK_SKIP_IMAGES),di=R.isCompressedTexture?R.mipmaps[J]:R.image;O.pixelStorei(O.UNPACK_ROW_LENGTH,di.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,di.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,at),O.pixelStorei(O.UNPACK_SKIP_ROWS,lt),R.isDataTexture?O.texSubImage2D(O.TEXTURE_2D,J,St,Ct,Ve,Qe,vt,dn,di.data):R.isCompressedTexture?O.compressedTexSubImage2D(O.TEXTURE_2D,J,St,Ct,di.width,di.height,vt,di.data):O.texSubImage2D(O.TEXTURE_2D,J,St,Ct,Ve,Qe,vt,dn,di),O.pixelStorei(O.UNPACK_ROW_LENGTH,Gn),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Wn),O.pixelStorei(O.UNPACK_SKIP_PIXELS,nr),O.pixelStorei(O.UNPACK_SKIP_ROWS,mn),O.pixelStorei(O.UNPACK_SKIP_IMAGES,ht),J===0&&Z.generateMipmaps&&O.generateMipmap(O.TEXTURE_2D),Ce.unbindTexture()},this.copyTextureToTexture3D=function(R,Z,oe=null,se=null,J=0){R.isTexture!==!0&&(Pd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),oe=arguments[0]||null,se=arguments[1]||null,R=arguments[2],Z=arguments[3],J=arguments[4]||0);let Ve,Qe,at,lt,St,Ct,vt,dn,Gn,Wn=R.isCompressedTexture?R.mipmaps[J]:R.image;oe!==null?(Ve=oe.max.x-oe.min.x,Qe=oe.max.y-oe.min.y,at=oe.max.z-oe.min.z,lt=oe.min.x,St=oe.min.y,Ct=oe.min.z):(Ve=Wn.width,Qe=Wn.height,at=Wn.depth,lt=0,St=0,Ct=0),se!==null?(vt=se.x,dn=se.y,Gn=se.z):(vt=0,dn=0,Gn=0);let nr=yt.convert(Z.format),mn=yt.convert(Z.type),ht;if(Z.isData3DTexture)st.setTexture3D(Z,0),ht=O.TEXTURE_3D;else if(Z.isDataArrayTexture||Z.isCompressedArrayTexture)st.setTexture2DArray(Z,0),ht=O.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,Z.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,Z.unpackAlignment);let di=O.getParameter(O.UNPACK_ROW_LENGTH),fn=O.getParameter(O.UNPACK_IMAGE_HEIGHT),ir=O.getParameter(O.UNPACK_SKIP_PIXELS),ja=O.getParameter(O.UNPACK_SKIP_ROWS),Xi=O.getParameter(O.UNPACK_SKIP_IMAGES);O.pixelStorei(O.UNPACK_ROW_LENGTH,Wn.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Wn.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,lt),O.pixelStorei(O.UNPACK_SKIP_ROWS,St),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Ct),R.isDataTexture||R.isData3DTexture?O.texSubImage3D(ht,J,vt,dn,Gn,Ve,Qe,at,nr,mn,Wn.data):Z.isCompressedArrayTexture?O.compressedTexSubImage3D(ht,J,vt,dn,Gn,Ve,Qe,at,nr,Wn.data):O.texSubImage3D(ht,J,vt,dn,Gn,Ve,Qe,at,nr,mn,Wn),O.pixelStorei(O.UNPACK_ROW_LENGTH,di),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,fn),O.pixelStorei(O.UNPACK_SKIP_PIXELS,ir),O.pixelStorei(O.UNPACK_SKIP_ROWS,ja),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Xi),J===0&&Z.generateMipmaps&&O.generateMipmap(ht),Ce.unbindTexture()},this.initRenderTarget=function(R){nt.get(R).__webglFramebuffer===void 0&&st.setupRenderTarget(R)},this.initTexture=function(R){R.isCubeTexture?st.setTextureCube(R,0):R.isData3DTexture?st.setTexture3D(R,0):R.isDataArrayTexture||R.isCompressedArrayTexture?st.setTexture2DArray(R,0):st.setTexture2D(R,0),Ce.unbindTexture()},this.resetState=function(){H=0,P=0,F=null,Ce.reset(),Mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Pa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=e===SS?"display-p3":"srgb",t.unpackColorSpace=pn.workingColorSpace===Mv?"display-p3":"srgb"}};var ev=class extends ri{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new vi,this.environmentIntensity=1,this.environmentRotation=new vi,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},cp=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=UE,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Uo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Pd("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Uo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Uo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},yr=new z,lp=class i{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix4(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)yr.fromBufferAttribute(this,t),yr.applyNormalMatrix(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)yr.fromBufferAttribute(this,t),yr.transformDirection(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ps(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Sn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ps(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ps(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ps(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ps(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array),o=Sn(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new Ti(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new i(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let r=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var _N=new z,wN=new sn,xN=new sn,Bte=new z,MN=new ot,Sy=new z,Yb=new co,bN=new ot,Zb=new La,$d=class extends Jn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=bO,this.bindMatrix=new ot,this.bindMatrixInverse=new ot,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Or),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Sy),this.boundingBox.expandByPoint(Sy)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new co),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Sy),this.boundingSphere.expandByPoint(Sy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Yb.copy(this.boundingSphere),Yb.applyMatrix4(r),e.ray.intersectsSphere(Yb)!==!1&&(bN.copy(r).invert(),Zb.copy(e.ray).applyMatrix4(bN),!(this.boundingBox!==null&&Zb.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Zb)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new sn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===bO?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gZ?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let n=this.skeleton,r=this.geometry;wN.fromBufferAttribute(r.attributes.skinIndex,e),xN.fromBufferAttribute(r.attributes.skinWeight,e),_N.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){let s=xN.getComponent(o);if(s!==0){let a=wN.getComponent(o);MN.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(Bte.copy(_N).applyMatrix4(MN),s)}}return t.applyMatrix4(this.bindMatrixInverse)}},Vc=class extends ri{constructor(){super(),this.isBone=!0,this.type="Bone"}},tv=class extends Lr{constructor(e=null,t=1,n=1,r,o,s,a,c,u=tr,f=tr,h,p){super(null,s,a,c,u,f,r,o,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},EN=new ot,Vte=new ot,qd=class i{constructor(e=[],t=[]){this.uuid=Uo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new ot)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let n=new ot;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:Vte;EN.multiplyMatrices(a,t[o]),EN.toArray(n,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new i(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let n=new tv(t,e,e,Ro,ms);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let o=e.bones[n],s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Vc),this.bones.push(s),this.boneInverses.push(new ot().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let r=0,o=t.length;r<o;r++){let s=t[r];e.bones.push(s.uuid);let a=n[r];e.boneInverses.push(a.toArray())}return e}},$l=class extends Ti{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Ad=new ot,SN=new ot,Cy=[],CN=new Or,zte=new ot,Gh=new Jn,Wh=new co,nv=class extends Jn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new $l(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,zte)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Or),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ad),CN.copy(e.boundingBox).applyMatrix4(Ad),this.boundingBox.union(CN)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new co),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ad),Wh.copy(e.boundingSphere).applyMatrix4(Ad),this.boundingSphere.union(Wh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=n.length+1,s=e*o+1;for(let a=0;a<n.length;a++)n[a]=r[s+a]}raycast(e,t){let n=this.matrixWorld,r=this.count;if(Gh.geometry=this.geometry,Gh.material=this.material,Gh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Wh.copy(this.boundingSphere),Wh.applyMatrix4(n),e.ray.intersectsSphere(Wh)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Ad),SN.multiplyMatrices(n,Ad),Gh.matrixWorld=SN,Gh.raycast(e,Cy);for(let s=0,a=Cy.length;s<a;s++){let c=Cy[s];c.instanceId=o,c.object=this,t.push(c)}Cy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new $l(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new tv(new Float32Array(r*this.count),r,this.count,xS,ms));let o=this.morphTexture.source.data.data,s=0;for(let u=0;u<n.length;u++)s+=n[u];let a=this.geometry.morphTargetsRelative?1:1-s,c=r*e;o[c]=a,o.set(n,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};var gs=class extends ki{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},iv=new z,rv=new z,AN=new ot,$h=new La,Ay=new co,Kb=new z,TN=new z,zc=class extends ri{constructor(e=new _i,t=new gs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[0];for(let r=1,o=t.count;r<o;r++)iv.fromBufferAttribute(t,r-1),rv.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=iv.distanceTo(rv);e.setAttribute("lineDistance",new Cn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ay.copy(n.boundingSphere),Ay.applyMatrix4(r),Ay.radius+=o,e.ray.intersectsSphere(Ay)===!1)return;AN.copy(r).invert(),$h.copy(e.ray).applyMatrix4(AN);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,u=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(f!==null){let g=Math.max(0,s.start),y=Math.min(f.count,s.start+s.count);for(let x=g,v=y-1;x<v;x+=u){let _=f.getX(x),C=f.getX(x+1),M=Ty(this,e,$h,c,_,C);M&&t.push(M)}if(this.isLineLoop){let x=f.getX(y-1),v=f.getX(g),_=Ty(this,e,$h,c,x,v);_&&t.push(_)}}else{let g=Math.max(0,s.start),y=Math.min(p.count,s.start+s.count);for(let x=g,v=y-1;x<v;x+=u){let _=Ty(this,e,$h,c,x,x+1);_&&t.push(_)}if(this.isLineLoop){let x=Ty(this,e,$h,c,y-1,g);x&&t.push(x)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function Ty(i,e,t,n,r,o){let s=i.geometry.attributes.position;if(iv.fromBufferAttribute(s,r),rv.fromBufferAttribute(s,o),t.distanceSqToSegment(iv,rv,Kb,TN)>n)return;Kb.applyMatrix4(i.matrixWorld);let c=e.ray.origin.distanceTo(Kb);if(!(c<e.near||c>e.far))return{distance:c,point:TN.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,object:i}}var DN=new z,IN=new z,ql=class extends zc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[];for(let r=0,o=t.count;r<o;r+=2)DN.fromBufferAttribute(t,r),IN.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+DN.distanceTo(IN);e.setAttribute("lineDistance",new Cn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},ov=class extends zc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},Zs=class extends ki{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},RN=new ot,YE=new La,Dy=new co,Iy=new z,Hc=class extends ri{constructor(e=new _i,t=new Zs){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Dy.copy(n.boundingSphere),Dy.applyMatrix4(r),Dy.radius+=o,e.ray.intersectsSphere(Dy)===!1)return;RN.copy(r).invert(),YE.copy(e.ray).applyMatrix4(RN);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,u=n.index,h=n.attributes.position;if(u!==null){let p=Math.max(0,s.start),g=Math.min(u.count,s.start+s.count);for(let y=p,x=g;y<x;y++){let v=u.getX(y);Iy.fromBufferAttribute(h,v),UN(Iy,v,c,r,e,t,this)}}else{let p=Math.max(0,s.start),g=Math.min(h.count,s.start+s.count);for(let y=p,x=g;y<x;y++)Iy.fromBufferAttribute(h,y),UN(Iy,y,c,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function UN(i,e,t,n,r,o,s){let a=YE.distanceSqToPoint(i);if(a<t){let c=new z;YE.closestPointToPoint(i,c),c.applyMatrix4(n);let u=r.ray.origin.distanceTo(c);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:s})}}var Nr=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,r=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),o+=n.distanceTo(r),t.push(o),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n=this.getLengths(),r=0,o=n.length,s;t?s=t:s=e*n[o-1];let a=0,c=o-1,u;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),u=n[r]-s,u<0)a=r+1;else if(u>0)c=r-1;else{c=r;break}if(r=c,n[r]===s)return r/(o-1);let f=n[r],p=n[r+1]-f,g=(s-f)/p;return(r+g)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),c=t||(s.isVector2?new Ge:new z);return c.copy(a).sub(s).normalize(),c}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new z,r=[],o=[],s=[],a=new z,c=new ot;for(let g=0;g<=e;g++){let y=g/e;r[g]=this.getTangentAt(y,new z)}o[0]=new z,s[0]=new z;let u=Number.MAX_VALUE,f=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=u&&(u=f,n.set(1,0,0)),h<=u&&(u=h,n.set(0,1,0)),p<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let g=1;g<=e;g++){if(o[g]=o[g-1].clone(),s[g]=s[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();let y=Math.acos(Ai(r[g-1].dot(r[g]),-1,1));o[g].applyMatrix4(c.makeRotationAxis(a,y))}s[g].crossVectors(r[g],o[g])}if(t===!0){let g=Math.acos(Ai(o[0].dot(o[e]),-1,1));g/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(g=-g);for(let y=1;y<=e;y++)o[y].applyMatrix4(c.makeRotationAxis(r[y],g*y)),s[y].crossVectors(r[y],o[y])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},up=class extends Nr{constructor(e=0,t=0,n=1,r=1,o=0,s=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=c}getPoint(e,t=new Ge){let n=t,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,c=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let f=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=c-this.aX,g=u-this.aY;c=p*f-g*h+this.aX,u=p*h+g*f+this.aY}return n.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},ZE=class extends up{constructor(e,t,n,r,o,s){super(e,t,n,n,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function TS(){let i=0,e=0,t=0,n=0;function r(o,s,a,c){i=o,e=a,t=-3*o+3*s-2*a-c,n=2*o-2*s+a+c}return{initCatmullRom:function(o,s,a,c,u){r(s,a,u*(a-o),u*(c-s))},initNonuniformCatmullRom:function(o,s,a,c,u,f,h){let p=(s-o)/u-(a-o)/(u+f)+(a-s)/f,g=(a-s)/f-(c-s)/(f+h)+(c-a)/h;p*=f,g*=f,r(s,a,p,g)},calc:function(o){let s=o*o,a=s*o;return i+e*o+t*s+n*a}}}var Ry=new z,Jb=new TS,Qb=new TS,eE=new TS,KE=class extends Nr{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new z){let n=t,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),c=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:c===0&&a===o-1&&(a=o-2,c=1);let u,f;this.closed||a>0?u=r[(a-1)%o]:(Ry.subVectors(r[0],r[1]).add(r[0]),u=Ry);let h=r[a%o],p=r[(a+1)%o];if(this.closed||a+2<o?f=r[(a+2)%o]:(Ry.subVectors(r[o-1],r[o-2]).add(r[o-1]),f=Ry),this.curveType==="centripetal"||this.curveType==="chordal"){let g=this.curveType==="chordal"?.5:.25,y=Math.pow(u.distanceToSquared(h),g),x=Math.pow(h.distanceToSquared(p),g),v=Math.pow(p.distanceToSquared(f),g);x<1e-4&&(x=1),y<1e-4&&(y=x),v<1e-4&&(v=x),Jb.initNonuniformCatmullRom(u.x,h.x,p.x,f.x,y,x,v),Qb.initNonuniformCatmullRom(u.y,h.y,p.y,f.y,y,x,v),eE.initNonuniformCatmullRom(u.z,h.z,p.z,f.z,y,x,v)}else this.curveType==="catmullrom"&&(Jb.initCatmullRom(u.x,h.x,p.x,f.x,this.tension),Qb.initCatmullRom(u.y,h.y,p.y,f.y,this.tension),eE.initCatmullRom(u.z,h.z,p.z,f.z,this.tension));return n.set(Jb.calc(c),Qb.calc(c),eE.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(new z().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function FN(i,e,t,n,r){let o=(n-e)*.5,s=(r-t)*.5,a=i*i,c=i*a;return(2*t-2*n+o+s)*c+(-3*t+3*n-2*o-s)*a+o*i+t}function Hte(i,e){let t=1-i;return t*t*e}function jte(i,e){return 2*(1-i)*i*e}function Gte(i,e){return i*i*e}function Qh(i,e,t,n){return Hte(i,e)+jte(i,t)+Gte(i,n)}function Wte(i,e){let t=1-i;return t*t*t*e}function $te(i,e){let t=1-i;return 3*t*t*i*e}function qte(i,e){return 3*(1-i)*i*i*e}function Xte(i,e){return i*i*i*e}function ep(i,e,t,n,r){return Wte(i,e)+$te(i,t)+qte(i,n)+Xte(i,r)}var sv=class extends Nr{constructor(e=new Ge,t=new Ge,n=new Ge,r=new Ge){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Ge){let n=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(ep(e,r.x,o.x,s.x,a.x),ep(e,r.y,o.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},JE=class extends Nr{constructor(e=new z,t=new z,n=new z,r=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new z){let n=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(ep(e,r.x,o.x,s.x,a.x),ep(e,r.y,o.y,s.y,a.y),ep(e,r.z,o.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},av=class extends Nr{constructor(e=new Ge,t=new Ge){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ge){let n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ge){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QE=class extends Nr{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){let n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},cv=class extends Nr{constructor(e=new Ge,t=new Ge,n=new Ge){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ge){let n=t,r=this.v0,o=this.v1,s=this.v2;return n.set(Qh(e,r.x,o.x,s.x),Qh(e,r.y,o.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},eS=class extends Nr{constructor(e=new z,t=new z,n=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new z){let n=t,r=this.v0,o=this.v1,s=this.v2;return n.set(Qh(e,r.x,o.x,s.x),Qh(e,r.y,o.y,s.y),Qh(e,r.z,o.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},lv=class extends Nr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ge){let n=t,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,c=r[s===0?s:s-1],u=r[s],f=r[s>r.length-2?r.length-1:s+1],h=r[s>r.length-3?r.length-1:s+2];return n.set(FN(a,c.x,u.x,f.x,h.x),FN(a,c.y,u.y,f.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let r=e.points[t];this.points.push(new Ge().fromArray(r))}return this}},PN=Object.freeze({__proto__:null,ArcCurve:ZE,CatmullRomCurve3:KE,CubicBezierCurve:sv,CubicBezierCurve3:JE,EllipseCurve:up,LineCurve:av,LineCurve3:QE,QuadraticBezierCurve:cv,QuadraticBezierCurve3:eS,SplineCurve:lv}),tS=class extends Nr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new PN[n](t,e))}return this}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=n){let s=r[o]-n,a=this.curves[o],c=a.getLength(),u=c===0?0:1-s/c;return a.getPointAt(u,t)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],n;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(a);for(let u=0;u<c.length;u++){let f=c[u];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let r=e.curves[t];this.curves.push(new PN[r.type]().fromJSON(r))}return this}},uv=class extends tS{constructor(e){super(),this.type="Path",this.currentPoint=new Ge,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new av(this.currentPoint.clone(),new Ge(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let o=new cv(this.currentPoint.clone(),new Ge(e,t),new Ge(n,r));return this.curves.push(o),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,o,s){let a=new sv(this.currentPoint.clone(),new Ge(e,t),new Ge(n,r),new Ge(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),n=new lv(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,o,s){let a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,n,r,o,s),this}absarc(e,t,n,r,o,s){return this.absellipse(e,t,n,n,r,o,s),this}ellipse(e,t,n,r,o,s,a,c){let u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,n,r,o,s,a,c),this}absellipse(e,t,n,r,o,s,a,c){let u=new up(e,t,n,r,o,s,a,c);if(this.curves.length>0){let h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);let f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};var dp=class extends uv{constructor(e){super(e),this.uuid=Uo(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let r=e.holes[t];this.holes.push(new uv().fromJSON(r))}return this}},Yte={triangulate:function(i,e,t=2){let n=e&&e.length,r=n?e[0]*t:i.length,o=u3(i,0,r,t,!0),s=[];if(!o||o.next===o.prev)return s;let a,c,u,f,h,p,g;if(n&&(o=ene(i,e,o,t)),i.length>80*t){a=u=i[0],c=f=i[1];for(let y=t;y<r;y+=t)h=i[y],p=i[y+1],h<a&&(a=h),p<c&&(c=p),h>u&&(u=h),p>f&&(f=p);g=Math.max(u-a,f-c),g=g!==0?32767/g:0}return fp(o,s,t,a,c,g,0),s}};function u3(i,e,t,n,r){let o,s;if(r===dne(i,e,t,n)>0)for(o=e;o<t;o+=n)s=ON(o,i[o],i[o+1],s);else for(o=t-n;o>=e;o-=n)s=ON(o,i[o],i[o+1],s);return s&&Ev(s,s.next)&&(pp(s),s=s.next),s}function Xl(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Ev(t,t.next)||Kn(t.prev,t,t.next)===0)){if(pp(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function fp(i,e,t,n,r,o,s){if(!i)return;!s&&o&&one(i,n,r,o);let a=i,c,u;for(;i.prev!==i.next;){if(c=i.prev,u=i.next,o?Kte(i,n,r,o):Zte(i)){e.push(c.i/t|0),e.push(i.i/t|0),e.push(u.i/t|0),pp(i),i=u.next,a=u.next;continue}if(i=u,i===a){s?s===1?(i=Jte(Xl(i),e,t),fp(i,e,t,n,r,o,2)):s===2&&Qte(i,e,t,n,r,o):fp(Xl(i),e,t,n,r,o,1);break}}}function Zte(i){let e=i.prev,t=i,n=i.next;if(Kn(e,t,n)>=0)return!1;let r=e.x,o=t.x,s=n.x,a=e.y,c=t.y,u=n.y,f=r<o?r<s?r:s:o<s?o:s,h=a<c?a<u?a:u:c<u?c:u,p=r>o?r>s?r:s:o>s?o:s,g=a>c?a>u?a:u:c>u?c:u,y=n.next;for(;y!==e;){if(y.x>=f&&y.x<=p&&y.y>=h&&y.y<=g&&Rd(r,a,o,c,s,u,y.x,y.y)&&Kn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function Kte(i,e,t,n){let r=i.prev,o=i,s=i.next;if(Kn(r,o,s)>=0)return!1;let a=r.x,c=o.x,u=s.x,f=r.y,h=o.y,p=s.y,g=a<c?a<u?a:u:c<u?c:u,y=f<h?f<p?f:p:h<p?h:p,x=a>c?a>u?a:u:c>u?c:u,v=f>h?f>p?f:p:h>p?h:p,_=nS(g,y,e,t,n),C=nS(x,v,e,t,n),M=i.prevZ,S=i.nextZ;for(;M&&M.z>=_&&S&&S.z<=C;){if(M.x>=g&&M.x<=x&&M.y>=y&&M.y<=v&&M!==r&&M!==s&&Rd(a,f,c,h,u,p,M.x,M.y)&&Kn(M.prev,M,M.next)>=0||(M=M.prevZ,S.x>=g&&S.x<=x&&S.y>=y&&S.y<=v&&S!==r&&S!==s&&Rd(a,f,c,h,u,p,S.x,S.y)&&Kn(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;M&&M.z>=_;){if(M.x>=g&&M.x<=x&&M.y>=y&&M.y<=v&&M!==r&&M!==s&&Rd(a,f,c,h,u,p,M.x,M.y)&&Kn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;S&&S.z<=C;){if(S.x>=g&&S.x<=x&&S.y>=y&&S.y<=v&&S!==r&&S!==s&&Rd(a,f,c,h,u,p,S.x,S.y)&&Kn(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function Jte(i,e,t){let n=i;do{let r=n.prev,o=n.next.next;!Ev(r,o)&&d3(r,n,n.next,o)&&hp(r,o)&&hp(o,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(o.i/t|0),pp(n),pp(n.next),n=i=o),n=n.next}while(n!==i);return Xl(n)}function Qte(i,e,t,n,r,o){let s=i;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&cne(s,a)){let c=f3(s,a);s=Xl(s,s.next),c=Xl(c,c.next),fp(s,e,t,n,r,o,0),fp(c,e,t,n,r,o,0);return}a=a.next}s=s.next}while(s!==i)}function ene(i,e,t,n){let r=[],o,s,a,c,u;for(o=0,s=e.length;o<s;o++)a=e[o]*n,c=o<s-1?e[o+1]*n:i.length,u=u3(i,a,c,n,!1),u===u.next&&(u.steiner=!0),r.push(ane(u));for(r.sort(tne),o=0;o<r.length;o++)t=nne(r[o],t);return t}function tne(i,e){return i.x-e.x}function nne(i,e){let t=ine(i,e);if(!t)return e;let n=f3(t,i);return Xl(n,n.next),Xl(t,t.next)}function ine(i,e){let t=e,n=-1/0,r,o=i.x,s=i.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){let p=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=o&&p>n&&(n=p,r=t.x<t.next.x?t:t.next,p===o))return r}t=t.next}while(t!==e);if(!r)return null;let a=r,c=r.x,u=r.y,f=1/0,h;t=r;do o>=t.x&&t.x>=c&&o!==t.x&&Rd(s<u?o:n,s,c,u,s<u?n:o,s,t.x,t.y)&&(h=Math.abs(s-t.y)/(o-t.x),hp(t,i)&&(h<f||h===f&&(t.x>r.x||t.x===r.x&&rne(r,t)))&&(r=t,f=h)),t=t.next;while(t!==a);return r}function rne(i,e){return Kn(i.prev,i,e.prev)<0&&Kn(e.next,i,i.next)<0}function one(i,e,t,n){let r=i;do r.z===0&&(r.z=nS(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,sne(r)}function sne(i){let e,t,n,r,o,s,a,c,u=1;do{for(t=i,i=null,o=null,s=0;t;){for(s++,n=t,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(c=u;a>0||c>0&&n;)a!==0&&(c===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,c--),o?o.nextZ=r:i=r,r.prevZ=o,o=r;t=n}o.nextZ=null,u*=2}while(s>1);return i}function nS(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function ane(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Rd(i,e,t,n,r,o,s,a){return(r-s)*(e-a)>=(i-s)*(o-a)&&(i-s)*(n-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(r-s)*(n-a)}function cne(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!lne(i,e)&&(hp(i,e)&&hp(e,i)&&une(i,e)&&(Kn(i.prev,i,e.prev)||Kn(i,e.prev,e))||Ev(i,e)&&Kn(i.prev,i,i.next)>0&&Kn(e.prev,e,e.next)>0)}function Kn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Ev(i,e){return i.x===e.x&&i.y===e.y}function d3(i,e,t,n){let r=Fy(Kn(i,e,t)),o=Fy(Kn(i,e,n)),s=Fy(Kn(t,n,i)),a=Fy(Kn(t,n,e));return!!(r!==o&&s!==a||r===0&&Uy(i,t,e)||o===0&&Uy(i,n,e)||s===0&&Uy(t,i,n)||a===0&&Uy(t,e,n))}function Uy(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Fy(i){return i>0?1:i<0?-1:0}function lne(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&d3(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function hp(i,e){return Kn(i.prev,i,i.next)<0?Kn(i,e,i.next)>=0&&Kn(i,i.prev,e)>=0:Kn(i,e,i.prev)<0||Kn(i,i.next,e)<0}function une(i,e){let t=i,n=!1,r=(i.x+e.x)/2,o=(i.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function f3(i,e){let t=new iS(i.i,i.x,i.y),n=new iS(e.i,e.x,e.y),r=i.next,o=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,o.next=n,n.prev=o,n}function ON(i,e,t,n){let r=new iS(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function pp(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function iS(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function dne(i,e,t,n){let r=0;for(let o=e,s=t-n;o<t;o+=n)r+=(i[s]-i[o])*(i[o+1]+i[s+1]),s=o;return r}var Gl=class i{static area(e){let t=e.length,n=0;for(let r=t-1,o=0;o<t;r=o++)n+=e[r].x*e[o].y-e[o].x*e[r].y;return n*.5}static isClockWise(e){return i.area(e)<0}static triangulateShape(e,t){let n=[],r=[],o=[];NN(e),LN(n,e);let s=e.length;t.forEach(NN);for(let c=0;c<t.length;c++)r.push(s),s+=t[c].length,LN(n,t[c]);let a=Yte.triangulate(n,r);for(let c=0;c<a.length;c+=3)o.push(a.slice(c,c+3));return o}};function NN(i){let e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function LN(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}var dv=class i extends _i{constructor(e=new dp([new Ge(0,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let n=[],r=[],o=[],s=[],a=0,c=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,c,f),a+=c,c=0;this.setIndex(n),this.setAttribute("position",new Cn(r,3)),this.setAttribute("normal",new Cn(o,3)),this.setAttribute("uv",new Cn(s,2));function u(f){let h=r.length/3,p=f.extractPoints(t),g=p.shape,y=p.holes;Gl.isClockWise(g)===!1&&(g=g.reverse());for(let v=0,_=y.length;v<_;v++){let C=y[v];Gl.isClockWise(C)===!0&&(y[v]=C.reverse())}let x=Gl.triangulateShape(g,y);for(let v=0,_=y.length;v<_;v++){let C=y[v];g=g.concat(C)}for(let v=0,_=g.length;v<_;v++){let C=g[v];r.push(C.x,C.y,0),o.push(0,0,1),s.push(C.x,C.y)}for(let v=0,_=x.length;v<_;v++){let C=x[v],M=C[0]+h,S=C[1]+h,H=C[2]+h;n.push(M,S,H),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return fne(t,e)}static fromJSON(e,t){let n=[];for(let r=0,o=e.shapes.length;r<o;r++){let s=t[e.shapes[r]];n.push(s)}return new i(n,e.curveSegments)}};function fne(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){let r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}var Xd=class extends ki{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xv,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new vi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},lo=class extends Xd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ge(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ai(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},jc=class extends ki{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rt(16777215),this.specular=new rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xv,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new vi,this.combine=vv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var fv=class extends ki{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xv,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new vi,this.combine=vv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};function Py(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function hne(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function pne(i){function e(r,o){return i[r]-i[o]}let t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function kN(i,e,t){let n=i.length,r=new i.constructor(n);for(let o=0,s=0;s!==n;++o){let a=t[o]*e;for(let c=0;c!==e;++c)r[s++]=i[a+c]}return r}function h3(i,e,t,n){let r=1,o=i[0];for(;o!==void 0&&o[n]===void 0;)o=i[r++];if(o===void 0)return;let s=o[n];if(s!==void 0)if(Array.isArray(s))do s=o[n],s!==void 0&&(e.push(o.time),t.push.apply(t,s)),o=i[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[n],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=i[r++];while(o!==void 0);else do s=o[n],s!==void 0&&(e.push(o.time),t.push(s)),o=i[r++];while(o!==void 0)}var Gc=class{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],o=t[n-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<o)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(o=r,r=t[++n],e<r)break t}s=t.length;break n}if(!(e>=o)){let a=t[1];e<a&&(n=2,o=a);for(let c=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(r=o,o=t[--n-1],e>=o)break t}s=n,n=0;break n}break e}for(;n<s;){let a=n+s>>>1;e<t[a]?s=a:n=a+1}if(r=t[n],o=t[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=n[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},rS=class extends Gc{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:SO,endingEnd:SO}}intervalChanged_(e,t,n){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],c=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case CO:o=e,a=2*t-n;break;case AO:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=n}if(c===void 0)switch(this.getSettings_().endingEnd){case CO:s=e,c=2*n-t;break;case AO:s=1,c=n+r[1]-r[0];break;default:s=e-1,c=t}let u=(n-t)*.5,f=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(c-n),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(e,t,n,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,u=c-a,f=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,g=this._weightNext,y=(n-t)/(r-t),x=y*y,v=x*y,_=-p*v+2*p*x-p*y,C=(1+p)*v+(-1.5-2*p)*x+(-.5+p)*y+1,M=(-1-g)*v+(1.5+g)*x+.5*y,S=g*v-g*x;for(let H=0;H!==a;++H)o[H]=_*s[f+H]+C*s[u+H]+M*s[c+H]+S*s[h+H];return o}},oS=class extends Gc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,u=c-a,f=(n-t)/(r-t),h=1-f;for(let p=0;p!==a;++p)o[p]=s[u+p]*h+s[c+p]*f;return o}},sS=class extends Gc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Po=class{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Py(t,this.TimeBufferType),this.values=Py(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Py(e.times,Array),values:Py(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new sS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new oS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new rS(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case zd:t=this.InterpolantFactoryMethodDiscrete;break;case Hd:t=this.InterpolantFactoryMethodLinear;break;case Eb:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return zd;case this.InterpolantFactoryMethodLinear:return Hd;case this.InterpolantFactoryMethodSmooth:return Eb}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,o=0,s=r-1;for(;o!==r&&n[o]<e;)++o;for(;s!==-1&&n[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=n.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let c=n[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,s),e=!1;break}s=c}if(r!==void 0&&hne(r))for(let a=0,c=r.length;a!==c;++a){let u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Eb,o=e.length-1,s=1;for(let a=1;a<o;++a){let c=!1,u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)c=!0;else{let h=a*n,p=h-n,g=h+n;for(let y=0;y!==n;++y){let x=t[h+y];if(x!==t[p+y]||x!==t[g+y]){c=!0;break}}}if(c){if(a!==s){e[s]=e[a];let h=a*n,p=s*n;for(let g=0;g!==n;++g)t[p+g]=t[h+g]}++s}}if(o>0){e[s]=e[o];for(let a=o*n,c=s*n,u=0;u!==n;++u)t[c+u]=t[a+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};Po.prototype.TimeBufferType=Float32Array;Po.prototype.ValueBufferType=Float32Array;Po.prototype.DefaultInterpolation=Hd;var Wc=class extends Po{constructor(e,t,n){super(e,t,n)}};Wc.prototype.ValueTypeName="bool";Wc.prototype.ValueBufferType=Array;Wc.prototype.DefaultInterpolation=zd;Wc.prototype.InterpolantFactoryMethodLinear=void 0;Wc.prototype.InterpolantFactoryMethodSmooth=void 0;var hv=class extends Po{};hv.prototype.ValueTypeName="color";var ys=class extends Po{};ys.prototype.ValueTypeName="number";var aS=class extends Gc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(n-t)/(r-t),u=e*a;for(let f=u+a;u!==f;u+=4)Qn.slerpFlat(o,0,s,u-a,s,u,c);return o}},Oo=class extends Po{InterpolantFactoryMethodLinear(e){return new aS(this.times,this.values,this.getValueSize(),e)}};Oo.prototype.ValueTypeName="quaternion";Oo.prototype.InterpolantFactoryMethodSmooth=void 0;var $c=class extends Po{constructor(e,t,n){super(e,t,n)}};$c.prototype.ValueTypeName="string";$c.prototype.ValueBufferType=Array;$c.prototype.DefaultInterpolation=zd;$c.prototype.InterpolantFactoryMethodLinear=void 0;$c.prototype.InterpolantFactoryMethodSmooth=void 0;var vs=class extends Po{};vs.prototype.ValueTypeName="vector";var Yd=class{constructor(e="",t=-1,n=[],r=yZ){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Uo(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(gne(n[s]).scale(r));let o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=n.length;o!==s;++o)t.push(Po.toJSON(n[o]));return r}static CreateFromMorphTargetSequence(e,t,n,r){let o=t.length,s=[];for(let a=0;a<o;a++){let c=[],u=[];c.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);let f=pne(c);c=kN(c,1,f),u=kN(u,1,f),!r&&c[0]===0&&(c.push(o),u.push(u[0])),s.push(new ys(".morphTargetInfluences["+t[a].name+"]",c,u).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){let r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){let u=e[a],f=u.name.match(o);if(f&&f.length>1){let h=f[1],p=r[h];p||(r[h]=p=[]),p.push(u)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(h,p,g,y,x){if(g.length!==0){let v=[],_=[];h3(g,v,_,y),v.length!==0&&x.push(new h(p,v,_))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,c=e.length||-1,u=e.hierarchy||[];for(let h=0;h<u.length;h++){let p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){let g={},y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let x=0;x<p[y].morphTargets.length;x++)g[p[y].morphTargets[x]]=-1;for(let x in g){let v=[],_=[];for(let C=0;C!==p[y].morphTargets.length;++C){let M=p[y];v.push(M.time),_.push(M.morphTarget===x?1:0)}r.push(new ys(".morphTargetInfluence["+x+"]",v,_))}c=g.length*s}else{let g=".bones["+t[h].name+"]";n(vs,g+".position",p,"pos",r),n(Oo,g+".quaternion",p,"rot",r),n(vs,g+".scale",p,"scl",r)}}return r.length===0?null:new this(o,c,r,a)}resetDuration(){let e=this.tracks,t=0;for(let n=0,r=e.length;n!==r;++n){let o=this.tracks[n];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function mne(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ys;case"vector":case"vector2":case"vector3":case"vector4":return vs;case"color":return hv;case"quaternion":return Oo;case"bool":case"boolean":return Wc;case"string":return $c}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function gne(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=mne(i.type);if(i.times===void 0){let t=[],n=[];h3(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}var Nc={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}},cS=class{constructor(e,t,n){let r=this,o=!1,s=0,a=0,c,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(f){a++,o===!1&&r.onStart!==void 0&&r.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,r.onProgress!==void 0&&r.onProgress(f,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return c?c(f):f},this.setURLModifier=function(f){return c=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){let h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,p=u.length;h<p;h+=2){let g=u[h],y=u[h+1];if(g.global&&(g.lastIndex=0),g.test(f))return y}return null}}},yne=new cS,No=(()=>{class i{constructor(t){this.manager=t!==void 0?t:yne,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,n){let r=this;return new Promise(function(o,s){r.load(t,o,n,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return i.DEFAULT_MATERIAL_NAME="__DEFAULT",i})(),Ua={},lS=class extends Error{constructor(e,t){super(e),this.response=t}},ka=class extends No{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=Nc.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Ua[e]!==void 0){Ua[e].push({onLoad:t,onProgress:n,onError:r});return}Ua[e]=[],Ua[e].push({onLoad:t,onProgress:n,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let f=Ua[e],h=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),g=p?parseInt(p):0,y=g!==0,x=0,v=new ReadableStream({start(_){C();function C(){h.read().then(({done:M,value:S})=>{if(M)_.close();else{x+=S.byteLength;let H=new ProgressEvent("progress",{lengthComputable:y,loaded:x,total:g});for(let P=0,F=f.length;P<F;P++){let $=f[P];$.onProgress&&$.onProgress(H)}_.enqueue(S),C()}},M=>{_.error(M)})}}});return new Response(v)}else throw new lS(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a===void 0)return u.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,g=new TextDecoder(p);return u.arrayBuffer().then(y=>g.decode(y))}}}).then(u=>{Nc.add(e,u);let f=Ua[e];delete Ua[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onLoad&&g.onLoad(u)}}).catch(u=>{let f=Ua[e];if(f===void 0)throw this.manager.itemError(e),u;delete Ua[e];for(let h=0,p=f.length;h<p;h++){let g=f[h];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var uS=class extends No{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Nc.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;let a=rp("img");function c(){f(),Nc.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(h){f(),r&&r(h),o.manager.itemError(e),o.manager.itemEnd(e)}function f(){a.removeEventListener("load",c,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}};var Zd=class extends No{constructor(e){super(e)}load(e,t,n,r){let o=new Lr,s=new uS(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},n,r),o}},Yl=class extends ri{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new rt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}},pv=class extends Yl{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ri.DEFAULT_UP),this.updateMatrix(),this.groundColor=new rt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},tE=new ot,BN=new z,VN=new z,mp=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.map=null,this.mapPass=null,this.matrix=new ot,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ap,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;BN.setFromMatrixPosition(e.matrixWorld),t.position.copy(BN),VN.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(VN),t.updateMatrixWorld(),tE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tE),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(tE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},dS=class extends mp{constructor(){super(new li(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=jd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(n!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=n,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Kd=class extends Yl{constructor(e,t,n=0,r=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ri.DEFAULT_UP),this.updateMatrix(),this.target=new ri,this.distance=n,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new dS}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},zN=new ot,qh=new z,nE=new z,fS=class extends mp{constructor(){super(new li(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ge(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,r=this.matrix,o=e.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),qh.setFromMatrixPosition(e.matrixWorld),n.position.copy(qh),nE.copy(n.position),nE.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(nE),n.updateMatrixWorld(),r.makeTranslation(-qh.x,-qh.y,-qh.z),zN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zN)}},Zl=class extends Yl{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new fS}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},hS=class extends mp{constructor(){super(new Bc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Jd=class extends Yl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ri.DEFAULT_UP),this.updateMatrix(),this.target=new ri,this.shadow=new hS}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},mv=class extends Yl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var Ks=class{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var gv=class extends No{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Nc.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(u=>{t&&t(u),o.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let c=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Nc.add(e,u),t&&t(u),o.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Nc.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Nc.add(e,c),o.manager.itemStart(e)}};var DS="\\[\\]\\.:\\/",vne=new RegExp("["+DS+"]","g"),IS="[^"+DS+"]",_ne="[^"+DS.replace("\\.","")+"]",wne=/((?:WC+[\/:])*)/.source.replace("WC",IS),xne=/(WCOD+)?/.source.replace("WCOD",_ne),Mne=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",IS),bne=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",IS),Ene=new RegExp("^"+wne+xne+Mne+bne+"$"),Sne=["material","materials","bones","map"],pS=class{constructor(e,t,n){let r=n||In.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=n.length;r!==o;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},In=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(vne,"")}static parseTrackName(t){let n=Ene.exec(t);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);Sne.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(n===void 0||n===""||n==="."||n===-1||n===t.name||n===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(n);if(r!==void 0)return r}if(t.children){let r=function(s){for(let a=0;a<s.length;a++){let c=s[a];if(c.name===n||c.uuid===n)return c;let u=r(c.children);if(u)return u}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[n++]=r[o]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[n++]}_setValue_array_setNeedsUpdate(t,n){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node,n=this.parsedPath,r=n.objectName,o=n.propertyName,s=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=n.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===f){f=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}let a=t[o];if(a===void 0){let f=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+o+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=pS,i})();In.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};In.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};In.prototype.GetterByBindingType=[In.prototype._getValue_direct,In.prototype._getValue_array,In.prototype._getValue_arrayElement,In.prototype._getValue_toArray];In.prototype.SetterByBindingTypeAndVersioning=[[In.prototype._setValue_direct,In.prototype._setValue_direct_setNeedsUpdate,In.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[In.prototype._setValue_array,In.prototype._setValue_array_setNeedsUpdate,In.prototype._setValue_array_setMatrixWorldNeedsUpdate],[In.prototype._setValue_arrayElement,In.prototype._setValue_arrayElement_setNeedsUpdate,In.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[In.prototype._setValue_fromArray,In.prototype._setValue_fromArray_setNeedsUpdate,In.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var tpe=new Float32Array(1);var HN=new ot,yv=class{constructor(e,t,n=0,r=1/0){this.ray=new La(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new op,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return HN.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(HN),this}intersectObject(e,t=!0,n=[]){return mS(e,this,n,t),n.sort(jN),n}intersectObjects(e,t=!0,n=[]){for(let r=0,o=e.length;r<o;r++)mS(e[r],this,n,t);return n.sort(jN),n}};function jN(i,e){return i.distance-e.distance}function mS(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){let o=i.children;for(let s=0,a=o.length;s<a;s++)mS(o[s],e,t,!0)}}var gp=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ai(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:gS}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=gS);var p3={type:"change"},RS={type:"start"},m3={type:"end"},Sv=new La,g3=new fs,Ane=Math.cos(70*zn.DEG2RAD),Cv=class extends Xs{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new z,this.cursor=new z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Kl.ROTATE,MIDDLE:Kl.DOLLY,RIGHT:Kl.PAN},this.touches={ONE:Jl.ROTATE,TWO:Jl.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(E){E.addEventListener("keydown",Ye),this._domElementKeyEvents=E},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Ye),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(p3),n.update(),o=r.NONE},this.update=function(){let E=new z,te=new Qn().setFromUnitVectors(e.up,new z(0,1,0)),ne=te.clone().invert(),ue=new z,De=new Qn,dt=new z,_t=2*Math.PI;return function(Hn=null){let Yt=n.object.position;E.copy(Yt).sub(n.target),E.applyQuaternion(te),a.setFromVector3(E),n.autoRotate&&o===r.NONE&&le(D(Hn)),n.enableDamping?(a.theta+=c.theta*n.dampingFactor,a.phi+=c.phi*n.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let jn=n.minAzimuthAngle,Rn=n.maxAzimuthAngle;isFinite(jn)&&isFinite(Rn)&&(jn<-Math.PI?jn+=_t:jn>Math.PI&&(jn-=_t),Rn<-Math.PI?Rn+=_t:Rn>Math.PI&&(Rn-=_t),jn<=Rn?a.theta=Math.max(jn,Math.min(Rn,a.theta)):a.theta=a.theta>(jn+Rn)/2?Math.max(jn,a.theta):Math.min(Rn,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor);let kr=!1;if(n.zoomToCursor&&P||n.object.isOrthographicCamera)a.radius=Le(a.radius);else{let ei=a.radius;a.radius=Le(a.radius*u),kr=ei!=a.radius}if(E.setFromSpherical(a),E.applyQuaternion(ne),Yt.copy(n.target).add(E),n.object.lookAt(n.target),n.enableDamping===!0?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),f.set(0,0,0)),n.zoomToCursor&&P){let ei=null;if(n.object.isPerspectiveCamera){let zi=E.length();ei=Le(zi*u);let ho=zi-ei;n.object.position.addScaledVector(S,ho),n.object.updateMatrixWorld(),kr=!!ho}else if(n.object.isOrthographicCamera){let zi=new z(H.x,H.y,0);zi.unproject(n.object);let ho=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),n.object.updateProjectionMatrix(),kr=ho!==n.object.zoom;let Ms=new z(H.x,H.y,0);Ms.unproject(n.object),n.object.position.sub(Ms).add(zi),n.object.updateMatrixWorld(),ei=E.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;ei!==null&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(ei).add(n.object.position):(Sv.origin.copy(n.object.position),Sv.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Sv.direction))<Ane?e.lookAt(n.target):(g3.setFromNormalAndCoplanarPoint(n.object.up,n.target),Sv.intersectPlane(g3,n.target))))}else if(n.object.isOrthographicCamera){let ei=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),ei!==n.object.zoom&&(n.object.updateProjectionMatrix(),kr=!0)}return u=1,P=!1,kr||ue.distanceToSquared(n.object.position)>s||8*(1-De.dot(n.object.quaternion))>s||dt.distanceToSquared(n.target)>s?(n.dispatchEvent(p3),ue.copy(n.object.position),De.copy(n.object.quaternion),dt.copy(n.target),!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Ze),n.domElement.removeEventListener("pointerdown",st),n.domElement.removeEventListener("pointercancel",A),n.domElement.removeEventListener("wheel",Te),n.domElement.removeEventListener("pointermove",N),n.domElement.removeEventListener("pointerup",A),n.domElement.getRootNode().removeEventListener("keydown",qe,{capture:!0}),n._domElementKeyEvents!==null&&(n._domElementKeyEvents.removeEventListener("keydown",Ye),n._domElementKeyEvents=null)};let n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},o=r.NONE,s=1e-6,a=new gp,c=new gp,u=1,f=new z,h=new Ge,p=new Ge,g=new Ge,y=new Ge,x=new Ge,v=new Ge,_=new Ge,C=new Ge,M=new Ge,S=new z,H=new Ge,P=!1,F=[],$={},U=!1;function D(E){return E!==null?2*Math.PI/60*n.autoRotateSpeed*E:2*Math.PI/60/60*n.autoRotateSpeed}function j(E){let te=Math.abs(E*.01);return Math.pow(.95,n.zoomSpeed*te)}function le(E){c.theta-=E}function re(E){c.phi-=E}let xe=function(){let E=new z;return function(ne,ue){E.setFromMatrixColumn(ue,0),E.multiplyScalar(-ne),f.add(E)}}(),ve=function(){let E=new z;return function(ne,ue){n.screenSpacePanning===!0?E.setFromMatrixColumn(ue,1):(E.setFromMatrixColumn(ue,0),E.crossVectors(n.object.up,E)),E.multiplyScalar(ne),f.add(E)}}(),W=function(){let E=new z;return function(ne,ue){let De=n.domElement;if(n.object.isPerspectiveCamera){let dt=n.object.position;E.copy(dt).sub(n.target);let _t=E.length();_t*=Math.tan(n.object.fov/2*Math.PI/180),xe(2*ne*_t/De.clientHeight,n.object.matrix),ve(2*ue*_t/De.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(xe(ne*(n.object.right-n.object.left)/n.object.zoom/De.clientWidth,n.object.matrix),ve(ue*(n.object.top-n.object.bottom)/n.object.zoom/De.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function Q(E){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?u/=E:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function X(E){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?u*=E:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function me(E,te){if(!n.zoomToCursor)return;P=!0;let ne=n.domElement.getBoundingClientRect(),ue=E-ne.left,De=te-ne.top,dt=ne.width,_t=ne.height;H.x=ue/dt*2-1,H.y=-(De/_t)*2+1,S.set(H.x,H.y,1).unproject(n.object).sub(n.object.position).normalize()}function Le(E){return Math.max(n.minDistance,Math.min(n.maxDistance,E))}function $e(E){h.set(E.clientX,E.clientY)}function he(E){me(E.clientX,E.clientX),_.set(E.clientX,E.clientY)}function ee(E){y.set(E.clientX,E.clientY)}function k(E){p.set(E.clientX,E.clientY),g.subVectors(p,h).multiplyScalar(n.rotateSpeed);let te=n.domElement;le(2*Math.PI*g.x/te.clientHeight),re(2*Math.PI*g.y/te.clientHeight),h.copy(p),n.update()}function q(E){C.set(E.clientX,E.clientY),M.subVectors(C,_),M.y>0?Q(j(M.y)):M.y<0&&X(j(M.y)),_.copy(C),n.update()}function pe(E){x.set(E.clientX,E.clientY),v.subVectors(x,y).multiplyScalar(n.panSpeed),W(v.x,v.y),y.copy(x),n.update()}function ae(E){me(E.clientX,E.clientY),E.deltaY<0?X(j(E.deltaY)):E.deltaY>0&&Q(j(E.deltaY)),n.update()}function We(E){let te=!1;switch(E.code){case n.keys.UP:E.ctrlKey||E.metaKey||E.shiftKey?re(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):W(0,n.keyPanSpeed),te=!0;break;case n.keys.BOTTOM:E.ctrlKey||E.metaKey||E.shiftKey?re(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):W(0,-n.keyPanSpeed),te=!0;break;case n.keys.LEFT:E.ctrlKey||E.metaKey||E.shiftKey?le(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):W(n.keyPanSpeed,0),te=!0;break;case n.keys.RIGHT:E.ctrlKey||E.metaKey||E.shiftKey?le(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):W(-n.keyPanSpeed,0),te=!0;break}te&&(E.preventDefault(),n.update())}function Pe(E){if(F.length===1)h.set(E.pageX,E.pageY);else{let te=Mt(E),ne=.5*(E.pageX+te.x),ue=.5*(E.pageY+te.y);h.set(ne,ue)}}function ke(E){if(F.length===1)y.set(E.pageX,E.pageY);else{let te=Mt(E),ne=.5*(E.pageX+te.x),ue=.5*(E.pageY+te.y);y.set(ne,ue)}}function et(E){let te=Mt(E),ne=E.pageX-te.x,ue=E.pageY-te.y,De=Math.sqrt(ne*ne+ue*ue);_.set(0,De)}function O(E){n.enableZoom&&et(E),n.enablePan&&ke(E)}function gt(E){n.enableZoom&&et(E),n.enableRotate&&Pe(E)}function At(E){if(F.length==1)p.set(E.pageX,E.pageY);else{let ne=Mt(E),ue=.5*(E.pageX+ne.x),De=.5*(E.pageY+ne.y);p.set(ue,De)}g.subVectors(p,h).multiplyScalar(n.rotateSpeed);let te=n.domElement;le(2*Math.PI*g.x/te.clientHeight),re(2*Math.PI*g.y/te.clientHeight),h.copy(p)}function ut(E){if(F.length===1)x.set(E.pageX,E.pageY);else{let te=Mt(E),ne=.5*(E.pageX+te.x),ue=.5*(E.pageY+te.y);x.set(ne,ue)}v.subVectors(x,y).multiplyScalar(n.panSpeed),W(v.x,v.y),y.copy(x)}function Ce(E){let te=Mt(E),ne=E.pageX-te.x,ue=E.pageY-te.y,De=Math.sqrt(ne*ne+ue*ue);C.set(0,De),M.set(0,Math.pow(C.y/_.y,n.zoomSpeed)),Q(M.y),_.copy(C);let dt=(E.pageX+te.x)*.5,_t=(E.pageY+te.y)*.5;me(dt,_t)}function Xt(E){n.enableZoom&&Ce(E),n.enablePan&&ut(E)}function nt(E){n.enableZoom&&Ce(E),n.enableRotate&&At(E)}function st(E){n.enabled!==!1&&(F.length===0&&(n.domElement.setPointerCapture(E.pointerId),n.domElement.addEventListener("pointermove",N),n.domElement.addEventListener("pointerup",A)),!tt(E)&&(Rt(E),E.pointerType==="touch"?xt(E):ie(E)))}function N(E){n.enabled!==!1&&(E.pointerType==="touch"?Oe(E):Se(E))}function A(E){switch(mt(E),F.length){case 0:n.domElement.releasePointerCapture(E.pointerId),n.domElement.removeEventListener("pointermove",N),n.domElement.removeEventListener("pointerup",A),n.dispatchEvent(m3),o=r.NONE;break;case 1:let te=F[0],ne=$[te];xt({pointerId:te,pageX:ne.x,pageY:ne.y});break}}function ie(E){let te;switch(E.button){case 0:te=n.mouseButtons.LEFT;break;case 1:te=n.mouseButtons.MIDDLE;break;case 2:te=n.mouseButtons.RIGHT;break;default:te=-1}switch(te){case Kl.DOLLY:if(n.enableZoom===!1)return;he(E),o=r.DOLLY;break;case Kl.ROTATE:if(E.ctrlKey||E.metaKey||E.shiftKey){if(n.enablePan===!1)return;ee(E),o=r.PAN}else{if(n.enableRotate===!1)return;$e(E),o=r.ROTATE}break;case Kl.PAN:if(E.ctrlKey||E.metaKey||E.shiftKey){if(n.enableRotate===!1)return;$e(E),o=r.ROTATE}else{if(n.enablePan===!1)return;ee(E),o=r.PAN}break;default:o=r.NONE}o!==r.NONE&&n.dispatchEvent(RS)}function Se(E){switch(o){case r.ROTATE:if(n.enableRotate===!1)return;k(E);break;case r.DOLLY:if(n.enableZoom===!1)return;q(E);break;case r.PAN:if(n.enablePan===!1)return;pe(E);break}}function Te(E){n.enabled===!1||n.enableZoom===!1||o!==r.NONE||(E.preventDefault(),n.dispatchEvent(RS),ae(Me(E)),n.dispatchEvent(m3))}function Me(E){let te=E.deltaMode,ne={clientX:E.clientX,clientY:E.clientY,deltaY:E.deltaY};switch(te){case 1:ne.deltaY*=16;break;case 2:ne.deltaY*=100;break}return E.ctrlKey&&!U&&(ne.deltaY*=10),ne}function qe(E){E.key==="Control"&&(U=!0,n.domElement.getRootNode().addEventListener("keyup",Re,{passive:!0,capture:!0}))}function Re(E){E.key==="Control"&&(U=!1,n.domElement.getRootNode().removeEventListener("keyup",Re,{passive:!0,capture:!0}))}function Ye(E){n.enabled===!1||n.enablePan===!1||We(E)}function xt(E){switch(yt(E),F.length){case 1:switch(n.touches.ONE){case Jl.ROTATE:if(n.enableRotate===!1)return;Pe(E),o=r.TOUCH_ROTATE;break;case Jl.PAN:if(n.enablePan===!1)return;ke(E),o=r.TOUCH_PAN;break;default:o=r.NONE}break;case 2:switch(n.touches.TWO){case Jl.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;O(E),o=r.TOUCH_DOLLY_PAN;break;case Jl.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;gt(E),o=r.TOUCH_DOLLY_ROTATE;break;default:o=r.NONE}break;default:o=r.NONE}o!==r.NONE&&n.dispatchEvent(RS)}function Oe(E){switch(yt(E),o){case r.TOUCH_ROTATE:if(n.enableRotate===!1)return;At(E),n.update();break;case r.TOUCH_PAN:if(n.enablePan===!1)return;ut(E),n.update();break;case r.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Xt(E),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;nt(E),n.update();break;default:o=r.NONE}}function Ze(E){n.enabled!==!1&&E.preventDefault()}function Rt(E){F.push(E.pointerId)}function mt(E){delete $[E.pointerId];for(let te=0;te<F.length;te++)if(F[te]==E.pointerId){F.splice(te,1);return}}function tt(E){for(let te=0;te<F.length;te++)if(F[te]==E.pointerId)return!0;return!1}function yt(E){let te=$[E.pointerId];te===void 0&&(te=new Ge,$[E.pointerId]=te),te.set(E.pageX,E.pageY)}function Mt(E){let te=E.pointerId===F[0]?F[1]:F[0];return $[te]}n.domElement.addEventListener("contextmenu",Ze),n.domElement.addEventListener("pointerdown",st),n.domElement.addEventListener("pointercancel",A),n.domElement.addEventListener("wheel",Te,{passive:!1}),n.domElement.getRootNode().addEventListener("keydown",qe,{passive:!0,capture:!0}),this.update()}};var Bt=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(Bt||{}),Js="*";function y3(i,e){return{type:Bt.Trigger,name:i,definitions:e,options:{}}}function US(i,e=null){return{type:Bt.Animate,styles:e,timings:i}}function v3(i,e=null){return{type:Bt.Sequence,steps:i,options:e}}function Ql(i){return{type:Bt.Style,styles:i,offset:null}}function _3(i,e,t){return{type:Bt.State,name:i,styles:e,options:t}}function FS(i,e,t=null){return{type:Bt.Transition,expr:i,animation:e,options:t}}var qc=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},_p=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++n==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(n=>{let r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){let e=this.players.reduce((t,n)=>t===null||n.totalTime>t.totalTime?n:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Av="!";var Tne=["overlay"],Dne=["*"];function Ine(i,e){i&1&&Ie(0,"div")}function Rne(i,e){if(i&1&&(B(0,"div"),pt(1,Ine,1,0,"div",6),V()),i&2){let t=Ee(2);LU(t.spinner.class),qn("color",t.spinner.color),de(),_e("ngForOf",t.spinner.divArray)}}function Une(i,e){if(i&1&&(Ie(0,"div",7),QU(1,"safeHtml")),i&2){let t=Ee(2);_e("innerHTML",eF(1,1,t.template),PR)}}function Fne(i,e){if(i&1&&(B(0,"div",2,0),pt(2,Rne,2,5,"div",3)(3,Une,2,3,"div",4),B(4,"div",5),qU(5),V()()),i&2){let t=Ee();qn("background-color",t.spinner.bdColor)("z-index",t.spinner.zIndex)("position",t.spinner.fullScreen?"fixed":"absolute"),_e("@.disabled",t.disableAnimation)("@fadeIn","in"),de(2),_e("ngIf",!t.template),de(),_e("ngIf",t.template),de(),qn("z-index",t.spinner.zIndex)}}var Pne={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},PS={BD_COLOR:"rgba(51,51,51,0.8)",SPINNER_COLOR:"#fff",Z_INDEX:99999},OS="primary",eu=class i{constructor(e){Object.assign(this,e)}static create(e){return!e?.template&&!e?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new i(e)}},NS=(()=>{let e=class e{constructor(){this.spinnerObservable=new ai(null)}getSpinner(n){return this.spinnerObservable.asObservable().pipe(cr(r=>r&&r.name===n))}show(n=OS,r){return new Promise((o,s)=>{setTimeout(()=>{r&&Object.keys(r).length?(r.name=n,this.spinnerObservable.next(new eu(Zt(ze({},r),{show:!0}))),o(!0)):(this.spinnerObservable.next(new eu({name:n,show:!0})),o(!0))},10)})}hide(n=OS,r=10){return new Promise((o,s)=>{setTimeout(()=>{this.spinnerObservable.next(new eu({name:n,show:!1})),o(!0)},r)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),w3=new ct("NGX_SPINNER_CONFIG"),One=(()=>{let e=class e{constructor(n){this._sanitizer=n}transform(n){if(n)return this._sanitizer.bypassSecurityTrustHtml(n)}};e.\u0275fac=function(r){return new(r||e)(fe(SM,16))},e.\u0275pipe=y1({name:"safeHtml",type:e,pure:!0,standalone:!0});let i=e;return i})(),x3=(()=>{let e=class e{constructor(n,r,o,s){this.spinnerService=n,this.changeDetector=r,this.elementRef=o,this.globalConfig=s,this.disableAnimation=!1,this.spinner=new eu,this.ngUnsubscribe=new ni,this.setDefaultOptions=()=>{let{type:a}=this.globalConfig??{};this.spinner=eu.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??a,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor=PS.BD_COLOR,this.zIndex=PS.Z_INDEX,this.color=PS.SPINNER_COLOR,this.size="large",this.fullScreen=!0,this.name=OS,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(If(this.ngUnsubscribe)).subscribe(n=>{this.setDefaultOptions(),Object.assign(this.spinner,n),n.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(n){return n===this.elementRef.nativeElement.parentElement?!0:n.parentNode&&this.isSpinnerZone(n.parentNode)}ngOnChanges(n){for(let r in n)if(r){let o=n[r];if(o.isFirstChange())return;typeof o.currentValue<"u"&&o.currentValue!==o.previousValue&&o.currentValue!==""&&(this.spinner[r]=o.currentValue,r==="showSpinner"&&(o.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),r==="name"&&this.initObservable())}}getClass(n,r){this.spinner.divCount=Pne[n],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((s,a)=>a);let o="";switch(r.toLowerCase()){case"small":o="la-sm";break;case"medium":o="la-2x";break;case"large":o="la-3x";break;default:break}return"la-"+n+" "+o}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}};e.\u0275fac=function(r){return new(r||e)(fe(NS),fe(io),fe(on),fe(w3,8))},e.\u0275cmp=ln({type:e,selectors:[["ngx-spinner"]],viewQuery:function(r,o){if(r&1&&Wi(Tne,5),r&2){let s;Fi(s=Pi())&&(o.spinnerDOM=s.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},standalone:!0,features:[Si,un],ngContentSelectors:Dne,decls:1,vars:1,consts:[["overlay",""],["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(r,o){r&1&&($U(),pt(0,Fne,6,12,"div",1)),r&2&&_e("ngIf",o.spinner.show)},dependencies:[One,gi,Oi],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[y3("fadeIn",[_3("in",Ql({opacity:1})),FS(":enter",[Ql({opacity:0}),US(300)]),FS(":leave",US(200,Ql({opacity:0})))])]},changeDetection:0});let i=e;return i})(),M3=(()=>{let e=class e{static forRoot(n){return{ngModule:e,providers:[{provide:w3,useValue:n}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rr({type:e}),e.\u0275inj=Ir({imports:[Ju]});let i=e;return i})();function LS(i,e){if(e===e3)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===vp||e===wv){let t=i.getIndex();if(t===null){let s=[],a=i.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)s.push(c);i.setIndex(s),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}let n=t.count-2,r=[];if(e===vp)for(let s=1;s<=n;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<n;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=i.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var Tv=class extends No{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new GS(t)}),this.register(function(t){return new WS(t)}),this.register(function(t){return new eC(t)}),this.register(function(t){return new tC(t)}),this.register(function(t){return new nC(t)}),this.register(function(t){return new qS(t)}),this.register(function(t){return new XS(t)}),this.register(function(t){return new YS(t)}),this.register(function(t){return new ZS(t)}),this.register(function(t){return new jS(t)}),this.register(function(t){return new KS(t)}),this.register(function(t){return new $S(t)}),this.register(function(t){return new QS(t)}),this.register(function(t){return new JS(t)}),this.register(function(t){return new zS(t)}),this.register(function(t){return new iC(t)}),this.register(function(t){return new rC(t)})}load(e,t,n,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let u=Ks.extractUrlBase(e);s=Ks.resolveURL(u,this.path)}else s=Ks.extractUrlBase(e);this.manager.itemStart(e);let a=function(u){r?r(u):console.error(u),o.manager.itemError(e),o.manager.itemEnd(e)},c=new ka(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(u){try{o.parse(u,s,function(f){t(f),o.manager.itemEnd(e)},a)}catch(f){a(f)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let o,s={},a={},c=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===A3){try{s[Qt.KHR_BINARY_GLTF]=new oC(e)}catch(h){r&&r(h);return}o=JSON.parse(s[Qt.KHR_BINARY_GLTF].content)}else o=JSON.parse(c.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new fC(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){let h=this.pluginCallbacks[f](u);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){let h=o.extensionsUsed[f],p=o.extensionsRequired||[];switch(h){case Qt.KHR_MATERIALS_UNLIT:s[h]=new HS;break;case Qt.KHR_DRACO_MESH_COMPRESSION:s[h]=new sC(o,this.dracoLoader);break;case Qt.KHR_TEXTURE_TRANSFORM:s[h]=new aC;break;case Qt.KHR_MESH_QUANTIZATION:s[h]=new cC;break;default:p.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(n,r)}parseAsync(e,t){let n=this;return new Promise(function(r,o){n.parse(e,t,r,o)})}};function Lne(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}var Qt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},zS=class{constructor(e){this.parser=e,this.name=Qt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){let o=t[n];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;let o=t.json,c=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],u,f=new rt(16777215);c.color!==void 0&&f.setRGB(c.color[0],c.color[1],c.color[2],Bi);let h=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new Jd(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Zl(f),u.distance=h;break;case"spot":u=new Kd(f),u.distance=h,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,Ba(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(u),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,n=this.parser,o=n.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return n._getNodeRef(t.cache,a,c)})}},HS=class{constructor(){this.name=Qt.KHR_MATERIALS_UNLIT}getMaterialType(){return Fo}extendParams(e,t,n){let r=[];e.color=new rt(1,1,1),e.opacity=1;let o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],Bi),e.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",o.baseColorTexture,ci))}return Promise.all(r)}},jS=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}},GS=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ge(a,a)}return Promise.all(o)}},WS=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_DISPERSION}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},$S=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},qS=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_SHEEN}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];t.sheenColor=new rt(0,0,0),t.sheenRoughness=0,t.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Bi)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,ci)),s.sheenRoughnessTexture!==void 0&&o.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},XS=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},YS=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_VOLUME}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return t.attenuationColor=new rt().setRGB(a[0],a[1],a[2],Bi),Promise.all(o)}},ZS=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_IOR}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},KS=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_SPECULAR}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return t.specularColor=new rt().setRGB(a[0],a[1],a[2],Bi),s.specularColorTexture!==void 0&&o.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,ci)),Promise.all(o)}},JS=class{constructor(e){this.parser=e,this.name=Qt.EXT_MATERIALS_BUMP}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(n.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(o)}},QS=class{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:lo}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(n.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},eC=class{constructor(e){this.parser=e,this.name=Qt.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,s)}},tC=class{constructor(e){this.parser=e,this.name=Qt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,r=n.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],c=n.textureLoader;if(a.uri){let u=n.options.manager.getHandler(a.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},nC=class{constructor(e){this.parser=e,this.name=Qt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,r=n.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],c=n.textureLoader;if(a.uri){let u=n.options.manager.getHandler(a.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},iC=class{constructor(e){this.name=Qt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){let r=n.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let c=r.byteOffset||0,u=r.byteLength||0,f=r.count,h=r.byteStride,p=new Uint8Array(a,c,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,h,p,r.mode,r.filter).then(function(g){return g.buffer}):s.ready.then(function(){let g=new ArrayBuffer(f*h);return s.decodeGltfBuffer(new Uint8Array(g),f,h,p,r.mode,r.filter),g})})}else return null}},rC=class{constructor(e){this.name=Qt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;let r=t.meshes[n.mesh];for(let u of r.primitives)if(u.mode!==Lo.TRIANGLES&&u.mode!==Lo.TRIANGLE_STRIP&&u.mode!==Lo.TRIANGLE_FAN&&u.mode!==void 0)return null;let s=n.extensions[this.name].attributes,a=[],c={};for(let u in s)a.push(this.parser.getDependency("accessor",s[u]).then(f=>(c[u]=f,c[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{let f=u.pop(),h=f.isGroup?f.children:[f],p=u[0].count,g=[];for(let y of h){let x=new ot,v=new z,_=new Qn,C=new z(1,1,1),M=new nv(y.geometry,y.material,p);for(let S=0;S<p;S++)c.TRANSLATION&&v.fromBufferAttribute(c.TRANSLATION,S),c.ROTATION&&_.fromBufferAttribute(c.ROTATION,S),c.SCALE&&C.fromBufferAttribute(c.SCALE,S),M.setMatrixAt(S,x.compose(v,_,C));for(let S in c)if(S==="_COLOR_0"){let H=c[S];M.instanceColor=new $l(H.array,H.itemSize,H.normalized)}else S!=="TRANSLATION"&&S!=="ROTATION"&&S!=="SCALE"&&y.geometry.setAttribute(S,c[S]);ri.prototype.copy.call(M,y),this.parser.assignFinalMaterial(M),g.push(M)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}},A3="glTF",wp=12,b3={JSON:1313821514,BIN:5130562},oC=class{constructor(e){this.name=Qt.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,wp),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==A3)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-wp,o=new DataView(e,wp),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let c=o.getUint32(s,!0);if(s+=4,c===b3.JSON){let u=new Uint8Array(e,wp+s,a);this.content=n.decode(u)}else if(c===b3.BIN){let u=wp+s;this.body=e.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},sC=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Qt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let n=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},c={},u={};for(let f in s){let h=uC[f]||f.toLowerCase();a[h]=s[f]}for(let f in e.attributes){let h=uC[f]||f.toLowerCase();if(s[f]!==void 0){let p=n.accessors[e.attributes[f]],g=ef[p.componentType];u[h]=g.name,c[h]=p.normalized===!0}}return t.getDependency("bufferView",o).then(function(f){return new Promise(function(h,p){r.decodeDracoFile(f,function(g){for(let y in g.attributes){let x=g.attributes[y],v=c[y];v!==void 0&&(x.normalized=v)}h(g)},a,u,Bi,p)})})}},aC=class{constructor(){this.name=Qt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},cC=class{constructor(){this.name=Qt.KHR_MESH_QUANTIZATION}},Dv=class extends Gc{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)t[s]=n[o+s];return t}interpolate_(e,t,n,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=a*2,u=a*3,f=r-t,h=(n-t)/f,p=h*h,g=p*h,y=e*u,x=y-u,v=-2*g+3*p,_=g-p,C=1-v,M=_-p+h;for(let S=0;S!==a;S++){let H=s[x+S+a],P=s[x+S+c]*f,F=s[y+S+a],$=s[y+S]*f;o[S]=C*H+M*P+v*F+_*$}return o}},kne=new Qn,lC=class extends Dv{interpolate_(e,t,n,r){let o=super.interpolate_(e,t,n,r);return kne.fromArray(o).normalize().toArray(o),o}},Lo={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ef={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},E3={9728:tr,9729:Fr,9984:yS,9985:Yh,9986:Td,9987:Ws},S3={33071:Io,33648:np,10497:qs},kS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},uC={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Xc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Bne={CUBICSPLINE:void 0,LINEAR:Hd,STEP:zd},BS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Vne(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Xd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:$s})),i.DefaultMaterial}function tu(i,e,t){for(let n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Ba(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function zne(i,e,t){let n=!1,r=!1,o=!1;for(let u=0,f=e.length;u<f;u++){let h=e[u];if(h.POSITION!==void 0&&(n=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),n&&r&&o)break}if(!n&&!r&&!o)return Promise.resolve(i);let s=[],a=[],c=[];for(let u=0,f=e.length;u<f;u++){let h=e[u];if(n){let p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):i.attributes.position;s.push(p)}if(r){let p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):i.attributes.normal;a.push(p)}if(o){let p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):i.attributes.color;c.push(p)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c)]).then(function(u){let f=u[0],h=u[1],p=u[2];return n&&(i.morphAttributes.position=f),r&&(i.morphAttributes.normal=h),o&&(i.morphAttributes.color=p),i.morphTargetsRelative=!0,i})}function Hne(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function jne(i){let e,t=i.extensions&&i.extensions[Qt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+VS(t.attributes):e=i.indices+":"+VS(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+VS(i.targets[n]);return e}function VS(i){let e="",t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function dC(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Gne(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var Wne=new ot,fC=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Lne,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(a)===!0;let c=a.match(/Version\/(\d+)/);r=n&&c?parseInt(c[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&r<17||o&&s<98?this.textureLoader=new Zd(this.options.manager):this.textureLoader=new gv(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ka(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let n=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:n,userData:{}};return tu(o,a,r),Ba(a,r),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(let c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){let s=t[r].joints;for(let a=0,c=s.length;a<c;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){let s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(n[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;let r=n.clone(),o=(s,a)=>{let c=this.associations.get(s);c!=null&&this.associations.set(a,c);for(let[u,f]of s.children.entries())o(f,a.children[u])};return o(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){let r=e(t[n]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let n=[];for(let r=0;r<t.length;r++){let o=e(t[r]);o&&n.push(o)}return n}getDependency(e,t){let n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,s){return n.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Qt.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){n.load(Ks.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){let r=t.byteLength||0,o=t.byteOffset||0;return n.slice(o,o+r)})}loadAccessor(e){let t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let s=kS[r.type],a=ef[r.componentType],c=r.normalized===!0,u=new a(r.count*s);return Promise.resolve(new Ti(u,s,c))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],c=kS[r.type],u=ef[r.componentType],f=u.BYTES_PER_ELEMENT,h=f*c,p=r.byteOffset||0,g=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,y=r.normalized===!0,x,v;if(g&&g!==h){let _=Math.floor(p/g),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count,M=t.cache.get(C);M||(x=new u(a,_*g,r.count*g/f),M=new cp(x,g/f),t.cache.add(C,M)),v=new lp(M,c,p%g/f,y)}else a===null?x=new u(r.count*c):x=new u(a,p,r.count*c),v=new Ti(x,c,y);if(r.sparse!==void 0){let _=kS.SCALAR,C=ef[r.sparse.indices.componentType],M=r.sparse.indices.byteOffset||0,S=r.sparse.values.byteOffset||0,H=new C(s[1],M,r.sparse.count*_),P=new u(s[2],S,r.sparse.count*c);a!==null&&(v=new Ti(v.array.slice(),v.itemSize,v.normalized));for(let F=0,$=H.length;F<$;F++){let U=H[F];if(v.setX(U,P[F*c]),c>=2&&v.setY(U,P[F*c+1]),c>=3&&v.setZ(U,P[F*c+2]),c>=4&&v.setW(U,P[F*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){let t=this.json,n=this.options,o=t.textures[e].source,s=t.images[o],a=this.textureLoader;if(s.uri){let c=n.manager.getHandler(s.uri);c!==null&&(a=c)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,n){let r=this,o=this.json,s=o.textures[e],a=o.images[t],c=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[c])return this.textureCache[c];let u=this.loadImageSource(t,n).then(function(f){f.flipY=!1,f.name=s.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);let p=(o.samplers||{})[s.sampler]||{};return f.magFilter=E3[p.magFilter]||Fr,f.minFilter=E3[p.minFilter]||Ws,f.wrapS=S3[p.wrapS]||qs,f.wrapT=S3[p.wrapT]||qs,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(e,t){let n=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());let s=r.images[e],a=self.URL||self.webkitURL,c=s.uri||"",u=!1;if(s.bufferView!==void 0)c=n.getDependency("bufferView",s.bufferView).then(function(h){u=!0;let p=new Blob([h],{type:s.mimeType});return c=a.createObjectURL(p),c});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let f=Promise.resolve(c).then(function(h){return new Promise(function(p,g){let y=p;t.isImageBitmapLoader===!0&&(y=function(x){let v=new Lr(x);v.needsUpdate=!0,p(v)}),t.load(Ks.resolveURL(h,o.path),y,void 0,g)})}).then(function(h){return u===!0&&a.revokeObjectURL(c),Ba(h,s),h.userData.mimeType=s.mimeType||Gne(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),h});return this.sourceCache[e]=f,f}assignTexture(e,t,n,r){let o=this;return this.getDependency("texture",n.index).then(function(s){if(!s)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(s=s.clone(),s.channel=n.texCoord),o.extensions[Qt.KHR_TEXTURE_TRANSFORM]){let a=n.extensions!==void 0?n.extensions[Qt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let c=o.associations.get(s);s=o.extensions[Qt.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,c)}}return r!==void 0&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){let t=e.geometry,n=e.material,r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+n.uuid,c=this.cache.get(a);c||(c=new Zs,ki.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(a,c)),n=c}else if(e.isLine){let a="LineBasicMaterial:"+n.uuid,c=this.cache.get(a);c||(c=new gs,ki.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(a,c)),n=c}if(r||o||s){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=n.clone(),o&&(c.vertexColors=!0),s&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(n))),n=c}e.material=n}getMaterialType(){return Xd}loadMaterial(e){let t=this,n=this.json,r=this.extensions,o=n.materials[e],s,a={},c=o.extensions||{},u=[];if(c[Qt.KHR_MATERIALS_UNLIT]){let h=r[Qt.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),u.push(h.extendParams(a,o,t))}else{let h=o.pbrMetallicRoughness||{};if(a.color=new rt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){let p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Bi),a.opacity=p[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,ci)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=hs);let f=o.alphaMode||BS.OPAQUE;if(f===BS.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===BS.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Fo&&(u.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new Ge(1,1),o.normalTexture.scale!==void 0)){let h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==Fo&&(u.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Fo){let h=o.emissiveFactor;a.emissive=new rt().setRGB(h[0],h[1],h[2],Bi)}return o.emissiveTexture!==void 0&&s!==Fo&&u.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,ci)),Promise.all(u).then(function(){let h=new s(a);return o.name&&(h.name=o.name),Ba(h,o),t.associations.set(h,{materials:e}),o.extensions&&tu(r,h,o),h})}createUniqueName(e){let t=In.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,n=this.extensions,r=this.primitiveCache;function o(a){return n[Qt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return C3(c,a,t)})}let s=[];for(let a=0,c=e.length;a<c;a++){let u=e[a],f=jne(u),h=r[f];if(h)s.push(h.promise);else{let p;u.extensions&&u.extensions[Qt.KHR_DRACO_MESH_COMPRESSION]?p=o(u):p=C3(new _i,u,t),r[f]={primitive:u,promise:p},s.push(p)}}return Promise.all(s)}loadMesh(e){let t=this,n=this.json,r=this.extensions,o=n.meshes[e],s=o.primitives,a=[];for(let c=0,u=s.length;c<u;c++){let f=s[c].material===void 0?Vne(this.cache):this.getDependency("material",s[c].material);a.push(f)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(c){let u=c.slice(0,c.length-1),f=c[c.length-1],h=[];for(let g=0,y=f.length;g<y;g++){let x=f[g],v=s[g],_,C=u[g];if(v.mode===Lo.TRIANGLES||v.mode===Lo.TRIANGLE_STRIP||v.mode===Lo.TRIANGLE_FAN||v.mode===void 0)_=o.isSkinnedMesh===!0?new $d(x,C):new Jn(x,C),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),v.mode===Lo.TRIANGLE_STRIP?_.geometry=LS(_.geometry,wv):v.mode===Lo.TRIANGLE_FAN&&(_.geometry=LS(_.geometry,vp));else if(v.mode===Lo.LINES)_=new ql(x,C);else if(v.mode===Lo.LINE_STRIP)_=new zc(x,C);else if(v.mode===Lo.LINE_LOOP)_=new ov(x,C);else if(v.mode===Lo.POINTS)_=new Hc(x,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(_.geometry.morphAttributes).length>0&&Hne(_,o),_.name=t.createUniqueName(o.name||"mesh_"+e),Ba(_,o),v.extensions&&tu(r,_,v),t.assignFinalMaterial(_),h.push(_)}for(let g=0,y=h.length;g<y;g++)t.associations.set(h[g],{meshes:e,primitives:g});if(h.length===1)return o.extensions&&tu(r,h[0],o),h[0];let p=new _r;o.extensions&&tu(r,p,o),t.associations.set(p,{meshes:e});for(let g=0,y=h.length;g<y;g++)p.add(h[g]);return p})}loadCamera(e){let t,n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new li(zn.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Bc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Ba(t,n),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],n=[];for(let r=0,o=t.joints.length;r<o;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){let o=r.pop(),s=r,a=[],c=[];for(let u=0,f=s.length;u<f;u++){let h=s[u];if(h){a.push(h);let p=new ot;o!==null&&p.fromArray(o.array,u*16),c.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new qd(a,c)})}loadAnimation(e){let t=this.json,n=this,r=t.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],c=[],u=[],f=[];for(let h=0,p=r.channels.length;h<p;h++){let g=r.channels[h],y=r.samplers[g.sampler],x=g.target,v=x.node,_=r.parameters!==void 0?r.parameters[y.input]:y.input,C=r.parameters!==void 0?r.parameters[y.output]:y.output;x.node!==void 0&&(s.push(this.getDependency("node",v)),a.push(this.getDependency("accessor",_)),c.push(this.getDependency("accessor",C)),u.push(y),f.push(x))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c),Promise.all(u),Promise.all(f)]).then(function(h){let p=h[0],g=h[1],y=h[2],x=h[3],v=h[4],_=[];for(let C=0,M=p.length;C<M;C++){let S=p[C],H=g[C],P=y[C],F=x[C],$=v[C];if(S===void 0)continue;S.updateMatrix&&S.updateMatrix();let U=n._createAnimationTracks(S,H,P,F,$);if(U)for(let D=0;D<U.length;D++)_.push(U[D])}return new Yd(o,void 0,_)})}createNodeMesh(e){let t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(o){let s=n._getNodeRef(n.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let c=0,u=r.weights.length;c<u;c++)a.morphTargetInfluences[c]=r.weights[c]}),s})}loadNode(e){let t=this.json,n=this,r=t.nodes[e],o=n._loadNodeShallow(e),s=[],a=r.children||[];for(let u=0,f=a.length;u<f;u++)s.push(n.getDependency("node",a[u]));let c=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),c]).then(function(u){let f=u[0],h=u[1],p=u[2];p!==null&&f.traverse(function(g){g.isSkinnedMesh&&g.bind(p,Wne)});for(let g=0,y=h.length;g<y;g++)f.add(h[g]);return f})}_loadNodeShallow(e){let t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=t.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],c=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return c&&a.push(c),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(u){return r._getNodeRef(r.cameraCache,o.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let f;if(o.isBone===!0?f=new Vc:u.length>1?f=new _r:u.length===1?f=u[0]:f=new ri,f!==u[0])for(let h=0,p=u.length;h<p;h++)f.add(u[h]);if(o.name&&(f.userData.name=o.name,f.name=s),Ba(f,o),o.extensions&&tu(n,f,o),o.matrix!==void 0){let h=new ot;h.fromArray(o.matrix),f.applyMatrix4(h)}else o.translation!==void 0&&f.position.fromArray(o.translation),o.rotation!==void 0&&f.quaternion.fromArray(o.rotation),o.scale!==void 0&&f.scale.fromArray(o.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){let t=this.extensions,n=this.json.scenes[e],r=this,o=new _r;n.name&&(o.name=r.createUniqueName(n.name)),Ba(o,n),n.extensions&&tu(t,o,n);let s=n.nodes||[],a=[];for(let c=0,u=s.length;c<u;c++)a.push(r.getDependency("node",s[c]));return Promise.all(a).then(function(c){for(let f=0,h=c.length;f<h;f++)o.add(c[f]);let u=f=>{let h=new Map;for(let[p,g]of r.associations)(p instanceof ki||p instanceof Lr)&&h.set(p,g);return f.traverse(p=>{let g=r.associations.get(p);g!=null&&h.set(p,g)}),h};return r.associations=u(o),o})}_createAnimationTracks(e,t,n,r,o){let s=[],a=e.name?e.name:e.uuid,c=[];Xc[o.path]===Xc.weights?e.traverse(function(p){p.morphTargetInfluences&&c.push(p.name?p.name:p.uuid)}):c.push(a);let u;switch(Xc[o.path]){case Xc.weights:u=ys;break;case Xc.rotation:u=Oo;break;case Xc.position:case Xc.scale:u=vs;break;default:switch(n.itemSize){case 1:u=ys;break;case 2:case 3:default:u=vs;break}break}let f=r.interpolation!==void 0?Bne[r.interpolation]:Hd,h=this._getArrayFromAccessor(n);for(let p=0,g=c.length;p<g;p++){let y=new u(c[p]+"."+Xc[o.path],t.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),s.push(y)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let n=dC(t.constructor),r=new Float32Array(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=t[o]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){let r=this instanceof Oo?lC:Dv;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function $ne(i,e,t){let n=e.attributes,r=new Or;if(n.POSITION!==void 0){let a=t.json.accessors[n.POSITION],c=a.min,u=a.max;if(c!==void 0&&u!==void 0){if(r.set(new z(c[0],c[1],c[2]),new z(u[0],u[1],u[2])),a.normalized){let f=dC(ef[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let a=new z,c=new z;for(let u=0,f=o.length;u<f;u++){let h=o[u];if(h.POSITION!==void 0){let p=t.json.accessors[h.POSITION],g=p.min,y=p.max;if(g!==void 0&&y!==void 0){if(c.setX(Math.max(Math.abs(g[0]),Math.abs(y[0]))),c.setY(Math.max(Math.abs(g[1]),Math.abs(y[1]))),c.setZ(Math.max(Math.abs(g[2]),Math.abs(y[2]))),p.normalized){let x=dC(ef[p.componentType]);c.multiplyScalar(x)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;let s=new co;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=s}function C3(i,e,t){let n=e.attributes,r=[];function o(s,a){return t.getDependency("accessor",s).then(function(c){i.setAttribute(a,c)})}for(let s in n){let a=uC[s]||s.toLowerCase();a in i.attributes||r.push(o(n[s],a))}if(e.indices!==void 0&&!i.index){let s=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(s)}return pn.workingColorSpace!==Bi&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${pn.workingColorSpace}" not supported.`),Ba(i,e),$ne(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?zne(i,e.targets,t):i})}function T3(i,e){let t=new Tv(e);return new Promise((n,r)=>{t.load(i,o=>{n(o.scene)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var ko=Uint8Array,tf=Uint16Array,qne=Int32Array,D3=new ko([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),I3=new ko([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xne=new ko([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R3=function(i,e){for(var t=new tf(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new qne(t[30]),n=1;n<30;++n)for(var o=t[n];o<t[n+1];++o)r[o]=o-t[n]<<5|n;return{b:t,r}},U3=R3(D3,2),F3=U3.b,Yne=U3.r;F3[28]=258,Yne[258]=28;var P3=R3(I3,0),Zne=P3.b,Tpe=P3.r,mC=new tf(32768);for(wn=0;wn<32768;++wn)Va=(wn&43690)>>1|(wn&21845)<<1,Va=(Va&52428)>>2|(Va&13107)<<2,Va=(Va&61680)>>4|(Va&3855)<<4,mC[wn]=((Va&65280)>>8|(Va&255)<<8)>>1;var Va,wn,xp=function(i,e,t){for(var n=i.length,r=0,o=new tf(e);r<n;++r)i[r]&&++o[i[r]-1];var s=new tf(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new tf(1<<e);var c=15-e;for(r=0;r<n;++r)if(i[r])for(var u=r<<4|i[r],f=e-i[r],h=s[i[r]-1]++<<f,p=h|(1<<f)-1;h<=p;++h)a[mC[h]>>c]=u}else for(a=new tf(n),r=0;r<n;++r)i[r]&&(a[r]=mC[s[i[r]-1]++]>>15-i[r]);return a},Mp=new ko(288);for(wn=0;wn<144;++wn)Mp[wn]=8;var wn;for(wn=144;wn<256;++wn)Mp[wn]=9;var wn;for(wn=256;wn<280;++wn)Mp[wn]=7;var wn;for(wn=280;wn<288;++wn)Mp[wn]=8;var wn,O3=new ko(32);for(wn=0;wn<32;++wn)O3[wn]=5;var wn;var Kne=xp(Mp,9,1);var Jne=xp(O3,5,1),hC=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},_s=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},pC=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},Qne=function(i){return(i+7)/8|0},eie=function(i,e,t){return(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length),new ko(i.subarray(e,t))};var tie=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ws=function(i,e,t){var n=new Error(e||tie[i]);if(n.code=i,Error.captureStackTrace&&Error.captureStackTrace(n,ws),!t)throw n;return n},nie=function(i,e,t,n){var r=i.length,o=n?n.length:0;if(!r||e.f&&!e.l)return t||new ko(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new ko(r*3));var u=function(et){var O=t.length;if(et>O){var gt=new ko(Math.max(O*2,et));gt.set(t),t=gt}},f=e.f||0,h=e.p||0,p=e.b||0,g=e.l,y=e.d,x=e.m,v=e.n,_=r*8;do{if(!g){f=_s(i,h,1);var C=_s(i,h+1,3);if(h+=3,C)if(C==1)g=Kne,y=Jne,x=9,v=5;else if(C==2){var P=_s(i,h,31)+257,F=_s(i,h+10,15)+4,$=P+_s(i,h+5,31)+1;h+=14;for(var U=new ko($),D=new ko(19),j=0;j<F;++j)D[Xne[j]]=_s(i,h+j*3,7);h+=F*3;for(var le=hC(D),re=(1<<le)-1,xe=xp(D,le,1),j=0;j<$;){var ve=xe[_s(i,h,re)];h+=ve&15;var M=ve>>4;if(M<16)U[j++]=M;else{var W=0,Q=0;for(M==16?(Q=3+_s(i,h,3),h+=2,W=U[j-1]):M==17?(Q=3+_s(i,h,7),h+=3):M==18&&(Q=11+_s(i,h,127),h+=7);Q--;)U[j++]=W}}var X=U.subarray(0,P),me=U.subarray(P);x=hC(X),v=hC(me),g=xp(X,x,1),y=xp(me,v,1)}else ws(1);else{var M=Qne(h)+4,S=i[M-4]|i[M-3]<<8,H=M+S;if(H>r){c&&ws(0);break}a&&u(p+S),t.set(i.subarray(M,H),p),e.b=p+=S,e.p=h=H*8,e.f=f;continue}if(h>_){c&&ws(0);break}}a&&u(p+131072);for(var Le=(1<<x)-1,$e=(1<<v)-1,he=h;;he=h){var W=g[pC(i,h)&Le],ee=W>>4;if(h+=W&15,h>_){c&&ws(0);break}if(W||ws(2),ee<256)t[p++]=ee;else if(ee==256){he=h,g=null;break}else{var k=ee-254;if(ee>264){var j=ee-257,q=D3[j];k=_s(i,h,(1<<q)-1)+F3[j],h+=q}var pe=y[pC(i,h)&$e],ae=pe>>4;pe||ws(3),h+=pe&15;var me=Zne[ae];if(ae>3){var q=I3[ae];me+=pC(i,h)&(1<<q)-1,h+=q}if(h>_){c&&ws(0);break}a&&u(p+131072);var We=p+k;if(p<me){var Pe=o-me,ke=Math.min(me,We);for(Pe+p<0&&ws(3);p<ke;++p)t[p]=n[Pe+p]}for(;p<We;++p)t[p]=t[p-me]}}e.l=g,e.p=he,e.b=p,e.f=f,g&&(f=1,e.m=x,e.d=y,e.n=v)}while(!f);return p!=t.length&&s?eie(t,0,p):t.subarray(0,p)};var iie=new ko(0);var rie=function(i,e){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&ws(6,"invalid zlib data"),(i[1]>>5&1)==+!e&&ws(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function N3(i,e){return nie(i.subarray(rie(i,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var oie=typeof TextDecoder<"u"&&new TextDecoder,sie=0;try{oie.decode(iie,{stream:!0}),sie=1}catch{}function L3(i,e,t){let n=t.length-i-1;if(e>=t[n])return n-1;if(e<=t[i])return i;let r=i,o=n,s=Math.floor((r+o)/2);for(;e<t[s]||e>=t[s+1];)e<t[s]?o=s:r=s,s=Math.floor((r+o)/2);return s}function cie(i,e,t,n){let r=[],o=[],s=[];r[0]=1;for(let a=1;a<=t;++a){o[a]=e-n[i+1-a],s[a]=n[i+a]-e;let c=0;for(let u=0;u<a;++u){let f=s[u+1],h=o[a-u],p=r[u]/(f+h);r[u]=c+f*p,c=h*p}r[a]=c}return r}function k3(i,e,t,n){let r=L3(i,n,e),o=cie(r,n,i,e),s=new sn(0,0,0,0);for(let a=0;a<=i;++a){let c=t[r-i+a],u=o[a],f=c.w*u;s.x+=c.x*f,s.y+=c.y*f,s.z+=c.z*f,s.w+=c.w*u}return s}function lie(i,e,t,n,r){let o=[];for(let h=0;h<=t;++h)o[h]=0;let s=[];for(let h=0;h<=n;++h)s[h]=o.slice(0);let a=[];for(let h=0;h<=t;++h)a[h]=o.slice(0);a[0][0]=1;let c=o.slice(0),u=o.slice(0);for(let h=1;h<=t;++h){c[h]=e-r[i+1-h],u[h]=r[i+h]-e;let p=0;for(let g=0;g<h;++g){let y=u[g+1],x=c[h-g];a[h][g]=y+x;let v=a[g][h-1]/a[h][g];a[g][h]=p+y*v,p=x*v}a[h][h]=p}for(let h=0;h<=t;++h)s[0][h]=a[h][t];for(let h=0;h<=t;++h){let p=0,g=1,y=[];for(let x=0;x<=t;++x)y[x]=o.slice(0);y[0][0]=1;for(let x=1;x<=n;++x){let v=0,_=h-x,C=t-x;h>=x&&(y[g][0]=y[p][0]/a[C+1][_],v=y[g][0]*a[_][C]);let M=_>=-1?1:-_,S=h-1<=C?x-1:t-h;for(let P=M;P<=S;++P)y[g][P]=(y[p][P]-y[p][P-1])/a[C+1][_+P],v+=y[g][P]*a[_+P][C];h<=C&&(y[g][x]=-y[p][x-1]/a[C+1][h],v+=y[g][x]*a[h][C]),s[x][h]=v;let H=p;p=g,g=H}}let f=t;for(let h=1;h<=n;++h){for(let p=0;p<=t;++p)s[h][p]*=f;f*=t-h}return s}function uie(i,e,t,n,r){let o=r<i?r:i,s=[],a=L3(i,n,e),c=lie(a,n,i,o,e),u=[];for(let f=0;f<t.length;++f){let h=t[f].clone(),p=h.w;h.x*=p,h.y*=p,h.z*=p,u[f]=h}for(let f=0;f<=o;++f){let h=u[a-i].clone().multiplyScalar(c[f][0]);for(let p=1;p<=i;++p)h.add(u[a-i+p].clone().multiplyScalar(c[f][p]));s[f]=h}for(let f=o+1;f<=r+1;++f)s[f]=new sn(0,0,0);return s}function die(i,e){let t=1;for(let r=2;r<=i;++r)t*=r;let n=1;for(let r=2;r<=e;++r)n*=r;for(let r=2;r<=i-e;++r)n*=r;return t/n}function fie(i){let e=i.length,t=[],n=[];for(let o=0;o<e;++o){let s=i[o];t[o]=new z(s.x,s.y,s.z),n[o]=s.w}let r=[];for(let o=0;o<e;++o){let s=t[o].clone();for(let a=1;a<=o;++a)s.sub(r[o-a].clone().multiplyScalar(die(o,a)*n[a]));r[o]=s.divideScalar(n[0])}return r}function B3(i,e,t,n,r){let o=uie(i,e,t,n,r);return fie(o)}var Iv=class extends Nr{constructor(e,t,n,r,o){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=o||this.knots.length-1;for(let s=0;s<n.length;++s){let a=n[s];this.controlPoints[s]=new sn(a.x,a.y,a.z,a.w)}}getPoint(e,t=new z){let n=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=k3(this.degree,this.knots,this.controlPoints,r);return o.w!==1&&o.divideScalar(o.w),n.set(o.x,o.y,o.z)}getTangent(e,t=new z){let n=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=B3(this.degree,this.knots,this.controlPoints,r,1);return n.copy(o[1]).normalize(),n}};var qt,ui,wr,Uv=class extends No{constructor(e){super(e)}load(e,t,n,r){let o=this,s=o.path===""?Ks.extractUrlBase(e):o.path,a=new ka(this.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(c){try{t(o.parse(c,s))}catch(u){r?r(u):console.error(u),o.manager.itemError(e)}},n,r)}parse(e,t){if(pie(e))qt=new MC().parse(e);else{let r=j3(e);if(!mie(r))throw new Error("THREE.FBXLoader: Unknown format.");if(V3(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+V3(r));qt=new xC().parse(r)}let n=new Zd(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new vC(n,this.manager).parse(qt)}},vC=class{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){ui=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),o=new _C().parse(r);return this.parseScene(r,o,n),wr}parseConnections(){let e=new Map;return"Connections"in qt&&qt.Connections.connections.forEach(function(n){let r=n[0],o=n[1],s=n[2];e.has(r)||e.set(r,{parents:[],children:[]});let a={ID:o,relationship:s};e.get(r).parents.push(a),e.has(o)||e.set(o,{parents:[],children:[]});let c={ID:r,relationship:s};e.get(o).children.push(c)}),e}parseImages(){let e={},t={};if("Video"in qt.Objects){let n=qt.Objects.Video;for(let r in n){let o=n[r],s=parseInt(r);if(e[s]=o.RelativeFilename||o.Filename,"Content"in o){let a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,c=typeof o.Content=="string"&&o.Content!=="";if(a||c){let u=this.parseImage(n[r]);t[o.RelativeFilename||o.Filename]=u}}}}for(let n in e){let r=e[n];t[r]!==void 0?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){let t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase(),o;switch(r){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+o+";base64,"+t;{let s=new Uint8Array(t);return window.URL.createObjectURL(new Blob([s],{type:o}))}}parseTextures(e){let t=new Map;if("Texture"in qt.Objects){let n=qt.Objects.Texture;for(let r in n){let o=this.parseTexture(n[r],e);t.set(parseInt(r),o)}}return t}parseTexture(e,t){let n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;let r=e.WrapModeU,o=e.WrapModeV,s=r!==void 0?r.value:0,a=o!==void 0?o.value:0;if(n.wrapS=s===0?qs:Io,n.wrapT=a===0?qs:Io,"Scaling"in e){let c=e.Scaling.value;n.repeat.x=c[0],n.repeat.y=c[1]}if("Translation"in e){let c=e.Translation.value;n.offset.x=c[0],n.offset.y=c[1]}return n}loadTexture(e,t){let n=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),r=e.FileName.split(".").pop().toLowerCase(),o=n.has(r)?this.manager.getHandler(`.${r}`):this.textureLoader;if(!o)return console.warn(`FBXLoader: ${r.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Lr;let s=o.path;s||o.setPath(this.textureLoader.path);let a=ui.get(e.id).children,c;a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(c=t[a[0].ID],(c.indexOf("blob:")===0||c.indexOf("data:")===0)&&o.setPath(void 0));let u=o.load(c);return o.setPath(s),u}parseMaterials(e){let t=new Map;if("Material"in qt.Objects){let n=qt.Objects.Material;for(let r in n){let o=this.parseMaterial(n[r],e);o!==null&&t.set(parseInt(r),o)}}return t}parseMaterial(e,t){let n=e.id,r=e.attrName,o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!ui.has(n))return null;let s=this.parseParameters(e,t,n),a;switch(o.toLowerCase()){case"phong":a=new jc;break;case"lambert":a=new fv;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),a=new jc;break}return a.setValues(s),a.name=r,a}parseParameters(e,t,n){let r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new rt().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new rt().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new rt().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new rt().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new rt().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new rt().fromArray(e.SpecularColor.value).convertSRGBToLinear());let o=this;return ui.get(n).children.forEach(function(s){let a=s.relationship;switch(a){case"Bump":r.bumpMap=o.getTexture(t,s.ID);break;case"Maya|TEX_ao_map":r.aoMap=o.getTexture(t,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=o.getTexture(t,s.ID),r.map!==void 0&&(r.map.colorSpace=ci);break;case"DisplacementColor":r.displacementMap=o.getTexture(t,s.ID);break;case"EmissiveColor":r.emissiveMap=o.getTexture(t,s.ID),r.emissiveMap!==void 0&&(r.emissiveMap.colorSpace=ci);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=o.getTexture(t,s.ID);break;case"ReflectionColor":r.envMap=o.getTexture(t,s.ID),r.envMap!==void 0&&(r.envMap.mapping=tp,r.envMap.colorSpace=ci);break;case"SpecularColor":r.specularMap=o.getTexture(t,s.ID),r.specularMap!==void 0&&(r.specularMap.colorSpace=ci);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=o.getTexture(t,s.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in qt.Objects&&t in qt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=ui.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in qt.Objects){let n=qt.Objects.Deformer;for(let r in n){let o=n[r],s=ui.get(parseInt(r));if(o.attrType==="Skin"){let a=this.parseSkeleton(s,n);a.ID=r,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=s.parents[0].ID,e[r]=a}else if(o.attrType==="BlendShape"){let a={id:r};a.rawTargets=this.parseMorphTargets(s,n),a.id=r,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let n=[];return e.children.forEach(function(r){let o=t[r.ID];if(o.attrType!=="Cluster")return;let s={ID:r.ID,indices:[],weights:[],transformLink:new ot().fromArray(o.TransformLink.a)};"Indexes"in o&&(s.indices=o.Indexes.a,s.weights=o.Weights.a),n.push(s)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){let n=[];for(let r=0;r<e.children.length;r++){let o=e.children[r],s=t[o.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;a.geoID=ui.get(parseInt(o.ID)).children.filter(function(c){return c.relationship===void 0})[0].ID,n.push(a)}return n}parseScene(e,t,n){wr=new _r;let r=this.parseModels(e.skeletons,t,n),o=qt.Objects.Model,s=this;r.forEach(function(c){let u=o[c.ID];s.setLookAtProperties(c,u),ui.get(c.ID).parents.forEach(function(h){let p=r.get(h.ID);p!==void 0&&p.add(c)}),c.parent===null&&wr.add(c)}),this.bindSkeleton(e.skeletons,t,r),this.addGlobalSceneSettings(),wr.traverse(function(c){if(c.userData.transformData){c.parent&&(c.userData.transformData.parentMatrix=c.parent.matrix,c.userData.transformData.parentMatrixWorld=c.parent.matrixWorld);let u=z3(c.userData.transformData);c.applyMatrix4(u),c.updateWorldMatrix()}});let a=new wC().parse();wr.children.length===1&&wr.children[0].isGroup&&(wr.children[0].animations=a,wr=wr.children[0]),wr.animations=a}parseModels(e,t,n){let r=new Map,o=qt.Objects.Model;for(let s in o){let a=parseInt(s),c=o[s],u=ui.get(a),f=this.buildSkeleton(u,e,a,c.attrName);if(!f){switch(c.attrType){case"Camera":f=this.createCamera(u);break;case"Light":f=this.createLight(u);break;case"Mesh":f=this.createMesh(u,t,n);break;case"NurbsCurve":f=this.createCurve(u,t);break;case"LimbNode":case"Root":f=new Vc;break;case"Null":default:f=new _r;break}f.name=c.attrName?In.sanitizeNodeName(c.attrName):"",f.userData.originalName=c.attrName,f.ID=a}this.getTransformData(f,c),r.set(a,f)}return r}buildSkeleton(e,t,n,r){let o=null;return e.parents.forEach(function(s){for(let a in t){let c=t[a];c.rawBones.forEach(function(u,f){if(u.ID===s.ID){let h=o;o=new Vc,o.matrixWorld.copy(u.transformLink),o.name=r?In.sanitizeNodeName(r):"",o.userData.originalName=r,o.ID=n,c.bones[f]=o,h!==null&&o.add(h)}})}}),o}createCamera(e){let t,n;if(e.children.forEach(function(r){let o=qt.Objects.NodeAttribute[r.ID];o!==void 0&&(n=o)}),n===void 0)t=new ri;else{let r=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(r=1);let o=1;n.NearPlane!==void 0&&(o=n.NearPlane.value/1e3);let s=1e3;n.FarPlane!==void 0&&(s=n.FarPlane.value/1e3);let a=window.innerWidth,c=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(a=n.AspectWidth.value,c=n.AspectHeight.value);let u=a/c,f=45;n.FieldOfView!==void 0&&(f=n.FieldOfView.value);let h=n.FocalLength?n.FocalLength.value:null;switch(r){case 0:t=new li(f,u,o,s),h!==null&&t.setFocalLength(h);break;case 1:t=new Bc(-a/2,a/2,c/2,-c/2,o,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new ri;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(r){let o=qt.Objects.NodeAttribute[r.ID];o!==void 0&&(n=o)}),n===void 0)t=new ri;else{let r;n.LightType===void 0?r=0:r=n.LightType.value;let o=16777215;n.Color!==void 0&&(o=new rt().fromArray(n.Color.value).convertSRGBToLinear());let s=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(s=0);let a=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?a=0:a=n.FarAttenuationEnd.value);let c=1;switch(r){case 0:t=new Zl(o,s,a,c);break;case 1:t=new Jd(o,s);break;case 2:let u=Math.PI/3;n.InnerAngle!==void 0&&(u=zn.degToRad(n.InnerAngle.value));let f=0;n.OuterAngle!==void 0&&(f=zn.degToRad(n.OuterAngle.value),f=Math.max(f,1)),t=new Kd(o,s,a,u,f,c);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new Zl(o,s);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,o=null,s=null,a=[];return e.children.forEach(function(c){t.has(c.ID)&&(o=t.get(c.ID)),n.has(c.ID)&&a.push(n.get(c.ID))}),a.length>1?s=a:a.length>0?s=a[0]:(s=new jc({name:No.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(s)),"color"in o.attributes&&a.forEach(function(c){c.vertexColors=!0}),o.FBX_Deformer?(r=new $d(o,s),r.normalizeSkinWeights()):r=new Jn(o,s),r}createCurve(e,t){let n=e.children.reduce(function(o,s){return t.has(s.ID)&&(o=t.get(s.ID)),o},null),r=new gs({name:No.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new zc(n,r)}getTransformData(e,t){let n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=H3(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&ui.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){let o=qt.Objects.Model[r.ID];if("Lcl_Translation"in o){let s=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),wr.add(e.target)):e.lookAt(new z().fromArray(s))}}})}bindSkeleton(e,t,n){let r=this.parsePoseNodes();for(let o in e){let s=e[o];ui.get(parseInt(s.ID)).parents.forEach(function(c){if(t.has(c.ID)){let u=c.ID;ui.get(u).parents.forEach(function(h){n.has(h.ID)&&n.get(h.ID).bind(new qd(s.bones),r[h.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in qt.Objects){let t=qt.Objects.Pose;for(let n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){let r=t[n].PoseNode;Array.isArray(r)?r.forEach(function(o){e[o.Node]=new ot().fromArray(o.Matrix.a)}):e[r.Node]=new ot().fromArray(r.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in qt){if("AmbientColor"in qt.GlobalSettings){let e=qt.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(t!==0||n!==0||r!==0){let o=new rt(t,n,r).convertSRGBToLinear();wr.add(new mv(o,1))}}"UnitScaleFactor"in qt.GlobalSettings&&(wr.userData.unitScaleFactor=qt.GlobalSettings.UnitScaleFactor.value)}}},_C=class{constructor(){this.negativeMaterialIndices=!1}parse(e){let t=new Map;if("Geometry"in qt.Objects){let n=qt.Objects.Geometry;for(let r in n){let o=ui.get(parseInt(r)),s=this.parseGeometry(o,n[r],e);t.set(parseInt(r),s)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){let r=n.skeletons,o=[],s=e.parents.map(function(h){return qt.Objects.Model[h.ID]});if(s.length===0)return;let a=e.children.reduce(function(h,p){return r[p.ID]!==void 0&&(h=r[p.ID]),h},null);e.children.forEach(function(h){n.morphTargets[h.ID]!==void 0&&o.push(n.morphTargets[h.ID])});let c=s[0],u={};"RotationOrder"in c&&(u.eulerOrder=H3(c.RotationOrder.value)),"InheritType"in c&&(u.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(u.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(u.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(u.scale=c.GeometricScaling.value);let f=z3(u);return this.genGeometry(t,a,o,f)}genGeometry(e,t,n,r){let o=new _i;e.attrName&&(o.name=e.attrName);let s=this.parseGeoNode(e,t),a=this.genBuffers(s),c=new Cn(a.vertex,3);if(c.applyMatrix4(r),o.setAttribute("position",c),a.colors.length>0&&o.setAttribute("color",new Cn(a.colors,3)),t&&(o.setAttribute("skinIndex",new Gd(a.weightsIndices,4)),o.setAttribute("skinWeight",new Cn(a.vertexWeights,4)),o.FBX_Deformer=t),a.normal.length>0){let u=new kt().getNormalMatrix(r),f=new Cn(a.normal,3);f.applyNormalMatrix(u),o.setAttribute("normal",f)}if(a.uvs.forEach(function(u,f){let h=f===0?"uv":`uv${f}`;o.setAttribute(h,new Cn(a.uvs[f],2))}),s.material&&s.material.mappingType!=="AllSame"){let u=a.materialIndex[0],f=0;if(a.materialIndex.forEach(function(h,p){h!==u&&(o.addGroup(f,p-f,u),u=h,f=p)}),o.groups.length>0){let h=o.groups[o.groups.length-1],p=h.start+h.count;p!==a.materialIndex.length&&o.addGroup(p,a.materialIndex.length-p,u)}o.groups.length===0&&o.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(o,e,n,r),o}parseGeoNode(e,t){let n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(r,o){r.indices.forEach(function(s,a){n.weightTable[s]===void 0&&(n.weightTable[s]=[]),n.weightTable[s].push({id:o,weight:r.weights[a]})})})),n}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,o=!1,s=[],a=[],c=[],u=[],f=[],h=[],p=this;return e.vertexIndices.forEach(function(g,y){let x,v=!1;g<0&&(g=g^-1,v=!0);let _=[],C=[];if(s.push(g*3,g*3+1,g*3+2),e.color){let M=Rv(y,n,g,e.color);c.push(M[0],M[1],M[2])}if(e.skeleton){if(e.weightTable[g]!==void 0&&e.weightTable[g].forEach(function(M){C.push(M.weight),_.push(M.id)}),C.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);let M=[0,0,0,0],S=[0,0,0,0];C.forEach(function(H,P){let F=H,$=_[P];S.forEach(function(U,D,j){if(F>U){j[D]=F,F=U;let le=M[D];M[D]=$,$=le}})}),_=M,C=S}for(;C.length<4;)C.push(0),_.push(0);for(let M=0;M<4;++M)f.push(C[M]),h.push(_[M])}if(e.normal){let M=Rv(y,n,g,e.normal);a.push(M[0],M[1],M[2])}e.material&&e.material.mappingType!=="AllSame"&&(x=Rv(y,n,g,e.material)[0],x<0&&(p.negativeMaterialIndices=!0,x=0)),e.uv&&e.uv.forEach(function(M,S){let H=Rv(y,n,g,M);u[S]===void 0&&(u[S]=[]),u[S].push(H[0]),u[S].push(H[1])}),r++,v&&(p.genFace(t,e,s,x,a,c,u,f,h,r),n++,r=0,s=[],a=[],c=[],u=[],f=[],h=[])}),t}getNormalNewell(e){let t=new z(0,0,0);for(let n=0;n<e.length;n++){let r=e[n],o=e[(n+1)%e.length];t.x+=(r.y-o.y)*(r.z+o.z),t.y+=(r.z-o.z)*(r.x+o.x),t.z+=(r.x-o.x)*(r.y+o.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){let t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new z(0,1,0):new z(0,0,1)).cross(t).normalize(),o=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:o}}flattenVertex(e,t,n){return new Ge(e.dot(t),e.dot(n))}genFace(e,t,n,r,o,s,a,c,u,f){let h;if(f>3){let p=[],g=t.baseVertexPositions||t.vertexPositions;for(let _=0;_<n.length;_+=3)p.push(new z(g[n[_]],g[n[_+1]],g[n[_+2]]));let{tangent:y,bitangent:x}=this.getNormalTangentAndBitangent(p),v=[];for(let _ of p)v.push(this.flattenVertex(_,y,x));h=Gl.triangulateShape(v,[])}else h=[[0,1,2]];for(let[p,g,y]of h)e.vertex.push(t.vertexPositions[n[p*3]]),e.vertex.push(t.vertexPositions[n[p*3+1]]),e.vertex.push(t.vertexPositions[n[p*3+2]]),e.vertex.push(t.vertexPositions[n[g*3]]),e.vertex.push(t.vertexPositions[n[g*3+1]]),e.vertex.push(t.vertexPositions[n[g*3+2]]),e.vertex.push(t.vertexPositions[n[y*3]]),e.vertex.push(t.vertexPositions[n[y*3+1]]),e.vertex.push(t.vertexPositions[n[y*3+2]]),t.skeleton&&(e.vertexWeights.push(c[p*4]),e.vertexWeights.push(c[p*4+1]),e.vertexWeights.push(c[p*4+2]),e.vertexWeights.push(c[p*4+3]),e.vertexWeights.push(c[g*4]),e.vertexWeights.push(c[g*4+1]),e.vertexWeights.push(c[g*4+2]),e.vertexWeights.push(c[g*4+3]),e.vertexWeights.push(c[y*4]),e.vertexWeights.push(c[y*4+1]),e.vertexWeights.push(c[y*4+2]),e.vertexWeights.push(c[y*4+3]),e.weightsIndices.push(u[p*4]),e.weightsIndices.push(u[p*4+1]),e.weightsIndices.push(u[p*4+2]),e.weightsIndices.push(u[p*4+3]),e.weightsIndices.push(u[g*4]),e.weightsIndices.push(u[g*4+1]),e.weightsIndices.push(u[g*4+2]),e.weightsIndices.push(u[g*4+3]),e.weightsIndices.push(u[y*4]),e.weightsIndices.push(u[y*4+1]),e.weightsIndices.push(u[y*4+2]),e.weightsIndices.push(u[y*4+3])),t.color&&(e.colors.push(s[p*3]),e.colors.push(s[p*3+1]),e.colors.push(s[p*3+2]),e.colors.push(s[g*3]),e.colors.push(s[g*3+1]),e.colors.push(s[g*3+2]),e.colors.push(s[y*3]),e.colors.push(s[y*3+1]),e.colors.push(s[y*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(o[p*3]),e.normal.push(o[p*3+1]),e.normal.push(o[p*3+2]),e.normal.push(o[g*3]),e.normal.push(o[g*3+1]),e.normal.push(o[g*3+2]),e.normal.push(o[y*3]),e.normal.push(o[y*3+1]),e.normal.push(o[y*3+2])),t.uv&&t.uv.forEach(function(x,v){e.uvs[v]===void 0&&(e.uvs[v]=[]),e.uvs[v].push(a[v][p*2]),e.uvs[v].push(a[v][p*2+1]),e.uvs[v].push(a[v][g*2]),e.uvs[v].push(a[v][g*2+1]),e.uvs[v].push(a[v][y*2]),e.uvs[v].push(a[v][y*2+1])})}addMorphTargets(e,t,n,r){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let o=this;n.forEach(function(s){s.rawTargets.forEach(function(a){let c=qt.Objects.Geometry[a.geoID];c!==void 0&&o.genMorphGeometry(e,t,c,r,a.name)})})}genMorphGeometry(e,t,n,r,o){let s=t.Vertices!==void 0?t.Vertices.a:[],a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],c=n.Vertices!==void 0?n.Vertices.a:[],u=n.Indexes!==void 0?n.Indexes.a:[],f=e.attributes.position.count*3,h=new Float32Array(f);for(let x=0;x<u.length;x++){let v=u[x]*3;h[v]=c[x*3],h[v+1]=c[x*3+1],h[v+2]=c[x*3+2]}let p={vertexIndices:a,vertexPositions:h,baseVertexPositions:s},g=this.genBuffers(p),y=new Cn(g.vertex,3);y.name=o||n.attrName,y.applyMatrix4(r),e.morphAttributes.position.push(y)}parseNormals(e){let t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a,o=[];return n==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:o,mappingType:t,referenceType:n}}parseUVs(e){let t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a,o=[];return n==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:r,indices:o,mappingType:t,referenceType:n}}parseVertexColors(e){let t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a,o=[];n==="IndexToDirect"&&(o=e.ColorIndex.a);for(let s=0,a=new rt;s<r.length;s+=4)a.fromArray(r,s).convertSRGBToLinear().toArray(r,s);return{dataSize:4,buffer:r,indices:o,mappingType:t,referenceType:n}}parseMaterialIndices(e){let t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};let r=e.Materials.a,o=[];for(let s=0;s<r.length;++s)o.push(s);return{dataSize:1,buffer:r,indices:o,mappingType:t,referenceType:n}}parseNurbsGeometry(e){let t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new _i;let n=t-1,r=e.KnotVector.a,o=[],s=e.Points.a;for(let h=0,p=s.length;h<p;h+=4)o.push(new sn().fromArray(s,h));let a,c;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){a=n,c=r.length-1-a;for(let h=0;h<n;++h)o.push(o[h])}let f=new Iv(n,r,o,a,c).getPoints(o.length*12);return new _i().setFromPoints(f)}},wC=class{parse(){let e=[],t=this.parseClips();if(t!==void 0)for(let n in t){let r=t[n],o=this.addClip(r);e.push(o)}return e}parseClips(){if(qt.Objects.AnimationCurve===void 0)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=qt.Objects.AnimationCurveNode,t=new Map;for(let n in e){let r=e[n];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){let o={id:r.id,attr:r.attrName,curves:{}};t.set(o.id,o)}}return t}parseAnimationCurves(e){let t=qt.Objects.AnimationCurve;for(let n in t){let r={id:t[n].id,times:t[n].KeyTime.a.map(gie),values:t[n].KeyValueFloat.a},o=ui.get(r.id);if(o!==void 0){let s=o.parents[0].ID,a=o.parents[0].relationship;a.match(/X/)?e.get(s).curves.x=r:a.match(/Y/)?e.get(s).curves.y=r:a.match(/Z/)?e.get(s).curves.z=r:a.match(/DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=r)}}}parseAnimationLayers(e){let t=qt.Objects.AnimationLayer,n=new Map;for(let r in t){let o=[],s=ui.get(parseInt(r));s!==void 0&&(s.children.forEach(function(c,u){if(e.has(c.ID)){let f=e.get(c.ID);if(f.curves.x!==void 0||f.curves.y!==void 0||f.curves.z!==void 0){if(o[u]===void 0){let h=ui.get(c.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(h!==void 0){let p=qt.Objects.Model[h.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",c);return}let g={modelName:p.attrName?In.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};wr.traverse(function(y){y.ID===p.id&&(g.transform=y.matrix,y.userData.transformData&&(g.eulerOrder=y.userData.transformData.eulerOrder))}),g.transform||(g.transform=new ot),"PreRotation"in p&&(g.preRotation=p.PreRotation.value),"PostRotation"in p&&(g.postRotation=p.PostRotation.value),o[u]=g}}o[u]&&(o[u][f.attr]=f)}else if(f.curves.morph!==void 0){if(o[u]===void 0){let h=ui.get(c.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID,p=ui.get(h).parents[0].ID,g=ui.get(p).parents[0].ID,y=ui.get(g).parents[0].ID,x=qt.Objects.Model[y],v={modelName:x.attrName?In.sanitizeNodeName(x.attrName):"",morphName:qt.Objects.Deformer[h].attrName};o[u]=v}o[u][f.attr]=f}}}),n.set(parseInt(r),o))}return n}parseAnimStacks(e){let t=qt.Objects.AnimationStack,n={};for(let r in t){let o=ui.get(parseInt(r)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=e.get(o[0].ID);n[r]={name:t[r].attrName,layer:s}}return n}addClip(e){let t=[],n=this;return e.layer.forEach(function(r){t=t.concat(n.generateTracks(r))}),new Yd(e.name,-1,t)}generateTracks(e){let t=[],n=new z,r=new z;if(e.transform&&e.transform.decompose(n,new Qn,r),n=n.toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){let o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){let o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,n,r){let o=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(o,t,n);return new vs(e+"."+r,o,s)}generateRotationTrack(e,t,n,r,o){let s,a;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){let h=this.interpolateRotations(t.x,t.y,t.z,o);s=h[0],a=h[1]}n!==void 0&&(n=n.map(zn.degToRad),n.push(o),n=new vi().fromArray(n),n=new Qn().setFromEuler(n)),r!==void 0&&(r=r.map(zn.degToRad),r.push(o),r=new vi().fromArray(r),r=new Qn().setFromEuler(r).invert());let c=new Qn,u=new vi,f=[];if(!a||!s)return new Oo(e+".quaternion",[0],[0]);for(let h=0;h<a.length;h+=3)u.set(a[h],a[h+1],a[h+2],o),c.setFromEuler(u),n!==void 0&&c.premultiply(n),r!==void 0&&c.multiply(r),h>2&&new Qn().fromArray(f,(h-3)/3*4).dot(c)<0&&c.set(-c.x,-c.y,-c.z,-c.w),c.toArray(f,h/3*4);return new Oo(e+".quaternion",s,f)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,n=t.values.map(function(o){return o/100}),r=wr.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ys(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,r){return n-r}),t.length>1){let n=1,r=t[0];for(let o=1;o<t.length;o++){let s=t[o];s!==r&&(t[n]=s,r=s,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){let r=n,o=[],s=-1,a=-1,c=-1;return e.forEach(function(u){if(t.x&&(s=t.x.times.indexOf(u)),t.y&&(a=t.y.times.indexOf(u)),t.z&&(c=t.z.times.indexOf(u)),s!==-1){let f=t.x.values[s];o.push(f),r[0]=f}else o.push(r[0]);if(a!==-1){let f=t.y.values[a];o.push(f),r[1]=f}else o.push(r[1]);if(c!==-1){let f=t.z.values[c];o.push(f),r[2]=f}else o.push(r[2])}),o}interpolateRotations(e,t,n,r){let o=[],s=[];o.push(e.times[0]),s.push(zn.degToRad(e.values[0])),s.push(zn.degToRad(t.values[0])),s.push(zn.degToRad(n.values[0]));for(let a=1;a<e.values.length;a++){let c=[e.values[a-1],t.values[a-1],n.values[a-1]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;let u=c.map(zn.degToRad),f=[e.values[a],t.values[a],n.values[a]];if(isNaN(f[0])||isNaN(f[1])||isNaN(f[2]))continue;let h=f.map(zn.degToRad),p=[f[0]-c[0],f[1]-c[1],f[2]-c[2]],g=[Math.abs(p[0]),Math.abs(p[1]),Math.abs(p[2])];if(g[0]>=180||g[1]>=180||g[2]>=180){let x=Math.max(...g)/180,v=new vi(...u,r),_=new vi(...h,r),C=new Qn().setFromEuler(v),M=new Qn().setFromEuler(_);C.dot(M)&&M.set(-M.x,-M.y,-M.z,-M.w);let S=e.times[a-1],H=e.times[a]-S,P=new Qn,F=new vi;for(let $=0;$<1;$+=1/x)P.copy(C.clone().slerp(M.clone(),$)),o.push(S+$*H),F.setFromQuaternion(P,r),s.push(F.x),s.push(F.y),s.push(F.z)}else o.push(e.times[a]),s.push(zn.degToRad(e.values[a])),s.push(zn.degToRad(t.values[a])),s.push(zn.degToRad(n.values[a]))}return[o,s]}},xC=class{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Pv,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,n=e.split(/[\r\n]+/);return n.forEach(function(r,o){let s=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(s||a)return;let c=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),f=r.match("^\\t{"+(t.currentIndent-1)+"}}");c?t.parseNodeBegin(r,c):u?t.parseNodeProperty(r,u,n[++o]):f?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){let n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:n},s=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,o):n in a?(n==="PoseNode"?a.PoseNode.push(o):a[n].id!==void 0&&(a[n]={},a[n][a[n].id]=a[n]),s.id!==""&&(a[n][s.id]=o)):typeof s.id=="number"?(a[n]={},a[n][s.id]=o):n!=="Properties70"&&(n==="PoseNode"?a[n]=[o]:a[n]=o),typeof s.id=="number"&&(o.id=s.id),s.name!==""&&(o.attrName=s.name),s.type!==""&&(o.attrType=s.type),this.pushStack(o)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),o=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&o===","&&(o=n.replace(/"/g,"").replace(/,$/,"").trim());let s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,r,o);return}if(r==="C"){let c=o.split(",").slice(1),u=parseInt(c[0]),f=parseInt(c[1]),h=o.split(",").slice(3);h=h.map(function(p){return p.trim().replace(/^"/,"")}),r="connections",o=[u,f],vie(o,h),s[r]===void 0&&(s[r]=[])}r==="Node"&&(s.id=o),r in s&&Array.isArray(s[r])?s[r].push(o):r!=="a"?s[r]=o:s.a=o,this.setCurrentProp(s,r),r==="a"&&o.slice(-1)!==","&&(s.a=yC(o))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=yC(t.a))}parseNodeSpecialProperty(e,t,n){let r=n.split('",').map(function(f){return f.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=r[0],s=r[1],a=r[2],c=r[3],u=r[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=yC(u);break}this.getPrevNode()[o]={type:s,type2:a,flag:c,value:u},this.setCurrentProp(this.getPrevNode(),o)}},MC=class{parse(e){let t=new Fv(e);t.skip(23);let n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);let r=new Pv;for(;!this.endOfContent(t);){let o=this.parseNode(t,n);o!==null&&r.add(o.name,o)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let n={},r=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let s=e.getUint8(),a=e.getString(s);if(r===0)return null;let c=[];for(let p=0;p<o;p++)c.push(this.parseProperty(e));let u=c.length>0?c[0]:"",f=c.length>1?c[1]:"",h=c.length>2?c[2]:"";for(n.singleProperty=o===1&&e.getOffset()===r;r>e.getOffset();){let p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,n,p)}return n.propertyList=c,typeof u=="number"&&(n.id=u),f!==""&&(n.attrName=f),h!==""&&(n.attrType=h),a!==""&&(n.name=a),n}parseSubNode(e,t,n){if(n.singleProperty===!0){let r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if(e==="Connections"&&n.name==="C"){let r=[];n.propertyList.forEach(function(o,s){s!==0&&r.push(o)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(n.name==="Properties70")Object.keys(n).forEach(function(o){t[o]=n[o]});else if(e==="Properties70"&&n.name==="P"){let r=n.propertyList[0],o=n.propertyList[1],s=n.propertyList[2],a=n.propertyList[3],c;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?c=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:c=n.propertyList[4],t[r]={type:o,type2:s,flag:a,value:c}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){let t=e.getString(1),n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":let r=e.getUint32(),o=e.getUint32(),s=e.getUint32();if(o===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}let a=N3(new Uint8Array(e.getArrayBuffer(s))),c=new Fv(a.buffer);switch(t){case"b":case"c":return c.getBooleanArray(r);case"d":return c.getFloat64Array(r);case"f":return c.getFloat32Array(r);case"i":return c.getInt32Array(r);case"l":return c.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},Fv=class{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){let t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){let t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let r=n.indexOf(0);return r>=0&&(n=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(n)}},Pv=class{add(e,t){this[e]=t}};function pie(i){let e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===j3(i,0,e.length)}function mie(i){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],t=0;function n(r){let o=i[r-1];return i=i.slice(t+r),t++,o}for(let r=0;r<e.length;++r)if(n(1)===e[r])return!1;return!0}function V3(i){let e=/FBXVersion: (\d+)/,t=i.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function gie(i){return i/46186158e3}var yie=[];function Rv(i,e,t,n){let r;switch(n.mappingType){case"ByPolygonVertex":r=i;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(r=n.indices[r]);let o=r*n.dataSize,s=o+n.dataSize;return _ie(yie,n.buffer,o,s)}var gC=new vi,nf=new z;function z3(i){let e=new ot,t=new ot,n=new ot,r=new ot,o=new ot,s=new ot,a=new ot,c=new ot,u=new ot,f=new ot,h=new ot,p=new ot,g=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(nf.fromArray(i.translation)),i.preRotation){let D=i.preRotation.map(zn.degToRad);D.push(i.eulerOrder||vi.DEFAULT_ORDER),t.makeRotationFromEuler(gC.fromArray(D))}if(i.rotation){let D=i.rotation.map(zn.degToRad);D.push(i.eulerOrder||vi.DEFAULT_ORDER),n.makeRotationFromEuler(gC.fromArray(D))}if(i.postRotation){let D=i.postRotation.map(zn.degToRad);D.push(i.eulerOrder||vi.DEFAULT_ORDER),r.makeRotationFromEuler(gC.fromArray(D)),r.invert()}i.scale&&o.scale(nf.fromArray(i.scale)),i.scalingOffset&&a.setPosition(nf.fromArray(i.scalingOffset)),i.scalingPivot&&s.setPosition(nf.fromArray(i.scalingPivot)),i.rotationOffset&&c.setPosition(nf.fromArray(i.rotationOffset)),i.rotationPivot&&u.setPosition(nf.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(h.copy(i.parentMatrix),f.copy(i.parentMatrixWorld));let y=t.clone().multiply(n).multiply(r),x=new ot;x.extractRotation(f);let v=new ot;v.copyPosition(f);let _=v.clone().invert().multiply(f),C=x.clone().invert().multiply(_),M=o,S=new ot;if(g===0)S.copy(x).multiply(y).multiply(C).multiply(M);else if(g===1)S.copy(x).multiply(C).multiply(y).multiply(M);else{let j=new ot().scale(new z().setFromMatrixScale(h)).clone().invert(),le=C.clone().multiply(j);S.copy(x).multiply(y).multiply(le).multiply(M)}let H=u.clone().invert(),P=s.clone().invert(),F=e.clone().multiply(c).multiply(u).multiply(t).multiply(n).multiply(r).multiply(H).multiply(a).multiply(s).multiply(o).multiply(P),$=new ot().copyPosition(F),U=f.clone().multiply($);return p.copyPosition(U),F=p.clone().multiply(S),F.premultiply(f.invert()),F}function H3(i){i=i||0;let e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function yC(i){return i.split(",").map(function(t){return parseFloat(t)})}function j3(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=i.byteLength),new TextDecoder().decode(new Uint8Array(i,e,t))}function vie(i,e){for(let t=0,n=i.length,r=e.length;t<r;t++,n++)i[n]=e[t]}function _ie(i,e,t,n){for(let r=t,o=0;r<n;r++,o++)i[o]=e[r];return i}function G3(i,e){let t=new Uv(e);return new Promise((n,r)=>{t.load(i,o=>{n(o)},void 0,o=>{o instanceof Error?r(o):r(new Error("An unknown error occurred"))})})}var wie=/^[og]\s*(.+)?/,xie=/^mtllib /,Mie=/^usemtl /,bie=/^usemap /,W3=/\s+/,$3=new z,bC=new z,q3=new z,X3=new z,Bo=new z,Ov=new rt;function Eie(){let i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}let n=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,o){let s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);let a={index:this.materials.length,name:r||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:s!==void 0?s.smooth:this.smooth,groupStart:s!==void 0?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(c){let u={index:typeof c=="number"?c:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){let o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),r&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},n&&n.name&&typeof n.clone=="function"){let r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){let n=parseInt(e,10);return(n>=0?n-1:n+t/3)*3},parseNormalIndex:function(e,t){let n=parseInt(e,10);return(n>=0?n-1:n+t/3)*3},parseUVIndex:function(e,t){let n=parseInt(e,10);return(n>=0?n-1:n+t/2)*2},addVertex:function(e,t,n){let r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){let t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){let r=this.normals,o=this.object.geometry.normals;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){let r=this.vertices,o=this.object.geometry.normals;$3.fromArray(r,e),bC.fromArray(r,t),q3.fromArray(r,n),Bo.subVectors(q3,bC),X3.subVectors($3,bC),Bo.cross(X3),Bo.normalize(),o.push(Bo.x,Bo.y,Bo.z),o.push(Bo.x,Bo.y,Bo.z),o.push(Bo.x,Bo.y,Bo.z)},addColor:function(e,t,n){let r=this.colors,o=this.object.geometry.colors;r[e]!==void 0&&o.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&o.push(r[t+0],r[t+1],r[t+2]),r[n]!==void 0&&o.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){let r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0],r[e+1]),o.push(r[t+0],r[t+1]),o.push(r[n+0],r[n+1])},addDefaultUV:function(){let e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){let t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,o,s,a,c,u){let f=this.vertices.length,h=this.parseVertexIndex(e,f),p=this.parseVertexIndex(t,f),g=this.parseVertexIndex(n,f);if(this.addVertex(h,p,g),this.addColor(h,p,g),a!==void 0&&a!==""){let y=this.normals.length;h=this.parseNormalIndex(a,y),p=this.parseNormalIndex(c,y),g=this.parseNormalIndex(u,y),this.addNormal(h,p,g)}else this.addFaceNormal(h,p,g);if(r!==void 0&&r!==""){let y=this.uvs.length;h=this.parseUVIndex(r,y),p=this.parseUVIndex(o,y),g=this.parseUVIndex(s,y),this.addUV(h,p,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";let t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){let o=this.parseVertexIndex(e[n],t);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";let n=this.vertices.length,r=this.uvs.length;for(let o=0,s=e.length;o<s;o++)this.addVertexLine(this.parseVertexIndex(e[o],n));for(let o=0,s=t.length;o<s;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return i.startObject("",!1),i}var Nv=class extends No{constructor(e){super(e),this.materials=null}load(e,t,n,r){let o=this,s=new ka(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},n,r)}setMaterials(e){return this.materials=e,this}parse(e){let t=new Eie;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));let n=e.split(`
`),r=[];for(let a=0,c=n.length;a<c;a++){let u=n[a].trimStart();if(u.length===0)continue;let f=u.charAt(0);if(f!=="#")if(f==="v"){let h=u.split(W3);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(Ov.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),t.colors.push(Ov.r,Ov.g,Ov.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(f==="f"){let p=u.slice(1).trim().split(W3),g=[];for(let x=0,v=p.length;x<v;x++){let _=p[x];if(_.length>0){let C=_.split("/");g.push(C)}}let y=g[0];for(let x=1,v=g.length-1;x<v;x++){let _=g[x],C=g[x+1];t.addFace(y[0],_[0],C[0],y[1],_[1],C[1],y[2],_[2],C[2])}}else if(f==="l"){let h=u.substring(1).trim().split(" "),p=[],g=[];if(u.indexOf("/")===-1)p=h;else for(let y=0,x=h.length;y<x;y++){let v=h[y].split("/");v[0]!==""&&p.push(v[0]),v[1]!==""&&g.push(v[1])}t.addLineGeometry(p,g)}else if(f==="p"){let p=u.slice(1).trim().split(" ");t.addPointGeometry(p)}else if((r=wie.exec(u))!==null){let h=(" "+r[0].slice(1).trim()).slice(1);t.startObject(h)}else if(Mie.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(xie.test(u))t.materialLibraries.push(u.substring(7).trim());else if(bie.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(f==="s"){if(r=u.split(" "),r.length>1){let p=r[1].trim().toLowerCase();t.object.smooth=p!=="0"&&p!=="off"}else t.object.smooth=!0;let h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();let o=new _r;if(o.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let a=0,c=t.objects.length;a<c;a++){let u=t.objects[a],f=u.geometry,h=u.materials,p=f.type==="Line",g=f.type==="Points",y=!1;if(f.vertices.length===0)continue;let x=new _i;x.setAttribute("position",new Cn(f.vertices,3)),f.normals.length>0&&x.setAttribute("normal",new Cn(f.normals,3)),f.colors.length>0&&(y=!0,x.setAttribute("color",new Cn(f.colors,3))),f.hasUVIndices===!0&&x.setAttribute("uv",new Cn(f.uvs,2));let v=[];for(let C=0,M=h.length;C<M;C++){let S=h[C],H=S.name+"_"+S.smooth+"_"+y,P=t.materials[H];if(this.materials!==null){if(P=this.materials.create(S.name),p&&P&&!(P instanceof gs)){let F=new gs;ki.prototype.copy.call(F,P),F.color.copy(P.color),P=F}else if(g&&P&&!(P instanceof Zs)){let F=new Zs({size:10,sizeAttenuation:!1});ki.prototype.copy.call(F,P),F.color.copy(P.color),F.map=P.map,P=F}}P===void 0&&(p?P=new gs:g?P=new Zs({size:1,sizeAttenuation:!1}):P=new jc,P.name=S.name,P.flatShading=!S.smooth,P.vertexColors=y,t.materials[H]=P),v.push(P)}let _;if(v.length>1){for(let C=0,M=h.length;C<M;C++){let S=h[C];x.addGroup(S.groupStart,S.groupCount,C)}p?_=new ql(x,v):g?_=new Hc(x,v):_=new Jn(x,v)}else p?_=new ql(x,v[0]):g?_=new Hc(x,v[0]):_=new Jn(x,v[0]);_.name=u.name,o.add(_)}else if(t.vertices.length>0){let a=new Zs({size:1,sizeAttenuation:!1}),c=new _i;c.setAttribute("position",new Cn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(c.setAttribute("color",new Cn(t.colors,3)),a.vertexColors=!0);let u=new Hc(c,a);o.add(u)}return o}};function Y3(i,e){return gn(this,null,function*(){let t=new Nv(e);try{return yield new Promise((r,o)=>{t.load(i,s=>{r(s)},void 0,s=>{s instanceof Error?o(s):o(new Error("An unknown error occurred"))})})}catch(n){throw console.error("Error loading OBJ model:",n),n}})}function Z3(i,e){return gn(this,null,function*(){let t=i.type,n;if(console.log(i),t.includes("gltf")||t.includes("glb")?n="gltf":t.includes("fbx")?n="fbx":t.includes("obj")&&(n="obj"),!n)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0442\u0438\u043F \u043C\u043E\u0434\u0435\u043B\u0438 \u043F\u043E MIME-\u0442\u0438\u043F\u0443.");let r=URL.createObjectURL(i),o;try{switch(n){case"gltf":case"glb":o=T3(r,e);break;case"fbx":o=G3(r,e);break;case"obj":o=Y3(r,e);break;default:throw new Error("\u041D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043C\u043E\u0434\u0435\u043B\u0438: "+n)}return yield o}finally{URL.revokeObjectURL(r)}})}var rf=(()=>{class i{httpModule;constructor(t){this.httpModule=t}GETfurnitureModel(t,n){let r=new $t().set("jwtToken",t).set("furnitureId",n);return this.httpModule.get(`${yn}furniture/model`,{params:r,responseType:"blob"})}POSTloadFurnitureModel(t,n,r){let o=new FormData;o.append("model",t);let s=new $t().set("jwtToken",n).set("furnitureId",r).set("fileName",t.name);return this.httpModule.post(`${yn}furniture/model/upload`,o,{params:s})}PUTupdateFurnitureModel(t,n,r){let o=new FormData;o.append("model",t);let s=new $t().set("jwtToken",n).set("furnitureId",r).set("fileName",t.name);return this.httpModule.put(`${yn}furniture/model/update/${r}`,o,{params:s})}DELETEfurnitureModel(t,n){let r=new $t().set("jwtToken",t);return this.httpModule.delete(`${yn}furniture/model/delete/${n}`,{params:r})}static \u0275fac=function(n){return new(n||i)(Xe($i))};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var J3=(()=>{let e=class e{constructor(n,r){this.document=n,this.platformId=r,this.documentIsAccessible=_F(this.platformId)}static getCookieRegExp(n){let r=n.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+r+"|;\\s*"+r+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(n){try{return decodeURIComponent(n)}catch{return n}}check(n){return this.documentIsAccessible?(n=encodeURIComponent(n),e.getCookieRegExp(n).test(this.document.cookie)):!1}get(n){if(this.documentIsAccessible&&this.check(n)){n=encodeURIComponent(n);let o=e.getCookieRegExp(n).exec(this.document.cookie);return o[1]?e.safeDecodeURIComponent(o[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let n={},r=this.document;return r.cookie&&r.cookie!==""&&r.cookie.split(";").forEach(o=>{let[s,a]=o.split("=");n[e.safeDecodeURIComponent(s.replace(/^ /,""))]=e.safeDecodeURIComponent(a)}),n}set(n,r,o,s,a,c,u,f){if(!this.documentIsAccessible)return;if(typeof o=="number"||o instanceof Date||s||a||c||u){let g={expires:o,path:s,domain:a,secure:c,sameSite:u||"Lax",partitioned:f};this.set(n,r,g);return}let h=encodeURIComponent(n)+"="+encodeURIComponent(r)+";",p=o||{};if(p.expires)if(typeof p.expires=="number"){let g=new Date(new Date().getTime()+p.expires*1e3*60*60*24);h+="expires="+g.toUTCString()+";"}else h+="expires="+p.expires.toUTCString()+";";p.path&&(h+="path="+p.path+";"),p.domain&&(h+="domain="+p.domain+";"),p.secure===!1&&p.sameSite==="None"&&(p.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${n} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),p.secure&&(h+="secure;"),p.sameSite||(p.sameSite="Lax"),h+="sameSite="+p.sameSite+";",p.partitioned&&(h+="Partitioned;"),this.document.cookie=h}delete(n,r,o,s,a="Lax"){if(!this.documentIsAccessible)return;let c=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(n,"",{expires:c,path:r,domain:o,secure:s,sameSite:a})}deleteAll(n,r,o,s="Lax"){if(!this.documentIsAccessible)return;let a=this.getAll();for(let c in a)a.hasOwnProperty(c)&&this.delete(c,n,r,o,s)}};e.\u0275fac=function(r){return new(r||e)(Xe(ii),Xe(Jr))},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Vi=(()=>{class i{cookieService;constructor(t){this.cookieService=t}setJwt(t,n){let r=new Date;n==="long"?r.setDate(r.getDate()+7):r.setMinutes(r.getMinutes()+10),this.cookieService.set("jwt",t,{expires:r,path:"/",sameSite:"Strict"})}deleteJwt(){this.cookieService.delete("jwt","/")}getJwt(){return this.cookieService.get("jwt")}setUserType(t){this.cookieService.set("userType",t,{expires:new Date().getDate()+7,path:"/",sameSite:"Strict"})}getUserType(){return this.cookieService.get("userType")}deleteUserType(){this.cookieService.delete("userType")}static \u0275fac=function(n){return new(n||i)(Xe(J3))};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Lv=(()=>{class i{elementRef;spinner;furnitureModelService;furnitureCardService;userCookieService;route;errorHandler;renderer;camera;scene;controls;animationFrameId=null;canvasRatioOfWindow=1.5;roomProportions;raycaster=new yv;mouse=new Ge;targetobject=void 0;rectangleMesh;roomData;furnitureId;saveObjectsEmitter=new _n;constructor(t,n,r,o,s,a,c){this.elementRef=t,this.spinner=n,this.furnitureModelService=r,this.furnitureCardService=o,this.userCookieService=s,this.route=a,this.errorHandler=c}ngAfterViewInit(){this.initThreeJs()}ngOnChanges(t){if(this.roomData=t.roomData.currentValue,!this.roomData||this.scene===void 0||this.roomData===t.roomData.previousValue)return;t.roomData.previousValue!==void 0&&this.clearRoom(),this.camera.position.set(0,5,0),this.camera.rotation.set(zn.degToRad(-90),0,0),this.roomProportions=this.roomData.roomProportions,this.createRoom(),this.rectangleMesh.rotation.x=zn.degToRad(-90);let n=ze({objects:this.roomData.objects},this.roomData.roomProportions);if(this.getObjectSize(this.rectangleMesh).width===0)return;this.loadRoom(n);let r=this.route.snapshot.params.furnitureId;!r||t.roomData.previousValue||(this.spinner.show(),this.addModel(r,!0))}addModel(t,n,r){let o=this.userCookieService.getJwt();o&&this.furnitureCardService.GETfurnitureCard(t).subscribe({next:s=>gn(this,null,function*(){let a=s.furnitureCard.proportions,c=this.furnitureModelService.GETfurnitureModel(o,t),u=yield Lw(c);this.loadFurnitureModel(u,a,t,n,r)}),error:s=>{console.log(s),this.errorHandler.setError("Error while loading model",5e3)}})}initThreeJs(){this.scene=new ev,this.camera=new li(75,window.innerWidth/window.innerHeight,.1,1e3);let t=new pv(11184810,0,2);this.scene.add(t),this.renderer=new Qy({alpha:!0});let n=this.elementRef.nativeElement.querySelector("#canvasContainer");this.camera.position.z=5,this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),n.appendChild(this.renderer.domElement),this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}createRoundedRectangleGeometry(t,n,r,o){let s=new dp;return s.moveTo(-t/2+r,-n/2),s.lineTo(t/2-r,-n/2),s.quadraticCurveTo(t/2,-n/2,t/2,-n/2+r),s.lineTo(t/2,n/2-r),s.quadraticCurveTo(t/2,n/2,t/2-r,n/2),s.lineTo(-t/2+r,n/2),s.quadraticCurveTo(-t/2,n/2,-t/2,n/2-r),s.lineTo(-t/2,-n/2+r),s.quadraticCurveTo(-t/2,-n/2,-t/2+r,-n/2),new dv(s,o)}createRoom(){if(!this.roomData)return;let t=this.roomData.roomProportions,n=.1;this.controls=new Cv(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.15,this.controls.enableZoom=!0,this.controls.minDistance=1,this.controls.maxDistance=10;let r=5;this.controls.maxPolarAngle=zn.degToRad(90-r),this.createRoomShape(t.width,t.length,n),this.rectangleMesh.name="roomFloorBase",this.rectangleMesh}calculateObjectSaveData(t){let n=this.getObjectSize(this.rectangleMesh),r=t.position;return{objectId:t.userData.id,xMetersDistance:r.x/n.width*this.roomProportions.width,zMetersDistance:r.z/n.length*this.roomProportions.length,yRotate:t.rotation.y}}calculateMoveObjectData(t){let n=this.getObjectSize(this.rectangleMesh);return{xDistance:t.xMetersDistance*n.width/this.roomProportions.width,zDistance:t.zMetersDistance*n.length/this.roomProportions.length,yRotate:t.yRotate}}onMouseClick(t){if(this.targetobject){this.targetobject=void 0;return}let n=t.target.getBoundingClientRect(),r=(t.clientX-n.left)/n.width*2-1,o=-(t.clientY-n.top)/n.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let a=this.raycaster.intersectObjects(this.scene.children).find(c=>c.object.name!=="roomFloorBase"&&c.object.type!=="Scene"&&c.object.type!=="HemisphereLight")?.object;a&&(this.targetobject=a.parent?a.parent:a)}rotateTargetObject(t){if(!this.targetobject)return;let n=-.05;switch(t.key){case"q":case"\u0439":this.targetobject.rotation.y-=n;break;case"e":case"\u0443":this.targetobject.rotation.y+=n}}onMousemove(t){if(!this.targetobject)return;let n=t.target.getBoundingClientRect(),r=(t.clientX-n.left)/n.width*2-1,o=-(t.clientY-n.top)/n.height*2+1;this.mouse.x=r,this.mouse.y=o,this.raycaster.setFromCamera(this.mouse,this.camera);let s=this.raycaster.intersectObject(this.rectangleMesh);if(s.length===0)return;let a=s[0].point.x,c=s[0].point.z,u=this.getObjectSize(this.rectangleMesh),f=this.getObjectSize(this.targetobject),h=-u.width/2+f.width/2,p=u.width/2-f.width/2,g=a;g<h?g=h:g>p&&(g=p);let y=-u.length/2+f.length/2,x=u.length/2-f.length/2,v=c;v<y?v=y:v>x&&(v=x),this.targetobject.position.set(g,0,v)}createRoomShape(t,n,r){let o=this.calculateFrustumBounds(),s=t/n,a,c;s<=1?(a=o.height*s,c=o.height):(a=o.width,c=o.width/s);let f=this.createRoundedRectangleGeometry(a*.9,c*.9,r,10),h=new Fo({color:3427905});this.rectangleMesh=new Jn(f,h),this.scene.add(this.rectangleMesh),this.renderer.render(this.scene,this.camera),this.rectangleMesh.updateMatrixWorld(!0)}calculateFrustumBounds(){let t=this.camera.position.y,n=zn.degToRad(this.camera.fov),r=2*Math.tan(n/2)*Math.abs(t);return{width:r*this.camera.aspect,height:r}}onResize(t){this.renderer.setSize(window.innerWidth/this.canvasRatioOfWindow,window.innerHeight/this.canvasRatioOfWindow),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.render(this.scene,this.camera)}addObjectToScene(t,n,r,o){t.userData={id:r},this.scaleImportModel(t,n),this.scene.add(t),this.renderer.render(this.scene,this.camera),o&&(t.position.set(o.xDistance,0,o.zDistance),t.rotation.y=o.yRotate)}loadFurnitureModel(t,n,r,o,s){return gn(this,null,function*(){this.spinner.show();try{let a=yield Z3(t);s?this.addObjectToScene(a,n,r,s):this.addObjectToScene(a,n,r),this.spinner.hide(),o&&this.saveRoom()}catch{this.spinner.hide()}})}getObjectSize(t){let r=new Or().setFromObject(t).getSize(new z);return{width:r.x,length:r.z,height:r.y}}scaleImportModel(t,n){let r=this.getObjectSize(t),o=this.getObjectSize(this.rectangleMesh),s=r.width>r.length?o.width/r.width:o.length/r.length,c=(r.width>r.length?n.width/this.roomProportions.width:n.length/this.roomProportions.length)*s;t.scale.set(c,c,c)}saveRoom(){if(!this.roomData)return;let t=this.scene.children.filter(r=>r.name!=="roomFloorBase"&&r.type!=="Scene"&&r.type!=="HemisphereLight").map(r=>this.calculateObjectSaveData(r)),n=t;this.roomData.objects=t,this.saveObjectsEmitter.emit(n)}loadRoom(t){this.userCookieService.getJwt()&&t.objects.forEach(r=>{this.addModel(r.objectId,!1,this.calculateMoveObjectData(r))})}clearRoom(){for(let t=this.scene.children.length-1;t>=0;t--){let n=this.scene.children[t];n.type!=="Scene"&&n.type!=="HemisphereLight"&&this.scene.remove(n)}}static \u0275fac=function(n){return new(n||i)(fe(on),fe(NS),fe(rf),fe(Ac),fe(Vi),fe(mr),fe(Ji))};static \u0275cmp=ln({type:i,selectors:[["app-scene"]],hostBindings:function(n,r){n&1&&Fe("click",function(s){return r.onMouseClick(s)})("keydown",function(s){return r.rotateTargetObject(s)},!1,Kf)("mousemove",function(s){return r.onMousemove(s)})("resize",function(s){return r.onResize(s)},!1,Kf)},inputs:{roomData:"roomData",furnitureId:"furnitureId"},outputs:{saveObjectsEmitter:"saveObjectsEmitter"},standalone:!0,features:[Si,un],decls:5,vars:0,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","none"],[1,"Loader"],[2,"font-size","20px","color","white"],["id","canvasContainer"]],template:function(n,r){n&1&&(B(0,"ngx-spinner",0),Ie(1,"div",1),B(2,"p",2),ge(3,"Loading..."),V()(),Ie(4,"div",3))},dependencies:[M3,x3],styles:['.Loader[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;max-width:14.6rem;margin-top:7.3rem;margin-bottom:7.3rem}.Loader[_ngcontent-%COMP%]:before, .Loader[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%;animation-duration:1.8s;animation-iteration-count:infinite;animation-timing-function:ease-in-out;filter:drop-shadow(0 0 .7555555556rem rgba(255,255,255,.75))}.Loader[_ngcontent-%COMP%]:before{width:100%;padding-bottom:100%;box-shadow:inset 0 0 0 1.7rem #fff;animation-name:_ngcontent-%COMP%_pulsA}.Loader[_ngcontent-%COMP%]:after{width:calc(100% - 3.4rem);padding-bottom:calc(100% - 3.4rem);box-shadow:0 0 #fff;animation-name:_ngcontent-%COMP%_pulsB}@keyframes _ngcontent-%COMP%_pulsA{0%{box-shadow:inset 0 0 0 1.7rem #fff;opacity:1}50%,to{box-shadow:inset 0 0 #fff;opacity:0}}@keyframes _ngcontent-%COMP%_pulsB{0%,50%{box-shadow:0 0 #fff;opacity:0}to{box-shadow:0 0 0 1.7rem #fff;opacity:1}}[_nghost-%COMP%]{display:block;height:100%}.funcBtnsSpan[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);bottom:50px;display:flex;gap:10px}.funcBtn[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:15px;border-radius:10px;border:none;font-family:arial;font-weight:1000;width:25vw;cursor:pointer}#canvasContainer[_ngcontent-%COMP%]{display:flex;justify-content:center}']})}return i})();var eL=wD(Q3());var Cie=["scene"];function Aie(i,e){if(i&1){let t=Lt();B(0,"button",24),Fe("click",function(){He(t);let r=Ee();return je(r.deleteRoom())}),Ie(1,"img",25),V()}}function Tie(i,e){if(i&1){let t=Lt();B(0,"button",26),Fe("touchstart",function(r){let o=He(t).index,s=Ee();return je(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("keydown.enter",function(r){let o=He(t).index,s=Ee();return je(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())})("mousedown",function(r){let o=He(t).index,s=Ee();return je(s.currentViewRoom===void 0?s.clickRoom(r,o):s.openScene())}),ge(1),V()}if(i&2){let t=e.$implicit,n=e.index,r=Ee();qn("grid-area",t.gridArea)("display",(r.currentViewRoom!==void 0&&r.currentViewRoom==n||r.currentViewRoom===void 0)&&!r.sceneOpenToggle?"block":"none"),eo("data-index",n),de(),pr(" ",t.name," ")}}function Die(i,e){if(i&1&&(B(0,"a",29),ge(1),V()),i&2){let t=e.$implicit;_e("href","/shop/"+t.toLowerCase(),Gi),de(),pr(" ",t," ")}}function Iie(i,e){if(i&1&&(B(0,"span",27),pt(1,Die,2,2,"a",28),V()),i&2){let t=Ee();de(),_e("ngForOf",t.furnitureCategoryDataArray)}}var Zc=(()=>{class i{renderer;elementRef;router;planHouse;lastPlanHouse=void 0;currentIdClickedRoom=void 0;previousGridArea;roomSpan;roomSpanSettings;isDragging=!1;isClick=!1;formElement;clickTimer;isDoubleClick=!1;furnitureListElement;toggleModuleButton;currentViewRoom=void 0;sceneOpenToggle=!1;furnitureCategoryDataArray=["Chair","Lamp","Sofa","Table"];sceneComponent;initialized=new _n;planHouseEmitter=new _n;callSaveEmitter=new _n;emitPlanHouse(){this.planHouseEmitter.emit(this.planHouse)}oldSizeViewRoom=void 0;roomForm=new Ni({width:new Bn(null,[Dn.required,this.numberValidator()]),height:new Bn(null,[Dn.required,this.numberValidator()]),length:new Bn(null,[Dn.required,this.numberValidator()]),name:new Bn("",[Dn.required])});updateRoomObjects(t){this.currentViewRoom!==void 0&&(this.planHouse[this.currentViewRoom].objects=t,this.emitPlanHouse(),this.saveHouse())}saveHouse(){this.callSaveEmitter.emit()}numberValidator(){return t=>{let n=t.value;return!isNaN(parseFloat(n))&&isFinite(n)?null:{notANumber:{value:t.value}}}}constructor(t,n,r){this.renderer=t,this.elementRef=n,this.router=r}ngAfterViewInit(){this.furnitureListElement=this.elementRef.nativeElement.querySelector(".furnitureCategory"),this.roomSpan=this.elementRef.nativeElement.querySelector(".roomSpan"),this.calculateRoomSpanSettings(),this.formElement=this.elementRef.nativeElement.querySelector("form"),this.toggleModuleButton=this.elementRef.nativeElement.querySelector(".addModuleBtn"),this.initialized.emit()}openScene(){this.sceneOpenToggle=!0}closeScene(){this.sceneComponent.saveRoom(),this.sceneOpenToggle=!1}openViewRoom(t){this.formElement.classList.remove("openAddModule"),this.currentViewRoom=t,this.lastPlanHouse=this.planHouse[t];let n=this.roomSpan.querySelector(`[data-index="${t}"]`),{width:r,height:o}=n.getBoundingClientRect(),{width:s,height:a}=this.roomSpan.getBoundingClientRect();this.oldSizeViewRoom={height:o,width:r},this.renderer.setStyle(n,"width",r+"px"),this.renderer.setStyle(n,"height",o+"px"),setTimeout(()=>{let c=r>o?s/2/r:a/2/o;this.renderer.setStyle(n,"width",r*c+"px"),this.renderer.setStyle(n,"height",o*c+"px"),this.renderer.setStyle(n,"border","white 3px dashed"),this.renderer.addClass(n,"roomView"),this.renderer.setStyle(this.roomSpan,"display","flex")},0)}closeViewRoom(){let t=this.roomSpan.querySelector(`[data-index="${this.currentViewRoom}"]`);!t||!this.oldSizeViewRoom||(this.currentViewRoom=void 0,this.currentIdClickedRoom=void 0,this.renderer.setStyle(t,"width",this.oldSizeViewRoom.width+"px"),this.renderer.setStyle(t,"height",this.oldSizeViewRoom.height+"px"),this.renderer.removeStyle(t,"border"),this.renderer.removeClass(t,"roomView"),this.renderer.setStyle(this.roomSpan,"display","grid"),setTimeout(()=>{this.renderer.removeStyle(t,"width"),this.renderer.removeStyle(t,"height")},750))}updateRoom(){if(!(this.currentIdClickedRoom===void 0||!this.roomForm.value.name)){if(this.roomForm.value.name===this.planHouse[this.currentIdClickedRoom].name){this.toggleOpenRoomModule();return}this.planHouse[this.currentIdClickedRoom].name=this.roomForm.value.name,this.roomForm.patchValue({width:null,height:null,length:null,name:""}),this.emitPlanHouse(),this.toggleOpenRoomModule(),this.saveHouse()}}addRoom(){let{width:t,length:n,height:r,name:o}=this.roomForm.value;this.toggleOpenRoomModule();let s={name:o,roomProportions:{width:+t,height:+r,length:+n},objects:[],gridArea:""},a=this.findFreeSpace(s.roomProportions);a&&(s.gridArea=a,this.planHouse=[...this.planHouse,s],this.emitPlanHouse(),this.saveHouse())}findFreeSpace(t){let r=Array.from({length:10},()=>Array(10).fill(!1));this.planHouse.forEach(o=>{let[s,a,c,u]=o.gridArea.split("/").map(Number);for(let f=s-1;f<c-1;f++)for(let h=a-1;h<u-1;h++)r[f][h]=!0});for(let o=0;o<=10-t.length;o++)for(let s=0;s<=10-t.width;s++){let a=!0;for(let c=o;c<o+t.length;c++){for(let u=s;u<s+t.width;u++)if(r[c][u]){a=!1;break}if(!a)break}if(a){for(let c=o;c<o+t.length;c++)for(let u=s;u<s+t.width;u++)r[c][u]=!0;return`${o+1} / ${s+1} / ${o+t.length+1} / ${s+t.width+1}`}}return!1}deleteRoom(){this.currentIdClickedRoom!==void 0&&(this.planHouse.splice(this.currentIdClickedRoom,1),this.currentIdClickedRoom=void 0,this.toggleOpenRoomModule(),this.emitPlanHouse(),this.saveHouse())}toggleControls(t){t?(this.roomForm.get("width")?.enable(),this.roomForm.get("height")?.enable(),this.roomForm.get("length")?.enable()):(this.roomForm.get("width")?.disable(),this.roomForm.get("height")?.disable(),this.roomForm.get("length")?.disable())}toggleOpenRoomModule(t){if(this.toggleModuleButton){if(t!==void 0){let{width:n,height:r,length:o}=this.planHouse[t].roomProportions;this.roomForm.patchValue({width:n,height:r,length:o,name:this.planHouse[t].name}),this.toggleControls(this.currentIdClickedRoom===void 0),this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg");return}this.formElement.classList.contains("openAddModule")?(this.formElement.classList.remove("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","0deg"),this.currentIdClickedRoom=void 0,this.roomForm.patchValue({width:null,height:null,length:null,name:""})):(this.formElement.classList.add("openAddModule"),this.renderer.setStyle(this.toggleModuleButton,"rotate","135deg"))}}calculateRoomSpanSettings(){let t=this.roomSpan.getBoundingClientRect();this.roomSpanSettings={startX:t.left,startY:t.top-document.documentElement.scrollTop,endX:t.width+t.left,endY:t.height+t.top,gap:+window.getComputedStyle(this.roomSpan).getPropertyValue("gap").slice(0,-2)}}clickRoom(t,n){if(this.startClickTime=new Date().getTime(),this.currentViewRoom!==void 0)return;this.currentIdClickedRoom=n;let r=t.target;this.previousGridArea=window.getComputedStyle(r).getPropertyValue("grid-area"),this.isClick&&!this.isDragging?(this.isDoubleClick=!0,this.isClick=!1,this.openViewRoom(this.currentIdClickedRoom)):this.isClick=!0,setTimeout(()=>{this.isDoubleClick||!this.isClick||(this.calculateRoomSpanSettings(),this.renderer.setStyle(r,"cursor","grabbing"),this.isDragging=!0,this.renderer.setStyle(r,"background-color","#A3B18A"),this.currentIdClickedRoom=n,this.isClick=!1)},350)}onMouseLeave(t){this.isDragging&&this.currentIdClickedRoom!==void 0&&this.onMouseUp(t)}startClickTime;onMouseUp(t){if(this.sceneOpenToggle!==!0&&this.currentViewRoom===void 0){if(this.isDragging&&this.currentIdClickedRoom!==void 0){if(this.isDragging=!1,t instanceof MouseEvent&&this.resetRoomPosition(t.clientX,t.clientY),typeof TouchEvent<"u"&&t instanceof TouchEvent){let r=t.changedTouches[0];this.resetRoomPosition(r.clientX,r.clientY)}let n=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');n&&this.renderer.removeStyle(n,"cursor"),this.currentIdClickedRoom=void 0,this.emitPlanHouse()}this.clickTimer=setTimeout(()=>{if(this.isClick&&!this.isDragging){if(this.currentIdClickedRoom==null)return;this.toggleOpenRoomModule(this.currentIdClickedRoom)}this.isClick=!1,this.isDoubleClick=!1,this.isDragging=!1,clearTimeout(this.clickTimer)},250)}}resetRoomPosition(t,n){let r=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(r){let o=this.calculateGridArea(t,n);o&&!this.isAreaOccupied(o,this.currentIdClickedRoom)?(this.renderer.setStyle(r,"grid-area",o),this.planHouse[this.currentIdClickedRoom].gridArea=o):this.renderer.setStyle(r,"grid-area",this.previousGridArea),this.renderer.removeStyle(r,"background-color"),this.renderer.removeStyle(r,"z-index"),this.currentIdClickedRoom=void 0}}onMouseMove(t){if(t.preventDefault(),this.isDragging&&this.currentIdClickedRoom!==void 0){let n=this.roomSpan.querySelector(`[data-index="${this.currentIdClickedRoom}"]`);if(!n)return;let r=t instanceof MouseEvent?this.calculateGridArea(t.clientX,t.clientY):this.calculateGridArea(t.changedTouches[0].clientX,t.changedTouches[0].clientY);this.renderer.setStyle(n,"z-index","4"),r&&(this.renderer.setStyle(n,"grid-area",r),this.isAreaOccupied(r,this.currentIdClickedRoom)?this.renderer.setStyle(n,"background-color","#F18DC4"):this.renderer.setStyle(n,"background-color","#A3B18A"))}}isAreaOccupied(t,n){let[r,o,s,a]=t.split("/").map(Number);for(let c=0;c<this.planHouse.length;c++){if(c===n)continue;let[u,f,h,p]=this.planHouse[c].gridArea.split("/").map(Number);if(r<h&&s>u&&o<p&&a>f)return!0}return!1}calculateGridArea(t,n){if(this.currentIdClickedRoom===void 0)return;let r=this.planHouse[this.currentIdClickedRoom].roomProportions,o=t-this.roomSpanSettings.startX,s=n-this.roomSpanSettings.startY-document.documentElement.scrollTop,a=(this.roomSpanSettings.endX-this.roomSpanSettings.startX)/10+this.roomSpanSettings.gap,c=Math.floor(o/a)+1,u=Math.floor(s/a)+1,f=c+Math.round(r.width)-1,h=u+Math.round(r.length)-1;if(!(f>10||h>10))return`${u} / ${c} / ${h+1} / ${f+1}`}moveRoom(t){if(this.currentIdClickedRoom===void 0||!this.isDragging)return;let n=this.elementRef.nativeElement.querySelector(`[data-index="${this.currentIdClickedRoom}"]`),[r,o,s,a]=this.planHouse[this.currentIdClickedRoom].gridArea.split("/").map(Number);switch(t.key){case"ArrowUp":r-=1,s-=1;break;case"ArrowDown":r+=1,s+=1;break;case"ArrowRight":o+=1,a+=1;break;case"ArrowLeft":o-=1,a-=1;break}if(r<1||o<1||s>11||a>11)return;let c=`${r} / ${o} / ${s} / ${a}`;this.isAreaOccupied(c,this.currentIdClickedRoom)||(this.renderer.setStyle(n,"grid-area",c),this.planHouse[this.currentIdClickedRoom].gridArea=c)}onContextMenu(t){t.preventDefault()}onScroll=(0,eL.throttle)(()=>{this.currentIdClickedRoom!==void 0&&this.calculateRoomSpanSettings()},50);escapeDragginMod(){if(this.currentIdClickedRoom===void 0)return;this.isDragging=!1,this.currentIdClickedRoom=void 0;let t=this.elementRef.nativeElement.querySelector('[style*="cursor: grabbing"]');t&&(this.renderer.removeStyle(t,"background-color"),this.renderer.removeStyle(t,"cursor"))}static \u0275fac=function(n){return new(n||i)(fe(Ci),fe(on),fe(gr))};static \u0275cmp=ln({type:i,selectors:[["app-plan-house"]],viewQuery:function(n,r){if(n&1&&Wi(Cie,5),n&2){let o;Fi(o=Pi())&&(r.sceneComponent=o.first)}},hostBindings:function(n,r){n&1&&Fe("mouseleave",function(s){return r.onMouseLeave(s)},!1,fr)("touchend",function(s){return r.onMouseUp(s)},!1,fr)("keyup.Enter",function(s){return r.onMouseUp(s)},!1,fr)("mouseup",function(s){return r.onMouseUp(s)},!1,fr)("touchmove",function(s){return r.onMouseMove(s)},!1,fr)("mousemove",function(s){return r.onMouseMove(s)},!1,fr)("keydown.ArrowUp",function(s){return r.moveRoom(s)},!1,fr)("keydown.ArrowDown",function(s){return r.moveRoom(s)},!1,fr)("keydown.ArrowRight",function(s){return r.moveRoom(s)},!1,fr)("keydown.ArrowLeft",function(s){return r.moveRoom(s)},!1,fr)("contextmenu",function(s){return r.onContextMenu(s)},!1,fr)("scroll",function(){return r.onScroll()},!1,Kf)("keydown.Escape",function(){return r.escapeDragginMod()},!1,fr)},inputs:{planHouse:"planHouse"},outputs:{initialized:"initialized",planHouseEmitter:"planHouseEmitter",callSaveEmitter:"callSaveEmitter"},standalone:!0,features:[un],decls:33,vars:14,consts:[["scene",""],[1,"planHouseModule"],[1,"addModuleSpan"],["type","button","tabindex","0",1,"addModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt","",2,"transition","all 0.5s","pointer-events","none"],[1,"addModuleFormContent",3,"ngSubmit","formGroup"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","width",1,"inputLabel"],["placeholder","5m","formControlName","width","id","width","type","text",1,"addModuleInput"],["for","length",1,"inputLabel"],["placeholder","3m","formControlName","length","id","length","type","text",1,"addModuleInput"],["for","height",1,"inputLabel"],["placeholder","1.7m","formControlName","height","id","height","type","text",1,"addModuleInput"],["for","name",1,"inputLabel"],["placeholder","Bedroom","formControlName","name","id","name","type","text",1,"addModuleInput"],[1,"functionShopsModuleBtns"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],["class","deleteItemAddModuleBtn",3,"click",4,"ngIf"],[1,"workArea"],[3,"saveObjectsEmitter","roomData"],[1,"roomSpan"],["class","room",3,"grid-area","display","touchstart","keydown.enter","mousedown",4,"ngFor","ngForOf"],["class","furnitureCategoriesButtonsSpan",4,"ngIf"],[1,"deleteItemAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/deleteIcon.svg","alt",""],[1,"room",3,"touchstart","keydown.enter","mousedown"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton",3,"href",4,"ngFor","ngForOf"],[1,"furnitureCategoryButton",3,"href"]],template:function(n,r){if(n&1){let o=Lt();B(0,"span",1)(1,"span",2)(2,"button",3),Fe("click",function(){return He(o),je(r.currentViewRoom===void 0?r.toggleOpenRoomModule():r.sceneOpenToggle===!0?r.closeScene():r.closeViewRoom())}),Ie(3,"img",4),V(),B(4,"form",5),Fe("ngSubmit",function(){return He(o),je(r.currentIdClickedRoom===void 0?r.addRoom():r.updateRoom())}),B(5,"h2",6),ge(6,"Room parameters"),V(),B(7,"span",7)(8,"label",8),ge(9,"Width"),V(),Ie(10,"input",9),V(),B(11,"span",7)(12,"label",10),ge(13,"Length"),V(),Ie(14,"input",11),V(),B(15,"span",7)(16,"label",12),ge(17,"Height"),V(),Ie(18,"input",13),V(),B(19,"span",7)(20,"label",14),ge(21,"Name"),V(),Ie(22,"input",15),V(),B(23,"span",16)(24,"button",17),ge(25,"Continue"),V(),pt(26,Aie,2,0,"button",18),V()()(),B(27,"span",19)(28,"app-scene",20,0),Fe("saveObjectsEmitter",function(a){return He(o),je(r.updateRoomObjects(a))}),V(),B(30,"span",21),pt(31,Tie,2,6,"button",22)(32,Iie,2,1,"span",23),V()()()}n&2&&(de(2),qn("rotate",r.currentViewRoom===void 0?"0deg":"225deg"),de(2),qn("opacity",r.currentViewRoom===void 0?1:0),_e("formGroup",r.roomForm),de(20),_e("disabled",!r.roomForm.valid),de(2),_e("ngIf",r.currentIdClickedRoom!==void 0),de(2),qn("opacity",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0)("z-index",r.sceneOpenToggle&&r.currentViewRoom!==void 0?1:0),_e("roomData",r.currentViewRoom!==void 0?r.planHouse[r.currentViewRoom]:r.lastPlanHouse),de(3),_e("ngForOf",r.planHouse),de(),_e("ngIf",!r.sceneOpenToggle&&r.currentViewRoom!==void 0))},dependencies:[Oi,To,Hs,Ao,Vs,zs,as,cs,gi,Lv],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.workArea[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;grid-area:1/1/2/2}app-scene[_ngcontent-%COMP%]{grid-area:1/1/2/2}.roomSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;gap:10px;grid-template-columns:repeat(10,calc(10% - 10px));grid-template-rows:repeat(10,calc(10% - 10px));aspect-ratio:1;justify-content:space-around;z-index:0}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;cursor:pointer;z-index:3;border:none;transition:all .75s ease-in-out,background-color .4s ease-in-out;color:#dad7cd;font-size:1em}.planHouseModule[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-template-columns:1fr}.roomView[_ngcontent-%COMP%]{margin-left:30px;align-self:start;margin-top:30px}.addModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:5;width:35px;aspect-ratio:1;margin-top:10px;justify-self:end;cursor:pointer;rotate:45deg;transition:all .4s ease-in-out}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.addModuleSpan[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:35%;justify-self:end;padding-right:30px;height:fit-content;margin-top:30px;margin-right:30px}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:calc(100% - 60px);padding:0 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 5px #fff;overflow:hidden;transition:all .4s ease-in-out;max-height:0;border-radius:10px;background-color:#000;z-index:4}.openAddModule[_ngcontent-%COMP%]{max-height:1000px;padding:30px 45px}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.functionShopsModuleBtns[_ngcontent-%COMP%]{display:flex;gap:10px}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;margin-bottom:20px;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%]{width:20%;height:50px;display:flex;align-items:center;justify-content:center;border-radius:15px;background-color:#a3b18a;border:none;cursor:pointer}.deleteItemAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:25px}.none[_ngcontent-%COMP%]{display:none}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:30%;height:80vh;justify-content:center}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;color:#fff;cursor:pointer;border:none;text-decoration:none}.furnitureCategory[_ngcontent-%COMP%]{grid-area:1/1/2/2;background-color:#000;z-index:4;display:flex;flex-direction:column;gap:30px;height:0px;padding:0 10px;overflow:hidden;transition:all .5s ease-in-out}.furnitureCategoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.furnitureList[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.openFurniturelist[_ngcontent-%COMP%]{height:100%;padding:50px 10px 10px}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);display:flex;gap:10px;flex-direction:column;align-items:center}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}']})}return i})();var kv=(()=>{class i{httpModule;constructor(t){this.httpModule=t}baseUrl=yn+"finder?q=";GETfindFurnitures(t){return this.httpModule.get(this.baseUrl+t).toPromise()}static \u0275fac=function(n){return new(n||i)(Xe($i))};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Fie(i,e){i&1&&(B(0,"h3"),ge(1,"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E :("),V())}function Pie(i,e){if(i&1&&(B(0,"span",10)(1,"div")(2,"h3",11),ge(3),V(),B(4,"a",12),ge(5),V()(),Ie(6,"img",13),V()),i&2){let t=e.$implicit,n=Ee();de(3),Mn(t.name),de(),_e("href",n.getUrl(t.id,t.category),Gi),de(),pr("",t.cost," \u0440\u0443\u0431"),de(),_e("src",n.getImage(t.id,t.colorRequest),Gi)}}var tL=(()=>{class i{finderService;elementRef;renderer;imageService;variantsSpan;input;constructor(t,n,r,o){this.finderService=t,this.elementRef=n,this.renderer=r,this.imageService=o}foundFurniture;debounceTimer=null;ngAfterViewInit(){this.variantsSpan=this.elementRef.nativeElement.querySelector(".variantsSpan"),this.input=this.elementRef.nativeElement.querySelector(".finderInput")}clearInput(){this.input.value="",this.closeFoundResultsList()}inputProcess(){let t=this.input.value;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{if(t.length===0){this.closeFoundResultsList();return}this.findFurnitures(t)},300)}findFurnitures(t){return gn(this,null,function*(){let n=yield this.finderService.GETfindFurnitures(t);this.openFoundResultsList(),n.length>0?(this.closeFoundResultsList(),setTimeout(()=>{this.foundFurniture=n,this.openFoundResultsList()},550)):this.foundFurniture!==void 0?this.foundFurniture.length=0:this.foundFurniture=[]})}openFoundResultsList(){this.variantsSpan!==void 0&&this.renderer.addClass(this.variantsSpan,"variantsSpanOpen")}closeFoundResultsList(){this.variantsSpan!==void 0&&this.renderer.removeClass(this.variantsSpan,"variantsSpanOpen")}getImage(t,n){return this.imageService.GETmainImage(t,n)}getUrl=(t,n)=>`shop/${n}/${t}`;static \u0275fac=function(n){return new(n||i)(fe(kv),fe(on),fe(Ci),fe(js))};static \u0275cmp=ln({type:i,selectors:[["app-finder"]],standalone:!0,features:[un],decls:10,vars:2,consts:[[1,"finder"],[1,"finderSpan"],[1,"finderBtn","btn"],["loading","lazy","src","/assets/images/searchIcon.svg","alt","search"],["type","text",1,"finderInput",3,"input"],[1,"closeBtn","btn",3,"click"],["src","/assets/images/cancelIcon.svg","alt",""],[1,"variantsSpan"],[4,"ngIf"],["class","variantCard",4,"ngFor","ngForOf"],[1,"variantCard"],[1,"cardName"],[1,"cardCost",3,"href"],["alt","",1,"cardImage",3,"src"]],template:function(n,r){n&1&&(B(0,"span",0)(1,"span",1)(2,"button",2),Ie(3,"img",3),V(),B(4,"input",4),Fe("input",function(){return r.inputProcess()}),V(),B(5,"button",5),Fe("click",function(){return r.clearInput()}),Ie(6,"img",6),V()(),B(7,"span",7),pt(8,Fie,2,0,"h3",8)(9,Pie,7,4,"span",9),V()()),n&2&&(de(8),_e("ngIf",r.foundFurniture!==void 0&&r.foundFurniture.length===0),de(),_e("ngForOf",r.foundFurniture))},dependencies:[Oi,gi],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.finder[_ngcontent-%COMP%]{width:100%;min-height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto 1fr}.finderSpan[_ngcontent-%COMP%]{width:100%;height:48px;display:flex;gap:10px;border-radius:15px;background-color:#fff;padding:0;z-index:10;grid-area:1/1/2/2}.btn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%}.btn[_ngcontent-%COMP%]{aspect-ratio:1;background:none;border:none;cursor:pointer}.finderBtn[_ngcontent-%COMP%]{width:15%}.closeBtn[_ngcontent-%COMP%]{height:50%;align-self:center;filter:opacity(.75)}.finderInput[_ngcontent-%COMP%]{width:75%;background:none;border:none;outline:none}.variantsSpan[_ngcontent-%COMP%]{transition:all .75s ease-in-out;overflow:hidden;max-height:0;grid-area:1/1/2/2;background-color:#000;border-radius:15px;box-shadow:0 0 10px #fff;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:10px;box-sizing:border-box;z-index:9}.variantsSpanOpen[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.variantsSpanOpen[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.variantsSpanOpen[_ngcontent-%COMP%]{padding:60px 10px 10px;overflow-y:scroll;max-height:40vh}.variantCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;height:70%;transition:all .75s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}.cardCost[_ngcontent-%COMP%]{border-radius:5px;color:gray;transition:all .75s ease-in-out;cursor:pointer;text-decoration:none}.variantCard[_ngcontent-%COMP%]:hover{height:90%}.variantCard[_ngcontent-%COMP%]:hover   .cardCost[_ngcontent-%COMP%]{padding:15px 45px;color:#000;background-color:#fff}.variantCard[_ngcontent-%COMP%]:hover   .cardName[_ngcontent-%COMP%]{margin-bottom:25px}.variantCard[_ngcontent-%COMP%]:hover   .cardImage[_ngcontent-%COMP%]{height:65%}.cardImage[_ngcontent-%COMP%]{height:50%;width:fit-content;transition:all .75s ease-in-out}.cardName[_ngcontent-%COMP%]{color:#fff;transition:all .75s ease-in-out}.variantCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin:5px 0}.variantsSpan[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{color:#fff}']})}return i})();var Vo=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=ln({type:i,selectors:[["app-navigation-panel"]],standalone:!0,features:[un],decls:12,vars:0,consts:[[1,"navigationSpan"],["routerLink","/",1,"homeBtn","navigationBtn"],[1,"mainBtns"],["routerLink","/account",1,"accountBtn","navigationBtn"],["loading","lazy","src","/assets/images/accountIcon.svg","alt","account"],["routerLink","/plan",1,"createBtn","navigationBtn"],["id","Layer_1","version","1.1","viewBox","0 0 32 32",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["d","M28,14H18V4c0-1.104-0.896-2-2-2s-2,0.896-2,2v10H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h10v10c0,1.104,0.896,2,2,2 s2-0.896,2-2V18h10c1.104,0,2-0.896,2-2S29.104,14,28,14z","fill","#DAD7CD"],["routerLink","/create/new",1,"navigationBtn"],["loading","lazy","src","/assets/images/furnitureIcon.svg","alt","furniture"]],template:function(n,r){n&1&&(B(0,"span",0)(1,"a",1),ge(2,"HQ"),V(),Ie(3,"app-finder"),B(4,"span",2)(5,"a",3),Ie(6,"img",4),V(),B(7,"a",5),Gg(),B(8,"svg",6),Ie(9,"path",7),V()(),G2(),B(10,"a",8),Ie(11,"img",9),V()()())},dependencies:[Ec,tL],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.navigationBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{height:100%}app-finder[_ngcontent-%COMP%]{height:80%;width:50%}.homeBtn[_ngcontent-%COMP%]{color:#dad7cd;font-family:Gloock;font-size:27.5px;text-decoration:none;align-content:center}.navigationSpan[_ngcontent-%COMP%]{display:flex;background-color:#000;border-radius:10px;gap:5px;justify-content:space-around;min-width:350px;width:75vw;margin:0 auto;height:60px;align-items:center;box-shadow:0 0 10px #fff}.navigationBtn[_ngcontent-%COMP%]{height:80%;background:none;border:none;cursor:pointer}.mainBtns[_ngcontent-%COMP%]{height:75%;display:flex;gap:15px;align-items:center}']})}return i})();var nL=i=>({activeChapterBtn:i}),iL=i=>({opacityDisable:i}),rL=(()=>{class i{elementRef;constructor(t){this.elementRef=t}focusOnFinder(){let t=this.elementRef.nativeElement.querySelector(".finderInput");t&&t.focus()}furnitureTemplate="create";openViewFurniture(){this.furnitureTemplate="view"}openCreateFurniture(){this.furnitureTemplate="create"}focusFinder(){document.querySelector("app-navigation-panel").scrollIntoView({behavior:"smooth",block:"start"})}imagesData={images:["/assets/images/sofaSliderPhotos/1.png","/assets/images/sofaSliderPhotos/2.png","/assets/images/sofaSliderPhotos/3.png","/assets/images/sofaSliderPhotos/4.png"],idMainImage:0};furnitureExamplesData={name:"Onte Bucle White",colors:[],description:"Width: 170 cm  Length: 240 cm  Height: 83 cmRecommended-place: corner of the roomTransformation mechanism: pantographSupport material: spliced \u200B\u200BsolidClearance from floor: 12 cmExistence of a drawer for linen: yesArmrest color: main fabric colorRemovable cover: noDecorative pillows: without pillowsMaximum load per seat: 100 kg",shops:[{cost:125990,url:"https://www.divan.ru/blagoveshchensk/product/divan-uglovoj-onte-bucle-white"},{cost:84990,url:"https://avtorm.ru/catalog/product-divan-uglovoy-onte-bucle-white"}],category:"sofa",proportions:{width:1,height:1,length:1}};exampleClientColors=[{color:"#FFC2CC",imagesData:this.imagesData}];viewExampleData={name:this.furnitureExamplesData.name,colors:[{color:"#FFC2CC",imagesData:this.imagesData}],description:this.furnitureExamplesData.description,shops:this.furnitureExamplesData.shops,category:this.furnitureExamplesData.category,proportions:this.furnitureExamplesData.proportions};planHouseExampleData=[{name:"\u041F\u0440\u0438\u0445\u043E\u0436\u0430\u044F",objects:[],gridArea:"1 / 1 / 3 / 4",roomProportions:{width:3,length:2,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:"3 / 1 / 4 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0421\u0430\u043D\u0443\u0437\u0435\u043B",objects:[],gridArea:" 4 / 1 / 5 / 2",roomProportions:{width:1,length:1,height:3}},{name:"\u0413\u043E\u0441\u0442\u0438\u043D\u043D\u0430\u044F",objects:[],gridArea:"5 / 1 / 8 / 5",roomProportions:{width:4,length:3,height:3}},{name:"\u0421\u043F\u0430\u043B\u044C\u043D\u044F",objects:[],gridArea:" 3 / 2 / 5 / 4",roomProportions:{width:2,length:2,height:3}}];static \u0275fac=function(n){return new(n||i)(fe(on))};static \u0275cmp=ln({type:i,selectors:[["app-main-page"]],standalone:!0,features:[un],decls:84,vars:16,consts:[[1,"startScreenSpan"],[1,"circleDecoration"],[1,"circleDecorationSpan"],[1,"startInformationSpan"],[1,"decorationFigures"],[1,"quarter-circle"],[1,"square"],[1,"parallelogram"],[1,"circle"],[1,"projectTitle"],[1,"navigationStartMenu"],["routerLink","/shop",1,"startNavigationBtn"],["routerLink","/create/new",1,"startNavigationBtn"],["routerLink","/plan",1,"startNavigationBtn"],["routerLink","/account",1,"startNavigationBtn"],[1,"mainInformation"],[1,"projectPreviewSpan"],[1,"someSpan"],[1,"chapterTitle"],[1,"descriptionText"],[1,"exampleFunctions"],[1,"quarter-circle","figureFunction"],[1,"exampleFunctionTitle"],[1,"exampleFunctionDescription"],[1,"square","figureFunction",2,"border-radius","20px"],[1,"chapterChangeBtnsSpan"],[1,"changeChapterBtn",3,"click","ngClass"],[1,"furnitureModule"],["tabindex","-1",1,"furnitureModuleVariant",3,"furnitureData","colorsClientData","ngClass"],["tabindex","-1",1,"furnitureModuleVariant",3,"furnitureData","ngClass"],[3,"planHouse"],[1,"footerColumnsSpan"],[1,"footerColumn"],[1,"footerMenuBtn",2,"color","#DAD7CD",3,"click"],["routerLink","/account",1,"footerMenuBtn"],["routerLink","/create/new",1,"footerMenuBtn",2,"color","#DAD7CD"],["routerLink","/plan",1,"footerMenuBtn"],[1,"projectFooterTitle"]],template:function(n,r){n&1&&(B(0,"span",0)(1,"div",1)(2,"span",2),Ie(3,"div")(4,"div")(5,"div")(6,"div"),V()(),B(7,"span",3)(8,"span",4),Ie(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8),V(),B(13,"h1",9),ge(14,"HOUSEQUALITY"),V(),B(15,"span",10)(16,"button",11),ge(17,"Shop"),V(),B(18,"button",12),ge(19,"Furniture"),V(),B(20,"button",13),ge(21,"Project"),V(),B(22,"a",14),ge(23,"Profile"),V()()()(),B(24,"span",15),Ie(25,"app-navigation-panel"),B(26,"span",16)(27,"span",17)(28,"h2",18),ge(29,"Your Perfect Home"),V(),B(30,"h3",19),ge(31,"HouseQuality is your go-to platform for creating the perfect home. Hop into our digital design shop and start your journey"),V(),B(32,"span",20)(33,"div",21)(34,"h2",22),ge(35,"Custom"),V(),B(36,"h3",23),ge(37,"Custom life"),V()(),B(38,"div",24)(39,"h2",22),ge(40,"Design"),V(),B(41,"h3",23),ge(42,"Design room"),V()(),B(43,"div",21)(44,"h2",22),ge(45,"Create"),V(),B(46,"h3",23),ge(47,"Create planhouse"),V()(),B(48,"div",24)(49,"h2",22),ge(50,"Sell"),V(),B(51,"h3",23),ge(52,"Sell furniture"),V()()()(),B(53,"span",17)(54,"h2",18),ge(55,"Let's design and make dreams come true"),V(),B(56,"span",25)(57,"button",26),Fe("click",function(){return r.openCreateFurniture()}),ge(58,"Create furniture"),V(),B(59,"button",26),Fe("click",function(){return r.openViewFurniture()}),ge(60,"View furniture"),V()()(),B(61,"span",27),Ie(62,"app-create-furniture",28)(63,"app-view-furniture",29),V(),B(64,"span",17)(65,"h2",18),ge(66,"Create house"),V(),B(67,"h3",19),ge(68,"Choose the number of rooms in your house and customize everything"),V()(),Ie(69,"app-plan-house",30),V()(),B(70,"footer")(71,"span",31)(72,"span",32)(73,"a",33),Fe("click",function(){return r.focusOnFinder()}),ge(74,"Explore"),V(),B(75,"a",34),ge(76,"Profile"),V()(),B(77,"span",32)(78,"a",35),ge(79,"Design"),V(),B(80,"a",36),ge(81,"Plan"),V()()(),B(82,"h2",37),ge(83,"HouseQuality 2025"),V()()),n&2&&(de(57),_e("ngClass",os(8,nL,r.furnitureTemplate==="create")),de(2),_e("ngClass",os(10,nL,r.furnitureTemplate==="view")),de(3),_e("furnitureData",r.furnitureExamplesData)("colorsClientData",r.exampleClientColors)("ngClass",os(12,iL,r.furnitureTemplate==="view")),de(),_e("furnitureData",r.viewExampleData)("ngClass",os(14,iL,r.furnitureTemplate==="create")),de(6),_e("planHouse",r.planHouseExampleData))},dependencies:[kh,iy,Zc,Ls,Vo,Ec],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhRakNrc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJhhakNrc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Gloock;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/gloock/v6/Iurb6YFw84WUY4NJiBak.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.circleDecoration[_ngcontent-%COMP%]{grid-area:1/1/2/2;height:calc(100vh - 250px);overflow:hidden;justify-content:center;display:flex}.circleDecorationSpan[_ngcontent-%COMP%]{display:grid;padding:3vw;width:84vw;aspect-ratio:1;place-items:center;content-visibility:auto}.circleDecorationSpan[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#3a5a40;border-radius:50%;grid-area:1/1/2/2;aspect-ratio:1;animation:_ngcontent-%COMP%_wave 2s infinite ease-in-out}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){opacity:1;width:50%;animation-delay:0s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){opacity:.8;width:65%;animation-delay:.3s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){opacity:.6;width:80%;animation-delay:.6s}.circleDecorationSpan[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){opacity:.4;width:95%;animation-delay:.9s}@keyframes _ngcontent-%COMP%_wave{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.startScreenSpan[_ngcontent-%COMP%]{width:100vw;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;padding-top:250px;overflow:hidden;background:#a3b18a;background:linear-gradient(0deg,#a3b18a,#dad7cd)}.decorationFigures[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:30px;height:45px;width:350px;grid-area:1/1/2/2;z-index:1;justify-content:center}.parallelogram[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1/2;transform:skew(-20deg);background-color:#344e41;height:100%}.quarter-circle[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:100% 10px 10px;background-color:#344e41;height:100%}.square[_ngcontent-%COMP%]{border-radius:10px;aspect-ratio:1;background-color:#344e41;height:100%}.circle[_ngcontent-%COMP%]{width:39px;height:39px;position:relative;border:3px solid #344E41;border-radius:50%}.circle[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:#344e41;border-radius:50%;clip-path:inset(0 50% 0 0)}.circle[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:39px;height:39px;background-color:transparent;border-radius:50%}.startInformationSpan[_ngcontent-%COMP%]{display:flex;gap:20px;flex-direction:column;align-items:center;grid-area:1/1/2/2;z-index:1;margin-top:10px}.projectTitle[_ngcontent-%COMP%]{font-family:Gloock;font-size:8vw;font-weight:400}.navigationStartMenu[_ngcontent-%COMP%]{display:flex;gap:10px}.startNavigationBtn[_ngcontent-%COMP%]{padding:5px;background:none;border:none;font-size:1.75vw;cursor:pointer;text-decoration:none;color:#000}.mainInformation[_ngcontent-%COMP%]{background-color:#000;display:flex;flex-direction:column;align-items:center;gap:100px;padding:50px;width:calc(100vw - 100px)}.someSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;justify-content:start}.chapterTitle[_ngcontent-%COMP%]{font-family:Gloock;font-weight:400;font-size:3.5vw;color:#dad7cd;width:60%}.descriptionText[_ngcontent-%COMP%]{color:#a3b18a;width:50%}.exampleFunctions[_ngcontent-%COMP%]{height:150px;display:flex;flex-direction:row;gap:50px}.figureFunction[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:5px;background-color:#344e41b3}.exampleFunctionTitle[_ngcontent-%COMP%]{font-family:Gloock;font-weight:400;font-size:2vw;color:#dad7cd;margin:0 0 0 -10px;cursor:default}.exampleFunctionDescription[_ngcontent-%COMP%]{color:#a3b18a;width:125%;margin-left:-10px}.chapterChangeBtnsSpan[_ngcontent-%COMP%]{display:flex;gap:30px;width:30vw}.changeChapterBtn[_ngcontent-%COMP%]{padding:10px;cursor:pointer;background-color:#344e41;color:#fff;border:none;border-radius:10px;width:50%;aspect-ratio:4;font-size:1.15rem;transition:all .5s ease-in-out}.projectPreviewSpan[_ngcontent-%COMP%]{width:70%}.activeChapterBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#000}.furnitureModule[_ngcontent-%COMP%]{cursor:pointer;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center}.furnitureModuleVariant[_ngcontent-%COMP%]{display:block;pointer-events:none;grid-area:1/1/2/2;transition:all .5s ease-in-out;width:100%}.opacityDisable[_ngcontent-%COMP%]{opacity:0}app-plan-house[_ngcontent-%COMP%]{width:calc(100vw - 100px)}footer[_ngcontent-%COMP%]{width:calc(100vw - 200px);background-color:#000;padding:100px;display:flex;flex-direction:column;gap:50px}.footerColumnsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}.footerColumn[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.footerMenuBtn[_ngcontent-%COMP%]{background:none;color:#a3b18a;font-size:1.15vw;border:none;text-align:start;cursor:pointer}.projectFooterTitle[_ngcontent-%COMP%]{color:#a3b18a;color:1.15vw;font-weight:400;text-align:center;cursor:default}app-navigation-panel[_ngcontent-%COMP%]{position:sticky;top:30px;z-index:6}app-view-furniture[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%], app-plan-house[_ngcontent-%COMP%]{pointer-events:none;width:80vw}']})}return i})();var Qs=(()=>{class i{httpModule;userCookieService;constructor(t,n){this.httpModule=t,this.userCookieService=n}POSTcreateUser(t,n){let r=new $t().set("userType",n).set("nickname",t.nickname).set("email",t.email);return n==="email"&&(r=r.set("password",t.password)),this.httpModule.post(yn+"user/user/create",r)}DELETEuserJwt(t){let n=new $t().set("jwtToken",t);return this.httpModule.delete(yn+"user/jwt/delete",{params:n})}DELETEuser(t){let n=new $t().set("jwtToken",t);return this.httpModule.delete(yn+"user/user/delete",{params:n})}GETuser(t){let n=new $t().set("jwtToken",t);return this.httpModule.get(yn+"user/user/get",{params:n})}PUTupdateSecondaryInformation(t,n,r){let o=new $t().set("jwtToken",t).set("userType",r).set("nickname",n.nickname);return this.httpModule.put(yn+"user/user/put",o)}checkJwt(){return!!this.userCookieService.getJwt()}static \u0275fac=function(n){return new(n||i)(Xe($i),Xe(Vi))};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var sf=(()=>{class i{httpModule;constructor(t){this.httpModule=t}POSTcreateLongJWT(t,n){let r=new $t().set("userType",n).set("email",t.email).set("password",t.password);return this.httpModule.post(yn+"auth/jwt/long/create",r)}POSTcreateShortJWT(t){let n=new $t().set("email",t.email).set("password",t.password);return this.httpModule.post(yn+"auth/jwt/temporary/create",n)}PUTupdateBaseData(t,n,r,o){let s=new $t().set("typeJwt",r).set("jwtToken",t).set("userType",o);return o==="email"&&n.password!==void 0&&(s=s.set("password",n.password)),this.httpModule.put(yn+"auth/user/update",s)}static \u0275fac=function(n){return new(n||i)(Xe($i))};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Oie(i,e){if(i&1&&Ie(0,"div",28),i&2){let t=e.$implicit;qn("grid-area",t.gridArea)}}function Nie(i,e){if(i&1){let t=Lt();B(0,"span",24),Fe("click",function(){let r=He(t).index,o=Ee(3);return je(o.openProjectsPage(r))}),B(1,"h3",25),ge(2),V(),B(3,"div",26),pt(4,Oie,1,2,"div",27),V()()}if(i&2){let t=e.$implicit;de(2),Mn(t.name),de(2),_e("ngForOf",t.rooms)}}function Lie(i,e){if(i&1&&(B(0,"span",22),pt(1,Nie,5,2,"span",23),V()),i&2){let t=Ee(2);de(),_e("ngForOf",t.userData.projects)}}function kie(i,e){if(i&1&&(B(0,"a",31)(1,"h3",25),ge(2),V(),Ie(3,"img",32),V()),i&2){let t=e.$implicit;_e("routerLink","/create/"+t.furnitureCardId),de(2),Mn(t.name),de(),_e("src",t.previewUrl,Gi)}}function Bie(i,e){if(i&1&&(B(0,"span",29),pt(1,kie,4,3,"a",30),V()),i&2){let t=Ee(2);de(),_e("ngForOf",t.userData.furnitureCards)}}function Vie(i,e){if(i&1){let t=Lt();B(0,"span",4)(1,"span",5)(2,"span",6),Ie(3,"img",7),B(4,"div",8),Ie(5,"label",9),B(6,"input",10),Fe("input",function(r){He(t);let o=Ee();return je(o.uploadAvatar(r))}),V(),Ie(7,"img",11),V()(),B(8,"span",12)(9,"h2",13),ge(10),V(),B(11,"span",14)(12,"div",15),ge(13),V(),B(14,"div",15),ge(15),V(),B(16,"div",15),ge(17),V()()(),B(18,"span",16)(19,"button",17),Fe("click",function(){He(t);let r=Ee();return je(r.openAddModule())}),Ie(20,"img",11),V(),B(21,"button",18),Fe("click",function(){He(t);let r=Ee();return je(r.logout())}),Ie(22,"img",19),V()()(),pt(23,Lie,2,1,"span",20)(24,Bie,2,1,"span",21),V()}if(i&2){let t=Ee();de(3),_e("src",t.userData.avatarUrl,Gi),de(7),Mn(t.userData.nickname),de(3),pr("Projects:",t.userData.projects.length,""),de(2),pr("Furnitures:",t.userData.furnitureCards.length,""),de(2),pr("Email:",t.userData.email,""),de(6),_e("ngIf",t.userData),de(),_e("ngIf",t.userData)}}function zie(i,e){i&1&&(B(0,"span",38)(1,"label",43),ge(2,"Password"),V(),Ie(3,"input",44),V())}function Hie(i,e){if(i&1){let t=Lt();B(0,"form",33),Fe("ngSubmit",function(){He(t);let r=Ee();return je(r.submitChanges())}),B(1,"button",34),Fe("click",function(){He(t);let r=Ee();return je(r.closeAddModule())}),Ie(2,"img",35),V(),B(3,"span",36)(4,"h2",37),ge(5,"Account information"),V(),B(6,"span",38)(7,"label",39),ge(8,"Nickname"),V(),Ie(9,"input",40),V(),pt(10,zie,4,0,"span",41),B(11,"button",42),ge(12,"Continue"),V()()()}if(i&2){let t=Ee();_e("formGroup",t.informationForm),de(10),_e("ngIf",t.userData.password!==void 0),de(),_e("disabled",!t.informationForm.valid)}}var sL=(()=>{class i{elementRef;userService;router;userCookieService;imageServerControlService;imageClientControlService;authService;errorHandler;addModule;userData;constructor(t,n,r,o,s,a,c,u){this.elementRef=t,this.userService=n,this.router=r,this.userCookieService=o,this.imageServerControlService=s,this.imageClientControlService=a,this.authService=c,this.errorHandler=u}ngOnInit(){this.userService.checkJwt()||this.router.navigateByUrl("/login");let t,n=this.userCookieService.getJwt();this.userService.GETuser(n).subscribe({next:r=>{let o=r.userData;t={email:o.email,nickname:o.nickname,projects:o.projects,avatarUrl:this.imageServerControlService.GETuserAvatar(n),furnitureCards:o.furnitureCards},t.furnitureCards=t.furnitureCards.map(s=>({furnitureCardId:s._id,name:s.name,previewUrl:this.imageServerControlService.GETmainImage(s._id,s.colors[0].color)})),o.password!==void 0&&(t.password=o.password)},error:r=>{console.log(r),this.errorHandler.setError("Error while user loading",5e3)},complete:()=>{this.userData=t}})}informationForm;ngAfterViewInit(){this.addModule=this.elementRef.nativeElement.querySelector(".addModule"),this.informationForm=new Ni({nickname:new Bn("",[Dn.required])}),this.userCookieService.getUserType()==="email"&&this.informationForm.addControl("password",new Bn("",[Dn.required]))}uploadAvatar(t){return gn(this,null,function*(){let n=this.userCookieService.getJwt();if(!n)return;let o=t.target.files[0];if(!o)return;let s=yield this.imageClientControlService.compressImage(o);s&&this.imageServerControlService.POSTloadUserAvatar(s,n).subscribe({next:a=>{this.userData.avatarUrl=URL.createObjectURL(s)},error:a=>{this.errorHandler.setError("Error while loading avatar",5e3),console.log(a)}})})}closeAddModule(){this.addModule.classList.add("disabled")}openAddModule(){this.userData&&(this.addModule.classList.remove("disabled"),this.informationForm.patchValue({nickname:this.userData.nickname}),this.userCookieService.getUserType()==="email"&&this.informationForm.patchValue({password:this.userData.password}))}submitChanges(){if(!this.userData||!this.informationForm.valid)return;let t=this.userCookieService.getJwt(),n=this.userCookieService.getUserType();if(!t||!n)return;let r="long";this.addModule.classList.add("disabled");let o={nickname:this.informationForm.value.nickname};this.userService.PUTupdateSecondaryInformation(t,o,n).subscribe({next:a=>{this.userData.nickname=o.nickname},error:a=>{console.log(a),this.errorHandler.setError("Error while updating data",5e3)}});let s=null;this.userData.password!==void 0&&(s={password:this.informationForm.value.password}),s&&this.authService.PUTupdateBaseData(t,s,r,n).subscribe({next:a=>{this.userData.password=s.password},error:a=>{this.errorHandler.setError("Error while updating data",5e3),console.log(a)}})}getFurnitureImageUrl(t,n){return this.imageServerControlService.GETmainImage(t,n)}openProjectsPage(t){this.router.navigateByUrl("/plan/"+t)}logout(){this.userCookieService.deleteJwt(),this.userCookieService.deleteUserType(),this.router.navigateByUrl("/")}static \u0275fac=function(n){return new(n||i)(fe(on),fe(Qs),fe(gr),fe(Vi),fe(js),fe(ty),fe(sf),fe(Ji))};static \u0275cmp=ln({type:i,selectors:[["app-account-page"]],standalone:!0,features:[un],decls:5,vars:2,consts:[[1,"body"],["class","accountSpan",4,"ngIf"],[1,"addModule","disabled"],["class","addModuleSpan",3,"formGroup","ngSubmit",4,"ngIf"],[1,"accountSpan"],[1,"mainInformationCard"],[1,"accountAvatarSpan"],["alt","avatar",1,"accountAvatarImage",3,"src"],[1,"avatarEditBtn"],["for","chooseAvatar",1,"avatarLabel"],["id","chooseAvatar","accept",".png,.jpeg,.jpg","type","file",1,"editAvatarInput",3,"input"],["src","/assets/images/editIcon.svg","alt",""],[1,"informationTextSpan"],[1,"accountName"],[1,"subDescriptionSpan"],[1,"accountInformationBlock"],[1,"changeBtns"],[1,"mainInformationEditBtn",3,"click"],[1,"logoutBtn",3,"click"],["src","/assets/images/logoutIcon.svg","alt",""],["class","projectsSpanCard",4,"ngIf"],["class","projectsSpanCard furnitureCardSpan",4,"ngIf"],[1,"projectsSpanCard"],["class","projectCard",3,"click",4,"ngFor","ngForOf"],[1,"projectCard",3,"click"],[1,"projectTitle"],[1,"projectSchem"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"room"],[1,"projectsSpanCard","furnitureCardSpan"],["class","projectCard",3,"routerLink",4,"ngFor","ngForOf"],[1,"projectCard",3,"routerLink"],["loading","lazy","alt","",1,"furnitureImage",3,"src"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt",""],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","nickname",1,"inputLabel"],["formControlName","nickname","id","nickname","type","text",1,"addModuleInput"],["class","addModuleInputSpan",4,"ngIf"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],["for","password",1,"inputLabel"],["formControlName","password","type","text","id","password",1,"addModuleInput"]],template:function(n,r){n&1&&(B(0,"span",0),Ie(1,"app-navigation-panel"),pt(2,Vie,25,7,"span",1),V(),B(3,"span",2),pt(4,Hie,13,3,"form",3),V()),n&2&&(de(2),_e("ngIf",r.userData),de(2),_e("ngIf",r.userData))},dependencies:[Vo,Oi,gi,To,Hs,Ao,Vs,zs,as,cs,Ju,Ec],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.body[_ngcontent-%COMP%]{background-color:#000;width:100vw;display:flex;flex-direction:column;align-items:center;gap:30px;min-height:100vh}.accountSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:50vw;align-items:center;margin-top:30px;gap:20px}.mainInformationCard[_ngcontent-%COMP%]{width:calc(100% - 40px);background-color:#000;border-radius:20px 20px 25px 25px;box-shadow:0 0 10px #fff;display:flex;justify-content:space-around;padding:20px;align-items:flex-start;z-index:1}.projectsSpanCard[_ngcontent-%COMP%]{width:calc(100% - 60px);background-color:#000;z-index:0;display:flex;min-height:50vh;box-shadow:0 0 10px #fff;border-radius:15px;padding:0 30px 30px;flex-wrap:wrap;justify-content:space-between}.accountAvatarSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;place-items:center;align-self:flex-start;width:40%;aspect-ratio:1;position:relative}.accountAvatarImage[_ngcontent-%COMP%]{grid-area:1/1/2/2;border-radius:50%;width:100%;aspect-ratio:1}.avatarEditBtn[_ngcontent-%COMP%]{width:45px;aspect-ratio:1;border-radius:50%;background-color:#344e41;display:grid;place-items:center;grid-area:1/1/2/2;place-self:end;margin-bottom:7%;margin-right:7%}.editAvatarInput[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:100%;aspect-ratio:1;border-radius:50%}.avatarEditBtn[_ngcontent-%COMP%]:focus-within   .avatarLabel[_ngcontent-%COMP%]{outline:2px solid white}.avatarLabel[_ngcontent-%COMP%]{grid-area:1/1/2/2;background-color:#344e41;width:100%;aspect-ratio:1;z-index:1;border-radius:50%;cursor:pointer;border:5px solid black}.avatarEditBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:50%;z-index:2;grid-area:1/1/2/2;pointer-events:none}.mainInformationSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;height:90%;width:50%}.mainInformationEditBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:30px;aspect-ratio:1;border:none;background:none;justify-self:end;cursor:pointer;z-index:1}.informationTextSpan[_ngcontent-%COMP%]{color:#fff;grid-area:1/1/2/2;font-size:1.25vw}.accountName[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700}.accountInformationBlock[_ngcontent-%COMP%]{font-size:1em}.projectCard[_ngcontent-%COMP%]{width:40%;aspect-ratio:1;display:flex;justify-content:center;flex-direction:column;height:fit-content;gap:10px;margin-top:20px;cursor:pointer}.projectTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;font-weight:700}.projectSchem[_ngcontent-%COMP%]{display:grid;width:100%;aspect-ratio:1;gap:7px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:5px}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;margin-bottom:20px;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.furnitureCardSpan[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none}.furnitureCardSpan[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{border-radius:10px}.changeBtns[_ngcontent-%COMP%]{display:flex;height:max-content;flex-direction:column;align-items:center;justify-content:space-between;gap:5px}.logoutBtn[_ngcontent-%COMP%]{align-self:flex-end;justify-self:end;background:none;border:none;cursor:pointer;opacity:.75}.logoutBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px;aspect-ratio:1}']})}return i})();var jie=["signup"],Gie=["signin"],Wie=["code"],$ie=["changePassword"],Vv=()=>({standalone:!0});function qie(i,e){i&1&&Qf(0)}function Xie(i,e){if(i&1){let t=Lt();B(0,"form",21),Fe("ngSubmit",function(){He(t);let r=Ee();return je(r.signinUser())}),B(1,"h2",22),ge(2,"Change password"),V(),B(3,"span",23)(4,"label",24),ge(5,"Code"),V(),B(6,"span",25)(7,"input",26,4),Fe("input",function(){He(t);let r=hr(8),o=hr(10),s=Ee();return je(s.onInput(r,o))})("keyup.backspace",function(){He(t);let r=hr(8),o=Ee();return je(o.onBackspace(r,r))}),no("ngModelChange",function(r){He(t);let o=Ee();return So(o.inputValues[0],r)||(o.inputValues[0]=r),je(r)}),V(),B(9,"input",26,5),Fe("input",function(){He(t);let r=hr(10),o=hr(12),s=Ee();return je(s.onInput(r,o))})("keyup.backspace",function(){He(t);let r=hr(8),o=hr(10),s=Ee();return je(s.onBackspace(o,r))}),no("ngModelChange",function(r){He(t);let o=Ee();return So(o.inputValues[1],r)||(o.inputValues[1]=r),je(r)}),V(),B(11,"input",26,6),Fe("input",function(){He(t);let r=hr(12),o=hr(14),s=Ee();return je(s.onInput(r,o))})("keyup.backspace",function(){He(t);let r=hr(10),o=hr(12),s=Ee();return je(s.onBackspace(o,r))}),no("ngModelChange",function(r){He(t);let o=Ee();return So(o.inputValues[2],r)||(o.inputValues[2]=r),je(r)}),V(),B(13,"input",26,7),Fe("input",function(){He(t);let r=hr(14),o=Ee();return je(o.onInput(r,null))})("keyup.backspace",function(){He(t);let r=hr(12),o=hr(14),s=Ee();return je(s.onBackspace(o,r))}),no("ngModelChange",function(r){He(t);let o=Ee();return So(o.inputValues[3],r)||(o.inputValues[3]=r),je(r)}),V()()(),B(15,"span",27)(16,"button",28),Fe("click",function(){He(t);let r=Ee();return je(r.changeTemplate("signin"))}),ge(17,"I know"),V()(),B(18,"button",29),ge(19),V()()}if(i&2){let t=Ee();de(7),to("ngModel",t.inputValues[0]),_e("ngModelOptions",eh(10,Vv)),de(2),to("ngModel",t.inputValues[1]),_e("ngModelOptions",eh(11,Vv)),de(2),to("ngModel",t.inputValues[2]),_e("ngModelOptions",eh(12,Vv)),de(2),to("ngModel",t.inputValues[3]),_e("ngModelOptions",eh(13,Vv)),de(5),_e("disabled",!t.codeForm.valid),de(),Mn(t.codeForm.valid?"Change":"Not valid")}}function Yie(i,e){if(i&1){let t=Lt();B(0,"form",30),Fe("ngSubmit",function(){He(t);let r=Ee();return je(r.signinUser())}),B(1,"h2",22),ge(2,"Sign in"),V(),B(3,"span",23)(4,"label",31),ge(5,"Email"),V(),Ie(6,"input",32),V(),B(7,"span",23)(8,"label",33),ge(9,"Password"),V(),Ie(10,"input",34),V(),B(11,"span",27)(12,"button",28),Fe("click",function(){He(t);let r=Ee();return je(r.changeTemplate("signup"))}),ge(13,"Sign up"),V(),B(14,"button",28),Fe("click",function(){He(t);let r=Ee();return je(r.changeTemplate("code"))}),ge(15,"Reset password"),V()(),B(16,"button",29),ge(17),V()()}if(i&2){let t=Ee();_e("formGroup",t.signinForm),de(16),_e("disabled",!t.signinForm.valid),de(),Mn(t.signinForm.valid?"Sign in":"Not valid")}}function Zie(i,e){if(i&1){let t=Lt();ge(0,"< "),B(1,"form",30),Fe("ngSubmit",function(){He(t);let r=Ee();return je(r.signinUser())}),B(2,"h2",22),ge(3,"Sign in"),V(),B(4,"span",23)(5,"label",31),ge(6,"Password"),V(),Ie(7,"input",32),V(),B(8,"span",23)(9,"label",33),ge(10,"Confirm assword"),V(),Ie(11,"input",34),V(),B(12,"span",27)(13,"button",28),Fe("click",function(){He(t);let r=Ee();return je(r.changeTemplate("signup"))}),ge(14,"Sign up"),V(),B(15,"button",28),Fe("click",function(){He(t);let r=Ee();return je(r.changeTemplate("code"))}),ge(16,"Reset password"),V()(),B(17,"button",29),ge(18),V()()}if(i&2){let t=Ee();de(),_e("formGroup",t.signinForm),de(16),_e("disabled",!t.signinForm.valid),de(),Mn(t.signinForm.valid?"Sign in":"Not valid")}}function Kie(i,e){if(i&1){let t=Lt();B(0,"form",30),Fe("ngSubmit",function(){He(t);let r=Ee();return je(r.signUpUser())}),B(1,"h2",22),ge(2,"Sign up"),V(),B(3,"span",23)(4,"label",31),ge(5,"Email"),V(),Ie(6,"input",32),V(),B(7,"span",23)(8,"label",35),ge(9,"Nickname"),V(),Ie(10,"input",36),V(),B(11,"span",23)(12,"label",33),ge(13,"Password"),V(),Ie(14,"input",34),V(),B(15,"span",27)(16,"button",28),Fe("click",function(){He(t);let r=Ee();return je(r.changeTemplate("signin"))}),ge(17,"Sign in"),V()(),B(18,"button",29),ge(19),V()()}if(i&2){let t=Ee();_e("formGroup",t.signupForm),de(18),_e("disabled",!t.signupForm.valid),de(),Mn(t.signupForm.valid?"Sign up":"Not valid")}}var aL=(()=>{class i{elementRef;renderer;changeDetectorRef;userService;userCookieService;authService;router;errorHandler;signupTemplate;signinTemplate;codeTemplate;changePasswordTemplate;currentFormTemplate;loginModuleElement;scrollBtn;inputValues=new Array(4).fill("");constructor(t,n,r,o,s,a,c,u){this.elementRef=t,this.renderer=n,this.changeDetectorRef=r,this.userService=o,this.userCookieService=s,this.authService=a,this.router=c,this.errorHandler=u}ngOnInit(){this.userService.checkJwt()&&this.router.navigateByUrl("/account")}onInput(t,n){this.codeForm.patchValue({code:this.inputValues.join("")}),n&&t.value&&n.focus()}changeTemplate(t){this.renderer.addClass(this.loginModuleElement,"changeTemplateAnimation"),setTimeout(()=>{this.renderer.removeClass(this.loginModuleElement,"changeTemplateAnimation")},1e3),setTimeout(()=>{switch(t){case"code":this.currentFormTemplate=this.codeTemplate;break;case"signin":this.currentFormTemplate=this.signinTemplate;break;case"signup":this.currentFormTemplate=this.signupTemplate;break;case"changePassword":this.currentFormTemplate=this.changePasswordTemplate;break}},500)}onBackspace(t,n){!t.value&&n&&n.focus(),this.codeForm.patchValue({code:this.inputValues.join("")})}signupForm=new Ni({email:new Bn("",[Dn.required,Dn.email]),nickname:new Bn("",[Dn.required]),password:new Bn("",[Dn.required])});codeForm=new Ni({code:new Bn("",[Dn.required,Dn.minLength(4)])});changePasswordForm=new Ni({newPassword:new Bn("",[Dn.required]),repeatPassword:new Bn("",[Dn.required])});checkLoginModuleStatus(){return this.loginModuleElement?!this.loginModuleElement.classList.contains("disabledOpacity"):!1}signinForm=new Ni({email:new Bn("",[Dn.required,Dn.email]),password:new Bn("",[Dn.required])});backgroundHouseElement;ngAfterViewInit(){this.scrollBtn=this.elementRef.nativeElement.querySelector(".scrollBtn"),this.loginModuleElement=this.elementRef.nativeElement.querySelector(".loginModule"),this.currentFormTemplate=this.signinTemplate,this.backgroundHouseElement=this.elementRef.nativeElement.querySelector(".houseBackground"),this.changeDetectorRef.detectChanges()}scrollTimeout=null;onWindowScroll(){this.scrollTimeout||(this.scrollTimeout=setTimeout(()=>{let t=document.documentElement.scrollTop,n=window.innerHeight;if(this.renderer.setStyle(this.backgroundHouseElement,"opacity",Math.max(Math.abs(t*2/n-1),.35)),t>=(document.documentElement.scrollHeight-window.innerHeight)/2){this.renderer.removeClass(this.loginModuleElement,"disabledOpacity"),this.scrollTimeout=null;return}t<=50?this.renderer.setStyle(this.scrollBtn,"z-index",4):this.renderer.setStyle(this.scrollBtn,"z-index",3),this.loginModuleElement.classList.contains("disabledOpacity")||this.renderer.addClass(this.loginModuleElement,"disabledOpacity"),this.scrollTimeout=null},100))}toggleScroll(){this.checkLoginModuleStatus()?this.scrollToUpPage():this.scrollToDownPage()}scrollToDownPage(){window.scrollTo({top:document.documentElement.scrollHeight-window.innerHeight,behavior:"smooth"})}scrollToUpPage(){window.scrollTo({top:0,behavior:"smooth"})}closeLoginModule(){}signinUser(){let t=this.signinForm.value;this.authService.POSTcreateLongJWT(t,"email").subscribe({next:n=>{this.userCookieService.setJwt(n.jwt,"long"),this.userCookieService.setUserType("email"),this.router.navigateByUrl("/account")},error:n=>{console.log(n),this.errorHandler.setError("Error while logging in",5e3)}})}signUpUser(){let t=this.signupForm.value;this.userService.POSTcreateUser(t,"email").subscribe({next:n=>{this.authService.POSTcreateLongJWT({email:t.email,password:t.password},"email").subscribe({next:r=>{this.userCookieService.setJwt(r.jwt,"long"),this.router.navigateByUrl("account")},error:r=>{console.log(r),this.errorHandler.setError("Error while signing up",5e3)}})},error:n=>{console.log(n),this.errorHandler.setError("Error while signing up",5e3)}})}static \u0275fac=function(n){return new(n||i)(fe(on),fe(Ci),fe(io),fe(Qs),fe(Vi),fe(sf),fe(gr),fe(Ji))};static \u0275cmp=ln({type:i,selectors:[["app-login-page"]],viewQuery:function(n,r){if(n&1&&(Wi(jie,5,Zr),Wi(Gie,5,Zr),Wi(Wie,5,Zr),Wi($ie,5,Zr)),n&2){let o;Fi(o=Pi())&&(r.signupTemplate=o.first),Fi(o=Pi())&&(r.signinTemplate=o.first),Fi(o=Pi())&&(r.codeTemplate=o.first),Fi(o=Pi())&&(r.changePasswordTemplate=o.first)}},hostBindings:function(n,r){n&1&&Fe("scroll",function(s){return r.onWindowScroll(s)},!1,fr)},standalone:!0,features:[un],decls:23,vars:2,consts:[["code",""],["signin",""],["changePassword",""],["signup",""],["input1",""],["input2",""],["input3",""],["input4",""],[1,"body"],[1,"paralaxImageSpan"],[1,"scrollBtn",3,"click"],["loading","lazy","draggable","false","src","/assets/images/houseFront.png","alt","",1,"houseFront"],["loading","lazy","draggable","false","src","/assets/images/houseBackground.png","alt","",1,"houseBackground"],[1,"floorDecration"],[1,"paralaxSecondImageSpan"],["loading","lazy","draggable","false","src","/assets/images/paralaxBasement.webp","alt",""],[1,"loginModule","disabledOpacity"],[1,"formModule"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt",""],[4,"ngTemplateOutlet"],[1,"addModuleSpan",3,"ngSubmit"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","#input1",1,"inputLabel"],[1,"input-group"],["type","text","maxlength","1",3,"input","keyup.backspace","ngModelChange","ngModel","ngModelOptions"],[1,"additionalFuntions"],[3,"click"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["for","email",1,"inputLabel"],["formControlName","email","id","email","type","text",1,"addModuleInput"],["for","password",1,"inputLabel"],["formControlName","password","id","password","type","text",1,"addModuleInput"],["for","nickname",1,"inputLabel"],["formControlName","nickname","id","nickname","type","text",1,"addModuleInput"]],template:function(n,r){if(n&1){let o=Lt();B(0,"span",8),Ie(1,"app-navigation-panel"),B(2,"span",9)(3,"button",10),Fe("click",function(){return He(o),je(r.toggleScroll())}),ge(4),V(),Ie(5,"img",11)(6,"img",12),V(),Ie(7,"div",13),B(8,"span",14),Ie(9,"img",15),V(),B(10,"span",16)(11,"span",17)(12,"button",18),Fe("click",function(){return He(o),je(r.toggleScroll())}),Ie(13,"img",19),V(),pt(14,qie,1,0,"ng-container",20),V()()(),pt(15,Xie,20,14,"ng-template",null,0,xa)(17,Yie,18,3,"ng-template",null,1,xa)(19,Zie,19,3,"ng-template",null,2,xa)(21,Kie,20,3,"ng-template",null,3,xa)}n&2&&(de(4),Mn(r.checkLoginModuleStatus()?"BACK":"LOGIN"),de(10),_e("ngTemplateOutlet",r.currentFormTemplate))},dependencies:[Vo,To,Hs,Ao,Vs,zs,wb,as,cs,h0,ey,Nh,_b],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{position:fixed;top:30px;z-index:3}.body[_ngcontent-%COMP%]{min-height:200vh;background-color:#000;display:flex;flex-direction:column;align-items:center}.paralaxImageSpan[_ngcontent-%COMP%]{top:0;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;height:100vh;place-items:center}.additionalFuntions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.additionalFuntions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#dad7cd;text-decoration:underline;cursor:pointer}.input-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;max-width:400px;gap:10px;margin-bottom:15px}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(25% - 5px);aspect-ratio:1;text-align:center;border-radius:15px;background:none;border:#A3B18A 2px solid;margin:0 5px;outline:none;color:#dad7cd;transition:border-color .3s}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#dad7cd}.scrollBtn[_ngcontent-%COMP%]{position:fixed;color:#dad7cd;z-index:3;transition:all .3s ease-in-out;border:none;border-radius:10px;background:#000;padding:0 30px;box-shadow:0 0 10px #fff;font-size:5vw;right:50px;bottom:50px;cursor:pointer}.scrollBtn[_ngcontent-%COMP%]:hover{color:#a3b18a}.changeTemplateAnimation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_changeTemplateKeyframe 1s forwards ease-in-out}@keyframes _ngcontent-%COMP%_changeTemplateKeyframe{0%,to{transform:scale(1)}10%,25%,75%,90%{transform:scale(1.25)}40%,65%{transform:scale(.25)}}.houseBackground[_ngcontent-%COMP%]{transition:opacity .3s linear}.houseBackground[_ngcontent-%COMP%], .houseFront[_ngcontent-%COMP%]{grid-area:1/1/2/2;height:100%}.paralaxSecondImageSpan[_ngcontent-%COMP%]{width:100vw;opacity:.7}.paralaxSecondImageSpan[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%}.floorDecration[_ngcontent-%COMP%]{width:100vw;height:300px;z-index:2;background-color:#000}.houseFront[_ngcontent-%COMP%]{height:100vh;z-index:2}.formModule[_ngcontent-%COMP%]{background-color:#000;border-radius:15px;padding:30px 45px;width:clamp(220px,25vw - 90px,300px);transition:all .1s ease-in-out;display:flex;flex-direction:column;box-shadow:0 0 10px #fff}.loginModule[_ngcontent-%COMP%]{z-index:1;transition:all .3s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:flex;gap:10px;flex-direction:column}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;margin-bottom:20px;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.closeAddModuleBtn[_ngcontent-%COMP%]{background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;align-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.disabledOpacity[_ngcontent-%COMP%]{opacity:0}']})}return i})();var zv=(()=>{class i{httpModule;constructor(t){this.httpModule=t}baseUrl=yn+"projects/";POSTcreateProject(t,n){let r=new $t().set("jwtToken",t).set("nameProject",n);return this.httpModule.post(this.baseUrl,r)}DELETEdeleteProject(t,n){let r=new $t().set("jwtToken",t).set("projectId",n);return this.httpModule.delete(this.baseUrl,{params:r})}GETgetProject(t,n){let r=new $t().set("jwtToken",t).set("projectId",n);return this.httpModule.get(this.baseUrl,{params:r})}PUTupdateProject(t,n,r){let o=new $t().set("jwtToken",t).set("projectId",n).set("nameProject",r.name).set("rooms",JSON.stringify(r.rooms));return this.httpModule.put(this.baseUrl,o)}static \u0275fac=function(n){return new(n||i)(Xe($i))};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Qie=["planHouse"],EC=i=>({disabled:i});function ere(i,e){if(i&1&&Ie(0,"div",20),i&2){let t=e.$implicit;qn("grid-area",t.gridArea)}}function tre(i,e){if(i&1){let t=Lt();B(0,"span",13)(1,"span",14),Fe("click",function(){let r=He(t).index,o=Ee(2);return je(o.openProject(r))}),B(2,"h3",15),ge(3),V(),B(4,"div",16),pt(5,ere,1,2,"div",17),V()(),B(6,"button",18),Fe("click",function(){let r=He(t).index,o=Ee(2);return je(o.deleteProject(r))}),Ie(7,"img",19),V()()}if(i&2){let t=e.$implicit;de(3),Mn(t.name),de(2),_e("ngForOf",t.rooms)}}function nre(i,e){if(i&1){let t=Lt();B(0,"span",10),pt(1,tre,8,2,"span",11),B(2,"button",12),Fe("click",function(){He(t);let r=Ee();return je(r.openAddModule())}),B(3,"h3"),ge(4,"Create"),V(),Ie(5,"img",6),V()()}if(i&2){let t=Ee();_e("ngClass",os(2,EC,t.currentProjectId!==void 0)),de(),_e("ngForOf",t.userData.projects)}}function ire(i,e){if(i&1){let t=Lt();B(0,"app-plan-house",21,0),Fe("callSaveEmitter",function(){He(t);let r=Ee();return je(r.saveProject())})("planHouseEmitter",function(r){He(t);let o=Ee();return je(o.updatePlanData(r))}),V()}if(i&2){let t=Ee();_e("ngClass",os(2,EC,t.currentProjectId===void 0))("planHouse",t.userData.projects[t.currentProjectId].rooms)}}function rre(i,e){if(i&1){let t=Lt();B(0,"form",22),Fe("ngSubmit",function(){He(t);let r=Ee();return je(r.createProject())}),B(1,"button",23),Fe("click",function(){He(t);let r=Ee();return je(r.closeAddModule())}),Ie(2,"img",24),V(),B(3,"span",25)(4,"h2",26),ge(5,"Project name"),V(),B(6,"span",27)(7,"label",28),ge(8,"Name"),V(),Ie(9,"input",29),V(),B(10,"button",30),ge(11,"Continue"),V()()()}if(i&2){let t=Ee();_e("formGroup",t.projectNameForm),de(10),_e("disabled",!t.projectNameForm.valid)}}var Ep=(()=>{class i{userService;userCookieService;router;route;elemenetRef;renderer;projectService;planHouseComponent;errorHandler;constructor(t,n,r,o,s,a,c,u,f){this.userService=t,this.userCookieService=n,this.router=r,this.route=o,this.elemenetRef=s,this.renderer=a,this.projectService=c,this.planHouseComponent=u,this.errorHandler=f}userData;currentProjectId=void 0;addModule;planHouse;currentPlanHouse;projectNameForm=new Ni({name:new Bn("",[Dn.required])});hasRoomIdBeenProcessed=!1;ngAfterViewChecked(){if(this.hasRoomIdBeenProcessed||!this.planHouse||!this.route.snapshot.params.roomId)return;let t=parseInt(this.route.snapshot.params.roomId);setTimeout(()=>{typeof t=="number"&&(this.planHouse.currentViewRoom=t,this.planHouse.currentIdClickedRoom=t,this.planHouse.openViewRoom(t),this.planHouse.sceneOpenToggle=!0,this.hasRoomIdBeenProcessed=!0)},0)}ngAfterViewInit(){this.addModule=this.elemenetRef.nativeElement.querySelector(".addModule")}deleteProject(t){let n=this.userCookieService.getJwt(),r=this.userData.projects[t]._id;!n||!r||this.projectService.DELETEdeleteProject(n,r).subscribe({next:o=>{this.userData.projects.splice(t,1)},error:o=>{console.log(o),this.errorHandler.setError("Error while deleting project",5e3)}})}ngOnInit(){this.userService.checkJwt()||this.router.navigateByUrl("/login"),this.userService.GETuser(this.userCookieService.getJwt()).subscribe({next:t=>{this.userData=t.userData,this.route.paramMap.subscribe(n=>{if(n.get("planId")===null)return;let r=parseInt(n.get("planId"));typeof r=="number"&&this.userData.projects.length>=r&&r>=0&&(this.currentProjectId=+r)})},error:t=>{console.log(t),this.errorHandler.setError("Error while receiving user",5e3)}})}updatePlanData(t){this.currentPlanHouse=t,this.userData.projects[this.currentProjectId].rooms=t}closeAddModule(){this.addModule&&this.renderer.addClass(this.addModule,"disabled")}openAddModule(){this.addModule&&this.renderer.removeClass(this.addModule,"disabled")}saveProject(){if(this.currentProjectId===void 0)return;let t=this.userData.projects[this.currentProjectId]._id,n=this.currentPlanHouse;if(n===void 0)return;let r=this.userCookieService.getJwt(),o={rooms:n,name:this.userData.projects[this.currentProjectId].name};this.projectService.PUTupdateProject(r,t,o).subscribe({next:s=>{},error:s=>{console.log(s),this.errorHandler.setError("Error while updating project",5e3)}})}closeProject(){this.saveProject(),this.currentProjectId=void 0}openProject(t){this.router.navigateByUrl(this.router.url+"/"+t),this.currentProjectId=t}createProject(){this.closeAddModule();let t=this.userCookieService.getJwt();!this.projectNameForm.value||!this.projectNameForm.value.name||!t||this.projectService.POSTcreateProject(t,this.projectNameForm.value.name).subscribe({next:n=>{this.userData.projects=[...this.userData.projects,{name:this.projectNameForm.value.name,rooms:[]}],this.projectNameForm.patchValue({name:""})},error:n=>{console.log(n),this.errorHandler.setError("Error while creating project",5e3)}})}static \u0275fac=function(n){return new(n||i)(fe(Qs),fe(Vi),fe(gr),fe(mr),fe(on),fe(Ci),fe(zv),fe(Zc),fe(Ji))};static \u0275cmp=ln({type:i,selectors:[["app-plan-house-page"]],viewQuery:function(n,r){if(n&1&&Wi(Qie,5),n&2){let o;Fi(o=Pi())&&(r.planHouse=o.first)}},standalone:!0,features:[un],decls:10,vars:6,consts:[["planHouse",""],[1,"body"],[1,"functionalModule"],["class","chooseProjectSpan",3,"ngClass",4,"ngIf"],[1,"planModule",3,"ngClass"],[3,"click"],["src","/assets/images/addIcon.svg","alt",""],[3,"ngClass","planHouse","callSaveEmitter","planHouseEmitter",4,"ngIf"],[1,"addModule","disabled"],["class","addModuleSpan",3,"formGroup","ngSubmit",4,"ngIf"],[1,"chooseProjectSpan",3,"ngClass"],["class","projectCard",4,"ngFor","ngForOf"],[1,"addProjectCard","projectCard",3,"click"],[1,"projectCard"],[1,"mainProjectInformation",3,"click"],[1,"projectTitle"],[1,"projectSchem"],["class","room",3,"grid-area",4,"ngFor","ngForOf"],[1,"deleteProjectBtn",3,"click"],["src","/assets/images/deleteIcon.svg","alt",""],[1,"room"],[3,"callSaveEmitter","planHouseEmitter","ngClass","planHouse"],[1,"addModuleSpan",3,"ngSubmit","formGroup"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt",""],[1,"addModuleFormContent"],[1,"addModuleTitle"],[1,"addModuleInputSpan"],["for","name",1,"inputLabel"],["formControlName","name","id","name","type","text",1,"addModuleInput"],["type","submit",1,"submitAddModuleFormBtn",3,"disabled"]],template:function(n,r){n&1&&(B(0,"span",1),Ie(1,"app-navigation-panel"),B(2,"span",2),pt(3,nre,6,4,"span",3),B(4,"span",4)(5,"button",5),Fe("click",function(){return r.closeProject()}),Ie(6,"img",6),V(),pt(7,ire,2,4,"app-plan-house",7),V()()(),B(8,"span",8),pt(9,rre,12,2,"form",9),V()),n&2&&(de(3),_e("ngIf",r.userData!==void 0),de(),_e("ngClass",os(4,EC,r.currentProjectId===void 0)),de(3),_e("ngIf",r.currentProjectId!==void 0),de(2),_e("ngIf",r.userData))},dependencies:[Vo,Zc,Oi,gi,To,Hs,Ao,Vs,zs,as,cs,Ls],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}.planModule[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex;flex-direction:row;gap:10px;width:100%;transition:all .5s ease-in-out}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:35px;height:35px;background:none;border:none;cursor:pointer}.planModule[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}app-plan-house[_ngcontent-%COMP%]{width:90%}.body[_ngcontent-%COMP%]{background-color:#000;gap:60px;display:flex;flex-direction:column;align-items:center;min-height:100vh}.chooseProjectSpan[_ngcontent-%COMP%]{width:calc(100% - 60px);z-index:0;gap:10px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;transition:all .5s ease-in-out;grid-area:1/1/2/2}.projectCard[_ngcontent-%COMP%]{width:45%;position:relative;aspect-ratio:4/3;display:flex;justify-content:space-between;align-items:center;flex-direction:column;gap:10px;border-radius:10px;border:none;box-shadow:0 0 10px #fff;cursor:pointer;overflow:hidden}.deleteProjectBtn[_ngcontent-%COMP%]{height:35px;align-self:flex-end;margin:10px;background:none;border:none;aspect-ratio:1;cursor:pointer}.mainProjectInformation[_ngcontent-%COMP%]{display:flex;height:90%;width:100%;flex-direction:column;align-items:center}.addProjectCard[_ngcontent-%COMP%]{justify-content:center;background-color:#344e41;box-shadow:none}.projectCard[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-size:2em;color:#fff}.addProjectCard[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px}.projectTitle[_ngcontent-%COMP%]{color:#fff;text-align:center;font-weight:700;height:20%}.projectSchem[_ngcontent-%COMP%]{display:grid;height:80%;aspect-ratio:1;gap:7px;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.room[_ngcontent-%COMP%]{background-color:#344e41;border-radius:5px}.disabled[_ngcontent-%COMP%]{filter:opacity(0);pointer-events:none}.functionalModule[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;align-items:flex-start;justify-items:center;width:90vw}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleInputSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.inputLabel[_ngcontent-%COMP%]{color:#dad7cd}.addModuleInput[_ngcontent-%COMP%]{border-radius:10px;background-color:transparent;border:#888888 1px solid;padding:10px;outline:none;color:#fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.submitAddModuleFormBtn[_ngcontent-%COMP%]{background-color:#a3b18a;color:#fff;border-radius:15px;padding:15px;width:100%;border:none;margin-bottom:20px;cursor:pointer}.submitAddModuleFormBtn[_ngcontent-%COMP%]:disabled{background-color:#344e41}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}']})}return i})();function ore(i,e){if(i&1){let t=Lt();B(0,"button",7),Fe("click",function(){He(t);let r=Ee();return je(r.deleteColor())}),B(1,"div",8),Gg(),B(2,"svg",9),Ie(3,"path",10),V()()()}if(i&2){let t=Ee();de(),qn("background-color",t.deleteColorCalculate())}}var cL=(()=>{class i{route;cookieService;furnitureCardService;serverImageControl;router;furnitureModelService;errorHandler;createFurnitureComponent;constructor(t,n,r,o,s,a,c){this.route=t,this.cookieService=n,this.furnitureCardService=r,this.serverImageControl=o,this.router=s,this.furnitureModelService=a,this.errorHandler=c}idPage;ngOnInit(){this.route.params.subscribe(t=>{if(this.idPage!==void 0&&location.reload(),this.idPage=t.id,this.idPage==="new")return;let n=this.cookieService.getJwt();if(!n){this.router.navigateByUrl("/login");return}this.furnitureCardService.GETfurnitureCard(this.idPage,n).subscribe({next:r=>gn(this,null,function*(){let o=r.furnitureCard;if(r.authorMatched===!1){this.router.navigateByUrl("/create/new");return}this.furnitureData.name=o.name,this.furnitureData.description=o.description,this.furnitureData.shops=o.shops;let s=o.colors.map(a=>gn(this,null,function*(){let c=yield this.serverImageControl.GETallProjectImages(this.idPage,a.color),f=c.imagesURLS.map(p=>this.serverImageControl.GETsimpleImage(p)),h=yield Promise.all(f.map(p=>gn(this,null,function*(){return yield(yield fetch(p.toString())).blob()})));this.furnitureData.colors.push({color:a.color,imagesData:{images:h,idMainImage:c.idMainImage}}),this.colorsClientData.push({color:a.color,imagesData:{images:f,idMainImage:c.idMainImage}})}));yield Promise.all(s),this.createFurnitureComponent.currentColorId=0}),error:r=>{console.log(r),this.errorHandler.setError("Error while loading furniture",5e3)}})})}furnitureData={name:"",description:"",colors:[],shops:[],category:void 0,proportions:{width:null,height:null,length:null}};colorsClientData=[];transformUrlArrayToBlob(t){return gn(this,null,function*(){return yield Promise.all(t.map(r=>gn(this,null,function*(){return yield(yield fetch(r.toString())).blob()})))})}checkValid(){let{name:t,colors:n,shops:r,category:o,proportions:s}=this.furnitureData,a=this.createFurnitureComponent.furnitureModelInput.files[0];return t.length<3||!o||!a||r.length<0||!s.height||!s.width||!s.length?!1:(n.forEach(c=>c.imagesData.images.length>0),!0)}createFurnitureCard(){if(!this.checkValid()||this.createFurnitureComponent.currentColorId===void 0)return;let n=this.createFurnitureComponent.furnitureData,r={name:n.name,description:n.description,colors:n.colors.map(a=>a.color),shops:n.shops,proportions:n.proportions},o;n.category!==void 0&&(o={category:n.category});let s=this.cookieService.getJwt();s&&(o!==void 0?this.furnitureCardService.POSTcreateFurnitureCard(s,r,o):this.furnitureCardService.POSTcreateFurnitureCard(s,r)).subscribe({next:a=>{let c=a.furnitureData._id;n.colors.forEach(f=>gn(this,null,function*(){let{color:h,imagesData:p}=f;if(p.images.length===0)return;let g=p.images;p.images[0]instanceof Blob||(g=yield this.transformUrlArrayToBlob(p.images.map(y=>y.toString()))),this.serverImageControl.POSTloadProjectImages(g,s,c,h,p.idMainImage).subscribe({next:y=>{this.router.navigateByUrl("/account")},error:y=>{console.log(y),this.errorHandler.setError("Error while uploading images",5e3)}})}));let u=this.createFurnitureComponent.furnitureModelInput.files[0];this.furnitureModelService.POSTloadFurnitureModel(u,s,c).subscribe({next:f=>{},error:f=>{console.log(f),this.errorHandler.setError("Error while uploading model",5e3)}})},error:a=>{console.log(a),this.errorHandler.setError("Error while uploading furniture",5e3)}})}updateFurnitureCard(){if(this.createFurnitureComponent.currentColorId===void 0)return;let n=this.createFurnitureComponent.furnitureData,r={name:n.name,description:n.description,colors:n.colors.map(a=>a.color),shops:n.shops,proportions:n.proportions},o;n.category!==void 0&&(o={category:n.category});let s=this.cookieService.getJwt();s&&(o!==void 0?this.furnitureCardService.PUTupdateFurnitureCard(s,r,o):this.furnitureCardService.PUTupdateFurnitureCard(s,r)).subscribe({next:a=>{this.serverImageControl.DELETEproject(s,this.idPage).subscribe({next:c=>{n.colors.forEach(u=>gn(this,null,function*(){let{color:f,imagesData:h}=u,p=h.images;h.images.length!==0&&(h.images[0]instanceof Blob||(p=yield this.transformUrlArrayToBlob(h.images.map(y=>y.toString()))),this.serverImageControl.POSTloadProjectImages(p,s,this.idPage,f,h.idMainImage).subscribe({next:y=>{window.location.href=window.location.href},error:y=>{console.log(y),this.errorHandler.setError("Error while updating images",5e3)}}));let g=this.createFurnitureComponent.furnitureModelInput.files[0];this.furnitureModelService.PUTupdateFurnitureModel(g,s,this.idPage).subscribe({next:y=>{},error:y=>{console.log(y),this.errorHandler.setError("Error while updating model",5e3)}})}))},error:c=>{console.log(c),this.errorHandler.setError("Error while updating images",5e3)}})},error:a=>{console.log(a),this.errorHandler.setError("Error while updating model",5e3)}})}clearFurnitureCard(){this.createFurnitureComponent.currentColorId=void 0,this.furnitureData={name:"",description:"",colors:[],shops:[],category:void 0,proportions:{width:0,height:0,length:0}},this.colorsClientData=[]}deleteFurnitureCard(){let t=this.cookieService.getJwt();t&&this.serverImageControl.DELETEproject(t,this.idPage).subscribe({next:n=>{this.furnitureCardService.DELETEfurnitureCard(t,this.idPage).subscribe({next:r=>{this.router.navigateByUrl("/account")},error:r=>{console.log(r),this.errorHandler.setError("Error while deleting furniture",5e3)}})},error:n=>{console.log(n),this.errorHandler.setError("Error while deleting images",5e3)}})}deleteColorCalculate(){if(!(!this.createFurnitureComponent||this.createFurnitureComponent.currentColorId===void 0))return this.createFurnitureComponent.colorsClientData[this.createFurnitureComponent.currentColorId].color}deleteColor(){this.createFurnitureComponent.colorsClientData.length<=1||this.createFurnitureComponent.deleteColor()}getCurrentColorId(){if(this.createFurnitureComponent)return this.createFurnitureComponent.currentColorId}static \u0275fac=function(n){return new(n||i)(fe(mr),fe(Vi),fe(Ac),fe(js),fe(gr),fe(rf),fe(Ji))};static \u0275cmp=ln({type:i,selectors:[["app-create-furniture-page"]],viewQuery:function(n,r){if(n&1&&Wi(kh,5),n&2){let o;Fi(o=Pi())&&(r.createFurnitureComponent=o.first)}},standalone:!0,features:[un],decls:9,vars:7,consts:[[1,"body"],[3,"furnitureData","colorsClientData"],[1,"functionalBtns"],["class","functionalBtn deleteBtn deleteColorBtn",3,"click",4,"ngIf"],[1,"functionalBtn","confirmBtn",3,"click"],[1,"functionalBtn","deleteBtn"],["alt","",3,"click","src"],[1,"functionalBtn","deleteBtn","deleteColorBtn",3,"click"],[1,"colorCircle"],["version","1.1","viewBox","0 0 24 24",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",2,"height","50%","aspect-ratio","1"],["d",`M14.8,12l3.6-3.6c0.8-0.8,0.8-2,0-2.8c-0.8-0.8-2-0.8-2.8,0L12,9.2L8.4,5.6c-0.8-0.8-2-0.8-2.8,0   
          c-0.8,0.8-0.8,2,0,2.8L9.2,12l-3.6,3.6c-0.8,0.8-0.8,2,0,2.8C6,18.8,6.5,19,7,19s1-0.2,1.4-0.6l3.6-3.6l3.6,3.6   
          C16,18.8,16.5,19,17,19s1-0.2,1.4-0.6c0.8-0.8,0.8-2,0-2.8L14.8,12z`,"id","exit","fill","white","stroke","black","stroke-width","1"]],template:function(n,r){n&1&&(B(0,"span",0),Ie(1,"app-navigation-panel")(2,"app-create-furniture",1),B(3,"span",2),pt(4,ore,4,2,"button",3),B(5,"button",4),Fe("click",function(){return r.idPage==="new"?r.createFurnitureCard():r.updateFurnitureCard()}),ge(6),V(),B(7,"button",5)(8,"img",6),Fe("click",function(){return r.idPage==="new"?r.clearFurnitureCard():r.deleteFurnitureCard()}),V()()()()),n&2&&(de(2),_e("furnitureData",r.furnitureData)("colorsClientData",r.colorsClientData),de(2),_e("ngIf",r.getCurrentColorId()!==void 0),de(2),pr(" ",r.idPage==="new"?"Create":"Update"," "),de(2),qn("rotate",r.idPage==="new"?"45deg":"0deg"),_e("src","assets/images/"+(r.idPage==="new"?"addIcon.svg":"deleteIcon.svg"),Gi))},dependencies:[Vo,kh,gi],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{min-height:100vh;background-color:#000;width:100vw;display:flex;flex-direction:column;align-items:center}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px}app-navigation-panel[_ngcontent-%COMP%], app-create-furniture[_ngcontent-%COMP%]{width:80%}.confirmBtn[_ngcontent-%COMP%]{width:75%;color:#fff;padding:15px}.functionalBtns[_ngcontent-%COMP%]{margin-top:20px;width:clamp(300px,30vw,400px);display:flex;height:50px;gap:10px;justify-content:end;margin-bottom:30px}.functionalBtn[_ngcontent-%COMP%]{height:100%;border-radius:10px;background-color:#344e41;border:none;cursor:pointer}.deleteBtn[_ngcontent-%COMP%]{aspect-ratio:1;padding:1em;display:flex;align-items:center;justify-content:center}.colorCircle[_ngcontent-%COMP%]{border-radius:50%;height:100%;aspect-ratio:1;display:flex;align-items:center;justify-content:center;border:3px solid black;box-shadow:0 0 5px #fff}.deleteColorBtn[_ngcontent-%COMP%]{padding:5px;background-color:transparent}']})}return i})();var Hv=(()=>{class i{httpModule;baseUrl=yn+"shop/";constructor(t){this.httpModule=t}GETgetCategoryData(t,n){return this.httpModule.get(`${this.baseUrl}category?category=${t}&startRange=${n}`)}GETgetAllFurnitures(t){return this.httpModule.get(`${this.baseUrl}all?startRange=${t}`)}GETgetImageByPath(t){return`${this.baseUrl}image/simple?filePath=${t}`}static \u0275fac=function(n){return new(n||i)(Xe($i))};static \u0275prov=Be({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var are=i=>({disabled:i});function cre(i,e){if(i&1&&(B(0,"h1",10),ge(1),V()),i&2){let t,n=Ee();de(),Mn(n.capitalizeFirstLetter((t=n.categoryName)!==null&&t!==void 0?t:"all categories"))}}function lre(i,e){if(i&1){let t=Lt();B(0,"span",14)(1,"button",15),Fe("click",function(){He(t);let r=Ee(2);return je(r.closeFurniture())}),Ie(2,"img",16),V(),B(3,"span",17),Ie(4,"app-view-furniture",18),B(5,"button",19),Fe("click",function(){He(t);let r=Ee(2);return je(r.openAddModule())}),ge(6,"Add"),V()()()}if(i&2){let t=Ee(2);de(4),_e("furnitureId",t.furnitureId)}}function ure(i,e){if(i&1){let t=Lt();B(0,"button",24),Fe("click",function(){let r=He(t).index,o=Ee(3);return je(o.changeCategory(r))}),ge(1),V()}if(i&2){let t=e.$implicit;de(),pr(" ",t," ")}}function dre(i,e){if(i&1&&(B(0,"div",27)(1,"h2",28),ge(2),V(),Ie(3,"img",29),B(4,"a",30),ge(5),V()()),i&2){let t,n=e.$implicit,r=Ee(3);de(2),Mn(n.name),de(),_e("src",n.preview,Gi),de(),_e("routerLink","/shop/"+((t=r.categoryName)!==null&&t!==void 0?t:"all")+"/"+n.id),de(),Mn(n.cost)}}function fre(i,e){if(i&1){let t=Lt();B(0,"span",20)(1,"span",21)(2,"span",22),pt(3,ure,2,1,"button",23),B(4,"button",24),Fe("click",function(){He(t);let r=Ee(2);return je(r.changeCategory(null))}),ge(5," All "),V()()(),B(6,"span",25),pt(7,dre,6,4,"div",26),V()()}if(i&2){let t=Ee(2);de(3),_e("ngForOf",t.furnitureCategoryDataArray),de(4),_e("ngForOf",t.furnituresArray)}}function hre(i,e){if(i&1&&(B(0,"span",11),pt(1,lre,7,1,"span",12)(2,fre,8,2,"span",13),V()),i&2){let t=Ee();de(),_e("ngIf",t.furnitureId),de(),_e("ngIf",!t.furnitureId)}}function pre(i,e){if(i&1&&(B(0,"a",32),ge(1),V()),i&2){let t=e.$implicit,n=e.index,r=Ee().index,o=Ee();_e("routerLink",o.getPlanUrl(r,n)),de(),Mn(t.name)}}function mre(i,e){if(i&1&&(B(0,"span")(1,"h3"),ge(2),V(),pt(3,pre,2,2,"a",31),V()),i&2){let t=e.$implicit;de(2),Mn(t.name),de(),_e("ngForOf",t.rooms)}}var jv=(()=>{class i{route;shopService;router;userService;userCookieService;errorHandler;furnitureId=void 0;categoryName=void 0;userProjects=void 0;currentPath;furnituresArray=[];openAddModuleToggle=!1;furnitureCategoryDataArray=["Chair","Lamp","Sofa","Table"];constructor(t,n,r,o,s,a){this.route=t,this.shopService=n,this.router=r,this.userService=o,this.userCookieService=s,this.errorHandler=a}openAddModule(){this.openAddModuleToggle=!0}closeAddModule(){this.openAddModuleToggle=!1}ngOnInit(){this.route.params.subscribe(t=>{if(this.currentPath=this.route.snapshot.url.join("/"),this.furnitureId=t.furnitureId,this.furnitureId){let n=this.userCookieService.getJwt();this.userService.GETuser(n).subscribe({next:r=>{this.userProjects=r.userData.projects},error:r=>{console.log(r),this.errorHandler.setError("Error while receiving user",5e3)}})}this.categoryName=t.category,this.categoryName!==void 0?this.shopService.GETgetCategoryData(this.categoryName,this.furnituresArray.length).subscribe({next:n=>{this.furnituresArray=this.transformToClientDataFurnitures(n.resultsArray)},error:n=>{console.log(n),this.errorHandler.setError("Error while finding items",5e3)}}):this.shopService.GETgetAllFurnitures(this.furnituresArray.length).subscribe({next:n=>{console.log(n),this.furnituresArray=this.transformToClientDataFurnitures(n.resultsArray)},error:n=>{console.log(n),this.errorHandler.setError("Error while finding items",5e3)}})})}getUrlForBlobImage(t){return URL.createObjectURL(t)}transformToClientDataFurnitures(t){return t.map(n=>Zt(ze({},n),{preview:this.shopService.GETgetImageByPath(n.preview)}))}changeCategory(t){this.router.navigateByUrl("/shop"+(t!==null?"/"+this.furnitureCategoryDataArray[t].toLocaleLowerCase():""))}capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}closeFurniture(){this.router.navigateByUrl("/shop"+(this.categoryName==="all"?"":"/"+this.categoryName))}getPlanUrl=(t,n)=>`/plan/${t}/${n}/${this.furnitureId}`;static \u0275fac=function(n){return new(n||i)(fe(mr),fe(Hv),fe(gr),fe(Qs),fe(Vi),fe(Ji))};static \u0275cmp=ln({type:i,selectors:[["app-shop-page"]],standalone:!0,features:[un],decls:12,vars:6,consts:[[1,"body"],["class","\u0441ategoryTitle",4,"ngIf"],["class","shopModule",4,"ngIf"],[1,"addModule",3,"ngClass"],[1,"addModuleSpan"],["type","button",1,"closeAddModuleBtn",3,"click"],["loading","lazy","src","/assets/images/addIcon.svg","alt",""],[1,"addModuleFormContent"],[1,"addModuleTitle"],[4,"ngFor","ngForOf"],[1,"\u0441ategoryTitle"],[1,"shopModule"],["class","viewFurnitureSpan",4,"ngIf"],["class","mainArea",4,"ngIf"],[1,"viewFurnitureSpan"],[1,"closeFurniture",3,"click"],["src","/assets/images/addIcon.svg","alt",""],[1,"furnitureCard"],[3,"furnitureId"],[1,"choseAddProjectBtn",3,"click"],[1,"mainArea"],[1,"params"],[1,"furnitureCategoriesButtonsSpan"],["class","furnitureCategoryButton",3,"click",4,"ngFor","ngForOf"],[1,"furnitureCategoryButton",3,"click"],[1,"\u0441ategory"],["class","furnitureItem",4,"ngFor","ngForOf"],[1,"furnitureItem"],[1,"furnitureTitle"],["loading","lazy","alt","",1,"furniturePreview",3,"src"],[1,"furnitureLink",3,"routerLink"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(n,r){n&1&&(B(0,"span",0),Ie(1,"app-navigation-panel"),pt(2,cre,2,1,"h1",1)(3,hre,3,2,"span",2),V(),B(4,"span",3)(5,"span",4)(6,"button",5),Fe("click",function(){return r.closeAddModule()}),Ie(7,"img",6),V(),B(8,"span",7)(9,"h2",8),ge(10,"Projects"),V(),pt(11,mre,4,2,"span",9),V()()()),n&2&&(de(2),_e("ngIf",!r.furnitureId),de(),_e("ngIf",r.furnituresArray),de(),_e("ngClass",os(4,are,!r.openAddModuleToggle)),de(7),_e("ngForOf",r.userProjects))},dependencies:[Vo,Oi,gi,iy,Ec,Ls],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}app-navigation-panel[_ngcontent-%COMP%]{margin-top:30px;z-index:10}.body[_ngcontent-%COMP%]{min-height:100vh;background-color:#000;display:flex;align-items:center;flex-direction:column;gap:30px}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:30%;justify-content:center}.shopModule[_ngcontent-%COMP%]{width:90%;margin:0 auto;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;z-index:1}.\\441 ategory[_ngcontent-%COMP%]{width:75%;transition:all .5s ease-in-out;height:75vh;overflow-y:scroll;display:flex;flex-wrap:wrap;justify-content:space-around;z-index:1}.\\441 ategoryTitle[_ngcontent-%COMP%]{text-align:center;color:#fff}.params[_ngcontent-%COMP%]{width:20%;display:flex;gap:10px;justify-content:center}.furnitureItem[_ngcontent-%COMP%]{flex:1 1 calc(40% - 10px);max-width:50%;display:flex;gap:10px;flex-direction:column;align-items:center;justify-content:space-between}.furnitureTitle[_ngcontent-%COMP%]{color:#fff;text-align:center}.furniturePreview[_ngcontent-%COMP%]{width:80%;border-radius:10px}.furnitureLink[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;text-align:center;border:none;width:75%;text-decoration:none;height:50px;align-content:center}.furnitureCategoriesButtonsSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:100%;justify-content:center}.furnitureCategoryButton[_ngcontent-%COMP%]{background-color:#344e41;border-radius:10px;text-align:center;place-content:center;width:100%;height:50px;color:#fff;cursor:pointer;border:none}.closeFurniture[_ngcontent-%COMP%]{background:none;border:none;width:35px;aspect-ratio:1;align-self:flex-start;cursor:pointer}.closeFurniture[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{rotate:45deg}.viewFurnitureSpan[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px;grid-area:1/1/2/2}.mainArea[_ngcontent-%COMP%]{grid-area:1/1/2/2;display:flex}app-view-furniture[_ngcontent-%COMP%]{width:90%}.furnitureCard[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;z-index:1}.choseAddProjectBtn[_ngcontent-%COMP%]{width:clamp(170px,35%,320px);padding:15px;background-color:#a3b18a;color:#dad7cd;border-radius:10px;border:none;cursor:pointer}.addModule[_ngcontent-%COMP%]{z-index:4;transition:all .5s ease-in-out;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;display:flex;justify-content:center;align-items:center}.addModuleSpan[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr}.addModuleFormContent[_ngcontent-%COMP%]{grid-area:1/1/2/2;width:25vw;border-radius:10px;background-color:#000;padding:30px 45px;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 10px #fff}.addModuleTitle[_ngcontent-%COMP%]{color:#a3b18a;text-align:center}.closeAddModuleBtn[_ngcontent-%COMP%]{grid-area:1/1/2/2;background:none;border:none;z-index:3;width:30px;aspect-ratio:1;margin-right:10px;margin-top:10px;justify-self:end;cursor:pointer}.closeAddModuleBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{transform:rotate(45deg)}.disabled[_ngcontent-%COMP%]{opacity:0;z-index:0}.addModuleFormContent[_ngcontent-%COMP%]{padding-top:20px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px;color:#dad7cd;border-radius:10px;text-decoration:none;text-align:center}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{background-color:#a3b18a;width:calc(100% - 20px);margin-bottom:0;cursor:default}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background-color:#344e41;width:calc(80% - 20px);align-self:end;margin-top:5px}.addModuleFormContent[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}']})}return i})();var lL=[{component:rL,path:""},{component:sL,path:"account"},{component:aL,path:"login"},{component:Ep,path:"plan"},{component:Ep,path:"plan/:planId"},{component:Ep,path:"plan/:planId/:roomId"},{component:Ep,path:"plan/:planId/:roomId/:furnitureId"},{component:cL,path:"create/:id"},{component:jv,path:"shop"},{component:jv,path:"shop/:category"},{component:jv,path:"shop/:category/:furnitureId"}];function uL(i){return new Ne(3e3,!1)}function gre(){return new Ne(3100,!1)}function yre(){return new Ne(3101,!1)}function vre(i){return new Ne(3001,!1)}function _re(i){return new Ne(3003,!1)}function wre(i){return new Ne(3004,!1)}function xre(i,e){return new Ne(3005,!1)}function Mre(){return new Ne(3006,!1)}function bre(){return new Ne(3007,!1)}function Ere(i,e){return new Ne(3008,!1)}function Sre(i){return new Ne(3002,!1)}function Cre(i,e,t,n,r){return new Ne(3010,!1)}function Are(){return new Ne(3011,!1)}function Tre(){return new Ne(3012,!1)}function Dre(){return new Ne(3200,!1)}function Ire(){return new Ne(3202,!1)}function Rre(){return new Ne(3013,!1)}function Ure(i){return new Ne(3014,!1)}function Fre(i){return new Ne(3015,!1)}function Pre(i){return new Ne(3016,!1)}function Ore(i,e){return new Ne(3404,!1)}function Nre(i){return new Ne(3502,!1)}function Lre(i){return new Ne(3503,!1)}function kre(){return new Ne(3300,!1)}function Bre(i){return new Ne(3504,!1)}function Vre(i){return new Ne(3301,!1)}function zre(i,e){return new Ne(3302,!1)}function Hre(i){return new Ne(3303,!1)}function jre(i,e){return new Ne(3400,!1)}function Gre(i){return new Ne(3401,!1)}function Wre(i){return new Ne(3402,!1)}function $re(i,e){return new Ne(3505,!1)}function Kc(i){switch(i.length){case 0:return new qc;case 1:return i[0];default:return new _p(i)}}function EL(i,e,t=new Map,n=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),f=u==s,h=f&&a||new Map;c.forEach((p,g)=>{let y=g,x=p;if(g!=="offset")switch(y=i.normalizePropertyName(y,r),x){case Av:x=t.get(g);break;case Js:x=n.get(g);break;default:x=i.normalizeStyleValue(g,y,x,r);break}h.set(y,x)}),f||o.push(h),a=h,s=u}),r.length)throw Nre(r);return o}function qC(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&SC(t,"start",i)));break;case"done":i.onDone(()=>n(t&&SC(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&SC(t,"destroy",i)));break}}function SC(i,e,t){let n=t.totalTime,r=!!t.disabled,o=XC(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,r),s=i._data;return s!=null&&(o._data=s),o}function XC(i,e,t,n,r="",o=0,s){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:o,disabled:!!s}}function fo(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function dL(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var qre=typeof document>"u"?null:document.documentElement;function YC(i){let e=i.parentNode||i.host||null;return e===qre?null:e}function Xre(i){return i.substring(1,6)=="ebkit"}var nu=null,fL=!1;function Yre(i){nu||(nu=Zre()||{},fL=nu.style?"WebkitAppearance"in nu.style:!1);let e=!0;return nu.style&&!Xre(i)&&(e=i in nu.style,!e&&fL&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in nu.style)),e}function Zre(){return typeof document<"u"?document.body:null}function SL(i,e){for(;e;){if(e===i)return!0;e=YC(e)}return!1}function CL(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var ZC=(()=>{let e=class e{validateStyleProperty(n){return Yre(n)}containsElement(n,r){return SL(n,r)}getParentElement(n){return YC(n)}query(n,r,o){return CL(n,r,o)}computeStyle(n,r,o){return o||""}animate(n,r,o,s,a,c=[],u){return new qc(o,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})(),eA=class eA{};eA.NOOP=new ZC;var ou=eA,su=class{};var Kre=1e3,AL="{{",Jre="}}",TL="ng-enter",RC="ng-leave",Gv="ng-trigger",Yv=".ng-trigger",hL="ng-animating",UC=".ng-animating";function za(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:FC(parseFloat(e[1]),e[2])}function FC(i,e){switch(e){case"s":return i*Kre;default:return i}}function Zv(i,e,t){return i.hasOwnProperty("duration")?i:Qre(i,e,t)}function Qre(i,e,t){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof i=="string"){let a=i.match(n);if(a===null)return e.push(uL(i)),{duration:0,delay:0,easing:""};r=FC(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=FC(parseFloat(c),a[4]));let u=a[5];u&&(s=u)}else r=i;if(!t){let a=!1,c=e.length;r<0&&(e.push(gre()),a=!0),o<0&&(e.push(yre()),a=!0),a&&e.splice(c,0,uL(i))}return{duration:r,delay:o,easing:s}}function eoe(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function ea(i,e,t){e.forEach((n,r)=>{let o=KC(r);t&&!t.has(r)&&t.set(r,i.style[o]),i.style[o]=n})}function ru(i,e){e.forEach((t,n)=>{let r=KC(n);i.style[r]=""})}function Sp(i){return Array.isArray(i)?i.length==1?i[0]:v3(i):i}function toe(i,e,t){let n=e.params||{},r=DL(i);r.length&&r.forEach(o=>{n.hasOwnProperty(o)||t.push(vre(o))})}var PC=new RegExp(`${AL}\\s*(.+?)\\s*${Jre}`,"g");function DL(i){let e=[];if(typeof i=="string"){let t;for(;t=PC.exec(i);)e.push(t[1]);PC.lastIndex=0}return e}function Ap(i,e,t){let n=`${i}`,r=n.replace(PC,(o,s)=>{let a=e[s];return a==null&&(t.push(_re(s)),a=""),a.toString()});return r==n?i:r}var noe=/-+([a-z0-9])/g;function KC(i){return i.replace(noe,(...e)=>e[1].toUpperCase())}function ioe(i,e){return i===0||e===0}function roe(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((o,s)=>{n.has(s)||r.push(s),n.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,JC(i,a)))}}return e}function uo(i,e,t){switch(e.type){case Bt.Trigger:return i.visitTrigger(e,t);case Bt.State:return i.visitState(e,t);case Bt.Transition:return i.visitTransition(e,t);case Bt.Sequence:return i.visitSequence(e,t);case Bt.Group:return i.visitGroup(e,t);case Bt.Animate:return i.visitAnimate(e,t);case Bt.Keyframes:return i.visitKeyframes(e,t);case Bt.Style:return i.visitStyle(e,t);case Bt.Reference:return i.visitReference(e,t);case Bt.AnimateChild:return i.visitAnimateChild(e,t);case Bt.AnimateRef:return i.visitAnimateRef(e,t);case Bt.Query:return i.visitQuery(e,t);case Bt.Stagger:return i.visitStagger(e,t);default:throw wre(e.type)}}function JC(i,e){return window.getComputedStyle(i)[e]}var ooe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Kv=class extends su{normalizePropertyName(e,t){return KC(e)}normalizeStyleValue(e,t,n,r){let o="",s=n.toString().trim();if(ooe.has(t)&&n!==0&&n!=="0")if(typeof n=="number")o="px";else{let a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(xre(e,n))}return s+o}};var Jv="*";function soe(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>aoe(n,t,e)):t.push(i),t}function aoe(i,e,t){if(i[0]==":"){let c=coe(i,t);if(typeof c=="function"){e.push(c);return}i=c}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(Fre(i)),e;let r=n[1],o=n[2],s=n[3];e.push(pL(r,s));let a=r==Jv&&s==Jv;o[0]=="<"&&!a&&e.push(pL(s,r))}function coe(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(Pre(i)),"* => *"}}var Wv=new Set(["true","1"]),$v=new Set(["false","0"]);function pL(i,e){let t=Wv.has(i)||$v.has(i),n=Wv.has(e)||$v.has(e);return(r,o)=>{let s=i==Jv||i==r,a=e==Jv||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?Wv.has(i):$v.has(i)),!a&&n&&typeof o=="boolean"&&(a=o?Wv.has(e):$v.has(e)),s&&a}}var IL=":self",loe=new RegExp(`s*${IL}s*,?`,"g");function RL(i,e,t,n){return new OC(i).build(e,t,n)}var mL="",OC=class{constructor(e){this._driver=e}build(e,t,n){let r=new NC(t);return this._resetContextStyleTimingState(r),uo(this,Sp(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=mL,e.collectedStyles=new Map,e.collectedStyles.set(mL,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(Mre()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Bt.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,o.push(this.visitState(c,t))}),c.name=u}else if(a.type==Bt.Transition){let c=this.visitTransition(a,t);n+=c.queryCount,r+=c.depCount,s.push(c)}else t.errors.push(bre())}),{type:Bt.Trigger,name:e.name,states:o,transitions:s,queryCount:n,depCount:r,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){let o=new Set,s=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{DL(c).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(Ere(e.name,[...o.values()]))}return{type:Bt.State,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=uo(this,Sp(e.animation),t),r=soe(e.expr,t.errors);return{type:Bt.Transition,matchers:r,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:iu(e.options)}}visitSequence(e,t){return{type:Bt.Sequence,steps:e.steps.map(n=>uo(this,n,t)),options:iu(e.options)}}visitGroup(e,t){let n=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=n;let a=uo(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:Bt.Group,steps:o,options:iu(e.options)}}visitAnimate(e,t){let n=hoe(e.timings,t.errors);t.currentAnimateTimings=n;let r,o=e.styles?e.styles:Ql({});if(o.type==Bt.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};n.easing&&(u.easing=n.easing),s=Ql(u)}t.currentTime+=n.duration+n.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:Bt.Animate,timings:n,style:r,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Js?n.push(a):t.errors.push(Sre(a)):n.push(new Map(Object.entries(a)));let o=!1,s=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(AL)>=0){o=!0;break}}}),{type:Bt.Style,styles:n,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;n&&o>0&&(o-=n.duration+n.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(c),h=!0;f&&(o!=r&&o>=f.startTime&&r<=f.endTime&&(t.errors.push(Cre(c,f.startTime,f.endTime,o,r)),h=!1),o=f.startTime),h&&u.set(c,{startTime:o,endTime:r}),t.options&&toe(a,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:Bt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Are()),n;let r=1,o=0,s=[],a=!1,c=!1,u=0,f=e.steps.map(_=>{let C=this._makeStyleAst(_,t),M=C.offset!=null?C.offset:foe(C.styles),S=0;return M!=null&&(o++,S=C.offset=M),c=c||S<0||S>1,a=a||S<u,u=S,s.push(S),C});c&&t.errors.push(Tre()),a&&t.errors.push(Dre());let h=e.steps.length,p=0;o>0&&o<h?t.errors.push(Ire()):o==0&&(p=r/(h-1));let g=h-1,y=t.currentTime,x=t.currentAnimateTimings,v=x.duration;return f.forEach((_,C)=>{let M=p>0?C==g?1:p*C:s[C],S=M*v;t.currentTime=y+x.delay+S,x.duration=S,this._validateStyleAst(_,t),_.offset=M,n.styles.push(_)}),n}visitReference(e,t){return{type:Bt.Reference,animation:uo(this,Sp(e.animation),t),options:iu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Bt.AnimateChild,options:iu(e.options)}}visitAnimateRef(e,t){return{type:Bt.AnimateRef,animation:this.visitReference(e.animation,t),options:iu(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=uoe(e.selector);t.currentQuerySelector=n.length?n+" "+o:o,fo(t.collectedStyles,t.currentQuerySelector,new Map);let a=uo(this,Sp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:Bt.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:iu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Rre());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Zv(e.timings,t.errors,!0);return{type:Bt.Stagger,animation:uo(this,Sp(e.animation),t),timings:n,options:null}}};function uoe(i){let e=!!i.split(/\s*,\s*/).find(t=>t==IL);return e&&(i=i.replace(loe,"")),i=i.replace(/@\*/g,Yv).replace(/@\w+/g,t=>Yv+"-"+t.slice(1)).replace(/:animating/g,UC),[i,e]}function doe(i){return i?ze({},i):null}var NC=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function foe(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function hoe(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let o=Zv(i,e).duration;return CC(o,0,"")}let t=i;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=CC(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=Zv(t,e);return CC(r.duration,r.delay,r.easing)}function iu(i){return i?(i=ze({},i),i.params&&(i.params=doe(i.params))):i={},i}function CC(i,e,t){return{duration:i,delay:e,easing:t}}function QC(i,e,t,n,r,o,s=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Tp=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},poe=1,moe=":enter",goe=new RegExp(moe,"g"),yoe=":leave",voe=new RegExp(yoe,"g");function UL(i,e,t,n,r,o=new Map,s=new Map,a,c,u=[]){return new LC().buildKeyframes(i,e,t,n,r,o,s,a,c,u)}var LC=class{buildKeyframes(e,t,n,r,o,s,a,c,u,f=[]){u=u||new Tp;let h=new kC(e,t,u,r,o,f,[]);h.options=c;let p=c.delay?za(c.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,c),uo(this,n,h);let g=h.timelines.filter(y=>y.containsAnimation());if(g.length&&a.size){let y;for(let x=g.length-1;x>=0;x--){let v=g[x];if(v.element===t){y=v;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,h.errors,c)}return g.length?g.map(y=>y.buildKeyframes()):[QC(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:za(Ap(o,r?.params??{},t.errors));n.delayNextStep(s)}}}_visitSubInstructions(e,t,n){let o=t.currentTimeline.currentTime,s=n.duration!=null?za(n.duration):null,a=n.delay!=null?za(n.delay):null;return s!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),uo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==Bt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Qv);let s=za(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>uo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?za(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),uo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,r=t.params?Ap(n,t.params,t.errors):n;return Zv(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());let o=e.style;o.type==Bt.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(n.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(o):n.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,r=t.currentTimeline.duration,o=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?za(r.delay):0;o&&(t.previousNode.type===Bt.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Qv);let s=n,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,f)=>{t.currentQueryIndex=f;let h=t.createSubContext(e.options,u);o&&h.delayNextStep(o),u===t.element&&(c=h.currentTimeline),uo(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let p=h.currentTimeline.currentTime;s=Math.max(s,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=n.currentStaggerTime;break}let f=t.currentTimeline;c&&f.delayNextStep(c);let h=f.currentTime;uo(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-h+(r.startTime-n.currentTimeline.startTime)}},Qv={},kC=class i{constructor(e,t,n,r,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Qv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new e_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,r=this.options;n.duration!=null&&(r.duration=za(n.duration)),n.delay!=null&&(r.delay=za(n.delay));let o=n.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Ap(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){let r=t||this.element,o=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Qv,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},o=new BC(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(goe,"."+this._enterClassName),e=e.replace(voe,"."+this._leaveClassName);let c=n!=1,u=this._driver.query(this.element,e,c);n!==0&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),a.push(...u)}return!o&&a.length==0&&s.push(Ure(t)),a}},e_=class i{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=poe,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Js),this._currentKeyframe.set(t,Js);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=_oe(e,this._globalTimelineStyles);for(let[a,c]of s){let u=Ap(c,o,n);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Js),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((f,h)=>{f===Av?e.add(h):f===Js&&t.add(h)}),n||u.set("offset",c/this.duration),r.push(u)});let o=[...e.values()],s=[...t.values()];if(n){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return QC(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},BC=class extends e_{constructor(e,t,n,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=n+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let u=new Map(e[0]);u.set("offset",gL(a)),o.push(u);let f=e.length-1;for(let h=1;h<=f;h++){let p=new Map(e[h]),g=p.get("offset"),y=t+g*n;p.set("offset",gL(y/s)),o.push(p)}n=s,t=0,r="",e=o}return QC(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}};function gL(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function _oe(i,e){let t=new Map,n;return i.forEach(r=>{if(r==="*"){n??=e.keys();for(let o of n)t.set(o,Js)}else for(let[o,s]of r)t.set(o,s)}),t}function yL(i,e,t,n,r,o,s,a,c,u,f,h,p){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:n,toStyles:s,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:f,totalTime:h,errors:p}}var AC={},t_=class{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return woe(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,o,s,a,c,u,f){let h=[],p=this.ast.options&&this.ast.options.params||AC,g=a&&a.params||AC,y=this.buildStyles(n,g,h),x=c&&c.params||AC,v=this.buildStyles(r,x,h),_=new Set,C=new Map,M=new Map,S=r==="void",H={params:FL(x,p),delay:this.ast.options?.delay},P=f?[]:UL(e,t,this.ast.animation,o,s,y,v,H,u,h),F=0;return P.forEach($=>{F=Math.max($.duration+$.delay,F)}),h.length?yL(t,this._triggerName,n,r,S,y,v,[],[],C,M,F,h):(P.forEach($=>{let U=$.element,D=fo(C,U,new Set);$.preStyleProps.forEach(le=>D.add(le));let j=fo(M,U,new Set);$.postStyleProps.forEach(le=>j.add(le)),U!==t&&_.add(U)}),yL(t,this._triggerName,n,r,S,y,v,P,[..._.values()],C,M,F))}};function woe(i,e,t,n,r){return i.some(o=>o(e,t,n,r))}function FL(i,e){let t=ze({},e);return Object.entries(i).forEach(([n,r])=>{r!=null&&(t[n]=r)}),t}var VC=class{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,r=FL(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Ap(s,r,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),n.set(a,s)})}),n}};function xoe(i,e,t){return new zC(i,e,t)}var zC=class{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new VC(r.style,o,n))}),vL(this.states,"true","1"),vL(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new t_(e,r,this.states))}),this.fallbackTransition=Moe(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(s=>s.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function Moe(i,e,t){let n=[(s,a)=>!0],r={type:Bt.Sequence,steps:[],options:null},o={type:Bt.Transition,animation:r,matchers:n,options:null,queryCount:0,depCount:0};return new t_(i,o,e)}function vL(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var boe=new Tp,HC=class{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let n=[],r=[],o=RL(this._driver,t,n,r);if(n.length)throw Lre(n);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,n){let r=e.element,o=EL(this._normalizer,e.keyframes,t,n);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=UL(this._driver,t,o,TL,RC,new Map,new Map,n,boe,r),s.forEach(f=>{let h=fo(a,f.element,new Map);f.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(kre()),s=[]),r.length)throw Bre(r);a.forEach((f,h)=>{f.forEach((p,g)=>{f.set(g,this._driver.computeStyle(h,g,Js))})});let c=s.map(f=>{let h=a.get(f.element);return this._buildPlayer(f,new Map,h)}),u=Kc(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Vre(e);return t}listen(e,t,n,r){let o=XC(t,"","","");return qC(this._getPlayer(e),n,o,r),()=>{}}command(e,t,n,r){if(n=="register"){this.register(e,r[0]);return}if(n=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(n){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},_L="ng-animate-queued",Eoe=".ng-animate-queued",TC="ng-animate-disabled",Soe=".ng-animate-disabled",Coe="ng-star-inserted",Aoe=".ng-star-inserted",Toe=[],PL={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Doe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xs="__ng_removed",Dp=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),r=n?e.value:e;if(this.value=Roe(r),n){let o=e,{value:s}=o,a=wm(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(r=>{n[r]==null&&(n[r]=t[r])})}}},Cp="void",DC=new Dp(Cp),jC=class{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,zo(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw zre(n,t);if(n==null||n.length==0)throw Hre(t);if(!Uoe(n))throw jre(n,t);let o=fo(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};o.push(s);let a=fo(this._engine.statesByElement,e,new Map);return a.has(t)||(zo(e,Gv),zo(e,Gv+"-"+t),a.set(t,DC)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Gre(e);return t}trigger(e,t,n,r=!0){let o=this._getTrigger(t),s=new Ip(this.id,t,e),a=this._engine.statesByElement.get(e);a||(zo(e,Gv),zo(e,Gv+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new Dp(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=DC),!(u.value===Cp)&&c.value===u.value){if(!Ooe(c.params,u.params)){let x=[],v=o.matchStyles(c.value,c.params,x),_=o.matchStyles(u.value,u.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{ru(e,v),ea(e,_)})}return}let p=fo(this._engine.playersByElement,e,[]);p.forEach(x=>{x.namespaceId==this.id&&x.triggerName==t&&x.queued&&x.destroy()});let g=o.matchTransition(c.value,u.value,e,u.params),y=!1;if(!g){if(!r)return;g=o.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:c,toState:u,player:s,isFallbackTransition:y}),y||(zo(e,_L),s.onStart(()=>{af(e,_L)})),s.onDone(()=>{let x=this.players.indexOf(s);x>=0&&this.players.splice(x,1);let v=this._engine.playersByElement.get(e);if(v){let _=v.indexOf(s);_>=0&&v.splice(_,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,Yv,!0);n.forEach(r=>{if(r[xs])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,u)=>{if(s.set(u,c.value),this._triggers.has(u)){let f=this.trigger(e,u,Cp,r);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),n&&Kc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let c=this._triggers.get(s).fallbackTransition,u=n.get(s)||DC,f=new Dp(Cp),h=new Ip(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:u,toState:f,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){let o=n.players.length?n.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(n.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{let o=e[xs];(!o||o===PL)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){zo(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let r=n.player;if(r.destroyed)return;let o=n.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==n.triggerName){let c=XC(o,n.triggerName,n.fromState.value,n.toState.value);c._data=e,qC(n.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{let o=n.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},GC=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new jC(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=r.get(a);if(c){let u=n.indexOf(c);n.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let r of n.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,n,r){if(qv(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!qv(t))return;let o=t[xs];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),zo(e,TC)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),af(e,TC))}removeNode(e,t,n){if(qv(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,r,o){this.collectedLeaveElements.push(t),t[xs]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,n,r,o){return qv(t)?this._fetchNamespace(e).listen(t,n,r,o):()=>{}}_buildInstruction(e,t,n,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Yv,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,UC,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Kc(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[xs];if(t&&t.setForRemoval){if(e[xs]=PL,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(TC)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Soe,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let r=this.collectedEnterElements[n];zo(r,Coe)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let r=this.collectedLeaveElements[n];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?Kc(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw Wre(e)}_flushAnimations(e,t){let n=new Tp,r=[],o=new Map,s=[],a=new Map,c=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(W=>{f.add(W);let Q=this.driver.query(W,Eoe,!0);for(let X=0;X<Q.length;X++)f.add(Q[X])});let h=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=ML(p,this.collectedEnterElements),y=new Map,x=0;g.forEach((W,Q)=>{let X=TL+x++;y.set(Q,X),W.forEach(me=>zo(me,X))});let v=[],_=new Set,C=new Set;for(let W=0;W<this.collectedLeaveElements.length;W++){let Q=this.collectedLeaveElements[W],X=Q[xs];X&&X.setForRemoval&&(v.push(Q),_.add(Q),X.hasAnimation?this.driver.query(Q,Aoe,!0).forEach(me=>_.add(me)):C.add(Q))}let M=new Map,S=ML(p,Array.from(_));S.forEach((W,Q)=>{let X=RC+x++;M.set(Q,X),W.forEach(me=>zo(me,X))}),e.push(()=>{g.forEach((W,Q)=>{let X=y.get(Q);W.forEach(me=>af(me,X))}),S.forEach((W,Q)=>{let X=M.get(Q);W.forEach(me=>af(me,X))}),v.forEach(W=>{this.processLeaveNode(W)})});let H=[],P=[];for(let W=this._namespaceList.length-1;W>=0;W--)this._namespaceList[W].drainQueuedTransitions(t).forEach(X=>{let me=X.player,Le=X.element;if(H.push(me),this.collectedEnterElements.length){let ae=Le[xs];if(ae&&ae.setForMove){if(ae.previousTriggersValues&&ae.previousTriggersValues.has(X.triggerName)){let We=ae.previousTriggersValues.get(X.triggerName),Pe=this.statesByElement.get(X.element);if(Pe&&Pe.has(X.triggerName)){let ke=Pe.get(X.triggerName);ke.value=We,Pe.set(X.triggerName,ke)}}me.destroy();return}}let $e=!h||!this.driver.containsElement(h,Le),he=M.get(Le),ee=y.get(Le),k=this._buildInstruction(X,n,ee,he,$e);if(k.errors&&k.errors.length){P.push(k);return}if($e){me.onStart(()=>ru(Le,k.fromStyles)),me.onDestroy(()=>ea(Le,k.toStyles)),r.push(me);return}if(X.isFallbackTransition){me.onStart(()=>ru(Le,k.fromStyles)),me.onDestroy(()=>ea(Le,k.toStyles)),r.push(me);return}let q=[];k.timelines.forEach(ae=>{ae.stretchStartingKeyframe=!0,this.disabledNodes.has(ae.element)||q.push(ae)}),k.timelines=q,n.append(Le,k.timelines);let pe={instruction:k,player:me,element:Le};s.push(pe),k.queriedElements.forEach(ae=>fo(a,ae,[]).push(me)),k.preStyleProps.forEach((ae,We)=>{if(ae.size){let Pe=c.get(We);Pe||c.set(We,Pe=new Set),ae.forEach((ke,et)=>Pe.add(et))}}),k.postStyleProps.forEach((ae,We)=>{let Pe=u.get(We);Pe||u.set(We,Pe=new Set),ae.forEach((ke,et)=>Pe.add(et))})});if(P.length){let W=[];P.forEach(Q=>{W.push($re(Q.triggerName,Q.errors))}),H.forEach(Q=>Q.destroy()),this.reportError(W)}let F=new Map,$=new Map;s.forEach(W=>{let Q=W.element;n.has(Q)&&($.set(Q,Q),this._beforeAnimationBuild(W.player.namespaceId,W.instruction,F))}),r.forEach(W=>{let Q=W.element;this._getPreviousPlayers(Q,!1,W.namespaceId,W.triggerName,null).forEach(me=>{fo(F,Q,[]).push(me),me.destroy()})});let U=v.filter(W=>bL(W,c,u)),D=new Map;xL(D,this.driver,C,u,Js).forEach(W=>{bL(W,c,u)&&U.push(W)});let le=new Map;g.forEach((W,Q)=>{xL(le,this.driver,new Set(W),c,Av)}),U.forEach(W=>{let Q=D.get(W),X=le.get(W);D.set(W,new Map([...Q?.entries()??[],...X?.entries()??[]]))});let re=[],xe=[],ve={};s.forEach(W=>{let{element:Q,player:X,instruction:me}=W;if(n.has(Q)){if(f.has(Q)){X.onDestroy(()=>ea(Q,me.toStyles)),X.disabled=!0,X.overrideTotalTime(me.totalTime),r.push(X);return}let Le=ve;if($.size>1){let he=Q,ee=[];for(;he=he.parentNode;){let k=$.get(he);if(k){Le=k;break}ee.push(he)}ee.forEach(k=>$.set(k,Le))}let $e=this._buildAnimation(X.namespaceId,me,F,o,le,D);if(X.setRealPlayer($e),Le===ve)re.push(X);else{let he=this.playersByElement.get(Le);he&&he.length&&(X.parentPlayer=Kc(he)),r.push(X)}}else ru(Q,me.fromStyles),X.onDestroy(()=>ea(Q,me.toStyles)),xe.push(X),f.has(Q)&&r.push(X)}),xe.forEach(W=>{let Q=o.get(W.element);if(Q&&Q.length){let X=Kc(Q);W.setRealPlayer(X)}}),r.forEach(W=>{W.parentPlayer?W.syncPlayerEvents(W.parentPlayer):W.destroy()});for(let W=0;W<v.length;W++){let Q=v[W],X=Q[xs];if(af(Q,RC),X&&X.hasAnimation)continue;let me=[];if(a.size){let $e=a.get(Q);$e&&$e.length&&me.push(...$e);let he=this.driver.query(Q,UC,!0);for(let ee=0;ee<he.length;ee++){let k=a.get(he[ee]);k&&k.length&&me.push(...k)}}let Le=me.filter($e=>!$e.destroyed);Le.length?Foe(this,Q,Le):this.processLeaveNode(Q)}return v.length=0,re.forEach(W=>{this.players.push(W),W.onDone(()=>{W.destroy();let Q=this.players.indexOf(W);this.players.splice(Q,1)}),W.play()}),re}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==Cp;a.forEach(u=>{u.queued||!c&&u.triggerName!=r||s.push(u)})}}return(n||r)&&(s=s.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,n){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let c of t.timelines){let u=c.element,f=u!==o,h=fo(n,u,[]);this._getPreviousPlayers(u,f,s,a,t.toState).forEach(g=>{let y=g.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),g.destroy(),h.push(g)})}ru(o,t.fromStyles)}_buildAnimation(e,t,n,r,o,s){let a=t.triggerName,c=t.element,u=[],f=new Set,h=new Set,p=t.timelines.map(y=>{let x=y.element;f.add(x);let v=x[xs];if(v&&v.removedBeforeQueried)return new qc(y.duration,y.delay);let _=x!==c,C=Poe((n.get(x)||Toe).map(F=>F.getRealPlayer())).filter(F=>{let $=F;return $.element?$.element===x:!1}),M=o.get(x),S=s.get(x),H=EL(this._normalizer,y.keyframes,M,S),P=this._buildPlayer(y,H,C);if(y.subTimeline&&r&&h.add(x),_){let F=new Ip(e,a,x);F.setRealPlayer(P),u.push(F)}return P});u.forEach(y=>{fo(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>Ioe(this.playersByQueriedElement,y.element,y))}),f.forEach(y=>zo(y,hL));let g=Kc(p);return g.onDestroy(()=>{f.forEach(y=>af(y,hL)),ea(c,t.toStyles)}),h.forEach(y=>{fo(r,y,[]).push(g)}),g}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new qc(e.duration,e.delay)}},Ip=class{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new qc,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>qC(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){fo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Ioe(i,e,t){let n=i.get(e);if(n){if(n.length){let r=n.indexOf(t);n.splice(r,1)}n.length==0&&i.delete(e)}return n}function Roe(i){return i??null}function qv(i){return i&&i.nodeType===1}function Uoe(i){return i=="start"||i=="done"}function wL(i,e){let t=i.style.display;return i.style.display=e??"none",t}function xL(i,e,t,n,r){let o=[];t.forEach(c=>o.push(wL(c)));let s=[];n.forEach((c,u)=>{let f=new Map;c.forEach(h=>{let p=e.computeStyle(u,h,r);f.set(h,p),(!p||p.length==0)&&(u[xs]=Doe,s.push(u))}),i.set(u,f)});let a=0;return t.forEach(c=>wL(c,o[a++])),s}function ML(i,e){let t=new Map;if(i.forEach(a=>t.set(a,[])),e.length==0)return t;let n=1,r=new Set(e),o=new Map;function s(a){if(!a)return n;let c=o.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:r.has(u)?c=n:c=s(u),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==n&&t.get(c).push(a)}),t}function zo(i,e){i.classList?.add(e)}function af(i,e){i.classList?.remove(e)}function Foe(i,e,t){Kc(t).onDone(()=>i.processLeaveNode(e))}function Poe(i){let e=[];return OL(i,e),e}function OL(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof _p?OL(n.players,e):e.push(n)}}function Ooe(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||i[o]!==e[o])return!1}return!0}function bL(i,e,t){let n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(o=>r.add(o)):e.set(i,n),t.delete(i),!0}var lf=class{constructor(e,t,n){this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new GC(e.body,t,n),this._timelineEngine=new HC(e.body,t,n),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,n,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let c=[],u=[],f=RL(this._driver,o,c,u);if(c.length)throw Ore(r,c);u.length&&void 0,a=xoe(r,f,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if(n.charAt(0)=="@"){let[o,s]=dL(n),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,o){if(n.charAt(0)=="@"){let[s,a]=dL(n);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,n,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Noe(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=IC(e[0]),e.length>1&&(n=IC(e[e.length-1]))):e instanceof Map&&(t=IC(e)),t||n?new WC(i,t,n):null}var cf=class cf{constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n,this._state=0;let r=cf.initialStylesByElement.get(e);r||cf.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&ea(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ea(this._element,this._initialStyles),this._endStyles&&(ea(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(cf.initialStylesByElement.delete(this._element),this._startStyles&&(ru(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ru(this._element,this._endStyles),this._endStyles=null),ea(this._element,this._initialStyles),this._state=3)}};cf.initialStylesByElement=new WeakMap;var WC=cf;function IC(i){let e=null;return i.forEach((t,n)=>{Loe(n)&&(e=e||new Map,e.set(n,t))}),e}function Loe(i){return i==="display"||i==="position"}var n_=class{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{r!=="offset"&&e.set(r,this._finished?n:JC(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},i_=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return SL(e,t)}getParentElement(e){return YC(e)}query(e,t,n){return CL(e,t,n)}computeStyle(e,t,n){return JC(e,t)}animate(e,t,n,r,o,s=[]){let a=r==0?"both":"forwards",c={duration:n,delay:r,fill:a};o&&(c.easing=o);let u=new Map,f=s.filter(g=>g instanceof n_);ioe(n,r)&&f.forEach(g=>{g.currentSnapshot.forEach((y,x)=>u.set(x,y))});let h=eoe(t).map(g=>new Map(g));h=roe(e,h,u);let p=Noe(e,h);return new n_(e,h,c,p)}};var Xv="@",NL="@.disabled",r_=class{constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Xv&&t==NL?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},$C=class extends r_{constructor(e,t,n,r,o){super(t,n,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Xv?t.charAt(1)=="."&&t==NL?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==Xv){let r=koe(e),o=t.slice(1),s="";return o.charAt(0)!=Xv&&([o,s]=Boe(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,n,a)})}return this.delegate.listen(e,t,n)}};function koe(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function Boe(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var o_=class{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let n="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,f=u.get(r);if(!f){let h=()=>u.delete(r);f=new r_(n,r,this.engine,h),u.set(r,f)}return f}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new $C(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var zoe=(()=>{let e=class e extends lf{constructor(n,r,o){super(n,r,o)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(Xe(ii),Xe(ou),Xe(su))},e.\u0275prov=Be({token:e,factory:e.\u0275fac});let i=e;return i})();function Hoe(){return new Kv}function joe(i,e,t){return new o_(i,e,t)}var LL=[{provide:su,useFactory:Hoe},{provide:lf,useClass:zoe},{provide:hc,useFactory:joe,deps:[w0,lf,kn]}],Goe=[{provide:ou,useFactory:()=>new i_},{provide:U1,useValue:"BrowserAnimations"},...LL],Oge=[{provide:ou,useClass:ZC},{provide:U1,useValue:"NoopAnimations"},...LL];function kL(){return wa("NgEagerAnimations"),[...Goe]}var Woe=(i,e)=>({appearBody:i,disappearBody:e}),tA=(()=>{class i{errorService;cookieService;errorMessage;constructor(t,n){this.errorService=t,this.cookieService=n}ngOnInit(){this.errorService.error$.subscribe(t=>{this.errorMessage=t})}reloadPage(){window.location.reload()}logout(){this.cookieService.deleteJwt(),this.cookieService.deleteUserType(),this.reloadPage()}static \u0275fac=function(n){return new(n||i)(fe(Ji),fe(Vi))};static \u0275cmp=ln({type:i,selectors:[["app-error-handler"]],standalone:!0,features:[un],decls:11,vars:5,consts:[[1,"body",3,"ngClass"],[1,"textSpan"],[1,"title"],[1,"errorMessage"],[1,"btnsSpan"],[1,"solutionBtn",3,"click"],["loading","lazy","src","/assets/images/reloadIcon.svg","alt",""],["loading","lazy","src","/assets/images/logoutIcon.svg","alt",""]],template:function(n,r){n&1&&(B(0,"span",0)(1,"span",1)(2,"h2",2),ge(3,"Something went wrong"),V(),B(4,"h3",3),ge(5),V()(),B(6,"span",4)(7,"button",5),Fe("click",function(){return r.reloadPage()}),Ie(8,"img",6),V(),B(9,"button",5),Fe("click",function(){return r.logout()}),Ie(10,"img",7),V()()()),n&2&&(_e("ngClass",ZU(2,Woe,r.errorMessage.length>0,r.errorMessage.length<1)),de(5),Mn(r.errorMessage))},dependencies:[Ls],styles:['@charset "UTF-8";@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSHK_IwU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMSXK_IwU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dNIFZifjKcF5UAWdDRYERMR3K_.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEySRV3U.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqEiSRV3U.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dSIFZifjKcF5UAWdDRYERE_FeqHCSR.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE58RWq7.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dPIFZifjKcF5UAWdDRYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFqaHjyV.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFuaHjyV.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Mono;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacemono/v14/i7dMIFZifjKcF5UAWdDRaPpZUFWaHg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{font-family:Space Mono,monospace}body[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden}html[_ngcontent-%COMP%]{scroll-behavior:smooth}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px #fff;background-color:#000;width:clamp(250px,30vw,350px);display:flex;flex-direction:row;padding:0 10px;justify-content:space-around;position:fixed;bottom:0;opacity:0;left:50%;transform:translate(-50%);transition:all .5s ease-in-out}.appearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_appearHandler .5s forwards}.disappearBody[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_disappearHandler .5s forwards}.textSpan[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;padding:10px 0;font-size:105%;width:60%;justify-content:center}.title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1em}.errorMessage[_ngcontent-%COMP%]{color:red;margin:0;width:100%;font-weight:400;font-size:.75em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.solutionBtn[_ngcontent-%COMP%]{width:100%;height:100%;background:none;margin:0;border:none;cursor:pointer}.btnsSpan[_ngcontent-%COMP%]{display:flex;justify-self:flex-end;width:26%}.reloadPageBtn[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:50%}@keyframes _ngcontent-%COMP%_appearHandler{0%{opacity:0;bottom:0}to{opacity:1;bottom:50px}}@keyframes _ngcontent-%COMP%_disappearHandler{0%{opacity:1;bottom:50px}to{opacity:0;bottom:0}}']})}return i})();var s_=(()=>{class i{title="HouseQuality";static \u0275fac=function(n){return new(n||i)};static \u0275cmp=ln({type:i,selectors:[["app-root"]],standalone:!0,features:[rs([tA,Qs,sf,Vi,js,zv,Zc,Lv,Ac,rf,Hv,kv]),un],decls:2,vars:0,template:function(n,r){n&1&&Ie(0,"router-outlet")(1,"app-error-handler")},dependencies:[ob,tA,HF],styles:["app-plan-house[_ngcontent-%COMP%]{width:80vw;display:block}"]})}return i})();var nA={providers:[FP(lL),KF(),kL()]};M0(s_,nA).catch(i=>console.error(i));M0(s_,nA).then(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("app/client-side/\u0441sw.js").then(i=>console.log("Service Worker \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D:",i)).catch(i=>console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 Service Worker:",i))}).catch(i=>console.error(i));
